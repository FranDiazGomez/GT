/*! VisiWinJS | INOSOFT GmbH | 73.7.74.0 + 2024-06-07 */

var VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin;VisiWin.Application.modulVersion("VisiWinJS.js","73.7.74.0","2024-06-07"),function(x){"use strict";function isUndefined(x){return void 0===x}x.isUndefined=isUndefined,x.isObject=function isObject(x){return null!==x&&"object"==typeof x},x.isFunction=function isFunction(x){return"function"==typeof x},x.isString=function isString(x){return"string"==typeof x},x.isNumber=function isNumber(x){return"number"==typeof x},x.isBoolean=function isBoolean(x){return"boolean"==typeof x},x.isArray=function isArray(x){return x instanceof Array},x.isDate=function isDate(x){return x instanceof Date&&!isNaN(x.getTime())},x.isNullOrUndefined=function isNullOrUndefined(x){return!(null!==x&&!isUndefined(x))},x.isNullOrEmpty=function isNullOrEmpty(x){return null===x||""===x},x.Guid=function Guid(){const S4=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return S4()+S4()+"-"+S4()+"-"+S4()+"-"+S4()+"-"+S4()+S4()+S4()},x.stringStartsWith=function stringStartsWith(A,V,R){return!x.isNullOrUndefined(A)&&(R=R||0,A.indexOf(V,R)===R)},x.stringEndsWith=function stringEndsWith(A,V,R){if(x.isNullOrUndefined(A))return!1;const D=A.toString();("number"!=typeof R||!isFinite(R)||Math.floor(R)!==R||R>D.length)&&(R=D.length),R-=V.length;const N=D.indexOf(V,R);return-1!==N&&N===R},x.sleep=x=>new Promise(A=>setTimeout(A,x))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";function valueToBoolean(x){if(null==x)return!1;if("boolean"==typeof x)return!0===x;if("string"==typeof x)switch(x.toLowerCase()){case"false":case"0":case"off":case"no":case"":return!1;default:return!0}return"number"==typeof x&&0!==x}A.valueToBoolean=valueToBoolean,A.stringToBoolean=function stringToBoolean(x){return valueToBoolean(x)},A.stringContains=function stringContains(A,V){return!!x.isString(A)&&(!!x.isString(V)&&-1!==A.indexOf(V))},A.makeString=function makeString(A,V=","){if(null===A)return"null";if(x.isUndefined(A))return"undefined";if(x.isString(A))return A.toString();{const V={};for(const x in A)Object.prototype.hasOwnProperty.call(A,x)&&(V[x]=A[x]);if(x.isObject(V)){const A=[];return JSON.stringify(V,(V,R)=>{if(x.isObject(R)){if(A&&-1!==A.indexOf(R))return;A.push(R)}return R}," ")}return x.isFunction(V)||x.isString(V)?V.toString():"undefined"}},A.SimpleObjectJSONClone=function SimpleObjectJSONClone(x){try{return JSON.parse(JSON.stringify(x))}catch(x){return x}};A.EnumHelper=class EnumHelper{static getNamesAndValues(x){return this.getNames(x).map(A=>({name:A,value:x[A]}))}static getNames(x){return this.getObjValues(x).filter(x=>"string"==typeof x)}static getValues(x){return this.getObjValues(x).filter(x=>"number"==typeof x)}static convertToString(A,V){return x.isString(V)?V.toString():A[V]}static convertToNumber(A,V){if(x.isNumber(V))return V;try{const x=parseInt(V,10);if(!isNaN(x))return x}catch(x){}return A[V]}static getObjValues(x){return Object.keys(x).map(A=>x[A])}static isEnum(x){const A=Object.keys(x),V=[];for(const R of A){let A=x[R];"number"==typeof A&&(A=A.toString()),V.push(A)}for(const x of A)if(V.indexOf(x)<0)return!1;return!0}},A.getQueryVariable=function getQueryVariable(x){if(window.location&&window.location.search){const A=window.location.search.substring(1).split("&");for(let V=0;V<A.length;V++){const R=A[V].split("=");if(R[0]===x)return R[1]}}return!1},A.ArrayContains=function ArrayContains(A,V,R){let D=A.length;for(;D--;){if(R){if(x.isArray(A[D][R]))for(let x=0;x<A.length;x++){if(ArrayContains(A[x][R],V,R))return!0}if(A[D][R]===V)return!0}if(A[D]===V)return!0}return!1},A.isFloatingType=function isFloatingType(A){return A===x.System.DataAccess.TypeCode.Single||A===x.System.DataAccess.TypeCode.Double||A===x.System.DataAccess.TypeCode.Decimal},A.isIntergerType=function isIntergerType(A){return x.System.DataAccess.TypeCode.Char===A||x.System.DataAccess.TypeCode.Int16===A||x.System.DataAccess.TypeCode.Int32===A||x.System.DataAccess.TypeCode.Int64===A||x.System.DataAccess.TypeCode.Byte===A||x.System.DataAccess.TypeCode.SByte===A||x.System.DataAccess.TypeCode.UInt16===A||x.System.DataAccess.TypeCode.UInt32===A||x.System.DataAccess.TypeCode.UInt64===A}}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){"use strict";A.BaseType=class BaseType{constructor(){this.TypeName="",this.Namespace=""}FullName(){return this.Namespace+"."+this.TypeName}toString(){return this.Namespace+"."+this.TypeName}};A.BaseClass=class BaseClass{constructor(){this.Type=new x.Internal.System.BaseType,this.isDisposable=!0,this.Tag={},this.Type.Namespace="VisiWin.System",this.Type.TypeName="BaseClass"}_getClassName(){const x=/function (.{1,})\(/.exec(this.constructor.toString());return x&&x.length>1?x[1]:""}toString(){return"BaseClass"===this.Type.TypeName||""===this.Type.TypeName?this._getClassName():this.Type.TypeName}toJSONString(){const A=[];return JSON.stringify(this,(V,R)=>{if(x.isObject(R)){if(-1!==A.indexOf(R))return null;A.push(R)}return R})}Dispose(){this.isDisposable&&(this.isDisposable=!1);for(const A in this){if(this[A]&&this[A]instanceof x.Internal.System.Events.TypedEvent)try{this[A].remove(),delete this[A]}catch(A){x.System.Diagnostics.Logger.ErrorLog.log("Base class item dispose error.")}if(x.isObject(this[A]))try{this[A].isDisposable&&(this[A].Dispose(),this[A]=null,delete this[A])}catch(A){x.System.Diagnostics.Logger.ErrorLog.log("Base class item dispose error.")}Object.prototype.hasOwnProperty.call(this,A)&&(this[A]=null,delete this[A])}}}}(A.System||(A.System={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(A){"use strict";A.TypedEvent=class TypedEvent{constructor(){this._listeners=[],this._context=[]}add(x,A){this._listeners.push(x),this._context.push(A||{})}remove(A,V){if(x.isFunction(A)){for(let x=0,R=this._listeners.length;x<R;x++)if(V){if(""+this._context[x]==""+V&&""+this._listeners[x]==""+A){this._listeners.splice(x,1)[0]=null;this._context.splice(x,1)[0]=null;break}}else if(""+this._listeners[x]==""+A){this._listeners.splice(x,1)[0]=null;this._context.splice(x,1)[0]=null;break}}else{for(let x=0;x<this._listeners.length;x++)this._listeners[x]=null;for(let x=0;x<this._context.length;x++)this._context[x]=null;this._listeners=[],this._context=[]}}trigger(...x){const A=this._context.slice(0),V=this._listeners.slice(0);for(let R=0,D=V.length;R<D;R++)V[R].apply(A[R],x||[])}}}(A.Events||(A.Events={}))}(A.System||(A.System={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){!function(x){"use strict";x.ExceptionBase=class ExceptionBase{constructor(x,A){this.name=x,this.message=A}}}(x.Exception||(x.Exception={}))}(x.System||(x.System={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(A){"use strict";A.onAuthorizedException=new x.Internal.System.Events.TypedEvent;class AuthorizedException extends x.Internal.System.Exception.ExceptionBase{constructor(A,V,R,D=!1,N="RequestID_Undefined",U="",B=""){super(A,V),this.name=A,this.authorized=D,this.requestID=N,this.result=U,this.message=V,this.text=B,this.param=R,x.Internal.System.Exception.onAuthorizedException.trigger({name:A,message:V,authorized:D,requestID:N,result:U,text:B,param:R}),x.System.Diagnostics.Logger.ErrorLog.log(A,{message:V,authorized:D,requestID:N,result:U,text:B,param:R})}}A.AuthorizedException=AuthorizedException}(A.Exception||(A.Exception={}))}(A.System||(A.System={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(A){"use strict";class WindowException extends x.Internal.System.Exception.ExceptionBase{constructor(A,V,R,D,N){N?(super(A,N.name),this.error=N):(super(A,A),this.error={},this.error.name=A,this.error.fileName=V,this.error.lineNumber=R,this.error.columnNumber=D,this.error.stack="-"),this.name=A,this.message=A,x.System.Diagnostics.Logger.ErrorLog.log("WindowException: ",{Error:this})}}A.WindowException=WindowException}(A.Exception||(A.Exception={}))}(A.System||(A.System={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(A){class ParameterException extends x.Internal.System.Exception.ExceptionBase{constructor(x,A,V){super(x,A),this.name=x,this.message=A,this.param=V||null,this.handleError()}handleError(){this.logError()}logError(){let A=this.message,V=this.param,R=this.name;x.System.Diagnostics.Logger.ErrorLog.log("ParameterException => "+R,{Message:A,Param:V})}}A.ParameterException=ParameterException,A.isValidStringParam=function isValidStringParam(A,V,R){let D=!0;if(x.isNullOrUndefined(A)?D=!1:x.isString(A)?0===A.length&&(D=!1):D=!1,!D)try{new ParameterException(V,R+" is not valid",A)}catch(x){}return D},A.isValidNumberParam=function isValidNumberParam(A,V,R){let D=!0;return x.isNullOrUndefined(A)?D=!1:x.isNumber(A)||(D=!1),D||new ParameterException(V,R+" is not valid",A),D},A.isValidAnyParam=function isValidAnyParam(A,V,R){let D=!0;return(x.isNullOrUndefined(A)||x.isNullOrEmpty(A))&&(D=!1),D||new ParameterException(V,R+" is not valid",A),D},A.isValidStringArrayParam=function isValidStringArrayParam(A,V,R){let D=!0;x.isArray(A)||(D=!1);for(let N=0;N<A.length;N++)if(x.isNullOrUndefined(A[N])?D=!1:x.isString(A[N])?0===A[N].length&&(D=!1):D=!1,!D)try{new ParameterException(V,R+" is not valid",A[N])}catch(x){}return D},A.isValidNumberArrayParam=function isValidNumberArrayParam(A,V,R){let D=!0;x.isArray(A)||(D=!1);for(let N=0;N<A.length;N++)x.isNullOrUndefined(A[N])?D=!1:x.isNumber(A[N])||(D=!1),D||new ParameterException(V,R+" is not valid",A[N]);return D},A.isValidAnyArrayParam=function isValidAnyArrayParam(A,V,R){let D=!0;x.isArray(A)||(D=!1);for(let N=0;N<A.length;N++)(x.isNullOrUndefined(A[N])||x.isNullOrEmpty(A[N]))&&(D=!1),D||new ParameterException(V,R+" is not valid",A[N]);return D}}(A.Exception||(A.Exception={}))}(A.System||(A.System={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(A){"use strict";class NotSupportedException extends x.Internal.System.Exception.ExceptionBase{constructor(A="NotSupportedException",V="The NotSupportedException exception is thrown when an invoked method is not supported.",R="The exception is probably due to the incorrect protocol version"){super(A,V),this.name=A,this.message=V,this.param=R,x.System.Diagnostics.Logger.WarnLog.log(A,{Message:V,Param:R})}}A.NotSupportedException=NotSupportedException}(A.Exception||(A.Exception={}))}(A.System||(A.System={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(A){class DeprecatedWarning extends x.Internal.System.Exception.ExceptionBase{constructor(A,V,R){var D;super(A,V),this.name=A,this.message=V,this.param=R||null;try{if(x.Application.Settings)(null===(D=x.Application.Settings.System)||void 0===D?void 0:D.DeprecatedWarningEnabled)&&this.logWarning();else{x.Internal.Application.ApplicationManager.getApplication().getDefaultSession().Settings.System.DeprecatedWarningEnabled&&this.logWarning()}}catch(x){}}logWarning(){x.System.Diagnostics.Logger.WarnLog.log("Deprecated warning => "+this.name,{Message:this.message,Param:this.param})}}A.DeprecatedWarning=DeprecatedWarning}(A.Exception||(A.Exception={}))}(A.System||(A.System={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(A){!function(A){"use strict";let V,R,D,N;!function(x){x[x.Console=1]="Console",x[x.Alert=2]="Alert",x[x.Server=3]="Server",x[x.IndexDB=4]="IndexDB"}(V=A.LoggerOutPutType||(A.LoggerOutPutType={})),function(x){x[x.Off=0]="Off",x[x.Verbose=1]="Verbose",x[x.Info=2]="Info",x[x.Warn=3]="Warn",x[x.Error=4]="Error"}(R=A.LogLevel||(A.LogLevel={})),function(x){x[x.Alarm=0]="Alarm",x[x.DataAccess=1]="DataAccess",x[x.Language=3]="Language",x[x.Project=4]="Project",x[x.Recipe=5]="Recipe",x[x.Trend=6]="Trend",x[x.UserManagement=7]="UserManagement",x[x.Logging=8]="Logging",x[x.ServerObjects=9]="ServerObjects",x[x.System=10]="System",x[x.Undefined=11]="Undefined",x[x.Socket=12]="Socket"}(D=A.AppDomainEventSource||(A.AppDomainEventSource={})),function(x){x[x.CommandHandler=1]="CommandHandler",x[x.Store=2]="Store",x[x.Constructor=3]="Constructor",x[x.Undefined=4]="Undefined"}(N=A.AppDomainCategorySource||(A.AppDomainCategorySource={}));function ClientLogEntry(A,V,R,U,B){let F=D.Undefined,W=N.Undefined,H="",z="",G=null,j=new Date,q=null;if(F=R||D.Undefined,W=U||N.Undefined,z=A,G=V,j=new Date,!x.isNullOrUndefined(R)){let A=x.Internal.System.Diagnostics.Logging.AppDomainEventSource[R],V=x.Internal.System.CONST_VW_NS["SYS"+A.toUpperCase()];V&&(A=V),H=A+"."+x.Internal.System.Diagnostics.Logging.AppDomainCategorySource[U]}return q=x.isFunction(B)?B:null,{Source:F,Category:W,SourceCategoryText:H,LogText:z,Parameter:G,DateTime:j,CallbackFn:q}}A.Logger=class Logger{constructor(A,D,N){switch(this._observers=[],this._domainLog=!1,this._LogStack=[],this._settings=null,this._consoleLogger=x=>{let A,V=x.DateTime.toLocaleTimeString()+" "+x.DateTime.toLocaleDateString()+" ";A=x.SourceCategoryText?x.SourceCategoryText+" : "+x.LogText:x.LogText,this.addLogToLogStack(x),x.Parameter?(console[this._outType](V+A+" : "+this._stringify(x.Parameter)),this._notifyObservers(A,x.Parameter)):(console[this._outType](V+A),this._notifyObservers(A,{}))},this._AppDomainLog=A=>{try{if(x.Application.Settings)this._settings=x.Application.Settings;else{const A=x.Internal.Application.ApplicationManager.getApplication().getDefaultSession().Settings;this._settings=A}}catch(x){}if(-1!==this._settings.System.AppDomainsToLog.indexOf(A.Source)&&-1!==this._settings.System.AppDomainCategoriesToLog.indexOf(A.Category)){this.addLogToLogStack(A);let x,V=A.DateTime.toLocaleTimeString()+" "+A.DateTime.toLocaleDateString()+" ";if(x=A.SourceCategoryText?A.SourceCategoryText+" : "+A.LogText:A.LogText,A.Parameter){let R=this._stringify(A.Parameter),D=1e3;if(R.length>=D){let A=this.splitSubstring(R,D);console.group(">>> "+x),console[this._outType](V);for(let x=0;x<A.length;x++)console[this._outType](A[x]);console.groupEnd(">>> "+x)}else console.group(">>> "+x),console[this._outType](V),console[this._outType](R),console.groupEnd(">>> "+x);this._notifyObservers(x,A.Parameter)}else console[this._outType](V+x),this._notifyObservers(x,{})}},this._alertLog=(x,A)=>{this._shouldLog()&&(A?(alert(x+" : "+this._stringify(A)),this._notifyObservers(x,A)):(alert(x),this._notifyObservers(x,{})))},this._serverLog=A=>{if(this._shouldLog()){let V=A.LogText,R=new x.Internal.Domain.MsgHelper.TelegramHelper("LogMessage",null);R.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.System,R.hasResponse=!1,A.Parameter&&(V=V+" : "+this._stringify(A.Parameter)),V.length>512&&(V=V.substring(0,512)+"..."),R.CmdVal.val={Message:V},x.Internal.Application.ApplicationManager.getApplication().getDefaultSession().SrvHnd.MsgHnd.submitPromise(R),this._notifyObservers(A.LogText,A.Parameter)}},this._outType="log",this._loggerOutPutType=A||V.Console,this._logLevel=D||R.Off,this._write=this._consoleLogger,N&&(this._domainLog=!0),this._logLevel){case R.Verbose:case R.Info:case R.Warn:case R.Error:this._toLog(this._loggerOutPutType);break;case R.Off:return}}log(A,V,R,D,N){if(this._shouldLog()){let U=ClientLogEntry(A,V,R,D,N);this._write(U),x.isFunction(N)&&N.apply(this,arguments)}}addObserver(x){this._observers.push(x)}removeObserver(x){let A=this._observers.indexOf(x);~A&&this._observers.splice(A,1)}GetLogStack(){return this._LogStack}addLogToLogStack(A){try{if(x.Application.Settings)this._settings=x.Application.Settings;else{const A=x.Internal.Application.ApplicationManager.getApplication().getDefaultSession().Settings;this._settings=A}}catch(x){}if(this._settings.System.LogStackSize>this._LogStack.length)this._LogStack.push(A);else{let x=this._LogStack.shift();x=null,this._LogStack.push(A)}}splitSubstring(x,A){let V=[];for(let R=0,D=x.length;R<D;R+=A)V.push(x.substring(R,R+A));return V}_shouldLog(){try{if(x.Application.Settings)this._settings=x.Application.Settings;else{const A=x.Internal.Application.ApplicationManager.getApplication().getDefaultSession().Settings;this._settings=A}}catch(x){}return!!(this._settings.System&&this._logLevel>=this._settings.System.DebugLogLevel||this._domainLog)}_toLog(A){switch(this._loggerOutPutType){case V.Console:if(this._domainLog&&(this._write=this._AppDomainLog),"undefined"!=typeof window&&!x.isUndefined(window.console))switch(this._logLevel){case R.Verbose:this._outType="log";break;case R.Info:this._outType="info";break;case R.Warn:this._outType="warn";break;case R.Error:this._outType="error";break;default:this._outType="log"}break;case V.Alert:this._write=this._alertLog;break;case V.Server:this._write=this._serverLog}}_stringify(A){return x.Internal.makeString(A)}_notifyObservers(x,A){for(let V=this._observers.length-1;V>=0;V--)this._observers[V](x,A)}},A.ClientLogEntry=ClientLogEntry}(A.Logging||(A.Logging={}))}(A.Diagnostics||(A.Diagnostics={}))}(A.System||(A.System={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(A){"use strict";A.WebSocketLog=new x.Internal.System.Diagnostics.Logging.Logger(x.Internal.System.Diagnostics.Logging.LoggerOutPutType.Console,x.Internal.System.Diagnostics.Logging.LogLevel.Verbose),A.InfoLog=new x.Internal.System.Diagnostics.Logging.Logger(x.Internal.System.Diagnostics.Logging.LoggerOutPutType.Console,x.Internal.System.Diagnostics.Logging.LogLevel.Info),A.WarnLog=new x.Internal.System.Diagnostics.Logging.Logger(x.Internal.System.Diagnostics.Logging.LoggerOutPutType.Console,x.Internal.System.Diagnostics.Logging.LogLevel.Warn),A.ErrorLog=new x.Internal.System.Diagnostics.Logging.Logger(x.Internal.System.Diagnostics.Logging.LoggerOutPutType.Console,x.Internal.System.Diagnostics.Logging.LogLevel.Error),A.ServerLog=new x.Internal.System.Diagnostics.Logging.Logger(x.Internal.System.Diagnostics.Logging.LoggerOutPutType.Server,x.Internal.System.Diagnostics.Logging.LogLevel.Error),A.AppDomainLog=new x.Internal.System.Diagnostics.Logging.Logger(x.Internal.System.Diagnostics.Logging.LoggerOutPutType.Console,x.Internal.System.Diagnostics.Logging.LogLevel.Verbose,!0)}(A.Logger||(A.Logger={}))}(A.Diagnostics||(A.Diagnostics={}))}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(A){"use strict";A.performanceMark=function performanceMark(A,V=!0){var R,D;const N=A+"_Start",U=A+"_End",B=A+"_Measure";let F=!1,W=!1;try{if(x.Application.Settings)!0===(null===(R=x.Application.Settings.System)||void 0===R?void 0:R.Debug)&&(F=!0),!0===(null===(D=x.Application.Settings.System)||void 0===D?void 0:D.EnableVisiWinPerformanceMarks)&&(W=!0);else{const A=x.Internal.Application.ApplicationManager.getApplication().getDefaultSession().Settings;!0===A.System.Debug&&(F=!0),!0===A.System.EnableVisiWinPerformanceMarks&&(W=!0)}}catch(x){}function writeStartMark(){try{(F||W)&&performance.mark(N)}catch(x){}}function writeMeasure(){try{(F||W)&&performance.measure(B,N,U)}catch(x){}}return writeStartMark(),{endMark:function writeEndMark(){try{(F||W)&&performance.mark(U),V&&writeMeasure()}catch(x){}},measure:writeMeasure,duration:function getDuration(){return performance.getEntriesByName(B,"measure")},reset:function reset(){performance&&performance.clearMarks&&(performance.clearMarks(N),performance.clearMarks(U),performance.clearMeasures(B),writeStartMark())},log:function logMeasure(){const x=performance.getEntriesByName(B,"measure");if(console)for(let A=0;A<x.length;A++)console.groupCollapsed("Performance measure for "+x[A].name),console.log("name => "+x[A].name),console.log("duration => "+x[A].duration),console.log("startTime => "+x[A].startTime),console.log("entryType => "+x[A].entryType),console.groupEnd()}}}}(A.Diagnostics||(A.Diagnostics={}))}(A.System||(A.System={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){!function(x){"use strict";x.StopWatch=class StopWatch{constructor(){this.startTime=null,this.stopTime=null,this.running=!1}start(){!0!==this.running&&(null!==this.startTime&&(this.stopTime=null),this.running=!0,this.startTime=this.getTime())}stop(){!1!==this.running&&(this.stopTime=this.getTime(),this.running=!1)}duration(){return null===this.startTime||null===this.stopTime?void 0:this.stopTime-this.startTime}isRunning(){return this.running}getTime(){if(window.performance&&window.performance.now)return window.performance.now();return(new Date).getTime()}}}(x.Diagnostics||(x.Diagnostics={}))}(x.System||(x.System={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(A){"use strict";A.GenericDictionary=class GenericDictionary{constructor(A){if(this._keys=[],this._values=[],!x.isUndefined(A))for(let x=0;x<A.length;x++)this[A[x].key]=A[x].value,this._keys.push(A[x].key),this._values.push(A[x].value)}add(x,A){this[x]=A,this._keys.push(x),this._values.push(A)}remove(x){const A=this._keys.indexOf(x,0);-1!==A&&(this._keys.splice(A,1),this._values.splice(A,1),delete this[x])}keys(){return this._keys}values(){return this._values}getByKey(x){return this[x]}containsKey(A){return!x.isUndefined(this[A])}toLookup(){return this}}}(A.Collections||(A.Collections={}))}(A.System||(A.System={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){!function(x){!function(x){"use strict";let A,V;!function(x){x[x.CONNECTING=0]="CONNECTING",x[x.OPEN=1]="OPEN",x[x.CLOSING=2]="CLOSING",x[x.CLOSED=3]="CLOSED",x[x.ERROR=4]="ERROR"}(A=x.SocketState||(x.SocketState={})),function(x){x[x.SUCCESS_CLOSE_STATUS=1e3]="SUCCESS_CLOSE_STATUS",x[x.ENDPOINT_TERMINATED_CLOSE_STATUS=1001]="ENDPOINT_TERMINATED_CLOSE_STATUS",x[x.PROTOCOL_ERROR_CLOSE_STATUS=1002]="PROTOCOL_ERROR_CLOSE_STATUS",x[x.INVALID_DATA_TYPE_CLOSE_STATUS=1003]="INVALID_DATA_TYPE_CLOSE_STATUS",x[x.EMPTY_CLOSE_STATUS=1005]="EMPTY_CLOSE_STATUS",x[x.ABORTED_CLOSE_STATUS=1006]="ABORTED_CLOSE_STATUS",x[x.INVALID_UTF8_CLOSE_STATUS=1007]="INVALID_UTF8_CLOSE_STATUS",x[x.POLICY_VIOLATION_CLOSE_STATUS=1008]="POLICY_VIOLATION_CLOSE_STATUS",x[x.MESSAGE_TOO_BIG_CLOSE_STATUS=1009]="MESSAGE_TOO_BIG_CLOSE_STATUS",x[x.UNSUPPORTED_EXTENSIONS_CLOSE_STATUS=1010]="UNSUPPORTED_EXTENSIONS_CLOSE_STATUS",x[x.SERVER_ERROR_CLOSE_STATUS=1011]="SERVER_ERROR_CLOSE_STATUS",x[x.SECURE_HANDSHAKE_ERROR_CLOSE_STATUS=1015]="SECURE_HANDSHAKE_ERROR_CLOSE_STATUS"}(V=x.CloseStatus||(x.CloseStatus={}))}(x.Websocket||(x.Websocket={}))}(x.Net||(x.Net={}))}(x.System||(x.System={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(A){!function(A){"use strict";A.VWSocket=class VWSocket{constructor(A){this._wasConnected=!1,this.IsOnline=!1,this.onWebSocketOpen=new x.Internal.System.Events.TypedEvent,this.onWebSocketClose=new x.Internal.System.Events.TypedEvent,this.onWebSocketError=new x.Internal.System.Events.TypedEvent,this.onWebSocketMessage=new x.Internal.System.Events.TypedEvent,this.onWebSocketSend=new x.Internal.System.Events.TypedEvent,this.Url=A,this.State=x.Internal.System.Net.Websocket.SocketState.CLOSED,this.readyState=WebSocket.CLOSED}get Url(){return this.serviceUrl}set Url(x){this.serviceUrl=x}OnOpenHandler(A){this.State=x.Internal.System.Net.Websocket.SocketState.OPEN,this.readyState=WebSocket.OPEN,this.IsOnline=!0,this._wasConnected=!0,this.onWebSocketOpen.trigger(A)}OnMessageHandler(x){this.onWebSocketMessage.trigger(x)}OnCloseHandler(A){this.State=x.Internal.System.Net.Websocket.SocketState.CLOSED,this.readyState=x.Internal.System.Net.Websocket.SocketState.CLOSED,this.IsOnline=!1,this.onWebSocketClose.trigger(A),A.code&&(this.CloseCode=A.code),x.isNullOrEmpty(A.reason)&&A.code&&(this.CloseReason=x.Internal.System.Net.Websocket.CloseStatus[A.code])}OnErrorHandler(A){this.State=x.Internal.System.Net.Websocket.SocketState.ERROR,this.readyState=x.Internal.System.Net.Websocket.SocketState.ERROR,this.onWebSocketError.trigger(A)}Start(){this.ws?1!==this.ws.readyState&&(this.ws=new WebSocket(this.Url),this.ws.onopen=x=>{this.OnOpenHandler(x)},this.ws.onmessage=x=>{this.OnMessageHandler(x)},this.ws.onclose=x=>{this.OnCloseHandler(x)},this.ws.onerror=x=>{this.OnErrorHandler(x)},this.State=x.Internal.System.Net.Websocket.SocketState.CONNECTING,this.readyState=x.Internal.System.Net.Websocket.SocketState.CONNECTING):(this.ws=new WebSocket(this.Url),this.ws.onopen=x=>{this.OnOpenHandler(x)},this.ws.onmessage=x=>{this.OnMessageHandler(x)},this.ws.onclose=x=>{this.OnCloseHandler(x)},this.ws.onerror=x=>{this.OnErrorHandler(x)},this.State=x.Internal.System.Net.Websocket.SocketState.CONNECTING,this.readyState=x.Internal.System.Net.Websocket.SocketState.CONNECTING)}Send(x){if(this.ws&&this.ws.readyState===WebSocket.OPEN)return this.onWebSocketSend.trigger(x),this.ws.send(x);try{if(this.ws&&this.ws.readyState===WebSocket.CLOSED)throw"INVALID_STATE_ERR : websocket closed"}catch(A){this.onWebSocketSend.trigger("WebSocket Send INVALID_STATE_ERR"+x)}}Close(A,V){return this.CloseCode=A,V&&(this.CloseReason=V),!!this.ws&&(this.State=this.ws.readyState,V?(this.ws.close(A,V),!0):(x.isNumber(A)?this.ws.close(A):this.ws.close(1e3,A),!0))}}}(A.Websocket||(A.Websocket={}))}(A.Net||(A.Net={}))}(A.System||(A.System={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){"use strict";const A="VisiWin.System";x.CONST_VW_NS={SYSALARM:A+".Alarm",SYSDATAACCESS:A+".DataAccess",SYSLANGUAGE:A+".Language",SYSPROJECT:A+".Project",SYSRECIPE:A+".Recipe",SYSTREND:A+".Trend",SYSUSERMANAGEMENT:A+".UserManagement",SYSLOGGING:A+".Logging"}}(x.System||(x.System={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(x){x.Alarm||(x.Alarm={})}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(x){x.Alarm||(x.Alarm={})}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(x){x.Alarm||(x.Alarm={})}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(x){x.Alarm||(x.Alarm={})}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(x){x.Alarm||(x.Alarm={})}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(x){x.Alarm||(x.Alarm={})}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(x){x.Alarm||(x.Alarm={})}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(x){x.Alarm||(x.Alarm={})}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(x){x.Alarm||(x.Alarm={})}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(x){x.Alarm||(x.Alarm={})}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(x){x.Alarm||(x.Alarm={})}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){"use strict";let A,V,R,D,N,U,B,F,W,H;!function(x){x[x.None=0]="None",x[x.Active=1]="Active",x[x.Inactive=2]="Inactive",x[x.ActiveAck=4]="ActiveAck",x[x.InactiveAck=8]="InactiveAck",x[x.Cleared=16]="Cleared",x[x.Reactivated=32]="Reactivated"}(A=x.AlarmState||(x.AlarmState={})),Object.freeze(A),function(x){x[x.None=0]="None",x[x.Long=1]="Long",x[x.Double=2]="Double",x[x.Text=3]="Text",x[x.File=4]="File",x[x.Image=5]="Image"}(V=x.ExtAlarmParamType||(x.ExtAlarmParamType={})),Object.freeze(V),function(x){x[x.Bit=0]="Bit",x[x.Numerical=1]="Numerical",x[x.BitBlock=2]="BitBlock"}(R=x.AlarmType||(x.AlarmType={})),Object.freeze(R),function(x){x[x.NewValueResetsOld=0]="NewValueResetsOld",x[x.NegativeValueResets=1]="NegativeValueResets",x[x.ZeroResetsAll=2]="ZeroResetsAll"}(D=x.ResetMode||(x.ResetMode={})),Object.freeze(D),function(x){x[x.AlarmOnly=0]="AlarmOnly",x[x.TypeOnly=1]="TypeOnly",x[x.AddAlarmAndType=2]="AddAlarmAndType"}(N=x.ParamMode||(x.ParamMode={})),Object.freeze(N),function(x){x[x.Alarm=0]="Alarm",x[x.Type=1]="Type"}(U=x.TextMode||(x.TextMode={})),Object.freeze(U),function(x){x[x.FirstUpFaultOnTop=0]="FirstUpFaultOnTop",x[x.NewestFaultOnTop=1]="NewestFaultOnTop"}(B=x.AlarmSortMode||(x.AlarmSortMode={})),Object.freeze(B),function(x){x[x.Type=0]="Type",x[x.FileName=1]="FileName",x[x.ClassName=2]="ClassName",x[x.GroupFullName=3]="GroupFullName",x[x.Name=4]="Name",x[x.AcknowledgeMode=5]="AcknowledgeMode",x[x.Priority=6]="Priority",x[x.Timestamp=7]="Timestamp",x[x.User=8]="User",x[x.Machine=9]="Machine",x[x.State=10]="State",x[x.ActivationCount=11]="ActivationCount",x[x.Text=12]="Text",x[x.RowNum=13]="RowNum"}(F=x.HistoricalAlarmColumns||(x.HistoricalAlarmColumns={})),Object.freeze(F),function(x){x[x.FileName=0]="FileName",x[x.Start=1]="Start",x[x.End=2]="End"}(W=x.HistoricalFileColumns||(x.HistoricalFileColumns={})),Object.freeze(W),function(x){x[x.StateId=0]="StateId",x[x.Timestamp=1]="Timestamp",x[x.User=2]="User",x[x.Machine=3]="Machine",x[x.Text=4]="Text"}(H=x.HistoricalAlarmNotesColumns||(x.HistoricalAlarmNotesColumns={})),Object.freeze(H)}(x.Alarm||(x.Alarm={}))}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){"use strict";class AlarmClass extends x.Internal.System.BaseClass{}A.AlarmClass=AlarmClass}(A.Alarm||(A.Alarm={}))}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){"use strict";class AlarmGroup extends x.Internal.System.BaseClass{}A.AlarmGroup=AlarmGroup}(A.Alarm||(A.Alarm={}))}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){"use strict";class AlarmFilter extends x.Internal.System.BaseClass{}A.AlarmFilter=AlarmFilter}(A.Alarm||(A.Alarm={}))}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){"use strict";class AlarmItem extends x.Internal.System.BaseClass{}A.AlarmItem=AlarmItem}(A.Alarm||(A.Alarm={}))}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){"use strict";class CurrentAlarms extends x.Internal.System.BaseClass{}A.CurrentAlarms=CurrentAlarms}(A.Alarm||(A.Alarm={}))}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){"use strict";class HistoricalAlarm extends x.Internal.System.BaseClass{GetHistoricalDataAsync(){throw new Error("Abstract method!")}GetHistoricalAlarmsStream(){throw new Error("Abstract method!")}ReadHistoricalAlarmsStream(x,A){throw new Error("Abstract method!")}CloseHistoricalAlarmsStream(){throw new Error("Abstract method!")}}A.HistoricalAlarm=HistoricalAlarm}(A.Alarm||(A.Alarm={}))}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){"use strict";class HistoricalAlarmFilter extends x.Internal.System.BaseClass{}A.HistoricalAlarmFilter=HistoricalAlarmFilter}(A.Alarm||(A.Alarm={}))}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){"use strict";class HistoricalAlarmItem extends x.Internal.System.BaseClass{}A.HistoricalAlarmItem=HistoricalAlarmItem}(A.Alarm||(A.Alarm={}))}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){"use strict";class AlarmService extends x.Internal.System.BaseClass{static getService(){const A=x.Internal.Application.ApplicationManager.getApplication().getDefaultSession();if(A.AlarmManager||-1!==A.Settings.System.SystemLoader.indexOf("Alarm"))return A.AlarmManager.AlarmService;x.System.Diagnostics.Logger.ErrorLog.log("Alarm System not available")}AcknowledgeAlarm(x){throw new Error("Abstract method!")}GetAlarmClass(x){throw new Error("Abstract method!")}GetAlarmGroup(x){throw new Error("Abstract method!")}GetCurrentAlarms(x){throw new Error("Abstract method!")}CreateAlarmFilter(){throw new Error("Abstract method!")}CreateHistoricalAlarmFilter(){throw new Error("Abstract method!")}CreateHistoricalAlarmRequest(x){throw new Error("Abstract method!")}AcknowledgeAlarmClass(x){throw new Error("Abstract method!")}AcknowledgeAlarmGroup(x){throw new Error("Abstract method!")}AcknowledgeAllAlarms(){throw new Error("Abstract method!")}}A.AlarmService=AlarmService}(A.Alarm||(A.Alarm={}))}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(x){x.DataAccess||(x.DataAccess={})}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(x){x.DataAccess||(x.DataAccess={})}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(x){x.DataAccess||(x.DataAccess={})}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(x){x.DataAccess||(x.DataAccess={})}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(x){x.DataAccess||(x.DataAccess={})}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(x){x.DataAccess||(x.DataAccess={})}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){"use strict";let A,V,R,D,N,U,B,F,W,H,z;!function(x){x[x.Display=0]="Display",x[x.Process=1]="Process"}(A=x.UnitClassType||(x.UnitClassType={})),function(x){x[x.Empty=0]="Empty",x[x.Object=1]="Object",x[x.DBNull=2]="DBNull",x[x.Boolean=3]="Boolean",x[x.Char=4]="Char",x[x.SByte=5]="SByte",x[x.Byte=6]="Byte",x[x.Int16=7]="Int16",x[x.UInt16=8]="UInt16",x[x.Int32=9]="Int32",x[x.UInt32=10]="UInt32",x[x.Int64=11]="Int64",x[x.UInt64=12]="UInt64",x[x.Single=13]="Single",x[x.Double=14]="Double",x[x.Decimal=15]="Decimal",x[x.DateTime=16]="DateTime",x[x.String=18]="String"}(V=x.TypeCode||(x.TypeCode={})),Object.freeze(V),function(x){x[x.VT_EMPTY=0]="VT_EMPTY",x[x.VT_NULL=1]="VT_NULL",x[x.VT_I2=2]="VT_I2",x[x.VT_I4=3]="VT_I4",x[x.VT_R4=4]="VT_R4",x[x.VT_R8=5]="VT_R8",x[x.VT_DATE=7]="VT_DATE",x[x.VT_BSTR=8]="VT_BSTR",x[x.VT_BOOL=11]="VT_BOOL",x[x.VT_I1=16]="VT_I1",x[x.VT_UI1=17]="VT_UI1",x[x.VT_UI2=18]="VT_UI2",x[x.VT_UI4=19]="VT_UI4",x[x.VT_INT=22]="VT_INT",x[x.VT_UINT=23]="VT_UINT"}(R=x.DataType||(x.DataType={})),Object.freeze(R),function(x){x[x.Ok=0]="Ok",x[x.Low=1]="Low",x[x.High=2]="High",x[x.Const=3]="Const"}(D=x.LimitQuality||(x.LimitQuality={})),Object.freeze(D),function(x){x[x.Bad=0]="Bad",x[x.ConfigError=4]="ConfigError",x[x.NotConnected=8]="NotConnected",x[x.DeviceFailure=12]="DeviceFailure",x[x.SensorFailure=16]="SensorFailure",x[x.LastKnown=20]="LastKnown",x[x.CommFailure=24]="CommFailure",x[x.OutofService=28]="OutofService",x[x.Uncertain=64]="Uncertain",x[x.LastUsable=68]="LastUsable",x[x.SensorCal=80]="SensorCal",x[x.EguExceeded=84]="EguExceeded",x[x.SubNormal=88]="SubNormal",x[x.Good=192]="Good",x[x.LocalOverride=216]="LocalOverride"}(N=x.DataQuality||(x.DataQuality={})),Object.freeze(N),function(x){x[x.Process=0]="Process",x[x.ExternalOPCClient=1]="ExternalOPCClient",x[x.System=2]="System",x[x.Application=3]="Application",x[x.ValueProperty=4]="ValueProperty",x[x.StopEdit=5]="StopEdit",x[x.Recipe=6]="Recipe",x[x.View=7]="View",x[x.UnitConversion=8]="UnitConversion",x[x.Quality=9]="Quality",x[x.Configuration=10]="Configuration",x[x.Alarm=11]="Alarm"}(U=x.ChangeSource||(x.ChangeSource={})),Object.freeze(U),function(x){x[x.None=0]="None",x[x.Read=1]="Read",x[x.Write=2]="Write",x[x.ReadWrite=3]="ReadWrite",x[x.ReadOnce=4]="ReadOnce"}(B=x.AccessRight||(x.AccessRight={})),Object.freeze(B),function(x){x[x.Number=0]="Number",x[x.Binary=1]="Binary",x[x.Hex=2]="Hex",x[x.AutoFloat=3]="AutoFloat",x[x.Scientific=4]="Scientific"}(F=x.Format||(x.Format={})),Object.freeze(F),function(x){x[x.Bits=0]="Bits",x[x.Value=1]="Value",x[x.Masked=2]="Masked"}(W=x.ItemMode||(x.ItemMode={})),Object.freeze(W),function(x){x[x.None=0]="None",x[x.OnInput=1]="OnInput",x[x.OnEnter=2]="OnEnter"}(H=x.LimitCheckMode||(x.LimitCheckMode={})),Object.freeze(H),function(x){x[x.Succeeded=0]="Succeeded",x[x.Error=-1]="Error",x[x.VariableDoesNotExist=-2]="VariableDoesNotExist",x[x.CommFailure=-6]="CommFailure",x[x.NoWriteAccess=-10]="NoWriteAccess",x[x.NoReadAccess=-11]="NoReadAccess",x[x.TypeMismatch=-12]="TypeMismatch",x[x.TypeOverflow=-13]="TypeOverflow"}(z=x.VariableValueErrorCode||(x.VariableValueErrorCode={})),Object.freeze(z)}(x.DataAccess||(x.DataAccess={}))}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){"use strict";class Quality extends x.Internal.System.BaseClass{}A.Quality=Quality}(A.DataAccess||(A.DataAccess={}))}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){"use strict";class VariableService extends x.Internal.System.BaseClass{static getService(){return x.Internal.Application.ApplicationManager.getApplication().getDefaultSession().DataAccessManager.VariableService}GetValueAsync(x,A){throw new Error("Abstract method!")}GetValuesAsync(x,A){throw new Error("Abstract method!")}GetRawValueAsync(x,A){throw new Error("Abstract method!")}GetRawValuesAsync(x,A){throw new Error("Abstract method!")}SetValueAsync(x,A,V){throw new Error("Abstract method!")}SetValuesAsync(x,A,V){throw new Error("Abstract method!")}SetRawValueAsync(x,A,V){throw new Error("Abstract method!")}SetRawValuesAsync(x,A,V){throw new Error("Abstract method!")}SetBitAsync(x,A,V,R){throw new Error("Abstract method!")}SetBitsAsync(x,A,V,R){throw new Error("Abstract method!")}GetVariable(x){throw new Error("Abstract method!")}GetUnitClassAsync(x){throw new Error("Abstract method!")}GetCurrentUnitAsync(x){throw new Error("Abstract method!")}}A.VariableService=VariableService}(A.DataAccess||(A.DataAccess={}))}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){"use strict";class Unit extends x.Internal.System.BaseClass{}A.Unit=Unit}(A.DataAccess||(A.DataAccess={}))}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){"use strict";class UnitClass extends x.Internal.System.BaseClass{}A.UnitClass=UnitClass}(A.DataAccess||(A.DataAccess={}))}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){"use strict";class Variable extends x.Internal.System.BaseClass{AttachAsync(){throw new Error("Abstract method!")}Detach(){throw new Error("Abstract method!")}}A.Variable=Variable}(A.DataAccess||(A.DataAccess={}))}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(x){x.Language||(x.Language={})}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(x){x.Language||(x.Language={})}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(x){x.Language||(x.Language={})}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(x){x.Language||(x.Language={})}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){"use strict";class ProjectLanguage extends x.Internal.System.BaseClass{}A.ProjectLanguage=ProjectLanguage}(A.Language||(A.Language={}))}(x.System||(x.System={}))}(VisiWin||(VisiWin={}));var __awaiter=this&&this.__awaiter||function(x,A,V,R){return new(V||(V=Promise))((function(D,N){function fulfilled(x){try{step(R.next(x))}catch(x){N(x)}}function rejected(x){try{step(R.throw(x))}catch(x){N(x)}}function step(x){x.done?D(x.value):function adopt(x){return x instanceof V?x:new V((function(A){A(x)}))}(x.value).then(fulfilled,rejected)}step((R=R.apply(x,A||[])).next())}))},VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin;!function(x){!function(A){!function(A){"use strict";class LanguageService extends x.Internal.System.BaseClass{static getService(){return x.Internal.Application.ApplicationManager.getApplication().getDefaultSession().LanguageManager.LanguageService}ChangeLanguageAsync(x){throw new Error("Abstract method!")}GetLocalizedTextAsync(x,A,V){return __awaiter(this,void 0,void 0,(function*(){throw new Error("Abstract method!")}))}GetTextAsync(x){throw new Error("Abstract method!")}GetServerProjectLanguagesAsync(){throw new Error("Abstract method!")}ChangeTextFormats(x){throw new Error("Abstract method!")}ResetTextFormat(x,A){throw new Error("Abstract method!")}}A.LanguageService=LanguageService}(A.Language||(A.Language={}))}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){"use strict";class LocalizedText extends x.Internal.System.BaseClass{}A.LocalizedText=LocalizedText}(A.Language||(A.Language={}))}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){"use strict";let A,V,R;!function(x){x[x.TimeOnly=0]="TimeOnly",x[x.DateOnly=1]="DateOnly",x[x.TimeDate=2]="TimeDate",x[x.DateTime=3]="DateTime",x[x.TimeCRDate=4]="TimeCRDate",x[x.DateCRTime=5]="DateCRTime"}(A=x.DateTimeMode||(x.DateTimeMode={})),Object.freeze(A),function(x){x[x.Language=0]="Language",x[x.Property=1]="Property",x[x.Param=2]="Param"}(V=x.TextChangedBy||(x.TextChangedBy={})),Object.freeze(V),function(x){x[x.ClientApplication=0]="ClientApplication",x[x.ClientSystem=1]="ClientSystem",x[x.ServerApplication=2]="ServerApplication",x[x.ServerSystem=3]="ServerSystem"}(R=x.TextType||(x.TextType={})),Object.freeze(R)}(x.Language||(x.Language={}))}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){"use strict";A.DateTimeFormats=class DateTimeFormats{constructor(){this._LongDate={day:"2-digit",month:"long",year:"numeric"},this._ShortDate={day:"2-digit",month:"2-digit",year:"numeric"},this._NamedLongDate={month:"long",day:"2-digit",weekday:"long",year:"numeric"},this._NamedShortDate={month:"long",day:"2-digit",weekday:"short",year:"numeric"},this._LongTime={hour:"2-digit",minute:"2-digit",second:"2-digit"},this._ShortTime={hour:"2-digit",minute:"2-digit"}}get LongDate(){return this._LongDate}set LongDate(x){this._LongDate=x}get ShortDate(){return this._ShortDate}set ShortDate(x){this._ShortDate=x}get NamedLongDate(){return this._NamedLongDate}set NamedLongDate(x){this._NamedLongDate=x}get NamedShortDate(){return this._NamedShortDate}set NamedShortDate(x){this._NamedShortDate=x}get LongTime(){return this._LongTime}set LongTime(x){this._LongTime=x}get ShortTime(){return this._ShortTime}set ShortTime(x){this._ShortTime=x}};const V={1025:"ar-SA",1026:"bg-BG",1027:"ca-ES",1028:"zh-TW",1029:"cs-CZ",1030:"da-DK",1031:"de-DE",1032:"el-GR",1033:"en-US",1034:"es-ES",1035:"fi-FI",1036:"fr-FR",1037:"he-IL",1038:"hu-HU",1039:"is-IS",1040:"it-IT",1041:"ja-JP",1042:"ko-KR",1043:"nl-NL",1044:"nb-NO",1045:"pl-PL",1046:"pt-BR",1047:"rm-CH",1048:"ro-RO",1049:"ru-RU",1050:"hr-HR",1051:"sk-SK",1052:"sq-AL",1053:"sv-SE",1054:"th-TH",1055:"tr-TR",1056:"ur-PK",1057:"id-ID",1058:"uk-UA",1059:"be-BY",1060:"sl-SI",1061:"et-EE",1062:"lv-LV",1063:"lt-LT",1064:"tg-Cyrl-TJ",1065:"fa-IR",1066:"vi-VN",1067:"hy-AM",1068:"az-Latn-AZ",1069:"eu-ES",1070:"wen-DE",1071:"mk-MK",1072:"st-ZA",1073:"ts-ZA",1074:"tn-ZA",1075:"ven-ZA",1076:"xh-ZA",1077:"zu-ZA",1078:"af-ZA",1079:"ka-GE",1080:"fo-FO",1081:"hi-IN",1082:"mt-MT",1083:"se-NO",1084:"gd-GB",1085:"yi",1086:"ms-MY",1087:"kk-KZ",1088:"ky-KG",1089:"sw-KE",1090:"tk-TM",1091:"uz-Latn-UZ",1092:"tt-RU",1093:"bn-IN",1094:"pa-IN",1095:"gu-IN",1096:"or-IN",1097:"ta-IN",1098:"te-IN",1099:"kn-IN",1100:"ml-IN",1101:"as-IN",1102:"mr-IN",1103:"sa-IN",1104:"mn-MN",1105:"bo-CN",1106:"cy-GB",1107:"km-KH",1108:"lo-LA",1109:"my-MM",1110:"gl-ES",1111:"kok-IN",1112:"mni",1113:"sd-IN",1114:"syr-SY",1115:"si-LK",1116:"chr-US",1117:"iu-Cans-CA",1118:"am-ET",1119:"tmz",1120:"ks-Arab-IN",1121:"ne-NP",1122:"fy-NL",1123:"ps-AF",1124:"fil-PH",1125:"dv-MV",1126:"bin-NG",1127:"fuv-NG",1128:"ha-Latn-NG",1129:"ibb-NG",1130:"yo-NG",1131:"quz-BO",1132:"nso-ZA",1136:"ig-NG",1137:"kr-NG",1138:"gaz-ET",1139:"ti-ER",1140:"gn-PY",1141:"haw-US",1142:"la",1143:"so-SO",1144:"ii-CN",1145:"pap-AN",1152:"ug-Arab-CN",1153:"mi-NZ",2049:"ar-IQ",2052:"zh-CN",2055:"de-CH",2057:"en-GB",2058:"es-MX",2060:"fr-BE",2064:"it-CH",2067:"nl-BE",2068:"nn-NO",2070:"pt-PT",2072:"ro-MD",2073:"ru-MD",2074:"sr-Latn-CS",2077:"sv-FI",2080:"ur-IN",2092:"az-Cyrl-AZ",2108:"ga-IE",2110:"ms-BN",2115:"uz-Cyrl-UZ",2117:"bn-BD",2118:"pa-PK",2128:"mn-Mong-CN",2129:"bo-BT",2137:"sd-PK",2143:"tzm-Latn-DZ",2144:"ks-Deva-IN",2145:"ne-IN",2155:"quz-EC",2163:"ti-ET",3073:"ar-EG",3076:"zh-HK",3079:"de-AT",3081:"en-AU",3082:"es-ES",3084:"fr-CA",3098:"sr-Cyrl-CS",3179:"quz-PE",4097:"ar-LY",4100:"zh-SG",4103:"de-LU",4105:"en-CA",4106:"es-GT",4108:"fr-CH",4122:"hr-BA",5121:"ar-DZ",5124:"zh-MO",5127:"de-LI",5129:"en-NZ",5130:"es-CR",5132:"fr-LU",5146:"bs-Latn-BA",6145:"ar-MO",6153:"en-IE",6154:"es-PA",6156:"fr-MC",7169:"ar-TN",7177:"en-ZA",7178:"es-DO",7180:"fr-029",8193:"ar-OM",8201:"en-JM",8202:"es-VE",8204:"fr-RE",9217:"ar-YE",9225:"en-029",9226:"es-CO",9228:"fr-CG",10241:"ar-SY",10249:"en-BZ",10250:"es-PE",10252:"fr-SN",11265:"ar-JO",11273:"en-TT",11274:"es-AR",11276:"fr-CM",12289:"ar-LB",12297:"en-ZW",12298:"es-EC",12300:"fr-CI",13313:"ar-KW",13321:"en-PH",13322:"es-CL",13324:"fr-ML",14337:"ar-AE",14345:"en-ID",14346:"es-UY",14348:"fr-MA",15361:"ar-BH",15369:"en-HK",15370:"es-PY",15372:"fr-HT",16385:"ar-QA",16393:"en-IN",16394:"es-BO",17417:"en-MY",17418:"es-SV",18441:"en-SG",18442:"es-HN",19466:"es-NI",20490:"es-PR",21514:"es-US",58378:"es-419",58380:"fr-015"};A._locale2lcid=function _locale2lcid(x){for(const A in V)if(Object.prototype.hasOwnProperty.call(V,A)&&V[A]===x)return parseInt(A);return 1033},A._lcid2locale=function _lcid2locale(A){if(x.isNullOrUndefined(A))return"en-US";for(const x in V)if(Object.prototype.hasOwnProperty.call(V,x)&&x===A.toString())return V[x];return"en-US"}}(A.Language||(A.Language={}))}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(x){x.Logging||(x.Logging={})}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(x){x.Logging||(x.Logging={})}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(x){x.Logging||(x.Logging={})}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(x){x.Logging||(x.Logging={})}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(x){x.Logging||(x.Logging={})}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(x){x.Logging||(x.Logging={})}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(x){x.Logging||(x.Logging={})}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){"use strict";let A,V,R,D,N,U;!function(x){x[x.Failed=0]="Failed",x[x.Succeeded=1]="Succeeded",x[x.UnknownCategory=2]="UnknownCategory",x[x.UnknownEvent=3]="UnknownEvent",x[x.UnknownParameter=4]="UnknownParameter",x[x.Disabled=5]="Disabled",x[x.ParameterNotSerializable=6]="ParameterNotSerializable"}(A=x.LogSuccess||(x.LogSuccess={})),Object.freeze(A),function(x){x[x.Success=0]="Success",x[x.SuccessTimeLimitArrived=1]="SuccessTimeLimitArrived",x[x.SuccessEntryLimitArrived=2]="SuccessEntryLimitArrived",x[x.CanceledByUser=3]="CanceledByUser",x[x.Failed=4]="Failed"}(V=x.HistoricalLoggingEntriesSuccess||(x.HistoricalLoggingEntriesSuccess={})),Object.freeze(V),function(x){x[x.FixedValue=0]="FixedValue",x[x.VariableValue=1]="VariableValue",x[x.VariableText=2]="VariableText",x[x.LocalizableText=3]="LocalizableText"}(R=x.ParameterType||(x.ParameterType={})),Object.freeze(R),function(x){x[x.Changed=0]="Changed",x[x.Added=1]="Added",x[x.Removed=2]="Removed"}(D=x.ItemModifiedCause||(x.ItemModifiedCause={})),Object.freeze(D),function(x){x[x.CategoryFullName=0]="CategoryFullName",x[x.EventName=1]="EventName",x[x.Timestamp=2]="Timestamp",x[x.User=3]="User",x[x.Machine=4]="Machine",x[x.FileName=5]="FileName",x[x.RowNum=6]="RowNum"}(N=x.HistoricalLogEntryColumns||(x.HistoricalLogEntryColumns={})),Object.freeze(N),function(x){x[x.Id=0]="Id",x[x.User=1]="User",x[x.Timestamp=2]="Timestamp"}(U=x.HistoricalLogNotesColumns||(x.HistoricalLogNotesColumns={})),Object.freeze(U)}(x.Logging||(x.Logging={}))}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){"use strict";class LoggingService extends x.Internal.System.BaseClass{static getService(){const A=x.Internal.Application.ApplicationManager.getApplication().getDefaultSession();if(A.LoggingManager||-1!==A.Settings.System.SystemLoader.indexOf("Logging"))return A.LoggingManager.LoggingService;x.System.Diagnostics.Logger.ErrorLog.log("Logbook System not available")}LogAsync(x,A,V){throw new Error("Abstract method!")}GetEventAsync(x){throw new Error("Abstract method!")}GetCategoryAsync(x){throw new Error("Abstract method!")}GetHistoricalLoggingEntriesAsync(x){throw new Error("Abstract method!")}CreateHistoricalLoggingFilter(){throw new Error("Abstract method!")}CreateHistoricalLoggingStream(){throw new Error("Abstract method!")}}A.LoggingService=LoggingService}(A.Logging||(A.Logging={}))}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){"use strict";class LoggingEntry extends x.Internal.System.BaseClass{}A.LoggingEntry=LoggingEntry}(A.Logging||(A.Logging={}))}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){"use strict";class HistoricalLoggingFilter extends x.Internal.System.BaseClass{}A.HistoricalLoggingFilter=HistoricalLoggingFilter}(A.Logging||(A.Logging={}))}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){"use strict";class HistoricalLoggingEntry extends x.Internal.System.BaseClass{}A.HistoricalLoggingEntry=HistoricalLoggingEntry}(A.Logging||(A.Logging={}))}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(x){x.Project||(x.Project={})}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){"use strict";class ProjectService extends x.Internal.System.BaseClass{static getService(){return x.Internal.Application.ApplicationManager.getApplication().getDefaultSession().ProjectManager.ProjectService}RunProjectAsync(){throw new Error("Abstract method!")}}A.ProjectService=ProjectService}(A.Project||(A.Project={}))}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){"use strict";let A;!function(x){x[x.Unloaded=0]="Unloaded",x[x.Loaded=1]="Loaded",x[x.Starting=2]="Starting",x[x.Running=3]="Running",x[x.Stopped=4]="Stopped",x[x.OnExit=5]="OnExit",x[x.ErrorOnLoading=6]="ErrorOnLoading",x[x.RunningWithTimeout=7]="RunningWithTimeout",x[x.RunningWithError=8]="RunningWithError",x[x.ErrorOnStarting=9]="ErrorOnStarting",x[x.ErrorWatchDog=10]="ErrorWatchDog",x[x.ErrorUnhandledException=11]="ErrorUnhandledException",x[x.ErrorFatal=12]="ErrorFatal",x[x.ErrorDoesNotExist=13]="ErrorDoesNotExist",x[x.ErrorNoConfiguration=14]="ErrorNoConfiguration",x[x.ErrorHostConnectionLost=15]="ErrorHostConnectionLost",x[x.ErrorNoLicense=16]="ErrorNoLicense",x[x.ErrorNoRuntime=17]="ErrorNoRuntime",x[x.ErrorPowerDown=18]="ErrorPowerDown",x[x.InvalidProjectRegistration=19]="InvalidProjectRegistration"}(A=x.ServerRuntimeStatus||(x.ServerRuntimeStatus={})),Object.freeze(A)}(x.Project||(x.Project={}))}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(x){x.Recipe||(x.Recipe={})}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(x){x.Recipe||(x.Recipe={})}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(x){x.Recipe||(x.Recipe={})}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(x){x.Recipe||(x.Recipe={})}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(x){x.Recipe||(x.Recipe={})}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(x){x.Recipe||(x.Recipe={})}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(x){x.Recipe||(x.Recipe={})}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(x){x.Recipe||(x.Recipe={})}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(x){x.Recipe||(x.Recipe={})}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(x){x.Recipe||(x.Recipe={})}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(x){x.Recipe||(x.Recipe={})}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(x){x.Recipe||(x.Recipe={})}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(x){x.Recipe||(x.Recipe={})}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(x){x.Recipe||(x.Recipe={})}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(x){x.Recipe||(x.Recipe={})}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(x){x.Recipe||(x.Recipe={})}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(x){x.Recipe||(x.Recipe={})}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(x){x.Recipe||(x.Recipe={})}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(x){x.Recipe||(x.Recipe={})}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(x){x.Recipe||(x.Recipe={})}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(x){x.Recipe||(x.Recipe={})}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(x){x.Recipe||(x.Recipe={})}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(x){x.Recipe||(x.Recipe={})}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(x){x.Recipe||(x.Recipe={})}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(x){x.Recipe||(x.Recipe={})}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){x.RecipeChangeFilter=class RecipeChangeFilter{constructor(){this.UserName="",this.MachineName="",this.MaxTime=new Date,this.MinTime=new Date(0)}}}(x.Recipe||(x.Recipe={}))}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){x.RecipeNotesFilter=class RecipeNotesFilter{}}(x.Recipe||(x.Recipe={}))}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){"use strict";class RecipeClass extends x.Internal.System.BaseClass{GetRecipeFileAsync(x){throw new Error("Abstract method!")}GetVariableNamesAsync(){throw new Error("Abstract method!")}GetValueAsync(x){throw new Error("Abstract method!")}GetValuesAsync(x){throw new Error("Abstract method!")}LoadFromFileToBufferAsync(x){throw new Error("Abstract method!")}LoadFromFileToProcessAsync(x){throw new Error("Abstract method!")}ReadProcessToBufferAsync(){throw new Error("Abstract method!")}SetValueAsync(x,A){throw new Error("Abstract method!")}SetValuesAsync(x,A){throw new Error("Abstract method!")}SaveToFileFromBufferAsync(x,A,V){throw new Error("Abstract method!")}WriteBufferToProcessAsync(){throw new Error("Abstract method!")}GetChangesAsync(x,A){throw new Error("Abstract method!")}AddNoteAsync(x){throw new Error("Abstract method!")}GetNotesAsync(x){throw new Error("Abstract method!")}ClearChangesAsync(){throw new Error("Abstract method!")}ClearNotesAsync(){throw new Error("Abstract method!")}LockRecipeAsync(){throw new Error("Abstract method!")}UnlockRecipeAsync(){throw new Error("Abstract method!")}GetSubRecipesAsync(){throw new Error("Abstract method!")}DeleteFileAsync(x){throw new Error("Abstract method!")}GetCurrentPathAsync(){throw new Error("Abstract method!")}GetMemberDefinitionsAsync(){throw new Error("Abstract method!")}IsExistingRecipeFileAsync(x){throw new Error("Abstract method!")}LoadFileToBufferAsync(x,A=!0){throw new Error("Abstract method!")}SetDefaultValuesToBufferAsync(x,A){throw new Error("Abstract method!")}SaveBufferToFileAsync(x,A,V,R){throw new Error("Abstract method!")}LoadFileToProcessAsync(x,A){throw new Error("Abstract method!")}StartEditAsync(){throw new Error("Abstract method!")}StopEditAsync(){throw new Error("Abstract method!")}RemoveNoteAsync(x){throw new Error("Abstract method!")}SetCurrentPathAsync(x){throw new Error("Abstract method!")}GetRecipeClassDefinitionAsync(x){throw new Error("Abstract method!")}GetFileNamesAsync(){throw new Error("Abstract method!")}GetRecipeLockStateAsync(){throw new Error("Abstract method!")}SetDefaultValuesAsync(x,A){throw new Error("Abstract method!")}}A.RecipeClass=RecipeClass}(A.Recipe||(A.Recipe={}))}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){"use strict";let A,V,R,D,N,U,B,F,W,H,z,G,j,q,Q,K,J,X,Y,$;!function(x){x[x.Succeeded=0]="Succeeded",x[x.Unknown=1]="Unknown",x[x.MemberNotFound=2]="MemberNotFound",x[x.NoMember=3]="NoMember",x[x.DatatypeConversionError=4]="DatatypeConversionError",x[x.VariableDoesNotExist=5]="VariableDoesNotExist",x[x.CommunicationError=6]="CommunicationError",x[x.SubRecipeHasError=7]="SubRecipeHasError"}(A=x.RecipeMemberErrorCode||(x.RecipeMemberErrorCode={})),Object.freeze(A),function(x){x[x.Succeeded=0]="Succeeded",x[x.FileNotFound=1]="FileNotFound",x[x.FileCorrupted=2]="FileCorrupted",x[x.LoadedWithErrors=3]="LoadedWithErrors",x[x.NoRecipeClass=4]="NoRecipeClass",x[x.UnknownError=5]="UnknownError",x[x.InvalidParameter=6]="InvalidParameter",x[x.Locked=7]="Locked"}(V=x.LoadRecipeSuccess||(x.LoadRecipeSuccess={})),Object.freeze(V),function(x){x[x.Succeeded=0]="Succeeded",x[x.CommunicationFailure=1]="CommunicationFailure",x[x.NoRecipeClass=2]="NoRecipeClass",x[x.UnknownError=3]="UnknownError",x[x.InvalidParameter=4]="InvalidParameter",x[x.Locked=5]="Locked"}(R=x.GetRecipeSuccess||(x.GetRecipeSuccess={})),Object.freeze(R),function(x){x[x.Succeeded=0]="Succeeded",x[x.CommunicationFailure=1]="CommunicationFailure",x[x.NoRecipeClass=2]="NoRecipeClass",x[x.NoBufferedValues=3]="NoBufferedValues",x[x.UnknownError=4]="UnknownError",x[x.InvalidParameter=5]="InvalidParameter",x[x.Locked=6]="Locked"}(D=x.SetRecipeSuccess||(x.SetRecipeSuccess={})),Object.freeze(D),function(x){x[x.Succeeded=0]="Succeeded",x[x.FileNotCreated=1]="FileNotCreated",x[x.UnableToOverwrite=2]="UnableToOverwrite",x[x.NoRecipeClass=3]="NoRecipeClass",x[x.NoBufferedValues=4]="NoBufferedValues",x[x.UnknownError=5]="UnknownError",x[x.InvalidParameter=6]="InvalidParameter",x[x.ExceededMaxFiles=7]="ExceededMaxFiles",x[x.Locked=8]="Locked",x[x.SavedWithErrors=9]="SavedWithErrors"}(N=x.SaveRecipeSuccess||(x.SaveRecipeSuccess={})),Object.freeze(N),function(x){x[x.Failed=0]="Failed",x[x.Succeeded=1]="Succeeded"}(U=x.DeleteRecipeFileSuccess||(x.DeleteRecipeFileSuccess={})),Object.freeze(U),function(x){x[x.Unlocked=0]="Unlocked",x[x.LockedByThisClient=1]="LockedByThisClient",x[x.LockedByOtherClient=2]="LockedByOtherClient"}(B=x.RecipeLockState||(x.RecipeLockState={})),Object.freeze(B),function(x){x[x.LoadFileToBuffer=0]="LoadFileToBuffer",x[x.ReadProcessToBuffer=1]="ReadProcessToBuffer",x[x.Clear=2]="Clear",x[x.SetDefaults=3]="SetDefaults",x[x.SetValues=4]="SetValues",x[x.LoadFileToProcess=5]="LoadFileToProcess",x[x.WriteBufferToProcess=6]="WriteBufferToProcess",x[x.SaveBufferToFile=7]="SaveBufferToFile"}(F=x.RecipeChangedAction||(x.RecipeChangedAction={})),Object.freeze(F),function(x){x[x.Application=0]="Application",x[x.TriggerVariable=1]="TriggerVariable",x[x.System=2]="System"}(W=x.RecipeChangedSource||(x.RecipeChangedSource={})),Object.freeze(W),function(x){x[x.Saved=0]="Saved",x[x.Deleted=1]="Deleted"}(H=x.FileAction||(x.FileAction={})),Object.freeze(H),function(x){x[x.DataType=0]="DataType",x[x.Variable=1]="Variable",x[x.Recipe=2]="Recipe"}(z=x.ClearBufferDefaultValues||(x.ClearBufferDefaultValues={})),Object.freeze(z),function(x){x[x.Add=0]="Add",x[x.Change=1]="Change",x[x.Remove=2]="Remove"}(G=x.RecipeNotesChangeAction||(x.RecipeNotesChangeAction={})),Object.freeze(G),function(x){x[x.Succeeded=0]="Succeeded",x[x.Unknown=1]="Unknown",x[x.MemberNotFound=2]="MemberNotFound",x[x.NoMember=3]="NoMember",x[x.DatatypeConversionError=4]="DatatypeConversionError",x[x.FileNotFound=5]="FileNotFound",x[x.FileCorrupted=6]="FileCorrupted",x[x.LoadedWithErrors=7]="LoadedWithErrors"}(j=x.RecipeErrorCode||(x.RecipeErrorCode={})),Object.freeze(j),function(x){x[x.Succeeded=0]="Succeeded",x[x.FileNotFound=1]="FileNotFound",x[x.FileCorrupted=2]="FileCorrupted",x[x.LoadedWithErrors=3]="LoadedWithErrors",x[x.ClassDoesNotExist=4]="ClassDoesNotExist",x[x.RecipeLocked=5]="RecipeLocked",x[x.MethodCallFailed=6]="MethodCallFailed"}(q=x.LoadRecipeResults||(x.LoadRecipeResults={})),Object.freeze(q),function(x){x[x.Succeeded=0]="Succeeded",x[x.FileNotCreated=1]="FileNotCreated",x[x.UnableToOverwrite=2]="UnableToOverwrite",x[x.InternalError=3]="InternalError",x[x.ClassDoesNotExist=4]="ClassDoesNotExist",x[x.RecipeLocked=5]="RecipeLocked",x[x.MethodCallFailed=6]="MethodCallFailed"}(Q=x.SaveRecipeResult||(x.SaveRecipeResult={})),Object.freeze(Q),function(x){x[x.Succeeded=0]="Succeeded",x[x.FileNotFound=1]="FileNotFound",x[x.FileCorrupted=2]="FileCorrupted",x[x.SentWithErrors=3]="SentWithErrors",x[x.ClassDoesNotExist=4]="ClassDoesNotExist",x[x.RecipeLocked=5]="RecipeLocked",x[x.MethodCallFailed=6]="MethodCallFailed"}(K=x.SendRecipeResult||(x.SendRecipeResult={})),Object.freeze(K),function(x){x[x.None=0]="None",x[x.Succeeded=1]="Succeeded",x[x.FileNotFound=2]="FileNotFound",x[x.FileCorrupted=3]="FileCorrupted",x[x.HasMemberErrors=4]="HasMemberErrors",x[x.CommunicationFailure=5]="CommunicationFailure",x[x.NoRecipeClass=6]="NoRecipeClass",x[x.UnknownError=7]="UnknownError",x[x.InvalidParameter=8]="InvalidParameter",x[x.Locked=9]="Locked",x[x.FileNotCreated=10]="FileNotCreated",x[x.UnableToOverwrite=11]="UnableToOverwrite",x[x.NoBufferedValues=12]="NoBufferedValues",x[x.ExceededMaxFiles=13]="ExceededMaxFiles",x[x.ExceededRecursionsDepth=14]="ExceededRecursionsDepth"}(J=x.RecipeActionSuccess||(x.RecipeActionSuccess={})),Object.freeze(J),function(x){x[x.Succeeded=0]="Succeeded",x[x.ClassDoesNotExist=1]="ClassDoesNotExist",x[x.RecipeLocked=2]="RecipeLocked",x[x.SetValuesWithErrors=1]="SetValuesWithErrors",x[x.MethodCallFailed=2]="MethodCallFailed"}(X=x.SetValuesResult||(x.SetValuesResult={})),function(x){x[x.DataType=0]="DataType",x[x.Variable=1]="Variable",x[x.Recipe=2]="Recipe"}(Y||(Y={})),function(x){x[x.Failed=0]="Failed",x[x.Succeeded=1]="Succeeded",x[x.InsufficientDiskSpace=2]="InsufficientDiskSpace",x[x.InvalidDirectory=3]="InvalidDirectory"}($=x.ChangeDirectorySuccess||(x.ChangeDirectorySuccess={}))}(x.Recipe||(x.Recipe={}))}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){"use strict";class RecipeFile extends x.Internal.System.BaseClass{GetChangesAsync(x=null){throw new Error("Abstract method!")}GetNotesAsync(x=null){throw new Error("Abstract method!")}GetValuesAsync(x){throw new Error("Abstract method!")}}A.RecipeFile=RecipeFile}(A.Recipe||(A.Recipe={}))}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){"use strict";class RecipeService extends x.Internal.System.BaseClass{static getService(){const A=x.Internal.Application.ApplicationManager.getApplication().getDefaultSession();if(A.RecipeManager||-1!==A.Settings.System.SystemLoader.indexOf("Recipe"))return A.RecipeManager.RecipeService;x.System.Diagnostics.Logger.ErrorLog.log("Recipe System not available")}DeleteFileAsync(x,A){throw new Error("Abstract method!")}GetRecipeClassNamesAsync(){throw new Error("Abstract method!")}GetRecipeClassAsync(x){throw new Error("Abstract method!")}GetRecipeFileNamesAsync(x){throw new Error("Abstract method!")}GetRecipeFileAsync(x,A){throw new Error("Abstract method!")}LoadRecipeFileValuesAsync(x,A,V){throw new Error("Abstract method!")}UnlockAllAsync(){throw new Error("Abstract method!")}}A.RecipeService=RecipeService}(A.Recipe||(A.Recipe={}))}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){"use strict";let V;!function(x){x[x.Succeeded=0]="Succeeded",x[x.NotConnectedWithGivenRequestId=1]="NotConnectedWithGivenRequestId",x[x.AlreadyConnectedWithSameRequestId=2]="AlreadyConnectedWithSameRequestId",x[x.InterfaceTypeNotFound=3]="InterfaceTypeNotFound",x[x.ChannelIsNotRegistered=4]="ChannelIsNotRegistered",x[x.MethodDoesNotExistOrWrongParamCount=5]="MethodDoesNotExistOrWrongParamCount",x[x.PropertyDoesNotExist=6]="PropertyDoesNotExist",x[x.EventDoesNotExist=7]="EventDoesNotExist",x[x.EventHasNoHandler=8]="EventHasNoHandler",x[x.EventAlreadyHasHandler=9]="EventAlreadyHasHandler",x[x.MissingTypeProperty=10]="MissingTypeProperty",x[x.PropertyHasNoSetter=11]="PropertyHasNoSetter",x[x.PropertyHasNoGetter=12]="PropertyHasNoGetter",x[x.ParameterTypeError=13]="ParameterTypeError",x[x.ParameterCastingError=14]="ParameterCastingError",x[x.ErroneousParameter=15]="ErroneousParameter"}(V=A.Result||(A.Result={}));A.ServerObject=class ServerObject{constructor(A){return x.Internal.Application.ApplicationManager.getApplication().getDefaultSession().ServerObjectManager.GetServerObject(A)}ConnectToServerObject(){throw new Error("Abstract method!")}GetServerObjectPropertyValue(x){throw new Error("Abstract method!")}SetServerObjectPropertyValue(x,A){throw new Error("Abstract method!")}AddServerObjectEventHandler(x){throw new Error("Abstract method!")}RemoveServerObjectEventHandler(x){throw new Error("Abstract method!")}InvokeServerObjectMethod(x,A){throw new Error("Abstract method!")}}}(A.ServerObjects||(A.ServerObjects={}))}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(x){x.Trend||(x.Trend={})}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(x){x.Trend||(x.Trend={})}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(x){x.Trend||(x.Trend={})}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(x){x.Trend||(x.Trend={})}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(x){x.Trend||(x.Trend={})}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(x){x.Trend||(x.Trend={})}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(x){x.Trend||(x.Trend={})}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){"use strict";class Archive extends x.Internal.System.BaseClass{GetTrend(x){throw new Error("Abstract method!")}GetTrendData(x,A,V,R,D){throw new Error("Abstract method!")}GetTrendsData(x,A,V,R,D){throw new Error("Abstract method!")}SetTrendOnlineState(x,A){throw new Error("Abstract method!")}InitializeTrends(x){throw new Error("Abstract method!")}}A.Archive=Archive}(A.Trend||(A.Trend={}))}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){"use strict";class DataSample extends x.Internal.System.BaseClass{toJSON(){throw new Error("Abstract method!")}}A.DataSample=DataSample}(A.Trend||(A.Trend={}))}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){"use strict";let A,V,R,D,N,U;!function(x){x[x.Standard=0]="Standard",x[x.MaxValue=1]="MaxValue",x[x.MinValue=2]="MinValue",x[x.SubstitutedMaxValue=4]="SubstitutedMaxValue",x[x.SubstitutedMinValue=8]="SubstitutedMinValue",x[x.ErrorValue=16]="ErrorValue",x[x.HysteresisValue=32]="HysteresisValue",x[x.BadQuality=16777216]="BadQuality",x[x.StartedRecording=67108864]="StartedRecording",x[x.ArchiveCleared=134217728]="ArchiveCleared",x[x.FirstValueinNewFile=268435456]="FirstValueinNewFile",x[x.OutsideInterval=536870912]="OutsideInterval",x[x.SameYNewX=1073741824]="SameYNewX"}(A=x.SampleState||(x.SampleState={})),Object.freeze(A),function(x){x[x.SyncToKernel=0]="SyncToKernel",x[x.TimeBase=1]="TimeBase",x[x.XVariable=2]="XVariable"}(V=x.SampleMode||(x.SampleMode={})),Object.freeze(V),function(x){x[x.On=0]="On",x[x.Off=1]="Off",x[x.Release=2]="Release"}(R=x.SetTrendOnlineState||(x.SetTrendOnlineState={})),Object.freeze(R),function(x){x[x.NoHysteresis=0]="NoHysteresis",x[x.Absolute=1]="Absolute",x[x.PromilleMaxMin=2]="PromilleMaxMin",x[x.PromilleValue=3]="PromilleValue"}(D=x.HysteresisMode||(x.HysteresisMode={})),Object.freeze(D),function(x){x[x.NoFilter=0]="NoFilter",x[x.AverageValue=1]="AverageValue",x[x.Averaging=2]="Averaging",x[x.Max=3]="Max",x[x.Min=4]="Min"}(N=x.FilterMode||(x.FilterMode={})),Object.freeze(N),function(x){x[x.Interpolated=0]="Interpolated",x[x.StepCurve=1]="StepCurve"}(U=x.CurveMode||(x.CurveMode={})),Object.freeze(U)}(x.Trend||(x.Trend={}))}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){"use strict";class Trend extends x.Internal.System.BaseClass{}A.Trend=Trend}(A.Trend||(A.Trend={}))}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){"use strict";class TrendService extends x.Internal.System.BaseClass{static getService(){const A=x.Internal.Application.ApplicationManager.getApplication().getDefaultSession();if(A.TrendManager||-1!==A.Settings.System.SystemLoader.indexOf("Trend"))return A.TrendManager.TrendService;x.System.Diagnostics.Logger.ErrorLog.log("Trend System not available")}GetTrend(x,A){throw new Error("Abstract method!")}GetArchive(x){throw new Error("Abstract method!")}GetTrendNames(x){throw new Error("Abstract method!")}}A.TrendService=TrendService}(A.Trend||(A.Trend={}))}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(x){x.UserManagement||(x.UserManagement={})}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(x){x.UserManagement||(x.UserManagement={})}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(x){x.UserManagement||(x.UserManagement={})}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(x){x.UserManagement||(x.UserManagement={})}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(x){x.UserManagement||(x.UserManagement={})}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(x){x.UserManagement||(x.UserManagement={})}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(x){x.UserManagement||(x.UserManagement={})}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(x){x.UserManagement||(x.UserManagement={})}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(x){x.UserManagement||(x.UserManagement={})}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(x){x.UserManagement||(x.UserManagement={})}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(x){x.UserManagement||(x.UserManagement={})}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){"use strict";class User extends x.Internal.System.BaseClass{ChangeAsync(x){throw new Error("Abstract method!")}MoveToGroupAsync(x){throw new Error("Abstract method!")}ChangePasswordAsync(x,A){throw new Error("Abstract method!")}GetDefinitionAsync(){throw new Error("Abstract method!")}GetGroupAsync(x){throw new Error("Abstract method!")}GetRightAsync(x){throw new Error("Abstract method!")}}A.User=User}(A.UserManagement||(A.UserManagement={}))}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){"use strict";class UserGroup extends x.Internal.System.BaseClass{GetUserAsync(x){throw new Error("Abstract method!")}GetRightAsync(x){throw new Error("Abstract method!")}GetDefinitionAsync(){throw new Error("Abstract method!")}}A.UserGroup=UserGroup}(A.UserManagement||(A.UserManagement={}))}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){"use strict";class Right extends x.Internal.System.BaseClass{GetUserGroupAsync(x){throw new Error("Abstract method!")}ChangeAsync(x){throw new Error("Abstract method!")}GetDefinitionAsync(){throw new Error("Abstract method!")}}A.Right=Right}(A.UserManagement||(A.UserManagement={}))}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){"use strict";class UserManagementService extends x.Internal.System.BaseClass{static getService(){return x.Internal.Application.ApplicationManager.getApplication().getDefaultSession().UserManagementManager.UserManagementService}AddRightAsync(x){throw new Error("Abstract method!")}AddRightsAsync(x){throw new Error("Abstract method!")}AddRightToGroupAsync(x,A){throw new Error("Abstract method!")}AddUserAsync(x){throw new Error("Abstract method!")}AddUserGroupsAsync(x){throw new Error("Abstract method!")}AddUserGroupAsync(x){throw new Error("Abstract method!")}ChangeRightAsync(x){throw new Error("Abstract method!")}ChangeRightsAsync(x){throw new Error("Abstract method!")}ChangeUserAsync(x){throw new Error("Abstract method!")}ChangeUserGroupAsync(x){throw new Error("Abstract method!")}ChangeUserGroupsAsync(x){throw new Error("Abstract method!")}ChangeUserPasswordAsync(x,A,V){throw new Error("Abstract method!")}CopyUserDefinitionAsync(x,A,V,R,D,N){throw new Error("Abstract method!")}CopyUserGroupDefinitionAsync(x,A){throw new Error("Abstract method!")}CreateAuthorization(){throw new Error("Abstract method!")}CreateRightDefinition(){throw new Error("Abstract method!")}CreateUserDefinition(){throw new Error("Abstract method!")}CreateUserGroupDefinition(){throw new Error("Abstract method!")}GetAuthorization(x){throw new Error("Abstract method!")}GetRightsAsync(){throw new Error("Abstract method!")}GetRightAsync(x){throw new Error("Abstract method!")}GetRightDefinitionAsync(x){throw new Error("Abstract method!")}GetUserAsync(x){throw new Error("Abstract method!")}GetUsersAsync(){throw new Error("Abstract method!")}GetUserDefinitionAsync(x){throw new Error("Abstract method!")}GetUserGroupAsync(x){throw new Error("Abstract method!")}GetUserGroupsAsync(){throw new Error("Abstract method!")}GetUserGroupDefinitionAsync(x){throw new Error("Abstract method!")}LogOff(x){throw new Error("Abstract method!")}LogOnAsync(x,A,V){throw new Error("Abstract method!")}MoveUserToGroupAsync(x,A){throw new Error("Abstract method!")}RemoveRightAsync(x){throw new Error("Abstract method!")}RemoveRightFromGroupAsync(x,A){throw new Error("Abstract method!")}RemoveUserAsync(x){throw new Error("Abstract method!")}RemoveUsersAsync(x){throw new Error("Abstract method!")}RemoveUserGroupAsync(x){throw new Error("Abstract method!")}RemoveUserGroupsAsync(x){throw new Error("Abstract method!")}VerifyUserAsync(x,A,V){throw new Error("Abstract method!")}GetUsersAndGroupsAsync(){throw new Error("Abstract method!")}}A.UserManagementService=UserManagementService}(A.UserManagement||(A.UserManagement={}))}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){"use strict";let A,V,R,D,N,U,B,F,W,H,z,G,j,q,Q,K,J,X;!function(x){x[x.Level=0]="Level",x[x.Rights=1]="Rights"}(A=x.AuthorizationSystemType||(x.AuthorizationSystemType={})),Object.freeze(A),function(x){x[x.Succeeded=0]="Succeeded",x[x.GroupAlreadyDefined=1]="GroupAlreadyDefined",x[x.MethodCallFailed=2]="MethodCallFailed",x[x.WrongParam=3]="WrongParam",x[x.UnknownRight=4]="UnknownRight",x[x.UnableToSaveGroup=5]="UnableToSaveGroup"}(V=x.AddGroupSuccess||(x.AddGroupSuccess={})),Object.freeze(V),function(x){x[x.Succeeded=0]="Succeeded",x[x.RightAlreadyDefined=1]="RightAlreadyDefined",x[x.MethodCallFailed=2]="MethodCallFailed",x[x.WrongParam=3]="WrongParam",x[x.NotValidForAuthorizationSystem=4]="NotValidForAuthorizationSystem",x[x.UnableToSaveRight=5]="UnableToSaveRight"}(R=x.AddRightSuccess||(x.AddRightSuccess={})),Object.freeze(R),function(x){x[x.Succeeded=0]="Succeeded",x[x.InvalidPasswordLength=1]="InvalidPasswordLength",x[x.InvalidPassword=2]="InvalidPassword",x[x.UserExists=3]="UserExists",x[x.UnableToSaveUser=4]="UnableToSaveUser",x[x.MethodCallFailed=5]="MethodCallFailed",x[x.NoCharactersInPassword=6]="NoCharactersInPassword",x[x.NoNumbersInPassword=7]="NoNumbersInPassword",x[x.PasswordMustContainSpecialCharacters=8]="PasswordMustContainSpecialCharacters",x[x.ForbiddenPassword=9]="ForbiddenPassword",x[x.FullUserExists=10]="FullUserExists",x[x.MachineCodeExists=11]="MachineCodeExists",x[x.LockedPassword=12]="LockedPassword",x[x.UnknownGroup=13]="UnknownGroup"}(D=x.AddUserSuccess||(x.AddUserSuccess={})),Object.freeze(D),function(x){x[x.Succeeded=0]="Succeeded",x[x.UnknownGroup=1]="UnknownGroup",x[x.MethodCallFailed=2]="MethodCallFailed",x[x.UnknownRight=3]="UnknownRight",x[x.UnableToSaveGroup=4]="UnableToSaveGroup",x[x.DeleteNotPermitted=5]="DeleteNotPermitted",x[x.InvalidGroup=6]="InvalidGroup"}(N=x.ChangeGroupSuccess||(x.ChangeGroupSuccess={})),Object.freeze(N),function(x){x[x.Succeeded=0]="Succeeded",x[x.UnknownUser=1]="UnknownUser",x[x.OldPasswordInvalid=2]="OldPasswordInvalid",x[x.UnableToSavePassword=3]="UnableToSavePassword",x[x.NewPasswordInvalidLength=4]="NewPasswordInvalidLength",x[x.NewPasswordInvalid=5]="NewPasswordInvalid",x[x.MethodCallFailed=6]="MethodCallFailed",x[x.NoCharactersInPassword=7]="NoCharactersInPassword",x[x.NoNumbersInPassword=8]="NoNumbersInPassword",x[x.PasswordMustContainSpecialCharacters=9]="PasswordMustContainSpecialCharacters",x[x.ForbiddenPassword=10]="ForbiddenPassword",x[x.CantAccessDomainInfo=11]="CantAccessDomainInfo",x[x.LockedPassword=12]="LockedPassword"}(U=x.ChangePasswordSuccess||(x.ChangePasswordSuccess={})),Object.freeze(U),function(x){x[x.Succeeded=0]="Succeeded",x[x.UnknownRight=1]="UnknownRight",x[x.UnableToSaveRight=2]="UnableToSaveRight",x[x.MethodCallFailed=3]="MethodCallFailed",x[x.UnknownGroup=4]="UnknownGroup"}(B=x.ChangeRightSuccess||(x.ChangeRightSuccess={})),Object.freeze(B),function(x){x[x.Succeeded=0]="Succeeded",x[x.UnknownUser=1]="UnknownUser",x[x.UnknownUserClass=2]="UnknownUserClass",x[x.UnableToSaveUser=3]="UnableToSaveUser",x[x.InvalidPasswordLength=4]="InvalidPasswordLength",x[x.InvalidPassword=5]="InvalidPassword",x[x.MethodCallFailed=6]="MethodCallFailed",x[x.NoCharactersInPassword=7]="NoCharactersInPassword",x[x.NoNumbersInPassword=8]="NoNumbersInPassword",x[x.PasswordMustContainSpecialCharacters=9]="PasswordMustContainSpecialCharacters",x[x.ForbiddenPassword=10]="ForbiddenPassword",x[x.FullUserExists=11]="FullUserExists",x[x.MachineCodeExists=12]="MachineCodeExists",x[x.LockedPassword=13]="LockedPassword",x[x.InvalidUserClass=14]="InvalidUserClass"}(F=x.ChangeUserSuccess||(x.ChangeUserSuccess={})),Object.freeze(F),function(x){x[x.Succeeded=0]="Succeeded",x[x.GroupAlreadyDefined=1]="GroupAlreadyDefined",x[x.MethodCallFailed=2]="MethodCallFailed",x[x.WrongParam=3]="WrongParam",x[x.UnknownRight=4]="UnknownRight",x[x.UnableToSaveGroup=5]="UnableToSaveGroup",x[x.UnknownGroup=6]="UnknownGroup"}(W=x.CopyGroupSuccess||(x.CopyGroupSuccess={})),Object.freeze(W),function(x){x[x.Succeeded=0]="Succeeded",x[x.InvalidPasswordLength=1]="InvalidPasswordLength",x[x.InvalidPassword=2]="InvalidPassword",x[x.UserExists=3]="UserExists",x[x.UnableToSaveUser=4]="UnableToSaveUser",x[x.MethodCallFailed=5]="MethodCallFailed",x[x.NoCharactersInPassword=6]="NoCharactersInPassword",x[x.NoNumbersInPassword=7]="NoNumbersInPassword",x[x.PasswordMustContainSpecialCharacters=8]="PasswordMustContainSpecialCharacters",x[x.ForbiddenPassword=9]="ForbiddenPassword",x[x.FullUserExists=10]="FullUserExists",x[x.MachineCodeExists=11]="MachineCodeExists",x[x.LockedPassword=12]="LockedPassword",x[x.UnknownGroup=13]="UnknownGroup",x[x.UnknownUser=14]="UnknownUser"}(H=x.CopyUserSuccess||(x.CopyUserSuccess={})),Object.freeze(H),function(x){x[x.UnknownUser=0]="UnknownUser",x[x.InvalidPassword=1]="InvalidPassword",x[x.Succeeded=2]="Succeeded",x[x.UserDeactivated=3]="UserDeactivated",x[x.PasswordExpired=4]="PasswordExpired",x[x.TooManyFailedLogOns=5]="TooManyFailedLogOns",x[x.RenewPassword=6]="RenewPassword",x[x.NoCorrespondingLocalUserClass=7]="NoCorrespondingLocalUserClass",x[x.CantAccessDomainInfo=8]="CantAccessDomainInfo",x[x.MethodCallFailed=9]="MethodCallFailed"}(z=x.LogOnSuccess||(x.LogOnSuccess={})),Object.freeze(z),function(x){x[x.NONE=0]="NONE",x[x.AND=1]="AND",x[x.OR=2]="OR"}(G=x.RightCombination||(x.RightCombination={})),Object.freeze(G),function(x){x[x.Deactivated=0]="Deactivated",x[x.Active=1]="Active",x[x.Invalidated=2]="Invalidated",x[x.PasswordExpired=3]="PasswordExpired",x[x.Unknown=4]="Unknown"}(j=x.UserState||(x.UserState={})),Object.freeze(j),function(x){x[x.MethodCallFailed=0]="MethodCallFailed",x[x.Succeeded=1]="Succeeded",x[x.UnknownRight=2]="UnknownRight",x[x.UnableToSaveRight=3]="UnableToSaveRight"}(q=x.RemoveRightSuccess||(x.RemoveRightSuccess={})),Object.freeze(q),function(x){x[x.MethodCallFailed=0]="MethodCallFailed",x[x.Succeeded=1]="Succeeded",x[x.UnknownUser=2]="UnknownUser",x[x.UnknownGroup=3]="UnknownGroup",x[x.UnableToSaveUser=4]="UnableToSaveUser",x[x.DeletePermitted=5]="DeletePermitted"}(Q=x.RemoveUserSuccess||(x.RemoveUserSuccess={})),Object.freeze(Q),function(x){x[x.Succeeded=0]="Succeeded",x[x.UnknownGroup=1]="UnknownGroup",x[x.MethodCallFailed=2]="MethodCallFailed",x[x.UnknownRight=3]="UnknownRight",x[x.UnableToSaveGroup=4]="UnableToSaveGroup",x[x.DeleteNotPermitted=5]="DeleteNotPermitted",x[x.InvalidGroup=6]="InvalidGroup"}(K=x.RemoveGroupSuccess||(x.RemoveGroupSuccess={})),Object.freeze(K),function(x){x[x.MethodCallFailed=0]="MethodCallFailed",x[x.Succeeded=1]="Succeeded",x[x.UnknownUser=2]="UnknownUser",x[x.ViolatedPolicies=3]="ViolatedPolicies",x[x.OldPasswordInvalid=4]="OldPasswordInvalid",x[x.CantAccessDomainInfo=5]="CantAccessDomainInfo",x[x.LockedPassword=6]="LockedPassword"}(J=x.VerifyPasswordSuccess||(x.VerifyPasswordSuccess={})),Object.freeze(J),function(x){x[x.Changed=0]="Changed",x[x.Added=1]="Added",x[x.Removed=2]="Removed"}(X=x.ItemModifiedCause||(x.ItemModifiedCause={})),Object.freeze(X)}(x.UserManagement||(x.UserManagement={}))}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){"use strict";class Authorization extends x.Internal.System.BaseClass{}A.Authorization=Authorization}(A.UserManagement||(A.UserManagement={}))}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){"use strict";x.UserDefinition=class UserDefinition{}}(x.UserManagement||(x.UserManagement={}))}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){"use strict";x.UserInfo=class UserInfo{}}(x.UserManagement||(x.UserManagement={}))}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){"use strict";x.UserGroupDefinition=class UserGroupDefinition{}}(x.UserManagement||(x.UserManagement={}))}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){"use strict";x.RightDefinition=class RightDefinition{}}(x.UserManagement||(x.UserManagement={}))}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){"use strict";class BlinkService{constructor(){if(this.blinkState=!1,BlinkService.blinky)return BlinkService.blinky;this.CurrentState=!1,this.MainBlinkEnable=!1,this._mainBlinkCycle=500,this.DoBlink=new x.Internal.System.Events.TypedEvent}static getService(){return BlinkService.blinky||(BlinkService.blinky=new BlinkService),BlinkService.blinky}get MainBlinkCycle(){return this._mainBlinkCycle}set MainBlinkCycle(x){this._mainBlinkCycle!==x&&(this._mainBlinkCycle=x,this.StopBlinkSystem(),this.StartBlinkSystem())}get MainBlinkEnable(){return this._blinkEnabled}set MainBlinkEnable(x){this._blinkEnabled!==x&&(this._blinkEnabled=x,!0===x&&this.StartBlinkSystem())}CreateBlinkTimer(){return new A.BlinkTimer}GetBlinkTimer(A=1,V=!1){const R=new x.System.Service.BlinkTimer;return R.BlinkCycle=A,R.Enable=V,R}StartBlinkSystem(){null===this._timer&&(this._timer=window.setInterval(()=>{window.setTimeout(()=>{this.blinkState=!this.blinkState,this.CurrentState=this.blinkState,this.DoBlink.trigger(this.blinkState)},1)},this._mainBlinkCycle))}StopBlinkSystem(){null!==this._timer&&(window.clearInterval(this._timer),this.blinkState=!1,this.CurrentState=this.blinkState,this.DoBlink.trigger(this.CurrentState),this._timer=null)}}A.BlinkService=BlinkService}(A.Service||(A.Service={}))}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){"use strict";A.BlinkTimer=class BlinkTimer{constructor(){this._blinkService=x.System.Service.BlinkService.getService(),this._blinkCounter=0,this.onBlinkHandler=x=>{this.CurrentState=x,!0===this.CurrentState?(this._blinkCounter++,this.BlinkCycle===this._blinkCounter&&(this.fireBlinkEvent(),this._blinkCounter=0)):this.fireBlinkEvent()},this._blinkCycle=1,this.CurrentState=this._blinkService.CurrentState,this.Enable=!1,this.OnBlink=new x.Internal.System.Events.TypedEvent}fireBlinkEvent(){this.OnBlink.trigger(this.CurrentState)}get BlinkCycle(){return this._blinkCycle}set BlinkCycle(x){this._blinkCycle!==x&&(this._blinkCycle=x)}get Enable(){return this._blinkEnabled}set Enable(x){this._blinkEnabled!==x&&(this._blinkEnabled=x,!0===this._blinkEnabled&&(this._blinkService.DoBlink.add(this.onBlinkHandler),this._blinkService.MainBlinkEnable=!0))}dispose(){this.OnBlink.remove()}}}(A.Service||(A.Service={}))}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){"use strict";class ClientService extends x.Internal.System.BaseClass{static getService(){return x.Internal.Application.ApplicationManager.getApplication().getDefaultSession().ClientManager.ClientService}}A.ClientService=ClientService}(A.Client||(A.Client={}))}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){"use strict";let A,V;!function(x){x[x.Connecting=0]="Connecting",x[x.Open=1]="Open",x[x.Closing=2]="Closing",x[x.Closed=3]="Closed"}(A=x.CommunicationState||(x.CommunicationState={})),Object.freeze(A),function(x){x[x.Unloaded=0]="Unloaded",x[x.Starting=1]="Starting",x[x.Running=2]="Running",x[x.Stopped=3]="Stopped",x[x.Paused=4]="Paused",x[x.OnExit=5]="OnExit",x[x.Error=6]="Error",x[x.SocketNotAvailable=7]="SocketNotAvailable",x[x.CommunicationUnclear=8]="CommunicationUnclear",x[x.Uncertain=9]="Uncertain",x[x.RestartRequired=10]="RestartRequired"}(V=x.ClientState||(x.ClientState={})),Object.freeze(V)}(x.Client||(x.Client={}))}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){!function(x){!function(x){"use strict";const A={SocketError:["Eine Verbindung zum Server konnte nicht aufgebaut werden."],LicenseError:["Lizenzfehler, Es drfen keine Webclients genutzt werden."],StartupError:["Start fehler im ","system! "],SocketTimeout:["Socket konnte nicht in ","ms geffnet werden URL:"],DemoMode:["Die Applikation luft im Demo Mode."]},V={SocketError:["A connection to the server could not be established."],LicenseError:["License error. No web clients may be used."],StartupError:["Start error in ","system! "],SocketTimeout:["Socket did not open in ","ms URL:"],DemoMode:["The application runs in demo mode."]};let R;x.errorStringsWithParams=function errorStringsWithParams(x,R,D,N){return 1031===x?N?`${A[R][0]}${D}${A[R][1]}${N}`:D?`${A[R][0]}${D}`:A[R][0]:N?`${V[R][0]}${D}${V[R][1]}${N}`:D?`${V[R][0]}${D}`:V[R][0]},function(x){x.SocketError="SocketError",x.LicenseError="LicenseError",x.StartupError="StartupError",x.SocketTimeout="SocketTimeout",x.DemoMode="DemoMode"}(R=x.commonErrorString||(x.commonErrorString={}))}(x.Strings||(x.Strings={}))}(x.Settings||(x.Settings={}))}(x.Application||(x.Application={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){"use strict";A.StartCore=function StartCore(A){x.Internal.Application.Start.BaseOnly.StartVisiWinBase(A)},A.StartCoreAwaitLogOn=function StartCoreAwaitLogOn(A,V=!1){return __awaiter(this,void 0,void 0,(function*(){return x.Internal.Application.Start.BaseOnly.StartVisiWinWithCustomLogOn(A,V)}))},A.CoreReady=new x.Internal.System.Events.TypedEvent,A.CoreError=new x.Internal.System.Events.TypedEvent}(A.Core||(A.Core={}))}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(A){"use strict";A.SystemSettings=class SystemSettings{constructor(){this.AppDomainsToLog=[0,1,2,3,4,5,6,7,8,9,10],this.AppDomainCategoriesToLog=[4],this.SystemLoader=["Alarm","Trend","Logging","Recipe"],this.LogStackSize=500,this.EnableVisiWinPerformanceMarks=!1,this._EneableVisiWinPerformanceMarks=!1,this.WebSocketReconnects=1e3,this.WebSocketReconnectInterval=6e4,this.EnableWebSocketReconnencts=!0,this.EnableWebSocketReconnects=!0,this.ObserveWebSocketConnectionTimeout=!0,this.WebSocketConnectionTimeout=2e4,this.ProtokollVersion=x.Application.VersionNumber,this.MaxTrendSamples=500,this.DeprecatedWarningEnabled=!0,this._DeprecatedWarningEneabled=!0,this.WebClientProtocolVersion=8,this.WebGatewayProtocolVersion=0,this._Debug=!1,this._DebugLogLevel=3,this._VisiWinVersion=x.Application.VersionNumber,this._ProjectStartTimeout=12e4,this._AttachDelay=50,this._ObservePingPongTimeout=!0,this._PingPongTimeout=6e4,this.DeactivateEventQueue=!1}get EneableVisiWinPerformanceMarks(){return this._EneableVisiWinPerformanceMarks}set EneableVisiWinPerformanceMarks(x){this.EnableVisiWinPerformanceMarks!==x&&(this.EnableVisiWinPerformanceMarks=x),this._EneableVisiWinPerformanceMarks=x}get DeprecatedWarningEneabled(){return this._DeprecatedWarningEneabled}set DeprecatedWarningEneabled(x){this.DeprecatedWarningEnabled!==x&&(this.DeprecatedWarningEnabled=x),this._DeprecatedWarningEneabled=x}get Debug(){return this._Debug}set Debug(A){x.isBoolean(A)?this._Debug=A:x.Application._writeSetterError("Debug",A,this._Debug,"System")}get DebugLogLevel(){return this._DebugLogLevel}set DebugLogLevel(A){x.isNumber(A)?this._DebugLogLevel=A:x.Application._writeSetterError("DebugLogLevel",A,this._DebugLogLevel,"System")}get VisiWinVersion(){return this._VisiWinVersion}set VisiWinVersion(A){x.isNumber(A)?this._VisiWinVersion=A:x.Application._writeSetterError("VisiWinVersion",A,this._VisiWinVersion,"System")}get ProjectStartTimeout(){return this._ProjectStartTimeout}set ProjectStartTimeout(A){x.isNumber(A)?this._ProjectStartTimeout=A:x.Application._writeSetterError("ProjectStartTimeout",A,this._ProjectStartTimeout,"System")}get AttachDelay(){return this._AttachDelay}set AttachDelay(A){x.isNumber(A)?this._AttachDelay=A:x.Application._writeSetterError("AttachDelay",A,this._AttachDelay,"System")}get ObservePingPongTimeout(){return this._ObservePingPongTimeout}set ObservePingPongTimeout(A){x.isBoolean(A)?this._ObservePingPongTimeout=A:x.Application._writeSetterError("ObservePingPongTimeout",A,this._ObservePingPongTimeout,"System")}get PingPongTimeout(){return this._PingPongTimeout}set PingPongTimeout(A){x.isNumber(A)?this._PingPongTimeout=A:x.Application._writeSetterError("PingPongTimeout",A,this._PingPongTimeout,"System")}}}(A.Settings||(A.Settings={}))}(A.Application||(A.Application={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(A){"use strict";A.ClientSettings=class ClientSettings{constructor(){this.IsSingleSession=!0,this.IsDefaultSession=!0,this.AutoCompleteStartupAfterLogon=!1,this.TelegramVersion=x.Application.VersionNumber,this._AutoLogin=!1,this._DefaultUser="",this._DefaultPassword="",this._ClientLCID=1031,this._ClientUTCOffset=(new Date).getTimezoneOffset()/60*-1,this._LineBreakSearchString="\\n",this._LineBreakReplaceString="\r\n",this._escapeStringReplacement=[{search:"\\n",replace:"\n"},{search:"\\t",replace:"\t"}]}get AutoLogin(){return this._AutoLogin}set AutoLogin(A){x.isBoolean(A)?this._AutoLogin=A:x.Application._writeSetterError("AutoLogin",A,this._AutoLogin,"Client")}get DefaultUser(){return this._DefaultUser}set DefaultUser(A){x.isNullOrEmpty(A)?x.Application._writeSetterError("DefaultUser",A,this._DefaultUser,"Client"):this._DefaultUser=A}get DefaultPassword(){return this._DefaultPassword}set DefaultPassword(A){x.isString(A)||x.isNumber(A)||x.isNullOrUndefined(A)?this._DefaultPassword=A:x.Application._writeSetterError("DefaultPassword",A,this._DefaultPassword,"Client")}get ClientLCID(){return this._ClientLCID}set ClientLCID(A){x.isNumber(A)?this._ClientLCID=A:x.Application._writeSetterError("ClientLCID",A,this._ClientLCID,"Client")}get ClientUTCOffset(){return this._ClientUTCOffset}set ClientUTCOffset(A){x.isNumber(A)?this._ClientUTCOffset=A:x.Application._writeSetterError("ClientUTCOffset",A,this._ClientUTCOffset,"Client")}get LineBreakSearchString(){return this._LineBreakSearchString}set LineBreakSearchString(A){x.isNullOrEmpty(A)?x.Application._writeSetterError("LineBreakSearchString",A,this._LineBreakSearchString,"Client"):this._LineBreakSearchString=A}get LineBreakReplaceString(){return this._LineBreakReplaceString}set LineBreakReplaceString(A){x.isNullOrEmpty(A)?x.Application._writeSetterError("LineBreakReplaceString",A,this._LineBreakReplaceString,"Client"):this._LineBreakReplaceString=A}get EscapeStringReplacement(){return this._escapeStringReplacement}set EscapeStringReplacement(x){this._escapeStringReplacement=x}}}(A.Settings||(A.Settings={}))}(A.Application||(A.Application={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(A){"use strict";A.ServerSettings=class ServerSettings{constructor(){this.ConnectionTimeout=3e4,this._webSocketPrefix="https:"===window.location.protocol.toLowerCase()?"wss://":"ws://",this._webSocketHost=window.location.hostname,this._webSocketPort="https:"===window.location.protocol.toLowerCase()?443:80,this._webSocketUriParameter="",this._socketUri="",this._ServerProjectName="",this._RuntimeVersion=x.Application.VersionNumber,this._UseSecureServer=!1,this._ServerProjectStartTimeout=300}validateSocketUri(x){return!!/(ws|wss|http|https):\/\/(\w+:{0,1}\w*)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%!\-/]))?/.test(x)}get WebSocketPrefix(){return this._webSocketPrefix}set WebSocketPrefix(A){x.isNullOrEmpty(A)?x.Application._writeSetterError("WebSocketPrefix",A,this._webSocketPrefix,"Server"):(this._webSocketPrefix=A,this.SocketUri=this._webSocketPrefix)}get WebSocketHost(){return this._webSocketHost}set WebSocketHost(A){x.isNullOrEmpty(A)?x.Application._writeSetterError("WebSocketHost",A,this._webSocketHost,"Server"):(this._webSocketHost=A,this.SocketUri=this._webSocketHost)}get WebSocketPort(){return this._webSocketPort}set WebSocketPort(A){var V,R,D;if(this._webSocketPort=parseInt(window.location.port,10),Number.isInteger(A))this._webSocketPort=A,this.SocketUri=this._webSocketPort.toString();else if(x.isNumber(A)||x.isString(A))return A=parseInt(A,10),isNaN(A)&&x.Application._writeSetterError("WebSocketPort",A,this._webSocketPort,"Server"),this._webSocketPort=A,void(this.SocketUri=this._webSocketPort.toString());return(null===(R=null===(V=x.Application.Settings)||void 0===V?void 0:V.Server)||void 0===R?void 0:R.WebSocketPort)?(this._webSocketPort=x.Application.Settings.Server.WebSocketPort,void(this.SocketUri=this._webSocketPort.toString())):(null===(D=x.Application.Settings)||void 0===D?void 0:D.WebSocketPort)?(this._webSocketPort=x.Application.Settings.WebSocketPort,void(this.SocketUri=this._webSocketPort.toString())):void(Number.isInteger(A)?(this._webSocketPort=A,this.SocketUri=this._webSocketPort.toString()):x.isNumber(A)?(A=parseInt(A,10),isNaN(A)&&x.Application._writeSetterError("WebSocketPort",A,this._webSocketPort,"Server"),this._webSocketPort=A,this.SocketUri=this._webSocketPort.toString()):(A=parseInt(A,10),isNaN(A)?x.Application._writeSetterError("WebSocketPort",A,this._webSocketPort,"Server"):(this._webSocketPort=A,this.SocketUri=this._webSocketPort.toString())))}get WebSocketUriParameter(){return this._webSocketUriParameter}set WebSocketUriParameter(A){x.isNullOrEmpty(A)?x.Application._writeSetterError("WebSocketUriParameter",A,this._webSocketUriParameter,"Server"):(x.stringStartsWith(A,"/")||(A="/"+A),this._webSocketUriParameter=A,this.SocketUri=this._webSocketUriParameter)}get SocketUri(){return this._socketUri}set SocketUri(A){var V,R;if(x.isNullOrEmpty(A))x.Application._writeSetterError("SocketUri",A,this._socketUri,"Server");else{const D=null!==(V=this._webSocketPrefix)&&void 0!==V?V:"ws://",N=x.isNullOrEmpty(this._webSocketHost)?window.location.hostname:this._webSocketHost,U=null!==(R=this._webSocketPort)&&void 0!==R?R:(A=>{if(x.isNumber(A.WebSocketPort))return A.WebSocketPort;if(x.isNumber(A.WebSocketPort))return A.WebSocketPort;if(!x.isNullOrEmpty(A.WebSocketPort))return parseInt(A.WebSocketPort,10);const V=parseInt(window.location.port,10);return x.isNumber(V)?V:2016})(this);this.validateSocketUri(A)?this._socketUri=A:this._webSocketUriParameter?(x.stringStartsWith(this._webSocketUriParameter,"/")||(this._webSocketUriParameter="/"+this._webSocketUriParameter),this._socketUri=D+N+":"+U+this._webSocketUriParameter):this._socketUri=D+N+":"+U}}get ServerProjectName(){return this._ServerProjectName}set ServerProjectName(A){x.isNullOrEmpty(A)?x.Application._writeSetterError("ServerProjectName",A,this._ServerProjectName,"Server"):this._ServerProjectName=A}get RuntimeVersion(){return this._RuntimeVersion}set RuntimeVersion(A){x.isNumber(A)?this._RuntimeVersion=A:x.isNullOrEmpty(A)||(x.isNumber(A)||(A=parseFloat(A)),isNaN(A)?x.Application._writeSetterError("RuntimeVersion",A,this._RuntimeVersion,"Server"):this._RuntimeVersion=A)}get UseSecureServer(){return this._UseSecureServer}set UseSecureServer(A){x.isBoolean(A)?this._UseSecureServer=A:x.Application._writeSetterError("UseSecureServer",A,this._UseSecureServer,"Server")}get ServerProjectStartTimeout(){return this._ServerProjectStartTimeout}set ServerProjectStartTimeout(x){this._ServerProjectStartTimeout=x}}}(A.Settings||(A.Settings={}))}(A.Application||(A.Application={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(A){"use strict";A.SecureServerSettings=class SecureServerSettings{constructor(){this._webSocketPrefix="wss://",this._webSocketHost=window.location.hostname,this._webSocketPort=parseInt(window.location.port,10),this._webSocketUriParameter=""}get WebSocketPrefix(){return this._webSocketPrefix}set WebSocketPrefix(A){x.isNullOrEmpty(A)?x.Application._writeSetterError("WebSocketPrefix",A,this._webSocketPrefix,"SecureServer"):this._webSocketPrefix=A}get WebSocketHost(){return this._webSocketHost}set WebSocketHost(A){x.isNullOrEmpty(A)?x.Application._writeSetterError("WebSocketHost",A,this._webSocketHost,"SecureServer"):this._webSocketHost=A}get WebSocketPort(){return this._webSocketPort}set WebSocketPort(A){Number.isInteger(A)?this._webSocketPort=A:x.isNumber(A)?(A=parseInt(A,10),isNaN(A)&&x.Application._writeSetterError("WebSocketPort",A,this._webSocketPort,"SecureServer"),this._webSocketPort=A):(A=parseInt(A,10),isNaN(A)?x.Application._writeSetterError("WebSocketPort",A,this._webSocketPort,"SecureServer"):this._webSocketPort=A)}get WebSocketUriParameter(){return this._webSocketUriParameter}set WebSocketUriParameter(A){x.isNullOrEmpty(A)?x.Application._writeSetterError("WebSocketUriParameter",A,this._webSocketUriParameter,"SecureServer"):(x.stringStartsWith(A,"/")||(A="/"+A),this._webSocketUriParameter=A)}}}(A.Settings||(A.Settings={}))}(A.Application||(A.Application={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";A.VersionString="7.3",A.VersionNumber=7.3,A.VersionNumberMdb=7.2,A.VersionNumberIoT=7.3;A.AppSettings=class AppSettings{constructor(){var A,V,R,D,N,U;let B;if(this.System=null,this.Server=null,this.SecureServer=null,this.Client=null,this.UI=null,this.AppServices=null,x.Application.Settings)try{B=x.Internal.SimpleObjectJSONClone(x.Application.Settings)}catch(x){}if(this.System=new x.Internal.Application.Settings.SystemSettings,this.Server=new x.Internal.Application.Settings.ServerSettings,this.SecureServer=new x.Internal.Application.Settings.SecureServerSettings,this.Client=new x.Internal.Application.Settings.ClientSettings,this.UI=null!==(R=null===(V=null===(A=x.Application)||void 0===A?void 0:A.Settings)||void 0===V?void 0:V.UI)&&void 0!==R?R:{},this.AppServices=null!==(U=null===(N=null===(D=x.Application)||void 0===D?void 0:D.Settings)||void 0===N?void 0:N.AppServices)&&void 0!==U?U:{},B)for(const A in B)if(Object.prototype.hasOwnProperty.call(B,A))try{switch(A){case"Client":for(const x in B[A])this.Client[x]=B[A][x];break;case"System":for(const x in B[A])this.System[x]=B[A][x];break;case"Server":for(const x in B[A])this.Server[x]=B[A][x];break;case"SecureServer":for(const x in B[A])this.SecureServer[x]=B[A][x];break;case"UI":for(const x in B[A])this.UI[x]=B[A][x];break;case"AppServices":for(const x in B[A])this.AppServices[x]=B[A][x];break;case"Debug":case"DebugLogLevel":case"VisiWinVersion":case"AppDomainsToLog":case"AppDomainCategoriesToLog":case"SystemLoader":case"LogStackSize":case"EneableVisiWinPerformanceMarks":case"EnableVisiWinPerformanceMarks":case"WebSocketReconnects":case"EnableWebSocketReconnencts":case"EnableWebSocketReconnects":case"ObserveWebSocketConnectionTimeout":case"WebSocketConnectionTimeout":case"WebSocketReconnectInterval":case"ProtokollVersion":case"DeprecatedWarningEneabled":case"DeprecatedWarningEnabled":case"ProjectStartTimeout":case"AttachDelay":case"ObservePingPongTimeout":case"PingPongTimeout":case"DeactivateEventQueue":case"MaxTrendSamples":this.System[A]=B[A];break;case"WebSocketPrefix":case"WebSocketUriParameter":case"WebSocketHost":case"WebSocketPort":case"UseSecureServer":case"SocketUri":case"ServerProjectName":case"ServerProjectStartTimeout":case"RuntimeVersion":case"ConnectionTimeout":this.Server[A]=B[A];break;case"AutoLogin":case"DefaultUser":case"DefaultPassword":case"ClientLCID":case"TelegramVersion":case"ClientUTCOffset":case"LineBreakSearchString":case"LineBreakReplaceString":case"EscapeStringReplacement":case"AutoCompleteStartupAfterLogon":this.Client[A]=B[A];break;case"ImportList_RunMode":case"AppServices_RunMode":case"AutoRestartOnError":case"AutoRestartDelay":case"SuspendCommunicationDelay":case"SuspendCommunicationEnabled":case"RestartAfterSuspension":case"ForceDesignMode":case"ForceDebugMode":case"PageMode":case"DisableClearHTML":case"DisableDesignModeCodeBehind":case"ImportList_DesignMode":case"ImportList_DebugMode":case"AppServices_DesignMode":case"WebSocketDisable":case"LoginView":case"ErrorView":case"EmptyPage":case"StyleColors":case"TimingLog":case"DevelopmentMode":case"InteractivRunMode":case"PreloadImages":case"ImageList":case"SymbolPath":case"DefaultIconFont":case"StyleFamily":case"Device":case"Animation":case"DirectoryNames":case"FileName":case"Styles":case"Services":case"Controls":case"UserControls":case"CustomControls":case"Provider":case"Classes":case"Actions":case"ProjectStyles":case"Colors":case"Animations":case"Shadows":case"StateLists":case"TouchKeyboard":case"StateInfos":case"StateLists":case"StateCollection":case"SVGBindingLists":case"Languages":case"PointerTypes":case"DesignTimeLanguage":case"RunTimeLanguage":case"Themes":case"DesignTimeTheme":case"RunTimeTheme":case"DateTimeFormats":case"PreloadPages":case"PagePreloadList":case"PreloadViews":case"ViewPreloadList":case"LoadingPageName":case"LoadingViewName":case"ShowLoadingPageForUncachedPages":case"IncludePartiallyLoadedPages":case"StartDelay":this.UI[A]=B[A];break;default:x.System.Diagnostics.Logger.InfoLog.log("Unkown settings property: "+A)}}catch(x){}B&&(x.Application.Settings=this)}},A._writeSetterError=function _writeSetterError(A,V,R,D){try{const N=D||"Application",U=A||"Property?";let B="Wrong type?";null===V?B="Value null not allowed?":x.isNullOrEmpty(V)?B="Value empty not allowed?":x.isNullOrUndefined(V)&&(B="Value undefined not allowed?");const F=`${N}Settings Error:'${U}' property could not be set. Rejected value:${V}. Keep using:${R}.  ${B}`;x.System.Diagnostics.Logger.WarnLog.log(F)}catch(x){}}}(x.Application||(x.Application={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){"use strict";A.onInitReady=new x.Internal.System.Events.TypedEvent,A.onInitError=new x.Internal.System.Events.TypedEvent,A.startUpProgress=new x.Internal.System.Events.TypedEvent,A.StartUpInfo={Connection:{Succeeded:!0,Socket:null,Result:""},Project:{Succeeded:!0,Result:"",ProjectName:""},User:{Succeeded:!0,LogOnSuccess:null,Result:""},Language:{Succeeded:!0,CurrentLanguage:null,ProjectLanguage:null,Result:""},Alarm:{Succeeded:!0,ClassNames:[],GroupNames:[],AlarmClasses:null,AlarmGroups:null,Result:""},Trend:{Succeeded:!0,ArchiveNames:null,Result:""},Logging:{Succeeded:!0,CategoryNames:[],Categories:null,Result:""},Recipe:{Succeeded:!0,RecipeClassNames:null,Result:""},StartUp:[],LastSystem:"",HasError:!1}}(A.Start||(A.Start={}))}(x.Application||(x.Application={}))}(VisiWin||(VisiWin={})),window.VisiWin=VisiWin,function(x){!function(x){x.Application||(x.Application={})}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){"use strict";A.Logger=x.System.Diagnostics.Logger}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(x){x.Application||(x.Application={})}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){"use strict";class ApplicationManager{constructor(){if(this.ApplicationID=x.Guid(),ApplicationManager.application)return ApplicationManager.application;this.ApplicationID=x.Guid(),this.ConnectionManager=new x.Internal.Domain.Application.Connection.ConnectionManager,this.SessionManager=new x.Internal.Domain.Application.Session.SessionManager(this),x.Internal.Domain.Logger.AppDomainLog.log("ApplicationBase ctor",this,x.Internal.System.Diagnostics.Logging.AppDomainEventSource.System,x.Internal.System.Diagnostics.Logging.AppDomainCategorySource.Constructor)}static getApplication(){return ApplicationManager.application||(x.Application.Settings=new x.Application.AppSettings,ApplicationManager.application=new ApplicationManager),ApplicationManager.application}Dispose(){this.SessionManager.Dispose(),this.ConnectionManager.Dispose()}getDefaultSession(){return this.SessionManager.DefaultSession?this.SessionManager.DefaultSession:this.SessionManager.GetDefaultSession()}}A.ApplicationManager=ApplicationManager}(A.Application||(A.Application={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){!function(x){"use strict";x.Telegram={REQUESTID:"RequestID",UTCOFFSET:"UtcOffset",SUSPENDCOMMUNICATION:"SuspendCommunication",RESUMECOMMUNICATION:"ResumeCommunication",RESULTOK:"Ok",SUCCEEDED:"Succeeded",SERVERLOG:"ServerLog",ERROR:"Error",UNKNOWN:"Unknown"}}(x.CONST||(x.CONST={}))}(x.Domain||(x.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){!function(x){x.Connection||(x.Connection={})}(x.Application||(x.Application={}))}(x.Domain||(x.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){!function(x){x.Socket||(x.Socket={})}(x.Application||(x.Application={}))}(x.Domain||(x.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){!function(x){x.Watcher||(x.Watcher={})}(x.Application||(x.Application={}))}(x.Domain||(x.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={}));var __awaiter=this&&this.__awaiter||function(x,A,V,R){return new(V||(V=Promise))((function(D,N){function fulfilled(x){try{step(R.next(x))}catch(x){N(x)}}function rejected(x){try{step(R.throw(x))}catch(x){N(x)}}function step(x){x.done?D(x.value):function adopt(x){return x instanceof V?x:new V((function(A){A(x)}))}(x.value).then(fulfilled,rejected)}step((R=R.apply(x,A||[])).next())}))},VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin;!function(x){!function(A){!function(A){!function(V){!function(V){"use strict";V.onSuspendCommunication=new x.Internal.System.Events.TypedEvent,V.onResumeCommunication=new x.Internal.System.Events.TypedEvent;V.ServerHandle=class ServerHandle{constructor(V){this._currentReconnects=0,this.closeHandler=x=>this.webSocketClose(x),this.errorHandler=x=>this.webSocketError(x),this.messageHandler=x=>this.webSocketMessage(x),this.openHandler=x=>this.webSocketOpen(x),this.sendHandler=x=>this.webSocketSend(x),this.ID=x.Guid(),this.Socket=new x.Internal.System.Net.Websocket.VWSocket(V.Settings.Server.SocketUri),this.MsgHnd=new A.MsgHelper.TelegramHandler(this,V),this._session=V,this._reconnectInterval=this._session.Settings.System.WebSocketReconnectInterval,this._session.Settings.System.Debug&&A.Logger.AppDomainLog.log("SocketHandler ctor",this,x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Socket,x.Internal.System.Diagnostics.Logging.AppDomainCategorySource.Constructor)}Connect(){return __awaiter(this,void 0,void 0,(function*(){switch(this.startSocketTimeout(),A.Logger.WebSocketLog.log("WebSocket Start",this.Socket.Url),this.Socket.readyState){case x.Internal.System.Net.Websocket.SocketState.OPEN:return Promise.resolve(null);case x.Internal.System.Net.Websocket.SocketState.ERROR:return Promise.reject("SocketState.ERROR");case x.Internal.System.Net.Websocket.SocketState.CONNECTING:case x.Internal.System.Net.Websocket.SocketState.CLOSING:return null;default:return new Promise((V,R)=>{this.attachEventHandler(),this.Socket.onWebSocketOpen.add(x=>{V(x),Promise.resolve()}),this.Socket.onWebSocketError.add(()=>{R()}),this.Socket.Start(),this._session.ClientManager.updateCommunicationState(x.System.Client.CommunicationState.Connecting),this._session.Settings.System.Debug&&A.Logger.AppDomainLog.log("SocketHandler Start",this.Socket.Url,x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Socket,x.Internal.System.Diagnostics.Logging.AppDomainCategorySource.Undefined)})}}))}Close(V,R){return __awaiter(this,void 0,void 0,(function*(){return new Promise(D=>{this.Socket.onWebSocketClose.add(x=>{D(x),Promise.resolve()}),this.Socket.Close(V,R),A.Logger.WebSocketLog.log("WebSocket onclose ",{code:V,reason:R}),this._session.Settings.System.Debug&&A.Logger.AppDomainLog.log("SocketHandler Close","Closed by Appliaction",x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Socket,x.Internal.System.Diagnostics.Logging.AppDomainCategorySource.Undefined)})}))}Send(x){if(this.Socket&&this.Socket.readyState===WebSocket.OPEN)this.Socket.Send(x),A.Logger.WebSocketLog.log("WebSocket send",x);else try{if(this.Socket&&this.Socket.readyState===WebSocket.CLOSED)throw new Error("INVALID_STATE_ERR : websocket closed")}catch(V){A.Logger.WarnLog.log("SocketHandler Send",{INVALID_STATE_ERR:"websocket",msg:x}),A.Logger.WebSocketLog.log("SocketHandler send",{INVALID_STATE_ERR:"websocket",msg:x})}}Dispose(){this.MsgHnd.Dispose(),this.Socket.onWebSocketClose.remove(),this.Socket.onWebSocketError.remove(),this.Socket.onWebSocketMessage.remove(),this.Socket.onWebSocketOpen.remove(),this.Socket.onWebSocketSend.remove(),this.Socket.Close("dispose call"),this.Socket=null,this._session.Settings.System.Debug&&A.Logger.AppDomainLog.log("SocketHandler disposed","",x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Socket,x.Internal.System.Diagnostics.Logging.AppDomainCategorySource.Undefined),A.Dispose(this)}attachEventHandler(){this.Socket.onWebSocketClose.add(this.closeHandler),this.Socket.onWebSocketError.add(this.errorHandler),this.Socket.onWebSocketMessage.add(this.messageHandler),this.Socket.onWebSocketOpen.add(this.openHandler),this.Socket.onWebSocketSend.add(this.sendHandler)}webSocketClose(V){const R={code:V.code,reason:V.reason,timeStamp:V.timeStamp,wasClean:V.wasClean,CloseCode:this.Socket.CloseCode,CloseReason:this.Socket.CloseReason};this._session.Settings.System.WebSocketReconnects>this._currentReconnects?this._session.SrvHnd&&this._session.SrvHnd.Socket&&1e3!==this._session.SrvHnd.Socket.CloseCode&&(this._currentReconnects=this._currentReconnects+1,clearInterval(this._reconnectTimer),this._session.ClientManager.clientState!==x.System.Client.ClientState.Stopped&&this._session.ClientManager.clientState!==x.System.Client.ClientState.Unloaded||this._reconnect(this._currentReconnects)):clearInterval(this._reconnectTimer),this._session.ClientManager.updateCommunicationState(V.target.readyState),this._session.ClientManager.updateClientState(x.System.Client.ClientState.SocketNotAvailable),this._session.ProjectManager.ProjectService.ServerProjectRuntimeState=x.System.Project.ServerRuntimeStatus.ErrorHostConnectionLost,this._session.ProjectManager.ProjectService.ServerProjectStateChange.trigger(this._session.ProjectManager.ProjectService.ServerProjectRuntimeState),this._session.ServerInfo.ProjectState=x.System.Project.ServerRuntimeStatus.ErrorHostConnectionLost,this._session.ServerInfo.Connected=!1,A.Logger.WebSocketLog.log("WebSocket onclose",{_CloseEvent:R}),this._session.Settings.System.Debug&&A.Logger.AppDomainLog.log("SocketHandler OnCloseHandler",R,x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Socket,x.Internal.System.Diagnostics.Logging.AppDomainCategorySource.Undefined)}webSocketError(V){this._session.ClientManager.updateCommunicationState(V.target.readyState),this._session.ClientManager.updateClientState(x.System.Client.ClientState.SocketNotAvailable),A.Logger.WebSocketLog.log("WebSocket onerror",V);const R=x.Internal.Application.Settings.Strings.errorStringsWithParams(this._session.ClientManager.LCID,x.Internal.Application.Settings.Strings.commonErrorString.SocketError);A.Logger.ErrorLog.log(R,{URI:this.Socket.Url})}webSocketMessage(V){this.MsgHnd.handleResponseCommand(V),this._session.Settings.System.Debug&&A.Logger.AppDomainLog.log("SocketHandler receive <<",V.data,x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Socket,x.Internal.System.Diagnostics.Logging.AppDomainCategorySource.Undefined),A.Logger.WebSocketLog.log("WebSocket onmessage",V.data)}webSocketOpen(V){clearTimeout(this._socketStartTimeoutFn),this._socketStartTimeoutFn=-1,this._reconnectTimer&&clearInterval(this._reconnectTimer),this._session.ClientManager.updateCommunicationState(V.target.readyState),A.Logger.WebSocketLog.log("WebSocket OnOpenHandler at URL:",this.Socket.Url),this._session.Settings.System.Debug&&A.Logger.AppDomainLog.log("SocketHandler OnOpenHandler at URL:",this.Socket.Url,x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Socket,x.Internal.System.Diagnostics.Logging.AppDomainCategorySource.Undefined)}webSocketSend(V){this._session.Settings.System.Debug&&A.Logger.AppDomainLog.log("SocketHandler send    >>",V,x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Socket,x.Internal.System.Diagnostics.Logging.AppDomainCategorySource.Undefined),this._session.Settings.System.Debug&&A.Logger.WebSocketLog.log("WebSocket Send",V)}_reconnect(V){!1!==this._session.Settings.System.EnableWebSocketReconnects&&(this._reconnectTimer||(this._reconnectTimer=setInterval(()=>this._reconnect(V),this._reconnectInterval)),this._session.ProjectManager&&(this._session.ClientManager.clientState===x.System.Client.ClientState.Stopped||this._session.ClientManager.clientState===x.System.Client.ClientState.Unloaded?(A.Logger.InfoLog.log("Reconnect(WebSocket error event was triggerd)"),setTimeout(()=>{window.location.reload()},this._reconnectInterval)):this._session.ClientManager.clientState===x.System.Client.ClientState.Running&&setTimeout(()=>{window.location.reload()},this._reconnectInterval)))}startSocketTimeout(){!1!==this._session.Settings.System.ObserveWebSocketConnectionTimeout&&(clearTimeout(this._socketStartTimeoutFn),this._socketStartTimeoutFn=-1,this._socketStartTimeoutFn=setTimeout(()=>{const V=x.Internal.Application.Settings.Strings.errorStringsWithParams(this._session.Settings.Client.ClientLCID,x.Internal.Application.Settings.Strings.commonErrorString.SocketTimeout,this._session.Settings.System.WebSocketConnectionTimeout.toString(),this.Socket.Url);A.Logger.WarnLog.log("StartSocketTimeout",{msg:V})},this._session.Settings.System.WebSocketConnectionTimeout))}}}(V.Socket||(V.Socket={}))}(A.Application||(A.Application={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";V.WatchDog=class WatchDog{constructor(x,A){this._timeout=A||x.session.Settings.Server.ConnectionTimeout,x.hasResponse&&this.initWatchdog(x)}initWatchdog(x){this._setTimeoutFn=setTimeout(()=>{this.timerCompleted(x)},this._timeout)}timerCompleted(A){const V=`Timeout error. CMD:"${A.QueryName}" did not response in ${this._timeout} ms. Further informations may be found in server logs.`;try{new x.Internal.System.Exception.ProtocolWatchdogException("ProtocolTimeout",V,null,A.eventSource)}catch(x){}Promise.resolve(A.PromiseFn[1](A)),this.Dispose()}clearWatchdogTimeout(){clearTimeout(this._setTimeoutFn),this._setTimeoutFn=0}Dispose(){this.clearWatchdogTimeout(),A.Dispose(this)}}}(V.Watcher||(V.Watcher={}))}(A.Application||(A.Application={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(R){"use strict";R.ConnectionManager=class ConnectionManager{constructor(){this._store={},A.Logger.AppDomainLog.log("ConnectionManager ctor",this,x.Internal.System.Diagnostics.Logging.AppDomainEventSource.System,x.Internal.System.Diagnostics.Logging.AppDomainCategorySource.Constructor)}CreateServerHandler(x){const A=x.ServerInfo.SocketUri;if(!this._store[A]){const A=new V.Socket.ServerHandle(x);this._store[A.Socket.Url]=A}return this._store[A]}GetSocket(x){const A=x.ServerInfo.SocketUri;return this._store[A]?this._store[A]:null}RemoveSocket(x){const A=x.ServerInfo.SocketUri;this._store[A]&&this._store[A].Dispose(),delete this._store[A]}Dispose(){for(const x in this._store)this._store[x].Dispose();A.Dispose(this)}}}(V.Connection||(V.Connection={}))}(A.Application||(A.Application={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){!function(x){x.ClientSession||(x.ClientSession={})}(x.Application||(x.Application={}))}(x.Domain||(x.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){!function(x){x.Session||(x.Session={})}(x.Application||(x.Application={}))}(x.Domain||(x.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";V.Session=class Session{constructor(V,R){this.Settings=V,this._sessionManager=R,this.ID=x.Guid(),this.IsDefaultSession=!1,this.ServerInfo=new x.Internal.Domain.Application.Server.ServerInfo(this.Settings),this.SrvHnd=R.ConnectionManager.CreateServerHandler(this),this.initManagers(),this.onInitReady=new x.Internal.System.Events.TypedEvent,this.Settings.System.Debug&&A.Logger.AppDomainLog.log("Session ctor",this,x.Internal.System.Diagnostics.Logging.AppDomainEventSource.System,x.Internal.System.Diagnostics.Logging.AppDomainCategorySource.Constructor),this.StartUpInfo=x.Internal.Application.Start.StartUpInfoEmpty}Dispose(){this.IsDefaultSession=!1,this._sessionManager.ConnectionManager.RemoveSocket(this),this.ServerInfo.Dispose(),this.ProjectManager.Dispose(),this.ClientManager.Dispose(),this.UserManagementManager.Dispose(),this.ServerObjectsManager.Dispose(),this.LanguageManager.Dispose(),this.DataAccessManager.Dispose(),this.AlarmManager.Dispose(),this.TrendManager.Dispose(),this.LoggingManager.Dispose(),this.RecipeManager.Dispose(),this.onInitReady.remove(),this._sessionManager.RemoveSession(this,!1),this.ID=""}initManagers(){this.ProjectManager=new x.Internal.Domain.ProjectManager(this),this.ClientManager=new x.Internal.Domain.ClientManager(this),this.UserManagementManager=new x.Internal.Domain.UserManagementManager(this),this.LanguageManager=new x.Internal.Domain.LanguageManager(this),this.DataAccessManager=new x.Internal.Domain.DataAccessManager(this),this.ServerObjectsManager=new x.Internal.Domain.ServerObjectManager(this);for(let A=0;A<this.Settings.System.SystemLoader.length;A++)switch(this.Settings.System.SystemLoader[A]){case"Alarm":this.AlarmManager=new x.Internal.Domain.AlarmManager(this);break;case"Trend":this.TrendManager=new x.Internal.Domain.TrendManager(this);break;case"Logging":this.LoggingManager=new x.Internal.Domain.LoggingManager(this);break;case"Recipe":this.RecipeManager=new x.Internal.Domain.RecipeManager(this)}}Start(A){return __awaiter(this,void 0,void 0,(function*(){if(x.Internal.Application.ApplicationManager.getApplication(),this.ProjectManager.ProjectService.ServerProjectRuntimeState===x.System.Project.ServerRuntimeStatus.Running)this.ClientManager.updateClientState(x.System.Client.ClientState.OnExit),this.UserManagementManager.UserManagementService.LogOff(),setTimeout(()=>__awaiter(this,void 0,void 0,(function*(){this.ClientManager.updateClientState(x.System.Client.ClientState.Starting);const V=this.Settings.Client.DefaultUser,R=this.Settings.Client.DefaultPassword,D=yield x.System.Core.StartCoreAwaitLogOn(A);(yield this.UserManagementManager.UserManagementService.LogOnAsync(V,R))===x.System.UserManagement.LogOnSuccess.Succeeded&&D()})),500);else{this.ClientManager.updateClientState(x.System.Client.ClientState.Starting);const V=this.Settings.Client.DefaultUser,R=this.Settings.Client.DefaultPassword,D=yield x.System.Core.StartCoreAwaitLogOn(A);(yield this.UserManagementManager.UserManagementService.LogOnAsync(V,R))===x.System.UserManagement.LogOnSuccess.Succeeded&&D()}x.Application.Start.onInitReady.add(this.triggerInitReady.bind(this))}))}triggerInitReady(A){x.Application.Start.onInitReady.remove(this.triggerInitReady.bind(this)),this.onInitReadyFromStart(A)}onInitReadyFromStart(x){this.onInitReady.trigger(x)}}}(V.ClientSession||(V.ClientSession={}))}(A.Application||(A.Application={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";V.SessionManager=class SessionManager{constructor(V){this.SessionStore={},this.ConnectionManager=V.ConnectionManager,A.Logger.AppDomainLog.log("SessionManager ctor",this,x.Internal.System.Diagnostics.Logging.AppDomainEventSource.System,x.Internal.System.Diagnostics.Logging.AppDomainCategorySource.Constructor)}CreateSession(A){let V;V=A||new x.Application.AppSettings;for(const A in this.SessionStore)if(this.SessionStore[A].ServerInfo.SocketUri===V.Server.SocketUri)return this.SessionStore[A].IsDefaultSession&&(this.DefaultSession=this.SessionStore[A],x.Application.Settings=this.SessionStore[A].Settings),this.SessionStore[A];const R=new x.Internal.Domain.Application.ClientSession.Session(V,this);this._addSession(R),R.Settings.Client.IsDefaultSession&&(this.DefaultSession=R,x.Application.Settings=R.Settings);let D="";for(const x in this.SessionStore)this.SessionStore[x].IsDefaultSession&&(D=x);if(""===D)for(const A in this.SessionStore)Object.prototype.hasOwnProperty.call(this.SessionStore,A)&&(this.SessionStore[A].IsDefaultSession=!0,this.DefaultSession=this.SessionStore[A],x.Application.Settings=this.SessionStore[A].Settings);return R}GetDefaultSession(){return this.DefaultSession&&this.DefaultSession.ID||(this.DefaultSession=this.CreateSession()),this.DefaultSession}RemoveSession(A,V=!0){let R="";if(x.isString(A.ID)){V&&this.SessionStore[A.ID].Dispose(),this.SessionStore[A.ID].IsDefaultSession?(delete this.SessionStore[A.ID],this.DefaultSession=this.CreateSession()):delete this.SessionStore[A.ID];for(const x in this.SessionStore)this.SessionStore[x].IsDefaultSession&&(R=this.SessionStore[x].ID)}if(""===R)for(const x in this.SessionStore)this.SessionStore[x].IsDefaultSession||(this.SessionStore[x].IsDefaultSession=!0,this.DefaultSession=this.SessionStore[x])}_addSession(x){this.SessionStore[x.ID]=x}Dispose(){for(const x in this.SessionStore)this.SessionStore[x]&&this.SessionStore[x].Dispose();this.DefaultSession=null,A.Dispose(this)}}}(V.Session||(V.Session={}))}(A.Application||(A.Application={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(A){!function(A){"use strict";function _startBaseOnly(A){return __awaiter(this,void 0,void 0,(function*(){const V=A.Settings.Client.DefaultUser,R=A.Settings.Client.DefaultPassword,D=yield x.System.Core.StartCoreAwaitLogOn();let N;N=A?A.UserManagementManager.UserManagementService:x.System.UserManagement.UserManagementService.getService();const U=yield N.LogOnAsync(V,R);U===x.System.UserManagement.LogOnSuccess.Succeeded?D():(A.StartUpInfo.LastSystem="User",A.StartUpInfo.User.LogOnSuccess=U,A.StartUpInfo.User.Succeeded=!1,A.StartUpInfo.User.Result=x.System.UserManagement.LogOnSuccess[U],x.Application.Start.onInitError.trigger(A.StartUpInfo))}))}A.StartVisiWinBase=function StartVisiWinBase(A){const V=x.Internal.Application.ApplicationManager.getApplication();let R;if(A?A.Client.IsSingleSession?(R=V.SessionManager.CreateSession(A),R.ServerInfo=new x.Internal.Domain.Application.Server.ServerInfo(A),R.Settings=A):R=V.SessionManager.CreateSession(A):(R=V.SessionManager.GetDefaultSession(),x.Application.Start.StartUpInfo=R.StartUpInfo),R.ClientManager.updateClientState(x.System.Client.ClientState.Starting),R.ProjectManager.ProjectService.ServerProjectRuntimeState===x.System.Project.ServerRuntimeStatus.Running){R.ClientManager.updateClientState(x.System.Client.ClientState.OnExit);const V=x.Internal.Application.ApplicationManager.getApplication();R=V.getDefaultSession(),R.ProjectManager.ProjectService.ServerProjectRuntimeState===x.System.Project.ServerRuntimeStatus.Running&&(R.Dispose(),A?R=V.SessionManager.CreateSession(A):(R=V.SessionManager.GetDefaultSession(),x.Application.Start.StartUpInfo=R.StartUpInfo)),setTimeout((function(){_startBaseOnly(R)}),500)}else _startBaseOnly(R)}}(A.BaseOnly||(A.BaseOnly={}))}(A.Start||(A.Start={}))}(A.Application||(A.Application={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(A){"use strict";A.startUpLogHelper=function startUpLogHelper(A,V){let R;function start(){V.StartUpInfo.LastSystem=A,V.StartUpInfo.StartUp.push("Start_"+A),x.Application.Start.startUpProgress.trigger(V.StartUpInfo),R=x.Internal.System.Diagnostics.performanceMark("StartUp_"+A),R.reset()}return start(),{Start:start,End:function end(){if(R){R.endMark();const x=R.duration();x[0]&&x[0].duration?V.StartUpInfo.StartUp.push("End_"+A+" in "+Math.round(x[0].duration)+"ms"):V.StartUpInfo.StartUp.push("End_"+A)}else V.StartUpInfo.StartUp.push("End_"+A);x.Application.Start.startUpProgress.trigger(V.StartUpInfo)},EndError:function endError(){V.StartUpInfo.HasError=!0,V.StartUpInfo.StartUp.push("End_Error_"+A),x.Application.Start.startUpProgress.trigger(V.StartUpInfo),R&&R.endMark()}}},A.userFrendlyErrorMsg=function userFrendlyErrorMsg(A){var V,R;try{let D=A.LastSystem||"";if(!A.HasError)return;if(A.StartUp){for(let V=0;V<A.StartUp.length;V++)x.stringStartsWith(A.StartUp[V],"End_Error_")&&(D=A.StartUp[V].replace("End_Error_",""));if(A[D]){let N=x.Internal.makeString(A[D].Result);if("Ok"===A[D].Result){const V=A;for(const A in V)V[A]&&V[A].Result&&x.stringStartsWith(V[A].Result,"Error")&&(D=A)}const U=A.Language.CurrentLanguage?A.Language.CurrentLanguage:1033;let B="";switch(D){case"Connection":N=x.Internal.makeString(null===(R=null===(V=A[D])||void 0===V?void 0:V.Socket)||void 0===R?void 0:R.Url),B=x.Internal.Application.Settings.Strings.errorStringsWithParams(U,x.Internal.Application.Settings.Strings.commonErrorString.StartupError,D,"Url: "+N),x.Internal.Domain.Logger.ErrorLog.log(B);break;case"Project":N=x.Internal.makeString(A[D].ProjectName),B=x.Internal.Application.Settings.Strings.errorStringsWithParams(U,x.Internal.Application.Settings.Strings.commonErrorString.StartupError,D,"ProjectName: "+N),x.Internal.Domain.Logger.ErrorLog.log(B);break;case"User":N=x.Internal.makeString(A[D].Result),B=x.Internal.Application.Settings.Strings.errorStringsWithParams(U,x.Internal.Application.Settings.Strings.commonErrorString.StartupError,D,"LogOnSuccess: "+N),x.Internal.Domain.Logger.ErrorLog.log(B);break;case"Language":N=x.Internal.makeString(A[D].ProjectLanguage),B=x.Internal.Application.Settings.Strings.errorStringsWithParams(U,x.Internal.Application.Settings.Strings.commonErrorString.StartupError,D,"ProjectLanguage: "+N),x.Internal.Domain.Logger.ErrorLog.log(B);break;case"Alarm":N=x.Internal.makeString(A[D].AlarmGroups),B=x.Internal.Application.Settings.Strings.errorStringsWithParams(U,x.Internal.Application.Settings.Strings.commonErrorString.StartupError,D,"AlarmGroups: "+N),x.Internal.Domain.Logger.ErrorLog.log(B);break;case"Trend":N=x.Internal.makeString(A[D].ArchiveNames),B=x.Internal.Application.Settings.Strings.errorStringsWithParams(U,x.Internal.Application.Settings.Strings.commonErrorString.StartupError,D,"ArchiveNames: "+N),x.Internal.Domain.Logger.ErrorLog.log(B);break;case"Logging":N=x.Internal.makeString(A[D].CategoryNames),B=x.Internal.Application.Settings.Strings.errorStringsWithParams(U,x.Internal.Application.Settings.Strings.commonErrorString.StartupError,D,"CategoryNames: "+N),x.Internal.Domain.Logger.ErrorLog.log(B);break;case"Recipe":N=x.Internal.makeString(A[D].RecipeClassNames),B=x.Internal.Application.Settings.Strings.errorStringsWithParams(U,x.Internal.Application.Settings.Strings.commonErrorString.StartupError,D,"RecipeClassNames: "+N),x.Internal.Domain.Logger.ErrorLog.log(B)}}}}catch(A){}},A.StartUpInfoEmpty={Connection:{Succeeded:!0,Socket:null,Result:""},Project:{Succeeded:!0,Result:"",ProjectName:""},User:{Succeeded:!0,LogOnSuccess:null,Result:""},Language:{Succeeded:!0,CurrentLanguage:1033,ProjectLanguage:null,Result:""},DataAccess:{Succeeded:!0,Result:""},Alarm:{Succeeded:!0,ClassNames:[],GroupNames:[],AlarmClasses:null,AlarmGroups:null,Result:""},Trend:{Succeeded:!0,ArchiveNames:null,Result:""},Logging:{Succeeded:!0,CategoryNames:[],Categories:null,Result:""},Recipe:{Succeeded:!0,RecipeClassNames:null,Result:""},StartUp:[],LastSystem:"",HasError:!1}}(A.Start||(A.Start={}))}(A.Application||(A.Application={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(A){"use strict";A.startSocket=function startSocket(A,V,R,D){return __awaiter(this,void 0,void 0,(function*(){const N=x.Internal.Application.Start.startUpLogHelper("Connection",A);let U;try{return U=yield x.Internal.Application.Start._Connect(A,V,R,D),U.Socket&&U.Socket.readyState===x.Internal.System.Net.Websocket.SocketState.OPEN?(A.StartUpInfo.Connection={Result:x.Internal.EnumHelper.convertToString(x.System.Project.ServerRuntimeStatus,x.System.Project.ServerRuntimeStatus.Running),Socket:{State:U.Socket.State,IsOnline:U.Socket.IsOnline,Url:U.Socket.Url},Succeeded:!0},N.End(),Promise.resolve(A.StartUpInfo)):Promise.reject(A.StartUpInfo)}catch(x){return U=x,A.StartUpInfo.Connection={Result:"Error in websocket connection.",Socket:{State:U.Socket.State,IsOnline:U.Socket.IsOnline,Url:U.Socket.Url},Succeeded:!1},N.EndError(),Promise.reject(A.StartUpInfo)}}))},A._Connect=function _Connect(A,V,R,D,N){return __awaiter(this,void 0,void 0,(function*(){let U,B,F,W;A.Settings.Server.UseSecureServer?(U=A.Settings.SecureServer.WebSocketPrefix,B=A.Settings.SecureServer.WebSocketHost,F=A.Settings.SecureServer.WebSocketPort,W=A.Settings.SecureServer.WebSocketUriParameter):(U=V||A.Settings.Server.WebSocketPrefix,B=R||A.Settings.Server.WebSocketHost,F=D||A.Settings.Server.WebSocketPort,W=N||A.Settings.Server.WebSocketUriParameter);let H="";H=W?U+B+":"+F+W:U+B+":"+F,A.Settings.Server.UseSecureServer&&(A.Settings.Server.SocketUri=H),A.Settings.Server.SocketUri&&(A.ServerInfo.SocketUri=A.Settings.Server.SocketUri,H=A.Settings.Server.SocketUri),x.stringStartsWith(H,"ws")||x.Internal.Domain.Logger.WarnLog.log("Wrong socket scheme, use 'ws' or 'wss'",{URI:H});const z=A.SrvHnd.Socket;return new Promise((function(x,V){function _socketCloseHandler(x){}function _socketErrorHandler(x){x&&function triggerError(x,A){V({Socket:x,Message:A})}(z,x)}const socketOpenHandler=function(A){!function _socketOpenHandler(A){A.type&&"open"===A.type&&x({Socket:z,Message:A})}(A)};z.Url=H,z.onWebSocketOpen.remove(socketOpenHandler),z.onWebSocketOpen.add(socketOpenHandler),z.onWebSocketClose.remove(_socketCloseHandler),z.onWebSocketClose.add(_socketCloseHandler),z.onWebSocketError.remove(_socketErrorHandler),z.onWebSocketError.add(_socketErrorHandler),A?A.SrvHnd.Connect().then(x=>{}).catch(x=>{}):z.Start()}))}))}}(A.Start||(A.Start={}))}(A.Application||(A.Application={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(A){"use strict";A.startProject=function startProject(A){return __awaiter(this,void 0,void 0,(function*(){function stateChange(V){A.StartUpInfo.Project={Succeeded:!1,Result:x.System.Project.ServerRuntimeStatus[V],ProjectName:A.ProjectManager.ServerProjectName},x.Application.Start.startUpProgress.trigger(A.StartUpInfo)}const V=x.Internal.Application.Start.startUpLogHelper("Project",A),R=A.ProjectManager.ProjectService;R.ServerProjectStateChange.add(stateChange),R.ServerProjectName=A.Settings.Server.ServerProjectName;try{const D=yield x.Internal.Application.Start._StartProject(A);return A.StartUpInfo.Project={Succeeded:3===D,Result:x.Internal.Domain.CONST.Telegram.RESULTOK,ProjectName:A.ProjectManager.ServerProjectName},V.End(),R.ServerProjectStateChange.remove(stateChange),Promise.resolve(A.StartUpInfo)}catch(D){return A.StartUpInfo.Project={Succeeded:D.Succeeded,Result:"Error"+x.Internal.makeString(D),ProjectName:R.ServerProjectName},V.EndError(),R.ServerProjectStateChange.remove(stateChange),Promise.reject(A.StartUpInfo)}}))},A._StartProject=function _StartProject(x){return new Promise((function(A,V){x.ProjectManager.ProjectService.RunProjectAsync().then((function(x){A(x)}),(function(x){V(x)}))}))}}(A.Start||(A.Start={}))}(A.Application||(A.Application={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(A){"use strict";A.logOnUser=function logOnUser(A,V,R){return __awaiter(this,void 0,void 0,(function*(){const D=x.Internal.Application.Start.startUpLogHelper("User",A),N=V||A.Settings.Client.DefaultUser,U=R||A.Settings.Client.DefaultPassword;try{const V=yield x.Internal.Application.Start._LogOn(A,N,U);let R=!0;return V!==x.System.UserManagement.LogOnSuccess.Succeeded&&(R=!1),A.StartUpInfo.User={Succeeded:R,LogOnSuccess:V,Result:x.System.UserManagement.LogOnSuccess[V]},R?D.End():D.EndError(),V!==x.System.UserManagement.LogOnSuccess.Succeeded?(x.Internal.Domain.Logger.ErrorLog.log("start user error. Result: "+A.StartUpInfo.User.Result),Promise.reject(A.StartUpInfo)):Promise.resolve(A.StartUpInfo)}catch(V){return A.StartUpInfo.User={Succeeded:!1,LogOnSuccess:V,Result:"Error: "+x.System.UserManagement.LogOnSuccess[V]},D.EndError(),Promise.reject(A.StartUpInfo)}}))},A._LogOn=function _LogOn(x,A,V){return new Promise((function(R,D){x.UserManagementManager.UserManagementService.LogOnAsync(A,V).then((function(x){R(x)}),(function(x){D(x)}))}))}}(A.Start||(A.Start={}))}(A.Application||(A.Application={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(A){"use strict";A.getLang=function getLang(A){return __awaiter(this,void 0,void 0,(function*(){const V=x.Internal.Application.Start.startUpLogHelper("Language",A);try{const R=yield x.Internal.Application.Start.getCurrentLanguage(A);return A.StartUpInfo.Language={Succeeded:!0,CurrentLanguage:R.LCID,ProjectLanguage:R.Text,Result:"Ok"},V.End(),Promise.resolve(A.StartUpInfo)}catch(R){return A.StartUpInfo.Language={Succeeded:!1,CurrentLanguage:A.Settings.Client.ClientLCID,ProjectLanguage:"",Result:"Error"+x.Internal.makeString(R)},V.EndError(),Promise.reject(A.StartUpInfo)}}))},A.getCurrentLanguage=function getCurrentLanguage(x){return new Promise((function(A,V){x.LanguageManager.getCurrentLanguage().then((function(x){A(x)}),(function(x){V(x)}))}))}}(A.Start||(A.Start={}))}(A.Application||(A.Application={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(A){"use strict";A.getAlarm=function getAlarm(A){return __awaiter(this,void 0,void 0,(function*(){const V=x.Internal.Application.Start.startUpLogHelper("Alarm",A);try{const R=yield x.Internal.Application.Start.getAlarmClassesAndGroups(A);return yield x.Internal.Application.Start.getCurrentAlarms(A),A.StartUpInfo.Alarm={Succeeded:!0,ClassNames:A.AlarmManager.AlarmService.ClassNames,GroupNames:A.AlarmManager.AlarmService.GroupNames,AlarmClasses:R.AlarmClasses,AlarmGroups:R.AlarmGroups,Result:"Ok"},A.AlarmManager.AlarmService.CurrentAlarms=A.AlarmManager.AlarmService.GetCurrentAlarms(new x.Internal.System.Alarm.AlarmFilter(A.AlarmManager)),V.End(),Promise.resolve(A.StartUpInfo)}catch(R){return A.StartUpInfo.Alarm={Succeeded:!1,ClassNames:A.AlarmManager.AlarmService.ClassNames,GroupNames:A.AlarmManager.AlarmService.GroupNames,AlarmClasses:[],AlarmGroups:[],Result:"Error"+x.Internal.makeString(R)},V.EndError(),Promise.reject(A.StartUpInfo)}}))},A.getCurrentAlarms=function getCurrentAlarms(x){return new Promise((function(A,V){x.AlarmManager.getCurrentAlarmsMaster().then((function(x){A(x)}),(function(x){V(x)}))}))},A.getAlarmClassesAndGroups=function getAlarmClassesAndGroups(x){return new Promise((function(A,V){x.AlarmManager.getAlarmClassesAndGroupsAsync().then((function(x){A(x)}),(function(x){V(x)}))}))}}(A.Start||(A.Start={}))}(A.Application||(A.Application={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(A){"use strict";A.getArchivesTrends=function getArchivesTrends(A){return __awaiter(this,void 0,void 0,(function*(){const V=x.Internal.Application.Start.startUpLogHelper("Trend",A);try{return yield x.Internal.Application.Start.getAllTrends(A),A.StartUpInfo.Trend={Succeeded:!0,ArchiveNames:A.TrendManager.TrendService.ArchiveNames,Result:"Ok"},V.End(),Promise.resolve(A.StartUpInfo)}catch(R){return A.StartUpInfo.Trend={Succeeded:!1,ArchiveNames:A.TrendManager.TrendService.ArchiveNames,Result:"Error"+x.Internal.makeString(R)},V.EndError(),Promise.reject(A.StartUpInfo)}}))},A.getAllTrends=function getAllTrends(x){return new Promise((function(A,V){x.TrendManager.getAllTrends().then((function(x){A(x)}),(function(x){return __awaiter(this,void 0,void 0,(function*(){V(x)}))}))}))}}(A.Start||(A.Start={}))}(A.Application||(A.Application={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(A){"use strict";A.getLogging=function getLogging(A){return __awaiter(this,void 0,void 0,(function*(){const V=x.Internal.Application.Start.startUpLogHelper("Logging",A);try{return yield x.Internal.Application.Start.getGetAllLoggingCategoriesWithEventsAsync(A),A.StartUpInfo.Logging={Succeeded:!0,CategoryNames:A.LoggingManager.LoggingService.CategoryNames,Categories:A.LoggingManager.LoggingService.Categories,Result:"Ok"},V.End(),Promise.resolve(A.StartUpInfo)}catch(R){return A.StartUpInfo.Logging={Succeeded:!1,CategoryNames:[],Categories:[],Result:"Error"+x.Internal.makeString(R)},V.EndError(),Promise.reject(A.StartUpInfo)}}))},A.getGetAllLoggingCategoriesWithEventsAsync=function getGetAllLoggingCategoriesWithEventsAsync(x){return new Promise((function(A,V){x.LoggingManager.getGetAllLoggingCategoriesWithEventsAsync().then((function(x){A(x)})).catch((function(x){V(x)}))}))}}(A.Start||(A.Start={}))}(A.Application||(A.Application={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(A){"use strict";A.getRecipeClassNames=function getRecipeClassNames(A){return __awaiter(this,void 0,void 0,(function*(){const V=x.Internal.Application.Start.startUpLogHelper("Recipe",A);try{const R=yield x.Internal.Application.Start.getRecipe(A);return A.StartUpInfo.Recipe={Succeeded:!0,RecipeClassNames:R.RecipeClassNames,Result:"Ok"},V.End(),Promise.resolve(A.StartUpInfo)}catch(R){return A.StartUpInfo.Recipe={Succeeded:!1,RecipeClassNames:[],Result:"Error"+x.Internal.makeString(R)},V.EndError(),Promise.reject(A.StartUpInfo)}}))},A.getRecipe=function getRecipe(x){return new Promise((function(A,V){x.RecipeManager.RecipeService.GetRecipeClassNamesAsync().then((function(x){A(x)}),(function(A){V(x.StartUpInfo)}))}))}}(A.Start||(A.Start={}))}(A.Application||(A.Application={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(A){!function(A){"use strict";function _initalizeSocket(A){return __awaiter(this,void 0,void 0,(function*(){if(A.SrvHnd&&A.SrvHnd.Socket.IsOnline)return A.StartUpInfo.Connection={Result:x.Internal.EnumHelper.convertToString(x.System.Project.ServerRuntimeStatus,x.System.Project.ServerRuntimeStatus.Running),Socket:{State:A.SrvHnd.Socket.State,IsOnline:A.SrvHnd.Socket.IsOnline,Url:A.SrvHnd.Socket.Url},Succeeded:!0},Promise.resolve(A.StartUpInfo);const V=yield x.Internal.Application.Start.startSocket(A,A.Settings.Server.WebSocketPrefix,A.Settings.Server.WebSocketHost,A.Settings.Server.WebSocketPort);return A.StartUpInfo.StartUp.push("Prepare Systems: "+A.Settings.System.SystemLoader.join("-")),V.Connection.Succeeded?Promise.resolve(A.StartUpInfo):Promise.reject(A.StartUpInfo)}))}function _initalizeProject(A){return __awaiter(this,void 0,void 0,(function*(){if(A.ServerInfo.Connected)return A.StartUpInfo.Project={Succeeded:A.ServerInfo.Connected,Result:x.Internal.Domain.CONST.Telegram.RESULTOK,ProjectName:A.ProjectManager.ServerProjectName},Promise.resolve(A.StartUpInfo);let V=A.StartUpInfo;try{V=yield x.Internal.Application.Start.startProject(A)}catch(V){x.Application.Start.onInitError.trigger(A.StartUpInfo)}return V.Project&&V.Project.Succeeded?Promise.resolve(A.StartUpInfo):Promise.reject(A.StartUpInfo)}))}function _initalizeSystems(A){return __awaiter(this,void 0,void 0,(function*(){yield x.Internal.Application.Start.getLang(A);for(let V=0;V<A.Settings.System.SystemLoader.length;V++)switch(A.Settings.System.SystemLoader[V]){case"Alarm":try{yield x.Internal.Application.Start.getAlarm(A)}catch(x){}break;case"Trend":try{yield x.Internal.Application.Start.getArchivesTrends(A)}catch(x){}break;case"Logging":if(A.Settings.System.ProtokollVersion>=x.Application.VersionNumberMdb)try{yield x.Internal.Application.Start.getLogging(A)}catch(x){}break;case"Recipe":if(A.Settings.System.ProtokollVersion>=x.Application.VersionNumberMdb)try{yield x.Internal.Application.Start.getRecipeClassNames(A)}catch(x){}}return Promise.resolve(A.StartUpInfo)}))}A._initalizeSocket=_initalizeSocket,A._initalizeProject=_initalizeProject,A._initalizeSystems=_initalizeSystems,A.StartVisiWinWithCustomLogOn=function StartVisiWinWithCustomLogOn(A,V=!1){return __awaiter(this,void 0,void 0,(function*(){const R=x.Internal.Application.ApplicationManager.getApplication();let D;A?A.Client.IsSingleSession?(D=R.SessionManager.GetDefaultSession(),D.ServerInfo=new x.Internal.Domain.Application.Server.ServerInfo(A),D.Settings=A):D=R.SessionManager.CreateSession(A):(D=R.SessionManager.GetDefaultSession(),x.Application.Start.StartUpInfo=D.StartUpInfo),x.Application.Start.onInitReady.add((function triggerInitReady(){const A=R.SessionManager.GetDefaultSession();x.System.Core.CoreReady.trigger(A.StartUpInfo),x.Application.Start.onInitReady.remove(triggerInitReady)})),x.Application.Start.onInitError.add((function triggerInitError(){const A=R.SessionManager.GetDefaultSession();x.System.Core.CoreError.trigger(A.StartUpInfo),x.Application.Start.onInitError.remove(triggerInitError)})),V||(D.Settings.Client.AutoCompleteStartupAfterLogon=!0);try{yield _initalizeSocket(D)}catch(A){x.Application.Start.onInitError.trigger(D.StartUpInfo),x.Internal.Application.Start.userFrendlyErrorMsg(D.StartUpInfo)}try{yield _initalizeProject(D)}catch(A){x.Application.Start.onInitError.trigger(D.StartUpInfo),x.Internal.Application.Start.userFrendlyErrorMsg(D.StartUpInfo)}function logOnAwaiter(){return __awaiter(this,void 0,void 0,(function*(){yield _initalizeSystems(D);D.ServerInfo.ProjectState=x.System.Project.ServerRuntimeStatus.Running,D.ProjectManager.ProjectService.ServerProjectRuntimeState=D.ServerInfo.ProjectState,D.StartUpInfo.HasError?(D.ClientManager.updateClientState(x.System.Client.ClientState.Uncertain),x.Application.Start.onInitError.trigger(D.StartUpInfo),x.Internal.Application.Start.userFrendlyErrorMsg(D.StartUpInfo),x.Application.Start.onInitReady.trigger(D.StartUpInfo)):(D.ClientManager.updateClientState(x.System.Client.ClientState.Running),x.Application.Start.onInitReady.trigger(D.StartUpInfo),D.RecipeManager.attach())}))}return D.Settings.Client.AutoCompleteStartupAfterLogon,logOnAwaiter}))}}(A.BaseOnly||(A.BaseOnly={}))}(A.Start||(A.Start={}))}(A.Application||(A.Application={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){x.MsgHelper||(x.MsgHelper={})}(x.Domain||(x.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){x.MsgHelper||(x.MsgHelper={})}(x.Domain||(x.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){x.MsgHelper||(x.MsgHelper={})}(x.Domain||(x.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){"use strict";V.TelegramHelper=class TelegramHelper{constructor(A,V,R){this.RequestID=x.Guid(),this.QueryName=A,this.ResponseName=V,this.session=R,this.CmdVal={cmd:A,val:null},this.hasResponse=!0,this.fnResponse=void 0,this.subscribesToEvent=!1,this.hasMultipleResponse=!1,this.performanceMark="Pong"!==A?x.Internal.System.Diagnostics.performanceMark(this.QueryName+"-"+this.RequestID):null,this.watchDogTimeout=0,this.QueryPromise=new Promise((x,A)=>{this.PromiseFn=[x,A]})}serializeForSocketMessage(){const x={cmd:this.CmdVal.cmd,val:JSON.stringify(this.CmdVal.val)};return JSON.stringify(x)}ResolvePromise(x,V,R=!0){try{V?this.PromiseFn[0](x):this.PromiseFn[1](x)}catch(x){const V=`Error with Promise ${this.QueryName}/${this.ResponseName} ID: ${this.RequestID} Error:${x}`;A.Logger.ErrorLog.log(V)}R&&this.Dispose()}Dispose(){A.Dispose(this)}},V.DefaultResultComparer=function DefaultResultComparer(V){return x.isBoolean(V)?V:!!x.isString(V)&&(V===A.CONST.Telegram.RESULTOK||V===A.CONST.Telegram.SUCCEEDED)},V.SuspendCommunication=function SuspendCommunication(V){const R=new A.MsgHelper.TelegramHelper("SuspendCommunication","");R.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.UserManagement,R.hasResponse=!1,R.CmdVal.val="";const D=V||x.Internal.Application.ApplicationManager.getApplication().getDefaultSession();D.SrvHnd&&D.SrvHnd.MsgHnd&&(D.SrvHnd.MsgHnd.submitPromise(R),D.ClientManager.updateClientState(x.System.Client.ClientState.Paused),A.Application.Socket.onSuspendCommunication.trigger(D),A.Logger.InfoLog.log("Connection suspended",new Date))},V.ResumeCommunication=function ResumeCommunication(V){const R=new A.MsgHelper.TelegramHelper("ResumeCommunication","");R.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.UserManagement,R.hasResponse=!1,R.CmdVal.val="";const D=V||x.Internal.Application.ApplicationManager.getApplication().getDefaultSession();D.SrvHnd&&D.SrvHnd.MsgHnd&&(D.SrvHnd.MsgHnd.submitPromise(R),D.ClientManager.updateClientState(x.System.Client.ClientState.Running),A.Application.Socket.onResumeCommunication.trigger(D),A.Logger.InfoLog.log("Connection resumed",new Date))}}(A.MsgHelper||(A.MsgHelper={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){x.MsgHelper||(x.MsgHelper={})}(x.Domain||(x.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){x.MsgHelper||(x.MsgHelper={})}(x.Domain||(x.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){"use strict";V.TelegramHandler=class TelegramHandler{constructor(V,R){this._hasPingPongError=!1,this._watchDogTimeout=R.Settings.Server.ConnectionTimeout,this._watchDogList={},this._telegramHandlerStore={},this._socketHandler=V,this._session=R,this._session.Settings.System.Debug&&A.Logger.AppDomainLog.log("TelegramHandler ctor",this,x.Internal.System.Diagnostics.Logging.AppDomainEventSource.System,x.Internal.System.Diagnostics.Logging.AppDomainCategorySource.Constructor)}submitPromise(x,A=!1){return x.session=this._session,A||this.handleQueryCommand(x),x.QueryPromise}handleQueryCommand(V){if(this.isCmdExecutable(V.CmdVal)){if(V.hasResponse){const R=new A.Application.Watcher.WatchDog(V,V.watchDogTimeout||this._watchDogTimeout);this._watchDogList[V.RequestID]=R,this._addTelegramHandler(V),V.performanceMark=x.Internal.System.Diagnostics.performanceMark(V.CmdVal.cmd+"_"+V.RequestID),V.performanceMark.reset()}this._submitMessage(V.serializeForSocketMessage()),this._session.Settings.System.Debug&&A.Logger.AppDomainLog.log(V.CmdVal.cmd,{cmd:V.CmdVal.cmd,val:V.CmdVal.val},x.Internal.System.Diagnostics.Logging.AppDomainEventSource.System,x.Internal.System.Diagnostics.Logging.AppDomainCategorySource.CommandHandler)}}handleResponseCommand(R){let D=this._parseMsgToCmdValuePair(R);if("Ping"===D.cmd)return this._hasPingPongError&&(this._hasPingPongError=!1,this._session.ClientManager.communicationState===x.System.Client.CommunicationState.Open&&(this._session.ProjectManager.ProjectService.ServerProjectRuntimeState===x.System.Project.ServerRuntimeStatus.Running?""!==this._session.UserManagementManager.UserManagementService.CurrentUserName?this._session.ClientManager.updateClientState(x.System.Client.ClientState.Running):this._session.ClientManager.updateClientState(x.System.Client.ClientState.Paused):this._session.ClientManager.updateClientState(x.System.Client.ClientState.CommunicationUnclear))),void this._sendPong(D.val.RequestID);if(this._session.Settings.System.Debug&&A.Logger.AppDomainLog.log(D.cmd,{cmd:D.cmd,val:D.val},x.Internal.System.Diagnostics.Logging.AppDomainEventSource.System,x.Internal.System.Diagnostics.Logging.AppDomainCategorySource.CommandHandler),this._telegramHandlerStore[D.cmd]){const x=this._telegramHandlerStore[D.cmd];if(x.fnResponse){const A=D.val;return x.fnResponse(A,x),void(D=null)}}if(D.val.RequestID&&this._telegramHandlerStore[D.val.RequestID]){const x=this._telegramHandlerStore[D.val.RequestID];if(x.performanceMark&&x.performanceMark.endMark(),this._removeWatchDog(x.RequestID),this._removeTelegramHandler(x),this._checkAuthorization(D),x.fnResponse){const A=D.val;return x.fnResponse(A,x),void(D=null)}}V.handleMessageCommand(D.cmd,D.val,this._session)}Dispose(){clearTimeout(this._pingPongTimeoutFn),this._pingPongTimeoutFn=-1;for(const x in this._watchDogList)Object.prototype.hasOwnProperty.call(this._watchDogList,x)&&this._watchDogList[x].Dispose();A.Dispose(this)}_submitMessage(x){this._socketHandler.Send(x)}_removeWatchDog(x){if(this._watchDogList[x])try{this._watchDogList[x].Dispose(),delete this._watchDogList[x]}catch(x){}}addCallbackHandler(x){this._addTelegramHandler(x)}_addTelegramHandler(x){this._telegramHandlerStore[x.RequestID]||(this._telegramHandlerStore[x.RequestID]=x)}_removeTelegramHandler(x){x.subscribesToEvent||delete this._telegramHandlerStore[x.RequestID]}_checkAuthorization(A){A.val.Authorized||"ProjectRuntimeStatus"===A.cmd||"RRunProject"===A.cmd||"RLogOn"===A.cmd||new x.Internal.System.Exception.AuthorizedException(A.cmd,"Not Authorized",A.val.Authorized,A.val.RequestID,"","",A.val)}_parseMsgToCmdValuePair(x){let A;return x.data?(A=JSON.parse(x.data),{cmd:A.cmd,val:JSON.parse(A.val)}):{cmd:"",val:{}}}_sendPong(x){const V=new A.MsgHelper.TelegramHelper("Pong","");V.CmdVal.val={[A.CONST.Telegram.REQUESTID]:x},V.hasResponse=!1,this.handleQueryCommand(V),this.pingPongWatchDog()}isCmdExecutable(V){let R=!0;if(this._session&&this._session.SrvHnd&&this._session.SrvHnd.Socket&&!this._session.SrvHnd.Socket.IsOnline)return!1;if(""===this._session.UserManagementManager.UserManagementService.CurrentUserName)if(this._session.ProjectManager.ProjectService.ServerProjectRuntimeState===x.System.Project.ServerRuntimeStatus.Running)if(this._session.ClientManager.clientState===x.System.Client.ClientState.Running||this._session.ClientManager.clientState===x.System.Client.ClientState.Paused){const D="No user is logged in. Command will be ignored.";switch(V.cmd){case"LogOff":case"QLogOn":case"RLogOn":case"QChangePassword":case"RChangePassword":case"SuspendCommunication":case"ResumeCommunication":case"Pong":R=!0;break;default:A.Logger.InfoLog.log(D,{cmd:V.cmd},x.Internal.System.Diagnostics.Logging.AppDomainEventSource.System,x.Internal.System.Diagnostics.Logging.AppDomainCategorySource.CommandHandler),R=!1}}else this._session.ClientManager.clientState===x.System.Client.ClientState.Starting&&(R=!0);else R=(this._session.ClientManager.clientState===x.System.Client.ClientState.Running||(this._session.ClientManager.clientState,x.System.Client.ClientState.Starting),!0);return R}pingPongWatchDog(){this._session.Settings.System.ObservePingPongTimeout&&(clearTimeout(this._pingPongTimeoutFn),this._pingPongTimeoutFn=-1,this._pingPongTimeoutFn=setTimeout(()=>{const V=(new Date).getTime();let R="Server send last ping at ";this._hasPingPongError=!0,null!==this._session&&(R+=new Date(V-this._session.Settings.System.PingPongTimeout).toLocaleTimeString(),this._session.ClientManager.updateClientState(x.System.Client.ClientState.CommunicationUnclear)),A.Logger.WarnLog.log("PingPong Timeout",{msg:R})},this._session.Settings.System.PingPongTimeout))}}}(A.MsgHelper||(A.MsgHelper={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){!function(A){"use strict";A.command=A.command||{},A.command.default=function(x,A,V){},A.handleMessageCommand=function handleMessageCommand(V,R,D){return A.command[V]?A.command[V](V,R,D):(x.Logger.InfoLog.log("Handle custom command: "+V),A.command.default(V,R))},A.command.UnknownCommand=function(A,V){const R={cmd:A,val:V};x.Logger.ErrorLog.log("UnknownCommand",R)},A.command.ResumeCommunication=function(A,V,R){x.Application.Socket.onResumeCommunication.trigger("ResumeCommunication")},A.command.SerializationError=function(A,V,R){x.Logger.ErrorLog.log("SerializationError",{Cmd:A,Value:V})}}(x.MsgHelper||(x.MsgHelper={}))}(x.Domain||(x.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){"use strict";class ClientService extends A.BaseClass{constructor(V){super(),this.ClientState=x.System.Client.ClientState.Unloaded,this.ClientStateChanged=new A.Events.TypedEvent,this.CommunicationState=x.System.Client.CommunicationState.Closed,this.CommunicationStateChanged=new A.Events.TypedEvent,this.isDisposable&&(this.Type.Namespace=A.CONST_VW_NS.SYSPROJECT,this.Type.TypeName="ClientService",this._manager=V)}triggerClientState(x){this.ClientStateChanged.trigger(x)}triggerCommunicationState(x){this.CommunicationStateChanged.trigger(x)}Dispose(){this.isDisposable&&(this.isDisposable=!1),super.Dispose()}}V.ClientService=ClientService}(A.Client||(A.Client={}))}(A.System||(A.System={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){"use strict";class AlarmClass extends A.BaseClass{constructor(V,R){super(),this.Type.Namespace=A.CONST_VW_NS.SYSALARM,this.Type.TypeName="AlarmClass",this.Name=V,this.LocalizableText="",this.Text="",R.session.Settings.System.Debug&&x.Internal.Domain.Logger.AppDomainLog.log(this.Type.TypeName,this,A.Diagnostics.Logging.AppDomainEventSource.Alarm,A.Diagnostics.Logging.AppDomainCategorySource.Constructor)}}V.AlarmClass=AlarmClass}(A.Alarm||(A.Alarm={}))}(A.System||(A.System={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){"use strict";class AlarmFilter extends A.BaseClass{constructor(V,R=[],D=[],N=[],U=-1,B=-1){super(),this.Type.Namespace=A.CONST_VW_NS.SYSALARM,this.Type.TypeName="AlarmFilter",this.DesiredClasses=R,this.DesiredGroups=D,this.DesiredStates=N,this.MaxPriority=U,this.MinPriority=B,V.session.Settings.System.Debug&&x.Internal.Domain.Logger.AppDomainLog.log(this.Type.TypeName,this,A.Diagnostics.Logging.AppDomainEventSource.Alarm,A.Diagnostics.Logging.AppDomainCategorySource.Constructor)}}V.AlarmFilter=AlarmFilter}(A.Alarm||(A.Alarm={}))}(A.System||(A.System={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){"use strict";class AlarmGroup extends A.BaseClass{constructor(V,R){super(),this.Type.Namespace=A.CONST_VW_NS.SYSALARM,this.Type.TypeName="AlarmGroup",this.Name="",this.GroupTree=R,this.Text="";const D=R.split(".");D.shift(),D.length>=1?this.SubGroupNames=D:this.SubGroupNames=[],this.LocalizableText="",V.session.Settings.System.Debug&&x.Internal.Domain.Logger.AppDomainLog.log(this.Type.TypeName,this,A.Diagnostics.Logging.AppDomainEventSource.Alarm,A.Diagnostics.Logging.AppDomainCategorySource.Constructor)}}V.AlarmGroup=AlarmGroup}(A.Alarm||(A.Alarm={}))}(A.System||(A.System={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){"use strict";class AlarmItem extends A.BaseClass{constructor(R,D,N,U){if(super(),this.Type.Namespace=A.CONST_VW_NS.SYSALARM,this.Type.TypeName="AlarmItem",this.ActivationCounter=D.ActivationCounter,R.session.Settings.System.ProtokollVersion>=7.1){this.Class=N,this.Group=U;const x=new V.AlarmStateInfo(R,D.StateInfo.Text,D.StateInfo.BackColor,D.StateInfo.ForeColor,{},D.StateInfo.LocalizableText);this.StateInfo=x}this.ID=-1,this.AlarmState=x.Internal.EnumHelper.convertToNumber(x.System.Alarm.AlarmState,D.AlarmState),this.AlarmStateChanged=new A.Events.TypedEvent;return this.AlarmStateChanged.add(x=>{this.ChangeAlarmState(x)}),this.LocalizableText=D.LocalizableText,this.ActivationTime=null,D.ActivationTime>x.Internal.Domain.CONST.netDate.DATE_0&&(this.ActivationTime=new Date(D.ActivationTime||0)),this.AcknowledgeTime=null,D.AcknowledgeTime>x.Internal.Domain.CONST.netDate.DATE_0&&(this.AcknowledgeTime=new Date(D.AcknowledgeTime||0)),this.DeactivationTime=null,D.DeactivationTime>x.Internal.Domain.CONST.netDate.DATE_0&&(this.DeactivationTime=new Date(D.DeactivationTime||0)),this.LocalizableParam1=D.LocalizableParam1,this.Machine=D.Machine,this.Name=D.Name,this.Param1=D.Param1,this.Param2=D.Param2,this.Priority=D.Priority,this.Text=D.Text,this.User=D.User,R.session.Settings.System.Debug&&x.Internal.Domain.Logger.AppDomainLog.log(this.Type.TypeName,this,A.Diagnostics.Logging.AppDomainEventSource.Alarm,A.Diagnostics.Logging.AppDomainCategorySource.Constructor),this}ChangeAlarmState(x){this.AcknowledgeTime=x.AcknowledgeTime,this.ActivationCounter=x.ActivationCounter,this.ActivationTime=x.ActivationTime,this.AlarmState=x.AlarmState,this.DeactivationTime=x.DeactivationTime,this.Text=x.Text,this.User=x.User,this.Param1=x.Param1,this.StateInfo.BackColor=x.StateInfo.BackColor,this.StateInfo.ForeColor=x.StateInfo.ForeColor,this.StateInfo.Text=x.StateInfo.Text}Dispose(){if(this.isDisposable){this.isDisposable=!1,this.AlarmStateChanged.remove();for(const x in this)Object.prototype.hasOwnProperty.call(this,x)&&delete this[x]}}}V.AlarmItem=AlarmItem}(A.Alarm||(A.Alarm={}))}(A.System||(A.System={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){"use strict";class AlarmStateInfo extends A.BaseClass{constructor(V,R,D,N,U,B){super(),this.Type.Namespace=A.CONST_VW_NS.SYSALARM,this.Type.TypeName="AlarmStateInfo",this.LocalizableText=B||"",this.Text=R||"",this.BackColor=x.Internal.Domain.Alarm.hexToRgbA(D)||"",this.ForeColor=x.Internal.Domain.Alarm.hexToRgbA(N)||"",this.Tag=U,V.session.Settings.System.Debug&&x.Internal.Domain.Logger.AppDomainLog.log(this.Type.TypeName,this,A.Diagnostics.Logging.AppDomainEventSource.Alarm,A.Diagnostics.Logging.AppDomainCategorySource.Constructor)}}V.AlarmStateInfo=AlarmStateInfo}(A.Alarm||(A.Alarm={}))}(A.System||(A.System={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){"use strict";class CurrentAlarms extends A.BaseClass{constructor(V,R){super(),this.ID="",this.Type.Namespace=A.CONST_VW_NS.SYSALARM,this.Type.TypeName="CurrentAlarms",this._manager=R,this.RequestID=x.Guid(),this.Filter=V,this.Alarms=[],this.SortMode=x.System.Alarm.AlarmSortMode.FirstUpFaultOnTop,this.ChangeAlarm=new A.Events.TypedEvent,this.NewAlarm=new A.Events.TypedEvent,this.InitAlarm=new A.Events.TypedEvent,this.ClearAlarm=new A.Events.TypedEvent,this.AlarmAttached=new A.Events.TypedEvent,this._manager.session.Settings.System.Debug&&x.Internal.Domain.Logger.AppDomainLog.log(this.Type.TypeName,this,A.Diagnostics.Logging.AppDomainEventSource.Alarm,A.Diagnostics.Logging.AppDomainCategorySource.Constructor)}ReleaseCurrentAlarms(){this.ChangeAlarm.remove(),this.NewAlarm.remove(),this.InitAlarm.remove(),this.ClearAlarm.remove(),this.AlarmAttached.remove(),this.Alarms=[],this._manager.removeCurrentAlarmFromStore(this)}Dispose(){this.isDisposable&&(this.isDisposable=!1,this._manager.removeCurrentAlarmFromStore(this)),super.Dispose()}}V.CurrentAlarms=CurrentAlarms}(A.Alarm||(A.Alarm={}))}(A.System||(A.System={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){"use strict";class HistoricalAlarm extends A.BaseClass{constructor(V,R){super(),this.Position=0,this.Count=0,this.Length=0,this.Result="",this.Type.Namespace=A.CONST_VW_NS.SYSALARM,this.Type.TypeName="HistoricalAlarm",this._manager=R,this.RequestID=x.Guid(),this.Filter=V,this.HistoricalAlarms=[],this._counter=0,this.GetHistoricalDataCompleted=new A.Events.TypedEvent,this._tempArray=[],this._manager.session.Settings.System.Debug&&x.Internal.Domain.Logger.AppDomainLog.log(this.Type.TypeName,this,A.Diagnostics.Logging.AppDomainEventSource.Alarm,A.Diagnostics.Logging.AppDomainCategorySource.Constructor)}GetHistoricalDataAsync(){return this._manager.getHistoricalAlarmsAsync(this)}GetHistoricalAlarmsStream(){return __awaiter(this,void 0,void 0,(function*(){const x=yield this._manager.getHistoricalAlarmsStream(this);return this.RequestID=x.RequestID,this.Result=x.Result,this.Length=x.Length,x}))}ReadHistoricalAlarmsStream(x,A){return __awaiter(this,void 0,void 0,(function*(){return this.Position=x,this.Count=A,this._manager.readHistoricalAlarmsStream(this)}))}CloseHistoricalAlarmsStream(){this._manager.closeHistoricalAlarmsStream(this)}}V.HistoricalAlarm=HistoricalAlarm}(A.Alarm||(A.Alarm={}))}(A.System||(A.System={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){"use strict";class HistoricalAlarmFilter extends V.AlarmFilter{constructor(V){super(V),this.Type.Namespace=A.CONST_VW_NS.SYSALARM,this.Type.TypeName="HistoricalAlarmFilter",this.MinTime=new Date(0),this.MaxTime=new Date,this.User="",this.UtcOffset=0,V.session.Settings.System.Debug&&x.Internal.Domain.Logger.AppDomainLog.log(this.Type.TypeName,this,A.Diagnostics.Logging.AppDomainEventSource.Alarm,A.Diagnostics.Logging.AppDomainCategorySource.Constructor)}}V.HistoricalAlarmFilter=HistoricalAlarmFilter}(A.Alarm||(A.Alarm={}))}(A.System||(A.System={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){"use strict";class HistoricalAlarmItem extends A.BaseClass{constructor(V,R){super(),this.Type.Namespace=A.CONST_VW_NS.SYSALARM,this.Type.TypeName="HistoricalAlarmItem",this.HistoricalID="",this.FileName="",this.ActivationCounter=R.ActivationCounter,this.LocalizableText=R.LocalizableText,V.session.Settings.System.ProtokollVersion>=7.1||(this.Class=R.Class,this.Group=R.Group,this.StateInfo=R.StateInfo),this.LocalizableText=R.LocalizableText,this.ActivationTime=null,R.ActivationTime>x.Internal.Domain.CONST.netDate.DATE_0&&(this.ActivationTime=new Date(R.ActivationTime||0)),this.AcknowledgeTime=null,R.AcknowledgeTime>x.Internal.Domain.CONST.netDate.DATE_0&&(this.AcknowledgeTime=new Date(R.AcknowledgeTime||0)),this.DeactivationTime=null,R.DeactivationTime>x.Internal.Domain.CONST.netDate.DATE_0&&(this.DeactivationTime=new Date(R.DeactivationTime||0)),this.AlarmState=x.Internal.EnumHelper.convertToNumber(x.System.Alarm.AlarmState,R.AlarmState),this.LocalizableParam1=R.LocalizableParam1,this.Machine=R.Machine,this.Name=R.Name,this.Param1=R.Param1,this.Param2=R.Param2,this.Priority=R.Priority,this.Tag=R.Tag,this.Text=R.Text,this.User=R.User,V.session.Settings.System.Debug&&x.Internal.Domain.Logger.AppDomainLog.log(this.Type.TypeName,this,A.Diagnostics.Logging.AppDomainEventSource.Alarm,A.Diagnostics.Logging.AppDomainCategorySource.Constructor)}}V.HistoricalAlarmItem=HistoricalAlarmItem}(A.Alarm||(A.Alarm={}))}(A.System||(A.System={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){"use strict";class AlarmService extends A.BaseClass{constructor(V){super(),this.Type.Namespace=A.CONST_VW_NS.SYSALARM,this.Type.TypeName="AlarmService",this._manager=V,this.GroupNames=[],this.ClassNames=[],this._manager.session.Settings.System.Debug&&x.Internal.Domain.Logger.AppDomainLog.log(this.Type.TypeName,this,A.Diagnostics.Logging.AppDomainEventSource.Alarm,A.Diagnostics.Logging.AppDomainCategorySource.Constructor)}AcknowledgeAlarm(V){x.isNullOrUndefined(V)&&new A.Exception.ParameterException("AcknowledgeAlarm","strGroupAndName incorrect",V),this._manager.acknowledgeAlarm(V)}GetAlarmClass(V){return x.isString(V)||new A.Exception.ParameterException("GetAlarmClass","className incorrect",V),this._manager.getAlarmClassFromStore(V)}GetAlarmGroup(V){return x.isString(V)||new A.Exception.ParameterException("GetAlarmGroup","groupTree incorrect",V),this._manager.getAlarmGroupFromStore(V)}GetCurrentAlarms(V){return x.isNullOrUndefined(V)&&new A.Exception.ParameterException("GetCurrentAlarms","alarmFilter incorrect",V),this._manager.getCurrentAlarm(V)}CreateAlarmFilter(){return new V.AlarmFilter(this._manager)}CreateHistoricalAlarmFilter(){return new V.HistoricalAlarmFilter(this._manager)}CreateHistoricalAlarmRequest(R){return x.isNullOrUndefined(R)&&new A.Exception.ParameterException("CreateHistoricalAlarmRequest","filter incorrect",R),new V.HistoricalAlarm(R,this._manager)}AcknowledgeAlarmClass(V){this._manager.session.ServerInfo.WebGatewayProtocolVersion<4?x.Internal.Domain.Logger.WarnLog.log("AcknowledgeAlarmClass not available. Upgrade Server!"):(x.isString(V)||new A.Exception.ParameterException("AcknowledgeAlarmClass","className incorrect",V),this._manager.acknowledgeAlarmClass(V))}AcknowledgeAlarmGroup(V){this._manager.session.ServerInfo.WebGatewayProtocolVersion<4?x.Internal.Domain.Logger.WarnLog.log("AcknowledgeAlarmGroup not available. Upgrade Server!"):(x.isString(V)||new A.Exception.ParameterException("AcknowledgeAlarmGroup","groupName incorrect",V),this._manager.acknowledgeAlarmGroup(V))}AcknowledgeAllAlarms(){this._manager.session.ServerInfo.WebGatewayProtocolVersion<4?x.Internal.Domain.Logger.WarnLog.log("AcknowledgeAllAlarms not available. Upgrade Server!"):this._manager.acknowledgeAllAlarms()}}V.AlarmService=AlarmService}(A.Alarm||(A.Alarm={}))}(A.System||(A.System={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){"use strict";class Quality extends A.BaseClass{constructor(){super(),this._data=x.System.DataAccess.DataQuality.Uncertain,this._limit=x.System.DataAccess.LimitQuality.Ok,this.Type.Namespace=A.CONST_VW_NS.SYSDATAACCESS,this.Type.TypeName="Quality",this.Data=x.System.DataAccess.DataQuality.Uncertain,this.IsBad=!0,this.IsGoodOrUncertain=!1,this.Limit=x.System.DataAccess.LimitQuality.Ok,this.Value=0}get Data(){return this._data}set Data(x){this._data=x}get Limit(){return this._limit}set Limit(x){this._limit=x}Dispose(){this.isDisposable&&(this.isDisposable=!1),super.Dispose()}}V.Quality=Quality}(A.DataAccess||(A.DataAccess={}))}(A.System||(A.System={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){!function(A){"use strict";class Unit extends x.BaseClass{constructor(){super(),this.Type.Namespace=x.CONST_VW_NS.SYSDATAACCESS,this.Type.TypeName="Unit",this.Name="",this.Text="",this.DecPoint=0,this.Offset=0,this.Slope=1,this.X1=0,this.X2=1,this.Y1=0,this.Y2=1,this.LocalizableText=""}}A.Unit=Unit}(x.DataAccess||(x.DataAccess={}))}(x.System||(x.System={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){"use strict";class UnitClass extends A.BaseClass{constructor(V,R){super(),this.Type.Namespace=A.CONST_VW_NS.SYSDATAACCESS,this.Type.TypeName="UnitClass",this._master=V,this.Name=R,this.CurrentUnit=new x.Internal.System.DataAccess.Unit,this.CurrentUnit.Name=R,V.item&&(this.UnitClassType=V.item.UnitClassType),this.Change=new A.Events.TypedEvent}Dispose(){this._master.RemoveChild(this),super.Dispose()}}V.UnitClass=UnitClass}(A.DataAccess||(A.DataAccess={}))}(A.System||(A.System={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){"use strict";class Variable extends A.BaseClass{constructor(V,R,D=7.4){return super(),this._configEventTriggered=!1,this._canRecipeEdit=!1,this._isRecipeEditing=!1,this.Type.Namespace=A.CONST_VW_NS.SYSDATAACCESS,this.Type.TypeName="Variable",this._master=V,this._isAttached=!1,this._isInitialized=!1,this.Name=R||V.item.Name,this.Change=new A.Events.TypedEvent,this.CanRecipeEdit=!1,this.CalculatedDecPoint=0,this.DecPoint=0,this.Comment="",this.IsAttached=!1,this.IsEditing=!1,this.IsNumeric=!1,this.IsQualityGood=!1,this.IsRecipeEditing=!1,this.IsValid=!1,this.LocalizableText="",this.MaxValue=null,this.MinValue=null,this.Quality=null,this.RawMaxValue=null,this.RawMinValue=null,this.RawTypeCode=x.System.DataAccess.TypeCode.Empty,this.RawValue=null,this.Tag={},this.Text="",this.TimeStamp=new Date,this.TypeCode=x.System.DataAccess.TypeCode.Empty,this.UnitClass=null,this.UnitText="",this.UseUnitConversion=!1,this._itemValue=null,this.PreviousRawValue=0,this.PreviousValue=0,this.RecipeMode=!1,this.Source=x.System.DataAccess.ChangeSource.Configuration,this.AccessRight=x.System.DataAccess.AccessRight.ReadWrite,this.FieldOffset=[],this.FieldSize=[],7.3!==D&&7.4!==D||(this.FieldOffsets=[],this.FieldSizes=[],this.RecipeItemChange=new A.Events.TypedEvent),this}SetVariableName(x){this.Name=x}get Value(){return this._itemValue}set Value(A){if(this._itemValue!==A&&(this._isAttached&&this._isInitialized&&!this.IsClientInternal&&new Promise((V,R)=>{this._master.setImpliciteValue(A).then(V=>{V.Success?this._itemValue=A:(this.Quality=V.Quality,x.Internal.Domain.Logger.WarnLog.log("Set variable value failed",x.Internal.makeString({Result:V.Errors})))}).catch(x=>{})}),this.IsClientInternal)){const V=this._master.item.Value;this._master.item.Source=x.System.DataAccess.ChangeSource.Application,this._master.item.PreviousValue=V,this._master.item.SetValueMember(A);const R=x.Internal.Domain.DataAccess.createChangeEventArgs(this._master);R.Value=A,this._master.Change(R)}}set CanRecipeEdit(x){this._canRecipeEdit!=x&&(this._canRecipeEdit=x,this._canRecipeEdit)}get CanRecipeEdit(){return this._canRecipeEdit}set IsRecipeEditing(x){this._isRecipeEditing!=x&&(this._isRecipeEditing=x,this._isRecipeEditing)}get IsRecipeEditing(){return this._isRecipeEditing}SetValueMember(x){this._itemValue=x}AttachAsync(x=!0){return this._master.AttachAsync(this,x)}Detach(){this._master.Detach(this)}Dispose(){this._isAttached&&this._master.Detach(this),this.isDisposable&&(this.isDisposable=!1),super.Dispose()}}V.Variable=Variable}(A.DataAccess||(A.DataAccess={}))}(A.System||(A.System={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){"use strict";class VariableService extends A.BaseClass{constructor(V){super(),this.Type.Namespace=A.CONST_VW_NS.SYSDATAACCESS,this.Type.TypeName="VariableService",this._manager=V,this._manager.session.Settings.System.Debug&&x.Internal.Domain.Logger.AppDomainLog.log(this.Type.TypeName,this,A.Diagnostics.Logging.AppDomainEventSource.DataAccess,A.Diagnostics.Logging.AppDomainCategorySource.Constructor)}GetVariable(V){return x.isNullOrEmpty(V)&&new A.Exception.ParameterException("GetVariable","variable name parameter incorrect",{name:V}),this._manager.getVariable(V)}GetValueAsync(V,R=!1){return x.isNullOrEmpty(V)&&new A.Exception.ParameterException("GetValueAsync","variable name parameter incorrect",{variableName:V}),this._manager.getVariableValueAsync(V,R)}GetValuesAsync(V,R=!1){if(!x.isArray(V)){for(let R=0;R<V.length;R++)x.isNullOrEmpty(V[R])&&new A.Exception.ParameterException("GetValuesAsync","variable name parameter incorrect",{Name:V[R]});new A.Exception.ParameterException("GetValuesAsync","variable names parameter incorrect",{Names:V})}return this._manager.getVariablesValuesAsync(V,R)}GetRawValueAsync(V,R=!1){return x.isNullOrEmpty(V)&&new A.Exception.ParameterException("GetRawValueAsync","variable name parameter incorrect",{variableName:V}),this._manager.getVariableRawValueAsync(V,R)}GetRawValuesAsync(V,R=!1){if(!x.isArray(V)){for(let R=0;R<V.length;R++)x.isNullOrEmpty(V[R])&&new A.Exception.ParameterException("GetRawValuesAsync","variable name parameter incorrect",{Name:V[R]});new A.Exception.ParameterException("GetRawValuesAsync","variable names parameter incorrect",{Names:V})}return this._manager.getVariablesRawValuesAsync(V,R)}SetValueAsync(V,R,D=!1){return x.isNullOrEmpty(V)&&new A.Exception.ParameterException("SetValueAsync","variable name parameter incorrect",{variableName:V}),x.isNullOrUndefined(R)&&new A.Exception.ParameterException("SetValueAsync","value parameter incorrect",{newValue:R}),this._manager.setVariableValueAsync(V,R,D)}SetValuesAsync(V,R,D=!1){if(!x.isArray(V)){for(let D=0;D<V.length;D++)x.isNullOrEmpty(V[D])&&new A.Exception.ParameterException("SetValuesAsync","variable name parameter incorrect",{Name:V[D]}),x.isNullOrUndefined(R[D])&&new A.Exception.ParameterException("SetValuesAsync","value parameter incorrect",{Value:R[D]});new A.Exception.ParameterException("SetValues","variable names parameter incorrect",{Names:V})}return this._manager.setVariablesValuesAsync(V,R,D)}SetRawValueAsync(V,R,D=!1){return x.isNullOrEmpty(V)&&new A.Exception.ParameterException("SetRawValueAsync","variable name parameter incorrect",{variableName:V}),x.isNullOrUndefined(R)&&new A.Exception.ParameterException("SetRawValueAsync","value parameter incorrect",{newValue:R}),this._manager.setVariableRawValueAsync(V,R,D)}SetRawValuesAsync(V,R,D=!1){if(!x.isArray(V)){for(let D=0;D<V.length;D++)x.isNullOrEmpty(V[D])&&new A.Exception.ParameterException("SetRawValuesAsync","variable name parameter incorrect",{Name:V[D]}),x.isNullOrUndefined(R[D])&&new A.Exception.ParameterException("SetRawValuesAsync","value parameter incorrect",{Value:R[D]});new A.Exception.ParameterException("SetRawValuesAsync","variable names parameter incorrect",{Names:V})}return this._manager.setVariablesRawValuesAsync(V,R,D)}SetBitAsync(V,R,D,N=!1){x.isNullOrEmpty(V)&&new A.Exception.ParameterException("SetBitAsync","variable name parameter incorrect",{variableName:V}),x.isNumber(R)||new A.Exception.ParameterException("SetBitAsync","bit number parameter incorrect",{variableName:V}),x.isBoolean(D)||(new A.Exception.ParameterException("SetBitAsync","value parameter incorrect",{newValue:D}),x.isNumber(D)&&(D=1===D));let U=!1;return!0===D&&(U=!0),this._manager.setBitValueAsync(V,R,U,N)}SetBitsAsync(V,R,D,N=!1){const U=[];if(x.isArray(V))for(let N=0;N<V.length;N++)x.isNumber(R[N])||new A.Exception.ParameterException("SetBitsAsync","variable name parameter incorrect",{Name:V[N]}),x.isBoolean(D[N])||new A.Exception.ParameterException("SetBitsAsync","value parameter incorrect",{Value:D[N]}),!0===D[N]?U.push(!0):U.push(!1);else new A.Exception.ParameterException("SetBitsAsync","variable names[] parameter incorrect",{Name:V});return this._manager.setBitsValuesAsync(V,R,U,N)}GetUnitClassAsync(V){return x.isNullOrEmpty(V)&&new A.Exception.ParameterException("GetUnitClassAsync","unit class name parameter incorrect",{unitClassName:V}),this._manager.getUnitClassAsync(V)}GetCurrentUnitAsync(V){return x.isNullOrEmpty(V)&&new A.Exception.ParameterException("GetCurrentUnit","unit class name parameter incorrect",{unitClassName:V}),this._manager.getCurrentUnitAsync(V)}}V.VariableService=VariableService}(A.DataAccess||(A.DataAccess={}))}(A.System||(A.System={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){!function(x){"use strict";class CultureInfo{constructor(){this.LCID=0,this.Name="",this.Locale="",this.DisplayName="",this.NativeName="",this.EnglishName=""}}x.CultureInfo=CultureInfo,x._cultureInfoHelper=function _cultureInfoHelper(x){const A={DisplayName:"English (United States)",EnglishName:"English (United States)",Name:"en-US",Locale:"en-US",NativeName:"English (United States)",LCID:1033};let V=A;"de-DE"===x&&(V={DisplayName:"German (Germany)",EnglishName:"German (Germany)",Name:"de-DE",Locale:"de-DE",NativeName:"Deutsch (Deutschland)",LCID:1031}),"en-US"===x&&(V=A);const R=new CultureInfo;for(const x in V)Object.prototype.hasOwnProperty.call(V,x)&&(R[x]=V[x]);return R}}(x.Language||(x.Language={}))}(x.System||(x.System={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){"use strict";class ProjectLanguage extends A.BaseClass{constructor(V,R,D,N={},U=""){super(),this.Type.Namespace=A.CONST_VW_NS.SYSLANGUAGE,this.Type.TypeName="ProjectLanguage",this.CultureDisplayName=R||"",Number.isInteger(D)?this.LCID=D||1033:this.LCID=1033,this.Tag=N,this.Text=U||this.CultureDisplayName;const B=x.System.Language._lcid2locale(this.LCID);x.Internal.Domain.Language._isValidLocale(B)&&(this.Locale=B,this.NativeName=x.Internal.Domain.Language._tryGetNativeLanguageName(this.Locale),this.EnglishName=x.Internal.Domain.Language._tryGetNativeEnglishLanguageName(this.Locale)),V.session.Settings.System.Debug&&x.Internal.Domain.Logger.AppDomainLog.log(this.Type.TypeName,this,A.Diagnostics.Logging.AppDomainEventSource.Language,A.Diagnostics.Logging.AppDomainCategorySource.Constructor)}}V.ProjectLanguage=ProjectLanguage}(A.Language||(A.Language={}))}(A.System||(A.System={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){"use strict";class LocalizedText extends A.BaseClass{constructor(V,R,D,N,U,B="",F=""){return super(),this.Type.Namespace=A.CONST_VW_NS.SYSLANGUAGE,this.Type.TypeName="LocalizedText",this._master=R,this.TextType=D,this.TextGroup=N||"",this.TextName=U||"",this.DisplayText=F||"",this.FullQualifiedText=B,this.Changed=new A.Events.TypedEvent,V.session.Settings.System.Debug&&x.Internal.Domain.Logger.AppDomainLog.log(this.Type.TypeName,this,A.Diagnostics.Logging.AppDomainEventSource.Language,A.Diagnostics.Logging.AppDomainCategorySource.Constructor),this}Dispose(){this.isDisposable&&this._master.RemoveChild(this)}}V.LocalizedText=LocalizedText}(A.Language||(A.Language={}))}(A.System||(A.System={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){"use strict";class LanguageService extends A.BaseClass{constructor(R){if(super(),this.Type.Namespace=A.CONST_VW_NS.SYSLANGUAGE,this.Type.TypeName="LanguageService",this._manager=R,this.CurrentLCID=0,this.CurrentLanguage=new V.ProjectLanguage(this._manager),this.ProjectLanguages=[],this.LanguageChanged=new A.Events.TypedEvent,navigator.language)if("de-DE"===navigator.language){const x=V._cultureInfoHelper(navigator.language);this.CurrentLanguage=new V.ProjectLanguage(this._manager,x.DisplayName,x.LCID,{},x.NativeName)}else if("en-US"===navigator.language){const x=V._cultureInfoHelper(navigator.language);this.CurrentLanguage=new V.ProjectLanguage(this._manager,x.DisplayName,x.LCID,{},x.NativeName)}this._manager.session.Settings.System.Debug&&x.Internal.Domain.Logger.AppDomainLog.log(this.Type.TypeName,this,A.Diagnostics.Logging.AppDomainEventSource.Language,A.Diagnostics.Logging.AppDomainCategorySource.Constructor)}ChangeLanguageAsync(V){return __awaiter(this,void 0,void 0,(function*(){if(!x.isNumber(V)&&!x.isNumber(V.LCID))return Promise.reject(new A.Exception.ParameterException("ChangeLanguageAsync","LCID incorrect",V));const R=V.LCID?V.LCID:V;return this._manager.changeLanguageAsync(R)}))}GetLocalizedTextAsync(V,R,D){return __awaiter(this,void 0,void 0,(function*(){const N=x.Internal.Domain.Language.createTextParms(V,R,D);let U;if(x.isNullOrUndefined(N.TextName)&&new A.Exception.ParameterException("GetLocalizedText","Text parameter incorrect",{textParams:N}),x.stringStartsWith(N.TextName,"@")&&x.isNumber(N.TextType)&&!x.stringStartsWith(N.TextName,"@@")&&!x.stringStartsWith(N.TextName,"@$")){N.TextName=N.TextName.substring(1);const A=x.Internal.Domain.Language.tryGetFullQualifiedText(N.TextGroup,N.TextName,N.TextType);U=yield this._manager.getLocalizedTextAsync(A)}else if(x.stringStartsWith(N.TextName,"@")||x.isNumber(N.TextType))if(x.stringStartsWith(N.TextName,"@@")&&!x.isNumber(N.TextType))U=yield this._manager.getLocalizedTextAsync(N.TextName);else{const A=x.Internal.Domain.Language.tryGetFullQualifiedText(N.TextGroup,N.TextName,N.TextType);U=yield this._manager.getLocalizedTextAsync(A)}else U=yield this._manager.getLocalizedTextAsync(N.TextName);return U?Promise.resolve(U):Promise.reject({Error:"No Text available",param1:V,param2:R,param3:D})}))}GetTextAsync(V){return __awaiter(this,void 0,void 0,(function*(){return!x.isString(V)||x.isNullOrEmpty(V)?Promise.reject(new A.Exception.ParameterException("GetTextAsync","FullQualifiedText incorrect",V)):this._manager.getTextAsync(V)}))}GetServerProjectLanguagesAsync(){return __awaiter(this,void 0,void 0,(function*(){return this._manager.getServerProjectLanguages()}))}ChangeTextFormats(V){for(let D=0;D<V.length;D++){if(!x.stringStartsWith(V[D].TextKey,"@")){const x=V[D].TextKey;new A.Exception.ParameterException("ChangeTextFormats","Text parameter incorrect",{textKey:x})}for(var R=0;R<V[D].LocalizedFormats.length;R++)if(!x.isNumber(V[D].LocalizedFormats[R].Lcid)){const x=V[D].LocalizedFormats[R].Lcid;new A.Exception.ParameterException("ChangeTextFormats","Lcid parameter incorrect",{lcid:x})}}return this._manager.changeTextFormats(V)}ResetTextFormat(x,A){return this.ResetTextFormats([x],[A])}ResetTextFormats(V,R){for(let R=0;R<V.length;R++)if(!x.stringStartsWith(V[R],"@")){const x=V[R];new A.Exception.ParameterException("ResetTextFormats","Text parameter incorrect",{textKey:x})}for(var D=0;D<R.length;D++)if(!x.isNumber(R[D])){const x=R[D];new A.Exception.ParameterException("ResetTextFormats","Lcid parameter incorrect",{lcid:x})}return this._manager.resetTextFormats(V,R)}}V.LanguageService=LanguageService}(A.Language||(A.Language={}))}(A.System||(A.System={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){!function(A){"use strict";class HistoricalLoggingEntry extends x.BaseClass{constructor(){super(),this.ID=0,this.FullName="",this.CategoryName="",this.LocalizedCategoryName="",this.EventName="",this.LocalizedEventName="",this.User="",this.Machine="",this.TimeStamp=new Date,this.LocalizedText="",this.LocalizableCategoryName="",this.LocalizableEventName="",this.LocalizableText="",this.Type.Namespace=x.CONST_VW_NS.SYSLOGGING,this.Type.TypeName="HistoricalLoggingEntry"}}A.HistoricalLoggingEntry=HistoricalLoggingEntry}(x.Logging||(x.Logging={}))}(x.System||(x.System={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){!function(A){"use strict";class HistoricalLoggingFilter extends x.BaseClass{constructor(){super(),this.Type.Namespace=x.CONST_VW_NS.SYSLOGGING,this.Type.TypeName="HistoricalLoggingFilter",this.CategoryNames=[],this.EventNames=[],this.MaxTime=new Date,this.MinTime=new Date(0),this.Users=[]}}A.HistoricalLoggingFilter=HistoricalLoggingFilter}(x.Logging||(x.Logging={}))}(x.System||(x.System={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){!function(A){"use strict";class LoggingEntry extends x.BaseClass{constructor(){super(),this.CategoryFullName="",this.EventName="",this.LogText="",this.Type.Namespace=x.CONST_VW_NS.SYSLOGGING,this.Type.TypeName="LoggingEntry"}}A.LoggingEntry=LoggingEntry}(x.Logging||(x.Logging={}))}(x.System||(x.System={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){"use strict";class LoggingService extends A.BaseClass{constructor(x){super(),this.GetHistoricalLoggingEntriesAsyncCompleted=new A.Events.TypedEvent,this.Type.Namespace=A.CONST_VW_NS.SYSLOGGING,this.Type.TypeName="LoggingService",this._manager=x,this.CategoryNames=[],this.Categories=[]}LogAsync(V,R,D){return __awaiter(this,void 0,void 0,(function*(){return x.isNullOrEmpty(V)?Promise.reject(new A.Exception.ParameterException("LogAsync","Category Name incorrect",V)):x.isNullOrEmpty(R)?Promise.reject(new A.Exception.ParameterException("LogAsync","Event Name incorrect",R)):x.isNullOrEmpty(D)?Promise.reject(new A.Exception.ParameterException("LogAsync","Log Text incorrect",D)):this._manager.logAsync(V,R,D)}))}GetEventAsync(V){return __awaiter(this,void 0,void 0,(function*(){return x.isNullOrEmpty(V)?Promise.reject(new A.Exception.ParameterException("GetEventAsync","Event Name incorrect",V)):this._manager.getEventAsync(V)}))}GetCategoryAsync(V){return __awaiter(this,void 0,void 0,(function*(){return x.isNullOrEmpty(V)?Promise.reject(new A.Exception.ParameterException("GetCategoryAsync","Category Name incorrect",V)):this._manager.getCategoryAsync(V)}))}GetHistoricalLoggingEntriesAsync(x){return __awaiter(this,void 0,void 0,(function*(){return x instanceof V.HistoricalLoggingFilter?this._manager.getHistoricalLoggingEntriesAsync(x):Promise.reject(new A.Exception.ParameterException("GetHistoricalLoggingEntriesAsync","HistoricalLoggingFilter incorrect",x))}))}CreateHistoricalLoggingFilter(){return new V.HistoricalLoggingFilter}CreateHistoricalLoggingStream(){return new V.HistoricalLoggingStreamRequest(this._manager)}}V.LoggingService=LoggingService}(A.Logging||(A.Logging={}))}(A.System||(A.System={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(A){"use strict";A.HistoricalLoggingStreamRequest=class HistoricalLoggingStreamRequest{constructor(V){this._manager=V,this.HistoricalLoggingEntries=[],this.Filter=new A.HistoricalLoggingFilter,this.RequestID=x.Guid(),this.Position=0,this.Count=0,this.Length=0,this.Result=""}GetHistoricalLoggingEntriesStream(){return __awaiter(this,void 0,void 0,(function*(){const x=yield this._manager.getHistoricalLoggingEntriesStream(this);return this.RequestID=x.RequestID,this.Result=x.Result,this.Length=x.Length,this}))}ReadHistoricalLoggingEntriesStream(x,A){return __awaiter(this,void 0,void 0,(function*(){return this.Position=x||this.Position,this.Count=A||this.Count,this._manager.readHistoricalLoggingEntriesStream(this)}))}CloseHistoricalLoggingEntriesStream(){this._manager.closeHistoricalLoggingEntriesStream(this)}}}(A.Logging||(A.Logging={}))}(A.System||(A.System={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){x.Project||(x.Project={})}(x.System||(x.System={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){"use strict";class ProjectService extends A.BaseClass{constructor(V){super(),this.ServerProjectName="",this.ServerProjectRuntimeState=x.System.Project.ServerRuntimeStatus.Stopped,this.ServerProjectStateChange=new A.Events.TypedEvent,this.onServerError=new A.Events.TypedEvent,this.isDisposable&&(this.Type.Namespace=A.CONST_VW_NS.SYSPROJECT,this.Type.TypeName="ProjectService",this._manager=V,this.ServerProjectName="",this.ServerProjectRuntimeState=x.System.Project.ServerRuntimeStatus.Stopped,this.ServerProjectStateChange=new A.Events.TypedEvent,x.isNullOrEmpty(this.ServerProjectName)&&(this._manager.session.Settings.ProjectName?(x.Internal.Domain.Logger.ErrorLog.log("do not use 'VisiWin.Application.Settings.ProjectName' use 'VisiWin.Application.Settings.ServerProjectName' instead"),this.ServerProjectName=this._manager.session.Settings.ProjectName):this._manager.session.Settings.Server.ServerProjectName&&(this.ServerProjectName=this._manager.session.Settings.Server.ServerProjectName)),this._manager.session.Settings.System.Debug&&x.Internal.Domain.Logger.AppDomainLog.log(this.Type.TypeName,this,A.Diagnostics.Logging.AppDomainEventSource.Language,A.Diagnostics.Logging.AppDomainCategorySource.Constructor))}RunProjectAsync(){return this._manager.runProjectAsync()}Dispose(){this.isDisposable&&(this.isDisposable=!1),super.Dispose()}}V.ProjectService=ProjectService}(A.Project||(A.Project={}))}(A.System||(A.System={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){"use strict";class RecipeClass extends A.BaseClass{constructor(V,R){super(),this.LockState=x.System.Recipe.RecipeLockState.Unlocked,this.Comment="",this.CurrentPath="",this.IncludeSubRecipesInStorage=!1,this.InitialDirectory="",this.InitialRecipeDescription="",this.InitialRecipeName="",this.HasChangesForFile=!1,this.HasChangesForProcess=!1,this.IsServerSideRecipe=!1,this.LoadOnStartup=!1,this.LoggingCategoryName="",this.ReadValuesOnProcessChange=!1,this.SaveRecipeValueChanges=!1,this.SaveRecipeValuesOnChange=!1,this.SetRecipeValuesToProcessOnChange=!1,this.IsEditing=!1,this.LocalizableText="",this.LastRecipeLoadedToBuffer=new x.Internal.System.Recipe.RecipeInfoDetails,this.LastRecipeSavedToFile=new x.Internal.System.Recipe.RecipeInfoDetails,this.LastRecipeSentToProcess=new x.Internal.System.Recipe.RecipeInfoDetails,this._variableNames=[],this.Type.Namespace=A.CONST_VW_NS.SYSRECIPE,this.Type.TypeName="RecipeClass",this._manager=V,this.Name=R,this.FileNames=[],this.SubRecipes=[],this.LockStateChanged=new A.Events.TypedEvent,this.BufferChanged=new A.Events.TypedEvent,this.WrittenToProcess=new A.Events.TypedEvent,this.FilesChanged=new A.Events.TypedEvent,this._manager.session.Settings.System.Debug&&x.Internal.Domain.Logger.AppDomainLog.log(this.Type.TypeName,this,A.Diagnostics.Logging.AppDomainEventSource.Recipe,A.Diagnostics.Logging.AppDomainCategorySource.Constructor)}GetRecipeFileAsync(V){return x.isNullOrEmpty(V)?Promise.reject(new A.Exception.ParameterException("GetRecipeFileAsync","File name parameter incorrect",{recipeFileName:V})):this._manager.recipeClassGetRecipeFileAsync(this.Name,V)}GetVariableNamesAsync(){return this._manager.recipeClassGetVariableNamesAsync(this.Name)}GetValueAsync(V){return x.isNullOrEmpty(V)?Promise.reject(new A.Exception.ParameterException("GetValueAsync","Variable name parameter incorrect",{variableName:V})):this._manager.recipeClassGetValueAsync(this.Name,V)}GetValuesAsync(x){return this._manager.recipeClassGetValuesAsync(this.Name,x)}GetChangesAsync(V,R){return x.isNullOrEmpty(V)?Promise.reject(new A.Exception.ParameterException("GetChangesAsync","File name parameter incorrect",{recipeFileName:V})):this._manager.recipeFileGetChangesAsync(this.Name,V,R)}AddNoteAsync(V){return x.isNullOrEmpty(V)?Promise.reject(new A.Exception.ParameterException("AddNoteAsync","Note parameter incorrect",{note:V})):this._manager.recipeClassAddNoteAsync(this.Name,V)}GetNotesAsync(A="",V){let R=null;return x.isObject(V)?R=V:x.isObject(A)&&(R=A,A=""),this._manager.recipeFileGetNotesAsync(this.Name,A,R)}ClearChangesAsync(){return this._manager.recipeClassClearChangesAsync(this.Name)}ClearNotesAsync(){return this._manager.recipeClassClearNotesAsync(this.Name)}LockRecipeAsync(){return __awaiter(this,void 0,void 0,(function*(){const A=yield this._manager.recipeClassLockRecipeAsync(this.Name);return A&&(this.LockState=x.System.Recipe.RecipeLockState.LockedByThisClient,this.LockStateChanged.trigger({LockState:this.LockState,RecipeClassName:this.Name})),A}))}UnlockRecipeAsync(){return __awaiter(this,void 0,void 0,(function*(){const A=yield this._manager.recipeClassUnlockRecipeAsync(this.Name);return A&&(this.LockState=x.System.Recipe.RecipeLockState.Unlocked,this.LockStateChanged.trigger({LockState:this.LockState,RecipeClassName:this.Name})),A}))}GetSubRecipesAsync(){return this._manager.recipeClassGetSubRecipesAsync(this.Name)}DeleteFileAsync(V){return __awaiter(this,void 0,void 0,(function*(){if(x.isNullOrEmpty(V))return Promise.reject(new A.Exception.ParameterException("DeleteFileAsync","File name parameter incorrect",{recipeFileName:V}));const R=yield this._manager.recipeClassDeleteFileAsync(this.Name,V);if(R.Result){const x=this.FileNames.indexOf(V);x>-1&&this.FileNames.splice(x,1)}return R}))}IsExistingRecipeFileAsync(A){return this._manager.session.ServerInfo.WebGatewayProtocolVersion<19?(x.Internal.Domain.Logger.WarnLog.log("RecipeClass IsExistingRecipeFileAsync not available. Upgrade Server!"),Promise.reject()):this._manager.isExistingRecipeFileAsync(this.Name,A)}GetCurrentPathAsync(){return this._manager.getCurrentPathAsync(this.Name)}SetCurrentPathAsync(x){return this._manager.setCurrentPathAsync(this.Name,x)}GetMemberDefinitionsAsync(){return this._manager.getMemberDefinitionsAsync(this.Name)}GetFileNamesAsync(){return __awaiter(this,void 0,void 0,(function*(){const x=yield this._manager.recipeServiceGetRecipeFileNamesAsync(this.Name);return Promise.resolve(x.RecipeFileNames)}))}GetRecipeLockStateAsync(){return this._manager.getRecipeLockStateAsync(this.Name)}RemoveNoteAsync(x){return this._manager.removeNoteAsync(this.Name,x)}WriteBufferToProcessAsync(){return __awaiter(this,void 0,void 0,(function*(){const A=yield this._manager.recipeClassWriteBufferToProcessAsync(this.Name);if(this._manager.session.ServerInfo.WebGatewayProtocolVersion<19){const x=A;return Promise.resolve(x)}{if(null===A.ActionResult.Data.MemberResults){const V={Result:!1,SetRecipeSuccess:x.System.Recipe.SetRecipeSuccess.UnknownError,RecipeActionResult:A.ActionResult};return Promise.resolve(V)}this.LastRecipeSentToProcess=this._recipeInfoDetails(A.ActionResult.Data.Details),this.HasChangesForProcess=A.ActionResult.Data.HasChangesForPlc,this.HasChangesForFile=A.ActionResult.Data.HasChangesForFile;const V={Result:!0,SetRecipeSuccess:A.SetRecipeSuccess,RecipeActionResult:A.ActionResult},R=this._meberResults(A.ActionResult),D={Action:x.System.Recipe.RecipeChangedAction.WriteBufferToProcess,ClassName:this.Name,Details:A.ActionResult.Data.Details,Results:R,Server:A.ActionResult.Data.Details.Machine,Source:x.System.Recipe.RecipeChangedSource.Application};return this.WrittenToProcess.trigger(D),Promise.resolve(V)}}))}ReadProcessToBufferAsync(){return __awaiter(this,void 0,void 0,(function*(){const A=yield this._manager.recipeClassReadProcessToBufferAsync(this.Name);if(this._manager.session.ServerInfo.WebGatewayProtocolVersion<19){const x=A;return Promise.resolve(x)}{if(null===A.ActionResult.Data.MemberResults){const V={Result:!1,GetRecipeSuccess:x.System.Recipe.GetRecipeSuccess.UnknownError,RecipeActionResult:A.ActionResult};return Promise.resolve(V)}this.LastRecipeLoadedToBuffer=this._recipeInfoDetails(A.ActionResult.Data.Details),this.HasChangesForProcess=A.ActionResult.Data.HasChangesForPlc,this.HasChangesForFile=A.ActionResult.Data.HasChangesForFile;const V={Result:!0,GetRecipeSuccess:A.GetRecipeSuccess,RecipeActionResult:A.ActionResult};this._refreshRecipeValuesAsync(A.ActionResult.Data.MemberResults),A.ActionResult.SubRecipesData.length>0&&A.ActionResult.SubRecipesData.forEach(x=>{this._refreshRecipeValuesAsync(x.MemberResults)});const R=new x.Internal.System.Recipe.RecipeBufferChangeEventArgs(x.System.Recipe.RecipeChangedAction.ReadProcessToBuffer,x.System.Recipe.RecipeChangedSource.Application,A.ActionResult.Data);return this.BufferChanged.trigger(R),Promise.resolve(V)}}))}SaveBufferToFileAsync(V,R="",D=!1,N=!1){return __awaiter(this,void 0,void 0,(function*(){if(x.isNullOrEmpty(V))return Promise.reject(new A.Exception.ParameterException("SaveBufferToFileAsync","File name parameter incorrect",{fileName:V}));const U=yield this._manager.recipeClassSaveBufferToFileAsync(this.Name,V,R,D,N);if(null===U.ActionResult.Data.MemberResults){return{FileName:"",FilePath:"",Result:x.System.Recipe.SaveRecipeResult.MethodCallFailed}}this.LastRecipeSavedToFile=this._recipeInfoDetails(U.ActionResult.Data.Details),this.HasChangesForProcess=U.ActionResult.Data.HasChangesForPlc,this.HasChangesForFile=U.ActionResult.Data.HasChangesForFile;const B={Result:U.Result,FileName:V,FilePath:U.ActionResult.Data.Details.Directory},F={FileAction:x.System.Recipe.FileAction.Saved,ClassName:this.Name,Machine:U.ActionResult.Data.Details.Machine,Name:V,Directory:U.ActionResult.Data.Details.Directory,User:U.ActionResult.Data.Details.User};return-1===this.FileNames.indexOf(V)&&this.FileNames.push(V),this.FilesChanged.trigger(F),Promise.resolve(B)}))}SaveToFileFromBufferAsync(V,R="",D=!1){return __awaiter(this,void 0,void 0,(function*(){if(x.isNullOrEmpty(V))return Promise.reject(new A.Exception.ParameterException("SaveToFileFromBufferAsync","File name parameter incorrect",{recipeFileName:V}));const N=yield this._manager.recipeClassSaveToFileFromBufferAsync(this.Name,V,R,D);if(N.SaveRecipeSuccess===x.System.Recipe.SaveRecipeSuccess.Succeeded||N.SaveRecipeSuccess===x.System.Recipe.SaveRecipeSuccess.SavedWithErrors){const A=this._manager.session.UserManagementManager.UserManagementService.CurrentUserName;this.LastRecipeSavedToFile=new x.Internal.System.Recipe.RecipeInfoDetails("",this.Name,this.Comment,new Date,A,""),-1===this.FileNames.indexOf(V)&&this.FileNames.push(V)}return Promise.resolve(N)}))}LoadFileToProcessAsync(R,D=!1){return __awaiter(this,void 0,void 0,(function*(){if(x.isNullOrEmpty(R))return Promise.reject(new A.Exception.ParameterException("LoadFileToProcessAsync","File name parameter incorrect",{fileName:R}));const N=yield this._manager.recipeClassLoadFileToProcessAsync(this.Name,R,D);if(null===N.ActionResult.Data.MemberResults)return{Class:this.Name,Result:x.System.Recipe.SendRecipeResult.MethodCallFailed,ErrorParams:[],FileName:R,FilePath:""};this.LastRecipeSentToProcess=this._recipeInfoDetails(N.ActionResult.Data.Details),this.HasChangesForProcess=N.ActionResult.Data.HasChangesForPlc,this.HasChangesForFile=N.ActionResult.Data.HasChangesForFile;const U={Class:this.Name,Result:V.mapActionSuccessToSendRecipeResult(N.ActionResult.Data.Error),ErrorParams:this._errorParams(N.ActionResult),FileName:R,FilePath:N.ActionResult.Data.Details.Directory},B=this._meberResults(N.ActionResult),F={Action:x.System.Recipe.RecipeChangedAction.LoadFileToProcess,ClassName:this.Name,Details:N.ActionResult.Data.Details,Results:B,Server:N.ActionResult.Data.Details.Machine,Source:x.System.Recipe.RecipeChangedSource.Application};return this.WrittenToProcess.trigger(F),Promise.resolve(U)}))}LoadFromFileToProcessAsync(V){return __awaiter(this,void 0,void 0,(function*(){if(x.isNullOrEmpty(V))return Promise.reject(new A.Exception.ParameterException("LoadFromFileToProcessAsync","File name parameter incorrect",{recipeFileName:V}));const R=yield this._manager.recipeClassLoadFromFileToProcessAsync(this.Name,V);return Promise.resolve(R)}))}LoadFileToBufferAsync(V,R=!1){return __awaiter(this,void 0,void 0,(function*(){if(x.isNullOrEmpty(V))return Promise.reject(new A.Exception.ParameterException("LoadFileToBufferAsync","File name parameter incorrect",{fileName:V}));if(this._manager.session.ServerInfo.WebGatewayProtocolVersion<19)return x.Internal.Domain.Logger.WarnLog.log("RecipeClass LoadFileToBufferAsync not available. Upgrade Server!"),Promise.reject();const D=yield this._manager.recipeClassLoadFileToBufferAsync(this.Name,V,R);this.LastRecipeLoadedToBuffer=this._recipeInfoDetails(D.ActionResult.Data.Details),this.HasChangesForProcess=D.ActionResult.Data.HasChangesForPlc,this.HasChangesForFile=D.ActionResult.Data.HasChangesForFile,this._refreshRecipeValuesAsync(D.ActionResult.Data.MemberResults),D.ActionResult.SubRecipesData.length>0&&D.ActionResult.SubRecipesData.forEach(x=>{this._refreshRecipeValuesAsync(x.MemberResults)});const N=new x.Internal.System.Recipe.RecipeBufferChangeEventArgs(x.System.Recipe.RecipeChangedAction.LoadFileToBuffer,x.System.Recipe.RecipeChangedSource.Application,D.ActionResult.Data);return this.BufferChanged.trigger(N),Promise.resolve(D)}))}LoadFromFileToBufferAsync(V,R=!1){return __awaiter(this,void 0,void 0,(function*(){if(x.isNullOrEmpty(V))return Promise.reject(new A.Exception.ParameterException("LoadFromFileToBufferAsync","File name parameter incorrect",{recipeFileName:V}));const D=yield this._manager.recipeClassLoadFromFileToBufferAsync(this.Name,V,R);return Promise.resolve(D)}))}GetRecipeClassDefinitionAsync(x){return __awaiter(this,void 0,void 0,(function*(){return this._manager.getGetRecipeClassDefinitionAsync(x)}))}SetValueAsync(V,R){return __awaiter(this,void 0,void 0,(function*(){if(x.isNullOrEmpty(V))return Promise.reject(new A.Exception.ParameterException("SetValueAsync","Variable name parameter incorrect",{variableName:V}));if(x.isNullOrEmpty(R))return Promise.reject(new A.Exception.ParameterException("SetValueAsync","Recipe value parameter incorrect",{recipeValue:R}));return(yield this.SetValuesAsync([V],[R]))[0]}))}SetValuesAsync(V,R){return __awaiter(this,void 0,void 0,(function*(){if(!x.isArray(V))return Promise.reject(new A.Exception.ParameterException("SetValuesAsync","Variable names parameter incorrect",{variableNames:V}));if(!x.isArray(R))return Promise.reject(new A.Exception.ParameterException("SetValuesAsync","Recipe values parameter incorrect",{recipeValues:R}));if(R.length!==V.length)return Promise.reject(new A.Exception.ParameterException("SetValuesAsync","The number of passed variable names must match the number of passed values",{variableNames:V,recipeValues:R}));const D=yield this._manager.recipeClassSetValuesAsync(this.Name,V,R),N=[];for(let x=0;x<D.length;x++){const A=D[x].RecipeActionResult;void 0!==A&&A.Data&&A.Data.MemberResults&&(this.HasChangesForFile=!0,this._refreshRecipeValuesAsync(A.Data.MemberResults),A.SubRecipesData.length>0&&A.SubRecipesData.forEach(x=>{this._refreshRecipeValuesAsync(x.MemberResults)})),N.push({Result:D[x].Result,RecipeMemberErrorCode:D[x].RecipeMemberErrorCode,RecipeActionResult:D[x].RecipeActionResult})}return N}))}SetDefaultValuesToBufferAsync(A,V=!0){return __awaiter(this,void 0,void 0,(function*(){if(this._manager.session.ServerInfo.WebGatewayProtocolVersion<19)return x.Internal.Domain.Logger.WarnLog.log("RecipeClass SetDefaultValuesToBufferAsync not available. Upgrade Server!"),Promise.reject();const R=yield this._manager.setDefaultValuesToBufferAsync(this.Name,A,V);this._refreshRecipeValuesAsync(R.ActionResult.Data.MemberResults),R.ActionResult.SubRecipesData.length>0&&R.ActionResult.SubRecipesData.forEach(x=>{this._refreshRecipeValuesAsync(x.MemberResults)}),this.LastRecipeLoadedToBuffer=this._recipeInfoDetails(R.ActionResult.Data.Details),this.HasChangesForFile=R.ActionResult.Data.HasChangesForFile,this.HasChangesForProcess=R.ActionResult.Data.HasChangesForPlc;return{Result:R.Result,Values:R.Values,SubRecipesData:R.SubRecipesData}}))}StartEditAsync(){return __awaiter(this,void 0,void 0,(function*(){this.IsEditing=!0;const A=this._manager.session.UserManagementManager.UserManagementService.CurrentUserName,V=yield this._allClasses();for(let x=0;x<V.length;x++){const A=V[x],R=yield(yield this._manager.recipeServiceGetRecipeClassAsync(A.Name)).RecipeClass,D=[];if(A.MemberDefinitions.forEach(x=>{D.push(x.VariableFullName)}),0===D.length)return Promise.resolve(!1);R._variableNames=D;const N=yield R.GetValuesAsync(D),U=[];for(let x=0;x<N.VariableNames.length;x++)U.push({Value:N.Values[x],VariableName:N.VariableNames[x],ErrorCode:N.ErrorCodes[x]});R._initVariableRecipeItem(),R._toggleMemberVariableEditMode(!0),this._refreshRecipeValuesAsync(U)}return this.LastRecipeLoadedToBuffer=new x.Internal.System.Recipe.RecipeInfoDetails("",this.Name,this.Comment,new Date,A,""),Promise.resolve(!0)}))}StopEditAsync(){return __awaiter(this,void 0,void 0,(function*(){this.IsEditing=!1;const x=yield this._allClasses();for(let A=0;A<x.length;A++){const V=x[A],R=yield(yield this._manager.recipeServiceGetRecipeClassAsync(V.Name)).RecipeClass,D=[];V.MemberDefinitions.forEach(x=>{D.push(x.VariableFullName)}),R._variableNames=D,R&&(R._setMemberVariablesProcessValue(),R._toggleMemberVariableEditMode(!1),R._initVariableRecipeItem(),R._variableNames=[])}return Promise.resolve(!0)}))}_recipeInfoDetails(A){return new x.Internal.System.Recipe.RecipeInfoDetails(A.Directory,A.Name,A.Description,A.Timestamp,A.User,A.Machine)}_errorParams(A){const V=[];for(let R=0;R<A.Data.MemberResults.length;R++){const D=A.Data.MemberResults[R].ErrorCode,N=new x.Internal.System.Recipe.RecipeErrorParam(A.Data.MemberResults[R].VariableName,x.Internal.System.Recipe.mapActionSuccessToRecipeErrorCode(D));V.push(N)}return V}_meberResults(A){const V=[];for(let R=0;R<A.Data.MemberResults.length;R++){const D=A.Data.MemberResults[R].ErrorCode,N=new x.Internal.System.Recipe.RecipeMemberResult(A.Data.MemberResults[R].VariableName,D);V.push(N)}return V}_initVariableRecipeItem(){for(let x=0;x<this._variableNames.length;x++){const A=this._manager.session.DataAccessManager._getVariableMasterFromStore(this._variableNames[x]);A&&(A.RecipeItem.RecipeClass=this,A.RecipeItem.OldValue=null,A.RecipeItem.Value=null,A.RecipeItem.Timestamp=new Date)}}_toggleMemberVariableEditMode(x){for(let A=0;A<this._variableNames.length;A++){const V=this._manager.session.DataAccessManager._getVariableMasterFromStore(this._variableNames[A]);if(V)for(let A=0;A<V.Subscribers.length;A++)V.Subscribers[A].CanRecipeEdit&&(V.Subscribers[A].IsRecipeEditing=x)}}_setMemberVariablesProcessValue(){for(let x=0;x<this._variableNames.length;x++){const A=this._manager.session.DataAccessManager._getVariableMasterFromStore(this._variableNames[x]);if(A)for(let x=0;x<A.Subscribers.length;x++){const V=A.Subscribers[x];V.CanRecipeEdit&&V.IsRecipeEditing&&(V.Value=A.item.Value)}}}_flatSubClasses(x,A){return __awaiter(this,void 0,void 0,(function*(){for(let V=0;V<x.length;V++){const R=yield this.GetRecipeClassDefinitionAsync(x[V].Name);A.push(R),Array.isArray(R.SubClasses)&&(A=yield this._flatSubClasses(R.SubClasses,A))}return Promise.resolve(A)}))}_allClasses(){return __awaiter(this,void 0,void 0,(function*(){const x=yield this.GetRecipeClassDefinitionAsync(this.Name),A=yield this._flatSubClasses(x.SubClasses,[]);return[x].concat(A)}))}_refreshRecipeValuesAsync(x){return __awaiter(this,void 0,void 0,(function*(){x.map(x=>{if(""===x.VariableName)return;let A=this._manager.session.DataAccessManager._getVariableMasterFromStore(x.VariableName);return A||(this._manager.session.DataAccessManager.VariableService.GetVariable(x.VariableName),A=this._manager.session.DataAccessManager._getVariableMasterFromStore(x.VariableName),A)}).forEach((A,V,R)=>{if(A){A.RecipeItem.OldValue=A.RecipeItem.Value,A.RecipeItem.Value=x[V].Value,A.RecipeItem.Timestamp=new Date;const R=A.Subscribers.find(x=>{if(x.Name===A.item.Name&&x.CanRecipeEdit&&x.IsRecipeEditing)return x});R&&(R.SetValueMember(A.RecipeItem.Value),R.RecipeItemChange.trigger(A.RecipeItem))}})}))}}V.RecipeClass=RecipeClass}(A.Recipe||(A.Recipe={}))}(A.System||(A.System={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){x.Recipe||(x.Recipe={})}(x.System||(x.System={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){"use strict";class RecipeFile extends A.BaseClass{constructor(V,R){super(),this.SavedByUser="",this.SavedByMachine="",this.Type.Namespace=A.CONST_VW_NS.SYSRECIPE,this.Type.TypeName="RecipeFile",this._manager=V,this.FileName=R,this.RecipeClassName="",this.Description="",this.TimeOfLastChange=new Date(0),this.WhoSavedRecipe="",this.SavedByUser="",this.SavedByMachine="",this._manager.session.Settings.System.Debug&&x.Internal.Domain.Logger.AppDomainLog.log(this.Type.TypeName,this,A.Diagnostics.Logging.AppDomainEventSource.Recipe,A.Diagnostics.Logging.AppDomainCategorySource.Constructor)}GetChangesAsync(x){return this._manager.recipeFileGetChangesAsync(this.RecipeClassName,this.FileName,x)}GetNotesAsync(x){return this._manager.recipeFileGetNotesAsync(this.RecipeClassName,this.FileName,x)}GetValuesAsync(A=!1){return this._manager.session.ServerInfo.WebGatewayProtocolVersion<19?(x.Internal.Domain.Logger.WarnLog.log("RecipeFile GetValuesAsync not available. Upgrade Server!"),Promise.reject()):this._manager.recipeFileGetValuesAsync(this.RecipeClassName,this.FileName,null,A)}}V.RecipeFile=RecipeFile}(A.Recipe||(A.Recipe={}))}(A.System||(A.System={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){"use strict";class RecipeService extends A.BaseClass{constructor(V){super(),this._manager=V,this.RecipeClassNames=[],this._manager.session.Settings.System.Debug&&x.Internal.Domain.Logger.AppDomainLog.log(this.Type.TypeName,this,A.Diagnostics.Logging.AppDomainEventSource.Recipe,A.Diagnostics.Logging.AppDomainCategorySource.Constructor)}DeleteFileAsync(V,R){return x.isNullOrEmpty(R)?Promise.reject(new A.Exception.ParameterException("DeleteFileAsync","File name parameter incorrect",{recipeFileName:R})):this._manager.recipeServiceDeleteFileAsync(V,R)}GetRecipeClassNamesAsync(){return this._manager.recipeServiceGetRecipeClassNamesAsync()}GetRecipeClassAsync(V){return x.isNullOrEmpty(V)?Promise.reject(new A.Exception.ParameterException("GetRecipeClassAsync"," Class name parameter incorrect",{recipeClassName:V})):this._manager.recipeServiceGetRecipeClassAsync(V)}GetRecipeFileNamesAsync(V){return x.isNullOrEmpty(V)&&new A.Exception.ParameterException("GetRecipeFileNamesAsync","Recipe name parameter incorrect",{recipeName:V}),this._manager.recipeServiceGetRecipeFileNamesAsync(V)}GetRecipeFileAsync(V,R){return x.isNullOrEmpty(V)?Promise.reject(new A.Exception.ParameterException("GetRecipeFileAsync","Class name parameter incorrect",{recipeClassName:V})):x.isNullOrEmpty(R)?Promise.reject(new A.Exception.ParameterException("GetRecipeFileAsync","File name parameter incorrect",{recipeFileName:R})):this._manager.recipeServiceGetRecipeFileAsync(V,R)}LoadRecipeFileValuesAsync(V,R,D){return x.isNullOrEmpty(V)?Promise.reject(new A.Exception.ParameterException("LoadRecipeFileValuesAsync","Class name parameter incorrect",{recipeClassName:V})):x.isNullOrEmpty(R)?Promise.reject(new A.Exception.ParameterException("LoadRecipeFileValuesAsync","File name parameter incorrect",{recipeFileName:R})):(D||(D=null),this._manager.recipeServiceLoadRecipeFileValuesAsync(V,R,D))}UnlockAllAsync(){return this._manager.session.ServerInfo.WebGatewayProtocolVersion<19?(x.Internal.Domain.Logger.WarnLog.log("RecipeService UnlockAllAsync not available. Upgrade Server!"),Promise.reject()):this._manager.recipeServiceUnlockAllAsync()}}V.RecipeService=RecipeService}(A.Recipe||(A.Recipe={}))}(A.System||(A.System={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(A){"use strict";A.RecipMemberErrorValue=class RecipMemberErrorValue{constructor(A="",V=x.System.Recipe.RecipeMemberErrorCode.Unknown){this.VariableName=A,this.ErrorCode=V}};A.RecipeErrorParam=class RecipeErrorParam{constructor(A="",V=x.System.Recipe.RecipeErrorCode.Unknown){this.Member=A,this.Error=V}};A.RecipeMemberResult=class RecipeMemberResult{constructor(A="",V=x.System.Recipe.RecipeErrorCode.Unknown){this.Member=A,this.ErrorCode=V}}}(A.Recipe||(A.Recipe={}))}(A.System||(A.System={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(A){"use strict";function buildRecipeInfoDetails(x){return new A.RecipeInfoDetails(x.Details.Directory,x.Class,x.Details.Description,new Date(x.Details.Timestamp),x.Details.User,x.Details.Machine)}function buildMemberResults(V,R){if(""!==V.VariableName&&R){const A=R.DataAccessManager._getVariableMasterFromStore(V.VariableName);let D=null;A&&A.item&&A.item.TypeCode&&(D=x.Internal.Domain.DataAccess.ConvertValueByTypeCode(V.Value,A.item.TypeCode)),null!==D&&(V.Value=D)}const D=x.Internal.EnumHelper.convertToNumber(x.System.Recipe.RecipeMemberErrorCode,V.ErrorCode);return new A.RecipeValue(V.Value,V.VariableName,D)}A.RecipeActionResult=class RecipeActionResult{constructor(x=new A.RecipeResultData,V=[]){this.Data=x,this.SubRecipesData=V}},A.buildRecipeResult=function buildRecipeResult(V,R){let D;D=V.Data&&V.Data.Details?buildRecipeInfoDetails(V.Data):new A.RecipeInfoDetails;const N=function buildMemberData(x,A){const V=[];if(x){const R=x.length;for(let D=0;D<R;D++){const R=buildMemberResults(x[D],A);V.push(R)}}return V}(V.Data.MemberResults,R),U=x.Internal.EnumHelper.convertToNumber(x.System.Recipe.RecipeActionSuccess,V.Data.Error),B=new A.RecipeResultData(V.Data.Class,V.Data.Recipe,D,V.Data.HasChangesForFile,V.Data.HasChangesForPlc,U,N),F=function buildSubRecipesData(V,R){const D=[];if(V&&V.length>0)for(let N=0;N<V.length;N++){let U;U=V[N].Details?buildRecipeInfoDetails(V[N]):new A.RecipeInfoDetails;const B=x.Internal.EnumHelper.convertToNumber(x.System.Recipe.RecipeActionSuccess,V[N].Error),F=[];if(V[N].MemberResults){const x=V[N].MemberResults.length;for(let A=0;A<x;A++){const x=buildMemberResults(V[N].MemberResults[A],R);F.push(x)}}const W=new x.Internal.System.Recipe.RecipeResultData(V[N].Class,V[N].Recipe,U,V[N].HasChangesForFile,V[N].HasChangesForPlc,B,F);D.push(W)}return D}(V.SubRecipesData,R);return new x.Internal.System.Recipe.RecipeActionResult(B,F)}}(A.Recipe||(A.Recipe={}))}(A.System||(A.System={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){!function(x){"use strict";x.RecipeClassDefinition=class RecipeClassDefinition{constructor(x="",A="",V=[],R=null,D="",N="",U="",B=!1,F=[],W="",H="",z=!1,G=!1,j=!1,q=!1,Q=!1,K=!1,J=""){this.Name=x,this.VariableName=A,this.SubClasses=V,this.InitialRecipeFileConfiguration=R,this.InitialRecipeDescription=D,this.InitialDirectory=N,this.InitialRecipeName=U,this.IncludeSubRecipesInStorage=B,this.MemberDefinitions=F,this.LocalizableText=W,this.Comment=H,this.IsServerSideRecipe=z,this.LoadOnStartup=G,this.SaveRecipeValueChanges=j,this.SetRecipeValuesToProcessOnChange=q,this.SaveRecipeValuesOnChange=Q,this.ReadValuesOnProcessChange=K,this.LoggingCategoryName=J}}}(x.Recipe||(x.Recipe={}))}(x.System||(x.System={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){!function(x){"use strict";x.RecipeBufferChangedEventArgs=class RecipeBufferChangedEventArgs{constructor(A=null,V=null,R=new x.RecipeResultData){this.Action=A,this.Source=V,this.Result=R}}}(x.Recipe||(x.Recipe={}))}(x.System||(x.System={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){"use strict";x.RecipeChange=class RecipeChange{constructor(x="",A="",V=new Date(0),R=null,D=null){this.UserName=x,this.VariableName=A,this.Timestamp=V,this.OldValue=R,this.NewValue=D}}}(x.Recipe||(x.Recipe={}))}(x.System||(x.System={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){!function(x){"use strict";x.RecipeChangeFilter=class RecipeChangeFilter{constructor(x="",A="",V=new Date,R=new Date(0)){this.UserName=x,this.MachineName=A,this.MaxTime=V,this.MinTime=R}}}(x.Recipe||(x.Recipe={}))}(x.System||(x.System={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(A){"use strict";A.RecipeBufferChangeEventArgs=class RecipeBufferChangeEventArgs{constructor(x=null,V=null,R=new A.RecipeResultData){this.Action=x,this.Source=V,this.Result=R}};A.WrittenToProcessEventArgs=class WrittenToProcessEventArgs{constructor(A=null,V=null,R=[new x.Internal.System.Recipe.RecipeMemberResult],D="",N=new x.Internal.System.Recipe.RecipeInfoDetails,U=""){this.Action=A,this.Source=V,this.Results=R,this.ClassName=D,this.Details=N,this.Server=U}};A.RecipeFilesChangedEventArgs=class RecipeFilesChangedEventArgs{constructor(x="",A="",V="",R="",D="",N=null){this.ClassName=x,this.Name=A,this.Directory=V,this.User=R,this.Machine=D,this.FileAction=N}}}(A.Recipe||(A.Recipe={}))}(A.System||(A.System={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){!function(x){"use strict";x.RecipeInfoDetails=class RecipeInfoDetails{constructor(x="",A="",V="",R=new Date(0),D="",N=""){this.Directory=x,this.Name=A,this.Description=V,this.Timestamp=R,this.User=D,this.Machine=N}}}(x.Recipe||(x.Recipe={}))}(x.System||(x.System={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){!function(x){"use strict";x.RecipeMemberDefinition=class RecipeMemberDefinition{constructor(x="",A=null,V=-1,R="",D=""){this.VariableFullName=x,this.DefaultValue=A,this.SortIndex=V,this.LocalizableText=R,this.Comment=D}}}(x.Recipe||(x.Recipe={}))}(x.System||(x.System={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){!function(x){"use strict";x.RecipeNote=class RecipeNote{constructor(x=-1,A="",V=new Date(0),R="",D=""){this.Id=x,this.Text=A,this.Timestamp=V,this.UserName=R,this.MachineName=D}}}(x.Recipe||(x.Recipe={}))}(x.System||(x.System={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){!function(x){"use strict";x.RecipeNotesFilter=class RecipeNotesFilter{constructor(x="",A="",V=new Date,R=new Date(0)){this.UserName=x,this.MachineName=A,this.MaxTime=V,this.MinTime=R}}}(x.Recipe||(x.Recipe={}))}(x.System||(x.System={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){!function(x){"use strict";x.RecipeNoteChange=class RecipeNoteChange{constructor(A="",V="",R=new x.RecipeNote,D=null){this.Class=A,this.Recipe=V,this.Note=R,this.Action=D}}}(x.Recipe||(x.Recipe={}))}(x.System||(x.System={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(A){"use strict";A.RecipeResultData=class RecipeResultData{constructor(V="",R="",D=new A.RecipeInfoDetails,N=!1,U=!1,B=x.System.Recipe.RecipeActionSuccess.None,F=[new A.RecipeValue]){this.Class=V,this.Recipe=R,this.Details=D,this.HasChangesForFile=N,this.HasChangesForPlc=U,this.Error=B,this.MemberResults=F}}}(A.Recipe||(A.Recipe={}))}(A.System||(A.System={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){!function(x){"use strict";x.RecipeSubClassDefinition=class RecipeSubClassDefinition{constructor(x="",A="",V=-1,R=""){this.Name=x,this.RecipeFileNameVariableFullName=A,this.SortIndex=V,this.Comment=R}}}(x.Recipe||(x.Recipe={}))}(x.System||(x.System={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(A){"use strict";A.RecipeValue=class RecipeValue{constructor(A=null,V="",R=x.System.Recipe.RecipeMemberErrorCode.Unknown){this.Value=A,this.VariableName=V,this.ErrorCode=R}}}(A.Recipe||(A.Recipe={}))}(A.System||(A.System={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){!function(x){"use strict";x.StorageHandlerConfiguration=class StorageHandlerConfiguration{constructor(x="",A="",V=-1,R=""){this.Directory=x,this.StorageName=A,this.SortIndex=V,this.Comment=R}}}(x.Recipe||(x.Recipe={}))}(x.System||(x.System={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(A){"use strict";A.mapActionSuccessToSetRecipeSuccess=function mapActionSuccessToSetRecipeSuccess(A){let V=x.System.Recipe.SetRecipeSuccess.UnknownError;switch(A){case x.System.Recipe.RecipeActionSuccess.Succeeded:V=x.System.Recipe.SetRecipeSuccess.Succeeded;break;case x.System.Recipe.RecipeActionSuccess.CommunicationFailure:V=x.System.Recipe.SetRecipeSuccess.CommunicationFailure;break;case x.System.Recipe.RecipeActionSuccess.NoRecipeClass:V=x.System.Recipe.SetRecipeSuccess.NoRecipeClass;break;case x.System.Recipe.RecipeActionSuccess.NoBufferedValues:V=x.System.Recipe.SetRecipeSuccess.NoBufferedValues;break;case x.System.Recipe.RecipeActionSuccess.UnknownError:V=x.System.Recipe.SetRecipeSuccess.UnknownError;break;case x.System.Recipe.RecipeActionSuccess.InvalidParameter:V=x.System.Recipe.SetRecipeSuccess.InvalidParameter;break;case x.System.Recipe.RecipeActionSuccess.Locked:V=x.System.Recipe.SetRecipeSuccess.Locked}return V===x.System.Recipe.SetRecipeSuccess.UnknownError&&A!==x.System.Recipe.RecipeActionSuccess.UnknownError&&(V=A),V},A.mapActionSuccessToGetRecipeSuccess=function mapActionSuccessToGetRecipeSuccess(A){let V=x.System.Recipe.GetRecipeSuccess.UnknownError;switch(A){case x.System.Recipe.RecipeActionSuccess.Succeeded:V=x.System.Recipe.GetRecipeSuccess.Succeeded;break;case x.System.Recipe.RecipeActionSuccess.CommunicationFailure:V=x.System.Recipe.GetRecipeSuccess.CommunicationFailure;break;case x.System.Recipe.RecipeActionSuccess.NoRecipeClass:V=x.System.Recipe.GetRecipeSuccess.NoRecipeClass;break;case x.System.Recipe.RecipeActionSuccess.UnknownError:V=x.System.Recipe.GetRecipeSuccess.UnknownError;break;case x.System.Recipe.RecipeActionSuccess.InvalidParameter:V=x.System.Recipe.GetRecipeSuccess.InvalidParameter;break;case x.System.Recipe.RecipeActionSuccess.Locked:V=x.System.Recipe.GetRecipeSuccess.Locked}return V===x.System.Recipe.GetRecipeSuccess.UnknownError&&A!==x.System.Recipe.RecipeActionSuccess.UnknownError&&(V=A),V},A.mapActionSuccessToLoadRecipeSuccess=function mapActionSuccessToLoadRecipeSuccess(A){let V=x.System.Recipe.LoadRecipeSuccess.UnknownError;switch(A){case x.System.Recipe.RecipeActionSuccess.Succeeded:V=x.System.Recipe.LoadRecipeSuccess.Succeeded;break;case x.System.Recipe.RecipeActionSuccess.FileNotFound:V=x.System.Recipe.LoadRecipeSuccess.FileNotFound;break;case x.System.Recipe.RecipeActionSuccess.FileCorrupted:V=x.System.Recipe.LoadRecipeSuccess.FileCorrupted;break;case x.System.Recipe.RecipeActionSuccess.HasMemberErrors:V=x.System.Recipe.LoadRecipeSuccess.LoadedWithErrors;break;case x.System.Recipe.RecipeActionSuccess.UnknownError:V=x.System.Recipe.LoadRecipeSuccess.UnknownError;break;case x.System.Recipe.RecipeActionSuccess.InvalidParameter:V=x.System.Recipe.LoadRecipeSuccess.InvalidParameter;break;case x.System.Recipe.RecipeActionSuccess.Locked:V=x.System.Recipe.LoadRecipeSuccess.Locked}return V===x.System.Recipe.LoadRecipeSuccess.UnknownError&&A!==x.System.Recipe.RecipeActionSuccess.UnknownError&&(V=A),V},A.mapActionSuccessToRecipeErrorCode=function mapActionSuccessToRecipeErrorCode(A){let V=x.System.Recipe.RecipeErrorCode.Unknown;switch(A){case x.System.Recipe.RecipeActionSuccess.Succeeded:V=x.System.Recipe.RecipeErrorCode.Succeeded;break;case x.System.Recipe.RecipeActionSuccess.FileNotFound:V=x.System.Recipe.RecipeErrorCode.FileNotFound;break;case x.System.Recipe.RecipeActionSuccess.FileCorrupted:V=x.System.Recipe.RecipeErrorCode.FileCorrupted;break;case x.System.Recipe.RecipeActionSuccess.UnknownError:V=x.System.Recipe.RecipeErrorCode.Unknown;break;case x.System.Recipe.RecipeActionSuccess.HasMemberErrors:V=x.System.Recipe.RecipeErrorCode.LoadedWithErrors}return V===x.System.Recipe.RecipeErrorCode.Unknown&&A!==x.System.Recipe.RecipeActionSuccess.UnknownError&&(V=A),V},A.mapActionSuccessToLoadRecipeResults=function mapActionSuccessToLoadRecipeResults(A){let V=x.System.Recipe.LoadRecipeResults.MethodCallFailed;switch(A){case x.System.Recipe.RecipeActionSuccess.Succeeded:V=x.System.Recipe.LoadRecipeResults.Succeeded;break;case x.System.Recipe.RecipeActionSuccess.FileNotFound:V=x.System.Recipe.LoadRecipeResults.FileNotFound;break;case x.System.Recipe.RecipeActionSuccess.FileCorrupted:V=x.System.Recipe.LoadRecipeResults.FileCorrupted;break;case x.System.Recipe.RecipeActionSuccess.NoRecipeClass:V=x.System.Recipe.LoadRecipeResults.ClassDoesNotExist;break;case x.System.Recipe.RecipeActionSuccess.HasMemberErrors:V=x.System.Recipe.LoadRecipeResults.LoadedWithErrors;break;case x.System.Recipe.RecipeActionSuccess.Locked:V=x.System.Recipe.LoadRecipeResults.RecipeLocked;break;case x.System.Recipe.RecipeActionSuccess.CommunicationFailure:V=x.System.Recipe.LoadRecipeResults.MethodCallFailed}return V===x.System.Recipe.LoadRecipeResults.MethodCallFailed&&A===x.System.Recipe.RecipeActionSuccess.UnknownError&&(V=A),V},A.mapActionSuccessToSaveRecipeSuccess=function mapActionSuccessToSaveRecipeSuccess(A){let V=x.System.Recipe.SaveRecipeSuccess.UnknownError;switch(A){case x.System.Recipe.RecipeActionSuccess.Succeeded:V=x.System.Recipe.SaveRecipeSuccess.Succeeded;break;case x.System.Recipe.RecipeActionSuccess.FileNotCreated:V=x.System.Recipe.SaveRecipeSuccess.FileNotCreated;break;case x.System.Recipe.RecipeActionSuccess.UnableToOverwrite:V=x.System.Recipe.SaveRecipeSuccess.UnableToOverwrite;break;case x.System.Recipe.RecipeActionSuccess.NoRecipeClass:V=x.System.Recipe.SaveRecipeSuccess.NoRecipeClass;break;case x.System.Recipe.RecipeActionSuccess.NoBufferedValues:V=x.System.Recipe.SaveRecipeSuccess.NoBufferedValues;break;case x.System.Recipe.RecipeActionSuccess.UnknownError:V=x.System.Recipe.SaveRecipeSuccess.UnknownError;break;case x.System.Recipe.RecipeActionSuccess.InvalidParameter:V=x.System.Recipe.SaveRecipeSuccess.InvalidParameter;break;case x.System.Recipe.RecipeActionSuccess.ExceededMaxFiles:V=x.System.Recipe.SaveRecipeSuccess.ExceededMaxFiles;break;case x.System.Recipe.RecipeActionSuccess.Locked:V=x.System.Recipe.SaveRecipeSuccess.Locked;break;case x.System.Recipe.RecipeActionSuccess.HasMemberErrors:V=x.System.Recipe.SaveRecipeSuccess.SavedWithErrors}return V===x.System.Recipe.SaveRecipeSuccess.UnknownError&&A!==x.System.Recipe.RecipeActionSuccess.UnknownError&&(V=A),V},A.mapActionSuccessToRecipeMemberErrorCode=function mapActionSuccessToRecipeMemberErrorCode(A){let V=x.System.Recipe.RecipeMemberErrorCode.Unknown;switch(A){case x.System.Recipe.RecipeActionSuccess.Succeeded:V=x.System.Recipe.RecipeMemberErrorCode.Succeeded;break;case x.System.Recipe.RecipeActionSuccess.FileNotFound:case x.System.Recipe.RecipeActionSuccess.FileCorrupted:case x.System.Recipe.RecipeActionSuccess.UnknownError:V=x.System.Recipe.RecipeMemberErrorCode.Unknown;break;case x.System.Recipe.RecipeActionSuccess.HasMemberErrors:V=x.System.Recipe.RecipeMemberErrorCode.SubRecipeHasError}return V===x.System.Recipe.RecipeMemberErrorCode.Unknown&&A!==x.System.Recipe.RecipeActionSuccess.UnknownError&&(V=A),V},A.mapActionSuccessToSetValuesResult=function mapActionSuccessToSetValuesResult(A){let V=x.System.Recipe.SetValuesResult.MethodCallFailed;switch(A){case x.System.Recipe.RecipeActionSuccess.Succeeded:V=x.System.Recipe.SetValuesResult.Succeeded;break;case x.System.Recipe.RecipeActionSuccess.Locked:V=x.System.Recipe.SetValuesResult.RecipeLocked;break;case x.System.Recipe.RecipeActionSuccess.NoRecipeClass:V=x.System.Recipe.SetValuesResult.ClassDoesNotExist;break;case x.System.Recipe.RecipeActionSuccess.HasMemberErrors:V=x.System.Recipe.SetValuesResult.SetValuesWithErrors}return V===x.System.Recipe.SetValuesResult.MethodCallFailed&&A!==x.System.Recipe.RecipeActionSuccess.UnknownError&&(V=A),V},A.mapActionSuccessToSendRecipeResult=function mapActionSuccessToSendRecipeResult(A){let V=x.System.Recipe.SendRecipeResult.MethodCallFailed;switch(A){case x.System.Recipe.RecipeActionSuccess.Succeeded:V=x.System.Recipe.SendRecipeResult.Succeeded;break;case x.System.Recipe.RecipeActionSuccess.FileNotFound:V=x.System.Recipe.SendRecipeResult.FileNotFound;break;case x.System.Recipe.RecipeActionSuccess.FileCorrupted:V=x.System.Recipe.SendRecipeResult.FileCorrupted;break;case x.System.Recipe.RecipeActionSuccess.Locked:V=x.System.Recipe.SendRecipeResult.RecipeLocked;break;case x.System.Recipe.RecipeActionSuccess.NoRecipeClass:V=x.System.Recipe.SendRecipeResult.ClassDoesNotExist;break;case x.System.Recipe.RecipeActionSuccess.HasMemberErrors:V=x.System.Recipe.SendRecipeResult.SentWithErrors;break;case x.System.Recipe.RecipeActionSuccess.UnknownError:V=x.System.Recipe.SendRecipeResult.MethodCallFailed}return V===x.System.Recipe.SendRecipeResult.MethodCallFailed&&A!==x.System.Recipe.RecipeActionSuccess.UnknownError&&(V=A),V},A.mapActionSuccessToSaveRecipeResult=function mapActionSuccessToSaveRecipeResult(A){let V=x.System.Recipe.SaveRecipeResult.MethodCallFailed;switch(A){case x.System.Recipe.RecipeActionSuccess.Succeeded:V=x.System.Recipe.SaveRecipeResult.Succeeded;break;case x.System.Recipe.RecipeActionSuccess.FileNotCreated:V=x.System.Recipe.SaveRecipeResult.FileNotCreated;break;case x.System.Recipe.RecipeActionSuccess.Locked:V=x.System.Recipe.SaveRecipeResult.RecipeLocked;break;case x.System.Recipe.RecipeActionSuccess.NoRecipeClass:V=x.System.Recipe.SaveRecipeResult.ClassDoesNotExist;break;case x.System.Recipe.RecipeActionSuccess.UnableToOverwrite:V=x.System.Recipe.SaveRecipeResult.UnableToOverwrite;break;case x.System.Recipe.RecipeActionSuccess.UnknownError:V=x.System.Recipe.SaveRecipeResult.InternalError}return V===x.System.Recipe.SaveRecipeResult.MethodCallFailed&&A!==x.System.Recipe.RecipeActionSuccess.UnknownError&&(V=A),V}}(A.Recipe||(A.Recipe={}))}(A.System||(A.System={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(A){"use strict";A.LoadFileToBufferResult=class LoadFileToBufferResult{constructor(A="",V=[],R="",D="",N=x.System.Recipe.LoadRecipeResults.Succeeded,U=[]){this.Class=A,this.ErrorParams=V,this.FileName=R,this.FilePath=D,this.Result=N,this.SubRecipesResults=U}}}(A.Recipe||(A.Recipe={}))}(A.System||(A.System={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){!function(x){"use strict";x.SubRecipe=class SubRecipe{constructor(x="",A="",V=-1,R=""){this.Name=x,this.FileNameVariableName=A,this.SortIndex=V,this.Comment=R}}}(x.Recipe||(x.Recipe={}))}(x.System||(x.System={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){x.ServerObjects||(x.ServerObjects={})}(x.System||(x.System={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){"use strict";V.ServerObject=class ServerObject{constructor(V,R){this._manager=V,this.Namespace=R,this.isAttached=!1,this.id=x.Guid(),this.OnConnectToServerObject=new A.Events.TypedEvent,this.OnGetServerObjectPropertyValue=new A.Events.TypedEvent,this.OnSetServerObjectPropertyValue=new A.Events.TypedEvent,this.OnAddServerObjectEventHandler=new A.Events.TypedEvent,this.OnRemoveServerObjectEventHandler=new A.Events.TypedEvent,this.OnServerObjectEventRaised=new A.Events.TypedEvent,this.OnInvokeServerObjectMethod=new A.Events.TypedEvent,this._manager.addServerObject(this),this._manager.session.Settings.System.Debug&&x.Internal.Domain.Logger.AppDomainLog.log("ServerObject ctor",this,A.Diagnostics.Logging.AppDomainEventSource.ServerObjects,A.Diagnostics.Logging.AppDomainCategorySource.Constructor)}ConnectToServerObject(){this._manager.connectToServerObject(this,this.Namespace)}GetServerObjectPropertyValue(x){this._manager.getServerObjectPropertyValue(this,x)}SetServerObjectPropertyValue(x,A){this._manager.setServerObjectPropertyValue(this,x,A)}AddServerObjectEventHandler(x){this._manager.addServerObjectEventHandler(this,x)}RemoveServerObjectEventHandler(x){this._manager.removeServerObjectEventHandler(this,x)}InvokeServerObjectMethod(V,R){if(x.isNullOrUndefined(R))R=[];else if(R&&!x.isArray(R))try{throw new A.Exception.ExceptionBase("MethodParameterException","InvokeServerObjectMethod requieres a Parameters Array: "+JSON.stringify(R))}catch(A){x.Internal.Domain.Logger.ErrorLog.log("MethodParameterException","InvokeServerObjectMethod requieres a Parameters Array: "+JSON.stringify(R))}this._manager.invokeServerObjectMethod(this,V,R)}Dispose(){this._manager.removeServerObject(this),x.Internal.Domain.Dispose(this)}}}(A.ServerObjects||(A.ServerObjects={}))}(A.System||(A.System={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){"use strict";class Archive extends A.BaseClass{constructor(V,R){super(),this.Type.Namespace=A.CONST_VW_NS.SYSTREND,this.Type.TypeName="Archive",this.Name=R,this._manager=V,this.TrendNames=[],this.LocalizableText="",this.TrendDataRecorded=new A.Events.TypedEvent,this.TrendsDataRecorded=new A.Events.TypedEvent,this.GetTrendDataCompleted=new A.Events.TypedEvent,this.GetTrendsDataCompleted=new A.Events.TypedEvent,this._manager.session.Settings.System.Debug&&x.Internal.Domain.Logger.AppDomainLog.log(this.Type.TypeName,this,A.Diagnostics.Logging.AppDomainEventSource.Trend,A.Diagnostics.Logging.AppDomainCategorySource.Constructor)}GetTrend(V){x.isNullOrEmpty(V)&&new A.Exception.ParameterException("GetTrend","trend name parameter incorrect",{trendName:V});if(-1!==this.TrendNames.indexOf(V)){const x=this._manager.getArchiveFromStore(this.Name);if(x){if(-1!==x.TrendNames.indexOf(V))return this._manager.getTrendFromStore(this.Name+"."+V)}}return null}GetTrendData(V,R,D,N,U){return x.isNullOrEmpty(V)&&new A.Exception.ParameterException("GetTrendData","requestID parameter incorrect",{requestID:V}),x.isDate(R)||new A.Exception.ParameterException("GetTrendData","min time parameter incorrect",{minTime:R}),x.isDate(D)||new A.Exception.ParameterException("GetTrendData","max time parameter incorrect",{maxTime:D}),x.isString(N)||new A.Exception.ParameterException("GetTrendData","trend name parameter incorrect",{trendName:N}),x.isNumber(U)||new A.Exception.ParameterException("GetTrendData","max samples parameter incorrect",{maxSamples:U}),this._manager.getTrendDataOld(V,this.Name,R,D,[N],U)}GetTrendsData(V,R,D,N,U){return x.isNullOrEmpty(V)&&new A.Exception.ParameterException("GetTrendData","requestID parameter incorrect",{requestID:V}),x.isDate(R)||new A.Exception.ParameterException("GetTrendData","min time parameter incorrect",{minTime:R}),x.isDate(D)||new A.Exception.ParameterException("GetTrendData","max time parameter incorrect",{maxTime:D}),x.isArray(N)||new A.Exception.ParameterException("GetTrendData","trend name parameter incorrect",{trendNames:N}),x.isNumber(U)||new A.Exception.ParameterException("GetTrendData","max samples parameter incorrect",{maxSamples:U}),this._manager.getTrendDataOld(V,this.Name,R,D,N,U)}GetTrendDataAsync(V,R,D,N,U){return x.isNullOrEmpty(V)&&new A.Exception.ParameterException("GetTrendDataAsync","requestID parameter incorrect",{requestID:V}),x.isDate(R)||new A.Exception.ParameterException("GetTrendDataAsync","min time parameter incorrect",{minTime:R}),x.isDate(D)||new A.Exception.ParameterException("GetTrendDataAsync","max time parameter incorrect",{maxTime:D}),x.isArray(N)||new A.Exception.ParameterException("GetTrendDataAsync","trend name parameter incorrect",{trendNames:N}),x.isNumber(U)||new A.Exception.ParameterException("GetTrendDataAsync","max samples parameter incorrect",{maxSamples:U}),this._manager.getTrendData(V,this.Name,R,D,N,U)}SetTrendOnlineState(x,A){return this._manager.setTrendOnlineState(x,A)}InitializeTrends(x){return this._manager.initializeTrends(this,x)}}V.Archive=Archive}(A.Trend||(A.Trend={}))}(A.System||(A.System={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){"use strict";class DataSample extends A.BaseClass{constructor(){super(),this.Type.Namespace=A.CONST_VW_NS.SYSTREND,this.Type.TypeName="DataSample",this.State=x.System.Trend.SampleState.Standard,this.Time=new Date,this.XValue=0,this.YValue=0}toJSON(){return{Time:this.Time,Value:this.YValue}}}V.DataSample=DataSample}(A.Trend||(A.Trend={}))}(A.System||(A.System={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){!function(A){"use strict";class TrendIng extends x.BaseClass{constructor(A){super(),this.Type.Namespace=x.CONST_VW_NS.SYSTREND,this.Type.TypeName="Trend",this.ArchiveName="",this.Name=A||"",this.Text="",this.FullName="",this.LocalizableText="",this.TrendDataRecorded=new x.Events.TypedEvent}}A.TrendIng=TrendIng}(x.Trend||(x.Trend={}))}(x.System||(x.System={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){"use strict";class TrendService extends A.BaseClass{constructor(V){super(),this.Type.Namespace=A.CONST_VW_NS.SYSTREND,this.Type.TypeName="TrendService",this.ArchiveNames=[],this._manager=V,this._manager.session.Settings.System.Debug&&x.Internal.Domain.Logger.AppDomainLog.log(this.Type.TypeName,this,A.Diagnostics.Logging.AppDomainEventSource.Trend,A.Diagnostics.Logging.AppDomainCategorySource.Constructor)}GetTrend(V,R){x.isNullOrEmpty(V)&&new A.Exception.ParameterException("GetTrend","archive name parameter incorrect",{archiveName:V}),x.isNullOrEmpty(R)&&new A.Exception.ParameterException("GetTrend","trend name parameter incorrect",{trendName:R});if(-1!==this.ArchiveNames.indexOf(V)){const x=this._manager.getArchiveFromStore(V);if(x){if(-1!==x.TrendNames.indexOf(R))return this._manager.getTrendFromStore(V+"."+R)}}x.isNullOrEmpty(R)&&new A.Exception.ParameterException("GetTrend",`Trend name('${R}') not found in archive:'${V}'.`,{trendName:R})}GetArchive(V){x.isNullOrEmpty(V)&&new A.Exception.ParameterException("GetArchive","archive name parameter incorrect",{archiveName:V});if(-1!==this.ArchiveNames.indexOf(V)){const x=this._manager.getArchiveFromStore(V);if(x)return x}else x.isNullOrEmpty(V)&&new A.Exception.ParameterException("GetArchive",`Archive:'${V} not found.'`,{archiveName:V})}GetTrendNames(V){x.isNullOrEmpty(V)&&new A.Exception.ParameterException("GetTrendNames","archive name parameter incorrect",{archiveName:V});if(-1!==this.ArchiveNames.indexOf(V)){const x=this._manager.getArchiveFromStore(V);if(x)return x.TrendNames}}}V.TrendService=TrendService}(A.Trend||(A.Trend={}))}(A.System||(A.System={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){"use strict";class ArchiveTrendProvider extends A.BaseClass{constructor(V,R){super(),this.TrendsInitialzed=!1,this.ArchiveAttached=!1,this.OnlineState=x.System.Trend.SetTrendOnlineState.Off,this.Type.Namespace=A.CONST_VW_NS.SYSTREND,this.Type.TypeName="Archive",this.Name=R,this._manager=V,this.TrendNames=[],this.LocalizableText="",this.TrendDataRecorded=new A.Events.TypedEvent,this.TrendsDataRecorded=new A.Events.TypedEvent,this.GetTrendDataCompleted=new A.Events.TypedEvent,this.GetTrendsDataCompleted=new A.Events.TypedEvent,this._manager.session.Settings.System.Debug&&x.Internal.Domain.Logger.AppDomainLog.log(this.Type.TypeName,this,A.Diagnostics.Logging.AppDomainEventSource.Trend,A.Diagnostics.Logging.AppDomainCategorySource.Constructor)}GetTrend(V){x.isNullOrEmpty(V)&&new A.Exception.ParameterException("GetTrend","trend name parameter incorrect",{trendName:V});if(-1!==this.TrendNames.indexOf(V)){const x=this._manager.getArchiveFromStore(this.Name);if(x){if(-1!==x.TrendNames.indexOf(V))return this._manager.getTrendFromStore(this.Name+"."+V)}}return null}GetTrendData(V,R,D,N,U){return x.isNullOrEmpty(V)&&new A.Exception.ParameterException("GetTrendData","requestID parameter incorrect",{requestID:V}),x.isDate(R)&&new A.Exception.ParameterException("GetTrendData","min time parameter incorrect",{minTime:R}),x.isDate(D)&&new A.Exception.ParameterException("GetTrendData","max time parameter incorrect",{maxTime:D}),x.isString(N)&&new A.Exception.ParameterException("GetTrendData","trend name parameter incorrect",{trendName:N}),x.isNumber(U)&&new A.Exception.ParameterException("GetTrendData","max samples parameter incorrect",{maxSamples:U}),this._manager.getTrendDataOld(V,this.Name,R,D,[N],U)}GetTrendsData(V,R,D,N,U){return x.isNullOrEmpty(V)&&new A.Exception.ParameterException("GetTrendData","requestID parameter incorrect",{requestID:V}),x.isDate(R)&&new A.Exception.ParameterException("GetTrendData","min time parameter incorrect",{minTime:R}),x.isDate(D)&&new A.Exception.ParameterException("GetTrendData","max time parameter incorrect",{maxTime:D}),x.isArray(N)&&new A.Exception.ParameterException("GetTrendData","trend name parameter incorrect",{trendNames:N}),x.isNumber(U)&&new A.Exception.ParameterException("GetTrendData","max samples parameter incorrect",{maxSamples:U}),this._manager.getTrendDataOld(V,this.Name,R,D,N,U)}GetTrendDataAsync(V,R,D,N,U){return x.isNullOrEmpty(V)&&new A.Exception.ParameterException("GetTrendDataAsync","requestID parameter incorrect",{requestID:V}),x.isDate(R)||new A.Exception.ParameterException("GetTrendDataAsync","min time parameter incorrect",{minTime:R}),x.isDate(D)||new A.Exception.ParameterException("GetTrendDataAsync","max time parameter incorrect",{maxTime:D}),x.isArray(N)||new A.Exception.ParameterException("GetTrendDataAsync","trend name parameter incorrect",{trendNames:N}),x.isNumber(U)||new A.Exception.ParameterException("GetTrendDataAsync","max samples parameter incorrect",{maxSamples:U}),this._manager.getTrendData(V,this.Name,R,D,N,U)}GetTrendData2(V,R,D,N,U){return x.isNullOrEmpty(V)&&new A.Exception.ParameterException("GetTrendData2","requestID parameter incorrect",{requestID:V}),x.isDate(R)||new A.Exception.ParameterException("GetTrendData2","min time parameter incorrect",{minTime:R}),x.isDate(D)||new A.Exception.ParameterException("GetTrendData2","max time parameter incorrect",{maxTime:D}),x.isArray(N)||new A.Exception.ParameterException("GetTrendData2","trend name parameter incorrect",{trendNames:N}),x.isNumber(U)||new A.Exception.ParameterException("GetTrendData2","max samples parameter incorrect",{maxSamples:U}),this._manager.getTrendData2(V,this.Name,R,D,N,U)}SetTrendOnlineState(A,V){return this.OnlineState=V,V===x.System.Trend.SetTrendOnlineState.Release&&(this.ArchiveAttached=!1,this.TrendsInitialzed=!1),this._manager.setTrendOnlineState(A,V)}InitializeTrends(x){return this.TrendsInitialzed=!0,this._manager.initializeTrends2(this,x)}}V.ArchiveTrendProvider=ArchiveTrendProvider}(A.Trend||(A.Trend={}))}(A.System||(A.System={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){"use strict";class Authorization extends A.BaseClass{constructor(V,R){super(),this.authorizationChangedHandler=x=>{this._authorizationChanged(x)},this._right="",this.Type.Namespace=A.CONST_VW_NS.SYSUSERMANAGEMENT,this.Type.TypeName="Authorization",this._userManager=V,this.Changed=new A.Events.TypedEvent,this._isAuthorized=!1,this.Right=R||"",this._userManager.AuthorizationHasChanged.add(this.authorizationChangedHandler),V.session.Settings.System.Debug&&x.Internal.Domain.Logger.AppDomainLog.log(this.Type.TypeName,this,A.Diagnostics.Logging.AppDomainEventSource.UserManagement,A.Diagnostics.Logging.AppDomainCategorySource.Constructor)}get IsAuthorized(){return this._isAuthorized}get Right(){return this._right}set Right(x){if(this._right===x)return;const A=this._isAuthorized;if(this._right=x,null===this._right)this._isAuthorized=!0;else{this._isAuthorized=!1;const x=this._userManager.UserManagementService,A=x.RightNames.length;for(let V=0;V<A;V++)x.RightNames[V]===this.Right&&(this._isAuthorized=!0)}A!==this._isAuthorized&&this.Changed.trigger(this._isAuthorized),this.Changed.trigger(this._isAuthorized)}_authorizationChanged(x){if(this._isAuthorized=!1,x.Rights)for(let A=0;A<x.Rights.length;A++)x.Rights[A].Name===this.Right&&(this._isAuthorized=!0);this.Changed.trigger(this._isAuthorized)}Dispose(){if(this._userManager.AuthorizationHasChanged.remove(this.authorizationChangedHandler),this.isDisposable){this.isDisposable=!1;for(const x in this)Object.prototype.hasOwnProperty.call(this,x)&&delete this[x]}}}V.Authorization=Authorization}(A.UserManagement||(A.UserManagement={}))}(A.System||(A.System={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){"use strict";class Right extends A.BaseClass{constructor(x){super(),this.Type.Namespace=A.CONST_VW_NS.SYSUSERMANAGEMENT,this.Type.TypeName="Right",this._manager=x,this.Comment="",this.LocalizableText="",this.Name="",this.Text="",this.UserGroupNames=[],this.Active=!1}ChangeAsync(x){return x instanceof V.RightDefinition?this._manager.rightChangeRightAsync(x):Promise.reject(new A.Exception.ParameterException("ChangeRightAsync","RightDefinition incorrect",x))}GetDefinitionAsync(){return this._manager.rightGetRightDefinitionAsync(this.Name)}GetUserGroupAsync(V){return x.isString(V)?this._manager.userGroupGetUserGroupAsync(V):Promise.reject(new A.Exception.ParameterException("GetUserGroupAsync","Group Name incorrect",V))}}V.Right=Right}(A.UserManagement||(A.UserManagement={}))}(A.System||(A.System={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){"use strict";class User extends A.BaseClass{constructor(V){super(),this.Type.Namespace=A.CONST_VW_NS.SYSUSERMANAGEMENT,this.Type.TypeName="User",this._manager=V,this.Code=null,this.Comment="",this.DeactivationTime=null,this.FullName="",this.GroupName="",this.Name="",this.RemainingLogOns=-1,this.RenewPassword=-1,this.RightNames=[],this.UserState=x.System.UserManagement.UserState.Unknown,this._manager.session.Settings.System.Debug&&x.Internal.Domain.Logger.AppDomainLog.log(this.Type.TypeName,this,A.Diagnostics.Logging.AppDomainEventSource.UserManagement,A.Diagnostics.Logging.AppDomainCategorySource.Constructor)}toJson(){try{return{Code:this.Code,Comment:this.Comment,FullName:this.FullName,GroupName:this.GroupName,Name:this.Name,RemainingLogOns:this.RemainingLogOns,RenewPassword:this.RenewPassword,RightNames:this.RightNames,UserState:this.UserState}}catch(A){x.Internal.Domain.Logger.ErrorLog.log("User.toJson() Exception")}}AddAsync(x){return x instanceof V.UserDefinition?this._manager.userAddUserAsync(x):Promise.reject(new A.Exception.ParameterException("AddUserAsync","UserDefinition incorrect",x))}ChangeAsync(x){return this._manager.userChangeUserAsync(x)}MoveToGroupAsync(V){return x.isString(V)?this._manager.userMoveUserToGroupAsync(this.Name,V):Promise.reject(new A.Exception.ParameterException("MoveToGroupAsync","USerGroupDefinition incorrect",V))}ChangePasswordAsync(V,R){return x.isString(V)?x.isString(R)?this._manager.userChangePasswordAsync(this.Name,V,R):Promise.reject(new A.Exception.ParameterException("ChangeUserPasswordAsync","new password incorrect",R)):Promise.reject(new A.Exception.ParameterException("ChangeUserPasswordAsync","old password incorrect",V))}GetDefinitionAsync(){return this._manager.userGetUserDefinitionAsync(this.Name)}GetGroupAsync(V){return x.isString(V)?this._manager.userGetUserGroupAsync(V):Promise.reject(new A.Exception.ParameterException("GetUserGroupAsync","Group Name incorrect",V))}GetRightAsync(V){return x.isString(V)?this._manager.userGetRightAsync(V):Promise.reject(new A.Exception.ParameterException("GetRightAsync","Right Name incorrect",V))}}V.User=User}(A.UserManagement||(A.UserManagement={}))}(A.System||(A.System={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){"use strict";class UserGroup extends A.BaseClass{constructor(V){super(),this.Type.Namespace=A.CONST_VW_NS.SYSUSERMANAGEMENT,this.Type.TypeName="UserGroup",this._manager=V,this.AutoLogOffTime=-1,this.Comment="",this.Level=-1,this.MaxFailedLogOns=-1,this.Name="",this.RenewPasswordInterval=-1,this.RightNames=[],this.Text="",this.UserNames=[],this.UsersRemovable=!1,this.LocalizableText="",this._manager.session.Settings.System.Debug&&x.Internal.Domain.Logger.AppDomainLog.log(this.Type.TypeName,this,A.Diagnostics.Logging.AppDomainEventSource.UserManagement,A.Diagnostics.Logging.AppDomainCategorySource.Constructor)}GetDefinitionAsync(){return this._manager.userGroupGetUserGroupDefinition(this.Name)}GetRightAsync(V){return x.isString(V)?this._manager.userGroupGetRightAsync(V):Promise.reject(new A.Exception.ParameterException("GetRightAsync","Right Name incorrect",V))}GetUserAsync(V){return x.isString(V)?this._manager.userGroupGetUserAsync(V):Promise.reject(new A.Exception.ParameterException("GetUserAsync","User Name incorrect",V))}}V.UserGroup=UserGroup}(A.UserManagement||(A.UserManagement={}))}(A.System||(A.System={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){!function(x){"use strict";x.UserCompliance=class UserCompliance{constructor(){}}}(x.UserManagement||(x.UserManagement={}))}(x.System||(x.System={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){x.UserManagement||(x.UserManagement={})}(x.System||(x.System={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){!function(x){"use strict";let A;!function(x){x[x.MethodCallFailed=0]="MethodCallFailed",x[x.Succeeded=1]="Succeeded",x[x.UnknownUser=2]="UnknownUser",x[x.ViolatedPolicies=3]="ViolatedPolicies",x[x.OldPasswordInvalid=4]="OldPasswordInvalid",x[x.CantAccessDomainInfo=5]="CantAccessDomainInfo",x[x.LockedPassword=6]="LockedPassword"}(A=x.VerifyPasswordResult||(x.VerifyPasswordResult={})),Object.freeze(A)}(x.UserManagement||(x.UserManagement={}))}(x.System||(x.System={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){"use strict";class UserManagementService extends A.BaseClass{constructor(V){super(),this.Type.Namespace=A.CONST_VW_NS.SYSUSERMANAGEMENT,this.Type.TypeName="UserManagementService",this._manager=V,this.AuthorizationSystem=x.System.UserManagement.AuthorizationSystemType.Rights,this.CurrentUser=null,this.CurrentUserName="",this.NewMachineCode="",this.NewPassword="",this.NewUserName="",this.RightNames=[],this.SecondsToAutoLogOff=0,this.UserGroupNames=[],this.UserNames=[],this.UserLoggedOn=new A.Events.TypedEvent,this.UserLoggedOff=new A.Events.TypedEvent,this.RightsModified=new A.Events.TypedEvent,this.GroupsModified=new A.Events.TypedEvent,this.UsersModified=new A.Events.TypedEvent,this._manager.session.Settings.System.Debug&&x.Internal.Domain.Logger.AppDomainLog.log(this.Type.TypeName,this,A.Diagnostics.Logging.AppDomainEventSource.UserManagement,A.Diagnostics.Logging.AppDomainCategorySource.Constructor)}AddRightAsync(x){return x instanceof V.RightDefinition?this._manager.addRightAsync(x):Promise.reject(new A.Exception.ParameterException("AddRightAsync","RightDefinition incorrect",x))}AddRightsAsync(x){for(let R=0;R<x.length;R++)if(!(x[R]instanceof V.RightDefinition))return Promise.reject(new A.Exception.ParameterException("AddRightsAsync","RightDefinition incorrect",x));return this._manager.addRightsAsync(x)}AddRightToGroupAsync(V,R){return x.isString(V)?x.isString(R)?this._manager.addRightToGroupAsync(V,R):Promise.reject(new A.Exception.ParameterException("AddRightToGroupAsync","Right Name incorrect",R)):Promise.reject(new A.Exception.ParameterException("AddRightToGroupAsync","UserGroup Name incorrect",V))}AddUserAsync(x){return x instanceof V.UserDefinition?this._manager.addUserAsync(x):Promise.reject(new A.Exception.ParameterException("AddUserAsync","UserDefinition incorrect",x))}AddUserGroupAsync(x){return x instanceof V.UserGroupDefinition?this._manager.addUserGroupAsync(x):Promise.reject(new A.Exception.ParameterException("AddUserGroupAsync","UserGroup incorrect",x))}AddUserGroupsAsync(x){for(let R=0;R<x.length;R++)if(!(x[R]instanceof V.UserGroupDefinition))return Promise.reject(new A.Exception.ParameterException("AddUserGroupsAsync","UserGroup incorrect",x));return this._manager.addUserGroupsAsync(x)}ChangeRightAsync(x){return x instanceof V.RightDefinition?this._manager.changeRightAsync(x):Promise.reject(new A.Exception.ParameterException("ChangeRightAsync","RightDefinition incorrect",x))}ChangeRightsAsync(x){for(let R=0;R<x.length;R++)if(!(x[R]instanceof V.RightDefinition))return Promise.reject(new A.Exception.ParameterException("ChangeRightsAsync","RightDefinition incorrect",x));return this._manager.changeRightsAsync(x)}ChangeUserAsync(x){return this._manager.changeUserAsync(x)}ChangeUserGroupAsync(x){return x instanceof V.UserGroupDefinition?this._manager.changeUserGroupAsync(x):Promise.reject(new A.Exception.ParameterException("ChangeUserGroupAsync","USerGroupDefinition incorrect",x))}ChangeUserGroupsAsync(x){for(let R=0;R<x.length;R++)if(!(x[R]instanceof V.UserGroupDefinition))return Promise.reject(new A.Exception.ParameterException("ChangeUserGroupsAsync","USerGroupDefinition incorrect",x));return this._manager.changeUserGroupsAsync(x)}ChangeUserPasswordAsync(V,R,D){return x.isString(V)?x.isString(R)?x.isString(D)?this._manager.changePasswordAsync(V,R,D):Promise.reject(new A.Exception.ParameterException("ChangeUserPasswordAsync","new password incorrect",D)):Promise.reject(new A.Exception.ParameterException("ChangeUserPasswordAsync","old password incorrect",R)):Promise.reject(new A.Exception.ParameterException("ChangeUserPasswordAsync","User name incorrect",V))}CopyUserDefinitionAsync(V,R,D,N,U,B){return x.isString(V)?x.isString(R)?x.isString(D)?x.isString(N)?this._manager.copyUserDefinitionAsync(V,R,D,N,U,B):Promise.reject(new A.Exception.ParameterException("CopyUserDefinitionAsync","password incorrect",N)):Promise.reject(new A.Exception.ParameterException("CopyUserDefinitionAsync","full name incorrect",D)):Promise.reject(new A.Exception.ParameterException("CopyUserDefinitionAsync","new user name incorrect",R)):Promise.reject(new A.Exception.ParameterException("CopyUserDefinitionAsync","user name incorrect",V))}CopyUserGroupDefinitionAsync(V,R){return x.isString(V)?x.isString(R)?this._manager.copyUserGroupDefinitionAsync(V,R):Promise.reject(new A.Exception.ParameterException("CopyUserGroupDefinitionAsync","exisiting user goup name incorrect",R)):Promise.reject(new A.Exception.ParameterException("CopyUserGroupDefinitionAsync","new user goup name incorrect",V))}CreateAuthorization(){return new V.Authorization(this._manager,"")}CreateRightDefinition(){return new V.RightDefinition}CreateUserDefinition(){return new V.UserDefinition}CreateUserGroupDefinition(){return new V.UserGroupDefinition}GetAuthorization(x){return A.Exception.isValidStringParam(x,"GetAuthorization","Right Name")?new V.Authorization(this._manager,x):null}GetRightAsync(V){return x.isString(V)?this._manager.getRightAsync(V):Promise.reject(new A.Exception.ParameterException("GetRightAsync","Right Name incorrect",V))}GetRightsAsync(){return this._manager.getRightsAsync()}GetRightDefinitionAsync(V){return x.isString(V)?this._manager.getRightDefinitionAsync(V):Promise.reject(new A.Exception.ParameterException("GetRightDefinitionAsync","Right Name incorrect",V))}GetUserAsync(V){return x.isString(V)?this._manager.getUserAsync(V):Promise.reject(new A.Exception.ParameterException("GetUserAsync","User Name incorrect",V))}GetUsersAsync(){return this._manager.getUsersAsync()}GetUserDefinitionAsync(V){return x.isString(V)?this._manager.getUserDefinitionAsync(V):Promise.reject(new A.Exception.ParameterException("GetUserDefinitionAsync","User Name incorrect",V))}GetUserGroupAsync(V){return x.isString(V)?this._manager.getUserGroupAsync(V):Promise.reject(new A.Exception.ParameterException("GetUserGroupAsync","Group Name incorrect",V))}GetUserGroupsAsync(){return this._manager.getUserGroupsAsync()}GetUserGroupDefinitionAsync(V){return __awaiter(this,void 0,void 0,(function*(){if(x.isNullOrEmpty(V))return Promise.reject(new A.Exception.ParameterException("GetUserGroupDefinitionAsync","Group Name incorrect",V));let R=yield this._manager.getUserGroupAsync(V),D=x.Internal.Domain.UserManagement.mapUserGroupToUserGroupDefinition(R);return Promise.resolve(D)}))}LogOff(x=!0){this.CurrentUser=new V.User(this._manager),this.CurrentUserName=this.CurrentUser.Name,this.CurrentUser=null,this.NewMachineCode="",this.NewPassword="",this.NewUserName="",this.RightNames=[],this.UserGroupNames=[],this.UserLoggedOff.trigger(this.CurrentUser),this._manager.logOff(x)}LogOnAsync(x,A,V){return __awaiter(this,void 0,void 0,(function*(){let R=x;R||(R=null);let D=A;D||(D=null);let N=V;N||(N=null);const U=yield this._manager.logOnAsync(R,D,N);return Promise.resolve(U)}))}MoveUserToGroupAsync(V,R){return x.isString(V)?x.isString(R)?this._manager.moveUserToGroupAsync(V,R):Promise.reject(new A.Exception.ParameterException("MoveUserToGroupAsync","Group Name incorrect",R)):Promise.reject(new A.Exception.ParameterException("MoveUserToGroupAsync","User Name incorrect",V))}RemoveRightAsync(V){return x.isString(V)?this._manager.removeRightAsync(V):Promise.reject(new A.Exception.ParameterException("RemoveRightAsync","Right Name incorrect",V))}RemoveRightsAsync(V){if(!x.isArray(V))return Promise.reject(new A.Exception.ParameterException("RemoveRightsAsync","Right Names array incorrect",V));for(let R=0;R<V.length;R++)if(!x.isString(V[R]))return Promise.reject(new A.Exception.ParameterException("RemoveRightsAsync","Right Name incorrect",V[R]));return this._manager.removeRightsAsync(V)}RemoveRightFromGroupAsync(V,R){return x.isString(V)?x.isString(R)?this._manager.removeRightFromGroupAsync(V,R):Promise.reject(new A.Exception.ParameterException("RemoveRightFromGroupAsync","Right Name incorrect",R)):Promise.reject(new A.Exception.ParameterException("RemoveRightFromGroupAsync","UserGroup Name incorrect",V))}RemoveUserAsync(V){return x.isString(V)?this._manager.removeUserAsync(V):Promise.reject(new A.Exception.ParameterException("RemoveUserAsync","User Names incorrect",V))}RemoveUsersAsync(V){if(!x.isArray(V))return Promise.reject(new A.Exception.ParameterException("RemoveUsersAsync","User Names array incorrect",V));for(let R=0;R<V.length;R++)if(!x.isString(V[R]))return Promise.reject(new A.Exception.ParameterException("RemoveUsersAsync","User Name incorrect",V[R]));return this._manager.removeUsersAsync(V)}RemoveUserGroupAsync(V){return x.isString(V)?this._manager.removeUserGroupAsync(V):Promise.reject(new A.Exception.ParameterException("RemoveUserGroupAsync","UserGroup Name incorrect",V))}RemoveUserGroupsAsync(V){if(!x.isArray(V))return Promise.reject(new A.Exception.ParameterException("RemoveUserGroupsAsync","UserGroup Names incorrect",V));for(let R=0;R<V.length;R++)if(!x.isString(V[R]))return Promise.reject(new A.Exception.ParameterException("RemoveUserGroupsAsync","UserGroup Name incorrect",V[R]));return this._manager.removeUserGroupsAsync(V)}VerifyUserAsync(x,A,V){return this._manager.verifyUserAsync(x,A,V)}getUsersOfGroupAsync(x){return this._manager.getUsersOfGroupAsync(x)}getAuthorizationSystemAsync(){return this._manager.getAuthorizationSystemAsync()}verifyPasswordAsync(x,A){return this._manager.verifyPasswordAsync(x,A)}logOnWithCodeAsync(x,A){return this._manager.logOnWithCodeAsync(x,A)}GetUsersAndGroupsAsync(){return this._manager.getUsersAndGroupsAsync()}}V.UserManagementService=UserManagementService}(A.UserManagement||(A.UserManagement={}))}(A.System||(A.System={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){x.UserManagement||(x.UserManagement={})}(x.System||(x.System={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){!function(x){"use strict";x.RightDefinition=class RightDefinition{constructor(){this.Active=!0,this.Comment="",this.LocalizableText="",this.Name=""}}}(x.UserManagement||(x.UserManagement={}))}(x.System||(x.System={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(A){"use strict";A.UserDefinition=class UserDefinition{constructor(){this.Code=null,this.Comment="",this.DeactivationTime=null,this.FailedLogOns=0,this.FullName="",this.GroupName="",this.Password=null,this.Name="",this.RemainingLogOns=0,this.RenewPassword=0,this.RightNames=[],this.UserState=x.System.UserManagement.UserState.Unknown}}}(A.UserManagement||(A.UserManagement={}))}(A.System||(A.System={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){!function(x){"use strict";x.UserGroupDefinition=class UserGroupDefinition{constructor(){this.Name="",this.Comment="",this.LocalizableText="",this.Text="",this.AutoLogOffTime=0,this.InvalidateAfterFailedLogOns=0,this.UsersRemovable=!0,this.RenewPassword=0,this.Level=-1,this.MaxFailedLogOns=0,this.RenewPasswordInterval=0,this.RightNames=[],this.UserNames=[]}}}(x.UserManagement||(x.UserManagement={}))}(x.System||(x.System={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(A){"use strict";A.UserInfo=class UserInfo{constructor(){this.Name="",this.FullName="",this.Comment="",this.Code="",this.GroupName="",this.DeactivationTime=null,this.UserState=x.System.UserManagement.UserState.Unknown,this.RemainingLogOns=0,this.RenewPassword=0}}}(A.UserManagement||(A.UserManagement={}))}(A.System||(A.System={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){x.Store||(x.Store={})}(x.Domain||(x.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(A){"use strict";A.DataStore=class DataStore{constructor(){this.dictionary=new x.Internal.System.Collections.GenericDictionary}Add(x,A){this.dictionary.add(x,A)}Contains(x){return this.dictionary.containsKey(x)}GetFromKey(x){return this.dictionary.getByKey(x)}GetFromKeyValue(x,A){for(const V of this.dictionary.values())if(V[x]===A)return V;return null}GetFromObjectKey(A,V){for(const R of this.dictionary.values())if(R[A]===V[A]&&!x.isUndefined(R[A]))return R;return null}GetAll(){return this.dictionary.values()}Delete(x){this.dictionary.remove(x)}DeleteAll(){this.dictionary=new x.Internal.System.Collections.GenericDictionary}}}(A.Store||(A.Store={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){!function(x){x.Server||(x.Server={})}(x.Application||(x.Application={}))}(x.Domain||(x.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";V.ServerInfo=class ServerInfo{constructor(V){if(this.ProjectState=x.System.Project.ServerRuntimeStatus.Stopped,this.UTCOffset=0,this.isDefaultServer=!1,this.ServerID=x.Guid(),this.Connected=!1,this.Name=V.Server.ServerProjectName,this.ServerProjectName=V.Server.ServerProjectName,this.ConnectionTimeout=V.Server.ConnectionTimeout,this.RuntimeVersion=V.Server.RuntimeVersion,this.TelegramVersion=V.Client.TelegramVersion,""===V.Server.SocketUri)this.SocketUri=this._makeSocketUri(V);else{this.validateSocketUri(V.Server.SocketUri)?this.SocketUri=V.Server.SocketUri:x.isNullOrUndefined(V.Server.SocketUri)||(A.Logger.WarnLog.log("Given SocketUri is invalid:",V.Server.SocketUri),this.SocketUri=this._makeSocketUri(V))}this.WebGatewayProtocolVersion=V.System.WebGatewayProtocolVersion,V.Server.SocketUri=this.SocketUri,V.System.Debug&&A.Logger.AppDomainLog.log("ServerInfo ctor",this,x.Internal.System.Diagnostics.Logging.AppDomainEventSource.System,x.Internal.System.Diagnostics.Logging.AppDomainCategorySource.Constructor)}_makeSocketUri(x){const V=x.Server.WebSocketPrefix,R=x.Server.WebSocketHost,D=x.Server.WebSocketPort,N=x.Server.WebSocketUriParameter;let U;return U=N?`${V}${R}:${D}${N}`:`${V}${R}:${D}`,this.validateSocketUri(U)||A.Logger.WarnLog.log("Given SocketUri is invalid:",U),U}validateSocketUri(x){return!!/(ws|wss|http|https):\/\/(\w+:{0,1}\w*)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%!\-\/]))?/.test(x)}Dispose(){A.Dispose(this)}}}(V.Server||(V.Server={}))}(A.Application||(A.Application={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(A){"use strict";class ProtocolWatchdogException extends A.ExceptionBase{constructor(A,V,R,D){super(A,V),this.name=A,this.message=V,this.param=R;let N=x.Internal.System.Diagnostics.Logging.AppDomainCategorySource.CommandHandler;R?x.Internal.Domain.Logger.WarnLog.log(A,{Message:V,Param:R},D,N):x.Internal.Domain.Logger.WarnLog.log(A,{Message:V},D,N)}}A.ProtocolWatchdogException=ProtocolWatchdogException}(A.Exception||(A.Exception={}))}(A.System||(A.System={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){"use strict";V.onResultException=new A.Events.TypedEvent;class ResultException extends V.ExceptionBase{constructor(A,R,D,N,U,B,F){super(A,R),this.name=A,this.authorized=D||!1,this.requestID=N||"",this.result=U||"",this.message=R,this.text=B||"",this.param=F,V.onResultException.trigger({name:A,message:R,authorized:D,requestID:N,result:U,text:B,param:F}),x.Internal.Domain.Logger.ErrorLog.log(A,{message:R,authorized:D,requestID:N,result:U,text:B,param:F})}}V.ResultException=ResultException}(A.Exception||(A.Exception={}))}(A.System||(A.System={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){!function(x){"use strict";x.netDate={DATE0:"-2209165200000",DATE_0:-22091616e5}}(x.CONST||(x.CONST={}))}(x.Domain||(x.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(x){x.Domain||(x.Domain={})}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){"use strict";A.ManagerBase=class ManagerBase{constructor(A){this.ID=x.Guid(),this.Type=new x.Internal.System.BaseType,this.Type.Namespace="VisiWin.Internal.Application.Managerbase",this.Type.TypeName="Manager",this.session=A}}}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(x){x.Domain||(x.Domain={})}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){"use strict";let A;!function(x){x[x.created=0]="created",x[x.initialized=1]="initialized",x[x.attached=2]="attached",x[x.ready=3]="ready",x[x.error=4]="error"}(A=x.MasterItemState||(x.MasterItemState={}))}(x.Domain||(x.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){"use strict";A.MasterItem=class MasterItem{constructor(){this.ID=x.Guid()}},A.Dispose=function Dispose(V){for(const R in V){if(V[R]&&V[R]instanceof x.Internal.System.Events.TypedEvent)try{V[R].remove(),delete V[R]}catch(x){A.Logger.ErrorLog.log("Master item dispose error.")}if(x.isObject(V[R]))try{V[R].isDisposable&&(V[R].Dispose(),delete V[R])}catch(x){A.Logger.ErrorLog.log("Master item dispose error.")}Object.prototype.hasOwnProperty.call(V,R)&&delete V[R]}}}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){"use strict";V.CmdCollector=class CmdCollector{constructor(x){this.cmdHelper=x}promisefyAttachRequest(x){return new Promise((A,V)=>{this.cmdHelper.masterItemsCol.push({Master:x.Master,Childs:x.Childs,Requests:this.cmdHelper,Promises:{onComplete:A,onError:V}})})}outerArrayToInnerArray(x){const A=[],V=[],R=[],D=[];for(let N=0;N<x.length;N++)A.push(x[N].Master),V.push(x[N].Childs),R.push(x[N].Requests),D.push(x[N].Promises);return this.cmdHelper.masterItemsCol=[],{masterCol:A,childCol:V,requestCol:R,promiseCol:D}}makeRequestUnique(x,A){const V=[];if(""===A){let A=[];for(let V=0;V<x.length;V++)A=A.concat(x[V]);return this.multiDimensionalUnique(A)}for(let R=0;R<x.length;R++){x[R][A]&&-1===V.indexOf(x[R][A])&&V.push(x[R][A]);for(let D=0;D<x[R].length;D++){x[R][D][A]&&-1===V.indexOf(x[R][D][A])&&V.push(x[R][D][A]);for(let N=0;N<x[R][D].length;N++)x[R][D][N][A]&&-1===V.indexOf(x[R][D][N][A])&&V.push(x[R][D][N][A])}}return V}multiDimensionalUnique(x){const A=[],V={};for(let R=0,D=x.length;R<D;R++){const D=JSON.stringify(x[R]);V[D]||(A.push(x[R]),V[D]=!0)}return A}attachSomethingAsync(V,R,D){return __awaiter(this,void 0,void 0,(function*(){const N=this.promisefyAttachRequest({Master:V,Childs:R,Requests:this.cmdHelper,Promises:null});return 0===this.cmdHelper.masterItemsColTimeoutID&&(this.cmdHelper.masterItemsColTimeoutID=setTimeout(()=>__awaiter(this,void 0,void 0,(function*(){let V=this.outerArrayToInnerArray(this.cmdHelper.masterItemsCol),R=this.makeRequestUnique(V.masterCol,D);window.clearTimeout(this.cmdHelper.masterItemsColTimeoutID),this.cmdHelper.masterItemsColTimeoutID=0;let N=this.cmdHelper.QueryFn(R);try{"DetachItemsQuery"===this.cmdHelper.QueryFn.name?this.cmdHelper.session.SrvHnd.MsgHnd.submitPromise(N):yield this.cmdHelper.session.SrvHnd.MsgHnd.submitPromise(N)}catch(R){0!==R.watchDogTimeout&&A.Logger.ErrorLog.log(x.Internal.makeString(R));for(let x=0;x<V.promiseCol.length;x++)try{V.promiseCol[x]&&V.promiseCol[x].onError({Master:V.masterCol[x],Childs:V.childCol[x]})}catch(x){}}for(let x=0;x<V.promiseCol.length;x++)try{V.promiseCol[x]&&V.promiseCol[x].onComplete({Master:V.masterCol[x],Childs:V.childCol[x]})}catch(x){}N.Dispose(),N=null,R=null,V={masterCol:[],childCol:[],requestCol:[],promiseCol:[]}})),this.cmdHelper.masterItemsColDelayTime)),N}))}}}(A.QueryHelper||(A.QueryHelper={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(x){x.Domain||(x.Domain={})}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){"use strict";class AlarmManager extends A.ManagerBase{constructor(V){super(V),this.ID=x.Guid(),this.historicalDataCompletedHandler=x=>{this.historicalDataCompleted(x)},this.langChangeHandler=()=>this.languageChangedHandler(),this.Type.Namespace="VisiWin.Internal.Application.Manager",this.Type.TypeName="AlarmManager",this._store=new A.Store.Alarm(this),this.getHistoricalDataCompletedEvent=new x.Internal.System.Events.TypedEvent,this.session.LanguageManager.LanguageService.LanguageChanged.add(this.langChangeHandler),A.Alarm.QueryHandler.registerChangeAlarmCallback(V),A.Alarm.QueryHandler.registerHistoricalAlarmsCallback(V)}Dispose(){this._store.Dispose(),A.Dispose(this.AlarmService),A.Dispose(this._AlarmService);for(const x in this)Object.prototype.hasOwnProperty.call(this,x)&&delete this[x]}get AlarmService(){return this._AlarmService||(this._AlarmService=new x.Internal.System.Alarm.AlarmService(this)),this._AlarmService}acknowledgeAlarm(V){return __awaiter(this,void 0,void 0,(function*(){try{const x=A.Alarm.QueryHandler.AcknowledgeAlarmQuery(V);return yield this.session.SrvHnd.MsgHnd.submitPromise(x),x.Dispose(),Promise.resolve(!0)}catch(V){return A.Logger.WarnLog.log("acknowledgeAlarm",x.Internal.makeString(V)),Promise.reject(V)}}))}getCurrentAlarm(V){const R=this._store.getCurrentAlarmMaster(),D=new x.Internal.System.Alarm.CurrentAlarms(V,this),N=A.Alarm.filterAlarms(R.Alarms,D.Filter);return D.Alarms=[...N],R.Subscribers.push(D),setTimeout(()=>{D.AlarmAttached.trigger(!0)},1),D.Alarms.length>0&&setTimeout((function(){for(let x=0;x<D.Alarms.length;x++)D.InitAlarm.trigger(D.Alarms[x]);D.AlarmAttached.trigger(!0)}),1),D}getAlarmClassFromStore(x){return this._store.getAlarmClass(x)}getAlarmGroupFromStore(x){return this._store.getAlarmGroup(x)}acknowledgeAlarmClass(V){try{const x=A.Alarm.QueryHandler.AcknowledgeAlarmClassQuery(V);this.session.SrvHnd.MsgHnd.submitPromise(x),x.Dispose()}catch(V){A.Logger.WarnLog.log("acknowledgeAlarmClass",x.Internal.makeString(V))}}acknowledgeAlarmGroup(V){try{const x=A.Alarm.QueryHandler.AcknowledgeAlarmGroupQuery(V);this.session.SrvHnd.MsgHnd.submitPromise(x),x.Dispose()}catch(V){A.Logger.WarnLog.log("acknowledgeAlarmGroup",x.Internal.makeString(V))}}acknowledgeAllAlarms(){try{const x=A.Alarm.QueryHandler.AcknowledgeAllAlarmsQuery();this.session.SrvHnd.MsgHnd.submitPromise(x),x.Dispose()}catch(V){A.Logger.WarnLog.log("acknowledgeAllAlarms",x.Internal.makeString(V))}}getHistoricalAlarmsAsync(V){return __awaiter(this,void 0,void 0,(function*(){this.getHistoricalDataCompletedEvent.add(this.historicalDataCompletedHandler),V.HistoricalAlarms=[],this._store.addHistoricalAlarms(V);try{const x=A.Alarm.QueryHandler.GetHistoricalAlarmsQuery(V),R=yield this.session.SrvHnd.MsgHnd.submitPromise(x);return x.Dispose(),Promise.resolve(R)}catch(V){return A.Logger.WarnLog.log("getHistoricalAlarms",x.Internal.makeString(V)),Promise.reject(V)}}))}getHistoricalAlarmsStream(V){return __awaiter(this,void 0,void 0,(function*(){this._store.addHistoricalAlarms(V);try{const x=A.Alarm.QueryHandler.GetHistoricalAlarmsStreamQuery(V),R=yield this.session.SrvHnd.MsgHnd.submitPromise(x);return V.Length=R.Length,V.RequestID=R.RequestID,V.Result=R.Result,x.Dispose(),Promise.resolve(V)}catch(V){return A.Logger.WarnLog.log("getHistoricalAlarmsStream",x.Internal.makeString(V)),Promise.reject(V)}}))}readHistoricalAlarmsStream(V){return __awaiter(this,void 0,void 0,(function*(){try{const x=A.Alarm.QueryHandler.ReadHistoricalAlarmsStreamQuery(V),R=yield this.session.SrvHnd.MsgHnd.submitPromise(x),D=yield this.alarmStreamToHistoricalAlarms(R);return V.Count=R.Count,V.Position=R.Position,V.HistoricalAlarms=D,x.Dispose(),Promise.resolve(V)}catch(V){return A.Logger.WarnLog.log("readHistoricalAlarmsStream",x.Internal.makeString(V)),Promise.reject(V)}}))}closeHistoricalAlarmsStream(V){try{const x=A.Alarm.QueryHandler.CloseHistoricalAlarmsStream(V);this.session.SrvHnd.MsgHnd.submitPromise(x),this._store.removeHistoricalAlarms(V),x.Dispose()}catch(V){A.Logger.WarnLog.log("closeHistoricalAlarmsStream",x.Internal.makeString(V))}}alarmStreamToHistoricalAlarms(A){return __awaiter(this,void 0,void 0,(function*(){const V=[];if(A.Alarms){let R=A.Alarms.map(x=>x.LocalizableText);R=R.filter(x=>null!==x);let D=A.Alarms.map(x=>x.LocalizableParam1);D=D.filter(x=>null!==x);let N=A.Alarms.map(x=>x.StateInfo&&x.StateInfo.LocalizableText?x.StateInfo.LocalizableText:"");N=N.filter(x=>""!==x);const U=R.concat(D,N);yield this.session.LanguageManager.getTextsAsync(U);for(let R=0;R<A.Alarms.length;R++){const D=new x.Internal.System.Alarm.HistoricalAlarmItem(this,A.Alarms[R]);D.Class=this._store.getAlarmClass(A.Alarms[R].Class),D.Group=this._store.getAlarmGroup(A.Alarms[R].Group),D.Text=A.Alarms[R].Text,D.Param1=A.Alarms[R].Param1;let N=A.Alarms[R].AlarmState.toString();A.Alarms[R].StateInfo&&A.Alarms[R].StateInfo.LocalizableText?(N=yield this.session.LanguageManager.getTextAsync(A.Alarms[R].StateInfo.LocalizableText),D.StateInfo=new x.Internal.System.Alarm.AlarmStateInfo(this,N,A.Alarms[R].StateInfo.BackColor,A.Alarms[R].StateInfo.ForeColor,A.Alarms[R].StateInfo.Tag,A.Alarms[R].StateInfo.LocalizableText)):D.StateInfo=new x.Internal.System.Alarm.AlarmStateInfo(this,"","","",{},""),D.HistoricalID=A.Alarms[R].HistoricalID,D.FileName=A.Alarms[R].FileName,V.push(D)}return Promise.resolve(V)}return Promise.resolve(V)}))}getCurrentAlarmsMaster(){return __awaiter(this,void 0,void 0,(function*(){const V=this._store.CurrentAlarms.GetAll();if(!V[0]){const V=new x.Internal.System.Alarm.AlarmFilter(this),R=new A.Alarm.CurrentAlarmMaster(V);this._store.addCurrentAlarms(R);try{const x=A.Alarm.QueryHandler.GetCurrentAlarmsQuery(R);return yield this.session.SrvHnd.MsgHnd.submitPromise(x),R.AlarmAttached.trigger(!0),x.Dispose(),Promise.resolve(R)}catch(V){return V.watchDogTimeout&&0!==V.watchDogTimeout&&A.Logger.WarnLog.log("getCurrentAlarmsMaster",x.Internal.makeString(V)),Promise.reject(V)}}return V[0]}))}getAlarmClassesAndGroupsAsync(){return __awaiter(this,void 0,void 0,(function*(){try{const V=A.Alarm.QueryHandler.GetAlarmClassesAndGroupsQuery(),R=yield this.session.SrvHnd.MsgHnd.submitPromise(V),D=[],N=[],U=[];for(const x of R.AlarmClasses)x.LocalizableText&&D.push(x.LocalizableText);for(const x of R.AlarmGroups)x.LocalizableText&&D.push(x.LocalizableText);const B=yield this.session.LanguageManager._subscribeLocalizedTextsAsync(D);for(const A of R.AlarmClasses){const V=new x.Internal.System.Alarm.AlarmClass(A.Name,this);for(let x=0;x<B.length;x++)B[x].FullQualifiedText===A.LocalizableText&&(V.Text=B[x].DisplayText);V.LocalizableText=A.LocalizableText,U.push(V),this._store.addAlarmClass(V),this.AlarmService.ClassNames.push(V.Name)}for(const A of R.AlarmGroups){const V=new x.Internal.System.Alarm.AlarmGroup(this,A.GroupTree);for(let x=0;x<B.length;x++)B[x].FullQualifiedText===A.LocalizableText&&(V.Text=B[x].DisplayText);V.Name=A.Name,V.LocalizableText=A.LocalizableText,N.push(V),this._store.addAlarmGroups(V),this.AlarmService.GroupNames.push(V.GroupTree)}const F={AlarmClasses:U,AlarmGroups:N};return Promise.resolve(F)}catch(V){return V.watchDogTimeout&&0!==V.watchDogTimeout&&A.Logger.WarnLog.log("getAlarmClassesAndGroupsAsync",x.Internal.makeString(V)),Promise.reject(V)}}))}changeAlarm(V){const R=this._store.getCurrentAlarmMaster(),D=[];let N=-1;for(let A=0,U=R.Alarms.length;A<U;A++)if(R.Alarms[A].ID===V.AlarmItem.ID){N=A,V.AlarmItem.AlarmState===x.System.Alarm.AlarmState.Cleared?D.push(R.Alarms.splice(A,1)):R.Alarms[A]=V.AlarmItem;break}-1===N&&V.AlarmItem.AlarmState!==x.System.Alarm.AlarmState.Cleared&&R.Alarms.push(V.AlarmItem);for(const x of R.Alarms)x.ID===V.ID&&x.AlarmStateChanged.trigger(V.AlarmItem);for(const N of R.Subscribers)if(N){const R=A.Alarm.filterAlarms([V.AlarmItem],N.Filter);if(R.length>0){V.AlarmItem=R[0];let U=-1;for(let A=0,R=N.Alarms.length;A<R;A++)if(N.Alarms[A].ID===V.AlarmItem.ID){U=A,V.AlarmItem.AlarmState===x.System.Alarm.AlarmState.Cleared?D.push(N.Alarms.splice(A,1)):N.Alarms[A]=V.AlarmItem;break}switch(-1===U&&V.AlarmItem.AlarmState!==x.System.Alarm.AlarmState.Cleared&&N.Alarms.push(V.AlarmItem),N.SortMode===x.System.Alarm.AlarmSortMode.NewestFaultOnTop&&N.Alarms.sort((function(x,A){return A.ActivationTime-x.ActivationTime})),V.EventType){case"Init":N.InitAlarm.trigger(V.AlarmItem);break;case"New":N.NewAlarm.trigger(V.AlarmItem);break;case"Change":N.ChangeAlarm.trigger(V.AlarmItem);break;case"Clear":N.ClearAlarm.trigger(V.AlarmItem);break;case"Toggle":N.ChangeAlarm.trigger(V.AlarmItem);break;default:N.ChangeAlarm.trigger(V.AlarmItem),A.Logger.ErrorLog.log("unknown event type: "+V.EventType)}for(const x of N.Alarms)x.ID===V.ID&&x.AlarmStateChanged.trigger(V.AlarmItem)}else switch(V.EventType){case"Clear":for(var U=0;U<N.Alarms.length;U++)N.Alarms[U].ID===V.AlarmItem.ID&&N.ClearAlarm.trigger(V.AlarmItem);break;case"Change":case"Toggle":for(U=0;U<N.Alarms.length;U++)N.Alarms[U].ID===V.AlarmItem.ID&&N.ChangeAlarm.trigger(V.AlarmItem)}}if(D.length>0)for(let A=0;A<D.length;A++)D[A][0].AlarmState===x.System.Alarm.AlarmState.Cleared&&this._store.removeAlarmItem(D[A][0]),D[A][0].Dispose(),D[A]=null}historicalDataCompleted(x){const A=this._store.getHistoricalAlarmMaster(x.RequestID);if(A){const V={HistoricalAlarms:x.HistoricalAlarms,Success:x.Success};A.GetHistoricalDataCompleted.trigger(V),this.getHistoricalDataCompletedEvent.remove(this.historicalDataCompletedHandler),this._store.removeHistoricalAlarmMaster(x.RequestID)}}languageChangedHandler(){return __awaiter(this,void 0,void 0,(function*(){const x=this._store.AlarmClasses.GetAll(),A=x.map(x=>x.LocalizableText),V=yield this.session.LanguageManager.getTextsAsync(A);for(let A=0;A<x.length;A++)x[A].Text=V[A];const R=this._store.AlarmGroups.GetAll(),D=R.map(x=>x.LocalizableText),N=yield this.session.LanguageManager.getTextsAsync(D);for(let x=0;x<R.length;x++)R[x].Text=N[x];this._cmdRefreshCurrentAlarms()}))}_cmdRefreshCurrentAlarms(){return __awaiter(this,void 0,void 0,(function*(){const V=this._store.CurrentAlarms.GetAll();let R;if(V[0]){R=V[0].Subscribers;const D=A.Alarm.QueryHandler.ReleaseCurrentAlarmsQuery(V[0]);this.session.SrvHnd.MsgHnd.submitPromise(D),yield x.sleep(500),this.removeCurrentAlarmFromStore(V[0]);const N=yield this.getCurrentAlarmsMaster();N&&(N.Subscribers=R),D.Dispose()}}))}getAlarmClass(x){return this._store.getAlarmClass(x)}getAlarmGroup(x){return this._store.getAlarmGroup(x)}getAlarmItem(x){return this._store.getAlarmItem(x)}addAlarmItem(x){this._store.addAlarmItem(x)}getHistoricalAlarmMaster(x){return this._store.getHistoricalAlarmMaster(x)}removeCurrentAlarmFromStore(x){return this._store.removeCurrentAlarm(x),this._store.CurrentAlarms.Delete(x.RequestID)}}A.AlarmManager=AlarmManager}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(A){"use strict";class CurrentAlarmMaster extends x.Internal.System.BaseClass{constructor(A){super(),this.isMasterAlarm=!0,this.isInitilized=!1,this.Type.Namespace=x.Internal.System.CONST_VW_NS.SYSALARM,this.Type.TypeName="CurrentAlarms",this.Subscribers=[],this.RequestID=x.Guid(),this.Filter=A,this.Alarms=[],this.SortMode=x.System.Alarm.AlarmSortMode.FirstUpFaultOnTop,this.ChangeAlarm=new x.Internal.System.Events.TypedEvent,this.NewAlarm=new x.Internal.System.Events.TypedEvent,this.InitAlarm=new x.Internal.System.Events.TypedEvent,this.ClearAlarm=new x.Internal.System.Events.TypedEvent,this.AlarmAttached=new x.Internal.System.Events.TypedEvent}}A.CurrentAlarmMaster=CurrentAlarmMaster}(A.Alarm||(A.Alarm={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){!function(x){"use strict";x.filterAlarms=function filterAlarms(x,A){if(0===x.length)return x;const V=[];for(let R=0;R<x.length;R++){let D=!1,N=!1,U=!1,B=!1,F=!1;if((A.DesiredClasses.length>0&&A.DesiredClasses.indexOf(x[R].Class.Name)>-1||0===A.DesiredClasses.length)&&(D=!0),0===A.DesiredGroups.length&&(N=!0),N||A.DesiredGroups.length>=0&&A.DesiredGroups.indexOf(x[R].Group.Name)>-1&&(N=!0),N||A.DesiredGroups.length>=0&&A.DesiredGroups.indexOf(x[R].Group.GroupTree)>-1&&(N=!0),!N)for(let V=0;V<A.DesiredGroups.length;V++){if(x[R].Group.GroupTree.includes(A.DesiredGroups[V],0)){N=!0;break}}(A.DesiredStates.length>=0&&A.DesiredStates.indexOf(x[R].AlarmState)>-1||0===A.DesiredStates.length)&&(U=!0),(-1!==A.MaxPriority&&x[R].Priority<=A.MaxPriority||-1===A.MaxPriority)&&(B=!0),(-1!==A.MinPriority&&x[R].Priority>=A.MinPriority||-1===A.MinPriority)&&(F=!0),D&&N&&U&&B&&F&&V.push(x[R])}return V},x.hexToRgbA=function hexToRgbA(x){if(!x)return"";x=x.replace("#","");const A=parseInt(x.substring(0,2),16);return"rgba("+parseInt(x.substring(2,4),16)+","+parseInt(x.substring(4,6),16)+","+parseInt(x.substring(6,8),16)+","+A+")"},x.hexToRgb=function hexToRgb(x){return x?(x=x.replace("#",""),"rgb("+parseInt(x.substring(2,4),16)+","+parseInt(x.substring(4,6),16)+","+parseInt(x.substring(6,8),16)+")"):""}}(x.Alarm||(x.Alarm={}))}(x.Domain||(x.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){"use strict";V.Alarm=class Alarm{constructor(x){this._manager=x,this.AlarmGroups=new V.DataStore,this.AlarmClasses=new V.DataStore,this.CurrentAlarms=new V.DataStore,this.HistoricalAlarms=new V.DataStore,this.AlarmItems=new V.DataStore}Dispose(){this.AlarmGroups.DeleteAll(),this.AlarmClasses.DeleteAll(),this.CurrentAlarms.DeleteAll(),this.HistoricalAlarms.DeleteAll(),this.AlarmItems.DeleteAll()}getCurrentAlarmMaster(){return this.CurrentAlarms.GetAll()[0]}addAlarmClass(V){this._manager.session.Settings.System.Debug&&A.Logger.AppDomainLog.log("AddAlarmClass",V,x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Alarm,x.Internal.System.Diagnostics.Logging.AppDomainCategorySource.Store);const R=this.AlarmClasses.GetFromObjectKey(V.Name,V);x.isNullOrUndefined(R)&&this.AlarmClasses.Add(V.Name,V)}getAlarmClass(x){return this.AlarmClasses.GetFromKeyValue("Name",x)}addAlarmGroups(V){this._manager.session.Settings.System.Debug&&A.Logger.AppDomainLog.log("AddAlarmGroups",V,x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Alarm,x.Internal.System.Diagnostics.Logging.AppDomainCategorySource.Store);const R=this.AlarmGroups.GetFromObjectKey(V.GroupTree,V);x.isNullOrUndefined(R)&&this.AlarmGroups.Add(V.GroupTree,V)}getAlarmGroup(x){return this.AlarmGroups.GetFromKeyValue("GroupTree",x)}addCurrentAlarms(V){this._manager.session.Settings.System.Debug&&A.Logger.AppDomainLog.log("AddCurrentAlarms",V,x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Alarm,x.Internal.System.Diagnostics.Logging.AppDomainCategorySource.Store),this.CurrentAlarms.Add(V.RequestID,V)}removeCurrentAlarm(V){this._manager.session.Settings.System.Debug&&A.Logger.AppDomainLog.log("RemoveCurrentAlarm",{item:V},x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Alarm,x.Internal.System.Diagnostics.Logging.AppDomainCategorySource.Store);const R=this.CurrentAlarms.GetAll();if(R[0]){const x=R[0].Subscribers.indexOf(V);x>-1&&R[0].Subscribers.splice(x,1)}}getAlarmItem(V){this._manager.session.Settings.System.Debug&&A.Logger.AppDomainLog.log("GetAlarmItems",V,x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Alarm,x.Internal.System.Diagnostics.Logging.AppDomainCategorySource.Store);const R=this.AlarmItems.GetFromObjectKey("ID",V);return x.isNullOrUndefined(R)?null:R}addAlarmItem(V){this._manager.session.Settings.System.Debug&&A.Logger.AppDomainLog.log("AddAlarmItems",V,x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Alarm,x.Internal.System.Diagnostics.Logging.AppDomainCategorySource.Store);const R=this.AlarmItems.GetFromObjectKey("ID",V);x.isNullOrUndefined(R)&&this.AlarmItems.Add(V.ID.toString(),V)}removeAlarmItem(V){this._manager.session.Settings.System.Debug&&A.Logger.AppDomainLog.log("RemoveAlarmItems",V,x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Alarm,x.Internal.System.Diagnostics.Logging.AppDomainCategorySource.Store);const R=this.AlarmItems.GetFromObjectKey("ID",V);x.isNullOrUndefined(R)||this.AlarmItems.Delete(V.ID.toString())}addHistoricalAlarms(V){this._manager.session.Settings.System.Debug&&A.Logger.AppDomainLog.log("AddHistoricalAlarms",V,x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Alarm,x.Internal.System.Diagnostics.Logging.AppDomainCategorySource.Store),this.HistoricalAlarms.Add(V.RequestID,V)}removeHistoricalAlarms(V){this._manager.session.Settings.System.Debug&&A.Logger.AppDomainLog.log("AddHistoricalAlarms",V,x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Alarm,x.Internal.System.Diagnostics.Logging.AppDomainCategorySource.Store),this.HistoricalAlarms.Delete(V.RequestID)}getHistoricalAlarmMaster(x){return this.HistoricalAlarms.GetFromObjectKey(A.CONST.Telegram.REQUESTID,{RequestID:x})}removeHistoricalAlarmMaster(x){this.HistoricalAlarms.Delete(x)}}}(A.Store||(A.Store={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){!function(x){!function(x){"use strict";x.Commands={ACKNOWLEDGEALARM:"AcknowledgeAlarm",ACKNOWLEDGEALARMCLASS:"AcknowledgeAlarmClass",ACKNOWLEDGEALARMGROUP:"AcknowledgeAlarmGroup",ACKNOWLEDGEALLALARMS:"AcknowledgeAllAlarms",CHANGEALARM:"ChangeAlarm",CLOSEHISTORICALALARMSSTREAM:"CloseHistoricalAlarmsStream",HISTORICALALARMS:"HistoricalAlarms",RELEASECURRENTALARMS:"ReleaseCurrentAlarms",Q_GETALARMCLASSES:"QGetAlarmClasses",R_GETALARMCLASSES:"RGetAlarmClasses",Q_GETALARMCLASSESANDGROUPS:"QGetAlarmClassesAndGroups",R_GETALARMCLASSESANDGROUPS:"RGetAlarmClassesAndGroups",Q_GETALARMCLASSNAMES:"QGetAlarmClassNames",R_GETALARMCLASSNAMES:"RGetAlarmClassNames",Q_GETALARMGROUPNAMES:"QGetAlarmGroupNames",R_GETALARMGROUPNAMES:"RGetAlarmGroupNames",Q_GETALARMGROUPS:"QGetAlarmGroups",R_GETALARMGROUPS:"RGetAlarmGroups",Q_GETCURRENTALARMS:"QGetCurrentAlarms",R_GETCURRENTALARMS:"RGetCurrentAlarms",Q_GETHISTORICALALARMS:"QGetHistoricalAlarms",R_GETHISTORICALALARMS:"RGetHistoricalAlarms",Q_GETHISTORICALALARMSSTREAM:"QGetHistoricalAlarmsStream",R_GETHISTORICALALARMSSTREAM:"RGetHistoricalAlarmsStream",Q_READHISTORICALALARMSSTREAM:"QReadHistoricalAlarmsStream",R_READHISTORICALALARMSSTREAM:"RReadHistoricalAlarmsStream"}}(x.QueryHandler||(x.QueryHandler={}))}(x.Alarm||(x.Alarm={}))}(x.Domain||(x.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";function GetAlarmClassNamesResponse(x,A){A.ResolvePromise(x,x.Authorized)}V.GetAlarmClassNamesQuery=function GetAlarmClassNamesQuery(){const R=new A.MsgHelper.TelegramHelper(V.Commands.Q_GETALARMCLASSNAMES,V.Commands.R_GETALARMCLASSNAMES);return R.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Alarm,R.fnResponse=GetAlarmClassNamesResponse,R.CmdVal.val={RequestID:R.RequestID},R}}(V.QueryHandler||(V.QueryHandler={}))}(A.Alarm||(A.Alarm={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";function GetAlarmClassesResponse(x,A){A.ResolvePromise(x,x.Authorized)}V.GetAlarmClassesQuery=function GetAlarmClassesQuery(){const R=new A.MsgHelper.TelegramHelper(V.Commands.Q_GETALARMCLASSES,V.Commands.R_GETALARMCLASSES);return R.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Alarm,R.fnResponse=GetAlarmClassesResponse,R.CmdVal.val={RequestID:R.RequestID},R}}(V.QueryHandler||(V.QueryHandler={}))}(A.Alarm||(A.Alarm={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";function GetAlarmGroupNamesResponse(x,A){A.ResolvePromise(x,x.Authorized)}V.GetAlarmGroupNamesQuery=function GetAlarmGroupNamesQuery(){const R=new A.MsgHelper.TelegramHelper(V.Commands.Q_GETALARMGROUPNAMES,V.Commands.R_GETALARMGROUPNAMES);return R.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Alarm,R.fnResponse=GetAlarmGroupNamesResponse,R.CmdVal.val={RequestID:R.RequestID},R}}(V.QueryHandler||(V.QueryHandler={}))}(A.Alarm||(A.Alarm={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";function GetAlarmGroupsResponse(x,A){A.ResolvePromise(x,x.Authorized)}V.GetAlarmGroupsQuery=function GetAlarmGroupsQuery(){const R=new A.MsgHelper.TelegramHelper(V.Commands.Q_GETALARMGROUPS,V.Commands.R_GETALARMGROUPS);return R.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Alarm,R.fnResponse=GetAlarmGroupsResponse,R.CmdVal.val={RequestID:R.RequestID},R}}(V.QueryHandler||(V.QueryHandler={}))}(A.Alarm||(A.Alarm={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";function GetCurrentAlarmsResponse(x,A){A.ResolvePromise(x,x.Authorized)}V.GetCurrentAlarmsQuery=function GetCurrentAlarmsQuery(R){const D=new A.MsgHelper.TelegramHelper(V.Commands.Q_GETCURRENTALARMS,V.Commands.R_GETCURRENTALARMS);D.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Alarm,D.fnResponse=GetCurrentAlarmsResponse;const N={RequestID:R.RequestID,DesiredClasses:R.Filter.DesiredClasses,DesiredGroups:R.Filter.DesiredGroups,DesiredStates:R.Filter.DesiredStates,MinPriority:R.Filter.MinPriority,MaxPriority:R.Filter.MaxPriority,RequiredProperties:["ActivationCounter","LocalizableParam1","LocalizableText","Machine","Param1","Param2","StateInfo","Tag","User"]};return D.RequestID=R.RequestID,D.CmdVal.val=N,D}}(V.QueryHandler||(V.QueryHandler={}))}(A.Alarm||(A.Alarm={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";V.ReleaseCurrentAlarmsQuery=function ReleaseCurrentAlarmsQuery(R){const D=new A.MsgHelper.TelegramHelper(V.Commands.RELEASECURRENTALARMS,"");return D.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Alarm,D.hasResponse=!1,D.CmdVal.val={RequestID:R.RequestID,IDs:[R.RequestID]},D}}(V.QueryHandler||(V.QueryHandler={}))}(A.Alarm||(A.Alarm={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";V.AcknowledgeAlarmQuery=function AcknowledgeAlarmQuery(R){const D=new A.MsgHelper.TelegramHelper(V.Commands.ACKNOWLEDGEALARM,"");return D.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Alarm,D.hasResponse=!1,x.isNumber(R)?D.CmdVal.val={RequestID:D.RequestID,ID:R}:D.CmdVal.val={RequestID:D.RequestID,Name:R},D}}(V.QueryHandler||(V.QueryHandler={}))}(A.Alarm||(A.Alarm={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";function GetHistoricalAlarmsResponse(x,A){A.ResolvePromise(x,x.Authorized)}V.GetHistoricalAlarmsQuery=function GetHistoricalAlarmsQuery(R){const D=new A.MsgHelper.TelegramHelper(V.Commands.Q_GETHISTORICALALARMS,V.Commands.R_GETHISTORICALALARMS);D.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Alarm;const N={RequestID:R.RequestID,DesiredClasses:R.Filter.DesiredClasses,DesiredGroups:R.Filter.DesiredGroups,DesiredStates:R.Filter.DesiredStates,MinPriority:R.Filter.MinPriority,MaxPriority:R.Filter.MaxPriority,MaxTime:R.Filter.MaxTime.getTime(),MinTime:R.Filter.MinTime.getTime(),UtcOffset:0,RequiredProperties:["ActivationCounter","LocalizableParam1","LocalizableText","Machine","Param1","Param2","StateInfo","Tag","User"]};return D.RequestID=R.RequestID,D.CmdVal.val=N,D.fnResponse=GetHistoricalAlarmsResponse,D}}(V.QueryHandler||(V.QueryHandler={}))}(A.Alarm||(A.Alarm={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";V.registerChangeAlarmCallback=function registerChangeAlarmCallback(R){const D=new A.MsgHelper.TelegramHelper(V.Commands.CHANGEALARM,V.Commands.CHANGEALARM);D.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Alarm,D.fnResponse=A=>{!function prepareChangeAlarmEventArgs(A,V){return __awaiter(this,void 0,void 0,(function*(){const R=A.EventType,D=A.ID,N=V.AlarmManager.getAlarmClass(A.Class),U=V.AlarmManager.getAlarmGroup(A.Group),B=new x.Internal.System.Alarm.AlarmItem(V.AlarmManager,A,N,U);if(A.LocalizableParam1&&x.stringStartsWith(A.LocalizableParam1,"@")){const x=yield V.LanguageManager.getTextAsync(A.LocalizableParam1);B.Param1=x}else""!==A.LocalizableParam1&&(B.Param1=A.LocalizableParam1);B.ID=A.ID;let F=V.AlarmManager.getAlarmItem(B);x.isNullOrUndefined(F)?(V.AlarmManager.addAlarmItem(B),F=B):(F.AcknowledgeTime=B.AcknowledgeTime,F.ActivationCounter=B.ActivationCounter,F.ActivationTime=B.ActivationTime,F.AlarmState=B.AlarmState,F.DeactivationTime=B.DeactivationTime,F.Text=B.Text,F.User=B.User,F.Param1=B.Param1,F.StateInfo.BackColor=B.StateInfo.BackColor,F.StateInfo.ForeColor=B.StateInfo.ForeColor,F.StateInfo.Text=B.StateInfo.Text),V.AlarmManager.changeAlarm({EventType:R,ID:D,AlarmItem:F})}))}(A,R)},D.subscribesToEvent=!0,D.hasResponse=!0,D.RequestID=V.Commands.CHANGEALARM,D.CmdVal.val={RequestID:D.RequestID},R.SrvHnd.MsgHnd.addCallbackHandler(D)}}(V.QueryHandler||(V.QueryHandler={}))}(A.Alarm||(A.Alarm={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";V.registerHistoricalAlarmsCallback=function registerHistoricalAlarmsCallback(R){const D=new A.MsgHelper.TelegramHelper(V.Commands.HISTORICALALARMS,V.Commands.HISTORICALALARMS);D.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Alarm,D.fnResponse=A=>{!function historicalAlarmsEventArgs(A,V){return __awaiter(this,void 0,void 0,(function*(){const R=A.RequestID||"",D=A.Count||0,N=V.AlarmManager.getHistoricalAlarmMaster(R);let U=[];if(A.Alarms){const x=A.Alarms.map(x=>x.LocalizableText),V=A.Alarms.map(x=>x.LocalizableParam1),R=A.Alarms.map(x=>x.StateInfo&&x.StateInfo.LocalizableText?x.StateInfo.LocalizableText:"");U=x.concat(V,R),U=U.filter(x=>""!==x);for(let x=0;x<A.Alarms.length;x++)N._tempArray.push(A.Alarms[x])}let B=!1;if(N&&(N._counter=D,D>=0&&(B=!0),N._counter===N._tempArray.length)){yield V.LanguageManager.getTextsAsync(U);for(let A=0;A<N._tempArray.length;A++){const R=new x.Internal.System.Alarm.HistoricalAlarmItem(V.AlarmManager,N._tempArray[A]);R.Class=V.AlarmManager.getAlarmClass(N._tempArray[A].Class),R.Group=V.AlarmManager.getAlarmGroup(N._tempArray[A].Group),R.Text=N._tempArray[A].Text,R.Param1=N._tempArray[A].Param1;const D=yield V.LanguageManager.getTextAsync(N._tempArray[A].StateInfo.LocalizableText);R.StateInfo=new x.Internal.System.Alarm.AlarmStateInfo(V.AlarmManager,D,N._tempArray[A].StateInfo.BackColor,N._tempArray[A].StateInfo.ForeColor,N._tempArray[A].StateInfo.Tag,N._tempArray[A].StateInfo.LocalizableText),R.HistoricalID=N._tempArray[A].HistoricalID,R.FileName=N._tempArray[A].FileName,N.HistoricalAlarms.push(R)}const R={Alarms:N.HistoricalAlarms,HistoricalAlarms:N.HistoricalAlarms,Success:B,RequestID:A.RequestID,Count:A.Count};V.AlarmManager.historicalDataCompleted(R)}}))}(A,R)},D.subscribesToEvent=!0,D.hasResponse=!0,D.RequestID=V.Commands.HISTORICALALARMS,D.CmdVal.val={RequestID:D.RequestID},R.SrvHnd.MsgHnd.addCallbackHandler(D)}}(V.QueryHandler||(V.QueryHandler={}))}(A.Alarm||(A.Alarm={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";function GetAlarmClassesAndGroupsResponse(x,A){A.ResolvePromise(x,x.Authorized)}V.GetAlarmClassesAndGroupsQuery=function GetAlarmClassesAndGroupsQuery(){const R=new A.MsgHelper.TelegramHelper(V.Commands.Q_GETALARMCLASSESANDGROUPS,V.Commands.R_GETALARMCLASSESANDGROUPS);return R.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Alarm,R.fnResponse=GetAlarmClassesAndGroupsResponse,R.subscribesToEvent=!0,R.CmdVal.val={RequestID:R.RequestID},R}}(V.QueryHandler||(V.QueryHandler={}))}(A.Alarm||(A.Alarm={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";function GetHistoricalAlarmsStreamResponse(x,A){A.ResolvePromise(x,x.Authorized)}function ReadHistoricalAlarmsStreamResponse(x,A){A.ResolvePromise(x,x.Authorized)}V.GetHistoricalAlarmsStreamQuery=function GetHistoricalAlarmsStreamQuery(R){const D=new A.MsgHelper.TelegramHelper(V.Commands.Q_GETHISTORICALALARMSSTREAM,V.Commands.R_GETHISTORICALALARMSSTREAM);D.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Alarm;const N={RequestID:R.RequestID,DesiredClasses:R.Filter.DesiredClasses,DesiredGroups:R.Filter.DesiredGroups,DesiredStates:R.Filter.DesiredStates,MinPriority:R.Filter.MinPriority,MaxPriority:R.Filter.MaxPriority,MaxTime:R.Filter.MaxTime.getTime(),MinTime:R.Filter.MinTime.getTime(),UtcOffset:0,RequiredProperties:["ActivationCounter","LocalizableParam1","LocalizableText","Machine","Param1","Param2","StateInfo","Tag","User"]};return D.RequestID=R.RequestID,D.CmdVal.val=N,D.fnResponse=GetHistoricalAlarmsStreamResponse,D},V.ReadHistoricalAlarmsStreamQuery=function ReadHistoricalAlarmsStreamQuery(R){const D=new A.MsgHelper.TelegramHelper(V.Commands.Q_READHISTORICALALARMSSTREAM,V.Commands.R_READHISTORICALALARMSSTREAM);return D.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Alarm,D.RequestID=R.RequestID,D.CmdVal.val={RequestID:R.RequestID,Position:R.Position,Count:R.Count},D.fnResponse=ReadHistoricalAlarmsStreamResponse,D},V.CloseHistoricalAlarmsStream=function CloseHistoricalAlarmsStream(R){const D=new A.MsgHelper.TelegramHelper(V.Commands.CLOSEHISTORICALALARMSSTREAM,"");return D.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Alarm,D.hasResponse=!1,D.RequestID=R.RequestID,D.CmdVal.val={RequestID:R.RequestID},D}}(V.QueryHandler||(V.QueryHandler={}))}(A.Alarm||(A.Alarm={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";V.AcknowledgeAlarmClassQuery=function AcknowledgeAlarmClassQuery(R){const D=new A.MsgHelper.TelegramHelper(V.Commands.ACKNOWLEDGEALARMCLASS,"");return D.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Alarm,D.hasResponse=!1,D.CmdVal.val={RequestID:D.RequestID,ClassName:R},D}}(V.QueryHandler||(V.QueryHandler={}))}(A.Alarm||(A.Alarm={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";V.AcknowledgeAllAlarmsQuery=function AcknowledgeAllAlarmsQuery(){const R=new A.MsgHelper.TelegramHelper(V.Commands.ACKNOWLEDGEALLALARMS,"");return R.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Alarm,R.hasResponse=!1,R.CmdVal.val={RequestID:R.RequestID},R}}(V.QueryHandler||(V.QueryHandler={}))}(A.Alarm||(A.Alarm={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";V.AcknowledgeAlarmGroupQuery=function AcknowledgeAlarmGroupQuery(R){const D=new A.MsgHelper.TelegramHelper(V.Commands.ACKNOWLEDGEALARMGROUP,"");return D.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Alarm,D.hasResponse=!1,D.CmdVal.val={RequestID:D.RequestID,GroupName:R},D}}(V.QueryHandler||(V.QueryHandler={}))}(A.Alarm||(A.Alarm={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(x){x.Domain||(x.Domain={})}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){"use strict";class DataAccessManager extends A.ManagerBase{constructor(V){super(V),this.ID=x.Guid(),this.Type.Namespace="VisiWin.Internal.Domain.Manager",this.Type.TypeName="DataAccessManager",this._store=new A.Store.DataAccess(this),A.DataAccess.QueryHandler._registerChangeItemCallback(V),A.DataAccess.QueryHandler._registerChangeUnitCallback(V),A.DataAccess.QueryHandler._registerChangeItemsCallback(V),this.attachHelper=new A.QueryHelper.CmdCollector(this.cmdCollectorConfigAttachVariables()),this.detachHelper=new A.QueryHelper.CmdCollector(this.cmdCollectorConfigDetachVariables()),this.unitClassesHelper=new A.QueryHelper.CmdCollector(this.cmdCollectorConfigUnitClasses())}Dispose(){this._store.Dispose(),A.Dispose(this.VariableService),A.Dispose(this._VariableService);for(const x in this)Object.prototype.hasOwnProperty.call(this,x)&&delete this[x]}get VariableService(){return this._VariableService||(this._VariableService=new x.Internal.System.DataAccess.VariableService(this)),this._VariableService}getVariable(x){let V=this._store.VariableMasters.GetFromKeyValue("Name",x);return V||(V=new A.DataAccess.VariableMaster(this,x),this._store.addVariablemaster(V)),V.CreateChild()}getVariableValueAsync(V,R){return __awaiter(this,void 0,void 0,(function*(){try{const x=yield this.getVariablesValuesAsync([V],R);return Promise.resolve(x[0])}catch(V){return A.Logger.WarnLog.log("getVariableValueAsync",x.Internal.makeString(V)),Promise.reject(V)}}))}getVariablesValuesAsync(V,R){return __awaiter(this,void 0,void 0,(function*(){try{const D=A.DataAccess.QueryHandler.GetValuesQuery(V),N=yield this.session.SrvHnd.MsgHnd.submitPromise(D),U=N.handler,B=[],F=[],W=U.Values.length;for(let V=0;V<W;V++)if(this.session.ServerInfo.WebGatewayProtocolVersion>=8&&!0===R){const x=A.DataAccess.getValueResult(U.Values[V]);F.push(x)}else if(U.Values[V]&&U.Values[V].Result){const x=A.DataAccess.getValueResult(U.Values[V]);B.push(x.Errors.Value)}else{const R=A.DataAccess.ConvertValueByTypeCode(N.handler.Values[V].Value,x.Internal.EnumHelper.convertToNumber(x.System.DataAccess.TypeCode,N.handler.Values[V].TypeCode));B.push(R)}return D.Dispose(),R?Promise.resolve(F):Promise.resolve(B)}catch(V){return A.Logger.WarnLog.log("getVariablesValuesAsync",x.Internal.makeString(V)),Promise.reject(V)}}))}getVariableRawValueAsync(V,R){return __awaiter(this,void 0,void 0,(function*(){try{const x=yield this.getVariablesRawValuesAsync([V],R);return Promise.resolve(x[0])}catch(V){return A.Logger.WarnLog.log("getVariableRawValueAsync",x.Internal.makeString(V)),Promise.reject(V)}}))}getVariablesRawValuesAsync(V,R){return __awaiter(this,void 0,void 0,(function*(){try{const D=A.DataAccess.QueryHandler.GetRawValuesQuery(V),N=yield this.session.SrvHnd.MsgHnd.submitPromise(D),U=N.handler,B=[],F=[],W=U.Values.length;for(let V=0;V<W;V++)if(this.session.ServerInfo.WebGatewayProtocolVersion>=8&&!0===R){const x=A.DataAccess.getValueResult(U.Values[V]);F.push(x)}else if(U.Values[V]&&U.Values[V].Result){const x=A.DataAccess.getValueResult(U.Values[V]);B.push(x.Errors.Value)}else{const R=A.DataAccess.ConvertValueByTypeCode(N.handler.Values[V].Value,x.Internal.EnumHelper.convertToNumber(x.System.DataAccess.TypeCode,N.handler.Values[V].TypeCode));B.push(R)}return D.Dispose(),R?Promise.resolve(F):Promise.resolve(B)}catch(V){return A.Logger.WarnLog.log("getVariablesRawValuesAsync",x.Internal.makeString(V)),Promise.reject(V)}}))}setVariableValueAsync(x,V,R){return __awaiter(this,void 0,void 0,(function*(){try{let A;return A=yield this.setVariablesValuesAsync([x],[V],R),Promise.resolve(A[0])}catch(R){return A.Logger.WarnLog.log("setVariableValueAsync failed:",{varName:x,value:V}),Promise.reject(R)}}))}setVariablesValuesAsync(V,R,D){return __awaiter(this,void 0,void 0,(function*(){try{const x=A.DataAccess.QueryHandler.SetValuesQuery(V,R),N=yield this.session.SrvHnd.MsgHnd.submitPromise(x),U=N.handler,B=[],F=[],W=U.Results.length;for(let x=0;x<W;x++)if(this.session.ServerInfo.WebGatewayProtocolVersion>=8&&!0===D){const V=A.DataAccess.setValueResult(U.Results[x],U.Results[x].Name);V.Errors.Value=R[x],F.push(V)}else{A.MsgHelper.DefaultResultComparer(N.handler.Results[x].Result)?B.push(!0):B.push(!1)}return x.Dispose(),D?Promise.resolve(F):Promise.resolve(B)}catch(V){return A.Logger.WarnLog.log("setVariablesValuesAsync",x.Internal.makeString(V)),Promise.reject(V)}}))}setVariableRawValueAsync(V,R,D){return __awaiter(this,void 0,void 0,(function*(){try{let x;return D?(x=yield this.setVariablesValuesAsync([V],[R],D),Promise.resolve(x[0])):(x=yield this.setVariablesRawValuesAsync([V],[R],D),Promise.resolve(x[0]))}catch(V){return A.Logger.WarnLog.log("setVariableRawValueAsync",x.Internal.makeString(V)),Promise.reject(V)}}))}setVariablesRawValuesAsync(V,R,D){return __awaiter(this,void 0,void 0,(function*(){try{const x=A.DataAccess.QueryHandler.SetRawValuesQuery(V,R),N=yield this.session.SrvHnd.MsgHnd.submitPromise(x),U=N.handler,B=[],F=[],W=N.handler.Results.length;for(let x=0;x<W;x++)if(this.session.ServerInfo.WebGatewayProtocolVersion>=8&&!0===D){const D=A.DataAccess.setValueResult(U.Results[x],V[x]);D.Errors.Value=R[x],F.push(D)}else{A.MsgHelper.DefaultResultComparer(N.handler.Results[x].Result)?B.push(!0):B.push(!1)}return x.Dispose(),D?Promise.resolve(F):Promise.resolve(B)}catch(V){return A.Logger.WarnLog.log("setVariablesRawValuesAsync",x.Internal.makeString(V)),Promise.reject(V)}}))}setBitValueAsync(V,R,D,N){return __awaiter(this,void 0,void 0,(function*(){try{let x;return x=yield this.setBitsValuesAsync([V],[R],[D],N),Promise.resolve(x[0])}catch(V){return A.Logger.WarnLog.log("setBitValueAsync",x.Internal.makeString(V)),Promise.reject(V)}}))}setBitsValuesAsync(V,R,D,N){return __awaiter(this,void 0,void 0,(function*(){try{const x=A.DataAccess.QueryHandler.SetBitsQuery(V,R,D),U=yield this.session.SrvHnd.MsgHnd.submitPromise(x),B=U.handler,F=[],W=[],H=U.handler.Results.length;for(let x=0;x<H;x++)if(this.session.ServerInfo.WebGatewayProtocolVersion>=8&&!0===N){const N=A.DataAccess.setBitResult(B.Results[x],V[x]);N.Errors.Value=D[x],N.Errors.BitNumber=R[x],W.push(N)}else{A.MsgHelper.DefaultResultComparer(U.handler.Results[x].Result)?F.push(!0):F.push(!1)}return x.Dispose(),N?Promise.resolve(W):Promise.resolve(F)}catch(V){return A.Logger.WarnLog.log("setBitsValuesAsync",x.Internal.makeString(V)),Promise.reject(V)}}))}getCurrentUnitAsync(V){return __awaiter(this,void 0,void 0,(function*(){let R=this._store.getUnitClassMaster(V);if(R)return Promise.resolve(R.item.CurrentUnit);R=new A.DataAccess.UnitClassMaster(this,V),this._store.addUnitClassMaster(R);try{const x=A.DataAccess.QueryHandler.GetUnitClassQuery(V);return yield this.session.SrvHnd.MsgHnd.submitPromise(x),x.Dispose(),Promise.resolve(R.item.CurrentUnit)}catch(V){return A.Logger.WarnLog.log("getCurrentUnitAsync",x.Internal.makeString(V)),Promise.reject(V)}}))}getUnitClassAsync(x){return __awaiter(this,void 0,void 0,(function*(){const A=this._store.getUnitClassMaster(x);if(A)return Promise.resolve(A.CreateChild());{const A=yield this.getUnitClassesAsync([x]);return Promise.resolve(A[0])}}))}getUnitClassesAsync(V){return __awaiter(this,void 0,void 0,(function*(){const R=[],D=[];let N;const U=V.length;for(let x=0;x<U;x++)if(N=this._store.getUnitClassMaster(V[x]),N){const x=N.CreateChild();D.push(x)}else R.push(V[x]);const B=[],F=[];if(0===R.length)return Promise.resolve(D);{const x=R.length;for(let V=0;V<x;V++)N=new A.DataAccess.UnitClassMaster(this,R[V]),this._store.addUnitClassMaster(N),B.push(N)}try{if(this.session.ServerInfo.WebGatewayProtocolVersion>=1)yield this.getUnitClassesBlock(B,F);else{const x=A.DataAccess.QueryHandler.GetUnitClassesQuery(R);yield this.session.SrvHnd.MsgHnd.submitPromise(x),x.Dispose()}const x=[];let N=!1;const U=R.length;for(let A=0;A<U;A++){const R=this._store.getUnitClassMaster(V[A]);""===R.item.CurrentUnit.LocalizableText&&(N=!0),x.push(R.item)}const W=x.concat(D);return N?Promise.reject(W):Promise.resolve(W)}catch(V){return A.Logger.WarnLog.log("getUnitClassAsync",x.Internal.makeString(V)),Promise.reject(V)}}))}cmdCollectorConfigUnitClasses(){return{masterItemsCol:[],masterItemsColTimeoutID:0,masterItemsColDelayTime:this.session.Settings.System.AttachDelay,QueryFn:A.DataAccess.QueryHandler.GetUnitClassesQuery,session:this.session}}getUnitClassesBlock(x,V){return __awaiter(this,void 0,void 0,(function*(){const R=[],D=[],N=[],U=x.length;for(let A=0;A<U;A++)x[A]._isServerAttached&&x[A]._isInitialized?(D.push(x[A]),R.push(V[A]),N.push(V[A])):(x[A]._isInitialized=!0,D.push(x[A]),R.push(V[A]));if(N.length===D.length)return Promise.resolve(N);try{const x=(yield this.unitClassesHelper.attachSomethingAsync([D],[R],"Name")).Master.length;for(let A=0;A<x;A++)Promise.resolve(!0)}catch(x){A.Logger.ErrorLog.log("Attach unit class error:",R[0].Name)}return null}))}triggerVariableChangeEventArgs(x){A.DataAccess.QueryHandler._variableChangeEventArgs(x,this.session)}triggerVariablesChangeEventArgs(x){A.DataAccess.QueryHandler._variablesChangeEventArgs(x,this.session)}attachVariableAsync(V,R){return __awaiter(this,void 0,void 0,(function*(){try{if(yield this.attachBlockVariables([V],[R]),V.Subscribers.indexOf(R)>-1){const x=V.Subscribers.indexOf(R);V.Subscribers[x]._isInitialized?(V.Subscribers[x]._isInitialized=!0,V.Subscribers[x]._isAttached=!0):V.Subscribers[x]._isAttached=!1}const D=V.SubscribersScheduled.length;for(let R=0;R<D;R++){const D=V.SubscribersScheduled[R];if(V.item._isAttached=!0,V.item._isInitialized=!0,D.Child._isAttached=!0,D.Child._isInitialized=!0,D.Promises[0](V.item.IsValid),!D.Child._configEventTriggered&&V.item.IsValid){let x=A.DataAccess.createChangeEventArgs(V);x.Source=10,x.Quality.Value=x.Quality.Data,D.Child._configEventTriggered=!0,V.item._configEventTriggered=!0,D&&D.Child.Change.trigger(x),x=null}V.item.IsValid||A.Logger.WarnLog.log("Invalid Variable",x.Internal.makeString(D.Child.Name)),V._useEventqueue=!1;const N=V._eventqueue.length;for(let A=0;A<N;A++)if(V._eventqueue[A]){const R=x.Internal.SimpleObjectJSONClone(V._eventqueue[A]);if(x.isArray(R)?this.triggerVariablesChangeEventArgs(R):this.triggerVariableChangeEventArgs(R),V._eventqueue[A].length){let x=V._eventqueue[A].length;for(;x--;){let A=V._eventqueue.splice(x,1);A=null}}}V._eventqueue=[]}V.SubscribersScheduled=[]}catch(x){A.Logger.ErrorLog.log("Attach variable error:",R.Name)}}))}cmdCollectorConfigAttachVariables(){return{masterItemsCol:[],masterItemsColTimeoutID:0,masterItemsColDelayTime:this.session.Settings.System.AttachDelay,QueryFn:A.DataAccess.QueryHandler.AttachItemsQuery,session:this.session}}attachBlockVariables(x,V){return __awaiter(this,void 0,void 0,(function*(){const R=[],D=[],N=[],U=x.length;for(let A=0;A<U;A++)x[A].IsAttached&&x[A]._isInitialized?(D.push(x[A]),R.push(V[A]),N.push(V[A])):(x[A]._isInitialized=!0,D.push(x[A]),R.push(V[A]));if(N.length===D.length){const x=D.length;for(let V=0;V<x;V++){const x=A.DataAccess.createChangeEventArgs(D[V]);setTimeout(()=>{N[V].Change.trigger(x)},1)}return Promise.resolve(N)}try{const x=(yield this.attachHelper.attachSomethingAsync([D],[R],"Name")).Master.length;for(let A=0;A<x;A++)Promise.resolve(!0)}catch(x){A.Logger.ErrorLog.log("Attach variable error:",V[0].Name)}return null}))}cmdCollectorConfigDetachVariables(){return{masterItemsCol:[],masterItemsColTimeoutID:0,masterItemsColDelayTime:this.session.Settings.System.AttachDelay,QueryFn:A.DataAccess.QueryHandler.DetachItemsQuery,session:this.session}}detachBlockVariables(x,V){return __awaiter(this,void 0,void 0,(function*(){const R=[],D=[],N=x.length;for(let A=0;A<N;A++)x[A]._isInitialized=!1,x[A].IsAttached=!1,D.push(x[A]),R.push(V[A]);try{this.detachHelper.attachSomethingAsync([D],[R],"Name")}catch(x){A.Logger.ErrorLog.log("Detach variable error",R[0].Name)}return null}))}_detachItemsAsync(x){const V=this._store.VariableMasters.GetAll(),R=[];if(x.item.UnitClass&&x.item.UnitClass.CurrentUnit&&x.item.UnitClass.CurrentUnit.Name){const A=V.length;for(let D=0;D<A;D++)V[D].item&&V[D].item.UnitClass&&V[D].item.UnitClass.CurrentUnit&&V[D].item.UnitClass.CurrentUnit.Name&&V[D].item.UnitClass.CurrentUnit.Name===x.item.UnitClass.CurrentUnit.Name&&R.push(x.item.UnitClass.CurrentUnit.Name)}1===R.length&&this._store.removeUnitClassMaster(R[0]);try{this.detachBlockVariables([x],[null])}catch(V){A.Logger.ErrorLog.log("Detach variable error",x.Name)}}_getUnitClassMasterFromStore(x){return this._store.getUnitClassMaster(x)}_getVariableMasterFromStore(x){return this._store.getVariableMasterByName(x)}_getAllVariableMastersFromStore(){return this._store.getAllVariableMasters()}}A.DataAccessManager=DataAccessManager}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){"use strict";class VariableMaster extends x.Internal.Domain.MasterItem{constructor(A,V){super(),this.itemChangeHandler=x=>{this.Change(x)},this._manager=A,this.Subscribers=[],this.SubscribersScheduled=[],this.itemState=x.Internal.Domain.MasterItemState.created,this.subscriberState=x.Internal.Domain.MasterItemState.created,this.Name=V,this.item=new x.Internal.System.DataAccess.Variable(this,this.Name,this._manager.session.ClientManager.RuntimeVersion),this.IsAttached=!1,this._isInitialized=!1,this._useEventqueue=!0,this._eventqueue=[],this.item.Change.add(this.itemChangeHandler),this.RecipeItem={Quality:null,RecipeClass:null,Timestamp:null,Value:null,OldValue:null}}CreateChild(){let A=new x.Internal.System.DataAccess.Variable(this,this.item.Name,this._manager.session.ClientManager.RuntimeVersion);if(A=V.mapVariableMasterToChild(A,this,this._manager.session),this.item.UnitClass){const x=this._manager._getUnitClassMasterFromStore(this.item.UnitClass.Name);if(x){const V=x.CreateChild();A.UnitClass=V}}return A._isInitialized=this.item._isInitialized,A._isAttached=this.item._isAttached,A.IsAttached=this.item.IsAttached,this.Subscribers.push(A),A}RemoveChild(x){this.Detach(x)}TriggerChild(){}UpdateChild(){}AttachAsync(x,A=!0){return __awaiter(this,void 0,void 0,(function*(){let A;if(this.Subscribers.indexOf(x)>-1){if(this.IsAttached)return setTimeout(()=>{var A,R;x._isAttached=!0,x._isInitialized=!0;const D=V.createChangeEventArgs(this);this.UpdateSubscribers(),D.Source=10,null===(A=null==x?void 0:x.Change)||void 0===A||A.trigger(D),D.Source=0,null===(R=null==x?void 0:x.Change)||void 0===R||R.trigger(D)},0),Promise.resolve(!0);x._isInitialized=!0,A=new Promise((A,V)=>{this.SubscribersScheduled.push({Promises:[A,V],Child:x})}),this._manager.attachVariableAsync(this,x)}else{if(this.Subscribers.push(x),this.IsAttached&&this._isInitialized)return setTimeout(()=>{var A,R;const D=V.createChangeEventArgs(this);D.Source=10,x._isAttached=!0,x._isInitialized=!0,null===(A=null==x?void 0:x.Change)||void 0===A||A.trigger(D),D.Source=0,null===(R=null==x?void 0:x.Change)||void 0===R||R.trigger(D)},0),Promise.resolve(!0);A=new Promise((A,V)=>{this.SubscribersScheduled.push({Promises:[A,V],Child:x})}),this._manager.attachVariableAsync(this,x)}return A}))}Detach(x){if(x._isAttached=!1,x._isInitialized=!1,x._configEventTriggered=!1,x.UnitClass){const A=this._manager._getUnitClassMasterFromStore(x.UnitClass.Name);A&&A.RemoveChild(x.UnitClass)}const A=this.Subscribers.indexOf(x);if(-1!==A&&!this.item.IsClientInternal){const x=this.Subscribers.splice(A,1);if(x[0].Quality&&(delete x[0].Quality,x[0].Quality=null),x[0].UnitClass&&(x[0].UnitClass.Change.remove(),delete x[0].UnitClass,x[0].UnitClass=null),x[0].Value=null,x[0].PreviousRawValue=null,x[0].PreviousValue=null,x[0].RawValue=null,x[0].TimeStamp=null,0===this.Subscribers.length){if(this.item.IsAttached=!1,this.item._isInitialized=!1,this.item._isAttached=!1,this.item._configEventTriggered=!1,this.IsAttached=!1,this._isInitialized=!1,this._useEventqueue=!0,this.item.Value=null,this.item.PreviousRawValue=null,this.item.PreviousValue=null,this.item.RawValue=null,this.item.TimeStamp=null,this.item.Quality&&(this.item.Quality=null),this.item.UnitClass){const x=this._manager._getUnitClassMasterFromStore(this.item.UnitClass.Name);x&&x.RemoveChild(this.item.UnitClass),this.item.UnitClass.Change.remove(),this.item.UnitClass=null}this._manager._detachItemsAsync(this)}}}Change(A){var V,R;if(this.UpdateSubscribers(),A.Source===x.System.DataAccess.ChangeSource.Configuration){if(this.item._configEventTriggered)return;this.item._configEventTriggered=!0}for(let x=0;x<this.Subscribers.length;x++)this.Subscribers[x].IsRecipeEditing||this.Subscribers[x]._isAttached&&this.Subscribers[x]._isInitialized&&(null===(R=null===(V=this.Subscribers[x])||void 0===V?void 0:V.Change)||void 0===R||R.trigger(A))}UpdateSubscribers(){for(let x=0;x<this.Subscribers.length;x++)this.Subscribers[x]._isInitialized&&V.mapVariableMasterToChild(this.Subscribers[x],this,this._manager.session)}setImpliciteValue(R){return __awaiter(this,void 0,void 0,(function*(){let D;try{const x=V.ConvertValueByTypeCode(R,this.item.TypeCode);return D=yield this._manager.setVariableValueAsync(this.Name,x,!0),Promise.resolve(D)}catch(V){return A.Logger.WarnLog.log("Set variable value failed",x.Internal.makeString({Variable:this.item.Name,Value:R})),Promise.reject(!1)}}))}Dispose(){A.Dispose(this)}}V.VariableMaster=VariableMaster}(A.DataAccess||(A.DataAccess={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){"use strict";class UnitClassMaster extends x.Internal.Domain.MasterItem{constructor(A,V){super(),this._manager=A,this._isServerAttached=!1,this._isInitialized=!1,this.Name=V,this.Subscribers=[],this.item=new x.Internal.System.DataAccess.UnitClass(this,V);this.InternalChange=new x.Internal.System.Events.TypedEvent,this.InternalChange.add(x=>{this.UpdateUnit(x)})}UpdateUnit(x){this.item.CurrentUnit.DecPoint=x.DecPoint,this.item.CurrentUnit.Offset=x.Offset,this.item.CurrentUnit.Slope=x.Slope,this.item.CurrentUnit.Text=x.Text,this.item.CurrentUnit.X1=x.X1,this.item.CurrentUnit.X2=x.X2,this.item.CurrentUnit.Y1=x.Y1,this.item.CurrentUnit.Y2=x.Y2;for(let A=0;A<this.Subscribers.length;A++)this.Subscribers[A].CurrentUnit.DecPoint=x.DecPoint,this.Subscribers[A].CurrentUnit.Offset=x.Offset,this.Subscribers[A].CurrentUnit.Slope=x.Slope,this.Subscribers[A].CurrentUnit.Text=x.Text,this.Subscribers[A].CurrentUnit.X1=x.X1,this.Subscribers[A].CurrentUnit.X2=x.X2,this.Subscribers[A].CurrentUnit.Y1=x.Y1,this.Subscribers[A].CurrentUnit.Y2=x.Y2}Dispose(){A.Dispose(this)}CreateChild(){const A=new x.Internal.System.DataAccess.UnitClass(this,this.item.Name);return A.CurrentUnit=this.item.CurrentUnit,this.Subscribers.push(A),A}RemoveChild(x){const A=this.Subscribers.indexOf(x);if(A>-1){x&&x.Change.remove();delete this.Subscribers.splice(A,1)[0]}}TriggerChild(){}UpdateChild(){}}V.UnitClassMaster=UnitClassMaster}(A.DataAccess||(A.DataAccess={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){"use strict";function ConvertError(x,V){A.Logger.WarnLog.log("ValueConverter:Value could not be converted by TypeCode",{val:x,typeCode:V})}function ConvertValueByTypeCodeString(A,V){if(x.isNullOrUndefined(A))return A;if(x.isArray(A))return A;let R;switch(V){case"SByte":return R=parseInt(A,10),isNaN(R)?(ConvertError(R,V),A):R>=-128&&R<=127?R:(ConvertError(A,V),A);case"Int16":case"Int32":case"Int64":return R=parseInt(A,10),isNaN(R)?(ConvertError(A,V),A):R;case"Byte":return R=parseInt(A,10),isNaN(R)?(ConvertError(A,V),A):R>=0&&R<=255?R:(ConvertError(A,V),A);case"UInt16":case"UInt32":case"UInt64":return R=parseInt(A,10),isNaN(R)?(ConvertError(A,V),A):R;case"Single":case"Double":return R=parseFloat(A.toString().replace(",",".")),isNaN(R)?(ConvertError(A,V),A):R;case"Boolean":return x.Internal.stringToBoolean(A);case"String":return A;case"DateTime":try{const V=new Date(A);if(x.isDate(V))return V}catch(x){}if(R=parseFloat(A||0),isNaN(R)){const V=new Date(A);return x.isDate(V)?V:A}{const V=new Date(R);return x.isDate(V)?V:A}case"Object":case"Empty":case"":return A}}V.prepareAttachEventArgs=function prepareAttachEventArgs(R,D){let N,U;N="Item already attached"===R.Result||A.MsgHelper.DefaultResultComparer(R.Result),U="string"==typeof R.TimeStamp?new Date(parseFloat(R.TimeStamp)):new Date;const B=R.Quality&&V.createQualityFromEventArgs(R.Quality),F=x.Internal.EnumHelper.convertToNumber(x.System.DataAccess.TypeCode,R.Properties.TypeCode),W=x.Internal.EnumHelper.convertToNumber(x.System.DataAccess.TypeCode,R.Properties.RawTypeCode),H={CalculatedDecPoint:V.ConvertValueByTypeCode(R.Properties.CalculatedDecPoint,x.System.DataAccess.TypeCode.Int64),Comment:R.Properties.Comment,DecPoint:V.ConvertValueByTypeCode(R.Properties.DecPoint,x.System.DataAccess.TypeCode.Int64),IsAttached:x.Internal.stringToBoolean(R.Properties.IsAttached),IsNumeric:x.Internal.stringToBoolean(R.Properties.IsNumeric),LocalizableText:R.Properties.LocalizableText,MaxValue:V.ConvertValueByTypeCode(R.Properties.MaxValue,F),MinValue:V.ConvertValueByTypeCode(R.Properties.MinValue,F),Name:R.Properties.Name,IsQualityGood:x.Internal.stringToBoolean(R.Properties.IsQualityGood),RawTypeCode:W,TypeCode:F,Text:R.Properties.Text,UnitText:R.Properties.UnitText,RawMaxValue:V.ConvertValueByTypeCode(R.Properties.RawMaxValue,W),RawMinValue:V.ConvertValueByTypeCode(R.Properties.RawMinValue,W),RawValue:V.ConvertValueByTypeCode(R.Properties.RawValue,W),Value:V.ConvertValueByTypeCode(R.Properties.Value,F),UseUnitConversion:x.Internal.stringToBoolean(R.Properties.UseUnitConversion),Quality:B,TimeStamp:U};return D.ServerInfo.WebGatewayProtocolVersion>=2&&(H.MaxValueVariableName=R.Properties.MaxValueVariableName,H.MinValueVariableName=R.Properties.MinValueVariableName),D.ServerInfo.WebGatewayProtocolVersion>=5&&(H.IsClientInternal=R.Properties.IsClientInternal),D.ServerInfo.WebGatewayProtocolVersion>=18&&(H.AccessRight=x.Internal.EnumHelper.convertToNumber(x.System.DataAccess.AccessRight,R.Properties.AccessRight)||x.System.DataAccess.AccessRight.ReadWrite,7.2===D.ClientManager.RuntimeVersion&&(H.FieldSize=R.Properties.FieldSize||[],H.FieldOffset=R.Properties.FieldOffset||[]),7.3!==D.ClientManager.RuntimeVersion&&7.4!==D.ClientManager.RuntimeVersion||(H.FieldSize=R.Properties.FieldSizes||[],H.FieldOffset=R.Properties.FieldOffsets||[],H.FieldSizes=R.Properties.FieldSizes||[],H.FieldOffsets=R.Properties.FieldOffsets||[])),{Result:N,ItemProperties:H}},V.mapItemInfoToVariableMaster=function mapItemInfoToVariableMaster(A,V,R){A.Name===V.Name&&(A.item.TypeCode=V.TypeCode,A.item.CalculatedDecPoint=V.CalculatedDecPoint,A.item.Comment=V.Comment,A.item.DecPoint=V.DecPoint,A.item.IsAttached=V.IsAttached,A.item.IsNumeric=V.IsNumeric,A.item.IsQualityGood=V.IsQualityGood,A.item.IsValid=!0,A.item.LocalizableText=V.LocalizableText,A.item.MaxValue=V.MaxValue,A.item.MinValue=V.MinValue,A.item.RawMaxValue=V.RawMaxValue,A.item.RawMinValue=V.RawMinValue,A.item.RawTypeCode=V.RawTypeCode,A.item.RawValue=V.RawValue,A.item.Text=V.Text,A.item.TimeStamp=V.TimeStamp,A.item.TypeCode=V.TypeCode,A.item.UseUnitConversion=V.UseUnitConversion,V.UnitText?A.item.UnitText=V.UnitText:A.item.UnitText="",A.item.SetValueMember(V.Value),A.item.Quality=V.Quality,A.item.Quality.Data=x.System.DataAccess.DataQuality.Uncertain,R.ServerInfo.WebGatewayProtocolVersion>=2&&(A.item.MaxValueVariableName=V.MaxValueVariableName,A.item.MinValueVariableName=V.MinValueVariableName),R.ServerInfo.WebGatewayProtocolVersion>=5&&(A.item.IsClientInternal=V.IsClientInternal),R.ServerInfo.WebGatewayProtocolVersion>=18&&(A.item.AccessRight=V.AccessRight,7.2===R.ClientManager.RuntimeVersion&&(A.item.FieldSize=V.FieldSize,A.item.FieldOffset=V.FieldOffset),7.3!==R.ClientManager.RuntimeVersion&&7.4!==R.ClientManager.RuntimeVersion||(A.item.FieldSize=V.FieldSizes,A.item.FieldOffset=V.FieldOffsets,A.item.FieldSizes=V.FieldSizes,A.item.FieldOffsets=V.FieldOffsets)))},V.mapVariableMasterToChild=function mapVariableMasterToChild(x,A,V){return x.Comment=A.item.Comment,x.IsAttached=A.item.IsAttached,x._isAttached=A.item._isAttached,x._isInitialized=A.item._isInitialized,x.IsEditing=A.item.IsEditing,x.IsNumeric=A.item.IsNumeric,x.IsQualityGood=A.item.IsQualityGood,x.IsValid=A.item.IsValid,x.MaxValue=A.item.MaxValue,x.MinValue=A.item.MinValue,x.RawMaxValue=A.item.RawMaxValue,x.RawMinValue=A.item.RawMinValue,x.RawValue=A.item.RawValue,A.item.LocalizableText&&(x.LocalizableText=A.item.LocalizableText),x.Text=A.item.Text,x.TimeStamp=A.item.TimeStamp,x.TypeCode=A.item.TypeCode,x.RawTypeCode=A.item.RawTypeCode,x.UnitText=A.item.UnitText||"",x.UseUnitConversion=A.item.UseUnitConversion,x.SetValueMember(A.item.Value),x.PreviousRawValue=A.item.PreviousRawValue,x.PreviousValue=A.item.PreviousValue,x.Quality=A.item.Quality,x.Source=A.item.Source,V.ServerInfo.WebGatewayProtocolVersion>=2&&(x.MaxValueVariableName=A.item.MaxValueVariableName,x.MinValueVariableName=A.item.MinValueVariableName),V.ServerInfo.WebGatewayProtocolVersion>=5&&(x.IsClientInternal=A.item.IsClientInternal),V.ServerInfo.WebGatewayProtocolVersion>=18&&(x.AccessRight=A.item.AccessRight,7.2===V.ClientManager.RuntimeVersion&&(x.FieldSize=A.item.FieldSize,x.FieldOffset=A.item.FieldOffset),7.3!==V.ClientManager.RuntimeVersion&&7.4!==V.ClientManager.RuntimeVersion||(x.FieldSize=A.item.FieldSizes,x.FieldOffset=A.item.FieldOffsets,x.FieldSizes=A.item.FieldSizes,x.FieldOffsets=A.item.FieldOffsets)),x},V.prepareChangeEventArgs=function prepareChangeEventArgs(A,R){const D=x.Internal.EnumHelper.convertToNumber(x.System.DataAccess.ChangeSource,A.Properties.Source);return R&&R.Name===A.Properties.Name&&(R.item.PreviousRawValue=V.ConvertValueByTypeCode(A.Properties.PreviousRawValue,R.item.RawTypeCode)||0,R.item.PreviousValue=V.ConvertValueByTypeCode(A.Properties.PreviousValue,R.item.TypeCode)||0,R.item.RawValue=V.ConvertValueByTypeCode(A.Properties.RawValue,R.item.RawTypeCode),R.item.SetValueMember(V.ConvertValueByTypeCode(A.Properties.Value,R.item.TypeCode)),R.item.Quality?V.updateQualityFromEventArgs(A.Quality,R):R.item.Quality=V.createQualityFromEventArgs(A.Quality),R.item.IsQualityGood=!R.item.Quality.IsBad,R.item.RecipeMode=!1,R.item.TimeStamp=x.isDate(A.Properties.TimeStamp)?A.Properties.TimeStamp:new Date(A.Properties.TimeStamp),R.item.Source=x.isNumber(A.Properties.Source)?A.Properties.Source:D,!0===R.item.Quality.IsGoodOrUncertain&&(R.item.IsAttached=!0,R.IsAttached=!0,R.item.Quality.Data=V.createQualityFromEventArgs(A.Quality).Data)),V.createChangeEventArgs(R)},V.createChangeEventArgs=function createChangeEventArgs(x){return{Value:x.item.Value,PreviousRawValue:x.item.PreviousRawValue,PreviousValue:x.item.PreviousValue,Quality:x.item.Quality,RawValue:x.item.RawValue,RecipeMode:x.item.RecipeMode,TimeStamp:x.item.TimeStamp,Source:x.item.Source,Name:x.item.Name}},V.createQualityFromEventArgs=function createQualityFromEventArgs(A){const V=new x.Internal.System.DataAccess.Quality;return V.Data=x.isNumber(A.Data)?A.Data:x.Internal.EnumHelper.convertToNumber(x.System.DataAccess.DataQuality,A.Data),V.IsBad=x.isBoolean(A.IsBad)?A.IsBad:x.Internal.stringToBoolean(A.IsBad),V.IsGoodOrUncertain=x.isBoolean(A.IsGoodOrUncertain)?A.IsGoodOrUncertain:x.Internal.stringToBoolean(A.IsGoodOrUncertain),V.Limit=x.isNumber(A.Limit)?A.Limit:x.Internal.EnumHelper.convertToNumber(x.System.DataAccess.LimitQuality,A.Limit),V.Value=A.Value,V},V.updateQualityFromEventArgs=function updateQualityFromEventArgs(A,V){return V.item.Quality&&(V.item.Quality.Data=x.isNumber(A.Data)?A.Data:x.Internal.EnumHelper.convertToNumber(x.System.DataAccess.DataQuality,A.Data),V.item.Quality.IsBad=x.isBoolean(A.IsBad)?A.IsBad:x.Internal.stringToBoolean(A.IsBad),V.item.Quality.IsGoodOrUncertain=x.isBoolean(A.IsGoodOrUncertain)?A.IsGoodOrUncertain:x.Internal.stringToBoolean(A.IsGoodOrUncertain),V.item.Quality.Limit=x.isNumber(A.Limit)?A.Limit:x.Internal.EnumHelper.convertToNumber(x.System.DataAccess.LimitQuality,A.Limit),V.item.Quality.Value=A.Value),V},V.ConvertValueByTypeCodeString=ConvertValueByTypeCodeString,V.ConvertDataTypeToTypeCode=function ConvertDataTypeToTypeCode(A){switch(A){case"VT_I1":return x.System.DataAccess.TypeCode.SByte;case"VT_I2":return x.System.DataAccess.TypeCode.Int16;case"VT_I4":return x.System.DataAccess.TypeCode.Int32;case"VT_INT":return x.System.DataAccess.TypeCode.Int64;case"VT_UI1":return x.System.DataAccess.TypeCode.Byte;case"VT_UI2":return x.System.DataAccess.TypeCode.UInt16;case"VT_UI4":return x.System.DataAccess.TypeCode.UInt32;case"VT_UINT":return x.System.DataAccess.TypeCode.UInt64;case"VT_R4":return x.System.DataAccess.TypeCode.Single;case"VT_R8":return x.System.DataAccess.TypeCode.Double;case"VT_BOOL":return x.System.DataAccess.TypeCode.Boolean;case"VT_BSTR":return x.System.DataAccess.TypeCode.String;case"VT_DATE":return x.System.DataAccess.TypeCode.DateTime;case"VT_STRUCT":default:return x.System.DataAccess.TypeCode.Empty}},V.ConvertTypeCodeToDataType=function ConvertTypeCodeToDataType(A){switch(A){case"SByte":return x.System.DataAccess.DataType.VT_I1;case"Int16":return x.System.DataAccess.DataType.VT_I2;case"Int32":return x.System.DataAccess.DataType.VT_I4;case"Int64":return x.System.DataAccess.DataType.VT_INT;case"Byte":return x.System.DataAccess.DataType.VT_UI1;case"UInt16":return x.System.DataAccess.DataType.VT_UI2;case"UInt32":return x.System.DataAccess.DataType.VT_UI4;case"UInt64":return x.System.DataAccess.DataType.VT_UINT;case"Single":return x.System.DataAccess.DataType.VT_R4;case"Double":return x.System.DataAccess.DataType.VT_R8;case"Boolean":return x.System.DataAccess.DataType.VT_BOOL;case"String":return x.System.DataAccess.DataType.VT_BSTR;case"DateTime":return x.System.DataAccess.DataType.VT_DATE;case"Empty":case"":default:return x.System.DataAccess.DataType.VT_EMPTY}},V.ConvertValueByTypeCode=function ConvertValueByTypeCode(A,V){return null===A?A:ConvertValueByTypeCodeString(A,x.System.DataAccess.TypeCode[V])}}(A.DataAccess||(A.DataAccess={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(A){"use strict";function createQualityFromStrings(A){const V=new x.Internal.System.DataAccess.Quality;return V.Data=x.Internal.EnumHelper.convertToNumber(x.System.DataAccess.DataQuality,A.Data),V.IsBad=x.Internal.stringToBoolean(A.IsBad),V.IsGoodOrUncertain=x.Internal.stringToBoolean(A.IsGoodOrUncertain),V.Limit=x.Internal.EnumHelper.convertToNumber(x.System.DataAccess.LimitQuality,A.Limit),V.Value=A.Value,V}A.createQualityFromStrings=createQualityFromStrings,A.setValueResult=function setValueResult(A,V){let R=new x.Internal.System.DataAccess.Quality;x.isNullOrUndefined(A.Quality)||(R=createQualityFromStrings(A.Quality));const D=x.Internal.EnumHelper.convertToNumber(x.System.DataAccess.VariableValueErrorCode,A.Result),N={Result:D,VariableName:V,Value:D};let U=!1;return x.System.DataAccess.VariableValueErrorCode.Succeeded===D&&(U=!0),{Success:U,Errors:N,Quality:R}},A.setBitResult=function setBitResult(A,V){let R=new x.Internal.System.DataAccess.Quality;x.isNullOrUndefined(A.Quality)||(R=createQualityFromStrings(A.Quality));const D=x.Internal.EnumHelper.convertToNumber(x.System.DataAccess.VariableValueErrorCode,A.Result),N={Result:D,VariableName:V,Value:D,BitNumber:-1};let U=!1;return x.System.DataAccess.VariableValueErrorCode.Succeeded===D&&(U=!0),{Success:U,Errors:N,Quality:R}},A.getValueResult=function getValueResult(V){let R=new x.Internal.System.DataAccess.Quality;x.isNullOrUndefined(V.Quality)||(R=createQualityFromStrings(V.Quality));const D=x.Internal.EnumHelper.convertToNumber(x.System.DataAccess.VariableValueErrorCode,V.Result),N=A.ConvertValueByTypeCode(V.Value,x.Internal.EnumHelper.convertToNumber(x.System.DataAccess.TypeCode,V.TypeCode)),U={Result:D,VariableName:V.Name,Quality:R,TypeCode:x.Internal.EnumHelper.convertToNumber(x.System.DataAccess.TypeCode,V.TypeCode),Value:N};let B=!1;return x.System.DataAccess.VariableValueErrorCode.Succeeded===D&&(B=!0),{Value:N,Success:B,Errors:U,TimeStamp:new Date(V.TimeStamp)}}}(A.DataAccess||(A.DataAccess={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){"use strict";V.DataAccess=class DataAccess{constructor(x){this._manager=x,this.VariableMasters=new V.DataStore,this.UnitClasses=new V.DataStore}Dispose(){this.VariableMasters.DeleteAll(),this.UnitClasses.DeleteAll()}addVariablemaster(x){this.VariableMasters.Add(x.Name,x)}getVariableMasterByName(x){return this.VariableMasters.GetFromKey(x)}getVariableMaster(x){return this.VariableMasters.GetFromObjectKey("Name",x)}getAllVariableMasters(){return this.VariableMasters.GetAll()}removeVariableMaster(V){this._manager.session.Settings.System.Debug&&A.Logger.AppDomainLog.log("RemoveVariable",{master:V},x.Internal.System.Diagnostics.Logging.AppDomainEventSource.DataAccess,x.Internal.System.Diagnostics.Logging.AppDomainCategorySource.Store),this.VariableMasters.Delete(V.Name)}getUnitClassMaster(x){return this.UnitClasses.GetFromKeyValue("Name",x)}removeUnitClassMaster(V){this._manager.session.Settings.System.Debug&&A.Logger.AppDomainLog.log("RemoveUnitClass",{unitClass:V},x.Internal.System.Diagnostics.Logging.AppDomainEventSource.DataAccess,x.Internal.System.Diagnostics.Logging.AppDomainCategorySource.Store)}addUnitClassMaster(V){this._manager.session.Settings.System.Debug&&A.Logger.AppDomainLog.log("AddUnitClass",{unitClass:V},x.Internal.System.Diagnostics.Logging.AppDomainEventSource.DataAccess,x.Internal.System.Diagnostics.Logging.AppDomainCategorySource.Store),this.UnitClasses.Add(V.Name,V)}}}(A.Store||(A.Store={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){!function(x){!function(x){"use strict";x.Commands={CHANGEITEM:"ChangeItem",CHANGEITEMS:"ChangeItems",CHANGEUNIT:"ChangeUnit",Q_DETACHITEMS:"QDetachItems",Q_ATTACHITEMS:"QAttachItems",R_ATTACHITEMS:"RAttachItems",Q_GETRAWVALUES:"QGetRawValues",R_GETRAWVALUES:"RGetRawValues",Q_GETUNITCLASS:"QGetUnitClass",R_GETUNITCLASS:"RGetUnitClass",Q_GETUNITCLASSES:"QGetUnitClasses",R_GETUNITCLASSES:"RGetUnitClasses",Q_GETVALUES:"QGetValues",R_GETVALUES:"RGetValues",Q_SETVALUES:"QSetValues",R_SETVALUES:"RSetValues",Q_SETRAWVALUES:"QSetRawValues",R_SETRAWVALUES:"RSetRawValues"}}(x.QueryHandler||(x.QueryHandler={}))}(x.DataAccess||(x.DataAccess={}))}(x.Domain||(x.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(R){"use strict";function AttachItemsResponse(R,D){return __awaiter(this,void 0,void 0,(function*(){if(D.session){const N=R.ItemInfos.length;for(let x=0;x<N;x++){const N=D.session.DataAccessManager._getVariableMasterFromStore(R.ItemInfos[x].Name);if(N){const A=V.prepareAttachEventArgs(R.ItemInfos[x],D.session);A.Result?(V.mapItemInfoToVariableMaster(N,A.ItemProperties,D.session),N.UpdateSubscribers()):(N.IsAttached=!1,N.item._isAttached=!1)}else A.Logger.WarnLog.log("Received unknown variable from server",R.ItemInfos[x].Name)}const U=[];for(let x=0;x<N;x++)R.ItemInfos[x].ProcessUnitClass&&R.ItemInfos[x].ProcessUnitClass.CurrentUnit&&R.ItemInfos[x].ProcessUnitClass.CurrentUnit.Name&&U.push({ClassType:"ProcessUnitClass",ClassName:R.ItemInfos[x].ProcessUnitClass.CurrentUnit.Name}),R.ItemInfos[x].DisplayUnitClass&&R.ItemInfos[x].DisplayUnitClass.CurrentUnit&&R.ItemInfos[x].DisplayUnitClass.CurrentUnit.Name&&U.push({ClassType:"DisplayUnitClass",ClassName:R.ItemInfos[x].DisplayUnitClass.CurrentUnit.Name});if(U.length>0){const x=U.map(x=>x.ClassName),A=[];for(let V=0;V<x.length;V++){D.session.DataAccessManager._getUnitClassMasterFromStore(x[V])||A.push(x[V])}A.length>0&&(yield D.session.DataAccessManager.getUnitClassesAsync(A))}for(let U=0;U<N;U++){let N="";const B=D.session.DataAccessManager._getVariableMasterFromStore(R.ItemInfos[U].Name);if(B){const F=V.prepareAttachEventArgs(R.ItemInfos[U],D.session);R.ItemInfos[U].ProcessUnitClass&&R.ItemInfos[U].ProcessUnitClass.CurrentUnit&&R.ItemInfos[U].ProcessUnitClass.CurrentUnit.Name&&(N=R.ItemInfos[U].ProcessUnitClass.CurrentUnit.Name),R.ItemInfos[U].DisplayUnitClass&&R.ItemInfos[U].DisplayUnitClass.CurrentUnit&&R.ItemInfos[U].DisplayUnitClass.CurrentUnit.Name&&(N=R.ItemInfos[U].DisplayUnitClass.CurrentUnit.Name);try{if(""!==N)try{const A=D.session.DataAccessManager._getUnitClassMasterFromStore(N);if(A){if(null===B.item.UnitClass){const V=A.CreateChild();B.item.UnitClass=V,R.ItemInfos[U].ProcessUnitClass&&(B.item.UnitClass.UnitClassType=x.System.DataAccess.UnitClassType.Process),R.ItemInfos[U].DisplayUnitClass&&(B.item.UnitClass.UnitClassType=x.System.DataAccess.UnitClassType.Display);for(let x=0;x<A.Subscribers.length;x++)A.Subscribers[x].UnitClassType=B.item.UnitClass.UnitClassType}}else{yield D.session.DataAccessManager.getUnitClassAsync(N);const A=D.session.DataAccessManager._getUnitClassMasterFromStore(N);if(A){if(R.ItemInfos[U].ProcessUnitClass&&(A.item.UnitClassType=x.System.DataAccess.UnitClassType.Process),R.ItemInfos[U].DisplayUnitClass&&(A.item.UnitClassType=x.System.DataAccess.UnitClassType.Display),null===B.item.UnitClass){const x=A.CreateChild();B.item.UnitClass=x}for(let x=0;x<A.Subscribers.length;x++)A.Subscribers[x].UnitClassType=A.item.UnitClassType}}const V=B.Subscribers.length;for(let A=0;A<V;A++){const V=D.session.DataAccessManager._getUnitClassMasterFromStore(N);if(V){R.ItemInfos[U].DisplayUnitClass&&V.item.Name===R.ItemInfos[U].DisplayUnitClass.CurrentUnit.Name&&(V.UpdateUnit(R.ItemInfos[U].DisplayUnitClass.CurrentUnit),V.item.CurrentUnit.LocalizableText=R.ItemInfos[U].DisplayUnitClass.Name,V.item.UnitClassType=x.System.DataAccess.UnitClassType.Display),R.ItemInfos[U].ProcessUnitClass&&V.item.Name===R.ItemInfos[U].ProcessUnitClass.CurrentUnit.Name&&(V.UpdateUnit(R.ItemInfos[U].ProcessUnitClass.CurrentUnit),V.item.CurrentUnit.LocalizableText=R.ItemInfos[U].ProcessUnitClass.Name,V.item.UnitClassType=x.System.DataAccess.UnitClassType.Process);for(let x=0;x<V.Subscribers.length;x++)V.Subscribers[x].UnitClassType=V.item.UnitClassType;if(B.item.UnitClass&&null===B.Subscribers[A].UnitClass){const x=V.CreateChild();B.Subscribers[A].UnitClass=x}}}}catch(x){A.Logger.ErrorLog.log("GetUnitClassAsync Error:",B.item.UnitClass.Name)}}catch(x){A.Logger.ErrorLog.log("Error in AttachItemsResponse")}B.IsAttached=F.Result,B.item.IsAttached=F.Result,B.item._isAttached=F.Result,B.item._isInitialized=F.Result,F.Result&&(B.item._configEventTriggered||V.mapItemInfoToVariableMaster(B,F.ItemProperties,D.session),B.UpdateSubscribers())}}D.ResolvePromise({handler:R},R.Authorized,!1),D.Dispose()}return null}))}R.AttachItemsQuery=function AttachItemsQuery(V){const D=[],N=V.length;for(let x=0;x<N;x++)D.push({ItemName:V[x],RequiredProperties:["Value","PreviousRawValue","PreviousValue","Quality","RawValue","RecipeMode","TimeStamp","Source"]});const U=new A.MsgHelper.TelegramHelper(R.Commands.Q_ATTACHITEMS,R.Commands.R_ATTACHITEMS);return U.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.DataAccess,U.fnResponse=AttachItemsResponse,U.CmdVal.val={RequestID:U.RequestID,Varlist:D},U}}(V.QueryHandler||(V.QueryHandler={}))}(A.DataAccess||(A.DataAccess={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";V.DetachItemsQuery=function DetachItemsQuery(R){const D=[];for(let x=0;x<R.length;x++)D.push({ItemName:R[x]});const N=new A.MsgHelper.TelegramHelper(V.Commands.Q_DETACHITEMS,"");return N.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.UserManagement,N.hasResponse=!1,N.CmdVal.val={RequestID:N.RequestID,ItemList:R},N}}(V.QueryHandler||(V.QueryHandler={}))}(A.DataAccess||(A.DataAccess={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";function SetValuesResponse(x,A){A.ResolvePromise({handler:x,cmd:A},x.Authorized,!1)}V.SetValuesQuery=function SetValuesQuery(R,D){const N=new A.MsgHelper.TelegramHelper(V.Commands.Q_SETVALUES,V.Commands.R_SETVALUES);N.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.DataAccess,N.fnResponse=SetValuesResponse;const U=[];for(let x=0;x<R.length;x++)U.push({Name:R[x],Value:D[x],BitNumber:-1});return N.CmdVal.val={RequestID:N.RequestID,ItemValues:U},N}}(V.QueryHandler||(V.QueryHandler={}))}(A.DataAccess||(A.DataAccess={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";function SetRawValuesResponse(x,A){A.ResolvePromise({handler:x,cmd:A},x.Authorized,!1)}V.SetRawValuesQuery=function SetRawValuesQuery(R,D){const N=new A.MsgHelper.TelegramHelper(V.Commands.Q_SETRAWVALUES,V.Commands.R_SETRAWVALUES);N.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.DataAccess,N.fnResponse=SetRawValuesResponse;const U=[];for(let x=0;x<R.length;x++)U.push({Name:R[x],Value:D[x],BitNumber:-1});return N.CmdVal.val={RequestID:N.RequestID,ItemValues:U},N}}(V.QueryHandler||(V.QueryHandler={}))}(A.DataAccess||(A.DataAccess={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";function GetUnitClassResponse(x,A){if(A.session&&x.UnitClass){const V=A.session.DataAccessManager._getUnitClassMasterFromStore(x.UnitClass.CurrentUnit.Name);V.item.CurrentUnit=x.UnitClass.CurrentUnit,V.item.CurrentUnit.LocalizableText=x.UnitClass.Name,V.InternalChange.trigger(x.UnitClass.CurrentUnit)}x.UnitClass?A.ResolvePromise({handler:x},x.Authorized):A.ResolvePromise({handler:x},!1)}V.GetUnitClassQuery=function GetUnitClassQuery(R){const D=new A.MsgHelper.TelegramHelper(V.Commands.Q_GETUNITCLASS,V.Commands.R_GETUNITCLASS);return D.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.DataAccess,D.fnResponse=GetUnitClassResponse,D.CmdVal.val={RequestID:D.RequestID,UnitClassName:R},D}}(V.QueryHandler||(V.QueryHandler={}))}(A.DataAccess||(A.DataAccess={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";function GetValuesResponse(x,A){A.ResolvePromise({handler:x,cmd:A},x.Authorized)}V.GetValuesQuery=function GetValuesQuery(R){const D=new A.MsgHelper.TelegramHelper(V.Commands.Q_GETVALUES,V.Commands.R_GETVALUES);return D.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.DataAccess,D.fnResponse=GetValuesResponse,D.CmdVal.val={RequestID:D.RequestID,ItemList:R},D}}(V.QueryHandler||(V.QueryHandler={}))}(A.DataAccess||(A.DataAccess={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";function GetRawValuesResponse(x,A){A.ResolvePromise({handler:x,cmd:A},x.Authorized)}V.GetRawValuesQuery=function GetRawValuesQuery(R){const D=new A.MsgHelper.TelegramHelper(V.Commands.Q_GETRAWVALUES,V.Commands.R_GETRAWVALUES);return D.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.DataAccess,D.fnResponse=GetRawValuesResponse,D.CmdVal.val={RequestID:D.RequestID,ItemList:R},D}}(V.QueryHandler||(V.QueryHandler={}))}(A.DataAccess||(A.DataAccess={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";function SetBitsResponse(x,A){A.ResolvePromise({handler:x,cmd:A},x.Authorized,!1)}V.SetBitsQuery=function SetBitsQuery(R,D,N){const U=new A.MsgHelper.TelegramHelper(V.Commands.Q_SETVALUES,V.Commands.R_SETVALUES);U.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.DataAccess,U.fnResponse=SetBitsResponse;const B=[];for(let x=0;x<R.length;x++)B.push({Name:R[x],Value:N[x],BitNumber:D[x]});return U.CmdVal.val={RequestID:U.RequestID,ItemValues:B},U}}(V.QueryHandler||(V.QueryHandler={}))}(A.DataAccess||(A.DataAccess={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";function _variableChangeEventArgs(V,R){const D=V.Properties,N=R.DataAccessManager._getVariableMasterFromStore(D.Name),U=x.Internal.Domain.DataAccess.prepareChangeEventArgs(V,N);N&&N._useEventqueue&&!N.item._isAttached?N._eventqueue.push([V]):N&&N.IsAttached?N.Change(U):N&&(A.Logger.InfoLog.log("Unhandled Variable Change Event"),A.Logger.InfoLog.log(x.Internal.makeString(V.Properties)))}V._variableChangeEventArgs=_variableChangeEventArgs,V._registerChangeItemCallback=function _registerChangeItemCallback(R){const D=new A.MsgHelper.TelegramHelper(V.Commands.CHANGEITEM,V.Commands.CHANGEITEM);D.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.DataAccess,D.fnResponse=x=>{_variableChangeEventArgs(x,R)},D.subscribesToEvent=!0,D.hasResponse=!1,D.RequestID=V.Commands.CHANGEITEM,D.CmdVal.val={RequestID:D.RequestID},R.SrvHnd.MsgHnd.addCallbackHandler(D)}}(V.QueryHandler||(V.QueryHandler={}))}(A.DataAccess||(A.DataAccess={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";function _variablesChangeEventArgs(V,R){const D=V.length;for(let N=0;N<D;N++){const D=V[N].Properties,U=R.DataAccessManager._getVariableMasterFromStore(D.Name);if(U&&U._useEventqueue&&!U.item._isAttached)return void(!1===x.Application.Settings.System.DeactivateEventQueue&&U._eventqueue.push(V));let B;U&&U.IsAttached||U&&U.item.IsAttached?(B=x.Internal.Domain.DataAccess.prepareChangeEventArgs(V[N],U),U.Change(B)):(A.Logger.InfoLog.log("Unhandled Variable Change Event"),A.Logger.InfoLog.log(x.Internal.makeString(V)))}}V._variablesChangeEventArgs=_variablesChangeEventArgs,V._registerChangeItemsCallback=function _registerChangeItemsCallback(R){const D=new A.MsgHelper.TelegramHelper(V.Commands.CHANGEITEMS,V.Commands.CHANGEITEMS);D.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.DataAccess,D.fnResponse=x=>{_variablesChangeEventArgs(x,R)},D.subscribesToEvent=!0,D.hasResponse=!1,D.RequestID=V.Commands.CHANGEITEMS,D.CmdVal.val={RequestID:D.RequestID},R.SrvHnd.MsgHnd.addCallbackHandler(D)}}(V.QueryHandler||(V.QueryHandler={}))}(A.DataAccess||(A.DataAccess={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";V._registerChangeUnitCallback=function _registerChangeUnitCallback(R){const D=new A.MsgHelper.TelegramHelper(V.Commands.CHANGEUNIT,V.Commands.CHANGEUNIT);D.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.DataAccess,D.fnResponse=x=>{!function _unitClassChangeEventArgs(x,A){if(x.UnitClass&&x.UnitClass.CurrentUnit){const V=A.DataAccessManager._getUnitClassMasterFromStore(x.UnitClass.CurrentUnit.Name);if(V){V.InternalChange.trigger(x.UnitClass.CurrentUnit);const R=V.Subscribers.length;for(let x=0;x<R;x++)V.Subscribers[x].Change.trigger(V.Subscribers[x].CurrentUnit);!function _updateVariableUnit(x,A){const V=A.DataAccessManager._getAllVariableMastersFromStore(),R=V.length;for(let A=0;A<R;A++)V[A].item.UnitClass&&V[A].item.UnitText&&V[A].item.UnitClass.Name===x.Name&&(V[A].item.UnitText=x.Text,V[A].UpdateSubscribers())}(x.UnitClass.CurrentUnit,A)}}}(x,R)},D.subscribesToEvent=!0,D.hasResponse=!1,D.RequestID=V.Commands.CHANGEUNIT,D.CmdVal.val={RequestID:D.RequestID},R.SrvHnd.MsgHnd.addCallbackHandler(D)}}(V.QueryHandler||(V.QueryHandler={}))}(A.DataAccess||(A.DataAccess={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";function GetUnitClassesResponse(x,A){let V=!0;if(A.session&&x.UnitClassesWithNames)for(let R=0;R<x.UnitClassesWithNames.length;R++)if(x.UnitClassesWithNames[R].UnitClass||(V=!1),x.UnitClassesWithNames[R].UnitClass){const V=A.session.DataAccessManager._getUnitClassMasterFromStore(x.UnitClassesWithNames[R].UnitClass.CurrentUnit.Name);V.item.CurrentUnit=x.UnitClassesWithNames[R].UnitClass.CurrentUnit,V.item.CurrentUnit.LocalizableText=x.UnitClassesWithNames[R].UnitClass.Name,V.InternalChange.trigger(x.UnitClassesWithNames[R].UnitClass.CurrentUnit)}A.ResolvePromise({handler:x},x.Authorized)}V.GetUnitClassesQuery=function GetUnitClassesQuery(R){const D=new A.MsgHelper.TelegramHelper(V.Commands.Q_GETUNITCLASSES,V.Commands.R_GETUNITCLASSES);return D.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.DataAccess,D.fnResponse=GetUnitClassesResponse,D.CmdVal.val={RequestID:D.RequestID,UnitClassNames:R},D}}(V.QueryHandler||(V.QueryHandler={}))}(A.DataAccess||(A.DataAccess={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(x){x.Domain||(x.Domain={})}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){"use strict";class LanguageManager extends A.ManagerBase{constructor(V){super(V),this.delayedLocalizableTexts=[],this.delayedLocalizableTextsTimeoutID=0,this.masterItemsCol=[],this.masterItemsColTimeoutID=0,this.ID=x.Guid(),this.Type.Namespace="VisiWin.Internal.Application.Manager",this.Type.TypeName="LanguageManager",this._store=new A.Store.Language,A.Language.QueryHandler.registerLocalizedTextChangeCallback(V),A.Language.QueryHandler.registerLocalizedTextsChangeCallback(V),A.Language.QueryHandler.registerLanguageChangedCallback(V),this.attachLocTextHelper=new A.QueryHelper.CmdCollector(this.cmdCollectorConfigAttachLocText()),this.textFormatsChanged=new x.Internal.System.Events.TypedEvent}Dispose(){this._store.Dispose(),A.Dispose(this.LanguageService),A.Dispose(this._LanguageService);for(const x in this)Object.prototype.hasOwnProperty.call(this,x)&&delete this[x]}get LanguageService(){return this._LanguageService||(this._LanguageService=new x.Internal.System.Language.LanguageService(this)),this._LanguageService}getLocalizedTextAsync(V){return __awaiter(this,void 0,void 0,(function*(){const R=this.getLocTextMaster(V);let D;if(R&&R._isServerAttached)return D=R.CreateChild(),setTimeout(()=>{D.Changed.trigger(A.Language.mapLocalizedTextProperties(D))},1),Promise.resolve(D);{const R=this.createLocTextMaster(V);if(D=R.CreateChild(),x.Utilities&&x.Utilities.isInDesignMode()&&x.DesignHelper&&x.DesignHelper.GetLocalizedTexts)return x.DesignHelper.GetLocalizedTexts([V]),D;let N={Master:null,Childs:null,Requests:null,Promises:null};try{N=yield this.attachLocTextHelper.attachSomethingAsync([R],[D],"FullQualifiedText")}catch(x){A.Logger.ErrorLog.log("SubscribeLocalizedTexts Failed:"+D.FullQualifiedText)}const U=N.Master.length;for(let x=0;x<U;x++)if(N.Master[x].item.FullQualifiedText===N.Master[x].item.DisplayText)return A.Logger.WarnLog.log("LocalizedText is invalid! "+N.Master[x].Name),Promise.reject(D);this.getLocTextMaster(V)._isServerAttached=!0;const B=N.Childs.length;for(let x=0;x<B;x++)setTimeout(()=>{D.Changed.trigger(A.Language.mapLocalizedTextProperties(R.item))},1);return Promise.resolve(D)}}))}cmdCollectorConfigAttachLocText(){return{masterItemsCol:this.masterItemsCol,masterItemsColTimeoutID:this.masterItemsColTimeoutID,masterItemsColDelayTime:this.session.Settings.System.AttachDelay,QueryFn:A.Language.QueryHandler.SubscribeLocalizedTextsQuery,session:this.session}}_subscribeLocalizedTextsAsync(x){return __awaiter(this,void 0,void 0,(function*(){if(0===x.length)return Promise.reject("no texts were provided");const V=[],R=[],D=[],N=x.length;for(let U=0;U<N;U++){let N=this._store.getLocalizedTextMaster(x[U]);if(N){R.push(N);const x=N.CreateChild();N._isServerAttached||N.itemState===A.MasterItemState.attached?D.push(x):V.push(x)}else if(""!==x[U]){N=this.createLocTextMaster(x[U]),R.push(N);const A=N.CreateChild();V.push(A)}}if(D.length===R.length){const x=D.length;for(let V=0;V<x;V++)setTimeout(()=>{D[V].Changed.trigger(A.Language.mapLocalizedTextProperties(D[V]))},1);return Promise.resolve(D)}{this.masterItemsCol=[];let x={Master:null,Childs:null,Requests:null,Promises:null};try{x=yield this.attachLocTextHelper.attachSomethingAsync([R],[V],"FullQualifiedText")}catch(x){}const N=D.length;for(let x=0;x<N;x++)setTimeout(()=>{D[x].Changed.trigger(A.Language.mapLocalizedTextProperties(D[x]))},1);const U=x.Master.length;for(let A=0;A<U;A++)for(let V=0;V<x.Master[A].length;V++)x.Master[A][V].triggerSubscriberChange();const B=x.Childs.length;for(let A=0;A<B;A++)return Promise.resolve(x.Childs[A])}return Promise.reject(!1)}))}getTextAsync(x){return __awaiter(this,void 0,void 0,(function*(){const A=(yield this.getTextsAsync([x]))[0];return Promise.resolve(A)}))}getTextsAsync(V){return __awaiter(this,void 0,void 0,(function*(){const R=[];let D=!1;const N=(V=V.filter(x=>""!==x)).length;for(let x=0;x<N;x++)this._store.getLocalizedTextMaster(V[x])?R.push({FullQualifiedText:V[x],DisplayText:"",Ready:!0}):(D=!0,R.push({FullQualifiedText:V[x],DisplayText:"",Ready:!1}));if(!D){const x=R.map(x=>this._store.getLocalizedTextMaster(x.FullQualifiedText).item.DisplayText);return Promise.resolve(x)}const U=new Promise((x,A)=>{this.delayedLocalizableTexts.push({requestedTextList:R,promise:{onComplete:x,onError:A}})});return this.delayedLocalizableTextsTimeoutID&&0!==this.delayedLocalizableTextsTimeoutID||(this.delayedLocalizableTextsTimeoutID=setTimeout(()=>__awaiter(this,void 0,void 0,(function*(){const V=this.delayedLocalizableTexts;this.delayedLocalizableTexts=[],window.clearTimeout(this.delayedLocalizableTextsTimeoutID),this.delayedLocalizableTextsTimeoutID=0;const R=this.makeLocalizableTextsUnique(V);let D=null;try{const x=yield this._subscribeLocalizedTextsAsync(R);x&&(D=x)}catch(x){A.Logger.ErrorLog.log("Subscribe localized text error:",R)}try{if(D){const A=D.length;for(let x=0;x<A;x++)this._store.LocalizableText.Add(D[x].FullQualifiedText,{DisplayText:D[x].DisplayText});const R=V.length;for(let A=0;A<R;A++){const R=V[A].requestedTextList.map(A=>{if(x.isNullOrUndefined(A.FullQualifiedText)||""===A.FullQualifiedText)return"";{let V=this._store.LocalizableText.GetFromKey(A.FullQualifiedText);if(V){if(x.isNullOrUndefined(V.DisplayText)){let x=this._store.LocalizedText.GetFromKey(A.FullQualifiedText);return x&&x.item.DisplayText?x.item.DisplayText:""}return this._store.LocalizableText.GetFromKey(A.FullQualifiedText).DisplayText}}});V[A].promise.onComplete(R)}}}catch(x){A.Logger.WarnLog.log("Localized text could not be resolved:",R)}})),this.session.Settings.System.AttachDelay)),U}))}changeLanguageAsync(V){return __awaiter(this,void 0,void 0,(function*(){const R=yield A.Language.QueryHandler.ChangeLanguageQuery(V);this.LanguageService.CurrentLCID=V;const D=yield this.session.SrvHnd.MsgHnd.submitPromise(R);R.Dispose(),yield x.sleep(50);A.MsgHelper.DefaultResultComparer(D.Result)||new x.Internal.System.Exception.ResultException(A.Language.QueryHandler.Commands.Q_CHANGELANGUAGE+" "+A.Language.QueryHandler.Commands.R_CHANGELANGUAGE,D.Result,!0,D.RequestID,"",A.Language.QueryHandler.Commands.CHANGELANGUAGE_ERROR,D);const N=new x.Internal.System.Language.ProjectLanguage(this,D.CultureDisplayName,D.LCID,{},D.Text);return this.updateLanguageService(N),setTimeout(()=>{this.LanguageService.LanguageChanged.trigger(D.LCID)},1),Promise.resolve(D.LCID)}))}getServerProjectLanguages(){return __awaiter(this,void 0,void 0,(function*(){const x=A.Language.QueryHandler.GetServerProjectLanguagesQuery(),V=yield this.session.SrvHnd.MsgHnd.submitPromise(x);x.Dispose();for(let x=0;x<V.length;x++)this.updateLanguageService(V[x]);return Promise.resolve(V)}))}getCurrentLanguage(){return __awaiter(this,void 0,void 0,(function*(){const x=A.Language.QueryHandler.GetCurrentLanguageQuery(),V=yield this.session.SrvHnd.MsgHnd.submitPromise(x);return x.Dispose(),this.updateLanguageService(V),Promise.resolve(V)}))}createLocTextMaster(x){const V=A.Language.tryParseLocText(x);let R=this._store.LocalizedText.GetFromKeyValue("FullQualifiedText",x);return R||(R=new A.Language.LocalizedTextMaster(this,x,V.TextType,V.TextGroup,V.TextName),this._store.LocalizedText.Add(R.FullQualifiedText,R)),R}getLocTextMaster(x){return this._store.getLocalizedTextMaster(x)}updateProjectLanguages(x){let A=!1;const V=this.LanguageService.ProjectLanguages.length;for(let R=0;R<V;R++)this.LanguageService.ProjectLanguages[R].LCID===Number(x.LCID)&&(A=!0,this.LanguageService.ProjectLanguages[R]=x);A||this.LanguageService.ProjectLanguages.push(x)}updateLanguageService(V){this.updateProjectLanguages(V),this.LanguageService.CurrentLanguage=V,this.LanguageService.CurrentLCID=V.LCID,this.session.Settings.Client.ClientLCID=V.LCID,this.session.ClientManager.LCID=V.LCID,(x.Internal.stringContains(V.Text,"Invariant")||x.Internal.stringContains(V.CultureDisplayName,"Invariant"))&&A.Logger.InfoLog.log("Possible language problem detected",{Culture:V})}makeLocalizableTextsUnique(x){const A=[],V={};for(let R=0;R<x.length;R++)for(let D=0;D<x[R].requestedTextList.length;D++)x[R].requestedTextList[D].Ready||1!==V[x[R].requestedTextList[D].FullQualifiedText]&&""!==x[R].requestedTextList[D].FullQualifiedText&&(V[x[R].requestedTextList[D].FullQualifiedText]=1,A.push(x[R].requestedTextList[D].FullQualifiedText));return A}changeTextFormats(V){return __awaiter(this,void 0,void 0,(function*(){yield this.attachTextFormatsChanged();try{const x=yield A.Language.QueryHandler.ChangeTextFormatsQuery(V),R=yield this.session.SrvHnd.MsgHnd.submitPromise(x);return x.Dispose(),Promise.resolve(R)}catch(V){return A.Logger.WarnLog.log("changeTextFormats",x.Internal.makeString(V)),Promise.reject(V)}}))}resetTextFormats(V,R){return __awaiter(this,void 0,void 0,(function*(){try{const x=yield A.Language.QueryHandler.ResetTextFormatsQuery(V,R),D=yield this.session.SrvHnd.MsgHnd.submitPromise(x);return x.Dispose(),Promise.resolve(D)}catch(V){return A.Logger.WarnLog.log("resetTextFormats",x.Internal.makeString(V)),Promise.reject(V)}}))}attachTextFormatsChanged(){return __awaiter(this,void 0,void 0,(function*(){try{const x=yield A.Language.QueryHandler.AttachTextFormatsChangedQuery(),V=yield this.session.SrvHnd.MsgHnd.submitPromise(x);return x.Dispose(),Promise.resolve(V)}catch(V){return A.Logger.WarnLog.log("attachTextFormatsChanged",x.Internal.makeString(V)),Promise.reject(V)}}))}detachTextFormatsChanged(){return __awaiter(this,void 0,void 0,(function*(){try{const x=yield A.Language.QueryHandler.DetachTextFormatsChangedQuery(),V=yield this.session.SrvHnd.MsgHnd.submitPromise(x);return x.Dispose(),Promise.resolve(V)}catch(V){return A.Logger.WarnLog.log("detachTextFormatsChanged",x.Internal.makeString(V)),Promise.reject(V)}}))}textFormatsHasChanged(x){return __awaiter(this,void 0,void 0,(function*(){}))}}A.LanguageManager=LanguageManager}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){"use strict";class LocalizedTextMaster extends x.Internal.Domain.MasterItem{constructor(A,V,R,D,N){super(),this.ID=x.Guid(),this._manager=A,this.Subscribers=[],this._isServerAttached=!1,this.itemState=x.Internal.Domain.MasterItemState.created,this.subscriberState=x.Internal.Domain.MasterItemState.created,this.Name=V,this.FullQualifiedText=V;this.Changed=new x.Internal.System.Events.TypedEvent,this.item=new x.Internal.System.Language.LocalizedText(this._manager,this,R,D,N,V,""),this.item.Changed.add(x=>{this._locTextChanged(x)})}Dispose(){A.Dispose(this)}_locTextChanged(x){for(let A=0;A<this.Subscribers.length;A++)this.Subscribers[A].Changed.trigger(x)}CreateChild(){const A=new x.Internal.System.Language.LocalizedText(this._manager,this,this.item.TextType,this.item.TextGroup,this.item.TextName,this.item.FullQualifiedText,this.item.DisplayText);return this.Subscribers.push(A),A}RemoveChild(x){const A=this.Subscribers.indexOf(x);if(A>-1){delete this.Subscribers.splice(A,1)[0]}}TriggerChild(){}UpdateChild(){}triggerSubscriberChange(){for(let x=0;x<this.Subscribers.length;x++)this.Subscribers[x].Changed.trigger(V.mapLocalizedTextProperties(this.item))}_replacer(x,A,V,R){return x.replace(new RegExp(A.replace(/([\/\,\!\\\^\$\{\}\[\]\(\)\.\*\+\?\|\<\>\-\&])/g,"\\$&"),R?"gi":"g"),"string"==typeof V?V.replace(/\$/g,"$$$$"):V)}Update(A){const V=this._manager.session.Settings.Client.LineBreakSearchString||"",R=this._manager.session.Settings.Client.LineBreakReplaceString||"";this.item.DisplayText=A.DisplayText,x.Internal.stringContains(A.DisplayText,V)&&(this.item.DisplayText=A.DisplayText.replace(V,R));const D=this._manager.session.Settings.Client.EscapeStringReplacement||[];for(var N=0;N<D.length;N++)if(D[N]&&x.Internal.stringContains(A.DisplayText,D[N].search)){let x=this._replacer(A.DisplayText,D[N].search,D[N].replace,"gi");A.DisplayText=x,this.item.DisplayText=A.DisplayText}this.item.TextGroup=A.TextGroup,this.item.TextType=x.isNumber(A.TextType)?A.TextType:x.Internal.EnumHelper.convertToNumber(x.System.Language.TextType,A.TextType),this.item.TextName=A.TextName;for(let x=0;x<this.Subscribers.length;x++)this.Subscribers[x].DisplayText=this.item.DisplayText,this.Subscribers[x].TextGroup=this.item.TextGroup,this.Subscribers[x].TextType=this.item.TextType,this.Subscribers[x].TextName=this.item.TextName}}V.LocalizedTextMaster=LocalizedTextMaster}(A.Language||(A.Language={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(A){"use strict";function getLocTextObj(x,A,V,R,D,N){return{TextID:x,FullQualifiedText:D,TextName:A,TextGroup:V,TextType:R,Result:N}}A.createTextParms=function createTextParms(A,V,R){let D=null,N="",U="";const B=Array.prototype.slice.call(arguments),F=[];for(let A=0;A<B.length;A++)x.isNullOrUndefined(B[A])||""===B[A]||F.push(B[A]);switch(F.length){case 3:D=A,N=V,U=R;break;case 2:if(x.isNumber(A))if(D=A,x.isNullOrEmpty(V))if(R.indexOf(".")>-1){const x=R.split(".");U=x.pop()||"",N=x.join(".")}else U=R;else U=V;else N=A,U=V;break;case 1:x.isNullOrUndefined(A)||(U=A),x.isNullOrUndefined(V)||(U=V),x.isNullOrUndefined(R)||(U=R)}return{TextType:D,TextGroup:N,TextName:U}},A.tryGetFullQualifiedText=function tryGetFullQualifiedText(A,V,R){let D="",N=null;if(R)switch(R){case 0:N="@[ClientApplication]";break;case 1:N="@[ClientSystem]";break;case 2:N="@[ServerApplication]";break;case 3:N="@[ServerSystem]"}if(D=x.isNullOrEmpty(A)?V:A+"."+V,N){if(x.stringStartsWith(D,"@Application.")&&(D=D.substring(13)),x.stringStartsWith(D,"@")&&!x.stringStartsWith(D,"@$")&&!x.stringStartsWith(D,"@@")){if(D.indexOf(":[")>-1)return D;D=D.substring(1)}return N+"."+D}return D},A.tryParseLocText=function tryParseLocText(A){let V="",R="",D=x.System.Language.TextType.ServerApplication;const N="@["+x.System.Language.TextType[x.System.Language.TextType.ServerApplication]+"].",U="@["+x.System.Language.TextType[x.System.Language.TextType.ServerSystem]+"].";let B;if(x.stringStartsWith(A,"@")){if(A.indexOf(":[")>-1){D="@"+A.substring(A.indexOf("["),A.indexOf("]")+1)+"."===U?x.System.Language.TextType.ServerSystem:x.System.Language.TextType.ServerApplication;const N=A.substring(A.indexOf("].")+2,A.length).split(".");return V=N.pop()||"",R=N.join("."),getLocTextObj(A,V,R,D,A,!0)}if(x.stringStartsWith(A,"@@"))return V=A,R="",D=x.System.Language.TextType.ServerApplication,getLocTextObj(A,V,R,D,A,!0);if(x.stringStartsWith(A,"@$")){const N=A.substring(2),U=parseInt(N,10);return x.isNumber(U)?(V=A,R="",D=x.System.Language.TextType.ServerSystem):D=x.System.Language.TextType.ServerSystem,getLocTextObj(A,V,R,D,A,!0)}if(x.stringStartsWith(A,"@Application")){const U=A.substring(13),F=U.split(".");return F.length>1?(V=F.pop()||"",R=F.join("."),D=x.System.Language.TextType.ServerApplication,B=N+R+"."+V):(V=U,R="",D=x.System.Language.TextType.ServerApplication||x.System.Language.TextType.ServerSystem,B=N+V),getLocTextObj(A,V,R,D,B,!0)}if(x.stringStartsWith(A,"@[ServerApplication]")){let U=A.substring(21);x.stringStartsWith(A,"@[ServerApplication].Application")&&(U=A.substring(33));const F=U.split(".");return F.length>1?(V=F.pop()||"",R=F.join("."),D=x.System.Language.TextType.ServerApplication,B=N+R+"."+V):(V=U,R="Application",D=x.System.Language.TextType.ServerApplication,B=N+V),getLocTextObj(A,V,R,D,B,!0)}if(x.stringStartsWith(A,"@[ServerSystem]")){const N=A.substring(16).split(".");return N.length>1?(V=N.pop()||"",R=N.join("."),D=x.System.Language.TextType.ServerSystem):(V=N.join("."),R="",D=x.System.Language.TextType.ServerSystem),getLocTextObj(A,V,R,D,A,!0)}if(x.stringStartsWith(A,"@[ClientSystem]")){const N=A.substring(16).split(".");return N.length>1?(V=N.pop()||"",R=N.join("."),D=x.System.Language.TextType.ClientSystem):(V=N.join("."),R="",D=x.System.Language.TextType.ServerSystem),getLocTextObj(A,V,R,D,A,!0)}if(x.stringStartsWith(A,"@[ClientApplication]")){const N=A.substring(16).split(".");return N.length>1?(V=N.pop()||"",R=N.join("."),D=x.System.Language.TextType.ClientApplication):(V=N.join("."),R="",D=x.System.Language.TextType.ServerSystem),getLocTextObj(A,V,R,D,A,!0)}{const U=A.substring(1),F=U.split(".");return F.length>1?(V=F.pop()||"",R=F.join("."),D=x.System.Language.TextType.ServerApplication,B=N+R+"."+V):(V=U,R="",D=x.System.Language.TextType.ServerApplication,B=N+V),getLocTextObj(A,V,R,D,B,!0)}}if(x.stringStartsWith(A,"$")){const N=A.substring(1),U=parseInt(N,10);return x.isNumber(U)&&(V="@"+A,R="",D=x.System.Language.TextType.ServerSystem),getLocTextObj("@"+A,V,R,D,"@"+A,!0)}return getLocTextObj(A,V,R,x.System.Language.TextType.ServerApplication,A,!1)},A.mapLocalizedTextProperties=function mapLocalizedTextProperties(x){return{DisplayText:x.DisplayText,TextGroup:x.TextGroup,TextType:x.TextType,TextName:x.TextName}},A._isValidLocale=function _isValidLocale(x,A=!1){if(A){return/[a-z]{2}/.test(x)}return/[a-z]{2}-[A-Z0-9]{2}/.test(x)},A._tryGetNativeLanguageName=function _tryGetNativeLanguageName(x,A=!0){let V=x.slice(0,2);if(A||(V=x),Intl.DisplayNames)try{return new Intl.DisplayNames([x],{type:"language"}).of(V)}catch(x){return""}return""},A._tryGetNativeEnglishLanguageName=function _tryGetNativeEnglishLanguageName(x,A=!1){let V=x.slice(0,2);if(A||(V=x),Intl.DisplayNames)try{return new Intl.DisplayNames(["en-US"],{type:"language"}).of(V)}catch(x){return""}return""}}(A.Language||(A.Language={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){!function(A){"use strict";A.Language=class Language{constructor(){this.LocalizedText=new A.DataStore,this.LocalizableText=new A.DataStore}Dispose(){this.LocalizedText.DeleteAll()}getLocalizedTextMaster(A){return this.LocalizedText.GetFromKeyValue(x.Language.QueryHandler.Commands.FULLQUALIFIEDTEXT,A)}}}(x.Store||(x.Store={}))}(x.Domain||(x.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){!function(x){!function(x){"use strict";x.Commands={Q_GETCURRENTLANGUAGE:"QGetCurrentLanguage",R_GETCURRENTLANGUAGE:"RGetCurrentLanguage",GETCURRENTLANGUAGE_ERROR:"GetCurrentLanguageError",CURRENTLANGUAGE:"CurrentLanguage",Q_GETPROJECTLANGUAGES:"QGetProjectLanguages",R_GETPROJECTLANGUAGES:"RGetProjectLanguages",GETPROJECTLANGUAGES_ERROR:"GetProjectLanguagesError",PROJECTLANGUAGES:"ProjectLanguages",Q_GETTEXTS:"QGetTexts",R_GETTEXTS:"RGetTexts",GETTEXTS_ERROR:"GetTextsError",Q_GETLOCALIZEDTEXTS:"QGetLocalizedTexts",R_GETLOCALIZEDTEXTS:"RGetLocalizedTexts",GETLOCALIZEDTEXTS_ERROR:"GetLocalizedTextsError",Q_CHANGELANGUAGE:"QChangeLanguage",R_CHANGELANGUAGE:"RChangeLanguage",CHANGELANGUAGE_ERROR:"ChangeLanguageError",LANGUAGECHANGED:"LanguageChanged",UNSUBSCRIBELOCALIZEDTEXTS:"UnsubscribeLocalizedTexts",SUBSCRIBELOCALIZEDTEXT:"SubscribeLocalizedText",LOCALIZEDTEXTCHANGE:"LocalizedTextChange",LOCALIZEDTEXTSCHANGE:"LocalizedTextsChange",Q_SUBSCRIBELOCALIZEDTEXTS:"QSubscribeLocalizedTexts",R_SUBSCRIBELOCALIZEDTEXTS:"RSubscribeLocalizedTexts",TEXTIDS:"TextIDs",TEXTTYPE:"TextType",FULLQUALIFIEDTEXT:"FullQualifiedText",Q_CHANGETEXTFORMATS:"QChangeTextFormats",R_CHANGETEXTFORMATS:"RChangeTextFormats",Q_RESETTEXTFORMATS:"QResetTextFormats",R_RESETTEXTFORMATS:"RResetTextFormats",Q_ATTACHTEXTFORMATSCHANGED:"QAttachTextFormatsChanged",R_ATTACHTEXTFORMATSCHANGED:"RAttachTextFormatsChanged",Q_DETACHTEXTFORMATSCHANGED:"QDetachTextFormatsChanged",R_DETACHTEXTFORMATSCHANGED:"RDetachTextFormatsChanged",TEXTFORMATSCHANGED:"TextFormatsChanged"}}(x.QueryHandler||(x.QueryHandler={}))}(x.Language||(x.Language={}))}(x.Domain||(x.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";function ChangeLanguageResponse(x,A){A.ResolvePromise(x,x.Authorized)}V.ChangeLanguageQuery=function ChangeLanguageQuery(R){const D=new A.MsgHelper.TelegramHelper(V.Commands.Q_CHANGELANGUAGE,V.Commands.R_CHANGELANGUAGE);return D.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Language,D.fnResponse=ChangeLanguageResponse,D.subscribesToEvent=!0,D.CmdVal.val={RequestID:D.RequestID,LCID:R},D}}(V.QueryHandler||(V.QueryHandler={}))}(A.Language||(A.Language={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";function TextEventArgs(V,R){var D,N;const U=V.FullQualifiedText;let B,F=V.DisplayText;const W=(null===(D=R.session)||void 0===D?void 0:D.Settings.Client.LineBreakSearchString)||"",H=(null===(N=R.session)||void 0===N?void 0:N.Settings.Client.LineBreakReplaceString)||"";return x.Internal.stringContains(F,W)&&(F=F.replace(W,H)),V.FullQualifiedText===V.DisplayText||"@"+V.FullQualifiedText===V.DisplayText||"@Application."+V.FullQualifiedText===V.DisplayText||null!==V.FullQualifiedText&&"@Application."+V.FullQualifiedText.slice(1)===V.DisplayText?(B="undefined",{FullQualifiedText:U,DisplayText:F,Result:B}):(B=A.CONST.Telegram.RESULTOK,{FullQualifiedText:U,DisplayText:F,Result:B})}function GetTextResponse(x,A){const V=[],R=[];let D=!0;x.Authorized&&x.Texts.length>0&&(D=!0);for(let D=0;D<x.Texts.length;D++){const N=TextEventArgs(x.Texts[D],A);R.push("Error Get Text"+x.Texts[D]),V.push(N)}A.ResolvePromise({RequestID:x.RequestID,Result:R,Texts:V},D)}V.TextEventArgs=TextEventArgs,V.GetTextQuery=function GetTextQuery(R,D){const N=new A.MsgHelper.TelegramHelper(V.Commands.Q_GETTEXTS,V.Commands.R_GETTEXTS);return N.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Language,N.fnResponse=GetTextResponse,N.subscribesToEvent=!0,N.CmdVal.val={RequestID:N.RequestID,TextIDs:R,TextType:D},N}}(V.QueryHandler||(V.QueryHandler={}))}(A.Language||(A.Language={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";function GetCurrentLanguageResponse(A,V){const R=new x.Internal.System.Language.ProjectLanguage(V.session.LanguageManager,A.CultureDisplayName,A.LCID,{},A.Text);V.ResolvePromise(R,A.Authorized)}V.GetCurrentLanguageQuery=function GetCurrentLanguageQuery(){const R=new A.MsgHelper.TelegramHelper(V.Commands.Q_GETCURRENTLANGUAGE,V.Commands.R_GETCURRENTLANGUAGE);return R.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Language,R.fnResponse=GetCurrentLanguageResponse,R.hasResponse=!0,R.CmdVal.val={RequestID:R.RequestID},R}}(V.QueryHandler||(V.QueryHandler={}))}(A.Language||(A.Language={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";function GetLocalizedTextResponse(x,A){A.ResolvePromise(x,x.Authorized)}V.GetLocalizedTextQuery=function GetLocalizedTextQuery(R,D){const N=new A.MsgHelper.TelegramHelper(V.Commands.Q_GETLOCALIZEDTEXTS,V.Commands.R_GETLOCALIZEDTEXTS);return N.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Language,N.fnResponse=GetLocalizedTextResponse,N.subscribesToEvent=!0,N.CmdVal.val={RequestID:N.RequestID,TextIDs:R,TextType:D},N}}(V.QueryHandler||(V.QueryHandler={}))}(A.Language||(A.Language={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";V.SubscribeLocalizedTextQuery=function SubscribeLocalizedTextQuery(R){const D=new A.MsgHelper.TelegramHelper(V.Commands.SUBSCRIBELOCALIZEDTEXT,V.Commands.LOCALIZEDTEXTCHANGE);return D.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Language,D.fnResponse=null,D.hasResponse=!1,D.subscribesToEvent=!0,D.CmdVal.val={RequestID:D.RequestID,LocalizableText:R},D}}(V.QueryHandler||(V.QueryHandler={}))}(A.Language||(A.Language={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";function SubscribeLocalizedTextsResponse(A,V){const R=[];for(let D=0;D<A.InitialTextChanges.length;D++){A.InitialTextChanges[D].TextType=x.Internal.EnumHelper.convertToNumber(x.System.Language.TextType,A.InitialTextChanges[D].TextType);const N=A.InitialTextChanges[D],U=V.session.LanguageManager.getLocTextMaster(A.InitialTextChanges[D].FullQualifiedText);U.itemState=x.Internal.Domain.MasterItemState.attached,U.Update(N),R.push(U)}V.ResolvePromise({RequestID:A.RequestID,LocalizableTextMasters:R},A.Authorized)}V.SubscribeLocalizedTextsQuery=function SubscribeLocalizedTextsQuery(R){const D=new A.MsgHelper.TelegramHelper(V.Commands.Q_SUBSCRIBELOCALIZEDTEXTS,V.Commands.R_SUBSCRIBELOCALIZEDTEXTS);return D.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Language,D.fnResponse=SubscribeLocalizedTextsResponse,D.hasResponse=!0,D.CmdVal.val={RequestID:D.RequestID,LocalizableTexts:R},D}}(V.QueryHandler||(V.QueryHandler={}))}(A.Language||(A.Language={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";V.UnsubscribeLocalizedTextsQuery=function UnsubscribeLocalizedTextsQuery(R){const D=new A.MsgHelper.TelegramHelper(V.Commands.UNSUBSCRIBELOCALIZEDTEXTS,"");return D.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Language,D.hasResponse=!1,D.CmdVal.val={RequestID:D.RequestID,LocalizableTexts:R},D}}(V.QueryHandler||(V.QueryHandler={}))}(A.Language||(A.Language={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";function GetServerProjectLanguagesResponse(A,V){const R=[];for(let D=0;D<A.ProjectLanguages.length;D++){const N=new x.Internal.System.Language.ProjectLanguage(V.session.LanguageManager,A.ProjectLanguages[D].CultureDisplayName,A.ProjectLanguages[D].LCID,{},A.ProjectLanguages[D].Text);R.push(N)}V.ResolvePromise(R,A.Authorized)}V.GetServerProjectLanguagesQuery=function GetServerProjectLanguagesQuery(){const R=new A.MsgHelper.TelegramHelper(V.Commands.Q_GETPROJECTLANGUAGES,V.Commands.R_GETPROJECTLANGUAGES);return R.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Language,R.fnResponse=GetServerProjectLanguagesResponse,R.hasResponse=!0,R.CmdVal.val={RequestID:R.RequestID},R}}(V.QueryHandler||(V.QueryHandler={}))}(A.Language||(A.Language={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";function localizedTextChangeEventArgs(A,V){const R=V.LanguageManager.getLocTextMaster(A.FullQualifiedText);if(R){R.item.DisplayText=A.DisplayText;const V=x.Internal.Domain.Language.mapLocalizedTextProperties(R.item);R.Update(V),R.triggerSubscriberChange()}}V.localizedTextChangeEventArgs=localizedTextChangeEventArgs,V.registerLocalizedTextChangeCallback=function registerLocalizedTextChangeCallback(R){const D=new A.MsgHelper.TelegramHelper(V.Commands.LOCALIZEDTEXTCHANGE,V.Commands.LOCALIZEDTEXTCHANGE);D.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Language,D.fnResponse=x=>{localizedTextChangeEventArgs(x,R)},D.subscribesToEvent=!0,D.hasResponse=!0,D.RequestID=V.Commands.LOCALIZEDTEXTCHANGE,D.CmdVal.val={RequestID:D.RequestID},R.SrvHnd.MsgHnd.addCallbackHandler(D)}}(V.QueryHandler||(V.QueryHandler={}))}(A.Language||(A.Language={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";V.registerLocalizedTextsChangeCallback=function registerLocalizedTextsChangeCallback(R){const D=new A.MsgHelper.TelegramHelper(V.Commands.LOCALIZEDTEXTSCHANGE,V.Commands.LOCALIZEDTEXTSCHANGE);D.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Language,D.fnResponse=A=>{!function localizedTextsChangeEventArgs(A,V){const R=A,D=R.length;for(let N=0;N<D;N++){const D=V.LanguageManager.getLocTextMaster(R[N].FullQualifiedText);if(D){D.item.DisplayText=A[N].DisplayText;const V=x.Internal.Domain.Language.mapLocalizedTextProperties(D.item);D.Update(V),D.triggerSubscriberChange()}}}(A,R)},D.subscribesToEvent=!0,D.hasResponse=!0,D.RequestID=V.Commands.LOCALIZEDTEXTSCHANGE,D.CmdVal.val={RequestID:D.RequestID},R.SrvHnd.MsgHnd.addCallbackHandler(D)}}(V.QueryHandler||(V.QueryHandler={}))}(A.Language||(A.Language={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";V.registerLanguageChangedCallback=function registerLanguageChangedCallback(R){const D=new A.MsgHelper.TelegramHelper(V.Commands.LANGUAGECHANGED,V.Commands.LANGUAGECHANGED);D.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Language,D.fnResponse=x=>{},D.subscribesToEvent=!0,D.hasResponse=!0,D.RequestID=V.Commands.LANGUAGECHANGED,D.CmdVal.val={RequestID:D.RequestID},R.SrvHnd.MsgHnd.addCallbackHandler(D)}}(V.QueryHandler||(V.QueryHandler={}))}(A.Language||(A.Language={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";function ChangeTextFormatsResponse(x,A){A.ResolvePromise(x.Success,x.Authorized)}V.ChangeTextFormatsQuery=function ChangeTextFormatsQuery(R){const D=new A.MsgHelper.TelegramHelper(V.Commands.Q_CHANGETEXTFORMATS,V.Commands.R_CHANGETEXTFORMATS);return D.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Language,D.fnResponse=ChangeTextFormatsResponse,D.hasResponse=!0,D.CmdVal.val={RequestID:D.RequestID,TextFormats:R},D}}(V.QueryHandler||(V.QueryHandler={}))}(A.Language||(A.Language={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";function ResetTextFormatsResponse(x,A){A.ResolvePromise(x.Success,x.Authorized)}V.ResetTextFormatsQuery=function ResetTextFormatsQuery(R,D){const N=new A.MsgHelper.TelegramHelper(V.Commands.Q_RESETTEXTFORMATS,V.Commands.R_RESETTEXTFORMATS);return N.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Language,N.fnResponse=ResetTextFormatsResponse,N.hasResponse=!0,N.CmdVal.val={RequestID:N.RequestID,TextKeys:R,Lcids:D},N}}(V.QueryHandler||(V.QueryHandler={}))}(A.Language||(A.Language={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";function AttachTextFormatsChangedResponse(A,V){V.ResolvePromise(A,A.Authorized),V.session&&x.Internal.Domain.Language.QueryHandler.TextFormatsChangedCallback(V.session)}function DetachTextFormatsChangedResponse(x,A){A.ResolvePromise(x,x.Authorized)}V.AttachTextFormatsChangedQuery=function AttachTextFormatsChangedQuery(){const R=new A.MsgHelper.TelegramHelper(V.Commands.Q_ATTACHTEXTFORMATSCHANGED,V.Commands.R_ATTACHTEXTFORMATSCHANGED);return R.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Language,R.fnResponse=AttachTextFormatsChangedResponse,R.CmdVal.val={RequestID:R.RequestID},R},V.DetachTextFormatsChangedQuery=function DetachTextFormatsChangedQuery(){const R=new A.MsgHelper.TelegramHelper(V.Commands.Q_DETACHTEXTFORMATSCHANGED,V.Commands.R_DETACHTEXTFORMATSCHANGED);return R.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Language,R.fnResponse=DetachTextFormatsChangedResponse,R.CmdVal.val={RequestID:R.RequestID},R}}(V.QueryHandler||(V.QueryHandler={}))}(A.Language||(A.Language={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";V.TextFormatsChangedCallback=function TextFormatsChangedCallback(R){const D=new A.MsgHelper.TelegramHelper(V.Commands.TEXTFORMATSCHANGED,V.Commands.TEXTFORMATSCHANGED);D.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Language,D.fnResponse=x=>{},D.subscribesToEvent=!0,D.hasResponse=!1,D.RequestID=V.Commands.TEXTFORMATSCHANGED,D.CmdVal.val={RequestID:D.RequestID},R.SrvHnd.MsgHnd.addCallbackHandler(D)}}(V.QueryHandler||(V.QueryHandler={}))}(A.Language||(A.Language={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(x){x.Domain||(x.Domain={})}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){"use strict";class LoggingManager extends A.ManagerBase{constructor(V){super(V),this.ID=x.Guid(),this.Type.Namespace="VisiWin.Internal.Application.Manager",this.Type.TypeName="LoggingManager",this._store=new A.Store.Logging,A.Logging.QueryHandler.registerHistoricalLoggingEntriesCallback(V)}Dispose(){this._store.Dispose(),A.Dispose(this.LoggingService),A.Dispose(this._LoggingService);for(const x in this)Object.prototype.hasOwnProperty.call(this,x)&&delete this[x]}get LoggingService(){return this._LoggingService||(this._LoggingService=new x.Internal.System.Logging.LoggingService(this)),this._LoggingService}logAsync(V,R,D){return __awaiter(this,void 0,void 0,(function*(){try{const x=A.Logging.QueryHandler.LogQuery(V,R,D),N=yield this.session.SrvHnd.MsgHnd.submitPromise(x);return x.Dispose(),Promise.resolve(N)}catch(V){return A.Logger.WarnLog.log("logAsync",x.Internal.makeString(V)),Promise.reject(V)}}))}getEventAsync(V){return __awaiter(this,void 0,void 0,(function*(){try{const x=A.Logging.QueryHandler.GetLoggingEventQuery(V),R=yield this.session.SrvHnd.MsgHnd.submitPromise(x);return x.Dispose(),Promise.resolve(R)}catch(V){return V.watchDogTimeout&&0!==V.watchDogTimeout&&A.Logger.WarnLog.log("getEventAsync",x.Internal.makeString(V)),Promise.reject(V)}}))}getCategoryAsync(V){return __awaiter(this,void 0,void 0,(function*(){try{const x=A.Logging.QueryHandler.GetLoggingCategoryQuery(V),R=yield this.session.SrvHnd.MsgHnd.submitPromise(x);x.Dispose();const D=[];for(let x=0;x<R.Events.length;x++){const A=yield this.getEventAsync(R.Name+"."+R.Events[x]);D.push(A)}const N={EventNames:R.Events,Events:D,Enabled:R.Enabled,LocalizableText:R.LocalizableText,LocalizedName:R.LocalizedName,Name:R.Name};return Promise.resolve(N)}catch(V){return V.watchDogTimeout&&0!==V.watchDogTimeout&&A.Logger.WarnLog.log("getCategoryAsync",x.Internal.makeString(V)),Promise.reject(V)}}))}getHistoricalLoggingEntriesAsync(V){return __awaiter(this,void 0,void 0,(function*(){try{const x=A.Logging.QueryHandler.GetHistoricalLoggingEntriesQuery(V.CategoryNames,[],V.EventNames,[],V.MinTime,V.MaxTime,V.Users),R=yield this.session.SrvHnd.MsgHnd.submitPromise(x);return x.Dispose(),R.RequestID&&R.Authorized?Promise.resolve(!0):Promise.resolve(!1)}catch(V){return A.Logger.WarnLog.log("getHistoricalLoggingEntriesAsync",x.Internal.makeString(V)),Promise.reject(V)}}))}getHistoricalLoggingEntriesStream(x){return __awaiter(this,void 0,void 0,(function*(){this._store.LoggingRequests.Add(x.RequestID,x);try{const V=A.Logging.QueryHandler.GetHistoricalLoggingEntriesStreamQuery(x),R=yield this.session.SrvHnd.MsgHnd.submitPromise(V);return V.Dispose(),Promise.resolve(R)}catch(x){return A.Logger.WarnLog.log("getHistoricalLoggingStream",{Error:x.CmdVal}),Promise.reject(x)}}))}readHistoricalLoggingEntriesStream(x){return __awaiter(this,void 0,void 0,(function*(){try{const V=A.Logging.QueryHandler.ReadHistoricalLoggingEntriesStreamQuery(x),R=yield this.session.SrvHnd.MsgHnd.submitPromise(V);V.Dispose();const D=yield this.loggingStreamToHistoricalLogging(R);return Promise.resolve(D)}catch(x){return A.Logger.WarnLog.log("readHistoricalLoggingEntriesStream",{Error:x}),Promise.reject(x)}}))}closeHistoricalLoggingEntriesStream(V){try{const x=A.Logging.QueryHandler.CloseHistoricalLoggingEntriesStream(V);this.session.SrvHnd.MsgHnd.submitPromise(x),x.Dispose(),this._store.LoggingRequests.Delete(V.RequestID)}catch(V){A.Logger.WarnLog.log("closeHistoricalLoggingEntriesStream",x.Internal.makeString(V))}}loggingStreamToHistoricalLogging(V){const R=this._store.LoggingRequests.GetFromKey(V.RequestID);if(R){const D=[];if(V.LoggingEntries)for(let R=0;R<V.LoggingEntries.length;R++){let N=new x.Internal.System.Logging.HistoricalLoggingEntry;N=A.Logging.mapLoggingEntry(V.LoggingEntries[R],N),D.push(N)}return R.HistoricalLoggingEntries=D,R.Position=V.Position,Promise.resolve(R)}return Promise.reject(V)}getGetAllLoggingCategoriesWithEventsAsync(){return __awaiter(this,void 0,void 0,(function*(){try{const x=A.Logging.QueryHandler.GetAllLoggingCategoriesWithEventsQuery(),V=yield this.session.SrvHnd.MsgHnd.submitPromise(x);return x.Dispose(),this.LoggingService.Categories=V.loggingServiceCategories,V.locTexts.length>0&&this.session.LanguageManager._subscribeLocalizedTextsAsync(V.locTexts),this.LoggingService.CategoryNames=V.categoryNames,Promise.resolve(V)}catch(V){return void 0===V.watchDogTimeout&&A.Logger.WarnLog.log("getGetAllLoggingCategoriesWithEventsAsync",x.Internal.makeString(V)),Promise.reject(V)}}))}}A.LoggingManager=LoggingManager}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){!function(x){"use strict";x.mapLoggingEntry=function mapLoggingEntry(x,A){return A.CategoryName=x.CategoryName,A.EventName=x.EventName,A.FullName=x.FullName,A.ID=x.ID,A.LocalizableCategoryName=x.LocalizableCategoryName,A.LocalizableEventName=x.LocalizableEventName,A.LocalizableText=x.LocalizableText,A.LocalizedCategoryName=x.LocalizedCategoryName,A.LocalizedText=x.Text,A.LocalizedEventName=x.LocalizedEventName,A.Machine=x.Machine,A.User=x.User,A.TimeStamp=new Date(parseInt(x.TimeStamp,10)),A}}(x.Logging||(x.Logging={}))}(x.Domain||(x.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){!function(x){"use strict";x.Logging=class Logging{constructor(){this.LoggingRequests=new x.DataStore}Dispose(){this.LoggingRequests.DeleteAll()}}}(x.Store||(x.Store={}))}(x.Domain||(x.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){!function(x){!function(x){"use strict";x.Commands={HISTORICALLOGGINGENTRIES:"HistoricalLoggingEntries",Q_LOG:"QLog",R_LOG:"RLog",Q_GETLOGGINGEVENT:"QGetLoggingEvent",R_GETLOGGINGEVENT:"RGetLoggingEvent",Q_GETLOGGINGCATEGORY:"QGetLoggingCategory",R_GETLOGGINGCATEGORY:"RGetLoggingCategory",Q_GETLOGGINGCATEGORIES:"QGetLoggingCategories",R_GETLOGGINGCATEGORIES:"RGetLoggingCategories",Q_GETHISTORICALLOGGINGENTRIES:"QGetHistoricalLoggingEntries",R_GETHISTORICALLOGGINGENTRIES:"RGetHistoricalLoggingEntries",Q_GETALLLOGGINGCATEGORIESWITHEVENTS:"QGetAllLoggingCategoriesWithEvents",R_GETALLLOGGINGCATEGORIESWITHEVENTS:"RGetAllLoggingCategoriesWithEvents",CLOSEHISTORICALLOGGINGENTRIESSTREAM:"CloseHistoricalLoggingEntriesStream",Q_READHISTORICALLOGGINGENTRIESSTREAM:"QReadHistoricalLoggingEntriesStream",R_READHISTORICALLOGGINGENTRIESSTREAM:"RReadHistoricalLoggingEntriesStream",Q_GETHISTORICALLOGGINGENTRIESSTREAM:"QGetHistoricalLoggingEntriesStream",R_GETHISTORICALLOGGINGENTRIESSTREAM:"RGetHistoricalLoggingEntriesStream",Q_ATTACHLOGGINGEVENTSMODIFIED:"QAttachLoggingEventsModified",R_ATTACHLOGGINGEVENTSMODIFIED:"RAttachLoggingEventsModified",Q_ATTACHLOGGINGCATEGORYMODIFIED:"QAttachLoggingCategoryModified",R_ATTACHLOGGINGCATEGORYMODIFIED:"RAttachLoggingCategoryModified"}}(x.QueryHandler||(x.QueryHandler={}))}(x.Logging||(x.Logging={}))}(x.Domain||(x.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";function LogResponse(A,V){const R=x.Internal.EnumHelper.convertToNumber(x.System.Logging.LogSuccess,A.Result);V.ResolvePromise(R,A.Authorized)}V.LogQuery=function LogQuery(R,D,N){const U=new A.MsgHelper.TelegramHelper(V.Commands.Q_LOG,V.Commands.R_LOG);return U.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Logging,U.fnResponse=LogResponse,U.subscribesToEvent=!0,U.CmdVal.val={RequestID:U.RequestID,CategoryName:R,EventName:D,LogText:N},U}}(V.QueryHandler||(V.QueryHandler={}))}(A.Logging||(A.Logging={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";function AttachLoggingCategoryModifiedResponse(x,A){A.ResolvePromise(x,x.Authorized)}V.AttachLoggingCategoryModifiedQuery=function AttachLoggingCategoryModifiedQuery(){const R=new A.MsgHelper.TelegramHelper(V.Commands.Q_ATTACHLOGGINGCATEGORYMODIFIED,V.Commands.R_ATTACHLOGGINGCATEGORYMODIFIED);return R.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Logging,R.fnResponse=AttachLoggingCategoryModifiedResponse,R.subscribesToEvent=!0,R.CmdVal.val={RequestID:R.RequestID},R}}(V.QueryHandler||(V.QueryHandler={}))}(A.Logging||(A.Logging={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";function AttachLoggingEventsModifiedResponse(x,A){A.ResolvePromise({RequestID:x.RequestID,Result:x.Result,Authorized:x.Authorized},x.Authorized)}V.AttachLoggingEventsModifiedQuery=function AttachLoggingEventsModifiedQuery(){const R=new A.MsgHelper.TelegramHelper(V.Commands.Q_ATTACHLOGGINGEVENTSMODIFIED,V.Commands.R_ATTACHLOGGINGEVENTSMODIFIED);return R.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Logging,R.fnResponse=AttachLoggingEventsModifiedResponse,R.subscribesToEvent=!0,R.CmdVal.val={RequestID:R.RequestID},R}}(V.QueryHandler||(V.QueryHandler={}))}(A.Logging||(A.Logging={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";function GetHistoricalLoggingEntriesResponse(x,A){A.ResolvePromise({RequestID:x.RequestID,Authorized:x.Authorized,Result:x.Authorized},x.Authorized)}V.GetHistoricalLoggingEntriesQuery=function GetHistoricalLoggingEntriesQuery(R,D,N,U,B,F,W){const H=new A.MsgHelper.TelegramHelper(V.Commands.Q_GETHISTORICALLOGGINGENTRIES,V.Commands.R_GETHISTORICALLOGGINGENTRIES);return H.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Logging,H.fnResponse=GetHistoricalLoggingEntriesResponse,H.subscribesToEvent=!0,H.CmdVal.val={RequestID:H.RequestID,CategoryNames:R,ClientMachines:D,EventNames:N,FileNames:U,MinTime:B.getTime(),MaxTime:F.getTime(),Users:W},H}}(V.QueryHandler||(V.QueryHandler={}))}(A.Logging||(A.Logging={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";function GetLoggingCategoriesResponse(x,A){A.ResolvePromise(x.Categories,x.Authorized)}V.GetLoggingCategoriesQuery=function GetLoggingCategoriesQuery(){const R=new A.MsgHelper.TelegramHelper(V.Commands.Q_GETLOGGINGCATEGORIES,V.Commands.R_GETLOGGINGCATEGORIES);return R.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Logging,R.fnResponse=GetLoggingCategoriesResponse,R.subscribesToEvent=!0,R.CmdVal.val={RequestID:R.RequestID},R}}(V.QueryHandler||(V.QueryHandler={}))}(A.Logging||(A.Logging={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";function GetLoggingCategoryResponse(x,A){A.ResolvePromise(x.Category,x.Authorized)}V.GetLoggingCategoryQuery=function GetLoggingCategoryQuery(R){const D=new A.MsgHelper.TelegramHelper(V.Commands.Q_GETLOGGINGCATEGORY,V.Commands.R_GETLOGGINGCATEGORY);return D.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Logging,D.fnResponse=GetLoggingCategoryResponse,D.subscribesToEvent=!0,D.CmdVal.val={RequestID:D.RequestID,CategoryFullName:R},D}}(V.QueryHandler||(V.QueryHandler={}))}(A.Logging||(A.Logging={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";function GetLoggingEventResponse(x,A){const V={CategoryName:x.Event.CategoryFullName,Enabled:x.Event.Enabled,LocalizableText:x.Event.LocalizableText,LocalizedName:x.Event.LocalizedName,Name:x.Event.Name};A.ResolvePromise(V,x.Authorized)}V.GetLoggingEventQuery=function GetLoggingEventQuery(R){const D=new A.MsgHelper.TelegramHelper(V.Commands.Q_GETLOGGINGEVENT,V.Commands.R_GETLOGGINGEVENT);return D.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Logging,D.fnResponse=GetLoggingEventResponse,D.subscribesToEvent=!0,D.CmdVal.val={RequestID:D.RequestID,EventFullName:R},D}}(V.QueryHandler||(V.QueryHandler={}))}(A.Logging||(A.Logging={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";function GetAllLoggingCategoriesWithEventsResponse(x,A){const V=[],R=[],D=[];for(let A=0;A<x.Categories.length;A++){V.push(x.Categories[A].LocalizableText),R.push(x.Categories[A].Name);const N={Enabled:x.Categories[A].Enabled,LocalizableText:x.Categories[A].LocalizableText,LocalizedName:x.Categories[A].LocalizedName,Name:x.Categories[A].Name,EventNames:[],Events:[]};for(let R=0;R<x.Categories[A].EventInstances.length;R++){V.push(x.Categories[A].EventInstances[R].LocalizableText);const D={CategoryName:x.Categories[A].Name,Enabled:x.Categories[A].EventInstances[R].Enabled,LocalizableText:x.Categories[A].EventInstances[R].LocalizableText,LocalizedName:x.Categories[A].EventInstances[R].LocalizedName,Name:x.Categories[A].EventInstances[R].Name};N.EventNames.push(x.Categories[A].EventInstances[R].Name),N.Events.push(D)}D.push(N)}const N={locTexts:V,categoryNames:R,loggingServiceCategories:D};A.ResolvePromise(N,x.Authorized)}V.GetAllLoggingCategoriesWithEventsQuery=function GetAllLoggingCategoriesWithEventsQuery(){const R=new A.MsgHelper.TelegramHelper(V.Commands.Q_GETALLLOGGINGCATEGORIESWITHEVENTS,V.Commands.R_GETALLLOGGINGCATEGORIESWITHEVENTS);return R.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Logging,R.fnResponse=GetAllLoggingCategoriesWithEventsResponse,R.subscribesToEvent=!0,R.CmdVal.val={RequestID:R.RequestID},R}}(V.QueryHandler||(V.QueryHandler={}))}(A.Logging||(A.Logging={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";V.registerHistoricalLoggingEntriesCallback=function registerHistoricalLoggingEntriesCallback(R){const D=new A.MsgHelper.TelegramHelper(V.Commands.HISTORICALLOGGINGENTRIES,V.Commands.HISTORICALLOGGINGENTRIES);D.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Logging,D.fnResponse=A=>{!function historicalLoggingEntriesEvent(A,V){const R=[];if(A.LoggingEntries)for(let V=0;V<A.LoggingEntries.length;V++){let D=new x.Internal.System.Logging.HistoricalLoggingEntry;D=x.Internal.Domain.Logging.mapLoggingEntry(A.LoggingEntries[V],D),R.push(D)}V.LoggingManager.LoggingService.GetHistoricalLoggingEntriesAsyncCompleted.trigger(R)}(A,R)},D.subscribesToEvent=!0,D.hasResponse=!0,D.RequestID="HistoricalLoggingEntries",D.CmdVal.val={RequestID:D.RequestID},R.SrvHnd.MsgHnd.addCallbackHandler(D)}}(V.QueryHandler||(V.QueryHandler={}))}(A.Logging||(A.Logging={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";function GetHistoricalLoggingEntriesStreamResponse(x,A){A.ResolvePromise(x,x.Authorized)}function ReadHistoricalLoggingEntriesStreamResponse(x,A){A.ResolvePromise(x,x.Authorized)}V.GetHistoricalLoggingEntriesStreamQuery=function GetHistoricalLoggingEntriesStreamQuery(R){const D=new A.MsgHelper.TelegramHelper(V.Commands.Q_GETHISTORICALLOGGINGENTRIESSTREAM,V.Commands.R_GETHISTORICALLOGGINGENTRIESSTREAM);return D.RequestID=R.RequestID,D.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Logging,D.fnResponse=GetHistoricalLoggingEntriesStreamResponse,D.CmdVal.val={RequestID:D.RequestID,CategoryNames:R.Filter.CategoryNames,ClientMachines:[],EventNames:R.Filter.EventNames,FileNames:[],MinTime:R.Filter.MinTime.getTime(),MaxTime:R.Filter.MaxTime.getTime(),Users:R.Filter.Users},D},V.ReadHistoricalLoggingEntriesStreamQuery=function ReadHistoricalLoggingEntriesStreamQuery(R){const D=new A.MsgHelper.TelegramHelper(V.Commands.Q_READHISTORICALLOGGINGENTRIESSTREAM,V.Commands.R_READHISTORICALLOGGINGENTRIESSTREAM);return D.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Logging,D.hasMultipleResponse=!0,D.RequestID=R.RequestID,D.CmdVal.val={RequestID:R.RequestID,Position:R.Position,Count:R.Count},D.fnResponse=ReadHistoricalLoggingEntriesStreamResponse,D},V.CloseHistoricalLoggingEntriesStream=function CloseHistoricalLoggingEntriesStream(R){const D=new A.MsgHelper.TelegramHelper(V.Commands.CLOSEHISTORICALLOGGINGENTRIESSTREAM,"");return D.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Logging,D.hasResponse=!1,D.RequestID=R.RequestID,D.hasMultipleResponse=!0,D.CmdVal.val={RequestID:R.RequestID},D}}(V.QueryHandler||(V.QueryHandler={}))}(A.Logging||(A.Logging={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(x){x.Domain||(x.Domain={})}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){"use strict";class ProjectManager extends A.ManagerBase{constructor(A){return super(A),this.ID=x.Guid(),this.Type.Namespace="VisiWin.Internal.Application.Manager",this.Type.TypeName="ProjectManager",this.ServerProjectName=this.session.ServerInfo.ServerProjectName||this.session.Settings.Server.ServerProjectName,this.registerProjectRuntimeStatusCallback(this.session),this}Dispose(){A.Dispose(this.ProjectService),A.Dispose(this._ProjectService);for(const x in this)Object.prototype.hasOwnProperty.call(this,x)&&delete this[x]}get ProjectService(){return this._ProjectService||(this._ProjectService=new x.Internal.System.Project.ProjectService(this)),this._ProjectService}runProjectAsync(){return __awaiter(this,void 0,void 0,(function*(){this.ServerProjectName=this.session.Settings.Server.ServerProjectName;try{if(!x.isNumber(this.session.ClientManager.LCID)){if(!x.isNumber(this.session.Settings.Client.ClientLCID))return A.Logger.ErrorLog.log("RunProjectAsync",`Lcid is not of the type number. Current value:'${this.session.ClientManager.LCID}'`),this.session.ClientManager.updateClientState(x.System.Client.ClientState.Error),this.ProjectService.ServerProjectRuntimeState=x.System.Project.ServerRuntimeStatus.ErrorOnStarting,Promise.reject(this.ProjectService.ServerProjectRuntimeState);this.session.ClientManager.LCID=this.session.Settings.Client.ClientLCID}const V=A.Project.QueryHandler.RunProjectQuery(this.ServerProjectName,this.session.ClientManager.LCID,this.session.ClientManager.RuntimeVersion,this.session.ClientManager.WebClientProtocolVersion,this.session.ClientManager.UTCOffset,this.session.Settings.System.ProjectStartTimeout,this.session.Settings.Server.ServerProjectStartTimeout),R=yield this.session.SrvHnd.MsgHnd.submitPromise(V);if(V.Dispose(),"LicenseError"!==R.Result&&"DemoMode"!==R.Result||(this.session.ServerInfo.ProjectState=x.System.Project.ServerRuntimeStatus.ErrorNoLicense,this.ProjectService.ServerProjectRuntimeState=this.session.ServerInfo.ProjectState,this.ProjectService.ServerProjectStateChange.trigger(this.ProjectService.ServerProjectRuntimeState),this.session.ClientManager.updateClientState(x.System.Client.ClientState.Error)),"LicenseError"===R.Result){const A=x.Internal.Application.Settings.Strings.errorStringsWithParams(this.session.ClientManager.LCID,x.Internal.Application.Settings.Strings.commonErrorString.LicenseError);new x.Internal.System.Exception.ResultException("RunProjectAsync LicenseError",A)}if("DemoMode"===R.Result){const A=x.Internal.Application.Settings.Strings.errorStringsWithParams(this.session.ClientManager.LCID,x.Internal.Application.Settings.Strings.commonErrorString.DemoMode);new x.Internal.System.Exception.ResultException("RunProjectAsync demo mode",A)}return this.session.ServerInfo.Connected=!0,this.session.ServerInfo.ProjectState=x.System.Project.ServerRuntimeStatus.Running,this.session.ProjectManager.ProjectService.ServerProjectRuntimeState=this.session.ServerInfo.ProjectState,this.session.ServerInfo.WebGatewayProtocolVersion=R.WebGatewayProtocolVersion,this.session.Settings.System.WebGatewayProtocolVersion=this.session.ServerInfo.WebGatewayProtocolVersion,Promise.resolve(this.session.ProjectManager.ProjectService.ServerProjectRuntimeState)}catch(A){if("LicenseError"!==A.Result&&"DemoMode"!==A.Result||(this.session.ServerInfo.ProjectState=x.System.Project.ServerRuntimeStatus.ErrorNoLicense,this.ProjectService.ServerProjectRuntimeState=this.session.ServerInfo.ProjectState,this.ProjectService.ServerProjectStateChange.trigger(this.ProjectService.ServerProjectRuntimeState),this.session.ClientManager.updateClientState(x.System.Client.ClientState.Error)),"LicenseError"===A.Result){const A=x.Internal.Application.Settings.Strings.errorStringsWithParams(this.session.ClientManager.LCID,x.Internal.Application.Settings.Strings.commonErrorString.LicenseError);new x.Internal.System.Exception.ResultException("RunProjectAsync LicenseError",A)}if("DemoMode"===A.Result){const A=x.Internal.Application.Settings.Strings.errorStringsWithParams(this.session.ClientManager.LCID,x.Internal.Application.Settings.Strings.commonErrorString.DemoMode);new x.Internal.System.Exception.ResultException("RunProjectAsync demo mode",A)}return"exception occurred"===A.Result&&this.session.ClientManager.updateClientState(x.System.Client.ClientState.Error),Promise.reject(A)}}))}registerProjectRuntimeStatusCallback(x){A.Project.QueryHandler.registerProjectRuntimeStatusCallback(x)}}A.ProjectManager=ProjectManager}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){!function(x){!function(x){"use strict";x.Commands={PROJECTRUNTIMESTATUS:"ProjectRuntimeStatus",Q_RUNPROJECT:"QRunProject",R_RUNPROJECT:"RRunProject"}}(x.QueryHandler||(x.QueryHandler={}))}(x.Project||(x.Project={}))}(x.Domain||(x.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";function RunProjectResponse(x,A){A.ResolvePromise(x,x.Succeeded)}V.RunProjectQuery=function RunProjectQuery(R,D,N,U,B,F,W){const H=new A.MsgHelper.TelegramHelper(V.Commands.Q_RUNPROJECT,V.Commands.R_RUNPROJECT);return H.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Project,H.fnResponse=RunProjectResponse,H.subscribesToEvent=!0,H.watchDogTimeout=F,H.CmdVal.val={RequestID:H.RequestID,ProjectName:R,InitialLCID:D,RuntimeVersion:N,UtcOffset:B,WebClientProtocolVersion:U},300!==W&&(H.CmdVal.val.Timeout=W),H}}(V.QueryHandler||(V.QueryHandler={}))}(A.Project||(A.Project={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";V.registerProjectRuntimeStatusCallback=function registerProjectRuntimeStatusCallback(R){const D=new A.MsgHelper.TelegramHelper(V.Commands.PROJECTRUNTIMESTATUS,V.Commands.PROJECTRUNTIMESTATUS);D.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Project,D.fnResponse=V=>{!function projectRuntimeStateChangeEventArgs(V,R){const D=R.ProjectName,N=R.RuntimeStatus,U=x.Internal.EnumHelper.convertToNumber(x.System.Project.ServerRuntimeStatus,R.RuntimeStatus),B=V.ServerInfo.ProjectState;if(V.ClientManager.clientState===x.System.Client.ClientState.Running&&U===x.System.Project.ServerRuntimeStatus.ErrorNoLicense&&(V.ServerInfo.ProjectState!==x.System.Project.ServerRuntimeStatus.Running&&V.ServerInfo.ProjectState!==x.System.Project.ServerRuntimeStatus.Starting||A.Logger.WarnLog.log("ServerRuntimeStatus",{Message:R})),V.ServerInfo.ProjectState=x.Internal.EnumHelper.convertToNumber(x.System.Project.ServerRuntimeStatus,R.RuntimeStatus),V.ProjectManager.ProjectService.ServerProjectRuntimeState!==V.ServerInfo.ProjectState&&(V.ProjectManager.ProjectService.ServerProjectRuntimeState=V.ServerInfo.ProjectState,V.ProjectManager.ProjectService.ServerProjectStateChange.trigger(V.ProjectManager.ProjectService.ServerProjectRuntimeState)),U!==x.System.Project.ServerRuntimeStatus.Loaded&&U!==x.System.Project.ServerRuntimeStatus.Starting&&U!==x.System.Project.ServerRuntimeStatus.Running){if(U===x.System.Project.ServerRuntimeStatus.Stopped&&V.ClientManager.clientState!==x.System.Client.ClientState.Running)return;try{V.ProjectManager.ProjectService.onServerError.trigger({Error:"ServerError",RuntimeState:U,ProjectName:R.ProjectName,RuntimeStatus:R.RuntimeStatus}),U!==x.System.Project.ServerRuntimeStatus.Unloaded&&U!==x.System.Project.ServerRuntimeStatus.OnExit&&new x.Internal.System.Exception.ResultException("ProjectRuntimeStatus "+N,A.CONST.Telegram.ERROR,!1,"","ProjectRuntimeStatus",N,{ProjectName:D,RuntimeStatus:N,RuntimeState:U})}catch(x){}}else{if(U===x.System.Project.ServerRuntimeStatus.Loaded&&V.ClientManager.clientState===x.System.Client.ClientState.Unloaded)return void V.ClientManager.updateClientState(x.System.Client.ClientState.Starting);V.ClientManager.clientState===x.System.Client.ClientState.Running&&x.System.Project.ServerRuntimeStatus.Starting!==B&&B!==x.System.Project.ServerRuntimeStatus.Unloaded&&U===x.System.Project.ServerRuntimeStatus.Running&&B!==x.System.Project.ServerRuntimeStatus.Running&&V.ClientManager.updateClientState(x.System.Client.ClientState.RestartRequired)}}(R,V)},D.subscribesToEvent=!0,D.hasResponse=!0,D.RequestID="ProjectRuntimeStatus",D.CmdVal.val={RequestID:D.RequestID},R.SrvHnd.MsgHnd.addCallbackHandler(D)}}(V.QueryHandler||(V.QueryHandler={}))}(A.Project||(A.Project={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(x){x.Domain||(x.Domain={})}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){"use strict";class RecipeManager extends A.ManagerBase{constructor(V){super(V),this.ID=x.Guid(),this.Type.Namespace="VisiWin.Internal.Application.Manager",this.Type.TypeName="RecipeManager",this._store=new A.Store.Recipe}Dispose(){this._store.Dispose(),A.Dispose(this.RecipeService),A.Dispose(this._RecipeService);for(const x in this)Object.prototype.hasOwnProperty.call(this,x)&&delete this[x]}get RecipeService(){if(!this._RecipeService&&(this._RecipeService=new x.Internal.System.Recipe.RecipeService(this),this.session.Settings.System.WebGatewayProtocolVersion<10&&this.session.ServerInfo.Connected)){const x=`WebGatewayProtocolVersion:v${this.session.Settings.System.WebGatewayProtocolVersion} should at least be v10. WebClientProtocolVersion is:v${this.session.Settings.System.WebClientProtocolVersion}`;A.Logger.WarnLog.log("Recipe server is outdated. Please upgrade server runtime.",x)}return this._RecipeService}attach(){A.Recipe.QueryHandler.registerLockStateChangedCallback(this.session),A.Recipe.QueryHandler.registerRecipeBufferChangedCallback(this.session),A.Recipe.QueryHandler.recipeClassAttachLockStateChangedAsync(this.session),this.session.ServerInfo.WebGatewayProtocolVersion>=19&&(A.Recipe.QueryHandler.attachRecipeBufferChangedAsync(this.session),A.Recipe.QueryHandler.attachRecipeNotesChangedAsync(this.session),A.Recipe.QueryHandler.registerRecipeNotesChangedCallback(this.session)),this.session.ServerInfo.WebGatewayProtocolVersion>=22&&(A.Recipe.QueryHandler.AttachRecipeFileChangedAsync(this.session),A.Recipe.QueryHandler.registerRecipeFileChangedCallback(this.session))}recipeServiceGetRecipeClassNamesAsync(){return __awaiter(this,void 0,void 0,(function*(){try{const x=A.Recipe.QueryHandler.RecipeServiceGetRecipeClassNamesQuery(),V=yield this.session.SrvHnd.MsgHnd.submitPromise(x);return this.RecipeService.RecipeClassNames=V.RecipeClassNames,x.Dispose(),Promise.resolve({Result:!0,RecipeClassNames:V.RecipeClassNames})}catch(V){return V.watchDogTimeout&&0!==V.watchDogTimeout&&A.Logger.WarnLog.log("recipeServiceGetRecipeClassNamesAsync",x.Internal.makeString(V)),Promise.reject(V)}}))}recipeServiceGetRecipeClassAsync(V){var R,D,N,U;return __awaiter(this,void 0,void 0,(function*(){try{if(this._store.RecipeClasses.Contains(V)){const x=this._store.RecipeClasses.GetFromKey(V);return Promise.resolve({Result:!0,RecipeClass:x})}const B=A.Recipe.QueryHandler.RecipeServiceGetRecipeClassQuery(V),F=yield this.session.SrvHnd.MsgHnd.submitPromise(B);let W;const H=this._store.RecipeClasses.GetFromKeyValue("Name",F.Name);if(H){H.Name=F.Name,H.FileNames=F.FileNames||[],H.LockState=x.Internal.EnumHelper.convertToNumber(x.System.Recipe.RecipeLockState,F.LockState);const A=[];if(F.SubRecipes&&F.SubRecipes.length>=1)for(let V=0;V<F.SubRecipes.length;V++)A.push(new x.Internal.System.Recipe.SubRecipe(F.SubRecipes[V].Name,null!==(D=null===(R=F.SubRecipes[V])||void 0===R?void 0:R.FileNameVariableName)&&void 0!==D?D:"",F.SubRecipes[V].SortIndex,F.SubRecipes[V].Comment));H.SubRecipes=A,W=H}else{W=new x.Internal.System.Recipe.RecipeClass(this,F.Name),W.LockState=x.Internal.EnumHelper.convertToNumber(x.System.Recipe.RecipeLockState,F.LockState),W.Name=F.Name,W.FileNames=F.FileNames||[];const A=[];if(F.SubRecipes&&F.SubRecipes.length>=1)for(let V=0;V<F.SubRecipes.length;V++)A.push(new x.Internal.System.Recipe.SubRecipe(F.SubRecipes[V].Name,null!==(U=null===(N=F.SubRecipes[V])||void 0===N?void 0:N.FileNameVariableName)&&void 0!==U?U:"",F.SubRecipes[V].SortIndex,F.SubRecipes[V].Comment));W.SubRecipes=A,this.session.ServerInfo.WebGatewayProtocolVersion>=19&&(W.InitialDirectory=F.InitialDirectory||"",W.InitialRecipeDescription=F.InitialRecipeDescription||"",W.InitialRecipeName=F.InitialRecipeName||"",W.LoggingCategoryName=F.LoggingCategoryName||"",W.Comment=F.Comment,W.IncludeSubRecipesInStorage=F.IncludeSubRecipesInStorage,W.LocalizableText=F.LocalizableText,W.IsServerSideRecipe=F.IsServerSideRecipe,W.LoadOnStartup=F.LoadOnStartup,W.SaveRecipeValueChanges=F.SaveRecipeValueChanges,W.SetRecipeValuesToProcessOnChange=F.SetRecipeValuesToProcessOnChange,W.SaveRecipeValuesOnChange=F.SaveRecipeValuesOnChange,W.ReadValuesOnProcessChange=F.ReadValuesOnProcessChange,W.HasChangesForFile=F.HasChangesForFile,W.HasChangesForProcess=F.HasChangesForProcess,F.LastRecipeLoadedToBuffer&&(F.LastRecipeLoadedToBuffer.Timestamp=new Date(F.LastRecipeLoadedToBuffer.Timestamp),W.LastRecipeLoadedToBuffer=F.LastRecipeLoadedToBuffer),F.LastRecipeSentToProcess&&(F.LastRecipeSentToProcess.Timestamp=new Date(F.LastRecipeSentToProcess.Timestamp),W.LastRecipeSentToProcess=F.LastRecipeSentToProcess),F.LastRecipeSavedToFile&&(F.LastRecipeSavedToFile.Timestamp=new Date(F.LastRecipeSavedToFile.Timestamp),W.LastRecipeSavedToFile=F.LastRecipeSavedToFile)),this._store.RecipeClasses.Add(F.Name,W)}return B.Dispose(),Promise.resolve({Result:F.Result,RecipeClass:W})}catch(V){return A.Logger.WarnLog.log("recipeServiceGetRecipeClassAsync",x.Internal.makeString(V)),Promise.reject(V)}}))}recipeServiceGetRecipeFileNamesAsync(V){return __awaiter(this,void 0,void 0,(function*(){try{const x=A.Recipe.QueryHandler.RecipeClassGetFileNamesQuery(V),R=yield this.session.SrvHnd.MsgHnd.submitPromise(x);return x.Dispose(),Promise.resolve(R)}catch(V){return A.Logger.WarnLog.log("recipeServiceGetRecipeFileNamesAsync",x.Internal.makeString(V)),Promise.reject(V)}}))}recipeServiceGetRecipeFileAsync(V,R){return __awaiter(this,void 0,void 0,(function*(){try{const x=yield this.recipeGetRecipeFileAsync(V,R);return Promise.resolve(x)}catch(V){return A.Logger.WarnLog.log("recipeServiceGetRecipeFileAsync",x.Internal.makeString(V)),Promise.reject(V)}}))}recipeServiceLoadRecipeFileValuesAsync(V,R,D,N=!1){return __awaiter(this,void 0,void 0,(function*(){try{const x=A.Recipe.QueryHandler.RecipeServiceLoadRecipeFileValuesQuery(V,R,D,N),U=yield this.session.SrvHnd.MsgHnd.submitPromise(x);return x.Dispose(),Promise.resolve(U)}catch(V){return A.Logger.WarnLog.log("recipeServiceLoadRecipeFileValuesAsync",x.Internal.makeString(V)),Promise.reject(V)}}))}recipeServiceDeleteFileAsync(V,R){return __awaiter(this,void 0,void 0,(function*(){try{const x=yield this.recipeDeleteFileAsync(V,R);return Promise.resolve(x)}catch(V){return A.Logger.WarnLog.log("recipeServiceDeleteFileAsync",x.Internal.makeString(V)),Promise.reject(V)}}))}recipeClassGetRecipeFileAsync(V,R){return __awaiter(this,void 0,void 0,(function*(){try{const x=yield this.recipeGetRecipeFileAsync(V,R);return Promise.resolve(x)}catch(V){return A.Logger.WarnLog.log("recipeClassGetRecipeFileAsync",x.Internal.makeString(V)),Promise.reject(V)}}))}recipeClassGetVariableNamesAsync(V){return __awaiter(this,void 0,void 0,(function*(){try{const x=A.Recipe.QueryHandler.RecipeClassGetVariableNamesQuery(V),R=yield this.session.SrvHnd.MsgHnd.submitPromise(x);return x.Dispose(),Promise.resolve(R)}catch(V){return A.Logger.WarnLog.log("recipeClassGetVariableNamesAsync",x.Internal.makeString(V)),Promise.reject(V)}}))}recipeClassGetValueAsync(V,R){return __awaiter(this,void 0,void 0,(function*(){try{const x=yield this.recipeClassGetValuesAsync(V,[R]),A={Result:x.Result,VariableName:x.VariableNames[0],Value:x.Values[0],DataType:x.DataTypes[0],ErrorCode:x.ErrorCodes[0]};return Promise.resolve(A)}catch(V){return A.Logger.WarnLog.log("recipeClassGetValueAsync",x.Internal.makeString(V)),Promise.reject(V)}}))}recipeClassGetValuesAsync(V,R){return __awaiter(this,void 0,void 0,(function*(){try{const x=A.Recipe.QueryHandler.RecipeClassGetValuesQuery(V,R),D=yield this.session.SrvHnd.MsgHnd.submitPromise(x);return x.Dispose(),Promise.resolve(D)}catch(V){return A.Logger.WarnLog.log("recipeClassGetValuesAsync",x.Internal.makeString(V)),Promise.reject(V)}}))}recipeClassLoadFromFileToBufferAsync(V,R,D=!1){return __awaiter(this,void 0,void 0,(function*(){try{const x=A.Recipe.QueryHandler.RecipeClassLoadFromFileToBufferQuery(V,R,D),N=yield this.session.SrvHnd.MsgHnd.submitPromise(x);return x.Dispose(),Promise.resolve(N)}catch(V){return A.Logger.WarnLog.log("recipeClassLoadFromFileToBufferAsync",x.Internal.makeString(V)),Promise.reject(V)}}))}recipeClassLoadFileToBufferAsync(V,R,D=!1){return __awaiter(this,void 0,void 0,(function*(){try{const x=A.Recipe.QueryHandler.RecipeClassLoadFileToBufferQuery(V,R,D),N=yield this.session.SrvHnd.MsgHnd.submitPromise(x);return x.Dispose(),Promise.resolve(N)}catch(V){return A.Logger.WarnLog.log("recipeClassLoadFromFileToBufferAsync",x.Internal.makeString(V)),Promise.reject(V)}}))}recipeClassLoadFromFileToProcessAsync(V,R){return __awaiter(this,void 0,void 0,(function*(){try{const x=A.Recipe.QueryHandler.RecipeClassLoadFromFileToProcessQuery(V,R),D=yield this.session.SrvHnd.MsgHnd.submitPromise(x);return x.Dispose(),Promise.resolve(D)}catch(V){return A.Logger.WarnLog.log("recipeClassLoadFromFileToProcessAsync",x.Internal.makeString(V)),Promise.reject(V)}}))}recipeClassLoadFileToProcessAsync(V,R,D=!1){return __awaiter(this,void 0,void 0,(function*(){try{const x=A.Recipe.QueryHandler.RecipeClassLoadFileToProcessQuery(V,R,D),N=yield this.session.SrvHnd.MsgHnd.submitPromise(x);return x.Dispose(),Promise.resolve(N)}catch(V){return A.Logger.WarnLog.log("recipeClassLoadFromFileToProcessAsync",x.Internal.makeString(V)),Promise.reject(V)}}))}recipeClassSaveBufferToFileAsync(V,R,D="",N=!1,U=!1){return __awaiter(this,void 0,void 0,(function*(){try{const x=A.Recipe.QueryHandler.RecipeClassSaveBufferToFileQuery(V,R,D,N,U),B=yield this.session.SrvHnd.MsgHnd.submitPromise(x);return x.Dispose(),Promise.resolve(B)}catch(V){return A.Logger.WarnLog.log("recipeClassSaveBufferToFileAsync",x.Internal.makeString(V)),Promise.reject(V)}}))}recipeClassSaveToFileFromBufferAsync(V,R,D="",N=!1){return __awaiter(this,void 0,void 0,(function*(){try{const x=A.Recipe.QueryHandler.RecipeClassSaveToFileFromBufferQuery(V,R,D,N),U=yield this.session.SrvHnd.MsgHnd.submitPromise(x);return x.Dispose(),Promise.resolve(U)}catch(V){return A.Logger.WarnLog.log("recipeClassSaveToFileFromBufferAsync",x.Internal.makeString(V)),Promise.reject(V)}}))}recipeClassReadProcessToBufferAsync(V){return __awaiter(this,void 0,void 0,(function*(){try{const x=A.Recipe.QueryHandler.RecipeClassReadProcessToBufferQuery(V),R=yield this.session.SrvHnd.MsgHnd.submitPromise(x);return x.Dispose(),Promise.resolve(R)}catch(V){return A.Logger.WarnLog.log("recipeClassReadProcessToBufferAsync",x.Internal.makeString(V)),Promise.reject(V)}}))}recipeClassWriteBufferToProcessAsync(V){return __awaiter(this,void 0,void 0,(function*(){try{const x=A.Recipe.QueryHandler.RecipeClassWriteBufferToProcessQuery(V),R=yield this.session.SrvHnd.MsgHnd.submitPromise(x);return x.Dispose(),Promise.resolve(R)}catch(V){return A.Logger.WarnLog.log("recipeClassWriteBufferToProcessAsync",x.Internal.makeString(V)),Promise.reject(V)}}))}recipeClassAddNoteAsync(V,R){return __awaiter(this,void 0,void 0,(function*(){try{const x=A.Recipe.QueryHandler.RecipeClassAddNoteQuery(V,R),D=yield this.session.SrvHnd.MsgHnd.submitPromise(x);return x.Dispose(),Promise.resolve({Result:D})}catch(V){return A.Logger.WarnLog.log("recipeClassAddNoteAsync",x.Internal.makeString(V)),Promise.reject(V)}}))}recipeClassGetNotesAsync(V,R){return __awaiter(this,void 0,void 0,(function*(){try{const x=yield this.recipeGetNotesAsync(V,R);return Promise.resolve(x)}catch(V){return A.Logger.WarnLog.log("recipeClassGetNotesAsync",x.Internal.makeString(V)),Promise.reject(V)}}))}recipeClassClearChangesAsync(V){return __awaiter(this,void 0,void 0,(function*(){try{const x=A.Recipe.QueryHandler.RecipeClassClearChangesQuery(V),R=yield this.session.SrvHnd.MsgHnd.submitPromise(x);return x.Dispose(),Promise.resolve({Result:R})}catch(V){return A.Logger.WarnLog.log("recipeClassClearChangesAsync",x.Internal.makeString(V)),Promise.reject(V)}}))}recipeClassClearNotesAsync(V){return __awaiter(this,void 0,void 0,(function*(){try{const x=A.Recipe.QueryHandler.RecipeClassClearNotesQuery(V),R=yield this.session.SrvHnd.MsgHnd.submitPromise(x);return x.Dispose(),Promise.resolve({Result:R})}catch(V){return A.Logger.WarnLog.log("recipeClassClearNotesAsync",x.Internal.makeString(V)),Promise.reject(V)}}))}recipeClassLockRecipeAsync(V){return __awaiter(this,void 0,void 0,(function*(){try{const x=A.Recipe.QueryHandler.RecipeClassLockRecipeQuery(V),R=yield this.session.SrvHnd.MsgHnd.submitPromise(x);return x.Dispose(),Promise.resolve({Result:R})}catch(V){return A.Logger.WarnLog.log("recipeClassLockRecipeAsync",x.Internal.makeString(V)),Promise.reject(V)}}))}recipeClassUnlockRecipeAsync(V){return __awaiter(this,void 0,void 0,(function*(){try{const x=A.Recipe.QueryHandler.RecipeClassUnlockRecipeQuery(V),R=yield this.session.SrvHnd.MsgHnd.submitPromise(x);return x.Dispose(),Promise.resolve({Result:R})}catch(V){return A.Logger.WarnLog.log("recipeClassUnlockRecipeAsync",x.Internal.makeString(V)),Promise.reject(V)}}))}recipeClassGetSubRecipesAsync(V){return __awaiter(this,void 0,void 0,(function*(){try{const x=A.Recipe.QueryHandler.RecipeClassGetSubRecipesQuery(V),R=yield this.session.SrvHnd.MsgHnd.submitPromise(x);return x.Dispose(),Promise.resolve(R)}catch(V){return A.Logger.WarnLog.log("recipeClassGetSubRecipesAsync",x.Internal.makeString(V)),Promise.reject(V)}}))}recipeClassDeleteFileAsync(V,R){return __awaiter(this,void 0,void 0,(function*(){try{const x=yield this.recipeDeleteFileAsync(V,R);return Promise.resolve(x)}catch(V){return A.Logger.WarnLog.log("recipeClassDeleteFileAsync",x.Internal.makeString(V)),Promise.reject(V)}}))}recipeFileGetChangesAsync(V,R,D){return __awaiter(this,void 0,void 0,(function*(){try{const x=A.Recipe.QueryHandler.RecipeClassGetChangesQuery(V,R,this.session,D),N=yield this.session.SrvHnd.MsgHnd.submitPromise(x);return Promise.resolve(N)}catch(V){return A.Logger.WarnLog.log("recipeFileGetChangesAsync",x.Internal.makeString(V)),Promise.reject(V)}}))}recipeFileGetNotesAsync(V,R="",D){return __awaiter(this,void 0,void 0,(function*(){try{const x=yield this.recipeGetNotesAsync(V,R,D);return Promise.resolve(x)}catch(V){return A.Logger.WarnLog.log("recipeFileGetNotesAsync",x.Internal.makeString(V)),Promise.reject(V)}}))}getRecipeClassesFromStore(){return this._store.getRecipeClasses()}recipeGetNotesAsync(V,R="",D){return __awaiter(this,void 0,void 0,(function*(){try{const x=A.Recipe.QueryHandler.RecipeClassGetNotesQuery(V,R,D),N=yield this.session.SrvHnd.MsgHnd.submitPromise(x);return x.Dispose(),Promise.resolve({Result:N.Result,Notes:N.Notes})}catch(V){return A.Logger.WarnLog.log("recipeGetNotesAsync",x.Internal.makeString(V)),Promise.reject(V)}}))}recipeDeleteFileAsync(V,R){return __awaiter(this,void 0,void 0,(function*(){try{const x=A.Recipe.QueryHandler.RecipeClassDeleteFileQuery(V,R),D=yield this.session.SrvHnd.MsgHnd.submitPromise(x);return x.Dispose(),Promise.resolve(D)}catch(V){return A.Logger.WarnLog.log("recipeDeleteFileAsync",x.Internal.makeString(V)),Promise.reject(V)}}))}recipeGetRecipeFileAsync(V,R){return __awaiter(this,void 0,void 0,(function*(){try{const D=A.Recipe.QueryHandler.RecipeServiceGetRecipeFileQuery(V,R),N=yield this.session.SrvHnd.MsgHnd.submitPromise(D),U=new x.Internal.System.Recipe.RecipeFile(this,N.RecipeFileName);U.Description=N.Description,U.RecipeClassName=N.RecipeClassName,U.TimeOfLastChange=N.TimeOfLastChange,U.WhoSavedRecipe=N.WhoSavedRecipe,U.SavedByUser=N.SavedByUser,U.SavedByMachine=N.SavedByMachine;const B={Result:N.Success,RecipeFile:U};return D.Dispose(),Promise.resolve(B)}catch(V){return A.Logger.WarnLog.log("recipeGetRecipeFileAsync",x.Internal.makeString(V)),Promise.reject(V)}}))}recipeServiceUnlockAllAsync(){return __awaiter(this,void 0,void 0,(function*(){try{const x=A.Recipe.QueryHandler.RecipeServiceUnlockAllQuery(),V=yield this.session.SrvHnd.MsgHnd.submitPromise(x);return x.Dispose(),Promise.resolve(V)}catch(V){return V.watchDogTimeout&&0!==V.watchDogTimeout&&A.Logger.WarnLog.log("recipeServiceUnlockAllAsync",x.Internal.makeString(V)),Promise.reject(V)}}))}recipeFileGetValuesAsync(V,R,D,N=!1){return __awaiter(this,void 0,void 0,(function*(){try{const A=yield this.recipeServiceLoadRecipeFileValuesAsync(V,R,D,N),U=[];for(let V=0;V<A.Values.length;V++)U.push(new x.Internal.System.Recipe.RecipeValue(A.Values[V],A.VariableNames[V],A.ErrorCodes[V]));return Promise.resolve(U)}catch(V){return V.watchDogTimeout&&0!==V.watchDogTimeout&&A.Logger.WarnLog.log("recipeFileGetValuesAsync",x.Internal.makeString(V)),Promise.reject(V)}}))}getCurrentPathAsync(V){return __awaiter(this,void 0,void 0,(function*(){try{const x=A.Recipe.QueryHandler.GetCurrentRecipePathQuery(V),R=yield this.session.SrvHnd.MsgHnd.submitPromise(x);return x.Dispose(),Promise.resolve(R)}catch(V){return A.Logger.WarnLog.log("getCurrentRecipePath",x.Internal.makeString(V)),Promise.reject(V)}}))}getMemberDefinitionsAsync(V){return __awaiter(this,void 0,void 0,(function*(){try{const x=A.Recipe.QueryHandler.GetRecipeClassMemberDefinitionsQuery(V),R=yield this.session.SrvHnd.MsgHnd.submitPromise(x);return x.Dispose(),Promise.resolve(R)}catch(V){return A.Logger.WarnLog.log("getCurrentRecipePath",x.Internal.makeString(V)),Promise.reject(V)}}))}getRecipeLockStateAsync(V){return __awaiter(this,void 0,void 0,(function*(){try{const x=A.Recipe.QueryHandler.GetRecipeLockStateQuery(V),R=yield this.session.SrvHnd.MsgHnd.submitPromise(x);return x.Dispose(),Promise.resolve(R)}catch(V){return A.Logger.WarnLog.log("getRecipeLockStateAsync",x.Internal.makeString(V)),Promise.reject(V)}}))}isExistingRecipeFileAsync(V,R){return __awaiter(this,void 0,void 0,(function*(){try{const x=A.Recipe.QueryHandler.IsExistingRecipeFileQuery(V,R),D=yield this.session.SrvHnd.MsgHnd.submitPromise(x);return x.Dispose(),Promise.resolve(D)}catch(V){return A.Logger.WarnLog.log("isExistingRecipeFileAsync",x.Internal.makeString(V)),Promise.reject(V)}}))}removeNoteAsync(V,R){return __awaiter(this,void 0,void 0,(function*(){try{const x=A.Recipe.QueryHandler.RecipeClassRemoveNoteQuery(V,R),D=yield this.session.SrvHnd.MsgHnd.submitPromise(x);return x.Dispose(),Promise.resolve(D)}catch(V){return A.Logger.WarnLog.log("removeNoteAsync",x.Internal.makeString(V)),Promise.reject(V)}}))}setCurrentPathAsync(V,R){return __awaiter(this,void 0,void 0,(function*(){try{const x=A.Recipe.QueryHandler.SetCurrentRecipePathQuery(V,R),D=yield this.session.SrvHnd.MsgHnd.submitPromise(x);return x.Dispose(),Promise.resolve(D)}catch(V){return A.Logger.WarnLog.log("setCurrentPathAsync",x.Internal.makeString(V)),Promise.reject(V)}}))}setDefaultValuesToBufferAsync(V,R,D=!0){return __awaiter(this,void 0,void 0,(function*(){try{const x=A.Recipe.QueryHandler.SetRecipeDefaultValuesToBufferQuery(V,R,D),N=yield this.session.SrvHnd.MsgHnd.submitPromise(x);return x.Dispose(),Promise.resolve(N)}catch(V){return A.Logger.WarnLog.log("setDefaulValuesToBufferAsync",x.Internal.makeString(V)),Promise.reject(V)}}))}setDefaultValuesAsync(V,R,D=!0){return __awaiter(this,void 0,void 0,(function*(){try{const x=A.Recipe.QueryHandler.SetRecipeDefaultValuesQuery(V,R,D),N=yield this.session.SrvHnd.MsgHnd.submitPromise(x);return x.Dispose(),Promise.resolve(N)}catch(V){return A.Logger.WarnLog.log("setDefaulValuesToBufferAsync",x.Internal.makeString(V)),Promise.reject(V)}}))}recipeClassSetValuesAsync(V,R,D){return __awaiter(this,void 0,void 0,(function*(){try{const x=A.Recipe.QueryHandler.RecipeClassSetValuesQuery(V,R,D),N=yield this.session.SrvHnd.MsgHnd.submitPromise(x);return x.Dispose(),Promise.resolve(N)}catch(V){return A.Logger.WarnLog.log("recipeClassSetValuesAsync",x.Internal.makeString(V)),Promise.reject(V)}}))}getGetRecipeClassDefinitionAsync(A){return __awaiter(this,void 0,void 0,(function*(){const V=yield this.recipeServiceGetRecipeClassAsync(A),R=yield V.RecipeClass.GetSubRecipesAsync(),D=[],N=[];if(this.session.ServerInfo.WebGatewayProtocolVersion>=19){const A=yield V.RecipeClass.GetMemberDefinitionsAsync();for(let V=0;V<A.length;V++){const R=new x.Internal.System.Recipe.RecipeMemberDefinition(A[V].VariableFullName,A[V].DefaultValue,A[V].SortIndex,A[V].LocalizableText,A[V].Comment);N.push(R)}}for(let A=0;A<R.SubRecipes.length;A++){const V=new x.Internal.System.Recipe.RecipeSubClassDefinition;V.Comment=R.SubRecipes[A].Comment,V.Name=R.SubRecipes[A].Name,V.SortIndex=R.SubRecipes[A].SortIndex,V.RecipeFileNameVariableFullName=R.SubRecipes[A].FileNameVariableName,D.push(V)}const U=new x.Internal.System.Recipe.RecipeClassDefinition;return U.Comment=V.RecipeClass.Comment,U.Name=V.RecipeClass.Name,U.SubClasses=D,U.InitialRecipeName=V.RecipeClass.Name,U.IncludeSubRecipesInStorage=!1,U.MemberDefinitions=N,U.LocalizableText=V.RecipeClass.LocalizableText,U.IsServerSideRecipe=V.RecipeClass.IsServerSideRecipe,U.LoadOnStartup=V.RecipeClass.LoadOnStartup,U.SaveRecipeValueChanges=V.RecipeClass.SaveRecipeValueChanges,U.SetRecipeValuesToProcessOnChange=V.RecipeClass.SetRecipeValuesToProcessOnChange,U.SaveRecipeValuesOnChange=V.RecipeClass.SaveRecipeValuesOnChange,U.ReadValuesOnProcessChange=V.RecipeClass.ReadValuesOnProcessChange,U.LoggingCategoryName=V.RecipeClass.LoggingCategoryName,Promise.resolve(U)}))}}A.RecipeManager=RecipeManager}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){!function(x){"use strict";x.Recipe=class Recipe{constructor(){this.RecipeClasses=new x.DataStore,this.RecipeFiles=new x.DataStore}Dispose(){this.RecipeClasses.DeleteAll(),this.RecipeFiles.DeleteAll()}getRecipeClasses(){return this.RecipeClasses}}}(x.Store||(x.Store={}))}(x.Domain||(x.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){!function(x){!function(x){"use strict";x.Commands={LOCKSTATECHANGED:"LockStateChanged",Q_RECIPESERVICEGETRECIPECLASSNAMES:"QRecipeServiceGetRecipeClassNames",R_RECIPESERVICEGETRECIPECLASSNAMES:"RRecipeServiceGetRecipeClassNames",Q_RECIPESERVICEGETRECIPECLASS:"QRecipeServiceGetRecipeClass",R_RECIPESERVICEGETRECIPECLASS:"RRecipeServiceGetRecipeClass",Q_RECIPECLASSGETFILENAMES:"QRecipeClassGetFileNames",R_RECIPECLASSGETFILENAMES:"RRecipeClassGetFileNames",Q_RECIPESERVICELOADRECIPEFILEVALUES:"QRecipeServiceLoadRecipeFileValues",R_RECIPESERVICELOADRECIPEFILEVALUES:"RRecipeServiceLoadRecipeFileValues",Q_RECIPECLASSDELETEFILE:"QRecipeClassDeleteFile",R_RECIPECLASSDELETEFILE:"RRecipeClassDeleteFile",Q_RECIPESERVICEGETRECIPEFILE:"QRecipeServiceGetRecipeFile",R_RECIPESERVICEGETRECIPEFILE:"RRecipeServiceGetRecipeFile",Q_RECIPECLASSGETVARIABLENAMES:"QRecipeClassGetVariableNames",R_RECIPECLASSGETVARIABLENAMES:"RRecipeClassGetVariableNames",Q_RECIPECLASSGETVALUES:"QRecipeClassGetValues",R_RECIPECLASSGETVALUES:"RRecipeClassGetValues",Q_RECIPECLASSLOADFROMFILETOBUFFER:"QRecipeClassLoadFromFileToBuffer",R_RECIPECLASSLOADFROMFILETOBUFFER:"RRecipeClassLoadFromFileToBuffer",Q_RECIPECLASSLOADFROMFILETOPROCESS:"QRecipeClassLoadFromFileToProcess",R_RECIPECLASSLOADFROMFILETOPROCESS:"RRecipeClassLoadFromFileToProcess",Q_RECIPECLASSREADPROCESSTOBUFFER:"QRecipeClassReadProcessToBuffer",R_RECIPECLASSREADPROCESSTOBUFFER:"RRecipeClassReadProcessToBuffer",Q_RECIPECLASSSAVETOFILEFROMBUFFER:"QRecipeClassSaveToFileFromBuffer",R_RECIPECLASSSAVETOFILEFROMBUFFER:"RRecipeClassSaveToFileFromBuffer",Q_RECIPECLASSSETVALUES:"QRecipeClassSetValues",R_RECIPECLASSSETVALUES:"RRecipeClassSetValues",Q_RECIPECLASSWRITEBUFFERTOPROCESS:"QRecipeClassWriteBufferToProcess",R_RECIPECLASSWRITEBUFFERTOPROCESS:"RRecipeClassWriteBufferToProcess",Q_RECIPECLASSADDNOTE:"QRecipeClassAddNote",R_RECIPECLASSADDNOTE:"RRecipeClassAddNote",Q_RECIPECLASSGETNOTES:"QRecipeClassGetNotes",R_RECIPECLASSGETNOTES:"RRecipeClassGetNotes",Q_RECIPECLASSCLEARCHANGES:"QRecipeClassClearChanges",R_RECIPECLASSCLEARCHANGES:"RRecipeClassClearChanges",Q_RECIPECLASSCLEARNOTES:"QRecipeClassClearNotes",R_RECIPECLASSCLEARNOTES:"RRecipeClassClearNotes",Q_RECIPECLASSLOCKRECIPE:"QRecipeClassLockRecipe",R_RECIPECLASSLOCKRECIPE:"RRecipeClassLockRecipe",Q_RECIPECLASSUNLOCKRECIPE:"QRecipeClassUnlockRecipe",R_RECIPECLASSUNLOCKRECIPE:"RRecipeClassUnlockRecipe",Q_RECIPECLASSGETSUBRECIPES:"QRecipeClassGetSubRecipes",R_RECIPECLASSGETSUBRECIPES:"RRecipeClassGetSubRecipes",Q_RECIPECLASSATTACHLOCKSTATECHANGED:"QRecipeClassAttachLockStateChanged",R_RECIPECLASSATTACHLOCKSTATECHANGED:"RRecipeClassAttachLockStateChanged",Q_RECIPECLASSDETACHLOCKSTATECHANGED:"QRecipeClassDetachLockStateChanged",R_RECIPECLASSDETACHLOCKSTATECHANGED:"RRecipeClassDetachLockStateChanged",Q_RECIPECLASSGETCHANGES:"QRecipeClassGetChanges",R_RECIPECLASSGETCHANGES:"RRecipeClassGetChanges",Q_RECIPESERVICEUNLOCKALL:"QRecipeServiceUnlockAll",R_RECIPESERVICEUNLOCKALL:"RRecipeServiceUnlockAll",RECIPEBUFFERCHANGED:"RecipeBufferChanged",Q_ATTACHRECIPEBUFFERCHANGED:"QAttachRecipeBufferChanged",R_ATTACHRECIPEBUFFERCHANGED:"RAttachRecipeBufferChanged",Q_DETACHRECIPEBUFFERCHANGED:"QDetachRecipeBufferChanged",R_DETACHRECIPEBUFFERCHANGED:"RDetachRecipeBufferChanged",RECIPENOTESCHANGED:"RecipeNotesChanged",Q_ATTACHRECIPENOTESCHANGED:"QAttachRecipeNotesChanged",R_ATTACHRECIPENOTESCHANGED:"RAttachRecipeNotesChanged",Q_DETACHRECIPENOTESCHANGED:"QDetachRecipeNotesChanged",R_DETACHRECIPENOTESCHANGED:"RDetachRecipeNotesChanged",Q_GETCURRENTRECIPEPATH:"QGetCurrentRecipePath",R_GETCURRENTRECIPEPATH:"RGetCurrentRecipePath",Q_GETRECIPECLASSMEMBERDEFINITIONS:"QGetRecipeClassMemberDefinitions",R_GETRECIPECLASSMEMBERDEFINITIONS:"RGetRecipeClassMemberDefinitions",Q_GETRECIPELOCKSTATE:"QGetRecipeLockState",R_GETRECIPELOCKSTATE:"RGetRecipeLockState",Q_ISEXISTINGRECIPEFILE:"QIsExistingRecipeFile",R_ISEXISTINGRECIPEFILE:"RIsExistingRecipeFile",Q_RECIPECLASSREMOVENOTE:"QRecipeClassRemoveNote",R_RECIPECLASSREMOVENOTE:"RRecipeClassRemoveNote",Q_SETCURRENTRECIPEPATH:"QSetCurrentRecipePath",R_SETCURRENTRECIPEPATH:"RSetCurrentRecipePath",Q_SETRECIPEDEFAULTVALUES:"QSetRecipeDefaultValues",R_SETRECIPEDEFAULTVALUES:"RSetRecipeDefaultValues",RECIPEFILECHANGED:"RecipeFileChanged",Q_ATTACHRECIPEFILECHANGED:"QAttachRecipeFileChanged",R_ATTACHRECIPEFILECHANGED:"RAttachRecipeFileChanged",Q_DETACHRECIPEFILECHANGED:"QDetachRecipeFileChanged",R_DETACHRECIPEFILECHANGED:"RDetachRecipeFileChanged"}}(x.QueryHandler||(x.QueryHandler={}))}(x.Recipe||(x.Recipe={}))}(x.Domain||(x.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";V.registerLockStateChangedCallback=function registerLockStateChangedCallback(R){const D=new A.MsgHelper.TelegramHelper(V.Commands.LOCKSTATECHANGED,V.Commands.LOCKSTATECHANGED);D.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Recipe,D.fnResponse=V=>{!function recipeClassLockStateChangeEventArgs(V,R){let D;const N=V.RequestID,U=V.Authorized,B=V.RecipeClassName,F=V.Locked,W=V.Owner;D=!0===U?"true":"false",R.Settings.System.Debug&&A.Logger.AppDomainLog.log("RecipeClassEventArgs",{Result:D,RequestID:N,Authorized:U},x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Recipe,x.Internal.System.Diagnostics.Logging.AppDomainCategorySource.CommandHandler);const H=R.RecipeManager.getRecipeClassesFromStore().GetFromKeyValue("Name",B);let z=x.System.Recipe.RecipeLockState.Unlocked;F&&(z=W&&"other"===W.toLowerCase()?x.System.Recipe.RecipeLockState.LockedByOtherClient:x.System.Recipe.RecipeLockState.LockedByThisClient),H&&(H.LockState=z,H.LockStateChanged.trigger({RecipeClassName:B,LockState:z}))}(V,R)},D.subscribesToEvent=!0,D.hasResponse=!1,D.RequestID=V.Commands.LOCKSTATECHANGED,D.CmdVal.val={RequestID:D.RequestID},R.SrvHnd.MsgHnd.addCallbackHandler(D)}}(V.QueryHandler||(V.QueryHandler={}))}(A.Recipe||(A.Recipe={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(R){"use strict";function RecipeClassAttachLockStateChangedResponse(x,A){A.ResolvePromise(x,x.Authorized)}function RecipeClassDetachLockStateChangedResponse(x,A){A.ResolvePromise(x,x.Authorized)}R.RecipeClassAttachLockStateChangedQuery=function RecipeClassAttachLockStateChangedQuery(){const V=new A.MsgHelper.TelegramHelper(R.Commands.Q_RECIPECLASSATTACHLOCKSTATECHANGED,R.Commands.R_RECIPECLASSATTACHLOCKSTATECHANGED);return V.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Recipe,V.fnResponse=RecipeClassAttachLockStateChangedResponse,V.CmdVal.val={RequestID:V.RequestID},V},R.RecipeClassDetachLockStateChangedQuery=function RecipeClassDetachLockStateChangedQuery(){const V=new A.MsgHelper.TelegramHelper(R.Commands.Q_RECIPECLASSDETACHLOCKSTATECHANGED,R.Commands.R_RECIPECLASSDETACHLOCKSTATECHANGED);return V.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Recipe,V.fnResponse=RecipeClassDetachLockStateChangedResponse,V.CmdVal.val={RequestID:V.RequestID},V},R.recipeClassAttachLockStateChangedAsync=function recipeClassAttachLockStateChangedAsync(x){return __awaiter(this,void 0,void 0,(function*(){try{const A=V.QueryHandler.RecipeClassAttachLockStateChangedQuery(),R=yield x.SrvHnd.MsgHnd.submitPromise(A);return A.Dispose(),Promise.resolve({Result:R.Autorized})}catch(x){return A.Logger.WarnLog.log("recipeClassAttachLockStateChangedAsync",{e:x.CmdVal}),Promise.reject(x)}}))},R.recipeClassDetachLockStateChangedAsync=function recipeClassDetachLockStateChangedAsync(R){return __awaiter(this,void 0,void 0,(function*(){try{const x=V.QueryHandler.RecipeClassDetachLockStateChangedQuery(),A=yield R.SrvHnd.MsgHnd.submitPromise(x);return Promise.resolve({Result:A.Success,SubRecipes:A.SubRecipes})}catch(V){return A.Logger.WarnLog.log("recipeClassDetachLockStateChangedAsync",x.Internal.makeString(V)),Promise.reject(V)}}))}}(V.QueryHandler||(V.QueryHandler={}))}(A.Recipe||(A.Recipe={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";function RecipeServiceGetRecipeFileResponse(x,A){x.RecipeClassName=A.CmdVal.val.RecipeClassName,x.RecipeFileName=A.CmdVal.val.RecipeFileName,x.TimeOfLastChange=new Date(x.TimeOfLastChange||0),A.ResolvePromise(x,x.Authorized)}V.RecipeServiceGetRecipeFileQuery=function RecipeServiceGetRecipeFileQuery(R,D){const N=new A.MsgHelper.TelegramHelper(V.Commands.Q_RECIPESERVICEGETRECIPEFILE,V.Commands.R_RECIPESERVICEGETRECIPEFILE);return N.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Recipe,N.fnResponse=RecipeServiceGetRecipeFileResponse,N.CmdVal.val={RequestID:N.RequestID,RecipeClassName:R,RecipeFileName:D},N}}(V.QueryHandler||(V.QueryHandler={}))}(A.Recipe||(A.Recipe={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";function RecipeClassGetChangesResponse(V,R){const D=[];if(V.Changes)for(let N=0;N<V.Changes.length;N++){const U=V.Changes[N];let B;B=R.session&&R.session.ServerInfo.WebGatewayProtocolVersion<19?A.DataAccess.ConvertDataTypeToTypeCode(U.DataType):x.Internal.EnumHelper.convertToNumber(x.System.DataAccess.TypeCode,U.DataType);const F=A.DataAccess.ConvertValueByTypeCode(U.NewValue,B),W=A.DataAccess.ConvertValueByTypeCode(U.PreviousValue,B);let H=new Date(0);U.Timestamp&&(H=new Date(U.Timestamp)),U.TimeStamp&&(H=new Date(U.TimeStamp)),D.push({NewValue:F,OldValue:W,Timestamp:H,UserName:U.UserName,VariableName:U.VariableName})}R.ResolvePromise({Result:V.Authorized,Changes:D},V.Authorized)}V.RecipeClassGetChangesQuery=function RecipeClassGetChangesQuery(R,D,N,U){const B=new A.MsgHelper.TelegramHelper(V.Commands.Q_RECIPECLASSGETCHANGES,V.Commands.R_RECIPECLASSGETCHANGES),F=U||new x.System.Recipe.RecipeChangeFilter;return B.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Recipe,B.fnResponse=RecipeClassGetChangesResponse,B.CmdVal.val={RequestID:B.RequestID,RecipeClassName:R,FileName:D,UserName:F.UserName,MachineName:F.MachineName,MaxTime:F.MaxTime.getTime(),MinTime:F.MinTime.getTime()},B}}(V.QueryHandler||(V.QueryHandler={}))}(A.Recipe||(A.Recipe={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";function RecipeClassGetFileNamesResponse(x,A){const V={Result:x.Success,RecipeFileNames:x.RecipeFileNames};A.ResolvePromise(V,x.Authorized)}V.RecipeClassGetFileNamesQuery=function RecipeClassGetFileNamesQuery(R){const D=new A.MsgHelper.TelegramHelper(V.Commands.Q_RECIPECLASSGETFILENAMES,V.Commands.R_RECIPECLASSGETFILENAMES);return D.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Recipe,D.fnResponse=RecipeClassGetFileNamesResponse,D.CmdVal.val={RequestID:D.RequestID,RecipeClassName:R},D}}(V.QueryHandler||(V.QueryHandler={}))}(A.Recipe||(A.Recipe={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";function RecipeServiceGetRecipeClassNamesResponse(x,A){A.ResolvePromise(x,x.Authorized)}V.RecipeServiceGetRecipeClassNamesQuery=function RecipeServiceGetRecipeClassNamesQuery(){const R=new A.MsgHelper.TelegramHelper(V.Commands.Q_RECIPESERVICEGETRECIPECLASSNAMES,V.Commands.R_RECIPESERVICEGETRECIPECLASSNAMES);return R.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Recipe,R.fnResponse=RecipeServiceGetRecipeClassNamesResponse,R.CmdVal.val={RequestID:R.RequestID},R}}(V.QueryHandler||(V.QueryHandler={}))}(A.Recipe||(A.Recipe={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";function RecipeServiceGetRecipeClassResponse(x,A){x.Result=x.Exists,x.Authorized||(x.Result=!1),A.ResolvePromise(x,x.Authorized)}V.RecipeServiceGetRecipeClassQuery=function RecipeServiceGetRecipeClassQuery(R){const D=new A.MsgHelper.TelegramHelper(V.Commands.Q_RECIPESERVICEGETRECIPECLASS,V.Commands.R_RECIPESERVICEGETRECIPECLASS);return D.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Recipe,D.fnResponse=RecipeServiceGetRecipeClassResponse,D.CmdVal.val={RequestID:D.RequestID,RecipeClassName:R},D}}(V.QueryHandler||(V.QueryHandler={}))}(A.Recipe||(A.Recipe={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";function RecipeServiceLoadRecipeFileValuesResponse(V,R){let D=!0;const N=V.VariableNames,U=[],B=[],F=[];let W;!0!==V.Authorized&&(D=!1);for(let N=0;N<V.VariableNames.length;N++){R.session&&R.session.ServerInfo.WebGatewayProtocolVersion>=19?(W=x.Internal.EnumHelper.convertToNumber(x.System.DataAccess.TypeCode,V.DataTypes[N]),F.push(W)):(W=A.DataAccess.ConvertDataTypeToTypeCode(V.DataTypes[N]),F.push(W));const H=x.Internal.EnumHelper.convertToNumber(x.System.Recipe.RecipeMemberErrorCode,V.ErrorCodes[N]);B.push(H);const z=A.DataAccess.ConvertValueByTypeCode(V.Values[N],W);U.push(z),H!==x.System.Recipe.RecipeMemberErrorCode.Succeeded&&(D=!1)}const H={Result:D,Values:U,VariableNames:N,DataTypes:F,ErrorCodes:B};R.ResolvePromise(H,V.Authorized)}V.RecipeServiceLoadRecipeFileValuesQuery=function RecipeServiceLoadRecipeFileValuesQuery(R,D,N,U=!1){const B=new A.MsgHelper.TelegramHelper(V.Commands.Q_RECIPESERVICELOADRECIPEFILEVALUES,V.Commands.R_RECIPESERVICELOADRECIPEFILEVALUES);return B.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Recipe,B.fnResponse=RecipeServiceLoadRecipeFileValuesResponse,B.CmdVal.val={RequestID:B.RequestID,RecipeClassName:R,FileName:D,VariableNames:N,Normalized:U},B}}(V.QueryHandler||(V.QueryHandler={}))}(A.Recipe||(A.Recipe={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";function RecipeClassGetNotesResponse(A,V){const R=[];for(let V=0;V<A.Notes.length;V++){const D=new x.Internal.System.Recipe.RecipeNote(A.Notes[V].ID,A.Notes[V].Text,new Date(A.Notes[V].Timestamp),A.Notes[V].UserName,A.Notes[V].MachineName);R.push(D)}V.ResolvePromise({Notes:R,Result:A.Authorized},A.Authorized)}V.RecipeClassGetNotesQuery=function RecipeClassGetNotesQuery(R,D="",N){const U=new A.MsgHelper.TelegramHelper(V.Commands.Q_RECIPECLASSGETNOTES,V.Commands.R_RECIPECLASSGETNOTES),B=N||new x.Internal.System.Recipe.RecipeNotesFilter;return U.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Recipe,U.fnResponse=RecipeClassGetNotesResponse,U.CmdVal.val={RequestID:U.RequestID,RecipeClassName:R,FileName:D,UserName:B.UserName,MachineName:B.MachineName,MaxTime:B.MaxTime.getTime(),MinTime:B.MinTime.getTime()},U}}(V.QueryHandler||(V.QueryHandler={}))}(A.Recipe||(A.Recipe={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";function RecipeClassGetVariableNamesResponse(x,A){let V;const R=[];if(V=!!(x.VariableNames&&x.VariableNames.length>=0&&!0===x.Authorized),x.VariableNames)for(let A=0;A<x.VariableNames.length;A++){const V=x.VariableNames[A];R.push(V)}A.ResolvePromise({Result:V,VariableNames:R},x.Authorized)}V.RecipeClassGetVariableNamesQuery=function RecipeClassGetVariableNamesQuery(R){const D=new A.MsgHelper.TelegramHelper(V.Commands.Q_RECIPECLASSGETVARIABLENAMES,V.Commands.R_RECIPECLASSGETVARIABLENAMES);return D.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Recipe,D.fnResponse=RecipeClassGetVariableNamesResponse,D.CmdVal.val={RequestID:D.RequestID,RecipeClassName:R},D}}(V.QueryHandler||(V.QueryHandler={}))}(A.Recipe||(A.Recipe={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";function RecipeClassGetValuesResponse(V,R){let D=!0;const N=V.VariableNames,U=[],B=[],F=[];!0!==V.Authorized&&(D=!1);for(let N=0;N<V.VariableNames.length;N++){let W;if(R.session&&R.session.ServerInfo.WebGatewayProtocolVersion<19)W=A.DataAccess.ConvertDataTypeToTypeCode(V.DataTypes[N]),F.push(W);else{const R=A.DataAccess.ConvertTypeCodeToDataType(V.DataTypes[N]);W=A.DataAccess.ConvertDataTypeToTypeCode(x.System.DataAccess.DataType[R]),F.push(W)}const H=x.Internal.EnumHelper.convertToNumber(x.System.Recipe.RecipeMemberErrorCode,V.ErrorCodes[N]);B.push(H);const z=A.DataAccess.ConvertValueByTypeCode(V.Values[N],W);U.push(z),H!==x.System.Recipe.RecipeMemberErrorCode.Succeeded&&(D=!1)}const W={Result:D,Values:U,VariableNames:N,DataTypes:F,ErrorCodes:B};R.ResolvePromise(W,V.Authorized)}V.RecipeClassGetValuesQuery=function RecipeClassGetValuesQuery(R,D){const N=new A.MsgHelper.TelegramHelper(V.Commands.Q_RECIPECLASSGETVALUES,V.Commands.R_RECIPECLASSGETVALUES);return N.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Recipe,N.fnResponse=RecipeClassGetValuesResponse,N.CmdVal.val={RequestID:N.RequestID,RecipeClassName:R,VariableNames:D||null},N}}(V.QueryHandler||(V.QueryHandler={}))}(A.Recipe||(A.Recipe={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";function RecipeClassLoadFileToBufferResponse(A,V){var R,D;let N=!0;if("string"!=typeof A.Result){const U=x.Internal.System.Recipe.buildRecipeResult(A.Result,V.session);let B=U.Data.Error;B!==x.System.Recipe.LoadRecipeResults.Succeeded&&(N=!1),B=x.Internal.System.Recipe.mapActionSuccessToLoadRecipeResults(B);let F="";(null===(R=V.CmdVal.val)||void 0===R?void 0:R.FileName)&&(F=null===(D=V.CmdVal.val)||void 0===D?void 0:D.FileName);const W=[];for(let A=0;A<U.Data.MemberResults.length;A++){const V=x.Internal.EnumHelper.convertToNumber(x.System.Recipe.RecipeErrorCode,U.Data.MemberResults[A].ErrorCode),R=new x.Internal.System.Recipe.RecipeErrorParam(U.Data.MemberResults[A].VariableName,V);W.push(R)}const H=[];for(let x=0;x<U.SubRecipesData.length;x++){const A={Class:U.SubRecipesData[x].Class,ErrorParams:W,FileName:F,FilePath:U.Data.Details.Directory,Result:B,SubRecipesResults:[]};H.push(A)}const z={Class:U.Data.Class,ErrorParams:W,FileName:F,FilePath:U.Data.Details.Directory,Result:B,SubRecipesResults:H,ActionResult:U};V.ResolvePromise(z,A.Authorized)}}function RecipeClassLoadFromFileToBufferResponse(A,V){let R=!0;if("string"==typeof A.Result){const D=x.Internal.EnumHelper.convertToNumber(x.System.Recipe.LoadRecipeSuccess,A.Result);D!==x.System.Recipe.LoadRecipeSuccess.Succeeded&&(R=!1);const N=[],U=A.MemberErrors;if(A.MemberErrors){const A=U.length;for(let V=0;V<A;V++){const A=x.Internal.EnumHelper.convertToNumber(x.System.Recipe.RecipeMemberErrorCode,U[V].ErrorCode);N.push({ErrorCode:A,VariableName:U[V].VariableName})}}const B={Result:R,LoadRecipeSuccess:D,MemberErrors:N};V.ResolvePromise(B,A.Authorized)}if("string"!=typeof A.Result){const D=x.Internal.System.Recipe.buildRecipeResult(A.Result,V.session);let N=D.Data.Error;N!==x.System.Recipe.RecipeActionSuccess.Succeeded&&(R=!1),N=x.Internal.System.Recipe.mapActionSuccessToLoadRecipeSuccess(N);const U=[];for(let A=0;A<D.Data.MemberResults.length;A++){const V=x.Internal.EnumHelper.convertToNumber(x.System.Recipe.RecipeMemberErrorCode,D.Data.MemberResults[A].ErrorCode),R=new x.Internal.System.Recipe.RecipMemberErrorValue(D.Data.MemberResults[A].VariableName,V);U.push(R)}const B={Result:R,LoadRecipeSuccess:N,MemberErrors:U};V.ResolvePromise(B,A.Authorized)}}V.RecipeClassLoadFileToBufferQuery=function RecipeClassLoadFileToBufferQuery(R,D,N=!1){const U=new A.MsgHelper.TelegramHelper(V.Commands.Q_RECIPECLASSLOADFROMFILETOBUFFER,V.Commands.R_RECIPECLASSLOADFROMFILETOBUFFER);return U.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Recipe,U.fnResponse=RecipeClassLoadFileToBufferResponse,U.CmdVal.val={RequestID:U.RequestID,RecipeClassName:R,FileName:D,Normalized:N},U},V.RecipeClassLoadFromFileToBufferQuery=function RecipeClassLoadFromFileToBufferQuery(R,D,N=!1){const U=new A.MsgHelper.TelegramHelper(V.Commands.Q_RECIPECLASSLOADFROMFILETOBUFFER,V.Commands.R_RECIPECLASSLOADFROMFILETOBUFFER);return U.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Recipe,U.fnResponse=RecipeClassLoadFromFileToBufferResponse,U.CmdVal.val={RequestID:U.RequestID,RecipeClassName:R,FileName:D,Normalized:N},U}}(V.QueryHandler||(V.QueryHandler={}))}(A.Recipe||(A.Recipe={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";function RecipeClassLoadFileToProcessResponse(A,V){var R,D;if("string"!=typeof A.Result){const N=x.Internal.System.Recipe.buildRecipeResult(A.Result,V.session);let U=N.Data.Error;U=x.Internal.System.Recipe.mapActionSuccessToSendRecipeResult(U);let B=N.Data.Error;B=x.Internal.System.Recipe.mapActionSuccessToLoadRecipeSuccess(B);let F="";(null===(R=V.CmdVal.val)||void 0===R?void 0:R.RecipeFileName)&&(F=null===(D=V.CmdVal.val)||void 0===D?void 0:D.RecipeFileName);const W=[];for(let A=0;A<N.Data.MemberResults.length;A++){const V=x.Internal.EnumHelper.convertToNumber(x.System.Recipe.RecipeErrorCode,N.Data.MemberResults[A].ErrorCode),R=new x.Internal.System.Recipe.RecipeErrorParam(N.Data.MemberResults[A].VariableName,V);W.push(R)}const H={Class:A.Result.Data.Class,Result:U,ErrorParams:W,ActionResult:N,FileName:F,FilePath:""};V.ResolvePromise(H,A.Authorized)}}function RecipeClassLoadFromFileToProcessResponse(A,V){if("string"==typeof A.Result){let R=!0;const D=x.Internal.EnumHelper.convertToNumber(x.System.Recipe.LoadRecipeSuccess,A.Result);D!==x.System.Recipe.LoadRecipeSuccess.Succeeded&&(R=!1);const N=D===x.System.Recipe.LoadRecipeSuccess.Succeeded,U=[],B=A.MemberErrors;if(A.MemberErrors){const A=B.length;for(let V=0;V<A;V++){const A=x.Internal.EnumHelper.convertToNumber(x.System.Recipe.RecipeMemberErrorCode,B[V].ErrorCode);U.push({ErrorCode:A,VariableName:B[V].VariableName})}}V.ResolvePromise({Result:N,LoadRecipeSuccess:D,MemberErrors:U},A.Authorized)}if("string"!=typeof A.Result){let R=!0;const D=x.Internal.System.Recipe.buildRecipeResult(A.Result,V.session),N=x.Internal.EnumHelper.convertToNumber(x.System.Recipe.LoadRecipeSuccess,A.Result);N!==x.System.Recipe.LoadRecipeSuccess.Succeeded&&(R=!1);const U=[];for(let A=0;A<D.Data.MemberResults.length;A++){const V=x.Internal.EnumHelper.convertToNumber(x.System.Recipe.RecipeMemberErrorCode,D.Data.MemberResults[A].ErrorCode),R=new x.Internal.System.Recipe.RecipMemberErrorValue(D.Data.MemberResults[A].VariableName,V);U.push(R)}const B={Result:R,LoadRecipeSuccess:N,MemberErrors:U};V.ResolvePromise(B,A.Authorized)}}V.RecipeClassLoadFileToProcessQuery=function RecipeClassLoadFileToProcessQuery(R,D,N=!1){const U=new A.MsgHelper.TelegramHelper(V.Commands.Q_RECIPECLASSLOADFROMFILETOPROCESS,V.Commands.R_RECIPECLASSLOADFROMFILETOPROCESS);return U.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Recipe,U.fnResponse=RecipeClassLoadFileToProcessResponse,U.CmdVal.val={RequestID:U.RequestID,RecipeClassName:R,RecipeFileName:D,Normalized:N},U},V.RecipeClassLoadFromFileToProcessQuery=function RecipeClassLoadFromFileToProcessQuery(R,D,N=!1){const U=new A.MsgHelper.TelegramHelper(V.Commands.Q_RECIPECLASSLOADFROMFILETOPROCESS,V.Commands.R_RECIPECLASSLOADFROMFILETOPROCESS);return U.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Recipe,U.fnResponse=RecipeClassLoadFromFileToProcessResponse,U.CmdVal.val={RequestID:U.RequestID,RecipeClassName:R,RecipeFileName:D,Normalized:N},U}}(V.QueryHandler||(V.QueryHandler={}))}(A.Recipe||(A.Recipe={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";function RecipeClassReadProcessToBufferResponse(A,V){let R=!0;if("string"!=typeof A.Result){const D=x.Internal.System.Recipe.buildRecipeResult(A.Result,V.session);let N=D.Data.Error;N!==x.System.Recipe.RecipeActionSuccess.Succeeded&&(R=!1),N=x.Internal.System.Recipe.mapActionSuccessToGetRecipeSuccess(N);const U=[];for(let A=0;A<D.Data.MemberResults.length;A++){const V=x.Internal.EnumHelper.convertToNumber(x.System.Recipe.RecipeMemberErrorCode,D.Data.MemberResults[A].ErrorCode),R=new x.Internal.System.Recipe.RecipMemberErrorValue(D.Data.MemberResults[A].VariableName,V);U.push(R)}const B={Result:R,GetRecipeSuccess:N,RecipeActionResult:D,ActionResult:D};V.ResolvePromise(B,A.Authorized)}if("string"==typeof A.Result){const D=x.Internal.EnumHelper.convertToNumber(x.System.Recipe.GetRecipeSuccess,A.Result);D!==x.System.Recipe.GetRecipeSuccess.Succeeded&&(R=!1),V.ResolvePromise({Result:R,GetRecipeSuccess:D},A.Authorized)}}V.RecipeClassReadProcessToBufferQuery=function RecipeClassReadProcessToBufferQuery(R){const D=new A.MsgHelper.TelegramHelper(V.Commands.Q_RECIPECLASSREADPROCESSTOBUFFER,V.Commands.R_RECIPECLASSREADPROCESSTOBUFFER);return D.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Recipe,D.fnResponse=RecipeClassReadProcessToBufferResponse,D.CmdVal.val={RequestID:D.RequestID,RecipeClassName:R},D}}(V.QueryHandler||(V.QueryHandler={}))}(A.Recipe||(A.Recipe={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";function RecipeClassSaveBufferToFileResponse(A,V){var R,D;if(V.session&&V.session.ServerInfo.WebGatewayProtocolVersion>=19){const N=x.Internal.System.Recipe.buildRecipeResult(A.Result,V.session);let U=N.Data.Error;U=x.Internal.System.Recipe.mapActionSuccessToSaveRecipeResult(U);const B=[];for(let A=0;A<N.Data.MemberResults.length;A++){const V=x.Internal.EnumHelper.convertToNumber(x.System.Recipe.RecipeMemberErrorCode,N.Data.MemberResults[A].ErrorCode),R=new x.Internal.System.Recipe.RecipMemberErrorValue(N.Data.MemberResults[A].VariableName,V);B.push(R)}let F="";(null===(R=V.CmdVal.val)||void 0===R?void 0:R.FileName)&&(F=null===(D=V.CmdVal.val)||void 0===D?void 0:D.FileName);const W={Result:U,FilePath:N.Data.Details.Directory,FileName:F,ActionResult:N};V.ResolvePromise(W,A.Authorized)}}function RecipeClassSaveToFileFromBufferResponse(A,V){let R=!0;if(V.session&&V.session.ServerInfo.WebGatewayProtocolVersion>=19&&"string"!=typeof A.Result){const D=x.Internal.System.Recipe.buildRecipeResult(A.Result,V.session);let N=D.Data.Error;N!==x.System.Recipe.RecipeActionSuccess.Succeeded&&(R=!1),N=x.Internal.System.Recipe.mapActionSuccessToSaveRecipeSuccess(N);const U=[];for(let A=0;A<D.Data.MemberResults.length;A++){const V=x.Internal.EnumHelper.convertToNumber(x.System.Recipe.RecipeMemberErrorCode,D.Data.MemberResults[A].ErrorCode),R=new x.Internal.System.Recipe.RecipMemberErrorValue(D.Data.MemberResults[A].VariableName,V);U.push(R)}const B={Result:R,SaveRecipeSuccess:N};V.ResolvePromise(B,A.Authorized)}if("string"==typeof A.Result){const D=x.Internal.EnumHelper.convertToNumber(x.System.Recipe.SaveRecipeSuccess,A.Result);D!==x.System.Recipe.SaveRecipeSuccess.Succeeded&&(R=!1);const N={Result:R,SaveRecipeSuccess:D};V.ResolvePromise(N,A.Authorized)}}V.RecipeClassSaveBufferToFileQuery=function RecipeClassSaveBufferToFileQuery(R,D,N,U,B=!1){const F=new A.MsgHelper.TelegramHelper(V.Commands.Q_RECIPECLASSSAVETOFILEFROMBUFFER,V.Commands.R_RECIPECLASSSAVETOFILEFROMBUFFER);return F.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Recipe,F.fnResponse=RecipeClassSaveBufferToFileResponse,F.CmdVal.val={RequestID:F.RequestID,RecipeClassName:R,FileName:D,Description:N,ForceReplace:U,Normalized:B},F},V.RecipeClassSaveToFileFromBufferQuery=function RecipeClassSaveToFileFromBufferQuery(R,D,N,U,B=!1){const F=new A.MsgHelper.TelegramHelper(V.Commands.Q_RECIPECLASSSAVETOFILEFROMBUFFER,V.Commands.R_RECIPECLASSSAVETOFILEFROMBUFFER);return F.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Recipe,F.fnResponse=RecipeClassSaveToFileFromBufferResponse,F.CmdVal.val={RequestID:F.RequestID,RecipeClassName:R,FileName:D,Description:N,ForceReplace:U,Normalized:B},F}}(V.QueryHandler||(V.QueryHandler={}))}(A.Recipe||(A.Recipe={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";function RecipeClassSetValuesResponse(A,V){let R=!0;if(V.session&&V.session.ServerInfo.WebGatewayProtocolVersion>=19){if("string"!=typeof A.Result){const D=x.Internal.System.Recipe.buildRecipeResult(A.Result,V.session);let N=D.Data.Error;N!==x.System.Recipe.RecipeActionSuccess.Succeeded&&(R=!1),N=x.Internal.System.Recipe.mapActionSuccessToRecipeMemberErrorCode(N);const U=[];for(let A=0;A<D.Data.MemberResults.length;A++){const V=x.Internal.EnumHelper.convertToNumber(x.System.Recipe.RecipeMemberErrorCode,D.Data.MemberResults[A].ErrorCode),R=new x.Internal.System.Recipe.RecipMemberErrorValue(D.Data.MemberResults[A].VariableName,V);U.push(R)}const B=[];B.push({Result:!0,RecipeMemberErrorCode:N,RecipeActionResult:D}),V.ResolvePromise(B,A.Authorized)}}else if(A.Results){const R=[];if(x.isNullOrUndefined(A.Results))R.push({Result:!1,RecipeMemberErrorCode:x.System.Recipe.RecipeMemberErrorCode.Unknown});else for(let V=0;V<A.Results.length;V++){const D=x.Internal.EnumHelper.convertToNumber(x.System.Recipe.RecipeMemberErrorCode,A.Results[V]);D===x.System.Recipe.RecipeMemberErrorCode.Succeeded?R.push({Result:!0,RecipeMemberErrorCode:D}):R.push({Result:!1,RecipeMemberErrorCode:D})}V.ResolvePromise(R,A.Authorized)}}V.RecipeClassSetValuesQuery=function RecipeClassSetValuesQuery(R,D,N){const U=new A.MsgHelper.TelegramHelper(V.Commands.Q_RECIPECLASSSETVALUES,V.Commands.R_RECIPECLASSSETVALUES);return U.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Recipe,U.fnResponse=RecipeClassSetValuesResponse,U.CmdVal.val={RequestID:U.RequestID,RecipeClassName:R,VariableNames:D,Values:N},U}}(V.QueryHandler||(V.QueryHandler={}))}(A.Recipe||(A.Recipe={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";function RecipeClassWriteBufferToProcessResponse(A,V){if(V.session&&V.session.ServerInfo.WebGatewayProtocolVersion>=19){if("string"!=typeof A.Result){const R=x.Internal.System.Recipe.buildRecipeResult(A.Result,V.session);let D=R.Data.Error,N=!0;D!==x.System.Recipe.RecipeActionSuccess.Succeeded&&(N=!1),D=x.Internal.System.Recipe.mapActionSuccessToSetRecipeSuccess(D);const U={Result:N,SetRecipeSuccess:D,RecipeActionResult:R,ActionResult:R};V.ResolvePromise(U,A.Authorized)}}else if("string"==typeof A.Result){const R=x.Internal.EnumHelper.convertToNumber(x.System.Recipe.SetRecipeSuccess,A.Result);let D=!0;R!==x.System.Recipe.SetRecipeSuccess.Succeeded&&(D=!1);const N={Result:D,SetRecipeSuccess:R};V.ResolvePromise(N,A.Authorized)}}V.RecipeClassWriteBufferToProcessQuery=function RecipeClassWriteBufferToProcessQuery(R){const D=new A.MsgHelper.TelegramHelper(V.Commands.Q_RECIPECLASSWRITEBUFFERTOPROCESS,V.Commands.R_RECIPECLASSWRITEBUFFERTOPROCESS);return D.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Recipe,D.fnResponse=RecipeClassWriteBufferToProcessResponse,D.CmdVal.val={RequestID:D.RequestID,RecipeClassName:R},D}}(V.QueryHandler||(V.QueryHandler={}))}(A.Recipe||(A.Recipe={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";function RecipeClassAddNoteResponse(x,A){A.ResolvePromise(x.Success,x.Authorized)}V.RecipeClassAddNoteQuery=function RecipeClassAddNoteQuery(R,D){const N=new A.MsgHelper.TelegramHelper(V.Commands.Q_RECIPECLASSADDNOTE,V.Commands.R_RECIPECLASSADDNOTE);return N.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Recipe,N.fnResponse=RecipeClassAddNoteResponse,N.CmdVal.val={RequestID:N.RequestID,RecipeClassName:R,NoteText:D},N}}(V.QueryHandler||(V.QueryHandler={}))}(A.Recipe||(A.Recipe={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";function RecipeClassClearChangesResponse(x,A){A.ResolvePromise(x.Success,x.Authorized)}V.RecipeClassClearChangesQuery=function RecipeClassClearChangesQuery(R){const D=new A.MsgHelper.TelegramHelper(V.Commands.Q_RECIPECLASSCLEARCHANGES,V.Commands.R_RECIPECLASSCLEARCHANGES);return D.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Recipe,D.fnResponse=RecipeClassClearChangesResponse,D.CmdVal.val={RequestID:D.RequestID,RecipeClassName:R},D}}(V.QueryHandler||(V.QueryHandler={}))}(A.Recipe||(A.Recipe={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";function RecipeClassClearNotesResponse(x,A){A.ResolvePromise(x.Success,x.Authorized)}V.RecipeClassClearNotesQuery=function RecipeClassClearNotesQuery(R){const D=new A.MsgHelper.TelegramHelper(V.Commands.Q_RECIPECLASSCLEARNOTES,V.Commands.R_RECIPECLASSCLEARNOTES);return D.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Recipe,D.fnResponse=RecipeClassClearNotesResponse,D.CmdVal.val={RequestID:D.RequestID,RecipeClassName:R},D}}(V.QueryHandler||(V.QueryHandler={}))}(A.Recipe||(A.Recipe={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";function RecipeClassLockRecipeResponse(x,A){A.ResolvePromise(x.Success,x.Authorized)}V.RecipeClassLockRecipeQuery=function RecipeClassLockRecipeQuery(R){const D=new A.MsgHelper.TelegramHelper(V.Commands.Q_RECIPECLASSLOCKRECIPE,V.Commands.R_RECIPECLASSLOCKRECIPE);return D.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Recipe,D.fnResponse=RecipeClassLockRecipeResponse,D.CmdVal.val={RequestID:D.RequestID,RecipeClassName:R},D}}(V.QueryHandler||(V.QueryHandler={}))}(A.Recipe||(A.Recipe={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";function RecipeClassUnlockRecipeResponse(x,A){A.ResolvePromise(x.Success,x.Authorized)}V.RecipeClassUnlockRecipeQuery=function RecipeClassUnlockRecipeQuery(R){const D=new A.MsgHelper.TelegramHelper(V.Commands.Q_RECIPECLASSUNLOCKRECIPE,V.Commands.R_RECIPECLASSUNLOCKRECIPE);return D.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Recipe,D.fnResponse=RecipeClassUnlockRecipeResponse,D.CmdVal.val={RequestID:D.RequestID,RecipeClassName:R},D}}(V.QueryHandler||(V.QueryHandler={}))}(A.Recipe||(A.Recipe={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";function RecipeClassGetSubRecipesResponse(A,V){var R,D;let N=!1;const U=[];if(A.SubRecipes)if(A.SubRecipes.length>=1){for(let V=0;V<A.SubRecipes.length;V++)U.push(new x.Internal.System.Recipe.SubRecipe(A.SubRecipes[V].Name,null!==(D=null===(R=A.SubRecipes[V])||void 0===R?void 0:R.FileNameVariableName)&&void 0!==D?D:"",A.SubRecipes[V].SortIndex,A.SubRecipes[V].Comment));N=!0}else N=!1;const B={Result:N,SubRecipes:U};V.ResolvePromise(B,A.Authorized)}V.RecipeClassGetSubRecipesQuery=function RecipeClassGetSubRecipesQuery(R){const D=new A.MsgHelper.TelegramHelper(V.Commands.Q_RECIPECLASSGETSUBRECIPES,V.Commands.R_RECIPECLASSGETSUBRECIPES);return D.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Recipe,D.fnResponse=RecipeClassGetSubRecipesResponse,D.CmdVal.val={RequestID:D.RequestID,RecipeClassName:R},D}}(V.QueryHandler||(V.QueryHandler={}))}(A.Recipe||(A.Recipe={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";function RecipeClassDeleteFileResponse(A,V){let R=!0;const D=x.Internal.EnumHelper.convertToNumber(x.System.Recipe.DeleteRecipeFileSuccess,A.Result);D!==x.System.Recipe.DeleteRecipeFileSuccess.Succeeded&&(R=!1);const N={Result:R,DeleteRecipeFileSuccess:D};V.ResolvePromise(N,A.Authorized)}V.RecipeClassDeleteFileQuery=function RecipeClassDeleteFileQuery(R,D){const N=new A.MsgHelper.TelegramHelper(V.Commands.Q_RECIPECLASSDELETEFILE,V.Commands.R_RECIPECLASSDELETEFILE);return N.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Recipe,N.fnResponse=RecipeClassDeleteFileResponse,N.CmdVal.val={RequestID:N.RequestID,RecipeClassName:R,FileName:D},N}}(V.QueryHandler||(V.QueryHandler={}))}(A.Recipe||(A.Recipe={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(R){"use strict";function AttachRecipeNotesChangedResponse(x,A){A.ResolvePromise(x,x.Authorized)}function DetachRecipeNotesChangedResponse(x,A){A.ResolvePromise(x,x.Authorized)}R.AttachRecipeNotesChangedQuery=function AttachRecipeNotesChangedQuery(){const V=new A.MsgHelper.TelegramHelper(R.Commands.Q_ATTACHRECIPENOTESCHANGED,R.Commands.R_ATTACHRECIPENOTESCHANGED);return V.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Recipe,V.fnResponse=AttachRecipeNotesChangedResponse,V.CmdVal.val={RequestID:V.RequestID},V},R.DetachRecipeNotesChangedQuery=function DetachRecipeNotesChangedQuery(){const V=new A.MsgHelper.TelegramHelper(R.Commands.Q_DETACHRECIPENOTESCHANGED,R.Commands.R_DETACHRECIPENOTESCHANGED);return V.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Recipe,V.fnResponse=DetachRecipeNotesChangedResponse,V.CmdVal.val={RequestID:V.RequestID},V},R.attachRecipeNotesChangedAsync=function attachRecipeNotesChangedAsync(x){return __awaiter(this,void 0,void 0,(function*(){try{const A=V.QueryHandler.AttachRecipeNotesChangedQuery(),R=yield x.SrvHnd.MsgHnd.submitPromise(A);return A.Dispose(),Promise.resolve({Result:R.Autorized})}catch(x){return A.Logger.WarnLog.log("attachRecipeNotesChangedAsync",{e:x.CmdVal}),Promise.reject(x)}}))},R.detachRecipeNotesChangedAsync=function detachRecipeNotesChangedAsync(R){return __awaiter(this,void 0,void 0,(function*(){try{const x=V.QueryHandler.DetachRecipeNotesChangedQuery(),A=yield R.SrvHnd.MsgHnd.submitPromise(x);return Promise.resolve({Result:A.Success,SubRecipes:A.SubRecipes})}catch(V){return A.Logger.WarnLog.log("detachRecipeNotesChangedAsync",x.Internal.makeString(V)),Promise.reject(V)}}))}}(V.QueryHandler||(V.QueryHandler={}))}(A.Recipe||(A.Recipe={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){var V;(function(V){"use strict";V.registerRecipeNotesChangedCallback=function registerRecipeNotesChangedCallback(R){const D=new A.MsgHelper.TelegramHelper(V.Commands.RECIPENOTESCHANGED,V.Commands.RECIPENOTESCHANGED);D.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Recipe,D.fnResponse=V=>{!function recipeNotesChangedEventArgs(V,R){let D;const N=V.RequestID,U=V.Authorized;V.Class,D=!0===U?"true":"false",R.Settings.System.Debug&&A.Logger.AppDomainLog.log("RecipeClassEventArgs",{Result:D,RequestID:N,Authorized:U},x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Recipe,x.Internal.System.Diagnostics.Logging.AppDomainCategorySource.CommandHandler),R.RecipeManager.getRecipeClassesFromStore()}(V,R)},D.subscribesToEvent=!0,D.hasResponse=!1,D.RequestID=V.Commands.RECIPENOTESCHANGED,D.CmdVal.val={RequestID:D.RequestID},R.SrvHnd.MsgHnd.addCallbackHandler(D)}})((V=A.Recipe||(A.Recipe={})).QueryHandler||(V.QueryHandler={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";function GetCurrentRecipePathResponse(x,A){A.ResolvePromise(x.CurrentPath,x.Authorized)}V.GetCurrentRecipePathQuery=function GetCurrentRecipePathQuery(R){const D=new A.MsgHelper.TelegramHelper(V.Commands.Q_GETCURRENTRECIPEPATH,V.Commands.R_GETCURRENTRECIPEPATH);return D.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Recipe,D.fnResponse=GetCurrentRecipePathResponse,D.CmdVal.val={RequestID:D.RequestID,RecipeClassName:R},D}}(V.QueryHandler||(V.QueryHandler={}))}(A.Recipe||(A.Recipe={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";function GetRecipeClassMemberDefinitionsResponse(A,V){const R=[];if(A.MemberDefinitions)for(let V=0;V<A.MemberDefinitions.length;V++){const D=new x.Internal.System.Recipe.RecipeMemberDefinition(A.MemberDefinitions[V].VariableFullName,A.MemberDefinitions[V].DefaultValue,A.MemberDefinitions[V].SortIndex,A.MemberDefinitions[V].LocalizableText,A.MemberDefinitions[V].Comment);R.push(D)}V.ResolvePromise(R,A.Authorized)}V.GetRecipeClassMemberDefinitionsQuery=function GetRecipeClassMemberDefinitionsQuery(R){const D=new A.MsgHelper.TelegramHelper(V.Commands.Q_GETRECIPECLASSMEMBERDEFINITIONS,V.Commands.R_GETRECIPECLASSMEMBERDEFINITIONS);return D.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Recipe,D.fnResponse=GetRecipeClassMemberDefinitionsResponse,D.CmdVal.val={RequestID:D.RequestID,RecipeClassName:R},D}}(V.QueryHandler||(V.QueryHandler={}))}(A.Recipe||(A.Recipe={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";function GetRecipeLockStateResponse(A,V){V.ResolvePromise(x.System.Recipe.RecipeLockState[A.State],A.Authorized)}V.GetRecipeLockStateQuery=function GetRecipeLockStateQuery(R){const D=new A.MsgHelper.TelegramHelper(V.Commands.Q_GETRECIPELOCKSTATE,V.Commands.R_GETRECIPELOCKSTATE);return D.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Recipe,D.fnResponse=GetRecipeLockStateResponse,D.CmdVal.val={RequestID:D.RequestID,RecipeClassName:R},D}}(V.QueryHandler||(V.QueryHandler={}))}(A.Recipe||(A.Recipe={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";function IsExistingRecipeFileResponse(x,A){A.ResolvePromise(x.Exists,x.Authorized)}V.IsExistingRecipeFileQuery=function IsExistingRecipeFileQuery(R,D){const N=new A.MsgHelper.TelegramHelper(V.Commands.Q_ISEXISTINGRECIPEFILE,V.Commands.R_ISEXISTINGRECIPEFILE);return N.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Recipe,N.fnResponse=IsExistingRecipeFileResponse,N.CmdVal.val={RequestID:N.RequestID,RecipeClassName:R,FileName:D},N}}(V.QueryHandler||(V.QueryHandler={}))}(A.Recipe||(A.Recipe={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";V.registerRecipeBufferChangedCallback=function registerRecipeBufferChangedCallback(R){const D=new A.MsgHelper.TelegramHelper(V.Commands.RECIPEBUFFERCHANGED,V.Commands.RECIPEBUFFERCHANGED);D.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Recipe,D.fnResponse=V=>{!function recipeClassRecipeBufferChangeEventArgs(V,R){let D=!0;const N=R.RecipeManager.getRecipeClassesFromStore();if(R&&R.ServerInfo.WebGatewayProtocolVersion>=19)for(let U=0;U<V.length;U++){const B=x.Internal.EnumHelper.convertToNumber(x.System.Recipe.RecipeChangedAction,V[U].Action),F=x.Internal.EnumHelper.convertToNumber(x.System.Recipe.RecipeChangedSource,V[U].Source);if("string"!=typeof V[U].Result){const W={Data:V[U].Result,SubRecipesData:[]},H=x.Internal.System.Recipe.buildRecipeResult(W,R);let z=H.Data.Error;z!==x.System.Recipe.RecipeActionSuccess.Succeeded&&(D=!1),z=x.Internal.System.Recipe.mapActionSuccessToRecipeMemberErrorCode(z);const G=[];for(let A=0;A<H.Data.MemberResults.length;A++){const V=x.Internal.EnumHelper.convertToNumber(x.System.Recipe.RecipeMemberErrorCode,H.Data.MemberResults[A].ErrorCode),R=new x.Internal.System.Recipe.RecipMemberErrorValue(H.Data.MemberResults[A].VariableName,V);G.push(R)}if(R.ServerInfo.RuntimeVersion>7.2){const D=N.GetFromKeyValue("Name",H.Data.Class),z=[];for(let A=0;A<W.Data.MemberResults.length;A++){const V=W.Data.MemberResults[A].ErrorCode,R=new x.Internal.System.Recipe.RecipeMemberResult(W.Data.MemberResults[A].VariableName,V);z.push(R)}if(D)switch(B){case x.System.Recipe.RecipeChangedAction.LoadFileToBuffer:case x.System.Recipe.RecipeChangedAction.ReadProcessToBuffer:case x.System.Recipe.RecipeChangedAction.SetDefaults:case x.System.Recipe.RecipeChangedAction.SetValues:const N=new x.Internal.System.Recipe.RecipeBufferChangeEventArgs(B,F,H.Data);D.BufferChanged.trigger(N),R.Settings.System.Debug&&A.Logger.AppDomainLog.log("RecipeBufferChange",{RecipeClass:H.Data.Class},x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Recipe,x.Internal.System.Diagnostics.Logging.AppDomainCategorySource.CommandHandler);break;case x.System.Recipe.RecipeChangedAction.LoadFileToProcess:case x.System.Recipe.RecipeChangedAction.WriteBufferToProcess:const W=new x.Internal.System.Recipe.WrittenToProcessEventArgs(B,F,z,H.Data.Class,H.Data.Details,H.Data.Details.Machine);D.WrittenToProcess.trigger(W),R.Settings.System.Debug&&A.Logger.AppDomainLog.log("WrittenToProcess",{RecipeClass:H.Data.Class},x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Recipe,x.Internal.System.Diagnostics.Logging.AppDomainCategorySource.CommandHandler);break;case x.System.Recipe.RecipeChangedAction.SaveBufferToFile:const G=V[U].Result.Details.Name,j=new x.Internal.System.Recipe.RecipeFilesChangedEventArgs(H.Data.Class,G,H.Data.Details.Directory,H.Data.Details.User,H.Data.Details.Machine,x.System.Recipe.FileAction.Saved);G&&-1===D.FileNames.indexOf(G)&&D.FileNames.push(G),D.FilesChanged.trigger(j),R.Settings.System.Debug&&A.Logger.AppDomainLog.log("FilesChanged",{RecipeClass:H.Data.Class},x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Recipe,x.Internal.System.Diagnostics.Logging.AppDomainCategorySource.CommandHandler);break;default:R.Settings.System.Debug&&A.Logger.AppDomainLog.log("ArgumentOutOfRangeException",{RecipeClass:H.Data.Class},x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Recipe,x.Internal.System.Diagnostics.Logging.AppDomainCategorySource.CommandHandler)}}}}}(V,R)},D.subscribesToEvent=!0,D.hasResponse=!1,D.RequestID=V.Commands.RECIPEBUFFERCHANGED,D.CmdVal.val={RequestID:D.RequestID},R.SrvHnd.MsgHnd.addCallbackHandler(D)}}(V.QueryHandler||(V.QueryHandler={}))}(A.Recipe||(A.Recipe={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";function RecipeClassRemoveNoteResponse(x,A){A.ResolvePromise(x.Success,x.Authorized)}V.RecipeClassRemoveNoteQuery=function RecipeClassRemoveNoteQuery(R,D){const N=new A.MsgHelper.TelegramHelper(V.Commands.Q_RECIPECLASSREMOVENOTE,V.Commands.R_RECIPECLASSREMOVENOTE);return N.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Recipe,N.fnResponse=RecipeClassRemoveNoteResponse,N.CmdVal.val={RequestID:N.RequestID,RecipeClassName:R,ID:D},N}}(V.QueryHandler||(V.QueryHandler={}))}(A.Recipe||(A.Recipe={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(R){"use strict";function AttachRecipeBufferChangedResponse(x,A){A.ResolvePromise(x,x.Authorized)}function DetachRecipeBufferChangedResponse(x,A){A.ResolvePromise(x,x.Authorized)}R.AttachRecipeBufferChangedQuery=function AttachRecipeBufferChangedQuery(){const V=new A.MsgHelper.TelegramHelper(R.Commands.Q_ATTACHRECIPEBUFFERCHANGED,R.Commands.R_ATTACHRECIPEBUFFERCHANGED);return V.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Recipe,V.fnResponse=AttachRecipeBufferChangedResponse,V.CmdVal.val={RequestID:V.RequestID},V},R.DetachRecipeBufferChangedQuery=function DetachRecipeBufferChangedQuery(){const V=new A.MsgHelper.TelegramHelper(R.Commands.Q_DETACHRECIPEBUFFERCHANGED,R.Commands.R_DETACHRECIPEBUFFERCHANGED);return V.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Recipe,V.fnResponse=DetachRecipeBufferChangedResponse,V.CmdVal.val={RequestID:V.RequestID},V},R.attachRecipeBufferChangedAsync=function attachRecipeBufferChangedAsync(x){return __awaiter(this,void 0,void 0,(function*(){try{const A=V.QueryHandler.AttachRecipeBufferChangedQuery(),R=yield x.SrvHnd.MsgHnd.submitPromise(A);return A.Dispose(),Promise.resolve({Result:R.Autorized})}catch(x){return A.Logger.WarnLog.log("attachRecipeBufferChangedAsync",{e:x.CmdVal}),Promise.reject(x)}}))},R.detachRecipeBufferChangedAsync=function detachRecipeBufferChangedAsync(R){return __awaiter(this,void 0,void 0,(function*(){try{const x=V.QueryHandler.DetachRecipeBufferChangedQuery(),A=yield R.SrvHnd.MsgHnd.submitPromise(x);return Promise.resolve({Result:A.Success,SubRecipes:A.SubRecipes})}catch(V){return A.Logger.WarnLog.log("detachRecipeBufferChangedAsync",x.Internal.makeString(V)),Promise.reject(V)}}))}}(V.QueryHandler||(V.QueryHandler={}))}(A.Recipe||(A.Recipe={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";function RecipeServiceUnlockAllResponse(x,A){A.ResolvePromise(x.Success,x.Authorized)}V.RecipeServiceUnlockAllQuery=function RecipeServiceUnlockAllQuery(){const R=new A.MsgHelper.TelegramHelper(V.Commands.Q_RECIPESERVICEUNLOCKALL,V.Commands.R_RECIPESERVICEUNLOCKALL);return R.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Recipe,R.fnResponse=RecipeServiceUnlockAllResponse,R.CmdVal.val={RequestID:R.RequestID},R}}(V.QueryHandler||(V.QueryHandler={}))}(A.Recipe||(A.Recipe={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";function SetCurrentRecipePathResponse(A,V){V.ResolvePromise(x.System.Recipe.ChangeDirectorySuccess[A.Result],A.Authorized)}V.SetCurrentRecipePathQuery=function SetCurrentRecipePathQuery(R,D){const N=new A.MsgHelper.TelegramHelper(V.Commands.Q_SETCURRENTRECIPEPATH,V.Commands.R_SETCURRENTRECIPEPATH);return N.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Recipe,N.fnResponse=SetCurrentRecipePathResponse,N.CmdVal.val={RequestID:N.RequestID,RecipeClassName:R,NewPath:D},N}}(V.QueryHandler||(V.QueryHandler={}))}(A.Recipe||(A.Recipe={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";function SetRecipeDefaultValuesToBufferResponse(A,V){if(V.session&&V.session.ServerInfo.WebGatewayProtocolVersion>=19){const R=x.Internal.System.Recipe.buildRecipeResult(A.Result,V.session),D=x.Internal.System.Recipe.mapActionSuccessToSetValuesResult(R.Data.Error),N=[];for(let A=0;A<R.Data.MemberResults.length;A++){const V=new x.Internal.System.Recipe.RecipeValue(R.Data.MemberResults[A].Value,R.Data.MemberResults[A].VariableName,R.Data.MemberResults[A].ErrorCode);N.push(V)}const U=[];for(let A=0;A<R.SubRecipesData.length;A++){const V=x.Internal.System.Recipe.mapActionSuccessToSetValuesResult(R.SubRecipesData[A].Error),D=[];for(let V=0;V<R.SubRecipesData[A].MemberResults.length;V++){const N=new x.Internal.System.Recipe.RecipeValue(R.SubRecipesData[A].MemberResults[V].Value,R.SubRecipesData[A].MemberResults[V].VariableName,R.SubRecipesData[A].MemberResults[V].ErrorCode);D.push(N)}U.push({Result:V,Values:D,SubRecipesData:[]})}const B={Result:D,Values:N,ActionResult:R,SubRecipesData:U};V.ResolvePromise(B,A.Authorized)}else V.ResolvePromise(A.Result,A.Authorized)}function SetRecipeDefaultValuesResponse(A,V){if(V.session&&V.session.ServerInfo.WebGatewayProtocolVersion>=19){const R=x.Internal.System.Recipe.buildRecipeResult(A.Result,V.session);V.ResolvePromise(R,A.Authorized)}else V.ResolvePromise(A.Result,A.Authorized)}V.SetRecipeDefaultValuesToBufferQuery=function SetRecipeDefaultValuesToBufferQuery(R,D,N){const U=new A.MsgHelper.TelegramHelper(V.Commands.Q_SETRECIPEDEFAULTVALUES,V.Commands.R_SETRECIPEDEFAULTVALUES);return U.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Recipe,U.fnResponse=SetRecipeDefaultValuesToBufferResponse,U.CmdVal.val={RequestID:U.RequestID,RecipeClassName:R,DefaultValueSource:x.System.Recipe.ClearBufferDefaultValues[D],Recursive:N},U},V.SetRecipeDefaultValuesQuery=function SetRecipeDefaultValuesQuery(R,D,N){const U=new A.MsgHelper.TelegramHelper(V.Commands.Q_SETRECIPEDEFAULTVALUES,V.Commands.R_SETRECIPEDEFAULTVALUES);return U.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Recipe,U.fnResponse=SetRecipeDefaultValuesResponse,U.CmdVal.val={RequestID:U.RequestID,RecipeClassName:R,DefaultValueSource:x.System.Recipe.ClearBufferDefaultValues[D],Recursive:N},U}}(V.QueryHandler||(V.QueryHandler={}))}(A.Recipe||(A.Recipe={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(R){"use strict";function AttachRecipeFileChangedResponse(x,A){A.ResolvePromise(x,x.Authorized)}function DetachRecipeFileChangedResponse(x,A){A.ResolvePromise(x,x.Authorized)}R.AttachRecipeFileChangedQuery=function AttachRecipeFileChangedQuery(){const V=new A.MsgHelper.TelegramHelper(R.Commands.Q_ATTACHRECIPEFILECHANGED,R.Commands.R_ATTACHRECIPEFILECHANGED);return V.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Recipe,V.fnResponse=AttachRecipeFileChangedResponse,V.CmdVal.val={RequestID:V.RequestID},V},R.DetachRecipeFileChangedQuery=function DetachRecipeFileChangedQuery(){const V=new A.MsgHelper.TelegramHelper(R.Commands.Q_DETACHRECIPEFILECHANGED,R.Commands.R_DETACHRECIPEFILECHANGED);return V.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Recipe,V.fnResponse=DetachRecipeFileChangedResponse,V.CmdVal.val={RequestID:V.RequestID},V},R.AttachRecipeFileChangedAsync=function AttachRecipeFileChangedAsync(x){return __awaiter(this,void 0,void 0,(function*(){try{const A=V.QueryHandler.AttachRecipeFileChangedQuery(),R=yield x.SrvHnd.MsgHnd.submitPromise(A);return A.Dispose(),Promise.resolve({Result:R.Autorized})}catch(x){return A.Logger.WarnLog.log("AttachRecipeFileChangedAsync",{e:x.CmdVal}),Promise.reject(x)}}))},R.DetachRecipeFileChangedAsync=function DetachRecipeFileChangedAsync(R){return __awaiter(this,void 0,void 0,(function*(){try{const x=V.QueryHandler.DetachRecipeFileChangedQuery(),A=yield R.SrvHnd.MsgHnd.submitPromise(x);return Promise.resolve({Result:A.Success,SubRecipes:A.SubRecipes})}catch(V){return A.Logger.WarnLog.log("DetachRecipeFileChangedAsync",x.Internal.makeString(V)),Promise.reject(V)}}))}}(V.QueryHandler||(V.QueryHandler={}))}(A.Recipe||(A.Recipe={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";V.registerRecipeFileChangedCallback=function registerRecipeFileChangedCallback(R){const D=new A.MsgHelper.TelegramHelper(V.Commands.RECIPEFILECHANGED,V.Commands.RECIPEFILECHANGED);D.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Recipe,D.fnResponse=V=>{!function RecipeFileChangedEventArgs(V,R){let D;const N=V.Authorized,U=x.Internal.EnumHelper.convertToNumber(x.System.Recipe.FileAction,V.FileAction),B=V.ClassName,F=V.Name,W=V.Directory,H=V.User,z=V.Machine;D=!0===N?"true":"false";try{const A=R.RecipeManager.getRecipeClassesFromStore().GetFromKeyValue("Name",B);if(A){const V=new x.Internal.System.Recipe.RecipeFilesChangedEventArgs(B,F,W,H,z,U);U===x.System.Recipe.FileAction.Deleted&&-1!==A.FileNames.indexOf(F)&&A.FileNames.splice(A.FileNames.indexOf(F),1),U===x.System.Recipe.FileAction.Saved&&-1===A.FileNames.indexOf(F)&&A.FileNames.push(F),A.FilesChanged.trigger(V)}}catch(x){}R.Settings.System.Debug&&A.Logger.AppDomainLog.log("FilesChanged",{RecipeClass:B},x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Recipe,x.Internal.System.Diagnostics.Logging.AppDomainCategorySource.CommandHandler)}(V,R)},D.subscribesToEvent=!0,D.hasResponse=!1,D.RequestID=V.Commands.RECIPEFILECHANGED,D.CmdVal.val={RequestID:D.RequestID},R.SrvHnd.MsgHnd.addCallbackHandler(D)}}(V.QueryHandler||(V.QueryHandler={}))}(A.Recipe||(A.Recipe={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(x){x.Domain||(x.Domain={})}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){"use strict";class TrendManager extends A.ManagerBase{constructor(V){super(V),this.ID=x.Guid(),this.Type.Namespace="VisiWin.Internal.Application.Manager",this.Type.TypeName="TrendManager",this._store=new A.Store.Trend(this),A.Trend.QueryHandler.registerHistoricalTrendData2Callback(V),A.Trend.QueryHandler.registerRecordedTrendData2Callback(V),A.Trend.QueryHandler.registerTrendDataCallback(V)}Dispose(){this._store.Dispose(),A.Dispose(this.TrendService),A.Dispose(this._TrendService);for(const x in this)Object.prototype.hasOwnProperty.call(this,x)&&delete this[x]}getTrendData(V,R,D,N,U,B){return __awaiter(this,void 0,void 0,(function*(){try{const x=A.Trend.QueryHandler.GetTrendDataQuery(V,R,D,N,U,B),F=yield this.session.SrvHnd.MsgHnd.submitPromise(x);x.Dispose(),x.Dispose();const W=this._store.getAttachedTrend(V);return W.MaxTime=N,W.MinTime=D,Promise.resolve(F.handler.RequestID)}catch(V){return A.Logger.WarnLog.log("getTrendData",x.Internal.makeString(V)),Promise.reject(V)}}))}get TrendService(){return this._TrendService||(this._TrendService=new x.Internal.System.Trend.TrendService(this)),this._TrendService}getArchive2(A){const V=this._store.Archives.GetFromObjectKey("Name",{Name:A});if(V){const A=new x.Internal.System.Trend.ArchiveTrendProvider(this,V.Name);return A.TrendNames=V.TrendNames,A.LocalizableText=V.LocalizableText,A}return null}initializeTrends2(V,R){return __awaiter(this,void 0,void 0,(function*(){try{const D=A.Trend.QueryHandler.InitializeTrendsQuery(V.Name,R,!0),N=[];for(let A=0;A<R.length;A++){const D=this._store.getTrend(V.Name+"."+R[A]),U=new x.Internal.System.Trend.TrendIng(D.Name);U.FullName=D.FullName,U.ArchiveName=D.ArchiveName,U.Text=D.Text,U.LocalizableText=D.LocalizableText,N.push(U)}const U={RequestID:D.RequestID,Archive:V,ArchiveName:V.Name,TrendNames:R,Trend:N,Count:0,DataSamples:[],Completed:!1,UseTrendProvider:!0,TrendOnlineState:x.System.Trend.SetTrendOnlineState.Off,MinTime:new Date(0),MaxTime:new Date};this._store.addAttachedTrend(U.RequestID,U);const B=yield this.session.SrvHnd.MsgHnd.submitPromise(D);D.Dispose();const F=B.handler.RequestID,W=[];for(let x=0;x<B.handler.DesiredTrendResults.length;x++){A.MsgHelper.DefaultResultComparer(B.handler.DesiredTrendResults[x].Result);const V={TrendName:B.handler.DesiredTrendResults[x].TrendName,Result:B.handler.DesiredTrendResults[x].Result};W.push(V)}return Promise.resolve({RequestID:F,DesiredTrendResults:W,Archive:V,Trends:N,Result:A.MsgHelper.DefaultResultComparer(B.handler.Result)})}catch(V){return A.Logger.WarnLog.log("initializeTrends2",x.Internal.makeString(V)),Promise.reject(V)}}))}getTrendData2(x,V,R,D,N,U){return __awaiter(this,void 0,void 0,(function*(){try{const B=A.Trend.QueryHandler.GetTrendData2Query(x,V,R,D,N,U);try{const x=yield this.session.SrvHnd.MsgHnd.submitPromise(B);return B.Dispose(),Promise.resolve(x.handler.RequestID)}catch(x){return A.Logger.ErrorLog.log("GetTrendData2Query",{archiveName:V,trendNames:N}),Promise.reject(x)}}catch(x){return A.Logger.WarnLog.log("getTrendData2",{archiveName:V,trendNames:N}),Promise.reject(x)}}))}initializeTrends(V,R){return __awaiter(this,void 0,void 0,(function*(){try{const D=A.Trend.QueryHandler.InitializeTrendsQuery(V.Name,R,!1),N=[];for(let A=0;A<R.length;A++){const D=this._store.getTrend(V.Name+"."+R[A]),U=new x.Internal.System.Trend.TrendIng(D.Name);U.FullName=D.FullName,U.ArchiveName=D.ArchiveName,U.Text=D.Text,U.LocalizableText=D.LocalizableText,N.push(U)}const U={RequestID:D.RequestID,Archive:V,ArchiveName:V.Name,TrendNames:R,Trend:N,Count:0,DataSamples:[],Completed:!1,UseTrendProvider:!1,TrendOnlineState:x.System.Trend.SetTrendOnlineState.Off,MinTime:new Date(0),MaxTime:new Date};this._store.addAttachedTrend(U.RequestID,U);const B=yield this.session.SrvHnd.MsgHnd.submitPromise(D);D.Dispose();const F=B.handler.RequestID,W=[];for(let x=0;x<B.handler.DesiredTrendResults.length;x++){A.MsgHelper.DefaultResultComparer(B.handler.DesiredTrendResults[x].Result);const V={TrendName:B.handler.DesiredTrendResults[x].TrendName,Result:B.handler.DesiredTrendResults[x].Result};W.push(V)}return Promise.resolve({RequestID:F,DesiredTrendResults:W,Archive:V,Trends:N,Result:A.MsgHelper.DefaultResultComparer(B.handler.Result)})}catch(V){return A.Logger.WarnLog.log("initializeTrends",x.Internal.makeString(V)),Promise.reject(V)}}))}getTrendDataOld(V,R,D,N,U,B){return __awaiter(this,void 0,void 0,(function*(){try{const x=yield this.getTrendData(V,R,D,N,U,B),A=this._store.getAttachedTrend(V);return A.MaxTime=N,A.MinTime=D,Promise.resolve({RequestID:x,Result:!0})}catch(V){return A.Logger.WarnLog.log("getTrendDataOld",x.Internal.makeString(V)),Promise.reject(V)}}))}setTrendOnlineState(V,R){return __awaiter(this,void 0,void 0,(function*(){const D=this._store.getAttachedTrend(V);D&&(D.TrendOnlineState=R),D&&R===x.System.Trend.SetTrendOnlineState.Release&&this._store.removeAttachedTrend(V),D&&x.System.Trend.SetTrendOnlineState.Off;try{const x=A.Trend.QueryHandler.SetTrendOnlineStateQuery(V,R);return yield this.session.SrvHnd.MsgHnd.submitPromise(x),x.Dispose(),Promise.resolve(!0)}catch(V){return A.Logger.WarnLog.log("setTrendOnlineState",x.Internal.makeString(V)),Promise.reject(V)}}))}initArchives(){return __awaiter(this,void 0,void 0,(function*(){try{const V=A.Trend.QueryHandler.GetArchivesQuery(),R=yield this.session.SrvHnd.MsgHnd.submitPromise(V);V.Dispose();const D=[];let N=!1;0===R.handler.Archives.length&&(N=!0);for(const A of R.handler.Archives){const V=new x.Internal.System.Trend.Archive(this,A.Name);D.push(V),N=!0;this._store.getArchive(V.Name)||(this._store.addArchive(V),this.TrendService.ArchiveNames.push(V.Name))}return Promise.resolve({Archives:R.handler.Archives,Result:N})}catch(V){return A.Logger.WarnLog.log("initArchives",x.Internal.makeString(V)),Promise.reject(V)}}))}getAllTrends(){return __awaiter(this,void 0,void 0,(function*(){try{const V=A.Trend.QueryHandler.GetAllTrendsQuery(),R=yield this.session.SrvHnd.MsgHnd.submitPromise(V);V.Dispose();const D=[];for(const x of R.Trends){D.push(x.ArchiveInfo.LocalizableText);for(const A of x.TrendInfos)D.push(A.LocalizableText)}D.length>0&&this.session.LanguageManager._subscribeLocalizedTextsAsync(D);for(const A of R.Trends){const V=new x.Internal.System.Trend.Archive(this,A.Archive);V.LocalizableText=A.LocalizableText,this.session.TrendManager._store.addArchive(V);for(const R of A.Trends){const A=new x.Internal.System.Trend.TrendIng(R.Name);A.LocalizableText=R.LocalizableText,A.Text=R.Text,A.ArchiveName=V.Name,A.FullName=V.Name+"."+R.Name,V.TrendNames.push(R.Name),this.session.TrendManager._store.addTrend(A)}this.TrendService.ArchiveNames.push(V.Name)}return Promise.resolve({Trends:R.Trends})}catch(V){return V.watchDogTimeout&&0!==V.watchDogTimeout&&A.Logger.WarnLog.log("getAllTrends",x.Internal.makeString(V)),Promise.reject(V)}}))}initTrends(V){return __awaiter(this,void 0,void 0,(function*(){try{const x=A.Trend.QueryHandler.GetTrendsQuery(V),R=yield this.session.SrvHnd.MsgHnd.submitPromise(x);x.Dispose();let D=!0;const N=[],U=[];let B=!1;const F=[],W=[];for(let x=0;x<R.handler.Trends.length;x++){R.handler.Trends[x].Result===A.CONST.Telegram.RESULTOK?(F.push({Archive:R.handler.Trends[x].Archive,LocalizableText:R.handler.Trends[x].LocalizableText}),U.push(A.CONST.Telegram.RESULTOK)):(B=!0,N.push(R.handler.Trends[x].Result),U.push(R.handler.Trends[x].Result));const V=A.Trend.TrendEventArgs(R.handler.Trends[x]);W.push(V)}B&&(D=!1);let H=null;for(const x of W)for(const A of x)if(H=this._store.getArchive(A.ArchiveName),H){F&&F[0]&&(H.LocalizableText=F[0].LocalizableText);-1===H.TrendNames.indexOf(A.Name)&&(this._store.addTrend(A),H.TrendNames.push(A.Name))}const z=R.handler.RequestID;return Promise.resolve({Archive:H,Trends:W,RequestID:z,DesiredTrendResults:U,Result:D})}catch(V){return A.Logger.WarnLog.log("initTrends",x.Internal.makeString(V)),Promise.reject(V)}}))}getArchiveFromStore(x){return this._store.getArchive(x)}getTrendFromStore(x){return this._store.getTrend(x)}getAttachedTrendFromStore(x){return this._store.getAttachedTrend(x)}}A.TrendManager=TrendManager}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(A){"use strict";A.TrendEventArgs=function TrendEventArgs(A){const V=[];for(let R=0;R<A.Trends.length;R++){const D=new x.Internal.System.Trend.TrendIng(A.Trends[R].Name);D.ArchiveName=A.Archive,D.FullName=A.Archive+"."+D.Name,A.Trends[R].LocalizableText&&(D.LocalizableText=A.Trends[R].LocalizableText),V.push(D)}return V},A.convertToDataSample=function convertToDataSample(A,V,R){const D=new x.Internal.System.Trend.DataSample;D.State=x.System.Trend.SampleState[A.State],D.Time=new Date(parseInt(A.Time,10)),D.XValue=A.Time,D.YValue=parseFloat(A.Value.replace(",",".")),A=D,R[V]=D}}(A.Trend||(A.Trend={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){"use strict";V.TrendProvider=class TrendProvider{constructor(V,R){if(this._chartDataArray={},this._requestPending=!1,this.MinDate=new Date,this.OnTrendProviderError=new A.Events.TypedEvent,this._manager=R||x.Internal.Application.ApplicationManager.getApplication().getDefaultSession().TrendManager,V?(x.isDate(V.DateMax)||(V.DateMax=new Date),V.DateMax,this.ArchiveName=V.ArchiveName,this.TrendNames=V.TrendNames,this.MaxDate=V.DateMax,this.SetTimeSpan(V.TimeSpan),this.SetMaxTime(V.DateMax),this.TrendOnline=V.TrendOnline,this.MaxSamples=V.MaxSamples||600):(this.ArchiveName="",this.TrendNames=[],this.MaxDate=new Date,this.TrendOnline=!1,this.SetTimeSpan(1e3),this.MaxSamples=600),this.Trends=[],this.TrendNames)for(const x of this.TrendNames)this._chartDataArray[x]=[];this._curRequestID="",this._trendService=this._manager.TrendService,this._onTrendsDataCompletedHandler=null,this._onNewDataSampleHandler=x=>{this._onNewDataSample(x)},this._onResumeCommunication=()=>{this._updateChartData()},this.DataSamplesUpdate=new A.Events.TypedEvent,this.TrendDataRequestStarted=new A.Events.TypedEvent,this.TrendDataRequestCompleted=new A.Events.TypedEvent,x.Internal.Domain.Application.Socket.onResumeCommunication.add(this._onResumeCommunication)}SetMaxTime(A){x.isDate(A)?(this.MaxDate=A,this.MinDate=new Date(this.MaxDate.getTime()-this.TimeSpan)):(this.MaxDate=new Date,this.MinDate=new Date(this.MaxDate.getTime()-this.TimeSpan))}SetTimeSpan(x){x?(this.TimeSpan=x,this.MinDate=new Date(this.MaxDate.getTime()-this.TimeSpan)):this.TimeSpan=this.MaxDate.getTime()-this.MinDate.getTime()}TrendOnlineState(A){if(A)this.TrendOnline=!0,this.SetMaxTime(new Date);else{for(let x=0,A=this.Trends;x<A.length;x++){A[x].TrendDataRecorded.remove(this._onNewDataSampleHandler,this)}this.Archive&&this.Archive.SetTrendOnlineState(this._curRequestID,x.System.Trend.SetTrendOnlineState.Off)}}_initTrends(){if(!this._requestPending)if(this._requestPending=!0,this.Archive=this._manager.getArchive2(this.ArchiveName),this.Archive)if(x.isNullOrUndefined(this.TrendNames)||0===this.TrendNames.length)try{throw new x.Internal.System.Exception.ExceptionBase("Archive Trends error",`Error, trend names for Archive('${this.ArchiveName}') are not defined.`)}catch(x){this.OnTrendProviderError.trigger(x)}else{for(let x=0;x<this.TrendNames.length;x++){let A=this._trendService.GetTrend(this.ArchiveName,this.TrendNames[x]);A?this.Trends.push(A):(this.TrendNames.splice(x,1),x--)}if(0!==this.Trends.length)this.TrendDataRequestStarted.trigger(this._getTrendOptionsEventArgs()),this.Archive.InitializeTrends(this.TrendNames).then(x=>{this.Trends=x.Trends,this._requestPending=!1,this._curRequestID=x.RequestID,this._getTrendDatafromArchive()});else try{throw new x.Internal.System.Exception.ExceptionBase("Archive Trends error",`Error, trend names for Archive('${this.ArchiveName}') does not exists.`)}catch(x){this.OnTrendProviderError.trigger(x)}}else try{throw new x.Internal.System.Exception.ExceptionBase("Archive error",`Error, Archive('${this.ArchiveName}') does not exist.`)}catch(x){this.OnTrendProviderError.trigger(x)}}_getTrendOptionsEventArgs(){return{ArchiveName:this.ArchiveName,TrendNames:this.TrendNames,DateMax:this.MaxDate,MaxSamples:this.MaxSamples,TimeSpan:this.TimeSpan,TrendOnline:this.TrendOnline}}_updateChartData(){this._getTrendDatafromArchive()}_getTrendDatafromArchive(){this.TrendOnline&&this.SetMaxTime(new Date);for(let x=0,A=this.TrendNames;x<A.length;x++){const V=A[x];this._chartDataArray[V]=[]}if(!this._onTrendsDataCompletedHandler){this._onTrendsDataCompletedHandler=x=>{this._onTrendsDataCompleted(x)},this.Archive&&this.Archive.GetTrendsDataCompleted.add(this._onTrendsDataCompletedHandler,this);for(let x=0,A=this.Trends;x<A.length;x++){const V=A[x];V&&V.TrendDataRecorded.remove(this._onNewDataSampleHandler,this)}this.Archive&&this.Archive.GetTrendData2(this._curRequestID,this.MinDate,this.MaxDate,this.TrendNames,this.MaxSamples).then(()=>{})}}_onTrendsDataCompleted(A){if(A.RequestID===this._curRequestID&&this.Archive){this.Archive.GetTrendsDataCompleted.remove(this._onTrendsDataCompletedHandler,this),this._onTrendsDataCompletedHandler=null;const V=this._handleSampleArray(A);if(this.TrendOnline){this.Archive.SetTrendOnlineState(this._curRequestID,x.System.Trend.SetTrendOnlineState.On);for(let x=0,A=this.Trends;x<A.length;x++){const V=A[x];V&&V.TrendDataRecorded.add(this._onNewDataSampleHandler,this)}}V.ArchiveName=A.ArchiveName,this.DataSamplesUpdate.trigger(V),this.TrendDataRequestCompleted.trigger(this._getTrendOptionsEventArgs())}}_handleSampleArray(x){return this._chartDataArray=x.Data,this._chartDataArray}_onNewDataSample(A){if(this._curRequestID===A.Data[0].Tag.RequestID){const V=this._handleSampleSingle(A.Data[0]);V.ArchiveName=A.ArchiveName,x.isUndefined(V)||this.DataSamplesUpdate.trigger(V)}}_handleSampleSingle(x){if(""!==x.Time&&""!==x.YValue){const A=x.Tag.Name.toString();if(x.Tag.RemoveOldestSample){let x=!1;if(this._chartDataArray[A][0])if(this._chartDataArray[A][0].length>0){let V=this._chartDataArray[A].shift();V=null,x=!0}else{let V=this._chartDataArray[A].shift();V=null,x=!0}if(!x&&this._chartDataArray[A].length>0){let x=this._chartDataArray[A][this._chartDataArray[A].length-1].shift();x=null}}this._chartDataArray[A]||(this._chartDataArray[A]=[]),this._chartDataArray[A].push([x.Time,x.YValue])}return this.SetMaxTime(new Date),this._chartDataArray}init(){if(""===this._curRequestID)this._initTrends();else{if(this.Archive&&!0===this.Archive.TrendsInitialzed||this.Archive&&!0===this.Archive.ArchiveAttached){if(this.Archive.OnlineState===x.System.Trend.SetTrendOnlineState.Release)throw"Debugger!";if(this.Trends&&this.Trends.length)for(let x=0,A=this.Trends;x<A.length;x++){A[x].TrendDataRecorded.remove(this._onNewDataSampleHandler,this)}if(this.Archive.SetTrendOnlineState(this._curRequestID,x.System.Trend.SetTrendOnlineState.Release),this._chartDataArray={},this.Trends=[],this.TrendNames)for(const x of this.TrendNames)this._chartDataArray[x]=[];this._curRequestID=""}this._initTrends()}}detach(){this.unload()}dispose(){this.unload()}unload(){try{if(x.Internal.Domain.Application.Socket.onResumeCommunication.remove(this._onResumeCommunication),this.Archive&&this.Archive.SetTrendOnlineState(this._curRequestID,x.System.Trend.SetTrendOnlineState.Release),this.Trends&&this.Trends.length)for(let x=0,A=this.Trends;x<A.length;x++){A[x].TrendDataRecorded.remove(this._onNewDataSampleHandler,this)}this._curRequestID=null,this.Archive=null,this.Trends=null,this._trendService=null,this._chartDataArray=null}catch(A){x.Internal.Domain.Logger.WarnLog.log("Trendatasource unload Error",A)}}}}(A.Trend||(A.Trend={}))}(A.System||(A.System={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){"use strict";V.Trend=class Trend{constructor(x){this._manager=x,this.Archives=new V.DataStore,this.Trends=new V.DataStore,this.AttachedTrends=new V.DataStore}Dispose(){this.Archives.DeleteAll(),this.Trends.DeleteAll(),this.AttachedTrends.DeleteAll()}getArchive(x){return this.Archives.GetFromObjectKey("Name",{Name:x})}addArchive(V){this._manager.session.Settings.System.Debug&&A.Logger.AppDomainLog.log("AddArchive",V,x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Trend,x.Internal.System.Diagnostics.Logging.AppDomainCategorySource.Store),this.Archives.Add(V.Name,V)}getTrend(x){return this.Trends.GetFromObjectKey("FullName",{FullName:x})}addTrend(V){this._manager.session.Settings.System.Debug&&A.Logger.AppDomainLog.log("AddTrend",V,x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Trend,x.Internal.System.Diagnostics.Logging.AppDomainCategorySource.Store),this.Trends.Add(V.ArchiveName+"."+V.Name,V)}addAttachedTrend(V,R){this._manager.session.Settings.System.Debug&&A.Logger.AppDomainLog.log("AddAttachedTrend",{requestID:V},x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Trend,x.Internal.System.Diagnostics.Logging.AppDomainCategorySource.Store),this.AttachedTrends.Add(V,R)}getAttachedTrend(x){return this.AttachedTrends.GetFromKeyValue(A.CONST.Telegram.REQUESTID,x)}removeAttachedTrend(V){this._manager.session.Settings.System.Debug&&A.Logger.AppDomainLog.log("RemoveAttachedTrend",{requestID:V},x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Trend,x.Internal.System.Diagnostics.Logging.AppDomainCategorySource.Store),this.AttachedTrends.Delete(V)}}}(A.Store||(A.Store={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){!function(x){!function(x){"use strict";x.Commands={Q_GETALLTRENDS:"QGetAllTrends",R_GETALLTRENDS:"RGetAllTrends",Q_GETARCHIVES:"QGetArchives",R_GETARCHIVES:"RGetArchives",Q_GETTRENDDATA:"QGetTrendData",R_GETTRENDDATA:"RGetTrendData",Q_GETTRENDDATA2:"QGetTrendData2",R_GETTRENDDATA2:"RGetTrendData2",Q_GETTRENDS:"QGetTrends",R_GETTRENDS:"RGetTrends",Q_INITIALIZETRENDS:"QInitializeTrends",R_INITIALIZETRENDS:"RInitializeTrends",SETTRENDONLINESTATE:"SetTrendOnlineState",TRENDDATAEVENT:"TrendData",RGETTRENDDATA2:"RGetTrendData2",RECORDEDTRENDDATA2:"RecordedTrendData2",HISTORICALTRENDDATA2:"HistoricalTrendData2"}}(x.QueryHandler||(x.QueryHandler={}))}(x.Trend||(x.Trend={}))}(x.Domain||(x.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";function GetArchivesResponse(x,A){A.ResolvePromise({handler:x,cmd:A},x.Authorized)}V.GetArchivesQuery=function GetArchivesQuery(){const R=new A.MsgHelper.TelegramHelper(V.Commands.Q_GETARCHIVES,V.Commands.R_GETARCHIVES);return R.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.UserManagement,R.fnResponse=GetArchivesResponse,R.CmdVal.val={RequestID:R.RequestID},R}}(V.QueryHandler||(V.QueryHandler={}))}(A.Trend||(A.Trend={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";function GetTrendsResponse(x,A){A.ResolvePromise({handler:x,cmd:A},x.Authorized)}V.GetTrendsQuery=function GetTrendsQuery(R){const D=new A.MsgHelper.TelegramHelper(V.Commands.Q_GETTRENDS,V.Commands.R_GETTRENDS);D.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.UserManagement;const N=[];if(x.isArray(R))for(let x=0;x<R.length;x++)R[x]&&N.push({Name:R[x]});else N.push({Name:R});return D.fnResponse=GetTrendsResponse,D.CmdVal.val={RequestID:D.RequestID,Archives:N},D}}(V.QueryHandler||(V.QueryHandler={}))}(A.Trend||(A.Trend={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";function GetTrendDataResponse(x,A){A.ResolvePromise({handler:x,cmd:A},x.Authorized)}V.GetTrendDataQuery=function GetTrendDataQuery(R,D,N,U,B,F){const W=new A.MsgHelper.TelegramHelper(V.Commands.Q_GETTRENDDATA,V.Commands.R_GETTRENDDATA);return W.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.UserManagement,W.fnResponse=GetTrendDataResponse,W.RequestID=R,W.CmdVal.val={RequestID:W.RequestID,UtcOffset:0,MinTime:N.getTime(),MaxTime:U.getTime(),MaxSamples:F},W}}(V.QueryHandler||(V.QueryHandler={}))}(A.Trend||(A.Trend={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";function GetTrendData2Response(x,A){A.ResolvePromise({handler:x,cmd:A},x.Authorized)}V.GetTrendData2Query=function GetTrendData2Query(R,D,N,U,B,F){const W=new A.MsgHelper.TelegramHelper(V.Commands.Q_GETTRENDDATA2,V.Commands.Q_GETTRENDDATA2);return W.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.UserManagement,W.fnResponse=GetTrendData2Response,W.RequestID=R,W.CmdVal.val={RequestID:W.RequestID,UtcOffset:0,MinTime:N.getTime(),MaxTime:U.getTime(),MaxSamples:F},W}}(V.QueryHandler||(V.QueryHandler={}))}(A.Trend||(A.Trend={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";function InitializeTrendsResponse(x,A){A.ResolvePromise({handler:x,cmd:A},x.Authorized)}V.InitializeTrendsQuery=function InitializeTrendsQuery(R,D,N=!1){const U=[];for(let x=0;x<D.length;x++)U.push({TrendName:D[x]});const B=new A.MsgHelper.TelegramHelper(V.Commands.Q_INITIALIZETRENDS,V.Commands.Q_INITIALIZETRENDS);return B.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.UserManagement,B.fnResponse=InitializeTrendsResponse,B.CmdVal.val={RequestID:B.RequestID,Archive:R,DesiredTrends:U,UseNewTrendMethod:N},B}}(V.QueryHandler||(V.QueryHandler={}))}(A.Trend||(A.Trend={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";function SetTrendOnlineStateResponse(x,A){A.ResolvePromise({handler:x,cmd:A},x.Authorized)}V.SetTrendOnlineStateQuery=function SetTrendOnlineStateQuery(R,D){const N=new A.MsgHelper.TelegramHelper(V.Commands.SETTRENDONLINESTATE,"");return N.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.UserManagement,N.hasResponse=!1,N.fnResponse=SetTrendOnlineStateResponse,N.RequestID=R,N.CmdVal.val={RequestID:N.RequestID,State:x.System.Trend.SetTrendOnlineState[D]},N}}(V.QueryHandler||(V.QueryHandler={}))}(A.Trend||(A.Trend={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";function GetAllTrendsResponse(x,A){A.ResolvePromise(x,x.Authorized)}V.GetAllTrendsQuery=function GetAllTrendsQuery(){const R=new A.MsgHelper.TelegramHelper(V.Commands.Q_GETALLTRENDS,V.Commands.R_GETALLTRENDS);return R.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.UserManagement,R.fnResponse=GetAllTrendsResponse,R.CmdVal.val={RequestID:R.RequestID},R}}(V.QueryHandler||(V.QueryHandler={}))}(A.Trend||(A.Trend={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";V.registerTrendDataCallback=function registerTrendDataCallback(R){const D=new A.MsgHelper.TelegramHelper(V.Commands.TRENDDATAEVENT,V.Commands.TRENDDATAEVENT);D.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Trend,D.fnResponse=A=>{!function trendDataChangeEventArgs(A,V){const R=A.RequestID,D=A.TrendNames.map(x=>x),N=parseInt(A.Count,10),U=[],B=A.Data.length;for(let V=0;V<B;V++)A.Data[V].forEach(x.Internal.Domain.Trend.convertToDataSample),U.push(A.Data[V]);A.Count>V.Settings.System.MaxTrendSamples&&(V.Settings.System.MaxTrendSamples=A.Count);const F=V.TrendManager.getArchiveFromStore(A.ArchiveName),W=V.TrendManager.getAttachedTrendFromStore(A.RequestID);if(F){let B=!1;for(let x=0;x<A.TrendNames.length;x++){const R=V.TrendManager.getTrendFromStore(A.ArchiveName+"."+A.TrendNames[x]);for(let V=0;V<A.Data.length;V++)if(A.Data[V][x]&&(A.Data[V][x].Tag={Name:A.TrendNames[x],RequestID:A.RequestID}),1===A.Data.length){const D={Count:N,TrendName:A.TrendNames[x],Data:A.Data[V][x],ArchiveName:W.ArchiveName};R.TrendDataRecorded.trigger(D),W&&W.Archive.TrendDataRecorded.trigger(D)}}if(W&&A.Data.length>1){const x=W.DataSamples.concat(A.Data);W.DataSamples=x,W.Count>=A.Count?B=!0:(W.Count=A.Data.length+W.Count,W.Count>=A.Count&&(B=!0,W.Completed=!0))}if(B){let A;if(1===D.length)A={RequestID:R,MaxTime:W.MaxTime,MaxX:W.MaxTime,MinTime:W.MinTime,MinX:W.MinTime,Data:U[0],TrendName:D[0],ArchiveName:W.ArchiveName},W.Archive,x.Internal.System.Trend.ArchiveTrendProvider,W.Archive.GetTrendDataCompleted.trigger(A),W.Archive.GetTrendsDataCompleted.trigger(A);else{for(let A=0;A<D.length;A++){const V=[];for(let x=0;x<U.length;x++)V.push(U[x][A]);const N={RequestID:R,MaxTime:W.MaxTime,MaxX:W.MaxTime,MinTime:W.MinTime,MinX:W.MinTime,Data:V,TrendName:D[A],ArchiveName:W.ArchiveName};W.Archive,x.Internal.System.Trend.ArchiveTrendProvider,W.Archive.GetTrendDataCompleted.trigger(N)}A={RequestID:R,MaxTime:W.MaxTime,MaxX:W.MaxTime,MinTime:W.MinTime,MinX:W.MinTime,Data:U,TrendName:D},W.Archive,x.Internal.System.Trend.ArchiveTrendProvider,W.Archive.GetTrendsDataCompleted.trigger(A)}W.Completed=!1,W.DataSamples=[],W.Count=0}}}(A,R)},D.subscribesToEvent=!0,D.hasResponse=!0,D.RequestID=V.Commands.TRENDDATAEVENT,D.CmdVal.val={RequestID:D.RequestID},R.SrvHnd.MsgHnd.addCallbackHandler(D)}}(V.QueryHandler||(V.QueryHandler={}))}(A.Trend||(A.Trend={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";V.registerRGetTrendData2Callback=function registerRGetTrendData2Callback(R){const D=new A.MsgHelper.TelegramHelper(V.Commands.RGETTRENDDATA2,V.Commands.RGETTRENDDATA2);D.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Trend,D.fnResponse=A=>{!function trendDataChangeEventArgs2(A,V){const R=A.RequestID,D=[];let N=[];const U=[],B={};if(A.Data)for(let V=0;V<A.Data.length;V++){B[A.Data[V].TrendName]=[],D.push(A.Data[V].TrendName);const R={};R.State=x.System.Trend.SampleState[A.Data[V].NewDataSample.State],R.Time=parseInt(A.Data[V].NewDataSample.Time,10),R.YValue=parseFloat(A.Data[V].NewDataSample.Value.replace(",",".")),R.Tag={Name:A.Data[V].TrendName,RequestID:A.RequestID,RemoveOldestSample:A.Data[V].RemoveOldestSample},B[A.Data[V].TrendName].push(R),U[A.Data[V].TrendName]=B[A.Data[V].TrendName]}N=U,A.Count>V.Settings.System.MaxTrendSamples&&(V.Settings.System.MaxTrendSamples=A.Count);const F=V.TrendManager.getArchiveFromStore(A.ArchiveName),W=V.TrendManager.getAttachedTrendFromStore(A.RequestID);if(F){for(let x=0;x<D.length;x++)for(let A=0;A<W.Trend.length;A++)if(W.Trend[A].Name===D[x])if(W.UseTrendProvider){const V={Count:-1,TrendName:D[x],Data:N[D[x]],ArchiveName:W.ArchiveName};W.Trend[A].TrendDataRecorded.trigger(V),W.Archive.TrendDataRecorded.trigger(V)}else{const V={Count:-1,TrendName:D[x],Data:N[D[x]],ArchiveName:W.ArchiveName};W.Trend[A].TrendDataRecorded.trigger(V),W.Archive.TrendDataRecorded.trigger(V)}for(let A=0;A<D.length;A++){const V={RequestID:R,MaxTime:W.MaxTime,MaxX:W.MaxTime,MinTime:W.MinTime,MinX:W.MinTime,Data:N[D[A]],TrendName:D[A]};W.Archive,x.Internal.System.Trend.ArchiveTrendProvider,W.Archive.GetTrendDataCompleted.trigger(V)}if(D.length>1){const x={Count:-1,TrendName:D,Data:N};W.Archive.TrendsDataRecorded.trigger(x)}}}(A,R)},D.subscribesToEvent=!0,D.hasResponse=!0,D.RequestID=V.Commands.RGETTRENDDATA2,D.CmdVal.val={RequestID:D.RequestID},R.SrvHnd.MsgHnd.addCallbackHandler(D)}}(V.QueryHandler||(V.QueryHandler={}))}(A.Trend||(A.Trend={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";V.registerRecordedTrendData2Callback=function registerRecordedTrendData2Callback(R){const D=new A.MsgHelper.TelegramHelper(V.Commands.RECORDEDTRENDDATA2,V.Commands.RECORDEDTRENDDATA2);D.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Trend,D.fnResponse=A=>{!function trendDataChangeEventArgs2Data(A,V){const R=[];let D=[];const N=[],U={};if(A.Data)for(let V=0;V<A.Data.length;V++){U[A.Data[V].TrendName]=[],R.push(A.Data[V].TrendName);const D={};D.State=x.System.Trend.SampleState[A.Data[V].NewDataSample.State],D.Time=parseInt(A.Data[V].NewDataSample.Time,10),D.YValue=parseFloat(A.Data[V].NewDataSample.Value.replace(",",".")),D.Tag={Name:A.Data[V].TrendName,RequestID:A.RequestID,RemoveOldestSample:A.Data[V].RemoveOldestSample},U[A.Data[V].TrendName].push(D),N[A.Data[V].TrendName]=U[A.Data[V].TrendName]}D=N,A.Count>V.Settings.System.MaxTrendSamples&&(V.Settings.System.MaxTrendSamples=A.Count);const B=V.TrendManager.getArchiveFromStore(A.ArchiveName),F=V.TrendManager.getAttachedTrendFromStore(A.RequestID);if(B&&F)for(let x=0;x<R.length;x++){for(let V=0;V<F.Trend.length;V++)if(F.Trend[V].Name===R[x])if(F.UseTrendProvider){const N={Count:-1,TrendName:R[x],Data:D[R[x]],ArchiveName:A.ArchiveName};F.Trend[V].TrendDataRecorded.trigger(N),F.Archive.TrendDataRecorded.trigger(N)}else{const N={Count:-1,TrendName:R[x],Data:D[R[x]],ArchiveName:A.ArchiveName};F.Trend[V].TrendDataRecorded.trigger(N),F.Archive.TrendDataRecorded.trigger(N)}if(R.length>1){const x={Count:-1,TrendName:R,Data:D};F.Archive.TrendsDataRecorded.trigger(x)}}}(A,R)},D.subscribesToEvent=!0,D.hasResponse=!0,D.RequestID=V.Commands.RECORDEDTRENDDATA2,D.CmdVal.val={RequestID:D.RequestID},R.SrvHnd.MsgHnd.addCallbackHandler(D)}}(V.QueryHandler||(V.QueryHandler={}))}(A.Trend||(A.Trend={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";V.registerHistoricalTrendData2Callback=function registerHistoricalTrendData2Callback(R){const D=new A.MsgHelper.TelegramHelper(V.Commands.HISTORICALTRENDDATA2,V.Commands.HISTORICALTRENDDATA2);D.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Trend,D.fnResponse=A=>{!function historicalTrendData2ChangeEventArgs(A,V){const R=[];let D=[];const N=[];for(let x=0;x<A.Data.length;x++){const V=A.Data[x].TrendName;R.push(V);const D={};D[V]=[];const U=[];for(let V=0;V<A.Data[x].Data.length;V++){const R=A.Data[x].Data[V];if(null!=R){const x={};x.Time=parseInt(R.Time,10),x.YValue=parseFloat(R.Value.replace(",",".")),U.push([parseInt(R.Time,10),parseFloat(R.Value.replace(",","."))])}else U.push([R,R])}D[V]=U,N[V]=D[V]}D=N,A.Count>V.Settings.System.MaxTrendSamples&&(V.Settings.System.MaxTrendSamples=A.Count);const U=V.TrendManager.getArchiveFromStore(A.ArchiveName),B=V.TrendManager.getAttachedTrendFromStore(A.RequestID);if(U&&B){if(B.Archive instanceof x.Internal.System.Trend.ArchiveTrendProvider){const x={RequestID:B.RequestID,MaxTime:B.MaxTime,MaxX:B.MaxTime,MinTime:B.MinTime,MinX:B.MinTime,Data:D,TrendName:R,ArchiveName:B.ArchiveName};return B.Archive.GetTrendsDataCompleted.trigger(x),B.Completed=!1,B.DataSamples=[],void(B.Count=0)}if(B.Archive instanceof x.System.Trend.Archive){const x={RequestID:B.RequestID,MaxTime:B.MaxTime,MaxX:B.MaxTime,MinTime:B.MinTime,MinX:B.MinTime,Data:D,TrendName:R,ArchiveName:B.ArchiveName};return B.Archive.GetTrendsDataCompleted.trigger(x),B.Completed=!1,B.DataSamples=[],void(B.Count=0)}}}(A,R)},D.subscribesToEvent=!0,D.hasResponse=!0,D.RequestID=V.Commands.HISTORICALTRENDDATA2,D.CmdVal.val={RequestID:D.RequestID},R.SrvHnd.MsgHnd.addCallbackHandler(D)}}(V.QueryHandler||(V.QueryHandler={}))}(A.Trend||(A.Trend={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(x){x.Domain||(x.Domain={})}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){"use strict";class UserManagementManager extends A.ManagerBase{constructor(A){super(A),this.ID=x.Guid(),this._serverEventsRegistered=!1,this.Type.Namespace="VisiWin.Internal.Application.Manager",this.Type.TypeName="UserManagementManager",this.AuthorizationHasChanged=new x.Internal.System.Events.TypedEvent}Dispose(){this.AuthorizationHasChanged.remove(),this.AuthorizationHasChanged=null,A.Dispose(this.UserManagementService),A.Dispose(this._UserManagementService);for(const x in this)Object.prototype.hasOwnProperty.call(this,x)&&delete this[x]}get UserManagementService(){return this._UserManagementService||(this._UserManagementService=new x.Internal.System.UserManagement.UserManagementService(this)),this._UserManagementService}logOnAsync(A="",V="",R=""){return __awaiter(this,void 0,void 0,(function*(){let D=!1;return x.isNullOrEmpty(R)||(D=!0),D?this.session.ServerInfo.WebGatewayProtocolVersion>=17?yield this.logOnHelper(A,V,R):yield this.logOnWithCodeAsync(R,V):yield this.logOnHelper(A,V,R)}))}logOnHelper(V,R,D){return __awaiter(this,void 0,void 0,(function*(){try{const N=this.UserManagementService.CurrentUser,U=A.UserManagement.QueryHandler.LogOnQuery(V,R,D),B=yield this.session.SrvHnd.MsgHnd.submitPromise(U);U.Dispose();let F=x.Internal.EnumHelper.convertToNumber(x.System.UserManagement.LogOnSuccess,B.Result);if(this.UserManagementService.RightNames=[],this.UserManagementService.UserGroupNames=[],this.UserManagementService.UserNames=[],B.Authorized){F=x.System.UserManagement.LogOnSuccess.Succeeded;const V=[];for(let x=0;x<B.Rights.length;x++){const R=A.UserManagement._makeRight(this,B.Rights[x]);V.push(R),-1===this.UserManagementService.RightNames.indexOf(B.Rights[x].Name)&&this.UserManagementService.RightNames.push(B.Rights[x].Name)}-1===this.UserManagementService.UserGroupNames.indexOf(B.UserGroup.Name)&&this.UserManagementService.UserGroupNames.push(B.UserGroup.Name),B.User.RightNames=this.UserManagementService.RightNames,B.User.GroupName=B.UserGroup.Name,B.User.UserState=x.Internal.EnumHelper.convertToNumber(x.System.UserManagement.UserState,B.User.State);const R=A.UserManagement._makeUser(this,B.User);this.UserManagementService.CurrentUser=R,this.UserManagementService.CurrentUserName=R.Name,-1===this.UserManagementService.UserNames.indexOf(B.User.FullName)&&this.UserManagementService.UserNames.push(B.User.FullName),setTimeout(()=>{this.UserManagementService.UserLoggedOff.trigger(N),this.UserManagementService.UserLoggedOn.trigger(R),this.AuthorizationHasChanged.trigger({Rights:V})},1)}else F=x.Internal.EnumHelper.convertToNumber(x.System.UserManagement.LogOnSuccess,B.Result);return F===x.System.UserManagement.LogOnSuccess.Succeeded?this.registerServerEvents():(this.UserManagementService.CurrentUserName="",this.UserManagementService.CurrentUser=null,this.AuthorizationHasChanged.trigger({Rights:[]}),this.session.ClientManager.updateClientState(x.System.Client.ClientState.Paused)),Promise.resolve(F)}catch(A){return Promise.reject(x.System.UserManagement.LogOnSuccess.MethodCallFailed)}}))}addRightAsync(V){return __awaiter(this,void 0,void 0,(function*(){try{const x=yield this.addRightsAsync([V]);return Promise.resolve(x[0])}catch(V){return A.Logger.WarnLog.log("addRightAsync",x.Internal.makeString(V)),Promise.reject(V)}}))}addRightsAsync(V){return __awaiter(this,void 0,void 0,(function*(){try{const x=A.UserManagement.QueryHandler.AddRightsQuery(V),R=yield this.session.SrvHnd.MsgHnd.submitPromise(x);return x.Dispose(),Promise.resolve(R)}catch(V){return A.Logger.WarnLog.log("addRightsAsync",x.Internal.makeString(V)),Promise.reject(V)}}))}addRightToGroupAsync(x,V){return __awaiter(this,void 0,void 0,(function*(){const R=yield this.getUserGroupAsync(x);-1===R.RightNames.indexOf(V)&&R.RightNames.push(V);const D=A.UserManagement.mapUserGroupToUserGroupDefinition(R);return this.changeUserGroupAsync(D)}))}addUserAsync(V){return __awaiter(this,void 0,void 0,(function*(){try{const x=A.UserManagement.QueryHandler.AddUserQuery(V),R=yield this.session.SrvHnd.MsgHnd.submitPromise(x);return x.Dispose(),Promise.resolve(R)}catch(V){return A.Logger.WarnLog.log("addUserAsync",x.Internal.makeString(V)),Promise.reject(V)}}))}addUserGroupAsync(V){return __awaiter(this,void 0,void 0,(function*(){try{const x=yield this.addUserGroupsAsync([V]);return Promise.resolve(x[0])}catch(V){return A.Logger.WarnLog.log("addUserGroupAsync",x.Internal.makeString(V)),Promise.reject(V)}}))}addUserGroupsAsync(V){return __awaiter(this,void 0,void 0,(function*(){try{const x=A.UserManagement.QueryHandler.AddUserGroupsQuery(V),R=yield this.session.SrvHnd.MsgHnd.submitPromise(x);return x.Dispose(),Promise.resolve(R)}catch(V){return A.Logger.WarnLog.log("addUserGroupsAsync",x.Internal.makeString(V)),Promise.reject(V)}}))}changeRightAsync(V){return __awaiter(this,void 0,void 0,(function*(){try{const x=(yield this.changeRightsAsync([V]))[0];return Promise.resolve(x)}catch(V){return A.Logger.WarnLog.log("changeRightAsync",x.Internal.makeString(V)),Promise.reject(V)}}))}changeRightsAsync(V){return __awaiter(this,void 0,void 0,(function*(){try{const x=A.UserManagement.QueryHandler.ChangeRightsQuery(V),R=yield this.session.SrvHnd.MsgHnd.submitPromise(x);return x.Dispose(),Promise.resolve(R)}catch(V){return A.Logger.WarnLog.log("changeRightsAsync",x.Internal.makeString(V)),Promise.reject(V)}}))}changeUserAsync(V){return __awaiter(this,void 0,void 0,(function*(){try{const x=A.UserManagement.QueryHandler.ChangeUserQuery(V),R=yield this.session.SrvHnd.MsgHnd.submitPromise(x);return x.Dispose(),Promise.resolve(R)}catch(V){return A.Logger.WarnLog.log("changeUserAsync",x.Internal.makeString(V)),Promise.reject(V)}}))}changeUserGroupAsync(V){return __awaiter(this,void 0,void 0,(function*(){try{const x=(yield this.changeUserGroupsAsync([V]))[0];return Promise.resolve(x)}catch(V){return A.Logger.WarnLog.log("changeUserGroupAsync",x.Internal.makeString(V)),Promise.reject(V)}}))}changeUserGroupsAsync(V){return __awaiter(this,void 0,void 0,(function*(){try{const x=A.UserManagement.QueryHandler.ChangeUserGroupsQuery(V),R=yield this.session.SrvHnd.MsgHnd.submitPromise(x);return x.Dispose(),Promise.resolve(R)}catch(V){return A.Logger.WarnLog.log("changeUserGroupsAsync",x.Internal.makeString(V)),Promise.reject(V)}}))}changePasswordAsync(V,R,D){return __awaiter(this,void 0,void 0,(function*(){try{const x=A.UserManagement.QueryHandler.ChangePasswordQuery(V,R,D),N=yield this.session.SrvHnd.MsgHnd.submitPromise(x);return x.Dispose(),Promise.resolve(N)}catch(V){return A.Logger.WarnLog.log("changePasswordAsync",x.Internal.makeString(V)),Promise.reject(V)}}))}copyUserDefinitionAsync(V,R,D,N,U,B){return __awaiter(this,void 0,void 0,(function*(){let F;try{F=yield this.getUserDefinitionAsync(V)}catch(V){return A.Logger.WarnLog.log("copyUserDefinitionAsync",x.Internal.makeString(V)),Promise.reject(V)}const W=A.UserManagement._makeUserDefinition(F);let H;W.Code=B,W.Comment=U,W.FullName=D,W.Name=R,W.Password=N;try{H=yield this.addUserAsync(W)}catch(V){return A.Logger.WarnLog.log("copyUserDefinitionAsync_addUserAsync",x.Internal.makeString(V)),Promise.reject(V)}const z=H;return Promise.resolve(z)}))}copyUserGroupDefinitionAsync(V,R){return __awaiter(this,void 0,void 0,(function*(){let D;try{D=yield this.getUserGroupAsync(R)}catch(V){return A.Logger.WarnLog.log("copyUserGroupDefinitionAsync",x.Internal.makeString(V)),Promise.reject(V)}const N=A.UserManagement.mapUserGroupToUserGroupDefinition(D);let U;N.Name=V;try{U=yield this.addUserGroupAsync(N)}catch(V){return A.Logger.WarnLog.log("copyUserGroupDefinitionAsync_addUserGroupAsync",x.Internal.makeString(V)),Promise.reject(V)}let B=x.System.UserManagement.CopyGroupSuccess.UnknownRight;switch(U){case x.System.UserManagement.AddGroupSuccess.GroupAlreadyDefined:B=x.System.UserManagement.CopyGroupSuccess.GroupAlreadyDefined;break;case x.System.UserManagement.AddGroupSuccess.MethodCallFailed:B=x.System.UserManagement.CopyGroupSuccess.MethodCallFailed;break;case x.System.UserManagement.AddGroupSuccess.UnableToSaveGroup:B=x.System.UserManagement.CopyGroupSuccess.UnableToSaveGroup;break;case x.System.UserManagement.AddGroupSuccess.UnknownRight:B=x.System.UserManagement.CopyGroupSuccess.UnknownRight;break;case x.System.UserManagement.AddGroupSuccess.WrongParam:B=x.System.UserManagement.CopyGroupSuccess.WrongParam;break;case x.System.UserManagement.AddGroupSuccess.Succeeded:B=x.System.UserManagement.CopyGroupSuccess.Succeeded}return Promise.resolve(B)}))}getRightsAsync(){return __awaiter(this,void 0,void 0,(function*(){try{const V=A.UserManagement.QueryHandler.GetRightsQuery(),R=yield this.session.SrvHnd.MsgHnd.submitPromise(V);V.Dispose();const D=[];for(let A=0;A<R.Rights.length;A++)x.isNullOrEmpty(R.Rights[A].LocalizableText)||D.push(R.Rights[A].LocalizableText);const N=yield this.session.LanguageManager.getTextsAsync(D),U=yield this.getUserGroupsAsync(),B=[];for(let A=0;A<R.Rights.length;A++){const V=new x.Internal.System.UserManagement.Right(this);V.Active=R.Rights[A].Active,V.Name=R.Rights[A].Name,V.Comment=R.Rights[A].Comment,V.LocalizableText=R.Rights[A].LocalizableText;for(let x=0;x<D.length;x++)D[x]===R.Rights[A].LocalizableText&&(V.Text=N[x]);B.push(V)}for(let x=0;x<U.length;x++)for(let A=0;A<B.length;A++)U[x].RightNames.indexOf(B[A].Name)>-1&&B[A].UserGroupNames.push(U[x].Name);return Promise.resolve(B)}catch(V){return A.Logger.WarnLog.log("getRightsAsync",x.Internal.makeString(V)),Promise.reject(V)}}))}getRightAsync(V){return __awaiter(this,void 0,void 0,(function*(){const R=new x.Internal.System.UserManagement.Right(this);let D=null,N="";try{const x=A.UserManagement.QueryHandler.GetRightQuery(V);D=yield this.session.SrvHnd.MsgHnd.submitPromise(x),x.Dispose()}catch(x){}try{if(!D)return Promise.reject("Unknown Right")}catch(x){}try{N=yield this.session.LanguageManager.getTextAsync(D.Right.LocalizableText)}catch(x){}try{R.LocalizableText=D.Right.LocalizableText,R.Text=N||"",R.Active=D.Right.Active,R.Name=D.Right.Name,R.Comment=D.Right.Comment}catch(x){}try{const x=yield this.getUserGroupsAsync();for(let A=0;A<x.length;A++)x[A].RightNames.indexOf(D.Right.Name)>-1&&R.UserGroupNames.push(x[A].Name)}catch(x){}try{return Promise.resolve(R)}catch(V){return A.Logger.WarnLog.log("getRightAsync",x.Internal.makeString(V)),Promise.reject(V)}}))}getRightDefinitionAsync(V){return __awaiter(this,void 0,void 0,(function*(){if(!x.isString(V))return Promise.reject(new x.Internal.System.Exception.ParameterException("GetRightDefinitionAsync","Right Name incorrect",V));try{const x=yield this.getRightAsync(V),R=A.UserManagement.mapRightToRightDefinition(x);return Promise.resolve(R)}catch(V){return A.Logger.WarnLog.log("getRightDefinitionAsync",x.Internal.makeString(V)),Promise.reject(V)}}))}getUserAsync(V){return __awaiter(this,void 0,void 0,(function*(){try{const x=yield this.getUserDefinitionAsync(V),R=A.UserManagement._mapUserDefinitionToUser(this,x);return Promise.resolve(R)}catch(V){return A.Logger.WarnLog.log("getUserAsync",x.Internal.makeString(V)),Promise.reject(V)}}))}getUsersAsync(){return __awaiter(this,void 0,void 0,(function*(){try{const x=A.UserManagement.QueryHandler.GetUsersQuery(),V=yield this.session.SrvHnd.MsgHnd.submitPromise(x);x.Dispose();const R=[];for(let x=0;x<V.length;x++){const D=A.UserManagement._makeUser(this,V[x]);R.push(D)}const D=yield this.getUserGroupsAsync();return R.forEach(x=>{const A=D.find(A=>A.Name===x.GroupName);x.RightNames=(null==A?void 0:A.RightNames)||[""]}),Promise.resolve(R)}catch(V){return A.Logger.WarnLog.log("getUsersAsync",x.Internal.makeString(V)),Promise.reject(V)}}))}getUserDefinitionAsync(V){return __awaiter(this,void 0,void 0,(function*(){let R,D;try{R=yield this.getUserInfoAsync(V)}catch(V){return A.Logger.WarnLog.log("getUserDefinitionAsync",x.Internal.makeString(V)),Promise.reject(V)}try{D=yield this.getUserGroupAsync(R.GroupName)}catch(V){return A.Logger.WarnLog.log("getUserDefinitionAsync_getUserGroupAsync",x.Internal.makeString(V)),Promise.reject(V)}const N=A.UserManagement._mapUserInfoToUserDefinition(R);return N.FailedLogOns=D.MaxFailedLogOns,N.RightNames=D.RightNames,Promise.resolve(N)}))}getUserGroupAsync(V){return __awaiter(this,void 0,void 0,(function*(){try{const x=A.UserManagement.QueryHandler.GetUserGroupQuery(V),R=yield this.session.SrvHnd.MsgHnd.submitPromise(x);x.Dispose();const D=yield this.getUsersOfGroupAsync(V),N=A.UserManagement._mapUserGroup(this,R.UserGroup);return N.UserNames=D.map(x=>x.Name),Promise.resolve(N)}catch(V){return A.Logger.WarnLog.log("getUserGroupAsync",x.Internal.makeString(V)),Promise.reject(V)}}))}getUserGroupsAsync(){return __awaiter(this,void 0,void 0,(function*(){try{const x=A.UserManagement.QueryHandler.GetUserGroupsQuery(),V=yield this.session.SrvHnd.MsgHnd.submitPromise(x);x.Dispose();const R=[];for(let x=0;x<V.UserGroups.length;x++){const D=yield this.getUsersOfGroupAsync(V.UserGroups[x].Name),N=A.UserManagement._mapUserGroup(this,V.UserGroups[x]);N.UserNames=D.map(x=>x.Name),R.push(N)}return Promise.resolve(R)}catch(V){return A.Logger.WarnLog.log("getUserGroupsAsync",x.Internal.makeString(V)),Promise.reject(V)}}))}getUsersOfGroupAsync(V){return __awaiter(this,void 0,void 0,(function*(){try{const x=A.UserManagement.QueryHandler.GetUsersOfGroupQuery(V),R=yield this.session.SrvHnd.MsgHnd.submitPromise(x);return x.Dispose(),Promise.resolve(R)}catch(V){return A.Logger.WarnLog.log("getUsersOfGroupAsync",x.Internal.makeString(V)),Promise.reject(V)}}))}getAuthorizationSystemAsync(){return __awaiter(this,void 0,void 0,(function*(){try{const x=A.UserManagement.QueryHandler.GetAuthorizationSystemQuery(),V=yield this.session.SrvHnd.MsgHnd.submitPromise(x);return x.Dispose(),Promise.resolve(V)}catch(V){return A.Logger.WarnLog.log("getAuthorizationSystemAsync",x.Internal.makeString(V)),Promise.reject(V)}}))}logOff(V=!0){return __awaiter(this,void 0,void 0,(function*(){try{const R=A.UserManagement.QueryHandler.LogOffQuery();return this.session.SrvHnd.MsgHnd.submitPromise(R),R.Dispose(),V?(this.session.ServerInfo.ProjectState=x.System.Project.ServerRuntimeStatus.OnExit,this.session.ProjectManager.ProjectService.ServerProjectRuntimeState=this.session.ServerInfo.ProjectState,this.session.ClientManager.updateClientState(x.System.Client.ClientState.Stopped),this.session.SrvHnd.Close(1e3,"LogOff"),this.session.Dispose()):this.session.ClientManager.updateClientState(x.System.Client.ClientState.Paused),Promise.resolve(!0)}catch(V){return A.Logger.WarnLog.log("logOff",x.Internal.makeString(V)),Promise.reject(V)}}))}logOnWithCodeAsync(V,R){return __awaiter(this,void 0,void 0,(function*(){const D=this.UserManagementService.CurrentUser;try{const N=A.UserManagement.QueryHandler.LogOnWithCodeQuery(V,R),U=yield this.session.SrvHnd.MsgHnd.submitPromise(N);if(N.Dispose(),U.Result.UserName){const x=yield this.getUserAsync(U.Result.UserName);this.UserManagementService.RightNames=[],this.UserManagementService.UserGroupNames=[],this.UserManagementService.UserNames=[];const A=[];for(let V=0;V<x.RightNames.length;V++){const R=yield x.GetRightAsync(x.RightNames[V]);A.push(R),-1===this.UserManagementService.RightNames.indexOf(x.RightNames[V])&&this.UserManagementService.RightNames.push(x.RightNames[V])}-1===this.UserManagementService.UserGroupNames.indexOf(x.GroupName)&&this.UserManagementService.UserGroupNames.push(x.GroupName),this.UserManagementService.CurrentUser=x,this.UserManagementService.CurrentUserName=x.Name,-1===this.UserManagementService.UserNames.indexOf(x.FullName)&&this.UserManagementService.UserNames.push(x.FullName),setTimeout(()=>{this.UserManagementService.UserLoggedOff.trigger(D),this.UserManagementService.UserLoggedOn.trigger(x),this.AuthorizationHasChanged.trigger({Rights:A})},1)}let B=x.System.UserManagement.LogOnSuccess.UnknownUser;if(x.isString(U.Result.Result))switch(U.Result.Result){case"MethodCallFailed":B=x.System.UserManagement.LogOnSuccess.MethodCallFailed;break;case"UnknownUser":B=x.System.UserManagement.LogOnSuccess.UnknownUser;break;case"InvalidPassword":B=x.System.UserManagement.LogOnSuccess.InvalidPassword;break;case"Succeeded":B=x.System.UserManagement.LogOnSuccess.Succeeded;break;case"UserDeactivated":B=x.System.UserManagement.LogOnSuccess.UserDeactivated;break;case"PasswordExpired":B=x.System.UserManagement.LogOnSuccess.PasswordExpired;break;case"TooManyFailedLogOns":B=x.System.UserManagement.LogOnSuccess.TooManyFailedLogOns;break;case"RenewPassword":B=x.System.UserManagement.LogOnSuccess.RenewPassword;break;case"NoCorrespondingLocalUserClass":B=x.System.UserManagement.LogOnSuccess.NoCorrespondingLocalUserClass;break;case"CantAccessDomainInfo":B=x.System.UserManagement.LogOnSuccess.CantAccessDomainInfo;break;case"SucceededChangePasswordSoon":B=x.System.UserManagement.LogOnSuccess.Succeeded;break;case"TooLongSinceLastLogon":B=x.System.UserManagement.LogOnSuccess.UserDeactivated;break;default:B=x.System.UserManagement.LogOnSuccess.MethodCallFailed}if(x.isNumber(U.Result.Result))switch(U.Result.Result){case 0:B=x.System.UserManagement.LogOnSuccess.MethodCallFailed;break;case 1:B=x.System.UserManagement.LogOnSuccess.UnknownUser;break;case 2:B=x.System.UserManagement.LogOnSuccess.InvalidPassword;break;case 3:B=x.System.UserManagement.LogOnSuccess.Succeeded;break;case 4:B=x.System.UserManagement.LogOnSuccess.UserDeactivated;break;case 5:B=x.System.UserManagement.LogOnSuccess.PasswordExpired;break;case 6:B=x.System.UserManagement.LogOnSuccess.TooManyFailedLogOns;break;case 7:B=x.System.UserManagement.LogOnSuccess.RenewPassword;break;case 9:B=x.System.UserManagement.LogOnSuccess.NoCorrespondingLocalUserClass;break;case 10:B=x.System.UserManagement.LogOnSuccess.CantAccessDomainInfo;break;case 11:B=x.System.UserManagement.LogOnSuccess.Succeeded;break;case 12:B=x.System.UserManagement.LogOnSuccess.UserDeactivated;break;default:B=x.System.UserManagement.LogOnSuccess.MethodCallFailed}return B===x.System.UserManagement.LogOnSuccess.Succeeded&&this.registerServerEvents(),Promise.resolve(B)}catch(V){return A.Logger.WarnLog.log("logOnWithCodeAsync",x.Internal.makeString(V)),Promise.reject(V)}}))}moveUserToGroupAsync(V,R){return __awaiter(this,void 0,void 0,(function*(){if(!x.isString(V))return Promise.reject(new x.Internal.System.Exception.ParameterException("MoveUserToGroupAsync","User Name incorrect",V));if(!x.isString(R))return Promise.reject(new x.Internal.System.Exception.ParameterException("MoveUserToGroupAsync","Group Name incorrect",R));let D;try{D=yield this.getUserInfoAsync(V)}catch(V){return A.Logger.WarnLog.log("getUserDefinitionAsync",x.Internal.makeString(V)),Promise.reject(V)}const N=A.UserManagement._mapUserInfoToUserDefinition(D);N.GroupName=R;const U=yield this.changeUserAsync(N);return Promise.resolve(U)}))}removeRightAsync(V){return __awaiter(this,void 0,void 0,(function*(){if(!x.isString(V))return Promise.reject(new x.Internal.System.Exception.ParameterException("RemoveRightAsync","Right Name incorrect",V));try{const x=yield this.removeRightsAsync([V]);return Promise.resolve(x[0])}catch(V){return A.Logger.WarnLog.log("removeRightAsync",x.Internal.makeString(V)),Promise.reject(V)}}))}removeRightsAsync(V){return __awaiter(this,void 0,void 0,(function*(){try{const x=A.UserManagement.QueryHandler.RemoveRightsQuery(V),R=yield this.session.SrvHnd.MsgHnd.submitPromise(x);return x.Dispose(),Promise.resolve(R)}catch(V){return A.Logger.WarnLog.log("removeRightsAsync",x.Internal.makeString(V)),Promise.reject(V)}}))}removeRightFromGroupAsync(x,V){return __awaiter(this,void 0,void 0,(function*(){const R=yield this.getUserGroupAsync(x),D=R.RightNames.indexOf(V);D>-1&&R.RightNames.splice(D,1);const N=A.UserManagement.mapUserGroupToUserGroupDefinition(R);return this.changeUserGroupAsync(N)}))}removeUserAsync(V){return __awaiter(this,void 0,void 0,(function*(){try{const x=yield this.removeUsersAsync([V]);return Promise.resolve(x[0])}catch(V){return A.Logger.WarnLog.log("removeUserAsync",x.Internal.makeString(V)),Promise.reject(V)}}))}removeUsersAsync(V){return __awaiter(this,void 0,void 0,(function*(){try{const x=A.UserManagement.QueryHandler.RemoveUsersQuery(V),R=yield this.session.SrvHnd.MsgHnd.submitPromise(x);return x.Dispose(),Promise.resolve(R)}catch(V){return A.Logger.WarnLog.log("removeUsersAsync",x.Internal.makeString(V)),Promise.reject(V)}}))}removeUserGroupAsync(V){return __awaiter(this,void 0,void 0,(function*(){try{const x=yield this.removeUserGroupsAsync([V]);return Promise.resolve(x[0])}catch(V){return A.Logger.WarnLog.log("removeUserGroupAsync",x.Internal.makeString(V)),Promise.reject(V)}}))}removeUserGroupsAsync(V){return __awaiter(this,void 0,void 0,(function*(){try{const x=A.UserManagement.QueryHandler.RemoveUserGroupsQuery(V),R=yield this.session.SrvHnd.MsgHnd.submitPromise(x);return x.Dispose(),Promise.resolve(R)}catch(V){return A.Logger.WarnLog.log("removeUserGroupsAsync",x.Internal.makeString(V)),Promise.reject(V)}}))}verifyPasswordAsync(V,R){return __awaiter(this,void 0,void 0,(function*(){try{const x=A.UserManagement.QueryHandler.VerifyPasswordQuery(V,R,R),D=yield this.session.SrvHnd.MsgHnd.submitPromise(x);return x.Dispose(),Promise.resolve(D)}catch(V){return A.Logger.WarnLog.log("verifyPasswordAsync",x.Internal.makeString(V)),Promise.reject(V)}}))}verifyUserAsync(V,R,D){return __awaiter(this,void 0,void 0,(function*(){try{const x=A.UserManagement.QueryHandler.VerifyUserQuery(V,R,D),N=yield this.session.SrvHnd.MsgHnd.submitPromise(x);return x.Dispose(),Promise.resolve(N)}catch(V){return A.Logger.WarnLog.log("verifyUserAsync",x.Internal.makeString(V)),Promise.reject(V)}}))}getUsersAndGroupsAsync(){return __awaiter(this,void 0,void 0,(function*(){const x=A.UserManagement.QueryHandler.GetUsersQuery(),V=yield this.session.SrvHnd.MsgHnd.submitPromise(x);x.Dispose();const R=A.UserManagement.QueryHandler.GetUserGroupsQuery(),D=yield this.session.SrvHnd.MsgHnd.submitPromise(R);R.Dispose();const N=[];for(let x=0;x<V.length;x++){const R=A.UserManagement._makeUser(this,V[x]);N.push(R)}const U=[];for(let x=0;x<D.UserGroups.length;x++){const V=A.UserManagement._mapUserGroup(this,D.UserGroups[x]);for(var B=0;B<N.length;B++)N[B].GroupName===V.Name&&V.UserNames.push(N[B].Name);U.push(V)}return N.forEach(x=>{const A=U.find(A=>A.Name===x.GroupName);x.RightNames=(null==A?void 0:A.RightNames)||[""]}),Promise.resolve({UserGroups:U,Users:N})}))}userAddUserAsync(x){return __awaiter(this,void 0,void 0,(function*(){return this.addUserAsync(x)}))}userChangeUserAsync(x){return __awaiter(this,void 0,void 0,(function*(){return this.changeUserAsync(x)}))}userMoveUserToGroupAsync(x,A){return __awaiter(this,void 0,void 0,(function*(){return this.moveUserToGroupAsync(x,A)}))}userChangePasswordAsync(x,A,V){return __awaiter(this,void 0,void 0,(function*(){return this.changePasswordAsync(x,A,V)}))}userGetUserDefinitionAsync(x){return __awaiter(this,void 0,void 0,(function*(){return this.getUserDefinitionAsync(x)}))}userGetUserGroupAsync(x){return __awaiter(this,void 0,void 0,(function*(){return this.getUserGroupAsync(x)}))}userGetRightAsync(x){return __awaiter(this,void 0,void 0,(function*(){return this.getRightAsync(x)}))}rightGetUserGroupAsync(x){return __awaiter(this,void 0,void 0,(function*(){return this.getUserGroupAsync(x)}))}rightGetRightDefinitionAsync(x){return __awaiter(this,void 0,void 0,(function*(){return this.getRightDefinitionAsync(x)}))}rightChangeRightAsync(x){return __awaiter(this,void 0,void 0,(function*(){return this.changeRightAsync(x)}))}userGroupGetUserGroupAsync(x){return __awaiter(this,void 0,void 0,(function*(){return this.getUserGroupAsync(x)}))}userGroupGetUserGroupDefinition(x){return __awaiter(this,void 0,void 0,(function*(){let V,R;return"string"==typeof x?(V=yield this.getUserGroupAsync(x),R=A.UserManagement.mapUserGroupToUserGroupDefinition(V),Promise.resolve(R)):Promise.reject(!1)}))}userGroupGetRightAsync(x){return __awaiter(this,void 0,void 0,(function*(){return this.getRightAsync(x)}))}userGroupGetUserAsync(x){return __awaiter(this,void 0,void 0,(function*(){return this.getUserAsync(x)}))}getUserInfoAsync(V){return __awaiter(this,void 0,void 0,(function*(){try{const x=A.UserManagement.QueryHandler.GetUserInfoQuery(V),R=yield this.session.SrvHnd.MsgHnd.submitPromise(x);return x.Dispose(),Promise.resolve(R)}catch(V){return A.Logger.WarnLog.log("getUserInfoAsync",x.Internal.makeString(V)),Promise.reject(V)}}))}registerServerEvents(){!1===this._serverEventsRegistered&&(this.session.ServerInfo.WebGatewayProtocolVersion>=16&&(A.UserManagement.QueryHandler.registerGroupsModifiedCallback(this.session),A.UserManagement.QueryHandler.registerRightsModifiedCallback(this.session),A.UserManagement.QueryHandler.registerUsersModifiedCallback(this.session)),this._serverEventsRegistered=!0)}}A.UserManagementManager=UserManagementManager}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){"use strict";function _checkUserTypes(V){const R={DeactivationTime:new Date,GroupName:"",UserState:x.System.UserManagement.UserState.Unknown};return x.isNumber(V.DeactivationTime)?V.DeactivationTime>A.CONST.netDate.DATE_0?R.DeactivationTime=new Date(parseFloat(V.DeactivationTime||0)):R.DeactivationTime=null:x.isDate(V.DeactivationTime)?R.DeactivationTime=V.DeactivationTime:R.DeactivationTime=null,V.State&&x.isString(V.State)&&(R.UserState=x.Internal.EnumHelper.convertToNumber(x.System.UserManagement.UserState,V.State)),V.UserState&&(x.isString(V.UserState)?R.UserState=x.Internal.EnumHelper.convertToNumber(x.System.UserManagement.UserState,V.UserState):R.UserState=V.UserState),x.isNullOrUndefined(V.Group)||(R.GroupName=V.Group||"",V.GroupName=R.GroupName),x.isNullOrUndefined(V.GroupName)||(R.GroupName=V.GroupName||""),R}V._makeUser=function _makeUser(A,V){const R=new x.Internal.System.UserManagement.User(A);R.Code=V.Code||"",R.Comment=V.Comment||"",R.FullName=V.FullName||"",R.Name=V.Name||"",R.RemainingLogOns=V.RemainingLogOns||0,R.RenewPassword=V.RenewPassword||0,R.RightNames=V.RightNames||[""];const D=_checkUserTypes(V);return R.DeactivationTime=D.DeactivationTime,R.GroupName=D.GroupName,R.UserState=D.UserState,R},V._makeUserDefinition=function _makeUserDefinition(A){const V=new x.Internal.System.UserManagement.UserDefinition;V.Code=A.Code||"",V.Comment=A.Comment||"",V.FailedLogOns=A.FailedLogOns||0,V.FullName=A.FullName||"",V.Name=A.Name||"",V.RemainingLogOns=A.RemainingLogOns||0,V.RenewPassword=A.RenewPassword||0,V.RightNames=A.RightNames||[""];const R=_checkUserTypes(A);return V.DeactivationTime=R.DeactivationTime,V.GroupName=R.GroupName,V.UserState=R.UserState,V},V._makeUserInfo=function _makeUserInfo(A){const V=new x.Internal.System.UserManagement.UserInfo;V.Code=A.Code||"",V.Comment=A.Comment||"",V.FullName=A.FullName||"",V.Name=A.Name||"",V.RemainingLogOns=A.RemainingLogOns||0,V.RenewPassword=A.RenewPassword||0;const R=_checkUserTypes(A);return V.DeactivationTime=R.DeactivationTime,V.GroupName=R.GroupName,V.UserState=R.UserState,V},V._mapUserInfoToUserDefinition=function _mapUserInfoToUserDefinition(A){const V=new x.Internal.System.UserManagement.UserDefinition;V.Code=A.Code,V.Comment=A.Comment,V.FullName=A.FullName,V.Name=A.Name;const R=_checkUserTypes(A);return V.DeactivationTime=R.DeactivationTime,V.GroupName=R.GroupName,V.UserState=R.UserState,V},V._mapUserDefinitionToUser=function _mapUserDefinitionToUser(A,V){const R=new x.Internal.System.UserManagement.User(A);return R.Code=V.Code,R.Comment=V.Comment,R.FullName=V.FullName,R.GroupName=V.GroupName,R.Name=V.Name,R.RemainingLogOns=V.RemainingLogOns,R.RenewPassword=V.RenewPassword,R.RightNames=V.RightNames,R.UserState=V.UserState,R}}(A.UserManagement||(A.UserManagement={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(A){"use strict";A._makeRight=function _makeRight(A,V){const R=new x.Internal.System.UserManagement.Right(A);return R.Active=V.Active||!1,R.Comment=V.Comment||"",R.Name=V.Name||"",R},A._makeRightDefinition=function _makeRightDefinition(A){const V=new x.Internal.System.UserManagement.RightDefinition;return V.Active=A.Active||!1,V.Comment=A.Comment||"",V.LocalizableText=A.LocalizableText||"",V.Name=A.Name||"",V},A.mapRightToRightDefinition=function mapRightToRightDefinition(A){const V=new x.Internal.System.UserManagement.RightDefinition;return V.Active=A.Active,V.LocalizableText=A.LocalizableText,V.Name=A.Name,V.Comment=A.Comment,V}}(A.UserManagement||(A.UserManagement={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(A){"use strict";A._makeUserGroup=function _makeUserGroup(A,V){const R=new x.Internal.System.UserManagement.UserGroup(A);return R.AutoLogOffTime=V.AutoLogOffTime,R.Comment=V.Comment,R.Level=V.Level,R.MaxFailedLogOns=V.MaxFailedLogOns,R.Name=V.Name,R.RenewPasswordInterval=V.RenewPasswordInterval,R.RightNames=V.RightNames,R.Text=V.Text,R.UsersRemovable=V.DontDelete,R},A._makeUserGroupDefinition=function _makeUserGroupDefinition(A){const V=new x.Internal.System.UserManagement.UserGroupDefinition;return V.AutoLogOffTime=A.AutoLogOffTime,V.Comment=A.Comment,V.Level=A.Level,V.LocalizableText=A.LocalizableText||"",V.MaxFailedLogOns=A.MaxFailedLogOns,V.Name=A.Name,V.RenewPasswordInterval=A.RenewPasswordInterval,V.RightNames=A.RightNames,V.Text=A.Text,V.UsersRemovable=A.DontDelete,V},A.mapUserGroupToUserGroupDefinition=function mapUserGroupToUserGroupDefinition(A){const V=new x.Internal.System.UserManagement.UserGroupDefinition;return V.AutoLogOffTime=A.AutoLogOffTime,V.Comment=A.Comment,V.InvalidateAfterFailedLogOns=0,V.Level=A.Level,V.LocalizableText=A.LocalizableText,V.MaxFailedLogOns=A.MaxFailedLogOns,V.Name=A.Name,V.RenewPassword=A.RenewPasswordInterval,V.RenewPasswordInterval=A.RenewPasswordInterval,V.RightNames=A.RightNames,V.Text=A.Text,V.UserNames=A.UserNames,V.UsersRemovable=A.UsersRemovable,V},A._mapUserGroup=function _mapUserGroup(A,V){const R=new x.Internal.System.UserManagement.UserGroup(A);return R.AutoLogOffTime=V.AutoLogOffTime,R.Comment=V.Comment,R.UsersRemovable=!V.DontDelete,R.Level=V.Level,R.LocalizableText=V.LocalizableText,R.MaxFailedLogOns=V.MaxFailedLogOns,R.Name=V.Name,R.RenewPasswordInterval=V.RenewPasswordInterval,R.RightNames=V.RightNames,R.Text=V.Text,R}}(A.UserManagement||(A.UserManagement={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){"use strict";class UserMaster extends x.Internal.Domain.MasterItem{constructor(A,V){super(),this.ID=x.Guid(),this.manager=A,this.Subscribers=[],this.itemState=x.Internal.Domain.MasterItemState.created,this.subscriberState=x.Internal.Domain.MasterItemState.created,this.Name=V,this.item=new x.Internal.System.UserManagement.User(this.manager)}Dispose(){A.Dispose(this)}CreateChild(){const A=new x.Internal.System.UserManagement.User(this.manager);return this.Subscribers.push(A),A}RemoveChild(x){const A=this.Subscribers.indexOf(x);if(A>-1){delete this.Subscribers.splice(A,1)[0]}}TriggerChild(){}UpdateChild(){}}V.UserMaster=UserMaster}(A.UserManagement||(A.UserManagement={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){"use strict";class RightMaster extends x.Internal.Domain.MasterItem{constructor(A,V){super(),this.ID=x.Guid(),this.manager=A,this.Subscribers=[],this.itemState=x.Internal.Domain.MasterItemState.created,this.subscriberState=x.Internal.Domain.MasterItemState.created,this.Name=V,this.item=new x.Internal.System.UserManagement.Right(this.manager),this.item.Name=V}Dispose(){A.Dispose(this)}CreateChild(){const A=new x.Internal.System.UserManagement.Right(this.manager);return this.Subscribers.push(A),A}RemoveChild(x){const A=this.Subscribers.indexOf(x);if(A>-1){delete this.Subscribers.splice(A,1)[0]}}TriggerChild(){}UpdateChild(){}}V.RightMaster=RightMaster}(A.UserManagement||(A.UserManagement={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){"use strict";class UserGroupMaster extends x.Internal.Domain.MasterItem{constructor(A,V){super(),this.ID=x.Guid(),this.manager=A,this.Subscribers=[],this.itemState=x.Internal.Domain.MasterItemState.created,this.subscriberState=x.Internal.Domain.MasterItemState.created,this.Name=V,this.item=new x.Internal.System.UserManagement.UserGroup(this.manager)}Dispose(){A.Dispose(this)}CreateChild(){const A=new x.Internal.System.UserManagement.UserGroup(this.manager);return this.Subscribers.push(A),A}RemoveChild(x){const A=this.Subscribers.indexOf(x);if(A>-1){delete this.Subscribers.splice(A,1)[0]}}TriggerChild(){}UpdateChild(){}}V.UserGroupMaster=UserGroupMaster}(A.UserManagement||(A.UserManagement={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){!function(x){!function(x){"use strict";x.Commands={Q_LOGON:"QLogOn",R_LOGON:"RLogOn",Q_LOGONWITHCODE:"QLogOnWithCode",R_LOGONWITHCODE:"RLogOnWithCode",Q_ADDRIGHTS:"QAddRights",R_ADDRIGHTS:"RAddRights",Q_GETAUTHORIZATIONSYSTEM:"QGetAuthorizationSystem",R_GETAUTHORIZATIONSYSTEM:"RGetAuthorizationSystem",Q_CHANGEUSERGROUPS:"QChangeUserGroups",R_CHANGEUSERGROUPS:"RChangeUserGroups",Q_ADDUSER:"QAddUser",R_ADDUSER:"RAddUser",Q_ADDUSERGROUPS:"QAddUserGroups",R_ADDUSERGROUPS:"RAddUserGroups",Q_CHANGERIGHTS:"QChangeRights",R_CHANGERIGHTS:"RChangeRights",Q_CHANGEUSER:"QChangeUser",R_CHANGEUSER:"RChangeUser",Q_CHANGEPASSWORD:"QChangePassword",R_CHANGEPASSWORD:"RChangePassword",Q_GETRIGHT:"QGetRight",R_GETRIGHT:"RGetRight",Q_GETRIGHTS:"QGetRights",R_GETRIGHTS:"RGetRights",Q_GETUSERINFO:"QGetUserInfo",R_GETUSERINFO:"RGetUserInfo",Q_GETUSERS:"QGetUsers",R_GETUSERS:"RGetUsers",Q_GETUSERGROUP:"QGetUserGroup",R_GETUSERGROUP:"RGetUserGroup",Q_GETUSERGROUPS:"QGetUserGroups",R_GETUSERGROUPS:"RGetUserGroups",Q_GETUSERSOFGROUP:"QGetUsersOfGroup",R_GETUSERSOFGROUP:"RGetUsersOfGroup",Q_REMOVERIGHTS:"QRemoveRights",R_REMOVERIGHTS:"RRemoveRights",Q_REMOVEUSERS:"QRemoveUsers",R_REMOVEUSERS:"RRemoveUsers",Q_REMOVEUSERGROUPS:"QRemoveUserGroups",R_REMOVEUSERGROUPS:"RRemoveUserGroups",Q_VERIFYPASSWORD:"QVerifyPassword",R_VERIFYPASSWORD:"RVerifyPassword",Q_VERIFYUSER:"QVerifyUser",R_VERIFYUSER:"RVerifyUser",LOGOFF:"LogOff",RIGHTSMODIFIED:"RightsModified",SUBSCRIBERIGHTSMODIFIEDEVENT:"SubscribeRightsModifiedEvent",USERGROUPSMODIFIED:"UserGroupsModified",SUBSCRIBEUSERGROUPSMODIFIEDEVENT:"SubscribeUserGroupsModifiedEvent",USERSMODIFIED:"UsersModified",SUBSCRIBEUSERSMODIFIEDEVENT:"SubscribeUsersModifiedEvent"}}(x.QueryHandler||(x.QueryHandler={}))}(x.UserManagement||(x.UserManagement={}))}(x.Domain||(x.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";function LogOnResponse(x,A){A.ResolvePromise(x,!0)}V.LogOnResponse=LogOnResponse,V.LogOnQuery=function LogOnQuery(R,D,N){const U=new A.MsgHelper.TelegramHelper(V.Commands.Q_LOGON,V.Commands.R_LOGON);let B,F,W;return U.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.UserManagement,U.fnResponse=LogOnResponse,U.subscribesToEvent=!0,B=x.isString(R)?R:null,F=x.isString(D)?D:null,W=x.isString(N)?N:null,U.CmdVal.val={RequestID:U.RequestID,User:B,Password:F,Code:W},U}}(V.QueryHandler||(V.QueryHandler={}))}(A.UserManagement||(A.UserManagement={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";V.LogOffQuery=function LogOffQuery(){const R=new A.MsgHelper.TelegramHelper(V.Commands.LOGOFF,"");return R.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.UserManagement,R.hasResponse=!1,R.CmdVal.val={RequestID:R.RequestID},R}}(V.QueryHandler||(V.QueryHandler={}))}(A.UserManagement||(A.UserManagement={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";function AddRightsResponse(A,V){const R=A.Result.map(A=>{if(x.isNumber(A))switch(A){case 0:return x.System.UserManagement.AddRightSuccess.MethodCallFailed;case 1:return x.System.UserManagement.AddRightSuccess.Succeeded;case 2:return x.System.UserManagement.AddRightSuccess.RightAlreadyDefined;case 3:return x.System.UserManagement.AddRightSuccess.WrongParam;case 4:return x.System.UserManagement.AddRightSuccess.NotValidForAuthorizationSystem;case 5:return x.System.UserManagement.AddRightSuccess.UnableToSaveRight;default:return x.System.UserManagement.AddRightSuccess.MethodCallFailed}if(x.isString(A))switch(A){case"MethodCallFailed":return x.System.UserManagement.AddRightSuccess.MethodCallFailed;case"Succeeded":return x.System.UserManagement.AddRightSuccess.Succeeded;case"RightAlreadyDefined":return x.System.UserManagement.AddRightSuccess.RightAlreadyDefined;case"WrongParam":return x.System.UserManagement.AddRightSuccess.WrongParam;case"NotValidForAuthorizationSystem":return x.System.UserManagement.AddRightSuccess.NotValidForAuthorizationSystem;case"UnableToSaveRight":return x.System.UserManagement.AddRightSuccess.UnableToSaveRight;default:return x.System.UserManagement.AddRightSuccess.MethodCallFailed}return x.System.UserManagement.AddRightSuccess.MethodCallFailed});V.ResolvePromise(R,A.Authorized)}V.AddRightsQuery=function AddRightsQuery(R){const D=new A.MsgHelper.TelegramHelper(V.Commands.Q_ADDRIGHTS,V.Commands.R_ADDRIGHTS);return D.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.UserManagement,D.fnResponse=AddRightsResponse,D.CmdVal.val={RequestID:D.RequestID,Rights:R},D}}(V.QueryHandler||(V.QueryHandler={}))}(A.UserManagement||(A.UserManagement={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";function GetRightResponse(x,A){x.Right?A.ResolvePromise({Right:x.Right},x.Authorized):A.ResolvePromise({Right:null},!1)}function GetRightsResponse(x,A){A.ResolvePromise({Rights:x.Rights},x.Authorized)}V.GetRightQuery=function GetRightQuery(R){const D=new A.MsgHelper.TelegramHelper(V.Commands.Q_GETRIGHT,V.Commands.R_GETRIGHT);return D.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.UserManagement,D.fnResponse=GetRightResponse,D.CmdVal.val={RequestID:D.RequestID,RightName:R},D},V.GetRightsQuery=function GetRightsQuery(){const R=new A.MsgHelper.TelegramHelper(V.Commands.Q_GETRIGHTS,V.Commands.R_GETRIGHTS);return R.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.UserManagement,R.fnResponse=GetRightsResponse,R.CmdVal.val={RequestID:R.RequestID,RightNames:null},R}}(V.QueryHandler||(V.QueryHandler={}))}(A.UserManagement||(A.UserManagement={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";function ChangeRightsResponse(A,V){const R=A.Result.map(A=>{if(x.isNumber(A))switch(A){case 0:return x.System.UserManagement.ChangeRightSuccess.MethodCallFailed;case 1:return x.System.UserManagement.ChangeRightSuccess.Succeeded;case 2:return x.System.UserManagement.ChangeRightSuccess.UnknownRight;case 3:return x.System.UserManagement.ChangeRightSuccess.UnableToSaveRight;default:return x.System.UserManagement.ChangeRightSuccess.MethodCallFailed}if(x.isString(A))switch(A){case"MethodCallFailed":return x.System.UserManagement.ChangeRightSuccess.MethodCallFailed;case"Succeeded":return x.System.UserManagement.ChangeRightSuccess.Succeeded;case"UnknownRight":return x.System.UserManagement.ChangeRightSuccess.UnknownRight;case"UnableToSaveRight":return x.System.UserManagement.ChangeRightSuccess.UnableToSaveRight;default:return x.System.UserManagement.ChangeRightSuccess.MethodCallFailed}return x.System.UserManagement.ChangeRightSuccess.MethodCallFailed});V.ResolvePromise(R,A.Authorized)}V.ChangeRightsQuery=function ChangeRightsQuery(R){const D=new A.MsgHelper.TelegramHelper(V.Commands.Q_CHANGERIGHTS,V.Commands.R_CHANGERIGHTS);return D.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.UserManagement,D.fnResponse=ChangeRightsResponse,D.CmdVal.val={RequestID:D.RequestID,Rights:R},D}}(V.QueryHandler||(V.QueryHandler={}))}(A.UserManagement||(A.UserManagement={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";function RemoveRightsResponse(A,V){const R=A.Result.map(A=>x.isNumber(A)?x.Internal.EnumHelper.convertToString(x.System.UserManagement.RemoveRightSuccess,A):x.isString(A)?x.Internal.EnumHelper.convertToNumber(x.System.UserManagement.RemoveRightSuccess,A):x.System.UserManagement.RemoveRightSuccess.MethodCallFailed);V.ResolvePromise(R,A.Authorized)}V.RemoveRightsQuery=function RemoveRightsQuery(R){const D=new A.MsgHelper.TelegramHelper(V.Commands.Q_REMOVERIGHTS,V.Commands.R_REMOVERIGHTS);return D.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.UserManagement,D.fnResponse=RemoveRightsResponse,D.CmdVal.val={RequestID:D.RequestID,RightNames:R},D}}(V.QueryHandler||(V.QueryHandler={}))}(A.UserManagement||(A.UserManagement={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";function GetUserGroupResponse(x,A){A.ResolvePromise({UserGroup:x.UserGroup},x.Authorized)}function GetUserGroupsResponse(x,A){A.ResolvePromise({UserGroups:x.UserGroups},x.Authorized)}V.GetUserGroupQuery=function GetUserGroupQuery(R){const D=new A.MsgHelper.TelegramHelper(V.Commands.Q_GETUSERGROUP,V.Commands.R_GETUSERGROUP);return D.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.UserManagement,D.fnResponse=GetUserGroupResponse,D.CmdVal.val={RequestID:D.RequestID,GroupName:R},D},V.GetUserGroupsQuery=function GetUserGroupsQuery(){const R=new A.MsgHelper.TelegramHelper(V.Commands.Q_GETUSERGROUPS,V.Commands.R_GETUSERGROUPS);return R.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.UserManagement,R.fnResponse=GetUserGroupsResponse,R.CmdVal.val={RequestID:R.RequestID},R}}(V.QueryHandler||(V.QueryHandler={}))}(A.UserManagement||(A.UserManagement={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";function AddUserGroupsResponse(A,V){const R=A.Result.map(A=>{if(x.isNumber(A),x.isString(A))switch(A){case"MethodCallFailed":return x.System.UserManagement.AddGroupSuccess.MethodCallFailed;case"Succeeded":return x.System.UserManagement.AddGroupSuccess.Succeeded;case"GroupAlreadyDefined":return x.System.UserManagement.AddGroupSuccess.GroupAlreadyDefined;case"EmptyGroupName":return x.System.UserManagement.AddGroupSuccess.WrongParam;case"UnknownRight":return x.System.UserManagement.AddGroupSuccess.UnknownRight;case"UnableToSaveGroup":return x.System.UserManagement.AddGroupSuccess.UnableToSaveGroup;default:return x.System.UserManagement.AddGroupSuccess.MethodCallFailed}return x.System.UserManagement.AddGroupSuccess.UnknownRight});V.ResolvePromise(R,A.Authorized)}V.AddUserGroupsQuery=function AddUserGroupsQuery(R){const D=new A.MsgHelper.TelegramHelper(V.Commands.Q_ADDUSERGROUPS,V.Commands.R_ADDUSERGROUPS);return D.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.UserManagement,D.fnResponse=AddUserGroupsResponse,D.CmdVal.val={RequestID:D.RequestID,UserGroups:R},D}}(V.QueryHandler||(V.QueryHandler={}))}(A.UserManagement||(A.UserManagement={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";function ChangeUserGroupsResponse(A,V){const R=A.Result.map(A=>{if(x.isNumber(A))switch(A){case 0:return x.System.UserManagement.ChangeGroupSuccess.MethodCallFailed;case 1:return x.System.UserManagement.ChangeGroupSuccess.Succeeded;case 2:return x.System.UserManagement.ChangeGroupSuccess.UnknownGroup;case 3:return x.System.UserManagement.ChangeGroupSuccess.UnknownRight;case 4:return x.System.UserManagement.ChangeGroupSuccess.UnableToSaveGroup;case 5:return x.System.UserManagement.ChangeGroupSuccess.InvalidGroup;default:return x.System.UserManagement.ChangeGroupSuccess.MethodCallFailed}if(x.isString(A))switch(A){case"MethodCallFailed":return x.System.UserManagement.ChangeGroupSuccess.MethodCallFailed;case"Succeeded":return x.System.UserManagement.ChangeGroupSuccess.Succeeded;case"UnknownGroup":return x.System.UserManagement.ChangeGroupSuccess.UnknownGroup;case"UnknownRight":return x.System.UserManagement.ChangeGroupSuccess.UnknownRight;case"UnableToSaveGroup":return x.System.UserManagement.ChangeGroupSuccess.UnableToSaveGroup;case"InvalidGroup":return x.System.UserManagement.ChangeGroupSuccess.InvalidGroup;default:return x.System.UserManagement.ChangeGroupSuccess.MethodCallFailed}return x.System.UserManagement.ChangeGroupSuccess.MethodCallFailed});V.ResolvePromise(R,A.Authorized)}V.ChangeUserGroupsQuery=function ChangeUserGroupsQuery(R){const D=new A.MsgHelper.TelegramHelper(V.Commands.Q_CHANGEUSERGROUPS,V.Commands.R_CHANGEUSERGROUPS);return D.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.UserManagement,D.fnResponse=ChangeUserGroupsResponse,D.CmdVal.val={RequestID:D.RequestID,UserGroups:R},D}}(V.QueryHandler||(V.QueryHandler={}))}(A.UserManagement||(A.UserManagement={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";function RemoveUserGroupsResponse(A,V){const R=A.Result.map(A=>x.isNumber(A)?x.Internal.EnumHelper.convertToString(x.System.UserManagement.RemoveGroupSuccess,A):x.isString(A)?x.Internal.EnumHelper.convertToNumber(x.System.UserManagement.RemoveGroupSuccess,A):x.System.UserManagement.RemoveGroupSuccess.MethodCallFailed);V.ResolvePromise(R,A.Authorized)}V.RemoveUserGroupsQuery=function RemoveUserGroupsQuery(R){const D=new A.MsgHelper.TelegramHelper(V.Commands.Q_REMOVEUSERGROUPS,V.Commands.R_REMOVEUSERGROUPS);return D.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.UserManagement,D.fnResponse=RemoveUserGroupsResponse,D.CmdVal.val={RequestID:D.RequestID,GroupNames:R},D}}(V.QueryHandler||(V.QueryHandler={}))}(A.UserManagement||(A.UserManagement={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";function GetUsersOfGroupResponse(A,V){const R=A.UserInfos.map(A=>x.Internal.Domain.UserManagement._makeUserInfo(A));V.ResolvePromise(R,A.Authorized)}V.GetUsersOfGroupQuery=function GetUsersOfGroupQuery(R){const D=new A.MsgHelper.TelegramHelper(V.Commands.Q_GETUSERSOFGROUP,V.Commands.R_GETUSERSOFGROUP);return D.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.UserManagement,D.fnResponse=GetUsersOfGroupResponse,D.CmdVal.val={RequestID:D.RequestID,GroupName:R},D}}(V.QueryHandler||(V.QueryHandler={}))}(A.UserManagement||(A.UserManagement={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";function GetUsersResponse(A,V){const R=A.Users.map(A=>x.Internal.Domain.UserManagement._mapUserInfoToUserDefinition(A));V.ResolvePromise(R,A.Authorized)}V.GetUsersQuery=function GetUsersQuery(){const R=new A.MsgHelper.TelegramHelper(V.Commands.Q_GETUSERS,V.Commands.R_GETUSERS);return R.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.UserManagement,R.fnResponse=GetUsersResponse,R.CmdVal.val={RequestID:R.RequestID},R}}(V.QueryHandler||(V.QueryHandler={}))}(A.UserManagement||(A.UserManagement={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";function GetUserInfoResponse(A,V){const R=new x.Internal.System.UserManagement.UserInfo;if(A.UserInfo){const D=x.Internal.Domain.UserManagement._makeUserInfo(A.UserInfo);R.Code=D.Code,R.Comment=D.Comment,R.DeactivationTime=D.DeactivationTime,R.FullName=D.FullName,R.GroupName=D.GroupName,R.Name=D.Name,R.RemainingLogOns=D.RemainingLogOns,R.RenewPassword=D.RenewPassword,R.UserState=D.UserState,V.ResolvePromise(R,A.Authorized)}else V.ResolvePromise(R,!1)}V.GetUserInfoQuery=function GetUserInfoQuery(R){const D=new A.MsgHelper.TelegramHelper(V.Commands.Q_GETUSERINFO,V.Commands.R_GETUSERINFO);return D.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.UserManagement,D.fnResponse=GetUserInfoResponse,D.CmdVal.val={RequestID:D.RequestID,UserName:R},D}}(V.QueryHandler||(V.QueryHandler={}))}(A.UserManagement||(A.UserManagement={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";function ChangeUserResponse(A,V){let R=x.System.UserManagement.ChangeUserSuccess.UnknownUser;if(A.Result){if(x.isString(A.Result.Result))switch(A.Result.Result){case"MethodCallFailed":R=x.System.UserManagement.ChangeUserSuccess.MethodCallFailed;break;case"Succeeded":R=x.System.UserManagement.ChangeUserSuccess.Succeeded;break;case"ViolatedPasswordPolicies":case"ViolatedUserPolicies":if(null!==A.Result.PasswordCompliance){x.isNullOrEmpty(A.Result.PasswordCompliance.ForbiddenPassword)||(R=x.System.UserManagement.ChangeUserSuccess.ForbiddenPassword),x.isNullOrEmpty(A.Result.PasswordCompliance.MaximumLengthExeeded)||(R=x.System.UserManagement.ChangeUserSuccess.InvalidPasswordLength),x.isNullOrEmpty(A.Result.PasswordCompliance.MinimumLengthExeeded)||(R=x.System.UserManagement.ChangeUserSuccess.InvalidPasswordLength),x.isNullOrEmpty(A.Result.PasswordCompliance.MaximumSubsequentEqualChars)||(R=x.System.UserManagement.ChangeUserSuccess.InvalidPassword),x.isNullOrEmpty(A.Result.PasswordCompliance.MinimumDiffCharsToPriorPW)||(R=x.System.UserManagement.ChangeUserSuccess.InvalidPassword),x.isNullOrEmpty(A.Result.PasswordCompliance.MinimumDifferentChars)||(R=x.System.UserManagement.ChangeUserSuccess.InvalidPassword),x.isNullOrEmpty(A.Result.PasswordCompliance.MustContainDigits)||(R=x.System.UserManagement.ChangeUserSuccess.NoNumbersInPassword),x.isNullOrEmpty(A.Result.PasswordCompliance.MustContainLetters)||(R=x.System.UserManagement.ChangeUserSuccess.NoCharactersInPassword),x.isNullOrEmpty(A.Result.PasswordCompliance.MustContainSpecialCharacters)||(R=x.System.UserManagement.ChangeUserSuccess.PasswordMustContainSpecialCharacters),x.isNullOrEmpty(A.Result.PasswordCompliance.MustContainUpperandLowerCase)||(R=x.System.UserManagement.ChangeUserSuccess.InvalidPassword),x.isNullOrEmpty(A.Result.PasswordCompliance.PasswordAgingCount)||(R=x.System.UserManagement.ChangeUserSuccess.InvalidPassword),x.isNullOrEmpty(A.Result.PasswordCompliance.PasswordAgingTime)||(R=x.System.UserManagement.ChangeUserSuccess.InvalidPassword),x.isNullOrEmpty(A.Result.PasswordCompliance.UserNameUnequalPassword)||(R=x.System.UserManagement.ChangeUserSuccess.InvalidPassword);break}R=x.System.UserManagement.ChangeUserSuccess.InvalidPassword;break;case"UnknownUser":R=x.System.UserManagement.ChangeUserSuccess.UnknownUser;break;case"UnableToSaveUser":R=x.System.UserManagement.ChangeUserSuccess.UnableToSaveUser;break;case"FullUserExists":R=x.System.UserManagement.ChangeUserSuccess.FullUserExists;break;case"MachineCodeExists":R=x.System.UserManagement.ChangeUserSuccess.MachineCodeExists;break;case"LockedPassword":R=x.System.UserManagement.ChangeUserSuccess.LockedPassword;break;case"InvalidUserClass":R=x.System.UserManagement.ChangeUserSuccess.InvalidUserClass;break;default:R=x.System.UserManagement.ChangeUserSuccess.MethodCallFailed}x.isNumber(A.Result.Result)}V.ResolvePromise(R,A.Authorized)}V.ChangeUserQuery=function ChangeUserQuery(R){const D=new A.MsgHelper.TelegramHelper(V.Commands.Q_CHANGEUSER,V.Commands.R_CHANGEUSER);D.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.UserManagement;let N=new x.Internal.System.UserManagement.UserDefinition;return N=x.Internal.SimpleObjectJSONClone(R),N.State=x.Internal.EnumHelper.convertToString(x.System.UserManagement.UserState,R.UserState),N.Group=R.GroupName,R.DeactivationTime&&(N.DeactivationTime=R.DeactivationTime.getTime()),D.fnResponse=ChangeUserResponse,D.CmdVal.val={RequestID:D.RequestID,UserDefinition:N},D}}(V.QueryHandler||(V.QueryHandler={}))}(A.UserManagement||(A.UserManagement={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";function RemoveUsersResponse(A,V){const R=A.Result.map(A=>x.isNumber(A)?x.Internal.EnumHelper.convertToString(x.System.UserManagement.RemoveUserSuccess,A):x.isString(A)?x.Internal.EnumHelper.convertToNumber(x.System.UserManagement.RemoveUserSuccess,A):x.System.UserManagement.RemoveUserSuccess.MethodCallFailed);V.ResolvePromise(R,A.Authorized)}V.RemoveUsersQuery=function RemoveUsersQuery(R){const D=new A.MsgHelper.TelegramHelper(V.Commands.Q_REMOVEUSERS,V.Commands.R_REMOVEUSERS);return D.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.UserManagement,D.fnResponse=RemoveUsersResponse,D.CmdVal.val={RequestID:D.RequestID,UserNames:R},D}}(V.QueryHandler||(V.QueryHandler={}))}(A.UserManagement||(A.UserManagement={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";function AddUserResponse(A,V){let R=x.System.UserManagement.AddUserSuccess.UnknownGroup;if(!A.Result)return R=x.System.UserManagement.AddUserSuccess.MethodCallFailed,V.ResolvePromise(R,A.Authorized);if(x.isString(A.Result.Result))switch(A.Result.Result){case"MethodCallFailed":R=x.System.UserManagement.AddUserSuccess.MethodCallFailed;break;case"Succeeded":R=x.System.UserManagement.AddUserSuccess.Succeeded;break;case"ViolatedPasswordPolicies":if(null!==A.Result.PasswordCompliance){x.isNullOrUndefined(A.Result.PasswordCompliance.ForbiddenPassword)||(R=x.System.UserManagement.AddUserSuccess.ForbiddenPassword),x.isNullOrUndefined(A.Result.PasswordCompliance.MaximumLengthExeeded)||(R=x.System.UserManagement.AddUserSuccess.InvalidPasswordLength),x.isNullOrUndefined(A.Result.PasswordCompliance.MinimumLengthExeeded)||(R=x.System.UserManagement.AddUserSuccess.InvalidPasswordLength),x.isNullOrUndefined(A.Result.PasswordCompliance.MaximumSubsequentEqualChars)||(R=x.System.UserManagement.AddUserSuccess.InvalidPassword),x.isNullOrUndefined(A.Result.PasswordCompliance.MinimumDiffCharsToPriorPW)||(R=x.System.UserManagement.AddUserSuccess.InvalidPassword),x.isNullOrUndefined(A.Result.PasswordCompliance.MinimumDifferentChars)||(R=x.System.UserManagement.AddUserSuccess.InvalidPassword),x.isNullOrUndefined(A.Result.PasswordCompliance.MustContainDigits)||(R=x.System.UserManagement.AddUserSuccess.NoNumbersInPassword),x.isNullOrUndefined(A.Result.PasswordCompliance.MustContainLetters)||(R=x.System.UserManagement.AddUserSuccess.NoCharactersInPassword),x.isNullOrUndefined(A.Result.PasswordCompliance.MustContainSpecialCharacters)||(R=x.System.UserManagement.AddUserSuccess.PasswordMustContainSpecialCharacters),x.isNullOrUndefined(A.Result.PasswordCompliance.MustContainUpperandLowerCase)||(R=x.System.UserManagement.AddUserSuccess.InvalidPassword),x.isNullOrUndefined(A.Result.PasswordCompliance.PasswordAgingCount)||(R=x.System.UserManagement.AddUserSuccess.InvalidPassword),x.isNullOrUndefined(A.Result.PasswordCompliance.PasswordAgingTime)||(R=x.System.UserManagement.AddUserSuccess.InvalidPassword),x.isNullOrUndefined(A.Result.PasswordCompliance.UserNameUnequalPassword)||(R=x.System.UserManagement.AddUserSuccess.InvalidPassword);break}R=x.System.UserManagement.AddUserSuccess.InvalidPassword;break;case"ViolatedUserPolicies":if(null!==A.Result.UserCompliance){x.isNullOrUndefined(A.Result.UserCompliance.NameMaximumLength)||(R=x.System.UserManagement.AddUserSuccess.UnableToSaveUser),x.isNullOrUndefined(A.Result.UserCompliance.NameMinimumLength)||(R=x.System.UserManagement.AddUserSuccess.UnableToSaveUser);break}R=x.System.UserManagement.AddUserSuccess.MethodCallFailed;break;case"UserExists":R=x.System.UserManagement.AddUserSuccess.UserExists;break;case"UnableToSaveUser":R=x.System.UserManagement.AddUserSuccess.UnableToSaveUser;break;case"FullUserExists":R=x.System.UserManagement.AddUserSuccess.FullUserExists;break;case"MachineCodeExists":R=x.System.UserManagement.AddUserSuccess.MachineCodeExists;break;case"LockedPassword":R=x.System.UserManagement.AddUserSuccess.LockedPassword;break;case"UnknownGroup":R=x.System.UserManagement.AddUserSuccess.UnknownGroup;break;default:R=x.System.UserManagement.AddUserSuccess.MethodCallFailed}x.isNumber(A.Result.Result),V.ResolvePromise(R,A.Authorized)}V.AddUserQuery=function AddUserQuery(R){const D=new A.MsgHelper.TelegramHelper(V.Commands.Q_ADDUSER,V.Commands.R_ADDUSER);D.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.UserManagement;let N=new x.Internal.System.UserManagement.UserDefinition;return N=x.Internal.SimpleObjectJSONClone(R),N.State=x.Internal.EnumHelper.convertToString(x.System.UserManagement.UserState,R.UserState),N.Group=R.GroupName,R.DeactivationTime&&(N.DeactivationTime=R.DeactivationTime.getTime()),D.fnResponse=AddUserResponse,D.CmdVal.val={RequestID:D.RequestID,UserDefinition:N},D}}(V.QueryHandler||(V.QueryHandler={}))}(A.UserManagement||(A.UserManagement={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";function VerifyUserResponse(A,V){let R=x.System.UserManagement.LogOnSuccess.UnknownUser;if(x.isString(A.Result))switch(A.Result){case"MethodCallFailed":R=x.System.UserManagement.LogOnSuccess.MethodCallFailed;break;case"UnknownUser":R=x.System.UserManagement.LogOnSuccess.UnknownUser;break;case"InvalidPassword":R=x.System.UserManagement.LogOnSuccess.InvalidPassword;break;case"Succeeded":R=x.System.UserManagement.LogOnSuccess.Succeeded;break;case"UserDeactivated":R=x.System.UserManagement.LogOnSuccess.UserDeactivated;break;case"PasswordExpired":R=x.System.UserManagement.LogOnSuccess.PasswordExpired;break;case"TooManyFailedLogOns":R=x.System.UserManagement.LogOnSuccess.TooManyFailedLogOns;break;case"RenewPassword":R=x.System.UserManagement.LogOnSuccess.RenewPassword;break;case"NoCorrespondingLocalUserClass":R=x.System.UserManagement.LogOnSuccess.NoCorrespondingLocalUserClass;break;case"CantAccessDomainInfo":R=x.System.UserManagement.LogOnSuccess.CantAccessDomainInfo;break;case"SucceededChangePasswordSoon":R=x.System.UserManagement.LogOnSuccess.Succeeded;break;case"TooLongSinceLastLogon":R=x.System.UserManagement.LogOnSuccess.UserDeactivated;break;default:R=x.System.UserManagement.LogOnSuccess.MethodCallFailed}if(x.isNumber(A.Result))switch(A.Result){case 0:R=x.System.UserManagement.LogOnSuccess.MethodCallFailed;break;case 1:R=x.System.UserManagement.LogOnSuccess.UnknownUser;break;case 2:R=x.System.UserManagement.LogOnSuccess.InvalidPassword;break;case 3:R=x.System.UserManagement.LogOnSuccess.Succeeded;break;case 4:R=x.System.UserManagement.LogOnSuccess.UserDeactivated;break;case 5:R=x.System.UserManagement.LogOnSuccess.PasswordExpired;break;case 6:R=x.System.UserManagement.LogOnSuccess.TooManyFailedLogOns;break;case 7:R=x.System.UserManagement.LogOnSuccess.RenewPassword;break;case 9:R=x.System.UserManagement.LogOnSuccess.NoCorrespondingLocalUserClass;break;case 10:R=x.System.UserManagement.LogOnSuccess.CantAccessDomainInfo;break;case 11:R=x.System.UserManagement.LogOnSuccess.Succeeded;break;case 12:R=x.System.UserManagement.LogOnSuccess.UserDeactivated;break;default:R=x.System.UserManagement.LogOnSuccess.MethodCallFailed}V.ResolvePromise(R,A.Authorized)}V.VerifyUserQuery=function VerifyUserQuery(R,D,N){const U=new A.MsgHelper.TelegramHelper(V.Commands.Q_VERIFYUSER,V.Commands.R_VERIFYUSER);return U.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.UserManagement,U.fnResponse=VerifyUserResponse,U.CmdVal.val={RequestID:U.RequestID,UserName:R,Password:D,Code:N},U}}(V.QueryHandler||(V.QueryHandler={}))}(A.UserManagement||(A.UserManagement={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";function VerifyPasswordResponse(A,V){const R=x.Internal.EnumHelper.convertToNumber(x.System.UserManagement.VerifyPasswordSuccess,A.Result.Result);V.ResolvePromise(R,A.Authorized)}V.VerifyPasswordQuery=function VerifyPasswordQuery(R,D,N){const U=new A.MsgHelper.TelegramHelper(V.Commands.Q_VERIFYPASSWORD,V.Commands.R_VERIFYPASSWORD);return U.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.UserManagement,U.fnResponse=VerifyPasswordResponse,U.CmdVal.val={RequestID:U.RequestID,UserName:R,OldPassword:D,NewPassword:N},U}}(V.QueryHandler||(V.QueryHandler={}))}(A.UserManagement||(A.UserManagement={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";function LogOnWithCodeResponse(x,A){A.ResolvePromise(x,x.Authorized)}V.LogOnWithCodeQuery=function LogOnWithCodeQuery(R,D){const N=new A.MsgHelper.TelegramHelper(V.Commands.Q_LOGONWITHCODE,V.Commands.R_LOGONWITHCODE);return N.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.UserManagement,N.fnResponse=LogOnWithCodeResponse,N.CmdVal.val={RequestID:N.RequestID,Code:R,Password:D},N}}(V.QueryHandler||(V.QueryHandler={}))}(A.UserManagement||(A.UserManagement={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";function ChangePasswordResponse(A,V){let R=x.System.UserManagement.ChangePasswordSuccess.UnknownUser;if(x.isString(A.Result.Result))switch(A.Result.Result){case"MethodCallFailed":R=x.System.UserManagement.ChangePasswordSuccess.MethodCallFailed;break;case"Succeeded":R=x.System.UserManagement.ChangePasswordSuccess.Succeeded;break;case"ViolatedPasswordPolicies":case"ViolatedPolicies":if(null!==A.Result.PasswordCompliance){x.isNullOrUndefined(A.Result.PasswordCompliance.ForbiddenPassword)||(R=x.System.UserManagement.ChangePasswordSuccess.ForbiddenPassword),x.isNullOrUndefined(A.Result.PasswordCompliance.MaximumLengthExeeded)||(R=x.System.UserManagement.ChangePasswordSuccess.NewPasswordInvalidLength),x.isNullOrUndefined(A.Result.PasswordCompliance.MinimumLengthExeeded)||(R=x.System.UserManagement.ChangePasswordSuccess.NewPasswordInvalidLength),x.isNullOrUndefined(A.Result.PasswordCompliance.MaximumSubsequentEqualChars)||(R=x.System.UserManagement.ChangePasswordSuccess.NewPasswordInvalid),x.isNullOrUndefined(A.Result.PasswordCompliance.MinimumDiffCharsToPriorPW)||(R=x.System.UserManagement.ChangePasswordSuccess.NewPasswordInvalid),x.isNullOrUndefined(A.Result.PasswordCompliance.MinimumDifferentChars)||(R=x.System.UserManagement.ChangePasswordSuccess.NewPasswordInvalid),x.isNullOrUndefined(A.Result.PasswordCompliance.MustContainDigits)||(R=x.System.UserManagement.ChangePasswordSuccess.NoNumbersInPassword),x.isNullOrUndefined(A.Result.PasswordCompliance.MustContainLetters)||(R=x.System.UserManagement.ChangePasswordSuccess.NoCharactersInPassword),x.isNullOrUndefined(A.Result.PasswordCompliance.MustContainSpecialCharacters)||(R=x.System.UserManagement.ChangePasswordSuccess.PasswordMustContainSpecialCharacters),x.isNullOrUndefined(A.Result.PasswordCompliance.MustContainUpperandLowerCase)||(R=x.System.UserManagement.ChangePasswordSuccess.NewPasswordInvalid),x.isNullOrUndefined(A.Result.PasswordCompliance.PasswordAgingCount)||(R=x.System.UserManagement.ChangePasswordSuccess.NewPasswordInvalid),x.isNullOrUndefined(A.Result.PasswordCompliance.PasswordAgingTime)||(R=x.System.UserManagement.ChangePasswordSuccess.NewPasswordInvalid),x.isNullOrUndefined(A.Result.PasswordCompliance.UserNameUnequalPassword)||(R=x.System.UserManagement.ChangePasswordSuccess.NewPasswordInvalid);break}R=x.System.UserManagement.ChangePasswordSuccess.NewPasswordInvalid;break;case"UnableToSavePassword":R=x.System.UserManagement.ChangePasswordSuccess.UnableToSavePassword;break;case"UnknownUser":R=x.System.UserManagement.ChangePasswordSuccess.UnknownUser;break;case"LockedPassword":R=x.System.UserManagement.ChangePasswordSuccess.LockedPassword;break;case"OldPasswordInvalid":R=x.System.UserManagement.ChangePasswordSuccess.OldPasswordInvalid;break;default:R=x.System.UserManagement.ChangePasswordSuccess.MethodCallFailed}x.isNumber(A.Result.Result),V.ResolvePromise(R,A.Authorized)}V.ChangePasswordQuery=function ChangePasswordQuery(R,D,N){const U=new A.MsgHelper.TelegramHelper(V.Commands.Q_CHANGEPASSWORD,V.Commands.R_CHANGEPASSWORD);return U.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.UserManagement,U.fnResponse=ChangePasswordResponse,U.CmdVal.val={RequestID:U.RequestID,UserName:R,OldPassword:D,NewPassword:N},U}}(V.QueryHandler||(V.QueryHandler={}))}(A.UserManagement||(A.UserManagement={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";function GetAuthorizationSystemResponse(A,V){const R=x.Internal.EnumHelper.convertToNumber(x.System.UserManagement.AuthorizationSystemType,A.AuthorizationSystem);V.ResolvePromise(R,A.Authorized)}V.GetAuthorizationSystemQuery=function GetAuthorizationSystemQuery(){const R=new A.MsgHelper.TelegramHelper(V.Commands.Q_GETAUTHORIZATIONSYSTEM,V.Commands.R_GETAUTHORIZATIONSYSTEM);return R.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.UserManagement,R.fnResponse=GetAuthorizationSystemResponse,R.CmdVal.val={RequestID:R.RequestID},R}}(V.QueryHandler||(V.QueryHandler={}))}(A.UserManagement||(A.UserManagement={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";V.registerRightsModifiedCallback=function registerRightsModifiedCallback(R){const D=new A.MsgHelper.TelegramHelper(V.Commands.RIGHTSMODIFIED,V.Commands.RIGHTSMODIFIED);D.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.UserManagement,D.fnResponse=A=>{!function prepareRightsModifiedEventArgs(A,V){return __awaiter(this,void 0,void 0,(function*(){const R=[];A.Cause=x.Internal.EnumHelper.convertToNumber(x.System.UserManagement.ItemModifiedCause,A.Cause);for(let D=0;D<A.Rights.length;D++){const N=x.Internal.Domain.UserManagement._makeRightDefinition(A.Rights[D]);R.push(N);const U=V.UserManagementManager.UserManagementService.RightNames.indexOf(A.Rights[D].Name);switch(A.Cause){case x.System.UserManagement.ItemModifiedCause.Added:case x.System.UserManagement.ItemModifiedCause.Changed:-1===U&&V.UserManagementManager.UserManagementService.RightNames.push(A.Rights[D].Name);break;case x.System.UserManagement.ItemModifiedCause.Removed:-1!==U&&V.UserManagementManager.UserManagementService.RightNames.splice(U,1)}}A.Rights=R,V.UserManagementManager.UserManagementService.RightsModified.trigger(A)}))}(A,R)},D.subscribesToEvent=!0,D.hasResponse=!0,D.RequestID=V.Commands.RIGHTSMODIFIED,D.CmdVal.val={RequestID:D.RequestID},R.SrvHnd.MsgHnd.addCallbackHandler(D);const N=new A.MsgHelper.TelegramHelper(V.Commands.SUBSCRIBERIGHTSMODIFIEDEVENT,V.Commands.SUBSCRIBERIGHTSMODIFIEDEVENT);N.hasResponse=!1,R.SrvHnd.MsgHnd.submitPromise(N)}}(V.QueryHandler||(V.QueryHandler={}))}(A.UserManagement||(A.UserManagement={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";V.registerGroupsModifiedCallback=function registerGroupsModifiedCallback(R){const D=new A.MsgHelper.TelegramHelper(V.Commands.USERGROUPSMODIFIED,V.Commands.USERGROUPSMODIFIED);D.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.UserManagement,D.fnResponse=A=>{!function prepareGroupsModifiedEventArgs(A,V){return __awaiter(this,void 0,void 0,(function*(){const R=[];A.Cause=x.Internal.EnumHelper.convertToNumber(x.System.UserManagement.ItemModifiedCause,A.Cause);for(let D=0;D<A.Groups.length;D++){const N=x.Internal.Domain.UserManagement._makeUserGroupDefinition(A.Groups[D]);R.push(N);const U=V.UserManagementManager.UserManagementService.UserGroupNames.indexOf(A.Groups[D].Name);switch(A.Cause){case x.System.UserManagement.ItemModifiedCause.Added:case x.System.UserManagement.ItemModifiedCause.Changed:-1===U&&V.UserManagementManager.UserManagementService.UserGroupNames.push(A.Groups[D].Name);break;case x.System.UserManagement.ItemModifiedCause.Removed:-1!==U&&V.UserManagementManager.UserManagementService.UserGroupNames.splice(U,1)}}A.Groups=R,V.UserManagementManager.UserManagementService.GroupsModified.trigger(A)}))}(A,R)},D.subscribesToEvent=!0,D.hasResponse=!0,D.RequestID=V.Commands.USERGROUPSMODIFIED,D.CmdVal.val={RequestID:D.RequestID},R.SrvHnd.MsgHnd.addCallbackHandler(D);const N=new A.MsgHelper.TelegramHelper(V.Commands.SUBSCRIBEUSERGROUPSMODIFIEDEVENT,V.Commands.SUBSCRIBEUSERGROUPSMODIFIEDEVENT);N.hasResponse=!1,R.SrvHnd.MsgHnd.submitPromise(N)}}(V.QueryHandler||(V.QueryHandler={}))}(A.UserManagement||(A.UserManagement={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";V.registerUsersModifiedCallback=function registerUsersModifiedCallback(R){const D=new A.MsgHelper.TelegramHelper(V.Commands.USERSMODIFIED,V.Commands.USERSMODIFIED);D.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.UserManagement,D.fnResponse=A=>{!function prepareUsersModifiedEventArgs(A,V){return __awaiter(this,void 0,void 0,(function*(){const R=[];A.Cause=x.Internal.EnumHelper.convertToNumber(x.System.UserManagement.ItemModifiedCause,A.Cause);for(let D=0;D<A.Users.length;D++){const N=x.Internal.Domain.UserManagement._makeUserInfo(A.Users[D]);R.push(N);const U=V.UserManagementManager.UserManagementService.UserNames.indexOf(A.Users[D].Name);switch(A.Cause){case x.System.UserManagement.ItemModifiedCause.Added:case x.System.UserManagement.ItemModifiedCause.Changed:-1===U&&V.UserManagementManager.UserManagementService.UserNames.push(A.Users[D].Name);break;case x.System.UserManagement.ItemModifiedCause.Removed:-1!==U&&V.UserManagementManager.UserManagementService.UserNames.splice(U,1)}}A.Users=R,V.UserManagementManager.UserManagementService.UsersModified.trigger(A)}))}(A,R)},D.subscribesToEvent=!0,D.hasResponse=!0,D.RequestID=V.Commands.USERSMODIFIED,D.CmdVal.val={RequestID:D.RequestID},R.SrvHnd.MsgHnd.addCallbackHandler(D);const N=new A.MsgHelper.TelegramHelper(V.Commands.SUBSCRIBEUSERSMODIFIEDEVENT,V.Commands.SUBSCRIBEUSERSMODIFIEDEVENT);N.hasResponse=!1,R.SrvHnd.MsgHnd.submitPromise(N)}}(V.QueryHandler||(V.QueryHandler={}))}(A.UserManagement||(A.UserManagement={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(x){x.Domain||(x.Domain={})}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){"use strict";class ClientManager extends A.ManagerBase{constructor(A){super(A),this.ID=x.Guid(),this.clientStateChanged=new x.Internal.System.Events.TypedEvent,this.communicationStateChanged=new x.Internal.System.Events.TypedEvent,this.Type.Namespace="VisiWin.Internal.Application.Manager",this.Type.TypeName="ClientManager",this.clientState=x.System.Client.ClientState.Unloaded,this.communicationState=x.System.Client.CommunicationState.Closed,this.LCID=A.Settings.Client.ClientLCID;const V=(new Date).getTimezoneOffset()/60*-1;return this.UTCOffset=V,this.RuntimeVersion=A.Settings.Server.RuntimeVersion,this.WebClientProtocolVersion=A.Settings.System.WebClientProtocolVersion,this}Dispose(){A.Dispose(this.ClientService),A.Dispose(this._ClientService);for(const x in this)Object.prototype.hasOwnProperty.call(this,x)&&delete this[x]}updateClientState(x){this.clientState!==x&&(this.clientState=x,this.ClientService.ClientState=x,this.ClientService.triggerClientState(x))}updateCommunicationState(x){this.communicationState!==x&&(this.communicationState=x,this.ClientService.CommunicationState=x,this.ClientService.triggerCommunicationState(x))}get ClientService(){return this._ClientService||(this._ClientService=new x.Internal.System.Client.ClientService(this)),this._ClientService}}A.ClientManager=ClientManager}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(x){x.Domain||(x.Domain={})}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){"use strict";class ServerObjectManager extends A.ManagerBase{constructor(x){super(x),this.ServerObjects=[],this.Type.Namespace="VisiWin.Internal.Application.Manager",this.Type.TypeName="ServerObjectManager",A.ServerObjects.QueryHandler.registerServerObjectEventRaisedCallback(x)}connectToServerObject(V,R){return __awaiter(this,void 0,void 0,(function*(){try{const x=A.ServerObjects.QueryHandler.ConnectToServerObjectQuery(V,R),D=yield this.session.SrvHnd.MsgHnd.submitPromise(x);return x.Dispose(),V.OnConnectToServerObject.trigger(D),Promise.resolve(D)}catch(V){return A.Logger.WarnLog.log("connectToServerObject",x.Internal.makeString(V)),Promise.reject(V)}}))}getServerObjectPropertyValue(V,R){return __awaiter(this,void 0,void 0,(function*(){try{const x=A.ServerObjects.QueryHandler.GetServerObjectPropertyValueQuery(V,R),D=yield this.session.SrvHnd.MsgHnd.submitPromise(x);return x.Dispose(),V.OnGetServerObjectPropertyValue.trigger(D),Promise.resolve(D)}catch(V){return A.Logger.WarnLog.log("getServerObjectPropertyValue",x.Internal.makeString(V)),Promise.reject(V)}}))}setServerObjectPropertyValue(V,R,D){return __awaiter(this,void 0,void 0,(function*(){try{const x=A.ServerObjects.QueryHandler.SetServerObjectPropertyValueQuery(V,R,D),N=yield this.session.SrvHnd.MsgHnd.submitPromise(x);return x.Dispose(),V.OnSetServerObjectPropertyValue.trigger(N),Promise.resolve(N)}catch(V){return A.Logger.WarnLog.log("setServerObjectPropertyValue",x.Internal.makeString(V)),Promise.reject(V)}}))}invokeServerObjectMethod(V,R,D){return __awaiter(this,void 0,void 0,(function*(){try{const x=A.ServerObjects.QueryHandler.InvokeServerObjectMethodQuery(V,R,D),N=yield this.session.SrvHnd.MsgHnd.submitPromise(x);return V.OnInvokeServerObjectMethod.trigger(N),Promise.resolve(N)}catch(V){return A.Logger.WarnLog.log("invokeServerObjectMethod",x.Internal.makeString(V)),Promise.reject(V)}}))}addServerObjectEventHandler(V,R){return __awaiter(this,void 0,void 0,(function*(){try{const x=A.ServerObjects.QueryHandler.AddServerObjectEventHandlerQuery(V,R),D=yield this.session.SrvHnd.MsgHnd.submitPromise(x);return x.Dispose(),V.OnGetServerObjectPropertyValue.trigger(D),Promise.resolve(D)}catch(V){return A.Logger.WarnLog.log("addServerObjectEventHandler",x.Internal.makeString(V)),Promise.reject(V)}}))}removeServerObjectEventHandler(V,R){return __awaiter(this,void 0,void 0,(function*(){try{const x=A.ServerObjects.QueryHandler.RemoveServerObjectEventHandlerQuery(V,R),D=yield this.session.SrvHnd.MsgHnd.submitPromise(x);return x.Dispose(),V.OnRemoveServerObjectEventHandler.trigger(D),Promise.resolve(D)}catch(V){return A.Logger.WarnLog.log("removeServerObjectEventHandler",x.Internal.makeString(V)),Promise.reject(V)}}))}GetServerObject(A){if(this.session.Settings.System.ProtokollVersion>=x.Application.VersionNumberMdb)return new x.Internal.System.ServerObjects.ServerObject(this,A);try{throw new x.Internal.System.Exception.NotSupportedException}catch(x){return null}}addServerObject(x){let V=!1;for(const A of this.ServerObjects)A.id===x.id&&(V=!0);V?A.Logger.ErrorLog.log("ServerObject allready defined."):this.ServerObjects.push(x)}removeServerObject(x){const A=this.ServerObjects.indexOf(x);A>-1&&this.ServerObjects.splice(A,1)}Dispose(){for(let x=0;x<this.ServerObjects.length;x++)A.Dispose(this.ServerObjects[x]);this.ServerObjects=[],A.Dispose(this)}}A.ServerObjectManager=ServerObjectManager}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){!function(x){!function(x){"use strict";x.Commands={Q_ADDSERVEROBJECTEVENTHANDLER:"QAddServerObjectEventHandler",R_ADDSERVEROBJECTEVENTHANDLER:"RAddServerObjectEventHandler",Q_CONNECTTOSERVEROBJECT:"QConnectToServerObject",R_CONNECTTOSERVEROBJECT:"RConnectToServerObject",Q_GETSERVEROBJECTPROPERTYVALUE:"QGetServerObjectPropertyValue",R_GETSERVEROBJECTPROPERTYVALUE:"RGetServerObjectPropertyValue",Q_INVOKESERVEROBJECTMETHOD:"QInvokeServerObjectMethod",R_INVOKESERVEROBJECTMETHOD:"RInvokeServerObjectMethod",Q_REMOVESERVEROBJECTEVENTHANDLER:"QRemoveServerObjectEventHandler",R_REMOVESERVEROBJECTEVENTHANDLER:"RRemoveServerObjectEventHandler",Q_SETSERVEROBJECTPROPERTYVALUE:"QSetServerObjectPropertyValue",R_SETSERVEROBJECTPROPERTYVALUE:"RSetServerObjectPropertyValue",SERVEROBJECTEVENTRAISED:"ServerObjectEventRaised"}}(x.QueryHandler||(x.QueryHandler={}))}(x.ServerObjects||(x.ServerObjects={}))}(x.Domain||(x.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";function ConnectToServerObjectResponse(x,A){A.ResolvePromise(x,x.Authorized)}V.ConnectToServerObjectQuery=function ConnectToServerObjectQuery(R,D){const N=new A.MsgHelper.TelegramHelper(V.Commands.Q_CONNECTTOSERVEROBJECT,V.Commands.R_CONNECTTOSERVEROBJECT);return N.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.ServerObjects,N.fnResponse=ConnectToServerObjectResponse,N.RequestID=R.id,N.SubjectStock=R,N.CmdVal.val={RequestID:N.RequestID,FullInterfaceName:D},N}}(V.QueryHandler||(V.QueryHandler={}))}(A.ServerObjects||(A.ServerObjects={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";function GetServerObjectPropertyValueResponse(x,A){A.ResolvePromise(x,x.Authorized)}V.GetServerObjectPropertyValueQuery=function GetServerObjectPropertyValueQuery(R,D){const N=new A.MsgHelper.TelegramHelper(V.Commands.Q_GETSERVEROBJECTPROPERTYVALUE,V.Commands.R_GETSERVEROBJECTPROPERTYVALUE);return N.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.ServerObjects,N.fnResponse=GetServerObjectPropertyValueResponse,N.RequestID=R.id,N.SubjectStock=R,N.CmdVal.val={RequestID:N.RequestID,PropertyName:D},N}}(V.QueryHandler||(V.QueryHandler={}))}(A.ServerObjects||(A.ServerObjects={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";function SetServerObjectPropertyValueResponse(x,A){A.ResolvePromise(x,x.Authorized)}V.SetServerObjectPropertyValueQuery=function SetServerObjectPropertyValueQuery(R,D,N){const U=new A.MsgHelper.TelegramHelper(V.Commands.Q_SETSERVEROBJECTPROPERTYVALUE,V.Commands.R_SETSERVEROBJECTPROPERTYVALUE);return U.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.ServerObjects,U.fnResponse=SetServerObjectPropertyValueResponse,U.RequestID=R.id,U.SubjectStock=R,U.CmdVal.val={RequestID:U.RequestID,PropertyName:D,PropertyValue:N},U}}(V.QueryHandler||(V.QueryHandler={}))}(A.ServerObjects||(A.ServerObjects={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";function InvokeServerObjectMethodResponse(x,A){A.ResolvePromise(x,x.Authorized)}V.InvokeServerObjectMethodQuery=function InvokeServerObjectMethodQuery(R,D,N){const U=new A.MsgHelper.TelegramHelper(V.Commands.Q_INVOKESERVEROBJECTMETHOD,V.Commands.R_INVOKESERVEROBJECTMETHOD);return U.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.ServerObjects,U.fnResponse=InvokeServerObjectMethodResponse,U.RequestID=R.id,U.SubjectStock=R,U.CmdVal.val={RequestID:U.RequestID,MethodName:D,ParameterValues:N},U}}(V.QueryHandler||(V.QueryHandler={}))}(A.ServerObjects||(A.ServerObjects={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";function AddServerObjectEventHandlerResponse(x,A){A.ResolvePromise(x,x.Authorized)}V.AddServerObjectEventHandlerQuery=function AddServerObjectEventHandlerQuery(R,D){const N=new A.MsgHelper.TelegramHelper(V.Commands.Q_ADDSERVEROBJECTEVENTHANDLER,V.Commands.R_ADDSERVEROBJECTEVENTHANDLER);return N.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.ServerObjects,N.fnResponse=AddServerObjectEventHandlerResponse,N.RequestID=R.id,N.SubjectStock=R,N.CmdVal.val={RequestID:N.RequestID,EventName:D},N}}(V.QueryHandler||(V.QueryHandler={}))}(A.ServerObjects||(A.ServerObjects={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";function RemoveServerObjectEventHandlerResponse(x,A){A.ResolvePromise(x,x.Authorized)}V.RemoveServerObjectEventHandlerQuery=function RemoveServerObjectEventHandlerQuery(R,D){const N=new A.MsgHelper.TelegramHelper(V.Commands.Q_REMOVESERVEROBJECTEVENTHANDLER,V.Commands.R_REMOVESERVEROBJECTEVENTHANDLER);return N.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.ServerObjects,N.fnResponse=RemoveServerObjectEventHandlerResponse,N.RequestID=R.id,N.SubjectStock=R,N.CmdVal.val={RequestID:N.RequestID,EventName:D},N}}(V.QueryHandler||(V.QueryHandler={}))}(A.ServerObjects||(A.ServerObjects={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){!function(V){"use strict";V.registerServerObjectEventRaisedCallback=function registerServerObjectEventRaisedCallback(R){const D=new A.MsgHelper.TelegramHelper(V.Commands.SERVEROBJECTEVENTRAISED,V.Commands.SERVEROBJECTEVENTRAISED);D.eventSource=x.Internal.System.Diagnostics.Logging.AppDomainEventSource.ServerObjects,D.fnResponse=x=>{!function serverObjectEventRaisedEventArgs(x,A){const V=x.EventArgs,R=x.EventName;for(const D of A.ServerObjectsManager.ServerObjects)D.id===x.RequestID&&D.OnServerObjectEventRaised.trigger({EventArgs:V,EventName:R})}(x,R)},D.subscribesToEvent=!0,D.hasResponse=!0,D.RequestID=V.Commands.SERVEROBJECTEVENTRAISED,D.CmdVal.val={RequestID:D.RequestID},R.SrvHnd.MsgHnd.addCallbackHandler(D)}}(V.QueryHandler||(V.QueryHandler={}))}(A.ServerObjects||(A.ServerObjects={}))}(A.Domain||(A.Domain={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(){var globalObject="undefined"!=typeof window?window:"undefined"!=typeof self?self:"undefined"!=typeof global?global:{},factory;factory=function(WinJS){var require,define;return function(){"use strict";var x={};function normalize(x,A){var V=(x=x||"").split("/");return V.pop(),A.map((function(x){if("."===x[0]){var A=x.split("/"),R=V.slice(0);return A.forEach((function(x){".."===x?R.pop():"."!==x&&R.push(x)})),R.join("/")}return x}))}function load(A,V,R,D){var N=function resolve(A,V,R){return A.map((function(A){if("exports"===A)return R;if("require"===A)return function(x,A){require(normalize(V,x),A)};var D=x[A];if(!D)throw new Error("Undefined dependency: "+A);return D.resolved||(D.resolved=load(D.dependencies,D.factory,A,D.exports),void 0===D.resolved&&(D.resolved=D.exports)),D.resolved}))}(A,R,D);return V&&V.apply?V.apply(null,N):V}define=function(A,V,R){Array.isArray(V)||(R=V,V=[]);var D={dependencies:normalize(A,V),factory:R};-1!==V.indexOf("exports")&&(D.exports={}),x[A]=D},require=function(x,A){Array.isArray(x)||(x=[x]),load(x,A)}}(),define("amd",(function(){})),define("WinJS/Core/_WinJS",{}),define("WinJS/Core/_Global",[],(function(){"use strict";return"undefined"!=typeof window?window:"undefined"!=typeof self?self:"undefined"!=typeof global?global:{}})),define("WinJS/Core/_BaseCoreUtils",["./_Global"],(function baseCoreUtilsInit(x){"use strict";return{hasWinRT:!!x.Windows,markSupportedForProcessing:function markSupportedForProcessing(x){return x.supportedForProcessing=!0,x},_setImmediate:x.setImmediate?x.setImmediate.bind(x):function(A){x.setTimeout(A,0)}}})),define("WinJS/Core/_WriteProfilerMark",["./_Global"],(function profilerInit(x){"use strict";return x.msWriteProfilerMark||function(){}})),define("WinJS/Core/_Base",["./_WinJS","./_Global","./_BaseCoreUtils","./_WriteProfilerMark"],(function baseInit(x,A,V,R){"use strict";function initializeProperties(x,A,V){var R,D,N,U=Object.keys(A),B=Array.isArray(x);for(D=0,N=U.length;D<N;D++){var F=U[D],W=95!==F.charCodeAt(0),H=A[F];!H||"object"!=typeof H||void 0===H.value&&"function"!=typeof H.get&&"function"!=typeof H.set?W?B?x.forEach((function(x){x[F]=H})):x[F]=H:(R=R||{})[F]={value:H,enumerable:W,configurable:!0,writable:!0}:(void 0===H.enumerable&&(H.enumerable=W),V&&H.setName&&"function"==typeof H.setName&&H.setName(V+"."+F),(R=R||{})[F]=H)}R&&(B?x.forEach((function(x){Object.defineProperties(x,R)})):Object.defineProperties(x,R))}return function(){var V=x;function createNamespace(V,R){var D=V||{};if(R){var N=R.split(".");D===A&&"WinJS"===N[0]&&(D=x,N.splice(0,1));for(var U=0,B=N.length;U<B;U++){var F=N[U];D[F]||Object.defineProperty(D,F,{value:{},writable:!1,enumerable:!0,configurable:!0}),D=D[F]}}return D}function defineWithParent(x,A,V){var R=createNamespace(x,A);return V&&initializeProperties(R,V,A||"<ANONYMOUS>"),R}V.Namespace||(V.Namespace=Object.create(Object.prototype));var R=1,D=2,N=3;Object.defineProperties(V.Namespace,{defineWithParent:{value:defineWithParent,writable:!0,enumerable:!0,configurable:!0},define:{value:function define(x,V){return defineWithParent(A,x,V)},writable:!0,enumerable:!0,configurable:!0},_lazy:{value:function lazy(x){var A,V=R;return{setName:function(x){},get:function(){switch(V){case N:return A;case R:V=D;try{A=x()}finally{V=R}return x=null,V=N,A;case D:throw"Illegal: reentrancy on initialization";default:throw"Illegal"}},set:function(x){switch(V){case D:throw"Illegal: reentrancy on initialization";default:V=N,A=x}},enumerable:!0,configurable:!0}},writable:!0,enumerable:!0,configurable:!0},_moduleDefine:{value:function moduleDefine(x,V,R){var D=[x],N=null;return V&&(N=createNamespace(A,V),D.push(N)),initializeProperties(D,R,V||"<ANONYMOUS>"),N},writable:!0,enumerable:!0,configurable:!0}})}(),function(){function define(x,A,R){return x=x||function(){},V.markSupportedForProcessing(x),A&&initializeProperties(x.prototype,A),R&&initializeProperties(x,R),x}x.Namespace.define("WinJS.Class",{define:define,derive:function derive(x,A,R,D){if(x){A=A||function(){};var N=x.prototype;return A.prototype=Object.create(N),V.markSupportedForProcessing(A),Object.defineProperty(A.prototype,"constructor",{value:A,writable:!0,configurable:!0,enumerable:!0}),R&&initializeProperties(A.prototype,R),D&&initializeProperties(A,D),A}return define(A,R,D)},mix:function mix(x){var A,V;for(x=x||function(){},A=1,V=arguments.length;A<V;A++)initializeProperties(x.prototype,arguments[A]);return x}})}(),{Namespace:x.Namespace,Class:x.Class}})),define("WinJS/Core/_ErrorFromName",["./_Base"],(function errorsInit(x){"use strict";var A=x.Class.derive(Error,(function(x,A){this.name=x,this.message=A||x}),{},{supportedForProcessing:!1});return x.Namespace.define("WinJS",{ErrorFromName:A}),A})),define("WinJS/Core/_WinRT",["exports","./_Global","./_Base"],(function winrtInit(x,A,V){"use strict";x.msGetWeakWinRTProperty=A.msGetWeakWinRTProperty,x.msSetWeakWinRTProperty=A.msSetWeakWinRTProperty,["Windows.ApplicationModel.DesignMode.designModeEnabled","Windows.ApplicationModel.Resources.Core.ResourceContext","Windows.ApplicationModel.Resources.Core.ResourceManager","Windows.ApplicationModel.Search.SearchQueryLinguisticDetails","Windows.Data.Text.SemanticTextQuery","Windows.Foundation.Collections.CollectionChange","Windows.Foundation.Diagnostics","Windows.Foundation.Uri","Windows.Globalization.ApplicationLanguages","Windows.Globalization.Calendar","Windows.Globalization.DateTimeFormatting","Windows.Globalization.Language","Windows.Phone.UI.Input.HardwareButtons","Windows.Storage.ApplicationData","Windows.Storage.CreationCollisionOption","Windows.Storage.BulkAccess.FileInformationFactory","Windows.Storage.FileIO","Windows.Storage.FileProperties.ThumbnailType","Windows.Storage.FileProperties.ThumbnailMode","Windows.Storage.FileProperties.ThumbnailOptions","Windows.Storage.KnownFolders","Windows.Storage.Search.FolderDepth","Windows.Storage.Search.IndexerOption","Windows.Storage.Streams.RandomAccessStreamReference","Windows.UI.ApplicationSettings.SettingsEdgeLocation","Windows.UI.ApplicationSettings.SettingsCommand","Windows.UI.ApplicationSettings.SettingsPane","Windows.UI.Core.AnimationMetrics","Windows.UI.Core.SystemNavigationManager","Windows.UI.Input.EdgeGesture","Windows.UI.Input.EdgeGestureKind","Windows.UI.Input.PointerPoint","Windows.UI.ViewManagement.HandPreference","Windows.UI.ViewManagement.InputPane","Windows.UI.ViewManagement.UIColorType","Windows.UI.ViewManagement.UISettings","Windows.UI.WebUI.Core.WebUICommandBar","Windows.UI.WebUI.Core.WebUICommandBarBitmapIcon","Windows.UI.WebUI.Core.WebUICommandBarClosedDisplayMode","Windows.UI.WebUI.Core.WebUICommandBarIconButton","Windows.UI.WebUI.Core.WebUICommandBarSymbolIcon","Windows.UI.WebUI.WebUIApplication"].forEach((function(A){var R=A.split("."),D={};D[R[R.length-1]]={get:function(){return null}},V.Namespace.defineWithParent(x,R.slice(0,-1).join("."),D)}))})),define("WinJS/Core/_Events",["exports","./_Base"],(function eventsInit(x,A){"use strict";function createEventProperty(x){var A="_on"+x+"state";return{get:function(){var x=this[A];return x&&x.userHandler},set:function(V){var R=this[A];V?(R||(R={wrapper:function(x){return R.userHandler(x)},userHandler:V},Object.defineProperty(this,A,{value:R,enumerable:!1,writable:!0,configurable:!0}),this.addEventListener(x,R.wrapper,!1)),R.userHandler=V):R&&(this.removeEventListener(x,R.wrapper,!1),this[A]=null)},enumerable:!0}}var V=A.Class.define((function EventMixinEvent_ctor(x,A,V){this.detail=A,this.target=V,this.timeStamp=Date.now(),this.type=x}),{bubbles:{value:!1,writable:!1},cancelable:{value:!1,writable:!1},currentTarget:{get:function(){return this.target}},defaultPrevented:{get:function(){return this._preventDefaultCalled}},trusted:{value:!1,writable:!1},eventPhase:{value:0,writable:!1},target:null,timeStamp:null,type:null,preventDefault:function(){this._preventDefaultCalled=!0},stopImmediatePropagation:function(){this._stopImmediatePropagationCalled=!0},stopPropagation:function(){}},{supportedForProcessing:!1}),R={_listeners:null,addEventListener:function(x,A,V){V=V||!1,this._listeners=this._listeners||{};for(var R=this._listeners[x]=this._listeners[x]||[],D=0,N=R.length;D<N;D++){var U=R[D];if(U.useCapture===V&&U.listener===A)return}R.push({listener:A,useCapture:V})},dispatchEvent:function(x,A){var R=this._listeners&&this._listeners[x];if(R){for(var D=new V(x,A,this),N=0,U=(R=R.slice(0,R.length)).length;N<U&&!D._stopImmediatePropagationCalled;N++)R[N].listener(D);return D.defaultPrevented||!1}return!1},removeEventListener:function(x,A,V){V=V||!1;var R=this._listeners&&this._listeners[x];if(R)for(var D=0,N=R.length;D<N;D++){var U=R[D];if(U.listener===A&&U.useCapture===V){R.splice(D,1),0===R.length&&delete this._listeners[x];break}}}};A.Namespace._moduleDefine(x,"WinJS.Utilities",{_createEventProperty:createEventProperty,createEventProperties:function createEventProperties(){for(var x={},A=0,V=arguments.length;A<V;A++){var R=arguments[A];x["on"+R]=createEventProperty(R)}return x},eventMixin:R})})),define("require-json",{load:function(x){throw new Error("Dynamic load not allowed: "+x)}}),define("require-json!strings/en-us/Microsoft.WinJS.resjson",{"tv/scrollViewerPageDown":"Page Down","tv/scrollViewerPageUp":"Page Up","ui/appBarAriaLabel":"App Bar","ui/appBarCommandAriaLabel":"App Bar Item","ui/appBarOverflowButtonAriaLabel":"View more","ui/autoSuggestBoxAriaLabel":"Autosuggestbox","ui/autoSuggestBoxAriaLabelInputNoPlaceHolder":"Autosuggestbox, enter to submit query, esc to clear text","ui/autoSuggestBoxAriaLabelInputPlaceHolder":"Autosuggestbox, {0}, enter to submit query, esc to clear text","ui/autoSuggestBoxAriaLabelQuery":"Suggestion: {0}","_ui/autoSuggestBoxAriaLabelQuery.comment":"Suggestion: query text (example: Suggestion: contoso)","ui/autoSuggestBoxAriaLabelSeparator":"Separator: {0}","_ui/autoSuggestBoxAriaLabelSeparator.comment":"Separator: separator text (example: Separator: People or Separator: Apps)","ui/autoSuggestBoxAriaLabelResult":"Result: {0}, {1}","_ui/autoSuggestBoxAriaLabelResult.comment":"Result: text, detailed text (example: Result: contoso, www.contoso.com)","ui/averageRating":"Average Rating","ui/backbuttonarialabel":"Back","ui/chapterSkipBackMediaCommandDisplayText":"Chapter back","ui/chapterSkipForwardMediaCommandDisplayText":"Chapter forward","ui/clearYourRating":"Clear your rating","ui/closedCaptionsLabelNone":"Off","ui/closedCaptionsMediaCommandDisplayText":"Closed captioning","ui/closeOverlay":"Close","ui/commandingSurfaceAriaLabel":"CommandingSurface","ui/commandingSurfaceOverflowButtonAriaLabel":"View more","ui/datePicker":"Date Picker","ui/fastForwardMediaCommandDisplayText":"Fast forward","ui/fastForwardFeedbackDisplayText":" {0}X","ui/fastForwardFeedbackSlowMotionDisplayText":"0.5X","ui/flipViewPanningContainerAriaLabel":"Scrolling Container","ui/flyoutAriaLabel":"Flyout","ui/goToFullScreenButtonLabel":"Go full screen","ui/goToLiveMediaCommandDisplayText":"LIVE","ui/hubViewportAriaLabel":"Scrolling Container","ui/listViewViewportAriaLabel":"Scrolling Container","ui/mediaErrorAborted":"Playback was interrupted. Please try again.","ui/mediaErrorNetwork":"There was a network connection error.","ui/mediaErrorDecode":"The content could not be decoded","ui/mediaErrorSourceNotSupported":"This content type is not supported.","ui/mediaErrorUnknown":"There was an unknown error.","ui/menuCommandAriaLabel":"Menu Item","ui/menuAriaLabel":"Menu","ui/navBarContainerViewportAriaLabel":"Scrolling Container","ui/nextTrackMediaCommandDisplayText":"Next track","ui/off":"Off","ui/on":"On","ui/pauseMediaCommandDisplayText":"Pause","ui/playFromBeginningMediaCommandDisplayText":"Play again","ui/playbackRateHalfSpeedLabel":"0.5x","ui/playbackRateNormalSpeedLabel":"Normal","ui/playbackRateOneAndHalfSpeedLabel":"1.5x","ui/playbackRateDoubleSpeedLabel":"2x","ui/playMediaCommandDisplayText":"Play","ui/pivotAriaLabel":"Pivot","ui/pivotViewportAriaLabel":"Scrolling Container","ui/replayMediaCommandDisplayText":"Play again","ui/rewindMediaCommandDisplayText":"Rewind","ui/rewindFeedbackDisplayText":" {0}X","ui/rewindFeedbackSlowMotionDisplayText":"0.5X","ui/searchBoxAriaLabel":"Searchbox","ui/searchBoxAriaLabelInputNoPlaceHolder":"Searchbox, enter to submit query, esc to clear text","ui/searchBoxAriaLabelInputPlaceHolder":"Searchbox, {0}, enter to submit query, esc to clear text","ui/searchBoxAriaLabelButton":"Click to submit query","ui/seeMore":"See more","ui/selectAMPM":"Select A.M P.M","ui/selectDay":"Select Day","ui/selectHour":"Select Hour","ui/selectMinute":"Select Minute","ui/selectMonth":"Select Month","ui/selectYear":"Select Year","ui/settingsFlyoutAriaLabel":"Settings Flyout","ui/stopMediaCommandDisplayText":"Stop","ui/tentativeRating":"Tentative Rating","ui/timePicker":"Time Picker","ui/timeSeparator":":","ui/timeSkipBackMediaCommandDisplayText":"Skip back","ui/timeSkipForwardMediaCommandDisplayText":"Skip forward","ui/toolbarAriaLabel":"ToolBar","ui/toolbarOverflowButtonAriaLabel":"View more","ui/unrated":"Unrated","ui/userRating":"User Rating","ui/zoomMediaCommandDisplayText":"Zoom","ui/appBarIcons/previous":"","_ui/appBarIcons/previous.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/next":"","_ui/appBarIcons/next.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/play":"","_ui/appBarIcons/play.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/pause":"","_ui/appBarIcons/pause.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/edit":"","_ui/appBarIcons/edit.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/save":"","_ui/appBarIcons/save.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/clear":"","_ui/appBarIcons/clear.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/delete":"","_ui/appBarIcons/delete.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/remove":"","_ui/appBarIcons/remove.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/add":"","_ui/appBarIcons/add.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/cancel":"","_ui/appBarIcons/cancel.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/accept":"","_ui/appBarIcons/accept.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/more":"","_ui/appBarIcons/more.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/redo":"","_ui/appBarIcons/redo.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/undo":"","_ui/appBarIcons/undo.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/home":"","_ui/appBarIcons/home.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/up":"","_ui/appBarIcons/up.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/forward":"","_ui/appBarIcons/forward.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/right":"","_ui/appBarIcons/right.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/back":"","_ui/appBarIcons/back.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/left":"","_ui/appBarIcons/left.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/favorite":"","_ui/appBarIcons/favorite.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/camera":"","_ui/appBarIcons/camera.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/settings":"","_ui/appBarIcons/settings.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/video":"","_ui/appBarIcons/video.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/sync":"","_ui/appBarIcons/sync.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/download":"","_ui/appBarIcons/download.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/mail":"","_ui/appBarIcons/mail.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/find":"","_ui/appBarIcons/find.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/help":"","_ui/appBarIcons/help.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/upload":"","_ui/appBarIcons/upload.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/emoji":"","_ui/appBarIcons/emoji.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/twopage":"","_ui/appBarIcons/twopage.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/leavechat":"","_ui/appBarIcons/leavechat.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/mailforward":"","_ui/appBarIcons/mailforward.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/clock":"","_ui/appBarIcons/clock.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/send":"","_ui/appBarIcons/send.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/crop":"","_ui/appBarIcons/crop.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/rotatecamera":"","_ui/appBarIcons/rotatecamera.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/people":"","_ui/appBarIcons/people.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/closepane":"","_ui/appBarIcons/closepane.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/openpane":"","_ui/appBarIcons/openpane.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/world":"","_ui/appBarIcons/world.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/flag":"","_ui/appBarIcons/flag.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/previewlink":"","_ui/appBarIcons/previewlink.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/globe":"","_ui/appBarIcons/globe.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/trim":"","_ui/appBarIcons/trim.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/attachcamera":"","_ui/appBarIcons/attachcamera.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/zoomin":"","_ui/appBarIcons/zoomin.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/bookmarks":"","_ui/appBarIcons/bookmarks.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/document":"","_ui/appBarIcons/document.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/protecteddocument":"","_ui/appBarIcons/protecteddocument.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/page":"","_ui/appBarIcons/page.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/bullets":"","_ui/appBarIcons/bullets.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/comment":"","_ui/appBarIcons/comment.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/mail2":"","_ui/appBarIcons/mail2.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/contactinfo":"","_ui/appBarIcons/contactinfo.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/hangup":"","_ui/appBarIcons/hangup.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/viewall":"","_ui/appBarIcons/viewall.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/mappin":"","_ui/appBarIcons/mappin.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/phone":"","_ui/appBarIcons/phone.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/videochat":"","_ui/appBarIcons/videochat.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/switch":"","_ui/appBarIcons/switch.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/contact":"","_ui/appBarIcons/contact.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/rename":"","_ui/appBarIcons/rename.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/pin":"","_ui/appBarIcons/pin.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/musicinfo":"","_ui/appBarIcons/musicinfo.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/go":"","_ui/appBarIcons/go.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/keyboard":"","_ui/appBarIcons/keyboard.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/dockleft":"","_ui/appBarIcons/dockleft.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/dockright":"","_ui/appBarIcons/dockright.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/dockbottom":"","_ui/appBarIcons/dockbottom.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/remote":"","_ui/appBarIcons/remote.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/refresh":"","_ui/appBarIcons/refresh.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/rotate":"","_ui/appBarIcons/rotate.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/shuffle":"","_ui/appBarIcons/shuffle.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/list":"","_ui/appBarIcons/list.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/shop":"","_ui/appBarIcons/shop.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/selectall":"","_ui/appBarIcons/selectall.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/orientation":"","_ui/appBarIcons/orientation.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/import":"","_ui/appBarIcons/import.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/importall":"","_ui/appBarIcons/importall.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/browsephotos":"","_ui/appBarIcons/browsephotos.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/webcam":"","_ui/appBarIcons/webcam.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/pictures":"","_ui/appBarIcons/pictures.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/savelocal":"","_ui/appBarIcons/savelocal.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/caption":"","_ui/appBarIcons/caption.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/stop":"","_ui/appBarIcons/stop.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/showresults":"","_ui/appBarIcons/showresults.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/volume":"","_ui/appBarIcons/volume.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/repair":"","_ui/appBarIcons/repair.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/message":"","_ui/appBarIcons/message.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/page2":"","_ui/appBarIcons/page2.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/calendarday":"","_ui/appBarIcons/calendarday.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/calendarweek":"","_ui/appBarIcons/calendarweek.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/calendar":"","_ui/appBarIcons/calendar.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/characters":"","_ui/appBarIcons/characters.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/mailreplyall":"","_ui/appBarIcons/mailreplyall.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/read":"","_ui/appBarIcons/read.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/link":"","_ui/appBarIcons/link.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/accounts":"","_ui/appBarIcons/accounts.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/showbcc":"","_ui/appBarIcons/showbcc.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/hidebcc":"","_ui/appBarIcons/hidebcc.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/cut":"","_ui/appBarIcons/cut.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/attach":"","_ui/appBarIcons/attach.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/paste":"","_ui/appBarIcons/paste.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/filter":"","_ui/appBarIcons/filter.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/copy":"","_ui/appBarIcons/copy.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/emoji2":"","_ui/appBarIcons/emoji2.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/important":"","_ui/appBarIcons/important.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/mailreply":"","_ui/appBarIcons/mailreply.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/slideshow":"","_ui/appBarIcons/slideshow.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/sort":"","_ui/appBarIcons/sort.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/manage":"","_ui/appBarIcons/manage.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/allapps":"","_ui/appBarIcons/allapps.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/disconnectdrive":"","_ui/appBarIcons/disconnectdrive.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/mapdrive":"","_ui/appBarIcons/mapdrive.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/newwindow":"","_ui/appBarIcons/newwindow.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/openwith":"","_ui/appBarIcons/openwith.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/contactpresence":"","_ui/appBarIcons/contactpresence.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/priority":"","_ui/appBarIcons/priority.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/uploadskydrive":"","_ui/appBarIcons/uploadskydrive.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/gototoday":"","_ui/appBarIcons/gototoday.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/font":"","_ui/appBarIcons/font.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/fontcolor":"","_ui/appBarIcons/fontcolor.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/contact2":"","_ui/appBarIcons/contact2.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/folder":"","_ui/appBarIcons/folder.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/audio":"","_ui/appBarIcons/audio.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/placeholder":"","_ui/appBarIcons/placeholder.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/view":"","_ui/appBarIcons/view.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/setlockscreen":"","_ui/appBarIcons/setlockscreen.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/settile":"","_ui/appBarIcons/settile.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/cc":"","_ui/appBarIcons/cc.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/stopslideshow":"","_ui/appBarIcons/stopslideshow.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/permissions":"","_ui/appBarIcons/permissions.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/highlight":"","_ui/appBarIcons/highlight.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/disableupdates":"","_ui/appBarIcons/disableupdates.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/unfavorite":"","_ui/appBarIcons/unfavorite.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/unpin":"","_ui/appBarIcons/unpin.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/openlocal":"","_ui/appBarIcons/openlocal.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/mute":"","_ui/appBarIcons/mute.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/italic":"","_ui/appBarIcons/italic.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/underline":"","_ui/appBarIcons/underline.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/bold":"","_ui/appBarIcons/bold.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/movetofolder":"","_ui/appBarIcons/movetofolder.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/likedislike":"","_ui/appBarIcons/likedislike.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/dislike":"","_ui/appBarIcons/dislike.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/like":"","_ui/appBarIcons/like.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/alignright":"","_ui/appBarIcons/alignright.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/aligncenter":"","_ui/appBarIcons/aligncenter.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/alignleft":"","_ui/appBarIcons/alignleft.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/zoom":"","_ui/appBarIcons/zoom.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/zoomout":"","_ui/appBarIcons/zoomout.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/openfile":"","_ui/appBarIcons/openfile.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/otheruser":"","_ui/appBarIcons/otheruser.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/admin":"","_ui/appBarIcons/admin.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/street":"","_ui/appBarIcons/street.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/map":"","_ui/appBarIcons/map.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/clearselection":"","_ui/appBarIcons/clearselection.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/fontdecrease":"","_ui/appBarIcons/fontdecrease.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/fontincrease":"","_ui/appBarIcons/fontincrease.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/fontsize":"","_ui/appBarIcons/fontsize.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/cellphone":"","_ui/appBarIcons/cellphone.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/print":"","_ui/appBarIcons/print.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/share":"","_ui/appBarIcons/share.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/reshare":"","_ui/appBarIcons/reshare.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/tag":"","_ui/appBarIcons/tag.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/repeatone":"","_ui/appBarIcons/repeatone.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/repeatall":"","_ui/appBarIcons/repeatall.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/outlinestar":"","_ui/appBarIcons/outlinestar.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/solidstar":"","_ui/appBarIcons/solidstar.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/calculator":"","_ui/appBarIcons/calculator.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/directions":"","_ui/appBarIcons/directions.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/target":"","_ui/appBarIcons/target.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/library":"","_ui/appBarIcons/library.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/phonebook":"","_ui/appBarIcons/phonebook.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/memo":"","_ui/appBarIcons/memo.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/microphone":"","_ui/appBarIcons/microphone.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/postupdate":"","_ui/appBarIcons/postupdate.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/backtowindow":"","_ui/appBarIcons/backtowindow.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/fullscreen":"","_ui/appBarIcons/fullscreen.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/newfolder":"","_ui/appBarIcons/newfolder.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/calendarreply":"","_ui/appBarIcons/calendarreply.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/unsyncfolder":"","_ui/appBarIcons/unsyncfolder.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/reporthacked":"","_ui/appBarIcons/reporthacked.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/syncfolder":"","_ui/appBarIcons/syncfolder.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/blockcontact":"","_ui/appBarIcons/blockcontact.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/switchapps":"","_ui/appBarIcons/switchapps.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/addfriend":"","_ui/appBarIcons/addfriend.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/touchpointer":"","_ui/appBarIcons/touchpointer.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/gotostart":"","_ui/appBarIcons/gotostart.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/zerobars":"","_ui/appBarIcons/zerobars.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/onebar":"","_ui/appBarIcons/onebar.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/twobars":"","_ui/appBarIcons/twobars.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/threebars":"","_ui/appBarIcons/threebars.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/fourbars":"","_ui/appBarIcons/fourbars.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/scan":"","_ui/appBarIcons/scan.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/preview":"","_ui/appBarIcons/preview.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/hamburger":"","_ui/appBarIcons/hamburger.comment":"{Locked=qps-ploc,qps-plocm}"}),define("WinJS/Core/_Resources",["exports","./_Global","./_WinRT","./_Base","./_Events","require-json!strings/en-us/Microsoft.WinJS.resjson"],(function resourcesInit(x,A,V,R,D,N){"use strict";function _getWinJSString(x){var A=getString("ms-resource:///Microsoft.WinJS/"+x);return A.empty&&(A=function _getStringBuiltIn(x){var A=N[x];return"string"==typeof A&&(A={value:A}),A||{value:x,empty:!0}}(x)),A}var U,B,F=!1,W=new(R.Class.mix(R.Class.define(null,{},{supportedForProcessing:!1}),D.eventMixin)),H=D._createEventProperty,z={get malformedFormatStringInput(){return"Malformed, did you mean to escape your '{0}'?"}};function formatString(x){var A=arguments;return A.length>1&&(x=x.replace(/({{)|(}})|{(\d+)}|({)|(})/g,(function(x,V,R,D,N,U){if(N||U)throw formatString(z.malformedFormatStringInput,N||U);return(V?"{":R&&"}")||A[1+(0|D)]}))),x}R.Namespace.define("WinJS.Resources",{_getWinJSString:_getWinJSString}),R.Namespace._moduleDefine(x,"WinJS.Resources",{addEventListener:function(A,R,D){if(V.Windows.ApplicationModel.Resources.Core.ResourceManager&&!F&&"contextchanged"===A)try{var N=x._getResourceContext();N?N.qualifierValues.addEventListener("mapchanged",(function(A){x.dispatchEvent("contextchanged",{qualifier:A.key,changed:A.target[A.key]})}),!1):V.Windows.ApplicationModel.Resources.Core.ResourceManager.current.defaultContext.qualifierValues.addEventListener("mapchanged",(function(A){x.dispatchEvent("contextchanged",{qualifier:A.key,changed:A.target[A.key]})}),!1),F=!0}catch(x){}W.addEventListener(A,R,D)},removeEventListener:W.removeEventListener.bind(W),dispatchEvent:W.dispatchEvent.bind(W),_formatString:formatString,_getStringWinRT:function(A){if(!U){var R=V.Windows.ApplicationModel.Resources.Core.ResourceManager.current.mainResourceMap;try{U=R.getSubtree("Resources")}catch(x){}U||(U=R)}var D,N,B;try{var F=x._getResourceContext();(B=F?U.getValue(A,F):U.getValue(A))&&void 0===(D=B.valueAsString)&&(D=B.toString())}catch(x){}if(!D)return x._getStringJS(A);try{N=B.getQualifierValue("Language")}catch(x){return{value:D}}return{value:D,lang:N}},_getStringJS:function(x){var V=A.strings&&A.strings[x];return"string"==typeof V&&(V={value:V}),V||{value:x,empty:!0}},_getResourceContext:function(){if(A.document&&void 0===B){var x=V.Windows.ApplicationModel.Resources.Core.ResourceContext;B=x.getForCurrentView?x.getForCurrentView():null}return B},oncontextchanged:H("contextchanged")});var G=V.Windows.ApplicationModel.Resources.Core.ResourceManager?x._getStringWinRT:x._getStringJS,getString=function(x){return G(x)};R.Namespace._moduleDefine(x,null,{_formatString:formatString,_getWinJSString:_getWinJSString}),R.Namespace._moduleDefine(x,"WinJS.Resources",{getString:{get:function(){return getString},set:function(x){getString=x}}})})),define("WinJS/Core/_Trace",["./_Global"],(function traceInit(x){"use strict";function nop(x){return x}return{_traceAsyncOperationStarting:x.Debug&&x.Debug.msTraceAsyncOperationStarting&&x.Debug.msTraceAsyncOperationStarting.bind(x.Debug)||nop,_traceAsyncOperationCompleted:x.Debug&&x.Debug.msTraceAsyncOperationCompleted&&x.Debug.msTraceAsyncOperationCompleted.bind(x.Debug)||nop,_traceAsyncCallbackStarting:x.Debug&&x.Debug.msTraceAsyncCallbackStarting&&x.Debug.msTraceAsyncCallbackStarting.bind(x.Debug)||nop,_traceAsyncCallbackCompleted:x.Debug&&x.Debug.msTraceAsyncCallbackCompleted&&x.Debug.msTraceAsyncCallbackCompleted.bind(x.Debug)||nop}})),define("WinJS/Promise/_StateMachine",["../Core/_Global","../Core/_BaseCoreUtils","../Core/_Base","../Core/_ErrorFromName","../Core/_Events","../Core/_Trace"],(function promiseStateMachineInit(x,A,V,R,D,N){"use strict";x.Debug&&(x.Debug.setNonUserCodeExceptions=!0);var U=new(V.Class.mix(V.Class.define(null,{},{supportedForProcessing:!1}),D.eventMixin));U._listeners={};var B=!1,F={promise:1,thenPromise:2,errorPromise:4,exceptionPromise:8,completePromise:16};F.all=F.promise|F.thenPromise|F.errorPromise|F.exceptionPromise|F.completePromise;var W,H,z,G,j,q,Q,K,J,X,Y=1;function _(){}W={name:"created",enter:function(x){x._setState(H)},cancel:_,done:_,then:_,_completed:_,_error:_,_notify:_,_progress:_,_setCompleteValue:_,_setErrorValue:_},H={name:"working",enter:_,cancel:function(x){x._setState(j)},done:done,then:then,_completed:completed,_error:error,_notify:_,_progress:progress,_setCompleteValue:setCompleteValue,_setErrorValue:setErrorValue},z={name:"waiting",enter:function(x){var A=x._value;if(A instanceof ee&&A._state!==X&&A._state!==K)pushListener(A,{promise:x});else{var error=function(V){A._errorId?x._chainedError(V,A):(callonerror(x,V,detailsForHandledError,A,error),x._error(V))};error.handlesOnError=!0,A.then(x._completed.bind(x),error,x._progress.bind(x))}},cancel:function(x){x._setState(G)},done:done,then:then,_completed:completed,_error:error,_notify:_,_progress:progress,_setCompleteValue:setCompleteValue,_setErrorValue:setErrorValue},G={name:"waiting_canceled",enter:function(x){x._setState(q);var A=x._value;A.cancel&&A.cancel()},cancel:_,done:done,then:then,_completed:completed,_error:error,_notify:_,_progress:progress,_setCompleteValue:setCompleteValue,_setErrorValue:setErrorValue},j={name:"canceled",enter:function(x){x._setState(q),x._cancelAction()},cancel:_,done:done,then:then,_completed:completed,_error:error,_notify:_,_progress:progress,_setCompleteValue:setCompleteValue,_setErrorValue:setErrorValue},q={name:"canceling",enter:function(x){var A=new Error("Canceled");A.name=A.message,x._value=A,x._setState(J)},cancel:_,done:_,then:_,_completed:_,_error:_,_notify:_,_progress:_,_setCompleteValue:_,_setErrorValue:_},Q={name:"complete_notify",enter:function(x){if(x.done=ne.prototype.done,x.then=ne.prototype.then,x._listeners)for(var A,V=[x];V.length;)(A=V.shift())._state._notify(A,V);x._setState(K)},cancel:_,done:null,then:null,_completed:_,_error:_,_notify:notifySuccess,_progress:_,_setCompleteValue:_,_setErrorValue:_},K={name:"success",enter:function(x){x.done=ne.prototype.done,x.then=ne.prototype.then,x._cleanupAction()},cancel:_,done:null,then:null,_completed:_,_error:_,_notify:notifySuccess,_progress:_,_setCompleteValue:_,_setErrorValue:_},J={name:"error_notify",enter:function(x){if(x.done=te.prototype.done,x.then=te.prototype.then,x._listeners)for(var A,V=[x];V.length;)(A=V.shift())._state._notify(A,V);x._setState(X)},cancel:_,done:null,then:null,_completed:_,_error:_,_notify:notifyError,_progress:_,_setCompleteValue:_,_setErrorValue:_},X={name:"error",enter:function(x){x.done=te.prototype.done,x.then=te.prototype.then,x._cleanupAction()},cancel:_,done:null,then:null,_completed:_,_error:_,_notify:notifyError,_progress:_,_setCompleteValue:_,_setErrorValue:_};var $=V.Class.define(null,{_listeners:null,_nextState:null,_state:null,_value:null,cancel:function(){this._state.cancel(this),this._run()},done:function Promise_done(x,A,V){this._state.done(this,x,A,V)},then:function Promise_then(x,A,V){return this._state.then(this,x,A,V)},_chainedError:function(x,A){var V=this._state._error(this,x,detailsForChainedError,A);return this._run(),V},_completed:function(x){var A=this._state._completed(this,x);return this._run(),A},_error:function(x){var A=this._state._error(this,x,detailsForError);return this._run(),A},_progress:function(x){this._state._progress(this,x)},_setState:function(x){this._nextState=x},_setCompleteValue:function(x){this._state._setCompleteValue(this,x),this._run()},_setChainedErrorValue:function(x,A){var V=this._state._setErrorValue(this,x,detailsForChainedError,A);return this._run(),V},_setExceptionValue:function(x){var A=this._state._setErrorValue(this,x,detailsForException);return this._run(),A},_run:function(){for(;this._nextState;)this._state=this._nextState,this._nextState=null,this._state.enter(this)}},{supportedForProcessing:!1});function completed(x,A){var V;V=A&&"object"==typeof A&&"function"==typeof A.then?z:Q,x._value=A,x._setState(V)}function createErrorDetails(x,A,V,R,D,N){return{exception:x,error:A,promise:V,handler:N,id:R,parent:D}}function detailsForHandledError(x,A,V,R){var D=V._isException;return createErrorDetails(D?A:null,D?null:A,x,V._errorId,V,R)}function detailsForChainedError(x,A,V){var R=V._isException,D=V._errorId;return setErrorInfo(x,D,R),createErrorDetails(R?A:null,R?null:A,x,D,V)}function detailsForError(x,A){var V=++Y;return setErrorInfo(x,V),createErrorDetails(null,A,x,V)}function detailsForException(x,A){var V=++Y;return setErrorInfo(x,V,!0),createErrorDetails(A,null,x,V)}function done(x,A,V,R){pushListener(x,{c:A,e:V,p:R,asyncOpID:N._traceAsyncOperationStarting("WinJS.Promise.done")})}function error(x,A,V,R){x._value=A,callonerror(x,A,V,R),x._setState(J)}function notifySuccess(A,V){var R,D,U=A._value,B=A._listeners;if(B)for(A._listeners=null,R=0,D=Array.isArray(B)?B.length:1;R<D;R++){var F=1===D?B:B[R],W=F.c,H=F.promise;if(N._traceAsyncOperationCompleted(F.asyncOpID,x.Debug&&x.Debug.MS_ASYNC_OP_STATUS_SUCCESS),H){N._traceAsyncCallbackStarting(F.asyncOpID);try{H._setCompleteValue(W?W(U):U)}catch(x){H._setExceptionValue(x)}finally{N._traceAsyncCallbackCompleted()}H._state!==z&&H._listeners&&V.push(H)}else ne.prototype.done.call(A,W)}}function notifyError(A,V){var R,D,U=A._value,B=A._listeners;if(B)for(A._listeners=null,R=0,D=Array.isArray(B)?B.length:1;R<D;R++){var F=1===D?B:B[R],W=F.e,H=F.promise,G=x.Debug&&(U&&"Canceled"===U.name?x.Debug.MS_ASYNC_OP_STATUS_CANCELED:x.Debug.MS_ASYNC_OP_STATUS_ERROR);if(N._traceAsyncOperationCompleted(F.asyncOpID,G),H){var j=!1;try{W?(N._traceAsyncCallbackStarting(F.asyncOpID),j=!0,W.handlesOnError||callonerror(H,U,detailsForHandledError,A,W),H._setCompleteValue(W(U))):H._setChainedErrorValue(U,A)}catch(x){H._setExceptionValue(x)}finally{j&&N._traceAsyncCallbackCompleted()}H._state!==z&&H._listeners&&V.push(H)}else te.prototype.done.call(A,null,W)}}function callonerror(x,A,V,R,D){if(U._listeners.error){if(A instanceof Error&&"Canceled"===A.message)return;U.dispatchEvent("error",V(x,A,R,D))}}function progress(x,A){var V,R,D=x._listeners;if(D)for(V=0,R=Array.isArray(D)?D.length:1;V<R;V++){var N=1===R?D:D[V],U=N.p;if(U)try{U(A)}catch(x){}N.c||N.e||!N.promise||N.promise._progress(A)}}function pushListener(x,A){var V=x._listeners;V?(V=Array.isArray(V)?V:[V]).push(A):V=A,x._listeners=V}function setErrorInfo(x,A,V){x._isException=V||!1,x._errorId=A}function setErrorValue(x,A,V,R){x._value=A,callonerror(x,A,V,R),x._setState(X)}function setCompleteValue(x,A){var V;V=A&&"object"==typeof A&&"function"==typeof A.then?z:K,x._value=A,x._setState(V)}function then(x,A,V,R){var D=new ee(x);return pushListener(x,{promise:D,c:A,e:V,p:R,asyncOpID:N._traceAsyncOperationStarting("WinJS.Promise.then")}),D}var Z,ee=V.Class.derive($,(function(x){B&&(!0===B||B&F.thenPromise)&&(this._stack=re._getStack()),this._creator=x,this._setState(W),this._run()}),{_creator:null,_cancelAction:function(){this._creator&&this._creator.cancel()},_cleanupAction:function(){this._creator=null}},{supportedForProcessing:!1}),te=V.Class.define((function ErrorPromise_ctor(x){B&&(!0===B||B&F.errorPromise)&&(this._stack=re._getStack()),this._value=x,callonerror(this,x,detailsForError)}),{cancel:function(){},done:function ErrorPromise_done(x,A){var V=this._value;if(A)try{A.handlesOnError||callonerror(null,V,detailsForHandledError,this,A);var R=A(V);return void(R&&"object"==typeof R&&"function"==typeof R.done&&R.done())}catch(x){V=x}V instanceof Error&&"Canceled"===V.message||re._doneHandler(V)},then:function ErrorPromise_then(x,A){if(!A)return this;var V,R=this._value;try{A.handlesOnError||callonerror(null,R,detailsForHandledError,this,A),V=new ne(A(R))}catch(x){V=x===R?this:new ie(x)}return V}},{supportedForProcessing:!1}),ie=V.Class.derive(te,(function ExceptionPromise_ctor(x){B&&(!0===B||B&F.exceptionPromise)&&(this._stack=re._getStack()),this._value=x,callonerror(this,x,detailsForException)}),{},{supportedForProcessing:!1}),ne=V.Class.define((function CompletePromise_ctor(x){if(B&&(!0===B||B&F.completePromise)&&(this._stack=re._getStack()),x&&"object"==typeof x&&"function"==typeof x.then){var A=new ee(null);return A._setCompleteValue(x),A}this._value=x}),{cancel:function(){},done:function CompletePromise_done(x){if(x)try{var A=x(this._value);A&&"object"==typeof A&&"function"==typeof A.done&&A.done()}catch(x){re._doneHandler(x)}},then:function CompletePromise_then(x){try{var A=x?x(this._value):this._value;return A===this._value?this:new ne(A)}catch(x){return new ie(x)}}},{supportedForProcessing:!1}),re=V.Class.derive($,(function Promise_ctor(x,A){B&&(!0===B||B&F.promise)&&(this._stack=re._getStack()),this._oncancel=A,this._setState(W),this._run();try{x(this._completed.bind(this),this._error.bind(this),this._progress.bind(this))}catch(x){this._setExceptionValue(x)}}),{_oncancel:null,_cancelAction:function(){if(this._oncancel)try{this._oncancel()}catch(x){}},_cleanupAction:function(){this._oncancel=null}},{addEventListener:function Promise_addEventListener(x,A,V){U.addEventListener(x,A,V)},any:function Promise_any(x){return new re((function(A,V){var R=Object.keys(x);0===R.length&&A();var D=0;R.forEach((function(N){re.as(x[N]).then((function(){A({key:N,value:x[N]})}),(function(U){U instanceof Error&&"Canceled"===U.name?++D===R.length&&A(re.cancel):V({key:N,value:x[N]})}))}))}),(function(){Object.keys(x).forEach((function(A){var V=re.as(x[A]);"function"==typeof V.cancel&&V.cancel()}))}))},as:function Promise_as(x){return x&&"object"==typeof x&&"function"==typeof x.then?x:new ne(x)},cancel:{get:function(){return Z=Z||new te(new R("Canceled"))}},dispatchEvent:function Promise_dispatchEvent(x,A){return U.dispatchEvent(x,A)},is:function Promise_is(x){return x&&"object"==typeof x&&"function"==typeof x.then},join:function Promise_join(x){return new re((function(A,V,R){var D=Object.keys(x),N=Array.isArray(x)?[]:{},U=Array.isArray(x)?[]:{},B=0,F=D.length,argDone=function(x){if(0==--F){var B=Object.keys(N).length;if(0===B)A(U);else{var W=0;D.forEach((function(x){var A=N[x];A instanceof Error&&"Canceled"===A.name&&W++})),W===B?A(re.cancel):V(N)}}else R({Key:x,Done:!0})};D.forEach((function(A){var V=x[A];void 0===V?B++:re.then(V,(function(x){U[A]=x,argDone(A)}),(function(x){N[A]=x,argDone(A)}))})),0!=(F-=B)||A(U)}),(function(){Object.keys(x).forEach((function(A){var V=re.as(x[A]);"function"==typeof V.cancel&&V.cancel()}))}))},removeEventListener:function Promise_removeEventListener(x,A,V){U.removeEventListener(x,A,V)},supportedForProcessing:!1,then:function Promise_then(x,A,V,R){return re.as(x).then(A,V,R)},thenEach:function Promise_thenEach(x,A,V,R){var D=Array.isArray(x)?[]:{};return Object.keys(x).forEach((function(N){D[N]=re.as(x[N]).then(A,V,R)})),re.join(D)},timeout:function Promise_timeout(V,R){var D=function timeout(V){var R;return new re((function(D){V?R=x.setTimeout(D,V):A._setImmediate(D)}),(function(){R&&x.clearTimeout(R)}))}(V);return R?function timeoutWithPromise(x,A){var cancelTimeout=function(){x.cancel()};return x.then((function(){A.cancel()})),A.then(cancelTimeout,cancelTimeout),A}(D,R):D},wrap:function Promise_wrap(x){return new ne(x)},wrapError:function Promise_wrapError(x){return new te(x)},_veryExpensiveTagWithStack:{get:function(){return B},set:function(x){B=x}},_veryExpensiveTagWithStack_tag:F,_getStack:function(){if(x.Debug&&x.Debug.debuggerEnabled)try{throw new Error}catch(x){return x.stack}},_cancelBlocker:function Promise__cancelBlocker(x,A){if(!re.is(x))return re.wrap(x);var V,R,D=new re((function(x,A){V=x,R=A}),(function(){V=null,R=null,A&&A()}));return x.then((function(x){V&&V(x)}),(function(x){R&&R(x)})),D}});return Object.defineProperties(re,D.createEventProperties("error")),re._doneHandler=function(x){A._setImmediate((function Promise_done_rethrow(){throw x}))},{PromiseStateMachine:$,Promise:re,state_created:W}})),define("WinJS/Promise",["./Core/_Base","./Promise/_StateMachine"],(function promiseInit(x,A){"use strict";return x.Namespace.define("WinJS",{Promise:A.Promise}),A.Promise})),define("WinJS/Core/_Log",["exports","./_Global","./_Base"],(function logInit(x,A,V){"use strict";var R=/\s+/g,D=/^(error|warn|info|log)$/,N=null;function defAction(V,R,N){var U=x.formatLog(V,R,N);A.console&&A.console[N&&D.test(N)?N:"log"](U)}function escape(x){return x.replace(/[-[\]{}()*+?.,\\^$|#]/g,"\\$&")}V.Namespace._moduleDefine(x,"WinJS.Utilities",{startLog:function(A){"string"==typeof(A=A||{})&&(A={tags:A});var V=A.type&&new RegExp("^("+escape(A.type).replace(R," ").split(" ").join("|")+")$"),D=A.excludeTags&&new RegExp("(^|\\s)("+escape(A.excludeTags).replace(R," ").split(" ").join("|")+")(\\s|$)","i"),N=A.tags&&new RegExp("(^|\\s)("+escape(A.tags).replace(R," ").split(" ").join("|")+")(\\s|$)","i"),U=A.action||defAction;if(V||D||N||x.log){var result=function(x,A,R){V&&!V.test(R)||D&&D.test(A)||N&&!N.test(A)||U(x,A,R),result.next&&result.next(x,A,R)};result.next=x.log,x.log=result}else x.log=U},stopLog:function(){x.log=null},formatLog:function format(x,A,V){var N=x;return"function"==typeof N&&(N=N()),(V&&D.test(V)?"":V?V+": ":"")+(A?A.replace(R,":")+": ":"")+N}}),V.Namespace._moduleDefine(x,"WinJS",{log:{get:function(){return N},set:function(x){N=x}}})})),define("WinJS/Scheduler",["exports","./Core/_Global","./Core/_Base","./Core/_ErrorFromName","./Core/_Log","./Core/_Resources","./Core/_Trace","./Core/_WriteProfilerMark","./Promise"],(function schedulerInit(x,A,V,R,D,N,U,B,F){"use strict";function linkedListMixin(x){var A={},V="_prev"+x,R="_next"+x;return A["_remove"+x]=function(){var x=this[V],A=this[R];A&&(A[V]=x),x&&(x[R]=A),this[V]=null,this[R]=null},A["_insert"+x+"Before"]=function(x){var A=this[V];return A&&(A[R]=x),x[R]=this,x[V]=A,this[V]=x,x},A["_insert"+x+"After"]=function(x){var A=this[R];return this[R]=x,x[R]=A,x[V]=this,A&&(A[V]=x),x},A}V.Namespace.define("WinJS.Utilities",{_linkedListMixin:linkedListMixin});var W={get jobInfoIsNoLongerValid(){return"The job info object can only be used while the job is running"}};function jobProfilerMark(x,A,V,R,D){x.name}var H=V.Class.define((function(x,A,V,R,D,N){this._id=x,this._work=A,this._context=R,this._name=D,this._asyncOpID=N,this._setPriority(V),this._setState(J),jobProfilerMark(this)}),{completed:{get:function(){return!!this._state.completed}},id:{get:function(){return this._id}},name:{get:function(){return this._name},set:function(x){this._name=x}},owner:{get:function(){return this._owner},set:function(x){this._owner&&this._owner._remove(this),this._owner=x,this._owner&&this._owner._add(this)}},priority:{get:function(){return this._priority},set:function(x){x=clampPriority(x),this._state.setPriority(this,x)}},cancel:function(){this._state.cancel(this)},pause:function(){this._state.pause(this)},resume:function(){this._state.resume(this)},_execute:function(x){this._state.execute(this,x)},_executeDone:function(x){return this._state.executeDone(this,x)},_blockedDone:function(x){return this._state.blockedDone(this,x)},_setPriority:function(x){+this._priority===this._priority&&this._priority!==x&&jobProfilerMark(this,0,0,markerFromPriority(this._priority).name,markerFromPriority(x).name),this._priority=x},_setState:function(x,A,V){this._state&&D.log&&D.log("Transitioning job ("+this.id+") from: "+this._state.name+" to: "+x.name,"winjs scheduler","log"),this._state=x,this._state.enter(this,A,V)}});V.Class.mix(H,linkedListMixin("Job"));var z=1,G=2,j=3,q=V.Class.define((function(x,A){this._job=A,this._result=null,this._yieldPolicy=z,this._shouldYield=x}),{job:{get:function(){return this._throwIfDisabled(),this._job}},shouldYield:{get:function(){return this._throwIfDisabled(),this._shouldYield()}},setPromise:function(x){this._throwIfDisabled(),this._result=x,this._yieldPolicy=j},setWork:function(x){this._throwIfDisabled(),this._result=x,this._yieldPolicy=G},_disablePublicApi:function(){this._publicApiDisabled=!0},_throwIfDisabled:function(){if(this._publicApiDisabled)throw new R("WinJS.Utilities.Scheduler.JobInfoIsNoLongerValid",W.jobInfoIsNoLongerValid)}}),Q=V.Class.define((function OwnerToken_ctor(){this._jobs={}}),{cancelAll:function OwnerToken_cancelAll(){var x=this._jobs,A=Object.keys(x);this._jobs={};for(var V=0,R=A.length;V<R;V++)x[A[V]].cancel()},_add:function OwnerToken_add(x){this._jobs[x.id]=x},_remove:function OwnerToken_remove(x){delete this._jobs[x.id]}});function _(){return!1}function illegal(x){throw"Illegal call by job("+x.id+") in state: "+this.name}var K=V.Class.define((function(x){this.name=x,this.enter=illegal,this.execute=illegal,this.executeDone=illegal,this.blockedDone=illegal,this.cancel=illegal,this.pause=illegal,this.resume=illegal,this.setPriority=illegal})),J=new K("created"),X=new K("scheduled"),Y=new K("paused"),$=new K("canceled"),Z=new K("running"),ee=new K("running_paused"),te=new K("running_resumed"),ie=new K("running_canceled"),ne=new K("running_canceled_blocked"),re=new K("cooperative_yield"),se=new K("cooperative_yield_paused"),oe=new K("blocked"),ae=new K("blocked_waiting"),le=new K("blocked_paused"),ce=new K("blocked_paused_waiting"),de=new K("blocked_canceled"),ue=new K("complete");function setState(x){return function(A,V,R){A._setState(x,V,R)}}function changePriority(x,A){x._setPriority(A)}J.enter=function(x){addJobAtTailOfPriority(x,x.priority),x._setState(X)},X.enter=function(){startRunning()},X.execute=setState(Z),X.cancel=setState($),X.pause=setState(Y),X.resume=_,X.setPriority=function(x,A){x.priority!==A&&(x._setPriority(A),x.pause(),x.resume())},Y.enter=function(x){jobProfilerMark(x),x._removeJob()},Y.cancel=setState($),Y.pause=_,Y.resume=function(x){jobProfilerMark(x),addJobAtTailOfPriority(x,x.priority),x._setState(X)},Y.setPriority=changePriority,$.enter=function(x){jobProfilerMark(x),U._traceAsyncOperationCompleted(x._asyncOpID,A.Debug&&A.Debug.MS_ASYNC_OP_STATUS_CANCELED),x._removeJob(),x._work=null,x._context=null,x.owner=null},$.cancel=_,$.pause=_,$.resume=_,$.setPriority=_,Z.enter=function(x,A){x._removeJob();var V=x.priority,R=x._work,D=x._context;x._work=null,x._context=null;var N=new q(A,x);U._traceAsyncCallbackStarting(x._asyncOpID);try{xe.execAtPriority((function(){R.call(D,N)}),toWwaPriority(V))}finally{U._traceAsyncCallbackCompleted(),N._disablePublicApi()}x._context=D;var B=x._executeDone(N._yieldPolicy);x._setState(B,N._result,V)},Z.executeDone=function(x,A){switch(A){case z:return ue;case G:return re;case j:return oe}},Z.cancel=function(x){ge=!0,x._setState(ie)},Z.pause=function(x){ge=!0,x._setState(ee)},Z.resume=_,Z.setPriority=changePriority,ee.enter=_,ee.executeDone=function(x,A){switch(A){case z:return ue;case G:return se;case j:return le}},ee.cancel=setState(ie),ee.pause=_,ee.resume=setState(te),ee.setPriority=changePriority,te.enter=_,te.executeDone=function(x,A){switch(A){case z:return ue;case G:return re;case j:return oe}},te.cancel=setState(ie),te.pause=setState(ee),te.resume=_,te.setPriority=changePriority,ie.enter=_,ie.executeDone=function(x,A){switch(A){case z:case G:return $;case j:return ne}},ie.cancel=_,ie.pause=_,ie.resume=_,ie.setPriority=_,ne.enter=function(x,A){A.cancel(),x._setState($)},re.enter=function(x,A,V){jobProfilerMark(x),V===x.priority?function addJobAtHeadOfPriority(x,A){var V=markerFromPriority(A);V.priority>Ee&&(Ee=V.priority,ge=!0),V._insertJobAfter(x)}(x,x.priority):addJobAtTailOfPriority(x,x.priority),x._work=A,x._setState(X)},se.enter=function(x,A){jobProfilerMark(x),x._work=A,x._setState(Y)},oe.enter=function(x,A,V){jobProfilerMark(x),x._work=A,x._setState(ae),A.done((function(A){jobProfilerMark(x);var R=x._blockedDone(A);x._setState(R,A,V)}),(function(A){return A&&"Canceled"===A.name||jobProfilerMark(x),jobProfilerMark(x),x._setState($),F.wrapError(A)}))},ae.enter=_,ae.blockedDone=function(x,A){return"function"==typeof A?re:ue},ae.cancel=setState(de),ae.pause=setState(ce),ae.resume=_,ae.setPriority=changePriority,le.enter=function(x,A,V){jobProfilerMark(x),x._work=A,x._setState(ce),A.done((function(A){jobProfilerMark(x);var R=x._blockedDone(A);x._setState(R,A,V)}),(function(A){return A&&"Canceled"===A.name||jobProfilerMark(x),jobProfilerMark(x),x._setState($),F.wrapError(A)}))},ce.enter=_,ce.blockedDone=function(x,A){return"function"==typeof A?se:ue},ce.cancel=setState(de),ce.pause=_,ce.resume=setState(ae),ce.setPriority=changePriority,de.enter=function(x){x._work.cancel(),x._work=null},de.blockedDone=function(){return $},de.cancel=_,de.pause=_,de.resume=_,de.setPriority=_,ue.completed=!0,ue.enter=function(x){U._traceAsyncOperationCompleted(x._asyncOpID,A.Debug&&A.Debug.MS_ASYNC_OP_STATUS_SUCCESS),x._work=null,x._context=null,x.owner=null,jobProfilerMark(x)},ue.cancel=_,ue.pause=_,ue.resume=_,ue.setPriority=_;var he=V.Class.define((function(x,A){this.priority=x,this.name=A}),{});V.Class.mix(he,linkedListMixin("Job"),linkedListMixin("Marker"));var pe,me,ge,ye=0,fe=0,_e={max:15,high:13,aboveNormal:9,normal:0,belowNormal:-9,idle:-13,min:-15},Ce=[new he(15,"max"),new he(14,"14"),new he(13,"high"),new he(12,"12"),new he(11,"11"),new he(10,"10"),new he(9,"aboveNormal"),new he(8,"8"),new he(7,"7"),new he(6,"6"),new he(5,"5"),new he(4,"4"),new he(3,"3"),new he(2,"2"),new he(1,"1"),new he(0,"normal"),new he(-1,"-1"),new he(-2,"-2"),new he(-3,"-3"),new he(-4,"-4"),new he(-5,"-5"),new he(-6,"-6"),new he(-7,"-7"),new he(-8,"-8"),new he(-9,"belowNormal"),new he(-10,"-10"),new he(-11,"-11"),new he(-12,"-12"),new he(-13,"idle"),new he(-14,"-14"),new he(-15,"min"),new he(-16,"<TAIL>")],be=null,ve=null,Se=!(!A.MSApp||!A.MSApp.execAtPriority),Te=[],Ee=_e.min;function currentDrainPriority(){return 0===Te.length?null:Te[0].priority}function drainStarting(x){x.name,markerFromPriority(x.priority).name}function drainStopping(x,A){A&&(x.name,markerFromPriority(x.priority).name),x.name,markerFromPriority(x.priority).name}function notifyDrainListeners(){var x,A=!1;if(Te.length)for(var V=currentDrainPriority();+V===V&&V>Ee;)me=V,x=void 0,(x=Te.shift())&&(drainStopping(x),Te[0]&&drainStarting(Te[0]),x.complete()),A=!0,V=currentDrainPriority();return A}Ce.reduce((function(x,A){return x&&(x._insertJobAfter(A),x._insertMarkerAfter(A)),A}));var we=A.setImmediate?A.setImmediate.bind(A):function(x){A.setTimeout(x,16)},Ie={execAsyncAtPriority:function(x,V){V===xe.HIGH&&A.setTimeout(x,0),we(x)},execAtPriority:function(x){return x()},getCurrentPriority:function(){return Ie.NORMAL},isTaskScheduledAtPriorityOrHigher:function(){return!1},HIGH:"high",NORMAL:"normal",IDLE:"idle"},xe=Se?A.MSApp:Ie;function toWwaPriority(x){return x>=_e.aboveNormal+1?xe.HIGH:x>=_e.belowNormal?xe.NORMAL:xe.IDLE}var Ae={};function wwaTaskScheduledAtPriorityHigherThan(x){switch(x){case xe.HIGH:return!1;case xe.NORMAL:return xe.isTaskScheduledAtPriorityOrHigher(xe.HIGH);case xe.IDLE:return xe.isTaskScheduledAtPriorityOrHigher(xe.NORMAL)}}function addJobAtTailOfPriority(x,A){var V=markerFromPriority(A);V.priority>Ee&&(Ee=V.priority,ge=!0),V._nextMarker._insertJobBefore(x)}function clampPriority(x){return x|=0,x=Math.max(x,-15),x=Math.min(x,15)}function markerFromPriority(x){return x=clampPriority(x),Ce[-1*(x-15)]}Ae[xe.IDLE]=1,Ae[xe.NORMAL]=2,Ae[xe.HIGH]=3;var Le=A.performance&&A.performance.now&&A.performance.now.bind(A.performance)||Date.now.bind(Date),Ve=0,Pe=0;function startRunning(x){+x!==x&&(x=Ee);var A=toWwaPriority(x);if(!pe&&(!be||Se&&!function isEqualOrHigherWwaPriority(x,A){return Ae[x]>=Ae[A]}(be,A))){var V=++Ve;xe.execAsyncAtPriority((function(){Pe<V&&(Pe=Ve,function run(x){var A;pe=!0;var V,R,D,N=!0,U=!1;ge=!1;try{for(var B=Le()+30,shouldYield=function(){return!1,!!ge||!!wwaTaskScheduledAtPriorityHigherThan(toWwaPriority(Ee))||!Te.length&&Le()>B&&(!0,!0)};Ee>=_e.min&&!shouldYield()&&!U;){A=!1,V=markerFromPriority(Ee)._nextJob;do{if(me=V.priority,V instanceof H)R!==V.priority&&(+R===R&&markerFromPriority(R).name,markerFromPriority(V.priority).name,R=V.priority),A=!0,N=!1,jobProfilerMark(ve=V,0,0,markerFromPriority(me).name),V._execute(shouldYield),jobProfilerMark(ve,0,0,markerFromPriority(me).name),ve=null,N=!0;else{var F=toWwaPriority(Ee);Ee=V.priority,A=notifyDrainListeners();var W=toWwaPriority(Ee);D=W,Ae[F]>Ae[D]&&(!Se||xe.isTaskScheduledAtPriorityOrHigher(W))&&(U=!0)}V=V._nextJob}while(V&&!A&&!U&&!wwaTaskScheduledAtPriorityHigherThan(toWwaPriority(Ee)));ge=!1}}finally{ve=null,N||(jobProfilerMark(V),jobProfilerMark(V,0,0,markerFromPriority(me).name),V.cancel()),+R===R&&markerFromPriority(R).name;for(var z=!1;Ee>=_e.min&&!z;){A=!1,V=markerFromPriority(Ee)._nextJob;do{V instanceof H?z=!0:(Ee=V.priority,A=notifyDrainListeners()),V=V._nextJob}while(V&&!A&&!z)}x&&(be=null),pe=!1,Ee>=_e.min&&startRunning()}}(!0))}),A),be=A}}function schedule(x,A,V,R){A=A||_e.normal,V=V||null;var D=++ye,N=U._traceAsyncOperationStarting("WinJS.Utilities.Scheduler.schedule: "+D+function profilerMarkArgs(x,A,V){return void 0!==V?"("+x+";"+A+";"+V+")":void 0!==A?"("+x+";"+A+")":void 0!==x?"("+x+")":""}(R));return new H(D,x,A,V,R=R||"",N)}function makeSchedulePromise(x){return function(A,V){var R;return new F((function(D){R=schedule((function schedulePromise(){D(A)}),x,null,V)}),(function(){R.cancel()}))}}V.Namespace._moduleDefine(x,"WinJS.Utilities.Scheduler",{Priority:_e,schedule:schedule,createOwnerToken:function createOwnerToken(){return new Q},execHigh:function execHigh(x){return xe.execAtPriority(x,xe.HIGH)},requestDrain:function requestDrain(x,A){var V,R=fe++;void 0===A&&(A="Drain Request "+R),x=clampPriority(x=+x===x?x:_e.min);var D=new F((function(R){!function addDrainListener(x,A,V){Te.push({priority:x,complete:A,name:V}),1===Te.length&&(drainStarting(Te[0]),x>Ee&&(Ee=x,ge=!0))}(x,V=R,A)}),(function(){!function removeDrainListener(x,A){var V,R=Te.length;for(V=0;V<R;V++)if(Te[V].complete===x){0===V&&(drainStopping(Te[0],A),Te[1]&&drainStarting(Te[1])),Te.splice(V,1);break}}(V,!0)}));return pe||startRunning(),D},currentPriority:{get:function getCurrentPriority(){if(pe)return me;switch(xe.getCurrentPriority()){case xe.HIGH:return _e.high;case xe.NORMAL:return _e.normal;case xe.IDLE:return _e.idle}}},schedulePromiseHigh:makeSchedulePromise(_e.high),schedulePromiseAboveNormal:makeSchedulePromise(_e.aboveNormal),schedulePromiseNormal:makeSchedulePromise(_e.normal),schedulePromiseBelowNormal:makeSchedulePromise(_e.belowNormal),schedulePromiseIdle:makeSchedulePromise(_e.idle),retrieveState:function retrieveState(){var x="";function logJob(A,V){x+="    "+(V?"*":" ")+"id: "+A.id+", priority: "+markerFromPriority(A.priority).name+(A.name?", name: "+A.name:"")+"\n"}x+="Jobs:\n";var A=markerFromPriority(Ee),V=0;for(ve&&(logJob(ve,!0),V++);A.priority>=_e.min;)A instanceof H&&(logJob(A,!1),V++),A=A._nextJob;0===V&&(x+="     None\n"),x+="Drain requests:\n";for(var R=0,D=Te.length;R<D;R++)x+="    "+(0===R?"*":" ")+"priority: "+markerFromPriority(Te[R].priority).name+", name: "+Te[R].name+"\n";return 0===Te.length&&(x+="     None\n"),x},_JobNode:H,_JobInfo:q,_OwnerToken:Q,_dumpList:function dumpList(x,A){function dumpMarker(x,A){D.log&&D.log(A+": MARKER: "+x.name,"winjs scheduler","log")}function dumpJob(x,A){D.log&&D.log(A+": JOB("+x.id+"): state: "+(x._state?x._state.name:"")+(x.name?", name: "+x.name:""),"winjs scheduler","log")}D.log&&D.log("highWaterMark: "+Ee,"winjs scheduler","log");var V=0,R=A?Ce[Ce.length-1]:Ce[0];do{R instanceof he&&dumpMarker(R,V),R instanceof H&&dumpJob(R,V),V++,R=A?R["_prev"+x]:R["_next"+x]}while(R)},_isEmpty:{get:function isEmpty(){var x=Ce[0];do{if(x instanceof H)return!1;x=x._nextJob}while(x);return!0}},_usingWwaScheduler:{get:function(){return Se},set:function(x){xe=(Se=x)?A.MSApp:Ie}},_MSApp:{get:function(){return xe},set:function(x){xe=x}},_TIME_SLICE:30})})),define("WinJS/Core/_BaseUtils",["exports","./_Global","./_Base","./_BaseCoreUtils","./_ErrorFromName","./_Resources","./_Trace","../Promise","../Scheduler"],(function baseUtilsInit(x,A,V,R,D,N,U,B,F){"use strict";var W,H={get notSupportedForProcessing(){return"Value is not supported within a declarative processing context, if you want it to be supported mark it using WinJS.Utilities.markSupportedForProcessing. The value was: '{0}'"}},z=0,G={},j=!1,q=A.navigator.platform,Q="iPhone"===q||"iPad"===q||"iPod"===q;function nop(x){return x}function getMemberFiltered(x,A,V){return x.split(".").reduce((function(x,A){return x?V(x[A]):null}),A)}function getCamelCasedName(x){return x.length>0&&0!==x.indexOf("-moz")&&"-"===x.charAt(0)&&(x=x.slice(1)),x.replace(/\-[a-z]/g,(function(x){return x[1].toUpperCase()}))}function addPrefixToCamelCasedName(x,A){return""===x?A:x+A.charAt(0).toUpperCase()+A.slice(1)}function addPrefixToCSSName(x,A){return(""!==x?"-"+x.toLowerCase()+"-":"")+A}V.Namespace._moduleDefine(x,"WinJS.Utilities",{_setHasWinRT:{value:function(x){R.hasWinRT=x},configurable:!1,writable:!1,enumerable:!1},hasWinRT:{get:function(){return R.hasWinRT},configurable:!1,enumerable:!0},_setIsiOS:{value:function(x){Q=x},configurable:!1,writable:!1,enumerable:!1},_isiOS:{get:function(){return Q},configurable:!1,enumerable:!0},_getMemberFiltered:getMemberFiltered,getMember:function getMember(x,V){return x?getMemberFiltered(x,V||A,nop):null},_browserStyleEquivalents:function getBrowserStyleEquivalents(){if(!A.document)return{};for(var x={},V=A.document.documentElement.style,R=["","webkit","ms","Moz"],D=["animation","transition","transform","animation-name","animation-duration","animation-delay","animation-timing-function","animation-iteration-count","animation-direction","animation-fill-mode","grid-column","grid-columns","grid-column-span","grid-row","grid-rows","grid-row-span","transform-origin","transition-property","transition-duration","transition-delay","transition-timing-function","scroll-snap-points-x","scroll-snap-points-y","scroll-chaining","scroll-limit","scroll-limit-x-max","scroll-limit-x-min","scroll-limit-y-max","scroll-limit-y-min","scroll-snap-type","scroll-snap-x","scroll-snap-y","touch-action","overflow-style","user-select"],N={},U=0,B=D.length;U<B;U++)for(var F=D[U],W=getCamelCasedName(F),H=0,z=R.length;H<z;H++){var G=R[H],j=addPrefixToCamelCasedName(G,W);if(j in V){var q=addPrefixToCSSName(G,F);x[F]={cssName:q,scriptName:j},N[F]=G;break}}return x.animationPrefix=addPrefixToCSSName(N.animation,""),x.keyframes=addPrefixToCSSName(N.animation,"keyframes"),x}(),_browserEventEquivalents:function getBrowserEventEquivalents(){for(var x={},V=["","WebKit"],R=[{eventObject:"TransitionEvent",events:["transitionStart","transitionEnd"]},{eventObject:"AnimationEvent",events:["animationStart","animationEnd"]}],D=0,N=R.length;D<N;D++){for(var U=R[D],B="",F=0,W=V.length;F<W;F++){var H=V[F];if(H+U.eventObject in A){B=H.toLowerCase();break}}F=0;for(var z=U.events.length;F<z;F++){var G=U.events[F];x[G]=addPrefixToCamelCasedName(B,G),""===B&&(x[G]=x[G].toLowerCase())}}return x.manipulationStateChanged="MSManipulationEvent"in A?"ManipulationEvent":null,x}(),_getCamelCasedName:getCamelCasedName,ready:function ready(x,V){return new B((function(R,D){function complete(){if(x)try{x(),R()}catch(x){D(x)}else R()}var N=ready._testReadyState;N||(N=A.document?A.document.readyState:"complete"),"complete"===N||A.document&&null!==A.document.body?V?F.schedule((function WinJS_Utilities_ready(){complete()}),F.Priority.normal,null,"WinJS.Utilities.ready"):complete():A.addEventListener("DOMContentLoaded",complete,!1)}))},strictProcessing:{get:function(){return!0},configurable:!1,enumerable:!0},markSupportedForProcessing:{value:R.markSupportedForProcessing,configurable:!1,writable:!1,enumerable:!0},requireSupportedForProcessing:{value:function(x){var V=!0;switch(V=(V=(V=(V=V&&x!==A)&&x!==A.location)&&!(x instanceof A.HTMLIFrameElement))&&!("function"==typeof x&&!x.supportedForProcessing),A.frames.length){case 0:break;case 1:V=V&&x!==A.frames[0];break;default:for(var R=0,U=A.frames.length;V&&R<U;R++)V=V&&x!==A.frames[R]}if(V)return x;throw new D("WinJS.Utilities.requireSupportedForProcessing",N._formatString(H.notSupportedForProcessing,x))},configurable:!1,writable:!1,enumerable:!0},_setImmediate:R._setImmediate,_requestAnimationFrame:A.requestAnimationFrame?A.requestAnimationFrame.bind(A):function(x){var V=++z;return G[V]=x,W=W||A.setTimeout((function(){var x=G,A=Date.now();G={},W=null,Object.keys(x).forEach((function(V){x[V](A)}))}),16),V},_cancelAnimationFrame:A.cancelAnimationFrame?A.cancelAnimationFrame.bind(A):function(x){delete G[x]},_yieldForEvents:A.setImmediate?A.setImmediate.bind(A):function(x){A.setTimeout(x,0)},_yieldForDomModification:A.setImmediate?A.setImmediate.bind(A):function(x){A.setTimeout(x,0)},_throttledFunction:function throttledFunction(x,A){var V=null,R=null,D=null,N=null;function makeThrottlePromise(){return B.timeout(x).then((function(){V=null}))}return function(){R?(D=this,N=[].slice.call(arguments,0)):V?(D=this,N=[].slice.call(arguments,0),R=V.then((function(){var x=D;D=null;var U=N;N=null,V=makeThrottlePromise(),R=null,A.apply(x,U)}))):(V=makeThrottlePromise(),A.apply(this,arguments))}},_shallowCopy:function _shallowCopy(x){return this._mergeAll([x])},_merge:function _merge(x,A){return this._mergeAll([x,A])},_mergeAll:function _mergeAll(x){var A={};return x.forEach((function(x){Object.keys(x).forEach((function(V){A[V]=x[V]}))})),A},_getProfilerMarkIdentifier:function _getProfilerMarkIdentifier(x){var A="";return x.id&&(A+=" id='"+x.id+"'"),x.className&&(A+=" class='"+x.className+"'"),A},_now:function _now(){return A.performance&&A.performance.now&&A.performance.now()||Date.now()},_traceAsyncOperationStarting:U._traceAsyncOperationStarting,_traceAsyncOperationCompleted:U._traceAsyncOperationCompleted,_traceAsyncCallbackStarting:U._traceAsyncCallbackStarting,_traceAsyncCallbackCompleted:U._traceAsyncCallbackCompleted,_version:"4.4.4"}),V.Namespace._moduleDefine(x,"WinJS",{validation:{get:function(){return j},set:function(x){j=x}}}),V.Namespace.define("WinJS",{strictProcessing:{value:function(){},configurable:!1,writable:!1,enumerable:!1}})})),define("WinJS/Core",["./Core/_Base","./Core/_BaseCoreUtils","./Core/_BaseUtils","./Core/_ErrorFromName","./Core/_Events","./Core/_Global","./Core/_Log","./Core/_Resources","./Core/_Trace","./Core/_WinRT","./Core/_WriteProfilerMark"],(function(){})),define("WinJS/_Signal",["./Core/_Base","./Promise/_StateMachine"],(function signalInit(x,A){"use strict";var V=x.Class.derive(A.PromiseStateMachine,(function(x){this._oncancel=x,this._setState(A.state_created),this._run()}),{_cancelAction:function(){this._oncancel&&this._oncancel()},_cleanupAction:function(){this._oncancel=null}},{supportedForProcessing:!1}),R=x.Class.define((function Signal_ctor(x){this._promise=new V(x)}),{promise:{get:function(){return this._promise}},cancel:function Signal_cancel(){this._promise.cancel()},complete:function Signal_complete(x){this._promise._completed(x)},error:function Signal_error(x){this._promise._error(x)},progress:function Signal_progress(x){this._promise._progress(x)}},{supportedForProcessing:!1});return x.Namespace.define("WinJS",{_Signal:R}),R})),define("WinJS/Utilities/_Control",["exports","../Core/_Global","../Core/_Base"],(function controlInit(x,A,V){"use strict";function _setOptions(x,A,V){if("object"==typeof A)for(var R=Object.keys(A),D=0,N=R.length;D<N;D++){var U=R[D],B=A[U];if(U.length>2){var F=U[0],W=U[1];if(!("o"!==F&&"O"!==F||"n"!==W&&"N"!==W)&&"function"==typeof B&&x.addEventListener){x.addEventListener(U.substr(2),B);continue}}V||(x[U]=B)}}A.document&&V.Namespace._moduleDefine(x,"WinJS.UI",{DOMEventMixin:V.Namespace._lazy((function(){return{_domElement:null,addEventListener:function(x,A,V){(this.element||this._domElement).addEventListener(x,A,V||!1)},dispatchEvent:function(x,V){var R=A.document.createEvent("Event");return R.initEvent(x,!1,!1),R.detail=V,"object"==typeof V&&Object.keys(V).forEach((function(x){R[x]=V[x]})),(this.element||this._domElement).dispatchEvent(R)},removeEventListener:function(x,A,V){(this.element||this._domElement).removeEventListener(x,A,V||!1)}}})),setOptions:function setOptions(x,A){_setOptions(x,A)},_setOptions:_setOptions})})),define("WinJS/Utilities/_ElementUtilities",["exports","../Core/_Global","../Core/_Base","../Core/_BaseUtils","../Core/_WinRT","../Promise","../Scheduler"],(function elementUtilities(x,A,V,R,D,N,U){"use strict";if(A.document){var B=null,F=/^-?\d+\.?\d*(px)?$/i,W=/^-?\d+/i,H=A.MSGestureEvent||{MSGESTURE_FLAG_BEGIN:1,MSGESTURE_FLAG_CANCEL:4,MSGESTURE_FLAG_END:2,MSGESTURE_FLAG_INERTIA:8,MSGESTURE_FLAG_NONE:0},z=A.MSManipulationEvent||{MS_MANIPULATION_STATE_ACTIVE:1,MS_MANIPULATION_STATE_CANCELLED:6,MS_MANIPULATION_STATE_COMMITTED:7,MS_MANIPULATION_STATE_DRAGGING:5,MS_MANIPULATION_STATE_INERTIA:2,MS_MANIPULATION_STATE_PRESELECT:3,MS_MANIPULATION_STATE_SELECTING:4,MS_MANIPULATION_STATE_STOPPED:0},G=A.MSPointerEvent||{MSPOINTER_TYPE_TOUCH:"touch",MSPOINTER_TYPE_PEN:"pen",MSPOINTER_TYPE_MOUSE:"mouse"},j="onfocusin"in A.document.documentElement,q=null;A.addEventListener(j?"focusout":"blur",(function(x){x.target===A&&(q&&bubbleEvent(q,"focusout",prepareFocusEvent({type:"focusout",target:q,relatedTarget:null})),q=null)})),A.document.documentElement.addEventListener(j?"focusin":"focus",(function(x){var A=q;q=x.target,A&&bubbleEvent(A,"focusout",prepareFocusEvent({type:"focusout",target:A,relatedTarget:q})),q&&bubbleEvent(q,"focusin",prepareFocusEvent({type:"focusin",target:q,relatedTarget:A}))}),!0);var PointerEventProxy=function(x,A){A=A||{},this.__eventObject=x;var V=this;Object.keys(A).forEach((function(x){Object.defineProperty(V,x,{value:A[x]})}))};["altKey","AT_TARGET","bubbles","BUBBLING_PHASE","button","buttons","cancelable","cancelBubble","CAPTURING_PHASE","clientX","clientY","ctrlKey","currentTarget","defaultPrevented","detail","eventPhase","fromElement","getModifierState","height","hwTimestamp","initEvent","initMouseEvent","initPointerEvent","initUIEvent","isPrimary","isTrusted","layerX","layerY","metaKey","offsetX","offsetY","pageX","pageY","pointerId","pointerType","pressure","preventDefault","relatedTarget","rotation","screenX","screenY","shiftKey","srcElement","stopImmediatePropagation","stopPropagation","target","tiltX","tiltY","timeStamp","toElement","type","view","which","width","x","y","_normalizedType","_fakedBySemanticZoom"].forEach((function(x){Object.defineProperty(PointerEventProxy.prototype,x,{get:function(){var A=this.__eventObject[x];return"function"==typeof A?A.bind(this.__eventObject):A},configurable:!0})}));var Q={pointerdown:{touch:"touchstart",mspointer:"MSPointerDown",mouse:"mousedown"},pointerup:{touch:"touchend",mspointer:"MSPointerUp",mouse:"mouseup"},pointermove:{touch:"touchmove",mspointer:"MSPointerMove",mouse:"mousemove"},pointerenter:{touch:"touchenter",mspointer:"MSPointerEnter",mouse:"mouseenter"},pointerover:{touch:null,mspointer:"MSPointerOver",mouse:"mouseover"},pointerout:{touch:"touchleave",mspointer:"MSPointerOut",mouse:"mouseout"},pointercancel:{touch:"touchcancel",mspointer:"MSPointerCancel",mouse:null}},K={focusout:{register:registerBubbleListener,unregister:removeListenerFromEventMap},focusin:{register:registerBubbleListener,unregister:removeListenerFromEventMap}};if(!A.PointerEvent){var J={register:function registerPointerEvent(x,V,R,D){var N,U,B,F,W=V.toLowerCase(),H=Q[W];A.MSPointerEvent?(B=function(x){return x._normalizedType=W,F=!0,function mspointerEventTranslator(x,A){return x(A)}(R,x)},x.addEventListener(H.mspointer,B,D)):(H.mouse&&(N=function(x){if(x._normalizedType=W,!F)return function mouseEventTranslator(x,A){return A.pointerType=G.MSPOINTER_TYPE_MOUSE,A.pointerId=-1,A.isPrimary=!0,x(A)}(R,x);F=!1},x.addEventListener(H.mouse,N,D)),H.touch&&(U=function(x){return x._normalizedType=W,F=!0,function touchEventTranslator(x,A){var V=A.changedTouches,R=null;if(!V)return R;for(var D=0,N=V.length;D<N;D++){var U=V[D],B=x(new PointerEventProxy(A,{pointerType:G.MSPOINTER_TYPE_TOUCH,pointerId:U.identifier,isPrimary:0===D,screenX:U.screenX,screenY:U.screenY,clientX:U.clientX,clientY:U.clientY,pageX:U.pageX,pageY:U.pageY,radiusX:U.radiusX,radiusY:U.radiusY,rotationAngle:U.rotationAngle,force:U.force,_currentTouch:U,stopPropagation:function(x){}}));R=R||B}return R}(R,x)},x.addEventListener(H.touch,U,D))),addListenerToEventMap(x,V,R,D,{mouseWrapper:N,touchWrapper:U,mspointerWrapper:B})},unregister:function unregisterPointerEvent(x,A,V,R){var D=A.toLowerCase(),N=removeListenerFromEventMap(x,A,V,R);if(N){var U=Q[D];N.data.mouseWrapper&&x.removeEventListener(U.mouse,N.data.mouseWrapper,R),N.data.touchWrapper&&x.removeEventListener(U.touch,N.data.touchWrapper,R),N.data.mspointerWrapper&&x.removeEventListener(U.mspointer,N.data.mspointerWrapper,R)}}};K.pointerdown=J,K.pointerup=J,K.pointermove=J,K.pointerenter=J,K.pointerover=J,K.pointerout=J,K.pointercancel=J}var X=V.Class.define((function MutationObserverShim_ctor(x){this._callback=x,this._toDispose=[],this._attributeFilter=[],this._scheduled=!1,this._pendingChanges=[],this._observerCount=0,this._handleCallback=this._handleCallback.bind(this),this._targetElements=[]}),{observe:function MutationObserverShim_observe(x,A){-1===this._targetElements.indexOf(x)&&this._targetElements.push(x),this._observerCount++,A.attributes&&this._addRemovableListener(x,"DOMAttrModified",this._handleCallback),A.attributeFilter&&(this._attributeFilter=A.attributeFilter)},disconnect:function MutationObserverShim_disconnect(){this._observerCount=0,this._targetElements=[],this._toDispose.forEach((function(x){x()}))},_addRemovableListener:function MutationObserverShim_addRemovableListener(x,A,V){x.addEventListener(A,V),this._toDispose.push((function(){x.removeEventListener(A,V)}))},_handleCallback:function MutationObserverShim_handleCallback(x){x.stopPropagation();var A=x.attrName;if((!this._attributeFilter.length||-1!==this._attributeFilter.indexOf(A))&&-1!==this._targetElements.indexOf(x.target)){var V=A.indexOf("aria")>=0;"tabindex"===A&&(A="tabIndex"),this._pendingChanges.push({type:"attributes",target:x.target,attributeName:A}),1!==this._observerCount||V?!1===this._scheduled&&(this._scheduled=!0,R._setImmediate(this._dispatchEvent.bind(this))):this._dispatchEvent()}},_dispatchEvent:function MutationObserverShim_dispatchEvent(){try{this._callback(this._pendingChanges)}finally{this._pendingChanges=[],this._scheduled=!1}}},{_isShim:!0}),Y=A.MutationObserver||X,$=null,Z=V.Class.define((function ElementResizer_ctor(){A.addEventListener("resize",this._handleResize.bind(this))}),{subscribe:function ElementResizer_subscribe(x,A){x.addEventListener(this._resizeEvent,A),addClass(x,this._resizeClass)},unsubscribe:function ElementResizer_unsubscribe(x,A){removeClass(x,this._resizeClass),x.removeEventListener(this._resizeEvent,A)},_handleResize:function ElementResizer_handleResize(){for(var x=A.document.querySelectorAll("."+this._resizeClass),V=x.length,R=0;R<V;R++){var D=A.document.createEvent("Event");D.initEvent(this._resizeEvent,!1,!0),x[R].dispatchEvent(D)}},_resizeClass:{get:function(){return"win-element-resize"}},_resizeEvent:{get:function(){return"WinJSElementResize"}}}),ee=V.Class.define((function GenericListener_ctor(x,A,V){V=V||{},this.registerThruWinJSCustomEvents=!!V.registerThruWinJSCustomEvents,this.objectName=x,this.object=A,this.capture={},this.bubble={}}),{addEventListener:function GenericListener_addEventListener(A,V,R,D){V=V.toLowerCase();var N=this._getHandlers(D),U=N[V];U||((U=this._getListener(V,D)).refCount=0,N[V]=U,this.registerThruWinJSCustomEvents?x._addEventListener(this.object,V,U,D):this.object.addEventListener(V,U,D)),U.refCount++,A.addEventListener(this._getEventName(V,D),R),addClass(A,this._getClassName(V,D))},removeEventListener:function GenericListener_removeEventListener(A,V,R,D){V=V.toLowerCase();var N=this._getHandlers(D),U=N[V];U&&(U.refCount--,0===U.refCount&&(this.registerThruWinJSCustomEvents?x._removeEventListener(this.object,V,U,D):this.object.removeEventListener(V,U,D),delete N[V])),removeClass(A,this._getClassName(V,D)),A.removeEventListener(this._getEventName(V,D),R)},_getHandlers:function GenericListener_getHandlers(x){return x?this.capture:this.bubble},_getClassName:function GenericListener_getClassName(x,A){var V=A?"capture":"bubble";return"win-"+this.objectName.toLowerCase()+"-event-"+x+V},_getEventName:function GenericListener_getEventName(x,A){var V=A?"capture":"bubble";return"WinJS"+this.objectName+"Event-"+x+V},_getListener:function GenericListener_getListener(x,V){return function GenericListener_generatedListener(R){for(var D=A.document.querySelectorAll("."+this._getClassName(x,V)),N=D.length,U=!1,B=0;B<N;B++){var F=A.document.createEvent("Event");F.initEvent(this._getEventName(x,V),!1,!0),F.detail={originalEvent:R};var W=D[B].dispatchEvent(F);U=U||!W}return U}.bind(this)}}),te=!1,ie=!1,ne=!1,re=A.navigator.msManipulationViewsEnabled||A.navigator.userAgent.indexOf("MSAppHost")>=0,se=!(!A.MSPointerEvent&&!A.TouchEvent),oe=0,ae=".win-selectionborder, .win-selectionbackground, .win-selectioncheckmark, .win-selectioncheckmarkbackground";V.Namespace._moduleDefine(x,"WinJS.Utilities",{_dataKey:"_msDataKey",_supportsSnapPoints:{get:function(){return re}},_supportsTouchDetection:{get:function(){return se}},_uniqueID:uniqueID,_ensureId:function ensureId(x){x.id||(x.id=uniqueID(x))},_clamp:_clamp,_getCursorPos:function _getCursorPos(x){var V=A.document.documentElement,R=getScrollPosition(V);return{left:x.clientX+("rtl"===A.document.body.dir?-R.scrollLeft:R.scrollLeft),top:x.clientY+V.scrollTop}},_getElementsByClasses:function _getElementsByClasses(x,A){for(var V=[],R=0,D=A.length;R<D;R++){var N=x.querySelector("."+A[R]);N&&V.push(N)}return V},_createGestureRecognizer:function(){if(A.MSGesture)return new A.MSGesture;var doNothing=function(){};return{addEventListener:doNothing,removeEventListener:doNothing,addPointer:doNothing,stop:doNothing}},_MSGestureEvent:H,_MSManipulationEvent:z,_elementsFromPoint:function(x,V){if(A.document.msElementsFromPoint)return A.document.msElementsFromPoint(x,V);var R=A.document.elementFromPoint(x,V);return R?[R]:null},_matchesSelector:function _matchesSelector(x,A){return(x.matches||x.msMatchesSelector||x.mozMatchesSelector||x.webkitMatchesSelector).call(x,A)},_selectionPartsSelector:ae,_isSelectionRendered:function _isSelectionRendered(x){return x.querySelectorAll(ae).length>0},_addEventListener:function _addEventListener(x,A,V,D){var N=A&&A.toLowerCase(),U=K[N],B=R._browserEventEquivalents[A];U?U.register(x,A,V,D):B?x.addEventListener(B,V,D):x.addEventListener(A,V,D)},_removeEventListener:function _removeEventListener(x,A,V,D){var N=A&&A.toLowerCase(),U=K[N],B=R._browserEventEquivalents[A];U?U.unregister(x,A,V,D):B?x.removeEventListener(B,V,D):x.removeEventListener(A,V,D)},_initEventImpl:function(x,V,R){R=R.toLowerCase();var D=Q[R];if(D)switch(x.toLowerCase()){case"pointer":A.PointerEvent||(arguments[2]=D.mspointer);break;default:arguments[2]=D[x.toLowerCase()]}V["init"+x+"Event"].apply(V,Array.prototype.slice.call(arguments,2))},_initMouseEvent:function(x){this._initEventImpl.apply(this,["Mouse",x].concat(Array.prototype.slice.call(arguments,1)))},_initPointerEvent:function(x){this._initEventImpl.apply(this,["Pointer",x].concat(Array.prototype.slice.call(arguments,1)))},_PointerEventProxy:PointerEventProxy,_bubbleEvent:bubbleEvent,_setPointerCapture:function(x,A){x.setPointerCapture&&x.setPointerCapture(A)},_releasePointerCapture:function(x,A){x.releasePointerCapture&&x.releasePointerCapture(A)},_MSPointerEvent:G,_getComputedStyle:_getComputedStyle,_zoomToDuration:167,_zoomTo:function _zoomTo(x,A){this._supportsSnapPoints&&x.msZoomTo?x.msZoomTo(A):U.schedule((function(){var V=getAdjustedScrollPosition(x),D="number"==typeof x._zoomToDestX?x._zoomToDestX:V.scrollLeft,N="number"==typeof x._zoomToDestY?x._zoomToDestY:V.scrollTop,U=_getComputedStyle(x),B=x.scrollWidth-parseInt(U.width,10)-parseInt(U.paddingLeft,10)-parseInt(U.paddingRight,10),F=x.scrollHeight-parseInt(U.height,10)-parseInt(U.paddingTop,10)-parseInt(U.paddingBottom,10);"number"!=typeof A.contentX&&(A.contentX=D),"number"!=typeof A.contentY&&(A.contentY=N);var W=_clamp(A.contentX,0,B),H=_clamp(A.contentY,0,F);if(W!==D||H!==N){x._zoomToId=x._zoomToId||0,x._zoomToId++,x._zoomToDestX=W,x._zoomToDestY=H;var z=x._zoomToId,G=R._now(),j=(x._zoomToDestX-V.scrollLeft)/167,q=(x._zoomToDestY-V.scrollTop)/167,update=function(){var A=R._now()-G;x._zoomToId===z&&(A>167?(setAdjustedScrollPosition(x,x._zoomToDestX,x._zoomToDestY),x._zoomToDestX=null,x._zoomToDestY=null):(setAdjustedScrollPosition(x,V.scrollLeft+A*j,V.scrollTop+A*q),R._requestAnimationFrame(update)))};R._requestAnimationFrame(update)}}),U.Priority.high,null,"WinJS.Utilities._zoomTo")},_setActive:function _setActive(x,V){var R=!0;try{var D,N;A.HTMLElement&&A.HTMLElement.prototype.setActive?x.setActive():(V&&(D=V.scrollLeft,N=V.scrollTop),x.focus(),V&&(V.scrollLeft=D,V.scrollTop=N))}catch(x){R=!1}return R},_MutationObserver:Y,_resizeNotifier:{get:function(){return $||($=new Z),$}},_GenericListener:ee,_globalListener:new ee("Global",A,{registerThruWinJSCustomEvents:!0}),_documentElementListener:new ee("DocumentElement",A.document.documentElement,{registerThruWinJSCustomEvents:!0}),_inputPaneListener:D.Windows.UI.ViewManagement.InputPane?new ee("InputPane",D.Windows.UI.ViewManagement.InputPane.getForCurrentView()):{addEventListener:function(){},removeEventListener:function(){}},_addInsertedNotifier:function(V){var D=A.document.createElement("div");return D.style[R._browserStyleEquivalents["animation-name"].scriptName]="WinJS-node-inserted",D.style[R._browserStyleEquivalents["animation-duration"].scriptName]="0.01s",D.style.position="absolute",V.appendChild(D),x._addEventListener(D,"animationStart",(function(x){"WinJS-node-inserted"===x.animationName&&((x=A.document.createEvent("Event")).initEvent("WinJSNodeInserted",!1,!0),V.dispatchEvent(x))}),!1),D},_inDom:function Utilities_inDom(V){return new N((function(R){if(A.document.body.contains(V))R();else{var nodeInsertedHandler=function(){V.removeEventListener("WinJSNodeInserted",nodeInsertedHandler,!1),R()};x._addInsertedNotifier(V),V.addEventListener("WinJSNodeInserted",nodeInsertedHandler,!1)}}))},_setFlexStyle:function(x,A){var V=x.style;void 0!==A.grow&&(V.msFlexPositive=A.grow,V.webkitFlexGrow=A.grow,V.flexGrow=A.grow),void 0!==A.shrink&&(V.msFlexNegative=A.shrink,V.webkitFlexShrink=A.shrink,V.flexShrink=A.shrink),void 0!==A.basis&&(V.msFlexPreferredSize=A.basis,V.webkitFlexBasis=A.basis,V.flexBasis=A.basis)},Key:{backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,pause:19,capsLock:20,escape:27,space:32,pageUp:33,pageDown:34,end:35,home:36,leftArrow:37,upArrow:38,rightArrow:39,downArrow:40,insert:45,deleteKey:46,num0:48,num1:49,num2:50,num3:51,num4:52,num5:53,num6:54,num7:55,num8:56,num9:57,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,leftWindows:91,rightWindows:92,menu:93,numPad0:96,numPad1:97,numPad2:98,numPad3:99,numPad4:100,numPad5:101,numPad6:102,numPad7:103,numPad8:104,numPad9:105,multiply:106,add:107,subtract:109,decimalPoint:110,divide:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NavigationView:136,NavigationMenu:137,NavigationUp:138,NavigationDown:139,NavigationLeft:140,NavigationRight:141,NavigationAccept:142,NavigationCancel:143,numLock:144,scrollLock:145,browserBack:166,browserForward:167,semicolon:186,equal:187,comma:188,dash:189,period:190,forwardSlash:191,graveAccent:192,GamepadA:195,GamepadB:196,GamepadX:197,GamepadY:198,GamepadRightShoulder:199,GamepadLeftShoulder:200,GamepadLeftTrigger:201,GamepadRightTrigger:202,GamepadDPadUp:203,GamepadDPadDown:204,GamepadDPadLeft:205,GamepadDPadRight:206,GamepadMenu:207,GamepadView:208,GamepadLeftThumbstick:209,GamepadRightThumbstick:210,GamepadLeftThumbstickUp:211,GamepadLeftThumbstickDown:212,GamepadLeftThumbstickRight:213,GamepadLeftThumbstickLeft:214,GamepadRightThumbstickUp:215,GamepadRightThumbstickDown:216,GamepadRightThumbstickRight:217,GamepadRightThumbstickLeft:218,openBracket:219,backSlash:220,closeBracket:221,singleQuote:222,IME:229},data:function(x){return x._msDataKey||(x._msDataKey={}),x._msDataKey},hasClass:function(x,A){if(!x)return!1;if(x.classList)return x.classList.contains(A);for(var V=getClassName(x).trim().split(" "),R=V.length,D=0;D<R;D++)if(V[D]===A)return!0;return!1},addClass:addClass,removeClass:removeClass,toggleClass:function toggleClass(x,A){if(x.classList)return x.classList.toggle(A),x;for(var V=getClassName(x),R=V.trim().split(" "),D=R.length,N=!1,U=0;U<D;U++)R[U]===A&&(N=!0);return N?setClassName(x,R.reduce((function(x,V){return V===A?x:x&&x.length>0?x+" "+V:V}),"")):D>0&&R[0].length>0?setClassName(x,V+" "+A):setClassName(x,V+A),x},_setAttribute:function setAttribute(x,A,V){x.getAttribute(A)!==""+V&&x.setAttribute(A,V)},getRelativeLeft:function(A,V){if(!A)return 0;var R=x._getPositionRelativeTo(A,null),D=x._getPositionRelativeTo(V,null);return R.left-D.left},getRelativeTop:function(A,V){if(!A)return 0;var R=x._getPositionRelativeTo(A,null),D=x._getPositionRelativeTo(V,null);return R.top-D.top},getScrollPosition:getScrollPosition,setScrollPosition:function setScrollPosition(x,A){setAdjustedScrollPosition(x,(A=A||{}).scrollLeft,A.scrollTop)},empty:function(x){if(x.childNodes&&x.childNodes.length>0)for(var A=x.childNodes.length-1;A>=0;A--)x.removeChild(x.childNodes.item(A));return x},_isDOMElement:function(x){return x&&"object"==typeof x&&"string"==typeof x.tagName},getContentWidth:function(x){var A=getDimension(x,"borderLeftWidth")+getDimension(x,"borderRightWidth"),V=getDimension(x,"paddingLeft")+getDimension(x,"paddingRight");return x.offsetWidth-A-V},_getPreciseContentWidth:function(x){var A=_getPreciseDimension(x,"borderLeftWidth")+_getPreciseDimension(x,"borderRightWidth"),V=_getPreciseDimension(x,"paddingLeft")+_getPreciseDimension(x,"paddingRight");return x.offsetWidth-A-V},getTotalWidth:function(x){var A=getDimension(x,"marginLeft")+getDimension(x,"marginRight");return x.offsetWidth+A},_getPreciseTotalWidth:function(x){var A=_getPreciseDimension(x,"marginLeft")+_getPreciseDimension(x,"marginRight");return x.offsetWidth+A},getContentHeight:function(x){var A=getDimension(x,"borderTopWidth")+getDimension(x,"borderBottomWidth"),V=getDimension(x,"paddingTop")+getDimension(x,"paddingBottom");return x.offsetHeight-A-V},_getPreciseContentHeight:function(x){var A=_getPreciseDimension(x,"borderTopWidth")+_getPreciseDimension(x,"borderBottomWidth"),V=_getPreciseDimension(x,"paddingTop")+_getPreciseDimension(x,"paddingBottom");return x.offsetHeight-A-V},getTotalHeight:function(x){var A=getDimension(x,"marginTop")+getDimension(x,"marginBottom");return x.offsetHeight+A},_getPreciseTotalHeight:function(x){var A=_getPreciseDimension(x,"marginTop")+_getPreciseDimension(x,"marginBottom");return x.offsetHeight+A},getPosition:function(A){return x._getPositionRelativeTo(A,null)},getTabIndex:function(x){if(x.disabled)return-1;var A=x.getAttribute("tabindex");if(null==A){var V=x.tagName;return/BUTTON|COMMAND|MENUITEM|OBJECT|SELECT|TEXTAREA/.test(V)||x.href&&("A"===V||"AREA"===V||"LINK"===V)||"INPUT"===V&&"hidden"!==x.type||"TH"===V&&x.sorted?0:-1}return parseInt(A,10)},convertToPixels:convertToPixels,_convertToPrecisePixels:_convertToPrecisePixels,_getPreciseMargins:function _getPreciseMargins(x){var A=_getComputedStyle(x);return{top:_convertToPrecisePixels(A.marginTop),right:_convertToPrecisePixels(A.marginRight),bottom:_convertToPrecisePixels(A.marginBottom),left:_convertToPrecisePixels(A.marginLeft)}},eventWithinElement:function(x,A){var V=A.relatedTarget;return!(!V||V===x)&&x.contains(V)},_deprecated:function(x){A.console&&A.console.warn(x)},_syncRenderer:function(x,V){return V=V||"div","function"==typeof x?function(A,V){return V?(V.appendChild(x(A)),V):x(A)}:("function"==typeof x.render?R=x:x.winControl&&"function"==typeof x.winControl.render&&(R=x.winControl),function(x,D){var N=D||A.document.createElement(V);if(R.render(x,N),D)return D;var U=N.firstElementChild;if(U&&N.dispose){var B=U.dispose;U.dispose=function(){U.dispose=B,N.appendChild(U),N.dispose()}}return U});var R},_getPositionRelativeTo:function Utilities_getPositionRelativeTo(x,V){for(var R=x,D=x.offsetParent,N=x.offsetTop,U=x.offsetLeft;(x=x.parentNode)&&x!==V&&x!==A.document.body&&x!==A.document.documentElement;)N-=x.scrollTop,U-="rtl"!==_getComputedStyle(x,null).direction?x.scrollLeft:-getAdjustedScrollPosition(x).scrollLeft,x===D&&(N+=x.offsetTop,U+=x.offsetLeft,D=x.offsetParent);return{left:U,top:N,width:R.offsetWidth,height:R.offsetHeight}},_getHighAndLowTabIndices:function Utilities_getHighAndLowTabIndices(x){for(var A=x.getElementsByTagName("*"),V=0,R=0,D=!1,N=0,U=A.length;N<U;N++){var B=A[N].getAttribute("tabIndex");if(null!=B){var F=parseInt(B,10);F>0&&(F<V||0===V)&&(V=F),D||(0===F?(D=!0,R=0):F>R&&(R=F))}}return{highest:R,lowest:V}},_getLowestTabIndexInList:function Utilities_getLowestTabIndexInList(x){for(var A,V=0,R=0;R<x.length;R++)0<(A=parseInt(x[R].getAttribute("tabIndex"),10))&&(A<V||!V)&&(V=A);return V},_getHighestTabIndexInList:function Utilities_getHighestTabIndexInList(x){for(var A,V=0,R=0;R<x.length;R++){if(0===(A=parseInt(x[R].getAttribute("tabIndex"),10)))return A;V<A&&(V=A)}return V},_hasCursorKeysBehaviors:function Utilities_hasCursorKeysBehaviors(x){return"SELECT"===x.tagName||"TEXTAREA"===x.tagName||"INPUT"===x.tagName&&(""===x.type||"date"===x.type||"datetime"===x.type||"datetime-local"===x.type||"email"===x.type||"month"===x.type||"number"===x.type||"password"===x.type||"range"===x.type||"search"===x.type||"tel"===x.type||"text"===x.type||"time"===x.type||"url"===x.type||"week"===x.type)},_reparentChildren:function(x,A){for(var V=x.firstChild;V;){var R=V.nextSibling;A.appendChild(V),V=R}},_maintainFocus:function ElementUtilities_maintainFocus(V){var R=A.document.activeElement;V(),x._trySetActiveOnAnyElement(R)},_trySetActiveOnAnyElement:function Utilities_trySetActiveOnAnyElement(A,V){return x._tryFocusOnAnyElement(A,!0,V)},_tryFocusOnAnyElement:function Utilities_tryFocusOnAnyElement(V,R,D){var N=A.document.activeElement;return V===N||(R?x._setActive(V,D):V.focus(),N!==A.document.activeElement)},_trySetActive:function Utilities_trySetActive(x,A){return this._tryFocus(x,!0,A)},_tryFocus:function Utilities_tryFocus(V,R,D){var N=A.document.activeElement;return V===N||x.getTabIndex(V)>=0&&(R?x._setActive(V,D):V.focus(),N!==A.document.activeElement)},_setActiveFirstFocusableElement:function Utilities_setActiveFirstFocusableElement(x,A){return this._focusFirstFocusableElement(x,!0,A)},_focusFirstFocusableElement:function Utilities_focusFirstFocusableElement(x,A,V){for(var R,D=x.getElementsByTagName("*"),N=this._getLowestTabIndexInList(D),U=0;N;){for(R=0;R<D.length;R++)if(D[R].tabIndex===N){if(this._tryFocus(D[R],A,V))return!0}else N<D[R].tabIndex&&(D[R].tabIndex<U||0===U)&&(U=D[R].tabIndex);N=U,U=0}for(R=0;R<D.length;R++)if(this._tryFocus(D[R],A,V))return!0;return!1},_setActiveLastFocusableElement:function Utilities_setActiveLastFocusableElement(x,A){return this._focusLastFocusableElement(x,!0,A)},_focusLastFocusableElement:function Utilities_focusLastFocusableElement(x,A,V){var R,D=x.getElementsByTagName("*"),N=this._getHighestTabIndexInList(D),U=0;if(0===N){for(R=D.length-1;R>=0;R--)if(D[R].tabIndex===N){if(this._tryFocus(D[R],A,V))return!0}else U<D[R].tabIndex&&(U=D[R].tabIndex);N=U,U=0}for(;N;){for(R=D.length-1;R>=0;R--)if(D[R].tabIndex===N){if(this._tryFocus(D[R],A,V))return!0}else U<D[R].tabIndex&&D[R].tabIndex<N&&(U=D[R].tabIndex);N=U,U=0}for(R=D.length-2;R>0;R--)if(this._tryFocus(D[R],A,V))return!0;return!1}})}function _getComputedStyle(x,V){return A.getComputedStyle(x,V)||function getDefaultComputedStyle(){return B||(B={},Object.keys(A.CSS2Properties.prototype).forEach((function(x){B[x]=""}))),B}()}function removeEmpties(x){for(var A=x.length,V=A-1;V>=0;V--)x[V]||(x.splice(V,1),A--);return A}function getClassName(x){var A=x.className||"";return"string"==typeof A?A:A.baseVal||""}function setClassName(x,A){return"string"==typeof(x.className||"")?x.className=A:x.className.baseVal=A,x}function addClass(x,A){if(x.classList){if(A.indexOf(" ")<0)x.classList.add(A);else{removeEmpties(F=A.split(" "));for(var V=0,R=F.length;V<R;V++)x.classList.add(F[V])}return x}var D,N=getClassName(x),U=N.split(" "),B=removeEmpties(U);if(A.indexOf(" ")>=0){var F;for(removeEmpties(F=A.split(" ")),V=0;V<B;V++){var W=F.indexOf(U[V]);W>=0&&F.splice(W,1)}F.length>0&&(D=F.join(" "))}else{var H=!1;for(V=0;V<B;V++)if(U[V]===A){H=!0;break}H||(D=A)}return D&&(B>0&&U[0].length>0?setClassName(x,N+" "+D):setClassName(x,D)),x}function removeClass(x,A){if(x.classList){if(0===x.classList.length)return x;removeEmpties(D=A.split(" "));for(var V=0,R=D.length;V<R;V++)x.classList.remove(D[V]);return x}var D,N,U=getClassName(x);if(A.indexOf(" ")>=0)removeEmpties(D=A.split(" "));else{if(U.indexOf(A)<0)return x;D=[A]}var B=U.split(" ");for(V=removeEmpties(B)-1;V>=0;V--)D.indexOf(B[V])>=0&&(B.splice(V,1),N=!0);return N&&setClassName(x,B.join(" ")),x}function _clamp(x,A,V,R){var D=Math.max(A,Math.min(V,+x));return 0===D?0:D||Math.max(A,Math.min(V,R))}function convertToPixels(x,A){if(!F.test(A)&&W.test(A)){var V=x.style.left;return x.style.left=A,A=x.style.pixelLeft,x.style.left=V,A}return Math.round(parseFloat(A))||0}function getDimension(x,A){return convertToPixels(x,_getComputedStyle(x,null)[A])}function _convertToPrecisePixels(x){return parseFloat(x)||0}function _getPreciseDimension(x,A){return _convertToPrecisePixels(_getComputedStyle(x,null)[A])}function addListenerToEventMap(x,A,V,R,D){var N=A.toLowerCase();x._eventsMap||(x._eventsMap={}),x._eventsMap[N]||(x._eventsMap[N]=[]),x._eventsMap[N].push({listener:V,useCapture:R,data:D})}function removeListenerFromEventMap(x,A,V,R){var D=A.toLowerCase(),N=x._eventsMap&&x._eventsMap[D];if(N)for(var U=N.length-1;U>=0;U--){var B=N[U];if(B.listener===V&&!!R==!!B.useCapture)return N.splice(U,1),B}return null}function lookupListeners(x,A){var V=A.toLowerCase();return x._eventsMap&&x._eventsMap[V]&&x._eventsMap[V].slice(0)||[]}function bubbleEvent(x,A,V){for(;x;){for(var R=lookupListeners(x,A),D=0,N=R.length;D<N;D++)R[D].listener.call(x,V);x=x.parentNode}}function prepareFocusEvent(x){return(x.relatedTarget&&"IFRAME"===x.relatedTarget.tagName||x.target&&"IFRAME"===x.target.tagName)&&(x.relatedTarget=null),x}function registerBubbleListener(x,A,V,R){if(R)throw"This custom WinJS event only supports bubbling";addListenerToEventMap(x,A,V,R)}function determineRTLEnvironment(){var x=A.document.createElement("div");x.style.direction="rtl",x.innerHTML="<div style='width: 100px; height: 100px; overflow: scroll; visibility:hidden'><div style='width: 10000px; height: 100px;'></div></div>",A.document.body.appendChild(x);var V=x.firstChild;V.scrollLeft>0&&(ie=!0),V.scrollLeft+=100,0===V.scrollLeft&&(ne=!0),A.document.body.removeChild(x),te=!0}function getAdjustedScrollPosition(x){var A=_getComputedStyle(x),V=x.scrollLeft;return"rtl"===A.direction&&(te||determineRTLEnvironment(),ie&&(V=x.scrollWidth-x.clientWidth-V),V=Math.abs(V)),{scrollLeft:V,scrollTop:x.scrollTop}}function setAdjustedScrollPosition(x,A,V){void 0!==A&&("rtl"===_getComputedStyle(x).direction&&(te||determineRTLEnvironment(),ne?A=-A:ie&&(A=x.scrollWidth-x.clientWidth-A)),x.scrollLeft=A),void 0!==V&&(x.scrollTop=V)}function getScrollPosition(x){return getAdjustedScrollPosition(x)}function uniqueID(x){return x.uniqueID||x._uniqueID||(x._uniqueID="element__"+ ++oe),x.uniqueID||x._uniqueID}})),define("WinJS/Utilities/_Dispose",["exports","../Core/_Base","../Core/_WriteProfilerMark","./_ElementUtilities"],(function(x,A,V,R){"use strict";function disposeSubTree(x){if(x)for(var A=x.querySelectorAll("[data-win-control]"),V=0,R=A.length;V<R;){var D=A[V];if(D.winControl&&D.winControl.dispose)try{D.winControl.dispose(),D.parentElement&&D.parentElement.removeChild(D)}catch(x){VisiWin.Application.WarnLog.log(D.winControl.__VWCONTROL__+" WinJS.disposeSubTree: problem in dispose.")}if(D.dispose)try{D.dispose()}catch(x){}V++}}A.Namespace._moduleDefine(x,"WinJS.Utilities",{markDisposable:function markDisposable(x,A){var V=!1;(x.winControl||x).dispose=function(){V||(V=!0,disposeSubTree(x),A&&A())}},disposeSubTree:disposeSubTree,_disposeElement:function _disposeElement(x){if(x){var A=!1;x.winControl&&x.winControl.dispose&&(x.winControl.dispose(),A=!0),x.dispose&&(x.dispose(),A=!0),A||disposeSubTree(x)}}})})),define("WinJS/ControlProcessor/_OptionsLexer",["exports","../Core/_Base"],(function optionsLexerInit(exports,_Base){"use strict";_Base.Namespace._moduleDefine(exports,"WinJS.UI",{_optionsLexer:_Base.Namespace._lazy((function(){var tokenType={leftBrace:1,rightBrace:2,leftBracket:3,rightBracket:4,separator:5,colon:6,semicolon:7,comma:8,dot:9,nullLiteral:10,trueLiteral:11,falseLiteral:12,numberLiteral:13,stringLiteral:14,identifier:15,reservedWord:16,thisKeyword:17,leftParentheses:18,rightParentheses:19,eof:20,error:21},tokens={leftBrace:{type:tokenType.leftBrace,length:1},rightBrace:{type:tokenType.rightBrace,length:1},leftBracket:{type:tokenType.leftBracket,length:1},rightBracket:{type:tokenType.rightBracket,length:1},colon:{type:tokenType.colon,length:1},semicolon:{type:tokenType.semicolon,length:1},comma:{type:tokenType.comma,length:1},dot:{type:tokenType.dot,length:1},nullLiteral:{type:tokenType.nullLiteral,length:4,value:null,keyword:!0},trueLiteral:{type:tokenType.trueLiteral,length:4,value:!0,keyword:!0},falseLiteral:{type:tokenType.falseLiteral,length:5,value:!1,keyword:!0},thisKeyword:{type:tokenType.thisKeyword,length:4,value:"this",keyword:!0},leftParentheses:{type:tokenType.leftParentheses,length:1},rightParentheses:{type:tokenType.rightParentheses,length:1},eof:{type:tokenType.eof,length:0}};function reservedWord(x){return{type:tokenType.reservedWord,value:x,length:x.length,keyword:!0}}function reservedWordLookup(x){switch(x.charCodeAt(0)){case 98:switch(x){case"break":return reservedWord(x)}break;case 99:switch(x){case"case":case"catch":case"class":case"const":case"continue":return reservedWord(x)}break;case 100:switch(x){case"debugger":case"default":case"delete":case"do":return reservedWord(x)}break;case 101:switch(x){case"else":case"enum":case"export":case"extends":return reservedWord(x)}break;case 102:switch(x){case"false":return tokens.falseLiteral;case"finally":case"for":case"function":return reservedWord(x)}break;case 105:switch(x){case"if":case"import":case"in":case"instanceof":return reservedWord(x)}break;case 110:switch(x){case"null":return tokens.nullLiteral;case"new":return reservedWord(x)}break;case 114:switch(x){case"return":return reservedWord(x)}break;case 115:switch(x){case"super":case"switch":return reservedWord(x)}break;case 116:switch(x){case"true":return tokens.trueLiteral;case"this":return tokens.thisKeyword;case"throw":case"try":case"typeof":return reservedWord(x)}break;case 118:switch(x){case"var":case"void":return reservedWord(x)}break;case 119:switch(x){case"while":case"with":return reservedWord(x)}}}var lexer=function(){function isIdentifierStartCharacter(x,A,V,R){switch(x){case x>=97&&x<=122&&x:case x>=65&&x<=90&&x:case 36:case 95:return!0;case isWhitespace(x)&&x:case isLineTerminator(x)&&x:return!1;case x>127&&x:return!0;case 92:return!!(V+4<R&&117===A.charCodeAt(V)&&isHexDigit(A.charCodeAt(V+1))&&isHexDigit(A.charCodeAt(V+2))&&isHexDigit(A.charCodeAt(V+3))&&isHexDigit(A.charCodeAt(V+4)));default:return!1}}function readIdentifierPart(x,A,V){for(var R=!1;A<V;){var D=x.charCodeAt(A);switch(D){case D>=97&&D<=122&&D:case D>=65&&D<=90&&D:case 36:case 95:break;case isWhitespace(D)&&D:case isLineTerminator(D)&&D:return R?-A:A;case D>127&&D:case D>=48&&D<=57&&D:break;case 92:if(A+5<V&&117===x.charCodeAt(A+1)&&isHexDigit(x.charCodeAt(A+2))&&isHexDigit(x.charCodeAt(A+3))&&isHexDigit(x.charCodeAt(A+4))&&isHexDigit(x.charCodeAt(A+5))){A+=5,R=!0;break}return R?-A:A;default:return R?-A:A}A++}return R?-A:A}function readIdentifierToken(x,A,V){var R=A,D=!1;(A=readIdentifierPart(x,A,V))<0&&(A=-A,D=!0);var N=x.substr(R,A-R);D&&(N=""+JSON.parse('"'+N+'"'));var U=reservedWordLookup(N);return U||{type:tokenType.identifier,length:A-R,value:N}}function isHexDigit(x){switch(x){case x>=48&&x<=57&&x:case x>=97&&x<=102&&x:case x>=65&&x<=70&&x:return!0;default:return!1}}function readHexIntegerLiteral(x,A,V){for(;A<V&&isHexDigit(x.charCodeAt(A));)A++;return A}function isDecimalDigit(x){switch(x){case x>=48&&x<=57&&x:return!0;default:return!1}}function readDecimalDigits(x,A,V){for(;A<V&&isDecimalDigit(x.charCodeAt(A));)A++;return A}function readDecimalLiteral(x,A,V){if((A=readDecimalDigits(x,A,V))<V&&46===x.charCodeAt(A)&&A+1<V&&isDecimalDigit(x.charCodeAt(A+1))&&(A=readDecimalDigits(x,A+2,V)),A<V){var R=x.charCodeAt(A);if(101===R||69===R){var D=A+1;D<V&&(43!==(R=x.charCodeAt(D))&&45!==R||D++,A=readDecimalDigits(x,D,V))}}return A}function readDecimalLiteralToken(x,A,V,R){var D=(V=readDecimalLiteral(x,V,R))-A;return{type:tokenType.numberLiteral,length:D,value:+x.substr(A,D)}}function isLineTerminator(x){switch(x){case 10:case 13:case 8232:case 8233:return!0;default:return!1}}function readStringLiteralToken(text,offset,limit){var startOffset=offset,quoteCharCode=text.charCodeAt(offset),hasEscape=!1;for(offset++;offset<limit&&!isLineTerminator(text.charCodeAt(offset));){if(offset+1<limit&&92===text.charCodeAt(offset))switch(hasEscape=!0,text.charCodeAt(offset+1)){case quoteCharCode:case 92:case 10:case 8232:case 8233:offset+=2;continue;case 13:offset+2<limit&&10===text.charCodeAt(offset+2)?offset+=3:offset+=2;continue}if(offset++,text.charCodeAt(offset-1)===quoteCharCode)break}var length=offset-startOffset,stringValue;return hasEscape=hasEscape||1===length||text.charCodeAt(offset-1)!==quoteCharCode,stringValue=hasEscape?eval(text.substr(startOffset,length)):text.substr(startOffset+1,length-2),{type:tokenType.stringLiteral,length:length,value:stringValue}}function isWhitespace(x){switch(x){case 9:case 11:case 12:case 32:case 160:case 65279:return!0;case x<5760&&x:return!1;case 5760:case 6158:case x>=8192&&x<=8202&&x:case 8239:case 8287:case 12288:return!0;default:return!1}}function readWhitespace(x,A,V){for(;A<V;){var R=x.charCodeAt(A);switch(R){case 9:case 11:case 12:case 32:case 160:case 65279:break;case R<5760&&R:return A;case 5760:case 6158:case R>=8192&&R<=8202&&R:case 8239:case 8287:case 12288:break;default:return A}A++}return A}function lex(x,A,V,R){for(;V<R;){var D,N=V,U=A.charCodeAt(V++);switch(U){case isWhitespace(U)&&U:case isLineTerminator(U)&&U:V=readWhitespace(A,V,R),D={type:tokenType.separator,length:V-N};continue;case 34:case 39:D=readStringLiteralToken(A,V-1,R);break;case 40:D=tokens.leftParentheses;break;case 41:D=tokens.rightParentheses;break;case 43:case 45:if(V<R){var B=A.charCodeAt(V);if(46===B){var F=V+1;if(F<R&&isDecimalDigit(A.charCodeAt(F))){D=readDecimalLiteralToken(A,N,F,R);break}}else if(isDecimalDigit(B)){D=readDecimalLiteralToken(A,N,V,R);break}}D={type:tokenType.error,length:V-N,value:A.substring(N,V)};break;case 44:D=tokens.comma;break;case 46:D=tokens.dot,V<R&&isDecimalDigit(A.charCodeAt(V))&&(D=readDecimalLiteralToken(A,N,V,R));break;case 48:var W=V<R?A.charCodeAt(V):0;if(120===W||88===W){var H=readHexIntegerLiteral(A,V+1,R);D={type:tokenType.numberLiteral,length:H-N,value:+A.substr(N,H-N)}}else D=readDecimalLiteralToken(A,N,V,R);break;case U>=49&&U<=57&&U:D=readDecimalLiteralToken(A,N,V,R);break;case 58:D=tokens.colon;break;case 59:D=tokens.semicolon;break;case 91:D=tokens.leftBracket;break;case 93:D=tokens.rightBracket;break;case 123:D=tokens.leftBrace;break;case 125:D=tokens.rightBrace;break;default:if(isIdentifierStartCharacter(U,A,V,R)){D=readIdentifierToken(A,V-1,R);break}D={type:tokenType.error,length:V-N,value:A.substring(N,V)}}V+=D.length-1,x.push(D)}}return function(x){var A=[];return lex(A,x,0,x.length),A.push(tokens.eof),A}}();return lexer.tokenType=tokenType,lexer}))})})),define("WinJS/ControlProcessor/_OptionsParser",["exports","../Core/_Base","../Core/_BaseUtils","../Core/_ErrorFromName","../Core/_Resources","./_OptionsLexer"],(function optionsParserInit(x,A,V,R,D,N){"use strict";var U={get invalidOptionsRecord(){return"Invalid options record: '{0}', expected to be in the format of an object literal. {1}"},get unexpectedTokenExpectedToken(){return"Unexpected token: {0}, expected token: {1}, at offset {2}"},get unexpectedTokenExpectedTokens(){return"Unexpected token: {0}, expected one of: {1}, at offset {2}"},get unexpectedTokenGeneric(){return"Unexpected token: {0}, at offset {1}"}};function illegal(){throw"Illegal"}var B=A.Namespace.defineWithParent(null,null,{lexer:A.Namespace._lazy((function(){return N._optionsLexer})),tokenType:A.Namespace._lazy((function(){return N._optionsLexer.tokenType}))}),F=V.requireSupportedForProcessing;function tokenTypeName(x){for(var A=Object.keys(B.tokenType),V=0,R=A.length;V<R;V++)if(x===B.tokenType[A[V]])return A[V];return"<unknown>"}var W=A.Namespace.defineWithParent(null,null,{BaseInterpreter:A.Namespace._lazy((function(){return A.Class.define(null,{_error:function(x){throw new R("WinJS.UI.ParseError",x)},_currentOffset:function(){for(var x=this._pos,A=0,V=0;V<x;V++)A+=this._tokens[V].length;return A},_evaluateAccessExpression:function(x){switch(this._current.type){case B.tokenType.dot:switch(this._read(),this._current.type){case B.tokenType.identifier:case this._current.keyword&&this._current.type:var A=this._current.value;return this._read(),x[A];default:this._unexpectedToken(B.tokenType.identifier,B.tokenType.reservedWord)}return;case B.tokenType.leftBracket:this._read();var V=this._evaluateValue();return this._read(B.tokenType.rightBracket),x[V]}},_evaluateAccessExpressions:function(x){for(;;)switch(this._current.type){case B.tokenType.dot:case B.tokenType.leftBracket:x=this._evaluateAccessExpression(x);break;default:return x}},_evaluateIdentifier:function(x,A){var V=this._readIdentifier();return A=x?A[V]:this._context[V]},_evaluateIdentifierExpression:function(){var x=this._evaluateIdentifier(!1);switch(this._current.type){case B.tokenType.dot:case B.tokenType.leftBracket:return this._evaluateAccessExpressions(x);default:return x}},_initialize:function(x,A,V,R){this._originalSource=A,this._tokens=x,this._context=V,this._functionContext=R,this._pos=0,this._current=this._tokens[0]},_read:function(x){x&&this._current.type!==x&&this._unexpectedToken(x),this._current!==B.tokenType.eof&&(this._current=this._tokens[++this._pos])},_peek:function(x){if(!x||this._current.type===x)return this._current!==B.tokenType.eof?this._tokens[this._pos+1]:void 0},_readAccessExpression:function(x){switch(this._current.type){case B.tokenType.dot:switch(this._read(),this._current.type){case B.tokenType.identifier:case this._current.keyword&&this._current.type:x.push(this._current.value),this._read();break;default:this._unexpectedToken(B.tokenType.identifier,B.tokenType.reservedWord)}return;case B.tokenType.leftBracket:return this._read(),x.push(this._evaluateValue()),void this._read(B.tokenType.rightBracket)}},_readAccessExpressions:function(x){for(;;)switch(this._current.type){case B.tokenType.dot:case B.tokenType.leftBracket:this._readAccessExpression(x);break;default:return}},_readIdentifier:function(){var x=this._current.value;return this._read(B.tokenType.identifier),x},_readIdentifierExpression:function(){var x=[];switch(this._peek(B.tokenType.thisKeyword)&&0===x.length?this._read():x.push(this._readIdentifier()),this._current.type){case B.tokenType.dot:case B.tokenType.leftBracket:this._readAccessExpressions(x)}return x},_unexpectedToken:function(x){var A=this._current.type===B.tokenType.error?"'"+this._current.value+"'":tokenTypeName(this._current.type);if(x)if(1===arguments.length)x=tokenTypeName(x),this._error(D._formatString(U.unexpectedTokenExpectedToken,A,x,this._currentOffset()));else{for(var V=[],R=0,N=arguments.length;R<N;R++)V.push(tokenTypeName(arguments[R]));x=V.join(", "),this._error(D._formatString(U.unexpectedTokenExpectedTokens,A,x,this._currentOffset()))}else this._error(D._formatString(U.unexpectedTokenGeneric,A,this._currentOffset()))}},{supportedForProcessing:!1})})),OptionsInterpreter:A.Namespace._lazy((function(){return A.Class.derive(W.BaseInterpreter,(function(x,A,V,R){this._initialize(x,A,V,R)}),{_error:function(x){throw new R("WinJS.UI.ParseError",D._formatString(U.invalidOptionsRecord,this._originalSource,x))},_evaluateArrayLiteral:function(){var x=[];return this._read(B.tokenType.leftBracket),this._readArrayElements(x),this._read(B.tokenType.rightBracket),x},_evaluateObjectLiteral:function(){var x={};return this._read(B.tokenType.leftBrace),this._readObjectProperties(x),this._tryReadComma(),this._read(B.tokenType.rightBrace),x},_evaluateOptionsLiteral:function(){var x=this._evaluateValue();return this._current.type!==B.tokenType.eof&&this._unexpectedToken(B.tokenType.eof),x},_peekValue:function(){switch(this._current.type){case B.tokenType.falseLiteral:case B.tokenType.nullLiteral:case B.tokenType.stringLiteral:case B.tokenType.trueLiteral:case B.tokenType.numberLiteral:case B.tokenType.leftBrace:case B.tokenType.leftBracket:case B.tokenType.identifier:return!0;default:return!1}},_evaluateValue:function(){switch(this._current.type){case B.tokenType.falseLiteral:case B.tokenType.nullLiteral:case B.tokenType.stringLiteral:case B.tokenType.trueLiteral:case B.tokenType.numberLiteral:var x=this._current.value;return this._read(),x;case B.tokenType.leftBrace:return this._evaluateObjectLiteral();case B.tokenType.leftBracket:return this._evaluateArrayLiteral();case B.tokenType.identifier:return this._peek(B.tokenType.identifier).type===B.tokenType.leftParentheses?F(this._evaluateObjectQueryExpression()):F(this._evaluateIdentifierExpression());default:this._unexpectedToken(B.tokenType.falseLiteral,B.tokenType.nullLiteral,B.tokenType.stringLiteral,B.tokenType.trueLiteral,B.tokenType.numberLiteral,B.tokenType.leftBrace,B.tokenType.leftBracket,B.tokenType.identifier)}},_tryReadElement:function(x){return!!this._peekValue()&&(x.push(this._evaluateValue()),!0)},_tryReadComma:function(){return!!this._peek(B.tokenType.comma)&&(this._read(),!0)},_tryReadElision:function(x){for(var A=!1;this._tryReadComma();)x.push(void 0),A=!0;return A},_readArrayElements:function(x){for(;!this._peek(B.tokenType.rightBracket);){var A=this._tryReadElision(x),V=this._tryReadElement(x),R=this._peek(B.tokenType.comma);if(!V||!R){if(V||A)break;this._unexpectedToken(B.tokenType.falseLiteral,B.tokenType.nullLiteral,B.tokenType.stringLiteral,B.tokenType.trueLiteral,B.tokenType.numberLiteral,B.tokenType.leftBrace,B.tokenType.leftBracket,B.tokenType.identifier);break}this._read()}},_readObjectProperties:function(x){for(;!this._peek(B.tokenType.rightBrace);){var A=this._tryReadObjectProperty(x),V=this._peek(B.tokenType.comma);if(!A||!V){if(A)break;this._unexpectedToken(B.tokenType.numberLiteral,B.tokenType.stringLiteral,B.tokenType.identifier);break}this._read()}},_tryReadObjectProperty:function(x){switch(this._current.type){case B.tokenType.numberLiteral:case B.tokenType.stringLiteral:case B.tokenType.identifier:case this._current.keyword&&this._current.type:var A=this._current.value;return this._read(),this._read(B.tokenType.colon),x[A]=this._evaluateValue(),!0;default:return!1}},_failReadObjectProperty:function(){this._unexpectedToken(B.tokenType.numberLiteral,B.tokenType.stringLiteral,B.tokenType.identifier,B.tokenType.reservedWord)},_evaluateObjectQueryExpression:function(){var x=this._current.value;this._read(B.tokenType.identifier),this._read(B.tokenType.leftParentheses);var A=this._current.value;this._read(B.tokenType.stringLiteral),this._read(B.tokenType.rightParentheses);var V=F(this._functionContext[x])(A);switch(this._current.type){case B.tokenType.dot:case B.tokenType.leftBracket:return this._evaluateAccessExpressions(V);default:return V}},run:function(){return this._evaluateOptionsLiteral()}},{supportedForProcessing:!1})})),OptionsParser:A.Namespace._lazy((function(){return A.Class.derive(W.OptionsInterpreter,(function(x,A){this._initialize(x,A)}),{_evaluateAccessExpression:illegal,_evaluateAccessExpressions:illegal,_evaluateIdentifier:illegal,_evaluateIdentifierExpression:illegal,_evaluateObjectQueryExpression:illegal,_evaluateValue:function(){switch(this._current.type){case B.tokenType.falseLiteral:case B.tokenType.nullLiteral:case B.tokenType.stringLiteral:case B.tokenType.trueLiteral:case B.tokenType.numberLiteral:var x=this._current.value;return this._read(),x;case B.tokenType.leftBrace:return this._evaluateObjectLiteral();case B.tokenType.leftBracket:return this._evaluateArrayLiteral();case B.tokenType.identifier:return this._peek(B.tokenType.identifier).type===B.tokenType.leftParentheses?this._readObjectQueryExpression():this._readIdentifierExpression();default:this._unexpectedToken(B.tokenType.falseLiteral,B.tokenType.nullLiteral,B.tokenType.stringLiteral,B.tokenType.trueLiteral,B.tokenType.numberLiteral,B.tokenType.leftBrace,B.tokenType.leftBracket,B.tokenType.identifier)}},_readIdentifierExpression:function(){var x=W.BaseInterpreter.prototype._readIdentifierExpression.call(this);return new z(x)},_readObjectQueryExpression:function(){var x=this._current.value;this._read(B.tokenType.identifier),this._read(B.tokenType.leftParentheses);var A=this._current.value;this._read(B.tokenType.stringLiteral),this._read(B.tokenType.rightParentheses);var V=new H(x,A);switch(this._current.type){case B.tokenType.dot:case B.tokenType.leftBracket:var R=[V];return this._readAccessExpressions(R),new z(R);default:return V}}},{supportedForProcessing:!1})}))}),parser=function(x,A,V){var R=B.lexer(x);return new W.OptionsInterpreter(R,x,A||{},V||{}).run()};Object.defineProperty(parser,"_BaseInterpreter",{get:function(){return W.BaseInterpreter}});var H=A.Class.define((function(x,A){this.target=x,this.arg0Value=A}));H.supportedForProcessing=!1;var z=A.Class.define((function(x){this.parts=x}));z.supportedForProcessing=!1,A.Namespace._moduleDefine(x,"WinJS.UI",{optionsParser:parser,_optionsParser:function(x){var A=B.lexer(x);return new W.OptionsParser(A,x).run()},_CallExpression:H,_IdentifierExpression:z})})),define("WinJS/ControlProcessor",["exports","./Core/_Global","./Core/_Base","./Core/_BaseUtils","./Core/_Log","./Core/_Resources","./Core/_WriteProfilerMark","./ControlProcessor/_OptionsParser","./Promise","./Utilities/_ElementUtilities"],(function declarativeControlsInit(x,A,V,R,D,N,U,B,F,W){"use strict";if(A.document){var H={get errorActivatingControl(){return"Error activating control: {0}"}},z=R.markSupportedForProcessing,G=R.requireSupportedForProcessing,j=!1;V.Namespace._moduleDefine(x,"WinJS.UI",{scopedSelect:function scopedSelect(x,A){return createSelect(A)(x)},processAll:processAll,process:function process(x){if(x&&x.winControl)return F.as(x.winControl);var A=getControlHandler(x);return A?activate(x,A):F.as()}})}function createSelect(x){return z((function select(V){for(var R,D=x;D;){if(D.msParentSelectorScope){var N=D.parentNode;if(N&&(R=W._matchesSelector(N,V)?N:N.querySelector(V)))break}D=D.parentNode}return R||A.document.querySelector(V)}))}function activate(x,V){return new F((function activate2(R,U){try{var F,W,z=x.getAttribute("data-win-options");z&&(F=B.optionsParser(z,A,{select:createSelect(x)}));var G=1;V.length>2&&G++;var j=function checkComplete(){0==--G&&(x.winControl=x.winControl||W,R(W))};W=new V(x,F,j),j()}catch(x){D.log&&D.log(N._formatString(H.errorActivatingControl,x&&x.message),"winjs controls","error"),U(x)}}))}function processAllImpl(x,V){return new F((function processAllImpl2(R,D){x=x||A.document.body;var N=0,U=x.querySelectorAll("[data-win-control]"),B=[];!V&&getControlHandler(x)&&B.push(x);for(var F=0,W=U.length;F<W;F++)B.push(U[F]);if(0!==B.length){var checkAllComplete=function(){(N-=1)<0&&R(x)},H=new Array(B.length);for(F=0,W=B.length;F<W;F++){var z,j=(Q=B[F]).winControl;j?z=j.constructor:H[F]=z=getControlHandler(Q),z&&z.isDeclarativeControlContainer&&(F+=Q.querySelectorAll("[data-win-control]").length)}for(F=0,W=B.length;F<W;F++){var q=H[F],Q=B[F];q&&!Q.winControl&&(N++,activate(Q,q).then(checkAllComplete,(function(x){D(x)})),q.isDeclarativeControlContainer&&"function"==typeof q.isDeclarativeControlContainer&&G(q.isDeclarativeControlContainer)(Q.winControl,processAll))}checkAllComplete()}else R(x)}))}function getControlHandler(x){if(x.getAttribute){var V=x.getAttribute("data-win-control");if(V)return R._getMemberFiltered(V.trim(),A,G)}}function processAll(x,A){return j?processAllImpl(x,A):R.ready().then((function(){return j=!0,processAllImpl(x,A)}))}})),define("WinJS/Utilities/_ElementListUtilities",["exports","../Core/_Global","../Core/_Base","../ControlProcessor","../Promise","../Utilities/_Control","../Utilities/_ElementUtilities"],(function elementListUtilities(x,A,V,R,D,N,U){"use strict";A.document&&V.Namespace._moduleDefine(x,"WinJS.Utilities",{QueryCollection:V.Class.derive(Array,(function(x){x&&this.include(x)}),{forEach:function(x,A){return Array.prototype.forEach.apply(this,[x,A]),this},get:function(x){return this[x]},setAttribute:function(x,A){return this.forEach((function(V){V.setAttribute(x,A)})),this},getAttribute:function(x){if(this.length>0)return this[0].getAttribute(x)},addClass:function(x){return this.forEach((function(A){U.addClass(A,x)})),this},hasClass:function(x){return this.length>0&&U.hasClass(this[0],x)},removeClass:function(x){return this.forEach((function(A){U.removeClass(A,x)})),this},toggleClass:function(x){return this.forEach((function(A){U.toggleClass(A,x)})),this},listen:function(x,A,V){return this.forEach((function(R){R.addEventListener(x,A,V)})),this},removeEventListener:function(x,A,V){return this.forEach((function(R){R.removeEventListener(x,A,V)})),this},setStyle:function(x,A){return this.forEach((function(V){V.style[x]=A})),this},clearStyle:function(x){return this.forEach((function(A){A.style[x]=""})),this},query:function(A){var V=new x.QueryCollection;return this.forEach((function(x){V.include(x.querySelectorAll(A))})),V},include:function(x){if("number"==typeof x.length)for(var A=0;A<x.length;A++)this.push(x[A]);else x.DOCUMENT_FRAGMENT_NODE&&x.nodeType===x.DOCUMENT_FRAGMENT_NODE?this.include(x.childNodes):this.push(x)},control:function(x,A){return x&&"function"==typeof x?this.forEach((function(V){V.winControl=new x(V,A)})):(A=x,this.forEach((function(x){R.process(x).done((function(x){x&&N.setOptions(x,A)}))}))),this},template:function(A,V,R){A instanceof x.QueryCollection&&(A=A[0]);var N=A.winControl;null!=V&&V.forEach||(V=[V]),R=R||function(){};var U=this,B=[];return V.forEach((function(x){U.forEach((function(A){B.push(N.render(x,A))}))})),R(D.join(B)),this}},{supportedForProcessing:!1}),query:function(V,R){return new x.QueryCollection((R||A.document).querySelectorAll(V))},id:function(V){var R=A.document.getElementById(V);return new x.QueryCollection(R?[R]:[])},children:function(A){return new x.QueryCollection(A.children)}})})),define("WinJS/Utilities/_Hoverable",["exports","../Core/_Global"],(function hoverable(x,A){"use strict";if(A.document&&(A.document.documentElement.classList.add("win-hoverable"),x.isHoverable=!0,!A.MSPointerEvent)){var touchStartHandler=function(){A.document.removeEventListener("touchstart",touchStartHandler),A.document.documentElement.classList.remove("win-hoverable"),x.isHoverable=!1};A.document.addEventListener("touchstart",touchStartHandler)}})),define("WinJS/Utilities/_ParallelWorkQueue",["exports","../Core/_Base","../Promise","../Scheduler"],(function parallelWorkQueueInit(x,A,V,R){"use strict";A.Namespace._moduleDefine(x,"WinJS.UI",{_ParallelWorkQueue:A.Namespace._lazy((function(){return A.Class.define((function ParallelWorkQueue_ctor(x){var A=0,D={},N=[];x=x||3;var U=0,B=0;function runNext(){U--,B||R.schedule(run,R.Priority.normal,null,"WinJS._ParallelWorkQueue.runNext")}function run(){for(B++;U<x;U++){var A,V;do{V=(A=N.shift())&&D[A]}while(A&&!V);if(!V)break;delete D[A];try{V().then(runNext,runNext)}catch(x){runNext()}}B--}this.sort=function(x){N.sort((function(A,V){return A=D[A],V=D[V],void 0===A&&void 0===V?0:void 0===A?1:void 0===V?-1:x(A.data,V.data)}))},this.queue=function queue(x,R,U){var B,F="w"+A++;return new V((function(A,V,W){var w=function(){return B=x().then(A,V,W)};w.data=R,D[F]=w,U?N.unshift(F):N.push(F),run()}),(function(){delete D[F],B&&B.cancel()}))}}),{},{supportedForProcessing:!1})}))})})),define("WinJS/Utilities/_VersionManager",["exports","../Core/_Base","../_Signal"],(function versionManagerInit(x,A,V){"use strict";A.Namespace._moduleDefine(x,"WinJS.UI",{_VersionManager:A.Namespace._lazy((function(){return A.Class.define((function _VersionManager_ctor(){this._unlocked=new V,this._unlocked.complete()}),{_cancelCount:0,_notificationCount:0,_updateCount:0,_version:0,locked:{get:function(){return 0!==this._notificationCount||0!==this._updateCount}},noOutstandingNotifications:{get:function(){return 0===this._notificationCount}},version:{get:function(){return this._version}},unlocked:{get:function(){return this._unlocked.promise}},_dispose:function(){this._unlocked&&(this._unlocked.cancel(),this._unlocked=null)},beginUpdating:function(){this._checkLocked(),this._updateCount++},endUpdating:function(){this._updateCount--,this._checkUnlocked()},beginNotifications:function(){this._checkLocked(),this._notificationCount++},endNotifications:function(){this._notificationCount--,this._checkUnlocked()},_checkLocked:function(){this.locked||(this._dispose(),this._unlocked=new V)},_checkUnlocked:function(){this.locked||this._unlocked.complete()},receivedNotification:function(){if(this._version++,this._cancel){var x=this._cancel;this._cancel=null,x.forEach((function(x){x&&x.cancel()}))}},cancelOnNotification:function(x){return this._cancel||(this._cancel=[],this._cancelCount=0),this._cancel[this._cancelCount++]=x,this._cancelCount-1},clearCancelOnNotification:function(x){this._cancel&&delete this._cancel[x]}},{supportedForProcessing:!1})}))})})),define("WinJS/Utilities/_ItemsManager",["exports","../Core/_Global","../Core/_Base","../Core/_BaseUtils","../Core/_ErrorFromName","../Core/_Resources","../Core/_WriteProfilerMark","../Promise","../_Signal","../Scheduler","../Utilities/_ElementUtilities","./_ParallelWorkQueue","./_VersionManager"],(function itemsManagerInit(x,A,V,R,D,N,U,B,F,W,H,z,G){"use strict";var j=R.markSupportedForProcessing,q=H._uniqueID;function simpleItemRenderer(x){return j((function(A,V){return A.then((function(A){return A?x(A,V):null}))}))}var Q=simpleItemRenderer((function(x){if(H._isDOMElement(x.data))return x.data;var V=x.data;void 0===V?V="undefined":null===V?V="null":"object"==typeof V&&(V=JSON.stringify(V));var R=A.document.createElement("span");return R.textContent=V.toString(),R}));V.Namespace._moduleDefine(x,"WinJS.UI",{_normalizeRendererReturn:function(x){return x?"object"==typeof x&&x.element?B.as(x.element).then((function(A){return{element:A,renderComplete:B.as(x.renderComplete)}})):B.as(x).then((function(x){return{element:x,renderComplete:B.as()}})):{element:null,renderComplete:B.as()}},simpleItemRenderer:simpleItemRenderer,_trivialHtmlRenderer:Q});var K,J={get listDataSourceIsInvalid(){return"Invalid argument: dataSource must be an object."},get itemRendererIsInvalid(){return"Invalid argument: itemRenderer must be a function."},get itemIsInvalid(){return"Invalid argument: item must be a DOM element that was returned by the Items Manager, and has not been replaced or released."}},X=new Date;function compareImageLoadPriority(x,A){var V=!1,R=!1;return x.isOnScreen().then((function(x){V=x})),A.isOnScreen().then((function(x){R=x})),(V?0:1)-(R?0:1)}var Y=0,$={},Z=[];function seenUrl(x){if(!/^blob:/i.test(x)&&($[x]=!0,Z.push(x),Z.length>1e3)){var A=Z;$={},Z=[];for(var V=0,R=A.length-1;R>=0&&V<250;R--){var D=A[R];$[D]||($[D]=!0,V++)}}}function isImageCached(x){return $[x]}V.Namespace._moduleDefine(x,"WinJS.UI",{_seenUrl:seenUrl,_getSeenUrls:function(){return $},_getSeenUrlsMRU:function(){return Z},_seenUrlsMaxSize:250,_seenUrlsMRUMaxSize:1e3}),V.Namespace._moduleDefine(x,"WinJS.UI",{_createItemsManager:V.Namespace._lazy((function(){var R=V.Class.define((function ListNotificationHandler_ctor(x){this._itemsManager=x}),{beginNotifications:function(){this._itemsManager._versionManager.beginNotifications(),this._itemsManager._beginNotifications()},inserted:function(x,A,V){this._itemsManager._versionManager.receivedNotification(),this._itemsManager._inserted(x,A,V)},changed:function(x,A){this._itemsManager._versionManager.receivedNotification(),this._itemsManager._changed(x,A)},moved:function(x,A,V){this._itemsManager._versionManager.receivedNotification(),this._itemsManager._moved(x,A,V)},removed:function(x,A){this._itemsManager._versionManager.receivedNotification(),this._itemsManager._removed(x,A)},countChanged:function(x,A){this._itemsManager._versionManager.receivedNotification(),this._itemsManager._countChanged(x,A)},indexChanged:function(x,A,V){this._itemsManager._versionManager.receivedNotification(),this._itemsManager._indexChanged(x,A,V)},affectedRange:function(x){this._itemsManager._versionManager.receivedNotification(),this._itemsManager._affectedRange(x)},endNotifications:function(){this._itemsManager._versionManager.endNotifications(),this._itemsManager._endNotifications()},reload:function(){this._itemsManager._versionManager.receivedNotification(),this._itemsManager._reload()}},{supportedForProcessing:!1}),N=V.Class.define((function ItemsManager_ctor(x,A,V,N){if(!x)throw new D("WinJS.UI.ItemsManager.ListDataSourceIsInvalid",J.listDataSourceIsInvalid);if(!A)throw new D("WinJS.UI.ItemsManager.ItemRendererIsInvalid",J.itemRendererIsInvalid);this.$pipeline_callbacksMap={},this._listDataSource=x,this.dataSource=this._listDataSource,this._elementNotificationHandler=V,this._listBinding=this._listDataSource.createListBinding(new R(this)),N&&(N.ownerElement&&(this._ownerElement=N.ownerElement),this._profilerId=N.profilerId,this._versionManager=N.versionManager||new G._VersionManager),this._indexInView=N&&N.indexInView,this._itemRenderer=A,this._viewCallsReady=N&&N.viewCallsReady,this._elementMap={},this._handleMap={},this._jobOwner=W.createOwnerToken(),this._notificationsSent=!1,this._listBinding.last&&(this.lastItem=function(){return this._elementForItem(this._listBinding.last())})}),{_itemFromItemPromise:function(x){return this._waitForElement(this._elementForItem(x))},_itemFromItemPromiseThrottled:function(x){return this._waitForElement(this._elementForItem(x,!0))},_itemAtIndex:function(x){var A=this._itemPromiseAtIndex(x);this._itemFromItemPromise(A).then(null,(function(x){return A.cancel(),B.wrapError(x)}))},_itemPromiseAtIndex:function(x){return this._listBinding.fromIndex(x)},_waitForElement:function(x){var A=this;return new B((function(V){if(x)if(A.isPlaceholder(x)){var R=q(x),D=A.$pipeline_callbacksMap[R];D?D.push(V):A.$pipeline_callbacksMap[R]=[V]}else V(x);else V(x)}))},_updateElement:function(x,A){var V=q(A),R=this.$pipeline_callbacksMap[V];R&&(delete this.$pipeline_callbacksMap[V],R.forEach((function(A){A(x)})))},_firstItem:function(){return this._waitForElement(this._elementForItem(this._listBinding.first()))},_lastItem:function(){return this._waitForElement(this._elementForItem(this._listBinding.last()))},_previousItem:function(x){return this._listBinding.jumpToItem(this._itemFromElement(x)),this._waitForElement(this._elementForItem(this._listBinding.previous()))},_nextItem:function(x){return this._listBinding.jumpToItem(this._itemFromElement(x)),this._waitForElement(this._elementForItem(this._listBinding.next()))},_itemFromPromise:function(x){return this._waitForElement(this._elementForItem(x))},isPlaceholder:function(x){return!!this._recordFromElement(x).elementIsPlaceholder},itemObject:function(x){return this._itemFromElement(x)},release:function(){this._listBinding.release(),this._elementNotificationHandler=null,this._listBinding=null,this._jobOwner.cancelAll(),this._released=!0},releaseItemPromise:function(x){var A=x.handle,V=this._handleMap[A];V?this._releaseRecord(V):x.cancel()},releaseItem:function(x){var A=this._elementMap[q(x)];this._releaseRecord(A)},_releaseRecord:function(x){x&&(x.renderPromise&&x.renderPromise.cancel(),x.itemPromise&&x.itemPromise.cancel(),x.imagePromises&&x.imagePromises.forEach((function(x){x.cancel()})),x.itemReadyPromise&&x.itemReadyPromise.cancel(),x.renderComplete&&x.renderComplete.cancel(),this._removeEntryFromElementMap(x.element),this._removeEntryFromHandleMap(x.itemPromise.handle,x),x.item&&this._listBinding.releaseItem(x.item))},refresh:function(){return this._listDataSource.invalidateAll()},_handlerToNotifyCaresAboutItemAvailable:function(){return!(!this._elementNotificationHandler||!this._elementNotificationHandler.itemAvailable)},_handlerToNotify:function(){return this._notificationsSent||(this._notificationsSent=!0,this._elementNotificationHandler&&this._elementNotificationHandler.beginNotifications&&this._elementNotificationHandler.beginNotifications()),this._elementNotificationHandler},_defineIndexProperty:function(x,A,V){V.indexObserved=!1,Object.defineProperty(x,"index",{get:function(){return V.indexObserved=!0,A.index}})},_renderPlaceholder:function(x){var V=function defaultRenderer(){return A.document.createElement("div")}();return x.elementIsPlaceholder=!0,V},_renderItem:function(V,R,D){var N=this,U=N._indexInView||function(){return!0},H=new F,G=new F,j=(R.item.index,!0),q=!1;V.then((function(x){q=!0,j&&H.complete(x)})),j=!1;var Q=H.promise.then((function(x){if(x){var V=Object.create(x);return N._defineIndexProperty(V,x,R),V.ready=G.promise,V.isOnScreen=function(){return B.wrap(U(x.index))},V.loadImage=function(x,D){var N=function loadImage(x,V,R){var D=Y++;return(K=K||new z._ParallelWorkQueue(6)).queue((function(){return new B((function(R,N){W.schedule((function ImageLoader_async_loadImage(D){V||(V=A.document.createElement("img")),$[x]?(seenUrl(x),V.src=x,R(V)):D.setPromise(new B((function(D){var U=A.document.createElement("img"),cleanup=function(){U.removeEventListener("load",loadComplete,!1),U.removeEventListener("error",loadError,!1),V.src=x;var A=new Date;A-X>64&&(X=A,K.sort(compareImageLoadPriority))},loadComplete=function(){D(jobComplete)},loadError=function(){D(jobError)},jobComplete=function(){seenUrl(x),cleanup(),R(V)},jobError=function(){cleanup(),N(V)};U.addEventListener("load",loadComplete,!1),U.addEventListener("error",loadError,!1),U.src=x})))}),W.Priority.normal,null,"WinJS.UI._ImageLoader._image"+D)}))}),R)}(x,D,V);return R.imagePromises?R.imagePromises.push(N):R.imagePromises=[N],N},V.isImageCached=isImageCached,V}return B.cancel}));function queueAsyncStage1(){V.then((function(x){H.complete(x)}))}return q||(D?(R.stage0=V,R.startStage1=function(){R.startStage1=null,queueAsyncStage1()}):queueAsyncStage1()),Q.handle=V.handle,R.itemPromise=Q,R.itemReadyPromise=G.promise,R.readyComplete=!1,R.item.index,R.item.index,B.as(N._itemRenderer(Q,R.element)).then(x._normalizeRendererReturn).then((function(x){return N._released?B.cancel:(Q.then((function(x){R.pendingReady=function(){R.pendingReady&&(R.pendingReady=null,R.readyComplete=!0,G.complete(x))},N._viewCallsReady||(W.schedule(R.pendingReady,W.Priority.normal,R,"WinJS.UI._ItemsManager._pendingReady").owner=N._jobOwner)})),x)}))},_replaceElement:function(x,A){this._removeEntryFromElementMap(x.element),x.element=A,this._addEntryToElementMap(A,x)},_changeElement:function(x,A,V){x.renderPromise=null;var R=x.element,D=x.item;x.newItem&&(x.item=x.newItem,x.newItem=null),this._replaceElement(x,A),x.item&&x.elementIsPlaceholder&&!V?(x.elementDelayed=null,x.elementIsPlaceholder=!1,this._updateElement(x.element,R),this._handlerToNotifyCaresAboutItemAvailable()&&this._handlerToNotify().itemAvailable(x.element,R)):this._handlerToNotify().changed(A,R,D)},_elementForItem:function(x,A){var V,R=x.handle,D=this._recordFromHandle(R,!0);if(!R)return null;if(D)V=D.element;else{D={item:x,itemPromise:x},this._addEntryToHandleMap(R,D);var N=this,U=!1,B=!1,F=N._renderItem(x,D,A).then((function(A){var R=A.element;D.renderComplete=A.renderComplete,x.then((function(x){D.item=x,x||(U=!0,V=null)})),B=!0,D.renderPromise=null,R&&(V?N._presentElements(D,R):V=R)}));U||(B||(D.renderPromise=F),V||(V=this._renderPlaceholder(D)),D.element=V,this._addEntryToElementMap(V,D),x.retain())}return V},_addEntryToElementMap:function(x,A){this._elementMap[q(x)]=A},_removeEntryFromElementMap:function(x){delete this._elementMap[q(x)]},_recordFromElement:function(x){var A=this._elementMap[q(x)];if(!A)throw new D("WinJS.UI.ItemsManager.ItemIsInvalid",J.itemIsInvalid);return A},_addEntryToHandleMap:function(x,A){this._handleMap[x]=A},_removeEntryFromHandleMap:function(x){delete this._handleMap[x]},_handleInHandleMap:function(x){return!!this._handleMap[x]},_recordFromHandle:function(x,A){var V=this._handleMap[x];if(!V&&!A)throw new D("WinJS.UI.ItemsManager.ItemIsInvalid",J.itemIsInvalid);return V},_foreachRecord:function(x){var A=this._handleMap;for(var V in A)x(A[V])},_itemFromElement:function(x){return this._recordFromElement(x).item},_elementFromHandle:function(x){if(x){var A=this._recordFromHandle(x,!0);if(A&&A.element)return A.element}return null},_inserted:function(x,A,V){this._handlerToNotify().inserted(x,A,V)},_changed:function(x,A){if(this._handleInHandleMap(A.handle)){var V=this._recordFromHandle(A.handle);V.renderPromise&&V.renderPromise.cancel(),V.itemPromise&&V.itemPromise.cancel(),V.imagePromises&&V.imagePromises.forEach((function(x){x.cancel()})),V.itemReadyPromise&&V.itemReadyPromise.cancel(),V.renderComplete&&V.renderComplete.cancel(),V.newItem=x;var R=this,D=B.as(x);D.handle=V.itemPromise.handle,V.renderPromise=this._renderItem(D,V).then((function(x){V.renderComplete=x.renderComplete,R._changeElement(V,x.element,!1),R._presentElements(V)}))}},_moved:function(x,A,V){var R=this._elementFromHandle(x.handle),D=this._elementFromHandle(A),N=this._elementFromHandle(V);this._handlerToNotify().moved(R,D,N,x),this._presentAllElements()},_removed:function(x,A){if(this._handleInHandleMap(x)){var V=this._elementFromHandle(x);this._handlerToNotify().removed(V,A,x),this.releaseItem(V),this._presentAllElements()}else this._handlerToNotify().removed(null,A,x)},_countChanged:function(x,A){this._elementNotificationHandler&&this._elementNotificationHandler.countChanged&&this._handlerToNotify().countChanged(x,A)},_indexChanged:function(x,A,V){var R;if(this._handleInHandleMap(x)){var D=this._recordFromHandle(x);if(D.indexObserved)if(D.elementIsPlaceholder)this._changeElement(D,this._renderPlaceholder(D),!0);else if(D.item.index!==A){D.renderPromise&&D.renderPromise.cancel(),D.renderComplete&&D.renderComplete.cancel();var N=D.newItem||D.item;N.index=A;var U=B.as(N);U.handle=D.itemPromise.handle;var F=this;D.renderPromise=this._renderItem(U,D).then((function(x){D.renderComplete=x.renderComplete,F._changeElement(D,x.element,!1),F._presentElements(D)}))}R=D.element}this._elementNotificationHandler&&this._elementNotificationHandler.indexChanged&&this._handlerToNotify().indexChanged(R,A,V)},_affectedRange:function(x){this._elementNotificationHandler&&this._elementNotificationHandler.updateAffectedRange&&this._handlerToNotify().updateAffectedRange(x)},_beginNotifications:function(){this._externalBegin=!0,this._handlerToNotify()},_endNotifications:function(){this._notificationsSent&&(this._notificationsSent=!1,this._externalBegin=!1,this._elementNotificationHandler&&this._elementNotificationHandler.endNotifications&&this._elementNotificationHandler.endNotifications())},_reload:function(){this._elementNotificationHandler&&this._elementNotificationHandler.reload&&this._elementNotificationHandler.reload()},_postEndNotifications:function(){if(this._notificationsSent&&!this._externalBegin&&!this._endNotificationsPosted){this._endNotificationsPosted=!0;var x=this;W.schedule((function ItemsManager_async_endNotifications(){x._endNotificationsPosted=!1,x._endNotifications()}),W.Priority.high,null,"WinJS.UI._ItemsManager._postEndNotifications")}},_presentElement:function(x){var A=x.element;this._replaceElement(x,x.elementDelayed),x.elementDelayed=null,x.elementIsPlaceholder=!1,this._updateElement(x.element,A),this._handlerToNotifyCaresAboutItemAvailable()&&this._handlerToNotify().itemAvailable(x.element,A)},_presentElements:function(x,A){A&&(x.elementDelayed=A),this._listBinding.jumpToItem(x.item),x.elementDelayed&&this._presentElement(x),this._postEndNotifications()},_presentAllElements:function(){var x=this;this._foreachRecord((function(A){A.elementDelayed&&x._presentElement(A)}))},_writeProfilerMark:function(x){this._profilerId&&this._profilerId}},{supportedForProcessing:!1});return function(x,A,V,R){return new N(x,A,V,R)}}))})})),define("WinJS/Utilities/_TabContainer",["exports","../Core/_Global","../Core/_Base","../Core/_BaseUtils","./_ElementUtilities"],(function tabManagerInit(x,A,V,R,D){"use strict";if(A.document){var N=D.getTabIndex,U={attach:function(x,A){return x["win-trackTabHelperObject"]?x["win-trackTabHelperObject"].addRef():x["win-trackTabHelperObject"]=new TabHelperObject(x,A),x["win-trackTabHelperObject"]},detach:function(x){x["win-trackTabHelperObject"].release()||delete x["win-trackTabHelperObject"]}};V.Namespace._moduleDefine(x,"WinJS.UI",{TrackTabBehavior:U,TabContainer:V.Class.define((function TabContainer_ctor(x){this._element=x,this._tabIndex=0,x._tabContainer=this,null===x.getAttribute("tabindex")&&(x.tabIndex=-1);var A=this;x.addEventListener("onTabEnter",(function(V){fireEvent(A._element,"onTabEntered",V.detail,!0)||(A.childFocus?A.childFocus.focus():x.focus())})),x.addEventListener("keydown",(function(x){var V=x.target;if(x.keyCode===D.Key.tab){var N=!x.shiftKey;if(!A._hasMoreElementsInTabOrder(V,N)){if(fireEvent(A._element,"onTabExiting",N,!0))return x.stopPropagation(),void x.preventDefault();for(var U=A._element.querySelectorAll("a[href],area[href],button,command,input,link,menuitem,object,select,textarea,th[sorted],[tabindex]"),B=U.length,F=[],W=0;W<B;W++){var H=U[W];F.push(H.tabIndex),H.tabIndex=-1}A._elementTabHelper[N?"_catcherEnd":"_catcherBegin"].tabIndex=-1;var restoreTabIndicesOnBlur=function(){V.removeEventListener("blur",restoreTabIndicesOnBlur,!1);for(var x=0;x<B;x++)-1!==F[x]&&(U[x].tabIndex=F[x]);A._elementTabHelper._catcherBegin.tabIndex=A._tabIndex,A._elementTabHelper._catcherEnd.tabIndex=A._tabIndex};V.addEventListener("blur",restoreTabIndicesOnBlur,!1),R._yieldForEvents((function(){fireEvent(A._element,"onTabExit",N)}))}}})),this._elementTabHelper=U.attach(x,this._tabIndex),this._elementTabHelper._catcherBegin.tabIndex=0,this._elementTabHelper._catcherEnd.tabIndex=0}),{dispose:function(){U.detach(this._element,this._tabIndex)},childFocus:{set:function(x){x!==this._focusElement&&(x&&x.parentNode?this._focusElement=x:this._focusElement=null)},get:function(){return this._focusElement}},tabIndex:{set:function(x){this._tabIndex=x,this._elementTabHelper.updateTabIndex(x)},get:function(){return this._tabIndex}},_element:null,_skipper:function(x){x.stopPropagation(),x.preventDefault()},_hasMoreElementsInTabOrder:function(x,V){if(!this.childFocus)return!1;for(var R=function scrapeTabManagedSubtree(x){var A=x.currentNode,V=A._tabContainer.childFocus,R=[];return V?(x.currentNode=V,function scrapeSubtree(){if(x.currentNode._tabContainer)R=R.concat(scrapeTabManagedSubtree(x));else if(N(x.currentNode)>=0&&R.push(x.currentNode),x.firstChild()){do{scrapeSubtree()}while(x.nextSibling());x.parentNode()}}(),x.currentNode=A,R):[]}(A.document.createTreeWalker(this._element,A.NodeFilter.SHOW_ELEMENT,tabbableElementsNodeFilter,!1)),D=0;D<R.length;D++)if(R[D]===x)return V?D<R.length-1:D>0;return!1},_focusElement:null},{supportedForProcessing:!1})})}function fireEvent(x,V,R,D){var N=A.document.createEvent("UIEvent");return N.initUIEvent(V,!1,!!D,A,R?1:0),!x.dispatchEvent(N)}function tabbableElementsNodeFilter(x){var V=D._getComputedStyle(x);if("none"===V.display||"hidden"===V.visibility)return A.NodeFilter.FILTER_REJECT;if(x._tabContainer)return A.NodeFilter.FILTER_ACCEPT;if(x.parentNode&&x.parentNode._tabContainer){var R=x.parentNode._tabContainer.childFocus;return R&&x.contains(R)?N(x)>=0?A.NodeFilter.FILTER_ACCEPT:A.NodeFilter.FILTER_SKIP:A.NodeFilter.FILTER_REJECT}return N(x)>=0?A.NodeFilter.FILTER_ACCEPT:A.NodeFilter.FILTER_SKIP}function TabHelperObject(x,V){function createCatcher(){var x=A.document.createElement("DIV");return x.tabIndex=V||0,x.setAttribute("aria-hidden",!0),x}var R=x.parentNode,D=createCatcher();R.insertBefore(D,x);var N=createCatcher();R.insertBefore(N,x.nextSibling),D.addEventListener("focus",(function(){fireEvent(x,"onTabEnter",!0)}),!0),N.addEventListener("focus",(function(){fireEvent(x,"onTabEnter",!1)}),!0),this._catcherBegin=D,this._catcherEnd=N;var U=1;this.addRef=function(){U++},this.release=function(){return 0==--U&&(D.parentElement&&R.removeChild(D),N.parentElement&&R.removeChild(N)),U},this.updateTabIndex=function(x){D.tabIndex=x,N.tabIndex=x}}})),define("WinJS/Utilities/_KeyboardBehavior",["exports","../Core/_Global","../Core/_Base","./_Control","./_ElementUtilities","./_TabContainer"],(function KeyboardBehaviorInit(x,A,V,R,D,N){"use strict";if(A.document){var U={touch:"touch",pen:"pen",mouse:"mouse",keyboard:"keyboard"},B=U.mouse,F={2:U.touch,3:U.pen,4:U.mouse,touch:U.touch,pen:U.pen,mouse:U.mouse};D._addEventListener(A,"pointerdown",(function(x){B=F[x.pointerType]||U.mouse}),!0),A.addEventListener("keydown",(function(){B=U.keyboard}),!0),V.Namespace._moduleDefine(x,"WinJS.UI",{_keyboardSeenLast:{get:function _keyboardSeenLast_get(){return B===U.keyboard},set:function _keyboardSeenLast_set(x){B=x?U.keyboard:U.mouse}},_lastInputType:{get:function _lastInputType_get(){return B},set:function _lastInputType_set(x){U[x]&&(B=x)}},_InputTypes:U,_WinKeyboard:function(A){D._addEventListener(A,"pointerdown",(function(x){D.removeClass(x.target,"win-keyboard")}),!0),A.addEventListener("keydown",(function(x){D.addClass(x.target,"win-keyboard")}),!0),D._addEventListener(A,"focusin",(function(A){x._keyboardSeenLast&&D.addClass(A.target,"win-keyboard")}),!1),D._addEventListener(A,"focusout",(function(x){D.removeClass(x.target,"win-keyboard")}),!1)},_KeyboardBehavior:V.Namespace._lazy((function(){var x=D.Key,U=V.Class.define((function KeyboardBehavior_ctor(x,V){V=V||{},(x=x||A.document.createElement("DIV"))._keyboardBehavior=this,this._element=x,this._fixedDirection=U.FixedDirection.width,this._fixedSize=1,this._currentIndex=0,R.setOptions(this,V),this._tabContainer=new N.TabContainer(this.scroller||this._element),this._tabContainer.tabIndex=0,this._element.children.length>0&&(this._tabContainer.childFocus=this._getFocusInto(this._element.children[0])),this._element.addEventListener("keydown",this._keyDownHandler.bind(this)),D._addEventListener(this._element,"pointerdown",this._MSPointerDownHandler.bind(this))}),{element:{get:function(){return this._element}},fixedDirection:{get:function(){return this._fixedDirection},set:function(x){this._fixedDirection=x}},fixedSize:{get:function(){return this._fixedSize},set:function(x){+x===x&&(x=Math.max(1,x),this._fixedSize=x)}},currentIndex:{get:function(){return this._element.children.length>0?this._currentIndex:-1},set:function(x){if(+x===x){var A=this._element.children.length;x=Math.max(0,Math.min(A-1,x)),this._currentIndex=x,this._tabContainer.childFocus=this._getFocusInto(this._element.children[x])}}},getAdjacent:{get:function(){return this._getAdjacent},set:function(x){this._getAdjacent=x}},scroller:{get:function(){return this._scroller},set:function(x){this._scroller=x}},_keyDownHandler:function _KeyboardBehavior_keyDownHandler(A){if(!A.altKey){if(D._matchesSelector(A.target,".win-interactive, .win-interactive *"))return;var V=this.currentIndex,R=this._element.children.length-1,N="rtl"===D._getComputedStyle(this._element).direction,B=N?x.rightArrow:x.leftArrow,F=N?x.leftArrow:x.rightArrow,W=this.getAdjacent&&this.getAdjacent(V,A.keyCode);if(+W===W)V=W;else{var H=V%this.fixedSize;A.keyCode===B?this.fixedDirection===U.FixedDirection.width?0!==H&&V--:V>=this.fixedSize&&(V-=this.fixedSize):A.keyCode===F?this.fixedDirection===U.FixedDirection.width?H!==this.fixedSize-1&&V++:V+this.fixedSize-H<=R&&(V+=this.fixedSize):A.keyCode===x.upArrow?this.fixedDirection===U.FixedDirection.height?0!==H&&V--:V>=this.fixedSize&&(V-=this.fixedSize):A.keyCode===x.downArrow?this.fixedDirection===U.FixedDirection.height?H!==this.fixedSize-1&&V++:V+this.fixedSize-H<=R&&(V+=this.fixedSize):A.keyCode===x.home?V=0:A.keyCode===x.end&&(V=this._element.children.length-1)}(V=Math.max(0,Math.min(this._element.children.length-1,V)))!==this.currentIndex&&(this._focus(V,A.keyCode),A.keyCode!==B&&A.keyCode!==F&&A.keyCode!==x.upArrow&&A.keyCode!==x.downArrow||A.stopPropagation(),A.preventDefault())}},_getFocusInto:function _KeyboardBehavior_getFocusInto(x,A){return x&&x.winControl&&x.winControl._getFocusInto?x.winControl._getFocusInto(A):x},_focus:function _KeyboardBehavior_focus(x,A){x=+x===x?x:this.currentIndex;var V=this._element.children[x];V&&(V=this._getFocusInto(V,A),this.currentIndex=x,D._setActive(V,this.scroller))},_MSPointerDownHandler:function _KeyboardBehavior_MSPointerDownHandler(x){var A=x.target;if(A!==this.element){for(;A.parentNode!==this.element;)A=A.parentNode;for(var V=-1;A;)V++,A=A.previousElementSibling;this.currentIndex=V}}},{FixedDirection:{height:"height",width:"width"}});return U}))})}})),define("WinJS/Utilities/_SafeHtml",["exports","../Core/_WinJS","../Core/_Global","../Core/_Base","../Core/_ErrorFromName","../Core/_Resources"],(function safeHTMLInit(x,A,V,R,D,N){"use strict";var U,B,F,W,H,z,G={get nonStaticHTML(){return"Unable to add dynamic content. A script attempted to inject dynamic content, or elements previously modified dynamically, that might be unsafe. For example, using the innerHTML property or the document.write method to add a script element will generate this exception. If the content is safe and from a trusted source, use a method to explicitly manipulate elements and attributes, such as createElement, or use setInnerHTMLUnsafe (or other unsafe method)."}};U=B=function(x,A){x.innerHTML=A},F=W=function(x,A){x.outerHTML=A},H=z=function(x,A,V){x.insertAdjacentHTML(A,V)};var j=V.MSApp;if(j&&j.execUnsafeLocalFunction)B=function(x,V){j.execUnsafeLocalFunction((function(){try{A._execUnsafe=!0,x.innerHTML=V}finally{A._execUnsafe=!1}}))},W=function(x,V){j.execUnsafeLocalFunction((function(){try{A._execUnsafe=!0,x.outerHTML=V}finally{A._execUnsafe=!1}}))},z=function(x,V,R){j.execUnsafeLocalFunction((function(){try{A._execUnsafe=!0,x.insertAdjacentHTML(V,R)}finally{A._execUnsafe=!1}}))};else if(V.msIsStaticHTML){var check=function(x){if(!V.msIsStaticHTML(x))throw new D("WinJS.Utitilies.NonStaticHTML",G.nonStaticHTML)};U=function(x,A){check(A),x.innerHTML=A},F=function(x,A){check(A),x.outerHTML=A},H=function(x,A,V){check(V),x.insertAdjacentHTML(A,V)}}R.Namespace._moduleDefine(x,"WinJS.Utilities",{setInnerHTML:U,setInnerHTMLUnsafe:B,setOuterHTML:F,setOuterHTMLUnsafe:W,insertAdjacentHTML:H,insertAdjacentHTMLUnsafe:z})})),define("WinJS/Utilities/_Select",["exports","../Core/_Base","./_SafeHtml"],(function selectInit(x,A,V){"use strict";A.Namespace._moduleDefine(x,"WinJS.UI",{_Select:A.Namespace._lazy((function(){var x=/[&<>'"]/g,R={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"},D=/[\u200e\u200f]/g;function stripDirectionMarker(x){return x.replace(D,"")}function stockGetValue(x){return this[x]}function stockGetLength(){return this.length}function fixDataSource(x){return x.getValue||(x.getValue=stockGetValue),x.getLength||(x.getLength=stockGetLength),x}return A.Class.define((function _Select_ctor(x,A){this._dataSource=fixDataSource(A.dataSource),this._index=A.index||0,this._domElement=x,this._domElement.tabIndex=0,A.disabled&&this.setDisabled(A.disabled);var V=this;this._domElement.addEventListener("change",(function(){V._index=V._domElement.selectedIndex}),!1),this._createSelectElement()}),{_index:0,_dataSource:null,dataSource:{get:function(){return this._dataSource},set:function(x){this._dataSource=fixDataSource(x),this._domElement&&this._createSelectElement()}},setDisabled:function(x){x?this._domElement.setAttribute("disabled","disabled"):this._domElement.removeAttribute("disabled")},_createSelectElement:function(){for(var A=this._dataSource.getLength(),D="",N=0;N<A;N++){var U=""+this._dataSource.getValue(N),B=U.replace(x,(function(x){return R[x]||""}));D+="<option value='"+stripDirectionMarker(B)+"'>"+B+"</option>"}V.setInnerHTMLUnsafe(this._domElement,D),this._domElement.selectedIndex=this._index},index:{get:function(){return Math.max(0,Math.min(this._index,this._dataSource.getLength()-1))},set:function(x){if(this._index!==x){this._index=x;var A=this._domElement;A&&A.selectedIndex!==x&&(A.selectedIndex=x)}}},value:{get:function(){return this._dataSource.getValue(this.index)}}})}))})})),define("WinJS/Utilities/_Telemetry",["exports"],(function telemetryInit(x){"use strict";x.send=function(x,A){}})),define("WinJS/Utilities/_UI",["exports","../Core/_BaseCoreUtils","../Core/_Base"],(function uiInit(x,A,V){"use strict";V.Namespace._moduleDefine(x,"WinJS.UI",{eventHandler:function(x){return A.markSupportedForProcessing(x)},Orientation:{horizontal:"horizontal",vertical:"vertical"},CountResult:{unknown:"unknown"},CountError:{noResponse:"noResponse"},DataSourceStatus:{ready:"ready",waiting:"waiting",failure:"failure"},FetchError:{noResponse:"noResponse",doesNotExist:"doesNotExist"},EditError:{noResponse:"noResponse",canceled:"canceled",notPermitted:"notPermitted",noLongerMeaningful:"noLongerMeaningful"},ObjectType:{item:"item",groupHeader:"groupHeader",header:"header",footer:"footer"},SelectionMode:{none:"none",single:"single",multi:"multi"},TapBehavior:{directSelect:"directSelect",toggleSelect:"toggleSelect",invokeOnly:"invokeOnly",none:"none"},SwipeBehavior:{select:"select",none:"none"},GroupHeaderTapBehavior:{invoke:"invoke",none:"none"}})})),define("WinJS/Utilities/_Xhr",["../Core/_Global","../Core/_Base","../Promise","../Scheduler"],(function xhrInit(x,A,V,R){"use strict";function schedule(x,A,V){R.schedule((function xhr_callback(){x(A)}),V,null,"WinJS.xhr")}function noop(){}var D=/^(\w+)\:\/\//;function xhr(A){var N;return new V((function(V,U,B){var F=R.currentPriority;N=new x.XMLHttpRequest;var W=!1,H=D.exec(A.url.toLowerCase());H?"file"===H[1]&&(W=!0):"file:"===x.location.protocol&&(W=!0),N.onreadystatechange=function(){N._canceled?N.onreadystatechange=noop:4===N.readyState?(N.status>=200&&N.status<300||W&&0===N.status?schedule(V,N,F):schedule(U,N,F),N.onreadystatechange=noop):schedule(B,N,F)},N.open(A.type||"GET",A.url,!0,A.user,A.password),N.responseType=A.responseType||"",Object.keys(A.headers||{}).forEach((function(x){N.setRequestHeader(x,A.headers[x])})),A.customRequestInitializer&&A.customRequestInitializer(N),void 0===A.data?N.send():N.send(A.data)}),(function(){N.onreadystatechange=noop,N._canceled=!0,N.abort()}))}return A.Namespace.define("WinJS",{xhr:xhr}),xhr})),define("WinJS/Utilities",["./Utilities/_Control","./Utilities/_Dispose","./Utilities/_ElementListUtilities","./Utilities/_ElementUtilities","./Utilities/_Hoverable","./Utilities/_ItemsManager","./Utilities/_KeyboardBehavior","./Utilities/_ParallelWorkQueue","./Utilities/_SafeHtml","./Utilities/_Select","./Utilities/_TabContainer","./Utilities/_Telemetry","./Utilities/_UI","./Utilities/_VersionManager","./Utilities/_Xhr"],(function(){})),define("WinJS/XYFocus",["require","exports","./Core/_Global","./Core/_Base","./Core/_BaseUtils","./Utilities/_ElementUtilities","./Core/_Events","./ControlProcessor/_OptionsParser"],(function(x,A,V,R,D,N,U,B){"use strict";var F,W,H,z,G,j=N.Key,q="data-win-xyfocus",Q="data-win-focus",K="win-focusable",J="win-xyfocus-suspended",X="win-xyfocus-togglemode",Y="win-xyfocus-togglemode-active",$="win-xbox",Z="msWinJSXYFocusControlMessage",ee="register",te="unregister",ie="dFocusEnter",ne="dFocusExit",re="left",se="right",oe="up",ae="down",le="focuschanging",ce="focuschanged",de=["A","BUTTON","IFRAME","INPUT","SELECT","TEXTAREA"],ue=30,he=20,pe=1e5;function findNextFocusElement(x,A){var V=_findNextFocusElementInternal(x,A);return V?V.target:null}function moveFocus(x,A){var R=findNextFocusElement(x,A);if(R){var D=V.document.activeElement;if(_trySetFocus(R,-1))return ge.dispatchEvent(ce,{previousFocusElement:D,keyCode:-1}),R}return null}function _xyFocus(x,R,D,U){if(D||V.document.activeElement!==F)H=null,F=null,W=null;else if(F&&W){var B=_toIRect(F.getBoundingClientRect());B.left===W.left&&B.top===W.top||(H=null,F=null,W=null)}var z=V.document.activeElement,j=_findNextFocusElementInternal(x,{focusRoot:A.focusRoot,historyRect:H,referenceElement:F,referenceRect:D});if(j&&_trySetFocus(j.target,R)){if(function updateHistoryRect(x,A){var V={top:-1,bottom:-1,right:-1,left:-1,height:0,width:0};x===re||x===se?(V.top=Math.max(A.targetRect.top,A.referenceRect.top,H?H.top:Number.MIN_VALUE),V.bottom=Math.min(A.targetRect.bottom,A.referenceRect.bottom,H?H.bottom:Number.MAX_VALUE),V.bottom<=V.top&&(V.top=A.targetRect.top,V.bottom=A.targetRect.bottom),V.height=V.bottom-V.top,V.width=Number.MAX_VALUE,V.left=Number.MIN_VALUE,V.right=Number.MAX_VALUE):(V.left=Math.max(A.targetRect.left,A.referenceRect.left,H?H.left:Number.MIN_VALUE),V.right=Math.min(A.targetRect.right,A.referenceRect.right,H?H.right:Number.MAX_VALUE),V.right<=V.left&&(V.left=A.targetRect.left,V.right=A.targetRect.right),V.width=V.right-V.left,V.height=Number.MAX_VALUE,V.top=Number.MIN_VALUE,V.bottom=Number.MAX_VALUE),H=V}(x,j),F=j.target,W=j.targetRect,N.hasClass(j.target,X)&&N.removeClass(j.target,Y),"IFRAME"===j.target.tagName){var q=j.target;if(G.isXYFocusEnabled(q)){var Q,K=_toIRect({left:j.referenceRect.left-j.targetRect.left,top:j.referenceRect.top-j.targetRect.top,width:j.referenceRect.width,height:j.referenceRect.height});(Q={})[Z]={type:ie,direction:x,referenceRect:K},q.contentWindow.postMessage(Q,"*")}}return ge.dispatchEvent(ce,{previousFocusElement:z,keyCode:R}),!0}return!U&&top!==window&&((K=D)||(K=V.document.activeElement?_toIRect(V.document.activeElement.getBoundingClientRect()):{top:-1,bottom:-1,right:-1,left:-1,height:0,width:0}),(Q={})[Z]={type:ne,direction:x,referenceRect:K},V.parent.postMessage(Q,"*"),!0)}function _findNextFocusElementInternal(x,R){(R=R||{}).focusRoot=R.focusRoot||A.focusRoot||V.document.body,R.historyRect=R.historyRect||{top:-1,bottom:-1,right:-1,left:-1,height:0,width:0};var D=Math.max(V.screen.availHeight,V.screen.availWidth),N=function getReferenceObject(x,A){var R,D;return(!x&&!A||x&&!x.parentNode)&&V.document.activeElement!==V.document.body&&(x=V.document.activeElement),D=x?_toIRect((R=x).getBoundingClientRect()):A?_toIRect(A):{top:-1,bottom:-1,right:-1,left:-1,height:0,width:0},{element:R,rect:D}}(R.referenceElement,R.referenceRect);if(N.element){var U=N.element.getAttribute(q)||N.element.getAttribute(Q);if(U){var F=B.optionsParser(U),W=F[x]||F[x[0].toUpperCase()+x.substr(1)];if(W){for(var H,z=N.element;!H&&z;)H=z.querySelector(W),z=z.parentElement;if(H)return H===V.document.activeElement?null:{target:H,targetRect:_toIRect(H.getBoundingClientRect()),referenceRect:N.rect,usedOverride:!0}}}}for(var G={element:null,rect:null,score:0},j=R.focusRoot.querySelectorAll("*"),K=0,J=j.length;K<J;K++){var X=j[K];if(N.element!==X&&_isFocusable(X)&&!_isInInactiveToggleModeContainer(X)){var Y=_toIRect(X.getBoundingClientRect());if(0!==Y.width&&0!==Y.height){var $=calculateScore(x,D,R.historyRect,N.rect,Y);$>G.score&&(G.element=X,G.rect=Y,G.score=$)}}}return G.element?{target:G.element,targetRect:G.rect,referenceRect:N.rect,usedOverride:!1}:null;function calculatePercentInShadow(x,A,V,R){if(x>=R||A<=V)return 0;var D=Math.min(A,R)-Math.max(x,V),N=Math.min(R-V,A-x);return 0===N?0:D/N}function calculateScore(x,A,V,R,D){var N,U,B=0,F=0,W=0;switch(x){case re:if(D.left>=R.left)break;N=calculatePercentInShadow(R.top,R.bottom,D.top,D.bottom),U=R.left-D.right,N>0?W=calculatePercentInShadow(V.top,V.bottom,D.top,D.bottom):F=R.bottom<=D.top?D.top-R.bottom:R.top-D.bottom;break;case se:if(D.right<=R.right)break;N=calculatePercentInShadow(R.top,R.bottom,D.top,D.bottom),U=D.left-R.right,N>0?W=calculatePercentInShadow(V.top,V.bottom,D.top,D.bottom):F=R.bottom<=D.top?D.top-R.bottom:R.top-D.bottom;break;case oe:if(D.top>=R.top)break;N=calculatePercentInShadow(R.left,R.right,D.left,D.right),U=R.top-D.bottom,N>0?W=calculatePercentInShadow(V.left,V.right,D.left,D.right):F=R.right<=D.left?D.left-R.right:R.left-D.right;break;case ae:if(D.bottom<=R.bottom)break;N=calculatePercentInShadow(R.left,R.right,D.left,D.right),U=D.top-R.bottom,N>0?W=calculatePercentInShadow(V.left,V.right,D.left,D.right):F=R.right<=D.left?D.left-R.right:R.left-D.right}return U>=0&&(F=A-F,(U=A-U)>=0&&F>=0&&(B=(U+=U*N)*ue+F*he+W*pe)),B}}function _toIRect(x){return{top:Math.floor(x.top),bottom:Math.floor(x.top+x.height),right:Math.floor(x.left+x.width),left:Math.floor(x.left),height:Math.floor(x.height),width:Math.floor(x.width)}}function _trySetFocus(x,A){return ge.dispatchEvent(le,{nextFocusElement:x,keyCode:A})||x.focus(),V.document.activeElement===x}function _isFocusable(x){var A=x.tagName;if(!x.hasAttribute("tabindex")&&-1===de.indexOf(A)&&!N.hasClass(x,K))return!1;if("IFRAME"===A&&!G.isXYFocusEnabled(x))return!1;if("DIV"===A&&x.winControl&&x.winControl.disabled)return!1;var V=N._getComputedStyle(x);return"-1"!==x.getAttribute("tabIndex")&&"none"!==V.display&&"hidden"!==V.visibility&&!x.disabled}function _isInInactiveToggleModeContainer(x){var A=function _findParentToggleModeContainer(x){for(var A=x.parentElement;A&&!_isToggleMode(A);)A=A.parentElement;return A}(x);return A&&!N.hasClass(A,Y)}function _isToggleMode(x){if(N.hasClass(V.document.body,$))return!1;if(N.hasClass(x,X))return!0;if("INPUT"===x.tagName){var A=x.type.toLowerCase();if("date"===A||"datetime"===A||"datetime-local"===A||"email"===A||"month"===A||"number"===A||"password"===A||"range"===A||"search"===A||"tel"===A||"text"===A||"time"===A||"url"===A||"week"===A)return!0}else if("TEXTAREA"===x.tagName)return!0;return!1}function _getStateHandler(x){var A=!1,V=!1,R=!1;x&&(A=N._matchesSelector(x,"."+J+", ."+J+" *"),V=_isToggleMode(x),R=N.hasClass(x,Y));var D=z.RestState;return A?D=z.SuspendedState:V&&(D=R?z.ToggleModeActiveState:z.ToggleModeRestState),D}function _handleKeyEvent(x){if(!x.defaultPrevented){var V=_getStateHandler(document.activeElement),R="";-1!==A.keyCodeMap.up.indexOf(x.keyCode)?R="up":-1!==A.keyCodeMap.down.indexOf(x.keyCode)?R="down":-1!==A.keyCodeMap.left.indexOf(x.keyCode)?R="left":-1!==A.keyCodeMap.right.indexOf(x.keyCode)&&(R="right"),R&&V.xyFocus(R,x.keyCode)&&x.preventDefault()}}function _handleCaptureKeyEvent(x){if(!x.defaultPrevented){var V=document.activeElement,R=!1,D=_getStateHandler(document.activeElement);-1!==A.keyCodeMap.accept.indexOf(x.keyCode)?R=D.accept(V):-1!==A.keyCodeMap.cancel.indexOf(x.keyCode)&&(R=D.cancel(V)),R&&x.preventDefault()}}if(A.keyCodeMap={left:[],right:[],up:[],down:[],accept:[],cancel:[]},A.focusRoot,A.findNextFocusElement=findNextFocusElement,A.moveFocus=moveFocus,function(x){var A=function(){function RestState(){}return RestState.accept=_clickElement,RestState.cancel=_nop,RestState.xyFocus=_xyFocus,RestState}();x.RestState=A;var V=function(){function SuspendedState(){}return SuspendedState.accept=_nop,SuspendedState.cancel=_nop,SuspendedState.xyFocus=_nop,SuspendedState}();x.SuspendedState=V;var R=function(){function ToggleModeRestState(){}return ToggleModeRestState.accept=function(x){return N.addClass(x,Y),!0},ToggleModeRestState.cancel=_nop,ToggleModeRestState.xyFocus=_xyFocus,ToggleModeRestState}();x.ToggleModeRestState=R;var D=function(){function ToggleModeActiveState(){}return ToggleModeActiveState.cancel=function(x){return x&&N.removeClass(x,Y),!0},ToggleModeActiveState.accept=_clickElement,ToggleModeActiveState.xyFocus=_nop,ToggleModeActiveState}();function _clickElement(x){return x&&x.click&&x.click(),!1}function _nop(){for(var x=[],A=0;A<arguments.length;A++)x[A-0]=arguments[A];return!1}x.ToggleModeActiveState=D}(z||(z={})),function(x){var A=[];function _safeForEach(x){for(var V=A.length-1;V>=0;V--)try{var R=A[V];R.contentWindow?x(R,V):A.splice(V,1)}catch(x){A.splice(V,1)}}x.count=function count(){return _safeForEach((function(){return!1})),A.length},x.getIFrameFromWindow=function getIFrameFromWindow(x){var A=V.document.querySelectorAll("IFRAME"),R=Array.prototype.filter.call(A,(function(A){return A.contentWindow===x}));return R.length?R[0]:null},x.isXYFocusEnabled=function isXYFocusEnabled(x){var A=!1;return _safeForEach((function(V){V===x&&(A=!0)})),A},x.registerIFrame=function registerIFrame(x){A.push(x)},x.unregisterIFrame=function unregisterIFrame(x){var V=-1;_safeForEach((function(A,R){A===x&&(V=R)})),-1!==V&&A.splice(V,1)}}(G||(G={})),V.document){A.keyCodeMap.left.push(j.GamepadLeftThumbstickLeft,j.GamepadDPadLeft,j.NavigationLeft),A.keyCodeMap.right.push(j.GamepadLeftThumbstickRight,j.GamepadDPadRight,j.NavigationRight),A.keyCodeMap.up.push(j.GamepadLeftThumbstickUp,j.GamepadDPadUp,j.NavigationUp),A.keyCodeMap.down.push(j.GamepadLeftThumbstickDown,j.GamepadDPadDown,j.NavigationDown),A.keyCodeMap.accept.push(j.GamepadA,j.NavigationAccept),A.keyCodeMap.cancel.push(j.GamepadB,j.NavigationCancel),V.addEventListener("message",(function(x){var A=null;try{if(!(A=x.source))return}catch(x){return}if(x.data&&x.data[Z]){var R=x.data[Z];switch(R.type){case ee:(D=G.getIFrameFromWindow(A))&&G.registerIFrame(D);break;case te:(D=G.getIFrameFromWindow(A))&&G.unregisterIFrame(D);break;case ie:_xyFocus(R.direction,-1,R.referenceRect,!0)||(_isFocusable(V.document.body)?V.document.body.focus():_xyFocus(R.direction,-1));break;case ne:var D=G.getIFrameFromWindow(A);if(V.document.activeElement!==D)break;var N=R.referenceRect,U=D.getBoundingClientRect();N.left+=U.left,N.top+=U.top,"number"==typeof N.right&&(N.right+=U.left),"number"==typeof N.bottom&&(N.bottom+=U.top),_xyFocus(R.direction,-1,N)}}})),D.ready().then((function(){if(N.hasWinRT&&V.Windows&&V.Windows.Xbox&&N.addClass(V.document.body,$),V.document.addEventListener("keydown",_handleCaptureKeyEvent,!0),V.document.addEventListener("keydown",_handleKeyEvent),V.top!==V.window){var x={};x[Z]={type:ee,version:1},V.parent.postMessage(x,"*")}}));var me={focusRoot:{get:function(){return A.focusRoot},set:function(x){A.focusRoot=x}},findNextFocusElement:findNextFocusElement,keyCodeMap:A.keyCodeMap,moveFocus:moveFocus,onfocuschanged:U._createEventProperty(ce),onfocuschanging:U._createEventProperty(le),_xyFocus:_xyFocus,_iframeHelper:G};(me=D._merge(me,U.eventMixin))._listeners={};var ge=me;R.Namespace.define("WinJS.UI.XYFocus",me)}})),define("WinJS/Fragments",["exports","./Core/_Global","./Core/_WinRT","./Core/_Base","./Core/_BaseUtils","./Core/_ErrorFromName","./Core/_Resources","./Core/_WriteProfilerMark","./Promise","./Utilities/_ElementUtilities","./Utilities/_SafeHtml","./Utilities/_Xhr"],(function fragmentLoaderInit(x,A,V,R,D,N,U,B,F,W,H,z){"use strict";if(A.document){var forEach=function(x,A){for(var V=0,R=x.length;V<R;V++)A(x[V],V)},G=A.document.head||A.document.getElementsByTagName("head")[0],j={},q={},Q={},K=!1,J={},X=B,Y=function getFragmentContentsXHR(x){return z({url:x}).then((function(x){return x.responseText}))};R.Namespace._moduleDefine(x,"WinJS.UI.Fragments",{renderCopy:function renderCopy(x,A){return renderImpl(x,A,!0)},render:function render(x,A){return renderImpl(x,A,!1)},cache:function cache(x){return initialize(),getStateRecord(x).then((function(x){return x.docfrag}))},clearCache:clearCache,_cacheStore:{get:function(){return J}},_getFragmentContents:{get:function(){return Y},set:function(x){Y=x}},_writeProfilerMark:{get:function(){return X},set:function(x){X=x}}})}function addLink(x){var A=x.href.toLowerCase();if(!(A in Q)){Q[A]=!0;var V=x.cloneNode(!1);V.href=x.href,G.appendChild(V)}}function getStateRecord(x,V){if("string"==typeof x)return function loadFromCache(x,V){var R=x.toLowerCase(),D=J[R];if(D)return V&&delete J[R],D.promise?D.promise:F.as(D);D={},V||(J[R]=D);var N=D.promise=function createEntry(x,V){return function populateDocument(x,V){var R=A.document.implementation.createHTMLDocument("frag"),D=R.createElement("base");R.head.appendChild(D);var N=R.createElement("a");return R.body.appendChild(N),D.href=A.document.location.href,N.setAttribute("href",V),D.href=N.href,x.document=R,Y(V).then((function(x){H.setInnerHTMLUnsafe(R.documentElement,x),R.head.appendChild(D)}))}(x,V).then((function(){return x.document?function processDocument(x,V){var R=V.document,D=R.body,N=[];forEach(R.querySelectorAll('link[rel="stylesheet"], link[type="text/css"]'),addLink),forEach(R.getElementsByTagName("style"),(function(A,V){!function addStyle(x,A,V){var R=(A+"script["+V+"]").toLowerCase();R in q||(q[R]=!0,G.appendChild(x.cloneNode(!0)))}(A,x,V)}));var U=F.as();forEach(R.getElementsByTagName("script"),(function(V,R){var D=function addScript(x,V,R,D){var N=x.src,U=!N;if(U&&(N=V+"script["+R+"]"),!((N=N.toLowerCase())in j)){var B=null;j[N]=!0;var W=A.document.createElement("script");if(x.language&&W.setAttribute("language","javascript"),W.setAttribute("type",x.type),W.setAttribute("async","false"),x.id&&W.setAttribute("id",x.id),U){var H=x.text;B=D.then((function(){W.text=H})).then(null,(function(){}))}else B=new F((function(A){W.onload=W.onerror=function(){A()},W.setAttribute("src",x.src)}));return G.appendChild(W),{promise:B,inline:U}}}(V,x,R,U);D&&(D.inline||(U=D.promise),N.push(D.promise))})),forEach(D.getElementsByTagName("img"),(function(x){x.src=x.src})),forEach(D.getElementsByTagName("a"),(function(x){if(""!==x.href){var A=x.getAttribute("href");A&&"#"!==A[0]&&(x.href=x.href)}}));for(var B=D.getElementsByTagName("script");B.length>0;){var W=B[0];W.parentNode.removeChild(W)}return F.join(N).then((function(){for(var x=A.document.createDocumentFragment(),D=A.document.importNode(R.body,!0);D.childNodes.length>0;)x.appendChild(D.childNodes[0]);return V.docfrag=x,V}))}(V,x):x})).then((function(){return x.document&&delete x.document,x}))}(D,x);return D.promise.then((function(){delete D.promise})),N}(x,V);var R={docfrag:W.data(x).docFragment};if(!R.docfrag){for(var D=A.document.createDocumentFragment();x.childNodes.length>0;)D.appendChild(x.childNodes[0]);R.docfrag=W.data(x).docFragment=D,x.setAttribute("data-win-hasfragment","")}return V&&clearCache(x),F.as(R)}function initialize(){K||(K=!0,forEach(G.querySelectorAll("script"),(function(x){j[x.src.toLowerCase()]=!0})),forEach(G.querySelectorAll('link[rel="stylesheet"], link[type="text/css"]'),(function(x){Q[x.href.toLowerCase()]=!0})))}function renderImpl(x,V,R){return x instanceof A.HTMLElement&&D._getProfilerMarkIdentifier(x),initialize(),getStateRecord(x,!R).then((function(x){var A=x.docfrag;R&&(A=A.cloneNode(!0));for(var D,N=A.firstChild;N;)1===N.nodeType&&(N.msParentSelectorScope=!0),N=N.nextSibling;return V?(V.appendChild(A),D=V):D=A,D}))}function clearCache(x){x?"string"==typeof x?delete J[x.toLowerCase()]:(delete W.data(x).docFragment,x.removeAttribute("data-win-hasfragment")):J={}}})),define("WinJS/Application/_State",["exports","../Core/_Global","../Core/_WinRT","../Core/_Base","../Core/_BaseUtils","../Promise"],(function stateInit(x,A,V,R,D,N){"use strict";V.Windows.Storage.FileIO&&V.Windows.Storage.ApplicationData&&V.Windows.Storage.CreationCollisionOption?function initWithWinRT(){var A,D,N,U=R.Class.define((function IOHelper_ctor(x){this.folder=x,this._path=x.path,x.tryGetItemAsync&&(this._tryGetItemAsync=x.tryGetItemAsync.bind(x))}),{_tryGetItemAsync:function(x){return this.folder.getFileAsync(x).then(null,(function(){return!1}))},exists:function(x){return this._tryGetItemAsync(x).then((function(x){return!!x}))},remove:function(x){return this._tryGetItemAsync(x).then((function(x){return!!x&&x.deleteAsync()})).then(null,(function(){return!1}))},writeText:function(x,A){var R=V.Windows.Storage;return this.folder.createFileAsync(x,R.CreationCollisionOption.openIfExists).then((function(x){return R.FileIO.writeTextAsync(x,A)}))},readText:function(x,A){var R=V.Windows.Storage;return this._tryGetItemAsync(x).then((function(x){return x?R.FileIO.readTextAsync(x):A})).then(null,(function(){return A}))}},{supportedForProcessing:!1});R.Namespace._moduleDefine(x,"WinJS.Application",{local:{get:function(){return A||(A=new U(V.Windows.Storage.ApplicationData.current.localFolder)),A}},temp:{get:function(){return D||(D=new U(V.Windows.Storage.ApplicationData.current.temporaryFolder)),D}},roaming:{get:function(){return N||(N=new U(V.Windows.Storage.ApplicationData.current.roamingFolder)),N}}})}():function initWithStub(){var A=R.Class.define((function InMemoryHelper_ctor(){this.storage={}}),{exists:function(x){return N.as(void 0!==this.storage[x])},remove:function(x){return delete this.storage[x],N.as()},writeText:function(x,A){return this.storage[x]=A,N.as(A.length)},readText:function(x,A){var V=this.storage[x];return N.as("string"==typeof V?V:A)}},{supportedForProcessing:!1});R.Namespace._moduleDefine(x,"WinJS.Application",{local:new A,temp:new A,roaming:new A})}();var U={};R.Namespace._moduleDefine(x,"WinJS.Application",{sessionState:{get:function(){return U},set:function(x){U=x}},_loadState:function(A){return 3===A.previousExecutionState?x.local.readText("_sessionState.json","{}").then((function(A){var V=JSON.parse(A);V&&Object.keys(V).length>0&&(x._sessionStateLoaded=!0),x.sessionState=V})).then(null,(function(){x.sessionState={}})):N.as()},_oncheckpoint:function(V,R){if(!(A.MSApp&&A.MSApp.getViewOpener&&A.MSApp.getViewOpener())){var D=x.sessionState;if(D&&Object.keys(D).length>0||x._sessionStateLoaded){var N;try{N=JSON.stringify(D)}catch(x){N="",R.queueEvent({type:"error",detail:x})}V.setPromise(x.local.writeText("_sessionState.json",N).then(null,(function(x){R.queueEvent({type:"error",detail:x})})))}}}})})),define("WinJS/Navigation",["exports","./Core/_Base","./Core/_Events","./Core/_WriteProfilerMark","./Promise"],(function navigationInit(x,A,V,R,D){"use strict";var N=new(A.Class.mix(A.Class.define(null,{},{supportedForProcessing:!1}),V.eventMixin)),U={backStack:[],current:{location:"",initialPlaceholder:!0},forwardStack:[]},B=V._createEventProperty,raiseBeforeNavigate=function(x){return D.as().then((function(){var A=D.as(),V=N.dispatchEvent("beforenavigate",{setPromise:function(x){A=A.then((function(){return x}))},location:x.location,state:x.state});return A.then((function beforeNavComplete(x){return V||x}))}))},raiseNavigating=function(x){return D.as().then((function(){var A=D.as();return N.dispatchEvent("navigating",{setPromise:function(x){A=A.then((function(){return x}))},location:U.current.location,state:U.current.state,delta:x}),A}))},raiseNavigated=function(x,A){var V=D.as(),R={value:x,location:U.current.location,state:U.current.state,setPromise:function(x){V=V.then((function(){return x}))}};return!x&&A&&(R.error=A),N.dispatchEvent("navigated",R),V},go=function(x,A,V,R){return(x=Math.min(x,A.length))>0?raiseBeforeNavigate(A[A.length-x]).then((function goBeforeCompleted(D){if(D)return!1;for(V.push(U.current);x-1>0;)x--,V.push(A.pop());return U.current=A.pop(),raiseNavigating(R).then(raiseNavigated,(function(x){throw raiseNavigated(void 0,x||!0),x})).then((function(){return!0}))})):D.wrap(!1)};A.Namespace._moduleDefine(x,"WinJS.Navigation",{canGoForward:{get:function(){return U.forwardStack.length>0}},canGoBack:{get:function(){return U.backStack.length>0}},location:{get:function(){return U.current.location}},state:{get:function(){return U.current.state},set:function(x){U.current.state=x}},history:{get:function(){return U},set:function(x){(U=x).backStack=U.backStack||[],U.forwardStack=U.forwardStack||[],U.current=U.current||{location:"",initialPlaceholder:!0},U.current.location=U.current.location||""}},forward:function(x){return go(x=x||1,U.forwardStack,U.backStack,x)},back:function(x){return go(x=x||1,U.backStack,U.forwardStack,-x)},navigate:function(x,A){var V={location:x,state:A};return raiseBeforeNavigate(V).then((function navBeforeCompleted(x){return!x&&(U.current.initialPlaceholder||U.backStack.push(U.current),U.forwardStack=[],U.current=V,raiseNavigating().then(raiseNavigated,(function(x){throw raiseNavigated(void 0,x||!0),x})).then((function(){return!0})))}))},addEventListener:function(x,A,V){N.addEventListener(x,A,V)},removeEventListener:function(x,A,V){N.removeEventListener(x,A,V)},onnavigated:B("navigated"),onnavigating:B("navigating"),onbeforenavigate:B("beforenavigate")})})),define("WinJS/Application",["exports","./Core/_Global","./Core/_WinRT","./Core/_Base","./Core/_Events","./Core/_Log","./Core/_WriteProfilerMark","./Application/_State","./Navigation","./Promise","./_Signal","./Scheduler","./Utilities/_ElementUtilities"],(function applicationInit(x,A,V,R,D,N,U,B,F,W,H,z,G){"use strict";A.Debug&&(A.Debug.setNonUserCodeExceptions=!0);var j,q=[],Q=null,K=null,J=!1,X=!1,Y=A.Symbol,$=!!Y&&"symbol"==typeof Y.iterator,Z=R.Class.mix(R.Class.define(null,{},{supportedForProcessing:!1}),D.eventMixin),ee=new Z,te=D._createEventProperty,ie={},ne=0,re={_registered:!1,updateRegistration:function Application_TypeToSearch_updateRegistration(){var x=ee._listeners&&ee._listeners.requestingfocusonkeyboardinput||[];!re._registered&&x.length>0&&(re._updateKeydownCaptureListeners(A.top,!0),re._registered=!0),re._registered&&0===x.length&&(re._updateKeydownCaptureListeners(A.top,!1),re._registered=!1)},_keydownCaptureHandler:function Application_TypeToSearch_keydownCaptureHandler(x){re._registered&&re._shouldKeyTriggerTypeToSearch(x)&&function requestingFocusOnKeyboardInput(){dispatchEvent({type:"beforerequestingfocusonkeyboardinput"})}()},_frameLoadCaptureHandler:function Application_TypeToSearch_frameLoadCaptureHandler(x){re._registered&&re._updateKeydownCaptureListeners(x.target.contentWindow,!0)},_updateKeydownCaptureListeners:function Application_TypeToSearch_updateKeydownCaptureListeners(x,A){if(x){try{A?x.document.addEventListener("keydown",re._keydownCaptureHandler,!0):x.document.removeEventListener("keydown",re._keydownCaptureHandler,!0)}catch(x){}if(x.frames)for(var V=0,R=x.frames.length;V<R;V++){var D=x.frames[V];re._updateKeydownCaptureListeners(D,A);try{A?D.frameElement&&D.frameElement.addEventListener("load",re._frameLoadCaptureHandler,!0):D.frameElement&&D.frameElement.removeEventListener("load",re._frameLoadCaptureHandler,!0)}catch(x){}}}},_shouldKeyTriggerTypeToSearch:function Application_TypeToSearch_shouldKeyTriggerTypeToSearch(x){var A=!1;if(!x.metaKey&&(!x.ctrlKey&&!x.altKey||x.getModifierState&&x.getModifierState("AltGraph")))switch(x.keyCode){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 96:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 186:case 187:case 188:case 189:case 190:case 191:case 192:case 219:case 220:case 221:case 222:case 223:case 226:case 229:case 231:A=!0}return A}};function safeSerialize(x){var V;try{var R=[];V=JSON.stringify(x,(function(x,V){return V===A?"[window]":V instanceof A.HTMLElement?"[HTMLElement]":"function"==typeof V?"[function]":"object"==typeof V?null===V?V:-1===R.indexOf(V)?(R.push(V),V):"[circular]":V}))}catch(x){V=JSON.stringify("[object]")}return V}function fatalErrorHandler(V){if(N.log&&N.log(safeSerialize(V),"winjs","error"),A.document&&x._terminateApp){var R=V.detail,D=R&&(R.number||R.exception&&(R.exception.number||R.exception.code)||R.error&&R.error.number||R.errorCode||0),U={description:safeSerialize(R),stack:R&&(R.stack||R.exception&&(R.exception.stack||R.exception.message)||R.error&&R.error.stack||null),errorNumber:D,number:D};x._terminateApp(U,V)}}function defaultTerminateAppHandler(x,A){}var se=defaultTerminateAppHandler;function captureDeferral(x){var A="def"+ne++;return{deferral:ie[A]=x.getDeferral(),id:A}}function cleanupAllPendingDeferrals(){ie&&(Object.keys(ie).forEach((function(x){ie[x].complete()})),ie={})}function dispatchEvent(x){var A=W.as();x.setPromise=function(x){A=A.then((function(){return x}))},x._stoppedImmediatePropagation=!1,x.stopImmediatePropagation=function(){x._stoppedImmediatePropagation=!0},x.detail=x.detail||{},"object"==typeof x.detail&&(x.detail.setPromise=x.setPromise);try{if(ee._listeners){var V=!1;if(N=ee._listeners[x.type])for(var R=0,D=N.length;R<D&&!x._stoppedImmediatePropagation;R++)V=N[R].listener(x)||V}var N=oe[x.type];N&&N.forEach((function dispatchOne(A){A(x,V)}))}catch(A){"error"===x.type?fatalErrorHandler(x):queueEvent({type:"error",detail:A})}function cleanup(A){return x._deferral&&function completeDeferral(x,A){A&&(x=ie[A],delete ie[A]),x&&x.complete()}(x._deferral,x._deferralID),A}return A.then(cleanup,(function(x){if(!(x=cleanup(x))||"Canceled"!==x.name)return W.wrapError(x)}))}function drainOneEvent(x){return 0===x.length?function createEventQueuedSignal(){return K||(K=new H).promise.done((function(){K=null}),(function(){K=null})),K}().promise:dispatchEvent(x.shift()).then(null,(function drainError(x){queueEvent({type:"error",detail:x})}))}function drainQueue(x){function drainNext(){return drainQueue}var A=x.job._queue;0===A.length&&q.length>0&&(A=x.job._queue=copyAndClearQueue()),x.setPromise(drainOneEvent(A).then(drainNext,drainNext))}function queueEvent(x){q.push(x),J&&K&&K.complete(drainQueue)}function copyAndClearQueue(){var x=q;return q=[],x}var oe={activated:[function Application_activatedHandler(){queueEvent({type:"ready"})}],checkpoint:[function Application_checkpointHandler(A){B._oncheckpoint(A,x)}],error:[function Application_errorHandler(x,A){A||fatalErrorHandler(x)}],backclick:[function Application_backClickHandler(x,A){A?x._winRTBackPressedEvent.handled=!0:F.canGoBack&&(F.back(),x._winRTBackPressedEvent.handled=!0)}],beforerequestingfocusonkeyboardinput:[function Application_beforeRequestingFocusOnKeyboardInputHandler(x,A){A||dispatchEvent({type:"requestingfocusonkeyboardinput"})}]};function activatedHandler(x){var A=captureDeferral(x.activatedOperation);B._loadState(x).then((function(){queueEvent({type:"activated",detail:x,_deferral:A.deferral,_deferralID:A.id})}))}function suspendingHandler(x){var A=captureDeferral(x.suspendingOperation);queueEvent({type:"checkpoint",_deferral:A.deferral,_deferralID:A.id})}function beforeUnloadHandler(){cleanupAllPendingDeferrals(),queueEvent({type:"unload"})}function errorHandler(A){var V={};for(var R in A)V[R]=A[R];var D=!0,N=x._terminateApp;try{x._terminateApp=function(x,A){D=!1,N!==defaultTerminateAppHandler&&N(x,A)},dispatchEvent({type:"error",detail:{error:V,errorLine:A.lineno,errorCharacter:A.colno,errorUrl:A.filename,errorMessage:A.message}})}finally{x._terminateApp=N}return D}function promiseErrorHandler(x){var A=x.detail,V=A.id;if(A.parent)A.handler&&j&&delete j[V];else{if(A.exception instanceof Error){var R={stack:A.exception.stack,message:A.exception.message};A.exception=R}var D=!j;(j=j||[])[V]=A,D&&z.schedule((function Application_async_promiseErrorHandler(){var x=j;j=null,x.forEach((function(x){queueEvent({type:"error",detail:x})}))}),z.Priority.high,null,"WinJS.Application._queuePromiseErrors")}}function commandsRequested(x){var A={e:x,applicationcommands:void 0};ee.dispatchEvent("settings",A)}function hardwareButtonBackPressed(x){var A={type:"backclick"};Object.defineProperty(A,"_winRTBackPressedEvent",{value:x,enumerable:!1}),dispatchEvent(A)}function edgyStarting(x){dispatchEvent({type:"edgystarting",kind:x.kind})}function edgyCompleted(x){dispatchEvent({type:"edgycompleted",kind:x.kind})}function edgyCanceled(x){dispatchEvent({type:"edgycanceled",kind:x.kind})}function getNavManager(){var x=V.Windows.UI.Core.SystemNavigationManager;return $&&x?x.getForCurrentView():null}A.document&&A.document.addEventListener("DOMContentLoaded",(function domContentLoadedHandler(){queueEvent({type:"loaded"});var x={arguments:"",kind:"Windows.Launch",previousExecutionState:0};B._loadState(x).then((function(){queueEvent({type:"activated",detail:x})}))}),!1);var ae=R.Namespace._moduleDefine(x,"WinJS.Application",{stop:function Application_stop(){ae.onactivated=null,ae.oncheckpoint=null,ae.onerror=null,ae.onloaded=null,ae.onready=null,ae.onsettings=null,ae.onunload=null,ae.onbackclick=null,ee=new Z,B.sessionState={},J=!1,copyAndClearQueue(),Q&&Q.cancel(),Q=null,K=null,function unregister(){if(X){if(X=!1,A.removeEventListener("beforeunload",beforeUnloadHandler,!1),A.document){if(V.Windows.UI.WebUI.WebUIApplication){A.removeEventListener("error",errorHandler,!1);var x=V.Windows.UI.WebUI.WebUIApplication;x.removeEventListener("activated",activatedHandler,!1),x.removeEventListener("suspending",suspendingHandler,!1)}V.Windows.UI.ApplicationSettings.SettingsPane&&V.Windows.UI.ApplicationSettings.SettingsPane.getForCurrentView().removeEventListener("commandsrequested",commandsRequested);var R=getNavManager();if(R?R.removeEventListener("backrequested",hardwareButtonBackPressed):V.Windows.Phone.UI.Input.HardwareButtons&&V.Windows.Phone.UI.Input.HardwareButtons.removeEventListener("backpressed",hardwareButtonBackPressed),V.Windows.UI.Input.EdgeGesture){var D=V.Windows.UI.Input.EdgeGesture.getForCurrentView();D.removeEventListener("starting",edgyStarting),D.removeEventListener("completed",edgyCompleted),D.removeEventListener("canceled",edgyCanceled)}}W.removeEventListener("error",promiseErrorHandler)}}(),re.updateRegistration(),cleanupAllPendingDeferrals()},addEventListener:function Application_addEventListener(x,A,V){ee.addEventListener(x,A,V),"requestingfocusonkeyboardinput"===x&&re.updateRegistration()},removeEventListener:function Application_removeEventListener(x,A,V){ee.removeEventListener(x,A,V),"requestingfocusonkeyboardinput"===x&&re.updateRegistration()},checkpoint:function Application_checkpoint(){queueEvent({type:"checkpoint"})},start:function Application_start(){!function register(){if(!X){if(X=!0,A.addEventListener("beforeunload",beforeUnloadHandler,!1),A.document){if(A.addEventListener("error",errorHandler,!1),V.Windows.UI.WebUI.WebUIApplication){var x=V.Windows.UI.WebUI.WebUIApplication;x.addEventListener("activated",activatedHandler,!1),x.addEventListener("suspending",suspendingHandler,!1)}V.Windows.UI.ApplicationSettings.SettingsPane&&V.Windows.UI.ApplicationSettings.SettingsPane.getForCurrentView().addEventListener("commandsrequested",commandsRequested);var R=getNavManager();if(R?R.addEventListener("backrequested",hardwareButtonBackPressed):V.Windows.Phone.UI.Input.HardwareButtons&&V.Windows.Phone.UI.Input.HardwareButtons.addEventListener("backpressed",hardwareButtonBackPressed),V.Windows.UI.Input.EdgeGesture){var D=V.Windows.UI.Input.EdgeGesture.getForCurrentView();D.addEventListener("starting",edgyStarting),D.addEventListener("completed",edgyCompleted),D.addEventListener("canceled",edgyCanceled)}}W.addEventListener("error",promiseErrorHandler)}}(),J=!0,function startEventQueue(){function markSync(){V=!0}for(var x,A=[],V=!0;V;)0===A.length&&q.length>0&&(A=copyAndClearQueue()),V=!1,(x=drainOneEvent(A)).done(markSync,markSync);(Q=z.schedule((function Application_pumpEventQueue(A){function drainNext(){return drainQueue}A.setPromise(x.then(drainNext,drainNext))}),z.Priority.high,null,"WinJS.Application._pumpEventQueue"))._queue=A}()},queueEvent:queueEvent,_dispatchEvent:dispatchEvent,_terminateApp:{get:function Application_terminateApp_get(){return se},set:function Application_terminateApp_set(x){se=x}},_applicationListener:R.Namespace._lazy((function(){return new G._GenericListener("Application",ae)})),oncheckpoint:te("checkpoint"),onunload:te("unload"),onactivated:te("activated"),onloaded:te("loaded"),onready:te("ready"),onsettings:te("settings"),onerror:te("error"),onbackclick:te("backclick")})})),define("WinJS/Animations/_Constants",["exports","../Core/_Base"],(function animationsConstantsInit(x,A){"use strict";A.Namespace._moduleDefine(x,"WinJS.UI",{PageNavigationAnimation:{turnstile:"turnstile",slide:"slide",enterPage:"enterPage",continuum:"continuum"}})})),define("WinJS/Animations/_TransitionAnimation",["exports","../Core/_Global","../Core/_WinRT","../Core/_Base","../Core/_BaseUtils","../Promise","../Scheduler","../Utilities/_ElementUtilities"],(function transitionAnimationInit(x,A,V,R,D,N,U,B){"use strict";if(A.document){var F,W,H=D._browserStyleEquivalents,z=0,G=[],j=R.Class.define((function StyleCache_ctor(x,A,V){this.cref=0,this.id=x,this.desc=A,this.removed={},this.prevStyles=A.props.map((function(x){return V[x[0]]})),this.prevNames=this.names=V[A.nameProp],A.styleCaches[x]=this}),{destroy:function StyleCache_destroy(x,A){var V=this.desc;delete V.styleCaches[this.id],A||(""===this.prevNames&&this.prevStyles.every((function(x){return""===x}))?x[V.shorthandProp]="":(V.props.forEach((function(A,V){x[A[0]]=this.prevStyles[V]}),this),x[V.nameProp]=this.prevNames))},removeName:function StyleCache_removeName(x,A,V,R){var D=this.names,N=D.split(", "),U=N.lastIndexOf(A);U>=0&&(N.splice(U,1),this.names=D=N.join(", "),""===D&&this.desc.isTransition&&(D="none")),--this.cref?(x[this.desc.nameProp]=D,function isUniqueKeyframeName(x){return"WinJSUIAnimation"===x.substring(0,16)}(A)||(this.removed[A]=!0)):(V&&"none"===D&&(x[this.desc.nameProp]=D,resolveStyles(V)),this.destroy(x,R))}}),q={shorthandProp:H.transition.scriptName,nameProp:H["transition-property"].scriptName,nameField:"property",props:[[H["transition-duration"].scriptName,"duration","ms"],[H["transition-timing-function"].scriptName,"timing",""],[H["transition-delay"].scriptName,"delay","ms"]],isTransition:!0,styleCaches:[]},Q={shorthandProp:H.animation.scriptName,nameProp:H["animation-name"].scriptName,nameField:"keyframe",props:[[H["animation-duration"].scriptName,"duration","ms"],[H["animation-timing-function"].scriptName,"timing",""],[H["animation-delay"].scriptName,"delay","ms"],[H["animation-iteration-count"].scriptName,"","1"],[H["animation-direction"].scriptName,"","normal"],[H["animation-fill-mode"].scriptName,"","both"]],isTransition:!1,styleCaches:[]},K=0,J=function isAnimationEnabledImpl(){return function initAnimations(){W||(W={animationsEnabled:!0})}(),K+W.animationsEnabled>0},X=function _animationTimeAdjustmentImpl(x){return x*Y},Y=1,$=0;R.Namespace._moduleDefine(x,"WinJS.UI",{disableAnimations:function(){K--},enableAnimations:function(){K++},isAnimationEnabled:{get:function(){return J},set:function(x){J=x}},_libraryDelay:{get:function(){return $},set:function(x){$=x}},executeAnimation:function(x,A){return applyAction(x,animationAdjustment(A),executeElementAnimation)},executeTransition:function(x,A){return applyAction(x,animationAdjustment(A),executeElementTransition)},_animationTimeAdjustment:{get:function(){return X},set:function(x){X=x}}}),R.Namespace._moduleDefine(x,"WinJS.Utilities",{_fastAnimations:{get:function(){return.05===Y},set:function(x){Y=x?.05:1}},_slowAnimations:{get:function(){return 3===Y},set:function(x){Y=x?3:1}},_animationFactor:{get:function(){return Y},set:function(x){Y=x}}})}function makeArray(x){return Array.isArray(x)||x instanceof A.NodeList||x instanceof A.HTMLCollection?x:x?[x]:[]}function resolveStyles(x){B._getComputedStyle(x,null).opacity}function copyWithEvaluation(A,V){return function(R){var D={};for(var N in R){var U=R[N];"function"==typeof U&&(U=U(A,V)),D[N]=U}return D.exactTiming||(D.delay+=x._libraryDelay),D}}function registerAction(x,A,V){G[x+"|"+A]=V}function unregisterAction(x,A){delete G[x+"|"+A]}function setTemporaryStyles(x,A,V,R,D){var N=D.styleCaches[A]||new j(A,D,V);N.cref+=R.length,R.forEach((function(x){!function stopExistingAction(x,A){var V=G[x+"|"+A];V&&V(1)}(A,x.property)})),(D.isTransition||R.some((function(x){return N.removed[x[D.nameField]]})))&&(resolveStyles(x),N.removed={});var U=R.map((function(x){return x[D.nameField]+" "+D.props.map((function(A){return(A[1]?x[A[1]]:"")+A[2]})).join(" ")})).join(", "),B=R.map((function(x){return x[D.nameField]})).join(", ");return""!==N.names&&(U=N.names+", "+U,B=N.names+", "+B),V[D.shorthandProp]=U,N.names=B,N}function completePromise(x,A){A?x():U.schedule((function _Animation_completeAnimationPromise(){x()}),U.Priority.normal,null,"WinJS.UI._Animation._completeAnimationPromise")}function executeElementTransition(x,V,R,U,W){if(R.length>0){var H=x.style,z=B._uniqueID(x);if(F||(F=A.document.createElement("DIV").style),(R=R.map(copyWithEvaluation(V,x))).forEach((function(x){var A=D._getCamelCasedName(x.property);x.hasOwnProperty("from")&&(H[A]=x.from),F[A]=x.to,x.to=F[A],x.propertyScriptName=A})),W){var G=setTemporaryStyles(x,z,H,R,q),j=x.disabled?A.document:x;R.forEach((function(V){var R;U.push(new N((function(N){R=function(R){onTransitionEnd&&(j.removeEventListener(D._browserEventEquivalents.transitionEnd,onTransitionEnd,!1),unregisterAction(z,V.property),G.removeName(H,V.propertyScriptName,R?x:null,V.skipStylesReset),A.clearTimeout(B),onTransitionEnd=null),completePromise(N,2===R)};var onTransitionEnd=function(A){A.target===x&&A.propertyName===V.property&&R()};registerAction(z,V.property,R),j.addEventListener(D._browserEventEquivalents.transitionEnd,onTransitionEnd,!1);var U=0;H[V.propertyScriptName]!==V.to&&(H[V.propertyScriptName]=V.to,U=50);var B=A.setTimeout((function(){B=A.setTimeout(R,V.delay+V.duration)}),U)}),(function(){R(2)})))}))}else R.forEach((function(x){H[x.propertyScriptName]=x.to}))}}function executeElementAnimation(x,V,R,U,F){if(F&&R.length>0){var W,G=x.style,j=B._uniqueID(x);R=R.map(copyWithEvaluation(V,x));var q=x.disabled?A.document:x;R.forEach((function(x){if(x.keyframe)x.keyframe=H.animationPrefix+x.keyframe;else{W||(W=A.document.createElement("STYLE"),A.document.documentElement.appendChild(W)),x.keyframe=function getUniqueKeyframeName(){return"WinJSUIAnimation"+ ++z}();var V="@"+H.keyframes+" "+x.keyframe+" { from {"+x.property+":"+x.from+";} to {"+x.property+":"+x.to+";}}";W.sheet.insertRule(V,0)}}));var K=setTemporaryStyles(x,j,G,R,Q),J=[],X=[];R.forEach((function(V){var R;X.push(new N((function(N){R=function(x){onAnimationEnd&&(q.removeEventListener(D._browserEventEquivalents.animationEnd,onAnimationEnd,!1),A.clearTimeout(U),onAnimationEnd=null),completePromise(N,2===x)};var onAnimationEnd=function(A){A.target===x&&A.animationName===V.keyframe&&R()};registerAction(j,V.property,R),J.push({id:j,property:V.property,style:G,keyframe:V.keyframe});var U=A.setTimeout((function(){U=A.setTimeout(R,V.delay+V.duration)}),50);q.addEventListener(D._browserEventEquivalents.animationEnd,onAnimationEnd,!1)}),(function(){R(2)})))})),W&&A.setTimeout((function(){var x=W.parentElement;x&&x.removeChild(W)}),50);var cleanupAnimations=function(){for(var x=0;x<J.length;x++){var A=J[x];unregisterAction(A.id,A.property),K.removeName(A.style,A.keyframe)}};U.push(N.join(X).then(cleanupAnimations,cleanupAnimations))}}function applyAction(A,V,R){try{for(var D=x.isAnimationEnabled(),B=makeArray(A),F=makeArray(V),W=[],H=0;H<B.length;H++)if(Array.isArray(B[H]))for(var z=0;z<B[H].length;z++)R(B[H][z],H,F,W,D);else R(B[H],H,F,W,D);return W.length?N.join(W):U.schedulePromiseNormal(null,"WinJS.UI._Animation._completeActionPromise").then(null,(function(){}))}catch(x){return N.wrapError(x)}}function animationAdjustment(x){return 1===Y?x:function adjustAnimationTime(x){return Array.isArray(x)?x.map((function(x){return adjustAnimationTime(x)})):x?(x.delay=X(x.delay),x.duration=X(x.duration),x):void 0}(x)}})),define("WinJS/Animations",["exports","./Core/_Global","./Core/_Base","./Core/_BaseUtils","./Core/_WriteProfilerMark","./Utilities/_ElementUtilities","./Animations/_Constants","./Animations/_TransitionAnimation","./Promise"],(function animationsInit(x,A,V,R,D,N,U,B,F){"use strict";var W=R._browserStyleEquivalents.transform,H=[{top:"0px",left:"11px",rtlflip:!0}],z=V.Class.define((function OffsetArray_ctor(x,A,V){V=V||H,Array.isArray(x)&&x.length>0?(this.offsetArray=x,1===x.length&&(this.keyframe=checkKeyframe(x[0],V[0],A))):x&&x.hasOwnProperty("top")&&x.hasOwnProperty("left")?(this.offsetArray=[x],this.keyframe=checkKeyframe(x,V[0],A)):(this.offsetArray=V,this.keyframe=function chooseKeyframe(x,A){return A&&x.rtlflip?keyframeCallback(A):A}(V[0],A))}),{getOffset:function(x){return x>=this.offsetArray.length&&(x=this.offsetArray.length-1),this.offsetArray[x]}},{supportedForProcessing:!1});function checkKeyframe(x,A,V){return x.keyframe?x.keyframe:!V||x.left!==A.left||x.top!==A.top||x.rtlflip&&!A.rtlflip?null:x.rtlflip?keyframeCallback(V):V}function keyframeCallback(x){var A=x+"-rtl";return function(V,R){return"ltr"===N._getComputedStyle(R).direction?x:A}}function makeArray(x){return Array.isArray(x)||x instanceof A.NodeList||x instanceof A.HTMLCollection?x:x?[x]:[]}function collectOffsetArray(x){for(var A=[],V=0;V<x.length;V++){var R={top:x[V].offsetTop,left:x[V].offsetLeft},D=N._getComputedStyle(x[V],null)[W.scriptName].split(",");6===D.length&&(R.left+=parseFloat(D[4]),R.top+=parseFloat(D[5])),A.push(R)}return A}function staggerDelay(x,A,V,R){return function(D){for(var N=x,U=0;U<D;U++)N+=A*=V;return R&&(N=Math.min(N,R)),N}}function makeOffsetsRelative(x,A){for(var V=0;V<A.length;V++)A[V].top-=x[V].offsetTop,A[V].left-=x[V].offsetLeft}function animTranslate2DTransform(x,A,V){makeOffsetsRelative(x,A);for(var R=0;R<x.length;R++)0===A[R].top&&0===A[R].left||(x[R].style[W.scriptName]="translate("+A[R].left+"px, "+A[R].top+"px)");return B.executeTransition(x,V)}function animStaggeredSlide(x,A,V,R,D,N,U,F){var H=[],G=[],j=[];function prepareSlide(x,A,V){if(x){var R={left:A+"px",top:"0px"},D={left:V+"px",top:"0px"};if(+x.length===x.length)for(var N=0,U=x.length;N<U;N++)H.push(x[N]),G.push(R),j.push(D);else H.push(x),G.push(R),j.push(D)}}var q=0!==A?A<0?-200:200:0,Q=0!==V?V<0?-200:200:0;return prepareSlide(D,A,V),prepareSlide(N,q,Q),prepareSlide(U,2*q,2*Q),prepareSlide(F,3*q,3*Q),G=new z(G),j=new z(j),B.executeTransition(H,[{property:W.cssName,delay:0,duration:350,timing:x,from:translateCallback(G),to:translateCallback(j)},{property:"opacity",delay:0,duration:350,timing:R?"steps(1, start)":"steps(1, end)",from:R?0:1,to:R?1:0}])}function animRotationTransform(x,A,V){x=makeArray(x),A=makeArray(A);for(var D=0,U=x.length;D<U;D++){var F="rtl"===N._getComputedStyle(x[D]).direction;x[D].style[R._browserStyleEquivalents["transform-origin"].scriptName]=A[Math.min(A.length-1,D)][F?"rtl":"ltr"]}function onComplete(){!function clearAnimRotationTransform(x){for(var A=0,V=x.length;A<V;A++)x[A].style[R._browserStyleEquivalents["transform-origin"].scriptName]="",x[A].style[W.scriptName]="",x[A].style.opacity=""}(x)}return B.executeTransition(x,V).then(onComplete,onComplete)}function translateCallback(x,A){return A=A||"",function(V,R){var D=x.getOffset(V),U=D.left;return D.rtlflip&&"rtl"===N._getComputedStyle(R).direction&&(U="-"===(U=U.toString()).charAt(0)?U.substring(1):"-"+U),A+"translate("+U+", "+D.top+")"}}function translateCallbackAnimate(x,A){return A=A||"",function(V){var R=x[V];return"translate("+R.left+"px, "+R.top+"px) "+A}}function layoutTransition(x,A,V,R){var D=makeArray(A),N=makeArray(V);return new x(D,N,collectOffsetArray(N),R)}function collectTurnstileTransformOrigins(x){for(var V=[],R=0,D=x.length;R<D;R++){var N=x[R].getBoundingClientRect(),U=-(40+N.left),B=A.innerWidth-N.right+40,F=A.innerHeight/2-N.top;V.push({ltr:U+"px "+F+"px",rtl:B+"px "+F+"px"})}return V}var G=V.Class.define((function ExpandAnimation_ctor(x,A,V){this.revealedArray=x,this.affectedArray=A,this.offsetArray=V}),{execute:function(){var x=B.executeAnimation(this.revealedArray,{keyframe:"WinJS-opacity-in",property:"opacity",delay:this.affectedArray.length>0?200:0,duration:167,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",from:0,to:1}),A=animTranslate2DTransform(this.affectedArray,this.offsetArray,{property:W.cssName,delay:0,duration:367,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:""});return F.join([x,A]).then((function(){}))}},{supportedForProcessing:!1}),j=V.Class.define((function CollapseAnimation_ctor(x,A,V){this.hiddenArray=x,this.affectedArray=A,this.offsetArray=V}),{execute:function(){var x=B.executeAnimation(this.hiddenArray,{keyframe:"WinJS-opacity-out",property:"opacity",delay:0,duration:167,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",from:1,to:0}),A=animTranslate2DTransform(this.affectedArray,this.offsetArray,{property:W.cssName,delay:this.hiddenArray.length>0?167:0,duration:367,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:""});return F.join([x,A]).then((function(){}))}},{supportedForProcessing:!1}),q=V.Class.define((function RepositionAnimation_ctor(x,A,V){this.elementArray=A,this.offsetArray=V}),{execute:function(){return animTranslate2DTransform(this.elementArray,this.offsetArray,{property:W.cssName,delay:staggerDelay(0,33,1,250),duration:367,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:""}).then((function(){}))}},{supportedForProcessing:!1}),Q=V.Class.define((function AddToListAnimation_ctor(x,A,V){this.addedArray=x,this.affectedArray=A,this.offsetArray=V}),{execute:function(){var x=this.affectedArray.length>0?240:0,A=B.executeAnimation(this.addedArray,[{keyframe:"WinJS-scale-up",property:W.cssName,delay:x,duration:120,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",from:"scale(0.85)",to:"none"},{keyframe:"WinJS-opacity-in",property:"opacity",delay:x,duration:120,timing:"linear",from:0,to:1}]),V=animTranslate2DTransform(this.affectedArray,this.offsetArray,{property:W.cssName,delay:0,duration:400,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:""});return F.join([A,V]).then((function(){}))}},{supportedForProcessing:!1}),K=V.Class.define((function DeleteFromListAnimation_ctor(x,A,V){this.deletedArray=x,this.remainingArray=A,this.offsetArray=V}),{execute:function(){var x=B.executeAnimation(this.deletedArray,[{keyframe:"WinJS-scale-down",property:W.cssName,delay:0,duration:120,timing:"cubic-bezier(0.11, 0.5, 0.24, .96)",from:"none",to:"scale(0.85)"},{keyframe:"WinJS-opacity-out",property:"opacity",delay:0,duration:120,timing:"linear",from:1,to:0}]),A=animTranslate2DTransform(this.remainingArray,this.offsetArray,{property:W.cssName,delay:this.deletedArray.length>0?60:0,duration:400,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:""});return F.join([x,A]).then((function(){}))}},{supportedForProcessing:!1}),J=V.Class.define((function _UpdateListAnimation_ctor(x,A,V,R){this.addedArray=x,this.affectedArray=A,this.offsetArray=V;var D=makeArray(R);this.deletedArray=D,this.deletedOffsetArray=collectOffsetArray(D)}),{execute:function(){makeOffsetsRelative(this.deletedArray,this.deletedOffsetArray);var x,A,V=0,R=B.executeAnimation(this.deletedArray,[{keyframe:(x=this.deletedOffsetArray,A="WinJS-scale-down",function(V){var R=x[V];return 0===R.left&&0===R.top?A:null}),property:W.cssName,delay:0,duration:120,timing:"cubic-bezier(0.11, 0.5, 0.24, .96)",from:translateCallbackAnimate(this.deletedOffsetArray),to:translateCallbackAnimate(this.deletedOffsetArray,"scale(0.85)")},{keyframe:"WinJS-opacity-out",property:"opacity",delay:0,duration:120,timing:"linear",from:1,to:0}]);this.deletedArray.length>0&&(V+=60);var D=animTranslate2DTransform(this.affectedArray,this.offsetArray,{property:W.cssName,delay:V,duration:400,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:""});this.affectedArray.length>0?V+=240:V&&(V+=60);var N=B.executeAnimation(this.addedArray,[{keyframe:"WinJS-scale-up",property:W.cssName,delay:V,duration:120,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",from:"scale(0.85)",to:"none"},{keyframe:"WinJS-opacity-in",property:"opacity",delay:V,duration:120,timing:"linear",from:0,to:1}]);return F.join([R,D,N]).then((function(){}))}},{supportedForProcessing:!1}),X=V.Class.define((function AddToSearchListAnimation_ctor(x,A,V){this.addedArray=x,this.affectedArray=A,this.offsetArray=V}),{execute:function(){var x=B.executeAnimation(this.addedArray,{keyframe:"WinJS-opacity-in",property:"opacity",delay:this.affectedArray.length>0?240:0,duration:117,timing:"linear",from:0,to:1}),A=animTranslate2DTransform(this.affectedArray,this.offsetArray,{property:W.cssName,delay:0,duration:400,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:""});return F.join([x,A]).then((function(){}))}},{supportedForProcessing:!1}),Y=V.Class.define((function DeleteFromSearchListAnimation_ctor(x,A,V){this.deletedArray=x,this.remainingArray=A,this.offsetArray=V}),{execute:function(){var x=B.executeAnimation(this.deletedArray,{keyframe:"WinJS-opacity-out",property:"opacity",delay:0,duration:93,timing:"linear",from:1,to:0}),A=animTranslate2DTransform(this.remainingArray,this.offsetArray,{property:W.cssName,delay:this.deletedArray.length>0?60:0,duration:400,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:""});return F.join([x,A]).then((function(){}))}},{supportedForProcessing:!1}),$=V.Class.define((function PeekAnimation_ctor(x,A,V){this.elementArray=A,this.offsetArray=V}),{execute:function(){return animTranslate2DTransform(this.elementArray,this.offsetArray,{property:W.cssName,delay:0,duration:2e3,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:""}).then((function(){}))}},{supportedForProcessing:!1});function transformWithTransition(x,V){var D,N=V.duration*B._animationFactor,U=R._browserStyleEquivalents.transition.scriptName;return x.style[U]=N+"ms "+W.cssName+" "+V.timing,x.style[W.scriptName]=V.to,new F((function(V){var onTransitionEnd=function(A){A.target===x&&A.propertyName===W.cssName&&D()},B=!1;D=function(){B||(A.clearTimeout(F),x.removeEventListener(R._browserEventEquivalents.transitionEnd,onTransitionEnd),x.style[U]="",B=!0),V()};var F=A.setTimeout((function(){F=A.setTimeout(D,N)}),50);x.addEventListener(R._browserEventEquivalents.transitionEnd,onTransitionEnd)}),(function(){D()}))}function resizeTransition(x,A,V){var D={defaultResizeGrowTransition:{duration:350,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)"},defaultResizeShrinkTransition:{duration:120,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)"}}[V.to>V.from?"defaultResizeGrowTransition":"defaultResizeShrinkTransition"],U=(V=R._merge(V,{duration:void 0===V.duration?D.duration:V.duration,timing:void 0===V.timing?D.timing:V.timing})).actualSize-V.from,B=V.actualSize-V.to;V.anchorTrailingEdge||(U=-U,B=-B);var F="width"===V.dimension?"translateX":"translateY",H={duration:V.duration,timing:V.timing};return x.style[W.scriptName]=F+"("+U+"px)",A.style[W.scriptName]=F+"("+-U+"px)",N._getComputedStyle(x).opacity,N._getComputedStyle(A).opacity,[{element:x,transition:R._merge(H,{to:F+"("+B+"px)"})},{element:A,transition:R._merge(H,{to:F+"("+-B+"px)"})}]}V.Namespace._moduleDefine(x,"WinJS.UI.Animation",{createExpandAnimation:function(x,A){return layoutTransition(G,x,A)},createCollapseAnimation:function(x,A){return layoutTransition(j,x,A)},createRepositionAnimation:function(x){return layoutTransition(q,null,x)},fadeIn:function(x){return B.executeTransition(x,{property:"opacity",delay:0,duration:250,timing:"linear",from:0,to:1}).then((function(){}))},fadeOut:function(x){return B.executeTransition(x,{property:"opacity",delay:0,duration:167,timing:"linear",to:0}).then((function(){}))},createAddToListAnimation:function(x,A){return layoutTransition(Q,x,A)},createDeleteFromListAnimation:function(x,A){return layoutTransition(K,x,A)},_createUpdateListAnimation:function(x,A,V){return layoutTransition(J,x,V,A)},createAddToSearchListAnimation:function(x,A){return layoutTransition(X,x,A)},createDeleteFromSearchListAnimation:function(x,A){return layoutTransition(Y,x,A)},showEdgeUI:function(x,A,V){var R=V&&"transition"===V.mechanism,D=new z(A,"WinJS-showEdgeUI",[{top:"-70px",left:"0px"}]);return B[R?"executeTransition":"executeAnimation"](x,{keyframe:D.keyframe,property:W.cssName,delay:0,duration:367,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",from:R?translateCallback(D):D.keyframe||translateCallback(D),to:"none"}).then((function(){}))},showPanel:function(x,A){var V=new z(A,"WinJS-showPanel",[{top:"0px",left:"364px",rtlflip:!0}]);return B.executeAnimation(x,{keyframe:V.keyframe,property:W.cssName,delay:0,duration:550,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",from:V.keyframe||translateCallback(V),to:"none"}).then((function(){}))},hideEdgeUI:function(x,A,V){var R=V&&"transition"===V.mechanism,D=new z(A,"WinJS-hideEdgeUI",[{top:"-70px",left:"0px"}]);return B[R?"executeTransition":"executeAnimation"](x,{keyframe:D.keyframe,property:W.cssName,delay:0,duration:367,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",from:"none",to:R?translateCallback(D):D.keyframe||translateCallback(D)}).then((function(){}))},hidePanel:function(x,A){var V=new z(A,"WinJS-hidePanel",[{top:"0px",left:"364px",rtlflip:!0}]);return B.executeAnimation(x,{keyframe:V.keyframe,property:W.cssName,delay:0,duration:550,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",from:"none",to:V.keyframe||translateCallback(V)}).then((function(){}))},showPopup:function(x,A){var V=new z(A,"WinJS-showPopup",[{top:"50px",left:"0px"}]);return B.executeAnimation(x,[{keyframe:"WinJS-opacity-in",property:"opacity",delay:83,duration:83,timing:"linear",from:0,to:1},{keyframe:V.keyframe,property:W.cssName,delay:0,duration:367,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",from:V.keyframe||translateCallback(V),to:"none"}]).then((function(){}))},hidePopup:function(x){return B.executeAnimation(x,{keyframe:"WinJS-opacity-out",property:"opacity",delay:0,duration:83,timing:"linear",from:1,to:0}).then((function(){}))},pointerDown:function(x){return B.executeTransition(x,{property:W.cssName,delay:0,duration:167,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:"scale(0.975, 0.975)"}).then((function(){}))},pointerUp:function(x){return B.executeTransition(x,{property:W.cssName,delay:0,duration:167,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:""}).then((function(){}))},dragSourceStart:function(x,A){var V=B.executeTransition(x,[{property:W.cssName,delay:0,duration:240,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:"scale(1.05)"},{property:"opacity",delay:0,duration:240,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:.65}]),R=B.executeTransition(A,{property:W.cssName,delay:0,duration:240,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:"scale(0.95)"});return F.join([V,R]).then((function(){}))},dragSourceEnd:function(x,A,V){var R=new z(A,"WinJS-dragSourceEnd"),D=B.executeTransition(x,[{property:W.cssName,delay:0,duration:500,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:""},{property:"opacity",delay:0,duration:500,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:1}]),N=B.executeAnimation(x,{keyframe:R.keyframe,property:W.cssName,delay:0,duration:500,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",from:R.keyframe||translateCallback(R,"scale(1.05) "),to:"none"}),U=B.executeTransition(V,{property:W.cssName,delay:0,duration:500,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:""});return F.join([D,N,U]).then((function(){}))},enterContent:function(x,A,V){var R,D=new z(A,"WinJS-enterContent",[{top:"28px",left:"0px",rtlflip:!1}]);if(V&&"transition"===V.mechanism)R=B.executeTransition(x,[{property:W.cssName,delay:0,duration:550,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",from:translateCallback(D),to:"none"},{property:"opacity",delay:0,duration:170,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",from:0,to:1}]);else{var N=B.executeAnimation(x,{keyframe:D.keyframe,property:W.cssName,delay:0,duration:550,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",from:D.keyframe||translateCallback(D),to:"none"}),U=B.executeTransition(x,{property:"opacity",delay:0,duration:170,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",from:0,to:1});R=F.join([N,U])}return R.then((function(){}))},exitContent:function(x,A){var V=new z(A,"WinJS-exit",[{top:"0px",left:"0px"}]),R=B.executeAnimation(x,A&&{keyframe:V.keyframe,property:W.cssName,delay:0,duration:117,timing:"linear",from:"none",to:V.keyframe||translateCallback(V)}),D=B.executeTransition(x,{property:"opacity",delay:0,duration:117,timing:"linear",to:0});return F.join([R,D]).then((function(){}))},dragBetweenEnter:function(x,A){var V=new z(A,null,[{top:"-40px",left:"0px"},{top:"40px",left:"0px"}]);return B.executeTransition(x,{property:W.cssName,delay:0,duration:200,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:translateCallback(V,"scale(0.95) ")}).then((function(){}))},dragBetweenLeave:function(x){return B.executeTransition(x,{property:W.cssName,delay:0,duration:200,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:"scale(0.95)"}).then((function(){}))},swipeSelect:function(x,A){var V=B.executeTransition(x,{property:W.cssName,delay:0,duration:300,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:""}),R=B.executeAnimation(A,{keyframe:"WinJS-opacity-in",property:"opacity",delay:0,duration:300,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",from:0,to:1});return F.join([V,R]).then((function(){}))},swipeDeselect:function(x,A){var V=B.executeTransition(x,{property:W.cssName,delay:0,duration:300,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:""}),R=B.executeAnimation(A,{keyframe:"WinJS-opacity-out",property:"opacity",delay:0,duration:300,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",from:1,to:0});return F.join([V,R]).then((function(){}))},swipeReveal:function(x,A){var V=new z(A,null,[{top:"25px",left:"0px"}]);return B.executeTransition(x,{property:W.cssName,delay:0,duration:300,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:translateCallback(V)}).then((function(){}))},enterPage:function(x,A){var V=new z(A,"WinJS-enterPage",[{top:"28px",left:"0px",rtlflip:!1}]),R=B.executeAnimation(x,{keyframe:V.keyframe,property:W.cssName,delay:staggerDelay(0,83,1,333),duration:1e3,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",from:V.keyframe||translateCallback(V),to:"none"}),D=B.executeTransition(x,{property:"opacity",delay:staggerDelay(0,83,1,333),duration:170,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",from:0,to:1});return F.join([R,D]).then((function(){}))},exitPage:function(x,A){var V=new z(A,"WinJS-exit",[{top:"0px",left:"0px"}]),R=B.executeAnimation(x,A&&{keyframe:V.keyframe,property:W.cssName,delay:0,duration:117,timing:"linear",from:"none",to:V.keyframe||translateCallback(V)}),D=B.executeTransition(x,{property:"opacity",delay:0,duration:117,timing:"linear",to:0});return F.join([R,D]).then((function(){}))},crossFade:function(x,A){var V=B.executeTransition(x,{property:"opacity",delay:0,duration:167,timing:"linear",to:1}),R=B.executeTransition(A,{property:"opacity",delay:0,duration:167,timing:"linear",to:0});return F.join([V,R]).then((function(){}))},createPeekAnimation:function(x){return layoutTransition($,null,x)},updateBadge:function(x,A){var V=new z(A,"WinJS-updateBadge",[{top:"24px",left:"0px"}]);return B.executeAnimation(x,[{keyframe:"WinJS-opacity-in",property:"opacity",delay:0,duration:367,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",from:0,to:1},{keyframe:V.keyframe,property:W.cssName,delay:0,duration:1333,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",from:V.keyframe||translateCallback(V),to:"none"}]).then((function(){}))},turnstileForwardIn:function(x){return animRotationTransform(x=makeArray(x),collectTurnstileTransformOrigins(x),[{property:W.cssName,delay:staggerDelay(0,50,1,1e3),duration:300,timing:"cubic-bezier(0.01,0.975,0.4775,0.9775)",from:"perspective(600px) rotateY(80deg)",to:"perspective(600px) rotateY(0deg)"},{property:"opacity",delay:staggerDelay(0,50,1,1e3),duration:300,timing:"cubic-bezier(0, 2, 0, 2)",from:0,to:1}]).then((function(){}))},turnstileForwardOut:function(x){return animRotationTransform(x=makeArray(x),collectTurnstileTransformOrigins(x),[{property:W.cssName,delay:staggerDelay(0,50,1,1e3),duration:128,timing:"cubic-bezier(0.4925,0.01,0.7675,-0.01)",from:"perspective(600px) rotateY(0deg)",to:"perspective(600px) rotateY(-50deg)"},{property:"opacity",delay:staggerDelay(0,50,1,1e3),duration:128,timing:"cubic-bezier(1,-0.42,0.995,-0.425)",from:1,to:0}]).then((function(){}))},turnstileBackwardIn:function(x){return animRotationTransform(x=makeArray(x),collectTurnstileTransformOrigins(x),[{property:W.cssName,delay:staggerDelay(0,50,1,1e3),duration:300,timing:"cubic-bezier(0.01,0.975,0.4775,0.9775)",from:"perspective(600px) rotateY(-50deg)",to:"perspective(600px) rotateY(0deg)"},{property:"opacity",delay:staggerDelay(0,50,1,1e3),duration:300,timing:"cubic-bezier(0, 2, 0, 2)",from:0,to:1}]).then((function(){}))},turnstileBackwardOut:function(x){return animRotationTransform(x=makeArray(x),collectTurnstileTransformOrigins(x),[{property:W.cssName,delay:staggerDelay(0,50,1,1e3),duration:128,timing:"cubic-bezier(0.4925,0.01,0.7675,-0.01)",from:"perspective(800px) rotateY(0deg)",to:"perspective(800px) rotateY(80deg)"},{property:"opacity",delay:staggerDelay(0,50,1,1e3),duration:128,timing:"cubic-bezier(1,-0.42,0.995,-0.425)",from:1,to:0}]).then((function(){}))},slideDown:function(x){return animRotationTransform(x,{ltr:"",rtl:""},[{property:W.cssName,delay:0,duration:250,timing:"cubic-bezier(0.3825,0.0025,0.8775,-0.1075)",from:"translate(0px, 0px)",to:"translate(0px, 200px)"},{property:"opacity",delay:0,duration:250,timing:"cubic-bezier(1,-0.42,0.995,-0.425)",from:1,to:0}]).then((function(){}))},slideUp:function(x){return animRotationTransform(x,{ltr:"",rtl:""},[{property:W.cssName,delay:0,duration:350,timing:"cubic-bezier(0.17,0.79,0.215,1.0025)",from:"translate(0px, 200px)",to:"translate(0px, 0px)"},{property:"opacity",delay:staggerDelay(0,34,1,1e3),duration:350,timing:"cubic-bezier(0, 2, 0, 2)",from:0,to:1}]).then((function(){}))},slideRightIn:function(x,V,R,D){return animStaggeredSlide("cubic-bezier(0.17,0.79,0.215,1.0025)",-A.innerWidth,0,!0,x,V,R,D).then((function(){}))},slideRightOut:function(x,V,R,D){return animStaggeredSlide("cubic-bezier(0.3825,0.0025,0.8775,-0.1075)",0,A.innerWidth,!1,x,V,R,D).then((function(){}))},slideLeftIn:function(x,V,R,D){return animStaggeredSlide("cubic-bezier(0.17,0.79,0.215,1.0025)",A.innerWidth,0,!0,x,V,R,D).then((function(){}))},slideLeftOut:function(x,V,R,D){return animStaggeredSlide("cubic-bezier(0.3825,0.0025,0.8775,-0.1075)",0,-A.innerWidth,!1,x,V,R,D).then((function(){}))},continuumForwardIn:function(x,A,V){return F.join([B.executeTransition(x,[{property:W.cssName,delay:0,duration:350,timing:"cubic-bezier(0.33, 0.18, 0.11, 1)",from:"scale(0.5, 0.5)",to:"scale(1.0, 1.0)"},{property:"opacity",delay:0,duration:350,timing:"cubic-bezier(0, 2, 0, 2)",from:0,to:1}]),B.executeTransition(A,[{property:W.cssName,delay:0,duration:350,timing:"cubic-bezier(0.24,1.15,0.11,1.1575)",from:"translate(0px, 225px)",to:"translate(0px, 0px)"},{property:"opacity",delay:0,duration:350,timing:"cubic-bezier(0, 2, 0, 2)",from:0,to:1}]),animRotationTransform(V,{ltr:"0px 50%",rtl:"100% 50%"},[{property:W.cssName,delay:0,duration:350,timing:"cubic-bezier(0,0.62,0.8225,0.9625)",from:"rotateX(80deg) scale(1.5, 1.5)",to:"rotateX(0deg) scale(1.0, 1.0)"},{property:"opacity",delay:0,duration:350,timing:"cubic-bezier(0, 2, 0, 2)",from:0,to:1}])]).then((function(){}))},continuumForwardOut:function(x,A){return F.join([B.executeTransition(x,[{property:W.cssName,delay:0,duration:120,timing:"cubic-bezier(0.3825,0.0025,0.8775,-0.1075)",from:"scale(1.0, 1.0)",to:"scale(1.1, 1.1)"},{property:"opacity",delay:0,duration:120,timing:"cubic-bezier(1,-0.42,0.995,-0.425)",from:1,to:0}]),animRotationTransform(A,{ltr:"0px 100%",rtl:"100% 100%"},[{property:W.cssName,delay:0,duration:152,timing:"cubic-bezier(0.3825,0.0025,0.8775,-0.1075)",from:"rotateX(0deg) scale(1.0, 1.0) translate(0px, 0px)",to:"rotateX(80deg) scale(1.5, 1.5) translate(0px, 150px)"},{property:"opacity",delay:0,duration:152,timing:"cubic-bezier(1,-0.42,0.995,-0.425)",from:1,to:0}])]).then((function(){}))},continuumBackwardIn:function(x,A){return F.join([B.executeTransition(x,[{property:W.cssName,delay:0,duration:200,timing:"cubic-bezier(0.33, 0.18, 0.11, 1)",from:"scale(1.25, 1.25)",to:"scale(1.0, 1.0)"},{property:"opacity",delay:0,duration:200,timing:"cubic-bezier(0, 2, 0, 2)",from:0,to:1}]),animRotationTransform(A,{ltr:"0px 50%",rtl:"100% 50%"},[{property:W.cssName,delay:0,duration:250,timing:"cubic-bezier(0.2975, 0.7325, 0.4725, 0.99)",from:"rotateX(80deg) translate(0px, -100px)",to:"rotateX(0deg) translate(0px, 0px)"},{property:"opacity",delay:0,duration:250,timing:"cubic-bezier(0, 2, 0, 2)",from:0,to:1}])]).then((function(){}))},continuumBackwardOut:function(x){return B.executeTransition(x,[{property:W.cssName,delay:0,duration:167,timing:"cubic-bezier(0.3825,0.0025,0.8775,-0.1075)",from:"scale(1.0, 1.0)",to:"scale(0.5, 0.5)"},{property:"opacity",delay:0,duration:167,timing:"cubic-bezier(1,-0.42,0.995,-0.425)",from:1,to:0}]).then((function(){}))},drillInIncoming:function(x){return B.executeTransition(x,[{property:W.cssName,delay:0,duration:500,timing:"cubic-bezier(0.1,0.9,0.2,1)",from:"scale(0.84)",to:"scale(1.0)"},{property:"opacity",delay:0,duration:500,timing:"cubic-bezier(0.1,0.9,0.2,1)",from:0,to:1}]).then((function(){}))},drillInOutgoing:function(x){return B.executeTransition(x,[{property:W.cssName,delay:0,duration:233,timing:"cubic-bezier(0.1,0.9,0.2,1)",from:"scale(1.0)",to:"scale(1.29)"},{property:"opacity",delay:0,duration:233,timing:"cubic-bezier(0.1,0.9,0.2,1)",from:1,to:0}]).then((function(){}))},drillOutIncoming:function(x){return B.executeTransition(x,[{property:W.cssName,delay:0,duration:500,timing:"cubic-bezier(0.1,0.9,0.2,1)",from:"scale(1.29)",to:"scale(1.0)"},{property:"opacity",delay:0,duration:500,timing:"cubic-bezier(0.1,0.9,0.2,1)",from:0,to:1}]).then((function(){}))},drillOutOutgoing:function(x){return B.executeTransition(x,[{property:W.cssName,delay:0,duration:233,timing:"cubic-bezier(0.1,0.9,0.2,1)",from:"scale(1.0)",to:"scale(0.84)"},{property:"opacity",delay:0,duration:233,timing:"cubic-bezier(0.1,0.9,0.2,1)",from:1,to:0}]).then((function(){}))},createPageNavigationAnimations:function(A,V,R){return{exit:function emptyAnimationFunction(){return F.wrap()},entrance:x.enterPage}},_resizeTransition:function Utilities_resizeTransition(x,A,V){if(V.to!==V.from&&B.isAnimationEnabled()){for(var R=resizeTransition(x,A,V),D=[],N=0,U=R.length;N<U;N++)D.push(transformWithTransition(R[N].element,R[N].transition));return F.join(D)}return F.as()},_commandingSurfaceOpenAnimation:function Utilities_commandingSurfaceOpenAnimation(x){if(!B.isAnimationEnabled())return F.as();var A=x.actionAreaClipper,V=x.actionArea,D=x.overflowAreaClipper,U=x.overflowArea,H=x.oldHeight,z=x.newHeight,G=x.overflowAreaHeight,j=x.menuPositionedAbove,q=z-H,Q=[],K={duration:350,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)"};if(j){V.style[W.scriptName]="translateY("+q+"px)",N._getComputedStyle(V).opacity;var J=R._merge(K,{to:"translateY(0px)"});Q.push({element:V,transition:J})}else Q=resizeTransition(A,V,{from:H,to:z,actualSize:z,dimension:"height",anchorTrailingEdge:!1});D.style[W.scriptName]="translateY("+(j?q:-q)+"px)",U.style[W.scriptName]="translateY("+(j?G:-G)+"px)",N._getComputedStyle(D).opacity,N._getComputedStyle(U).opacity;for(var X=[],Y=0,$=Q.length;Y<$;Y++)X.push(transformWithTransition(Q[Y].element,Q[Y].transition));var Z=R._merge(K,{to:"translateY(0px)"});return X.push(transformWithTransition(D,Z)),X.push(transformWithTransition(U,Z)),F.join(X)},_commandingSurfaceCloseAnimation:function Utilities_commandingSurfaceCloseAnimation(x){if(!B.isAnimationEnabled())return F.as();var A=x.actionAreaClipper,V=x.actionArea,D=x.overflowAreaClipper,U=x.overflowArea,H=x.oldHeight,z=x.newHeight,G=x.overflowAreaHeight,j=x.menuPositionedAbove,q=z-H,Q=[],K={duration:120,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)"};if(j){V.style[W.scriptName]="translateY(0px)",N._getComputedStyle(V).opacity;var J=R._merge(K,{to:"translateY("+-q+"px)"});Q.push({element:V,transition:J})}else Q=resizeTransition(A,V,{from:H,to:z,actualSize:H,dimension:"height",anchorTrailingEdge:!1});D.style[W.scriptName]="translateY(0px)",U.style[W.scriptName]="translateY(0px)",N._getComputedStyle(D).opacity,N._getComputedStyle(U).opacity;for(var X=[],Y=0,$=Q.length;Y<$;Y++)X.push(transformWithTransition(Q[Y].element,Q[Y].transition));var Z=R._merge(K,{to:"translateY("+(j?-q:q)+"px)"}),ee=R._merge(K,{to:"translateY("+(j?G:-G)+"px)"});return X.push(transformWithTransition(D,Z)),X.push(transformWithTransition(U,ee)),F.join(X)}})})),define("WinJS/Binding/_BindingParser",["exports","../Core/_Base","../Core/_BaseUtils","../Core/_ErrorFromName","../Core/_Log","../Core/_Resources","../Core/_WriteProfilerMark","../ControlProcessor/_OptionsLexer","../ControlProcessor/_OptionsParser"],(function bindingParserInit(x,A,V,R,D,N,U,B,F){"use strict";var W={get invalidBinding(){return"Invalid binding:'{0}'. Expected to be '<destProp>:<sourceProp>;'. {1}"},get bindingInitializerNotFound(){return"Initializer not found:'{0}'"}},H=A.Namespace.defineWithParent(null,null,{lexer:A.Namespace._lazy((function(){return B._optionsLexer})),tokenType:A.Namespace._lazy((function(){return B._optionsLexer.tokenType}))}),z=V.requireSupportedForProcessing,G=A.Namespace.defineWithParent(null,null,{BindingInterpreter:A.Namespace._lazy((function(){return A.Class.derive(F.optionsParser._BaseInterpreter,(function(x,A,V){this._initialize(x,A,V)}),{_error:function(x){throw new R("WinJS.Binding.ParseError",N._formatString(W.invalidBinding,this._originalSource,x))},_evaluateInitializerName:function(){if(this._current.type===H.tokenType.identifier){var x=this._evaluateIdentifierExpression();return D.log&&!x&&D.log(N._formatString(W.bindingInitializerNotFound,this._originalSource),"winjs binding","error"),z(x)}},_evaluateValue:function(){switch(this._current.type){case H.tokenType.stringLiteral:case H.tokenType.numberLiteral:var x=this._current.value;return this._read(),x;default:return void this._unexpectedToken(H.tokenType.stringLiteral,H.tokenType.numberLiteral)}},_readBindDeclarations:function(){for(var x=[];;)switch(this._current.type){case H.tokenType.identifier:case H.tokenType.thisKeyword:x.push(this._readBindDeclaration());break;case H.tokenType.semicolon:this._read();break;case H.tokenType.eof:return x;default:return void this._unexpectedToken(H.tokenType.identifier,H.tokenType.semicolon,H.tokenType.eof)}},_readBindDeclaration:function(){var x=this._readDestinationPropertyName();return this._read(H.tokenType.colon),{destination:x,source:this._readSourcePropertyName(),initializer:this._evaluateInitializerName()}},_readDestinationPropertyName:function(){return this._readIdentifierExpression()},_readSourcePropertyName:function(){return this._readIdentifierExpression()},run:function(){return this._readBindDeclarations()}},{supportedForProcessing:!1})})),BindingParser:A.Namespace._lazy((function(){return A.Class.derive(G.BindingInterpreter,(function(x,A){this._initialize(x,A,{})}),{_readInitializerName:function(){if(this._current.type===H.tokenType.identifier)return this._readIdentifierExpression()},_readBindDeclaration:function(){var x=this._readDestinationPropertyName();return this._read(H.tokenType.colon),{destination:x,source:this._readSourcePropertyName(),initializer:this._readInitializerName()}}},{supportedForProcessing:!1})}))});A.Namespace._moduleDefine(x,"WinJS.Binding",{_bindingParser:function parser(x,A){var V=H.lexer(x);return new G.BindingInterpreter(V,x,A||{}).run()},_bindingParser2:function parser2(x){var A=H.lexer(x);return new G.BindingParser(A,x).run()}})})),define("WinJS/Binding/_DomWeakRefTable",["exports","../Core/_Global","../Core/_WinRT","../Core/_Base","../Core/_BaseUtils","../Scheduler"],(function DOMWeakRefTableInit(x,A,V,R,D,N){"use strict";if(V.Windows.Foundation.Uri&&V.msSetWeakWinRTProperty&&V.msGetWeakWinRTProperty){var U=new V.Windows.Foundation.Uri("about://blank");R.Namespace._moduleDefine(x,"WinJS.Utilities",{_createWeakRef:function(x,A){return V.msSetWeakWinRTProperty(U,A,x),A},_getWeakRefElement:function(x){return V.msGetWeakWinRTProperty(U,x)}})}else{var B,F=500,W=1e3,H={},z=!0,G=!1;R.Namespace._moduleDefine(x,"WinJS.Utilities",{_DOMWeakRefTable_noTimeoutUnderDebugger:{get:function(){return z},set:function(x){z=x}},_DOMWeakRefTable_sweepPeriod:{get:function(){return F},set:function(x){F=x}},_DOMWeakRefTable_timeout:{get:function(){return W},set:function(x){W=x}},_DOMWeakRefTable_tableSize:{get:function(){return Object.keys(H).length}},_DOMWeakRefTable_fastLoadPath:{get:function(){return G},set:function(x){G=x}},_createWeakRef:function createWeakRef(x,V){return H[V]={element:x,time:Date.now()},function scheduleCleanupIfNeeded(){A.Debug&&A.Debug.debuggerEnabled&&z||B||(0===F?(N.schedule(cleanup,N.Priority.idle,null,"WinJS.Utilities._DOMWeakRefTable.cleanup"),B=1):B=A.setInterval(cleanup,F))}(),V},_getWeakRefElement:function getWeakRefElement(x){if(G)return(V=H[x])?V.element:A.document.getElementById(x);var V,R=A.document.getElementById(x);return R?(delete H[x],unscheduleCleanupIfNeeded()):(V=H[x])&&(V.time=Date.now(),R=V.element),R}})}function cleanup(){0===F&&(B=0);var x,A,V=Object.keys(H),R=Date.now()-W;for(x=0,A=V.length;x<A;x++){var D=V[x];H[D].time<R&&delete H[D]}unscheduleCleanupIfNeeded()}function unscheduleCleanupIfNeeded(){A.Debug&&A.Debug.debuggerEnabled&&z||(0===F?B||0!==Object.keys(H).length&&(N.schedule(cleanup,N.Priority.idle,null,"WinJS.Utilities._DOMWeakRefTable.cleanup"),B=1):B&&0===Object.keys(H).length&&(A.clearInterval(B),B=0))}})),define("WinJS/Binding/_Data",["exports","../Core/_WinRT","../Core/_Base","../Core/_BaseUtils","../Core/_ErrorFromName","../Core/_Log","../Core/_Resources","../Promise","../Scheduler","./_DomWeakRefTable"],(function dataInit(x,A,V,R,D,N,U,B,F,W){"use strict";var H={get exceptionFromBindingInitializer(){return"Exception thrown from binding initializer: {0}"},get propertyIsUndefined(){return"{0} is undefined"},get unsupportedDataTypeForBinding(){return"Unsupported data type"}},z={_listeners:null,_pendingNotifications:null,_notifyId:0,_getObservable:function(){return this},_cancel:function(x){var A=this._pendingNotifications,V=!1;if(A)for(var R=Object.keys(A),D=R.length-1;D>=0;D--){var N=A[R[D]];N.target===x&&(N.promise&&(N.promise.cancel(),N.promise=null),delete A[R[D]],V=!0)}return V},notify:function(x,A,V){var R=this._listeners&&this._listeners[x];if(R){var D=this;D._cancel(x),D._pendingNotifications=D._pendingNotifications||{};var W=D._notifyId++,z=D._pendingNotifications[W]={target:x};return z.promise=F.schedulePromiseNormal(null,"WinJS.Binding.observableMixin.notify").then((function(){for(var x=0,B=R.length;x<B&&z.promise;x++)try{R[x](A,V)}catch(x){N.log&&N.log(U._formatString(H.exceptionFromBindingInitializer,x.toString()),"winjs binding","error")}return delete D._pendingNotifications[W],A})),z.promise}return B.as()},bind:function(x,A){this._listeners=this._listeners||{};for(var V=this._listeners[x]=this._listeners[x]||[],R=!1,D=0,N=V.length;D<N;D++)if(V[D]===A){R=!0;break}return R||(V.push(A),A(unwrap(this[x]))),this},unbind:function(x,A){if(this._listeners=this._listeners||{},x&&A){var V=this._listeners[x];if(V){for(var R,D=0,N=V.length;D<N;D++)V[D]!==A&&(R=R||[]).push(V[D]);this._listeners[x]=R}}else if(x)this._cancel(x),delete this._listeners[x];else{if(this._pendingNotifications){var U=this._pendingNotifications;this._pendingNotifications={},Object.keys(U).forEach((function(x){var A=U[x];A.promise&&A.promise.cancel()}))}this._listeners={}}return this}},G={_backingData:null,_initObservable:function(x){this._backingData=x||{}},getProperty:function(x){var A=this._backingData[x];return N.log&&void 0===A&&N.log(U._formatString(H.propertyIsUndefined,x),"winjs binding","warn"),as(A)},setProperty:function(x,A){return this.updateProperty(x,A),this},addProperty:function(x,A){return this[x]||Object.defineProperty(this,x,{get:function(){return this.getProperty(x)},set:function(A){this.setProperty(x,A)},enumerable:!0,configurable:!0}),this.setProperty(x,A)},updateProperty:function(x,A){var V=this._backingData[x],R=unwrap(A);return V!==R&&(this._backingData[x]=R,this._backingData[x]===R)?this.notify(x,R,V):B.as()},removeProperty:function(x){var A=this._backingData[x];try{delete this._backingData[x]}catch(x){}try{delete this[x]}catch(x){}return this.notify(x,void 0,A),this}};Object.keys(z).forEach((function(x){G[x]=z[x]}));var j=0,createBindRefId=function(){return"bindHandler"+j++},createProxy=function(x,V){if(!A.msGetWeakWinRTProperty)return x;var R=createBindRefId();return W._getWeakRefElement(V)[R]=x,function(x,A){var D=W._getWeakRefElement(V);D&&D[R](x,A)}},bindImpl=function(x,A,V){if(!(x=as(x)))return{cancel:function(){},empty:!0};var R;V||(V=createBindRefId(),R={},W._createWeakRef(R,V));var D={},N=null;function cancelComplex(x){D[x]&&(D[x].complexBind.cancel(),delete D[x])}return Object.keys(A).forEach((function(U){var B=A[U];if(B instanceof Function)(B=createProxy(B,V)).bindState=R,(N=N||[]).push({source:x,prop:U,listener:B}),x.bind(U,B);else{var propChanged=function(x){cancelComplex(U);var A=bindImpl(as(x),B,V);if(A.empty){var recursiveNotify=function(x){Object.keys(x).forEach((function(A){var V=x[A];V instanceof Function?V(void 0,void 0):recursiveNotify(V)}))};recursiveNotify(B)}D[U]={source:x,complexBind:A}};(propChanged=createProxy(propChanged,V)).bindState=R,(N=N||[]).push({source:x,prop:U,listener:propChanged}),x.bind(U,propChanged)}})),{cancel:function(){!function cancelSimple(){N&&N.forEach((function(x){x.source.unbind(x.prop,x.listener)})),N=null}(),Object.keys(D).forEach((function(x){cancelComplex(x)}))}}},q=V.Class.mix((function(x){this._initObservable(x),Object.defineProperties(this,expandProperties(x))}),G),expandProperties=function(x){var A={};function addToProps(x){A[x]={get:function(){return this.getProperty(x)},set:function(A){this.setProperty(x,A)},enumerable:!0,configurable:!0}}for(;x&&x!==Object.prototype;)Object.keys(x).forEach(addToProps),x=Object.getPrototypeOf(x);return A},as=function(x){if(!x)return x;if("object"!=typeof x||x instanceof Date||Array.isArray(x))return x;if(x._getObservable)return x._getObservable();var A=new q(x);return A.backingData=x,Object.defineProperty(x,"_getObservable",{value:function(){return A},enumerable:!1,writable:!1}),A},unwrap=function(x){return x&&x.backingData?x.backingData:x};V.Namespace._moduleDefine(x,"WinJS.Binding",{mixin:{value:G,enumerable:!0,writable:!0,configurable:!0},dynamicObservableMixin:{value:G,enumerable:!0,writable:!0,configurable:!0},observableMixin:{value:z,enumerable:!0,writable:!0,configurable:!0},expandProperties:expandProperties,define:function(x){if(!(!x||"object"!=typeof x||x instanceof Date||Array.isArray(x)))return V.Class.mix((function(A){this._initObservable(A||Object.create(x))}),G,expandProperties(x));if(R.validation)throw new D("WinJS.Binding.UnsupportedDataType",U._formatString(H.unsupportedDataTypeForBinding))},as:as,unwrap:unwrap,bind:function(x,A){return bindImpl(x,A)}})})),define("WinJS/Binding/_Declarative",["exports","../Core/_Global","../Core/_WinRT","../Core/_Base","../Core/_BaseUtils","../Core/_ErrorFromName","../Core/_Log","../Core/_Resources","../Core/_WriteProfilerMark","../Promise","../Utilities/_ElementUtilities","./_BindingParser","./_Data","./_DomWeakRefTable"],(function declarativeInit(x,A,V,R,D,N,U,B,F,W,H,z,G,j){"use strict";var q=1e3*Math.random()>>0,Q=V.msSetWeakWinRTProperty&&V.msGetWeakWinRTProperty,K={get attributeBindingSingleProperty(){return'Attribute binding requires a single destination attribute name, often in the form "this[\'aria-label\']" or "width".'},get cannotBindToThis(){return"Can't bind to 'this'."},get creatingNewProperty(){return"Creating new property {0}. Full path:{1}"},get duplicateBindingDetected(){return"Binding against element with id {0} failed because a duplicate id was detected."},get elementNotFound(){return"Element not found:{0}"},get errorInitializingBindings(){return"Error initializing bindings: {0}"},get propertyDoesNotExist(){return"{0} doesn't exist. Full path:{1}"},get idBindingNotSupported(){return"Declarative binding to ID field is not supported. Initializer: {0}"},get nestedDOMElementBindingNotSupported(){return"Binding through a property {0} of type HTMLElement is not supported, Full path:{1}."}},J=D.markSupportedForProcessing,X=D.requireSupportedForProcessing;function checkBindingToken(x,A){return x?x.winBindingToken===A?x:void(U.log&&U.log(B._formatString(K.duplicateBindingDetected,x.id),"winjs binding","error")):x}function setBindingToken(x){if(x.winBindingToken)return x.winBindingToken;var A="_win_bind"+q++;return Object.defineProperty(x,"winBindingToken",{configurable:!1,writable:!1,enumerable:!1,value:A}),A}function initializerOneBinding(x,A,V,R,D,N,U){var B=x.initializer;if(B&&(B=B.winControl||B["data-win-control"]||B),B instanceof Function){var F=B(R,x.source,D,x.destination);return U&&(F&&F.cancel?U.bindings.push((function(){F.cancel()})):U.nocache=!0),F}B&&B.render&&(N.count++,U&&(U.nocache=!0),X(B.render).call(B,getValue(R,x.source),D).then((function(){N.checkComplete()})))}function sourceOneBinding(x,V,R,D,N,F,W){var H;if(D!==A&&(D=G.as(D)),D._getObservable&&(H=D._getObservable()),H)return F.count++,function makeBinding(x,A,V,R,D,N){var F,W=!0,H=!1;!function autoDispose(x){x._autoDispose=(x._autoDispose||[]).filter((function(x){return x()}))}(R);var resolveWeakRef=function(){if(!H){var V=checkBindingToken(j._getWeakRefElement(x),A);return V||(U.log&&U.log(B._formatString(K.elementNotFound,x),"winjs binding","info"),F&&F.cancel()),V}};if(function registerAutoDispose(x,A){var V=x._autoDispose;V&&V.push(A)}(R,resolveWeakRef),F=bindWorker(R,D.source,(function(x){var A=resolveWeakRef();A&&nestedSet(A,D.destination,x),W&&(V.checkComplete(),W=!1)}))){var z=F.cancel;F.cancel=function(){return H=!0,z.call(F)},N&&N.bindings.push((function(){F.cancel()}))}return F}(V,R,F,H,x,W);nestedSet(N,x.destination,getValue(D,x.source))}function filterIdBinding(x,A){for(var V=x.length-1;V>=0;V--){var R=x[V].destination;if(1===R.length&&"id"===R[0]){if(D.validation)throw new N("WinJS.Binding.IdBindingNotSupported",B._formatString(K.idBindingNotSupported,A));U.log&&U.log(B._formatString(K.idBindingNotSupported,A),"winjs binding","error"),x.splice(V,1)}}return x}function calcBinding(x,V){if(V){var R,D=V.expressions[x];return D||(R=filterIdBinding(z._bindingParser(x,A),x),V.expressions[x]=R),R||(R=D),R}return filterIdBinding(z._bindingParser(x,A),x)}function declarativeBind(x,V,R,D,N){return new W((function(U,B,F){!function declarativeBindImpl(x,V,R,D,N,U){var B,F={count:0,checkComplete:function checkComplete(){this.count--,0===this.count&&U()}},W=x||A.document.body,z="[data-win-bind],[data-win-control]",G=W.querySelectorAll(z);R||!W.getAttribute("data-win-bind")&&!W.winControl||(B=W),F.count++;var q=V||A;j._DOMWeakRefTable_fastLoadPath=!0;try{var K=H.data(W);K.winBindings=K.winBindings||[];for(var J=B?-1:0,Y=G.length;J<Y;J++){var $=J<0?B:G[J];if($.winControl&&$.winControl.constructor&&$.winControl.constructor.isDeclarativeControlContainer){J+=$.querySelectorAll(z).length;var Z=$.winControl.constructor.isDeclarativeControlContainer;"function"==typeof Z&&(Z=X(Z))($.winControl,(function(x){return declarativeBind(x,V,!1,D,N)}))}if($.hasAttribute("data-win-bind")){var ee=calcBinding($.getAttribute("data-win-bind"),D);if(!ee.implemented){for(var te=0,ie=ee.length;te<ie;te++){var ne=ee[te];ne.initializer=ne.initializer||N,ne.initializer?ne.implementation=initializerOneBinding:ne.implementation=sourceOneBinding}ee.implemented=!0}F.count++;var re=setBindingToken($),se=Q?re:$.id;se||($.id=se=re),j._createWeakRef($,se);var oe,ae=H.data($);ae.winBindings=null,D&&D.elements&&((oe=D.elements[se])||(D.elements[se]=oe={bindings:[]}));for(var le=0,ce=ee.length;le<ce;le++){var de=ee[le],ue=de.implementation(de,se,re,q,$,F,oe);ue&&(ae.winBindings=ae.winBindings||[],ae.winBindings.push(ue),K.winBindings.push(ue))}F.count--}}}finally{j._DOMWeakRefTable_fastLoadPath=!1}F.checkComplete()}(x,V,R,D,N,U)})).then(null,(function(x){return U.log&&U.log(B._formatString(K.errorInitializingBindings,x&&x.message),"winjs binding","error"),W.wrapError(x)}))}function converter(x){return J((function(V,R,D,N,F){var W,H=setBindingToken(D),z=Q?H:D.id;if(z||(D.id=z=H),j._createWeakRef(D,z),V!==A&&(V=G.as(V)),V._getObservable&&(W=V._getObservable()),W){var q=bindWorker(G.as(V),R,(function(A){var V=checkBindingToken(j._getWeakRefElement(z),H);V?nestedSet(V,N,x(X(A))):q&&(U.log&&U.log(B._formatString(K.elementNotFound,z),"winjs binding","info"),q.cancel())}));return q}var J=getValue(V,R);J!==F&&nestedSet(D,N,x(J))}))}function getValue(x,V){if(x!==A&&(x=X(x)),V)for(var R=0,D=V.length;R<D&&null!=x;R++)x=X(x[V[R]]);return x}function nestedSet(x,V,R){X(R),x=X(x);for(var D=0,N=V.length-1;D<N;D++){if(!(x=X(x[V[D]])))return void(U.log&&U.log(B._formatString(K.propertyDoesNotExist,V[D],V.join(".")),"winjs binding","error"));if(x instanceof A.Node)return void(U.log&&U.log(B._formatString(K.nestedDOMElementBindingNotSupported,V[D],V.join(".")),"winjs binding","error"))}if(0!==V.length){var F=V[V.length-1];U.log&&void 0===x[F]&&U.log(B._formatString(K.creatingNewProperty,F,V.join(".")),"winjs binding","warn"),x[F]=R}else U.log&&U.log(K.cannotBindToThis,"winjs binding","error")}function attributeSet(x,A,V){x=X(x),A&&1===A.length&&A[0]?x.setAttribute(A[0],V):U.log&&U.log(K.attributeBindingSingleProperty,"winjs binding","error")}var Y=converter((function defaultBind_passthrough(x){return x}));function bindWorker(x,A,V){if(A.length>1){for(var R={},D=R,N=0,U=A.length-1;N<U;N++)D=D[A[N]]={};return D[A[A.length-1]]=V,G.bind(x,R,!0)}if(1===A.length)return x.bind(A[0],V,!0),{cancel:function(){x.unbind(A[0],V),this.cancel=noop}};V(x)}function noop(){}function initializer(x){return J(x)}R.Namespace._moduleDefine(x,"WinJS.Binding",{processAll:declarativeBind,oneTime:initializer((function oneTime(x,A,V,R){return nestedSet(V,R,getValue(x,A)),{cancel:noop}})),defaultBind:initializer((function defaultBind(x,A,V,R,D){return Y(x,A,V,R,D)})),converter:converter,initializer:initializer,getValue:getValue,setAttribute:initializer((function setAttribute(x,V,R,D,N){var F,W=setBindingToken(R),H=Q?W:R.id;if(H||(R.id=H=W),j._createWeakRef(R,H),x!==A&&(x=G.as(x)),x._getObservable&&(F=x._getObservable()),F){var z=0,q=bindWorker(F,V,(function(x){if(1!=++z||x!==N){var A=checkBindingToken(j._getWeakRefElement(H),W);A?attributeSet(A,D,X(x)):q&&(U.log&&U.log(B._formatString(K.elementNotFound,H),"winjs binding","info"),q.cancel())}}));return q}var J=getValue(x,V);J!==N&&attributeSet(R,D,J)})),setAttributeOneTime:initializer((function setAttributeOneTime(x,A,V,R){return attributeSet(V,R,getValue(x,A))})),addClassOneTime:initializer((function addClassOneTime(x,A,V){V=X(V);var R=getValue(x,A);Array.isArray(R)?R.forEach((function(x){H.addClass(V,x)})):R&&H.addClass(V,R)}))})})),define("WinJS/Binding",["./Binding/_BindingParser","./Binding/_Data","./Binding/_Declarative","./Binding/_DomWeakRefTable"],(function(){})),define("WinJS/BindingTemplate/_DataTemplateCompiler",["exports","../Core/_Global","../Core/_Base","../Core/_BaseUtils","../Core/_ErrorFromName","../Core/_Log","../Core/_Resources","../Core/_WriteProfilerMark","../Binding/_BindingParser","../Binding/_Declarative","../ControlProcessor","../ControlProcessor/_OptionsParser","../Fragments","../Promise","../_Signal","../Utilities/_Dispose","../Utilities/_SafeHtml","../Utilities/_ElementUtilities"],(function templateCompilerInit(x,A,V,R,D,N,U,B,F,W,H,z,G,j,q,Q,K,J){"use strict";if(A.document){var X={get attributeBindingSingleProperty(){return'Attribute binding requires a single destination attribute name, often in the form "this[\'aria-label\']" or "width".'},get cannotBindToThis(){return"Can't bind to 'this'."},get idBindingNotSupported(){return"Declarative binding to ID field is not supported. Initializer: {0}"}};V.Namespace._moduleDefine(x,"WinJS.Binding",{_TemplateCompiler:V.Namespace._lazy((function(){var x=j._cancelBlocker,Y=W.defaultBind,$=W.oneTime,Z=W.setAttribute,ee=W.setAttributeOneTime,te=W.addClassOneTime,ie=j.as,ne=R.requireSupportedForProcessing,re=K.insertAdjacentHTMLUnsafe,se=J.data,oe=Q.markDisposable,ae=H.processAll,le=W.processAll,ce=z._optionsParser,de=z._CallExpression,ue=z._IdentifierExpression,he=F._bindingParser2,pe=H.scopedSelect,me=B;function disposeInstance(x,A,V){var R=J.data(x).bindTokens;R&&R.forEach((function(x){x&&x.cancel&&x.cancel()})),A&&A.cancel(),V&&V.cancel()}function delayedBindingProcessing(x,A){return function(V){return W.processAll(V,x,!1,null,A)}}function targetSecurityCheck(x){return(x=ne(x))instanceof A.Node?null:x}var ge=/^[A-Za-z]\w*$/,ye=/[^A-Za-z\w$]/g,fe=/[&<>'"]/g,_e={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"},Ce=/({{)|(}})|{(\w+)}|({)|(})/g,be=/^\s*;\s*$/,ve=/[A-Z]/g;function format(x,A){var V=-1!==x.indexOf("\n"),R=arguments,N=x.replace(Ce,(function(N,U,B,F,W,H,z){if(W||H)throw new D("Format:MalformedInputString","Did you forget to escape a: "+(W||H)+" at: "+z);if(U)return"{";if(B)return"}";var G,j=+F;if(void 0===(G=j===+j?R[j+1]:A[F]))throw new D("Format:MissingPart","Missing part '"+F+"'");if(V){for(var q=z;q>0&&" "===x[--q];);q>=0&&"\n"===x[q]&&(G=indent(z-q-1,G))}return G}));return N}function indent(x,A){for(var V="",R=0;R<x;R++)V+=" ";return A.split("\n").map((function(x,A){return A?V+x:x})).join("\n")}function trim(x){return x.trim()}function statements(x){return x.join(";\n")}function declarationList(x){return x.join(", ")||"empty"}function identifierAccessExpression(x){return x.map((function(x){return x.match(ge)?"."+x:format("[{0}]",+x===x?x:literal(x))})).join("")}function nullableFilteredIdentifierAccessExpression(x,A,V,R){return(A=A.map((function(x){return x.match(ge)?"."+x:(+x===x&&(x=+x),function brackets(x){return"["+x+"]"}(literal(x)))})).map((function(x){return format("{filter}({temp} = {temp}{part})",{filter:R,temp:V,part:x})}))).unshift(parens(assignment(V,x))),A.push(V),parens(A.join(" && "))}function literal(x){return JSON.stringify(x)}function newArray(x){return x?"new Array("+ +x+")":"[]"}function assignment(x,A){return x+" = "+A}function parens(x){return"("+x+")"}function htmlEscape(x){return(x=""+x).replace(fe,(function(x){return _e[x]||" "}))}function createIdentifier(x,A,V){return new String(V?""+x+A+"_"+V:""+x+A)}function multiline(x){return x.replace(/\\n/g,"\\n\\\n")}function values(x){return Object.keys(x).map((function(A){return x[A]}))}function merge(x,A){return mergeAll([x,A])}function mergeAll(x){for(var A={},V=0,R=x.length;V<R;V++)for(var D=x[V],N=Object.keys(D),U=0,B=N.length;U<B;U++){var F=N[U];A[F]=D[F]}return A}function visit(x,A,V,R){var D=x.children;if(D){var N=Object.keys(D);A&&V&&V(x,A,N.length);for(var U=0,B=N.length;U<B;U++){var F=N[U];visit(D[F],F,V,R)}A&&R&&R(x,A,Object.keys(D).length)}else A&&V&&V(x,A,0),A&&R&&R(x,A,0)}var Se=V.Class.define((function(x,A,V,R,D){var N=this;this.compiler=x,this.kind=V,this.base=new String(A),this.tree={children:{},parent:this.base,reference:function(){return N.base}},this.accessExpression=R,this.filter=D||""}),{createPathExpression:function(x,A){if(x.length){var V=this,R=x.reduce((function(x,A){return x.children=x.children||{},x.children[A]=x.children[A]||{parent:x},x.children[A]}),this.tree);return R.name=R.name||V.compiler.defineInstance(V.kind,A||"",(function(){return V.accessExpression(R.parent.name?R.parent.name:R.parent.reference(),x.slice(-1)[0],R.parent.parent===V.base,V.filter,!0)})),R.name}return this.base},lower:function(){var x=this,A=[],reference=function(A,V,R){return x.accessExpression(A.parent.name?A.parent.name:A.parent.reference(),V,A.parent.parent===x.base,x.filter,R)};visit(this.tree,"",(function pre(V,R,D){A.push(R),D>1?(V.name=V.name||x.compiler.defineInstance(x.kind,A.join("_"),reference.bind(null,V,R,!0)),V.reference=function(){return V.name}):1===D&&(V.reference=reference.bind(null,V,R))}),(function post(){A.pop()}))},deadNodeElimination:function(){visit(this.tree,"",null,(function post(x,A,V){x.name&&!x.name.dead||0===V&&x.parent&&x.parent.children&&delete x.parent.children[A]}))},definitions:function(){var x=[];return visit(this.tree,"",(function pre(A){A.name&&x.push(A)})),x.map((function(x){return x.name.definition()}))}}),Te="capture",Ee="temporary",we="variable",Ie="data",xe="global",Ae={capture:"c",temporary:"t",variable:"iv",data:"d",global:"g"},Le="import",Ve="variable",Pe={imported:"i",variable:"sv"},Re="tree",De="text",Ne="initializer",ke="template",Ue="error",Me="attribute",Oe="booleanAttribute",Be="inlineStyle",Fe="textContent",We=0,He=1,ze=2,Ge=3,je=4,qe=5,Qe=6,Ke=V.Class.define((function(x,V){if(this._stage=We,this._staticVariables={},this._staticVariablesCount=0,this._instanceVariables={},this._instanceVariablesCount={},this._debugBreak=V.debugBreakOnRender,this._defaultInitializer=ne(V.defaultInitializer||Y),this._optimizeTextBindings=!V.disableTextBindingOptimization,this._templateElement=x,this._templateContent=A.document.createElement(x.tagName),this._extractChild=V.extractChild||!1,this._controls=null,this._bindings=null,this._bindTokens=null,this._textBindingPrefix=null,this._textBindingId=0,this._suffix=[],this._htmlProcessors=[],this._profilerMarkIdentifier=V.profilerMarkIdentifier,this._captureCSE=new Se(this,"container",Te,this.generateElementCaptureAccess.bind(this)),this._dataCSE=new Se(this,"data",Ie,this.generateNormalAccess.bind(this),this.importFunctionSafe("dataSecurityCheck",ne)),this._globalCSE=new Se(this,this.importFunctionSafe("global",A),xe,this.generateNormalAccess.bind(this),this.importFunctionSafe("globalSecurityCheck",ne)),G.renderCopy(this._templateElement,this._templateContent),this._extractChild)for(;this._templateContent.childElementCount>1;)this._templateContent.removeChild(this._templateContent.lastElementChild)}),{addClassOneTimeTextBinding:function(x){var A=this,V=this.createTextBindingHole(x.elementCapture.element.tagName,"class",++this._textBindingId);x.textBindingId=V,x.kind=De,x.elementCapture.element.classList.add(V),x.elementCapture.refCount--,x.definition=function(){return A.formatCode("{htmlEscape}({value})",{htmlEscape:A._staticVariables.htmlEscape,value:x.value()})}},addClassOneTimeTreeBinding:function(x){var A=this;x.pathExpression=this.bindingExpression(x),x.value=function(){return x.pathExpression},x.kind=Re,x.definition=function(){return A.formatCode("{element}.classList.add({value})",{element:x.elementCapture,value:x.value()})}},analyze:function(){if(this._stage>He)throw"Illegal: once we have moved past analyze we cannot revist it";this._stage=He,this._controls=this.gatherControls(),this._bindings=this.gatherBindings(),this._children=this.gatherChildren(),this.cleanControlAndBindingAttributes(),this.async&&this.createAsyncParts(),this.nullableIdentifierAccessTemporary=this.defineInstance(Ee);var x=this._templateContent.innerHTML;this._html=function(){return multiline(literal(x))},this._html.text=x},bindingExpression:function(x){return this._dataCSE.createPathExpression(x.source,x.source.join("_"))},capture:function(x){var A=x._capture;if(A)return A.refCount++,A;for(var V=[x],R=x.parentNode,D=x.tagName;R!==this._templateContent;)D=R.tagName+"_"+D,V.unshift(R),R=R.parentNode;for(var N=0,U=V.length;N<U;N++){var B=V[N];V[N]=Array.prototype.indexOf.call(R.children,B),R=B}return(A=this._captureCSE.createPathExpression(V,D.toLowerCase())).element=x,A.element._capture=A,A.refCount=1,A},cleanControlAndBindingAttributes:function(){for(var x=this._templateContent.querySelectorAll("[data-win-bind],[data-win-control]"),A=0,V=x.length;A<V;A++){var R=x[A];R.isDeclarativeControlContainer&&(A+=R.querySelectorAll("[data-win-bind],[data-win-control]").length)}},compile:function(x,A,V){if(this._stage>je)throw"Illegal: once we have moved past compile we cannot revist it";this._stage=je;var R=this;this._returnedElement=this._extractChild?"container.firstElementChild":"container";var D,N,U=this._controls.map((function(x){var A;A=x.async?"{target}.winControl = {target}.winControl || new {SafeConstructor}({target}, {options}, controlDone)":"{target}.winControl = {target}.winControl || new {SafeConstructor}({target}, {options})";var V=R.formatCode(A,{target:x.elementCapture,SafeConstructor:x.SafeConstructor,options:R.generateOptionsLiteral(x.optionsParsed,x.elementCapture)});if(x.isDeclarativeControlContainer&&"function"==typeof x.isDeclarativeControlContainer.imported){var D=[V];return D.push(R.formatCode("{isDeclarativeControlContainer}({target}.winControl, {delayedControlProcessing})",{target:x.elementCapture,isDeclarativeControlContainer:x.isDeclarativeControlContainer,delayedControlProcessing:R._staticVariables.ui_processAll})),D.push(R.formatCode("{isDeclarativeControlContainer}({target}.winControl, {delayedBindingProcessing}(data, {templateDefaultInitializer}))",{target:x.elementCapture,isDeclarativeControlContainer:x.isDeclarativeControlContainer,delayedBindingProcessing:R._staticVariables.delayedBindingProcessing,templateDefaultInitializer:R._staticVariables.templateDefaultInitializer||literal(null)})),D.join(";\n")}return V})),B=this._bindings.map((function(x){switch(x.kind){case ke:return R.formatCode("({nestedTemplates}[{nestedTemplate}] = {template}.render({path}, {dest}))",{nestedTemplates:R._nestedTemplates,nestedTemplate:literal(x.nestedTemplate),template:x.template,path:x.pathExpression,dest:x.elementCapture});case Ne:var A;return A=x.initialValue?"({bindTokens}[{bindToken}] = {initializer}(data, {sourceProperties}, {dest}, {destProperties}, {initialValue}))":"({bindTokens}[{bindToken}] = {initializer}(data, {sourceProperties}, {dest}, {destProperties}))",R.formatCode(A,{bindTokens:R._bindTokens,bindToken:literal(x.bindToken),initializer:x.initializer,sourceProperties:literal(x.source),destProperties:literal(x.destination),dest:x.elementCapture,initialValue:x.initialValue});case Re:return x.definition();case De:case Ue:break;default:throw"NYI"}}));V?(D=B.filter((function(x,A){return!R._bindings[A].delayable})),N=B.filter((function(x,A){return R._bindings[A].delayable}))):(D=B,N=[]);var F=values(this._instanceVariables),W=F.filter((function(x){return x.kind===we})).map((function(x){return x.definition()})),H=this._captureCSE.definitions(),z=this._globalCSE.definitions(),G=this._dataCSE.definitions(),j=this._children.map((function(x){return R.formatCodeN("{0}.msParentSelectorScope = true",x)})),q=this._suffix.map((function(x){return x()})),Q="";V&&N.length&&(Q=R.formatCode(nt,{delayed_binding_processing:statements(N)}));var K=R.formatCode(x,mergeAll([this._staticVariables,A||{},{profilerMarkIdentifierStart:literal("WinJS.Binding.Template:render"+this._profilerMarkIdentifier+",StartTM"),profilerMarkIdentifierStop:literal("WinJS.Binding.Template:render"+this._profilerMarkIdentifier+",StopTM"),html:this._html(),tagName:literal(this._templateElement.tagName),instance_variable_declarations:declarationList(F),global_definitions:statements(z),data_definitions:statements(G),instance_variable_definitions:statements(W),capture_definitions:statements(H),set_msParentSelectorScope:statements(j),debug_break:this.generateDebugBreak(),control_processing:statements(U),control_counter:this._controlCounter,binding_processing:statements(D),renderComplete:Q,suffix_statements:statements(q),nestedTemplates:this._nestedTemplates,returnedElement:this._returnedElement}]));return this.prettify(K)},createAsyncParts:function(){this._nestedTemplates=this._nestedTemplates||this.defineInstance(we,"nestedTemplates",(function(){return newArray(0)})),this._controlCounter=this._controlCounter||this.defineInstance(we,"controlCounter",(function(){return literal(1)}))},createTextBindingHole:function(x,A,V){if(!this._textBindingPrefix){for(var R="";-1!==this._html.text.indexOf("textbinding"+R);)R=R||0,R++;this._textBindingPrefix="textbinding"+R,this._textBindingRegex=new RegExp("(#?"+this._textBindingPrefix+"_\\d+)")}var D=this._textBindingPrefix+"_"+V;return"IMG"===x&&"src"===A&&(D="#"+D),D},deadCodeElimination:function(){var x=this;Object.keys(this._instanceVariables).forEach((function(A){var V=x._instanceVariables[A];V.kind===Te&&(x._templateContent.contains(V.element)||(V.dead=!0),0===V.refCount&&(V.dead=!0),V.dead&&(V.definition=function(){},V.name=null,delete x._instanceVariables[A]))})),this._controls=this._controls.filter((function(x){return!x.elementCapture.dead})),this._bindings=this._bindings.filter((function(x){return!x.elementCapture.dead})),this._captureCSE.deadNodeElimination()},defineInstance:function(x,A,V){if(this._stage>=je)throw"Illegal: define instance variable after compilation stage has started";var R=this._instanceVariablesCount[x]||0,D=A?A.replace(ye,"_"):"",N=createIdentifier(Ae[x],R,D);return N.definition=function(){return assignment(N,V())},N.kind=x,this._instanceVariables[N]=N,this._instanceVariablesCount[x]=R+1,N},defineStatic:function(x,A,V){if(this._stage>=qe)throw"Illegal: define static variable after link stage has started";if(A){var R=this._staticVariables[A];if(R)return R}var D=A?A.replace(ye,"_"):"",N=createIdentifier(Pe[x],this._staticVariablesCount,D);return N.definition=function(){return assignment(N,V())},N.kind=x,this._staticVariables[A||N]=N,this._staticVariablesCount++,N},done:function(){if(this._stage>Qe)throw"Illegal: once we have moved past done we cannot revist it";this._stage=Qe},emitScopedSelect:function(x,A){return this.formatCode("{scopedSelect}({selector}, {element})",{scopedSelect:this._staticVariables.scopedSelect,selector:literal(x),element:A})},emitOptionsNode:function(x,A,V){var R=this;if(x)switch(typeof x){case"object":if(Array.isArray(x)){A.push("[");for(var D=0,N=x.length;D<N;D++)this.emitOptionsNode(x[D],A,V),A.push(",");A.push("]")}else if(x instanceof de)A.push("select"===x.target?this.emitScopedSelect(x.arg0Value,V):literal(null));else if(x instanceof ue&&x.parts[0]instanceof de){var U=x.parts[0];A.push(nullableFilteredIdentifierAccessExpression("select"===U.target?this.emitScopedSelect(U.arg0Value,V):literal(null),x.parts.slice(1),this.nullableIdentifierAccessTemporary,this.importFunctionSafe("requireSupportedForProcessing",ne)))}else x instanceof ue?A.push(x.pathExpression):(A.push("{"),Object.keys(x).forEach((function(D){A.push(function propertyName(x){return x.match(ge)?x:+x===x?+x:literal(x)}(D)),A.push(":"),R.emitOptionsNode(x[D],A,V),A.push(",")})),A.push("}"));break;default:A.push(literal(x))}else A.push(literal(null))},findGlobalIdentifierExpressions:function(x,A){A=A||[];var V=this;return Object.keys(x).forEach((function(R){var D=x[R];"object"==typeof D&&(D instanceof ue?D.parts[0]instanceof de||A.push(D):V.findGlobalIdentifierExpressions(D,A))})),A},formatCodeN:function(){if(this._stage<je)throw"Illegal: format code at before compilation stage has started";return format.apply(null,arguments)},formatCode:function(x,A){if(this._stage<je)throw"Illegal: format code at before compilation stage has started";return format(x,A)},gatherBindings:function(){for(var x=-1,V=this,R=-1,D=[],N="[data-win-bind],[data-win-control]",U=this._templateContent.querySelectorAll(N),B=0,F=U.length;B<F;B++){var W=U[B];if(W.isDeclarativeControlContainer&&(B+=W.querySelectorAll(N).length),W.hasAttribute("data-win-bind")){var H=W.getAttribute("data-win-bind"),z=he(H,A);z.forEach((function(D){if(D.initializer){var N=D.initializer.join("."),U=D.initializer.reduce((function(x,A){return x?ne(x[A]):null}),A);U.render?(ne(U.render),D.template=V.importFunctionSafe(N,U),D.pathExpression=V.bindingExpression(D),D.nestedTemplate=++R,D.kind=ke):U.winControl&&U.winControl.render?(ne(U.winControl.render),D.template=V.importFunctionSafe(N,U.winControl),D.pathExpression=V.bindingExpression(D),D.nestedTemplate=++R,D.kind=ke):(D.initializer=V.importFunction(N,U),D.bindToken=++x,D.kind=Ne)}else D.initializer=V.importFunctionSafe("templateDefaultInitializer",V._defaultInitializer),D.bindToken=++x,D.kind=Ne;D.elementCapture=V.capture(W),D.bindingText=H})),D.push.apply(D,z)}}var G=R+1;G>0&&(this.async=!0,this._nestedTemplates=this.defineInstance(we,"nestedTemplates",(function(){return newArray(G)})));var j=x+1;return j>0&&(this._bindTokens=this.defineInstance(we,"bindTokens",(function(){return newArray(j)})),this._suffix.push((function(){return V.formatCode("{utilities_data}(returnedElement).bindTokens = {bindTokens}",{utilities_data:V._staticVariables.utilities_data,bindTokens:V._bindTokens})}))),D},gatherChildren:function(){var x=this;return Array.prototype.map.call(this._templateContent.children,(function(A){return x.capture(A)}))},gatherControls:function(){for(var x=this,V=0,D=[],N=this._templateContent.querySelectorAll("[data-win-control]"),U=0,B=N.length;U<B;U++){var F=N[U],W=F.getAttribute("data-win-control"),H=R._getMemberFiltered(W.trim(),A,ne);if(H){var z=F.getAttribute("data-win-options")||literal({}),G=H.length>2;G&&(V++,this.async=!0);var j=H.isDeclarativeControlContainer;j&&("function"==typeof j&&(j=this.importFunction(W+"_isDeclarativeControlContainer",j)),F.isDeclarativeControlContainer=j,U+=F.querySelectorAll("[data-win-control]").length);var q={elementCapture:this.capture(F),name:W,SafeConstructor:this.importFunctionSafe(W,H),async:G,optionsText:literal(z),optionsParsed:ce(z),isDeclarativeControlContainer:j};D.push(q),this.findGlobalIdentifierExpressions(q.optionsParsed).forEach((function(A){A.pathExpression=x.globalExpression(A.parts)}))}}return V>0&&(this._controlCounter=this.defineInstance(we,"controlCounter",(function(){return literal(V+1)}))),D},generateElementCaptureAccess:function(x,A,V){if(V){var R=""+A=="0"?"":" + "+A;return this.formatCodeN("{0}.children[startIndex{1}]",x,R)}return this.formatCodeN("{0}.children[{1}]",x,A)},generateNormalAccess:function(x,A,V,R,D){var N;return x.indexOf(this.nullableIdentifierAccessTemporary)>=0?(N=D?"{left} && {filter}({temp}{right})":"{left} && ({temp} = {filter}({temp}{right}))",this.formatCode(N,{temp:this.nullableIdentifierAccessTemporary,left:x,right:identifierAccessExpression([A]),filter:R})):(N=D?"({temp} = {left}) && {filter}({temp}{right})":"({temp} = {left}) && ({temp} = {filter}({temp}{right}))",this.formatCode(N,{temp:this.nullableIdentifierAccessTemporary,left:x,right:identifierAccessExpression([A]),filter:R}))},generateOptionsLiteral:function(x,A){var V=[];return this.emitOptionsNode(x,V,A),V.join(" ")},generateDebugBreak:function(){if(this._debugBreak){var x=this.defineStatic(Ve,"debugCounter",(function(){return literal(0)}));return this.formatCodeN("if (++{0} === 1) {{ debugger; }}",x)}return""},globalExpression:function(x){return this._globalCSE.createPathExpression(x,x.join("_"))},importFunction:function(x,A){return this.importFunctionSafe(x,ne(A))},importFunctionSafe:function(x,A){var V=this,R=this.defineStatic(Le,x,(function(){return V.formatCodeN("({0}{1})","imports",identifierAccessExpression([x]))}));if(R.imported&&R.imported!==A)throw"Duplicate import: '"+x+"'";return R.imported=A,R},importAll:function(x){return Object.keys(x).forEach((function(A){ne(x[A])})),this.importAllSafe(x)},importAllSafe:function(x){var A=this;return Object.keys(x).reduce((function(V,R){return V[R]=A.importFunctionSafe(R,x[R]),V}),{})},link:function(x){if(this._stage>qe)throw"Illegal: once we have moved past link we cannot revist it";this._stage=qe;var A=this,V=function keys(x){return Object.keys(x)}(this._staticVariables).filter((function(x){return A._staticVariables[x].kind===Le})).reduce((function(x,V){return x[V]=A._staticVariables[V].imported,x}),{}),R=values(this._staticVariables);return new Function("imports",this.formatCode(st,{static_variable_declarations:declarationList(R),static_variable_definitions:statements(R.map((function(x){return x.definition()}))),body:x.trim()}))(V)},lower:function(){if(this._stage>Ge)throw"Illegal: once we have moved past lower we cannot revist it";this._stage=Ge,this._captureCSE.lower(),this._dataCSE.lower(),this._globalCSE.lower()},markBindingAsError:function(x){x&&(x.kind=Ue,this.markBindingAsError(x.original))},oneTimeTextBinding:function(x){var A=this,V=this.oneTimeTextBindingAnalyze(x);if(V){var R;x.original&&(R=x.original.initialValue);var D=this.createTextBindingHole(x.elementCapture.element.tagName,V.attribute,++this._textBindingId);switch(x.textBindingId=D,x.kind=De,x.elementCapture.refCount--,x.definition=function(){var V;return V=R?"{htmlEscape}({initialValue})":"{htmlEscape}({getter})",A.formatCode(V,{htmlEscape:A._staticVariables.htmlEscape,getter:x.value(),initialValue:R})},V.kind){case Me:x.elementCapture.element.setAttribute(V.attribute,D);break;case Oe:x.elementCapture.element.setAttribute(V.attribute,D),x.definition=function(){var D;return D=R?'({initialValue} ? {attribute} : "")':'({value} ? {attribute} : "")',A.formatCode(D,{value:x.value(),attribute:literal(V.attribute),initialValue:R})},this._htmlProcessors.push((function(x){return x.replace(new RegExp(V.attribute+'="'+D+'"',"i"),D)}));break;case Fe:x.elementCapture.element.textContent=D;break;case Be:var N=x.elementCapture.element;if(!N.msReplaceStyle){N.msReplaceStyle=N.getAttribute("style")||"",""!==N.msReplaceStyle&&";"!==N.msReplaceStyle[N.msReplaceStyle.length-1]&&(N.msReplaceStyle=N.msReplaceStyle+";"),N.setAttribute("style","msReplaceStyle:'"+D+"'");var U=N.getAttribute("style");this._htmlProcessors.push((function(x){return x.replace(U,N.msReplaceStyle)}))}N.msReplaceStyle=N.msReplaceStyle+V.property+":"+D+";";break;default:throw"NYI"}}},oneTimeTextBindingAnalyze:function(x){var A=x.elementCapture.element,V=A.tagName,R=x.destination[0];switch(V){case"A":switch(R){case"href":return{kind:Me,attribute:R}}break;case"IMG":switch(R){case"alt":case"src":case"width":case"height":return{kind:Me,attribute:R}}break;case"SELECT":switch(R){case"disabled":case"multiple":case"required":return{kind:Oe,attribute:R};case"size":return{kind:Me,attribute:R}}break;case"OPTION":switch(R){case"label":case"value":return{kind:Me,attribute:R};case"disabled":case"selected":return{kind:Oe,attribute:R}}break;case"INPUT":switch(R){case"checked":switch(A.type){case"checkbox":case"radio":return{kind:Oe,attribute:R}}break;case"disabled":return{kind:Oe,attribute:R};case"max":case"maxLength":case"min":case"step":case"value":return{kind:Me,attribute:R};case"size":switch(A.type){case"text":case"search":case"tel":case"url":case"email":case"password":return{kind:Me,attribute:R}}break;case"readOnly":switch(A.type){case"hidden":case"range":case"color":case"checkbox":case"radio":case"file":case"button":break;default:return{kind:Oe,attribute:R}}}break;case"BUTTON":switch(R){case"disabled":return{kind:Oe,attribute:R};case"value":return{kind:Me,attribute:R}}break;case"TEXTAREA":switch(R){case"disabled":case"readOnly":case"required":return{kind:Oe,attribute:R};case"cols":case"maxLength":case"placeholder":case"rows":case"wrap":return{kind:Me,attribute:R}}}switch(R){case"className":return{kind:Me,attribute:"class"};case"dir":case"lang":case"name":case"title":case"tabIndex":return{kind:Me,attribute:R};case"style":if(x.destination.length>1){var D=x.destination[1];if("cssText"===D)return;if("string"==typeof A.style[D])return("m"===D[0]&&"s"===D[1]||"webkit"===D.substring(0,6))&&(D="-"+D),D=D.replace(ve,(function(x){return"-"+x.toLowerCase()})),{kind:Be,property:D,attribute:"style"}}break;case"innerText":case"textContent":return{kind:Fe,attribute:"textContent"}}},oneTimeTreeBinding:function(x){if(1===x.destination.length&&"id"===x.destination[0]){if(R.validation)throw new D("WinJS.Binding.IdBindingNotSupported",U._formatString(X.idBindingNotSupported,x.bindingText));return N.log&&N.log(U._formatString(X.idBindingNotSupported,x.bindingText),"winjs binding","error"),void this.markBindingAsError(x)}if(0===x.destination.length)return N.log&&N.log(X.cannotBindToThis,"winjs binding","error"),void this.markBindingAsError(x);var A,V=this;x.pathExpression=this.bindingExpression(x),x.value=function(){return x.pathExpression},x.original&&(A=x.pathExpression,x.original.initialValue=A),x.kind=Re,x.definition=function(){var R;return R=A?"({targetPath} || {{}}){prop} = {initialValue}":"({targetPath} || {{}}){prop} = {sourcePath}",V.formatCode(R,{targetPath:nullableFilteredIdentifierAccessExpression(x.elementCapture,x.destination.slice(0,-1),V.nullableIdentifierAccessTemporary,V.importFunctionSafe("targetSecurityCheck",targetSecurityCheck)),prop:identifierAccessExpression(x.destination.slice(-1)),sourcePath:x.value(),initialValue:A})}},optimize:function(){if(this._stage>ze)throw"Illegal: once we have moved past link we cannot revist it";this._stage=ze;for(var x=0;x<this._bindings.length;x++)if(!(N=this._bindings[x]).template)switch(N.initializer.imported){case Y:(A=merge(N,{kind:Re,initializer:this.importFunctionSafe("init_oneTime",$),original:N})).elementCapture.refCount++,this.oneTimeTreeBinding(A),this._bindings.splice(x,0,A),N.delayable=!0,x++;break;case Z:var A;(A=merge(N,{kind:Re,initializer:this.importFunctionSafe("init_setAttributeOneTime",ee),original:N})).elementCapture.refCount++,this.setAttributeOneTimeTreeBinding(A),this._bindings.splice(x,0,A),N.delayable=!0,x++;break;case $:this.oneTimeTreeBinding(N);break;case ee:this.setAttributeOneTimeTreeBinding(N);break;case te:this.addClassOneTimeTreeBinding(N);break;default:N.initializer&&(N.delayable=!!N.initializer.imported.delayable)}if(this._optimizeTextBindings){var V={};for(x=0;x<this._bindings.length;x++)if(!(N=this._bindings[x]).template&&N.kind!==Ue){switch(N.initializer.imported){case $:this.oneTimeTextBinding(N);break;case ee:this.setAttributeOneTimeTextBinding(N);break;case te:this.addClassOneTimeTextBinding(N)}N.textBindingId&&(V[N.textBindingId]=N)}if(Object.keys(V).length){var R=this._templateContent.innerHTML,D=(R=this._htmlProcessors.reduce((function(x,A){return A(x)}),R)).split(this._textBindingRegex);for(x=1;x<D.length;x+=2){var N=V[D[x]];D[x]=N.definition}this._html=function(){return multiline(D.map((function(x){return"string"==typeof x?literal(x):x()})).join(" + "))}}}},prettify:function(x){return x.split("\n").filter((function(x){return!be.test(x)})).join("\n")},setAttributeOneTimeTextBinding:function(x){var A,V=this,R=x.destination[0],D=this.createTextBindingHole(x.elementCapture.element.tagName,R,++this._textBindingId);x.original&&(A=x.original.initialValue),x.textBindingId=D,x.kind=De,x.elementCapture.element.setAttribute(R,D),x.elementCapture.refCount--,x.definition=function(){var R;return R=A?"{htmlEscape}({initialValue})":"{htmlEscape}({value})",V.formatCode(R,{htmlEscape:V._staticVariables.htmlEscape,initialValue:A,value:x.value()})}},setAttributeOneTimeTreeBinding:function(x){if(1===x.destination.length&&"id"===x.destination[0]){if(R.validation)throw new D("WinJS.Binding.IdBindingNotSupported",U._formatString(X.idBindingNotSupported,x.bindingText));return N.log&&N.log(U._formatString(X.idBindingNotSupported,x.bindingText),"winjs binding","error"),void this.markBindingAsError(x)}if(1!==x.destination.length||!x.destination[0])return N.log&&N.log(X.attributeBindingSingleProperty,"winjs binding","error"),void this.markBindingAsError(x);var A,V=this;x.pathExpression=this.bindingExpression(x),x.value=function(){return x.pathExpression},x.original&&(A=this.defineInstance(we,"",x.value),x.original.initialValue=A),x.kind=Re,x.definition=function(){var R;return R=A?'{element}.setAttribute({attribute}, "" + {initialValue})':'{element}.setAttribute({attribute}, "" + {value})',V.formatCode(R,{element:x.elementCapture,attribute:literal(x.destination[0]),initialValue:A,value:x.value()})}}},{_TreeCSE:Se,compile:function TemplateCompiler_compile(V,R,D){if(!(R instanceof A.HTMLElement))throw"Illegal";var N=new Ke(R,D);N.analyze();var U,B,F=N.importAllSafe({Signal:q,global:A,document:A.document,cancelBlocker:x,promise_as:ie,disposeInstance:disposeInstance,markDisposable:oe,ui_processAll:ae,binding_processAll:le,insertAdjacentHTMLUnsafe:re,promise:j,utilities_data:se,requireSupportedForProcessing:ne,htmlEscape:htmlEscape,scopedSelect:pe,delayedBindingProcessing:delayedBindingProcessing,writeProfilerMark:me});switch(N.optimize(),N.deadCodeElimination(),N.lower(),D.target){case"render":U=N.async?et:Ze,B=!1;break;case"renderItem":U=N.async?rt:it,B=!0}var W=N.compile(U,F,B),H=N.link(W);return N.done(),H}});function trimLinesRight(x){return x.replace(/^\s*$/gm,"").replace(/^(.*[^\s])( *)$/gm,(function(x,A){return A}))}var Je=trimLinesRight('container.classList.add("win-template");                                                              \nvar html = {html};                                                                                      \n{insertAdjacentHTMLUnsafe}(container, "beforeend", html);                                             \nreturnedElement = {returnedElement};                                                                    \n                                                                                                        \n// Capture Definitions                                                                                  \n{capture_definitions};                                                                                  \n{set_msParentSelectorScope};                                                                            \n                                                                                                        \n'),Xe=trimLinesRight("// Control Processing                                                                                   \n{control_processing};                                                                                   \n                                                                                                        \n// Binding Processing                                                                                   \n{binding_processing};                                                                                   \n                                                                                                        \nvar result = {promise_as}(returnedElement);                                                             \n"),Ye=trimLinesRight('var controlSignal = new {Signal}();                                                                     \nvar controlDone = function () {{ if (--{control_counter} === 0) {{ controlSignal.complete(); }} }};     \ncontrolDone();                                                                                          \n                                                                                                        \n// Control Processing                                                                                   \n{control_processing};                                                                                   \n                                                                                                        \nvar result = controlSignal.promise.then(function () {{                                                  \n    // Binding Processing                                                                               \n    {binding_processing};                                                                               \n    return {promise}.join({nestedTemplates});                                                           \n}}).then(function () {{                                                                                 \n    return returnedElement;                                                                             \n}}).then(null, function (e) {{                                                                          \n    if (typeof e === "object" && e.name === "Canceled") {{ returnedElement.dispose(); }}            \n    return {promise}.wrapError(e);                                                                      \n}});                                                                                                    \n'),$e=trimLinesRight("{markDisposable}(returnedElement, function () {{ {disposeInstance}(returnedElement, result); }});       \n{suffix_statements};                                                                                    \n"),Ze=trimLinesRight('function render(data, container) {{                                                                     \n    {debug_break}                                                                                       \n    if (typeof data === "object" && typeof data.then === "function") {{                             \n        // async data + a container falls back to interpreted path                                      \n        if (container) {{                                                                               \n            var result = this._renderInterpreted(data, container);                                      \n            return result.element.then(function () {{ return result.renderComplete; }});                \n        }}                                                                                              \n        return {cancelBlocker}(data).then(function(data) {{ return render(data); }});                   \n    }}                                                                                                  \n                                                                                                        \n    {writeProfilerMark}({profilerMarkIdentifierStart});                                                 \n                                                                                                        \n    // Declarations                                                                                     \n    var {instance_variable_declarations};                                                               \n    var returnedElement;                                                                                \n                                                                                                        \n    // Global Definitions                                                                               \n    {global_definitions};                                                                               \n                                                                                                        \n    // Data Definitions                                                                                 \n    data = (data === {global} ? data : {requireSupportedForProcessing}(data));                          \n    {data_definitions};                                                                                 \n                                                                                                        \n    // Instance Variable Definitions                                                                    \n    {instance_variable_definitions};                                                                    \n                                                                                                        \n    // HTML Processing                                                                                  \n    container = container || {document}.createElement({tagName});                                       \n    var startIndex = container.childElementCount;                                                       \n    '+trim(indent(4,Je))+"                                           \n                                                                                                        \n    "+trim(indent(4,Xe))+"                                      \n    "+trim(indent(4,$e))+"                                           \n                                                                                                        \n    {writeProfilerMark}({profilerMarkIdentifierStop});                                                  \n                                                                                                        \n    return result;                                                                                      \n}}                                                                                                      \n"),et=trimLinesRight('function render(data, container) {{                                                                     \n    {debug_break}                                                                                       \n    if (typeof data === "object" && typeof data.then === "function") {{                             \n        // async data + a container falls back to interpreted path                                      \n        if (container) {{                                                                               \n            var result = this._renderInterpreted(data, container);                                      \n            return result.element.then(function () {{ return result.renderComplete; }});                \n        }}                                                                                              \n        return {cancelBlocker}(data).then(function(data) {{ return render(data, container); }});        \n    }}                                                                                                  \n                                                                                                        \n    {writeProfilerMark}({profilerMarkIdentifierStart});                                                 \n                                                                                                        \n    // Declarations                                                                                     \n    var {instance_variable_declarations};                                                               \n    var returnedElement;                                                                                \n                                                                                                        \n    // Global Definitions                                                                               \n    {global_definitions};                                                                               \n                                                                                                        \n    // Data Definitions                                                                                 \n    data = (data === {global} ? data : {requireSupportedForProcessing}(data));                          \n    {data_definitions};                                                                                 \n                                                                                                        \n    // Instance Variable Definitions                                                                    \n    {instance_variable_definitions};                                                                    \n                                                                                                        \n    // HTML Processing                                                                                  \n    container = container || {document}.createElement({tagName});                                       \n    var startIndex = container.childElementCount;                                                       \n    '+trim(indent(4,Je))+"                                           \n                                                                                                        \n    "+trim(indent(4,Ye))+"                                 \n    "+trim(indent(4,$e))+"                                           \n                                                                                                        \n    {writeProfilerMark}({profilerMarkIdentifierStop});                                                  \n                                                                                                        \n    return result;                                                                                      \n}}                                                                                                      \n"),tt=trimLinesRight("{markDisposable}(returnedElement, function () {{ {disposeInstance}(returnedElement, result, renderComplete); }});\n{suffix_statements};                                                                                    \n"),it=trimLinesRight('function renderItem(itemPromise) {{                                                                     \n    {debug_break}                                                                                       \n    // Declarations                                                                                     \n    var {instance_variable_declarations};                                                               \n    var element, renderComplete, data, returnedElement;                                                 \n                                                                                                        \n    element = itemPromise.then(function renderItem(item) {{                                             \n        if (typeof item.data === "object" && typeof item.data.then === "function") {{               \n            return {cancelBlocker}(item.data).then(function (data) {{ return renderItem({{ data: data }}); }});\n        }}                                                                                              \n                                                                                                        \n        {writeProfilerMark}({profilerMarkIdentifierStart});                                             \n                                                                                                        \n        // Global Definitions                                                                           \n        {global_definitions};                                                                           \n                                                                                                        \n        // Data Definitions                                                                             \n        data = item.data;                                                                               \n        data = (data === {global} ? data : {requireSupportedForProcessing}(data));                      \n        {data_definitions};                                                                             \n                                                                                                        \n        // Instance Variable Definitions                                                                \n        {instance_variable_definitions};                                                                \n                                                                                                        \n        // HTML Processing                                                                              \n        var container = {document}.createElement({tagName});                                            \n        var startIndex = 0;                                                                             \n        '+trim(indent(8,Je))+"                                       \n                                                                                                        \n        "+trim(indent(8,Xe))+"                                  \n        "+trim(indent(8,tt))+"                                   \n                                                                                                        \n        {writeProfilerMark}({profilerMarkIdentifierStop});                                              \n                                                                                                        \n        return result;                                                                                  \n    }});                                                                                                \n    {renderComplete};                                                                                   \n    return {{                                                                                           \n        element: element,                                                                               \n        renderComplete: renderComplete || element,                                                      \n    }};                                                                                                 \n}}                                                                                                      \n"),nt=trimLinesRight("renderComplete = element.then(function () {{                                                            \n    return itemPromise;                                                                                 \n}}).then(function (item) {{                                                                             \n    return item.ready || item;                                                                          \n}}).then(function (item) {{                                                                             \n    {delayed_binding_processing};                                                                       \n    return element;                                                                                     \n}});                                                                                                    \n"),rt=trimLinesRight('function renderItem(itemPromise) {{                                                                     \n    {debug_break}                                                                                       \n    // Declarations                                                                                     \n    var {instance_variable_declarations};                                                               \n    var element, renderComplete, data, returnedElement;                                                 \n                                                                                                        \n    element = itemPromise.then(function renderItem(item) {{                                             \n        if (typeof item.data === "object" && typeof item.data.then === "function") {{               \n            return {cancelBlocker}(item.data).then(function (data) {{ return renderItem({{ data: data }}); }});\n        }}                                                                                              \n                                                                                                        \n        {writeProfilerMark}({profilerMarkIdentifierStart});                                             \n                                                                                                        \n        // Global Definitions                                                                           \n        {global_definitions};                                                                           \n                                                                                                        \n        // Data Definitions                                                                             \n        data = item.data;                                                                               \n        data = (data === {global} ? data : {requireSupportedForProcessing}(data));                      \n        {data_definitions};                                                                             \n                                                                                                        \n        // Instance Variable Definitions                                                                \n        {instance_variable_definitions};                                                                \n                                                                                                        \n        // HTML Processing                                                                              \n        var container = {document}.createElement({tagName});                                            \n        var startIndex = 0;                                                                             \n        '+trim(indent(8,Je))+"                                       \n                                                                                                        \n        "+trim(indent(8,Ye))+"                             \n        "+trim(indent(8,tt))+"                                   \n                                                                                                        \n        {writeProfilerMark}({profilerMarkIdentifierStop});                                              \n                                                                                                        \n        return result;                                                                                  \n    }});                                                                                                \n    {renderComplete};                                                                                   \n    return {{                                                                                           \n        element: element,                                                                               \n        renderComplete: renderComplete || element,                                                      \n    }};                                                                                                 \n}}                                                                                                      \n"),st=trimLinesRight('"use strict";                                                                                         \n                                                                                                        \n// statics                                                                                              \nvar {static_variable_declarations};                                                                     \n{static_variable_definitions};                                                                          \n                                                                                                        \n// generated template rendering function                                                                \nreturn {body};                                                                                          \n');return Ke}))})}})),define("WinJS/BindingTemplate",["exports","./Core/_Global","./Core/_WinRT","./Core/_Base","./Core/_BaseUtils","./Core/_Log","./Core/_WriteProfilerMark","./Binding/_Declarative","./BindingTemplate/_DataTemplateCompiler","./ControlProcessor","./Fragments","./Promise","./Utilities/_Dispose","./Utilities/_ElementUtilities"],(function dataTemplateInit(x,A,V,R,D,N,U,B,F,W,H,z,G,j){"use strict";if(A.document){var q=z._cancelBlocker;R.Namespace._moduleDefine(x,"WinJS.Binding",{Template:R.Namespace._lazy((function(){function interpretedRender(V,R,D){1==++V._counter&&(V.debugBreakOnRender||x._debugBreakOnRender);var N=z.wrap(),U=D||A.document.createElement(V.element.tagName);j.addClass(U,"win-template"),j.addClass(U,"win-loading");var F=V;function done(){return j.removeClass(U,"win-loading"),K||U}var Q,K,J=U.children.length,dispose=function(){var x=j.data(U).winBindings;x&&x.forEach((function(x){x.cancel()})),N.cancel()};V.extractChild?Q=H.renderCopy(F.href||F.element,A.document.createElement(F.element.tagName)).then((function(x){var A=x.firstElementChild;return K=A,G.markDisposable(A,dispose),U.appendChild(A),A})):(G.markDisposable(U,dispose),Q=H.renderCopy(F.href||F.element,U));var X=Q.then((function Template_renderImpl_renderComplete_then(){var x;if(0===J)x=function(x,A,V,R){return x(K||U,A,V,R)};else{var A=U.children;if(A.length===J+1)x=function(x,V,R,D){return x(A[J],V,R,D)};else{for(var V=[],D=J,H=A.length;D<H;D++)V.push(A[D]);x=function(x,A,R,D){var N=[];return V.forEach((function(V){N.push(x(V,A,R,D))})),z.join(N)}}}for(var G=U.firstElementChild;G;)G.msParentSelectorScope=!0,G=G.nextElementSibling;var j=F.processTimeout;function complete(){return x(W.processAll).then((function(){return q(R)})).then((function Template_renderImpl_Binding_processAll(A){return x(B.processAll,A,!K&&!J,F.bindingCache)})).then(null,(function(x){return"object"==typeof x&&"Canceled"===x.name&&(K||U).dispose(),z.wrapError(x)}))}return j?(j<0&&(j=0),z.timeout(j).then((function(){return N=complete()}))):N=complete()})).then(done,(function(x){return done(),z.wrapError(x)}));return{element:Q,renderComplete:X}}var x=R.Class.define((function Template_ctor(x,V){this._element=x||A.document.createElement("div"),this._element.winControl=this,this._profilerMarkIdentifier=D._getProfilerMarkIdentifier(this._element);var R=this;this._element.renderItem=function(x,A){return R._renderItemImpl(x,A)},V=V||{},this.href=V.href,this.enableRecycling=!!V.enableRecycling,this.processTimeout=V.processTimeout||0,this.bindingInitializer=V.bindingInitializer,this.debugBreakOnRender=V.debugBreakOnRender,this.disableOptimizedProcessing=V.disableOptimizedProcessing,this.extractChild=V.extractChild,this._counter=0,this._compile=!!V._compile,this.href||(this.element.style.display="none"),this.bindingCache={expressions:{}}}),{_shouldCompile:{get:function(){var V=!0;return(V=(V=V&&!x._interpretAll)&&!this.disableOptimizedProcessing)&&((V=(V=V&&0===this.processTimeout)&&(!this.href||this.href instanceof A.HTMLElement))||N.log&&N.log("Cannot compile templates which use processTimeout or href properties","winjs binding","warn")),V}},bindingInitializer:{get:function(){return this._bindingInitializer},set:function(x){this._bindingInitializer=x,this._reset()}},debugBreakOnRender:{get:function(){return this._debugBreakOnRender},set:function(x){this._debugBreakOnRender=!!x,this._reset()}},disableOptimizedProcessing:{get:function(){return this._disableOptimizedProcessing},set:function(x){this._disableOptimizedProcessing=!!x,this._reset()}},element:{get:function(){return this._element}},extractChild:{get:function(){return this._extractChild},set:function(x){this._extractChild=!!x,this._reset()}},processTimeout:{get:function(){return this._processTimeout||0},set:function(x){this._processTimeout=x,this._reset()}},render:D.markSupportedForProcessing((function(x,A){return this._renderImpl(x,A)})),_renderImpl:function(x,A){if(this._shouldCompile)try{return this._renderImpl=this._compileTemplate({target:"render"}),this._renderImpl(x,A)}catch(x){return z.wrapError(x)}var V=interpretedRender(this,x,A);return V.element.then((function(){return V.renderComplete}))},_renderInterpreted:function(x,A){return interpretedRender(this,x,A)},renderItem:function(x,A){return this._renderItemImpl(x,A)},_renderItemImpl:function(x,A){if(this._shouldCompile)try{return this._renderItemImpl=this._compileTemplate({target:"renderItem"}),this._renderItemImpl(x)}catch(x){return{element:z.wrapError(x),renderComplete:z.wrapError(x)}}var V=this;if(this.enableRecycling&&!this.bindingCache.elements&&(this.bindingCache.elements={}),this.enableRecycling&&A&&A.msOriginalTemplate===this){var R=this.bindingCache.elements[A.id],D=!0;if(R&&(R.bindings.forEach((function(x){x()})),R.bindings=[],D=!R.nocache),D)return{element:A,renderComplete:x.then((function(x){return B.processAll(A,x.data,!0,V.bindingCache)}))}}var N=interpretedRender(this,x.then((function(x){return x.data})));return N.element=N.element.then((function(x){return x.msOriginalTemplate=V,x})),N},_compileTemplate:function(A){var R=this,D=F._TemplateCompiler.compile(this,this.href||this.element,{debugBreakOnRender:this.debugBreakOnRender||x._debugBreakOnRender,defaultInitializer:this.bindingInitializer||A.defaultInitializer,disableTextBindingOptimization:A.disableTextBindingOptimization||!1,target:A.target,extractChild:this.extractChild,profilerMarkIdentifier:this._profilerMarkIdentifier});if(A.resetOnFragmentChange||V.Windows.ApplicationModel.DesignMode.designModeEnabled){var N=new j._MutationObserver((function(){R._reset(),N.disconnect()}));N.observe(j.data(this.element).docFragment,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}return D},_reset:function(){delete this._renderImpl,delete this._renderItemImpl}},{isDeclarativeControlContainer:{value:!0,writable:!1,configurable:!1},render:{value:function(A,V,R){return new x(null,{href:A}).render(V,R)}}});return x}))})}})),define("WinJS/BindingList/_BindingListDataSource",["exports","../Core/_WinRT","../Core/_Base","../Core/_ErrorFromName","../Binding/_DomWeakRefTable","../Promise","../Scheduler","../Utilities/_UI"],(function bindingListDataSourceInit(x,A,V,R,D,N,U,B){"use strict";V.Namespace._moduleDefine(x,"WinJS.Binding",{_BindingListDataSource:V.Namespace._lazy((function(){var x={get noLongerMeaningful(){return N.wrapError(new R(B.EditError.noLongerMeaningful))}};function findNextKey(x,A){for(var V=x.length;A<V-1;){var R=x.getItem(++A);if(R)return R.key}return null}function findPreviousKey(x,A){for(;A>0;){var V=x.getItem(--A);if(V)return V.key}return null}var F=N.wrap().constructor,W=V.Class.derive(F,(function(){this._value=null}),{release:function(){},retain:function(){return this}},{supportedForProcessing:!1}),H=V.Class.derive(F,(function(x,A){this._value=A,this._listBinding=x}),{handle:{get:function(){return this._value.key}},index:{get:function(){return this._value.index}},release:function(){this._listBinding._release(this._value,this._listBinding._list.indexOfKey(this._value.key))},retain:function(){return this._listBinding._addRef(this._value,this._listBinding._list.indexOfKey(this._value.key)),this}},{supportedForProcessing:!1}),z=V.Class.derive(N,(function(x,A,V){var R=this;this._item=A,this._listBinding=x,N.call(this,(function(D){U.schedule((function BindingList_async_item(){x._released?R.cancel():D(A)}),U.Priority.normal,null,"WinJS.Binding.List."+V)}))}),{handle:{get:function(){return this._item.key}},index:{get:function(){return this._item.index}},release:function(){this._listBinding._release(this._item,this._listBinding._list.indexOfKey(this._item.key))},retain:function(){return this._listBinding._addRef(this._item,this._listBinding._list.indexOfKey(this._item.key)),this}},{supportedForProcessing:!1});function wrap(x,A){return A?new H(x,A):new W}function cloneWithIndex(x,A,V){return A&&x._annotateWithIndex(A,V)}var G=V.Class.define((function ListBinding_ctor(x,V,R,N){this._dataSource=x,this._list=V,this._editsCount=0,this._notificationHandler=R,this._pos=-1,this._retained=[],this._retained.length=V.length,this._retainedKeys={},this._affectedRange=null;var U=null;if(A.msSetWeakWinRTProperty&&A.msGetWeakWinRTProperty||(U=this),R){var handleEvent=function(x,A){var V=D._getWeakRefElement(N)||U;return!!V&&(V["_"+x](A),!0)};this._handlers={itemchanged:function handler(x){handleEvent("itemchanged",x)||V.removeEventListener("itemchanged",handler)},iteminserted:function handler(x){handleEvent("iteminserted",x)||V.removeEventListener("iteminserted",handler)},itemmoved:function handler(x){handleEvent("itemmoved",x)||V.removeEventListener("itemmoved",handler)},itemremoved:function handler(x){handleEvent("itemremoved",x)||V.removeEventListener("itemremoved",handler)},reload:function handler(){handleEvent("reload")||V.removeEventListener("reload",handler)}},function subscribe(x,A){Object.keys(A).forEach((function(V){x.addEventListener(V,A[V])}))}(this._list,this._handlers)}}),{_itemchanged:function(x){var A=x.detail.key,V=x.detail.index;this._updateAffectedRange(V,"changed");var R=x.detail.newItem,D=this._retained[V];if(D){var N=this._notificationHandler;if(D.index!==V){var U=D.index;D.index=V,N&&N.indexChanged&&N.indexChanged(R.key,V,U)}(R=cloneWithIndex(this._list,R,V))._retainedCount=D._retainedCount,this._retained[V]=R,this._retainedKeys[A]=R,this._beginEdits(this._list.length),N&&N.changed&&N.changed(R,D),this._endEdits()}else this._beginEdits(this._list.length),this._endEdits()},_iteminserted:function(x){var A=x.detail.index;this._updateAffectedRange(A,"inserted"),this._beginEdits(this._list.length-1),A<=this._pos&&(this._pos=Math.min(this._pos+1,this._list.length));var V=this._retained;if(V.splice(A,0,0),delete V[A],this._shouldNotify(A)||1===this._list.length){var R=this._notificationHandler;R&&R.inserted&&R.inserted(wrap(this,cloneWithIndex(this._list,this._list.getItem(A),A)),findPreviousKey(this._list,A),findNextKey(this._list,A))}this._endEdits()},_itemmoved:function(x){var A=x.detail.oldIndex,V=x.detail.newIndex;this._updateAffectedRange(A,"moved"),this._updateAffectedRange(V,"moved"),this._beginEdits(this._list.length),(A<this._pos||V<=this._pos)&&(V>this._pos?this._pos=Math.max(-1,this._pos-1):A>this._pos&&(this._pos=Math.min(this._pos+1,this._list.length)));var R=this._retained,D=R.splice(A,1)[0];R.splice(V,0,D),D||(delete R[V],D=cloneWithIndex(this._list,this._list.getItem(V),V)),D._moved=!0,this._addRef(D,V),this._endEdits()},_itemremoved:function(x){var A=x.detail.key,V=x.detail.index;this._updateAffectedRange(V,"removed"),this._beginEdits(this._list.length+1),V<this._pos&&(this._pos=Math.max(-1,this._pos-1));var R=this._retained,D=this._retainedKeys,N=V in R;R.splice(V,1),delete D[A];var U=this._notificationHandler;N&&U&&U.removed&&U.removed(A,!1),this._endEdits()},_reload:function(){this._retained=[],this._retainedKeys={};var x=this._notificationHandler;x&&x.reload&&x.reload()},_addRef:function(x,A){A in this._retained?this._retained[A]._retainedCount++:(this._retained[A]=x,this._retainedKeys[x.key]=x,x._retainedCount=1)},_release:function(x,A){var V=this._retained[A];V&&(1===V._retainedCount?(delete this._retained[A],delete this._retainedKeys[V.key]):V._retainedCount--)},_shouldNotify:function(x){var A=this._retained;return x in A||x+1 in A||x-1 in A},_updateAffectedRange:function ListBinding_updateAffectedRange(x,A){if(this._notificationHandler.affectedRange){var V=x,R="removed"!==A?x+1:x;if(this._affectedRange){switch(A){case"inserted":x<=this._affectedRange.end&&++this._affectedRange.end;break;case"removed":x<this._affectedRange.end&&--this._affectedRange.end}this._affectedRange.start=Math.min(this._affectedRange.start,V),this._affectedRange.end=Math.max(this._affectedRange.end,R)}else this._affectedRange={start:V,end:R}}},_notifyAffectedRange:function ListBinding_notifyAffectedRange(){this._affectedRange&&(this._notificationHandler&&this._notificationHandler.affectedRange&&this._notificationHandler.affectedRange(this._affectedRange),this._affectedRange=null)},_notifyCountChanged:function(){var x=this._countAtBeginEdits,A=this._list.length;if(x!==A){var V=this._notificationHandler;V&&V.countChanged&&V.countChanged(A,x)}},_notifyIndicesChanged:function(){for(var x=this._retained,A=0,V=x.length;A<V;A++){var R=x[A];if(R&&R.index!==A){var D=A,N=R.index;R.index=D;var U=this._notificationHandler;U&&U.indexChanged&&U.indexChanged(R.key,D,N)}}},_notifyMoved:function(){for(var x=this._retained,A=0,V=x.length;A<V;A++){var R=x[A];if(R&&R._moved&&(R._moved=!1,this._release(R,A),this._shouldNotify(A))){var D=this._notificationHandler;D&&D.moved&&D.moved(wrap(this,R),findPreviousKey(this._list,A),findNextKey(this._list,A))}}},_beginEdits:function(x,A){this._editsCount++;var V=this._notificationHandler;if(1===this._editsCount&&V){if(!A){this._editsCount++;var R=this;U.schedule((function BindingList_async_batchedEdits(){R._endEdits()}),U.Priority.high,null,"WinJS.Binding.List._endEdits")}V.beginNotifications&&V.beginNotifications(),this._countAtBeginEdits=x}},_endEdits:function(){this._editsCount--;var x=this._notificationHandler;0===this._editsCount&&x&&(this._notifyIndicesChanged(),this._notifyMoved(),this._notifyCountChanged(),this._notifyAffectedRange(),x.endNotifications&&x.endNotifications())},jumpToItem:function(x){var A=this._list.indexOfKey(x.handle);return-1===A?N.wrap(null):(this._pos=A,this.current())},current:function(){return this.fromIndex(this._pos)},previous:function(){return this._pos=Math.max(-1,this._pos-1),this._fromIndex(this._pos,!0,"previous")},next:function(){return this._pos=Math.min(this._pos+1,this._list.length),this._fromIndex(this._pos,!0,"next")},releaseItem:function(x){x.release?x.release():this._release(x,this._list.indexOfKey(x.key))},release:function(){this._notificationHandler&&function unsubscribe(x,A){Object.keys(A).forEach((function(V){x.removeEventListener(V,A[V])}))}(this._list,this._handlers),this._notificationHandler=null,this._dataSource._releaseBinding(this),this._released=!0},first:function(){return this.fromIndex(0)},last:function(){return this.fromIndex(this._list.length-1)},fromKey:function(x){var A=this._retainedKeys;return wrap(this,x in A?A[x]:cloneWithIndex(this._list,this._list.getItemFromKey(x),this._list.indexOfKey(x)))},fromIndex:function(x){return this._fromIndex(x,!1,"fromIndex")},_fromIndex:function(x,A,V){var R,D=this._retained;return R=x in D?D[x]:cloneWithIndex(this._list,this._list.getItem(x),x),A?function wrapAsync(x,A,V){return A?new z(x,A,V):new W}(this,R,V):wrap(this,R)}},{supportedForProcessing:!1});function insertAtStart(x,A){return this._list.unshift(A),this.itemFromIndex(0)}function insertBefore(A,V,R){var D=this._list.indexOfKey(R);return-1===D?x.noLongerMeaningful:(this._list.splice(D,0,V),this.itemFromIndex(D))}function insertAfter(A,V,R){var D=this._list.indexOfKey(R);return-1===D?x.noLongerMeaningful:(D+=1,this._list.splice(D,0,V),this.itemFromIndex(D))}function insertAtEnd(x,A){return this._list.push(A),this.itemFromIndex(this._list.length-1)}function change(A,V){var R=this._list.indexOfKey(A);return-1===R?x.noLongerMeaningful:(this._list.setAt(R,V),this.itemFromIndex(R))}function moveToStart(A){var V=this._list.indexOfKey(A);return-1===V?x.noLongerMeaningful:(this._list.move(V,0),this.itemFromIndex(0))}function moveBefore(A,V){var R=this._list.indexOfKey(A),D=this._list.indexOfKey(V);return-1===R||-1===D?x.noLongerMeaningful:(D=R<D?D-1:D,this._list.move(R,D),this.itemFromIndex(D))}function moveAfter(A,V){var R=this._list.indexOfKey(A),D=this._list.indexOfKey(V);return-1===R||-1===D?x.noLongerMeaningful:(D=R<=D?D:D+1,this._list.move(R,D),this.itemFromIndex(D))}function moveToEnd(A){var V=this._list.indexOfKey(A);if(-1===V)return x.noLongerMeaningful;var R=this._list.length-1;return this._list.move(V,R),this.itemFromIndex(R)}function remove(A){var V=this._list.indexOfKey(A);return-1===V?x.noLongerMeaningful:(this._list.splice(V,1),N.wrap())}var j=0;return V.Class.define((function DataSource_ctor(x){this._usingWeakRef=A.msSetWeakWinRTProperty&&A.msGetWeakWinRTProperty,this._bindings={},this._list=x,x.unshift&&(this.insertAtStart=insertAtStart),x.push&&(this.insertAtEnd=insertAtEnd),x.setAt&&(this.change=change),x.splice&&(this.insertAfter=insertAfter,this.insertBefore=insertBefore,this.remove=remove),x.move&&(this.moveAfter=moveAfter,this.moveBefore=moveBefore,this.moveToEnd=moveToEnd,this.moveToStart=moveToStart)}),{_releaseBinding:function(x){delete this._bindings[x._id]},addEventListener:function(){},removeEventListener:function(){},createListBinding:function(x){var A="ds_"+ ++j,V=new G(this,this._list,x,A);return V._id=A,this._usingWeakRef?(D._createWeakRef(V,A),this._bindings[A]=A):this._bindings[A]=V,V},getCount:function(){return N.wrap(this._list.length)},itemFromKey:function(x){var A=this._list,V=cloneWithIndex(A,A.getItemFromKey(x),-1);return Object.defineProperty(V,"index",{get:function(){return A.indexOfKey(x)},enumerable:!1,configurable:!0}),N.wrap(V)},itemFromIndex:function(x){return N.wrap(cloneWithIndex(this._list,this._list.getItem(x),x))},list:{get:function(){return this._list}},beginEdits:function(){var x=this._list.length;this._forEachBinding((function(A){A._beginEdits(x,!0)}))},endEdits:function(){this._forEachBinding((function(x){x._endEdits()}))},_forEachBinding:function(x){if(this._usingWeakRef){var A=[];Object.keys(this._bindings).forEach((function(V){var R=D._getWeakRefElement(V);R?x(R):A.push(V)}));for(var V=0,R=A.length;V<R;V++)delete this._bindings[A[V]]}else{var N=this;Object.keys(this._bindings).forEach((function(A){x(N._bindings[A])}))}},invalidateAll:function(){return N.wrap()},moveAfter:void 0,moveBefore:void 0,moveToEnd:void 0,moveToStart:void 0},{supportedForProcessing:!1})}))})})),define("WinJS/BindingList",["exports","./Core/_Base","./Core/_BaseUtils","./Core/_ErrorFromName","./Core/_Events","./Core/_Resources","./Binding/_Data","./BindingList/_BindingListDataSource"],(function listInit(x,A,V,R,D,N,U,B){"use strict";var F={get sparseArrayNotSupported(){return"Sparse arrays are not supported with proxy: true"},get illegalListLength(){return"List length must be assigned a finite positive number"}};function copyargs(x){return Array.prototype.slice.call(x,0)}function cloneItem(x){return{handle:x.handle,key:x.key,data:x.data,groupKey:x.groupKey,groupSize:x.groupSize,firstItemKey:x.firstItemKey,firstItemIndexHint:x.firstItemIndexHint}}function asNumber(x){return void 0===x?void 0:+x}var W=D._createEventProperty,H={};function mergeSort(x,A){var V=new Array(x.length);return function sort(R,D){if(!(D-R<2)){var N=Math.floor((D+R)/2);sort(R,N),sort(N,D),function merge(R,D,N){for(var U=R,B=D,F=R;F<N;F++)U<D&&(B>=N||A(x[U],x[B])<=0)?(V[F]=x[U],U++):(V[F]=x[B],B++)}(R,N,D),function copyBack(A,R){for(;A<R;A++)x[A]=V[A]}(R,D)}}(0,x.length),x}var z=A.Namespace.defineWithParent(null,null,{ListBase:A.Namespace._lazy((function(){var x=A.Class.define(null,{_annotateWithIndex:function(x,A){var V=cloneItem(x);return V.index=A,V},onitemchanged:W("itemchanged"),oniteminserted:W("iteminserted"),onitemmoved:W("itemmoved"),onitemmutated:W("itemmutated"),onitemremoved:W("itemremoved"),onreload:W("reload"),_notifyItemChanged:function(x,A,V,R,D,N){this._listeners&&this._listeners.itemchanged&&this.dispatchEvent("itemchanged",{key:x,index:A,oldValue:V,newValue:R,oldItem:D,newItem:N})},_notifyItemInserted:function(x,A,V){this._listeners&&this._listeners.iteminserted&&this.dispatchEvent("iteminserted",{key:x,index:A,value:V});var R=this.length;R!==this._lastNotifyLength&&(this.notify("length",R,this._lastNotifyLength),this._lastNotifyLength=R)},_notifyItemMoved:function(x,A,V,R){this._listeners&&this._listeners.itemmoved&&this.dispatchEvent("itemmoved",{key:x,oldIndex:A,newIndex:V,value:R})},_notifyItemMutated:function(x,A,V){this._listeners&&this._listeners.itemmutated&&this.dispatchEvent("itemmutated",{key:x,value:A,item:V})},_notifyItemRemoved:function(x,A,V,R){this._listeners&&this._listeners.itemremoved&&this.dispatchEvent("itemremoved",{key:x,index:A,value:V,item:R});var D=this.length;D!==this._lastNotifyLength&&(this.notify("length",D,this._lastNotifyLength),this._lastNotifyLength=D)},_notifyReload:function(){if(this._listeners&&this._listeners.reload&&this.dispatchEvent("reload"),x!==this._lastNotifyLength){var x=this.length;this.notify("length",x,this._lastNotifyLength),this._lastNotifyLength=x}},_normalizeIndex:function(x){return(x=asNumber(x))<0?this.length+x:x},_notifyMutatedFromKey:function(x){var A=this.getItemFromKey(x);this._notifyItemMutated(x,A.data,A)},notifyReload:function(){this._notifyReload()},getAt:function(x){x=asNumber(x);var A=this.getItem(x);return A&&A.data},_getArray:function(){for(var x=new Array(this.length),A=0,V=this.length;A<V;A++){var R=this.getItem(A);R&&(x[A]=R.data)}return x},_getFromKey:function(x){var A=this.getItemFromKey(x);return A&&A.data},_getKey:function(x){x=asNumber(x);var A=this.getItem(x);return A&&A.key},concat:function(){var x=this._getArray();return x.concat.apply(x,arguments)},join:function(x){return this._getArray().join(x||",")},slice:function(x,A){return this._getArray().slice(x,A)},indexOf:function(x,A){A=asNumber(A);for(var V=A=Math.max(0,this._normalizeIndex(A)||0),R=this.length;V<R;V++){var D=this.getItem(V);if(D&&D.data===x)return V}return-1},lastIndexOf:function(x,A){A=asNumber(A);var V,R=this.length;for(V=A=Math.min(this._normalizeIndex(void 0!==A?A:R),R-1);V>=0;V--){var D=this.getItem(V);if(D&&D.data===x)return V}return-1},every:function(x,A){return this._getArray().every(x,A)},filter:function(x,A){return this._getArray().filter(x,A)},forEach:function(x,A){this._getArray().forEach(x,A)},map:function(x,A){return this._getArray().map(x,A)},some:function(x,A){return this._getArray().some(x,A)},reduce:function(x,A){return arguments.length>1?this._getArray().reduce(x,A):this._getArray().reduce(x)},reduceRight:function(x,A){return arguments.length>1?this._getArray().reduceRight(x,A):this._getArray().reduceRight(x)},createFiltered:function(x){return new z.FilteredListProjection(this,x)},createGrouped:function(x,A,V){return new z.GroupedSortedListProjection(this,x,A,V)},createSorted:function(x){return new z.SortedListProjection(this,x)},dataSource:{get:function(){return this._dataSource=this._dataSource||new B._BindingListDataSource(this)}}},{supportedForProcessing:!1});return A.Class.mix(x,U.observableMixin),A.Class.mix(x,D.eventMixin),x})),ListBaseWithMutators:A.Namespace._lazy((function(){return A.Class.derive(z.ListBase,null,{pop:function(){return this.splice(-1,1)[0]},push:function(x){if(1===arguments.length)return this.splice(this.length,0,x),this.length;var A=copyargs(arguments);return A.splice(0,0,this.length,0),this.splice.apply(this,A),this.length},shift:function(){return this.splice(0,1)[0]},unshift:function(x){if(1===arguments.length)this.splice(0,0,x);else{var A=copyargs(arguments);A.splice(0,0,0,0),this.splice.apply(this,A)}return this.length}},{supportedForProcessing:!1})})),ListProjection:A.Namespace._lazy((function(){return A.Class.derive(z.ListBaseWithMutators,null,{_list:null,_myListeners:null,_addListListener:function(x,A){var V={name:x,handler:A.bind(this)};this._myListeners=this._myListeners||[],this._myListeners.push(V),this._list.addEventListener(x,V.handler)},dispose:function(){var A=this._list,V=this._myListeners;this._myListeners=[];for(var R=0,D=V.length;R<D;R++){var N=V[R];A.removeEventListener(N.name,N.handler)}this._list=new x.List,this._listReload()},getItemFromKey:function(x){return this._list.getItemFromKey(x)},move:function(x,A){(x=asNumber(x))===(A=asNumber(A))||x<0||A<0||x>=this.length||A>=this.length||(x=this._list.indexOfKey(this._getKey(x)),A=this._list.indexOfKey(this._getKey(A)),this._list.move(x,A))},_notifyMutatedFromKey:function(x){this._list._notifyMutatedFromKey(x)},splice:function(x,A,V){x=asNumber(x),x=Math.max(0,this._normalizeIndex(x));var R=copyargs(arguments);return x===this.length?(R[0]=this._list.length,this._list.splice.apply(this._list,R)):(R[0]=this._getKey(x),this._spliceFromKey.apply(this,R))},_setAtKey:function(x,A){this._list._setAtKey(x,A)}},{supportedForProcessing:!1})})),FilteredListProjection:A.Namespace._lazy((function(){return A.Class.derive(z.ListProjection,(function(x,A){this._list=x,this._addListListener("itemchanged",this._listItemChanged),this._addListListener("iteminserted",this._listItemInserted),this._addListListener("itemmutated",this._listItemMutated),this._addListListener("itemmoved",this._listItemMoved),this._addListListener("itemremoved",this._listItemRemoved),this._addListListener("reload",this._listReload),this._filter=A,this._initFilteredKeys()}),{_filter:null,_filteredKeys:null,_initFilteredKeys:function(){for(var x=this._filter,A=this._list,V=[],R=0,D=A.length;R<D;R++){var N=A.getItem(R);N&&x(N.data)&&V.push(N.key)}this._filteredKeys=V},_findInsertionPosition:function(x,A){for(var V,R=this._filter;--A>=0;){var D=this._list.getItem(A);if(D&&R(D.data)){V=D.key;break}}var N=this._filteredKeys;return V?N.indexOf(V)+1:0},_listItemChanged:function(x){var A=x.detail.key,V=x.detail.index,R=x.detail.oldValue,D=x.detail.newValue,N=x.detail.oldItem,U=x.detail.newItem,B=this._filter,F=B(R),W=B(D);if(F&&W){var H=this._filteredKeys.indexOf(A);this._notifyItemChanged(A,H,R,D,N,U)}else F&&!W?this._listItemRemoved({detail:{key:A,index:V,value:R,item:N}}):!F&&W&&this._listItemInserted({detail:{key:A,index:V,value:D}})},_listItemInserted:function(x){var A=x.detail.key,V=x.detail.index,R=x.detail.value;if((0,this._filter)(R)){var D=this._findInsertionPosition(A,V);this._filteredKeys.splice(D,0,A),this._notifyItemInserted(A,D,R)}},_listItemMoved:function(x){var A=x.detail.key,V=x.detail.newIndex,R=x.detail.value,D=this._filteredKeys,N=D.indexOf(A);if(-1!==N){D.splice(N,1);var U=this._findInsertionPosition(A,V);D.splice(U,0,A),this._notifyItemMoved(A,N,U,R)}},_listItemMutated:function(x){var A=x.detail.key,V=x.detail.value,R=x.detail.item,D=this._filter,N=this._filteredKeys,U=N.indexOf(A),B=-1!==U,F=D(V);B&&F?this._notifyItemMutated(A,V,R):B&&!F?(N.splice(U,1),this._notifyItemRemoved(A,U,V,R)):!B&&F&&this._listItemInserted({detail:{key:A,index:this._list.indexOfKey(A),value:V}})},_listItemRemoved:function(x){var A=x.detail.key,V=x.detail.value,R=x.detail.item,D=this._filteredKeys,N=D.indexOf(A);-1!==N&&(D.splice(N,1),this._notifyItemRemoved(A,N,V,R))},_listReload:function(){this._initFilteredKeys(),this._notifyReload()},length:{get:function(){return this._filteredKeys.length},set:function(x){if(!("number"==typeof x&&x>=0))throw new R("WinJS.Binding.List.IllegalLength",F.illegalListLength);var A=this.length;A>x&&this.splice(x,A-x)}},getItem:function(x){return x=asNumber(x),this.getItemFromKey(this._filteredKeys[x])},indexOfKey:function(x){return this._filteredKeys.indexOf(x)},notifyMutated:function(x){return x=asNumber(x),this._notifyMutatedFromKey(this._filteredKeys[x])},setAt:function(x,A){x=asNumber(x),this._setAtKey(this._filteredKeys[x],A)},_spliceFromKey:function(x,A){if(arguments.length>2){var V=copyargs(arguments);V[1]=0,this._list._spliceFromKey.apply(this._list,V)}var R=[];if(A){for(var D=[],N=this._filteredKeys,U=N.indexOf(x),B=U,F=N.length;B<F&&B-U<A;B++)x=N[B],D.push(x);var W=this;D.forEach((function(x){R.push(W._list._spliceFromKey(x,1)[0])}))}return R}},{supportedForProcessing:!1})})),SortedListProjection:A.Namespace._lazy((function(){return A.Class.derive(z.ListProjection,(function(x,A){this._list=x,this._addListListener("itemchanged",this._listItemChanged),this._addListListener("iteminserted",this._listItemInserted),this._addListListener("itemmoved",this._listItemMoved),this._addListListener("itemmutated",this._listItemMutated),this._addListListener("itemremoved",this._listItemRemoved),this._addListListener("reload",this._listReload),this._sortFunction=A,this._initSortedKeys()}),{_sortFunction:null,_sortedKeys:null,_initSortedKeys:function(){for(var x=this._list,A=[],V=0,R=x.length;V<R;V++){var D=x.getItem(V);D&&(A[V]=D.key)}var N=this._sortFunction,U=mergeSort(A,(function(A,V){return A=x.getItemFromKey(A).data,V=x.getItemFromKey(V).data,N(A,V)}));this._sortedKeys=U},_findInsertionPos:function(x,A,V,R,D){for(var N=this._sortFunction,U=this._sortedKeys,B=Math.max(0,R||-1),F=Math.min(U.length,D||Number.MAX_VALUE),W=B;B<=F;){var H=U[W=(B+F)/2>>>0];if(!H)break;var z=N(this.getItemFromKey(H).data,V);if(z<0)B=W+1;else{if(0===z)return this._findStableInsertionPos(x,A,B,F,W,V);F=W-1}}return B},_findBeginningOfGroup:function(x,A,V,R,D){for(var N=0,U=x;N<=U;){var B=R[x=(N+U)/2>>>0];A(V.getItemFromKey(B).data,D)<0?N=x+1:U=x-1}return N},_findEndOfGroup:function(x,A,V,R,D){for(var N=x,U=R.length;N<=U;){var B=R[x=(N+U)/2>>>0];if(!B)return R.length;A(V.getItemFromKey(B).data,D)<=0?N=x+1:U=x-1}return N},_findStableInsertionPos:function(x,A,V,R,D,N){var U=this._list,B=U.length,F=this._sortFunction,W=this._sortedKeys;if(A<B/2){for(var H=A-1;H>=0;H--)if(0===F((z=U.getItem(H)).data,N))return B-V>R?W.indexOf(z.key,V)+1:W.lastIndexOf(z.key,R)+1;return this._findBeginningOfGroup(D,F,U,W,N)}for(H=A+1;H<B;H++){var z;if(0===F((z=U.getItem(H)).data,N))return B-V>R?W.indexOf(z.key,V):W.lastIndexOf(z.key,R)}return this._findEndOfGroup(D,F,U,W,N)},_listItemChanged:function(x){var A=x.detail.key,V=x.detail.newValue,R=x.detail.oldValue;if(0===(0,this._sortFunction)(R,V)){var D=this.indexOfKey(A);this._notifyItemChanged(A,D,R,V,x.detail.oldItem,x.detail.newItem)}else this._listItemRemoved({detail:{key:A,index:x.detail.index,value:x.detail.oldValue,item:x.detail.oldItem}}),this._listItemInserted({detail:{key:A,index:x.detail.index,value:x.detail.newValue}})},_listItemInserted:function(x,A,V){var R=x.detail.key,D=x.detail.index,N=x.detail.value,U=this._findInsertionPos(R,D,N,A,V);this._sortedKeys.splice(U,0,R),this._notifyItemInserted(R,U,N)},_listItemMoved:function(x,A,V){var R=x.detail.key,D=x.detail.newIndex,N=x.detail.value,U=this._sortedKeys,B=U.indexOf(R,A);U.splice(B,1);var F=this._findInsertionPos(R,D,N,A,V);U.splice(F,0,R),F!==B&&this._notifyItemMoved(R,B,F,N)},_listItemMutated:function(x){var A=x.detail.key,V=x.detail.value,R=x.detail.item,D=this._list.indexOfKey(A),N=this._sortedKeys.indexOf(A);this._sortedKeys.splice(N,1);var U=this._findInsertionPos(A,D,V);this._sortedKeys.splice(N,0,A),N!==U?(this._listItemRemoved({detail:{key:A,index:D,value:V,item:R}}),this._listItemInserted({detail:{key:A,index:D,value:V}})):this._notifyItemMutated(A,V,R)},_listItemRemoved:function(x,A){var V=x.detail.key,R=x.detail.value,D=x.detail.item,N=this._sortedKeys,U=N.indexOf(V,A);N.splice(U,1),this._notifyItemRemoved(V,U,R,D)},_listReload:function(){this._initSortedKeys(),this._notifyReload()},length:{get:function(){return this._sortedKeys.length},set:function(x){if(!("number"==typeof x&&x>=0))throw new R("WinJS.Binding.List.IllegalLength",F.illegalListLength);var A=this.length;A>x&&this.splice(x,A-x)}},getItem:function(x){return x=asNumber(x),this.getItemFromKey(this._sortedKeys[x])},indexOfKey:function(x){return this._sortedKeys.indexOf(x)},notifyMutated:function(x){x=asNumber(x),this._notifyMutatedFromKey(this._sortedKeys[x])},setAt:function(x,A){x=asNumber(x),this._setAtKey(this._sortedKeys[x],A)},_spliceFromKey:function(x,A){if(arguments.length>2){var V=copyargs(arguments);V[1]=0,this._list._spliceFromKey.apply(this._list,V)}var R=[];if(A){for(var D=[],N=this._sortedKeys,U=N.indexOf(x),B=U,F=N.length;B<F&&B-U<A;B++)D.push(N[B]);var W=this;D.forEach((function(x){R.push(W._list._spliceFromKey(x,1)[0])}))}return R}},{supportedForProcessing:!1})})),GroupedSortedListProjection:A.Namespace._lazy((function(){return A.Class.derive(z.SortedListProjection,(function(x,A,V,R){this._list=x,this._addListListener("itemchanged",this._listGroupedItemChanged),this._addListListener("iteminserted",this._listGroupedItemInserted),this._addListListener("itemmoved",this._listGroupedItemMoved),this._addListListener("itemmutated",this._listGroupedItemMutated),this._addListListener("itemremoved",this._listGroupedItemRemoved),this._addListListener("reload",this._listReload),this._sortFunction=function(x,V){return x=A(x),V=A(V),R?R(x,V):x<V?-1:x===V?0:1},this._groupKeyOf=A,this._groupDataOf=V,this._initSortedKeys(),this._initGroupedItems()}),{_groupKeyOf:null,_groupDataOf:null,_groupedItems:null,_initGroupedItems:function(){for(var x={},A=this._list,V=this._groupKeyOf,R=0,D=A.length;R<D;R++){var N=cloneItem(A.getItem(R));N.groupKey=V(N.data),x[N.key]=N}this._groupedItems=x},_groupsProjection:null,_listGroupedItemChanged:function(x){var A,V=x.detail.key,R=x.detail.oldValue,D=x.detail.newValue,N=this._groupedItems,U=N[V],B=cloneItem(U);B.data=D,B.groupKey=this._groupKeyOf(D),N[V]=B,U.groupKey===B.groupKey?(A=this.indexOfKey(V),this._notifyItemChanged(V,A,R,D,U,B)):(A=x.detail.index,this._listItemChanged({detail:{key:V,index:A,oldValue:R,newValue:D,oldItem:U,newItem:B}}))},_listGroupedItemInserted:function(x){var A,V,R=x.detail.key,D=x.detail.value,N=this._groupKeyOf(D);if(this._groupedItems[R]={handle:R,key:R,data:D,groupKey:N},this._groupsProjection){var U=this._groupsProjection._groupItems[N];U&&(V=(A=U.firstItemIndexHint)+U.groupSize)}this._listItemInserted(x,A,V)},_listGroupedItemMoved:function(x){var A,V,R=this._groupedItems[x.detail.key].groupKey;if(this._groupsProjection){var D=this._groupsProjection._groupItems[R];V=(A=D.firstItemIndexHint)+D.groupSize}this._listItemMoved(x,A,V)},_listGroupedItemMutated:function(x){var A=x.detail.key,V=x.detail.value,R=this._groupedItems,D=R[A],N=this._groupKeyOf(V);if(D.groupKey===N)this._notifyItemMutated(A,V,D);else{var U=cloneItem(D);U.groupKey=N,R[A]=U;var B=this._list.indexOfKey(A);this._listItemRemoved({detail:{key:A,index:B,value:V,item:D}}),this._listItemInserted({detail:{key:A,index:B,value:V}})}},_listGroupedItemRemoved:function(x){var A,V,R=x.detail.key,D=x.detail.index,N=x.detail.value,U=this._groupedItems,B=U[R];if(delete U[R],this._groupsProjection){var F=this._groupsProjection._groupItems[B.groupKey];V=(A=F.firstItemIndexHint)+F.groupSize}this._listItemRemoved({detail:{key:R,index:D,value:N,item:B}},A,V)},_listReload:function(){this._initGroupedItems(),z.SortedListProjection.prototype._listReload.call(this)},groups:{get:function(){return null===this._groupsProjection&&(this._groupsProjection=new z.GroupsListProjection(this,this._groupKeyOf,this._groupDataOf)),this._groupsProjection}},getItemFromKey:function(x){return this._groupedItems[x]}},{supportedForProcessing:!1})})),GroupsListProjection:A.Namespace._lazy((function(){return A.Class.derive(z.ListBase,(function(x,A,V){this._list=x,this._addListListener("itemchanged",this._listItemChanged),this._addListListener("iteminserted",this._listItemInserted),this._addListListener("itemmoved",this._listItemMoved),this._addListListener("itemremoved",this._listItemRemoved),this._addListListener("reload",this._listReload),this._groupKeyOf=A,this._groupDataOf=V,this._initGroupKeysAndItems()}),{_list:null,_addListListener:function(x,A){this._list.addEventListener(x,A.bind(this))},_groupDataOf:null,_groupKeyOf:null,_groupOf:function(x){return this.getItemFromKey(this._groupKeyOf(x.data))},_groupKeys:null,_groupItems:null,_initGroupKeysAndItems:function(){for(var x,A=this._groupDataOf,V=this._list,R={},D=[],N=null,U=null,B=0,F=V.length;B<F;B++){var W=V.getItem(B),H=W.groupKey;H!==N?(U&&(U.groupSize=x),x=1,N=H,U={handle:H,key:H,data:A(W.data),firstItemKey:W.key,firstItemIndexHint:B},R[H]=U,D.push(H)):x++}U&&(U.groupSize=x),this._groupKeys=D,this._groupItems=R},_listItemChanged:function(x){var A=x.detail.key,V=x.detail.index,R=x.detail.newValue,D=this._list.getItemFromKey(A).groupKey,N=this._groupItems,U=N[D];if(U.firstItemIndexHint===V){var B=cloneItem(U);B.data=this._groupDataOf(R),B.firstItemKey=A,N[D]=B,this._notifyItemChanged(D,this._groupKeys.indexOf(D),U.data,B.data,U,B)}},_listItemInserted:function(x){var A,V,R,D,N,U=x.detail.key,B=x.detail.index,F=x.detail.value,W=this._list.getItemFromKey(U).groupKey,H=this._groupItems,z=this._groupKeys,G=H[W];if(G)(R=cloneItem(V=G)).groupSize++,V.firstItemIndexHint===B&&(R.groupData=this._groupDataOf(F),R.firstItemKey=U,R.firstItemIndexHint=B),H[W]=R,A=z.indexOf(W),this._notifyItemChanged(W,A,V.data,R.data,V,R);else{for(D=0,N=z.length;D<N&&!((G=H[z[D]]).firstItemIndexHint>=B);D++);A=D,G={handle:W,key:W,data:this._groupDataOf(F),groupSize:1,firstItemKey:U,firstItemIndexHint:B},z.splice(A,0,W),H[W]=G,this._notifyItemInserted(W,A,G.data)}for(D=A+1,N=z.length;D<N;D++)(R=cloneItem(V=H[z[D]])).firstItemIndexHint++,H[R.key]=R,this._notifyItemChanged(R.key,D,V.data,R.data,V,R)},_listItemMoved:function(x){var A=x.detail.key,V=x.detail.oldIndex,R=x.detail.newIndex,D=this._list,N=D.getItemFromKey(A).groupKey,U=this._groupItems,B=U[N];if(B.firstItemIndexHint===R||B.firstItemIndexHint===V){var F=D.getItem(B.firstItemIndexHint),W=cloneItem(B);W.data=this._groupDataOf(F.data),W.firstItemKey=F.key,U[N]=W,this._notifyItemChanged(N,this._groupKeys.indexOf(N),B.data,W.data,B,W)}},_listItemRemoved:function(x){var A,V,R=x.detail.index,D=x.detail.item,N=this._groupItems,U=this._groupKeys,B=D.groupKey,F=N[B],W=U.indexOf(B);if(1===F.groupSize)U.splice(W,1),delete N[B],this._notifyItemRemoved(B,W,F.data,F),W--;else{if((V=cloneItem(A=F)).groupSize--,A.firstItemIndexHint===R){var H=this._list.getItem(R);V.data=this._groupDataOf(H.data),V.firstItemKey=H.key}N[B]=V,this._notifyItemChanged(B,W,A.data,V.data,A,V)}for(var z=W+1,G=U.length;z<G;z++)(V=cloneItem(A=N[U[z]])).firstItemIndexHint--,N[V.key]=V,this._notifyItemChanged(V.key,z,A.data,V.data,A,V)},_listReload:function(){this._initGroupKeysAndItems(),this._notifyReload()},length:{get:function(){return this._groupKeys.length}},getItem:function(x){return x=asNumber(x),this._groupItems[this._groupKeys[x]]},getItemFromKey:function(x){return this._groupItems[x]},indexOfKey:function(x){return this._groupKeys.indexOf(x)}},{supportedForProcessing:!1})}))});A.Namespace._moduleDefine(x,"WinJS.Binding",{List:A.Namespace._lazy((function(){return A.Class.derive(z.ListBaseWithMutators,(function(x,A){if(this._currentKey=0,this._keys=null,this._keyMap={},A=A||H,this._proxy=A.proxy,this._binding=A.binding,this._proxy){if(Object.keys(x).length!==x.length)throw new R("WinJS.Binding.List.NotSupported",F.sparseArrayNotSupported);this._data=x,this._currentKey=x.length}else if(x){for(var V=this._keyMap,D=0,N=0,B=x.length;N<B;N++)if(N in x){var W=x[N];this._binding&&(W=U.as(W));var z=D.toString();D++,V[z]={handle:z,key:z,data:W}}D!==N&&this._initializeKeys(),this._currentKey=D}}),{_currentKey:0,_keys:null,_keyMap:null,_modifyingData:0,_initializeKeys:function(){if(!this._keys){var x=[];if(this._data){for(var A=this._keyMap,V=this._data,R=0,D=V.length;R<D;R++)if(R in V){var N=R.toString();if(x[R]=N,!(N in A)){var B=V[R];this._binding&&(B=U.as(B)),A[N]={handle:N,key:N,data:B}}}}else Object.keys(this._keyMap).forEach((function(A){x[A>>>0]=A}));this._keys=x}},_lazyPopulateEntry:function(x){if(this._data&&x in this._data){var A=this._data[x];this._binding&&(A=U.as(A));var V=x.toString(),R={handle:V,key:V,data:A};return this._keyMap[R.key]=R,R}},_assignKey:function(){return(++this._currentKey).toString()},length:{get:function(){return this._data?this._data.length:this._keys?this._keys.length:this._currentKey},set:function(x){if(!("number"==typeof x&&x>=0))throw new R("WinJS.Binding.List.IllegalLength",F.illegalListLength);this._initializeKeys();var A=this.length;if(A>x?this.splice(x,A-x):x=A,this._data){this._modifyingData++;try{this._data.length=x}finally{this._modifyingData--}}this._keys&&(this._keys.length=x)}},getItem:function(x){var A,V;return x=asNumber(x),this._keys?A=(V=this._keys[x])&&this._keyMap[V]:(V=x.toString(),A=this._keyMap[V]||this._lazyPopulateEntry(x)),A},getItemFromKey:function(x){return this._keys||!this._data?this._keyMap[x]:this.getItem(x>>>0)},indexOfKey:function(x){var A=-1;if(this._keys)A=this._keys.indexOf(x);else{var V=x>>>0;V<this._currentKey&&(A=V)}return A},move:function(x,A){if(x=asNumber(x),A=asNumber(A),this._initializeKeys(),!(x===A||x<0||A<0||x>=this.length||A>=this.length)){if(this._data){this._modifyingData++;try{var V=this._data.splice(x,1)[0];this._data.splice(A,0,V)}finally{this._modifyingData--}}var R=this._keys.splice(x,1)[0];this._keys.splice(A,0,R),this._notifyItemMoved(R,x,A,this.getItemFromKey(R).data)}},notifyMutated:function(x){x=asNumber(x);var A=this._keys?this._keys[x]:x.toString();this._notifyMutatedFromKey(A)},setAt:function(x,A){x=asNumber(x),this._initializeKeys();var V=this.length;if(x===V)this.push(A);else if(x<V){if(this._data){this._modifyingData++;try{this._data[x]=A}finally{this._modifyingData--}}if(this._binding&&(A=U.as(A)),x in this._keys){var R=this._keys[x],D=this._keyMap[R],N=cloneItem(D);N.data=A,this._keyMap[R]=N,this._notifyItemChanged(R,x,D.data,A,D,N)}}},_setAtKey:function(x,A){this.setAt(this.indexOfKey(x),A)},reverse:function(){if(this._initializeKeys(),this._data){this._modifyingData++;try{this._data.reverse()}finally{this._modifyingData--}}return this._keys.reverse(),this._notifyReload(),this},sort:function(x){if(this._initializeKeys(),this._data){this._modifyingData++;try{this._data.sort(x)}finally{this._modifyingData--}}var A=this;return this._keys.sort((function(V,R){return V=A._keyMap[V],R=A._keyMap[R],x?x(V.data,R.data):(V=(V&&V.data||"").toString())<(R=(V&&R.data||"").toString())?-1:V===R?0:1})),this._notifyReload(),this},pop:function(){if(0!==this.length){this._initializeKeys();var x=this._keys.pop(),A=this._keyMap[x],V=A&&A.data;if(this._data){this._modifyingData++;try{this._data.pop()}finally{this._modifyingData--}}return delete this._keyMap[x],this._notifyItemRemoved(x,this._keys.length,V,A),V}},push:function(){this._initializeKeys();for(var x=arguments.length,A=0;A<x;A++){var V=arguments[A];this._binding&&(V=U.as(V));var R=this._assignKey();if(this._keys.push(R),this._data){this._modifyingData++;try{this._data.push(arguments[A])}finally{this._modifyingData--}}this._keyMap[R]={handle:R,key:R,data:V},this._notifyItemInserted(R,this._keys.length-1,V)}return this.length},shift:function(){if(0!==this.length){this._initializeKeys();var x=this._keys.shift(),A=this._keyMap[x],V=A&&A.data;if(this._data){this._modifyingData++;try{this._data.shift()}finally{this._modifyingData--}}return delete this._keyMap[x],this._notifyItemRemoved(x,0,V,A),V}},unshift:function(){this._initializeKeys();for(var x=arguments.length,A=x-1;A>=0;A--){var V=arguments[A];this._binding&&(V=U.as(V));var R=this._assignKey();if(this._keys.unshift(R),this._data){this._modifyingData++;try{this._data.unshift(arguments[A])}finally{this._modifyingData--}}this._keyMap[R]={handle:R,key:R,data:V},this._notifyItemInserted(R,0,V)}return this.length},splice:function(x,A,V){x=asNumber(x),this._initializeKeys(),x=Math.max(0,this._normalizeIndex(x)),A=Math.max(0,Math.min(A||0,this.length-x));for(var R=[];A;){var D=this._keys[x],N=this._keyMap[D],B=N&&N.data;if(R.push(B),this._keys.splice(x,1),this._data){this._modifyingData++;try{this._data.splice(x,1)}finally{this._modifyingData--}}delete this._keyMap[D],this._notifyItemRemoved(D,x,B,N),--A}if(arguments.length>2)for(var F=2,W=arguments.length;F<W;F++){var H=arguments[F];this._binding&&(H=U.as(H));var z=Math.min(x+F-2,this.length),G=this._assignKey();if(this._keys.splice(z,0,G),this._data){this._modifyingData++;try{this._data.splice(z,0,arguments[F])}finally{this._modifyingData--}}this._keyMap[G]={handle:G,key:G,data:H},this._notifyItemInserted(G,z,H)}return R},_spliceFromKey:function(x){this._initializeKeys();var A=copyargs(arguments);return A[0]=this._keys.indexOf(x),this.splice.apply(this,A)}},{supportedForProcessing:!1})}))})})),define("WinJS/Res",["exports","./Core/_Global","./Core/_Base","./Core/_BaseUtils","./Core/_ErrorFromName","./Core/_Resources","./ControlProcessor/_OptionsParser","./Promise"],(function resInit(x,A,V,R,D,N,U,B){"use strict";var F=!1,W=R.requireSupportedForProcessing;function processAllImpl(x,V){if(x=x||A.document.body,(V=V||0)<4){if(0===V&&x.getAttribute){var N=x.getAttribute("data-win-res");N&&setMembers(x,x,Q=U.optionsParser(N),V)}var F="[data-win-res],[data-win-control]",H=x.querySelectorAll(F);if(0===H.length)return B.as(x);for(var z=0,G=H.length;z<G;z++){var j=H[z];if(j.winControl&&j.winControl.constructor&&j.winControl.constructor.isDeclarativeControlContainer){var q=j.winControl.constructor.isDeclarativeControlContainer;"function"==typeof q&&((q=W(q))(j.winControl,processAll),z+=j.querySelectorAll(F).length)}if(j.hasAttribute("data-win-res")){var Q=U.optionsParser(j.getAttribute("data-win-res"));setMembers(j,j,Q,V)}}}else if(R.validation)throw new D("WinJS.Res.NestingExceeded","NestingExceeded");return B.as(x)}function setAttributes(x,A){for(var V=Object.keys(A),D=0,U=V.length;D<U;D++){var B=V[D],F=A[B],W=N.getString(F);W&&W.empty?R.validation&&notFound(F):(x.setAttribute(B,W.value),void 0!==W.lang&&void 0!==x.lang&&x.lang!==W.lang&&(x.lang=W.lang))}}function notFound(x){throw new D("WinJS.Res.NotFound",N._formatString("NotFound: {0}",x))}function setMembers(x,A,V,D){var U=Object.keys(V);A=W(A);for(var B=0,F=U.length;B<F;B++){var H=U[B],z=V[H];if("string"==typeof z){var G=N.getString(z);G&&G.empty?R.validation&&notFound(z):(A[H]=G.value,void 0!==G.lang&&void 0!==x.lang&&x.lang!==G.lang&&(x.lang=G.lang),"innerHTML"===H&&processAllImpl(A,D+1))}else x===A&&"attributes"===H?setAttributes(x,z):setMembers(x,A[H],z,D)}}function processAll(x){if(!F)return R.ready().then((function(){return F=!0,processAllImpl(x)}));try{return processAllImpl(x)}catch(x){return B.wrapError(x)}}V.Namespace._moduleDefine(x,"WinJS.Resources",{processAll:processAll})})),define("WinJS/Pages/_BasePage",["exports","../Core/_Global","../Core/_Base","../Core/_BaseUtils","../Core/_WriteProfilerMark","../Promise","../Utilities/_Control","../Utilities/_Dispose","../Utilities/_ElementUtilities"],(function pagesInit(x,A,V,R,D,N,U,B,F){"use strict";if(A.document){var W={},H={dispose:function(){this._disposed||(this._disposed=!0,B.disposeSubTree(this.element),this.element=null)},load:function(x){},init:function(x,A){},process:function(x,A){},processed:function(x,A){},render:function(x,A,V){},ready:function(x,A){},attach:function(x,A){},detach:function(x,A){},error:function(x){return N.wrapError(x)},_eventListeners:{},createEvent:function(x){this._eventListeners[x]||(this._eventListeners[x]=[])},addEventListener:function(x,A){this._eventListeners[x],this._eventListeners[x].push(A)},removeEventListener:function(x,A){this._eventListeners[x];for(var V=this._eventListeners[x],R=0;R<V.length;R++)if(A===V[R])return void V.splice(R,1)},dispatchEvent:function(x,A){for(var V in this._eventListeners[x])this._eventListeners[x].hasOwnProperty(V)&&this._eventListeners[x][V](A)},readySubTree:function(x){for(var A=(x||document.body).querySelectorAll("[data-win-control]"),V=0,R=A.length;V<R;V++)(D=A[V]).winControl&&D.winControl.readyBase&&!D.winControl._disposed&&D.winControl.readyBase(x);for(V=0,R=A.length;V<R;V++){var D;(D=A[V]).winControl&&D.winControl.initializedBase&&!D.winControl._disposed&&D.winControl.initializedBase(x)}A=null}};V.Namespace._moduleDefine(x,null,{abs:abs,define:function Pages_define(x,D){return D.__error__=D.error||null,D.error=function(x){this.dispatchEvent("onPagePreError",{args:x}),"function"==typeof this.__error__&&this.__error__(x),this.dispatchEvent("onPagePostError",{args:x})},D.__attach__=D.attach||null,D.attach=function(x,A){A=A||{},this.dispatchEvent("onPagePreAttach",{element:x,option:A}),"function"==typeof this.__attach__&&this.__attach__(x,A),this.dispatchEvent("onPagePostAttach",{element:x,option:A})},D.__detach__=D.detach||null,D.detach=function(x,A){A=A||{},this.dispatchEvent("onPagePreDetach",{element:x,option:A}),"function"==typeof this.__detach__&&this.__detach__(x,A),this.dispatchEvent("onPagePostDetach",{element:x,option:A})},D.__init__=D.init||null,D.init=function(x,A){this.readyDone=!1,A=A||{},this.dispatchEvent("onPagePreInit",{element:x,option:A}),"function"==typeof this.__init__&&this.__init__(x,A),this.dispatchEvent("onPagePostInit",{element:x,option:A})},D.__ready__=D.ready||null,D.ready=function(x,A){this.readyDone||(this.readyDone=!0,A=A||{},this.dispatchEvent("onPagePreReady",{element:x,option:A}),"function"==typeof this.__ready__&&this.__ready__(x,A),VisiWin.UI.Pages.readySubTree(this.element),this.dispatchEvent("onPagePostReady",{element:x,option:A}))},D.__unload__=D.unload||null,D.unload=function(x,A){A=A||{},this.dispatchEvent.call(this,"onPagePreUnload",{element:x,option:A}),"function"==typeof this.__unload__&&this.__unload__(x,A),this.dispatchEvent.call(this,"onPagePostUnload",{element:x,option:A})},D.__dispose__=D.dispose||null,D.dispose=function(x){this.dispatchEvent("onPagePreDispose",{element:this.element,option:x}),"function"==typeof this.__dispose__&&this.__dispose__(x),VisiWin.Utilities.disposeSubTree(this.element),this.dispatchEvent("onPagePostDispose",{element:this.element,option:x}),this.element=null},function Pages_define_ori(x,D){var B=get(x);return x=abs(x),B||(B=V.Class.define((function PageControl_ctor(V,D,U,B){var W=this;this._disposed=!1,this.element=V=V||A.document.createElement("div"),V.msSourceLocation=x,this.uri=x,this.selfhost=selfhost(x),V.winControl=this,F.addClass(V,"pagecontrol"),R._getProfilerMarkIdentifier(this.element);var H=N.wrap().then((function Pages_load(){return W.load(x)})).then((function Pages_init(x){return N.join({loadResult:x,initResult:W.init(V,D)})})).then((function Pages_render(x){return W.render(V,D,x.loadResult)}));this.elementReady=H.then((function(){return V})),this.renderComplete=H.then((function Pages_process(){return W.process(V,D)})).then((function Pages_processed(){return W.processed(V,D)})).then((function(){return W}));var callComplete=function(){U&&U(W)};this.renderComplete.then(callComplete,callComplete),this.readyComplete=this.renderComplete.then((function(){return B})).then((function Pages_ready(){return W.ready(V,D),W})).then(null,(function Pages_error(x){return W.error(x)})),this.createEvent("onPagePreError"),this.createEvent("onPagePostError"),this.createEvent("onPagePreAttach"),this.createEvent("onPagePostAttach"),this.createEvent("onPagePreDetach"),this.createEvent("onPagePostDetach"),this.createEvent("onPagePreInit"),this.createEvent("onPagePostInit"),this.createEvent("onPagePreReady"),this.createEvent("onPagePostReady"),this.createEvent("onPagePreUnload"),this.createEvent("onPagePostUnload"),this.createEvent("onPagePreDispose"),this.createEvent("onPagePostDispose")}),H),B=V.Class.mix(B,U.DOMEventMixin),W[x.toLowerCase()]=B),D&&(B=V.Class.mix(B,D)),B.selfhost=selfhost(x),B}(x,D)},get:get,remove:function remove(x){x=abs(x),delete W[x.toLowerCase()]},viewMap:W})}function abs(x){var V=A.document.createElement("a");return V.href=x,V.href}function selfhost(x){return A.document.location.href.toLowerCase()===x.toLowerCase()}function removeParameter(x){var A=x.indexOf("?");return A>=0?x.substr(0,A):x}function get(x){if((x=abs(x).toLowerCase()).indexOf("?")>=0)return W[x.toLowerCase()];for(var A in W)if(removeParameter(A).toLowerCase()===x)return W[A.toLowerCase()];return null}})),define("WinJS/Pages",["exports","./Core/_Global","./Core/_Base","./Core/_BaseUtils","./ControlProcessor","./Fragments","./Pages/_BasePage","./Promise"],(function pagesInit(x,A,V,R,D,N,U,B){"use strict";if(A.document){var F={load:function(x){if(!this.selfhost)return N.renderCopy(U.abs(x))},process:function(x,A){return D.processAll(x)},render:function(x,A,V){return this.selfhost||x.appendChild(V),x}};V.Namespace._moduleDefine(x,"WinJS.UI.Pages",{define:Pages_define,get:get,_remove:function _remove(x){N.clearCache(U.abs(x)),U.remove(x)},render:render,_viewMap:U.viewMap})}function Pages_define(x,D){var N=U.get(x);return N||(delete F.init,delete F.ready,delete F.unload,delete F.dispose,delete F.error,delete F.attach,delete F.detach,delete F.__init__,delete F.__ready__,delete F.__attach__,delete F.__detach__,delete F.__unload__,delete F.__dispose__,delete F.__error__,N=U.define(x,F)),D&&(D.init&&(D.__init__=D.init,delete D.init),D.ready&&(D.__ready__=D.ready,delete D.ready),D.unload&&(D.__unload__=D.unload,delete D.unload),D.dispose&&(D.__dispose__=D.dispose,delete D.dispose),D.error&&(D.__error__=D.error,delete D.error),D.attach&&(D.__attach__=D.attach,delete D.attach),D.detach&&(D.__detach__=D.detach,delete D.detach),N=V.Class.mix(N,D)),N.selfhost&&R.ready((function(){render(U.abs(x),A.document.body)}),!0),N}function get(x){var A=U.get(x);return A||(A=Pages_define(x)),A}function render(x,A,V,R){var D=new(get(x))(A,V,null,R);return D.renderComplete.then(null,(function(x){return B.wrapError({error:x,page:D})}))}})),define("WinJS/Controls/HtmlControl",["exports","../Core/_Global","../Core/_Base","../Pages"],(function htmlControlInit(x,A,V,R){"use strict";A.document&&V.Namespace._moduleDefine(x,"WinJS.UI",{HtmlControl:V.Class.define((function HtmlControl_ctor(x,A,V){R.render(A.uri,x,A).then(V,(function(){V()}))}))})})),define("base",["WinJS/Core/_WinJS","WinJS/Core","WinJS/Promise","WinJS/_Signal","WinJS/Scheduler","WinJS/Utilities","WinJS/XYFocus","WinJS/Fragments","WinJS/Application","WinJS/Navigation","WinJS/Animations","WinJS/Binding","WinJS/BindingTemplate","WinJS/BindingList","WinJS/Res","WinJS/Pages","WinJS/ControlProcessor","WinJS/Controls/HtmlControl"],(function(x){"use strict";return x.Namespace.define("WinJS.Utilities",{_require:require,_define:define}),x})),require(["WinJS/Core/_WinJS","base"],(function(x){globalObject.WinJS=x,"undefined"!=typeof module&&(module.exports=x)})),globalObject.WinJS},"function"==typeof define&&define.amd?define([],factory):(globalObject.msWriteProfilerMark&&msWriteProfilerMark("WinJS.4.4 4.4.4.winjs.2022.2.24 base.js,StartTM"),"object"==typeof exports&&"string"!=typeof exports.nodeName?factory():factory(globalObject.WinJS),globalObject.msWriteProfilerMark&&msWriteProfilerMark("WinJS.4.4 4.4.4.winjs.2022.2.24 base.js,StopTM"))}(),function(){var x,A="undefined"!=typeof window?window:"undefined"!=typeof self?self:"undefined"!=typeof global?global:{};x=function(x){var V=x.Utilities._require,R=x.Utilities._define;R("WinJS/VirtualizedDataSource/_VirtualizedDataSourceImpl",["exports","../Core/_Global","../Core/_Base","../Core/_BaseUtils","../Core/_ErrorFromName","../Core/_Events","../Core/_Log","../Core/_Resources","../Core/_WriteProfilerMark","../Promise","../Scheduler","../_Signal","../Utilities/_UI"],(function listDataSourceInit(x,A,V,R,D,N,U,B,F,W,H,z,G){"use strict";V.Namespace._moduleDefine(x,"WinJS.UI",{VirtualizedDataSource:V.Namespace._lazy((function(){var x=1,B=G.DataSourceStatus,F=G.CountResult,j=G.FetchError,q=G.EditError,Q={get listDataAdapterIsInvalid(){return"Invalid argument: listDataAdapter must be an object or an array."},get indexIsInvalid(){return"Invalid argument: index must be a non-negative integer."},get keyIsInvalid(){return"Invalid argument: key must be a string."},get invalidItemReturned(){return"Error: data adapter returned item that is not an object."},get invalidKeyReturned(){return"Error: data adapter returned item with undefined or null key."},get invalidIndexReturned(){return"Error: data adapter should return undefined, null or a non-negative integer for the index."},get invalidCountReturned(){return"Error: data adapter should return undefined, null, CountResult.unknown, or a non-negative integer for the count."},get invalidRequestedCountReturned(){return"Error: data adapter should return CountResult.unknown, CountResult.failure, or a non-negative integer for the count."},get refreshCycleIdentified(){return"refresh cycle found, likely data inconsistency"}},K=V.Class.define((function(){}),{_baseDataSourceConstructor:function _baseDataSourceConstructor(V,N){var K,J,X,Y,$,Z,ee,te,ie,ne,re,se,oe,ae,le,ce,de,ue,he,pe,me,ge,ye,fe,_e,Ce,be,ve,Se,Te,Ee,we,Ie,xe,Ae,Le,Ve,Pe,Re,De,Ne,ke,Ue,Me,Oe,Be,Fe,We,He,ze,Ge,je,qe,Qe,Ke,Je,Xe,Ye,$e,Ze=0,et=new Array(100),tt=-1;V.itemsFromKey&&(Ke=function(x,A,R,D,N){var U="fetchItemsFromKey id="+x+" key="+A+" countBefore="+R+" countAfter="+D;profilerMarkStart(U),et[++tt%et.length]={kind:"itemsFromKey",key:A,countBefore:R,countAfter:D};var B=V.itemsFromKey(A,R,D,N);return profilerMarkEnd(U),B}),V.itemsFromIndex&&(Je=function(x,A,R,D){var N="fetchItemsFromIndex id="+x+" index="+A+" countBefore="+R+" countAfter="+D;profilerMarkStart(N),et[++tt%et.length]={kind:"itemsFromIndex",index:A,countBefore:R,countAfter:D};var U=V.itemsFromIndex(A,R,D);return profilerMarkEnd(N),U}),V.itemsFromStart&&(Xe=function(x,A){var R="fetchItemsFromStart id="+x+" count="+A;profilerMarkStart(R),et[++tt%et.length]={kind:"itemsFromStart",count:A};var D=V.itemsFromStart(A);return profilerMarkEnd(R),D}),V.itemsFromEnd&&(Ye=function(x,A){var R="fetchItemsFromEnd id="+x+" count="+A;profilerMarkStart(R),et[++tt%et.length]={kind:"itemsFromEnd",count:A};var D=V.itemsFromEnd(A);return profilerMarkEnd(R),D}),V.itemsFromDescription&&($e=function(x,A,R,D){var N="fetchItemsFromDescription id="+x+" desc="+A+" countBefore="+R+" countAfter="+D;profilerMarkStart(N),et[++tt%et.length]={kind:"itemsFromDescription",description:A,countBefore:R,countAfter:D};var U=V.itemsFromDescription(A,R,D);return profilerMarkEnd(N),U});var it=++x;function profilerMarkStart(x){var A="WinJS.UI.VirtualizedDataSource:"+it+":"+x+",StartTM";U.log&&U.log(A,"winjs vds","perf")}function profilerMarkEnd(x){var A="WinJS.UI.VirtualizedDataSource:"+it+":"+x+",StopTM";U.log&&U.log(A,"winjs vds","perf")}function isNonNegativeNumber(x){return"number"==typeof x&&x>=0}function isNonNegativeInteger(x){return isNonNegativeNumber(x)&&x===Math.floor(x)}function validateIndexReturned(x){if(null===x)x=void 0;else if(void 0!==x&&!isNonNegativeInteger(x))throw new D("WinJS.UI.ListDataSource.InvalidIndexReturned",Q.invalidIndexReturned);return x}function validateCountReturned(x){if(null===x)x=void 0;else if(void 0!==x&&!isNonNegativeInteger(x)&&x!==F.unknown)throw new D("WinJS.UI.ListDataSource.InvalidCountReturned",Q.invalidCountReturned);return x}function createSlot(){var x=(te++).toString(),A={handle:x,item:null,itemNew:null,fetchListeners:null,cursorCount:0,bindingMap:null};return Ie[x]=A,A}function createPrimarySlot(){return createSlot()}function insertSlot(x,A){x.prev=A.prev,x.next=A,x.prev.next=x,A.prev=x}function removeSlot(x){x.lastInSequence&&(delete x.lastInSequence,x.prev.lastInSequence=!0),x.firstInSequence&&(delete x.firstInSequence,x.next.firstInSequence=!0),x.prev.next=x.next,x.next.prev=x.prev}function sequenceStart(x){for(;!x.firstInSequence;)x=x.prev;return x}function sequenceEnd(x){for(;!x.lastInSequence;)x=x.next;return x}function moveSequenceBefore(x,A,V){return A.prev.next=V.next,V.next.prev=A.prev,A.prev=x.prev,V.next=x,A.prev.next=A,x.prev=V,!0}function moveSequenceAfter(x,A,V){return A.prev.next=V.next,V.next.prev=A.prev,A.prev=x,V.next=x.next,x.next=A,V.next.prev=V,!0}function mergeSequences(x){delete x.lastInSequence,delete x.next.firstInSequence}function splitSequence(x){var A=x.next;x.lastInSequence=!0,A.firstInSequence=!0,A===Ee&&changeSlotIndex(Ee,void 0)}function insertAndMergeSlot(x,A,V,R){insertSlot(x,A);var D=x.prev;D.lastInSequence&&(V?delete D.lastInSequence:x.firstInSequence=!0,R?delete A.firstInSequence:x.lastInSequence=!0)}function setSlotKey(x,A){x.key=A,xe[x.key]=x}function setSlotIndex(x,A,V){+A===A&&(x.index=A,V[A]=x,me||(x.firstInSequence&&x.prev&&x.prev.index===A-1&&mergeSequences(x.prev),x.lastInSequence&&x.next&&x.next.index===A+1&&mergeSequences(x)))}function createAndAddSlot(x,A){var V=A===Ae?createPrimarySlot():createSlot();return insertSlot(V,x),V}function createSlotSequence(x,A,V){var R=createAndAddSlot(x,V);return R.firstInSequence=!0,R.lastInSequence=!0,setSlotIndex(R,A,V),R}function createPrimarySlotSequence(x,A){return createSlotSequence(x,A,Ae)}function addSlotBefore(x,A){var V=createAndAddSlot(x,A);return delete x.firstInSequence,V.prev.index===V.index-1?delete V.prev.lastInSequence:V.firstInSequence=!0,setSlotIndex(V,x.index-1,A),V}function addSlotAfter(x,A){var V=createAndAddSlot(x.next,A);return delete x.lastInSequence,V.next.index===V.index+1?delete V.next.firstInSequence:V.lastInSequence=!0,setSlotIndex(V,x.index+1,A),V}function removeSlotPermanently(x){removeSlot(x),x.key&&delete xe[x.key],void 0!==x.index&&Ae[x.index]===x&&delete Ae[x.index];var A=x.bindingMap;for(var V in A){var R=A[V].handle;R&&Ie[R]===x&&delete Ie[R]}Ie[x.handle]===x&&delete Ie[x.handle]}function slotPermanentlyRemoved(x){return!Ie[x.handle]}function successorFromIndex(x,A,V,R,D){var N=D?null:A[x-1];if(N&&(N.next!==R||R.firstInSequence))N=N.next;else if(!(N=A[x+1])){var U;for(N=V.next;N.firstInSequence&&(U=N),x>=N.index&&N!==R;)N=N.next;N!==R||R.firstInSequence||(N=U&&void 0===U.index?U:void 0)}return N}function isPlaceholder(x){return!x.item&&!x.itemNew&&x!==Ee}function defineHandleProperty(x,A){Object.defineProperty(x,"handle",{value:A,writable:!1,enumerable:!1,configurable:!0})}function defineCommonItemProperties(x,A,V){defineHandleProperty(x,V),Object.defineProperty(x,"index",{get:function(){for(;A.slotMergedWith;)A=A.slotMergedWith;return A.index},enumerable:!1,configurable:!0})}function itemSignature(x){return V.itemSignature?V.itemSignature(x.data):function validateData(x){if(void 0===x)return x;var A=JSON.stringify(x);if(void 0===A)throw new D("WinJS.UI.ListDataSource.ObjectIsNotValidJson",Q.objectIsNotValidJson);return A}(x.data)}function prepareSlotItem(x){var A=x.itemNew;x.itemNew=null,A&&(defineCommonItemProperties(A=Object.create(A),x,x.handle),V.compareByIdentity||(x.signature=itemSignature(A))),x.item=A,delete x.indexRequested,delete x.keyRequested}function slotRetained(x){return x.bindingMap||x.cursorCount>0}function slotRequested(x){return slotRetained(x)||x.fetchListeners||x.directFetchListeners}function slotLive(x){return slotRequested(x)||!x.firstInSequence&&slotRetained(x.prev)||!x.lastInSequence&&slotRetained(x.next)||!Je&&(!x.firstInSequence&&x.prev!==Te&&!(x.prev.item||x.prev.itemNew))|(!x.lastInSequence&&x.next!==Ee&&!(x.next.item||x.next.itemNew))}function deleteUnnecessarySlot(x){splitSequence(x),removeSlotPermanently(x)}function releaseSlotIfUnrequested(x){slotRequested(x)||(Le++,ce||De||(Ve=x,Le>J&&!Pe&&(Pe=!0,H.schedule((function VDS_async_releaseSlotIfUnrequested(){Pe=!1,function reduceReleasedSlotCount(){if(!ce){Ve&&!slotPermanentlyRemoved(Ve)||(Ve=Ee.prev);for(var x=Ve.prev,A=Ve.next,V=0,considerDeletingSlot=function(x){x===Ee||slotLive(x)||(V<=J?V++:deleteUnnecessarySlot(x))};x||A;){if(x){var R=x;x=R.prev,R!==Te&&considerDeletingSlot(R)}if(A){var D=A;A=D.next,D!==we&&considerDeletingSlot(D)}}Le=0}}()}),H.Priority.idle,null,"WinJS.UI.VirtualizedDataSource.releaseSlotIfUnrequested"))))}function forEachBindingRecord(x){for(var A in Z)x(Z[A])}function forEachBindingRecordOfSlot(x,A){for(var V in x.bindingMap)A(x.bindingMap[V].bindingRecord,V)}function handlerToNotify(x){return x.notificationsSent||(x.notificationsSent=!0,x.notificationHandler.beginNotifications&&x.notificationHandler.beginNotifications()),x.notificationHandler}function finishNotifications(){oe||he||forEachBindingRecord((function(x){x.notificationsSent&&(x.notificationsSent=!1,x.notificationHandler.endNotifications&&x.notificationHandler.endNotifications())}))}function handleForBinding(x,A){var V=x.bindingMap;if(V){var R=V[A];if(R){var D=R.handle;if(D)return D}}return x.handle}function itemForBinding(x,A){return x&&x.handle!==A&&defineHandleProperty(x=Object.create(x),A),x}function changeCount(x){var A=Se;Se=x,forEachBindingRecord((function(x){x.notificationHandler&&x.notificationHandler.countChanged&&handlerToNotify(x).countChanged(Se,A)}))}function sendIndexChangedNotifications(x,A){forEachBindingRecordOfSlot(x,(function(V,R){V.notificationHandler.indexChanged&&handlerToNotify(V).indexChanged(handleForBinding(x,R),x.index,A)}))}function changeSlotIndex(x,A){var V=x.index;if(void 0!==V&&Ae[V]===x&&delete Ae[V],+A===A)setSlotIndex(x,A,Ae);else{if(+V!==V)return;delete x.index}sendIndexChangedNotifications(x,V)}function insertionNotificationRecipients(x,A,V,R,D){var N={};if((R||!A.lastInSequence)&&(D||!V.firstInSequence))if(A===Te)if(V===Ee)for(var U in Z)N[U]=Z[U];else for(var U in V.bindingMap)N[U]=Z[U];else if(V===Ee||V.bindingMap)for(var U in A.bindingMap)(V===Ee||V.bindingMap[U])&&(N[U]=Z[U]);for(var U in x.bindingMap)N[U]=Z[U];return N}function sendInsertedNotification(x){var A,V=x.prev,R=x.next,D=insertionNotificationRecipients(x,V,R);for(A in D){var N=D[A];N.notificationHandler&&handlerToNotify(N).inserted(N.itemPromiseFromKnownSlot(x),V.lastInSequence||V===Te?null:handleForBinding(V,A),R.firstInSequence||R===Ee?null:handleForBinding(R,A))}}function changeSlot(x){var A=x.item;prepareSlotItem(x),forEachBindingRecordOfSlot(x,(function(V,R){var D=handleForBinding(x,R);handlerToNotify(V).changed(itemForBinding(x.item,D),itemForBinding(A,D))}))}function moveSlot(x,A,V,R,D){var N,U=A.prev;if(A===x){if(!x.firstInSequence||!V)return;A=x.next}else if(U===x){if(!x.lastInSequence||!R)return;U=x.prev}if(!D){var B=insertionNotificationRecipients(x,U,A,V,R);for(N in B){var F=B[N];handlerToNotify(F).moved(F.itemPromiseFromKnownSlot(x),(U.lastInSequence||U===x.prev)&&!V||U===Te?null:handleForBinding(U,N),(A.firstInSequence||A===x.next)&&!R||A===Ee?null:handleForBinding(A,N))}forEachBindingRecord((function(A){A.adjustCurrentSlot(x)}))}removeSlot(x),insertAndMergeSlot(x,A,V,R)}function deleteSlot(x,A){completeFetchPromises(x,!0),forEachBindingRecordOfSlot(x,(function(V,R){handlerToNotify(V).removed(handleForBinding(x,R),A)})),forEachBindingRecord((function(A){A.adjustCurrentSlot(x)})),removeSlotPermanently(x)}function deleteMirageSequence(x){for(;!x.firstInSequence;)x=x.prev;var A;do{A=x.lastInSequence;var V=x.next;deleteSlot(x,!0),x=V}while(!A)}function adjustedIndex(x){if(x){for(var A=0;!x.firstInSequence;)A++,x=x.prev;return"number"==typeof x.indexNew?x.indexNew+A:"number"==typeof x.index?x.index+A:void 0}}function updateNewIndicesAfterSlot(x,A){for(x=x.next;x;x=x.next)if(x.firstInSequence){var V=void 0!==x.indexNew?x.indexNew:x.index;void 0!==V&&(x.indexNew=V+A)}pe+=A,me=!0,De?beginRefresh():ge++}function updateNewIndices(x,A){var V;if(x.firstInSequence)if(A<0)void 0!==(V=x.indexNew)?delete x.indexNew:V=x.index,x.lastInSequence||(x=x.next,void 0!==V&&(x.indexNew=V));else if(!x.lastInSequence){var R=x.next;void 0!==(V=R.indexNew)?delete R.indexNew:V=R.index,void 0!==V&&(x.indexNew=V)}updateNewIndicesAfterSlot(x,A)}function updateNewIndicesFromIndex(x,A){for(var V=Te;V!==Ee;V=V.next){var R=V.indexNew;if(void 0!==R&&x<=R){updateNewIndicesAfterSlot(V,A);break}}}function updateIndices(){var x,A,V;for(x=Te;;x=x.next){if(x.firstInSequence){if(A=x,void 0!==x.indexNew){if(V=x.indexNew,delete x.indexNew,isNaN(V))break}else V=x.index;x!==Te&&x.prev.index===V-1&&mergeSequences(x.prev)}if(x.lastInSequence)for(var R=V,D=A;D!==x.next;D=D.next)R!==D.index&&changeSlotIndex(D,R),+R===R&&R++;if(x===Ee)break}for(;x!==we;x=x.next)void 0!==x.index&&x!==Ee&&changeSlotIndex(x,void 0);me=!1,pe&&+Se===Se&&(ne?ne.reset():changeCount(Se+pe),pe=0)}function createFetchPromise(x,A,V,R,D){if(x.item)return new W((function(A){D?D(A,x.item):A(x.item)}));var N={listBindingID:R,retained:!1};return x[A]||(x[A]={}),x[A][V]=N,N.promise=new W((function(x,A){N.complete=D?function(A){D(x,A)}:x,N.error=A}),(function(){for(;x.slotMergedWith;)x=x.slotMergedWith;var R=x[A];if(R){if(delete R[V],Object.keys(R).length>0)return;delete x[A]}releaseSlotIfUnrequested(x)})),N.promise}function completePromises(x,A){for(var V in A)A[V].complete(x)}function completeFetchPromises(x,A){var V=x.fetchListeners,R=x.directFetchListeners;if(V||R){prepareSlotItem(x);var D=x.item,completeOrQueuePromises=function(x){A?completePromises(D,x):Ce.push((function(){completePromises(D,x)}))};R&&(x.directFetchListeners=null,completeOrQueuePromises(R)),V&&(x.fetchListeners=null,completeOrQueuePromises(V)),releaseSlotIfUnrequested(x)}}function callFetchCompleteCallbacks(){var x=Ce;Ce=[];for(var A=0,V=x.length;A<V;A++)x[A]()}function requestSlot(x){return x.firstInSequence&&addSlotBefore(x,Ae),x.lastInSequence&&addSlotAfter(x,Ae),x.itemNew&&prepareSlotItem(x),postFetch(),x}function requestSlotBefore(x){if(!x.firstInSequence){var A=x.prev;return A===Te?null:requestSlot(A)}return requestSlot(addSlotBefore(x,Ae))}function requestSlotAfter(x){if(!x.lastInSequence){var A=x.next;return A===Ee?null:requestSlot(A)}return requestSlot(addSlotAfter(x,Ae))}function itemDirectlyFromSlot(x){return x?createFetchPromise(x,"directFetchListeners",(ie++).toString()):W.wrap(null)}function validateKey(x){if("string"!=typeof x||!x)throw new D("WinJS.UI.ListDataSource.KeyIsInvalid",Q.keyIsInvalid)}function createSlotForKey(x){var A=createPrimarySlotSequence(we);return setSlotKey(A,x),A.keyRequested=!0,A}function slotFromKey(x,A){validateKey(x);var V=xe[x];return V||((V=createSlotForKey(x)).hints=A),requestSlot(V)}function slotFromIndex(x){if("number"!=typeof x||x<0)throw new D("WinJS.UI.ListDataSource.IndexIsInvalid",Q.indexIsInvalid);if(Ee.index<=x)return null;var A=Ae[x];if(!A){var V=successorFromIndex(x,Ae,Te,Ee);if(!V)return null;V===Ee&&x>=Ee&&changeSlotIndex(Ee,void 0),A=V.prev.index===x-1?addSlotAfter(V.prev,Ae):V.index===x+1?addSlotBefore(V,Ae):createPrimarySlotSequence(V,x)}return A.item||(A.indexRequested=!0),requestSlot(A)}function slotFromDescription(x){var A=createPrimarySlotSequence(we);return A.description=x,requestSlot(A)}var nt=this;function setStatus(x){if(X!==(Y=x)){var dispatch=function(){$=!1,X!==Y&&(X=Y,nt.dispatchEvent("statuschanged",X))};Y===B.failure?dispatch():$||($=!0,A.setTimeout(dispatch,40))}}function slotFetchInProgress(x){var A=x.fetchID;return A&&_e[A]}function setFetchID(x,A){x.fetchID=A}function newFetchID(){var x=fe;return fe++,_e[x]=!0,x}function setFetchIDs(x,A,V){var R=newFetchID();setFetchID(x,R);for(var D=x;!D.firstInSequence&&A>0;)A--,setFetchID(D=D.prev,R);for(var N=x;!N.lastInSequence&&V>0;)V--,setFetchID(N=N.next,R);return R}function addMarkers(x){var A=x.items,V=x.offset,R=x.totalCount,D=x.absoluteIndex,N=x.atStart,U=x.atEnd;isNonNegativeNumber(D)&&(isNonNegativeNumber(R)&&D-V+A.length===R&&(U=!0),V===D&&(N=!0)),N&&(A.unshift(be),x.offset++),U&&A.push(ve)}function resultsValid(x,A,V){return delete _e[V],A===ge&&!slotPermanentlyRemoved(x)||(postFetch(),!1)}function fetchItems(x,A,V,R){var N=ge;V.then((function(V){if(!V.items||!V.items.length)return W.wrapError(new D(j.doesNotExist));var U="itemsFetched id="+A+" count="+V.items.length;profilerMarkStart(U),resultsValid(x,N,A)&&(+R===R&&(V.absoluteIndex=R),addMarkers(V),processResults(x,V.items,V.offset,V.totalCount,V.absoluteIndex)),profilerMarkEnd(U)})).then(null,(function(V){resultsValid(x,N,A)&&processErrorResult(x,V)}))}function fetchItemsForIndex(x,A,V,R){var N=ge;R.then((function(R){if(!R.items||!R.items.length)return W.wrapError(new D(j.doesNotExist));var U="itemsFetched id="+V+" count="+R.items.length;profilerMarkStart(U),resultsValid(A,N,V)&&(R.absoluteIndex=x,addMarkers(R),function processResultsForIndex(x,A,V,R,N,U){U=validateIndexReturned(U),N=validateCountReturned(N);var B=x-R,F=V.length;if(A.index>=B&&A.index<B+F)processResults(A,V,A.index-B,N,A.index);else if(R===F-1&&x<A.index||isNonNegativeNumber(N)&&N<=A.index)processErrorResult(A,new D(j.doesNotExist));else if(A.index<B){var W=setFetchIDs(A,0,B-A.index);fetchItemsForIndex(B,A,W,Ke(W,V[0].key,B-A.index,0))}else{var H=B+F-1;W=setFetchIDs(A,A.index-H,0),fetchItemsForIndex(H,A,W,Ke(W,V[F-1].key,0,A.index-H))}}(x,A,R.items,R.offset,R.totalCount,R.absoluteIndex)),profilerMarkEnd(U)})).then(null,(function(){resultsValid(A,N,V)&&function processErrorResultForIndex(x,A,V){switch(V.name){case j.doesNotExist:x===Te.index?(removeMirageIndices(0),processErrorResult(A,V)):beginRefresh();break;default:processErrorResult(A,V)}}(x,A,N)}))}function fetchItemsFromStart(x,A){var V=setFetchIDs(x,0,A-1);fetchItems(x,V,Xe?Xe(V,A):Je(V,0,0,A-1),0)}function fetchItemsFromEnd(x,A){var V=setFetchIDs(x,A-1,0);fetchItems(x,V,Ye(V,A))}function fetchItemsFromKey(x,A,V){var R=setFetchIDs(x,A,V);fetchItems(x,R,Ke(R,x.key,A,V,x.hints))}function fetchItemsFromIndex(x,A,V){var R=x.index;if(A>R&&(A=R),Je)fetchItems(x,H=setFetchIDs(x,A,V),Je(H,R,A,V),R);else if(x.key)fetchItemsFromKey(x,A,V);else{var D,N,U=Te,B=R+1;for(D=x.prev;D!==Te;D=D.prev)if(void 0!==D.index&&D.key){B>(N=R-D.index)&&(B=N,U=D);break}for(D=x.next;D!==Ee;D=D.next)if(void 0!==D.index&&D.key){B>(N=D.index-R)&&(B=N,U=D);break}if(U===Te)fetchItemsForIndex(0,x,H=setFetchIDs(x,0,R+1),Xe(H,R+1));else{var F=Math.max(U.index-R,0),W=Math.max(R-U.index,0),H=setFetchIDs(U,F,W);fetchItemsForIndex(U.index,x,H,Ke(H,U.key,F,W,x.hints))}}}function fetchItemsFromDescription(x,A,V){var R=setFetchIDs(x,A,V);fetchItems(x,R,$e(R,x.description,A,V))}function postFetch(){ye||(ye=!0,H.schedule((function VDS_async_postFetch(){ye=!1,function fetchItemsForAllSlots(){if(!De){for(var x,A,V,R,D,N,U,F,W=!1,H=!1,z=Te.next;z!==we;){var G=z.next;if(z!==Ee&&isPlaceholder(z)&&(H=!0,x?A++:(x=z,A=1),slotFetchInProgress(z)&&(W=!0),z.keyRequested&&!V&&(V=z,R=A-1),void 0===z.description||D||(D=z,N=A-1),z.indexRequested&&!U&&(U=z,F=A-1),z.lastInSequence||G===we||!isPlaceholder(G))){if(W)W=!1;else{if(re=!1,!x.firstInSequence&&x.prev.key&&Ke?fetchItemsFromKey(x.prev,0,A):!z.lastInSequence&&G.key&&Ke?fetchItemsFromKey(G,A,0):x.prev!==Te||x.firstInSequence||!Xe&&!Je?G===Ee&&!z.lastInSequence&&Ye?fetchItemsFromEnd(z,A):V?fetchItemsFromKey(V,R,A-1-R):D?fetchItemsFromDescription(D,N,A-1-N):U?fetchItemsFromIndex(U,F,A-1-F):"number"==typeof x.index?fetchItemsFromIndex(x,A-1,0):deleteMirageSequence(x):fetchItemsFromStart(x,A),re)return void postFetch();if(De)return}x=U=V=null}z=G}setStatus(H?B.waiting:B.ready)}}(),finishNotifications()}),H.Priority.max,null,"WinJS.UI.ListDataSource._fetch"))}function changeSlotIfNecessary(x){slotRequested(x)?function itemChanged(x){var A=x.itemNew;if(!A)return!1;var R=x.item;for(var D in R)switch(D){case"data":break;default:if(R[D]!==A[D])return!0}return V.compareByIdentity?R.data!==A.data:x.signature!==itemSignature(A)}(x)?changeSlot(x):x.itemNew=null:x.item=null}function updateSlotItem(x){x.item?changeSlotIfNecessary(x):completeFetchPromises(x)}function updateSlot(x,A){x.key||setSlotKey(x,A.key),x.itemNew=A,updateSlotItem(x)}function sendMirageNotifications(x,A,V){var R=A.bindingMap;if(R)for(var D in V)if(R[D]){var N=A.fetchListeners;for(var U in N){var B=N[U];B.listBindingID===D&&B.retained&&(delete N[U],B.complete(null))}handlerToNotify(R[D].bindingRecord).removed(handleForBinding(A,D),!0,handleForBinding(x,D)),A.bindingMap&&delete A.bindingMap[D]}}function mergeSlots(x,A){if(x.index!==A.index){var V=A.index;A.index=x.index,sendIndexChangedNotifications(A,V)}A.slotMergedWith=x;var R=A.bindingMap;for(var D in R){x.bindingMap||(x.bindingMap={});var N=R[D];N.handle||(N.handle=A.handle),Ie[N.handle]=x,x.bindingMap[D]=N}forEachBindingRecord((function(V){V.adjustCurrentSlot(A,x)}));var U=A.itemNew||A.item;if(U&&(defineCommonItemProperties(U=Object.create(U),x,x.handle),updateSlot(x,U)),x.item)A.directFetchListeners&&Ce.push((function(){completePromises(x.item,A.directFetchListeners)})),A.fetchListeners&&Ce.push((function(){completePromises(x.item,A.fetchListeners)}));else{var B;for(B in A.directFetchListeners)x.directFetchListeners||(x.directFetchListeners={}),x.directFetchListeners[B]=A.directFetchListeners[B];for(B in A.fetchListeners)x.fetchListeners||(x.fetchListeners={}),x.fetchListeners[B]=A.fetchListeners[B]}x.itemNew&&completeFetchPromises(x),A.handle=(te++).toString(),splitSequence(A),removeSlotPermanently(A)}function mergeSlotsAndItem(x,A,V){A&&A.key&&(V||(V=A.itemNew||A.item),delete A.key,delete xe[V.key],A.itemNew=null,A.item=null),V&&updateSlot(x,V),A&&mergeSlots(x,A)}function slotFromResult(x){if("object"!=typeof x)throw new D("WinJS.UI.ListDataSource.InvalidItemReturned",Q.invalidItemReturned);if(x===be)return Te;if(x===ve)return Ee;if(x.key)return R.validation&&validateKey(x.key),xe[x.key];throw new D("WinJS.UI.ListDataSource.InvalidKeyReturned",Q.invalidKeyReturned)}function matchSlot(x,A){var V=slotFromResult(A);V===x&&(V=null),V&&sendMirageNotifications(x,V,x.bindingMap),mergeSlotsAndItem(x,V,A)}function promoteSlot(x,A,V,R){if(A&&x.key&&x.key!==A.key)return beginRefresh(),!1;var D,N=Ae[V];if(N)if(N===x)N=null;else{if(N.key&&(x.key||A&&N.key!==A.key))return beginRefresh(),!1;if(!x.key&&N.bindingMap)return!1}if(A)if((D=xe[A.key])===x)D=null;else if(D&&D.bindingMap)return!1;return N?(sendMirageNotifications(x,N,x.bindingMap),delete Ae[V],changeSlotIndex(x,V),x.prev.index===V-1&&mergeSequences(x.prev),x.next.index===V+1&&mergeSequences(x),R.slotNext=N.slotNext,A||(A=N.itemNew||N.item)&&(D=xe[A.key])):changeSlotIndex(x,V),D&&N!==D&&sendMirageNotifications(x,D,x.bindingMap),mergeSlotsAndItem(x,D,A),N&&N!==D&&mergeSlots(x,N),!0}function mergeAdjacentSlot(x,A,V){if(A.key&&x.key&&A.key!==x.key)return beginRefresh(),!1;for(var R in x.bindingMap)V[R]=!0;return sendMirageNotifications(x,A,V),mergeSlotsAndItem(x,A),!0}function mergeSlotsBefore(x,A){for(var V={};x;){var R=x.firstInSequence?null:x.prev;if(A.firstInSequence||A.prev!==Te){if(!mergeAdjacentSlot(A=A.firstInSequence?addSlotBefore(A,Ae):A.prev,x,V))return}else deleteSlot(x,!0);x=R}}function mergeSlotsAfter(x,A){for(var V={};x;){var R=x.lastInSequence?null:x.next;if(A.lastInSequence||A.next!==Ee){if(!mergeAdjacentSlot(A=A.lastInSequence?addSlotAfter(A,Ae):A.next,x,V))return}else deleteSlot(x,!0);x=R}}function mergeSequencePairs(x){for(var A=0;A<x.length;A++){var V=x[A];mergeSlotsBefore(V.slotBeforeSequence,V.slotFirstInSequence),mergeSlotsAfter(V.slotAfterSequence,V.slotLastInSequence)}}function removeMirageIndices(x,A){var V=0;function removePlaceholdersAfterSlot(A){for(var R=Ee.prev;!(R.index<x)&&R!==A;){var D=R.prev;void 0!==R.index&&deleteSlot(R,!0),R=D}V=0}for(var R=Ee.prev;!(R.index<x)||V>0;){var D=R.prev;if(R===Te){removePlaceholdersAfterSlot(Te);break}if(R.key){if(R.index>=x)return beginRefresh(),!1;if(!(R.index>=A))return Ke?fetchItemsFromKey(R,0,V):fetchItemsFromIndex(R,0,V),!1;removePlaceholdersAfterSlot(R)}else R.indexRequested||R.firstInSequence?removePlaceholdersAfterSlot(D):V++;R=D}return!0}function processResults(x,A,V,R,D){var N="WinJS.UI.ListDataSource.processResults";if(profilerMarkStart(N),D=validateIndexReturned(D),R=validateCountReturned(R),ce)profilerMarkEnd(N);else{if(me&&updateIndices(),(isNonNegativeNumber(R)||R===F.unknown)&&R!==Se&&!Ee.firstInSequence)return beginRefresh(),void profilerMarkEnd(N);re=!0,function(){var N,U,B,F,W=A.length;if("number"!=typeof D)for(N=0;N<W;N++)if((B=slotFromResult(A[N]))&&void 0!==B.index){D=B.index+V-N;break}"number"==typeof D&&A[W-1]===ve?R=D-V+W-1:isNonNegativeNumber(R)&&null==D&&(D=R-(W-1)+V),isNonNegativeNumber(R)&&!removeMirageIndices(R,D-V)&&(R=void 0);var H=new Array(W);for(N=0;N<W;N++){var z=null;if(B=slotFromResult(A[N])){if(N>0&&!B.firstInSequence&&B.prev.key&&B.prev.key!==A[N-1].key||"number"==typeof D&&void 0!==B.index&&B.index!==D-V+N)return void beginRefresh();(B===Te||B===Ee||B.bindingMap)&&(z=B)}if("number"==typeof D&&(B=Ae[D-V+N])){if(B.key&&B.key!==A[N].key)return void beginRefresh();!z&&B.bindingMap&&(z=B)}if(N===V){if(x.key&&x.key!==A[N].key||"number"==typeof x.index&&"number"==typeof D&&x.index!==D)return void beginRefresh();z||(z=x)}H[N]=z}for(N=0;N<W;N++)(B=H[N])&&void 0!==B.index&&B!==Te&&B!==Ee&&matchSlot(B,A[N]);var G,j,q=[],Q=!0;for(N=0;N<W;N++)if((B=H[N])&&B!==Ee){var K=N;if(void 0===B.index){var J={};promoteSlot(B,A[N],D-V+N,J);var X,Y=B,$=B;for(U=N-1;!Y.firstInSequence&&(X=A[U])!==be;U--){var Z=D-V+U;if(Z<0)break;if(!promoteSlot(Y.prev,X,Z,J))break;Y=Y.prev,U>=0&&(H[U]=Y)}for(U=N+1;!$.lastInSequence&&((X=A[U])!==ve&&U!==R||$.next===Ee)&&($.next===Ee||promoteSlot($.next,X,D-V+U,J))&&($=$.next,U<W&&(H[U]=$),K=U,$!==Ee);U++);if(G=Y.firstInSequence?null:Y.prev,j=$.lastInSequence?null:$.next,G&&splitSequence(G),j&&splitSequence($),"number"==typeof D){if($===Ee)G&&moveSequenceAfter(Ee,sequenceStart(G),G);else{var ee=J.slotNext;ee||(ee=successorFromIndex($.index,Ae,Te,Ee,!0)),moveSequenceBefore(ee,Y,$)}Y.prev.index===Y.index-1&&mergeSequences(Y.prev),$.next.index===$.index+1&&mergeSequences($)}else Q||(F=H[N-1])&&(Y.prev!==F&&($===Ee?(G&&moveSequenceAfter(Ee,sequenceStart(G),G),moveSequenceBefore(Y,sequenceStart(F),F)):moveSequenceAfter(F,Y,$)),mergeSequences(F));if(Q=!1,Re)return;q.push({slotBeforeSequence:G,slotFirstInSequence:Y,slotLastInSequence:$,slotAfterSequence:j})}N!==V||B===x||slotPermanentlyRemoved(x)||(G=x.firstInSequence?null:x.prev,j=x.lastInSequence?null:x.next,sendMirageNotifications(B,x,B.bindingMap),mergeSlots(B,x),q.push({slotBeforeSequence:G,slotFirstInSequence:B,slotLastInSequence:B,slotAfterSequence:j})),N=K}for(isNonNegativeNumber(R)&&Ee.index!==R&&changeSlotIndex(Ee,R),mergeSequencePairs(q),N=0;N<W;N++)if(B=H[N]){for(U=N-1;U>=0;U--){var te=H[U+1];matchSlot(H[U]=te.firstInSequence?addSlotBefore(H[U+1],Ae):te.prev,A[U])}for(U=N+1;U<W;U++)F=H[U-1],(B=H[U])?B.firstInSequence&&(B.prev!==F&&moveSequenceAfter(F,B,sequenceEnd(B)),mergeSequences(F)):matchSlot(H[U]=F.lastInSequence?addSlotAfter(F,Ae):F.next,A[U]);break}delete x.description}(),Re||(void 0!==R&&R!==Se&&changeCount(R),postFetch()),finishNotifications(),callFetchCompleteCallbacks(),profilerMarkEnd(N)}}function processErrorResult(x,A){switch(A.name){case j.noResponse:setStatus(B.failure),function returnDirectFetchError(x,A){var V=x.directFetchListeners;if(V){for(var R in x.directFetchListeners=null,V)V[R].error(A);releaseSlotIfUnrequested(x)}}(x,A);break;case j.doesNotExist:x.indexRequested?removeMirageIndices(x.index):(x.keyRequested||x.description)&&deleteMirageSequence(x),finishNotifications(),beginRefresh()}}function resetRefreshState(){++Ze>100&&function identifyRefreshCycle(){for(var x=0;x<et.length&&"beginRefresh"!==et[x].kind;x++);for(var A=x;A<et.length&&"beginRefresh"!==et[A].kind;A++);if(A>x&&A+(A-x)<et.length){for(var V=!0,R=A-x,D=0;D<R;D++)if(et[x+D].kind!==et[A+D].kind){V=!1;break}if(V&&U.log)for(U.log(Q.refreshCycleIdentified,"winjs vds","error"),D=x;D<A;D++)U.log(D-x+": "+JSON.stringify(et[D]),"winjs vds","error");return V}}()?setStatus(B.failure):(et[++tt%et.length]={kind:"beginRefresh"},(Oe={firstInSequence:!0,lastInSequence:!0,index:-1}).next=Be={firstInSequence:!0,lastInSequence:!0},Be.prev=Oe,Ue=!1,Me=void 0,Fe={},We={},(He={})[-1]=Oe,ze={})}function beginRefresh(){if(!Re){if(Re=!0,setStatus(B.waiting),ue)return ue=!1,void applyNextEdit();if(!ce){var x=++ge;De=!0,ke=0,H.schedule((function VDS_async_beginRefresh(){if(ge===x){Re=!1,resetRefreshState();for(var A=Te.next;A!==we;){var V=A.next;slotLive(A)||A===Ee||deleteUnnecessarySlot(A),A=V}startRefreshFetches()}}),H.Priority.high,null,"WinJS.VirtualizedDataSource.beginRefresh")}}}function requestRefresh(){return Ne=Ne||new z,beginRefresh(),Ne.promise}function resultsValidForRefresh(x,A){return delete _e[A],x===ge&&(ke--,!0)}function fetchItemsForRefresh(x,A,V,R,N){var U=ge;ke++,R.then((function(A){if(!A.items||!A.items.length)return W.wrapError(new D(j.doesNotExist));var R="itemsFetched id="+V+" count="+A.items.length;profilerMarkStart(R),resultsValidForRefresh(U,V)&&(addMarkers(A),function processRefreshResults(x,A,V,R,D){D=validateIndexReturned(D),R=validateCountReturned(R);var N=!1;Ue=!0;var U=D-V,B=A[0];B.key===x&&(N=!0);var W=slotRefreshFromResult(B);if(W){if(+U===U&&!processRefreshSlotIndex(W,U))return}else{if(He[U])return void beginRefresh();var H;if(void 0!==D&&(H=He[U-1])){if(!H.lastInSequence)return void beginRefresh();W=addSlotAfter(H,He)}else{var z=+U===U?successorFromIndex(U,He,Oe,Be):function lastRefreshInsertionPoint(){for(var x=Be;!x.firstInSequence;)if((x=x.prev)===Oe)return null;return x}();if(!z)return void beginRefresh();W=createSlotSequence(z,U,He)}setRefreshSlotResult(W,A[0])}for(var G=A.length,j=1;j<G;j++){(B=A[j]).key===x&&(N=!0);var q=slotRefreshFromResult(B);if(q){if(void 0!==W.index&&!processRefreshSlotIndex(q,W.index+1))return;if(q!==W.next){if(!W.lastInSequence||!q.firstInSequence)return void beginRefresh();var Q=sequenceEnd(q);if(Q!==Be)moveSequenceAfter(W,q,Q);else{var K=sequenceStart(W);if(K===Oe)return void beginRefresh();moveSequenceBefore(q,K,W)}mergeSequences(W)}else W.lastInSequence&&mergeSequences(W)}else{if(!W.lastInSequence)return void beginRefresh();setRefreshSlotResult(q=addSlotAfter(W,He),B)}W=q}if(N||(ze[x]=!0),!isNonNegativeNumber(R)&&!Be.firstInSequence){var J=Be.prev.index;void 0!==J&&(R=J+1)}if(isNonNegativeNumber(R)||R===F.unknown){if(isNonNegativeNumber(Me)){if(R!==Me)return void beginRefresh()}else Me=R;isNonNegativeNumber(Me)&&!He[Me]&&setSlotIndex(Be,Me,He)}Qe?qe=!0:continueRefresh(x)}(x,A.items,A.offset,A.totalCount,"number"==typeof N?N:A.absoluteIndex)),profilerMarkEnd(R)})).then(null,(function(R){resultsValidForRefresh(U,V)&&function processRefreshErrorResult(x,A,V){switch(V.name){case j.noResponse:setStatus(B.failure);break;case j.doesNotExist:A?(setSlotIndex(Be,0,He),Me=0,concludeRefresh()):(ze[x]=!0,Qe?qe=!0:continueRefresh(x))}}(x,A,R)}))}function refreshRange(x,A,V,R){if(Ke)fetchItemsForRefresh(x.key,!1,A,Ke(A,x.key,V,R,x.hints));else{var D=x.index;He[D]&&He[D].firstInSequence?fetchItemsForRefresh(x.key,!1,A,Je(A,D-1,Math.min(V+10,D)-1,R+1+10),D-1):He[D]&&He[D].lastInSequence?fetchItemsForRefresh(x.key,!1,A,Je(A,D+1,Math.min(V+10,D)+1,R-1+10),D+1):fetchItemsForRefresh(x.key,!1,A,Je(A,D,Math.min(V+10,D),R+10),D)}}function keyFetchInProgress(x){return _e[Fe[x]]}function refreshRanges(x,A){for(var V,R,D,N=ge,U=0,B=x;B!==we;B=B.next){if(!V&&B.key&&!ze[B.key]&&!keyFetchInProgress(B.key)){var F=We[B.key];(!F||F.firstInSequence||F.lastInSequence)&&(V=B,R=F,D=newFetchID())}if(V){var W=keyFetchInProgress(B.key);if(ze[B.key]||We[B.key]||W||(B.key&&(Fe[B.key]=D),U++),B.lastInSequence||B.next===Ee||W){if(refreshRange(V,D,!R||R.firstInSequence?3:0,U-1+3),!A)break;V=null,U=0}}else B.key&&isPlaceholder(B)&&!ze[B.key]&&(We[B.key]||(D=newFetchID(),fetchItemsForRefresh(B.key,!1,D,Ke(D,B.key,1,1,B.hints))))}0!==ke||Ue||ge!==N||function refreshFirstItem(x){Xe?fetchItemsForRefresh(null,!0,x,Xe(x,1),0):Je&&fetchItemsForRefresh(null,!0,x,Je(x,0,0,0),0)}(newFetchID())}function startRefreshFetches(){var x=ge;do{Ge=!1,je=!0,refreshRanges(Te.next,!0),je=!1}while(0===ke&&Ge&&ge===x&&De);0===ke&&ge===x&&concludeRefresh()}function continueRefresh(x){var A=ge;if(x){var V=xe[x];V||(V=Te.next);do{qe=!1,Qe=!0,refreshRanges(V,!1),Qe=!1}while(qe&&ge===A&&De)}je?Ge=!0:0===ke&&ge===A&&startRefreshFetches()}function slotRefreshFromResult(x){if("object"==typeof x&&x){if(x===be)return Oe;if(x===ve)return Be;if(x.key)return We[x.key];throw new D("WinJS.UI.ListDataSource.InvalidKeyReturned",Q.invalidKeyReturned)}throw new D("WinJS.UI.ListDataSource.InvalidItemReturned",Q.invalidItemReturned)}function processRefreshSlotIndex(x,A){for(;void 0===x.index;){if(setSlotIndex(x,A,He),x.firstInSequence)return!0;x=x.prev,A--}return x.index===A||(beginRefresh(),!1)}function setRefreshSlotResult(x,A){x.key=A.key,We[x.key]=x,x.item=A}function slotFromSlotRefresh(x){return x===Oe?Te:x===Be?Ee:xe[x.key]}function slotRefreshFromSlot(x){return x===Te?Oe:x===Ee?Be:We[x.key]}function mergeSequencesForRefresh(x){mergeSequences(x),x.next.mergedForRefresh=!0}function copyRefreshSlotData(x,A){setSlotKey(A,x.key),A.itemNew=x.item}function addNewSlotFromRefresh(x,A,V){var R=createPrimarySlot();copyRefreshSlotData(x,R),insertAndMergeSlot(R,A,V,!V);var D=x.index;return+D!==D&&(D=V?R.prev.index+1:A.next.index-1),setSlotIndex(R,D,Ae),R}function matchSlotForRefresh(x,A,V){x?(sendMirageNotifications(x,A,x.bindingMap),mergeSlotsAndItem(x,A,V.item)):(copyRefreshSlotData(V,A),A.indexRequested&&updateSlotItem(A))}function updateSlotForRefresh(x,A,V){return!A.key&&(x?(V.mergeWithPrev=!A.firstInSequence,V.mergeWithNext=!A.lastInSequence):V.stationary=!0,matchSlotForRefresh(x,A,V),!0)}function indexForRefresh(x){var A;if(x.indexRequested)A=x.index;else{var V=slotRefreshFromSlot(x);V&&(A=V.index)}return A}function concludeRefresh(){Ze=0,et=new Array(100),tt=-1,me=!0,Fe={};var x,A,V,R,D,N,U,B,F,W,H,z,G,j,q,Q=[],K=[];for(z=0,U=Oe;U;U=U.next)U.sequenceNumber=z,U.firstInSequence&&(ue=U),U.lastInSequence&&(K[z]={first:ue,last:U,matchingItems:0},z++);for(Ve=null,Le=0,V=Te.next;V!==we;)U=We[V.key],nt=V.next,V!==Ee&&(slotLive(V)?V.key&&!U?deleteSlot(V,!1):0===Me||V.indexRequested&&V.index>=Me?deleteSlot(V,!0):V.item||V.keyRequested?V.itemNew=U.item:V.key&&(V.keyRequested||(delete xe[V.key],delete V.key),V.itemNew=null):deleteUnnecessarySlot(V)),V=nt;for(V=Te.next;V!==Ee;)nt=V.next,V.indexRequested&&(U=He[V.index])&&matchSlotForRefresh(slotFromSlotRefresh(U),V,U),V=nt;var J,X,Y,$,Z,ee=0,te=[];for(B=0,V=Te;V!==we;V=V.next){if(V.firstInSequence)for(ue=V,Y=null,x=0;x<z;x++)te[x]=0;if(V.indexRequested&&(Y=V),(U=slotRefreshFromSlot(V))&&te[U.sequenceNumber]++,V.lastInSequence){for(X=0,x=ee;x<z;x++)X<te[x]&&(X=te[x],J=x);F={first:ue,last:V,sequenceNew:X>0?K[J]:void 0,matchingItems:X},Y&&(F.indexRequested=!0,F.stationarySlot=Y),Q[B]=F,V===Ee&&($=B,Z=F),B++,void 0!==K[J].first.index&&(ee=J)}}Q[0].sequenceNew!==K[0]&&(splitSequence(Te),Q[0].first=Te.next,Q.unshift({first:Te,last:Te,sequenceNew:K[0],matchingItems:1}),$++,B++);var ie=!Ee.firstInSequence;for(Z.sequenceNew!==K[z-1]&&(splitSequence(Ee.prev),Z.last=Ee.prev,$++,Q.splice($,0,{first:Ee,last:Ee,sequenceNew:K[z-1],matchingItems:1}),B++,Z=Q[$]),x=0;x<B;x++)(G=Q[x].sequenceNew)&&G.matchingItems<Q[x].matchingItems&&(G.matchingItems=Q[x].matchingItems,G.sequenceOld=Q[x]);for(K[z-1].sequenceOld=Z,Z.stationarySlot=Ee,K[0].sequenceOld=Q[0],Q[0].stationarySlot=Te,x=0;x<=$;x++)(F=Q[x]).sequenceNew&&(H=F.sequenceNew.sequenceOld)===W&&W.last!==Ee?(mergeSequencesForRefresh(H.last),H.last=F.last,delete Q[x]):W=F;for(W=null,x=$;x>=0;x--)(F=Q[x])&&(F.sequenceNew&&(H=F.sequenceNew.sequenceOld)===W&&F.last!==Ee?(mergeSequencesForRefresh(F.last),H.first=F.first,delete Q[x]):W=F);ie&&delete Ee.mergedForRefresh;var ne=[];for(x=$+1;x<B;x++)if((F=Q[x])&&(!F.sequenceNew||F.sequenceNew.sequenceOld!==F)){var re,se,oe=!0,ae=null,le=null,ce=0;for((U=slotRefreshFromSlot(F.first))&&(ae=le=U,ce=1),V=F.first;V!==F.last;V=V.next){var de=slotRefreshFromSlot(V.next);if(U&&de&&(U.lastInSequence||U.next!==de)){oe=!1;break}U&&!ae&&(ae=le=U),de&&ae&&(le=de,ce++),U=de}if(oe&&ae&&void 0!==ae.index&&(ae.firstInSequence||(D=slotFromSlotRefresh(ae.prev))&&(re=D.index),le.lastInSequence||(N=slotFromSlotRefresh(le.next))&&(se=N.index),(!N||N.lastInSequence||N.mergedForRefresh)&&(void 0===re||void 0===se||se-re-1>=ce))){for(F.locationJustDetermined=!0,U=ae;U.locationJustDetermined=!0,U!==le;U=U.next);var ue=slotFromSlotRefresh(ae),he=slotFromSlotRefresh(le);ne.push({slotBeforeSequence:ue.firstInSequence?null:ue.prev,slotFirstInSequence:ue,slotLastInSequence:he,slotAfterSequence:he.lastInSequence?null:he.next})}}for(x=0;x<B;x++)if((F=Q[x])&&!F.indexRequested&&!F.locationJustDetermined&&(!F.sequenceNew||F.sequenceNew.sequenceOld!==F)){var pe;F.sequenceNew=null,V=F.first;do{if(pe=V===F.last,nt=V.next,V!==Te&&V!==Ee&&V!==we&&!V.item&&!V.keyRequested)if(deleteSlot(V,!0),F.first===V){if(F.last===V){delete Q[x];break}F.first=V.next}else F.last===V&&(F.last=V.prev);V=nt}while(!pe)}for(x=0;x<z;x++){for(U=(G=K[x]).first;!slotFromSlotRefresh(U)&&!U.lastInSequence;U=U.next);if(U.lastInSequence&&!slotFromSlotRefresh(U))G.firstInner=G.lastInner=null;else{for(G.firstInner=U,U=G.last;!slotFromSlotRefresh(U);U=U.prev);G.lastInner=U}}for(x=0;x<z;x++)if((G=K[x])&&G.firstInner&&(F=G.sequenceOld)){var ge=0;for(V=F.first;(U=slotRefreshFromSlot(V))&&U.sequenceNumber===G.firstInner.sequenceNumber&&(U.ordinal=ge),!V.lastInSequence;V=V.next,ge++);var ye=[];for(U=G.firstInner;;U=U.next){if(void 0!==(ge=U.ordinal)){for(var fe=0,_e=ye.length-1;fe<=_e;){var Ce=Math.floor(.5*(fe+_e));ye[Ce].ordinal<ge?fe=Ce+1:_e=Ce-1}ye[fe]=U,fe>0&&(U.predecessor=ye[fe-1])}if(U===G.lastInner)break}var Ie=[],Pe=ye.length;for(U=ye[Pe-1],A=Pe;A--;)U.stationary=!0,Ie[A]=U,U=U.predecessor;F.stationarySlot=slotFromSlotRefresh(Ie[0]),R=(V=slotFromSlotRefresh(U=Ie[0])).prev;for(var Re=V.firstInSequence;!U.firstInSequence;)if(!(ke=slotFromSlotRefresh(U=U.prev))||U.locationJustDetermined)for(;!Re&&R!==Te&&(R=(V=R).prev,Re=V.firstInSequence,!updateSlotForRefresh(ke,V,U)););for(A=0;A<Pe-1;A++){V=slotFromSlotRefresh(U=Ie[A]);var ke,Ue=Ie[A+1],ze=null,Ge=slotFromSlotRefresh(Ue);for(nt=V.next,U=U.next;U!==Ue&&!ze&&V!==Ge;U=U.next)if(!(ke=slotFromSlotRefresh(U))||U.locationJustDetermined)for(;nt!==Ge;){if(nt.mergedForRefresh){ze=U.prev;break}if(nt=(V=nt).next,updateSlotForRefresh(ke,V,U))break}if(ze)for(R=Ge.prev,U=Ue.prev;U!==ze&&Ge!==V;U=U.prev)if(!(ke=slotFromSlotRefresh(U))||U.locationJustDetermined)for(;R!==V&&(R=(Ge=R).prev,!updateSlotForRefresh(ke,Ge,U)););for(;nt!==Ge;)nt=(V=nt).next,V!==Te&&isPlaceholder(V)&&!V.keyRequested&&deleteSlot(V)}for(nt=(V=slotFromSlotRefresh(U=Ie[Pe-1])).next,Re=V.lastInSequence;!U.lastInSequence;)if(!(ke=slotFromSlotRefresh(U=U.next))||U.locationJustDetermined)for(;!Re&&nt!==Ee&&(nt=(V=nt).next,Re=V.lastInSequence,!updateSlotForRefresh(ke,V,U)););}for(x=0;x<z;x++)if((G=K[x]).firstInner)for(R=null,U=G.firstInner;;U=U.next){if(V=slotFromSlotRefresh(U)){if(!U.stationary){var je,qe=!1,Qe=!1;if(R)je=R.next,qe=!0;else{var Ke;for(Ke=G.firstInner;!Ke.stationary&&Ke!==G.lastInner;Ke=Ke.next);if(Ke.stationary)je=slotFromSlotRefresh(Ke),Qe=!0;else if(0===(j=U.index))je=Te.next,qe=!0;else if(void 0===j)je=we;else{je=Te.next;for(var Je=null;je.firstInSequence&&(Je=je),!(j<je.index&&Je||je===Ee);)je=je.next;!je.firstInSequence&&Je&&(je=Je)}}V.mergedForRefresh&&(delete V.mergedForRefresh,V.lastInSequence||(V.next.mergedForRefresh=!0)),qe=qe||U.mergeWithPrev,Qe=Qe||U.mergeWithNext;var Xe=U.locationJustDetermined;moveSlot(V,je,qe,Qe,Xe),Xe&&Qe&&(je.mergedForRefresh=!0)}R=V}if(U===G.lastInner)break}for(x=0;x<z;x++)if((G=K[x]).firstInner)for(R=null,U=G.firstInner;;U=U.next){if(!(V=slotFromSlotRefresh(U))){var Ye;if(R)Ye=R.next;else{var $e;for($e=G.firstInner;!slotFromSlotRefresh($e);$e=$e.next);Ye=slotFromSlotRefresh($e)}V=addNewSlotFromRefresh(U,Ye,!!R),de=slotRefreshFromSlot(Ye),Ye.mergedForRefresh||de&&de.locationJustDetermined||(prepareSlotItem(V),sendInsertedNotification(V))}if(R=V,U===G.lastInner)break}Ae=[];var it=-1;for(V=Te,q=0;V!==we;q++){var nt=V.next;if(V.firstInSequence&&(ue=V,q=0),void 0===it){var rt=indexForRefresh(V);void 0!==rt&&(it=rt-q)}if(void 0!==it&&!V.lastInSequence){var st=indexForRefresh(V.next);if(void 0!==st&&st!==it+q+1){splitSequence(V);for(var ot=!0,mt=V.next,gt=!1;!gt&&mt!==Ee;){var yt=mt.next;gt=mt.lastInSequence,moveSlot(mt,yt,!ot,!1),ot=!1,mt=yt}}}if(V.lastInSequence){j=it;for(var _t=ue;_t!==nt;){var Ct=_t.next;if(j>=Me&&_t!==Ee)deleteSlot(_t,!0);else{var bt=Ae[j];j!==_t.index?(delete Ae[j],changeSlotIndex(_t,j)):+j===j&&Ae[j]!==_t&&(Ae[j]=_t),_t.itemNew&&updateSlotItem(_t),bt&&(_t.key?(sendMirageNotifications(_t,bt,_t.bindingMap),mergeSlots(_t,bt),+j===j&&(Ae[j]=_t)):(sendMirageNotifications(bt,_t,bt.bindingMap),mergeSlots(bt,_t),+j===j&&(Ae[j]=bt))),+j===j&&j++}_t=Ct}it=void 0}V=nt}var vt,St=-2;for(V=Te,q=0;V!==we;q++){if(nt=V.next,V.firstInSequence&&(ue=V,q=0),delete V.mergedForRefresh,V.lastInSequence)if(void 0===ue.index){var Tt;(D=ue.prev)&&(Tt=slotRefreshFromSlot(D))&&!Tt.lastInSequence&&(U=slotRefreshFromSlot(V))&&U.prev===Tt?(moveSequenceAfter(D,ue,V),mergeSequences(D)):V===Ee||vt||moveSequenceBefore(we,ue,V)}else{if(St<V.index&&!vt)St=V.index;else{for(N=Te.next;N.index<V.index;N=N.next);for(mt=ue;mt!==nt;)yt=mt.next,U=slotRefreshFromSlot(mt),moveSlot(mt,N,N.prev.index===mt.index-1,N.index===mt.index+1,U&&U.locationJustDetermined),mt=yt}(D=ue.prev)&&D.index===ue.index-1&&mergeSequences(D)}V===Ee&&(vt=!0),V=nt}me=!1,mergeSequencePairs(ne),void 0!==Me&&Me!==Se&&changeCount(Me),finishNotifications();var Et=[];for(x=0;x<z;x++){var wt,It=[];for(V=null,q=0,U=(G=K[x]).first;U===Oe?It.push(be):U===Be?It.push(ve):(It.push(U.item),V||(V=slotFromSlotRefresh(U),wt=q)),!U.lastInSequence;U=U.next,q++);V&&Et.push({slot:V,results:It,offset:wt})}for(resetRefreshState(),De=!1,callFetchCompleteCallbacks(),x=0;x<Et.length;x++){var xt=Et[x];processResults(xt.slot,xt.results,xt.offset,Se,xt.slot.index)}if(Ne){var At=Ne;Ne=null,At.complete()}postFetch()}function queueEdit(x,A,V,R,D,N,U){var B=le.prev,F={prev:B,next:le,applyEdit:x,editType:A,complete:V,error:R,keyUpdate:D};B.next=F,le.prev=F,ce=!0,(Re||De)&&(ge++,De=!1,Re=!0),le.next===F&&applyNextEdit(),F.failed||(N(),F.undo=U),oe||completeEdits()}function dequeueEdit(){ae=!1;var x=le.next.next;le.next=x,x.prev=le}var rt="insert",st="change",ot="move",mt="remove";function attemptEdit(x){if(!ae){var A=!0,R=x.keyUpdate;V.beginEdits&&!se&&(se=!0,V.beginEdits()),ae=!0,x.applyEdit().then((function onEditComplete(V){var D;if(V)if(R&&R.key!==V.key){var N=V.key;if(x.undo){if(D=R.slot){var U=D.key;U&&delete xe[U],setSlotKey(D,N),D.itemNew=V,D.item?(changeSlot(D),finishNotifications()):completeFetchPromises(D)}}else R.key=N}else x.editType===st&&(D.itemNew=V,A||changeSlotIfNecessary(D));dequeueEdit(),x.complete&&x.complete(V),continueEdits()}),(function onEditError(A){switch(A.Name){case q.noResponse:return setStatus(B.failure),ue=!0,void(ae=!1);case q.notPermitted:break;case q.noLongerMeaningful:beginRefresh()}x.failed=!0,dequeueEdit(),function discardEditQueue(){for(;le.prev!==le;){var x=le.prev;x.error&&x.error(new D(q.canceled)),x.undo&&!Re&&x.undo(),le.prev=x.prev}le.next=le,oe=!1,completeEdits()}(),x.error&&x.error(A),continueEdits()})),A=!1}function continueEdits(){ue||(A?de=!0:applyNextEdit())}}function applyNextEdit(){for(;le.next!==le;)if(de=!1,attemptEdit(le.next),!de)return;concludeEdits()}function completeEdits(){updateIndices(),finishNotifications(),callFetchCompleteCallbacks(),le.next===le&&concludeEdits()}function concludeEdits(){ce=!1,V.endEdits&&se&&!oe&&(se=!1,V.endEdits()),Re?(Re=!1,beginRefresh()):postFetch()}function getSlotForEdit(x){return validateKey(x),xe[x]||createSlotForKey(x)}function insertNewSlot(x,A,V,R,D){var N=createPrimarySlot();return insertAndMergeSlot(N,V,R,D),x&&setSlotKey(N,x),N.itemNew=A,updateNewIndices(N,1),oe||he||(N.firstInSequence||"number"!=typeof N.prev.index?N.lastInSequence||"number"!=typeof N.next.index||setSlotIndex(N,N.next.index-1,Ae):setSlotIndex(N,N.prev.index+1,Ae)),prepareSlotItem(N),sendInsertedNotification(N),N}function insertItem(x,A,V,R,D){var N={key:x};return new W((function(x,U){queueEdit(D,rt,x,U,N,(function(){if(V){var x={key:N.key,data:A};N.slot=insertNewSlot(N.key,x,V,R,!R)}}),(function(){var x=N.slot;x&&(updateNewIndices(x,-1),deleteSlot(x,!1))}))}))}function moveItem(x,A,V,R){return new W((function(D,N){var U,B,F,W;queueEdit(R,ot,D,N,null,(function(){B=x.next,F=x.firstInSequence,W=x.lastInSequence;var R=x.prev;U="number"!=typeof x.index&&(F||!R.item)&&(W||!B.item),updateNewIndices(x,-1),moveSlot(x,A,V,!V),updateNewIndices(x,1),U&&(splitSequence(R),F||mergeSlotsBefore(R,x),W||mergeSlotsAfter(B,x))}),(function(){U?beginRefresh():(updateNewIndices(x,-1),moveSlot(x,B,!F,!W),updateNewIndices(x,1))}))}))}function resetState(){setStatus(B.ready),ne=null,se=!1,oe=!1,ae=!1,(le={}).next=le,le.prev=le,ce=!1,ue=!1,pe=0,me=!1,_e={},Ce=[],Se=F.unknown,we={firstInSequence:!0,lastInSequence:!0},(Te={firstInSequence:!0,lastInSequence:!0,index:-1}).next=Ee={firstInSequence:!0,lastInSequence:!0},Ee.prev=Te,Ee.next=we,we.prev=Ee,Ie={},xe={},(Ae={})[-1]=Te,Le=0,Ve=null,Pe=!1,Re=!1,De=!1,Ne=null}if(!V)throw new D("WinJS.UI.ListDataSource.ListDataAdapterIsInvalid",Q.listDataAdapterIsInvalid);J=V.compareByIdentity?0:200,N&&"number"==typeof N.cacheSize&&(J=N.cacheSize),V.setNotificationHandler&&(K=new function ListDataNotificationHandler(){function completeNotification(){he||(updateIndices(),finishNotifications(),callFetchCompleteCallbacks())}this.invalidateAll=function(){return 0===Se?(this.reload(),W.wrap()):requestRefresh()},this.reload=function(){ne&&ne.cancel(),Ne&&Ne.cancel();for(var x=Te.next;x!==we;x=x.next){var A=x.fetchListeners;for(var V in A)A[V].promise.cancel();var R=x.directFetchListeners;for(var V in R)R[V].promise.cancel()}resetState(),forEachBindingRecord((function(x){x.notificationHandler&&x.notificationHandler.reload()}))},this.beginNotifications=function(){he=!0},this.inserted=function(x,A,V,R){if(ce)beginRefresh();else{var D=x.key,N=xe[A],U=xe[V],B="string"==typeof A,F="string"==typeof V;if(B?U&&!U.firstInSequence&&(N=U.prev):F&&N&&!N.lastInSequence&&(U=N.next),(B||F)&&!N&&!U&&Te.next===Ee)return void beginRefresh();if(xe[D])return void beginRefresh();if(N&&U&&(N.next!==U||N.lastInSequence||U.firstInSequence))return void beginRefresh();if(N&&(N.keyRequested||N.indexRequested)||U&&(U.keyRequested||U.indexRequested))return void beginRefresh();if(N||U)insertNewSlot(D,x,U||N.next,!!N,!!U);else if(Te.next===Ee)insertNewSlot(D,x,Te.next,!0,!0);else{if(void 0===R)return void beginRefresh();updateNewIndicesFromIndex(R,1)}completeNotification()}},this.changed=function(x){if(ce)beginRefresh();else{var A=x.key,V=xe[A];V&&(V.keyRequested?beginRefresh():(V.itemNew=x,V.item&&(changeSlot(V),completeNotification())))}},this.moved=function(x,A,V,R,D){if(ce)beginRefresh();else{var N=x.key,U=xe[N],B=xe[A],F=xe[V];U&&U.keyRequested||B&&B.keyRequested||F&&F.keyRequested?beginRefresh():U?B&&F&&(B.next!==F||B.lastInSequence||F.firstInSequence)?beginRefresh():B||F?(updateNewIndices(U,-1),moveSlot(U,F||B.next,!!B,!!F),updateNewIndices(U,1),completeNotification()):(updateNewIndices(U,-1),deleteSlot(U,!1),void 0!==R&&(R<D&&D--,updateNewIndicesFromIndex(D,1)),completeNotification()):B||F?(void 0!==R&&(updateNewIndicesFromIndex(R,-1),R<D&&D--),this.inserted(x,A,V,D)):void 0!==R&&(updateNewIndicesFromIndex(R,-1),R<D&&D--,updateNewIndicesFromIndex(D,1),completeNotification())}},this.removed=function(x,A){var V;ce?beginRefresh():(V="string"==typeof x?xe[x]:Ae[A])?V.keyRequested?beginRefresh():(updateNewIndices(V,-1),deleteSlot(V,!1),completeNotification()):void 0!==A&&(updateNewIndicesFromIndex(A,-1),completeNotification())},this.endNotifications=function(){he=!1,completeNotification()}},V.setNotificationHandler(K)),X=B.ready,$=!1,Z={},ee=0,te=1,ie=0,ge=0,ye=!1,fe=1,be={},ve={},resetState(),this.createListBinding=function(x){var A=(ee++).toString(),V=null,R=!1;function releaseSlotForCursor(x){x&&0==--x.cursorCount&&releaseSlotIfUnrequested(x)}function moveCursor(x){!function retainSlotForCursor(x){x&&x.cursorCount++}(x),releaseSlotForCursor(V),V=x}function releaseSlotFromListBinding(x){var V=x.bindingMap,R=V[A].handle;delete x.bindingMap[A];var D=!0,N=!0;for(var U in V)if(D=!1,R&&V[U].handle===R){N=!1;break}R&&N&&delete Ie[R],D&&(x.bindingMap=null,releaseSlotIfUnrequested(x))}function itemPromiseFromKnownSlot(V){var R=handleForBinding(V,A),N=(ie++).toString(),U=createFetchPromise(V,"fetchListeners",N,A,(function(x,A){x(itemForBinding(A,R))}));return defineCommonItemProperties(U,V,R),x&&(U.retain=function(){return D._retainItem(V,N),U},U.release=function(){D._releaseItem(R)}),U}function itemPromiseFromSlot(A){var V;return!R&&A?V=itemPromiseFromKnownSlot(A):(R?(V=new W((function(){}))).cancel():V=W.wrap(null),defineHandleProperty(V,null),x&&(V.retain=function(){return V},V.release=function(){})),moveCursor(A),V}Z[A]={notificationHandler:x,notificationsSent:!1,adjustCurrentSlot:function adjustCurrentSlot(x,A){x===V&&(A||(A=!V||V.lastInSequence||V.next===Ee?null:V.next),moveCursor(A))},itemPromiseFromKnownSlot:itemPromiseFromKnownSlot};var D={_retainItem:function(x,V){!function retainItem(x,V){x.bindingMap||(x.bindingMap={});var R=x.bindingMap[A];if(R?R.count++:x.bindingMap[A]={bindingRecord:Z[A],count:1},x.fetchListeners){var D=x.fetchListeners[V];D&&(D.retained=!0)}}(x,V)},_releaseItem:function(x){!function releaseItem(x){var V=Ie[x];if(V&&0==--V.bindingMap[A].count){var R=V.fetchListeners;for(var D in R){var N=R[D];N.listBindingID===A&&(N.retained=!1)}releaseSlotFromListBinding(V)}}(x)},jumpToItem:function(x){return itemPromiseFromSlot(x?Ie[x.handle]:null)},current:function(){return itemPromiseFromSlot(V)},previous:function(){return itemPromiseFromSlot(V?requestSlotBefore(V):null)},next:function(){return itemPromiseFromSlot(V?requestSlotAfter(V):null)},releaseItem:function(x){this._releaseItem(x.handle)},release:function(){R=!0,releaseSlotForCursor(V),V=null;for(var x=Te.next;x!==we;){var D=x.next,N=x.fetchListeners;for(var U in N){var B=N[U];B.listBindingID===A&&(B.promise.cancel(),delete N[U])}x.bindingMap&&x.bindingMap[A]&&releaseSlotFromListBinding(x),x=D}delete Z[A]}};return(Xe||Je)&&(D.first=function(){return itemPromiseFromSlot(requestSlotAfter(Te))}),Ye&&(D.last=function(){return itemPromiseFromSlot(requestSlotBefore(Ee))}),Ke&&(D.fromKey=function(x,A){return itemPromiseFromSlot(slotFromKey(x,A))}),(Je||Xe&&Ke)&&(D.fromIndex=function(x){return itemPromiseFromSlot(slotFromIndex(x))}),$e&&(D.fromDescription=function(x){return itemPromiseFromSlot(slotFromDescription(x))}),D},this.invalidateAll=function(){return requestRefresh()},this.getCount=function(){if(V.getCount){var x=this;return W.wrap().then((function(){return oe||ce?Se:(ne||((A=V.getCount()).then((function(){ne===R&&(ne=null),N=!0}),(function(){ne===R&&(ne=null),N=!0})),pe=0,N||(R=ne=function(x,A){var V=new z;x.then((function(x){V.complete(x)}),(function(x){V.error(x)}));var R=V.promise.then(null,(function(V){return"WinJS.UI.VirtualizedDataSource.resetCount"===V.name?(ne=null,x=A.getCount()):W.wrapError(V)})),N=0,U={get:function(){return N++,new W((function(x,A){R.then(x,A)}),(function(){0==--N&&(V.promise.cancel(),x.cancel(),U===ne&&(ne=null))}))},reset:function(){V.error(new D("WinJS.UI.VirtualizedDataSource.resetCount"))},cancel:function(){V.promise.cancel(),x.cancel(),U===ne&&(ne=null)}};return U}(A,x))),ne?ne.get():A);var A,R,N})).then((function(x){if(!isNonNegativeInteger(x)&&void 0!==x)throw new D("WinJS.UI.ListDataSource.InvalidRequestedCountReturned",Q.invalidRequestedCountReturned);return x!==Se&&(Se===F.unknown?Se=x:(changeCount(x),finishNotifications())),0===x&&(Te.next!==Ee||Ee.next!==we?beginRefresh():Te.lastInSequence&&(mergeSequences(Te),Ee.index=0)),x})).then(null,(function(x){return x.name===G.CountError.noResponse?(setStatus(B.failure),Se):W.wrapError(x)}))}return W.wrap(Se)},Ke&&(this.itemFromKey=function(x,A){return itemDirectlyFromSlot(slotFromKey(x,A))}),(Je||Xe&&Ke)&&(this.itemFromIndex=function(x){return itemDirectlyFromSlot(slotFromIndex(x))}),$e&&(this.itemFromDescription=function(x){return itemDirectlyFromSlot(slotFromDescription(x))}),this.beginEdits=function(){oe=!0},V.insertAtStart&&(this.insertAtStart=function(x,A){return insertItem(x,A,Te.lastInSequence?null:Te.next,!0,(function(){return V.insertAtStart(x,A)}))}),V.insertBefore&&(this.insertBefore=function(x,A,R){var D=getSlotForEdit(R);return insertItem(x,A,D,!1,(function(){return V.insertBefore(x,A,R,adjustedIndex(D))}))}),V.insertAfter&&(this.insertAfter=function(x,A,R){var D=getSlotForEdit(R);return insertItem(x,A,D?D.next:null,!0,(function(){return V.insertAfter(x,A,R,adjustedIndex(D))}))}),V.insertAtEnd&&(this.insertAtEnd=function(x,A){return insertItem(x,A,Ee.firstInSequence?null:Ee,!1,(function(){return V.insertAtEnd(x,A)}))}),V.change&&(this.change=function(x,A){var R=getSlotForEdit(x);return new W((function(D,N){var U;queueEdit((function(){return V.change(x,A,adjustedIndex(R))}),st,D,N,null,(function(){U=R.item,R.itemNew={key:x,data:A},U?changeSlot(R):completeFetchPromises(R)}),(function(){U?(R.itemNew=U,changeSlot(R)):beginRefresh()}))}))}),V.moveToStart&&(this.moveToStart=function(x){var A=getSlotForEdit(x);return moveItem(A,Te.next,!0,(function(){return V.moveToStart(x,adjustedIndex(A))}))}),V.moveBefore&&(this.moveBefore=function(x,A){var R=getSlotForEdit(x),D=getSlotForEdit(A);return moveItem(R,D,!1,(function(){return V.moveBefore(x,A,adjustedIndex(R),adjustedIndex(D))}))}),V.moveAfter&&(this.moveAfter=function(x,A){var R=getSlotForEdit(x),D=getSlotForEdit(A);return moveItem(R,D.next,!0,(function(){return V.moveAfter(x,A,adjustedIndex(R),adjustedIndex(D))}))}),V.moveToEnd&&(this.moveToEnd=function(x){var A=getSlotForEdit(x);return moveItem(A,Ee,!1,(function(){return V.moveToEnd(x,adjustedIndex(A))}))}),V.remove&&(this.remove=function(x){validateKey(x);var A=xe[x];return new W((function(R,D){var N,U,B;queueEdit((function(){return V.remove(x,adjustedIndex(A))}),mt,R,D,null,(function(){A&&(N=A.next,U=A.firstInSequence,B=A.lastInSequence,updateNewIndices(A,-1),deleteSlot(A,!1))}),(function(){A&&(function reinsertSlot(x,A,V,R){insertAndMergeSlot(x,A,V,R),xe[x.key]=x,void 0!==x.index&&(Ae[x.index]=x)}(A,N,!U,!B),updateNewIndices(A,1),sendInsertedNotification(A))}))}))}),this.endEdits=function(){oe=!1,completeEdits()}},_isVirtualizedDataSource:!0},{supportedForProcessing:!1});return V.Class.mix(K,N.eventMixin),K}))})})),R("WinJS/VirtualizedDataSource/_GroupDataSource",["exports","../Core/_Base","../Core/_ErrorFromName","../Promise","../Scheduler","../Utilities/_UI","./_VirtualizedDataSourceImpl"],(function groupDataSourceInit(x,A,V,R,D,N,U){"use strict";A.Namespace._moduleDefine(x,"WinJS.UI",{_GroupDataSource:A.Namespace._lazy((function(){function errorDoesNotExist(){return new V(N.FetchError.doesNotExist)}function groupReady(x){return x&&x.firstReached&&x.lastReached}var x=A.Class.define((function ListNotificationHandler_ctor(x){this._groupDataAdapter=x}),{beginNotifications:function(){},inserted:function(x,A,V){this._groupDataAdapter._inserted(x,A,V)},changed:function(x,A){this._groupDataAdapter._changed(x,A)},moved:function(x,A,V){this._groupDataAdapter._moved(x,A,V)},removed:function(x,A){this._groupDataAdapter._removed(x,A)},countChanged:function(x,A){0===x&&0!==A&&this._groupDataAdapter.invalidateGroups()},indexChanged:function(x,A,V){this._groupDataAdapter._indexChanged(x,A,V)},endNotifications:function(){this._groupDataAdapter._endNotifications()},reload:function(){this._groupDataAdapter._reload()}},{supportedForProcessing:!1}),B=A.Class.define((function GroupDataAdapater_ctor(A,V,R,D){this._listBinding=A.createListBinding(new x(this)),this._groupKey=V,this._groupData=R,this._initializeState(),this._batchSize=101,this._count=null,D&&("number"==typeof D.groupCountEstimate&&(this._count=D.groupCountEstimate<0?null:Math.max(D.groupCountEstimate,1)),"number"==typeof D.batchSize&&(this._batchSize=D.batchSize+1)),this._listBinding.last&&(this.itemsFromEnd=function(x){var A=this;return this._fetchItems((function(){return A._lastGroup}),(function(x){if(x)return!1;var V=A._count;return+V!==V||V>0||void 0}),(function(){A._fetchBatch(A._listBinding.last(),A._batchSize-1,0)}),x-1,0)})}),{setNotificationHandler:function(x){this._listDataNotificationHandler=x},compareByIdentity:!0,itemsFromKey:function(x,A,V,R){var D=this;return this._fetchItems((function(){return D._keyMap[x]}),(function(){var x=D._lastGroup;return!x||+x.index!==x.index||void 0}),(function(){var x="string"==typeof(R=R||{}).groupMemberKey&&D._listBinding.fromKey?D._listBinding.fromKey(R.groupMemberKey):"number"==typeof R.groupMemberIndex&&D._listBinding.fromIndex?D._listBinding.fromIndex(R.groupMemberIndex):void 0!==R.groupMemberDescription&&D._listBinding.fromDescription?D._listBinding.fromDescription(R.groupMemberDescription):D._listBinding.first(),A=Math.floor(.5*(D._batchSize-1));D._fetchBatch(x,A,D._batchSize-1-A)}),A,V)},itemsFromIndex:function(x,A,V){var R=this;return this._fetchItems((function(){return R._indexMap[x]}),(function(){var A=R._lastGroup;return!A||+A.index!==A.index||x<=A.index||void 0}),(function(){R._fetchNextIndex()}),A,V)},getCount:function(){if(this._lastGroup&&"number"==typeof this._lastGroup.index)return R.wrap(this._count);var x=this,A=new R((function(A){var V={initialBatch:function(){x._fetchNextIndex()},getGroup:function(){return null},countBefore:0,countAfter:0,complete:function(V){V&&(x._count=0);var R=x._count;return"number"==typeof R&&(A(R),!0)}};x._fetchQueue.push(V),x._itemBatch||x._continueFetch(V)}));return"number"==typeof this._count?R.wrap(this._count):A},invalidateGroups:function(){this._beginRefresh(),this._initializeState()},_initializeState:function(){this._count=null,this._indexMax=null,this._keyMap={},this._indexMap={},this._lastGroup=null,this._handleMap={},this._fetchQueue=[],this._itemBatch=null,this._itemsToFetch=0,this._indicesChanged=!1},_releaseItem:function(x){delete this._handleMap[x.handle],this._listBinding.releaseItem(x)},_processBatch:function(){for(var x,A=null,V=null,R=null,N=0,U=!0,B=0;B<this._batchSize;B++){var F=this._itemBatch[B],W=F?this._groupKey(F):null;if(F&&(U=!1),V&&null!==W&&W===V.key)N++,V.lastItem===A?(V.lastItem.handle!==V.firstItem.handle&&this._releaseItem(V.lastItem),V.lastItem=F,this._handleMap[F.handle]=V,V.size++):V.firstItem===F&&(V.firstItem.handle!==V.lastItem.handle&&this._releaseItem(V.firstItem),V.firstItem=R,this._handleMap[R.handle]=V,V.size+=N);else{var H=null;if(V&&(V.lastReached=!0,"number"==typeof V.index&&(H=V.index+1)),F){var z=this._keyMap[W];if(z||(z={key:W,data:this._groupData(F),firstItem:F,lastItem:F,size:1},this._keyMap[z.key]=z,this._handleMap[F.handle]=z),B>0&&(z.firstReached=!0,V||(H=0)),"number"!=typeof z.index&&"number"==typeof H){for(var G=z;G;G=this._nextGroup(G))G.index=H,this._indexMap[H]=G,H++;this._indexMax=H,"number"==typeof this._count&&!this._lastGroup&&this._count<=this._indexMax&&(this._count=this._indexMax+1)}R=F,N=0,V=z}else V&&(this._lastGroup=V,"number"==typeof V.index&&(this._count=V.index+1),this._listDataNotificationHandler.invalidateAll(),V=null)}A=F}for(x=this._fetchQueue[0];x&&x.complete(U);x=this._fetchQueue[0])this._fetchQueue.splice(0,1);if(x){var j=this;D.schedule((function GroupDataSource_async_processBatch(){j._continueFetch(x)}),D.Priority.normal,null,"WinJS.UI._GroupDataSource._continueFetch")}else this._itemBatch=null},_processPromise:function(x,A){x.retain(),this._itemBatch[A]=x;var V=this;x.then((function(x){V._itemBatch[A]=x,0==--V._itemsToFetch&&V._processBatch()}))},_fetchBatch:function(x,A){var V;for(this._itemBatch=new Array(this._batchSize),this._itemsToFetch=this._batchSize,this._processPromise(x,A),this._listBinding.jumpToItem(x),V=A-1;V>=0;V--)this._processPromise(this._listBinding.previous(),V);for(this._listBinding.jumpToItem(x),V=A+1;V<this._batchSize;V++)this._processPromise(this._listBinding.next(),V)},_fetchAdjacent:function(x,A){this._fetchBatch(this._listBinding.fromKey?this._listBinding.fromKey(x.key):this._listBinding.fromIndex(x.index),A?0:this._batchSize-1,A?this._batchSize-1:0)},_fetchNextIndex:function(){var x=this._indexMap[this._indexMax-1];x?this._fetchAdjacent(x.lastItem,!0):this._fetchBatch(this._listBinding.first(),1,this._batchSize-2)},_continueFetch:function(x){if(x.initialBatch)x.initialBatch(),x.initialBatch=null;else{var A,V,R=x.getGroup();R?R.firstReached?R.lastReached?x.countBefore>0&&0!==R.index&&!groupReady(A=this._previousGroup(R))?this._fetchAdjacent(A&&A.lastReached?A.firstItem:R.firstItem,!1):(V=this._nextGroup(R),this._fetchAdjacent(V&&V.firstReached?V.lastItem:R.lastItem,!0)):this._fetchAdjacent(R.lastItem,!0):this._fetchAdjacent(R.firstItem,!1):this._fetchNextIndex()}},_fetchComplete:function(x,A,V,R,D){if(groupReady(x)){var U=this._previousGroup(x);if(R||groupReady(U)||0===x.index||0===A){var B=this._nextGroup(x);if(R||groupReady(B)||this._lastGroup===x||0===V){for(var F=0,W=x;F<A&&groupReady(U=this._previousGroup(W));)W=U,F++;for(var H=0,z=x;H<V&&groupReady(B=this._nextGroup(z));)z=B,H++;for(var G=F+1+H,j=new Array(G),q=0;q<G;q++){var Q={key:W.key,data:W.data,firstItemKey:W.firstItem.key,groupSize:W.size},K=W.firstItem.index;"number"==typeof K&&(Q.firstItemIndexHint=K),j[q]=Q,W=this._nextGroup(W)}var J={items:j,offset:F};return J.totalCount="number"==typeof this._count?this._count:N.CountResult.unknown,"number"==typeof x.index&&(J.absoluteIndex=x.index),z===this._lastGroup&&(J.atEnd=!0),D(J),!0}}}return!1},_fetchItems:function(x,A,V,D,N){var U=this;return new R((function(R,B){var F=!x(),W=0;function fetchComplete(V){var H=x();return H?U._fetchComplete(H,D,N,F,R,B):F&&!A(V)||W>2?(B(errorDoesNotExist()),!0):(V?W++:W=0,!1)}if(!fetchComplete()){var H={initialBatch:F?V:null,getGroup:x,countBefore:D,countAfter:N,complete:fetchComplete};U._fetchQueue.push(H),U._itemBatch||U._continueFetch(H)}}))},_previousGroup:function(x){return x&&x.firstReached?(this._listBinding.jumpToItem(x.firstItem),this._handleMap[this._listBinding.previous().handle]):null},_nextGroup:function(x){return x&&x.lastReached?(this._listBinding.jumpToItem(x.lastItem),this._handleMap[this._listBinding.next().handle]):null},_invalidateIndices:function(x){this._count=null,this._lastGroup=null,"number"==typeof x.index&&(this._indexMax=x.index>0?x.index:null);for(var A=x;A&&"number"==typeof A.index;A=this._nextGroup(A))delete this._indexMap[A.index],A.index=null},_releaseGroup:function(x){this._invalidateIndices(x),delete this._keyMap[x.key],this._lastGroup===x&&(this._lastGroup=null),x.firstItem!==x.lastItem&&this._releaseItem(x.firstItem),this._releaseItem(x.lastItem)},_beginRefresh:function(){if(this._fetchQueue=[],this._itemBatch){for(var x=0;x<this._batchSize;x++){var A=this._itemBatch[x];A&&(A.cancel&&A.cancel(),this._listBinding.releaseItem(A))}this._itemBatch=null}this._itemsToFetch=0,this._listDataNotificationHandler.invalidateAll()},_processInsertion:function(x,A,V){var R=this._handleMap[A],D=this._handleMap[V],N=null;R&&(R.lastReached&&A===R.lastItem.handle&&(N=this._groupKey(x))!==R.key?this._lastGroup===R&&(this._lastGroup=null,this._count=null):this._releaseGroup(R),this._beginRefresh()),D&&D!==R&&(this._invalidateIndices(D),D.firstReached&&V===D.firstItem.handle&&(null!==N?N:this._groupKey(x))!==D.key||this._releaseGroup(D),this._beginRefresh())},_processRemoval:function(x){var A=this._handleMap[x];if(!A||x!==A.firstItem.handle&&x!==A.lastItem.handle){if(this._itemBatch)for(var V=0;V<this._batchSize;V++){var R=this._itemBatch[V];if(R&&R.handle===x){this._beginRefresh();break}}}else this._releaseGroup(A),this._beginRefresh()},_inserted:function(x,A,V){var R=this;x.then((function(x){R._processInsertion(x,A,V)}))},_changed:function(x,A){var V=this._handleMap[x.handle];if(V&&x.handle===V.firstItem.handle&&(this._releaseGroup(V),this._beginRefresh()),this._groupKey(x)!==this._groupKey(A)){this._listBinding.jumpToItem(x);var R=this._listBinding.previous().handle;this._listBinding.jumpToItem(x);var D=this._listBinding.next().handle;this._processRemoval(x.handle),this._processInsertion(x,R,D)}},_moved:function(x,A,V){this._processRemoval(x.handle);var R=this;x.then((function(x){R._processInsertion(x,A,V)}))},_removed:function(x,A){A||this._processRemoval(x)},_indexChanged:function(x,A,V){"number"==typeof V&&(this._indicesChanged=!0)},_endNotifications:function(){if(this._indicesChanged){for(var x in this._indicesChanged=!1,this._keyMap){var A=this._keyMap[x];if(A.firstReached&&A.lastReached){var V=A.lastItem.index+1-A.firstItem.index;isNaN(V)||(A.size=V)}}this._beginRefresh()}},_reload:function(){this._initializeState(),this._listDataNotificationHandler.reload()}},{supportedForProcessing:!1});return A.Class.derive(U.VirtualizedDataSource,(function(x,A,V,R){var D=new B(x,A,V,R);this._baseDataSourceConstructor(D),this.extensions={invalidateGroups:function(){D.invalidateGroups()}}}),{},{supportedForProcessing:!1})}))})})),R("WinJS/VirtualizedDataSource/_GroupedItemDataSource",["../Core/_Base","./_GroupDataSource"],(function groupedItemDataSourceInit(x,A){"use strict";x.Namespace.define("WinJS.UI",{computeDataSourceGroups:function(x,V,R,D){var N=Object.create(x);function createGroupedItem(x){if(x){var A=Object.create(x);return A.groupKey=V(x),R&&(A.groupData=R(x)),A}return null}function createGroupedItemPromise(x){var A=Object.create(x);return A.then=function(A,V,R){return x.then((function(x){return A(createGroupedItem(x))}),V,R)},A}N.createListBinding=function(A){var V;A?((V=Object.create(A)).inserted=function(x,V,R){return A.inserted(createGroupedItemPromise(x),V,R)},V.changed=function(x,V){return A.changed(createGroupedItem(x),createGroupedItem(V))},V.moved=function(x,V,R){return A.moved(createGroupedItemPromise(x),V,R)}):V=null;for(var R=x.createListBinding(V),D=Object.create(R),N=["first","last","fromDescription","jumpToItem","current"],U=0,B=N.length;U<B;U++)!function(x){R[x]&&(D[x]=function(){return createGroupedItemPromise(R[x].apply(R,arguments))})}(N[U]);return R.fromKey&&(D.fromKey=function(x){return createGroupedItemPromise(R.fromKey(x))}),R.fromIndex&&(D.fromIndex=function(x){return createGroupedItemPromise(R.fromIndex(x))}),D.prev=function(){return createGroupedItemPromise(R.prev())},D.next=function(){return createGroupedItemPromise(R.next())},D};for(var U=["itemFromKey","itemFromIndex","itemFromDescription","insertAtStart","insertBefore","insertAfter","insertAtEnd","change","moveToStart","moveBefore","moveAfter","moveToEnd"],B=0,F=U.length;B<F;B++)!function(A){x[A]&&(N[A]=function(){return createGroupedItemPromise(x[A].apply(x,arguments))})}(U[B]);["addEventListener","removeEventListener","dispatchEvent"].forEach((function(A){x[A]&&(N[A]=function(){return x[A].apply(x,arguments)})}));var W=null;return Object.defineProperty(N,"groups",{get:function(){return W||(W=new A._GroupDataSource(x,V,R,D)),W},enumerable:!0,configurable:!0}),N}})})),R("WinJS/VirtualizedDataSource/_StorageDataSource",["exports","../Core/_WinRT","../Core/_Global","../Core/_Base","../Core/_ErrorFromName","../Core/_WriteProfilerMark","../Animations","../Promise","../Utilities/_UI","./_VirtualizedDataSourceImpl"],(function storageDataSourceInit(x,A,V,R,D,N,U,B,F,W){"use strict";R.Namespace._moduleDefine(x,"WinJS.UI",{StorageDataSource:R.Namespace._lazy((function(){var x=R.Class.define((function StorageDataAdapter_ctor(x,V){var R,D=A.Windows.Storage.FileProperties.ThumbnailMode.singleItem,N=256,U=A.Windows.Storage.FileProperties.ThumbnailOptions.useCurrentScale,B=!0;if("Pictures"===x?(D=A.Windows.Storage.FileProperties.ThumbnailMode.picturesView,R=A.Windows.Storage.KnownFolders.picturesLibrary,N=190):"Music"===x?(D=A.Windows.Storage.FileProperties.ThumbnailMode.musicView,R=A.Windows.Storage.KnownFolders.musicLibrary,N=256):"Documents"===x?(D=A.Windows.Storage.FileProperties.ThumbnailMode.documentsView,R=A.Windows.Storage.KnownFolders.documentsLibrary,N=40):"Videos"===x&&(D=A.Windows.Storage.FileProperties.ThumbnailMode.videosView,R=A.Windows.Storage.KnownFolders.videosLibrary,N=190),R){var F=new A.Windows.Storage.Search.QueryOptions;F.folderDepth=A.Windows.Storage.Search.FolderDepth.deep,F.indexerOption=A.Windows.Storage.Search.IndexerOption.useIndexerWhenAvailable,this._query=R.createFileQueryWithOptions(F)}else this._query=x;if(V){if("number"==typeof V.mode&&(D=V.mode),"number"==typeof V.requestedThumbnailSize)N=Math.max(1,Math.min(V.requestedThumbnailSize,1024));else switch(D){case A.Windows.Storage.FileProperties.ThumbnailMode.picturesView:case A.Windows.Storage.FileProperties.ThumbnailMode.videosView:N=190;break;case A.Windows.Storage.FileProperties.ThumbnailMode.documentsView:case A.Windows.Storage.FileProperties.ThumbnailMode.listView:N=40;break;case A.Windows.Storage.FileProperties.ThumbnailMode.musicView:case A.Windows.Storage.FileProperties.ThumbnailMode.singleItem:N=256}"number"==typeof V.thumbnailOptions&&(U=V.thumbnailOptions),"boolean"==typeof V.waitForFileLoad&&(B=!V.waitForFileLoad)}this._loader=new A.Windows.Storage.BulkAccess.FileInformationFactory(this._query,D,N,U,B),this.compareByIdentity=!1,this.firstDataRequest=!0}),{setNotificationHandler:function(x){this._notificationHandler=x,this._query.addEventListener("contentschanged",(function(){x.invalidateAll()})),this._query.addEventListener("optionschanged",(function(){x.invalidateAll()}))},itemsFromEnd:function(x){var A=this;return this.getCount().then((function(V){return 0===V?B.wrapError(new D(F.FetchError.doesNotExist)):A.itemsFromIndex(V-1,Math.min(V-1,x-1),1)}))},itemsFromIndex:function(x,A,V){A+V>64&&(V=64-((A=Math.min(A,32))+1));var R=x-A,N=A+1+V,U=this;function listener(x){U._notificationHandler.changed(U._item(x.target))}return U.firstDataRequest&&(U.firstDataRequest=!1,N=Math.max(N,32)),this._loader.getItemsAsync(R,N).then((function(V){var W=V.size;if(W<=A)return B.wrapError(new D(F.FetchError.doesNotExist));var H=new Array(W),z=new Array(W);V.getMany(0,z);for(var G=0;G<W;G++)H[G]=U._item(z[G]),z[G].addEventListener("propertiesupdated",listener);var j={items:H,offset:A,absoluteIndex:x};return W<N&&(j.totalCount=R+W),j}))},itemsFromDescription:function(x,A,V){var R=this;return this._query.findStartIndexAsync(x).then((function(x){return R.itemsFromIndex(x,A,V)}))},getCount:function(){return this._query.getItemCountAsync()},itemSignature:function(x){return x.folderRelativeId},_item:function(x){return{key:x.path||x.folderRelativeId,data:x}}},{supportedForProcessing:!1});return R.Class.derive(W.VirtualizedDataSource,(function(A,V){this._baseDataSourceConstructor(new x(A,V))}),{},{loadThumbnail:function(x,R){var D,N,F=!1;return new B((function(W){var H=!!R,processThumbnail=function(z){if(z){var G=V.URL.createObjectURL(z,{oneTimeOnly:!0});N=N?N.then((function(A){return x.loadImage(G,A)})):x.loadImage(G,R).then((function(A){return x.isOnScreen().then((function(x){var V;return x&&H?V=U.fadeIn(A).then((function(){return A})):(A.style.opacity=1,V=B.wrap(A)),V}))})),z.type===A.Windows.Storage.FileProperties.ThumbnailType.icon||z.returnedSmallerCachedSize||(x.data.removeEventListener("thumbnailupdated",D),F=!1,N=N.then((function(x){D=null,N=null,W(x)})))}};D=function(x){F&&processThumbnail(x.target.thumbnail)},x.data.addEventListener("thumbnailupdated",D),F=!0,processThumbnail(x.data.thumbnail)}),(function(){x.data.removeEventListener("thumbnailupdated",D),F=!1,D=null,N&&(N.cancel(),N=null)}))},supportedForProcessing:!1})}))})})),R("WinJS/VirtualizedDataSource",["./VirtualizedDataSource/_VirtualizedDataSourceImpl","./VirtualizedDataSource/_GroupDataSource","./VirtualizedDataSource/_GroupedItemDataSource","./VirtualizedDataSource/_StorageDataSource"],(function(){})),R("WinJS/Vui",["require","exports","./Core/_Global","./Utilities/_ElementUtilities"],(function(x,A,V,R){var D,N="_winVuiData",U="win-vui-active",B="win-vui-disambiguation",F="active",W="disambiguation",H="inactive";!function(x){x.BUTTON={activate:function(x,A){var V={nodes:[],width:x.style.width,height:x.style.height},D=R._getComputedStyle(x);for(x.style.width=D.width,x.style.height=D.height;x.childNodes.length;)V.nodes.push(x.removeChild(x.childNodes[0]));x[N]=V,x.textContent=A},disambiguate:function(x,A){x.textContent=A},reactivate:function(x,A){x.textContent=A},deactivate:function(x){x.innerHTML="";var A=x[N];x.style.width=A.width,x.style.height=A.height,A.nodes.forEach((function(A){return x.appendChild(A)})),delete x[N]}}}(D||(D={})),V.document&&V.document.addEventListener("ListeningStateChanged",(function _handleListeningModeStateChanged(x){if(!x.defaultPrevented){var A=x.target,V=D[A.tagName];if(V)switch(x.state){case F:A[N]||R.hasClass(A,U)?(R.removeClass(A,B),V.reactivate(A,x.label)):(R.addClass(A,U),V.activate(A,x.label));break;case W:R.addClass(A,U),R.addClass(A,B),V.disambiguate(A,x.label);break;case H:R.removeClass(A,U),R.removeClass(A,B),V.deactivate(A)}}}))})),R("WinJS/_Accents",["require","exports","./Core/_Global","./Core/_WinRT","./Core/_Base","./Core/_BaseUtils","./Utilities/_ElementUtilities"],(function(x,A,V,R,D,N,U){var B="WinJSAccentsStyle",F="winjs-themedetection-tag",W="html.win-hoverable",H=".win-ui-light",z=".win-ui-dark",G=[".","#",":"],j=[],q=!1,Q=[],K=-1;!function(x){x[x.accent=0]="accent",x[x.listSelectRest=1]="listSelectRest",x[x.listSelectHover=2]="listSelectHover",x[x.listSelectPress=3]="listSelectPress",x[x._listSelectRestInverse=4]="_listSelectRestInverse",x[x._listSelectHoverInverse=5]="_listSelectHoverInverse",x[x._listSelectPressInverse=6]="_listSelectPressInverse"}(A.ColorTypes||(A.ColorTypes={}));var J=A.ColorTypes;function createAccentRule(x,A){Q.push({selector:x,props:A}),scheduleWriteRules()}function scheduleWriteRules(){0!==Q.length&&-1===K&&(K=N._setImmediate((function(){K=-1,cleanup();var x=q?H:z,A=W+" "+x,R=V.document.createElement("style");R.id=B,R.textContent=Q.map((function(V){var R="  "+V.props.map((function(x){return x.name+": "+j[x.value]+";"})).join("\n  "),D=V.selector.split(",").map((function(x){return function sanitizeSpaces(x){return x.replace(/  /g," ").replace(/  /g," ").trim()}(x)})),N=D.join(",\n")+" {\n"+R+"\n}";if(V.props.some((function(x){return 0!==x.value}))){var U="  "+V.props.map((function(x){return x.name+": "+j[x.value?x.value+3:x.value]+";"})).join("\n  "),B=[];D.forEach((function(V){if(-1!==V.indexOf(W)&&-1===V.indexOf(A)){B.push(V.replace(W,A));var R=V.replace(W,"").trim();-1!==G.indexOf(R[0])&&B.push(V.replace(W+" ",A))}else B.push(x+" "+V),-1!==G.indexOf(V[0])&&B.push(x+V);N+="\n"+B.join(",\n")+" {\n"+U+"\n}"}))}return N})).join("\n"),V.document.head.appendChild(R)})))}function cleanup(){var x=V.document.head.querySelector("#"+B);x&&x.parentNode.removeChild(x)}A.createAccentRule=createAccentRule;var X=V.document.createElement(F);V.document.head.appendChild(X);var Y=U._getComputedStyle(X);q="0"===Y.opacity,X.parentElement.removeChild(X),j.push("rgb(0, 120, 215)","rgba(0, 120, 215, "+(q?"0.6":"0.4")+")","rgba(0, 120, 215, "+(q?"0.8":"0.6")+")","rgba(0, 120, 215, "+(q?"0.9":"0.7")+")","rgba(0, 120, 215, "+(q?"0.4":"0.6")+")","rgba(0, 120, 215, "+(q?"0.6":"0.8")+")","rgba(0, 120, 215, "+(q?"0.7":"0.9")+")");var $={ColorTypes:J,createAccentRule:createAccentRule,_colors:j,_reset:function _reset(){Q.length=0,cleanup()},_isDarkTheme:q};D.Namespace.define("WinJS.UI._Accents",$)})),R("require-style",{load:function(x){throw new Error("Dynamic load not allowed: "+x)}}),R("require-style!less/styles-intrinsic",[],(function(){})),R("require-style!less/colors-intrinsic",[],(function(){})),R("WinJS/Controls/IntrinsicControls",["../Utilities/_Hoverable","../_Accents","require-style!less/styles-intrinsic","require-style!less/colors-intrinsic"],(function(x,A){"use strict";A.createAccentRule(".win-link,         .win-progress-bar,         .win-progress-ring,         .win-ring",[{name:"color",value:A.ColorTypes.accent}]),A.createAccentRule("::selection,         .win-button.win-button-primary,         .win-dropdown option:checked,         select[multiple].win-dropdown option:checked",[{name:"background-color",value:A.ColorTypes.accent}]),A.createAccentRule(".win-textbox:focus,         .win-textarea:focus,         .win-textbox:focus:hover,         .win-textarea:focus:hover",[{name:"border-color",value:A.ColorTypes.accent}]),A.createAccentRule(".win-textbox::-ms-clear:hover:not(:active),         .win-textbox::-ms-reveal:hover:not(:active)",[{name:"color",value:A.ColorTypes.accent}]),A.createAccentRule(".win-checkbox:checked::-ms-check,         .win-textbox::-ms-clear:active,         .win-textbox::-ms-reveal:active",[{name:"background-color",value:A.ColorTypes.accent}]),A.createAccentRule(".win-progress-bar::-webkit-progress-value,         .win-progress-ring::-webkit-progress-value,         .win-ring::-webkit-progress-value",[{name:"background-color",value:A.ColorTypes.accent}]),A.createAccentRule(".win-progress-bar:not(:indeterminate)::-moz-progress-bar,         .win-progress-ring:not(:indeterminate)::-moz-progress-bar,         .win-ring:not(:indeterminate)::-moz-progress-bar",[{name:"background-color",value:A.ColorTypes.accent}]),A.createAccentRule(".win-checkbox:indeterminate::-ms-check,         .win-checkbox:hover:indeterminate::-ms-check,         .win-radio:checked::-ms-check",[{name:"border-color",value:A.ColorTypes.accent}]),A.createAccentRule(".win-slider::-ms-thumb,         .win-slider::-ms-fill-lower",[{name:"background",value:A.ColorTypes.accent}]),A.createAccentRule(".win-slider::-webkit-slider-thumb",[{name:"background",value:A.ColorTypes.accent}]),A.createAccentRule(".win-slider::-moz-range-thumb",[{name:"background",value:A.ColorTypes.accent}])})),R("WinJS/Controls/ElementResizeInstrument/_ElementResizeInstrument",["require","exports","../../Core/_BaseUtils","../../Core/_Base","../../Core/_Global","../../Core/_Log","../../Core/_ErrorFromName","../../Core/_Events","../../Promise","../../Utilities/_ElementUtilities"],(function(x,A,V,R,D,N,U,B,F,W){"use strict";var H={resize:"resize",_ready:"_ready"},z="msHighContrastAdjust"in document.documentElement.style,G=function(){function _ElementResizeInstrument(){var x=this;this._disposed=!1,this._elementLoaded=!1,this._running=!1,this._objectWindowResizeHandlerBound=this._objectWindowResizeHandler.bind(this);var A=D.document.createElement("OBJECT");A.setAttribute("style","display: block;position:absolute;top: 0;left: 0;height: 100%;width: 100%;overflow: hidden;pointer-events: none;z-index: -1;"),z?A.style.visibility="hidden":A.data="about:blank",A.type="text/html",A.winControl=this,W.addClass(A,"win-resizeinstrument"),this._element=A,this._elementLoadPromise=new F((function(V){A.onload=function(){x._disposed||(x._elementLoaded=!0,x._objWindow.addEventListener("resize",x._objectWindowResizeHandlerBound),V())}}))}return Object.defineProperty(_ElementResizeInstrument.prototype,"element",{get:function(){return this._element},enumerable:!0,configurable:!0}),Object.defineProperty(_ElementResizeInstrument.prototype,"_objWindow",{get:function(){return this._elementLoaded&&this._element.contentDocument&&this._element.contentDocument.defaultView||null},enumerable:!0,configurable:!0}),_ElementResizeInstrument.prototype.addedToDom=function(){var x=this;if(!this._disposed){var A=this.element;if(!D.document.body.contains(A))throw new U("WinJS.UI._ElementResizeInstrument","ElementResizeInstrument initialization failed");N.log&&"static"===W._getComputedStyle(A.parentElement).position&&N.log("_ElementResizeInstrument can only detect size changes that are made to it's nearest positioned ancestor. Its parent element is not currently positioned."),!this._elementLoaded&&z&&(A.data="about:blank"),this._elementLoadPromise.then((function(){x._running=!0,x.dispatchEvent(H._ready,null);var A=F.timeout(50),handleInitialResize=function(){x.removeEventListener(H.resize,handleInitialResize),A.cancel()};x.addEventListener(H.resize,handleInitialResize),A.then((function(){x._objectWindowResizeHandler()}))}))}},_ElementResizeInstrument.prototype.dispose=function(){this._disposed||(this._disposed=!0,this._elementLoadPromise.cancel(),this._objWindow&&this._objWindow.removeEventListener.call(this._objWindow,"resize",this._objectWindowResizeHandlerBound),this._running=!1)},_ElementResizeInstrument.prototype.addEventListener=function(x,A,V){},_ElementResizeInstrument.prototype.dispatchEvent=function(x,A){return!1},_ElementResizeInstrument.prototype.removeEventListener=function(x,A,V){},_ElementResizeInstrument.prototype._objectWindowResizeHandler=function(){var x=this;this._running&&this._batchResizeEvents((function(){x._fireResizeEvent()}))},_ElementResizeInstrument.prototype._batchResizeEvents=function(x){this._pendingResizeAnimationFrameId&&V._cancelAnimationFrame(this._pendingResizeAnimationFrameId),this._pendingResizeAnimationFrameId=V._requestAnimationFrame((function(){x()}))},_ElementResizeInstrument.prototype._fireResizeEvent=function(){this._disposed||this.dispatchEvent(H.resize,null)},_ElementResizeInstrument.EventNames=H,_ElementResizeInstrument}();A._ElementResizeInstrument=G,R.Class.mix(G,B.eventMixin)})),R("WinJS/Controls/ElementResizeInstrument",["require","exports"],(function(x,A){var V=null;return Object.create({},{_ElementResizeInstrument:{get:function(){return function getModule(){return V||x(["./ElementResizeInstrument/_ElementResizeInstrument"],(function(x){V=x})),V._ElementResizeInstrument}()}}})})),R("WinJS/Controls/ItemContainer/_Constants",["exports","../../Core/_Base"],(function constantsInit(x,A){"use strict";var V={_listViewClass:"win-listview",_viewportClass:"win-viewport",_rtlListViewClass:"win-rtl",_horizontalClass:"win-horizontal",_verticalClass:"win-vertical",_scrollableClass:"win-surface",_itemsContainerClass:"win-itemscontainer",_listHeaderContainerClass:"win-headercontainer",_listFooterContainerClass:"win-footercontainer",_padderClass:"win-itemscontainer-padder",_proxyClass:"_win-proxy",_itemClass:"win-item",_itemBoxClass:"win-itembox",_itemsBlockClass:"win-itemsblock",_containerClass:"win-container",_containerEvenClass:"win-container-even",_containerOddClass:"win-container-odd",_backdropClass:"win-backdrop",_footprintClass:"win-footprint",_groupsClass:"win-groups",_selectedClass:"win-selected",_selectionBorderClass:"win-selectionborder",_selectionBackgroundClass:"win-selectionbackground",_selectionCheckmarkClass:"win-selectioncheckmark",_selectionCheckmarkBackgroundClass:"win-selectioncheckmarkbackground",_pressedClass:"win-pressed",_headerClass:"win-groupheader",_headerContainerClass:"win-groupheadercontainer",_groupLeaderClass:"win-groupleader",_progressClass:"win-progress",_revealedClass:"win-revealed",_itemFocusClass:"win-focused",_itemFocusOutlineClass:"win-focusedoutline",_zoomingXClass:"win-zooming-x",_zoomingYClass:"win-zooming-y",_listLayoutClass:"win-listlayout",_gridLayoutClass:"win-gridlayout",_headerPositionTopClass:"win-headerpositiontop",_headerPositionLeftClass:"win-headerpositionleft",_structuralNodesClass:"win-structuralnodes",_singleItemsBlockClass:"win-single-itemsblock",_uniformGridLayoutClass:"win-uniformgridlayout",_uniformListLayoutClass:"win-uniformlistlayout",_cellSpanningGridLayoutClass:"win-cellspanninggridlayout",_laidOutClass:"win-laidout",_nonDraggableClass:"win-nondraggable",_nonSelectableClass:"win-nonselectable",_dragOverClass:"win-dragover",_dragSourceClass:"win-dragsource",_clipClass:"win-clip",_selectionModeClass:"win-selectionmode",_noCSSGrid:"win-nocssgrid",_hidingSelectionMode:"win-hidingselectionmode",_hidingSelectionModeAnimationTimeout:250,_INVALID_INDEX:-1,_UNINITIALIZED:-1,_LEFT_MSPOINTER_BUTTON:0,_RIGHT_MSPOINTER_BUTTON:2,_TAP_END_THRESHOLD:10,_DEFAULT_PAGES_TO_LOAD:5,_DEFAULT_PAGE_LOAD_THRESHOLD:2,_MIN_AUTOSCROLL_RATE:150,_MAX_AUTOSCROLL_RATE:1500,_AUTOSCROLL_THRESHOLD:100,_AUTOSCROLL_DELAY:50,_DEFERRED_ACTION:250,_DEFERRED_SCROLL_END:250,_SELECTION_CHECKMARK:"",_LISTVIEW_PROGRESS_DELAY:2e3,_ScrollToPriority:{uninitialized:0,low:1,medium:2,high:3},_ViewChange:{rebuild:0,remeasure:1,relayout:2,realize:3}};A.Namespace._moduleDefine(x,"WinJS.UI",V)})),R("WinJS/Controls/ItemContainer/_ItemEventsHandler",["exports","../../Core/_Global","../../Core/_WinRT","../../Core/_Base","../../Core/_BaseUtils","../../Core/_WriteProfilerMark","../../Animations","../../Animations/_TransitionAnimation","../../Promise","../../Utilities/_ElementUtilities","../../Utilities/_UI","./_Constants"],(function itemEventsHandlerInit(x,A,V,R,D,N,U,B,F,W,H,z){"use strict";var G=D._browserStyleEquivalents.transform;R.Namespace._moduleDefine(x,"WinJS.UI",{_ItemEventsHandler:R.Namespace._lazy((function(){var x=W._MSPointerEvent.MSPOINTER_TYPE_TOUCH||"touch";function createNodeWithClass(x,V){var R=A.document.createElement("div");return R.className=x,V||R.setAttribute("aria-hidden",!0),R}var N=R.Class.define((function ItemEventsHandler_ctor(x){this._site=x,this._work=[],this._animations={}}),{dispose:function(){this._disposed||(this._disposed=!0,W._removeEventListener(A,"pointerup",this._resetPointerDownStateBound),W._removeEventListener(A,"pointercancel",this._resetPointerDownStateBound))},onPointerDown:function ItemEventsHandler_onPointerDown(R){var N,U,B=this._site,F=R.pointerType===x;if(B.pressedElement=R.target,V.Windows.UI.Input.PointerPoint){var G=this._getCurrentPoint(R).properties;N=F||G.isInverted||G.isEraser||G.isMiddleButtonPressed?U=!1:!(U=G.isRightButtonPressed)&&G.isLeftButtonPressed}else N=R.button===z._LEFT_MSPOINTER_BUTTON,U=R.button===z._RIGHT_MSPOINTER_BUTTON;this._DragStartBound=this._DragStartBound||this.onDragStart.bind(this),this._PointerEnterBound=this._PointerEnterBound||this.onPointerEnter.bind(this),this._PointerLeaveBound=this._PointerLeaveBound||this.onPointerLeave.bind(this);var j=this._isInteractive(R.target),q=B.indexForItemElement(R.target),Q=B.indexForHeaderElement(R.target),K=!j&&q!==z._INVALID_INDEX;if((F||N)&&this._site.pressedEntity.index===z._INVALID_INDEX&&!j&&(Q===z._INVALID_INDEX?this._site.pressedEntity={type:H.ObjectType.item,index:q}:this._site.pressedEntity={type:H.ObjectType.groupHeader,index:Q},this._site.pressedEntity.index!==z._INVALID_INDEX)){this._site.pressedPosition=W._getCursorPos(R);var J=B.verifySelectionAllowed(this._site.pressedEntity);this._canSelect=J.canSelect,this._canTapSelect=J.canTapSelect,this._site.pressedEntity.type===H.ObjectType.item?(this._site.pressedItemBox=B.itemBoxAtIndex(this._site.pressedEntity.index),this._site.pressedContainer=B.containerAtIndex(this._site.pressedEntity.index),this._site.animatedElement=this._site.pressedContainer,this._site.pressedHeader=null,this._togglePressed(!0,R),this._site.pressedContainer.addEventListener("dragstart",this._DragStartBound),F||(W._addEventListener(this._site.pressedContainer,"pointerenter",this._PointerEnterBound,!1),W._addEventListener(this._site.pressedContainer,"pointerleave",this._PointerLeaveBound,!1))):(this._site.pressedHeader=this._site.headerFromElement(R.target),D.isPhone?(this._site.animatedElement=this._site.pressedHeader,this._togglePressed(!0,R)):(this._site.pressedItemBox=null,this._site.pressedContainer=null,this._site.animatedElement=null)),this._resetPointerDownStateBound||(this._resetPointerDownStateBound=this._resetPointerDownStateForPointerId.bind(this)),F||(W._addEventListener(A,"pointerup",this._resetPointerDownStateBound,!1),W._addEventListener(A,"pointercancel",this._resetPointerDownStateBound,!1)),this._pointerId=R.pointerId,this._pointerRightButton=U}if(K&&F)try{W._setPointerCapture(B.canvasProxy,R.pointerId)}catch(x){return}this._site.pressedEntity.type===H.ObjectType.item&&this._selectionAllowed()&&this._multiSelection()&&this._site.pressedEntity.index!==z._INVALID_INDEX&&B.selection._getFocused().index!==z._INVALID_INDEX&&B.selection._pivot===z._INVALID_INDEX&&(B.selection._pivot=B.selection._getFocused().index)},onPointerEnter:function ItemEventsHandler_onPointerEnter(x){this._site.pressedContainer&&this._pointerId===x.pointerId&&this._togglePressed(!0,x)},onPointerLeave:function ItemEventsHandler_onPointerLeave(x){this._site.pressedContainer&&this._pointerId===x.pointerId&&this._togglePressed(!1,x)},onDragStart:function ItemEventsHandler_onDragStart(){this._resetPressedContainer()},_resetPressedContainer:function ItemEventsHandler_resetPressedContainer(){(this._site.pressedContainer||this._site.pressedHeader)&&this._site.animatedElement&&(this._togglePressed(!1),this._site.pressedContainer&&(this._site.pressedContainer.style[G.scriptName]="",this._site.pressedContainer.removeEventListener("dragstart",this._DragStartBound),W._removeEventListener(this._site.pressedContainer,"pointerenter",this._PointerEnterBound,!1),W._removeEventListener(this._site.pressedContainer,"pointerleave",this._PointerLeaveBound,!1)))},onClick:function ItemEventsHandler_onClick(x){if(!this._skipClick){var A={type:H.ObjectType.item,index:this._site.indexForItemElement(x.target)};A.index===z._INVALID_INDEX&&(A.index=this._site.indexForHeaderElement(x.target),A.index!==z._INVALID_INDEX&&(A.type=H.ObjectType.groupHeader)),A.index!==z._INVALID_INDEX&&(W.hasClass(x.target,this._site.accessibleItemClass)||W.hasClass(x.target,z._headerClass))&&(this._site.verifySelectionAllowed(A).canTapSelect&&this.handleTap(A),this._site.fireInvokeEvent(A,x.target))}},onPointerUp:function ItemEventsHandler_onPointerUp(A){var V=this._site;this._skipClick=!0;var R=this;D._yieldForEvents((function(){R._skipClick=!1}));try{W._releasePointerCapture(V.canvasProxy,A.pointerId)}catch(x){}var N=A.pointerType===x,U=this._releasedElement(A),B=V.indexForItemElement(U),F=U&&W.hasClass(U,z._headerContainerClass)?V.indexForHeaderElement(V.pressedHeader):V.indexForHeaderElement(U);if(this._pointerId===A.pointerId){var G;if(G=F===z._INVALID_INDEX?{type:H.ObjectType.item,index:B}:{type:H.ObjectType.groupHeader,index:F},this._resetPressedContainer(),this._site.pressedEntity.type===H.ObjectType.item&&G.type===H.ObjectType.item&&this._site.pressedContainer&&this._site.pressedEntity.index===G.index)if(A.shiftKey||(V.selection._pivot=z._INVALID_INDEX),A.shiftKey){if(this._selectionAllowed()&&this._multiSelection()&&V.selection._pivot!==z._INVALID_INDEX){var j=Math.min(this._site.pressedEntity.index,V.selection._pivot),q=Math.max(this._site.pressedEntity.index,V.selection._pivot),Q=this._pointerRightButton||A.ctrlKey||V.tapBehavior===H.TapBehavior.toggleSelect;V.selectRange(j,q,Q)}}else A.ctrlKey&&this.toggleSelectionIfAllowed(this._site.pressedEntity.index);if(this._site.pressedHeader||this._site.pressedContainer){var K=W._getCursorPos(A),J=Math.abs(K.left-this._site.pressedPosition.left)<=z._TAP_END_THRESHOLD&&Math.abs(K.top-this._site.pressedPosition.top)<=z._TAP_END_THRESHOLD;this._pointerRightButton||A.ctrlKey||A.shiftKey||!(N&&J||!N&&this._site.pressedEntity.index===G.index&&this._site.pressedEntity.type===G.type)||(G.type===H.ObjectType.groupHeader?(this._site.pressedHeader=V.headerAtIndex(G.index),this._site.pressedItemBox=null,this._site.pressedContainer=null):(this._site.pressedItemBox=V.itemBoxAtIndex(G.index),this._site.pressedContainer=V.containerAtIndex(G.index),this._site.pressedHeader=null),this._canTapSelect&&this.handleTap(this._site.pressedEntity),this._site.fireInvokeEvent(this._site.pressedEntity,this._site.pressedItemBox||this._site.pressedHeader))}this._site.pressedEntity.index!==z._INVALID_INDEX&&V.changeFocus(this._site.pressedEntity,!0,!1,!0),this.resetPointerDownState()}},onPointerCancel:function ItemEventsHandler_onPointerCancel(x){this._pointerId===x.pointerId&&this.resetPointerDownState()},onLostPointerCapture:function ItemEventsHandler_onLostPointerCapture(x){this._pointerId===x.pointerId&&this.resetPointerDownState()},onContextMenu:function ItemEventsHandler_onContextMenu(x){this._shouldSuppressContextMenu(x.target)&&x.preventDefault()},onMSHoldVisual:function ItemEventsHandler_onMSHoldVisual(x){this._shouldSuppressContextMenu(x.target)&&x.preventDefault()},onDataChanged:function ItemEventsHandler_onDataChanged(){this.resetPointerDownState()},toggleSelectionIfAllowed:function ItemEventsHandler_toggleSelectionIfAllowed(x){this._selectionAllowed(x)&&this._toggleItemSelection(x)},handleTap:function ItemEventsHandler_handleTap(x){if(x.type!==H.ObjectType.groupHeader){var A=this._site,V=A.selection;this._selectionAllowed(x.index)&&this._selectOnTap()&&(A.tapBehavior===H.TapBehavior.toggleSelect?this._toggleItemSelection(x.index):A.selectionMode!==H.SelectionMode.multi&&V._isIncluded(x.index)||V.set(x.index))}},_toggleItemSelection:function ItemEventsHandler_toggleItemSelection(x){var A=this._site,V=A.selection,R=V._isIncluded(x);A.selectionMode===H.SelectionMode.single?R?V.clear():V.set(x):R?V.remove(x):V.add(x)},_getCurrentPoint:function ItemEventsHandler_getCurrentPoint(x){return V.Windows.UI.Input.PointerPoint.getCurrentPoint(x.pointerId)},_containedInElementWithClass:function ItemEventsHandler_containedInElementWithClass(x,A){if(x.parentNode)for(var V=x.parentNode.querySelectorAll("."+A+", ."+A+" *"),R=0,D=V.length;R<D;R++)if(V[R]===x)return!0;return!1},_isSelected:function ItemEventsHandler_isSelected(x){return this._site.selection._isIncluded(x)},_isInteractive:function ItemEventsHandler_isInteractive(x){return this._containedInElementWithClass(x,"win-interactive")},_shouldSuppressContextMenu:function ItemEventsHandler_shouldSuppressContextMenu(x){var A=this._site.containerFromElement(x);return this._selectionAllowed()&&A&&!this._isInteractive(x)},_togglePressed:function ItemEventsHandler_togglePressed(x,A){var V=this._site.pressedEntity.type===H.ObjectType.groupHeader;!V&&W.hasClass(this._site.pressedItemBox,z._nonSelectableClass)||this._staticMode(V)||(x?W.addClass(this._site.animatedElement,z._pressedClass):W.removeClass(this._site.animatedElement,z._pressedClass))},_resetPointerDownStateForPointerId:function ItemEventsHandler_resetPointerDownState(x){this._pointerId===x.pointerId&&this.resetPointerDownState()},resetPointerDownState:function ItemEventsHandler_resetPointerDownState(){this._site.pressedElement=null,this._resetPointerDownStateBound&&(W._removeEventListener(A,"pointerup",this._resetPointerDownStateBound),W._removeEventListener(A,"pointercancel",this._resetPointerDownStateBound)),this._resetPressedContainer(),this._site.pressedContainer=null,this._site.animatedElement=null,this._site.pressedHeader=null,this._site.pressedItemBox=null,this._site.pressedEntity={type:H.ObjectType.item,index:z._INVALID_INDEX},this._pointerId=null},_releasedElement:function ItemEventsHandler_releasedElement(x){return A.document.elementFromPoint(x.clientX,x.clientY)},_applyUIInBatches:function ItemEventsHandler_applyUIInBatches(x){var A=this;this._work.push(x),this._paintedThisFrame||function applyUI(){A._work.length>0?(A._flushUIBatches(),A._paintedThisFrame=D._requestAnimationFrame(applyUI.bind(A))):A._paintedThisFrame=null}()},_flushUIBatches:function ItemEventsHandler_flushUIBatches(){if(this._work.length>0){var x=this._work;this._work=[];for(var A=0;A<x.length;A++)x[A]()}},_selectionAllowed:function ItemEventsHandler_selectionAllowed(x){var A=void 0!==x?this._site.itemAtIndex(x):null;return!(A&&W.hasClass(A,z._nonSelectableClass))&&this._site.selectionMode!==H.SelectionMode.none},_multiSelection:function ItemEventsHandler_multiSelection(){return this._site.selectionMode===H.SelectionMode.multi},_selectOnTap:function ItemEventsHandler_selectOnTap(){return this._site.tapBehavior===H.TapBehavior.toggleSelect||this._site.tapBehavior===H.TapBehavior.directSelect},_staticMode:function ItemEventsHandler_staticMode(x){return x?this._site.headerTapBehavior===H.GroupHeaderTapBehavior.none:this._site.tapBehavior===H.TapBehavior.none&&this._site.selectionMode===H.SelectionMode.none}},{setAriaSelected:function ItemEventsHandler_setAriaSelected(x,A){A!==("true"===x.getAttribute("aria-selected"))&&x.setAttribute("aria-selected",A)},renderSelection:function ItemEventsHandler_renderSelection(x,A,V,R,D){if(!N._selectionTemplate){N._selectionTemplate=[],N._selectionTemplate.push(createNodeWithClass(z._selectionBackgroundClass)),N._selectionTemplate.push(createNodeWithClass(z._selectionBorderClass)),N._selectionTemplate.push(createNodeWithClass(z._selectionCheckmarkBackgroundClass));var U=createNodeWithClass(z._selectionCheckmarkClass);U.textContent=z._SELECTION_CHECKMARK,N._selectionTemplate.push(U)}if(V!==W._isSelectionRendered(x)){if(V){x.insertBefore(N._selectionTemplate[0].cloneNode(!0),x.firstElementChild);for(var B=1,F=N._selectionTemplate.length;B<F;B++)x.appendChild(N._selectionTemplate[B].cloneNode(!0))}else{var H=x.querySelectorAll(W._selectionPartsSelector);for(B=0,F=H.length;B<F;B++)x.removeChild(H[B])}W[V?"addClass":"removeClass"](x,z._selectedClass),D&&W[V?"addClass":"removeClass"](D,z._selectedClass)}R&&N.setAriaSelected(A,V)}});return N}))})})),R("WinJS/Controls/ListView/_SelectionManager",["exports","../../Core/_Global","../../Core/_Base","../../Promise","../../_Signal","../../Utilities/_UI","../ItemContainer/_Constants"],(function selectionManagerInit(x,A,V,R,D,N,U){"use strict";V.Namespace._moduleDefine(x,"WinJS.UI",{_ItemSet:V.Namespace._lazy((function(){var A=V.Class.define((function _ItemSet_ctor(x,A,V){this._listView=x,this._ranges=A,this._itemsCount=V}));return A.prototype={getRanges:function(){for(var x=[],A=0,V=this._ranges.length;A<V;A++){var R=this._ranges[A];x.push({firstIndex:R.firstIndex,lastIndex:R.lastIndex,firstKey:R.firstKey,lastKey:R.lastKey})}return x},getItems:function(){return x.getItemsFromRanges(this._listView._itemsManager.dataSource,this._ranges)},isEverything:function(){return this.count()===this._itemsCount},count:function(){for(var x=0,A=0,V=this._ranges.length;A<V;A++){var R=this._ranges[A];x+=R.lastIndex-R.firstIndex+1}return x},getIndices:function(){for(var x=[],A=0,V=this._ranges.length;A<V;A++)for(var R=this._ranges[A],D=R.firstIndex;D<=R.lastIndex;D++)x.push(D);return x}},A})),getItemsFromRanges:function(x,A){var V=x.createListBinding(),D=[];return function getIndices(){for(var x=[],V=0,D=A.length;V<D;V++)for(var N=A[V],U=N.firstIndex;U<=N.lastIndex;U++)x.push(U);return R.wrap(x)}().then((function(x){for(var A=0;A<x.length;A++)D.push(V.fromIndex(x[A]));return R.join(D).then((function(x){return V.release(),x}))}))},_Selection:V.Namespace._lazy((function(){function isEverythingRange(x){return x&&0===x.firstIndex&&x.lastIndex===Number.MAX_VALUE}return V.Class.derive(x._ItemSet,(function(x,A){this._listView=x,this._itemsCount=-1,this._ranges=[],A&&this.set(A)}),{clear:function(){return this._releaseRanges(this._ranges),this._ranges=[],R.wrap()},set:function(x){if(isEverythingRange(x))return this.selectAll();this._releaseRanges(this._ranges),this._ranges=[];var A=this;return this._execute("_set",x).then((function(){return A._ranges.sort((function(x,A){return x.firstIndex-A.firstIndex})),A._ensureKeys()})).then((function(){return A._ensureCount()}))},add:function(x){if(isEverythingRange(x))return this.selectAll();var A=this;return this._execute("_add",x).then((function(){return A._ensureKeys()})).then((function(){return A._ensureCount()}))},remove:function(x){var A=this;return this._execute("_remove",x).then((function(){return A._ensureKeys()}))},selectAll:function(){var x=this;return x._ensureCount().then((function(){if(x._itemsCount){var A={firstIndex:0,lastIndex:x._itemsCount-1};return x._retainRange(A),x._releaseRanges(x._ranges),x._ranges=[A],x._ensureKeys()}}))},_execute:function(x,A){var V=this,D=!!V._getListBinding().fromKey,N=Array.isArray(A)?A:[A],U=[R.wrap()];function toRange(x,A,V){var R={};return R["first"+x]=A,R["last"+x]=V,R}function handleKeys(A){var D=V._getListBinding(),N=R.join([D.fromKey(A.firstKey),D.fromKey(A.lastKey)]).then((function(R){return R[0]&&R[1]&&(A.firstIndex=R[0].index,A.lastIndex=R[1].index,V[x](A)),A}));U.push(N)}for(var B=0,F=N.length;B<F;B++){var W=N[B];"number"==typeof W?this[x](toRange("Index",W,W)):W&&(D&&void 0!==W.key?handleKeys(toRange("Key",W.key,W.key)):D&&void 0!==W.firstKey&&void 0!==W.lastKey?handleKeys(toRange("Key",W.firstKey,W.lastKey)):void 0!==W.index&&"number"==typeof W.index?this[x](toRange("Index",W.index,W.index)):void 0!==W.firstIndex&&void 0!==W.lastIndex&&"number"==typeof W.firstIndex&&"number"==typeof W.lastIndex&&this[x](toRange("Index",W.firstIndex,W.lastIndex)))}return R.join(U)},_set:function(x){this._retainRange(x),this._ranges.push(x)},_add:function(x){for(var A,V,R=this,D=null,merge=function(x,A){A.lastIndex>x.lastIndex&&(x.lastIndex=A.lastIndex,x.lastKey=A.lastKey,x.lastPromise&&x.lastPromise.release(),x.lastPromise=R._getListBinding().fromIndex(x.lastIndex).retain())},N=0,U=this._ranges.length;N<U;N++){if(A=this._ranges[N],x.firstIndex<A.firstIndex){D&&x.firstIndex<D.lastIndex+1?(V=N-1,merge(D,x)):(this._insertRange(N,x),V=N);break}if(x.firstIndex===A.firstIndex){merge(A,x),V=N;break}D=A}if(void 0===V){var B=this._ranges.length?this._ranges[this._ranges.length-1]:null;B&&x.firstIndex<B.lastIndex+1?merge(B,x):(this._retainRange(x),this._ranges.push(x))}else{for(D=null,N=V+1,U=this._ranges.length;N<U;N++){if(A=this._ranges[N],x.lastIndex<A.firstIndex){D&&D.lastIndex>x.lastIndex&&merge(this._ranges[V],D),this._removeRanges(V+1,N-V-1);break}if(x.lastIndex===A.firstIndex){merge(this._ranges[V],A),this._removeRanges(V+1,N-V);break}D=A}N>=U&&(merge(this._ranges[V],this._ranges[U-1]),this._removeRanges(V+1,U-V-1))}},_remove:function(x){var A=this;function retainPromise(x){return A._getListBinding().fromIndex(x).retain()}for(var V=[],R=0,D=this._ranges.length;R<D;R++){var N=this._ranges[R];N.lastIndex<x.firstIndex||N.firstIndex>x.lastIndex?V.push(N):N.firstIndex<x.firstIndex&&N.lastIndex>=x.firstIndex&&N.lastIndex<=x.lastIndex?(V.push({firstIndex:N.firstIndex,firstKey:N.firstKey,firstPromise:N.firstPromise,lastIndex:x.firstIndex-1,lastPromise:retainPromise(x.firstIndex-1)}),N.lastPromise.release()):N.lastIndex>x.lastIndex&&N.firstIndex>=x.firstIndex&&N.firstIndex<=x.lastIndex?(V.push({firstIndex:x.lastIndex+1,firstPromise:retainPromise(x.lastIndex+1),lastIndex:N.lastIndex,lastKey:N.lastKey,lastPromise:N.lastPromise}),N.firstPromise.release()):N.firstIndex<x.firstIndex&&N.lastIndex>x.lastIndex?(V.push({firstIndex:N.firstIndex,firstKey:N.firstKey,firstPromise:N.firstPromise,lastIndex:x.firstIndex-1,lastPromise:retainPromise(x.firstIndex-1)}),V.push({firstIndex:x.lastIndex+1,firstPromise:retainPromise(x.lastIndex+1),lastIndex:N.lastIndex,lastKey:N.lastKey,lastPromise:N.lastPromise})):(N.firstPromise.release(),N.lastPromise.release())}this._ranges=V},_ensureKeys:function(){for(var x=[R.wrap()],A=this,ensureKey=function(x,A){var V=x+"Key";if(A[V])return R.wrap();var D=A[x+"Promise"];return D.then((function(x){x&&(A[V]=x.key)})),D},V=0,D=this._ranges.length;V<D;V++){var N=this._ranges[V];x.push(ensureKey("first",N)),x.push(ensureKey("last",N))}return R.join(x).then((function(){A._ranges=A._ranges.filter((function(x){return x.firstKey&&x.lastKey}))})),R.join(x)},_mergeRanges:function(x,A){x.lastIndex=A.lastIndex,x.lastKey=A.lastKey},_isIncluded:function(x){if(this.isEverything())return!0;for(var A=0,V=this._ranges.length;A<V;A++){var R=this._ranges[A];if(R.firstIndex<=x&&x<=R.lastIndex)return!0}return!1},_ensureCount:function(){var x=this;return this._listView._itemsCount().then((function(A){x._itemsCount=A}))},_insertRange:function(x,A){this._retainRange(A),this._ranges.splice(x,0,A)},_removeRanges:function(x,A){for(var V=0;V<A;V++)this._releaseRange(this._ranges[x+V]);this._ranges.splice(x,A)},_retainRange:function(x){x.firstPromise||(x.firstPromise=this._getListBinding().fromIndex(x.firstIndex).retain()),x.lastPromise||(x.lastPromise=this._getListBinding().fromIndex(x.lastIndex).retain())},_retainRanges:function(){for(var x=0,A=this._ranges.length;x<A;x++)this._retainRange(this._ranges[x])},_releaseRange:function(x){x.firstPromise.release(),x.lastPromise.release()},_releaseRanges:function(x){for(var A=0,V=x.length;A<V;++A)this._releaseRange(x[A])},_getListBinding:function(){return this._listView._itemsManager._listBinding}},{supportedForProcessing:!1})})),_SelectionManager:V.Namespace._lazy((function(){var _SelectionManager=function(A){this._listView=A,this._selected=new x._Selection(this._listView),this._pivot=U._INVALID_INDEX,this._focused={type:N.ObjectType.item,index:0},this._pendingChange=R.wrap()};return _SelectionManager.prototype={count:function(){return this._selected.count()},getIndices:function(){return this._selected.getIndices()},getItems:function(){return this._selected.getItems()},getRanges:function(){return this._selected.getRanges()},isEverything:function(){return this._selected.isEverything()},set:function(A){var V=this,N=new D;return this._synchronize(N).then((function(){var D=new x._Selection(V._listView);return D.set(A).then((function(){V._set(D),N.complete()}),(function(x){return D.clear(),N.complete(),R.wrapError(x)}))}))},clear:function(){var A=this,V=new D;return this._synchronize(V).then((function(){var D=new x._Selection(A._listView);return D.clear().then((function(){A._set(D),V.complete()}),(function(x){return D.clear(),V.complete(),R.wrapError(x)}))}))},add:function(x){var A=this,V=new D;return this._synchronize(V).then((function(){var D=A._cloneSelection();return D.add(x).then((function(){A._set(D),V.complete()}),(function(x){return D.clear(),V.complete(),R.wrapError(x)}))}))},remove:function(x){var A=this,V=new D;return this._synchronize(V).then((function(){var D=A._cloneSelection();return D.remove(x).then((function(){A._set(D),V.complete()}),(function(x){return D.clear(),V.complete(),R.wrapError(x)}))}))},selectAll:function(){var A=this,V=new D;return this._synchronize(V).then((function(){var D=new x._Selection(A._listView);return D.selectAll().then((function(){A._set(D),V.complete()}),(function(x){return D.clear(),V.complete(),R.wrapError(x)}))}))},_synchronize:function(x){var A=this;return this._listView._versionManager.unlocked.then((function(){var V=A._pendingChange;return A._pendingChange=R.join([V,x.promise]).then((function(){})),V}))},_reset:function(){this._pivot=U._INVALID_INDEX,this._setFocused({type:N.ObjectType.item,index:0},this._keyboardFocused()),this._pendingChange.cancel(),this._pendingChange=R.wrap(),this._selected.clear(),this._selected=new x._Selection(this._listView)},_dispose:function(){this._selected.clear(),this._selected=null,this._listView=null},_set:function(x){var A=this;return this._fireSelectionChanging(x).then((function(V){return V?(A._selected.clear(),A._selected=x,A._listView._updateSelection(),A._fireSelectionChanged()):x.clear(),V}))},_fireSelectionChanging:function(x){var V=A.document.createEvent("CustomEvent"),D=R.wrap();V.initCustomEvent("selectionchanging",!0,!0,{newSelection:x,preventTapBehavior:function(){},setPromise:function(x){D=x}});var N=this._listView._element.dispatchEvent(V);return D.then((function(){return N}))},_fireSelectionChanged:function(){var x=A.document.createEvent("CustomEvent");x.initCustomEvent("selectionchanged",!0,!1,null),this._listView._element.dispatchEvent(x)},_getFocused:function(){return{type:this._focused.type,index:this._focused.index}},_setFocused:function(x,A){this._focused={type:x.type,index:x.index},this._focusedByKeyboard=A},_keyboardFocused:function(){return this._focusedByKeyboard},_updateCount:function(x){this._selected._itemsCount=x},_isIncluded:function(x){return this._selected._isIncluded(x)},_cloneSelection:function(){var A=new x._Selection(this._listView);return A._ranges=this._selected.getRanges(),A._itemsCount=this._selected._itemsCount,A._retainRanges(),A}},_SelectionManager.supportedForProcessing=!1,_SelectionManager}))})})),R("WinJS/Controls/ListView/_BrowseMode",["exports","../../Core/_Global","../../Core/_Base","../../Core/_BaseUtils","../../Animations","../../Promise","../../Utilities/_ElementUtilities","../../Utilities/_UI","../ItemContainer/_Constants","../ItemContainer/_ItemEventsHandler","./_SelectionManager"],(function browseModeInit(x,A,V,R,D,N,U,B,F,W,H){"use strict";var z=R._browserStyleEquivalents.transform.scriptName;V.Namespace._moduleDefine(x,"WinJS.UI",{_SelectionMode:V.Namespace._lazy((function(){function clampToRange(x,A,V){return Math.max(x,Math.min(A,V))}function dispatchKeyboardNavigating(x,V,R){var D=A.document.createEvent("CustomEvent");return D.initCustomEvent("keyboardnavigating",!0,!0,{oldFocus:V.index,oldFocusType:V.type,newFocus:R.index,newFocusType:R.type}),x.dispatchEvent(D)}return V.Class.define((function _SelectionMode_ctor(x){this.inboundFocusHandled=!1,this._pressedContainer=null,this._pressedItemBox=null,this._pressedHeader=null,this._pressedEntity={type:B.ObjectType.item,index:F._INVALID_INDEX},this._pressedPosition=null,this.initialize(x)}),{_dispose:function(){this._itemEventsHandler&&this._itemEventsHandler.dispose(),this._setNewFocusItemOffsetPromise&&this._setNewFocusItemOffsetPromise.cancel()},initialize:function(x){this.site=x,this._keyboardNavigationHandlers={},this._keyboardAcceleratorHandlers={};var A=this.site,V=this;function createArrowHandler(A,V){var handler=function(V){return x._view.getAdjacent(V,A)};return handler.clampToBounds=V,handler}this._itemEventsHandler=new W._ItemEventsHandler(Object.create({containerFromElement:function(x){return A._view.items.containerFrom(x)},indexForItemElement:function(x){return A._view.items.index(x)},indexForHeaderElement:function(x){return A._groups.index(x)},itemBoxAtIndex:function(x){return A._view.items.itemBoxAt(x)},itemAtIndex:function(x){return A._view.items.itemAt(x)},headerAtIndex:function(x){return A._groups.group(x).header},headerFromElement:function(x){return A._groups.headerFrom(x)},containerAtIndex:function(x){return A._view.items.containerAt(x)},isZombie:function(){return A._isZombie()},getItemPosition:function(x){return A._getItemPosition(x)},rtl:function(){return A._rtl()},fireInvokeEvent:function(x,A){return V._fireInvokeEvent(x,A)},verifySelectionAllowed:function(x){return V._verifySelectionAllowed(x)},changeFocus:function(x,V,R,D,N){return A._changeFocus(x,V,R,D,N)},selectRange:function(x,A,R){return V._selectRange(x,A,R)}},{pressedEntity:{enumerable:!0,get:function(){return V._pressedEntity},set:function(x){V._pressedEntity=x}},pressedContainerScaleTransform:{enumerable:!0,get:function(){return V._pressedContainerScaleTransform},set:function(x){V._pressedContainerScaleTransform=x}},pressedContainer:{enumerable:!0,get:function(){return V._pressedContainer},set:function(x){V._pressedContainer=x}},pressedItemBox:{enumerable:!0,get:function(){return V._pressedItemBox},set:function(x){V._pressedItemBox=x}},pressedHeader:{enumerable:!0,get:function(){return V._pressedHeader},set:function(x){return V._pressedHeader=x}},pressedPosition:{enumerable:!0,get:function(){return V._pressedPosition},set:function(x){V._pressedPosition=x}},pressedElement:{enumerable:!0,set:function(x){V._pressedElement=x}},eventHandlerRoot:{enumerable:!0,get:function(){return A._viewport}},selectionMode:{enumerable:!0,get:function(){return A._selectionMode}},accessibleItemClass:{enumerable:!0,get:function(){return F._itemClass}},canvasProxy:{enumerable:!0,get:function(){return A._canvasProxy}},tapBehavior:{enumerable:!0,get:function(){return A._tap}},headerTapBehavior:{enumerable:!0,get:function(){return A._groupHeaderTap}},draggable:{enumerable:!0,get:function(){return A.itemsDraggable||A.itemsReorderable}},selection:{enumerable:!0,get:function(){return A._selection}},customFootprintParent:{enumerable:!0,get:function(){return null}}}));var R=U.Key;this._keyboardNavigationHandlers[R.upArrow]=createArrowHandler(R.upArrow),this._keyboardNavigationHandlers[R.downArrow]=createArrowHandler(R.downArrow),this._keyboardNavigationHandlers[R.leftArrow]=createArrowHandler(R.leftArrow),this._keyboardNavigationHandlers[R.rightArrow]=createArrowHandler(R.rightArrow),this._keyboardNavigationHandlers[R.pageUp]=createArrowHandler(R.pageUp,!0),this._keyboardNavigationHandlers[R.pageDown]=createArrowHandler(R.pageDown,!0),this._keyboardNavigationHandlers[R.home]=function(x){return!V.site._header||x.type!==B.ObjectType.groupHeader&&x.type!==B.ObjectType.footer?N.wrap({type:x.type!==B.ObjectType.footer?x.type:B.ObjectType.groupHeader,index:0}):N.wrap({type:B.ObjectType.header,index:0})},this._keyboardNavigationHandlers[R.end]=function(x){if(!V.site._footer||x.type!==B.ObjectType.groupHeader&&x.type!==B.ObjectType.header){if(x.type===B.ObjectType.groupHeader||x.type===B.ObjectType.header)return N.wrap({type:B.ObjectType.groupHeader,index:A._groups.length()-1});var R=V.site._view.lastItemIndex();return R>=0?N.wrap({type:x.type,index:R}):N.cancel}return N.wrap({type:B.ObjectType.footer,index:0})},this._keyboardAcceleratorHandlers[R.a]=function(){V.site._multiSelection()&&V._selectAll()}},staticMode:function SelectionMode_staticMode(){return this.site._tap===B.TapBehavior.none&&this.site._selectionMode===B.SelectionMode.none},itemUnrealized:function SelectionMode_itemUnrealized(x,A){if(this._pressedEntity.type!==B.ObjectType.groupHeader&&(this._pressedEntity.index===x&&this._resetPointerDownState(),this._itemBeingDragged(x)))for(var V=this._draggedItemBoxes.length-1;V>=0;V--)this._draggedItemBoxes[V]===A&&(U.removeClass(A,F._dragSourceClass),this._draggedItemBoxes.splice(V,1))},_fireInvokeEvent:function SelectionMode_fireInvokeEvent(x,V){if(V){var R=this;x.type===B.ObjectType.groupHeader?this.site._groupHeaderTap===B.GroupHeaderTapBehavior.invoke&&x.index!==F._INVALID_INDEX&&fireInvokeEventImpl(this.site.groupDataSource,!0):this.site._tap===B.TapBehavior.none||x.index===F._INVALID_INDEX||this.site._isInSelectionMode()||fireInvokeEventImpl(this.site.itemDataSource,!1)}function fireInvokeEventImpl(D,N){var U=D.createListBinding(),B=U.fromIndex(x.index),F=N?"groupheaderinvoked":"iteminvoked";B.done((function(){U.release()}));var W=A.document.createEvent("CustomEvent");W.initCustomEvent(F,!0,!0,N?{groupHeaderPromise:B,groupHeaderIndex:x.index}:{itemPromise:B,itemIndex:x.index}),V.dispatchEvent(W)&&R.site._defaultInvoke(x)}},_verifySelectionAllowed:function SelectionMode_verifySelectionAllowed(x){if(x.type===B.ObjectType.groupHeader)return{canSelect:!1,canTapSelect:!1};var V=x.index,R=this.site,D=this.site._view.items.itemAt(V);if(!R._selectionAllowed()||!R._selectOnTap()||D&&U.hasClass(D,F._nonSelectableClass))return{canSelect:!1,canTapSelect:!1};var W=R._selection._isIncluded(V),H=!R._multiSelection(),z=R._selection._cloneSelection();W?H?z.clear():z.remove(V):H?z.set(V):z.add(V);var G,j=A.document.createEvent("CustomEvent"),q=N.wrap(),Q=!1,K=!1;j.initCustomEvent("selectionchanging",!0,!0,{newSelection:z,preventTapBehavior:function(){K=!0},setPromise:function(x){q=x}});var J=R._element.dispatchEvent(j);q.then((function(){Q=!0,G=z._isIncluded(V),z.clear()}));var X=J&&Q&&(W||G);return{canSelect:X,canTapSelect:X&&!K}},_containedInElementWithClass:function SelectionMode_containedInElementWithClass(x,A){if(x.parentNode)for(var V=x.parentNode.querySelectorAll("."+A+", ."+A+" *"),R=0,D=V.length;R<D;R++)if(V[R]===x)return!0;return!1},_isDraggable:function SelectionMode_isDraggable(x){return!this._containedInElementWithClass(x,F._nonDraggableClass)},_isInteractive:function SelectionMode_isInteractive(x){return this._containedInElementWithClass(x,"win-interactive")},_resetPointerDownState:function SelectionMode_resetPointerDownState(){this._itemEventsHandler.resetPointerDownState()},onPointerDown:function SelectionMode_onPointerDown(x){this._itemEventsHandler.onPointerDown(x)},onclick:function SelectionMode_onclick(x){this._itemEventsHandler.onClick(x)},onPointerUp:function SelectionMode_onPointerUp(x){this._itemEventsHandler.onPointerUp(x)},onPointerCancel:function SelectionMode_onPointerCancel(x){this._itemEventsHandler.onPointerCancel(x)},onLostPointerCapture:function SelectionMode_onLostPointerCapture(x){this._itemEventsHandler.onLostPointerCapture(x)},onContextMenu:function SelectionMode_onContextMenu(x){this._itemEventsHandler.onContextMenu(x)},onMSHoldVisual:function SelectionMode_onMSHoldVisual(x){this._itemEventsHandler.onMSHoldVisual(x)},onDataChanged:function SelectionMode_onDataChanged(x){this._itemEventsHandler.onDataChanged(x)},_removeTransform:function SelectionMode_removeTransform(x,A){A&&-1!==x.style[z].indexOf(A)&&(x.style[z]=x.style[z].replace(A,""))},_selectAll:function SelectionMode_selectAll(){var x=[];this.site._view.items.each((function(A,V){V&&U.hasClass(V,F._nonSelectableClass)&&x.push(A)})),this.site._selection.selectAll(),x.length>0&&this.site._selection.remove(x)},_selectRange:function SelectionMode_selectRange(x,A,V){for(var R=[],D=-1,N=x;N<=A;N++){var B=this.site._view.items.itemAt(N);B&&U.hasClass(B,F._nonSelectableClass)?-1!==D&&(R.push({firstIndex:D,lastIndex:N-1}),D=-1):-1===D&&(D=N)}-1!==D&&R.push({firstIndex:D,lastIndex:A}),R.length>0&&this.site._selection[V?"add":"set"](R)},onDragStart:function SelectionMode_onDragStart(x){if(this._pressedEntity={type:B.ObjectType.item,index:this.site._view.items.index(x.target)},this.site._selection._pivot=F._INVALID_INDEX,this._pressedEntity.index===F._INVALID_INDEX||!this.site.itemsDraggable&&!this.site.itemsReorderable||this.site._view.animating||!this._isDraggable(x.target)||this._pressedElement&&this._isInteractive(this._pressedElement))x.preventDefault();else{this._dragging=!0,this._dragDataTransfer=x.dataTransfer,this._pressedPosition=U._getCursorPos(x),this._dragInfo=null,this._lastEnteredElement=x.target,this.site._selection._isIncluded(this._pressedEntity.index)?this._dragInfo=this.site.selection:(this._draggingUnselectedItem=!0,this._dragInfo=new H._Selection(this.site,[{firstIndex:this._pressedEntity.index,lastIndex:this._pressedEntity.index}]));var V=this.site.itemsReorderable,D=A.document.createEvent("CustomEvent");if(D.initCustomEvent("itemdragstart",!0,!1,{dataTransfer:x.dataTransfer,dragInfo:this._dragInfo}),x.dataTransfer.setData("text",""),x.dataTransfer.setDragImage){var N=this.site._view.items.itemDataAt(this._pressedEntity.index);if(N&&N.container){var W=N.container.getBoundingClientRect();x.dataTransfer.setDragImage(N.container,x.clientX-W.left,x.clientY-W.top)}}this.site.element.dispatchEvent(D),this.site.itemsDraggable&&!this.site.itemsReorderable&&(this._firedDragEnter||this._fireDragEnterEvent(x.dataTransfer)&&(V=!0,this._dragUnderstood=!0)),V&&(this._addedDragOverClass=!0,U.addClass(this.site._element,F._dragOverClass)),this._draggedItemBoxes=[];var z=this,G=x.target;G.addEventListener("dragend",(function itemDragEnd(x){G.removeEventListener("dragend",itemDragEnd),z.onDragEnd(x)})),R._yieldForDomModification((function(){if(z._dragging)for(var x=z._dragInfo.getIndices(),A=0,V=x.length;A<V;A++){var R=z.site._view.items.itemDataAt(x[A]);R&&R.itemBox&&z._addDragSourceClass(R.itemBox)}}))}},onDragEnter:function(x){var V=this._dragUnderstood;this._lastEnteredElement=x.target,this._exitEventTimer&&(A.clearTimeout(this._exitEventTimer),this._exitEventTimer=0),this._firedDragEnter||this._fireDragEnterEvent(x.dataTransfer)&&(V=!0),(V||this._dragging&&this.site.itemsReorderable)&&(x.preventDefault(),this._dragUnderstood=!0,this._addedDragOverClass||(this._addedDragOverClass=!0,U.addClass(this.site._element,F._dragOverClass))),this._pointerLeftRegion=!1},onDragLeave:function(x){x.target===this._lastEnteredElement&&(this._pointerLeftRegion=!0,this._handleExitEvent())},fireDragUpdateEvent:function(){var x=A.document.createEvent("CustomEvent");x.initCustomEvent("itemdragchanged",!0,!1,{dataTransfer:this._dragDataTransfer,dragInfo:this._dragInfo}),this.site.element.dispatchEvent(x)},_fireDragEnterEvent:function(x){var V=A.document.createEvent("CustomEvent");V.initCustomEvent("itemdragenter",!0,!0,{dataTransfer:x});var R=!this.site.element.dispatchEvent(V);return this._firedDragEnter=!0,R},_fireDragBetweenEvent:function(x,V,R){var D=A.document.createEvent("CustomEvent");return D.initCustomEvent("itemdragbetween",!0,!0,{index:x,insertAfterIndex:V,dataTransfer:R}),this.site.element.dispatchEvent(D)},_fireDropEvent:function(x,V,R){var D=A.document.createEvent("CustomEvent");return D.initCustomEvent("itemdragdrop",!0,!0,{index:x,insertAfterIndex:V,dataTransfer:R}),this.site.element.dispatchEvent(D)},_handleExitEvent:function(){this._exitEventTimer&&(A.clearTimeout(this._exitEventTimer),this._exitEventTimer=0);var x=this;this._exitEventTimer=A.setTimeout((function(){if(!x.site._disposed&&x._pointerLeftRegion){if(x.site._layout.dragLeave&&x.site._layout.dragLeave(),x._pointerLeftRegion=!1,x._dragUnderstood=!1,x._lastEnteredElement=null,x._lastInsertPoint=null,x._dragBetweenDisabled=!1,x._firedDragEnter){var V=A.document.createEvent("CustomEvent");V.initCustomEvent("itemdragleave",!0,!1,{}),x.site.element.dispatchEvent(V),x._firedDragEnter=!1}x._addedDragOverClass&&(x._addedDragOverClass=!1,U.removeClass(x.site._element,F._dragOverClass)),x._exitEventTimer=0,x._stopAutoScroll()}}),40)},_getEventPositionInElementSpace:function(x,A){var V={left:0,top:0};try{V=x.getBoundingClientRect()}catch(x){}var R=U._getComputedStyle(x,null),D=parseInt(R.paddingLeft),N=parseInt(R.paddingTop),B=parseInt(R.borderLeftWidth),F=parseInt(R.borderTopWidth),W=A.clientX,H=A.clientY,z={x:+W===W?W-V.left-D-B:0,y:+H===H?H-V.top-N-F:0};return this.site._rtl()&&(z.x=V.right-V.left-z.x),z},_getPositionInCanvasSpace:function(x){var A=this.site._horizontal()?this.site.scrollPosition:0,V=this.site._horizontal()?0:this.site.scrollPosition,R=this._getEventPositionInElementSpace(this.site.element,x);return{x:R.x+A,y:R.y+V}},_itemBeingDragged:function(x){return!!this._dragging&&(this._draggingUnselectedItem&&this._dragInfo._isIncluded(x)||!this._draggingUnselectedItem&&this.site._isSelected(x))},_addDragSourceClass:function(x){this._draggedItemBoxes.push(x),U.addClass(x,F._dragSourceClass),x.parentNode&&U.addClass(x.parentNode,F._footprintClass)},renderDragSourceOnRealizedItem:function(x,A){this._itemBeingDragged(x)&&this._addDragSourceClass(A)},onDragOver:function(x){if(this._dragUnderstood){this._pointerLeftRegion=!1,x.preventDefault();var A=this._getPositionInCanvasSpace(x),V=this._getEventPositionInElementSpace(this.site.element,x);if(this._checkAutoScroll(V.x,V.y),this.site._layout.hitTest)if(this._autoScrollFrame)this._lastInsertPoint&&(this.site._layout.dragLeave(),this._lastInsertPoint=null);else{var R=this.site._view.hitTest(A.x,A.y);R.insertAfterIndex=clampToRange(-1,this.site._cachedCount-1,R.insertAfterIndex),this._lastInsertPoint&&this._lastInsertPoint.insertAfterIndex===R.insertAfterIndex&&this._lastInsertPoint.index===R.index||(this._dragBetweenDisabled=!this._fireDragBetweenEvent(R.index,R.insertAfterIndex,x.dataTransfer),this._dragBetweenDisabled?this.site._layout.dragLeave():this.site._layout.dragOver(A.x,A.y,this._dragInfo)),this._lastInsertPoint=R}}},_clearDragProperties:function(){if(this._addedDragOverClass&&(this._addedDragOverClass=!1,U.removeClass(this.site._element,F._dragOverClass)),this._draggedItemBoxes){for(var x=0,A=this._draggedItemBoxes.length;x<A;x++)U.removeClass(this._draggedItemBoxes[x],F._dragSourceClass),this._draggedItemBoxes[x].parentNode&&U.removeClass(this._draggedItemBoxes[x].parentNode,F._footprintClass);this._draggedItemBoxes=[]}this.site._layout.dragLeave(),this._dragging=!1,this._dragInfo=null,this._draggingUnselectedItem=!1,this._dragDataTransfer=null,this._lastInsertPoint=null,this._resetPointerDownState(),this._lastEnteredElement=null,this._dragBetweenDisabled=!1,this._firedDragEnter=!1,this._dragUnderstood=!1,this._stopAutoScroll()},onDragEnd:function(){var x=A.document.createEvent("CustomEvent");x.initCustomEvent("itemdragend",!0,!1,{}),this.site.element.dispatchEvent(x),this._clearDragProperties()},_findFirstAvailableInsertPoint:function(x,A,V){for(var R=x.getIndices(),D=-1,N=this.site._cachedCount,U=R.length,B=-1,F=A,W=0;W<U;W++)if(R[W]===F){D=W,B=W;break}for(;D>=0&&F>=0;)V?(F++,D<U&&R[D+1]===F&&F<N?D++:F>=N?(V=!1,F=A,D=B):D=-1):(F--,D>0&&R[D-1]===F?D--:D=-1);return F},_reorderItems:function(x,A,V,R,D){var N=this.site,U=function updatedSelectionOnDrop(x){V?N._selection.remove({key:x[0].key}):N._selection.set({firstKey:x[0].key,lastKey:x[x.length-1].key}),D&&N.ensureVisible(N._selection._getFocused())};A.getItems().then((function(A){var V=N.itemDataSource;if(-1===x){V.beginEdits();for(var D=A.length-1;D>=0;D--)V.moveToStart(A[D].key);V.endEdits(),U(A)}else{var B=V.createListBinding();B.fromIndex(x).then((function(x){if(B.release(),V.beginEdits(),R)for(var D=0,N=A.length;D<N;D++)V.moveBefore(A[D].key,x.key);else for(D=A.length-1;D>=0;D--)V.moveAfter(A[D].key,x.key);V.endEdits(),U(A)}))}}))},onDrop:function SelectionMode_onDrop(x){if(this._draggedItemBoxes)for(var A=0,V=this._draggedItemBoxes.length;A<V;A++)this._draggedItemBoxes[A].parentNode&&U.removeClass(this._draggedItemBoxes[A].parentNode,F._footprintClass);if(!this._dragBetweenDisabled){var R=this._getPositionInCanvasSpace(x),D=this.site._view.hitTest(R.x,R.y),N=clampToRange(-1,this.site._cachedCount-1,D.insertAfterIndex),B=!0;if(this._lastInsertPoint&&this._lastInsertPoint.insertAfterIndex===N&&this._lastInsertPoint.index===D.index||(B=this._fireDragBetweenEvent(D.index,N,x.dataTransfer)),B&&(this._lastInsertPoint=null,this.site._layout.dragLeave(),this._fireDropEvent(D.index,N,x.dataTransfer)&&this._dragging&&this.site.itemsReorderable)){if(this._dragInfo.isEverything()||this.site._groupsEnabled())return;N=this._findFirstAvailableInsertPoint(this._dragInfo,N,!1),this._reorderItems(N,this._dragInfo,this._draggingUnselectedItem)}}this._clearDragProperties(),x.preventDefault()},_checkAutoScroll:function(x,V){var D=this.site._getViewportLength(),N=this.site._horizontal(),B=N?x:V,W=this.site._viewport[N?"scrollWidth":"scrollHeight"],H=Math.floor(this.site.scrollPosition),z=0;if(B<F._AUTOSCROLL_THRESHOLD?z=B-F._AUTOSCROLL_THRESHOLD:B>D-F._AUTOSCROLL_THRESHOLD&&(z=B-(D-F._AUTOSCROLL_THRESHOLD)),z=Math.round(z/F._AUTOSCROLL_THRESHOLD*(F._MAX_AUTOSCROLL_RATE-F._MIN_AUTOSCROLL_RATE)),(0===H&&z<0||H>=W-D&&z>0)&&(z=0),0===z)this._autoScrollDelay&&(A.clearTimeout(this._autoScrollDelay),this._autoScrollDelay=0);else if(!this._autoScrollDelay&&!this._autoScrollFrame){var G=this;this._autoScrollDelay=A.setTimeout((function(){if(G._autoScrollRate){G._lastDragTimeout=R._now();var nextFrame=function(){if(!G._autoScrollRate&&G._autoScrollFrame||G.site._disposed)G._stopAutoScroll();else{var x=R._now(),A=G._autoScrollRate*((x-G._lastDragTimeout)/1e3);A=A<0?Math.min(-1,A):Math.max(1,A);var V={};V[G.site._scrollProperty]=G.site._viewportScrollPosition+A,U.setScrollPosition(G.site._viewport,V),G._lastDragTimeout=x,G._autoScrollFrame=R._requestAnimationFrame(nextFrame)}};G._autoScrollFrame=R._requestAnimationFrame(nextFrame)}}),F._AUTOSCROLL_DELAY)}this._autoScrollRate=z},_stopAutoScroll:function(){this._autoScrollDelay&&(A.clearTimeout(this._autoScrollDelay),this._autoScrollDelay=0),this._autoScrollRate=0,this._autoScrollFrame=0},onKeyDown:function SelectionMode_onKeyDown(x){var A=this,V=this.site,R=V._view,D=V._selection._getFocused(),W=!0,z=x.ctrlKey;function setNewFocus(x,U,W){function setNewFocusImpl(R){var H=!0,G=!1;return W?x.index=Math.max(0,Math.min(R,x.index)):(x.index<0||x.index>R)&&(G=!0),G||D.index===x.index&&D.type===x.type||dispatchKeyboardNavigating(V._element,D,x)&&(H=!1,A._setNewFocusItemOffsetPromise&&A._setNewFocusItemOffsetPromise.cancel(),V._batchViewUpdates(F._ViewChange.realize,F._ScrollToPriority.high,(function(){return A._setNewFocusItemOffsetPromise=V._getItemOffset(D,!0).then((function(R){var B=(R=V._convertFromCanvasCoordinates(R)).end<=V.scrollPosition||R.begin>=V.scrollPosition+V._getViewportLength()-1;return A._setNewFocusItemOffsetPromise=V._getItemOffset(x).then((function(R){A._setNewFocusItemOffsetPromise=null;var F={position:V.scrollPosition,direction:"right"};return B&&(V._selection._setFocused(x,!0),R=V._convertFromCanvasCoordinates(R),x.index>D.index?(F.direction="right",F.position=R.end-V._getViewportLength()):(F.direction="left",F.position=R.begin)),V._changeFocus(x,U,z,B,!0),B?F:N.cancel}),(function(A){return V._changeFocus(x,U,z,!0,!0),N.wrapError(A)})),A._setNewFocusItemOffsetPromise}),(function(A){return V._changeFocus(x,U,z,!0,!0),N.wrapError(A)})),A._setNewFocusItemOffsetPromise}),!0)),H&&(V._selection._setFocused(D,!0),V.ensureVisible(D)),G?{type:B.ObjectType.item,index:F._INVALID_INDEX}:x}return x.type===B.ObjectType.item?N.wrap(R.lastItemIndex()).then(setNewFocusImpl):x.type===B.ObjectType.groupHeader?N.wrap(V._groups.length()-1).then(setNewFocusImpl):N.wrap(0).then(setNewFocusImpl)}var G=U.Key,j=x.keyCode,q=V._rtl();if(!this._isInteractive(x.target)){if(x.ctrlKey&&!x.altKey&&!x.shiftKey&&this._keyboardAcceleratorHandlers[j]&&this._keyboardAcceleratorHandlers[j](),V.itemsReorderable&&!x.ctrlKey&&x.altKey&&x.shiftKey&&D.type===B.ObjectType.item&&(j===G.leftArrow||j===G.rightArrow||j===G.upArrow||j===G.downArrow)){var Q=V._selection,K=D.index,J=!1,X=!0;if(!Q.isEverything()){if(!Q._isIncluded(K)){var Y=V._view.items.itemAt(K);Y&&U.hasClass(Y,F._nonDraggableClass)?X=!1:(J=!0,Q=new H._Selection(this.site,[{firstIndex:K,lastIndex:K}]))}if(X){var $=K;j===G.rightArrow?$+=q?-1:1:j===G.leftArrow?$+=q?1:-1:j===G.upArrow?$--:$++;var Z=$>K,ee=Z;Z&&$>=this.site._cachedCount&&(ee=!1,$=this.site._cachedCount-1),$=this._findFirstAvailableInsertPoint(Q,$,ee);var te=($=Math.min(Math.max(-1,$),this.site._cachedCount-1))-(Z||-1===$?0:1),ie=$,ne=this.site._groupsEnabled();if(ne){var re=this.site._groups,se=$>-1?re.groupFromItem($):0;Z?re.group(se).startIndex===$&&te--:se<re.length()-1&&$===re.group(se+1).startIndex-1&&te++}if(this._fireDragBetweenEvent(ie,te,null)&&this._fireDropEvent(ie,te,null)){if(ne)return;this._reorderItems($,Q,J,!Z,!0)}}}}else if(x.altKey)W=!1;else if(this._keyboardNavigationHandlers[j])this._keyboardNavigationHandlers[j](D).then((function(R){if(R.index!==D.index||R.type!==D.type){var N=A._keyboardNavigationHandlers[j].clampToBounds;R.type!==B.ObjectType.groupHeader&&x.shiftKey&&V._selectionAllowed()&&V._multiSelection()?(V._selection._pivot===F._INVALID_INDEX&&(V._selection._pivot=D.index),setNewFocus(R,!0,N).then((function(R){if(R.index!==F._INVALID_INDEX){var D=Math.min(R.index,V._selection._pivot),N=Math.max(R.index,V._selection._pivot),U=x.ctrlKey||V._tap===B.TapBehavior.toggleSelect;A._selectRange(D,N,U)}}))):(V._selection._pivot=F._INVALID_INDEX,setNewFocus(R,!1,N))}else W=!1}));else if(x.ctrlKey||j!==G.enter)D.type!==B.ObjectType.groupHeader&&(x.ctrlKey&&j===G.enter||j===G.space)?(this._itemEventsHandler.toggleSelectionIfAllowed(D.index),V._changeFocus(D,!0,z,!1,!0)):j===G.escape&&V._selection.count()>0?(V._selection._pivot=F._INVALID_INDEX,V._selection.clear()):W=!1;else{var oe=D.type===B.ObjectType.groupHeader?V._groups.group(D.index).header:V._view.items.itemBoxAt(D.index);oe&&(D.type===B.ObjectType.groupHeader?(this._pressedHeader=oe,this._pressedItemBox=null,this._pressedContainer=null):(this._pressedItemBox=oe,this._pressedContainer=V._view.items.containerAt(D.index),this._pressedHeader=null),this._verifySelectionAllowed(D).canTapSelect&&this._itemEventsHandler.handleTap(D),this._fireInvokeEvent(D,oe))}this._keyDownHandled=W,W&&(x.stopPropagation(),x.preventDefault())}j===G.tab&&(this.site._keyboardFocusInbound=!0)},onKeyUp:function(x){this._keyDownHandled&&(x.stopPropagation(),x.preventDefault())},onTabEntered:function(x){if(0!==this.site._groups.length()||this.site._hasHeaderOrFooter){var A=this.site,V=A._selection._getFocused(),R=x.detail;if(!A._hasKeyboardFocus||x.target===A._viewport)if(this.inboundFocusHandled=!0,V.index=V.index===F._INVALID_INDEX?0:V.index,R||!this.site._supportsGroupHeaderKeyboarding&&!this.site._hasHeaderOrFooter){var D={type:B.ObjectType.item};V.type===B.ObjectType.groupHeader?(D.index=A._groupFocusCache.getIndexForGroup(V.index),dispatchKeyboardNavigating(A._element,V,D)?A._changeFocus(D,!0,!1,!1,!0):A._changeFocus(V,!0,!1,!1,!0)):(D.index=V.type!==B.ObjectType.item?A._groupFocusCache.getLastFocusedItemIndex():V.index,A._changeFocus(D,!0,!1,!1,!0)),x.preventDefault()}else D={type:B.ObjectType.groupHeader},this.site._hasHeaderOrFooter?this.site._lastFocusedElementInGroupTrack.type===B.ObjectType.groupHeader&&this.site._supportsGroupHeaderKeyboarding?(D.index=A._groups.groupFromItem(V.index),dispatchKeyboardNavigating(A._element,V,D)?A._changeFocus(D,!0,!1,!1,!0):A._changeFocus(V,!0,!1,!1,!0)):(D.type=this.site._lastFocusedElementInGroupTrack.type,D.index=0,A._changeFocus(D,!0,!1,!1,!0)):V.type!==B.ObjectType.groupHeader&&this.site._supportsGroupHeaderKeyboarding?(D.index=A._groups.groupFromItem(V.index),dispatchKeyboardNavigating(A._element,V,D)?A._changeFocus(D,!0,!1,!1,!0):A._changeFocus(V,!0,!1,!1,!0)):(D.index=V.index,A._changeFocus(D,!0,!1,!1,!0)),x.preventDefault()}},onTabExiting:function(x){if(this.site._hasHeaderOrFooter||this.site._supportsGroupHeaderKeyboarding&&0!==this.site._groups.length()){var A=this.site,V=A._selection._getFocused(),R=x.detail;if(R){var D=null;if(V.type===B.ObjectType.item){var N=this.site._lastFocusedElementInGroupTrack.type;if(N!==B.ObjectType.header&&N!==B.ObjectType.footer&&this.site._supportsGroupHeaderKeyboarding)D={type:B.ObjectType.groupHeader,index:A._groups.groupFromItem(V.index)};else var D={type:N===B.ObjectType.item?B.ObjectType.header:N,index:0}}D&&dispatchKeyboardNavigating(A._element,V,D)&&(A._changeFocus(D,!0,!1,!1,!0),x.preventDefault())}else if(!R&&V.type!==B.ObjectType.item){var U=0;U=V.type===B.ObjectType.groupHeader?A._groupFocusCache.getIndexForGroup(V.index):V.type===B.ObjectType.header?0:A._view.lastItemIndex(),D={type:B.ObjectType.item,index:U},dispatchKeyboardNavigating(A._element,V,D)&&(A._changeFocus(D,!0,!1,!1,!0),x.preventDefault())}}}})}))})})),R("WinJS/Controls/ListView/_ErrorMessages",["exports","../../Core/_Base","../../Core/_Resources"],(function errorMessagesInit(x,A,V){"use strict";A.Namespace._moduleDefine(x,null,{modeIsInvalid:{get:function(){return"Invalid argument: mode must be one of following values: 'none', 'single' or 'multi'."}},loadingBehaviorIsDeprecated:{get:function(){return"Invalid configuration: loadingBehavior is deprecated. The control will default this property to 'randomAccess'. Please refer to the 'ListView loading behaviors' SDK Sample for guidance on how to implement incremental load behavior."}},pagesToLoadIsDeprecated:{get:function(){return"Invalid configuration: pagesToLoad is deprecated. The control will not use this property. Please refer to the 'ListView loading behaviors' SDK Sample for guidance on how to implement incremental load behavior."}},pagesToLoadThresholdIsDeprecated:{get:function(){return"Invalid configuration: pagesToLoadThreshold is deprecated.  The control will not use this property. Please refer to the 'ListView loading behaviors' SDK Sample for guidance on how to implement incremental load behavior."}},automaticallyLoadPagesIsDeprecated:{get:function(){return"Invalid configuration: automaticallyLoadPages is deprecated. The control will default this property to false. Please refer to the 'ListView loading behaviors' SDK Sample for guidance on how to implement incremental load behavior."}},invalidTemplate:{get:function(){return"Invalid template: Templates must be created before being passed to the ListView, and must contain a valid tree of elements."}},loadMorePagesIsDeprecated:{get:function(){return"loadMorePages is deprecated. Invoking this function will not have any effect. Please refer to the 'ListView loading behaviors' SDK Sample for guidance on how to implement incremental load behavior."}},disableBackdropIsDeprecated:{get:function(){return"Invalid configuration: disableBackdrop is deprecated. Style: .win-listview .win-container.win-backdrop { background-color:transparent; } instead."}},backdropColorIsDeprecated:{get:function(){return"Invalid configuration: backdropColor is deprecated. Style: .win-listview .win-container.win-backdrop { rgba(155,155,155,0.23); } instead."}},itemInfoIsDeprecated:{get:function(){return"GridLayout.itemInfo may be altered or unavailable in future versions. Instead, use CellSpanningLayout."}},groupInfoIsDeprecated:{get:function(){return"GridLayout.groupInfo may be altered or unavailable in future versions. Instead, use CellSpanningLayout."}},resetItemIsDeprecated:{get:function(){return"resetItem may be altered or unavailable in future versions. Instead, mark the element as disposable using WinJS.Utilities.markDisposable."}},resetGroupHeaderIsDeprecated:{get:function(){return"resetGroupHeader may be altered or unavailable in future versions. Instead, mark the header element as disposable using WinJS.Utilities.markDisposable."}},maxRowsIsDeprecated:{get:function(){return"GridLayout.maxRows may be altered or unavailable in future versions. Instead, use the maximumRowsOrColumns property."}},swipeOrientationDeprecated:{get:function(){return"Invalid configuration: swipeOrientation is deprecated. The control will default this property to 'none'"}},swipeBehaviorDeprecated:{get:function(){return"Invalid configuration: swipeBehavior is deprecated. The control will default this property to 'none'"}}})})),R("WinJS/Controls/ListView/_GroupFocusCache",["exports","../../Core/_Base"],(function GroupFocusCacheInit(x,A){"use strict";A.Namespace._moduleDefine(x,"WinJS.UI",{_GroupFocusCache:A.Namespace._lazy((function(){return A.Class.define((function GroupFocusCache_ctor(x){this._listView=x,this.clear()}),{updateCache:function(x,A,V){this._lastFocusedItemKey=A,this._lastFocusedItemIndex=V,V=""+V,this._itemToIndex[A]=V,this._groupToItem[x]=A},deleteItem:function(x){if(x===this._lastFocusedItemKey&&(this._lastFocusedItemKey=null,this._lastFocusedItemIndex=0),this._itemToIndex[x])for(var A=Object.keys(this._groupToItem),V=0,R=A.length;V<R;V++){var D=A[V];if(this._groupToItem[D]===x){this.deleteGroup(D);break}}},deleteGroup:function(x){var A=this._groupToItem[x];A&&delete this._itemToIndex[A],delete this._groupToItem[x]},updateItemIndex:function(x,A){x===this._lastFocusedItemKey&&(this._lastFocusedItemIndex=A),this._itemToIndex[x]&&(this._itemToIndex[x]=""+A)},getIndexForGroup:function(x){var A=this._listView._groups.group(x).key,V=this._groupToItem[A];return V&&this._itemToIndex[V]?+this._itemToIndex[V]:this._listView._groups.fromKey(A).group.startIndex},clear:function(){this._groupToItem={},this._itemToIndex={},this._lastFocusedItemIndex=0,this._lastFocusedItemKey=null},getLastFocusedItemIndex:function(){return this._lastFocusedItemIndex}})})),_UnsupportedGroupFocusCache:A.Namespace._lazy((function(){return A.Class.define(null,{updateCache:function(x,A,V){this._lastFocusedItemKey=A,this._lastFocusedItemIndex=V},deleteItem:function(x){x===this._lastFocusedItemKey&&(this._lastFocusedItemKey=null,this._lastFocusedItemIndex=0)},deleteGroup:function(){},updateItemIndex:function(x,A){x===this._lastFocusedItemKey&&(this._lastFocusedItemIndex=A)},getIndexForGroup:function(){return 0},clear:function(){this._lastFocusedItemIndex=0,this._lastFocusedItemKey=null},getLastFocusedItemIndex:function(){return this._lastFocusedItemIndex}})}))})})),R("WinJS/Controls/ListView/_GroupsContainer",["exports","../../Core/_Base","../../Promise","../../Utilities/_Dispose","../../Utilities/_ElementUtilities","../../Utilities/_ItemsManager","../../Utilities/_UI","../ItemContainer/_Constants"],(function groupsContainerInit(x,A,V,R,D,N,U,B){"use strict";A.Namespace._moduleDefine(x,"WinJS.UI",{_GroupsContainerBase:A.Namespace._lazy((function(){return A.Class.define((function(){}),{index:function(x){var A=this.headerFrom(x);if(A)for(var V=0,R=this.groups.length;V<R;V++)if(A===this.groups[V].header)return V;return B._INVALID_INDEX},headerFrom:function(x){for(;x&&!D.hasClass(x,B._headerClass);)x=x.parentNode;return x},requestHeader:function GroupsContainerBase_requestHeader(x){this._waitingHeaderRequests=this._waitingHeaderRequests||{},this._waitingHeaderRequests[x]||(this._waitingHeaderRequests[x]=[]);var A=this;return new V((function(V){var R=A.groups[x];R&&R.header?V(R.header):A._waitingHeaderRequests[x].push(V)}))},notify:function GroupsContainerBase_notify(x,A){if(this._waitingHeaderRequests&&this._waitingHeaderRequests[x]){for(var V=this._waitingHeaderRequests[x],R=0,D=V.length;R<D;R++)V[R](A);this._waitingHeaderRequests[x]=[]}},groupFromImpl:function GroupsContainerBase_groupFromImpl(x,A,V){if(A<x)return null;var R=x+Math.floor((A-x)/2);return V(this.groups[R],R)?this.groupFromImpl(x,R-1,V):R<A&&!V(this.groups[R+1],R+1)?this.groupFromImpl(R+1,A,V):R},groupFrom:function GroupsContainerBase_groupFrom(x){if(this.groups.length>0){var A=this.groups.length-1;return x(this.groups[A],A)?this.groupFromImpl(0,this.groups.length-1,x):A}return null},groupFromItem:function GroupsContainerBase_groupFromItem(x){return this.groupFrom((function(A){return x<A.startIndex}))},groupFromOffset:function GroupsContainerBase_groupFromOffset(x){return this.groupFrom((function(A){return x<A.offset}))},group:function GroupsContainerBase_getGroup(x){return this.groups[x]},length:function GroupsContainerBase_length(){return this.groups.length},cleanUp:function GroupsContainerBase_cleanUp(){if(this.listBinding){for(var x=0,A=this.groups.length;x<A;x++){var V=this.groups[x];V.userData&&this.listBinding.releaseItem(V.userData)}this.listBinding.release()}},_dispose:function GroupsContainerBase_dispose(){this.cleanUp()},synchronizeGroups:function GroupsContainerBase_synchronizeGroups(){var x=this;return this.pendingChanges=[],this.ignoreChanges=!0,this.groupDataSource.invalidateAll().then((function(){return V.join(x.pendingChanges)})).then((function(){if(x._listView._ifZombieDispose())return V.cancel})).then((function(){x.ignoreChanges=!1}),(function(A){return x.ignoreChanges=!1,V.wrapError(A)}))},fromKey:function GroupsContainerBase_fromKey(x){for(var A=0,V=this.groups.length;A<V;A++){var R=this.groups[A];if(R.key===x)return{group:R,index:A}}return null},fromHandle:function GroupsContainerBase_fromHandle(x){for(var A=0,V=this.groups.length;A<V;A++){var R=this.groups[A];if(R.handle===x)return{group:R,index:A}}return null}})})),_UnvirtualizedGroupsContainer:A.Namespace._lazy((function(){return A.Class.derive(x._GroupsContainerBase,(function(x,A){this._listView=x,this.groupDataSource=A,this.groups=[],this.pendingChanges=[],this.dirty=!0;var V=this,N={beginNotifications:function GroupsContainer_beginNotifications(){V._listView._versionManager.beginNotifications()},endNotifications:function GroupsContainer_endNotifications(){V._listView._versionManager.endNotifications(),V._listView._ifZombieDispose()||!V.ignoreChanges&&V._listView._groupsChanged&&V._listView._scheduleUpdate()},indexChanged:function GroupsContainer_indexChanged(){V._listView._versionManager.receivedNotification(),V._listView._ifZombieDispose()||this.scheduleUpdate()},itemAvailable:function GroupsContainer_itemAvailable(){},countChanged:function GroupsContainer_countChanged(x){V._listView._versionManager.receivedNotification(),V._listView._ifZombieDispose()||this.scheduleUpdate()},changed:function GroupsContainer_changed(x){if(V._listView._versionManager.receivedNotification(),!V._listView._ifZombieDispose()){var A=V.fromKey(x.key);A&&(A.group.userData=x,A.group.startIndex=x.firstItemIndexHint,this.markToRemove(A.group)),this.scheduleUpdate()}},removed:function GroupsContainer_removed(x){if(V._listView._versionManager.receivedNotification(),V._listView._groupRemoved(x),!V._listView._ifZombieDispose()){var A=V.fromHandle(x);if(A){V.groups.splice(A.index,1);var R=V.groups.indexOf(A.group,A.index);R>-1&&V.groups.splice(R,1),this.markToRemove(A.group)}this.scheduleUpdate()}},inserted:function GroupsContainer_inserted(x,A,R){if(V._listView._versionManager.receivedNotification(),!V._listView._ifZombieDispose()){var D=this;x.retain().then((function(N){var U;if(-1!==(U=A||R||V.groups.length?D.findIndex(A,R):0)){var B={key:N.key,startIndex:N.firstItemIndexHint,userData:N,handle:x.handle};V.groups.splice(U,0,B)}D.scheduleUpdate()})),V.pendingChanges.push(x)}},moved:function GroupsContainer_moved(x,A,R){if(V._listView._versionManager.receivedNotification(),!V._listView._ifZombieDispose()){var D=this;x.then((function(N){var U=D.findIndex(A,R),B=V.fromKey(N.key);if(B)V.groups.splice(B.index,1),-1!==U&&(B.index<U&&U--,B.group.key=N.key,B.group.userData=N,B.group.startIndex=N.firstItemIndexHint,V.groups.splice(U,0,B.group));else if(-1!==U){var F={key:N.key,startIndex:N.firstItemIndexHint,userData:N,handle:x.handle};V.groups.splice(U,0,F),x.retain()}D.scheduleUpdate()})),V.pendingChanges.push(x)}},reload:function GroupsContainer_reload(){V._listView._versionManager.receivedNotification(),V._listView._ifZombieDispose()||V._listView._processReload()},markToRemove:function GroupsContainer_markToRemove(x){if(x.header){var A=x.header;x.header=null,x.left=-1,x.width=-1,x.decorator=null,x.tabIndex=-1,A.tabIndex=-1,V._listView._groupsToRemove[D._uniqueID(A)]={group:x,header:A}}},scheduleUpdate:function GroupsContainer_scheduleUpdate(){V.dirty=!0,V.ignoreChanges||(V._listView._groupsChanged=!0)},findIndex:function GroupsContainer_findIndex(x,A){var R,D=-1;return x&&(R=V.fromHandle(x))&&(D=R.index+1),-1===D&&A&&(R=V.fromHandle(A))&&(D=R.index),D},removeElements:function GroupsContainer_removeElements(x){if(x.header){var A=x.header.parentNode;A&&(R.disposeSubTree(x.header),A.removeChild(x.header)),x.header=null,x.left=-1,x.width=-1}}};this.listBinding=this.groupDataSource.createListBinding(N)}),{initialize:function UnvirtualizedGroupsContainer_initialize(){this.initializePromise&&this.initializePromise.cancel();var x=this;return this.initializePromise=this.groupDataSource.getCount().then((function(A){for(var R=[],D=0;D<A;D++)R.push(x.listBinding.fromIndex(D).retain());return V.join(R)})).then((function(A){x.groups=[];for(var V=0,R=A.length;V<R;V++){var D=A[V];x.groups.push({key:D.key,startIndex:D.firstItemIndexHint,handle:D.handle,userData:D})}}),(function(x){return V.wrapError(x)})),this.initializePromise},renderGroup:function UnvirtualizedGroupsContainer_renderGroup(x){if(this._listView.groupHeaderTemplate){var A=this.groups[x];return V.wrap(this._listView._groupHeaderRenderer(V.wrap(A.userData))).then(N._normalizeRendererReturn)}return V.wrap(null)},setDomElement:function UnvirtualizedGroupsContainer_setDomElement(x,A){this.groups[x].header=A,this.notify(x,A)},removeElements:function UnvirtualizedGroupsContainer_removeElements(){for(var x=this._listView._groupsToRemove||{},A=Object.keys(x),V=!1,D=this._listView._selection._getFocused(),N=0,B=A.length;N<B;N++){var F=x[A[N]],W=F.header,H=F.group;if(V||D.type!==U.ObjectType.groupHeader||H.userData.index!==D.index||(this._listView._unsetFocusOnItem(),V=!0),W){var z=W.parentNode;z&&(R._disposeElement(W),z.removeChild(W))}}V&&this._listView._setFocusOnItem(D),this._listView._groupsToRemove={}},resetGroups:function UnvirtualizedGroupsContainer_resetGroups(){for(var x=this.groups.slice(0),A=0,V=x.length;A<V;A++){var R=x[A];this.listBinding&&R.userData&&this.listBinding.releaseItem(R.userData)}this.groups.length=0,this.dirty=!0}})})),_NoGroups:A.Namespace._lazy((function(){return A.Class.derive(x._GroupsContainerBase,(function(x){this._listView=x,this.groups=[{startIndex:0}],this.dirty=!0}),{synchronizeGroups:function(){return V.wrap()},addItem:function(){return V.wrap(this.groups[0])},resetGroups:function(){this.groups=[{startIndex:0}],delete this.pinnedItem,delete this.pinnedOffset,this.dirty=!0},renderGroup:function(){return V.wrap(null)},ensureFirstGroup:function(){return V.wrap(this.groups[0])},groupOf:function(){return V.wrap(this.groups[0])},removeElements:function(){}})}))})})),R("WinJS/Controls/ListView/_Helpers",["exports","../../Core/_Base","../ItemContainer/_Constants"],(function helpersInit(x,A,V){"use strict";function repeat(x,A){if("string"==typeof x)return repeat([x],A);var V=new Array(Math.floor(A/x.length)+1).join(x.join(""));return V+=x.slice(0,A%x.length).join("")}A.Namespace._moduleDefine(x,"WinJS.UI",{_nodeListToArray:function nodeListToArray(x){return Array.prototype.slice.call(x)},_repeat:repeat,_stripedContainers:function stripedContainers(x,A){var R=V._containerEvenClass,D=V._containerOddClass,N=A%2==0?[R,D]:[D,R];return repeat(["<div class='win-container "+N[0]+" win-backdrop'></div>","<div class='win-container "+N[1]+" win-backdrop'></div>"],x)}})})),R("WinJS/Controls/ListView/_ItemsContainer",["exports","../../Core/_Base","../../Promise","../../Utilities/_ElementUtilities","../ItemContainer/_Constants"],(function itemsContainerInit(x,A,V,R,D){"use strict";A.Namespace._moduleDefine(x,"WinJS.UI",{_ItemsContainer:A.Namespace._lazy((function(){var _ItemsContainer=function(x){this.site=x,this._itemData={},this.waitingItemRequests={}};return _ItemsContainer.prototype={requestItem:function ItemsContainer_requestItem(x){this.waitingItemRequests[x]||(this.waitingItemRequests[x]=[]);var A=this;return new V((function(V){var R=A._itemData[x];R&&!R.detached&&R.element?V(R.element):A.waitingItemRequests[x].push(V)}))},removeItem:function(x){delete this._itemData[x]},removeItems:function ItemsContainer_removeItems(){this._itemData={},this.waitingItemRequests={}},setItemAt:function ItemsContainer_setItemAt(x,A){this._itemData[x]=A,A.detached||this.notify(x,A)},notify:function ItemsContainer_notify(x,A){if(this.waitingItemRequests[x]){for(var V=this.waitingItemRequests[x],R=0;R<V.length;R++)V[R](A.element);this.waitingItemRequests[x]=[]}},elementAvailable:function ItemsContainer_elementAvailable(x){var A=this._itemData[x];A.detached=!1,this.notify(x,A)},itemAt:function ItemsContainer_itemAt(x){var A=this._itemData[x];return A?A.element:null},itemDataAt:function ItemsContainer_itemDataAt(x){return this._itemData[x]},containerAt:function ItemsContainer_containerAt(x){var A=this._itemData[x];return A?A.container:null},itemBoxAt:function ItemsContainer_itemBoxAt(x){var A=this._itemData[x];return A?A.itemBox:null},itemBoxFrom:function ItemsContainer_containerFrom(x){for(;x&&!R.hasClass(x,D._itemBoxClass);)x=x.parentNode;return x},containerFrom:function ItemsContainer_containerFrom(x){for(;x&&!R.hasClass(x,D._containerClass);)x=x.parentNode;return x},index:function ItemsContainer_index(x){var A=this.containerFrom(x);if(A)for(var V in this._itemData)if(this._itemData[V].container===A)return parseInt(V,10);return D._INVALID_INDEX},each:function ItemsContainer_each(x){for(var A in this._itemData)if(this._itemData.hasOwnProperty(A)){var V=this._itemData[A];x(parseInt(A,10),V.element,V)}},eachIndex:function ItemsContainer_each(x){for(var A in this._itemData)if(x(parseInt(A,10)))break},count:function ItemsContainer_count(){return Object.keys(this._itemData).length}},_ItemsContainer}))})})),R("WinJS/Controls/ListView/_Layouts",["exports","../../Core/_Global","../../Core/_Base","../../Core/_BaseUtils","../../Core/_ErrorFromName","../../Core/_Resources","../../Core/_WriteProfilerMark","../../Animations/_TransitionAnimation","../../Promise","../../Scheduler","../../_Signal","../../Utilities/_Dispose","../../Utilities/_ElementUtilities","../../Utilities/_SafeHtml","../../Utilities/_UI","../ItemContainer/_Constants","./_ErrorMessages"],(function layouts2Init(x,A,V,R,D,N,U,B,F,W,H,z,G,j,q,Q,K){"use strict";var J=G.Key,X=G._uniqueID,Y={get itemInfoIsInvalid(){return"Invalid argument: An itemInfo function must be provided which returns an object with numeric width and height properties."},get groupInfoResultIsInvalid(){return"Invalid result: groupInfo result for cell spanning groups must include the following numeric properties: cellWidth and cellHeight."}},$=A.document.createElement("style");A.document.head.appendChild($);var Z=0,ee=[];function uniqueCssClassName(x){return"_win-dynamic-"+x+"-"+Z++}var te=R._browserStyleEquivalents.transform,ie=R._browserStyleEquivalents.transition.scriptName,ne=te.cssName+" cubic-bezier(0.1, 0.9, 0.2, 1) 167ms";function addDynamicCssRule(x,A,V,R){!function flushDynamicCssRules(){var x,A,V,R=$.sheet.cssRules,D=ee.length;for(x=0;x<D;x++)for(V="."+ee[x]+" ",A=R.length-1;A>=0;A--)-1!==R[A].selectorText.indexOf(V)&&$.sheet.deleteRule(A);ee=[]}();var D="."+Q._listViewClass+" ."+x+" "+V+" { "+R+"}";$.sheet.insertRule(D,0)}function deleteDynamicCssRule(x){ee.push(x)}function clampToRange(x,A,V){return Math.max(x,Math.min(A,V))}function getDimension(x,A){return G.convertToPixels(x,G._getComputedStyle(x,null)[A])}function getOuter(x,A){return getDimension(A,"margin"+x)+getDimension(A,"border"+x+"Width")+getDimension(A,"padding"+x)}function getOuterHeight(x){return getOuter("Top",x)+getOuter("Bottom",x)}function getOuterWidth(x){return getOuter("Left",x)+getOuter("Right",x)}function forEachContainer(x,A){if(x.items)for(var V=0,R=x.items.length;V<R;V++)A(x.items[V],V);else for(var D=0,N=0;D<x.itemsBlocks.length;D++){var U=x.itemsBlocks[D];for(V=0,R=U.items.length;V<R;V++)A(U.items[V],N++)}}function containerFromIndex(x,A){if(A<0)return null;if(x.items)return A<x.items.length?x.items[A]:null;var V=x.itemsBlocks[0].items.length,R=Math.floor(A/V),D=A%V;return R<x.itemsBlocks.length&&D<x.itemsBlocks[R].items.length?x.itemsBlocks[R].items[D]:null}function getItemsContainerTree(x,A){for(var V,R=0,D=A.length;R<D;R++)if(A[R].itemsContainer.element===x){V=A[R].itemsContainer;break}return V}function getItemsContainerLength(x){var A;return x.itemsBlocks?(A=x.itemsBlocks.length)>0?x.itemsBlocks[0].items.length*(A-1)+x.itemsBlocks[A-1].items.length:0:x.items.length}var re=null;V.Namespace._moduleDefine(x,"WinJS.UI",{Layout:V.Class.define((function Layout_ctor(){})),_LayoutCommon:V.Namespace._lazy((function(){return V.Class.derive(x.Layout,null,{groupHeaderPosition:{enumerable:!0,get:function(){return this._groupHeaderPosition},set:function(x){this._groupHeaderPosition=x,this._invalidateLayout()}},initialize:function _LayoutCommon_initialize(x,A){this._inListMode||G.addClass(x.surface,Q._gridLayoutClass),this._backdropColorClassName&&G.addClass(x.surface,this._backdropColorClassName),this._disableBackdropClassName&&G.addClass(x.surface,this._disableBackdropClassName),this._groups=[],this._groupMap={},this._oldGroupHeaderPosition=null,this._usingStructuralNodes=!1,this._site=x,this._groupsEnabled=A,this._resetAnimationCaches(!0)},orientation:{enumerable:!0,get:function(){return this._orientation},set:function(x){this._orientation=x,this._horizontal="horizontal"===x,this._invalidateLayout()}},uninitialize:function _LayoutCommon_uninitialize(){this._elementsToMeasure={},this._site&&(G.removeClass(this._site.surface,Q._gridLayoutClass),G.removeClass(this._site.surface,Q._headerPositionTopClass),G.removeClass(this._site.surface,Q._headerPositionLeftClass),G.removeClass(this._site.surface,Q._structuralNodesClass),G.removeClass(this._site.surface,Q._singleItemsBlockClass),G.removeClass(this._site.surface,Q._noCSSGrid),this._site.surface.style.cssText="",this._groups&&(function cleanGroups(x){var A,V=x.length;for(A=0;A<V;A++)x[A].cleanUp(!0)}(this._groups),this._groups=null,this._groupMap=null),this._layoutPromise&&(this._layoutPromise.cancel(),this._layoutPromise=null),this._resetMeasurements(),this._oldGroupHeaderPosition=null,this._usingStructuralNodes=!1,this._envInfo=null,this._backdropColorClassName&&(G.removeClass(this._site.surface,this._backdropColorClassName),deleteDynamicCssRule(this._backdropColorClassName),this._backdropColorClassName=null),this._disableBackdropClassName&&(G.removeClass(this._site.surface,this._disableBackdropClassName),deleteDynamicCssRule(this._disableBackdropClassName),this._disableBackdropClassName=null),this._site=null,this._groupsEnabled=null,this._animationsRunning&&this._animationsRunning.cancel(),this._animatingItemsBlocks={})},numberOfItemsPerItemsBlock:{get:function _LayoutCommon_getNumberOfItemsPerItemsBlock(){var A=this;return A._measureItem(0).then((function(){return A._sizes.viewportContentSize!==A._getViewportCrossSize()&&A._viewportSizeChanged(A._getViewportCrossSize()),function allGroupsAreUniform(){var x,V=A._site.groupCount;for(x=0;x<V;x++)if(A._isCellSpanning(x))return!1;return!0}()?A._envInfo.nestedFlexTooLarge||A._envInfo.nestedFlexTooSmall?(A._usingStructuralNodes=!0,Number.MAX_VALUE):(A._usingStructuralNodes=x._LayoutCommon._barsPerItemsBlock>0,x._LayoutCommon._barsPerItemsBlock*A._itemsPerBar):(A._usingStructuralNodes=!1,null)}))}},layout:function _LayoutCommon_layout(x,A,V,R){var D,N=this,U=N._site;function layoutGroupContent(x,V,R){var D,U=N._groups[x],B=Math.max(0,A.firstIndex-U.startIndex),F=N._rangeForGroup(U,V);if(!R)return F||(D=U.startIndex+U.count-1<V.firstIndex),U.layoutUnrealizedRange(B,F,D);U.layoutRealizedRange(B,F)}return D=N._measureItem(0).then((function(){return G[N._usingStructuralNodes?"addClass":"removeClass"](N._site.surface,Q._structuralNodesClass),G[N._envInfo.nestedFlexTooLarge||N._envInfo.nestedFlexTooSmall?"addClass":"removeClass"](N._site.surface,Q._singleItemsBlockClass),N._sizes.viewportContentSize!==N._getViewportCrossSize()&&N._viewportSizeChanged(N._getViewportCrossSize()),N._cacheRemovedElements(V,N._cachedItemRecords,N._cachedInsertedItemRecords,N._cachedRemovedItems,!1),N._cacheRemovedElements(R,N._cachedHeaderRecords,N._cachedInsertedHeaderRecords,N._cachedRemovedHeaders,!0),function updateGroups(){function createGroup(x,A){return new(x.enableCellSpanning?se.CellSpanningGroup:se.UniformGroup)(N,A)}var V,R,D=N._groups.length>0?N._getRealizationRange():null,U=[],B=[],W={},H={},z=0,G=x.length;for(V=0;V<G;V++){var j=null,q=N._getGroupInfo(V),Q=N._site.groupFromIndex(V).key,K=N._groupMap[Q],J=K instanceof se.CellSpanningGroup,X=q.enableCellSpanning;if(K)if(J!==X)W[Q]=!0;else{var Y=Math.max(0,A.firstIndex-K.startIndex),$=N._rangeForGroup(K,D);$&&Y<=$.lastIndex&&(j={firstIndex:Math.max(Y,$.firstIndex),lastIndex:$.lastIndex})}var Z,ee=createGroup(q,x[V].itemsContainer.element);Z=ee.prepareLayoutWithCopyOfTree?ee.prepareLayoutWithCopyOfTree({element:(R=x[V].itemsContainer).element,items:function copyItems(x){if(N._usingStructuralNodes){var A=[];return x.itemsBlocks.forEach((function(x){A=A.concat(x.items.slice(0))})),A}return x.items.slice(0)}(R)},j,K,{groupInfo:q,startIndex:z}):ee.prepareLayout(getItemsContainerLength(x[V].itemsContainer),j,K,{groupInfo:q,startIndex:z}),B.push(Z),z+=ee.count,U.push(ee),H[Q]=ee}return F.join(B).then((function(){for(var x=0,A=0,V=U.length;A<V;A++){var R=U[A];R.offset=x,x+=N._getGroupSize(R)}Object.keys(N._groupMap).forEach((function(x){var A=!W[x];N._groupMap[x].cleanUp(A)})),N._groups=U,N._groupMap=H}))}()})).then((function(){N._syncDomWithGroupHeaderPosition(x);var D=0;if(N._groups.length>0){var B=N._groups[N._groups.length-1];D=B.offset+N._getGroupSize(B)}N._horizontal?(N._groupsEnabled&&N._groupHeaderPosition===oe.left?U.surface.style.cssText+=";height:"+N._sizes.surfaceContentSize+"px;-ms-grid-columns: ("+N._sizes.headerContainerWidth+"px auto)["+x.length+"]":U.surface.style.height=N._sizes.surfaceContentSize+"px",(N._envInfo.nestedFlexTooLarge||N._envInfo.nestedFlexTooSmall)&&(U.surface.style.width=D+"px")):(N._groupsEnabled&&N._groupHeaderPosition===oe.top?U.surface.style.cssText+=";width:"+N._sizes.surfaceContentSize+"px;-ms-grid-rows: ("+N._sizes.headerContainerHeight+"px auto)["+x.length+"]":U.surface.style.width=N._sizes.surfaceContentSize+"px",(N._envInfo.nestedFlexTooLarge||N._envInfo.nestedFlexTooSmall)&&(U.surface.style.height=D+"px")),function layoutRealizedRange(){if(0!==N._groups.length){var V,R=N._getRealizationRange(),D=x.length;for(V=U.groupIndexFromItemIndex(A.firstIndex);V<D;V++)layoutGroupContent(V,R,!0),N._layoutGroup(V)}}(),N._layoutAnimations(V,R)}),(function(x){return F.wrapError(x)})),N._layoutPromise=D.then((function(){return function layoutUnrealizedRange(){if(0===N._groups.length)return F.wrap();var x=N._getRealizationRange(),V=U.groupIndexFromItemIndex(x.firstIndex-1),R=U.groupIndexFromItemIndex(x.lastIndex+1),D=U.groupIndexFromItemIndex(A.firstIndex),B=[],W=N._groups.length,H=!1,z=V,G=Math.max(D,R);for(G=Math.max(z+1,G);!H;)H=!0,z>=D&&(B.push(layoutGroupContent(z,x,!1)),H=!1,z--),G<W&&(B.push(layoutGroupContent(G,x,!1)),H=!1,G++);return F.join(B)}().then((function(){}),(function(x){return F.wrapError(x)}))})),{realizedRangeComplete:D,layoutComplete:N._layoutPromise}},itemsFromRange:function _LayoutCommon_itemsFromRange(x,A){return this._rangeContainsItems(x,A)?{firstIndex:this._firstItemFromRange(x),lastIndex:this._lastItemFromRange(A)}:{firstIndex:0,lastIndex:-1}},getAdjacent:function _LayoutCommon_getAdjacent(A,V){var R=this,D=R._site.groupIndexFromItemIndex(A.index),N=R._groups[D],U=R._adjustedKeyForOrientationAndBars(R._adjustedKeyForRTL(V),N instanceof se.CellSpanningGroup);if(A.type||(A.type=q.ObjectType.item),A.type===q.ObjectType.item||V!==J.pageUp&&V!==J.pageDown){if(A.type===q.ObjectType.header&&U===J.rightArrow)return{type:R._groupsEnabled?q.ObjectType.groupHeader:q.ObjectType.footer,index:0};if(A.type===q.ObjectType.footer&&U===J.leftArrow)return{type:R._groupsEnabled?q.ObjectType.groupHeader:q.ObjectType.header,index:0};if(A.type===q.ObjectType.groupHeader){if(U===J.leftArrow){var B=A.index-1;return{type:(B=R._site.header?B:Math.max(0,B))>-1?q.ObjectType.groupHeader:q.ObjectType.header,index:B>-1?B:0}}return U===J.rightArrow?(B=A.index+1,{type:(B=R._site.header?B:Math.min(R._groups.length-1,A.index+1))>=R._groups.length?q.ObjectType.header:q.ObjectType.groupHeader,index:B>=R._groups.length?0:B}):A}}else{var F=0;F=A.type===q.ObjectType.groupHeader?R._groups[A.index].startIndex:A.type===q.ObjectType.header?0:R._groups[R._groups.length-1].count-1,A={type:q.ObjectType.item,index:F}}switch(R._adjustedKeyForRTL(V)){case J.upArrow:case J.leftArrow:case J.downArrow:case J.rightArrow:return function handleArrowKeys(){var x={type:A.type,index:A.index-N.startIndex},V=N.getAdjacent(x,U);if("boundary"===V){var B=R._groups[D-1],F=R._groups[D+1],W=R._groups.length-1;if(U===J.leftArrow){if(0===D)return A;if(B instanceof se.UniformGroup&&N instanceof se.UniformGroup){var H=R._indexToCoordinate(x.index),z=R._horizontal?H.row:H.column,G=Math.floor((B.count-1)/R._itemsPerBar)*R._itemsPerBar;return{type:q.ObjectType.item,index:B.startIndex+Math.min(B.count-1,G+z)}}return{type:q.ObjectType.item,index:N.startIndex-1}}return U===J.rightArrow?D===W?A:N instanceof se.UniformGroup&&F instanceof se.UniformGroup?(H=R._indexToCoordinate(x.index),z=R._horizontal?H.row:H.column,{type:q.ObjectType.item,index:F.startIndex+Math.min(F.count-1,z)}):{type:q.ObjectType.item,index:F.startIndex}:A}return V.index+=N.startIndex,V}();default:return x._LayoutCommon.prototype._getAdjacentForPageKeys.call(R,A,V)}},hitTest:function _LayoutCommon_hitTest(x,A){var V,R=this._sizes;x-=R.layoutOriginX,A-=R.layoutOriginY;var D=this._groupFromOffset(this._horizontal?x:A),N=this._groups[D];return this._horizontal?x-=N.offset:A-=N.offset,this._groupsEnabled&&(this._groupHeaderPosition===oe.left?x-=R.headerContainerWidth:A-=R.headerContainerHeight),(V=N.hitTest(x,A)).index+=N.startIndex,V.insertAfterIndex+=N.startIndex,V},setupAnimations:function _LayoutCommon_setupAnimations(){if(0!==this._groups.length){if(!Object.keys(this._cachedItemRecords).length)for(var x=this._getRealizationRange(),A=this._site.tree,V=0,R="horizontal"===this.orientation,D=0,N=A.length;D<N;D++){var U=A[D],B=!1,F=this._groups[D],W=F instanceof se.CellSpanningGroup,H=F?F.offset:0;if(forEachContainer(U.itemsContainer,function(A,R){if(x.firstIndex<=V&&x.lastIndex>=V&&(B=!0,!this._cachedItemRecords[V])){var N=this._getItemPositionForAnimations(V,D,R),U=N.row,F=N.column,H=N.left,z=N.top;this._cachedItemRecords[V]={oldRow:U,oldColumn:F,oldLeft:H,oldTop:z,width:N.width,height:N.height,element:A,inCellSpanningGroup:W}}V++}.bind(this)),B){var z=D;if(!this._cachedHeaderRecords[z]){var G=this._getHeaderPositionForAnimations(z);this._cachedHeaderRecords[z]={oldLeft:G.left,oldTop:G.top,width:G.width,height:G.height,element:U.header}}this._cachedGroupRecords[X(U.itemsContainer.element)]||(this._cachedGroupRecords[X(U.itemsContainer.element)]={oldLeft:R?H:0,left:R?H:0,oldTop:R?0:H,top:R?0:H,element:U.itemsContainer.element})}}}else this._resetAnimationCaches()},_layoutAnimations:function _LayoutCommon_layoutAnimations(x,A){if(Object.keys(this._cachedItemRecords).length||Object.keys(this._cachedGroupRecords).length||Object.keys(this._cachedHeaderRecords).length){this._updateAnimationCache(x,A);for(var V=this._getRealizationRange(),R=this._site.tree,D=0,N="horizontal"===this.orientation,U=0,B=R.length;U<B;U++){var F=R[U],W=this._groups[U],H=W instanceof se.CellSpanningGroup,z=W?W.offset:0,j=0,q=0,K=this._cachedGroupRecords[X(F.itemsContainer.element)];K&&(N?j=K.oldLeft-z:q=K.oldTop-z),forEachContainer(F.itemsContainer,function(x,A){if(V.firstIndex<=D&&V.lastIndex>=D){var R=this._cachedItemRecords[D];if(R){var N=this._getItemPositionForAnimations(D,U,A),B=N.row,F=N.column,W=N.left,z=N.top;if(R.inCellSpanningGroup=R.inCellSpanningGroup||H,R.oldRow!==B||R.oldColumn!==F||R.oldTop!==z||R.oldLeft!==W){R.row=B,R.column=F,R.left=W,R.top=z;var K=R.oldLeft-R.left-j,J=R.oldTop-R.top-q;if(K=(this._site.rtl?-1:1)*K,R.xOffset=K,R.yOffset=J,0!==K||0!==J){var Y=R.element;R.needsToResetTransform=!0,Y.style[ie]="",Y.style[te.scriptName]="translate("+K+"px,"+J+"px)"}var $=x.parentNode;G.hasClass($,Q._itemsBlockClass)&&(this._animatingItemsBlocks[X($)]=$)}}else this._cachedInsertedItemRecords&&(this._cachedInsertedItemRecords[D]=x),x.style[ie]="",x.style.opacity=0}D++}.bind(this));var J=U,Y=this._cachedHeaderRecords[J];if(Y){var $=this._getHeaderPositionForAnimations(J);if(Y.height=$.height,Y.width=$.width,Y.oldLeft!==$.left||Y.oldTop!==$.top){Y.left=$.left,Y.top=$.top;var Z=Y.oldLeft-Y.left,ee=Y.oldTop-Y.top;if(0!=(Z=(this._site.rtl?-1:1)*Z)||0!==ee){Y.needsToResetTransform=!0;var ne=Y.element;ne.style[ie]="",ne.style[te.scriptName]="translate("+Z+"px,"+ee+"px)"}}}if(K&&(N&&K.left!==z||!N&&K.top!==z)){var re=K.element;if(0===j&&0===q)K.needsToResetTransform&&(K.needsToResetTransform=!1,re.style[te.scriptName]="");else{var oe=(this._site.rtl?-1:1)*j,ae=q;K.needsToResetTransform=!0,re.style[ie]="",re.style[te.scriptName]="translate("+oe+"px, "+ae+"px)"}}}if(this._inListMode||1===this._itemsPerBar)for(var le=Object.keys(this._animatingItemsBlocks),ce=0,de=le.length;ce<de;ce++)this._animatingItemsBlocks[le[ce]].style.overflow="visible"}},executeAnimations:function _LayoutCommon_executeAnimations(){var A=new H;if(this._filterInsertedElements(),this._filterMovedElements(),this._filterRemovedElements(),0===this._insertedElements.length&&0===this._removedElements.length&&0===this._itemMoveRecords.length&&0===this._moveRecords.length)return this._resetAnimationCaches(!0),A.complete(),A.promise;this._animationsRunning=A.promise;for(var V=x.Layout._debugAnimations||x.Layout._slowAnimations,D=this._site,N=this._insertedElements,U=this._removedElements,W=this._itemMoveRecords,j=this._moveRecords,q=0,K=0,J=null,Y=[],$=!1,Z=!1,ee=0,ne=0,re={},se=0,oe=0,ae=0,le=0,ce=[],de="horizontal"===this.orientation,ue=de?"oldColumn":"oldRow",he=de?"column":"row",pe=de?"oldTop":"oldLeft",me=de?"top":"left",ge=this._animatingItemsBlocks,ye=0,fe=W.length;ye<fe;ye++)if(W[ye].inCellSpanningGroup){$=!0;break}var _e=this;function startAnimations(){if(function removePhase(){if(U.length){q+=60,K+=60;var x=120;V&&(x*=10),Y.push(B.executeTransition(U,[{property:"opacity",delay:0,duration:x,timing:"linear",to:0,skipStylesReset:!0}]))}}(),$)!function cellSpanningFadeOutMove(){for(var x=[],A=0,R=W.length;A<R;A++){var D=W[A].element;x.push(D)}for(A=0,R=j.length;A<R;A++)D=j[A].element,x.push(D);var N=120;V&&(N*=10),Y.push(B.executeTransition(x,{property:"opacity",delay:0,duration:N,timing:"linear",to:0})),waitForNextPhase(cellSpanningFadeInMove)}();else{if(_e._itemsPerBar>1)for(var x=_e._itemsPerBar*_e._sizes.containerCrossSize+_e._getHeaderSizeContentAdjustment()+_e._sizes.containerMargins[de?"top":D.rtl?"right":"left"]+(de?_e._sizes.layoutOriginY:_e._sizes.layoutOriginX),A=0,R=W.length;A<R;A++){var N=W[A];N[ue]>N[he]?(se=Math.max(se,N[pe]+N[de?"height":"width"]),ae=Math.max(ae,x-N[me]),Z=!0,ce.push(N)):N[ue]<N[he]&&(oe=Math.max(oe,x-N[pe]),le=Math.max(le,N[me]+N[de?"height":"width"]),ce.push(N),Z=!0)}D.rtl&&!de&&(se*=-1,ae*=-1,oe*=-1,le*=-1),Z?function reflowPhase(x){for(var A={},R=0,N=ce.length;R<N;R++){var U=ce[R],F=U.xOffset,W=U.yOffset;U[ue]>U[he]?de?W-=se:F-=se:U[ue]<U[he]&&(de?W+=oe:F+=oe);var H=U.element;ee=Math.min(ee,de?F:W),ne=Math.max(ne,de?F:W);var z=H.parentNode;G.hasClass(z,"win-itemscontainer")||(z=z.parentNode);var j=A[X(z)];if(!j){var K=getItemsContainerLength(getItemsContainerTree(z,D.tree));A[X(z)]=j=Math.ceil(K/x)-1}ce[R][de?"column":"row"]===j&&(re[X(z)]=z);var J=80;V&&(J*=10),Y.push(B.executeTransition(H,{property:te.cssName,delay:q,duration:J,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:"translate("+F+"px,"+W+"px)"}))}var $=Object.keys(re);for(R=0,N=$.length;R<N;R++){var Z=re[$[R]];D.rtl&&de?(Z.style.paddingLeft=-1*ee+"px",Z.style.marginLeft=ee+"px"):(Z.style[de?"paddingRight":"paddingBottom"]=ne+"px",Z.style[de?"marginRight":"marginBottom"]="-"+ne+"px")}var ie=Object.keys(ge);for(R=0,N=ie.length;R<N;R++)ge[ie[R]].classList.add(Q._clipClass);waitForNextPhase(afterReflowPhase)}(_e._itemsPerBar):directMovePhase()}}function waitForNextPhase(V){(J=F.join(Y)).done((function(){Y=[],A&&(x.Layout._debugAnimations?R._requestAnimationFrame((function(){V()})):V())}))}function cellSpanningFadeInMove(){K=0;for(var x=[],A=0,R=W.length;A<R;A++)(D=W[A].element).style[te.scriptName]="",x.push(D);for(A=0,R=j.length;A<R;A++){var D;(D=j[A].element).style[te.scriptName]="",x.push(D)}var N=120;V&&(N*=10),Y.push(B.executeTransition(x,{property:"opacity",delay:K,duration:N,timing:"linear",to:1})),addPhase()}function cleanupItemsContainers(){for(var x=Object.keys(re),A=0,V=x.length;A<V;A++){var R=re[x[A]];D.rtl&&de?(R.style.paddingLeft="",R.style.marginLeft=""):(R.style[de?"paddingRight":"paddingBottom"]="",R.style[de?"marginRight":"marginBottom"]="")}re={};var N=Object.keys(ge);for(A=0,V=N.length;A<V;A++){var U=ge[N[A]];U.style.overflow="",U.classList.remove(Q._clipClass)}}function afterReflowPhase(){for(var A=0,V=ce.length;A<V;A++){var D=ce[A],N=0,U=0;D[ue]>D[he]?de?U=ae:N=ae:D[ue]<D[he]&&(de?U=-1*le:N=-1*le),D.element.style[ie]="",D.element.style[te.scriptName]="translate("+N+"px,"+U+"px)"}x.Layout._debugAnimations?R._requestAnimationFrame((function(){directMovePhase(!0)})):directMovePhase(!0)}function directMovePhase(x){var A=200;if(x&&(A=150,q=0,K=0),V&&(A*=10),W.length>0||j.length>0){for(var R=[],D=0,N=j.length;D<N;D++){var U=j[D].element;R.push(U)}for(D=0,N=W.length;D<N;D++)U=W[D].element,R.push(U);Y.push(B.executeTransition(R,{property:te.cssName,delay:q,duration:A,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:""})),K+=80}addPhase()}function addPhase(){if(N.length>0){var x=120;V&&(x*=10),Y.push(B.executeTransition(N,[{property:"opacity",delay:K,duration:x,timing:"linear",to:1}]))}waitForNextPhase(completePhase)}function completePhase(){cleanupItemsContainers();for(var x=0,V=U.length;x<V;x++){var R=U[x];R.parentNode&&(z._disposeElement(R),R.parentNode.removeChild(R))}_e._animationsRunning=null,A.complete()}return x.Layout._debugAnimations?R._requestAnimationFrame((function(){startAnimations()})):startAnimations(),this._resetAnimationCaches(!0),A.promise.then(null,function(){cleanupItemsContainers();for(var x=0,V=j.length;x<V;x++)(R=j[x].element).style[te.scriptName]="",R.style.opacity=1;for(x=0,V=W.length;x<V;x++)(R=W[x].element).style[te.scriptName]="",R.style.opacity=1;for(x=0,V=N.length;x<V;x++)N[x].style.opacity=1;for(x=0,V=U.length;x<V;x++){var R;(R=U[x]).parentNode&&(z._disposeElement(R),R.parentNode.removeChild(R))}this._animationsRunning=null,A=null,J&&J.cancel()}.bind(this)),A.promise},dragOver:function _LayoutCommon_dragOver(x,A,V){var R=this.hitTest(x,A),D=this._groups?this._site.groupIndexFromItemIndex(R.index):0,N=this._site.tree[D].itemsContainer,U=getItemsContainerLength(N),B=this._groups?this._groups[D].startIndex:0,F=this._getVisibleRange();R.index-=B,R.insertAfterIndex-=B,F.firstIndex=Math.max(F.firstIndex-B-1,0),F.lastIndex=Math.min(F.lastIndex-B+1,U);var W=Math.max(Math.min(U-1,R.insertAfterIndex),-1),H=Math.min(W+1,U);if(V){for(var z=W;z>=F.firstIndex;z--){if(!V._isIncluded(z+B)){W=z;break}z===F.firstIndex&&(W=-1)}for(z=H;z<F.lastIndex;z++){if(!V._isIncluded(z+B)){H=z;break}z===F.lastIndex-1&&(H=U)}}var G=containerFromIndex(N,H),j=containerFromIndex(N,W);if(this._animatedDragItems){z=0;for(var q=this._animatedDragItems.length;z<q;z++){var Q=this._animatedDragItems[z];Q&&(Q.style[ie]=this._site.animationsDisabled?"":ne,Q.style[te.scriptName]="")}}this._animatedDragItems=[];var K="horizontal"===this.orientation,J=this._inListMode||1===this._itemsPerBar;this._groups&&this._groups[D]instanceof se.CellSpanningGroup&&(J=1===this._groups[D]._slotsPerColumn);var X=0,Y=0;!K&&!J||K&&J?X=this._site.rtl?-12:12:Y=12,G&&(G.style[ie]=this._site.animationsDisabled?"":ne,G.style[te.scriptName]="translate("+X+"px, "+Y+"px)",this._animatedDragItems.push(G)),j&&(j.style[ie]=this._site.animationsDisabled?"":ne,j.style[te.scriptName]="translate("+-X+"px, -"+Y+"px)",this._animatedDragItems.push(j))},dragLeave:function _LayoutCommon_dragLeave(){if(this._animatedDragItems)for(var x=0,A=this._animatedDragItems.length;x<A;x++)this._animatedDragItems[x].style[ie]=this._site.animationsDisabled?"":ne,this._animatedDragItems[x].style[te.scriptName]="";this._animatedDragItems=[]},_setMaxRowsOrColumns:function _LayoutCommon_setMaxRowsOrColumns(x){x===this._maxRowsOrColumns||this._inListMode||(this._sizes&&this._sizes.containerSizeLoaded&&(this._itemsPerBar=Math.floor(this._sizes.maxItemsContainerContentSize/this._sizes.containerCrossSize),x&&(this._itemsPerBar=Math.min(this._itemsPerBar,x)),this._itemsPerBar=Math.max(1,this._itemsPerBar)),this._maxRowsOrColumns=x,this._invalidateLayout())},_getItemPosition:function _LayoutCommon_getItemPosition(x){if(this._groupsEnabled){var A=Math.min(this._groups.length-1,this._site.groupIndexFromItemIndex(x)),V=x-this._groups[A].startIndex;return this._getItemPositionForAnimations(x,A,V)}return this._getItemPositionForAnimations(x,0,x)},_getRealizationRange:function _LayoutCommon_getRealizationRange(){var x=this._site.realizedRange;return{firstIndex:this._firstItemFromRange(x.firstPixel),lastIndex:this._lastItemFromRange(x.lastPixel)}},_getVisibleRange:function _LayoutCommon_getVisibleRange(){var x=this._site.visibleRange;return{firstIndex:this._firstItemFromRange(x.firstPixel),lastIndex:this._lastItemFromRange(x.lastPixel)}},_resetAnimationCaches:function _LayoutCommon_resetAnimationCaches(x){if(!x){this._resetStylesForRecords(this._cachedGroupRecords),this._resetStylesForRecords(this._cachedItemRecords),this._resetStylesForRecords(this._cachedHeaderRecords),this._resetStylesForInsertedRecords(this._cachedInsertedItemRecords),this._resetStylesForInsertedRecords(this._cachedInsertedHeaderRecords),this._resetStylesForRemovedRecords(this._cachedRemovedItems),this._resetStylesForRemovedRecords(this._cachedRemovedHeaders);for(var A=Object.keys(this._animatingItemsBlocks),V=0,R=A.length;V<R;V++){var D=this._animatingItemsBlocks[A[V]];D.style.overflow="",D.classList.remove(Q._clipClass)}}this._cachedGroupRecords={},this._cachedItemRecords={},this._cachedHeaderRecords={},this._cachedInsertedItemRecords={},this._cachedInsertedHeaderRecords={},this._cachedRemovedItems=[],this._cachedRemovedHeaders=[],this._animatingItemsBlocks={}},_cacheRemovedElements:function _LayoutCommon_cacheRemovedElements(x,A,V,R,D){var N,U,B="left";this._site.rtl&&(B="right"),D?(N=this._sizes.headerContainerOuterX,U=this._sizes.headerContainerOuterY):(N=this._sizes.containerMargins[B],U=this._sizes.containerMargins.top);for(var F=0,W=x.length;F<W;F++){var H=x[F];if(-1===H.newIndex){var z=H.element,G=A[H.oldIndex];G&&(G.element=z,delete A[H.oldIndex],z.style.position="absolute",z.style[ie]="",z.style.top=G.oldTop-U+"px",z.style[B]=G.oldLeft-N+"px",z.style.width=G.width+"px",z.style.height=G.height+"px",z.style[te.scriptName]="",this._site.surface.appendChild(z),R.push(G)),V[H.oldIndex]&&delete V[H.oldIndex]}}},_cacheInsertedElements:function _LayoutCommon_cacheInsertedItems(x,A,V){for(var R={},D=0,N=x.length;D<N;D++){var U=x[D],B=A[U.oldIndex];if(B&&delete A[U.oldIndex],B||-1===U.oldIndex||U.moved){V[U.newIndex]&&delete V[U.newIndex];var F=U.element;R[U.newIndex]=F,F&&F.style&&(F.style[ie]="",F.style[te.scriptName]="",F.style.opacity=0)}}var W=Object.keys(A);for(D=0,N=W.length;D<N;D++)R[W[D]]=A[W[D]];return R},_resetStylesForRecords:function _LayoutCommon_resetStylesForRecords(x){for(var A=Object.keys(x),V=0,R=A.length;V<R;V++){var D=x[A[V]];D.needsToResetTransform&&(D.element.style[te.scriptName]="",D.needsToResetTransform=!1)}},_resetStylesForInsertedRecords:function _LayoutCommon_resetStylesForInsertedRecords(x){for(var A=Object.keys(x),V=0,R=A.length;V<R;V++){var D=x[A[V]];D&&D.style&&(D.style.opacity=1)}},_resetStylesForRemovedRecords:function _LayoutCommon_resetStylesForRemovedRecords(x){for(var A=0,V=x.length;A<V;A++){var R=x[A].element;R.parentNode&&(z._disposeElement(R),R.parentNode.removeChild(R))}},_updateAnimationCache:function _LayoutCommon_updateAnimationCache(x,A){this._resetStylesForRecords(this._cachedItemRecords),this._resetStylesForRecords(this._cachedHeaderRecords),this._resetStylesForInsertedRecords(this._cachedInsertedItemRecords),this._resetStylesForInsertedRecords(this._cachedInsertedHeaderRecords);for(var V={},R=this._getRealizationRange(),D=this._site.tree,N=0,U=0,B=D.length;N<B;N++)forEachContainer(D[N].itemsContainer,(function(x){R.firstIndex<=U&&R.lastIndex>=U&&(V[X(x)]=!0),U++}));function updateIndicies(x,A){for(var R={},D=0,N=x.length;D<N;D++){var U=x[D],B=A[U.oldIndex];B&&(R[U.newIndex]=B,B.element=U.element,delete A[U.oldIndex])}var F=Object.keys(A);for(D=0,N=F.length;D<N;D++){var W=F[D],H=A[W];H.element&&!V[X(H.element)]||(R[W]=H)}return R}this._cachedItemRecords=updateIndicies(x,this._cachedItemRecords),this._cachedHeaderRecords=updateIndicies(A,this._cachedHeaderRecords),this._cachedInsertedItemRecords=this._cacheInsertedElements(x,this._cachedInsertedItemRecords,this._cachedItemRecords),this._cachedInsertedHeaderRecords=this._cacheInsertedElements(A,this._cachedInsertedHeaderRecords,this._cachedHeaderRecords)},_filterRemovedElements:function _LayoutCommon_filterRemovedElements(){if(this._removedElements=[],this._site.animationsDisabled)return this._resetStylesForRemovedRecords(this._cachedRemovedItems),void this._resetStylesForRemovedRecords(this._cachedRemovedHeaders);var x=this,A="horizontal"===this.orientation?"oldLeft":"oldTop",V="horizontal"===this.orientation?"width":"height",R=this._site.scrollbarPos,D=R+this._site.viewportSize[V]-1;function filterRemovedElements(N,U){for(var B=0,F=N.length;B<F;B++){var W=N[B],H=W.element;W[A]+W[V]-1<R||W[A]>D||!x._site.viewport.contains(H)?H.parentNode&&(z._disposeElement(H),H.parentNode.removeChild(H)):U.push(H)}}filterRemovedElements(this._cachedRemovedItems,this._removedElements),filterRemovedElements(this._cachedRemovedHeaders,this._removedElements)},_filterInsertedElements:function _LayoutCommon_filterInsertedElements(){if(this._insertedElements=[],this._site.animationsDisabled)return this._resetStylesForInsertedRecords(this._cachedInsertedItemRecords),void this._resetStylesForInsertedRecords(this._cachedInsertedHeaderRecords);var x=this,A=this._getVisibleRange();function filterInsertedElements(V,R){if(V)for(var D=Object.keys(V),N=0,U=D.length;N<U;N++){var B=D[N],F=V[B];F&&(B<A.firstIndex||B>A.lastIndex||x._site.viewport.contains(F.element)?F.style.opacity=1:R.push(F))}}filterInsertedElements(this._cachedInsertedItemRecords,this._insertedElements),filterInsertedElements(this._cachedInsertedHeaderRecords,this._insertedElements)},_filterMovedElements:function _LayoutCommon_filterMovedElements(){var x=this,A="horizontal"===this.orientation?"oldLeft":"oldTop",V="horizontal"===this.orientation?"left":"top",R="horizontal"===this.orientation?"width":"height",D=this._getRealizationRange(),N=this._site.scrollbarPos,U=N+this._site.viewportSize[R]-1;if(this._itemMoveRecords=[],this._moveRecords=[],!this._site.animationsDisabled)for(var B=this._site.tree,F=0,W=0,H=B.length;W<H;W++){var z=B[W],G=!1;forEachContainer(z.itemsContainer,function(){if(D.firstIndex<=F&&D.lastIndex>=F){var B=this._cachedItemRecords[F];B&&(B[A]+B[R]-1>=N&&B[A]<=U||B[V]+B[R]-1>=N&&B[V]<=U)&&x._site.viewport.contains(B.element)&&(G=!0,B.needsToResetTransform&&(this._itemMoveRecords.push(B),delete this._cachedItemRecords[F]))}F++}.bind(this));var j=W,q=this._cachedHeaderRecords[j];q&&G&&q.needsToResetTransform&&(this._moveRecords.push(q),delete this._cachedHeaderRecords[j]);var Q=this._cachedGroupRecords[X(z.itemsContainer.element)];Q&&G&&Q.needsToResetTransform&&(this._moveRecords.push(Q),delete this._cachedGroupRecords[X(z.itemsContainer.element)])}this._resetStylesForRecords(this._cachedGroupRecords),this._resetStylesForRecords(this._cachedItemRecords),this._resetStylesForRecords(this._cachedHeaderRecords)},_getItemPositionForAnimations:function _LayoutCommon_getItemPositionForAnimations(x,A,V){var R=this._groups[A].getItemPositionForAnimations(V),D=this._groups[A]?this._groups[A].offset:0,N=this._groupsEnabled&&this._groupHeaderPosition===oe.left?this._sizes.headerContainerWidth:0,U=this._groupsEnabled&&this._groupHeaderPosition===oe.top?this._sizes.headerContainerHeight:0;return R.left+=this._sizes.layoutOriginX+N+this._sizes.itemsContainerOuterX,R.top+=this._sizes.layoutOriginY+U+this._sizes.itemsContainerOuterY,R[this._horizontal?"left":"top"]+=D,R},_getHeaderPositionForAnimations:function(x){var A;if(this._groupsEnabled){var V=this._sizes.headerContainerWidth-this._sizes.headerContainerOuterWidth,R=this._sizes.headerContainerHeight-this._sizes.headerContainerOuterHeight;this._groupHeaderPosition!==oe.left||this._horizontal?this._groupHeaderPosition===oe.top&&this._horizontal&&(V=this._groups[x].getItemsContainerSize()-this._sizes.headerContainerOuterWidth):R=this._groups[x].getItemsContainerSize()-this._sizes.headerContainerOuterHeight;var D=this._horizontal?this._groups[x].offset:0,N=this._horizontal?0:this._groups[x].offset;A={top:this._sizes.layoutOriginY+N+this._sizes.headerContainerOuterY,left:this._sizes.layoutOriginX+D+this._sizes.headerContainerOuterX,height:R,width:V}}else A={top:0,left:0,height:0,width:0};return A},_rangeContainsItems:function _LayoutCommon_rangeContainsItems(x,A){if(0===this._groups.length)return!1;var V=this._groups[this._groups.length-1],R=this._sizes.layoutOrigin+V.offset+this._getGroupSize(V)-1;return A>=0&&x<=R},_itemFromOffset:function _LayoutCommon_itemFromOffset(x,A){var V=this;if(0===this._groups.length)return 0;A=A||{},x=function assignItemMargins(x){if(!A.wholeItem){var R=V._horizontal?V._site.rtl?"right":"left":"top",D=V._horizontal?V._site.rtl?"left":"right":"bottom";return A.last?x-V._sizes.containerMargins[R]:x+V._sizes.containerMargins[D]}return x}(x-=this._sizes.layoutOrigin);var R=this._groupFromOffset(function assignGroupMarginsAndHeaders(x){return A.last?x-V._getHeaderSizeGroupAdjustment()-V._sizes.itemsContainerOuterStart:x}(x)),D=this._groups[R];return x-=D.offset,x-=this._getHeaderSizeGroupAdjustment(),D.startIndex+D.itemFromOffset(x,A)},_firstItemFromRange:function _LayoutCommon_firstItemFromRange(x,A){return(A=A||{}).last=0,this._itemFromOffset(x,A)},_lastItemFromRange:function _LayoutCommon_lastItemFromRange(x,A){return(A=A||{}).last=1,this._itemFromOffset(x,A)},_adjustedKeyForRTL:function _LayoutCommon_adjustedKeyForRTL(x){return this._site.rtl&&(x===J.leftArrow?x=J.rightArrow:x===J.rightArrow&&(x=J.leftArrow)),x},_adjustedKeyForOrientationAndBars:function _LayoutCommon_adjustedKeyForOrientationAndBars(x,A){var V=x;if(A)return x;if(!this._horizontal)switch(V){case J.leftArrow:V=J.upArrow;break;case J.rightArrow:V=J.downArrow;break;case J.upArrow:V=J.leftArrow;break;case J.downArrow:V=J.rightArrow}return 1===this._itemsPerBar&&(V===J.upArrow?V=J.leftArrow:V===J.downArrow&&(V=J.rightArrow)),V},_getAdjacentForPageKeys:function _LayoutCommon_getAdjacentForPageKeys(x,A){var V,R=this._sizes.containerMargins,D="horizontal"===this.orientation?R.left+R.right:R.top+R.bottom,N=this._site.viewportSize["horizontal"===this.orientation?"width":"height"],U=this._site.scrollbarPos,B=U+N-1-R["horizontal"===this.orientation?"right":"bottom"],F=this._firstItemFromRange(U,{wholeItem:!0}),W=this._lastItemFromRange(B,{wholeItem:!1}),H=this._getItemPosition(x.index),z=!1;if((x.index<F||x.index>W)&&(z=!0,B=(U="horizontal"===this.orientation?H.left-D:H.top-D)+N-1,F=this._firstItemFromRange(U,{wholeItem:!0}),W=this._lastItemFromRange(B,{wholeItem:!1})),A===J.pageUp){if(!z&&F!==x.index)return{type:q.ObjectType.item,index:F};var G;G="horizontal"===this.orientation?H.left+H.width+D+R.left:H.top+H.height+D+R.bottom;var j=this._firstItemFromRange(G-N,{wholeItem:!0});V=x.index===j?Math.max(0,x.index-this._itemsPerBar):j}else{if(!z&&W!==x.index)return{type:q.ObjectType.item,index:W};var Q;Q="horizontal"===this.orientation?H.left-D-R.right:H.top-D-R.bottom;var K=Math.max(0,this._lastItemFromRange(Q+N-1,{wholeItem:!0}));V=x.index===K?x.index+this._itemsPerBar:K}return{type:q.ObjectType.item,index:V}},_isCellSpanning:function _LayoutCommon_isCellSpanning(x){var A=this._site.groupFromIndex(x),V=this._groupInfo;return!!V&&!!("function"==typeof V?V(A):V).enableCellSpanning},_getGroupInfo:function _LayoutCommon_getGroupInfo(x){var A=this._site.groupFromIndex(x),V=this._groupInfo,R=this._sizes.containerMargins,N={enableCellSpanning:!1};if(V="function"==typeof V?V(A):V){if(V.enableCellSpanning&&(+V.cellWidth!==V.cellWidth||+V.cellHeight!==V.cellHeight))throw new D("WinJS.UI.GridLayout.GroupInfoResultIsInvalid",Y.groupInfoResultIsInvalid);N={enableCellSpanning:!!V.enableCellSpanning,cellWidth:V.cellWidth+R.left+R.right,cellHeight:V.cellHeight+R.top+R.bottom}}return N},_getItemInfo:function _LayoutCommon_getItemInfo(x){var A;if(this._itemInfo&&"function"==typeof this._itemInfo)A=this._itemInfo(x);else{if(!this._useDefaultItemInfo)throw new D("WinJS.UI.GridLayout.ItemInfoIsInvalid",Y.itemInfoIsInvalid);A=this._defaultItemInfo(x)}return F.as(A).then((function(x){if(!x||+x.width!==x.width||+x.height!==x.height)throw new D("WinJS.UI.GridLayout.ItemInfoIsInvalid",Y.itemInfoIsInvalid);return x}))},_defaultItemInfo:function _LayoutCommon_defaultItemInfo(x){var A=this;return this._site.renderItem(this._site.itemFromIndex(x)).then((function(V){return A._elementsToMeasure[x]={element:V},A._measureElements()})).then((function(){var V=A._elementsToMeasure[x],R={width:V.width,height:V.height};return delete A._elementsToMeasure[x],R}),(function(V){return delete A._elementsToMeasure[x],F.wrapError(V)}))},_getGroupSize:function _LayoutCommon_getGroupSize(x){var A=0;return this._groupsEnabled&&(this._horizontal&&this._groupHeaderPosition===oe.top?A=this._sizes.headerContainerMinWidth:this._horizontal||this._groupHeaderPosition!==oe.left||(A=this._sizes.headerContainerMinHeight)),Math.max(A,x.getItemsContainerSize()+this._getHeaderSizeGroupAdjustment())},_groupFromOffset:function _LayoutCommon_groupFromOffset(x){return x<this._groups[0].offset?0:this._groupFrom((function(A){return x<A.offset}))},_groupFromImpl:function _LayoutCommon_groupFromImpl(x,A,V){if(A<x)return null;var R=x+Math.floor((A-x)/2);return V(this._groups[R],R)?this._groupFromImpl(x,R-1,V):R<A&&!V(this._groups[R+1],R+1)?this._groupFromImpl(R+1,A,V):R},_groupFrom:function _LayoutCommon_groupFrom(x){if(this._groups.length>0){var A=this._groups.length-1;return x(this._groups[A],A)?this._groupFromImpl(0,this._groups.length-1,x):A}return null},_invalidateLayout:function _LayoutCommon_invalidateLayout(){this._site&&this._site.invalidateLayout()},_resetMeasurements:function _LayoutCommon_resetMeasurements(){this._measuringPromise&&(this._measuringPromise.cancel(),this._measuringPromise=null),this._containerSizeClassName&&(G.removeClass(this._site.surface,this._containerSizeClassName),deleteDynamicCssRule(this._containerSizeClassName),this._containerSizeClassName=null),this._sizes=null,this._resetAnimationCaches()},_measureElements:function _LayoutCommon_measureElements(){if(!this._measuringElements){var x=this;x._measuringElements=W.schedulePromiseHigh(null,"WinJS.UI.GridLayout._measuringElements").then((function measure(){var V=x._createMeasuringSurface(),R=A.document.createElement("div"),D=x._site,N=x._measuringElements,U=x._elementsToMeasure,B=!1;R.className=Q._itemsContainerClass+" "+Q._laidOutClass,R.style.cssText+=";display: -ms-grid;-ms-grid-column: 1;-ms-grid-row: 1";var F,W,H=Object.keys(U);for(W=0,F=H.length;W<F;W++){var z=U[H[W]].element;z.style["-ms-grid-column"]=W+1,z.style["-ms-grid-row"]=W+1,R.appendChild(z)}for(V.appendChild(R),D.viewport.insertBefore(V,D.viewport.firstChild),N.then(null,(function(){B=!0})),W=0,F=H.length;W<F&&!B;W++){var j=U[H[W]],q=j.element.querySelector("."+Q._itemClass);j.width=G.getTotalWidth(q),j.height=G.getTotalHeight(q)}V.parentNode&&V.parentNode.removeChild(V),N===x._measuringElements&&(x._measuringElements=null)}),(function(A){return x._measuringElements=null,F.wrapError(A)}))}return this._measuringElements},_ensureEnvInfo:function _LayoutCommon_ensureEnvInfo(){return this._envInfo||(this._envInfo=function getEnvironmentSupportInformation(x){if(!re){var V=A.document.createElement("div");V.style.width="500px",V.style.visibility="hidden";var R=A.document.createElement("div");R.style.cssText+="width: 500px; height: 200px; display: -webkit-flex; display: flex",j.setInnerHTMLUnsafe(R,"<div style='height: 100%; display: -webkit-flex; display: flex; flex-flow: column wrap; align-content: flex-start; -webkit-flex-flow: column wrap; -webkit-align-content: flex-start'><div style='width: 100px; height: 100px'></div><div style='width: 100px; height: 100px'></div><div style='width: 100px; height: 100px'></div></div>"),V.appendChild(R),x.viewport.insertBefore(V,x.viewport.firstChild),V.offsetWidth>0&&(re={supportsCSSGrid:!!("-ms-grid-row"in A.document.documentElement.style),nestedFlexTooLarge:R.firstElementChild.offsetWidth>200,nestedFlexTooSmall:R.firstElementChild.offsetWidth<200}),x.readyToMeasure(),x.viewport.removeChild(V)}return re}(this._site),this._envInfo&&!this._envInfo.supportsCSSGrid&&G.addClass(this._site.surface,Q._noCSSGrid)),!!this._envInfo},_createMeasuringSurface:function _LayoutCommon_createMeasuringSurface(){var x=A.document.createElement("div");return x.style.cssText="visibility: hidden;-ms-grid-columns: auto;-ms-grid-rows: auto;-ms-flex-align: start;-webkit-align-items: flex-start;align-items: flex-start",x.className=Q._scrollableClass+" "+(this._inListMode?Q._listLayoutClass:Q._gridLayoutClass),this._envInfo.supportsCSSGrid||G.addClass(x,Q._noCSSGrid),this._groupsEnabled&&(this._groupHeaderPosition===oe.top?G.addClass(x,Q._headerPositionTopClass):G.addClass(x,Q._headerPositionLeftClass)),x},_measureItem:function _LayoutCommon_measureItem(x){var V=this,R=V._site,D=V._measuringPromise;if(!D){var N=new H;V._measuringPromise=D=N.promise.then((function(){return V._ensureEnvInfo()?function measureItemImpl(x,N){var U=!!N,B={},W=R.rtl?"right":"left";return R.itemCount.then((function(A){return!A||V._groupsEnabled&&!R.groupCount?F.cancel:(N=N||R.itemFromIndex(x),B.container=R.renderItem(N),V._groupsEnabled&&(B.headerContainer=R.renderHeader(V._site.groupFromIndex(R.groupIndexFromItemIndex(x)))),F.join(B))})).then((function(B){function cleanUp(){H.parentNode&&H.parentNode.removeChild(H)}var H=V._createMeasuringSurface(),z=A.document.createElement("div"),j=A.document.createElement("div"),q=B.container.querySelector("."+Q._itemBoxClass),K=R.groupIndexFromItemIndex(x);j.className=Q._containerClass,z.className=Q._itemsContainerClass+" "+Q._laidOutClass;var J=1,X=1,Y=2,$=2,Z=z,ee=!1;V._inListMode&&V._groupsEnabled&&(V._horizontal&&V._groupHeaderPosition===oe.top?(J=2,$=1,Y=1,Z=B.headerContainer,ee=!0):V._horizontal||V._groupHeaderPosition!==oe.left||(X=2,$=1,Y=1,Z=B.headerContainer,ee=!0)),z.style.cssText+=";display: "+(V._inListMode?(V._horizontal?"flex":"block")+"; overflow: hidden":"inline-block")+";vertical-align:top;-ms-grid-column: "+X+";-ms-grid-row: "+J,V._inListMode||(B.container.style.display="inline-block"),V._groupsEnabled&&(B.headerContainer.style.cssText+=";display: inline-block;-ms-grid-column: "+$+";-ms-grid-row: "+Y,G.addClass(B.headerContainer,Q._laidOutClass+" "+Q._groupLeaderClass),(V._groupHeaderPosition===oe.top&&V._horizontal||V._groupHeaderPosition===oe.left&&!V._horizontal)&&G.addClass(z,Q._groupLeaderClass)),ee&&H.appendChild(B.headerContainer),z.appendChild(B.container),z.appendChild(j),H.appendChild(z),!ee&&V._groupsEnabled&&H.appendChild(B.headerContainer),R.viewport.insertBefore(H,R.viewport.firstChild);var te=function readMeasurementsFromDOM(){var x=V._horizontal,A=V._groupsEnabled,N=!1;D.then(null,(function(){N=!0}));var U=getMargins(Z),F=R.rtl?R.viewport.offsetWidth-(Z.offsetLeft+Z.offsetWidth):Z.offsetLeft,Q=Z.offsetTop,K={viewportContentSize:0,surfaceContentSize:0,maxItemsContainerContentSize:0,surfaceOuterHeight:getOuterHeight(H),surfaceOuterWidth:getOuterWidth(H),layoutOriginX:F-U[W],layoutOriginY:Q-U.top,itemsContainerOuterHeight:getOuterHeight(z),itemsContainerOuterWidth:getOuterWidth(z),itemsContainerOuterX:getOuter(R.rtl?"Right":"Left",z),itemsContainerOuterY:getOuter("Top",z),itemsContainerMargins:getMargins(z),itemBoxOuterHeight:getOuterHeight(q),itemBoxOuterWidth:getOuterWidth(q),containerOuterHeight:getOuterHeight(B.container),containerOuterWidth:getOuterWidth(B.container),emptyContainerContentHeight:G.getContentHeight(j),emptyContainerContentWidth:G.getContentWidth(j),containerMargins:getMargins(B.container),containerWidth:0,containerHeight:0,containerSizeLoaded:!1};R.header&&(K[x?"layoutOriginX":"layoutOriginY"]+=G[x?"getTotalWidth":"getTotalHeight"](R.header)),A&&(K.headerContainerOuterX=getOuter(R.rtl?"Right":"Left",B.headerContainer),K.headerContainerOuterY=getOuter("Top",B.headerContainer),K.headerContainerOuterWidth=getOuterWidth(B.headerContainer),K.headerContainerOuterHeight=getOuterHeight(B.headerContainer),K.headerContainerWidth=G.getTotalWidth(B.headerContainer),K.headerContainerHeight=G.getTotalHeight(B.headerContainer),K.headerContainerMinWidth=getDimension(B.headerContainer,"minWidth")+K.headerContainerOuterWidth,K.headerContainerMinHeight=getDimension(B.headerContainer,"minHeight")+K.headerContainerOuterHeight);var J={sizes:K,viewportContentWidth:G.getContentWidth(R.viewport),viewportContentHeight:G.getContentHeight(R.viewport),containerContentWidth:G.getContentWidth(B.container),containerContentHeight:G.getContentHeight(B.container),containerWidth:G.getTotalWidth(B.container),containerHeight:G.getTotalHeight(B.container)};return J.viewportCrossSize=J[x?"viewportContentHeight":"viewportContentWidth"],R.readyToMeasure(),N?null:J}();if(!te)return cleanUp(),F.cancel;if(V._horizontal&&0===te.viewportContentHeight||!V._horizontal&&0===te.viewportContentWidth)return cleanUp(),F.cancel;if(!(U||V._isCellSpanning(K)||0!==te.containerContentWidth&&0!==te.containerContentHeight))return cleanUp(),N.then((function(){return measureItemImpl(x,N)}));var ie=V._sizes=te.sizes;if(Object.defineProperties(ie,{surfaceOuterCrossSize:{get:function(){return V._horizontal?ie.surfaceOuterHeight:ie.surfaceOuterWidth},enumerable:!0},layoutOrigin:{get:function(){return V._horizontal?ie.layoutOriginX:ie.layoutOriginY},enumerable:!0},itemsContainerOuterSize:{get:function(){return V._horizontal?ie.itemsContainerOuterWidth:ie.itemsContainerOuterHeight},enumerable:!0},itemsContainerOuterCrossSize:{get:function(){return V._horizontal?ie.itemsContainerOuterHeight:ie.itemsContainerOuterWidth},enumerable:!0},itemsContainerOuterStart:{get:function(){return V._horizontal?ie.itemsContainerOuterX:ie.itemsContainerOuterY},enumerable:!0},itemsContainerOuterCrossStart:{get:function(){return V._horizontal?ie.itemsContainerOuterY:ie.itemsContainerOuterX},enumerable:!0},containerCrossSize:{get:function(){return V._horizontal?ie.containerHeight:ie.containerWidth},enumerable:!0},containerSize:{get:function(){return V._horizontal?ie.containerWidth:ie.containerHeight},enumerable:!0}}),!V._isCellSpanning(K)){if(V._inListMode){var ne=te.viewportCrossSize-ie.surfaceOuterCrossSize-V._getHeaderSizeContentAdjustment()-ie.itemsContainerOuterCrossSize;V._horizontal?(ie.containerHeight=ne,ie.containerWidth=te.containerWidth):(ie.containerHeight=te.containerHeight,ie.containerWidth=ne)}else ie.containerWidth=te.containerWidth,ie.containerHeight=te.containerHeight;ie.containerSizeLoaded=!0}V._createContainerStyleRule(),V._viewportSizeChanged(te.viewportCrossSize),cleanUp()}))}(x):F.cancel})).then((function(){}),(function(x){return V._measuringPromise=null,F.wrapError(x)})),N.complete()}return D},_getHeaderSizeGroupAdjustment:function(){if(this._groupsEnabled){if(this._horizontal&&this._groupHeaderPosition===oe.left)return this._sizes.headerContainerWidth;if(!this._horizontal&&this._groupHeaderPosition===oe.top)return this._sizes.headerContainerHeight}return 0},_getHeaderSizeContentAdjustment:function(){if(this._groupsEnabled){if(this._horizontal&&this._groupHeaderPosition===oe.top)return this._sizes.headerContainerHeight;if(!this._horizontal&&this._groupHeaderPosition===oe.left)return this._sizes.headerContainerWidth}return 0},_getViewportCrossSize:function(){return this._site.viewportSize[this._horizontal?"height":"width"]},_viewportSizeChanged:function _LayoutCommon_viewportSizeChanged(x){var A=this._sizes;A.viewportContentSize=x,A.surfaceContentSize=x-A.surfaceOuterCrossSize,A.maxItemsContainerContentSize=A.surfaceContentSize-A.itemsContainerOuterCrossSize-this._getHeaderSizeContentAdjustment(),A.containerSizeLoaded&&!this._inListMode?(this._itemsPerBar=Math.floor(A.maxItemsContainerContentSize/A.containerCrossSize),this.maximumRowsOrColumns&&(this._itemsPerBar=Math.min(this._itemsPerBar,this.maximumRowsOrColumns)),this._itemsPerBar=Math.max(1,this._itemsPerBar)):(this._inListMode&&(A[this._horizontal?"containerHeight":"containerWidth"]=A.maxItemsContainerContentSize),this._itemsPerBar=1),this._resetAnimationCaches()},_createContainerStyleRule:function _LayoutCommon_createContainerStyleRule(){var x=this._sizes;if(!this._containerSizeClassName&&x.containerSizeLoaded&&(0===x.emptyContainerContentHeight||0===x.emptyContainerContentWidth)){var A=x.containerWidth-x.containerOuterWidth+"px",V=x.containerHeight-x.containerOuterHeight+"px";this._inListMode&&(this._horizontal?V="calc(100% - "+(x.containerMargins.top+x.containerMargins.bottom)+"px)":A="auto"),this._containerSizeClassName||(this._containerSizeClassName=uniqueCssClassName("containersize"),G.addClass(this._site.surface,this._containerSizeClassName));var R="."+Q._containerClass,D="width:"+A+";height:"+V+";";addDynamicCssRule(this._containerSizeClassName,this._site,R,D)}},_ensureContainerSize:function _LayoutCommon_ensureContainerSize(x){var A,V=this._sizes;if(V.containerSizeLoaded||this._ensuringContainerSize)return this._ensuringContainerSize?this._ensuringContainerSize:F.wrap();if(this._itemInfo&&"function"==typeof this._itemInfo||!this._useDefaultItemInfo)A=this._getItemInfo();else{var R=V.containerMargins;A=F.wrap({width:x.groupInfo.cellWidth-R.left-R.right,height:x.groupInfo.cellHeight-R.top-R.bottom})}var D=this;return this._ensuringContainerSize=A.then((function(x){V.containerSizeLoaded=!0,V.containerWidth=x.width+V.itemBoxOuterWidth+V.containerOuterWidth,V.containerHeight=x.height+V.itemBoxOuterHeight+V.containerOuterHeight,D._inListMode?D._itemsPerBar=1:(D._itemsPerBar=Math.floor(V.maxItemsContainerContentSize/V.containerCrossSize),D.maximumRowsOrColumns&&(D._itemsPerBar=Math.min(D._itemsPerBar,D.maximumRowsOrColumns)),D._itemsPerBar=Math.max(1,D._itemsPerBar)),D._createContainerStyleRule()})),A.done((function(){D._ensuringContainerSize=null}),(function(){D._ensuringContainerSize=null})),A},_indexToCoordinate:function _LayoutCommon_indexToCoordinate(x,A){A=A||this._itemsPerBar;var V=Math.floor(x/A);return this._horizontal?{column:V,row:x-V*A}:{row:V,column:x-V*A}},_rangeForGroup:function _LayoutCommon_rangeForGroup(x,A){var V=x.startIndex,R=V+x.count-1;return!A||A.firstIndex>R||A.lastIndex<V?null:{firstIndex:Math.max(0,A.firstIndex-V),lastIndex:Math.min(x.count-1,A.lastIndex-V)}},_syncDomWithGroupHeaderPosition:function _LayoutCommon_syncDomWithGroupHeaderPosition(x){if(this._groupsEnabled&&this._oldGroupHeaderPosition!==this._groupHeaderPosition){var A,V=x.length;if(this._oldGroupHeaderPosition===oe.top)if(G.removeClass(this._site.surface,Q._headerPositionTopClass),this._horizontal)for(A=0;A<V;A++)x[A].header.style.maxWidth="",G.removeClass(x[A].itemsContainer.element,Q._groupLeaderClass);else this._site.surface.style.msGridRows="";else if(this._oldGroupHeaderPosition===oe.left){if(G.removeClass(this._site.surface,Q._headerPositionLeftClass),!this._horizontal)for(A=0;A<V;A++)x[A].header.style.maxHeight="",G.removeClass(x[A].itemsContainer.element,Q._groupLeaderClass);this._site.surface.style.msGridColumns=""}if(this._groupHeaderPosition===oe.top){if(G.addClass(this._site.surface,Q._headerPositionTopClass),this._horizontal)for(A=0;A<V;A++)G.addClass(x[A].itemsContainer.element,Q._groupLeaderClass)}else if(G.addClass(this._site.surface,Q._headerPositionLeftClass),!this._horizontal)for(A=0;A<V;A++)G.addClass(x[A].itemsContainer.element,Q._groupLeaderClass);this._oldGroupHeaderPosition=this._groupHeaderPosition}},_layoutGroup:function _LayoutCommon_layoutGroup(x){var A=this._groups[x],V=this._site.tree[x],R=V.header,D=V.itemsContainer.element,N=this._sizes,U=A.getItemsContainerCrossSize();if(this._groupsEnabled){if(this._horizontal)if(this._groupHeaderPosition===oe.top){var B=N.headerContainerMinWidth-N.headerContainerOuterWidth,F=A.getItemsContainerSize()-N.headerContainerOuterWidth;R.style.maxWidth=Math.max(B,F)+"px",this._envInfo.supportsCSSGrid?(R.style.msGridColumn=x+1,D.style.msGridColumn=x+1):(R.style.height=N.headerContainerHeight-N.headerContainerOuterHeight+"px",D.style.height=U-N.itemsContainerOuterHeight+"px",D.style.marginBottom=N.itemsContainerMargins.bottom+(N.maxItemsContainerContentSize-U+N.itemsContainerOuterHeight)+"px"),G.addClass(D,Q._groupLeaderClass)}else this._envInfo.supportsCSSGrid?(R.style.msGridColumn=2*x+1,D.style.msGridColumn=2*x+2):(R.style.width=N.headerContainerWidth-N.headerContainerOuterWidth+"px",R.style.height=U-N.headerContainerOuterHeight+"px",D.style.height=U-N.itemsContainerOuterHeight+"px");else if(this._groupHeaderPosition===oe.left){var W=N.headerContainerMinHeight-N.headerContainerOuterHeight,H=A.getItemsContainerSize()-N.headerContainerOuterHeight;R.style.maxHeight=Math.max(W,H)+"px",this._envInfo.supportsCSSGrid?(R.style.msGridRow=x+1,D.style.msGridRow=x+1):(R.style.width=N.headerContainerWidth-N.headerContainerOuterWidth+"px",D.style.width=U-N.itemsContainerOuterWidth+"px",D.style["margin"+(this._site.rtl?"Left":"Right")]=N.itemsContainerMargins[this._site.rtl?"left":"right"]+(N.maxItemsContainerContentSize-U+N.itemsContainerOuterWidth)+"px"),G.addClass(D,Q._groupLeaderClass)}else R.style.msGridRow=2*x+1,this._inListMode?R.style.height=N.headerContainerHeight-N.headerContainerOuterHeight+"px":this._envInfo.supportsCSSGrid?D.style.msGridRow=2*x+2:(R.style.height=N.headerContainerHeight-N.headerContainerOuterHeight+"px",R.style.width=U-N.headerContainerOuterWidth+"px",D.style.width=U-N.itemsContainerOuterWidth+"px");G.addClass(R,Q._laidOutClass+" "+Q._groupLeaderClass)}G.addClass(D,Q._laidOutClass)}},{_barsPerItemsBlock:4})})),_LegacyLayout:V.Namespace._lazy((function(){return V.Class.derive(x._LayoutCommon,null,{disableBackdrop:{get:function _LegacyLayout_disableBackdrop_get(){return this._backdropDisabled||!1},set:function _LegacyLayout_disableBackdrop_set(x){G._deprecated(K.disableBackdropIsDeprecated),x=!!x,this._backdropDisabled!==x&&(this._backdropDisabled=x,this._disableBackdropClassName&&(deleteDynamicCssRule(this._disableBackdropClassName),this._site&&G.removeClass(this._site.surface,this._disableBackdropClassName),this._disableBackdropClassName=null),this._disableBackdropClassName=uniqueCssClassName("disablebackdrop"),this._site&&G.addClass(this._site.surface,this._disableBackdropClassName),x)&&addDynamicCssRule(this._disableBackdropClassName,this._site,".win-container.win-backdrop","background-color:transparent;")}},backdropColor:{get:function _LegacyLayout_backdropColor_get(){return this._backdropColor||"rgba(155,155,155,0.23)"},set:function _LegacyLayout_backdropColor_set(x){if(G._deprecated(K.backdropColorIsDeprecated),x&&this._backdropColor!==x){this._backdropColor=x,this._backdropColorClassName&&(deleteDynamicCssRule(this._backdropColorClassName),this._site&&G.removeClass(this._site.surface,this._backdropColorClassName),this._backdropColorClassName=null),this._backdropColorClassName=uniqueCssClassName("backdropcolor"),this._site&&G.addClass(this._site.surface,this._backdropColorClassName);var A="background-color:"+x+";";addDynamicCssRule(this._backdropColorClassName,this._site,".win-container.win-backdrop",A)}}}})})),GridLayout:V.Namespace._lazy((function(){return V.Class.derive(x._LegacyLayout,(function(x){x=x||{},this.itemInfo=x.itemInfo,this.groupInfo=x.groupInfo,this._maxRowsOrColumns=0,this._useDefaultItemInfo=!0,this._elementsToMeasure={},this._groupHeaderPosition=x.groupHeaderPosition||oe.top,this.orientation=x.orientation||"horizontal",x.maxRows&&(this.maxRows=+x.maxRows),x.maximumRowsOrColumns&&(this.maximumRowsOrColumns=+x.maximumRowsOrColumns)}),{maximumRowsOrColumns:{get:function(){return this._maxRowsOrColumns},set:function(x){this._setMaxRowsOrColumns(x)}},maxRows:{get:function(){return this.maximumRowsOrColumns},set:function(x){G._deprecated(K.maxRowsIsDeprecated),this.maximumRowsOrColumns=x}},itemInfo:{enumerable:!0,get:function(){return this._itemInfo},set:function(x){x&&G._deprecated(K.itemInfoIsDeprecated),this._itemInfo=x,this._invalidateLayout()}},groupInfo:{enumerable:!0,get:function(){return this._groupInfo},set:function(x){x&&G._deprecated(K.groupInfoIsDeprecated),this._groupInfo=x,this._invalidateLayout()}}})}))});var se=V.Namespace.defineWithParent(null,null,{UniformGroupBase:V.Namespace._lazy((function(){return V.Class.define(null,{cleanUp:function UniformGroupBase_cleanUp(){},itemFromOffset:function UniformGroupBase_itemFromOffset(x,A){A=A||{};var V=this._layout._sizes;x-=V.itemsContainerOuterStart,A.wholeItem&&(x+=(A.last?-1:1)*(V.containerSize-1));var R=this.count-1,D=(clampToRange(0,Math.floor(R/this._layout._itemsPerBar),Math.floor(x/V.containerSize))+A.last)*this._layout._itemsPerBar-A.last;return clampToRange(0,this.count-1,D)},hitTest:function UniformGroupBase_hitTest(x,A){var V=this._layout._horizontal,R=this._layout._itemsPerBar,D=this._layout._inListMode||1===R,N=V?x:A,U=V?A:x,B=this._layout._sizes;N-=B.itemsContainerOuterStart,U-=B.itemsContainerOuterCrossStart;var F,W,H=Math.floor(N/B.containerSize),z=clampToRange(0,R-1,Math.floor(U/B.containerCrossSize)),G=Math.max(-1,H*R+z);return F=!V&&D||V&&!D?(A-B.containerHeight/2)/B.containerHeight:(x-B.containerWidth/2)/B.containerWidth,D?{index:G,insertAfterIndex:(F=Math.floor(F))>=0&&G>=0?F:-1}:(W=(F=clampToRange(-1,R-1,F))<0?H*R-1:H*R+Math.floor(F),{index:clampToRange(-1,this.count-1,G),insertAfterIndex:clampToRange(-1,this.count-1,W)})},getAdjacent:function UniformGroupBase_getAdjacent(x,A){var V,R=x.index,D=Math.floor(R/this._layout._itemsPerBar),N=R%this._layout._itemsPerBar;switch(A){case J.upArrow:V=0===N?"boundary":R-1;break;case J.downArrow:var U=R===this.count-1,B=this._layout._itemsPerBar>1&&N===this._layout._itemsPerBar-1;V=U||B?"boundary":R+1;break;case J.leftArrow:V=0===D&&this._layout._itemsPerBar>1?"boundary":R-this._layout._itemsPerBar;break;case J.rightArrow:var F=this.count-1;V=D===Math.floor(F/this._layout._itemsPerBar)?"boundary":Math.min(R+this._layout._itemsPerBar,this.count-1)}return"boundary"===V?V:{type:q.ObjectType.item,index:V}},getItemsContainerSize:function UniformGroupBase_getItemsContainerSize(){var x=this._layout._sizes;return Math.ceil(this.count/this._layout._itemsPerBar)*x.containerSize+x.itemsContainerOuterSize},getItemsContainerCrossSize:function UniformGroupBase_getItemsContainerCrossSize(){var x=this._layout._sizes;return this._layout._itemsPerBar*x.containerCrossSize+x.itemsContainerOuterCrossSize},getItemPositionForAnimations:function UniformGroupBase_getItemPositionForAnimations(x){var A=this._layout._sizes,V=this._layout._site.rtl?"right":"left",R=this._layout._sizes.containerMargins,D=this._layout._indexToCoordinate(x);return{row:D.row,column:D.column,top:R.top+D.row*A.containerHeight,left:R[V]+D.column*A.containerWidth,height:A.containerHeight-A.containerMargins.top-A.containerMargins.bottom,width:A.containerWidth-A.containerMargins.left-A.containerMargins.right}}})})),UniformGroup:V.Namespace._lazy((function(){return V.Class.derive(se.UniformGroupBase,(function UniformGroup_ctor(x,A){this._layout=x,this._itemsContainer=A,G.addClass(this._itemsContainer,x._inListMode?Q._uniformListLayoutClass:Q._uniformGridLayoutClass)}),{cleanUp:function UniformGroup_cleanUp(x){x||(G.removeClass(this._itemsContainer,Q._uniformGridLayoutClass),G.removeClass(this._itemsContainer,Q._uniformListLayoutClass),this._itemsContainer.style.height=this._itemsContainer.style.width=""),this._itemsContainer=null,this._layout=null,this.groupInfo=null,this.startIndex=null,this.offset=null,this.count=null},prepareLayout:function UniformGroup_prepareLayout(x,A,V,R){return this.groupInfo=R.groupInfo,this.startIndex=R.startIndex,this.count=x,this._layout._ensureContainerSize(this)},layoutRealizedRange:function UniformGroup_layoutRealizedRange(){var x=this._layout._sizes;this._itemsContainer.style[this._layout._horizontal?"width":"height"]=this.getItemsContainerSize()-x.itemsContainerOuterSize+"px",this._itemsContainer.style[this._layout._horizontal?"height":"width"]=this._layout._inListMode?x.maxItemsContainerContentSize+"px":this._layout._itemsPerBar*x.containerCrossSize+"px"},layoutUnrealizedRange:function UniformGroup_layoutUnrealizedRange(){return F.wrap()}})})),UniformFlowGroup:V.Namespace._lazy((function(){return V.Class.derive(se.UniformGroupBase,(function UniformFlowGroup_ctor(x,A){this._layout=x,this._itemsContainer=A.element,G.addClass(this._itemsContainer,x._inListMode?Q._uniformListLayoutClass:Q._uniformGridLayoutClass)}),{cleanUp:function UniformFlowGroup_cleanUp(x){x||(G.removeClass(this._itemsContainer,Q._uniformListLayoutClass),G.removeClass(this._itemsContainer,Q._uniformGridLayoutClass),this._itemsContainer.style.height="")},layout:function UniformFlowGroup_layout(){this._itemsContainer.style.height=this.count*this._layout._sizes.containerHeight+"px"}})})),CellSpanningGroup:V.Namespace._lazy((function(){return V.Class.define((function CellSpanningGroup_ctor(x,A){this._layout=x,this._itemsContainer=A,G.addClass(this._itemsContainer,Q._cellSpanningGridLayoutClass),this.resetMap()}),{cleanUp:function CellSpanningGroup_cleanUp(x){x||(this._cleanContainers(),G.removeClass(this._itemsContainer,Q._cellSpanningGridLayoutClass),this._itemsContainer.style.cssText=""),this._itemsContainer=null,this._layoutPromise&&(this._layoutPromise.cancel(),this._layoutPromise=null),this.resetMap(),this._slotsPerColumn=null,this._offScreenSlotsPerColumn=null,this._items=null,this._layout=null,this._containersToHide=null,this.groupInfo=null,this.startIndex=null,this.offset=null,this.count=null},prepareLayoutWithCopyOfTree:function CellSpanningGroup_prepareLayoutWithCopyOfTree(x,A,V,R){var D,N=this;if(this._containersToHide={},A)for(D=A.firstIndex;D<=A.lastIndex;D++)this._containersToHide[X(V._items[D])]=V._items[D];this.groupInfo=R.groupInfo,this.startIndex=R.startIndex,this.count=x.items.length,this._items=x.items,this._slotsPerColumn=Math.floor(this._layout._sizes.maxItemsContainerContentSize/this.groupInfo.cellHeight),this._layout.maximumRowsOrColumns&&(this._slotsPerColumn=Math.min(this._slotsPerColumn,this._layout.maximumRowsOrColumns)),this._slotsPerColumn=Math.max(this._slotsPerColumn,1),this.resetMap();var U=new Array(this.count);for(D=0;D<this.count;D++)U[D]=this._layout._getItemInfo(this.startIndex+D);return F.join(U).then((function(x){x.forEach((function(x,A){N.addItemToMap(A,x)}))}))},layoutRealizedRange:function CellSpanningGroup_layoutRealizedRange(x,A){var V;if(A)for(V=Math.max(x,A.firstIndex);V<=A.lastIndex;V++)this._layoutItem(V),delete this._containersToHide[X(this._items[V])];Object.keys(this._containersToHide).forEach(function(x){G.removeClass(this._containersToHide[x],Q._laidOutClass)}.bind(this)),this._containersToHide={},this._itemsContainer.style.cssText+=";width:"+(this.getItemsContainerSize()-this._layout._sizes.itemsContainerOuterSize)+"px;height:"+this._layout._sizes.maxItemsContainerContentSize+"px;-ms-grid-columns: ("+this.groupInfo.cellWidth+"px)["+this.getColumnCount()+"];-ms-grid-rows: ("+this.groupInfo.cellHeight+"px)["+(this._slotsPerColumn+this._offScreenSlotsPerColumn)+"]"},layoutUnrealizedRange:function CellSpanningGroup_layoutUnrealizedRange(x,A,V){var R,D=this;return D._layoutPromise=new F((function(N){function completeLayout(){R=null,N()}function schedule(x){return W.schedule(x,W.Priority.normal,null,"WinJS.UI.GridLayout.CellSpanningGroup.LayoutUnrealizedRange")}if(A){var U=!1,B=A.firstIndex-1,F=Math.max(x,A.lastIndex+1);F=Math.max(B+1,F),R=schedule((function unrealizedRangeWork(A){for(;!U;){if(A.shouldYield)return void A.setWork(unrealizedRangeWork);U=!0,B>=x&&(D._layoutItem(B),B--,U=!1),F<D.count&&(D._layoutItem(F),F++,U=!1)}completeLayout()}))}else if(V){var H=D.count-1;R=schedule((function beforeRealizedRangeWork(A){for(;H>=x;H--){if(A.shouldYield)return void A.setWork(beforeRealizedRangeWork);D._layoutItem(H)}completeLayout()}))}else H=x,R=schedule((function afterRealizedRangeWork(x){for(;H<D.count;H++){if(x.shouldYield)return void x.setWork(afterRealizedRangeWork);D._layoutItem(H)}completeLayout()}))}),(function(){R&&R.cancel(),R=null})),D._layoutPromise},itemFromOffset:function CellSpanningGroup_itemFromOffset(x,A){A=A||{};var V=this._layout._sizes,R=V.containerMargins;x-=V.itemsContainerOuterX,x-=(A.last?1:-1)*R[A.last?"left":"right"];var D=this.indexFromOffset(x,A.wholeItem,A.last).item;return clampToRange(0,this.count-1,D)},getAdjacent:function CellSpanningGroup_getAdjacent(x,A){var V,R,D,N,U;V=R=x.index,U=this.lastAdjacent===V?this.lastInMapIndex:this.findItem(V);do{var B=Math.floor(U/this._slotsPerColumn),F=U-B*this._slotsPerColumn,W=Math.floor((this.occupancyMap.length-1)/this._slotsPerColumn);switch(A){case J.upArrow:if(!(F>0))return{type:q.ObjectType.item,index:R};U--;break;case J.downArrow:if(!(F+1<this._slotsPerColumn))return{type:q.ObjectType.item,index:R};U++;break;case J.leftArrow:U=B>0?U-this._slotsPerColumn:-1;break;case J.rightArrow:U=B<W?U+this._slotsPerColumn:this.occupancyMap.length}(N=U>=0&&U<this.occupancyMap.length)&&(D=this.occupancyMap[U]?this.occupancyMap[U].index:void 0)}while(N&&(V===D||void 0===D));return this.lastAdjacent=D,this.lastInMapIndex=U,N?{type:q.ObjectType.item,index:D}:"boundary"},hitTest:function CellSpanningGroup_hitTest(x,A){var V=this._layout._sizes,R=0;if(x-=V.itemsContainerOuterX,A-=V.itemsContainerOuterY,this.occupancyMap.length>0){for(var D=this.indexFromOffset(x,!1,0),N=Math.min(this._slotsPerColumn-1,Math.floor(A/this.groupInfo.cellHeight)),U=D.index,B=U;N-- >0;)U++,this.occupancyMap[U]&&(B=U);this.occupancyMap[B]||B--,R=this.occupancyMap[B].index}var F=this.getItemSize(R),W=F.column*this.groupInfo.cellWidth,H=F.row*this.groupInfo.cellHeight,z=1===this._slotsPerColumn,G=R;return(z&&x<W+F.contentWidth/2||!z&&A<H+F.contentHeight/2)&&G--,{type:q.ObjectType.item,index:clampToRange(0,this.count-1,R),insertAfterIndex:clampToRange(-1,this.count-1,G)}},getItemsContainerSize:function CellSpanningGroup_getItemsContainerSize(){var x=this._layout._sizes;return this.getColumnCount()*this.groupInfo.cellWidth+x.itemsContainerOuterSize},getItemsContainerCrossSize:function CellSpanningGroup_getItemsContainerCrossSize(){var x=this._layout._sizes;return x.maxItemsContainerContentSize+x.itemsContainerOuterCrossSize},getItemPositionForAnimations:function CellSpanningGroup_getItemPositionForAnimations(x){var A=this._layout._site.rtl?"right":"left",V=this._layout._sizes.containerMargins,R=this.getItemSize(x),D=this.groupInfo;return{row:R.row,column:R.column,top:V.top+R.row*D.cellHeight,left:V[A]+R.column*D.cellWidth,height:R.contentHeight,width:R.contentWidth}},_layoutItem:function CellSpanningGroup_layoutItem(x){var A=this.getItemSize(x);return this._items[x].style.cssText+=";-ms-grid-row:"+(A.row+1)+";-ms-grid-column:"+(A.column+1)+";-ms-grid-row-span:"+A.rows+";-ms-grid-column-span:"+A.columns+";height:"+A.contentHeight+"px;width:"+A.contentWidth+"px",G.addClass(this._items[x],Q._laidOutClass),this._items[x]},_cleanContainers:function CellSpanningGroup_cleanContainers(){var x,A=this._items,V=A.length;for(x=0;x<V;x++)A[x].style.cssText="",G.removeClass(A[x],Q._laidOutClass)},getColumnCount:function CellSpanningGroup_getColumnCount(){return Math.ceil(this.occupancyMap.length/this._slotsPerColumn)},getOccupancyMapItemCount:function CellSpanningGroup_getOccupancyMapItemCount(){var x=-1;return this.occupancyMap.forEach((function(A){A.index>x&&(x=A.index)})),x+1},coordinateToIndex:function CellSpanningGroup_coordinateToIndex(x,A){return x*this._slotsPerColumn+A},markSlotAsFull:function CellSpanningGroup_markSlotAsFull(x,A){for(var V=this._layout._indexToCoordinate(x,this._slotsPerColumn),R=V.row+A.rows,D=V.row;D<R&&D<this._slotsPerColumn;D++)for(var N=V.column,U=V.column+A.columns;N<U;N++)this.occupancyMap[this.coordinateToIndex(N,D)]=A;this._offScreenSlotsPerColumn=Math.max(this._offScreenSlotsPerColumn,R-this._slotsPerColumn)},isSlotEmpty:function CellSpanningGroup_isSlotEmpty(x,A,V){for(var R=A,D=A+x.rows;R<D;R++)for(var N=V,U=V+x.columns;N<U;N++)if(R>=this._slotsPerColumn||void 0!==this.occupancyMap[this.coordinateToIndex(N,R)])return!1;return!0},findEmptySlot:function CellSpanningGroup_findEmptySlot(x,A,V){var R=this._layout._indexToCoordinate(x,this._slotsPerColumn),D=R.row,N=Math.floor((this.occupancyMap.length-1)/this._slotsPerColumn);if(V){for(var U=R.column+1;U<=N;U++)if(this.isSlotEmpty(A,0,U))return this.coordinateToIndex(U,0)}else for(U=R.column;U<=N;U++){for(var B=D;B<this._slotsPerColumn;B++)if(this.isSlotEmpty(A,B,U))return this.coordinateToIndex(U,B);D=0}return(N+1)*this._slotsPerColumn},findItem:function CellSpanningGroup_findItem(x){for(var A=x,V=this.occupancyMap.length;A<V;A++){var R=this.occupancyMap[A];if(R&&R.index===x)return A}return A},getItemSize:function CellSpanningGroup_getItemSize(x){var A=this.findItem(x),V=this.occupancyMap[A],R=this._layout._indexToCoordinate(A,this._slotsPerColumn);return x===V.index?{row:R.row,column:R.column,contentWidth:V.contentWidth,contentHeight:V.contentHeight,columns:V.columns,rows:V.rows}:null},resetMap:function CellSpanningGroup_resetMap(){this.occupancyMap=[],this.lastAdded=0,this._offScreenSlotsPerColumn=0},addItemToMap:function CellSpanningGroup_addItemToMap(x,A){var V=this,R=V.groupInfo,D=V._layout._sizes.containerMargins;!function add(x,A){var R=V.findEmptySlot(V.lastAdded,x,A);V.lastAdded=R,V.markSlotAsFull(R,x)}({index:x,contentWidth:A.width,contentHeight:A.height,columns:Math.max(1,Math.ceil((A.width+D.left+D.right)/R.cellWidth)),rows:Math.max(1,Math.ceil((A.height+D.top+D.bottom)/R.cellHeight))},A.newColumn)},indexFromOffset:function CellSpanningGroup_indexFromOffset(x,A,V){var R=0,D=0,N=this.groupInfo,U=0;if(this.occupancyMap.length>0){if(D=this.getOccupancyMapItemCount()-1,x<(R=Math.ceil((this.occupancyMap.length-1)/this._slotsPerColumn)*N.cellWidth)){var B=this._slotsPerColumn;for(U=(Math.max(0,Math.floor(x/N.cellWidth))+V)*this._slotsPerColumn-V;!this.occupancyMap[U]&&B-- >0;)U+=V>0?-1:1;return{index:U,item:this.occupancyMap[U].index}}U=this.occupancyMap.length-1}return{index:U,item:D+(Math.max(0,Math.floor((x-R)/N.cellWidth))+V)*this._slotsPerColumn-V}}})}))});function normalizeLayoutPromises(x){return F.is(x)?{realizedRangeComplete:x,layoutComplete:x}:"object"==typeof x&&x&&x.layoutComplete?x:{realizedRangeComplete:F.wrap(),layoutComplete:F.wrap()}}V.Namespace._moduleDefine(x,"WinJS.UI",{ListLayout:V.Namespace._lazy((function(){return V.Class.derive(x._LegacyLayout,(function ListLayout_ctor(x){x=x||{},this._itemInfo={},this._groupInfo={},this._groupHeaderPosition=x.groupHeaderPosition||oe.top,this._inListMode=!0,this.orientation=x.orientation||"vertical"}),{initialize:function ListLayout_initialize(A,V){G.addClass(A.surface,Q._listLayoutClass),x._LegacyLayout.prototype.initialize.call(this,A,V)},uninitialize:function ListLayout_uninitialize(){this._site&&G.removeClass(this._site.surface,Q._listLayoutClass),x._LegacyLayout.prototype.uninitialize.call(this)},layout:function ListLayout_layout(A,V,R,D){return this._groupsEnabled||this._horizontal?x._LegacyLayout.prototype.layout.call(this,A,V,R,D):this._layoutNonGroupedVerticalList(A,V,R,D)},_layoutNonGroupedVerticalList:function ListLayout_layoutNonGroupedVerticalList(x,A,V,R){var D=this;return this._layoutPromise=D._measureItem(0).then((function(){G[D._usingStructuralNodes?"addClass":"removeClass"](D._site.surface,Q._structuralNodesClass),G[D._envInfo.nestedFlexTooLarge||D._envInfo.nestedFlexTooSmall?"addClass":"removeClass"](D._site.surface,Q._singleItemsBlockClass),D._sizes.viewportContentSize!==D._getViewportCrossSize()&&D._viewportSizeChanged(D._getViewportCrossSize()),D._cacheRemovedElements(V,D._cachedItemRecords,D._cachedInsertedItemRecords,D._cachedRemovedItems,!1),D._cacheRemovedElements(R,D._cachedHeaderRecords,D._cachedInsertedHeaderRecords,D._cachedRemovedHeaders,!0);var A=x[0].itemsContainer,N=new se.UniformFlowGroup(D,A);D._groups=[N],N.groupInfo={enableCellSpanning:!1},N.startIndex=0,N.count=getItemsContainerLength(A),N.offset=0,N.layout(),D._site.surface.style.width=D._sizes.surfaceContentSize+"px",D._layoutAnimations(V,R)}),(function(x){return F.wrapError(x)})),{realizedRangeComplete:this._layoutPromise,layoutComplete:this._layoutPromise}},numberOfItemsPerItemsBlock:{get:function ListLayout_getNumberOfItemsPerItemsBlock(){var A=this;return this._measureItem(0).then((function(){return A._envInfo.nestedFlexTooLarge||A._envInfo.nestedFlexTooSmall?(A._usingStructuralNodes=!0,Number.MAX_VALUE):(A._usingStructuralNodes=x.ListLayout._numberOfItemsPerItemsBlock>0,x.ListLayout._numberOfItemsPerItemsBlock)}))}}},{_numberOfItemsPerItemsBlock:10})})),CellSpanningLayout:V.Namespace._lazy((function(){return V.Class.derive(x._LayoutCommon,(function CellSpanningLayout_ctor(x){x=x||{},this._itemInfo=x.itemInfo,this._groupInfo=x.groupInfo,this._groupHeaderPosition=x.groupHeaderPosition||oe.top,this._horizontal=!0,this._cellSpanning=!0}),{maximumRowsOrColumns:{get:function(){return this._maxRowsOrColumns},set:function(x){this._setMaxRowsOrColumns(x)}},itemInfo:{enumerable:!0,get:function(){return this._itemInfo},set:function(x){this._itemInfo=x,this._invalidateLayout()}},groupInfo:{enumerable:!0,get:function(){return this._groupInfo},set:function(x){this._groupInfo=x,this._invalidateLayout()}},orientation:{enumerable:!0,get:function(){return"horizontal"}}})})),_LayoutWrapper:V.Namespace._lazy((function(){return V.Class.define((function LayoutWrapper_ctor(x){this.defaultAnimations=!0,this.initialize=function LayoutWrapper_initialize(A,V){x.initialize(A,V)},this.hitTest=function LayoutWrapper_hitTest(A,V){return x.hitTest(A,V)},x.uninitialize&&(this.uninitialize=function LayoutWrapper_uninitialize(){x.uninitialize()}),"numberOfItemsPerItemsBlock"in x&&Object.defineProperty(this,"numberOfItemsPerItemsBlock",{get:function LayoutWrapper_getNumberOfItemsPerItemsBlock(){return x.numberOfItemsPerItemsBlock}}),x._getItemPosition&&(this._getItemPosition=function LayoutWrapper_getItemPosition(A){return x._getItemPosition(A)}),x.itemsFromRange&&(this.itemsFromRange=function LayoutWrapper_itemsFromRange(A,V){return x.itemsFromRange(A,V)}),x.getAdjacent&&(this.getAdjacent=function LayoutWrapper_getAdjacent(A,V){return x.getAdjacent(A,V)}),x.dragOver&&(this.dragOver=function LayoutWrapper_dragOver(A,V,R){return x.dragOver(A,V,R)}),x.dragLeave&&(this.dragLeave=function LayoutWrapper_dragLeave(){return x.dragLeave()});var A={enumerable:!0,get:function(){return"vertical"}};if(void 0!==x.orientation&&(A.get=function(){return x.orientation},A.set=function(A){x.orientation=A}),Object.defineProperty(this,"orientation",A),(x.setupAnimations||x.executeAnimations)&&(this.defaultAnimations=!1,this.setupAnimations=function LayoutWrapper_setupAnimations(){return x.setupAnimations()},this.executeAnimations=function LayoutWrapper_executeAnimations(){return x.executeAnimations()}),x.layout)if(this.defaultAnimations){var V=this;this.layout=function LayoutWrapper_layout(A,R,D,N){var U,B=normalizeLayoutPromises(x.layout(A,R,[],[]));return B.realizedRangeComplete.then((function(){U=!0})),U&&V._layoutAnimations(D,N),B}}else this.layout=function LayoutWrapper_layout(A,V,R,D){return normalizeLayoutPromises(x.layout(A,V,R,D))}}),{uninitialize:function LayoutWrapper_uninitialize(){},numberOfItemsPerItemsBlock:{get:function LayoutWrapper_getNumberOfItemsPerItemsBlock(){}},layout:function LayoutWrapper_layout(x,A,V,R){return this.defaultAnimations&&this._layoutAnimations(V,R),normalizeLayoutPromises()},itemsFromRange:function LayoutWrapper_itemsFromRange(){return{firstIndex:0,lastIndex:Number.MAX_VALUE}},getAdjacent:function LayoutWrapper_getAdjacent(x,A){switch(A){case J.pageUp:case J.upArrow:case J.leftArrow:return{type:x.type,index:x.index-1};case J.downArrow:case J.rightArrow:case J.pageDown:return{type:x.type,index:x.index+1}}},dragOver:function LayoutWrapper_dragOver(){},dragLeave:function LayoutWrapper_dragLeaver(){},setupAnimations:function LayoutWrapper_setupAnimations(){},executeAnimations:function LayoutWrapper_executeAnimations(){},_getItemPosition:function LayoutWrapper_getItemPosition(){},_layoutAnimations:function LayoutWrapper_layoutAnimations(){}})}))});var oe={left:"left",top:"top"};function getMargins(x){return{left:getDimension(x,"marginLeft"),right:getDimension(x,"marginRight"),top:getDimension(x,"marginTop"),bottom:getDimension(x,"marginBottom")}}V.Namespace._moduleDefine(x,"WinJS.UI",{HeaderPosition:oe,_getMargins:getMargins})})),R("WinJS/Controls/ListView/_VirtualizeContentsView",["exports","../../Core/_Global","../../Core/_Base","../../Core/_BaseUtils","../../Promise","../../_Signal","../../Scheduler","../../Utilities/_Dispose","../../Utilities/_ElementUtilities","../../Utilities/_SafeHtml","../../Utilities/_UI","../ItemContainer/_Constants","../ItemContainer/_ItemEventsHandler","./_Helpers","./_ItemsContainer"],(function virtualizeContentsViewInit(x,A,V,R,D,N,U,B,F,W,H,z,G,j,q){"use strict";function setFlow(x,A){F._setAttribute(x,"aria-flowto",A.id),F._setAttribute(A,"x-ms-aria-flowfrom",x.id)}V.Namespace._moduleDefine(x,"WinJS.UI",{_VirtualizeContentsView:V.Namespace._lazy((function(){function cooperativeQueueWorker(x){for(var A=x.job._workItems;A.length&&!x.shouldYield;)A.shift()();x.setWork(cooperativeQueueWorker),A.length||x.job.pause()}function scheduleQueueJob(x,A){var V=U.schedule(cooperativeQueueWorker,x,null,A);return V._workItems=[],V.addWork=function(x,A){A?this._workItems.unshift(x):this._workItems.push(x),this.resume()},V.clearWork=function(){this._workItems.length=0},V.dispose=function(){this.cancel(),this._workItems.length=0},V}function shouldWaitForSeZo(x){return x._zooming||x._pinching}function waitForSeZo(A,V){return A._isZombie()?D.wrap():shouldWaitForSeZo(A)?(+V!==V&&(V=x._waitForSeZoTimeoutDuration),D.timeout(x._waitForSeZoIntervalDuration).then((function(){return(V-=x._waitForSeZoIntervalDuration)<=0||waitForSeZo(A,V)}))):D.wrap()}function makeFunctor(x){if("number"==typeof x){var A=x;x=function(){return{position:A,direction:"right"}}}return x}var x=V.Class.define((function VirtualizeContentsView_ctor(A){this._listView=A,this._forceRelayout=!1,this.maxLeadingPages=R._isiOS?x._iOSMaxLeadingPages:x._defaultPagesToPrefetch,this.maxTrailingPages=R._isiOS?x._iOSMaxTrailingPages:x._defaultPagesToPrefetch,this.items=new q._ItemsContainer(A),this.firstIndexDisplayed=-1,this.lastIndexDisplayed=-1,this.begin=0,this.end=0,this._realizePass=1,this._firstLayoutPass=!0,this._runningAnimations=null,this._renderCompletePromise=D.wrap(),this._state=new Q(this),this._createLayoutSignal(),this._createTreeBuildingSignal(),this._layoutWork=null,this._onscreenJob=scheduleQueueJob(U.Priority.aboveNormal,"on-screen items"),this._frontOffscreenJob=scheduleQueueJob(U.Priority.normal,"front off-screen items"),this._backOffscreenJob=scheduleQueueJob(U.Priority.belowNormal,"back off-screen items"),this._scrollbarPos=0,this._direction="right",this._scrollToFunctor=makeFunctor(0)}),{_dispose:function VirtualizeContentsView_dispose(){this.cleanUp(),this.items=null,this._renderCompletePromise&&this._renderCompletePromise.cancel(),this._renderCompletePromise=null,this._onscreenJob.dispose(),this._frontOffscreenJob.dispose(),this._backOffscreenJob.dispose()},_createItem:function VirtualizeContentsView_createItem(x,A,V,R){var N=this;N._listView._itemsManager._itemFromItemPromiseThrottled(A).done((function(A){A?V(x,A,N._listView._itemsManager._recordFromElement(A)):R(x)}),(function(A){return R(x),D.wrapError(A)}))},_addItem:function VirtualizeContentsView_addItem(x,A,V,R){if(this._realizePass===R){var D=this._listView._itemsManager._recordFromElement(V);delete this._pendingItemPromises[D.itemPromise.handle],this.items.setItemAt(A,{itemBox:null,container:null,element:V,detached:!0,itemsManagerRecord:D})}},lastItemIndex:function VirtualizeContentsView_lastItemIndex(){return this.containers?this.containers.length-1:-1},_setSkipRealizationForChange:function(A){A?this._realizationLevel!==x._realizationLevel.realize&&(this._realizationLevel=x._realizationLevel.skip):this._realizationLevel=x._realizationLevel.realize},_realizeItems:function VirtualizeContentsView_realizeItems(x,A,V,R,B,W,H,j,q,Q){H=H||"right";var K=V-A,J=q-j+1,X=J,Y=V-q-1,$=j-A,Z=[],ee=new N,te=new N,ie=new N,ne=this;function itemIsReady(x,A){Z.push(D._cancelBlocker(A.renderComplete)),delivered(x)}function appendItemsToDom(x,A){if(!ne._listView._isZombie()){var V,R=0,D=-1;for(V=x;V<=A;V++){var N=ne.items.itemDataAt(V);if(N){var U=N.element,W=N.itemBox;W||(W=ne._listView._itemBoxTemplate.cloneNode(!0),N.itemBox=W,W.appendChild(U),F.addClass(U,z._itemClass),ne._listView._setupAriaSelectionObserver(U),ne._listView._isSelected(V)&&G._ItemEventsHandler.renderSelection(W,U,!0,!0),ne._listView._currentMode().renderDragSourceOnRealizedItem(V,W)),updateDraggable(N,U);var j=ne.getContainer(V);W.parentNode!==j&&(N.container=j,ne._appendAndRestoreFocus(j,W),R++,D<0&&(D=V),ne._listView._isSelected(V)&&F.addClass(j,z._selectedClass),F.removeClass(j,z._backdropClass),ne.items.elementAvailable(V))}}R>0&&ne._reportElementsLevel(H)}function updateDraggable(x,A){x.updatedDraggableAttribute||!ne._listView.itemsDraggable&&!ne._listView.itemsReorderable||x.itemsManagerRecord.renderComplete.done((function(){ne._realizePass===B&&(F.hasClass(A,z._nonDraggableClass)||(x.itemBox.draggable=!0),x.updatedDraggableAttribute=!0)}))}}function scheduleReadySignal(x,A,V,R,N){for(var U=[],F=x;F<=A;F++){var W=ne.items.itemDataAt(F);W&&U.push(W.itemsManagerRecord.itemPromise)}function schedule(x){var A=ne.items.itemDataAt(x);if(A){var R=A.itemsManagerRecord;R.readyComplete||ne._realizePass!==B||V.addWork((function(){ne._listView._isZombie()||R.pendingReady&&ne._realizePass===B&&R.pendingReady()}),N)}}D.join(U).then((function(){if("right"===R)for(var V=x;V<=A;V++)schedule(V);else for(V=A;V>=x;V--)schedule(V)}))}function delivered(x){if(ne._realizePass===B){if(x>=j&&x<=q){if(0==--X){if(appendItemsToDom(j,q),function removeGaps(x,A,V,R){if(!Q){for(var D=!1;x>=V;)D=testGap(x,D),x--;for(D=!1;A<=R;)D=testGap(A,D),A++}function testGap(x,A){var V=ne.items.itemDataAt(x);if(V){var R=V.itemBox;return!R||!R.parentNode||!!A&&(F.addClass(R.parentNode,z._backdropClass),R.parentNode.removeChild(R),!0)}return!0}}(j,q,A,V),ne._firstLayoutPass){scheduleReadySignal(j,q,ne._frontOffscreenJob,"right"===H?"left":"right",!0);var R=U.schedulePromiseHigh(null,"WinJS.UI.ListView.entranceAnimation").then((function(){if(!ne._listView._isZombie()){var x=ne._listView._animateListEntrance(!ne._firstEntranceAnimated);return ne._firstEntranceAnimated=!0,x}}));ne._runningAnimations=D.join([ne._runningAnimations,R]),ne._runningAnimations.done((function(){ne._realizePass===B&&(ne._runningAnimations=null,ee.complete())})),ne._firstLayoutPass=!1,ne._listView._isCurrentZoomView&&U.requestDrain(ne._onscreenJob.priority)}else scheduleReadySignal(j,q,ne._frontOffscreenJob,H),ee.complete();ne._updateHeaders(ne._listView._canvas,j,q+1).done((function(){te.complete()}))}}else x<j?(--$%J==0&&appendItemsToDom(A,j-1),$||(ne._updateHeaders(ne._listView._canvas,A,j).done((function(){"right"!==H&&ie.complete()})),scheduleReadySignal(A,j-1,"right"!==H?ne._frontOffscreenJob:ne._backOffscreenJob,"left"))):x>q&&(--Y%J==0&&appendItemsToDom(q+1,V-1),Y||(ne._updateHeaders(ne._listView._canvas,q+1,V).then((function(){"right"===H&&ie.complete()})),scheduleReadySignal(q+1,V-1,"right"===H?ne._frontOffscreenJob:ne._backOffscreenJob,"right")));0==--K&&(ne._renderCompletePromise=D.join(Z).then(null,(function(x){if(Array.isArray(x)&&x.some((function(x){return x&&!(x instanceof Error&&"Canceled"===x.name)})))return D.wrapError(x)})),(ne._headerRenderPromises||D.wrap()).done((function(){U.schedule((function VirtualizeContentsView_async_delivered(){ne._listView._isZombie()?oe.cancel():oe.complete()}),Math.min(ne._onscreenJob.priority,ne._backOffscreenJob.priority),null,"WinJS.UI.ListView._allItemsRealized")})))}}function newItemIsReady(A,V,R){ne._realizePass===B&&(V=R.element,ne._addItem(x,A,V,B),itemIsReady(A,R))}if(K>0){ne.firstIndexDisplayed=j,ne.lastIndexDisplayed=q;var re=ne._listView._isCurrentZoomView;ne._highPriorityRealize&&(ne._firstLayoutPass||ne._hasAnimationInViewportPending)?(ne._highPriorityRealize=!1,ne._onscreenJob.priority=U.Priority.high,ne._frontOffscreenJob.priority=U.Priority.normal,ne._backOffscreenJob.priority=U.Priority.belowNormal):ne._highPriorityRealize?(ne._highPriorityRealize=!1,ne._onscreenJob.priority=U.Priority.high,ne._frontOffscreenJob.priority=U.Priority.high-1,ne._backOffscreenJob.priority=U.Priority.high-1):re?(ne._onscreenJob.priority=U.Priority.aboveNormal,ne._frontOffscreenJob.priority=U.Priority.normal,ne._backOffscreenJob.priority=U.Priority.belowNormal):(ne._onscreenJob.priority=U.Priority.belowNormal,ne._frontOffscreenJob.priority=U.Priority.idle,ne._backOffscreenJob.priority=U.Priority.idle);var se,oe=new N,ae=ne._listView._versionManager.cancelOnNotification(oe.promise),queueStage1AfterStage0=function(x,A){A.startStage1&&A.stage0.then((function(){ne._realizePass===B&&A.startStage1&&x.addWork(A.startStage1)}))},queueWork=function(x,A){if(!ne.items.itemDataAt(A)){var V=ne._listView._itemsManager._itemPromiseAtIndex(A);ne._pendingItemPromises[V.handle]=V,delete ne._previousRealizationPendingItemPromises[V.handle],x.addWork((function VirtualizeContentsView_realizeItemsWork(){if(!ne._listView._isZombie()&&(ne._createItem(A,V,newItemIsReady,delivered),!ne._listView._isZombie()&&ne._realizePass===B&&V.handle)){var R=ne._listView._itemsManager._recordFromHandle(V.handle);queueStage1AfterStage0(x,R)}}))}},queueRight=function(x,A,V){for(var R=A;R<=V;R++)queueWork(x,R)},queueLeft=function(x,A,V){for(var R=V;R>=A;R--)queueWork(x,R)},handleExistingRange=function(x,A,V){for(var R=A;R<=V;R++){var D=ne.items.itemDataAt(R);if(D){var N=D.itemsManagerRecord;itemIsReady(R,N),queueStage1AfterStage0(x,N)}}};this._previousRealizationPendingItemPromises=this._pendingItemPromises||{},this._pendingItemPromises={},"left"===H?(queueLeft(ne._onscreenJob,j,q),queueLeft(ne._frontOffscreenJob,A,j-1),se=A>j-1):(queueRight(ne._onscreenJob,j,q),queueRight(ne._frontOffscreenJob,q+1,V-1),se=q+1>V-1);for(var le=0,ce=Object.keys(this._previousRealizationPendingItemPromises),de=ce.length;le<de;le++){var ue=ce[le];ne._listView._itemsManager.releaseItemPromise(this._previousRealizationPendingItemPromises[ue])}this._previousRealizationPendingItemPromises={},handleExistingRange(ne._onscreenJob,j,q),"left"===H?handleExistingRange(ne._frontOffscreenJob,A,j-1):handleExistingRange(ne._frontOffscreenJob,q+1,V-1);var he=X===q-j+1;return ne._firstLayoutPass?ne._listView._canvas.style.opacity=0:he?ne._listView._showProgressBar(ne._listView._element,"50%","50%"):ne._listView._hideProgressBar(),ne._frontOffscreenJob.pause(),ne._backOffscreenJob.pause(),te.promise.done((function(){ne._frontOffscreenJob.resume(),se&&ie.complete()}),(function(){oe.cancel()})),ie.promise.done((function(){"left"===H?(queueRight(ne._backOffscreenJob,q+1,V-1),handleExistingRange(ne._backOffscreenJob,q+1,V-1)):(queueLeft(ne._backOffscreenJob,A,j-1),handleExistingRange(ne._backOffscreenJob,A,j-1)),ne._backOffscreenJob.resume()})),oe.promise.done((function(){ne._listView._versionManager.clearCancelOnNotification(ae)}),(function(x){return ne._listView._versionManager.clearCancelOnNotification(ae),ne._onscreenJob.clearWork(),ne._frontOffscreenJob.clearWork(),ne._backOffscreenJob.clearWork(),ee.cancel(),te.cancel(),D.wrapError(x)})),{viewportItemsRealized:te.promise,allItemsRealized:oe.promise,loadingCompleted:D.join([oe.promise,ee.promise]).then((function(){for(var x=[],R=A;R<V;R++){var N=ne.items.itemDataAt(R);N&&x.push(N.itemsManagerRecord.itemReadyPromise)}return D._cancelBlocker(D.join(x))}))}}return{viewportItemsRealized:D.wrap(),allItemsRealized:D.wrap(),loadingCompleted:D.wrap()}},_setAnimationInViewportState:function VirtualizeContentsView_setAnimationInViewportState(x){if(this._hasAnimationInViewportPending=!1,x&&x.length>0)for(var A=this._listView._getViewportLength(),V=this._listView._layout.itemsFromRange(this._scrollbarPos,this._scrollbarPos+A-1),R=0,D=x.length;R<D;R++){var N=x[R];if(N.newIndex>=V.firstIndex&&N.newIndex<=V.lastIndex&&N.newIndex!==N.oldIndex){this._hasAnimationInViewportPending=!0;break}}},_addHeader:function VirtualizeContentsView_addHeader(x,A){var V=this;return this._listView._groups.renderGroup(A).then((function(x){if(x){x.element.tabIndex=0;var R=V._getHeaderContainer(A);x.element.parentNode!==R&&(R.appendChild(x.element),F.addClass(x.element,z._headerClass)),V._listView._groups.setDomElement(A,x.element)}}))},_updateHeaders:function VirtualizeContentsView_updateHeaders(x,A,V){var R=this;function updateGroup(A){var V=R._listView._groups.group(A);if(V&&!V.header){var N=V.headerPromise;return N||(N=V.headerPromise=R._addHeader(x,A)).done((function(){V.headerPromise=null}),(function(){V.headerPromise=null})),N}return D.wrap()}this._listView._groups.removeElements();var N=this._listView._groups.groupFromItem(A),U=this._listView._groups.groupFromItem(V-1),B=[];if(null!==N)for(;N<=U;N++)B.push(updateGroup(N));function done(){R._headerRenderPromises=null}return this._headerRenderPromises=D.join(B,this._headerRenderPromises).then(done,done),this._headerRenderPromises||D.wrap()},_unrealizeItem:function VirtualizeContentsView_unrealizeItem(x){var A,V=this._listView,R=V._selection._getFocused();R.type===H.ObjectType.item&&R.index===x&&(V._unsetFocusOnItem(),A=!0);var D=this.items.itemDataAt(x),N=D.element,U=D.itemBox;U&&U.parentNode&&(F.removeClass(U.parentNode,z._selectedClass),F.removeClass(U.parentNode,z._footprintClass),F.addClass(U.parentNode,z._backdropClass),U.parentNode.removeChild(U)),D.container=null,V._currentMode().itemUnrealized&&V._currentMode().itemUnrealized(x,U),this.items.removeItem(x),D.removed||V._itemsManager.releaseItem(N),B._disposeElement(N),A&&V._setFocusOnItem(V._selection._getFocused())},_unrealizeGroup:function VirtualizeContentsView_unrealizeGroup(x){var A,V=x.header,R=this._listView._selection._getFocused();R.type===H.ObjectType.groupHeader&&this._listView._groups.group(R.index)===x&&(this._listView._unsetFocusOnItem(),A=!0),V.parentNode&&V.parentNode.removeChild(V),B._disposeElement(V),x.header=null,x.left=-1,x.top=-1,A&&this._listView._setFocusOnItem(this._listView._selection._getFocused())},_unrealizeItems:function VirtualizeContentsView_unrealizeItems(x){var A=this,V=0;this.items.eachIndex((function(R){if(R<A.begin||R>=A.end)return A._unrealizeItem(R),x&&++V>=x}));var R=this._listView._groups,D=R.groupFromItem(this.begin);if(null!==D)for(var N=R.groupFromItem(this.end-1),U=0,B=R.length();U<B;U++){var F=R.group(U);(U<D||U>N)&&F.header&&this._unrealizeGroup(F)}},_unrealizeExcessiveItems:function VirtualizeContentsView_unrealizeExcessiveItems(){var x=this.items.count(),A=this.end-this.begin+this._listView._maxDeferredItemCleanup;x>A&&this._unrealizeItems(x-A)},_lazilyUnrealizeItems:function VirtualizeContentsView_lazilyUnrealizeItems(){var x=this;return waitForSeZo(this._listView).then((function(){function done(){}if(!x._listView._isZombie()){var A=[];x.items.eachIndex((function(V){(V<x.begin||V>=x.end)&&A.push(V)}));var V,R=[],N=x._listView._groups,B=N.groupFromItem(x.begin);if(null!==B)for(var F=N.groupFromItem(x.end-1),W=0,H=N.length();W<H;W++){var z=N.group(W);(W<B||W>F)&&z.header&&R.push(z)}return A.length||R.length?new D((function(D){V=U.schedule((function unrealizeWorker(V){if(!x._listView._isZombie()){for(var N=-1,U=shouldWaitForSeZo(x._listView);A.length&&!U&&!V.shouldYield;){var B=A.shift();x._unrealizeItem(B),N<0&&(N=B)}for(;R.length&&!U&&!V.shouldYield;)x._unrealizeGroup(R.shift());A.length||R.length?U?V.setPromise(waitForSeZo(x._listView).then((function(){return unrealizeWorker}))):V.setWork(unrealizeWorker):D()}}),U.Priority.belowNormal,null,"WinJS.UI.ListView._lazilyUnrealizeItems")})).then(done,(function(x){return V.cancel(),D.wrapError(x)})):D.wrap()}}))},_getBoundingRectString:function VirtualizeContentsView_getBoundingRectString(x){var A;if(x>=0&&x<this.containers.length){var V=this._listView._layout._getItemPosition(x);V&&(A="["+V.left+"; "+V.top+"; "+V.width+"; "+V.height+" ]")}return A||""},_clearDeferTimeout:function VirtualizeContentsView_clearDeferTimeout(){this.deferTimeout&&(this.deferTimeout.cancel(),this.deferTimeout=null),-1!==this.deferredActionCancelToken&&(this._listView._versionManager.clearCancelOnNotification(this.deferredActionCancelToken),this.deferredActionCancelToken=-1)},_setupAria:function VirtualizeContentsView_setupAria(x){if(!this._listView._isZombie()){var A=this;return this._listView._createAriaMarkers(),this._listView._itemsCount().then((function(V){if(!(V>0&&-1!==A.firstIndexDisplayed&&-1!==A.lastIndexDisplayed))return D.wrap();var R,N,B,W,H,z,G=A._listView._ariaStartMarker,j=A._listView._ariaEndMarker,q=A.begin,Q=A.items.itemAt(A.begin);return Q?(F._ensureId(Q),A._listView._groupsEnabled()?(N=A._listView._groups,B=W=N.groupFromItem(A.begin),H=N.group(W),z=calcLastRealizedIndexInGroup(W),F._ensureId(H.header),F._setAttribute(H.header,"role",A._listView._headerRole),F._setAttribute(H.header,"x-ms-aria-flowfrom",G.id),setFlow(H.header,Q),F._setAttribute(H.header,"tabindex",A._listView._tabIndex)):F._setAttribute(Q,"x-ms-aria-flowfrom",G.id),new D((function(D){var G=x;R=U.schedule((function ariaWorker(x){if(!A._listView._isZombie()){for(;q<A.end;q++){if(!G&&shouldWaitForSeZo(A._listView))return void x.setPromise(waitForSeZo(A._listView).then((function(x){return G=x,ariaWorker})));if(x.shouldYield)return void x.setWork(ariaWorker);Q=A.items.itemAt(q);var R=A.items.itemAt(q+1);if(R&&F._ensureId(R),F._setAttribute(Q,"role",A._listView._itemRole),F._setAttribute(Q,"aria-setsize",V),F._setAttribute(Q,"aria-posinset",q+1),F._setAttribute(Q,"tabindex",A._listView._tabIndex),A._listView._groupsEnabled())if(q!==z&&R)setFlow(Q,R);else{var U=N.group(W+1);U&&U.header&&R?(F._setAttribute(U.header,"tabindex",A._listView._tabIndex),F._setAttribute(U.header,"role",A._listView._headerRole),F._ensureId(U.header),setFlow(Q,U.header),setFlow(U.header,R)):F._setAttribute(Q,"aria-flowto",j.id),W++,H=U,z=calcLastRealizedIndexInGroup(W)}else R?setFlow(Q,R):F._setAttribute(Q,"aria-flowto",j.id);if(!R)break}A._listView._fireAccessibilityAnnotationCompleteEvent(A.begin,q,B,W-1),D()}}),U.Priority.belowNormal,null,"WinJS.UI.ListView._setupAria")}),(function(){R.cancel()}))):void 0}))}function calcLastRealizedIndexInGroup(x){var V=A._listView._groups.group(x+1);return V?Math.min(V.startIndex-1,A.end-1):A.end-1}},_setupDeferredActions:function VirtualizeContentsView_setupDeferredActions(){var x=this;function cleanUp(){x._listView._isZombie()||(x.deferTimeout=null,x._listView._versionManager.clearCancelOnNotification(x.deferredActionCancelToken),x.deferredActionCancelToken=-1)}this._clearDeferTimeout(),this.deferTimeout=this._lazilyRemoveRedundantItemsBlocks().then((function(){return D.timeout(z._DEFERRED_ACTION)})).then((function(){return waitForSeZo(x._listView)})).then((function(A){return x._setupAria(A)})).then(cleanUp,(function(x){return cleanUp(),D.wrapError(x)})),this.deferredActionCancelToken=this._listView._versionManager.cancelOnNotification(this.deferTimeout)},_updateAriaMarkers:function VirtualizeContentsView_updateAriaMarkers(x,A,V){var R=this;if(!this._listView._isZombie()){this._listView._createAriaMarkers();var D,N,U=this._listView._ariaStartMarker,B=this._listView._ariaEndMarker;if(-1!==A&&-1!==V&&A<=V&&(D=function getFirstVisibleItem(){return R.items.itemAt(A)}(),N=function getLastVisibleItem(){for(var x=V;x>=A;x--)if(R.items.itemAt(x))return R.items.itemAt(x);return null}()),!x&&D&&N){if(F._ensureId(D),F._ensureId(N),this._listView._groupsEnabled()){var W=this._listView._groups,H=W.group(W.groupFromItem(A));H.header&&(F._ensureId(H.header),A===H.startIndex?F._setAttribute(U,"aria-flowto",H.header.id):F._setAttribute(U,"aria-flowto",D.id))}else F._setAttribute(U,"aria-flowto",D.id);F._setAttribute(B,"x-ms-aria-flowfrom",N.id)}else setFlow(U,B),this._listView._fireAccessibilityAnnotationCompleteEvent(-1,-1)}},updateAriaForAnnouncement:function VirtualizeContentsView_updateAriaForAnnouncement(x,A){if(x!==this._listView.header&&x!==this._listView.footer){var V=-1,R=H.ObjectType.item;F.hasClass(x,z._headerClass)?(V=this._listView._groups.index(x),R=H.ObjectType.groupHeader,F._setAttribute(x,"role",this._listView._headerRole),F._setAttribute(x,"tabindex",this._listView._tabIndex)):(V=this.items.index(x),F._setAttribute(x,"aria-setsize",A),F._setAttribute(x,"aria-posinset",V+1),F._setAttribute(x,"role",this._listView._itemRole),F._setAttribute(x,"tabindex",this._listView._tabIndex)),R===H.ObjectType.groupHeader?this._listView._fireAccessibilityAnnotationCompleteEvent(-1,-1,V,V):this._listView._fireAccessibilityAnnotationCompleteEvent(V,V,-1,-1)}},_reportElementsLevel:function VirtualizeContentsView_reportElementsLevel(x){var A=this.items;function elementsCount(x,V){for(var R=0,D=x;D<=V;D++){var N=A.itemDataAt(D);N&&N.container&&R++}return R}"right"===x?Math.floor(100*elementsCount(this.firstIndexDisplayed,this.end-1)/(this.end-this.firstIndexDisplayed)):Math.floor(100*elementsCount(this.begin,this.lastIndexDisplayed)/(this.lastIndexDisplayed-this.begin+1))},_createHeaderContainer:function VirtualizeContentsView_createHeaderContainer(x){return this._createSurfaceChild(z._headerContainerClass,x)},_createItemsContainer:function VirtualizeContentsView_createItemsContainer(x){var V=this._createSurfaceChild(z._itemsContainerClass,x),R=A.document.createElement("div");return R.className=z._padderClass,V.appendChild(R),V},_ensureContainerInDOM:function VirtualizeContentsView_ensureContainerInDOM(x){var A=this.containers[x];return!(!A||this._listView._canvas.contains(A)||(this._forceItemsBlocksInDOM(x,x+1),0))},_ensureItemsBlocksInDOM:function VirtualizeContentsView_ensureItemsBlocksInDOM(x,A){if(this._expandedRange){var V=this._expandedRange.first.index,R=this._expandedRange.last.index+1;x<=V&&A>V?A=Math.max(A,R):x<R&&A>=R&&(x=Math.min(x,V))}this._forceItemsBlocksInDOM(x,A)},_removeRedundantItemsBlocks:function VirtualizeContentsView_removeRedundantItemsBlocks(){-1!==this.begin&&-1!==this.end&&this._forceItemsBlocksInDOM(this.begin,this.end)},_lazilyRemoveRedundantItemsBlocks:function VirtualizeContentsView_lazilyRemoveRedundantItemsBlocks(){var A=this;return waitForSeZo(this._listView).then((function(){function done(){}var V;if(!A._listView._isZombie())return A._expandedRange&&-1!==A.begin&&-1!==A.end&&(A._expandedRange.first.index<A.begin||A._expandedRange.last.index+1>A.end)?new D((function(R){V=U.schedule((function blocksCleanupWorker(V){if(!A._listView._isZombie()){for(var D=shouldWaitForSeZo(A._listView);A._expandedRange.first.index<A.begin&&!D&&!V.shouldYield;){var N=Math.min(A.begin,A._expandedRange.first.index+A._blockSize*x._blocksToRelease);A._forceItemsBlocksInDOM(N,A.end)}for(;A._expandedRange.last.index+1>A.end&&!D&&!V.shouldYield;){var U=Math.max(A.end,A._expandedRange.last.index-A._blockSize*x._blocksToRelease);A._forceItemsBlocksInDOM(A.begin,U)}A._expandedRange.first.index<A.begin||A._expandedRange.last.index+1>A.end?D?V.setPromise(waitForSeZo(A._listView).then((function(){return blocksCleanupWorker}))):V.setWork(blocksCleanupWorker):R()}}),U.Priority.belowNormal,null,"WinJS.UI.ListView._lazilyRemoveRedundantItemsBlocks")})).then(done,(function(x){return V.cancel(),D.wrapError(x)})):D.wrap()}))},_forceItemsBlocksInDOM:function VirtualizeContentsView_forceItemsBlocksInDOM(x,A){if(this._blockSize){var V=this,R="padding"+(this._listView._horizontal()?"Left":"Top"),D=this._listView._groups.groupFromItem(x),N=this._listView._groups.groupFromItem(A-1),U=this._listView._groups.group(D),B=V.tree[D].itemsContainer,W=Math.floor((x-U.startIndex)/this._blockSize),H=this._listView._groups.group(N),z=V.tree[N].itemsContainer,G=Math.floor((A-1-H.startIndex)/this._blockSize);W&&-1===V._listView._itemsBlockExtent&&forEachBlock((function(x,A){return A.items.length===V._blockSize&&A.element.parentNode===x.element&&(measureItemsBlock(A),!0)}));var j,q=this._expandedRange?removedFromRange([this._expandedRange.first.groupIndex,this._expandedRange.last.groupIndex],[D,N]):null;q&&q.forEach((function collapseGroup(x){if(x<V.tree.length){var A=V.tree[x].itemsContainer;removeBlocks(A,0,A.itemsBlocks.length),setPadder(A,"")}})),this._expandedRange&&this._expandedRange.first.groupKey===U.key?(j=removedFromRange([this._expandedRange.first.block,Number.MAX_VALUE],[W,Number.MAX_VALUE]))&&removeBlocks(B,j):this._expandedRange&&D>=this._expandedRange.first.groupIndex&&D<=this._expandedRange.last.groupIndex&&removeBlocks(B,0,W),D!==N?(addBlocks(B,W,B.itemsBlocks.length),addBlocks(z,0,G+1)):addBlocks(B,W,G+1),this._expandedRange&&this._expandedRange.last.groupKey===H.key?(j=removedFromRange([0,this._expandedRange.last.block],[0,G]))&&removeBlocks(z,j):this._expandedRange&&N>=this._expandedRange.first.groupIndex&&N<=this._expandedRange.last.groupIndex&&removeBlocks(z,G+1,z.itemsBlocks.length),setPadder(B,W?W*function getItemsBlockExtent(){return-1===V._listView._itemsBlockExtent&&forEachBlock((function(x,A){return A.items.length===V._blockSize&&A.element.parentNode===x.element&&(measureItemsBlock(A),!0)})),-1===V._listView._itemsBlockExtent&&forEachBlock((function(x,A){return A.items.length===V._blockSize&&(x.element.appendChild(A.element),measureItemsBlock(A),x.element.removeChild(A.element),!0)})),V._listView._itemsBlockExtent}()+"px":""),D!==N&&setPadder(z,"");for(var Q=D+1;Q<N;Q++)expandGroup(Q);this._expandedRange={first:{index:x,groupIndex:D,groupKey:U.key,block:W},last:{index:A-1,groupIndex:N,groupKey:H.key,block:G}}}function setPadder(x,A){x.element.firstElementChild.style[R]=A}function forEachBlock(x){for(var A=0;A<V.tree.length;A++)for(var R=V.tree[A].itemsContainer,D=0,N=R.itemsBlocks.length;D<N;D++)if(x(R,R.itemsBlocks[D]))return}function measureItemsBlock(x){V._listView._itemsBlockExtent=F[V._listView._horizontal()?"getTotalWidth":"getTotalHeight"](x.element)}function removeBlocks(x,A,V){function remove(A){var V=x.itemsBlocks[A];V&&V.element.parentNode===x.element&&x.element.removeChild(V.element)}if(Array.isArray(A))A.forEach(remove);else for(var R=A;R<V;R++)remove(R)}function addBlocks(x,A,V){for(var R=x.element.firstElementChild,D=A;D<V;D++){var N=x.itemsBlocks[D];N&&(N.element.parentNode!==x.element&&x.element.insertBefore(N.element,R.nextElementSibling),R=N.element)}}function expandGroup(x){if(x<V.tree.length){var A=V.tree[x].itemsContainer;addBlocks(A,0,A.itemsBlocks.length),setPadder(A,"")}}function removedFromRange(x,A){function expand(x,A){for(var V=[],R=x;R<=A;R++)V.push(R);return V}var V=A[0],R=A[1],D=x[0],N=x[1];return R<D||V>N?expand(D,N):V>D&&R<N?expand(D,V-1).concat(expand(R+1,N)):D<V?expand(D,V-1):N>R?expand(R+1,N):null}},_realizePageImpl:function VirtualizeContentsView_realizePageImpl(){var A=this;return this._scrollbarPos,this._forceRelayout,this._listView._versionManager.locked?(this._listView._versionManager.unlocked.done((function(){A._listView._isZombie()||A._listView._batchViewUpdates(z._ViewChange.realize,z._ScrollToPriority.low,A._listView.scrollPosition)})),D.cancel):new D((function(V){var R=new N;function complete(){V(),R.complete()}function viewPortPageRealized(){A._listView._hideProgressBar(),A._state.setLoadingState(A._listView._LoadingState.viewPortLoaded),A._executeAnimations&&A._setState(ie,R.promise)}function pageRealized(x){A._updateAriaMarkers(0===x,A.firstIndexDisplayed,A.lastIndexDisplayed),A._state.setLoadingState&&A._state.setLoadingState(A._listView._LoadingState.itemsLoaded)}function finish(x){A._listView._clearInsertedItems(),A._listView._groups.removeElements(),viewPortPageRealized(),pageRealized(x),complete()}A._state.setLoadingState(A._listView._LoadingState.itemsLoading),A._firstLayoutPass&&A._listView._showProgressBar(A._listView._element,"50%","50%");var U=A.containers.length;if(U){var B,W,H=A.maxLeadingPages,z=A.maxTrailingPages,G=A._listView._getViewportLength();if(A._listView._zooming)B=W=0;else if(x._disableCustomPagesPrefetch)B=W=x._defaultPagesToPrefetch;else{B="left"===A._direction?H:z;var j=Math.max(0,B-A._scrollbarPos/G);W=Math.min(H,j+("right"===A._direction?H:z))}var q=Math.max(0,A._scrollbarPos-B*G),Q=A._scrollbarPos+(1+W)*G,K=A._listView._layout.itemsFromRange(q,Q-1);if((K.firstIndex<0||K.firstIndex>=U)&&(K.lastIndex<0||K.lastIndex>=U))A.begin=-1,A.end=-1,A.firstIndexDisplayed=-1,A.lastIndexDisplayed=-1,finish(U);else{var J=F._clamp(K.firstIndex,0,U-1),X=F._clamp(K.lastIndex+1,0,U),Y=A._listView._layout.itemsFromRange(A._scrollbarPos,A._scrollbarPos+G-1),$=F._clamp(Y.firstIndex,0,U-1),Z=F._clamp(Y.lastIndex,0,U-1);if(A._realizationLevel!==x._realizationLevel.skip||A.lastRealizePass||$!==A.firstIndexDisplayed||Z!==A.lastIndexDisplayed)if((A._forceRelayout||J!==A.begin||X!==A.end||$!==A.firstIndexDisplayed||Z!==A.lastIndexDisplayed)&&J<X&&q<Q){A._cancelRealize();var ee=A._realizePass;A.begin=J,A.end=X,A.firstIndexDisplayed=$,A.lastIndexDisplayed=Z,A.deletesWithoutRealize=0,A._ensureItemsBlocksInDOM(A.begin,A.end);var te=A._realizeItems(A._listView._itemCanvas,A.begin,A.end,U,ee,A._scrollbarPos,A._direction,$,Z,A._forceRelayout);A._forceRelayout=!1;var ne=te.viewportItemsRealized.then((function(){return viewPortPageRealized(),te.allItemsRealized})).then((function(){if(A._realizePass===ee)return A._updateHeaders(A._listView._canvas,A.begin,A.end).then((function(){pageRealized(U)}))})).then((function(){return te.loadingCompleted})).then((function(){A._unrealizeExcessiveItems(),A.lastRealizePass=null,complete()}),(function(x){return A._realizePass===ee&&(A.lastRealizePass=null,A.begin=-1,A.end=-1),D.wrapError(x)}));A.lastRealizePass=D.join([te.viewportItemsRealized,te.allItemsRealized,te.loadingCompleted,ne]),A._unrealizeExcessiveItems()}else A.lastRealizePass?A.lastRealizePass.then(complete):finish(U);else A.begin=J,A.end=J+Object.keys(A.items._itemData).length,A._updateHeaders(A._listView._canvas,A.begin,A.end).done((function(){A.lastRealizePass=null,finish(U)}))}}else A.begin=-1,A.end=-1,A.firstIndexDisplayed=-1,A.lastIndexDisplayed=-1,finish(U);A._reportElementsLevel(A._direction)}))},realizePage:function VirtualizeContentsView_realizePage(x,A,V,R){this._scrollToFunctor=makeFunctor(x),this._forceRelayout=this._forceRelayout||A,this._scrollEndPromise=V,this._state.realizePage(R||Y)},onScroll:function VirtualizeContentsView_onScroll(x,A){this.realizePage(x,!1,A,Z)},reload:function VirtualizeContentsView_reload(x,A){this._listView._isZombie()||(this._scrollToFunctor=makeFunctor(x),this._forceRelayout=!0,this._highPriorityRealize=!!A,this.stopWork(!0),this._state.rebuildTree())},refresh:function VirtualizeContentsView_refresh(x){this._listView._isZombie()||(this._scrollToFunctor=makeFunctor(x),this._forceRelayout=!0,this._highPriorityRealize=!0,this.stopWork(),this._state.relayout())},waitForValidScrollPosition:function VirtualizeContentsView_waitForValidScrollPosition(x){var A=this,V=this._listView._viewport[this._listView._scrollLength]-this._listView._getViewportLength();return x>V?A._listView._itemsCount().then((function(V){return A.containers.length<V?D._cancelBlocker(A._creatingContainersWork&&A._creatingContainersWork.promise).then((function(){return A._getLayoutCompleted()})).then((function(){return x})):x})):D.wrap(x)},waitForEntityPosition:function VirtualizeContentsView_waitForEntityPosition(x){var A=this;return x.type===H.ObjectType.header||x.type===H.ObjectType.footer?D.wrap():D._cancelBlocker(this._state.waitForEntityPosition(x).then((function(){if(x.type!==H.ObjectType.groupHeader&&x.index>=A.containers.length||x.type===H.ObjectType.groupHeader&&A._listView._groups.group(x.index).startIndex>=A.containers.length)return A._creatingContainersWork&&A._creatingContainersWork.promise})).then((function(){return A._getLayoutCompleted()})))},stopWork:function VirtualizeContentsView_stopWork(x){this._state.stop(x),this._layoutWork&&this._layoutWork.cancel(),x&&this._creatingContainersWork&&this._creatingContainersWork.cancel(),x&&(this._state=new Q(this))},_cancelRealize:function VirtualizeContentsView_cancelRealize(){(this.lastRealizePass||this.deferTimeout)&&(this._forceRelayout=!0),this._clearDeferTimeout(),this._realizePass++,this._headerRenderPromises&&(this._headerRenderPromises.cancel(),this._headerRenderPromises=null);var x=this.lastRealizePass;x&&(this.lastRealizePass=null,this.begin=-1,this.end=-1,x.cancel())},resetItems:function VirtualizeContentsView_resetItems(x){if(!this._listView._isZombie()){this.firstIndexDisplayed=-1,this.lastIndexDisplayed=-1,this._runningAnimations=null,this._executeAnimations=!1;var A=this._listView;this._firstLayoutPass=!0,A._unsetFocusOnItem(),A._currentMode().onDataChanged&&A._currentMode().onDataChanged(),this.items.each((function(V,R){x&&R.parentNode&&R.parentNode.parentNode&&R.parentNode.parentNode.removeChild(R.parentNode),A._itemsManager.releaseItem(R),B._disposeElement(R)})),this.items.removeItems(),this._deferredReparenting=[],x&&A._groups.removeElements(),A._clearInsertedItems()}},reset:function VirtualizeContentsView_reset(){if(this.stopWork(!0),this._state=new Q(this),this.resetItems(),!this._listView._isZombie()){var x=this._listView;x._groups.resetGroups(),x._resetCanvas(),this.tree=null,this.keyToGroupIndex=null,this.containers=null,this._expandedRange=null}},cleanUp:function VirtualizeContentsView_cleanUp(){this.stopWork(!0),this._runningAnimations&&this._runningAnimations.cancel();var x=this._listView._itemsManager;this.items.each((function(A,V){x.releaseItem(V),B._disposeElement(V)})),this._listView._unsetFocusOnItem(),this.items.removeItems(),this._deferredReparenting=[],this._listView._groups.resetGroups(),this._listView._resetCanvas(),this.tree=null,this.keyToGroupIndex=null,this.containers=null,this._expandedRange=null,this.destroyed=!0},getContainer:function VirtualizeContentsView_getContainer(x){return this.containers[x]},_getHeaderContainer:function VirtualizeContentsView_getHeaderContainer(x){return this.tree[x].header},_getGroups:function VirtualizeContentsView_getGroups(x){if(this._listView._groupDataSource){var A=this._listView._groups.groups,V=[];if(x)for(var R=0,D=A.length;R<D;R++){var N=A[R],U=R+1<D?A[R+1].startIndex:x;V.push({key:N.key,size:U-N.startIndex})}return V}return[{key:"-1",size:x}]},_createChunk:function VirtualizeContentsView_createChunk(x,A,V){var R=this;function addToGroup(x,A){var D=x.element.children,N=D.length,U=Math.min(A-x.items.length,V);W.insertAdjacentHTMLUnsafe(x.element,"beforeend",j._repeat("<div class='win-container win-backdrop'></div>",U));for(var B=0;B<U;B++){var F=D[N+B];x.items.push(F),R.containers.push(F)}}if(this.tree.length&&this.tree.length<=x.length){var D=this.tree[this.tree.length-1],N=x[this.tree.length-1].size;if(D.itemsContainer.items.length<N)return void addToGroup(D.itemsContainer,N)}this.tree.length<x.length&&function newGroup(x){var A={header:R._listView._groupDataSource?R._createHeaderContainer():null,itemsContainer:{element:R._createItemsContainer(),items:[]}};R.tree.push(A),R.keyToGroupIndex[x.key]=R.tree.length-1,addToGroup(A.itemsContainer,x.size)}(x[this.tree.length])},_createChunkWithBlocks:function VirtualizeContentsView_createChunkWithBlocks(x,V,R,D){var N=this;function addToGroup(x,V){var U=x.itemsBlocks.length?x.itemsBlocks[x.itemsBlocks.length-1]:null;if(V=Math.min(V,D),U&&U.items.length<R){var B=Math.min(V,R-U.items.length),F=U.items.length,H=(x.itemsBlocks.length-1)*R+F,z=j._stripedContainers(B,H);W.insertAdjacentHTMLUnsafe(U.element,"beforeend",z),ee=U.element.children;for(var G=0;G<B;G++){var q=ee[F+G];U.items.push(q),N.containers.push(q)}V-=B}H=x.itemsBlocks.length*R;var Q=Math.floor(V/R),K="",J=H,X=H+R;if(Q>0){var Y=["<div class='win-itemsblock'>"+j._stripedContainers(R,J)+"</div>","<div class='win-itemsblock'>"+j._stripedContainers(R,X)+"</div>"];K=j._repeat(Y,Q),H+=Q*R}var $=V%R;$>0&&(K+="<div class='win-itemsblock'>"+j._stripedContainers($,H)+"</div>",H+=$,Q++);var Z=A.document.createElement("div");W.setInnerHTMLUnsafe(Z,K);for(var ee=Z.children,te=0;te<Q;te++){var ie=ee[te],ne={element:ie,items:j._nodeListToArray(ie.children)};x.itemsBlocks.push(ne);for(var re=0;re<ne.items.length;re++)N.containers.push(ne.items[re])}}if(this.tree.length&&this.tree.length<=x.length){var U=this.tree[this.tree.length-1].itemsContainer,B=x[this.tree.length-1].size,F=0;if(U.itemsBlocks.length&&(F=(U.itemsBlocks.length-1)*R+U.itemsBlocks[U.itemsBlocks.length-1].items.length),F<B)return void addToGroup(U,B-F)}this.tree.length<x.length&&function newGroup(x){var A={header:N._listView._groupDataSource?N._createHeaderContainer():null,itemsContainer:{element:N._createItemsContainer(),itemsBlocks:[]}};N.tree.push(A),N.keyToGroupIndex[x.key]=N.tree.length-1,addToGroup(A.itemsContainer,x.size)}(x[this.tree.length])},_generateCreateContainersWorker:function VirtualizeContentsView_generateCreateContainersWorker(){var A=this,V=!1;return function work(D){A._listView._versionManager.locked?D.setPromise(A._listView._versionManager.unlocked.then((function(){return work}))):A._listView._itemsCount().then((function(N){if(!V&&shouldWaitForSeZo(A._listView))D.setPromise(waitForSeZo(A._listView).then((function(x){return V=x,work})));else{if(A._listView._isZombie())return;V=!1;var U=R._now()+x._createContainersJobTimeslice,B=A._getGroups(N),F=A.containers.length,W=A.end===A.containers.length,H=x._chunkSize;do{A._blockSize?A._createChunkWithBlocks(B,N,A._blockSize,H):A._createChunk(B,N,H)}while(A.containers.length<N&&R._now()<U);A._listView._affectedRange.add({start:F,end:A.containers.length},N),W?(A.stopWork(),A._state.relayout()):A._state.layoutNewContainers(),A.containers.length<N?D.setWork(work):A._creatingContainersWork.complete()}}))}},_scheduleLazyTreeCreation:function VirtualizeContentsView_scheduleLazyTreeCreation(){return U.schedule(this._generateCreateContainersWorker(),U.Priority.idle,this,"WinJS.UI.ListView.LazyTreeCreation")},_createContainers:function VirtualizeContentsView_createContainers(){this.tree=null,this.keyToGroupIndex=null,this.containers=null,this._expandedRange=null;var A,V=this;return this._listView._itemsCount().then((function(x){if(0===x&&V._listView._hideProgressBar(),A=x,V._listView._groupDataSource)return V._listView._groups.initialize()})).then((function(){return A&&V._listView._groups.length()?V._listView._layout.numberOfItemsPerItemsBlock:null})).then((function(D){V._listView._resetCanvas(),V.tree=[],V.keyToGroupIndex={},V.containers=[],V._blockSize=D;var N,U=V._getGroups(A),B=R._now()+x._maxTimePerCreateContainers,F=Math.min(x._startupChunkSize,x._chunkSize);do{N=D?V._createChunkWithBlocks(U,A,D,F):V._createChunk(U,A,F)}while(R._now()<B&&V.containers.length<A&&!N);if(V._listView._affectedRange.add({start:0,end:V.containers.length},A),V.containers.length<A){var W=V._scheduleLazyTreeCreation();V._creatingContainersWork.promise.done(null,(function(){W.cancel()}))}else V._creatingContainersWork.complete()}))},_updateItemsBlocks:function VirtualizeContentsView_updateItemsBlocks(x){var V=this,R=!!x;function createNewBlock(){var x=A.document.createElement("div");return x.className=z._itemsBlockClass,x}function updateGroup(A,D){var N,U=[],B=0,F=A.itemsBlocks;if(F)for(N=0;N<F.length;N++)B+=F[N].items.length,U.push(F[N].element);else B=A.items.length;for(R?function rebuildItemsContainerWithBlocks(){A.itemsBlocks=[{element:U.length?U.shift():createNewBlock(),items:[]}];for(var R=A.itemsBlocks[0],N=0;N<B;N++){if(R.items.length===x){var F=U.length?U.shift():createNewBlock();A.itemsBlocks.push({element:F,items:[]}),R=A.itemsBlocks[A.itemsBlocks.length-1]}var W=V.containers[D+N];R.element.appendChild(W),R.items.push(W)}A.items=null}():function rebuildItemsContainer(){A.itemsBlocks=null,A.items=[];for(var x=0;x<B;x++){var R=V.containers[D+x];A.element.appendChild(R),A.items.push(R)}}(),N=0;N<U.length;N++){var W=U[N];W.parentNode===A.element&&A.element.removeChild(W)}return B}for(var D=0,N=0;D<this.tree.length;D++)N+=updateGroup(this.tree[D].itemsContainer,N);V._blockSize=x},_layoutItems:function VirtualizeContentsView_layoutItems(){var x=this;return this._listView._itemsCount().then((function(){return D.as(x._listView._layout.numberOfItemsPerItemsBlock).then((function(A){A!==x._blockSize&&(x._updateItemsBlocks(A),x._listView._itemsBlockExtent=-1);var V,R=x._listView._affectedRange.get();return R&&((V={firstIndex:Math.max(R.start-1,0),lastIndex:Math.min(x.containers.length-1,R.end)}).firstIndex<x.containers.length||0===x.containers.length)?x._listView._layout.layout(x.tree,V,x._modifiedElements||[],x._modifiedGroups||[]):(x._listView._affectedRange.clear(),{realizedRangeComplete:D.wrap(),layoutComplete:D.wrap()})}))}))},updateTree:function VirtualizeContentsView_updateTree(x,A,V){return this._state.updateTree(x,A,V)},_updateTreeImpl:function VirtualizeContentsView_updateTreeImpl(x,V,R,D){if(this._executeAnimations=!0,this._modifiedElements=R,!R.handled){R.handled=!0;var N=this;D||this._unrealizeItems();for(var U=0,B=R.length;U<B;U++)R[U]._itemBox&&R[U]._itemBox.parentNode&&F.removeClass(R[U]._itemBox.parentNode,z._selectedClass);this.items.each((function(x,A,V){V.container&&F.removeClass(V.container,z._selectedClass),V.container&&F.addClass(V.container,z._backdropClass)}));var W=this._listView._updateContainers(this._getGroups(x),x,V,R);for(removeElements(W.removedHeaders),removeElements(W.removedItemsContainers),U=0,B=R.length;U<B;U++){var H=R[U];-1!==H.newIndex?(H.element=this.getContainer(H.newIndex),H.element||console.error("Container missing after updateContainers.")):F.removeClass(H.element,z._backdropClass)}var j=A.document.activeElement;this._listView._canvas.contains(j)&&(this._requireFocusRestore=j),this._deferredReparenting=[],this.items.each((function(x,A,V){var R=N.getContainer(x),D=V.itemBox;D&&R&&(V.container=R,D.parentNode!==R&&(x>=N.firstIndexDisplayed&&x<=N.lastIndexDisplayed?N._appendAndRestoreFocus(R,D):N._deferredReparenting.push({itemBox:D,container:R})),F.removeClass(R,z._backdropClass),F[N._listView.selection._isIncluded(x)?"addClass":"removeClass"](R,z._selectedClass),!N._listView.selection._isIncluded(x)&&F.hasClass(D,z._selectedClass)&&G._ItemEventsHandler.renderSelection(D,V.element,!1,!0))}))}function removeElements(x){for(var A=0,V=x.length;A<V;A++){var R=x[A];R.parentNode.removeChild(R)}}},_completeUpdateTree:function(){if(this._deferredReparenting){var x=this._deferredReparenting.length;if(x>0){for(var A,V=0;V<x;V++)A=this._deferredReparenting[V],this._appendAndRestoreFocus(A.container,A.itemBox);this._deferredReparenting=[]}}this._requireFocusRestore=null},_appendAndRestoreFocus:function VirtualizeContentsView_appendAndRestoreFocus(x,V){var R;if(V.parentNode!==x&&(this._requireFocusRestore&&(R=A.document.activeElement),this._requireFocusRestore&&this._requireFocusRestore===R&&(x.contains(R)||V.contains(R))&&(this._listView._unsetFocusOnItem(),R=A.document.activeElement),F.empty(x),x.appendChild(V),this._requireFocusRestore&&R===this._listView._keyboardEventsHelper)){var D=this._listView._selection._getFocused();D.type===H.ObjectType.item&&this.items.itemBoxAt(D.index)===V&&(F._setActive(this._requireFocusRestore),this._requireFocusRestore=null)}},_startAnimations:function VirtualizeContentsView_startAnimations(){return this._hasAnimationInViewportPending=!1,D.as(this._listView._layout.executeAnimations()).then((function(){}))},_setState:function VirtualizeContentsView_setState(x,A){this._listView._isZombie()||(this._state.name,this._state=new x(this,A),this._state.enter())},getAdjacent:function VirtualizeContentsView_getAdjacent(x,A){var V=this;return this.waitForEntityPosition(x).then((function(){return V._listView._layout.getAdjacent(x,A)}))},hitTest:function VirtualizeContentsView_hitTest(x,A){if(this._realizedRangeLaidOut)return{index:-1,insertAfterIndex:-1};var V=this._listView._layout.hitTest(x,A);return V.index=F._clamp(V.index,-1,this._listView._cachedCount-1,0),V.insertAfterIndex=F._clamp(V.insertAfterIndex,-1,this._listView._cachedCount-1,0),V},_createTreeBuildingSignal:function VirtualizeContentsView__createTreeBuildingSignal(){if(!this._creatingContainersWork){this._creatingContainersWork=new N;var x=this;this._creatingContainersWork.promise.done((function(){x._creatingContainersWork=null}),(function(){x._creatingContainersWork=null}))}},_createLayoutSignal:function VirtualizeContentsView_createLayoutSignal(){var x=this;this._layoutCompleted||(this._layoutCompleted=new N,this._layoutCompleted.promise.done((function(){x._layoutCompleted=null}),(function(){x._layoutCompleted=null}))),this._realizedRangeLaidOut||(this._realizedRangeLaidOut=new N,this._realizedRangeLaidOut.promise.done((function(){x._realizedRangeLaidOut=null}),(function(){x._realizedRangeLaidOut=null})))},_getLayoutCompleted:function VirtualizeContentsView_getLayoutCompleted(){return this._layoutCompleted?D._cancelBlocker(this._layoutCompleted.promise):D.wrap()},_createSurfaceChild:function VirtualizeContentsView_createSurfaceChild(x,V){var R=A.document.createElement("div");return R.className=x,this._listView._canvas.insertBefore(R,V?V.nextElementSibling:null),R},_executeScrollToFunctor:function VirtualizeContentsView_executeScrollToFunctor(){var x=this;return D.as(this._scrollToFunctor?this._scrollToFunctor():null).then((function(A){x._scrollToFunctor=null,+(A=A||{}).position===A.position&&(x._scrollbarPos=A.position),x._direction=A.direction||"right"}))}},{_defaultPagesToPrefetch:2,_iOSMaxLeadingPages:6,_iOSMaxTrailingPages:2,_disableCustomPagesPrefetch:!1,_waitForSeZoIntervalDuration:100,_waitForSeZoTimeoutDuration:500,_chunkSize:500,_startupChunkSize:100,_maxTimePerCreateContainers:5,_createContainersJobTimeslice:15,_blocksToRelease:10,_realizationLevel:{skip:"skip",realize:"realize",normal:"normal"}});function nop(){}var Q=V.Class.define((function CreatedState_ctor(x){this.view=x,this.view._createTreeBuildingSignal(),this.view._createLayoutSignal()}),{name:"CreatedState",enter:function CreatedState_enter(){this.view._createTreeBuildingSignal(),this.view._createLayoutSignal()},stop:nop,realizePage:nop,rebuildTree:function CreatedState_rebuildTree(){this.view._setState(K)},relayout:function CreatedState_relayout(){this.view._setState(K)},layoutNewContainers:nop,waitForEntityPosition:function CreatedState_waitForEntityPosition(){return this.view._setState(K),this.view._getLayoutCompleted()},updateTree:nop}),K=V.Class.define((function BuildingState_ctor(x){this.view=x}),{name:"BuildingState",enter:function BuildingState_enter(){this.canceling=!1,this.view._createTreeBuildingSignal(),this.view._createLayoutSignal();var x=this,A=new N;this.promise=A.promise.then((function(){return x.view._createContainers()})).then((function(){x.view._setState(J)}),(function(A){return x.canceling||(x.view._setState(Q),x.view._listView._raiseViewComplete()),D.wrapError(A)})),A.complete()},stop:function BuildingState_stop(){this.canceling=!0,this.promise.cancel(),this.view._setState(Q)},realizePage:nop,rebuildTree:function BuildingState_rebuildTree(){this.canceling=!0,this.promise.cancel(),this.enter()},relayout:nop,layoutNewContainers:nop,waitForEntityPosition:function BuildingState_waitForEntityPosition(){return this.view._getLayoutCompleted()},updateTree:nop}),J=V.Class.define((function LayingoutState_ctor(x,A){this.view=x,this.nextStateType=A||Y}),{name:"LayingoutState",enter:function LayingoutState_enter(){var x=this;this.canceling=!1,this.view._createLayoutSignal();var A=new N;this.promise=A.promise.then((function(){return x.view._layoutItems()})).then((function(A){return x.view._layoutWork=A.layoutComplete,A.realizedRangeComplete})).then((function(){x.view._listView._clearInsertedItems(),x.view._setAnimationInViewportState(x.view._modifiedElements),x.view._modifiedElements=[],x.view._modifiedGroups=[],x.view._realizedRangeLaidOut.complete(),x.view._layoutWork.then((function(){x.view._listView._affectedRange.clear(),x.view._layoutCompleted.complete()})),x.canceling||x.view._setState(x.nextStateType)}),(function(A){return x.canceling||(x.view.firstIndexDisplayed=x.view.lastIndexDisplayed=-1,x.view._updateAriaMarkers(!0,x.view.firstIndexDisplayed,x.view.lastIndexDisplayed),x.view._setState(ne)),D.wrapError(A)})),A.complete(),this.canceling&&this.promise.cancel()},cancelLayout:function LayingoutState_cancelLayout(x){this.canceling=!0,this.promise&&this.promise.cancel(),x&&this.view._setState(X)},stop:function LayingoutState_stop(){this.cancelLayout(!0)},realizePage:nop,rebuildTree:function LayingoutState_rebuildTree(){this.cancelLayout(!1),this.view._setState(K)},relayout:function LayingoutState_relayout(){this.cancelLayout(!1),this.enter()},layoutNewContainers:function LayingoutState_layoutNewContainers(){this.relayout()},waitForEntityPosition:function LayingoutState_waitForEntityPosition(){return this.view._getLayoutCompleted()},updateTree:function LayingoutState_updateTree(x,A,V){return this.view._updateTreeImpl(x,A,V)}}),X=V.Class.define((function LayoutCanceledState_ctor(x){this.view=x}),{name:"LayoutCanceledState",enter:nop,stop:nop,realizePage:function LayoutCanceledState_realizePage(){this.relayout()},rebuildTree:function LayoutCanceledState_rebuildTree(){this.view._setState(K)},relayout:function LayoutCanceledState_relayout(){this.view._setState(J)},layoutNewContainers:function LayoutCanceledState_layoutNewContainers(){this.relayout()},waitForEntityPosition:function LayoutCanceledState_waitForEntityPosition(){return this.view._getLayoutCompleted()},updateTree:function LayoutCanceledState_updateTree(x,A,V){return this.view._updateTreeImpl(x,A,V)}}),Y=V.Class.define((function RealizingState_ctor(x){this.view=x,this.nextState=te,this.relayoutNewContainers=!0}),{name:"RealizingState",enter:function RealizingState_enter(){var x=this,A=new N;this.promise=A.promise.then((function(){return x.view._executeScrollToFunctor()})).then((function(){return x.relayoutNewContainers=!1,D._cancelBlocker(x.view._realizePageImpl())})).then((function(){x.view._state===x&&(x.view._completeUpdateTree(),x.view._setState(x.nextState))}),(function(A){return x.view._state!==x||x.canceling||x.view._setState($),D.wrapError(A)})),A.complete()},stop:function RealizingState_stop(){this.canceling=!0,this.promise.cancel(),this.view._cancelRealize(),this.view._setState($)},realizePage:function RealizingState_realizePage(){this.canceling=!0,this.promise.cancel(),this.enter()},rebuildTree:function RealizingState_rebuildTree(){this.stop(),this.view._setState(K)},relayout:function RealizingState_relayout(){this.stop(),this.view._setState(J)},layoutNewContainers:function RealizingState_layoutNewContainers(){this.relayoutNewContainers?this.relayout():(this.view._createLayoutSignal(),this.view._relayoutInComplete=!0)},waitForEntityPosition:function RealizingState_waitForEntityPosition(){return this.view._getLayoutCompleted()},updateTree:function RealizingState_updateTree(x,A,V){return this.view._updateTreeImpl(x,A,V)},setLoadingState:function RealizingState_setLoadingState(x){this.view._listView._setViewState(x)}}),$=V.Class.define((function CanceledState_ctor(x){this.view=x}),{name:"CanceledState",enter:nop,stop:function CanceledState_stop(){this.view._cancelRealize()},realizePage:function CanceledState_realizePage(x){this.stop(),this.view._setState(x)},rebuildTree:function CanceledState_rebuildTree(){this.stop(),this.view._setState(K)},relayout:function CanceledState_relayout(x){this.stop(),this.view._setState(J,x)},layoutNewContainers:function CanceledState_layoutNewContainers(){this.relayout($)},waitForEntityPosition:function CanceledState_waitForEntityPosition(){return this.view._getLayoutCompleted()},updateTree:function CanceledState_updateTree(x,A,V){return this.view._updateTreeImpl(x,A,V)}}),Z=V.Class.derive(Y,(function ScrollingState_ctor(x){this.view=x,this.nextState=ee,this.relayoutNewContainers=!0}),{name:"ScrollingState",setLoadingState:function ScrollingState_setLoadingState(){}}),ee=V.Class.derive($,(function ScrollingPausedState_ctor(x){this.view=x}),{name:"ScrollingPausedState",enter:function ScrollingPausedState_enter(){var x=this;this.promise=D._cancelBlocker(this.view._scrollEndPromise).then((function(){x.view._setState(te)}))},stop:function ScrollingPausedState_stop(){this.promise.cancel(),this.view._cancelRealize()}}),te=V.Class.define((function UnrealizingState_ctor(x){this.view=x}),{name:"UnrealizingState",enter:function UnrealizingState_enter(){var x=this;this.promise=this.view._lazilyUnrealizeItems().then((function(){return x.view._renderCompletePromise})).then((function(){x.view._setState(ne)}))},stop:function UnrealizingState_stop(){this.view._cancelRealize(),this.promise.cancel(),this.view._setState($)},realizePage:function UnrealizingState_realizePage(x){this.promise.cancel(),this.view._setState(x)},rebuildTree:function UnrealizingState_rebuildTree(){this.view._setState(K)},relayout:function UnrealizingState_relayout(){this.view._setState(J)},layoutNewContainers:function UnrealizingState_layoutNewContainers(){this.view._createLayoutSignal(),this.view._relayoutInComplete=!0},waitForEntityPosition:function UnrealizingState_waitForEntityPosition(){return this.view._getLayoutCompleted()},updateTree:function UnrealizingState_updateTree(x,A,V){return this.view._updateTreeImpl(x,A,V)}}),ie=V.Class.define((function RealizingStateAnimating_ctor(x,A){this.view=x,this.realizePromise=A,this.realizeId=1}),{name:"RealizingAnimatingState",enter:function RealizingAnimatingState_enter(){var x=this;this.animating=!0,this.animatePromise=this.view._startAnimations(),this.animateSignal=new N,this.view._executeAnimations=!1,this.animatePromise.done((function(){x.animating=!1,x.modifiedElements?(x.view._updateTreeImpl(x.count,x.delta,x.modifiedElements),x.modifiedElements=null,x.view._setState($)):x.animateSignal.complete()}),(function(A){return x.animating=!1,D.wrapError(A)})),this._waitForRealize()},_waitForRealize:function RealizingAnimatingState_waitForRealize(){var x=this;this.realizing=!0,this.realizePromise.done((function(){x.realizing=!1}));var A=++this.realizeId;D.join([this.realizePromise,this.animateSignal.promise]).done((function(){A===x.realizeId&&(x.view._completeUpdateTree(),x.view._setState(te))}))},stop:function RealizingAnimatingState_stop(x){this.realizePromise.cancel(),this.view._cancelRealize(),x&&(this.animatePromise.cancel(),this.view._setState($))},realizePage:function RealizingAnimatingState_realizePage(){if(!this.modifiedElements){var x=this;this.realizePromise=this.view._executeScrollToFunctor().then((function(){return D._cancelBlocker(x.view._realizePageImpl())})),this._waitForRealize()}},rebuildTree:function RealizingAnimatingState_rebuildTree(){this.stop(!0),this.view._setState(K)},relayout:function RealizingAnimatingState_relayout(){this.stop(!0),this.modifiedElements&&(this.view._updateTreeImpl(this.count,this.delta,this.modifiedElements),this.modifiedElements=null),this.view._setState(J)},layoutNewContainers:function RealizingAnimatingState_layoutNewContainers(){this.view._createLayoutSignal(),this.view._relayoutInComplete=!0},waitForEntityPosition:function RealizingAnimatingState_waitForEntityPosition(){return this.view._getLayoutCompleted()},updateTree:function RealizingAnimatingState_updateTree(x,A,V){if(this.animating){var R=this.modifiedElements;return this.count=x,this.delta=A,this.modifiedElements=V,R?D.cancel:this.animatePromise}return this.view._updateTreeImpl(x,A,V)},setLoadingState:function RealizingAnimatingState_setLoadingState(x){this.view._listView._setViewState(x)}}),ne=V.Class.derive($,(function CompletedState_ctor(x){this.view=x}),{name:"CompletedState",enter:function CompletedState_enter(){this._stopped=!1,this.view._setupDeferredActions(),this.view._realizationLevel=x._realizationLevel.normal,this.view._listView._raiseViewComplete(),this.view._state===this&&this.view._relayoutInComplete&&!this._stopped&&this.view._setState(re)},stop:function CompletedState_stop(){this._stopped=!0,$.prototype.stop.call(this)},layoutNewContainers:function CompletedState_layoutNewContainers(){this.view._createLayoutSignal(),this.view._setState(re)},updateTree:function CompletedState_updateTree(x,A,V){return this.view._updateTreeImpl(x,A,V,!0)}}),re=V.Class.derive($,(function LayingoutNewContainersState(x){this.view=x}),{name:"LayingoutNewContainersState",enter:function LayingoutNewContainersState_enter(){var x=this;this.promise=D.join([this.view.deferTimeout,this.view._layoutWork]),this.promise.then((function(){x.view._relayoutInComplete=!1,x.relayout($)}))},stop:function LayingoutNewContainersState_stop(){this.promise.cancel(),this.view._cancelRealize()},realizePage:function LayingoutNewContainersState_realizePage(x){this.stop(),this.view._setState(J,x)},layoutNewContainers:function LayingoutNewContainersState_layoutNewContainers(){this.view._createLayoutSignal()}});return x}))})})),R("require-style!less/styles-listview",[],(function(){})),R("require-style!less/colors-listview",[],(function(){})),R("WinJS/Controls/ListView",["../Core/_Global","../Core/_Base","../Core/_BaseUtils","../Core/_ErrorFromName","../Core/_Events","../Core/_Log","../Core/_Resources","../Core/_WriteProfilerMark","../_Accents","../Animations","../Animations/_TransitionAnimation","../BindingList","../Promise","../Scheduler","../_Signal","../Utilities/_Control","../Utilities/_Dispose","../Utilities/_ElementUtilities","../Utilities/_Hoverable","../Utilities/_ItemsManager","../Utilities/_SafeHtml","../Utilities/_TabContainer","../Utilities/_UI","../Utilities/_VersionManager","./ElementResizeInstrument","./ItemContainer/_Constants","./ItemContainer/_ItemEventsHandler","./ListView/_BrowseMode","./ListView/_ErrorMessages","./ListView/_GroupFocusCache","./ListView/_GroupsContainer","./ListView/_Helpers","./ListView/_ItemsContainer","./ListView/_Layouts","./ListView/_SelectionManager","./ListView/_VirtualizeContentsView","require-style!less/styles-listview","require-style!less/colors-listview"],(function listViewImplInit(x,A,V,R,D,N,U,B,F,W,H,z,G,j,q,Q,K,J,X,Y,$,Z,ee,te,ie,ne,re,se,oe,ae,le,ce,de,ue,he,pe){"use strict";F.createAccentRule(".win-listview:not(.win-selectionstylefilled) .win-selectioncheckmarkbackground,         .win-itemcontainer:not(.win-selectionstylefilled) .win-selectioncheckmarkbackground",[{name:"border-color",value:F.ColorTypes.accent},{name:"background-color",value:F.ColorTypes.accent}]),F.createAccentRule(".win-listview:not(.win-selectionstylefilled) .win-container.win-selected .win-selectionborder,         .win-itemcontainer:not(.win-selectionstylefilled).win-container.win-selected .win-selectionborder",[{name:"border-color",value:F.ColorTypes.accent}]),F.createAccentRule(".win-listview.win-selectionstylefilled .win-selected .win-selectionbackground,         .win-itemcontainer.win-selectionstylefilled.win-selected .win-selectionbackground",[{name:"background-color",value:F.ColorTypes.accent}]);var me,ge=V._browserStyleEquivalents.transform,ye=[],fe=J._uniqueID;function disposeControls(){var x=ye;ye=[],x=x.filter((function(x){return!x._isZombie()||(x._dispose(),!1)})),ye=ye.concat(x)}function scheduleForDispose(x){ye.push(x),me&&me.cancel(),me=G.timeout(1e3).then(disposeControls)}function getOffsetRight(x){return x.offsetParent?x.offsetParent.offsetWidth-x.offsetLeft-x.offsetWidth:0}var _e={get notCompatibleWithSemanticZoom(){return"ListView can only be used with SemanticZoom if randomAccess loading behavior is specified."},get listViewInvalidItem(){return"Item must provide index, key or description of corresponding item."},get listViewViewportAriaLabel(){return U._getWinJSString("ui/listViewViewportAriaLabel").value}},Ce=V.requireSupportedForProcessing,be={entrance:"entrance",contentTransition:"contentTransition"};A.Namespace.define("WinJS.UI",{ListViewAnimationType:be,ListView:A.Namespace._lazy((function(){var U=A.Class.define((function(){this.clear()}),{add:function(x,A){if(x._lastKnownSizeOfData=A,this._range){this._range.start=Math.min(this._range.start,x.start);var V=this._range._lastKnownSizeOfData-this._range.end,R=x._lastKnownSizeOfData-x.end,D=Math.min(V,R);this._range._lastKnownSizeOfData=x._lastKnownSizeOfData,this._range.end=this._range._lastKnownSizeOfData-D}else this._range=x},addAll:function(){this.add({start:0,end:Number.MAX_VALUE},Number.MAX_VALUE)},clear:function(){this._range=null},get:function(){return this._range}}),B=A.Class.define((function ZoomableView_ctor(x){this._listView=x}),{getPanAxis:function(){return this._listView._getPanAxis()},configureForZoom:function(x,A,V,R){this._listView._configureForZoom(x,A,V,R)},setCurrentItem:function(x,A){this._listView._setCurrentItem(x,A)},getCurrentItem:function(){return this._listView._getCurrentItem()},beginZoom:function(){return this._listView._beginZoom()},positionItem:function(x,A){return this._listView._positionItem(x,A)},endZoom:function(x){this._listView._endZoom(x)},pinching:{get:function(){return this._listView._pinching},set:function(x){this._listView._pinching=x}}}),F=A.Class.define((function ListView_ctor(A,V){if(A=A||x.document.createElement("div"),this._id=A.id||"",V=V||{},A.winControl=this,this._affectedRange=new U,this._mutationObserver=new J._MutationObserver(this._itemPropertyChange.bind(this)),this._versionManager=null,this._insertedItems={},this._element=A,this._startProperty=null,this._scrollProperty=null,this._scrollLength=null,this._scrolling=!1,this._zooming=!1,this._pinching=!1,this._itemsManager=null,this._canvas=null,this._cachedCount=ne._UNINITIALIZED,this._loadingState=this._LoadingState.complete,this._firstTimeDisplayed=!0,this._currentScrollPosition=0,this._lastScrollPosition=0,this._notificationHandlers=[],this._itemsBlockExtent=-1,this._lastFocusedElementInGroupTrack={type:ee.ObjectType.item,index:-1},this._headerFooterVisibilityStatus={headerVisible:!1,footerVisible:!1},this._viewportWidth=ne._UNINITIALIZED,this._viewportHeight=ne._UNINITIALIZED,this._manipulationState=J._MSManipulationEvent.MS_MANIPULATION_STATE_STOPPED,this._maxDeferredItemCleanup=Number.MAX_VALUE,this._groupsToRemove={},this._setupInternalTree(),this._isCurrentZoomView=!0,this._dragSource=!1,this._reorderable=!1,this._groupFocusCache=new ae._UnsupportedGroupFocusCache,this._viewChange=ne._ViewChange.rebuild,this._scrollToFunctor=null,this._setScrollbarPosition=!1,this._view=new pe._VirtualizeContentsView(this),this._selection=new he._SelectionManager(this),this._createTemplates(),this._groupHeaderRenderer=Y._trivialHtmlRenderer,this._itemRenderer=Y._trivialHtmlRenderer,this._groupHeaderRelease=null,this._itemRelease=null,V.itemDataSource)this._dataSource=V.itemDataSource;else{var R=new z.List;this._dataSource=R.dataSource}this._selectionMode=ee.SelectionMode.multi,this._tap=ee.TapBehavior.invokeOnly,this._groupHeaderTap=ee.GroupHeaderTapBehavior.invoke,this._mode=new se._SelectionMode(this),this._groups=new le._NoGroups(this),this._updateItemsAriaRoles(),this._updateGroupHeadersAriaRoles(),this._element.setAttribute("aria-multiselectable",this._multiSelection()),this._element.tabIndex=-1,this._tabManager.tabIndex=this._tabIndex,"absolute"!==this._element.style.position&&"relative"!==this._element.style.position&&(this._element.style.position="relative"),this._updateItemsManager(),V.layout||this._updateLayout(new ue.GridLayout),this._attachEvents(),this._runningInit=!0,Q.setOptions(this,V),this._runningInit=!1,this._batchViewUpdates(ne._ViewChange.rebuild,ne._ScrollToPriority.medium,0)}),{element:{get:function(){return this._element}},layout:{get:function(){return this._layoutImpl},set:function(x){this._updateLayout(x),this._runningInit||(this._view.reset(),this._updateItemsManager(),this._batchViewUpdates(ne._ViewChange.rebuild,ne._ScrollToPriority.medium,0,!0))}},maxLeadingPages:{get:function ListView_getMaxLeadingPages(){return this._view.maxLeadingPages},set:function ListView_setMaxLeadingPages(x){this._view.maxLeadingPages=Math.max(0,Math.floor(x))}},maxTrailingPages:{get:function ListView_getMaxTrailingPages(){return this._view.maxTrailingPages},set:function ListView_setMaxTrailingPages(x){this._view.maxTrailingPages=Math.max(0,Math.floor(x))}},pagesToLoad:{get:function(){return 2*pe._VirtualizeContentsView._defaultPagesToPrefetch+1},set:function(){J._deprecated(oe.pagesToLoadIsDeprecated)}},pagesToLoadThreshold:{get:function(){return 0},set:function(){J._deprecated(oe.pagesToLoadThresholdIsDeprecated)}},groupDataSource:{get:function(){return this._groupDataSource},set:function(x){var A=this;function groupStatusChanged(x){x.detail===ee.DataSourceStatus.failure&&(A.itemDataSource=null,A.groupDataSource=null)}this._groupDataSource&&this._groupDataSource.removeEventListener&&this._groupDataSource.removeEventListener("statuschanged",groupStatusChanged,!1),this._groupDataSource=x,this._groupFocusCache=x&&this._supportsGroupHeaderKeyboarding?new ae._GroupFocusCache(this):new ae._UnsupportedGroupFocusCache,this._groupDataSource&&this._groupDataSource.addEventListener&&this._groupDataSource.addEventListener("statuschanged",groupStatusChanged,!1),this._createGroupsContainer(),this._runningInit?(this._updateGroupWork(),this._resetLayout()):(this._view.reset(),this._pendingLayoutReset=!0,this._pendingGroupWork=!0,this._batchViewUpdates(ne._ViewChange.rebuild,ne._ScrollToPriority.medium,0,!0))}},_updateGroupWork:function(){this._pendingGroupWork=!1,this._groupDataSource?J.addClass(this._element,ne._groupsClass):J.removeClass(this._element,ne._groupsClass),this._resetLayout()},automaticallyLoadPages:{get:function(){return!1},set:function(){J._deprecated(oe.automaticallyLoadPagesIsDeprecated)}},loadingBehavior:{get:function(){return"randomAccess"},set:function(){J._deprecated(oe.loadingBehaviorIsDeprecated)}},selectionMode:{get:function(){return this._selectionMode},set:function(x){if("string"==typeof x&&x.match(/^(none|single|multi)$/)){if(V.isPhone&&x===ee.SelectionMode.single)return;return this._selectionMode=x,this._element.setAttribute("aria-multiselectable",this._multiSelection()),this._updateItemsAriaRoles(),void this._configureSelectionMode()}throw new R("WinJS.UI.ListView.ModeIsInvalid",oe.modeIsInvalid)}},tapBehavior:{get:function(){return this._tap},set:function(x){V.isPhone&&x===ee.TapBehavior.directSelect||(this._tap=x,this._updateItemsAriaRoles(),this._configureSelectionMode())}},groupHeaderTapBehavior:{get:function(){return this._groupHeaderTap},set:function(x){this._groupHeaderTap=x,this._updateGroupHeadersAriaRoles()}},swipeBehavior:{get:function(){return"none"},set:function(x){J._deprecated(oe.swipeBehaviorDeprecated)}},itemDataSource:{get:function(){return this._itemsManager.dataSource},set:function(x){this._dataSource=x||(new z.List).dataSource,this._groupFocusCache.clear(),this._runningInit||(this._selection._reset(),this._cancelAsyncViewWork(!0),this._updateItemsManager(),this._pendingLayoutReset=!0,this._batchViewUpdates(ne._ViewChange.rebuild,ne._ScrollToPriority.medium,0,!0))}},itemTemplate:{get:function(){return this._itemRenderer},set:function(x){this._setRenderer(x,!1),this._runningInit||(this._cancelAsyncViewWork(!0),this._updateItemsManager(),this._pendingLayoutReset=!0,this._batchViewUpdates(ne._ViewChange.rebuild,ne._ScrollToPriority.medium,0,!0))}},resetItem:{get:function(){return this._itemRelease},set:function(x){J._deprecated(oe.resetItemIsDeprecated),this._itemRelease=x}},groupHeaderTemplate:{get:function(){return this._groupHeaderRenderer},set:function(x){this._setRenderer(x,!0),this._runningInit||(this._cancelAsyncViewWork(!0),this._pendingLayoutReset=!0,this._batchViewUpdates(ne._ViewChange.rebuild,ne._ScrollToPriority.medium,0,!0))}},resetGroupHeader:{get:function(){return this._groupHeaderRelease},set:function(x){J._deprecated(oe.resetGroupHeaderIsDeprecated),this._groupHeaderRelease=x}},header:{get:function(){return this._header},set:function(x){J.empty(this._headerContainer),this._header=x,x&&(this._header.tabIndex=this._tabIndex,this._headerContainer.appendChild(x));var A=this._selection._getFocused();if(A.type===ee.ObjectType.header){var V=A;x||(V={type:ee.ObjectType.item,index:0}),this._hasKeyboardFocus?this._changeFocus(V,!0,!1,!0):this._changeFocusPassively(V)}this.recalculateItemPosition(),this._raiseHeaderFooterVisibilityEvent()}},footer:{get:function(){return this._footer},set:function(x){J.empty(this._footerContainer),this._footer=x,x&&(this._footer.tabIndex=this._tabIndex,this._footerContainer.appendChild(x));var A=this._selection._getFocused();if(A.type===ee.ObjectType.footer){var V=A;x||(V={type:ee.ObjectType.item,index:0}),this._hasKeyboardFocus?this._changeFocus(V,!0,!1,!0):this._changeFocusPassively(V)}this.recalculateItemPosition(),this._raiseHeaderFooterVisibilityEvent()}},loadingState:{get:function(){return this._loadingState}},selection:{get:function(){return this._selection}},indexOfFirstVisible:{get:function(){return this._view.firstIndexDisplayed},set:function(x){if(!(x<0)){this._raiseViewLoading(!0);var A=this;this._batchViewUpdates(ne._ViewChange.realize,ne._ScrollToPriority.high,(function(){var V;return A._entityInRange({type:ee.ObjectType.item,index:x}).then((function(x){return x.inRange?A._getItemOffset({type:ee.ObjectType.item,index:x.index}).then((function(x){return V=x,A._ensureFirstColumnRange(ee.ObjectType.item)})).then((function(){return V=A._correctRangeInFirstColumn(V,ee.ObjectType.item),V=A._convertFromCanvasCoordinates(V),A._view.waitForValidScrollPosition(V.begin)})).then((function(x){var V=x<A._lastScrollPosition?"left":"right",R=A._viewport[A._scrollLength]-A._getViewportLength();return{position:x=J._clamp(x,0,R),direction:V}})):{position:0,direction:"left"}}))}),!0)}}},indexOfLastVisible:{get:function(){return this._view.lastIndexDisplayed}},currentItem:{get:function(){var x=this._selection._getFocused(),A={index:x.index,type:x.type,key:null,hasFocus:!!this._hasKeyboardFocus,showFocus:!1};if(x.type===ee.ObjectType.groupHeader){var V=this._groups.group(x.index);V&&(A.key=V.key,A.showFocus=!(!V.header||!J.hasClass(V.header,ne._itemFocusClass)))}else if(x.type===ee.ObjectType.item){var R=this._view.items.itemAt(x.index);if(R){var D=this._itemsManager._recordFromElement(R);A.key=D.item&&D.item.key,A.showFocus=!!R.parentNode.querySelector("."+ne._itemFocusOutlineClass)}}return A},set:function(x){this._hasKeyboardFocus=x.hasFocus||this._hasKeyboardFocus,x.type||(x.type=ee.ObjectType.item);var A=this;function setItemFocused(V,R,D){var N=!!x.showFocus&&A._hasKeyboardFocus;A._unsetFocusOnItem(R),A._selection._setFocused(D,N),A._hasKeyboardFocus?(A._keyboardFocusInbound=N,A._setFocusOnItem(D)):A._tabManager.childFocus=R?V:null,D.type!==ee.ObjectType.groupHeader&&(A._updateFocusCache(D.index),A._updater&&(A._updater.newSelectionPivot=D.index,A._updater.oldSelectionPivot=-1),A._selection._pivot=D.index)}if(x.key&&(x.type===ee.ObjectType.item&&this._dataSource.itemFromKey||x.type===ee.ObjectType.groupHeader&&this._groupDataSource&&this._groupDataSource.itemFromKey)){this.oldCurrentItemKeyFetch&&this.oldCurrentItemKeyFetch.cancel();var V=x.type===ee.ObjectType.groupHeader?this._groupDataSource:this._dataSource;this.oldCurrentItemKeyFetch=V.itemFromKey(x.key).then((function(V){if(A.oldCurrentItemKeyFetch=null,V){var R=x.type===ee.ObjectType.groupHeader?A._groups.group(V.index).header:A._view.items.itemAt(V.index);setItemFocused(R,!!R,{type:x.type,index:V.index})}}))}else{var R;if(x.type===ee.ObjectType.header||x.type===ee.ObjectType.footer)setItemFocused(R=x.type===ee.ObjectType.header?this._header:this._footer,!!R,{type:x.type,index:x.index});else if(void 0!==x.index){if(x.type===ee.ObjectType.groupHeader){var D=A._groups.group(x.index);R=D&&D.header}else R=A._view.items.itemAt(x.index);setItemFocused(R,!!R,{type:x.type,index:x.index})}}}},zoomableView:{get:function(){return this._zoomableView||(this._zoomableView=new B(this)),this._zoomableView}},itemsDraggable:{get:function(){return this._dragSource},set:function(x){V.isPhone||this._dragSource!==x&&(this._dragSource=x,this._setDraggable())}},itemsReorderable:{get:function(){return this._reorderable},set:function(x){V.isPhone||this._reorderable!==x&&(this._reorderable=x,this._setDraggable())}},maxDeferredItemCleanup:{get:function(){return this._maxDeferredItemCleanup},set:function(x){this._maxDeferredItemCleanup=Math.max(0,+x||0)}},dispose:function(){this._dispose()},elementFromIndex:function(x){return this._view.items.itemAt(x)},indexOfElement:function(x){return this._view.items.index(x)},ensureVisible:function ListView_ensureVisible(x){var A=ee.ObjectType.item,V=x;if(+x!==x&&(A=x.type,V=x.index),!(V<0)){this._raiseViewLoading(!0);var R=this;this._batchViewUpdates(ne._ViewChange.realize,ne._ScrollToPriority.high,(function(){var x;return R._entityInRange({type:A,index:V}).then((function(V){return V.inRange?R._getItemOffset({type:A,index:V.index}).then((function(V){return x=V,R._ensureFirstColumnRange(A)})).then((function(){x=R._correctRangeInFirstColumn(x,A);var D=R._getViewportLength(),N=R._viewportScrollPosition,U=N+D,B=R._viewportScrollPosition,F=x.end-x.begin;x=R._convertFromCanvasCoordinates(x);var W=!1;if(A===ee.ObjectType.groupHeader&&N<=x.begin){var H=R._groups.group(V.index).header;if(H){var z,G=ue._getMargins(H);if(R._horizontalLayout){var j=R._rtl();z=(j?getOffsetRight(H)-G.right:H.offsetLeft-G.left)+H.offsetWidth+(j?G.left:G.right)}else z=H.offsetTop+H.offsetHeight+G.top;W=z<=U}}W||(F>=U-N||x.begin<N?B=x.begin:x.end>U&&(B=x.end-D));var q=B<R._lastScrollPosition?"left":"right",Q=R._viewport[R._scrollLength]-D;return{position:B=J._clamp(B,0,Q),direction:q}})):{position:0,direction:"left"}}))}),!0)}},loadMorePages:function ListView_loadMorePages(){J._deprecated(oe.loadMorePagesIsDeprecated)},recalculateItemPosition:function ListView_recalculateItemPosition(){this._forceLayoutImpl(ne._ViewChange.relayout)},forceLayout:function ListView_forceLayout(){this._forceLayoutImpl(ne._ViewChange.remeasure)},_entityInRange:function ListView_entityInRange(x){if(x.type===ee.ObjectType.item)return this._itemsCount().then((function(A){var V=J._clamp(x.index,0,A-1);return{inRange:V>=0&&V<A,index:V}}));if(x.type===ee.ObjectType.groupHeader){var A=J._clamp(x.index,0,this._groups.length()-1);return G.wrap({inRange:A>=0&&A<this._groups.length(),index:A})}return G.wrap({inRange:!0,index:0})},_forceLayoutImpl:function ListView_forceLayoutImpl(x){var A=this;this._versionManager&&this._versionManager.unlocked.then((function(){A._cancelAsyncViewWork(),A._pendingLayoutReset=!0,A._resizeViewport(),A._batchViewUpdates(x,ne._ScrollToPriority.low,(function(){return{position:A._lastScrollPosition,direction:"right"}}),!0,!0)}))},_configureSelectionMode:function(){var A=ne._selectionModeClass,V=ne._hidingSelectionMode;if(this._isInSelectionMode())J.addClass(this._canvas,A),J.removeClass(this._canvas,V);else{if(J.hasClass(this._canvas,A)){var R=this;x.setTimeout((function(){x.setTimeout((function(){J.removeClass(R._canvas,V)}),ne._hidingSelectionModeAnimationTimeout)}),50),J.addClass(this._canvas,V)}J.removeClass(this._canvas,A)}},_lastScrollPosition:{get:function(){return this._lastScrollPositionValue},set:function(x){if(0===x)this._lastDirection="right",this._direction="right",this._lastScrollPositionValue=0;else{var A=x<this._lastScrollPositionValue?"left":"right";this._direction=this._scrollDirection(x),this._lastDirection=A,this._lastScrollPositionValue=x}}},_hasHeaderOrFooter:{get:function(){return!(!this._header&&!this._footer)}},_getHeaderOrFooterFromElement:function(x){return this._header&&this._header.contains(x)?this._header:this._footer&&this._footer.contains(x)?this._footer:null},_supportsGroupHeaderKeyboarding:{get:function(){return this._groupDataSource}},_viewportScrollPosition:{get:function(){return this._currentScrollPosition=J.getScrollPosition(this._viewport)[this._scrollProperty],this._currentScrollPosition},set:function(x){var A={};A[this._scrollProperty]=x,J.setScrollPosition(this._viewport,A),this._currentScrollPosition=x}},_canvasStart:{get:function(){return this._canvasStartValue||0},set:function(x){var A=this._horizontal()?this._rtl()?-x:x:0,V=this._horizontal()?0:x;this._canvas.style[ge.scriptName]=0!==x?"translate( "+A+"px, "+V+"px)":"",this._canvasStartValue=x}},scrollPosition:{get:function(){return this._viewportScrollPosition},set:function(x){var A=this;this._batchViewUpdates(ne._ViewChange.realize,ne._ScrollToPriority.high,(function(){return A._view.waitForValidScrollPosition(x).then((function(){var V=A._viewport[A._scrollLength]-A._getViewportLength(),R=(x=J._clamp(x,0,V))<A._lastScrollPosition?"left":"right";return{position:x,direction:R}}))}),!0)}},_setRenderer:function ListView_setRenderer(x,A){var D;if(x){if("function"==typeof x)D=x;else if("object"==typeof x){if(V.validation&&!x.renderItem)throw new R("WinJS.UI.ListView.invalidTemplate",oe.invalidTemplate);D=x.renderItem}}else{if(V.validation)throw new R("WinJS.UI.ListView.invalidTemplate",oe.invalidTemplate);D=Y.trivialHtmlRenderer}D&&(A?this._groupHeaderRenderer=D:this._itemRenderer=D)},_renderWithoutReuse:function ListView_renderWithoutReuse(x,A){A&&K._disposeElement(A);var V=this._itemRenderer(x);return V.then?V.then((function(x){return x.tabIndex=0,x})):((V.element||V).tabIndex=0,V)},_isInsertedItem:function ListView_isInsertedItem(x){return!!this._insertedItems[x.handle]},_clearInsertedItems:function ListView_clearInsertedItems(){for(var x=Object.keys(this._insertedItems),A=0,V=x.length;A<V;A++)this._insertedItems[x[A]].release();this._insertedItems={},this._modifiedElements=[],this._countDifference=0},_cancelAsyncViewWork:function(x){this._view.stopWork(x)},_updateView:function ListView_updateView(){if(!this._isZombie()){var x=this,A=this._viewChange;this._viewChange=ne._ViewChange.realize,A===ne._ViewChange.rebuild?(this._pendingGroupWork&&this._updateGroupWork(),this._pendingLayoutReset&&this._resetLayout(),resetCache(),this._firstTimeDisplayed||this._view.reset(),this._view.reload(functorWrapper,!0),this._setFocusOnItem(this._selection._getFocused()),this._headerFooterVisibilityStatus={headerVisible:!1,footerVisible:!1}):A===ne._ViewChange.remeasure?(this._view.resetItems(!0),this._resetLayout(),resetCache(),this._view.refresh(functorWrapper),this._setFocusOnItem(this._selection._getFocused()),this._headerFooterVisibilityStatus={headerVisible:!1,footerVisible:!1}):A===ne._ViewChange.relayout?(this._pendingLayoutReset&&(this._resetLayout(),resetCache()),this._view.refresh(functorWrapper)):(this._view.onScroll(functorWrapper),this._raiseHeaderFooterVisibilityEvent())}function resetCache(){x._itemsBlockExtent=-1,x._firstItemRange=null,x._firstHeaderRange=null,x._itemMargins=null,x._headerMargins=null,x._canvasMargins=null,x._cachedRTL=null,x._rtl()}function functorWrapper(){x._scrollToPriority=ne._ScrollToPriority.uninitialized;var A=x._setScrollbarPosition;x._setScrollbarPosition=!1;var V="number"==typeof x._scrollToFunctor?{position:x._scrollToFunctor}:x._scrollToFunctor();return G.as(V).then((function(V){return V=V||{},A&&+V.position===V.position&&(x._lastScrollPosition=V.position,x._viewportScrollPosition=V.position),V}),(function(V){return x._setScrollbarPosition|=A,G.wrapError(V)}))}},_batchViewUpdates:function ListView_batchViewUpdates(x,A,V,R,D){if(this._viewChange=Math.min(this._viewChange,x),(null===this._scrollToFunctor||A>=this._scrollToPriority)&&(this._scrollToPriority=A,this._scrollToFunctor=V),this._setScrollbarPosition|=!!R,!this._batchingViewUpdates){this._raiseViewLoading();var N=this;this._batchingViewUpdatesSignal=new q,this._batchingViewUpdates=G.any([this._batchingViewUpdatesSignal.promise,j.schedulePromiseHigh(null,"WinJS.UI.ListView._updateView")]).then((function(){if(!N._isZombie())return N._viewChange!==ne._ViewChange.rebuild||N._firstTimeDisplayed||0===Object.keys(N._view.items._itemData).length||D?void 0:N._fadeOutViewport()})).then((function(){N._batchingViewUpdates=null,N._batchingViewUpdatesSignal=null,N._updateView(),N._firstTimeDisplayed=!1}),(function(){N._batchingViewUpdates=null,N._batchingViewUpdatesSignal=null}))}return this._batchingViewUpdatesSignal},_resetCanvas:function(){if(!this._disposed){var A=x.document.createElement("div");A.className=this._canvas.className,this._viewport.replaceChild(A,this._canvas),this._canvas=A,this._groupsToRemove={},this._canvas.appendChild(this._canvasProxy)}},_setupInternalTree:function ListView_setupInternalTree(){J.addClass(this._element,ne._listViewClass),J[this._rtl()?"addClass":"removeClass"](this._element,ne._rtlListViewClass),this._element.innerHTML='<div tabIndex="-1" role="group" class="'+ne._viewportClass+" "+ne._horizontalClass+'"><div></div><div class="'+ne._scrollableClass+'"><div class="'+ne._proxyClass+'"></div></div><div></div><div></div></div><div aria-hidden="true" style="position:absolute;left:50%;top:50%;width:0px;height:0px;" tabindex="-1"></div>',this._viewport=this._element.firstElementChild,this._headerContainer=this._viewport.firstElementChild,J.addClass(this._headerContainer,ne._listHeaderContainerClass),this._canvas=this._headerContainer.nextElementSibling,this._footerContainer=this._canvas.nextElementSibling,J.addClass(this._footerContainer,ne._listFooterContainerClass),this._canvasProxy=this._canvas.firstElementChild,this._deleteWrapper=this._canvas.nextElementSibling,this._keyboardEventsHelper=this._viewport.nextElementSibling,this._tabIndex=J.getTabIndex(this._element),this._tabIndex<0&&(this._tabIndex=0),this._tabManager=new Z.TabContainer(this._viewport),this._tabManager.tabIndex=this._tabIndex,this._progressBar=x.document.createElement("progress"),J.addClass(this._progressBar,ne._progressClass),J.addClass(this._progressBar,"win-progress-ring"),this._progressBar.style.position="absolute",this._progressBar.max=100},_unsetFocusOnItem:function ListView_unsetFocusOnItem(A){this._tabManager.childFocus&&this._clearFocusRectangle(this._tabManager.childFocus),this._isZombie()||(A||(this._tabManager.childFocus&&(this._tabManager.childFocus=null),this._keyboardEventsHelper._shouldHaveFocus=!1,x.document.activeElement!==this._viewport&&this._hasKeyboardFocus&&(this._keyboardEventsHelper._shouldHaveFocus=!0,J._setActive(this._keyboardEventsHelper))),this._itemFocused=!1)},_setFocusOnItem:function ListView_setFocusOnItem(x){if(this._focusRequest&&this._focusRequest.cancel(),!this._isZombie()){var A=this;x.type===ee.ObjectType.item?this._focusRequest=this._view.items.requestItem(x.index):x.type===ee.ObjectType.groupHeader?this._focusRequest=this._groups.requestHeader(x.index):this._focusRequest=G.wrap(x.type===ee.ObjectType.header?this._header:this._footer),this._focusRequest.then((function(V){A._isZombie()||(A._tabManager.childFocus!==V&&(A._tabManager.childFocus=V),A._focusRequest=null,A._hasKeyboardFocus&&!A._itemFocused&&(A._selection._keyboardFocused()&&A._drawFocusRectangle(V),x.type!==ee.ObjectType.groupHeader&&x.type!==ee.ObjectType.item||A._view.updateAriaForAnnouncement(V,x.type===ee.ObjectType.groupHeader?A._groups.length():A._cachedCount),A._itemFocused=!0,J._setActive(V)))}))}},_attachEvents:function ListView_attachEvents(){var x=this;function listViewHandler(A,V,R){return{name:V?A:A.toLowerCase(),handler:function(V){x["_on"+A](V)},capture:R}}function modeHandler(A,V,R){return{capture:R,name:V?A:A.toLowerCase(),handler:function(V){var R=x._mode,D="on"+A;!x._disposed&&R[D]&&R[D](V)}}}var A=[function observerHandler(A,V){return{handler:function(V){x["_on"+A](V)},filter:V}}("PropertyChange",["dir","style","tabindex"])];this._cachedStyleDir=this._element.style.direction,A.forEach((function(A){new J._MutationObserver(A.handler).observe(x._element,{attributes:!0,attributeFilter:A.filter})})),[modeHandler("PointerDown"),modeHandler("click",!1),modeHandler("PointerUp"),modeHandler("LostPointerCapture"),modeHandler("MSHoldVisual",!0),modeHandler("PointerCancel"),modeHandler("DragStart"),modeHandler("DragOver"),modeHandler("DragEnter"),modeHandler("DragLeave"),modeHandler("Drop"),modeHandler("ContextMenu")].forEach((function(A){J._addEventListener(x._viewport,A.name,A.handler,!!A.capture)})),[listViewHandler("FocusIn",!1,!1),listViewHandler("FocusOut",!1,!1),modeHandler("KeyDown"),modeHandler("KeyUp")].forEach((function(A){J._addEventListener(x._element,A.name,A.handler,!!A.capture)})),this._onElementResizeBound=this._onElementResize.bind(this),J._resizeNotifier.subscribe(this._element,this._onElementResizeBound),this._elementResizeInstrument=new ie._ElementResizeInstrument,this._element.appendChild(this._elementResizeInstrument.element),this._elementResizeInstrument.addEventListener("resize",this._onElementResizeBound),J._inDom(this.element).then((function(){x._disposed||x._elementResizeInstrument.addedToDom()})),[listViewHandler("MSManipulationStateChanged",!0),listViewHandler("Scroll")].forEach((function(A){x._viewport.addEventListener(A.name,A.handler,!1)})),this._viewport.addEventListener("onTabEnter",this._onTabEnter.bind(this)),this._viewport.addEventListener("onTabExit",this._onTabExit.bind(this)),this._viewport.addEventListener("onTabEntered",(function(A){x._mode.onTabEntered(A)})),this._viewport.addEventListener("onTabExiting",(function(A){x._mode.onTabExiting(A)}))},_updateItemsManager:function ListView_updateItemsManager(){var x=this,A={beginNotifications:function ListView_beginNotifications(){},changed:function ListView_changed(A,V){if(!x._ifZombieDispose()){x._createUpdater();var R=x._updater.elements[fe(V)];if(R){var D=x.selection._isIncluded(R.index);if(D&&(x._updater.updateDrag=!0),V!==A){if(x._tabManager.childFocus!==V&&x._updater.newFocusedItem!==V||(x._updater.newFocusedItem=A,x._tabManager.childFocus=null),R.itemBox){J.addClass(A,ne._itemClass),x._setupAriaSelectionObserver(A);var N=V.nextElementSibling;R.itemBox.removeChild(V),R.itemBox.insertBefore(A,N)}x._setAriaSelected(A,D),x._view.items.setItemAt(R.newIndex,{element:A,itemBox:R.itemBox,container:R.container,itemsManagerRecord:R.itemsManagerRecord}),delete x._updater.elements[fe(V)],K._disposeElement(V),x._updater.elements[fe(A)]={item:A,container:R.container,itemBox:R.itemBox,index:R.index,newIndex:R.newIndex,itemsManagerRecord:R.itemsManagerRecord}}else R.itemBox&&R.container&&(re._ItemEventsHandler.renderSelection(R.itemBox,A,D,!0),J[D?"addClass":"removeClass"](R.container,ne._selectedClass));x._updater.changed=!0}for(var U=0,B=x._notificationHandlers.length;U<B;U++)x._notificationHandlers[U].changed(A,V)}},removed:function ListView_removed(A,V,R){if(!x._ifZombieDispose()){var D;if(x._createUpdater(),x._insertedItems[R]&&delete x._insertedItems[R],A){var N=x._updater.elements[fe(A)],U=x._itemsManager.itemObject(A);if(U&&x._groupFocusCache.deleteItem(U.key),N){if(D=N.index,N.itemBox){var B=N.itemBox,F=ne._containerOddClass,W=ne._containerEvenClass,H=J.hasClass(B.parentElement,W)?W:F;x._updater.removed.push({index:D,itemBox:B,containerStripe:H})}x._updater.deletesCount++,x._view.items.itemDataAt(D).removed=!0,delete x._updater.elements[fe(A)]}else D=U&&U.index;x._updater.oldFocus.type!==ee.ObjectType.groupHeader&&x._updater.oldFocus.index===D&&(x._updater.newFocus.index=D,x._updater.focusedItemRemoved=!0),removeFromSelection(D)}else(D=x._updater.selectionHandles[R])===+D&&removeFromSelection(D);x._updater.changed=!0}function removeFromSelection(A){x._updater.updateDrag=!0,x._currentMode()._dragging&&x._currentMode()._draggingUnselectedItem&&x._currentMode()._dragInfo._isIncluded(A)&&(x._updater.newDragInfo=new he._Selection(x,[]));var V=x._updater.selectionFirst[A],R=x._updater.selectionLast[A],D=V||R;D&&(delete x._updater.selectionFirst[D.oldFirstIndex],delete x._updater.selectionLast[D.oldLastIndex],x._updater.selectionChanged=!0)}},updateAffectedRange:function ListView_updateAffectedRange(A){x._itemsCount().then((function(V){var R=x._view.containers?x._view.containers.length:0;A.start=Math.min(A.start,R),x._affectedRange.add(A,V)})),x._createUpdater(),x._updater.changed=!0},indexChanged:function ListView_indexChanged(A,V,R){if(!x._ifZombieDispose()){if(x._createUpdater(),A){var D=x._itemsManager.itemObject(A);D&&x._groupFocusCache.updateItemIndex(D.key,V);var N=x._updater.elements[fe(A)];N&&(N.newIndex=V,x._updater.changed=!0),x._updater.itemsMoved=!0}x._currentMode()._dragging&&x._currentMode()._draggingUnselectedItem&&x._currentMode()._dragInfo._isIncluded(R)&&(x._updater.newDragInfo=new he._Selection(x,[{firstIndex:V,lastIndex:V}]),x._updater.updateDrag=!0),x._updater.oldFocus.type!==ee.ObjectType.groupHeader&&x._updater.oldFocus.index===R&&(x._updater.newFocus.index=V,x._updater.changed=!0),x._updater.oldSelectionPivot===R&&(x._updater.newSelectionPivot=V,x._updater.changed=!0);var U=x._updater.selectionFirst[R];U&&(U.newFirstIndex=V,x._updater.changed=!0,x._updater.selectionChanged=!0,x._updater.updateDrag=!0),(U=x._updater.selectionLast[R])&&(U.newLastIndex=V,x._updater.changed=!0,x._updater.selectionChanged=!0,x._updater.updateDrag=!0)}},endNotifications:function ListView_endNotifications(){x._update()},inserted:function ListView_inserted(A){x._ifZombieDispose()||(x._createUpdater(),x._updater.changed=!0,A.retain(),x._updater.insertsCount++,x._insertedItems[A.handle]=A)},moved:function ListView_moved(A,V,R,D){if(!x._ifZombieDispose()){if(x._createUpdater(),x._updater.movesCount++,A){x._updater.itemsMoved=!0;var N=x._updater.elements[fe(A)];N&&(N.moved=!0)}var U=x._updater.selectionHandles[D.handle];if(U===+U){x._updater.updateDrag=!0,x._updater.selectionChanged=!0,x._updater.changed=!0;var B=x._updater.selectionFirst[U],F=x._updater.selectionLast[U],W=B||F;W&&W.oldFirstIndex!==W.oldLastIndex&&(delete x._updater.selectionFirst[W.oldFirstIndex],delete x._updater.selectionLast[W.oldLastIndex])}}},countChanged:function ListView_countChanged(A,V){x._ifZombieDispose()||(x._cachedCount=A,x._createUpdater(),x._view.lastIndexDisplayed+1===V&&(x._updater.changed=!0),x._updater.countDifference+=A-V)},reload:function ListView_reload(){x._ifZombieDispose()||x._processReload()}};function statusChanged(A){A.detail===ee.DataSourceStatus.failure&&(x.itemDataSource=null,x.groupDataSource=null)}this._versionManager&&this._versionManager._dispose(),this._versionManager=new te._VersionManager,this._updater=null;var V=this._selection.getRanges();this._selection._selected.clear(),this._itemsManager&&(this._itemsManager.dataSource&&this._itemsManager.dataSource.removeEventListener&&this._itemsManager.dataSource.removeEventListener("statuschanged",statusChanged,!1),this._clearInsertedItems(),this._itemsManager.release()),this._itemsCountPromise&&(this._itemsCountPromise.cancel(),this._itemsCountPromise=null),this._cachedCount=ne._UNINITIALIZED,this._itemsManager=Y._createItemsManager(this._dataSource,this._renderWithoutReuse.bind(this),A,{ownerElement:this._element,versionManager:this._versionManager,indexInView:function(A){return A>=x.indexOfFirstVisible&&A<=x.indexOfLastVisible},viewCallsReady:!0,profilerId:this._id}),this._dataSource.addEventListener&&this._dataSource.addEventListener("statuschanged",statusChanged,!1),this._selection._selected.set(V)},_processReload:function(){this._affectedRange.addAll(),this._cancelAsyncViewWork(!0),this._currentMode()._dragging&&this._currentMode()._clearDragProperties(),this._groupFocusCache.clear(),this._selection._reset(),this._updateItemsManager(),this._pendingLayoutReset=!0,this._batchViewUpdates(ne._ViewChange.rebuild,ne._ScrollToPriority.low,this.scrollPosition)},_createUpdater:function ListView_createUpdater(){if(!this._updater){this.itemDataSource._isVirtualizedDataSource&&this._affectedRange.addAll(),this._versionManager.beginUpdating(),this._cancelAsyncViewWork();var x={changed:!1,elements:{},selectionFirst:{},selectionLast:{},selectionHandles:{},oldSelectionPivot:{type:ee.ObjectType.item,index:ne._INVALID_INDEX},newSelectionPivot:{type:ee.ObjectType.item,index:ne._INVALID_INDEX},removed:[],selectionChanged:!1,oldFocus:{type:ee.ObjectType.item,index:ne._INVALID_INDEX},newFocus:{type:ee.ObjectType.item,index:ne._INVALID_INDEX},hadKeyboardFocus:this._hasKeyboardFocus,itemsMoved:!1,lastVisible:this.indexOfLastVisible,updateDrag:!1,movesCount:0,insertsCount:0,deletesCount:0,countDifference:0};this._view.items.each((function(A,V,R){x.elements[fe(V)]={item:V,container:R.container,itemBox:R.itemBox,index:A,newIndex:A,itemsManagerRecord:R.itemsManagerRecord,detached:R.detached}}));for(var A=this._selection._selected._ranges,V=0,R=A.length;V<R;V++){var D=A[V],N={newFirstIndex:A[V].firstIndex,oldFirstIndex:A[V].firstIndex,newLastIndex:A[V].lastIndex,oldLastIndex:A[V].lastIndex};x.selectionFirst[N.oldFirstIndex]=N,x.selectionLast[N.oldLastIndex]=N,x.selectionHandles[D.firstPromise.handle]=N.oldFirstIndex,x.selectionHandles[D.lastPromise.handle]=N.oldLastIndex}x.oldSelectionPivot=this._selection._pivot,x.newSelectionPivot=x.oldSelectionPivot,x.oldFocus=this._selection._getFocused(),x.newFocus=this._selection._getFocused(),this._updater=x}},_synchronize:function ListView_synchronize(){var x=this._updater;if(this._updater=null,this._groupsChanged=!1,this._countDifference=this._countDifference||0,x&&x.changed){x.itemsMoved&&this._layout.itemsMoved&&this._layout.itemsMoved(),x.removed.length&&this._layout.itemsRemoved&&this._layout.itemsRemoved(x.removed.map((function(x){return x.itemBox}))),(x.itemsMoved||x.removed.length||Object.keys(this._insertedItems).length)&&this._layout.setupAnimations&&this._layout.setupAnimations(),this._currentMode().onDataChanged&&this._currentMode().onDataChanged();var A=[];for(var V in x.selectionFirst)if(x.selectionFirst.hasOwnProperty(V)){var R=x.selectionFirst[V];x.selectionChanged=x.selectionChanged||R.newLastIndex-R.newFirstIndex!=R.oldLastIndex-R.oldFirstIndex,R.newFirstIndex<=R.newLastIndex&&A.push({firstIndex:R.newFirstIndex,lastIndex:R.newLastIndex})}if(x.selectionChanged){var D=new he._Selection(this,A);this._selection._fireSelectionChanging(D),this._selection._selected.set(A),this._selection._fireSelectionChanged(),D.clear()}else this._selection._selected.set(A);this._selection._updateCount(this._cachedCount),x.newSelectionPivot=Math.min(this._cachedCount-1,x.newSelectionPivot),this._selection._pivot=x.newSelectionPivot>=0?x.newSelectionPivot:ne._INVALID_INDEX,x.newFocus.type!==ee.ObjectType.groupHeader&&(x.newFocus.index=Math.max(0,Math.min(this._cachedCount-1,x.newFocus.index))),this._selection._setFocused(x.newFocus,this._selection._keyboardFocused());var N=this._modifiedElements||[],U={};for(this._modifiedElements=[],this._countDifference+=x.countDifference,V=0;V<N.length;V++)-1===(G=N[V]).newIndex?this._modifiedElements.push(G):U[G.newIndex]=G;for(V=0;V<x.removed.length;V++){var B=x.removed[V];(G=U[B.index])?delete U[B.index]:G={oldIndex:B.index},G.newIndex=-1,G._removalHandled||(G._itemBox=B.itemBox,G._containerStripe=B.containerStripe),this._modifiedElements.push(G)}var F=Object.keys(this._insertedItems);for(V=0;V<F.length;V++)this._modifiedElements.push({oldIndex:-1,newIndex:this._insertedItems[F[V]].index});var W={};for(V in x.elements)if(x.elements.hasOwnProperty(V)){var H=x.elements[V];W[H.newIndex]={element:H.item,container:H.container,itemBox:H.itemBox,itemsManagerRecord:H.itemsManagerRecord,detached:H.detached},(G=U[H.index])?(delete U[H.index],G.newIndex=H.newIndex):G={oldIndex:H.index,newIndex:H.newIndex},G.moved=H.moved,this._modifiedElements.push(G)}var z=Object.keys(U);for(V=0;V<z.length;V++){var G;-1!==(G=U[z[V]]).oldIndex&&this._modifiedElements.push(G)}this._view.items._itemData=W,x.updateDrag&&this._currentMode()._dragging&&(this._currentMode()._draggingUnselectedItem?x.newDragInfo&&(this._currentMode()._dragInfo=x.newDragInfo):this._currentMode()._dragInfo=this._selection,this._currentMode().fireDragUpdateEvent()),x.focusedItemRemoved||this._focusRequest&&x.oldFocus.index!==x.newFocus.index||x.oldFocus.type!==x.newFocus.type?(this._itemFocused=!1,this._setFocusOnItem(this._selection._getFocused())):x.newFocusedItem&&(this._hasKeyboardFocus=x.hadKeyboardFocus,this._itemFocused=!1,this._setFocusOnItem(this._selection._getFocused()));var j=this;return this._groups.synchronizeGroups().then((function(){return x.newFocus.type===ee.ObjectType.groupHeader&&(x.newFocus.index=Math.min(j._groups.length()-1,x.newFocus.index),x.newFocus.index<0&&(x.newFocus={type:ee.ObjectType.item,index:0}),j._selection._setFocused(x.newFocus,j._selection._keyboardFocused())),j._versionManager.endUpdating(),x.deletesCount>0&&j._updateDeleteWrapperSize(),j._view.updateTree(j._cachedCount,j._countDifference,j._modifiedElements)})).then((function(){return j._lastScrollPosition}))}return this._countDifference+=x?x.countDifference:0,j=this,this._groups.synchronizeGroups().then((function ListView_synchronizeGroups_success_groupsChanged(){return x&&j._versionManager.endUpdating(),j._view.updateTree(j._cachedCount,j._countDifference,j._modifiedElements)})).then((function(){return j.scrollPosition}))},_updateDeleteWrapperSize:function ListView_updateDeleteWrapperSize(x){var A=this._horizontal()?"width":"height";this._deleteWrapper.style["min-"+A]=(x?0:this.scrollPosition+this._getViewportSize()[A])+"px"},_verifyRealizationNeededForChange:function ListView_skipRealization(){var x=!1,A=(this._view.lastIndexDisplayed||0)-(this._view.firstIndexDisplayed||0),V=this._updater&&0===this._updater.movesCount&&0===this._updater.insertsCount&&this._updater.deletesCount>0&&this._updater.deletesCount===Math.abs(this._updater.countDifference);if(V&&this._updater.elements)for(var R=Object.keys(this._updater.elements),D=0,N=R.length;D<N;D++){var U=this._updater.elements[R[D]],B=U.index-U.newIndex;if(B<0||B>this._updater.deletesCount){V=!1;break}}this._view.deletesWithoutRealize=this._view.deletesWithoutRealize||0,V&&this._view.lastIndexDisplayed<this._view.end-A&&this._updater.deletesCount+this._view.deletesWithoutRealize<A?(x=!0,this._view.deletesWithoutRealize+=Math.abs(this._updater.countDifference)):this._view.deletesWithoutRealize=0,this._view._setSkipRealizationForChange(x)},_update:function ListView_update(){if(!this._ifZombieDispose()){this._updateJob=null;var x=this;this._versionManager.noOutstandingNotifications&&(this._updater||this._groupsChanged?(this._cancelAsyncViewWork(),this._verifyRealizationNeededForChange(),this._synchronize().then((function(A){x._batchViewUpdates(ne._ViewChange.relayout,ne._ScrollToPriority.low,A).complete()}))):this._batchViewUpdates(ne._ViewChange.relayout,ne._ScrollToPriority.low,this._lastScrollPosition).complete())}},_scheduleUpdate:function ListView_scheduleUpdate(){if(!this._updateJob){var x=this;this._updateJob=j.schedulePromiseHigh(null,"WinJS.UI.ListView._update").then((function(){x._updateJob&&x._update()})),this._raiseViewLoading()}},_createGroupsContainer:function(){this._groups&&this._groups.cleanUp(),this._groupDataSource?this._groups=new le._UnvirtualizedGroupsContainer(this,this._groupDataSource):this._groups=new le._NoGroups(this)},_createLayoutSite:function(){var A=this;return Object.create({invalidateLayout:function(){A._pendingLayoutReset=!0;var x="horizontal"===A._layout.orientation!==A._horizontalLayout;A._affectedRange.addAll(),A._batchViewUpdates(ne._ViewChange.rebuild,ne._ScrollToPriority.low,x?0:A.scrollPosition,!1,!0)},itemFromIndex:function(x){return A._itemsManager._itemPromiseAtIndex(x)},groupFromIndex:function(x){return A._groupsEnabled()?x<A._groups.length()?A._groups.group(x).userData:null:{key:"-1"}},groupIndexFromItemIndex:function(x){return x=Math.max(0,x),A._groups.groupFromItem(x)},renderItem:function(V){return G._cancelBlocker(A._itemsManager._itemFromItemPromise(V)).then((function(V){if(V){var R=A._itemsManager._recordFromElement(V);R.pendingReady&&R.pendingReady(),V=V.cloneNode(!0),J.addClass(V,ne._itemClass);var D=x.document.createElement("div");J.addClass(D,ne._itemBoxClass),D.appendChild(V);var N=x.document.createElement("div");return J.addClass(N,ne._containerClass),N.appendChild(D),N}return G.cancel}))},renderHeader:function(V){return Y._normalizeRendererReturn(A.groupHeaderTemplate(G.wrap(V))).then((function(A){J.addClass(A.element,ne._headerClass);var V=x.document.createElement("div");return J.addClass(V,ne._headerContainerClass),V.appendChild(A.element),V}))},readyToMeasure:function(){A._getViewportLength(),A._getCanvasMargins()},_isZombie:function(){return A._isZombie()},_writeProfilerMark:function(x){}},{_itemsManager:{enumerable:!0,get:function(){return A._itemsManager}},rtl:{enumerable:!0,get:function(){return A._rtl()}},surface:{enumerable:!0,get:function(){return A._canvas}},viewport:{enumerable:!0,get:function(){return A._viewport}},scrollbarPos:{enumerable:!0,get:function(){return A.scrollPosition}},viewportSize:{enumerable:!0,get:function(){return A._getViewportSize()}},loadingBehavior:{enumerable:!0,get:function(){return A.loadingBehavior}},animationsDisabled:{enumerable:!0,get:function(){return A._animationsDisabled()}},tree:{enumerable:!0,get:function(){return A._view.tree}},realizedRange:{enumerable:!0,get:function(){return{firstPixel:Math.max(0,A.scrollPosition-2*A._getViewportLength()),lastPixel:A.scrollPosition+3*A._getViewportLength()-1}}},visibleRange:{enumerable:!0,get:function(){return{firstPixel:A.scrollPosition,lastPixel:A.scrollPosition+A._getViewportLength()-1}}},itemCount:{enumerable:!0,get:function(){return A._itemsCount()}},groupCount:{enumerable:!0,get:function(){return A._groups.length()}},header:{enumerable:!0,get:function(){return A.header}},footer:{enumerable:!0,get:function(){return A.footer}}})},_initializeLayout:function(){this._affectedRange.addAll();var x=this._createLayoutSite();return this._layout.initialize(x,this._groupsEnabled()),"horizontal"===this._layout.orientation},_resetLayoutOrientation:function ListView_resetLayoutOrientation(x){this._horizontalLayout?(this._startProperty="left",this._scrollProperty="scrollLeft",this._scrollLength="scrollWidth",this._deleteWrapper.style.minHeight="",J.addClass(this._viewport,ne._horizontalClass),J.removeClass(this._viewport,ne._verticalClass),x&&(this._viewport.scrollTop=0)):(this._startProperty="top",this._scrollProperty="scrollTop",this._scrollLength="scrollHeight",this._deleteWrapper.style.minWidth="",J.addClass(this._viewport,ne._verticalClass),J.removeClass(this._viewport,ne._horizontalClass),x&&J.setScrollPosition(this._viewport,{scrollLeft:0}))},_resetLayout:function ListView_resetLayout(){this._pendingLayoutReset=!1,this._affectedRange.addAll(),this._layout&&(this._layout.uninitialize(),this._horizontalLayout=this._initializeLayout(),this._resetLayoutOrientation())},_updateLayout:function ListView_updateLayout(x){var A,V=!1;this._layout&&(this._cancelAsyncViewWork(!0),this._layout.uninitialize(),V=!0),A=x&&"function"==typeof x.type?new(Ce(x.type))(x):x&&x.initialize?x:new ue.GridLayout(x),V&&this._resetCanvas(),this._layoutImpl=A,this._layout=new ue._LayoutWrapper(A),V&&this._unsetFocusOnItem(),this._setFocusOnItem({type:ee.ObjectType.item,index:0}),this._selection._setFocused({type:ee.ObjectType.item,index:0}),this._lastFocusedElementInGroupTrack={type:ee.ObjectType.item,index:-1},this._headerContainer.style.opacity=0,this._footerContainer.style.opacity=0,this._horizontalLayout=this._initializeLayout(),this._resetLayoutOrientation(V),V&&(this._canvas.style.width=this._canvas.style.height="")},_currentMode:function ListView_currentMode(){return this._mode},_setDraggable:function ListView_setDraggable(){var x=this.itemsDraggable||this.itemsReorderable;this._view.items.each((function(A,V,R){R.itemBox&&(R.itemBox.draggable=x&&!J.hasClass(V,ne._nonDraggableClass))}))},_resizeViewport:function ListView_resizeViewport(){this._viewportWidth=ne._UNINITIALIZED,this._viewportHeight=ne._UNINITIALIZED},_onElementResize:function ListView_onResize(){j.schedule((function ListView_async_elementResize(){if(!this._isZombie()&&this._viewportWidth!==ne._UNINITIALIZED&&this._viewportHeight!==ne._UNINITIALIZED){var x=this._element.offsetWidth,A=this._element.offsetHeight;if(this._previousWidth!==x||this._previousHeight!==A){this._previousWidth=x,this._previousHeight=A,this._resizeViewport();var V=this;this._affectedRange.addAll(),this._batchViewUpdates(ne._ViewChange.relayout,ne._ScrollToPriority.low,(function(){return{position:V.scrollPosition,direction:"right"}}))}}}),j.Priority.max,this,"WinJS.UI.ListView._onElementResize")},_onFocusIn:function ListView_onFocusIn(x){this._hasKeyboardFocus=!0;var A=this;function moveFocusToItem(x){A._changeFocus(A._selection._getFocused(),!0,!1,!1,x)}if(x.target===this._keyboardEventsHelper)!this._keyboardEventsHelper._shouldHaveFocus&&this._keyboardFocusInbound?moveFocusToItem(!0):this._keyboardEventsHelper._shouldHaveFocus=!1;else if(x.target===this._element)moveFocusToItem();else{if(this._mode.inboundFocusHandled)return void(this._mode.inboundFocusHandled=!1);var V=this._view.items,R={},D=this._getHeaderOrFooterFromElement(x.target),N=null;if(D?(R.index=0,R.type=D===this._header?ee.ObjectType.header:ee.ObjectType.footer,this._lastFocusedElementInGroupTrack=R):(D=this._groups.headerFrom(x.target))?(R.type=ee.ObjectType.groupHeader,R.index=this._groups.index(D),this._lastFocusedElementInGroupTrack=R):(R.index=V.index(x.target),R.type=ee.ObjectType.item,D=V.itemBoxAt(R.index),N=V.itemAt(R.index)),R.index!==ne._INVALID_INDEX&&((this._keyboardFocusInbound||this._selection._keyboardFocused())&&(R.type===ee.ObjectType.groupHeader&&x.target===D||R.type===ee.ObjectType.item&&x.target.parentNode===D)&&this._drawFocusRectangle(D),this._tabManager.childFocus!==D&&this._tabManager.childFocus!==N&&(this._selection._setFocused(R,this._keyboardFocusInbound||this._selection._keyboardFocused()),this._keyboardFocusInbound=!1,R.type===ee.ObjectType.item&&(D=V.itemAt(R.index)),this._tabManager.childFocus=D,A._updater))){var U=A._updater.elements[fe(D)],B=R.index;U&&U.newIndex&&(B=U.newIndex),A._updater.oldFocus={type:R.type,index:B},A._updater.newFocus={type:R.type,index:B}}}},_onFocusOut:function ListView_onFocusOut(x){if(!this._disposed){this._hasKeyboardFocus=!1,this._itemFocused=!1;var A=this._view.items.itemBoxFrom(x.target)||this._groups.headerFrom(x.target);A&&this._clearFocusRectangle(A)}},_onMSManipulationStateChanged:function ListView_onMSManipulationStateChanged(x){var A=this;function done(){A._manipulationEndSignal=null}this._manipulationState=x.currentState,this._manipulationState===J._MSManipulationEvent.MS_MANIPULATION_STATE_STOPPED||this._manipulationEndSignal||(this._manipulationEndSignal=new q,this._manipulationEndSignal.promise.done(done,done)),this._manipulationState===J._MSManipulationEvent.MS_MANIPULATION_STATE_STOPPED&&this._manipulationEndSignal.complete()},_pendingScroll:!1,_onScroll:function ListView_onScroll(){this._zooming||this._pendingScroll||this._checkScroller()},_checkScroller:function ListView_checkScroller(){if(!this._isZombie()){var x=this._viewportScrollPosition;if(x!==this._lastScrollPosition){this._pendingScroll=V._requestAnimationFrame(this._checkScroller.bind(this)),x=Math.max(0,x);var A=this._scrollDirection(x);this._lastScrollPosition=x,this._raiseViewLoading(!0),this._raiseHeaderFooterVisibilityEvent();var R=this;this._view.onScroll((function(){return{position:R._lastScrollPosition,direction:A}}),this._manipulationEndSignal?this._manipulationEndSignal.promise:G.timeout(ne._DEFERRED_SCROLL_END))}else this._pendingScroll=null}},_scrollDirection:function ListView_scrollDirectionl(x){var A=x<this._lastScrollPosition?"left":"right";return A===this._lastDirection?A:this._direction},_onTabEnter:function ListView_onTabEnter(){this._keyboardFocusInbound=!0},_onTabExit:function ListView_onTabExit(){this._keyboardFocusInbound=!1},_onPropertyChange:function ListView_onPropertyChange(x){var A=this;x.forEach((function(x){var V=!1;if("dir"===x.attributeName?V=!0:"style"===x.attributeName&&(V=A._cachedStyleDir!==x.target.style.direction),V&&(A._cachedStyleDir=x.target.style.direction,A._cachedRTL=null,J[A._rtl()?"addClass":"removeClass"](A._element,ne._rtlListViewClass),A._lastScrollPosition=0,A._viewportScrollPosition=0,A.forceLayout()),"tabIndex"===x.attributeName){var R=A._element.tabIndex;R>=0&&(A._view.items.each((function(x,A){A.tabIndex=R})),A._header&&(A._header.tabIndex=R),A._footer&&(A._footer.tabIndex=R),A._tabIndex=R,A._tabManager.tabIndex=R,A._element.tabIndex=-1)}}))},_getCanvasMargins:function ListView_getCanvasMargins(){return this._canvasMargins||(this._canvasMargins=ue._getMargins(this._canvas)),this._canvasMargins},_convertCoordinatesByCanvasMargins:function ListView_convertCoordinatesByCanvasMargins(x,A){function fix(V,R){void 0!==x[V]&&(x[V]=A(x[V],R))}var V;return this._horizontal()?fix("left",V=this._getCanvasMargins()[this._rtl()?"right":"left"]):fix("top",V=this._getCanvasMargins().top),fix("begin",V),fix("end",V),x},_convertFromCanvasCoordinates:function ListView_convertFromCanvasCoordinates(x){return this._convertCoordinatesByCanvasMargins(x,(function(x,A){return x+A}))},_convertToCanvasCoordinates:function ListView_convertToCanvasCoordinates(x){return this._convertCoordinatesByCanvasMargins(x,(function(x,A){return x-A}))},_getViewportSize:function ListView_getViewportSize(){return this._viewportWidth!==ne._UNINITIALIZED&&this._viewportHeight!==ne._UNINITIALIZED||(this._viewportWidth=Math.max(0,J.getContentWidth(this._element)),this._viewportHeight=Math.max(0,J.getContentHeight(this._element)),this._previousWidth=this._element.offsetWidth,this._previousHeight=this._element.offsetHeight),{width:this._viewportWidth,height:this._viewportHeight}},_itemsCount:function ListView_itemsCount(){var x,A=this;function cleanUp(){A._itemsCountPromise=null}return this._cachedCount!==ne._UNINITIALIZED?G.wrap(this._cachedCount):(this._itemsCountPromise?x=this._itemsCountPromise:(x=this._itemsCountPromise=this._itemsManager.dataSource.getCount().then((function(x){return x===ee.CountResult.unknown&&(x=0),A._cachedCount=x,A._selection._updateCount(A._cachedCount),x}),(function(){return G.cancel})),this._itemsCountPromise.then(cleanUp,cleanUp)),x)},_isSelected:function ListView_isSelected(x){return this._selection._isIncluded(x)},_LoadingState:{itemsLoading:"itemsLoading",viewPortLoaded:"viewPortLoaded",itemsLoaded:"itemsLoaded",complete:"complete"},_raiseViewLoading:function ListView_raiseViewLoading(x){this._loadingState!==this._LoadingState.itemsLoading&&(this._scrolling=!!x),this._setViewState(this._LoadingState.itemsLoading)},_raiseViewComplete:function ListView_raiseViewComplete(){this._disposed||this._view.animating||this._setViewState(this._LoadingState.complete)},_raiseHeaderFooterVisibilityEvent:function ListView_raiseHeaderFooterVisibilityEvent(){var A=this,elementInViewport=function(x){if(!x)return!1;var V=A._lastScrollPosition,R=x[A._horizontal()?"offsetLeft":"offsetTop"];return R+x[A._horizontal()?"offsetWidth":"offsetHeight"]>V&&R<V+A._getViewportLength()},raiseVisibilityEvent=function(V,R){var D=x.document.createEvent("CustomEvent");D.initCustomEvent(V,!0,!0,{visible:R}),A._element.dispatchEvent(D)},V=!!this._header&&elementInViewport(this._headerContainer),R=!!this._footer&&elementInViewport(this._footerContainer);this._headerFooterVisibilityStatus.headerVisible!==V&&(this._headerFooterVisibilityStatus.headerVisible=V,raiseVisibilityEvent("headervisibilitychanged",V)),this._headerFooterVisibilityStatus.footerVisible!==R&&(this._headerFooterVisibilityStatus.footerVisible=R,raiseVisibilityEvent("footervisibilitychanged",R))},_setViewState:function ListView_setViewState(A){if(A!==this._loadingState){var V={scrolling:!1};switch(A){case this._LoadingState.viewPortLoaded:this._scheduledForDispose||(scheduleForDispose(this),this._scheduledForDispose=!0),this._setViewState(this._LoadingState.itemsLoading);break;case this._LoadingState.itemsLoaded:V={scrolling:this._scrolling},this._setViewState(this._LoadingState.viewPortLoaded);break;case this._LoadingState.complete:this._setViewState(this._LoadingState.itemsLoaded),this._updateDeleteWrapperSize(!0)}this._loadingState=A;var R=x.document.createEvent("CustomEvent");R.initCustomEvent("loadingstatechanged",!0,!1,V),this._element.dispatchEvent(R)}},_createTemplates:function ListView_createTemplates(){this._itemBoxTemplate=function createNodeWithClass(A,V){var R=x.document.createElement("div");return R.className=A,V||R.setAttribute("aria-hidden",!0),R}(ne._itemBoxClass,!0)},_updateSelection:function ListView_updateSelection(){var x=this._selection.getIndices(),A=this._selection.isEverything(),V={};if(!A)for(var R=0,D=x.length;R<D;R++){var N=x[R];V[N]=!0}this._view.items.each((function(x,R,D){if(D.itemBox){var N=A||!!V[x];re._ItemEventsHandler.renderSelection(D.itemBox,R,N,!0),D.container&&J[N?"addClass":"removeClass"](D.container,ne._selectedClass)}}))},_getViewportLength:function ListView_getViewportLength(){return this._getViewportSize()[this._horizontal()?"width":"height"]},_horizontal:function ListView_horizontal(){return this._horizontalLayout},_rtl:function ListView_rtl(){return"boolean"!=typeof this._cachedRTL&&(this._cachedRTL="rtl"===J._getComputedStyle(this._element,null).direction),this._cachedRTL},_showProgressBar:function ListView_showProgressBar(x,A,V){var R=this._progressBar,D=R.style;if(!R.parentNode){this._fadingProgressBar=!1,this._progressIndicatorDelayTimer&&this._progressIndicatorDelayTimer.cancel();var N=this;this._progressIndicatorDelayTimer=G.timeout(ne._LISTVIEW_PROGRESS_DELAY).then((function(){N._isZombie()||(x.appendChild(R),W.fadeIn(R),N._progressIndicatorDelayTimer=null)}))}D[this._rtl()?"right":"left"]=A,D.top=V},_hideProgressBar:function ListView_hideProgressBar(){this._progressIndicatorDelayTimer&&(this._progressIndicatorDelayTimer.cancel(),this._progressIndicatorDelayTimer=null);var x=this._progressBar;if(x.parentNode&&!this._fadingProgressBar){this._fadingProgressBar=!0;var A=this;W.fadeOut(x).then((function(){x.parentNode&&x.parentNode.removeChild(x),A._fadingProgressBar=!1}))}},_getPanAxis:function(){return this._horizontal()?"horizontal":"vertical"},_configureForZoom:function(x,A,D){if(V.validation&&(!this._view.realizePage||"number"!=typeof this._view.begin))throw new R("WinJS.UI.ListView.NotCompatibleWithSemanticZoom",_e.notCompatibleWithSemanticZoom);this._isZoomedOut=x,this._disableEntranceAnimation=!A,this._isCurrentZoomView=A,this._triggerZoom=D},_setCurrentItem:function(x,A){this._rtl()&&(x=this._viewportWidth-x),this._horizontal()?x+=this.scrollPosition:A+=this.scrollPosition;var V=this._view.hitTest(x,A),R={type:V.type?V.type:ee.ObjectType.item,index:V.index};R.index>=0&&(this._hasKeyboardFocus?this._changeFocus(R,!0,!1,!0):this._changeFocusPassively(R))},_getCurrentItem:function(){var x=this._selection._getFocused();x.type===ee.ObjectType.groupHeader?x={type:ee.ObjectType.item,index:this._groups.group(x.index).startIndex}:x.type!==ee.ObjectType.item&&(x={type:ee.ObjectType.item,index:x.type===ee.ObjectType.header?0:this._cachedCount}),"number"!=typeof x.index&&(this._setCurrentItem(.5*this._viewportWidth,.5*this._viewportHeight),x=this._selection._getFocused());var A=this,V=this._getItemOffsetPosition(x.index).then((function(x){var V=A._canvasStart;return x[A._startProperty]+=V,x}));return G.join({item:this._dataSource.itemFromIndex(x.index),position:V})},_animateItemsForPhoneZoom:function(){for(var x=[],A=[],V=[],R=Number.MAX_VALUE,D=this,N=this._view.firstIndexDisplayed,U=Math.min(this._cachedCount,this._view.lastIndexDisplayed+1);N<U;N++)V.push(this._view.waitForEntityPosition({type:ee.ObjectType.item,index:N}).then((function(){x.push(D._view.items.containerAt(N));var V=0;if(D.layout._getItemPosition){var U=D.layout._getItemPosition(N);U.row&&(V=U.row)}A.push(V),R=Math.min(V,R)})));function rowStaggerDelay(x,A,V){return function(R){return(A[R]-x)*V}}function clearTransform(){for(var A=0,V=x.length;A<V;A++)x[A].style[ge.scriptName]=""}return G.join(V).then((function(){return(0===x.length?G.wrap():H.executeTransition(x,{property:ge.cssName,delay:rowStaggerDelay(R,A,30),duration:100,timing:"ease-in-out",from:D._isCurrentZoomView?"rotateX(0deg)":"rotateX(-90deg)",to:D._isCurrentZoomView?"rotateX(90deg)":"rotateX(0deg)"})).then(clearTransform,clearTransform)})).then(clearTransform,clearTransform)},_beginZoom:function(){this._zooming=!0;var x=null;if(V.isPhone){if(this._isZoomedOut)if(this._zoomAnimationPromise&&this._zoomAnimationPromise.cancel(),this._isCurrentZoomView){var A=this,R=function animationComplete(){A._zoomAnimationPromise=null};this._zoomAnimationPromise=x=this._animateItemsForPhoneZoom().then(R,R)}else this._zoomAnimationPromise=new q,x=this._zoomAnimationPromise.promise}else{var D=this._horizontal(),N=-this.scrollPosition;J.addClass(this._viewport,D?ne._zoomingXClass:ne._zoomingYClass),this._canvasStart=N,J.addClass(this._viewport,D?ne._zoomingYClass:ne._zoomingXClass)}return x},_positionItem:function(x,A){var D=this;function positionItemAtIndex(x){return D._getItemOffsetPosition(x).then((function positionItemAtIndex_then_ItemOffsetPosition(R){var N,U=D._horizontal(),B=D._viewport[U?"scrollWidth":"scrollHeight"],F=U?D._viewportWidth:D._viewportHeight,W=U?"headerContainerWidth":"headerContainerHeight",H=D.layout._sizes,z=0;H&&H[W]&&(z=H[W]);var G=V.isPhone?z:A[D._startProperty],j=F-(U?R.width:R.height);G=Math.max(0,Math.min(j,G)),N=R[D._startProperty]-G;var q=Math.max(0,Math.min(B-F,N)),Q=q-N;N=q;var K={type:ee.ObjectType.item,index:x};if(D._hasKeyboardFocus?D._changeFocus(K,!0):D._changeFocusPassively(K),D._raiseViewLoading(!0),V.isPhone)D._viewportScrollPosition=N;else{var J=-N;D._canvasStart=J}if(D._view.realizePage(N,!0),V.isPhone&&D._isZoomedOut){var X=function animationComplete(){D._zoomAnimationPromise&&D._zoomAnimationPromise.complete&&D._zoomAnimationPromise.complete(),D._zoomAnimationPromise=null};D._animateItemsForPhoneZoom().then(X,X)}return U?{x:Q,y:0}:{x:0,y:Q}}))}var N=0;if(x&&(N=this._isZoomedOut?x.groupIndexHint:x.firstItemIndexHint),"number"==typeof N)return positionItemAtIndex(N);var U,B=this._isZoomedOut?x.groupKey:x.firstItemKey;if("string"==typeof B&&this._dataSource.itemFromKey)U=this._dataSource.itemFromKey(B,this._isZoomedOut?{groupMemberKey:x.key,groupMemberIndex:x.index}:null);else{var F=this._isZoomedOut?x.groupDescription:x.firstItemDescription;if(V.validation&&void 0===F)throw new R("WinJS.UI.ListView.InvalidItem",_e.listViewInvalidItem);U=this._dataSource.itemFromDescription(F)}return U.then((function(x){return positionItemAtIndex(x.index)}))},_endZoom:function(x){if(!this._isZombie()){if(!V.isPhone){var A=this._canvasStart;J.removeClass(this._viewport,ne._zoomingYClass),J.removeClass(this._viewport,ne._zoomingXClass),this._canvasStart=0,this._viewportScrollPosition=-A}this._disableEntranceAnimation=!x,this._isCurrentZoomView=x,this._zooming=!1,this._view.realizePage(this.scrollPosition,!1)}},_getItemOffsetPosition:function(x){var A=this;return this._getItemOffset({type:ee.ObjectType.item,index:x}).then((function(x){return A._ensureFirstColumnRange(ee.ObjectType.item).then((function(){return x=A._correctRangeInFirstColumn(x,ee.ObjectType.item),x=A._convertFromCanvasCoordinates(x),A._horizontal()?(x.left=x.begin,x.width=x.end-x.begin,x.height=x.totalHeight):(x.top=x.begin,x.height=x.end-x.begin,x.width=x.totalWidth),x}))}))},_groupRemoved:function(x){this._groupFocusCache.deleteGroup(x)},_updateFocusCache:function(x){this._updateFocusCacheItemRequest&&this._updateFocusCacheItemRequest.cancel();var A=this;this._updateFocusCacheItemRequest=this._view.items.requestItem(x).then((function(){A._updateFocusCacheItemRequest=null;var V=A._view.items.itemDataAt(x),R=A._groups.groupFromItem(x),D=A._groups.group(R).key;V.itemsManagerRecord.item&&A._groupFocusCache.updateCache(D,V.itemsManagerRecord.item.key,x)}))},_changeFocus:function(x,A,V,R,D){if(!this._isZombie()){var N;if(x.type===ee.ObjectType.item)N=this._view.items.itemAt(x.index),!A&&N&&J.hasClass(N,ne._nonSelectableClass)&&(A=!0),this._updateFocusCache(x.index);else if(x.type===ee.ObjectType.groupHeader){this._lastFocusedElementInGroupTrack=x;var U=this._groups.group(x.index);N=U&&U.header}else this._lastFocusedElementInGroupTrack=x,N=x.type===ee.ObjectType.footer?this._footer:this._header;this._unsetFocusOnItem(!!N),this._hasKeyboardFocus=!0,this._selection._setFocused(x,D),R||this.ensureVisible(x),!A&&this._selectFocused(V)&&this._selection.set(x.index),this._setFocusOnItem(x)}},_changeFocusPassively:function(x){var A;switch(x.type){case ee.ObjectType.item:A=this._view.items.itemAt(x.index),this._updateFocusCache(x.index);break;case ee.ObjectType.groupHeader:this._lastFocusedElementInGroupTrack=x;var V=this._groups.group(x.index);A=V&&V.header;break;case ee.ObjectType.header:this._lastFocusedElementInGroupTrack=x,A=this._header;break;case ee.ObjectType.footer:this._lastFocusedElementInGroupTrack=x,A=this._footer}this._unsetFocusOnItem(!!A),this._selection._setFocused(x),this._setFocusOnItem(x)},_drawFocusRectangle:function(A){if(A!==this._header&&A!==this._footer)if(J.hasClass(A,ne._headerClass))J.addClass(A,ne._itemFocusClass);else{var V=this._view.items.itemBoxFrom(A);if(V.querySelector("."+ne._itemFocusOutlineClass))return;J.addClass(V,ne._itemFocusClass);var R=x.document.createElement("div");R.className=ne._itemFocusOutlineClass,V.appendChild(R)}},_clearFocusRectangle:function(x){if(x&&!this._isZombie()&&x!==this._header&&x!==this._footer){var A=this._view.items.itemBoxFrom(x);if(A){J.removeClass(A,ne._itemFocusClass);var V=A.querySelector("."+ne._itemFocusOutlineClass);V&&V.parentNode.removeChild(V)}else{var R=this._groups.headerFrom(x);R&&J.removeClass(R,ne._itemFocusClass)}}},_defaultInvoke:function(x){(this._isZoomedOut||V.isPhone&&this._triggerZoom&&x.type===ee.ObjectType.groupHeader)&&(this._changeFocusPassively(x),this._triggerZoom())},_selectionAllowed:function ListView_selectionAllowed(x){var A=void 0!==x?this.elementFromIndex(x):null;return!(A&&J.hasClass(A,ne._nonSelectableClass))&&this._selectionMode!==ee.SelectionMode.none},_multiSelection:function ListView_multiSelection(){return this._selectionMode===ee.SelectionMode.multi},_isInSelectionMode:function ListView_isInSelectionMode(){return this.tapBehavior===ee.TapBehavior.toggleSelect&&this.selectionMode===ee.SelectionMode.multi},_selectOnTap:function ListView_selectOnTap(){return this._tap===ee.TapBehavior.toggleSelect||this._tap===ee.TapBehavior.directSelect},_selectFocused:function ListView_selectFocused(x){return this._tap===ee.TapBehavior.directSelect&&this._selectionMode===ee.SelectionMode.multi&&!x},_dispose:function(){if(!this._disposed){this._disposed=!0;var x=function clear(x){x&&(x.textContent="")};J._resizeNotifier.unsubscribe(this._element,this._onElementResizeBound),this._elementResizeInstrument.dispose(),this._batchingViewUpdates&&this._batchingViewUpdates.cancel(),this._view&&this._view._dispose&&this._view._dispose(),this._mode&&this._mode._dispose&&this._mode._dispose(),this._groups&&this._groups._dispose&&this._groups._dispose(),this._selection&&this._selection._dispose&&this._selection._dispose(),this._layout&&this._layout.uninitialize&&this._layout.uninitialize(),this._itemsCountPromise&&this._itemsCountPromise.cancel(),this._versionManager&&this._versionManager._dispose(),this._clearInsertedItems(),this._itemsManager&&this._itemsManager.release(),this._zoomAnimationPromise&&this._zoomAnimationPromise.cancel(),x(this._viewport),x(this._canvas),x(this._canvasProxy),this._versionManager=null,this._view=null,this._mode=null,this._element=null,this._viewport=null,this._itemsManager=null,this._canvas=null,this._canvasProxy=null,this._itemsCountPromise=null,this._scrollToFunctor=null;var A=ye.indexOf(this);A>=0&&ye.splice(A,1)}},_isZombie:function(){return this._disposed||!(this.element.firstElementChild&&x.document.body.contains(this.element))},_ifZombieDispose:function(){var x=this._isZombie();return x&&!this._disposed&&scheduleForDispose(this),x},_animationsDisabled:function(){return 0===this._viewportWidth||0===this._viewportHeight||!H.isAnimationEnabled()},_fadeOutViewport:function ListView_fadeOutViewport(){var x=this;return new G((function(A){if(x._animationsDisabled())A();else if(!x._fadingViewportOut){x._waitingEntranceAnimationPromise&&(x._waitingEntranceAnimationPromise.cancel(),x._waitingEntranceAnimationPromise=null);var V=x._fireAnimationEvent(be.contentTransition);x._firedAnimationEvent=!0,V.prevented?(x._disableEntranceAnimation=!0,x._viewport.style.opacity=1,A()):(x._fadingViewportOut=!0,x._viewport.style.overflow="hidden",W.fadeOut(x._viewport).then((function(){x._isZombie()||(x._fadingViewportOut=!1,x._viewport.style.opacity=1,A())})))}}))},_animateListEntrance:function(x){var A={prevented:!1,animationPromise:G.wrap()},R=this;function resetViewOpacity(){R._canvas.style.opacity=1,R._headerContainer.style.opacity=1,R._footerContainer.style.opacity=1,R._viewport.style.overflow="",R._raiseHeaderFooterVisibilityEvent()}return this._raiseHeaderFooterVisibilityEvent(),this._disableEntranceAnimation||this._animationsDisabled()?(resetViewOpacity(),this._waitingEntranceAnimationPromise&&(this._waitingEntranceAnimationPromise.cancel(),this._waitingEntranceAnimationPromise=null),G.wrap()):(this._firedAnimationEvent?this._firedAnimationEvent=!1:A=this._fireAnimationEvent(be.entrance),A.prevented||V.isPhone?(resetViewOpacity(),G.wrap()):(this._waitingEntranceAnimationPromise&&this._waitingEntranceAnimationPromise.cancel(),this._canvas.style.opacity=0,this._viewport.style.overflow="hidden",this._headerContainer.style.opacity=1,this._footerContainer.style.opacity=1,this._waitingEntranceAnimationPromise=A.animationPromise.then((function(){if(!R._isZombie())return R._canvas.style.opacity=1,W.enterContent(R._viewport).then((function(){R._isZombie()||(R._waitingEntranceAnimationPromise=null,R._viewport.style.overflow="")}))})),this._waitingEntranceAnimationPromise))},_fireAnimationEvent:function(A){var V=x.document.createEvent("CustomEvent"),R=G.wrap();return V.initCustomEvent("contentanimating",!0,!0,{type:A}),A===be.entrance&&(V.detail.setPromise=function(x){R=x}),{prevented:!this._element.dispatchEvent(V),animationPromise:R}},_createAriaMarkers:function ListView_createAriaMarkers(){this._viewport.getAttribute("aria-label")||this._viewport.setAttribute("aria-label",_e.listViewViewportAriaLabel),this._ariaStartMarker||(this._ariaStartMarker=x.document.createElement("div"),this._ariaStartMarker.id=fe(this._ariaStartMarker),this._viewport.insertBefore(this._ariaStartMarker,this._viewport.firstElementChild)),this._ariaEndMarker||(this._ariaEndMarker=x.document.createElement("div"),this._ariaEndMarker.id=fe(this._ariaEndMarker),this._viewport.appendChild(this._ariaEndMarker))},_updateItemsAriaRoles:function ListView_updateItemsAriaRoles(){var x,A,V=this,R=this._element.getAttribute("role");this._currentMode().staticMode()?(x="list",A="listitem"):(x="listbox",A="option"),R===x&&this._itemRole===A||(this._element.setAttribute("role",x),this._itemRole=A,this._view.items.each((function(x,A){A.setAttribute("role",V._itemRole)})))},_updateGroupHeadersAriaRoles:function ListView_updateGroupHeadersAriaRoles(){var x=this.groupHeaderTapBehavior===ee.GroupHeaderTapBehavior.none?"separator":"link";if(this._headerRole!==x){this._headerRole=x;for(var A=0,V=this._groups.length();A<V;A++){var R=this._groups.group(A).header;R&&R.setAttribute("role",this._headerRole)}}},_setAriaSelected:function ListView_setAriaSelected(x,A){A!==("true"===x.getAttribute("aria-selected"))&&x.setAttribute("aria-selected",A)},_setupAriaSelectionObserver:function ListView_setupAriaSelectionObserver(x){x._mutationObserver||(this._mutationObserver.observe(x,{attributes:!0,attributeFilter:["aria-selected"]}),x._mutationObserver=!0)},_itemPropertyChange:function ListView_itemPropertyChange(x){if(!this._isZombie()){for(var A=this,V=A._selectionMode===ee.SelectionMode.single,R=[],D=[],N=0,U=x.length;N<U;N++){var B=x[N].target,F=A._view.items.itemBoxFrom(B),W="true"===B.getAttribute("aria-selected");if(F&&W!==J._isSelectionRendered(F)){var H=A._view.items.index(F),z={index:H,item:B,selected:W};(A._selectionAllowed(H)?R:D).push(z)}}if(R.length>0){var G=new q;A.selection._synchronize(G).then((function(){var x=A.selection._cloneSelection();return R.forEach((function(A){A.selected?x[V?"set":"add"](A.index):x.remove(A.index)})),A.selection._set(x)})).then((function(x){A._isZombie()||x||revertAriaSelected(R),G.complete()}))}revertAriaSelected(D)}function revertAriaSelected(x){x.forEach((function(x){x.item.setAttribute("aria-selected",!x.selected)}))}},_groupsEnabled:function(){return!!this._groups.groupDataSource},_getItemPosition:function ListView_getItemPosition(x,A){var V=this;return this._view.waitForEntityPosition(x).then((function(){var R,D=V._zooming&&0!==V._canvasStart;switch(x.type){case ee.ObjectType.item:R=V._view.getContainer(x.index);break;case ee.ObjectType.groupHeader:R=V._view._getHeaderContainer(x.index);break;case ee.ObjectType.header:D=!0,R=V._headerContainer;break;case ee.ObjectType.footer:D=!0,R=V._footerContainer}if(R){var N,U;V._view._expandedRange?(N=V._view._expandedRange.first.index,U=V._view._expandedRange.last.index):A=!1,x.type===ee.ObjectType.item?(A=!!A,A&=V._view._ensureContainerInDOM(x.index)):A=!1;var B=V._getItemMargins(x.type),F={left:V._rtl()?getOffsetRight(R)-B.right:R.offsetLeft-B.left,top:R.offsetTop-B.top,totalWidth:J.getTotalWidth(R),totalHeight:J.getTotalHeight(R),contentWidth:J.getContentWidth(R),contentHeight:J.getContentHeight(R)};return A&&V._view._forceItemsBlocksInDOM(N,U+1),D?F:V._convertToCanvasCoordinates(F)}return G.cancel}))},_getItemOffset:function ListView_getItemOffset(x,A){var V=this;return this._getItemPosition(x,A).then((function(A){var R=V._getItemMargins(x.type);if(V._horizontal()){var D=V._rtl();A.begin=A.left-R[D?"left":"right"],A.end=A.left+A.totalWidth+R[D?"right":"left"]}else A.begin=A.top-R.bottom,A.end=A.top+A.totalHeight+R.top;return A}))},_getItemMargins:function ListView_getItemMargins(A){A=A||ee.ObjectType.item;var V=this,calculateMargins=function(A){var R,D=V._canvas.querySelector("."+A);D||(D=x.document.createElement("div"),J.addClass(D,A),V._viewport.appendChild(D),R=!0);var N=ue._getMargins(D);return R&&V._viewport.removeChild(D),N};return A===ee.ObjectType.item?this._itemMargins?this._itemMargins:this._itemMargins=calculateMargins(ne._containerClass):A===ee.ObjectType.groupHeader?this._headerMargins?this._headerMargins:this._headerMargins=calculateMargins(ne._headerContainerClass):(this._headerFooterMargins||(this._headerFooterMargins={headerMargins:calculateMargins(ne._listHeaderContainerClass),footerMargins:calculateMargins(ne._listFooterContainerClass)}),this._headerFooterMargins[A===ee.ObjectType.header?"headerMargins":"footerMargins"])},_fireAccessibilityAnnotationCompleteEvent:function ListView_fireAccessibilityAnnotationCompleteEvent(A,V,R,D){var N={firstIndex:A,lastIndex:V,firstHeaderIndex:+R||-1,lastHeaderIndex:+D||-1},U=x.document.createEvent("CustomEvent");U.initCustomEvent("accessibilityannotationcomplete",!0,!1,N),this._element.dispatchEvent(U)},_ensureFirstColumnRange:function ListView_ensureFirstColumnRange(x){if(x===ee.ObjectType.header||x===ee.ObjectType.footer)return G.wrap();var A=x===ee.ObjectType.item?"_firstItemRange":"_firstHeaderRange";if(this[A])return G.wrap();var V=this;return this._getItemOffset({type:x,index:0},!0).then((function(x){V[A]=x}))},_correctRangeInFirstColumn:function ListView_correctRangeInFirstColumn(x,A){return A===ee.ObjectType.header||A===ee.ObjectType.footer||(A===ee.ObjectType.groupHeader?this._firstHeaderRange:this._firstItemRange).begin===x.begin&&(this._horizontal()?x.begin=-this._getCanvasMargins()[this._rtl()?"right":"left"]:x.begin=-this._getCanvasMargins().top),x},_updateContainers:function ListView_updateContainers(A,V,R,D){var N,U=this;if(this._view.containers.length+R<V){for(var B=0,F=0;F<D.length;F++)-1===D[F].oldIndex&&B++;N=this._view.containers.length+B}else N=V;var W=[],H={},z=[],G=[];function createContainer(){var A=x.document.createElement("div");return A.className=ne._containerClass,A}function updateExistingGroupWithBlocks(A,V,R){V+R>N&&(R=N-V);var D=A.itemsContainer,B=D.itemsBlocks,F=U._view._blockSize,W=B.length?B[B.length-1]:null,H=B.length?(B.length-1)*F+W.items.length:0,j=R-H;if(j>0){var q,Q=j;if(W&&W.items.length<F){var K=Math.min(Q,F-W.items.length);q=W.items.length;var J=ce._stripedContainers(K,H);$.insertAdjacentHTMLUnsafe(W.element,"beforeend",J),se=W.element.children;for(var X=0;X<K;X++)W.items.push(se[q+X]);Q-=K}H=B.length*F;var Y=Math.floor(Q/F),Z="",ee=H,te=H+F;if(Y>0){var ie=["<div class='win-itemsblock'>"+ce._stripedContainers(F,ee)+"</div>","<div class='win-itemsblock'>"+ce._stripedContainers(F,te)+"</div>"];Z=ce._repeat(ie,Y),H+=Y*F}var ne=Q%F;ne>0&&(Z+="<div class='win-itemsblock'>"+ce._stripedContainers(ne,H)+"</div>",H+=ne,Y++);var re=x.document.createElement("div");$.setInnerHTMLUnsafe(re,Z);var se=re.children;for(X=0;X<Y;X++){var oe={element:ue=se[X],items:ce._nodeListToArray(ue.children)};B.push(oe)}}else if(j<0)for(var ae=j;ae<0;ae++){var le=W.items.pop();!U._view._requireFocusRestore&&le.contains(x.document.activeElement)&&(U._view._requireFocusRestore=x.document.activeElement,U._unsetFocusOnItem()),W.element.removeChild(le),G.push(le),W.items.length||(D.element===W.element.parentNode&&D.element.removeChild(W.element),B.pop(),W=B[B.length-1])}X=0;for(var de=B.length;X<de;X++){var ue=B[X];for(ae=0;ae<ue.items.length;ae++)z.push(ue.items[ae])}}function addInserted(x,A,V){for(var R=D.filter((function(x){return-1===x.oldIndex&&x.newIndex>=A&&x.newIndex<A+V})).sort((function(x,A){return x.newIndex-A.newIndex})),N=x.itemsContainer,U=0,B=R.length;U<B;U++){var F=R[U].newIndex-A,W=createContainer(),H=F<N.items.length?N.items[F]:null;N.items.splice(F,0,W),N.element.insertBefore(W,H)}}function updateExistingGroup(x,A,V){A+V>N&&(V=N-A);var R=x.itemsContainer,D=V-R.items.length;if(D>0){var U=R.element.children,B=U.length;$.insertAdjacentHTMLUnsafe(R.element,"beforeend",ce._repeat("<div class='win-container win-backdrop'></div>",D));for(var F=0;F<D;F++){var W=U[B+F];R.items.push(W)}}for(F=D;F<0;F++)W=R.items.pop(),R.element.removeChild(W),G.push(W);F=0;for(var H=R.items.length;F<H;F++)z.push(R.items[F])}function addNewGroup(x,A){var V=U._view._createHeaderContainer(te),R={header:V,itemsContainer:{element:U._view._createItemsContainer(V)}};return R.itemsContainer[U._view._blockSize?"itemsBlocks":"items"]=[],U._view._blockSize?updateExistingGroupWithBlocks(R,A,x.size):updateExistingGroup(R,A,x.size),R}function shift(x,A,R,N){for(var B,F,W=R+N-1,H=0,z=D.length;H<z;H++)(Q=D[H]).newIndex>=R&&Q.newIndex<=W&&-1!==Q.oldIndex&&(B!==+B||Q.newIndex<B)&&(B=Q.newIndex,F=Q.newIndex-Q.oldIndex);if(B===+B){var G=0;for(H=0,z=D.length;H<z;H++)(Q=D[H]).newIndex>=R&&Q.newIndex<B&&-1===Q.oldIndex&&G++;var j=0,q=B-F;for(H=0,z=D.length;H<z;H++){var Q;(Q=D[H]).oldIndex>=A&&Q.oldIndex<q&&-1===Q.newIndex&&j++}F+=j,F-=G,F-=R-A;var K=x.itemsContainer;if(F>0){var J=K.element.children;$.insertAdjacentHTMLUnsafe(K.element,"afterBegin",ce._repeat("<div class='win-container win-backdrop'></div>",F));for(var X=0;X<F;X++){var Y=J[X];K.items.splice(X,0,Y)}}for(X=F;X<0;X++)Y=K.items.shift(),K.element.removeChild(Y);F&&U._affectedRange.add({start:R,end:R+N},V)}}function flatIndexToGroupIndex(x){for(var A=0,V=0,R=U._view.tree.length;V<R;V++){var D=U._view.tree[V].itemsContainer.items.length;if(x>=A&&x<=A+D-1)return{group:V,item:x-A};A+=D}}var j=[],q=0;if(!U._view._blockSize){F=0;for(var Q=this._view.tree.length;F<Q;F++)j.push(q),q+=this._view.tree[F].itemsContainer.items.length}if(!U._view._blockSize){var K=D.filter((function(x){return-1===x.newIndex&&!x._removalHandled})).sort((function(x,A){return A.oldIndex-x.oldIndex}));for(F=0,Q=K.length;F<Q;F++){var X=K[F];X._removalHandled=!0;var Y=X._itemBox;X._itemBox=null;var Z=flatIndexToGroupIndex(X.oldIndex),ee=this._view.tree[Z.group];(ge=ee.itemsContainer.items[Z.item]).parentNode.removeChild(ge),J.hasClass(Y,ne._selectedClass)&&J.addClass(ge,ne._selectedClass),ee.itemsContainer.items.splice(Z.item,1),X.element=ge}}this._view._modifiedGroups=[];var te=this._canvasProxy;for(q=0,F=0,Q=A.length;F<Q&&(!this._groupsEnabled()||q<N);F++){var ie=A[F],re=this._view.keyToGroupIndex[ie.key],se=this._view.tree[re];if(se)U._view._blockSize?updateExistingGroupWithBlocks(se,q,ie.size):(shift(se,j[re],q,ie.size),addInserted(se,q,ie.size),updateExistingGroup(se,q,ie.size)),W.push(se),H[ie.key]=W.length-1,delete this._view.keyToGroupIndex[ie.key],te=se.itemsContainer.element,this._view._modifiedGroups.push({oldIndex:re,newIndex:W.length-1,element:se.header});else{var oe=addNewGroup(ie,q);W.push(oe),H[ie.key]=W.length-1,this._view._modifiedGroups.push({oldIndex:-1,newIndex:W.length-1,element:oe.header}),te=oe.itemsContainer.element}q+=ie.size}var ae=[],le=[],de=this._view.keyToGroupIndex?Object.keys(this._view.keyToGroupIndex):[];for(F=0,Q=de.length;F<Q;F++){Z=this._view.keyToGroupIndex[de[F]];var ue=this._view.tree[Z];if(le.push(ue.header),ae.push(ue.itemsContainer.element),this._view._blockSize)for(var he=0;he<ue.itemsContainer.itemsBlocks.length;he++)for(var pe=ue.itemsContainer.itemsBlocks[he],me=0;me<pe.items.length;me++)G.push(pe.items[me]);else for(me=0;me<ue.itemsContainer.items.length;me++)G.push(ue.itemsContainer.items[me]);this._view._modifiedGroups.push({oldIndex:Z,newIndex:-1,element:ue.header})}for(F=0,Q=D.length;F<Q;F++)if(-1===D[F].newIndex&&!D[F]._removalHandled){var ge;D[F]._removalHandled=!0,Y=D[F]._itemBox,D[F]._itemBox=null,G.length?(ge=G.pop(),J.empty(ge)):ge=createContainer(),J.hasClass(Y,ne._selectedClass)&&J.addClass(ge,ne._selectedClass),D._containerStripe===ne._containerEvenClass?(J.addClass(ge,ne._containerEvenClass),J.removeClass(ge,ne._containerOddClass)):(J.addClass(ge,ne._containerOddClass),J.removeClass(ge,ne._containerEvenClass)),ge.appendChild(Y),D[F].element=ge}return this._view.tree=W,this._view.keyToGroupIndex=H,this._view.containers=z,{removedHeaders:le,removedItemsContainers:ae}},_writeProfilerMark:function ListView_writeProfilerMark(x){var A="WinJS.UI.ListView:"+this._id+":"+x;N.log&&N.log(A,null,"listviewprofiler")}},{triggerDispose:function(){disposeControls()}});return A.Class.mix(F,D.createEventProperties("iteminvoked","groupheaderinvoked","selectionchanging","selectionchanged","loadingstatechanged","keyboardnavigating","contentanimating","itemdragstart","itemdragenter","itemdragend","itemdragbetween","itemdragleave","itemdragchanged","itemdragdrop","headervisibilitychanged","footervisibilitychanged","accessibilityannotationcomplete")),A.Class.mix(F,Q.DOMEventMixin),F}))})})),R("WinJS/Controls/ItemContainer",["exports","../Core/_Global","../Core/_Base","../Core/_BaseUtils","../Core/_ErrorFromName","../Core/_Events","../Core/_Log","../Core/_Resources","../Core/_WriteProfilerMark","../Promise","../Scheduler","../Utilities/_Control","../Utilities/_Dispose","../Utilities/_ElementUtilities","../Utilities/_Hoverable","../Utilities/_KeyboardBehavior","../Utilities/_UI","./ItemContainer/_Constants","./ItemContainer/_ItemEventsHandler"],(function itemContainerInit(x,A,V,R,D,N,U,B,F,W,H,z,G,j,q,Q,K,J,X){"use strict";var Y=N._createEventProperty,$="invoked",Z="selectionchanging",ee="selectionchanged";V.Namespace._moduleDefine(x,"WinJS.UI",{ItemContainer:V.Namespace._lazy((function(){var N={get duplicateConstruction(){return"Invalid argument: Controls may only be instantiated one time for each DOM element"},get swipeOrientationDeprecated(){return"Invalid configuration: swipeOrientation is deprecated. The control will default this property to 'none'"},get swipeBehaviorDeprecated(){return"Invalid configuration: swipeBehavior is deprecated. The control will default this property to 'none'"}},B=V.Class.define((function ItemContainer_ctor(V,R){if(V=V||A.document.createElement("DIV"),this._id=V.id||j._uniqueID(V),R=R||{},V.winControl)throw new D("WinJS.UI.ItemContainer.DuplicateConstruction",N.duplicateConstruction);V.winControl=this,this._element=V,this._selectionMode=K.SelectionMode.single,this._draggable=!1,this._pressedEntity={type:K.ObjectType.item,index:J._INVALID_INDEX},this.tapBehavior=K.TapBehavior.invokeOnly,j.addClass(this.element,B._ClassName.itemContainer+" "+J._containerClass),this._setupInternalTree(),this._selection=new x._SingleItemSelectionManager(V,this._itemBox),this._setTabIndex(),z.setOptions(this,R),this._mutationObserver=new j._MutationObserver(this._itemPropertyChange.bind(this)),this._mutationObserver.observe(V,{attributes:!0,attributeFilter:["aria-selected"]}),this._setAriaRole();var U=this;function eventHandler(x,A,V){return{name:A?x:x.toLowerCase(),handler:function(A){U["_on"+x](A)},capture:V}}this.selectionDisabled||H.schedule((function ItemContainer_async_initialize(){U._setDirectionClass()}),H.Priority.normal,null,"WinJS.UI.ItemContainer_async_initialize"),this._itemEventsHandler=new X._ItemEventsHandler(Object.create({containerFromElement:function(){return U.element},indexForItemElement:function(){return 1},indexForHeaderElement:function(){return J._INVALID_INDEX},itemBoxAtIndex:function(){return U._itemBox},itemAtIndex:function(){return U.element},headerAtIndex:function(){return null},containerAtIndex:function(){return U.element},isZombie:function(){return this._disposed},getItemPosition:function(){return U._getItemPosition()},rtl:function(){return U._rtl()},fireInvokeEvent:function(){U._fireInvokeEvent()},verifySelectionAllowed:function(){return U._verifySelectionAllowed()},changeFocus:function(){},selectRange:function(x,A){return U._selection.set({firstIndex:x,lastIndex:A})}},{pressedEntity:{get:function(){return U._pressedEntity},set:function(x){U._pressedEntity=x}},pressedElement:{enumerable:!0,set:function(x){U._pressedElement=x}},eventHandlerRoot:{enumerable:!0,get:function(){return U.element}},selectionMode:{enumerable:!0,get:function(){return U._selectionMode}},accessibleItemClass:{enumerable:!0,get:function(){return J._containerClass}},canvasProxy:{enumerable:!0,get:function(){return U._captureProxy}},tapBehavior:{enumerable:!0,get:function(){return U._tapBehavior}},draggable:{enumerable:!0,get:function(){return U._draggable}},selection:{enumerable:!0,get:function(){return U._selection}},customFootprintParent:{enumerable:!0,get:function(){return null}},skipPreventDefaultOnPointerDown:{enumerable:!0,get:function(){return!0}}})),[eventHandler("PointerDown"),eventHandler("Click"),eventHandler("PointerUp"),eventHandler("PointerCancel"),eventHandler("LostPointerCapture"),eventHandler("ContextMenu"),eventHandler("MSHoldVisual",!0),eventHandler("FocusIn"),eventHandler("FocusOut"),eventHandler("DragStart"),eventHandler("DragEnd"),eventHandler("KeyDown")].forEach((function(x){j._addEventListener(U.element,x.name,x.handler,!!x.capture)}))}),{element:{get:function(){return this._element}},draggable:{get:function(){return this._draggable},set:function(x){R.isPhone||this._draggable!==x&&(this._draggable=x,this._updateDraggableAttribute())}},selected:{get:function(){return this._selection.selected},set:function(x){this._selection.selected!==x&&(this._selection.selected=x)}},swipeOrientation:{get:function(){return"none"},set:function(x){j._deprecated(N.swipeOrientationDeprecated)}},tapBehavior:{get:function(){return this._tapBehavior},set:function(x){R.isPhone&&x===K.TapBehavior.directSelect||(this._tapBehavior=x,this._setAriaRole())}},swipeBehavior:{get:function(){return"none"},set:function(x){j._deprecated(N.swipeBehaviorDeprecated)}},selectionDisabled:{get:function(){return this._selectionMode===K.SelectionMode.none},set:function(x){x?this._selectionMode=K.SelectionMode.none:(this._setDirectionClass(),this._selectionMode=K.SelectionMode.single),this._setAriaRole()}},oninvoked:Y($),onselectionchanging:Y(Z),onselectionchanged:Y(ee),forceLayout:function(){this._forceLayout()},dispose:function(){this._disposed||(this._disposed=!0,this._itemEventsHandler.dispose(),G.disposeSubTree(this.element))},_onMSManipulationStateChanged:function ItemContainer_onMSManipulationStateChanged(x){this._itemEventsHandler.onMSManipulationStateChanged(x)},_onPointerDown:function ItemContainer_onPointerDown(x){this._itemEventsHandler.onPointerDown(x)},_onClick:function ItemContainer_onClick(x){this._itemEventsHandler.onClick(x)},_onPointerUp:function ItemContainer_onPointerUp(x){j.hasClass(this._itemBox,J._itemFocusClass)&&this._onFocusOut(x),this._itemEventsHandler.onPointerUp(x)},_onPointerCancel:function ItemContainer_onPointerCancel(x){this._itemEventsHandler.onPointerCancel(x)},_onLostPointerCapture:function ItemContainer_onLostPointerCapture(x){this._itemEventsHandler.onLostPointerCapture(x)},_onContextMenu:function ItemContainer_onContextMenu(x){this._itemEventsHandler.onContextMenu(x)},_onMSHoldVisual:function ItemContainer_onMSHoldVisual(x){this._itemEventsHandler.onMSHoldVisual(x)},_onFocusIn:function ItemContainer_onFocusIn(){if(!this._itemBox.querySelector("."+J._itemFocusOutlineClass)&&Q._keyboardSeenLast){j.addClass(this._itemBox,J._itemFocusClass);var x=A.document.createElement("div");x.className=J._itemFocusOutlineClass,this._itemBox.appendChild(x)}},_onFocusOut:function ItemContainer_onFocusOut(){j.removeClass(this._itemBox,J._itemFocusClass);var x=this._itemBox.querySelector("."+J._itemFocusOutlineClass);x&&x.parentNode.removeChild(x)},_onDragStart:function ItemContainer_onDragStart(x){if(this._pressedElement&&this._itemEventsHandler._isInteractive(this._pressedElement))x.preventDefault();else{this._dragging=!0;var A=this;if(x.dataTransfer.setData("text",""),x.dataTransfer.setDragImage){var V=this.element.getBoundingClientRect();x.dataTransfer.setDragImage(this.element,x.clientX-V.left,x.clientY-V.top)}R._yieldForDomModification((function(){A._dragging&&j.addClass(A._itemBox,J._dragSourceClass)}))}},_onDragEnd:function ItemContainer_onDragEnd(){this._dragging=!1,j.removeClass(this._itemBox,J._dragSourceClass),this._itemEventsHandler.resetPointerDownState()},_onKeyDown:function ItemContainer_onKeyDown(x){if(!this._itemEventsHandler._isInteractive(x.target)){var A=j.Key,V=x.keyCode,R=!1;x.ctrlKey||V!==A.enter?x.ctrlKey&&V===A.enter||V===A.space?this.selectionDisabled||(this.selected=!this.selected,R=j._setActive(this.element)):V===A.escape&&this.selected&&(this.selected=!1,R=!0):(this._verifySelectionAllowed().canTapSelect&&(this.selected=!this.selected),this._fireInvokeEvent(),R=!0),R&&(x.stopPropagation(),x.preventDefault())}},_setTabIndex:function ItemContainer_setTabIndex(){this.element.getAttribute("tabindex")||this.element.setAttribute("tabindex","0")},_rtl:function ItemContainer_rtl(){return"boolean"!=typeof this._cachedRTL&&(this._cachedRTL="rtl"===j._getComputedStyle(this.element,null).direction),this._cachedRTL},_setDirectionClass:function ItemContainer_setDirectionClass(){j[this._rtl()?"addClass":"removeClass"](this.element,J._rtlListViewClass)},_forceLayout:function ItemContainer_forceLayout(){this._cachedRTL="rtl"===j._getComputedStyle(this.element,null).direction,this._setDirectionClass()},_getItemPosition:function ItemContainer_getItemPosition(){var x=this.element;return x?W.wrap({left:this._rtl()?x.offsetParent.offsetWidth-x.offsetLeft-x.offsetWidth:x.offsetLeft,top:x.offsetTop,totalWidth:j.getTotalWidth(x),totalHeight:j.getTotalHeight(x),contentWidth:j.getContentWidth(x),contentHeight:j.getContentHeight(x)}):W.cancel},_itemPropertyChange:function ItemContainer_itemPropertyChange(x){if(!this._disposed){var A=x[0].target,V="true"===A.getAttribute("aria-selected");V!==j._isSelectionRendered(this._itemBox)&&(this.selectionDisabled?j._setAttribute(A,"aria-selected",!V):(this.selected=V,V!==this.selected&&j._setAttribute(A,"aria-selected",!V)))}},_updateDraggableAttribute:function ItemContainer_updateDraggableAttribute(){this._itemBox.setAttribute("draggable",this._draggable)},_verifySelectionAllowed:function ItemContainer_verifySelectionAllowed(){if(this._selectionMode!==K.SelectionMode.none&&this._tapBehavior===K.TapBehavior.toggleSelect){var x=this._selection.fireSelectionChanging();return{canSelect:x,canTapSelect:x&&this._tapBehavior===K.TapBehavior.toggleSelect}}return{canSelect:!1,canTapSelect:!1}},_setupInternalTree:function ItemContainer_setupInternalTree(){var x=A.document.createElement("div");x.className=J._itemClass,this._captureProxy=A.document.createElement("div"),this._itemBox=A.document.createElement("div"),this._itemBox.className=J._itemBoxClass;for(var V=this.element.firstChild;V;){var R=V.nextSibling;x.appendChild(V),V=R}this.element.appendChild(this._itemBox),this._itemBox.appendChild(x),this.element.appendChild(this._captureProxy)},_fireInvokeEvent:function ItemContainer_fireInvokeEvent(){if(this.tapBehavior!==K.TapBehavior.none){var x=A.document.createEvent("CustomEvent");x.initCustomEvent($,!0,!1,{}),this.element.dispatchEvent(x)}},_setAriaRole:function ItemContainer_setAriaRole(){var x;this.element.getAttribute("role")&&!this._usingDefaultItemRole||(this._usingDefaultItemRole=!0,x=this.tapBehavior===K.TapBehavior.none&&this.selectionDisabled?"listitem":"option",j._setAttribute(this.element,"role",x))},_writeProfilerMark:function ItemContainer_writeProfilerMark(x){var A="WinJS.UI.ItemContainer:"+this._id+":"+x;U.log&&U.log(A,null,"itemcontainerprofiler")}},{_ClassName:{itemContainer:"win-itemcontainer",vertical:"win-vertical",horizontal:"win-horizontal"}});return V.Class.mix(B,z.DOMEventMixin),B})),_SingleItemSelectionManager:V.Namespace._lazy((function(){return V.Class.define((function SingleItemSelectionManager_ctor(x,A){this._selected=!1,this._element=x,this._itemBox=A}),{selected:{get:function(){return this._selected},set:function(x){x=!!x,this._selected!==x&&this.fireSelectionChanging()&&(this._selected=x,X._ItemEventsHandler.renderSelection(this._itemBox,this._element,x,!0,this._element),this.fireSelectionChanged())}},count:function SingleItemSelectionManager_count(){return this._selected?1:0},getIndices:function SingleItemSelectionManager_getIndices(){},getItems:function SingleItemSelectionManager_getItems(){},getRanges:function SingleItemSelectionManager_getRanges(){},isEverything:function SingleItemSelectionManager_isEverything(){return!1},set:function SingleItemSelectionManager_set(){this.selected=!0},clear:function SingleItemSelectionManager_clear(){this.selected=!1},add:function SingleItemSelectionManager_add(){this.selected=!0},remove:function SingleItemSelectionManager_remove(){this.selected=!1},selectAll:function SingleItemSelectionManager_selectAll(){},fireSelectionChanging:function SingleItemSelectionManager_fireSelectionChanging(){var x=A.document.createEvent("CustomEvent");return x.initCustomEvent(Z,!0,!0,{}),this._element.dispatchEvent(x)},fireSelectionChanged:function ItemContainer_fireSelectionChanged(){var x=A.document.createEvent("CustomEvent");x.initCustomEvent(ee,!0,!1,{}),this._element.dispatchEvent(x)},_isIncluded:function SingleItemSelectionManager_isIncluded(){return this._selected},_getFocused:function SingleItemSelectionManager_getFocused(){return{type:K.ObjectType.item,index:J._INVALID_INDEX}}})}))})})),R("WinJS/Controls/Repeater",["exports","../Core/_Global","../Core/_Base","../Core/_ErrorFromName","../Core/_Events","../Core/_Resources","../Core/_WriteProfilerMark","../BindingList","../BindingTemplate","../Promise","../Utilities/_Control","../Utilities/_Dispose","../Utilities/_ElementUtilities","../Utilities/_Hoverable"],(function repeaterInit(x,A,V,R,D,N,U,B,F,W,H,z,G,j){"use strict";V.Namespace._moduleDefine(x,"WinJS.UI",{Repeater:V.Namespace._lazy((function(){var x=D._createEventProperty;function stringifyItem(x){var V=A.document.createElement("div");return V.textContent=JSON.stringify(x),V}var N={get duplicateConstruction(){return"Invalid argument: Controls may only be instantiated one time for each DOM element"},get asynchronousRender(){return"Top level items must render synchronously"},get repeaterReentrancy(){return"Cannot modify Repeater data until Repeater has commited previous modification."}},U=V.Class.define((function Repeater_ctor(x,V){if(x&&x.winControl)throw new R("WinJS.UI.Repeater.DuplicateConstruction",N.duplicateConstruction);this._element=x||A.document.createElement("div"),this._id=this._element.id||G._uniqueID(this._element),V=V||{},G.addClass(this._element,"win-repeater"),this._render=null,this._modifying=!1,this._disposed=!1,this._element.winControl=this,this._dataListeners={itemchanged:this._dataItemChangedHandler.bind(this),iteminserted:this._dataItemInsertedHandler.bind(this),itemmoved:this._dataItemMovedHandler.bind(this),itemremoved:this._dataItemRemovedHandler.bind(this),reload:this._dataReloadHandler.bind(this)};var D=this._extractInlineTemplate();this._initializing=!0,this.template=V.template||D,this.data=V.data,this._initializing=!1,H._setOptions(this,V,!0),this._repeatedDOM=[],this._renderAllItems(),this.dispatchEvent("itemsloaded",{})}),{element:{get:function(){return this._element}},data:{get:function(){return this._data},set:function(x){this._data&&this._removeDataListeners(),this._data=x||new B.List,this._addDataListeners(),this._initializing||(this._reloadRepeater(!0),this.dispatchEvent("itemsloaded",{}))}},template:{get:function(){return this._template},set:function(x){this._template=x||stringifyItem,this._render=G._syncRenderer(this._template,this.element.tagName),this._initializing||(this._reloadRepeater(!0),this.dispatchEvent("itemsloaded",{}))}},length:{get:function(){return this._repeatedDOM.length}},elementFromIndex:function Repeater_elementFromIndex(x){return this._repeatedDOM[x]},dispose:function Repeater_dispose(){if(!this._disposed){this._disposed=!0,this._removeDataListeners(),this._data=null,this._template=null;for(var x=0,A=this._repeatedDOM.length;x<A;x++)z._disposeElement(this._repeatedDOM[x])}},onitemsloaded:x("itemsloaded"),onitemchanging:x("itemchanging"),onitemchanged:x("itemchanged"),oniteminserting:x("iteminserting"),oniteminserted:x("iteminserted"),onitemmoving:x("itemmoving"),onitemmoved:x("itemmoved"),onitemremoving:x("itemremoving"),onitemremoved:x("itemremoved"),onitemsreloading:x("itemsreloading"),onitemsreloaded:x("itemsreloaded"),_extractInlineTemplate:function Repeater_extractInlineTemplate(){if(this._element.firstElementChild){for(var x=A.document.createElement(this._element.tagName);this._element.firstElementChild;)x.appendChild(this._element.firstElementChild);return new F.Template(x,{extractChild:!0})}},_renderAllItems:function Repeater_renderAllItems(){for(var x=A.document.createDocumentFragment(),V=0,D=this._data.length;V<D;V++){var U=this._render(this._data.getAt(V));if(!U)throw new R("WinJS.UI.Repeater.AsynchronousRender",N.asynchronousRender);x.appendChild(U),this._repeatedDOM.push(U)}this._element.appendChild(x)},_reloadRepeater:function Repeater_reloadRepeater(x){this._unloadRepeatedDOM(x),this._repeatedDOM=[],this._renderAllItems()},_unloadRepeatedDOM:function Repeater_unloadRepeatedDOM(x){for(var A=0,V=this._repeatedDOM.length;A<V;A++){var R=this._repeatedDOM[A];x&&z._disposeElement(R),R.parentElement===this._element&&this._element.removeChild(R)}},_addDataListeners:function Repeater_addDataListeners(){Object.keys(this._dataListeners).forEach(function(x){this._data.addEventListener(x,this._dataListeners[x],!1)}.bind(this))},_beginModification:function Repeater_beginModification(){if(this._modifying)throw new R("WinJS.UI.Repeater.RepeaterModificationReentrancy",N.repeaterReentrancy);this._modifying=!0},_endModification:function Repeater_endModification(){this._modifying=!1},_removeDataListeners:function Repeater_removeDataListeners(){Object.keys(this._dataListeners).forEach(function(x){this._data.removeEventListener(x,this._dataListeners[x],!1)}.bind(this))},_dataItemChangedHandler:function Repeater_dataItemChangedHandler(x){var A;this._beginModification();var V=this._element,D=x.detail.index,U=this._render(x.detail.newValue);if(!U)throw new R("WinJS.UI.Repeater.AsynchronousRender",N.asynchronousRender);this._repeatedDOM[D]&&(x.detail.oldElement=this._repeatedDOM[D]),x.detail.newElement=U,x.detail.setPromise=function setPromise(x){A=x},this.dispatchEvent("itemchanging",x.detail);var B=null;D<this._repeatedDOM.length?(B=this._repeatedDOM[D],V.replaceChild(U,B),this._repeatedDOM[D]=U):(V.appendChild(U),this._repeatedDOM.push(U)),this._endModification(),this.dispatchEvent("itemchanged",x.detail),B&&W.as(A).done(function(){z._disposeElement(B)}.bind(this))},_dataItemInsertedHandler:function Repeater_dataItemInsertedHandler(x){this._beginModification();var A=x.detail.index,V=this._render(x.detail.value);if(!V)throw new R("WinJS.UI.Repeater.AsynchronousRender",N.asynchronousRender);var D=this._element;if(x.detail.affectedElement=V,this.dispatchEvent("iteminserting",x.detail),A<this._repeatedDOM.length){var U=this._repeatedDOM[A];D.insertBefore(V,U)}else D.appendChild(V);this._repeatedDOM.splice(A,0,V),this._endModification(),this.dispatchEvent("iteminserted",x.detail)},_dataItemMovedHandler:function Repeater_dataItemMovedHandler(x){this._beginModification();var A=this._repeatedDOM[x.detail.oldIndex];if(x.detail.affectedElement=A,this.dispatchEvent("itemmoving",x.detail),this._repeatedDOM.splice(x.detail.oldIndex,1)[0],A.parentNode.removeChild(A),x.detail.newIndex<this._data.length-1){var V=this._repeatedDOM[x.detail.newIndex];this._element.insertBefore(A,V),this._repeatedDOM.splice(x.detail.newIndex,0,A)}else this._repeatedDOM.push(A),this._element.appendChild(A);this._endModification(),this.dispatchEvent("itemmoved",x.detail)},_dataItemRemovedHandler:function Repeater_dataItemRemoveHandler(x){var A;this._beginModification();var V=this._repeatedDOM[x.detail.index],R={affectedElement:V,index:x.detail.index,item:x.detail.item,setPromise:function setPromise(x){A=x}};this.dispatchEvent("itemremoving",R),V.parentNode.removeChild(V),this._repeatedDOM.splice(x.detail.index,1),this._endModification(),this.dispatchEvent("itemremoved",R),W.as(A).done(function(){z._disposeElement(V)}.bind(this))},_dataReloadHandler:function Repeater_dataReloadHandler(){var x;this._beginModification();var A=this._repeatedDOM.slice(0),V={affectedElements:A,setPromise:function(A){x=A}};this.dispatchEvent("itemsreloading",V),this._reloadRepeater(!1);var R=this._repeatedDOM.slice(0);this._endModification(),this.dispatchEvent("itemsreloaded",{affectedElements:R}),W.as(x).done(function(){for(var x=0,V=A.length;x<V;x++)z._disposeElement(A[x])}.bind(this))},_writeProfilerMark:function Repeater_writeProfilerMark(x){}},{isDeclarativeControlContainer:!0});return V.Class.mix(U,H.DOMEventMixin),U}))})})),R("require-style!less/styles-semanticzoom",[],(function(){})),R("require-style!less/colors-semanticzoom",[],(function(){})),R("WinJS/Controls/SemanticZoom",["../Core/_Global","../Core/_Base","../Core/_BaseUtils","../Core/_ErrorFromName","../Core/_Events","../Core/_Resources","../Core/_WriteProfilerMark","../Animations","../Animations/_TransitionAnimation","../ControlProcessor","../Promise","../Utilities/_Control","../Utilities/_Dispose","../Utilities/_ElementUtilities","../Utilities/_ElementListUtilities","../Utilities/_Hoverable","./ElementResizeInstrument","require-style!less/styles-semanticzoom","require-style!less/colors-semanticzoom"],(function semanticZoomInit(x,A,V,R,D,N,U,B,F,W,H,z,G,j,q,Q,K){"use strict";A.Namespace.define("WinJS.UI",{SemanticZoom:A.Namespace._lazy((function(){var N=V._browserStyleEquivalents,U={get invalidZoomFactor(){return"Invalid zoomFactor"}};function identity(x){return x}var J=N.transform,X=N.transition.scriptName;function buildTransition(x,A,V){return x+" "+F._animationTimeAdjustment(A)+"s "+V+" "+F._libraryDelay+"ms"}function outgoingElementTransition(){return buildTransition(J.cssName,.333,"ease-in-out")+", "+buildTransition("opacity",.333,"ease-in-out")}function incomingElementTransition(){return buildTransition(J.cssName,.333,"ease-in-out")+", "+buildTransition("opacity",.333,"ease-in-out")}var Y=0,$=1,Z=2,ee=j._MSPointerEvent.MSPOINTER_TYPE_TOUCH||"touch",te=j._MSPointerEvent.MSPOINTER_TYPE_PEN||"pen",ie=j._MSPointerEvent.MSPOINTER_TYPE_MOUSE||"mouse";function getDimension(x,A){return j.convertToPixels(x,A)}function scaleElement(x,A){F.isAnimationEnabled()&&(x.style[J.scriptName]="scale("+A+")")}var ne={x:0,y:0};function onSemanticZoomPropertyChanged(x){var A=x[0].target&&x[0].target.winControl;A&&A instanceof re&&A._onPropertyChanged()}var re=A.Class.define((function SemanticZoom_ctor(A,D){this._disposed=!1;var N=this,B=V.isPhone;if(this._element=A,this._element.winControl=this,j.addClass(this._element,"win-semanticzoom"),this._element.setAttribute("role","ms-semanticzoomcontainer"),this._element.getAttribute("aria-label")||this._element.setAttribute("aria-label",""),D=D||{},this._zoomedOut=!!D.zoomedOut||!!D.initiallyZoomedOut||!1,this._enableButton=!B,B||void 0===D.enableButton||(this._enableButton=!!D.enableButton),this._element.setAttribute("aria-checked",this._zoomedOut.toString()),this._zoomFactor=j._clamp(D.zoomFactor,.2,.8,.65),this.zoomedInItem=D.zoomedInItem,this.zoomedOutItem=D.zoomedOutItem,V.validation&&D._zoomFactor&&D._zoomFactor!==this._zoomFactor)throw new R("WinJS.UI.SemanticZoom.InvalidZoomFactor",U.invalidZoomFactor);this._locked=!!D.locked,this._zoomInProgress=!1,this._isBouncingIn=!1,this._isBouncing=!1,this._zooming=!1,this._aligning=!1,this._gesturing=!1,this._gestureEnding=!1,this._buttonShown=!1,this._shouldFakeTouchCancel="TouchEvent"in x,this._initialize(),this._configure(),this._onResizeBound=this._onResize.bind(this),this._elementResizeInstrument=new K._ElementResizeInstrument,this._element.appendChild(this._elementResizeInstrument.element),this._elementResizeInstrument.addEventListener("resize",this._onResizeBound),j._resizeNotifier.subscribe(this._element,this._onResizeBound);var F=x.document.body.contains(this._element);F&&this._elementResizeInstrument.addedToDom(),j._addInsertedNotifier(this._element);var W=!0;this._element.addEventListener("WinJSNodeInserted",(function(x){W?(W=!1,F||(N._elementResizeInstrument.addedToDom(),N._onResizeBound())):N._onResizeBound()}),!1),new j._MutationObserver(onSemanticZoomPropertyChanged).observe(this._element,{attributes:!0,attributeFilter:["aria-checked"]}),B||(this._element.addEventListener("wheel",this._onWheel.bind(this),!0),this._element.addEventListener("mousewheel",this._onMouseWheel.bind(this),!0),this._element.addEventListener("keydown",this._onKeyDown.bind(this),!0),j._addEventListener(this._element,"pointerdown",this._onPointerDown.bind(this),!0),j._addEventListener(this._element,"pointermove",this._onPointerMove.bind(this),!0),j._addEventListener(this._element,"pointerout",this._onPointerOut.bind(this),!0),j._addEventListener(this._element,"pointercancel",this._onPointerCancel.bind(this),!0),j._addEventListener(this._element,"pointerup",this._onPointerUp.bind(this),!1),this._hiddenElement.addEventListener("gotpointercapture",this._onGotPointerCapture.bind(this),!1),this._hiddenElement.addEventListener("lostpointercapture",this._onLostPointerCapture.bind(this),!1),this._element.addEventListener("click",this._onClick.bind(this),!0),this._canvasIn.addEventListener(V._browserEventEquivalents.transitionEnd,this._onCanvasTransitionEnd.bind(this),!1),this._canvasOut.addEventListener(V._browserEventEquivalents.transitionEnd,this._onCanvasTransitionEnd.bind(this),!1),this._element.addEventListener("MSContentZoom",this._onMSContentZoom.bind(this),!0),this._resetPointerRecords()),this._onResizeImpl(),z._setOptions(this,D,!0),N._setVisibility()}),{element:{get:function(){return this._element}},enableButton:{get:function(){return this._enableButton},set:function(x){var A=!!x;this._enableButton===A||V.isPhone||(this._enableButton=A,A?this._createSemanticZoomButton():this._removeSemanticZoomButton())}},zoomedOut:{get:function(){return this._zoomedOut},set:function(x){this._zoom(!!x,{x:.5*this._sezoClientWidth,y:.5*this._sezoClientHeight},!1,!1,this._zoomedOut&&V.isPhone)}},zoomFactor:{get:function(){return this._zoomFactor},set:function(x){var A=this._zoomFactor,V=j._clamp(x,.2,.8,.65);A!==V&&(this._zoomFactor=V,this.forceLayout())}},locked:{get:function(){return this._locked},set:function(x){this._locked=!!x,x?this._hideSemanticZoomButton():this._displayButton()}},zoomedInItem:{get:function(){return this._zoomedInItem},set:function(x){this._zoomedInItem=x||identity}},zoomedOutItem:{get:function(){return this._zoomedOutItem},set:function(x){this._zoomedOutItem=x||identity}},dispose:function(){this._disposed||(this._disposed=!0,this._elementResizeInstrument.dispose(),j._resizeNotifier.unsubscribe(this._element,this._onResizeBound),G._disposeElement(this._elementIn),G._disposeElement(this._elementOut),this._clearTimeout(this._completeZoomTimer),this._clearTimeout(this._TTFFTimer))},forceLayout:function(){this._onResizeImpl()},_initialize:function(){var A=q.children(this._element);this._elementIn=A[0],this._elementOut=A[1],this._elementIn.style.height=this._elementOut.style.height=this._element.offsetHeight+"px",W.processAll(this._elementIn),W.processAll(this._elementOut),this._viewIn=this._elementIn.winControl.zoomableView,this._viewOut=this._elementOut.winControl.zoomableView,this._element.removeChild(this._elementOut),this._element.removeChild(this._elementIn),this._element.innerHTML="",this._cropViewport=x.document.createElement("div"),this._element.appendChild(this._cropViewport),this._viewportIn=x.document.createElement("div"),this._opticalViewportIn=x.document.createElement("div"),this._viewportOut=x.document.createElement("div"),this._opticalViewportOut=x.document.createElement("div"),this._opticalViewportIn.appendChild(this._viewportIn),this._opticalViewportOut.appendChild(this._viewportOut),this._cropViewport.appendChild(this._opticalViewportIn),this._cropViewport.appendChild(this._opticalViewportOut),this._canvasIn=x.document.createElement("div"),this._canvasOut=x.document.createElement("div"),this._viewportIn.appendChild(this._canvasIn),this._viewportOut.appendChild(this._canvasOut),this._canvasIn.appendChild(this._elementIn),this._canvasOut.appendChild(this._elementOut),this._enableButton&&this._createSemanticZoomButton(),this._hiddenElement=x.document.createElement("div"),this._hiddenElement.tabIndex=-1,this._hiddenElement.visibility="hidden",this._hiddenElement.setAttribute("aria-hidden","true"),this._element.appendChild(this._hiddenElement),j.addClass(this._elementIn,"win-semanticzoom-zoomedinview"),j.addClass(this._elementOut,"win-semanticzoom-zoomedoutview"),this._setLayout(this._element,"relative","hidden"),this._setLayout(this._cropViewport,"absolute","hidden"),this._setLayout(this._opticalViewportIn,"absolute","auto"),this._setLayout(this._opticalViewportOut,"absolute","auto"),this._setLayout(this._viewportIn,"absolute","hidden"),this._setLayout(this._viewportOut,"absolute","hidden"),this._setLayout(this._canvasIn,"absolute","hidden"),this._setLayout(this._canvasOut,"absolute","hidden"),this._setupOpticalViewport(this._opticalViewportIn),this._setupOpticalViewport(this._opticalViewportOut),this._viewportIn.style["-ms-overflow-style"]="-ms-autohiding-scrollbar",this._viewportOut.style["-ms-overflow-style"]="-ms-autohiding-scrollbar",this._elementIn.style.position="absolute",this._elementOut.style.position="absolute"},_createSemanticZoomButton:function(){this._sezoButton=x.document.createElement("button"),this._sezoButton.setAttribute("type","button"),this._sezoButton.className="win-semanticzoom-button win-semanticzoom-button-location win-button",this._sezoButton.tabIndex=-1,this._sezoButton.style.visibility="hidden",this._sezoButton.setAttribute("aria-hidden",!0),this._element.appendChild(this._sezoButton),this._sezoButton.addEventListener("click",this._onSeZoButtonZoomOutClick.bind(this),!1),this._element.addEventListener("scroll",this._onSeZoChildrenScroll.bind(this),!0),j._addEventListener(this._element,"pointermove",this._onPenHover.bind(this),!1)},_removeSemanticZoomButton:function(){this._sezoButton&&(this._element.removeChild(this._sezoButton),this._sezoButton=null)},_configure:function(){var x=this._viewIn.getPanAxis(),A=this._viewOut.getPanAxis(),R=V.isPhone;if(this._pansHorizontallyIn="horizontal"===x||"both"===x,this._pansVerticallyIn="vertical"===x||"both"===x,this._pansHorizontallyOut="horizontal"===A||"both"===A,this._pansVerticallyOut="vertical"===A||"both"===A,!this._zoomInProgress){var D=1/this._zoomFactor-1;this._setLayout(this._elementIn,"absolute","visible"),this._setLayout(this._elementOut,"absolute","visible"),this._viewIn.configureForZoom(!1,!this._zoomedOut,this._zoomFromCurrent.bind(this,!0),D),this._viewOut.configureForZoom(!0,this._zoomedOut,this._zoomFromCurrent.bind(this,!1),1.05-1),this._pinching=!1,this._pinchGesture=0,this._canvasLeftIn=0,this._canvasTopIn=0,this._canvasLeftOut=0,this._canvasTopOut=0,R||(this._zoomedOut?scaleElement(this._canvasIn,this._zoomFactor):scaleElement(this._canvasOut,1/this._zoomFactor));var U=this._opticalViewportIn.style,B=this._opticalViewportOut.style,W=this._canvasIn.style,H=this._canvasOut.style;W.opacity=this._zoomedOut&&!R?0:1,H.opacity=this._zoomedOut?1:0,R&&(W.zIndex=1,H.zIndex=2),F.isAnimationEnabled()&&!R&&(U[N["transition-property"].scriptName]=J.cssName,U[N["transition-duration"].scriptName]="0s",U[N["transition-timing-function"].scriptName]="linear",B[N["transition-property"].scriptName]=J.cssName,B[N["transition-duration"].scriptName]="0s",B[N["transition-timing-function"].scriptName]="linear")}},_onPropertyChanged:function(){var x="true"===this._element.getAttribute("aria-checked");this._zoomedOut!==x&&(this.zoomedOut=x)},_onResizeImpl:function(){this._resizing=this._resizing||0,this._resizing++;try{var positionElement=function(x,A,V,R,D){var N=x.style;N.left=A+"px",N.top=V+"px",N.width=R+"px",N.height=D+"px"},x=j._getComputedStyle(this._element,null),A=parseFloat(x.width),V=parseFloat(x.height),R=getDimension(this._element,x.paddingLeft),D=getDimension(this._element,x.paddingRight),N=getDimension(this._element,x.paddingTop),U=getDimension(this._element,x.paddingBottom),B=A-R-D,F=V-N-U,W=1/this._zoomFactor;if(this._viewportWidth===B&&this._viewportHeight===F)return;this._sezoClientHeight=V,this._sezoClientWidth=A,this._viewportWidth=B,this._viewportHeight=F,this._configure();var H=2*W-1,z=Math.min(4096,(this._pansHorizontallyIn?H:1)*B),G=Math.min(4096,(this._pansVerticallyIn?H:1)*F);this._canvasLeftIn=.5*(z-B),this._canvasTopIn=.5*(G-F),positionElement(this._cropViewport,R,N,B,F),positionElement(this._viewportIn,0,0,B,F),positionElement(this._opticalViewportIn,0,0,B,F),positionElement(this._canvasIn,-this._canvasLeftIn,-this._canvasTopIn,z,G),positionElement(this._elementIn,this._canvasLeftIn,this._canvasTopIn,B,F);var q=(this._pansHorizontallyOut?1.1:1)*B,Q=(this._pansVerticallyOut?1.1:1)*F;this._canvasLeftOut=.5*(q-B),this._canvasTopOut=.5*(Q-F),positionElement(this._viewportOut,0,0,B,F),positionElement(this._opticalViewportOut,0,0,B,F),positionElement(this._canvasOut,-this._canvasLeftOut,-this._canvasTopOut,q,Q),positionElement(this._elementOut,this._canvasLeftOut,this._canvasTopOut,B,F)}finally{this._resizing--}},_onResize:function(){this._resizing||this._onResizeImpl()},_onMouseMove:function(x){if(this._zooming||!this._lastMouseX&&!this._lastMouseY||x.screenX===this._lastMouseX&&x.screenY===this._lastMouseY)return this._lastMouseX=x.screenX,void(this._lastMouseY=x.screenY);Math.abs(x.screenX-this._lastMouseX)<=8&&Math.abs(x.screenY-this._lastMouseY)<=8||(this._lastMouseX=x.screenX,this._lastMouseY=x.screenY,this._displayButton())},_displayButton:function(){if(Q.isHoverable){x.clearTimeout(this._dismissButtonTimer),this._showSemanticZoomButton();var A=this;this._dismissButtonTimer=x.setTimeout((function(){A._hideSemanticZoomButton()}),F._animationTimeAdjustment(3e3))}},_showSemanticZoomButton:function(){this._disposed||this._buttonShown||!this._sezoButton||this._zoomedOut||this._locked||(B.fadeIn(this._sezoButton),this._sezoButton.style.visibility="visible",this._buttonShown=!0)},_hideSemanticZoomButton:function(x){if(!this._disposed&&this._buttonShown&&this._sezoButton){if(x)this._sezoButton.style.visibility="hidden";else{var A=this;B.fadeOut(this._sezoButton).then((function(){A._sezoButton.style.visibility="hidden"}))}this._buttonShown=!1}},_onSeZoChildrenScroll:function(x){x.target!==this.element&&this._hideSemanticZoomButton(!0)},_onWheel:function(x){x.ctrlKey&&(this._zoom(x.deltaY>0,this._getPointerLocation(x)),x.stopPropagation(),x.preventDefault())},_onMouseWheel:function(x){x.ctrlKey&&(this._zoom(x.wheelDelta<0,this._getPointerLocation(x)),x.stopPropagation(),x.preventDefault())},_onPenHover:function(x){x.pointerType===te&&0===x.buttons&&this._displayButton()},_onSeZoButtonZoomOutClick:function(){this._hideSemanticZoomButton(),this._zoom(!0,{x:.5*this._sezoClientWidth,y:.5*this._sezoClientHeight},!1)},_onKeyDown:function(x){var A=!1;if(x.ctrlKey){var V=j.Key;switch(x.keyCode){case V.add:case V.equal:case 61:this._zoom(!1),A=!0;break;case V.subtract:case V.dash:case 173:this._zoom(!0),A=!0}}A&&(x.stopPropagation(),x.preventDefault())},_createPointerRecord:function(x,A){var V=this._getPointerLocation(x),R={};return R.startX=R.currentX=V.x,R.startY=R.currentY=V.y,R.fireCancelOnPinch=A,this._pointerRecords[x.pointerId]=R,this._pointerCount=Object.keys(this._pointerRecords).length,R},_deletePointerRecord:function(x){var A=this._pointerRecords[x];return delete this._pointerRecords[x],this._pointerCount=Object.keys(this._pointerRecords).length,2!==this._pointerCount&&(this._pinching=!1),A},_fakeCancelOnPointer:function(A){var V=x.document.createEvent("UIEvent");V.initUIEvent("touchcancel",!0,!0,x,0),V.touches=A.touches,V.targetTouches=A.targetTouches,V.changedTouches=[A._currentTouch],V._fakedBySemanticZoom=!0,A.target.dispatchEvent(V)},_handlePointerDown:function(x){this._createPointerRecord(x,!1);for(var A=Object.keys(this._pointerRecords),V=0,R=A.length;V<R;V++)try{j._setPointerCapture(this._hiddenElement,A[V]||0)}catch(x){return void this._resetPointerRecords()}x.stopImmediatePropagation(),x.preventDefault()},_handleFirstPointerDown:function(x){this._resetPointerRecords(),this._createPointerRecord(x,this._shouldFakeTouchCancel),this._startedZoomedOut=this._zoomedOut},_onClick:function(x){x.target!==this._element&&this._isBouncing&&x.stopImmediatePropagation()},_onPointerDown:function(x){x.pointerType===ee&&(0===this._pointerCount?this._handleFirstPointerDown(x):this._handlePointerDown(x))},_onPointerMove:function(x){if(x.pointerType!==ie&&x.pointerType!==te){if(x.pointerType===ee){var A=this._pointerRecords[x.pointerId],V=this._getPointerLocation(x);if(A){if(A.currentX=V.x,A.currentY=V.y,2===this._pointerCount){this._pinching=!0;var R=Object.keys(this._pointerRecords),D=this._pointerRecords[R[0]],N=this._pointerRecords[R[1]];this._currentMidPoint=midpoint(D,N);var U=function distance(x,A,V,R){return Math.sqrt((V-x)*(V-x)+(R-A)*(R-A))}(D.currentX,D.currentY,N.currentX,N.currentY),B=this;this._updatePinchDistanceRecords(U),this._pinchDistanceCount>=2&&(this._zooming||this._isBouncing||function(x){var A=x?Z:$,V=x?B._pinchedDirection===$&&!B._zoomingOut:B._pinchedDirection===Z&&B._zoomingOut,R=x?!B._zoomedOut:B._zoomedOut;if(B._pinchedDirection===Y)R?(B._isBouncingIn=!1,B._zoom(x,midpoint(D,N),!0),B._pinchedDirection=A):B._isBouncingIn||B._playBounce(!0,midpoint(D,N));else if(V){var U=B._lastPinchDistance/B._lastPinchStartDistance,F=B._lastLastPinchDistance/B._lastPinchDistance;(x&&U>.2||!x&&F>.45)&&(B._zoom(x,midpoint(D,N),!0),B._pinchedDirection=A)}}(this._lastPinchDirection===Z))}else this._pointerCount>2&&this._resetPinchDistanceRecords();this._pointerCount>=2&&(A.fireCancelOnPinch&&(this._fakeCancelOnPointer(x,A),A.fireCancelOnPinch=!1),x.stopImmediatePropagation(),x.preventDefault()),2!==this._pointerCount&&this._isBouncingIn&&this._playBounce(!1)}}}else this._onMouseMove(x);function midpoint(x,A){return{x:.5*(x.currentX+A.currentX)|0,y:.5*(x.currentY+A.currentY)|0}}},_onPointerOut:function(x){x.pointerType===ee&&x.target===this._element&&this._completePointerUp(x,!1)},_onPointerUp:function(x){this._releasePointerCapture(x),this._completePointerUp(x,!0),this._completeZoomingIfTimeout()},_onPointerCancel:function(x){x._fakedBySemanticZoom||(this._releasePointerCapture(x),this._completePointerUp(x,!1),this._completeZoomingIfTimeout())},_onGotPointerCapture:function(x){var A=this._pointerRecords[x.pointerId];A&&(A.dirty=!1)},_onLostPointerCapture:function(x){var A=this._pointerRecords[x.pointerId];if(A){A.dirty=!0;var V=this;H.timeout(50).then((function(){A.dirty&&V._completePointerUp(x,!1)}))}},_onMSContentZoom:function(x){var A=x.target;if(A===this._opticalViewportIn||A===this._opticalViewportOut){var V=A.msContentZoomFactor<.995,R=A.msContentZoomFactor>1.005;!V||this._zoomedOut||this._zoomingOut?R&&(this._zoomedOut||this._zoomingOut)&&(this.zoomedOut=!1):this.zoomedOut=!0}},_updatePinchDistanceRecords:function(x){var A=this;function updatePinchDirection(V){A._lastPinchDirection===V?A._pinchDistanceCount++:(A._pinchGesture++,A._pinchDistanceCount=0,A._lastPinchStartDistance=x),A._lastPinchDirection=V,A._lastPinchDistance=x,A._lastLastPinchDistance=A._lastPinchDistance}-1===this._lastPinchDistance?this._lastPinchDistance=x:this._lastPinchDistance!==x&&(this._lastPinchDistance>x?updatePinchDirection(Z):updatePinchDirection($))},_zoomFromCurrent:function(x){this._zoom(x,null,!1,!0)},_zoom:function(x,A,R,D,N){if(this._clearTimeout(this._completeZoomTimer),this._clearTimeout(this._TTFFTimer),this._hideSemanticZoomButton(),this._resetPinchDistanceRecords(),!this._locked&&!this._gestureEnding)if(this._zoomInProgress){if(this._gesturing===!R)return;x!==this._zoomingOut&&this._startAnimations(x)}else if(x!==this._zoomedOut){this._zooming=!0,this._aligning=!0,this._gesturing=!!R,A&&(x?this._viewIn:this._viewOut).setCurrentItem(A.x,A.y),this._zoomInProgress=!0,(x?this._opticalViewportOut:this._opticalViewportIn).style.visibility="visible",x&&V.isPhone&&(this._canvasOut.style.opacity=1);var U=this._viewIn.beginZoom(),B=this._viewOut.beginZoom(),F=null;if((U||B)&&V.isPhone&&(F=H.join([U,B])),D&&!N){var W=this;(x?this._viewIn:this._viewOut).getCurrentItem().then((function(A){var V=A.position;W._prepareForZoom(x,{x:W._rtl()?W._sezoClientWidth-V.left-.5*V.width:V.left+.5*V.width,y:V.top+.5*V.height},H.wrap(A),F)}))}else this._prepareForZoom(x,A||{},null,F,N)}},_prepareForZoom:function(x,A,V,R,D){var U=this,B=A.x,F=A.y;"number"==typeof B&&this._pansHorizontallyIn&&this._pansHorizontallyOut||(B=.5*this._sezoClientWidth),"number"==typeof F&&this._pansVerticallyIn&&this._pansVerticallyOut||(F=.5*this._sezoClientHeight),function setZoomCenters(x,A){U._canvasIn.style[N["transform-origin"].scriptName]=U._canvasLeftIn+B-x.x+"px "+(U._canvasTopIn+F-x.y)+"px",U._canvasOut.style[N["transform-origin"].scriptName]=U._canvasLeftOut+B-A.x+"px "+(U._canvasTopOut+F-A.y)+"px"}(ne,ne),D?this._aligning=!1:this._alignViewsPromise=this._alignViews(x,B,F,V).then((function(){U._aligning=!1,U._gestureEnding=!1,U._alignViewsPromise=null,U._zooming||U._gesturing||U._completeZoom()})),this._zoomingOut=x,j._getComputedStyle(this._canvasIn).opacity,j._getComputedStyle(this._canvasOut).opacity,this._startAnimations(x,R)},_alignViews:function(x,A,V,R){var D=1-this._zoomFactor,N=D*(this._rtl()?this._viewportWidth-A:A),U=D*V,B=this;if(x){var F=R||this._viewIn.getCurrentItem();if(F)return F.then((function(x){var A=x.position,V={left:A.left*B._zoomFactor+N,top:A.top*B._zoomFactor+U,width:A.width*B._zoomFactor,height:A.height*B._zoomFactor};return B._viewOut.positionItem(B._zoomedOutItem(x.item),V)}))}else{var W=R||this._viewOut.getCurrentItem();if(W)return W.then((function(x){var A=x.position,V={left:(A.left-N)/B._zoomFactor,top:(A.top-U)/B._zoomFactor,width:A.width/B._zoomFactor,height:A.height/B._zoomFactor};return B._viewIn.positionItem(B._zoomedInItem(x.item),V)}))}return new H((function(x){x({x:0,y:0})}))},_startAnimations:function(x,A){this._zoomingOut=x;var R=V.isPhone;if(F.isAnimationEnabled()&&!R&&(this._canvasIn.style[X]=x?outgoingElementTransition():incomingElementTransition(),this._canvasOut.style[X]=x?incomingElementTransition():outgoingElementTransition()),R||(scaleElement(this._canvasIn,x?this._zoomFactor:1),scaleElement(this._canvasOut,x?1:1/this._zoomFactor)),this._canvasIn.style.opacity=x&&!R?0:1,R&&!x||(this._canvasOut.style.opacity=x?1:0),F.isAnimationEnabled())if(A){var D=this,N=function onComplete(){D._canvasIn.style[J.scriptName]="",D._canvasOut.style[J.scriptName]="",D._onZoomAnimationComplete()};A.then(N,N)}else this.setTimeoutAfterTTFF(this._onZoomAnimationComplete.bind(this),F._animationTimeAdjustment(333));else this._zooming=!1,this._canvasIn.style[J.scriptName]="",this._canvasOut.style[J.scriptName]="",this._completeZoom()},_onBounceAnimationComplete:function(){this._isBouncingIn||this._disposed||this._completeZoom()},_onZoomAnimationComplete:function(){this._disposed||(this._zooming=!1,this._aligning||this._gesturing||this._gestureEnding||this._completeZoom())},_onCanvasTransitionEnd:function(x){this._disposed||(x.target!==this._canvasOut&&x.target!==this._canvasIn||!this._isBouncing?x.target===this._canvasIn&&x.propertyName===J.cssName&&this._onZoomAnimationComplete():this._onBounceAnimationComplete())},_clearTimeout:function(A){A&&x.clearTimeout(A)},_completePointerUp:function(x,A){if(!this._disposed){var V=x.pointerId;if(this._pointerRecords[V]&&(this._deletePointerRecord(V),this._isBouncingIn&&this._playBounce(!1),A&&this._pinchedDirection!==Y&&x.stopImmediatePropagation(),0===this._pointerCount)){if(1===this._pinchGesture&&!this._zooming&&this._lastPinchDirection!==Y&&this._pinchDistanceCount<2)return this._zoom(this._lastPinchDirection===Z,this._currentMidPoint,!1),this._pinchGesture=0,void this._attemptRecordReset();this._pinchedDirection!==Y&&(this._gesturing=!1,this._aligning||this._zooming||this._completeZoom()),this._pinchGesture=0,this._attemptRecordReset()}}},setTimeoutAfterTTFF:function(A,V){var R=this;R._TTFFTimer=x.setTimeout((function(){this._disposed||(R._TTFFTimer=x.setTimeout(A,V))}),50)},_completeZoomingIfTimeout:function(){if(0===this._pointerCount){var A=this;(this._zoomInProgress||this._isBouncing)&&(A._completeZoomTimer=x.setTimeout((function(){A._completeZoom()}),F._animationTimeAdjustment(1e3)))}},_completeZoom:function(){if(!this._disposed){if(this._isBouncing)return this._zoomedOut?this._viewOut.endZoom(!0):this._viewIn.endZoom(!0),void(this._isBouncing=!1);if(this._zoomInProgress){this._aligning=!1,this._alignViewsPromise&&this._alignViewsPromise.cancel(),this._clearTimeout(this._completeZoomTimer),this._clearTimeout(this._TTFFTimer),this._gestureEnding=!1,this[this._zoomingOut?"_opticalViewportOut":"_opticalViewportIn"].msContentZoomFactor=1,this._viewIn.endZoom(!this._zoomingOut),this._viewOut.endZoom(this._zoomingOut),this._canvasIn.style.opacity=this._zoomingOut&&!V.isPhone?0:1,this._canvasOut.style.opacity=this._zoomingOut?1:0,this._zoomInProgress=!1;var A=!1;if(this._zoomingOut!==this._zoomedOut&&(this._zoomedOut=!!this._zoomingOut,this._element.setAttribute("aria-checked",this._zoomedOut.toString()),A=!0),this._setVisibility(),A){var R=x.document.createEvent("CustomEvent");R.initCustomEvent("zoomchanged",!0,!0,this._zoomedOut),this._element.dispatchEvent(R),this._isActive&&j._setActive(this._zoomedOut?this._elementOut:this._elementIn)}}}},_isActive:function(){var A=x.document.activeElement;return this._element===A||this._element.contains(A)},_setLayout:function(x,A,V){var R=x.style;R.position=A,R.overflow=V},_setupOpticalViewport:function(x){x.style["-ms-overflow-style"]="none",V.isPhone||(x.style["-ms-content-zooming"]="zoom",x.style["-ms-content-zoom-limit-min"]="99%",x.style["-ms-content-zoom-limit-max"]="101%",x.style["-ms-content-zoom-snap-points"]="snapList(100%)",x.style["-ms-content-zoom-snap-type"]="mandatory")},_setVisibility:function(){function setVisibility(x,A){x.style.visibility=A?"visible":"hidden"}setVisibility(this._opticalViewportIn,!this._zoomedOut||V.isPhone),setVisibility(this._opticalViewportOut,this._zoomedOut),this._opticalViewportIn.setAttribute("aria-hidden",!!this._zoomedOut),this._opticalViewportOut.setAttribute("aria-hidden",!this._zoomedOut)},_resetPointerRecords:function(){this._pinchedDirection=Y,this._pointerCount=0,this._pointerRecords={},this._resetPinchDistanceRecords()},_releasePointerCapture:function(x){var A=x.pointerId;try{j._releasePointerCapture(this._hiddenElement,A)}catch(x){}},_attemptRecordReset:function(){this._recordResetPromise&&this._recordResetPromise.cancel();var x=this;this._recordResetPromise=H.timeout(50).then((function(){0===x._pointerCount&&(x._resetPointerRecords(),x._recordResetPromise=null)}))},_resetPinchDistanceRecords:function(){this._lastPinchDirection=Y,this._lastPinchDistance=-1,this._lastLastPinchDistance=-1,this._pinchDistanceCount=0,this._currentMidPoint=null},_getPointerLocation:function(x){var A={left:0,top:0};try{A=this._element.getBoundingClientRect()}catch(x){}var V=j._getComputedStyle(this._element,null),R=getDimension(this._element,V.paddingLeft),D=getDimension(this._element,V.paddingTop),N=getDimension(this._element,V.borderLeftWidth);return{x:+x.clientX===x.clientX?x.clientX-A.left-R-N:0,y:+x.clientY===x.clientY?x.clientY-A.top-D-D:0}},_playBounce:function(x,A){if(F.isAnimationEnabled()&&this._isBouncingIn!==x){this._clearTimeout(this._completeZoomTimer),this._clearTimeout(this._TTFFTimer),this._isBouncing=!0,this._isBouncingIn=x,x?this._bounceCenter=A:this._aligned=!0;var V=this._zoomedOut?this._canvasOut:this._canvasIn,R=this._zoomedOut?this._canvasLeftOut:this._canvasLeftIn,D=this._zoomedOut?this._canvasTopOut:this._canvasTopIn;V.style[N["transform-origin"].scriptName]=R+this._bounceCenter.x+"px "+(D+this._bounceCenter.y)+"px",V.style[X]=x?function bounceInTransition(){return buildTransition(J.cssName,.333,"cubic-bezier(0.1,0.9,0.2,1)")}():function bounceBackTransition(){return buildTransition(J.cssName,.333,"cubic-bezier(0.1,0.9,0.2,1)")}(),this._zoomedOut?this._viewOut.beginZoom():this._viewIn.beginZoom(),scaleElement(V,x?this._zoomedOut?.95:1.05:1),this.setTimeoutAfterTTFF(this._onBounceAnimationComplete.bind(this),F._animationTimeAdjustment(333))}},_rtl:function(){return"rtl"===j._getComputedStyle(this._element,null).direction},_pinching:{set:function(x){this._viewIn.pinching=x,this._viewOut.pinching=x}}});return A.Class.mix(re,D.createEventProperties("zoomchanged")),A.Class.mix(re,z.DOMEventMixin),re}))})})),R("require-style!less/styles-lightdismissservice",[],(function(){}));var D=this.__extends||function(x,A){for(var V in A)A.hasOwnProperty(V)&&(x[V]=A[V]);function __(){this.constructor=x}__.prototype=A.prototype,x.prototype=new __};return R("WinJS/_LightDismissService",["require","exports","./Application","./Core/_Base","./Core/_BaseUtils","./Utilities/_ElementUtilities","./Core/_Global","./Utilities/_KeyboardBehavior","./Core/_Log","./Core/_Resources"],(function(x,A,V,R,N,U,B,F,W,H){x(["require-style!less/styles-lightdismissservice"]);var z={get closeOverlay(){return H._getWinJSString("ui/closeOverlay").value}};A._ClassNames={_clickEater:"win-clickeater"},A.LightDismissalReasons={tap:"tap",lostFocus:"lostFocus",escape:"escape",hardwareBackButton:"hardwareBackButton",windowResize:"windowResize",windowBlur:"windowBlur"},A.DismissalPolicies={light:function LightDismissalPolicies_light_onShouldLightDismiss(x){switch(x.reason){case A.LightDismissalReasons.tap:case A.LightDismissalReasons.escape:return!!x.active||(x.stopPropagation(),!1);case A.LightDismissalReasons.hardwareBackButton:return x.active?(x.preventDefault(),!0):(x.stopPropagation(),!1);case A.LightDismissalReasons.lostFocus:case A.LightDismissalReasons.windowResize:case A.LightDismissalReasons.windowBlur:return!0}},modal:function LightDismissalPolicies_modal_onShouldLightDismiss(x){switch(x.stopPropagation(),x.reason){case A.LightDismissalReasons.tap:case A.LightDismissalReasons.lostFocus:case A.LightDismissalReasons.windowResize:case A.LightDismissalReasons.windowBlur:return!1;case A.LightDismissalReasons.escape:return x.active;case A.LightDismissalReasons.hardwareBackButton:return x.preventDefault(),x.active}},sticky:function LightDismissalPolicies_sticky_onShouldLightDismiss(x){return x.stopPropagation(),!1}};var G="keyDown",j="keyUp",q="keyPress",Q=function(){function AbstractDismissableElement(x){this.element=x.element,this.element.tabIndex=x.tabIndex,this.onLightDismiss=x.onLightDismiss,x.onTakeFocus&&(this.onTakeFocus=x.onTakeFocus),x.onShouldLightDismiss&&(this.onShouldLightDismiss=x.onShouldLightDismiss),this._ldeOnKeyDownBound=this._ldeOnKeyDown.bind(this),this._ldeOnKeyUpBound=this._ldeOnKeyUp.bind(this),this._ldeOnKeyPressBound=this._ldeOnKeyPress.bind(this)}return AbstractDismissableElement.prototype.restoreFocus=function(){var x=B.document.activeElement;if(x&&this.containsElement(x))return this._ldeCurrentFocus=x,!0;var A=!F._keyboardSeenLast;return this._ldeCurrentFocus&&this.containsElement(this._ldeCurrentFocus)&&U._tryFocusOnAnyElement(this._ldeCurrentFocus,A)},AbstractDismissableElement.prototype._ldeOnKeyDown=function(x){this._ldeService.keyDown(this,x)},AbstractDismissableElement.prototype._ldeOnKeyUp=function(x){this._ldeService.keyUp(this,x)},AbstractDismissableElement.prototype._ldeOnKeyPress=function(x){this._ldeService.keyPress(this,x)},AbstractDismissableElement.prototype.setZIndex=function(x){this.element.style.zIndex=x},AbstractDismissableElement.prototype.getZIndexCount=function(){return 1},AbstractDismissableElement.prototype.containsElement=function(x){return this.element.contains(x)},AbstractDismissableElement.prototype.onTakeFocus=function(x){this.restoreFocus()||U._focusFirstFocusableElement(this.element,x)||U._tryFocusOnAnyElement(this.element,x)},AbstractDismissableElement.prototype.onFocus=function(x){this._ldeCurrentFocus=x},AbstractDismissableElement.prototype.onShow=function(x){this._ldeService=x,this.element.addEventListener("keydown",this._ldeOnKeyDownBound),this.element.addEventListener("keyup",this._ldeOnKeyUpBound),this.element.addEventListener("keypress",this._ldeOnKeyPressBound)},AbstractDismissableElement.prototype.onHide=function(){this._ldeCurrentFocus=null,this._ldeService=null,this.element.removeEventListener("keydown",this._ldeOnKeyDownBound),this.element.removeEventListener("keyup",this._ldeOnKeyUpBound),this.element.removeEventListener("keypress",this._ldeOnKeyPressBound)},AbstractDismissableElement.prototype.onKeyInStack=function(x){},AbstractDismissableElement.prototype.onShouldLightDismiss=function(x){return!1},AbstractDismissableElement.prototype.onLightDismiss=function(x){},AbstractDismissableElement}(),K=function(x){function LightDismissableElement(){x.apply(this,arguments)}return D(LightDismissableElement,x),LightDismissableElement.prototype.onKeyInStack=function(x){},LightDismissableElement.prototype.onShouldLightDismiss=function(x){return A.DismissalPolicies.light(x)},LightDismissableElement}(Q);A.LightDismissableElement=K;var J=function(x){function ModalElement(){x.apply(this,arguments)}return D(ModalElement,x),ModalElement.prototype.onKeyInStack=function(x){x.stopPropagation()},ModalElement.prototype.onShouldLightDismiss=function(x){return A.DismissalPolicies.modal(x)},ModalElement}(Q);A.ModalElement=J;var X=function(){function LightDismissableBody(){}return LightDismissableBody.prototype.setZIndex=function(x){},LightDismissableBody.prototype.getZIndexCount=function(){return 1},LightDismissableBody.prototype.containsElement=function(x){return B.document.body.contains(x)},LightDismissableBody.prototype.onTakeFocus=function(x){this.currentFocus&&this.containsElement(this.currentFocus)&&U._tryFocusOnAnyElement(this.currentFocus,x)},LightDismissableBody.prototype.onFocus=function(x){this.currentFocus=x},LightDismissableBody.prototype.onShow=function(x){},LightDismissableBody.prototype.onHide=function(){this.currentFocus=null},LightDismissableBody.prototype.onKeyInStack=function(x){},LightDismissableBody.prototype.onShouldLightDismiss=function(x){return!1},LightDismissableBody.prototype.onLightDismiss=function(x){},LightDismissableBody}(),Y=new(function(){function LightDismissService(){this._debug=!1,this._clients=[],this._notifying=!1,this._bodyClient=new X,this._updateDom_rendered={serviceActive:!1},this._clickEaterEl=this._createClickEater(),this._onBeforeRequestingFocusOnKeyboardInputBound=this._onBeforeRequestingFocusOnKeyboardInput.bind(this),this._onFocusInBound=this._onFocusIn.bind(this),this._onKeyDownBound=this._onKeyDown.bind(this),this._onWindowResizeBound=this._onWindowResize.bind(this),this._onClickEaterPointerUpBound=this._onClickEaterPointerUp.bind(this),this._onClickEaterPointerCancelBound=this._onClickEaterPointerCancel.bind(this),V.addEventListener("backclick",this._onBackClick.bind(this)),B.window.addEventListener("blur",this._onWindowBlur.bind(this)),this.shown(this._bodyClient)}return LightDismissService.prototype.shown=function(x){-1===this._clients.indexOf(x)&&(this._clients.push(x),x.onShow(this),this._updateDom())},LightDismissService.prototype.hidden=function(x){var A=this._clients.indexOf(x);-1!==A&&(this._clients.splice(A,1),x.setZIndex(""),x.onHide(),this._updateDom())},LightDismissService.prototype.updated=function(x){this._updateDom()},LightDismissService.prototype.keyDown=function(x,A){A.keyCode===U.Key.escape?this._escapePressed(A):this._dispatchKeyboardEvent(x,G,A)},LightDismissService.prototype.keyUp=function(x,A){this._dispatchKeyboardEvent(x,j,A)},LightDismissService.prototype.keyPress=function(x,A){this._dispatchKeyboardEvent(x,q,A)},LightDismissService.prototype.isShown=function(x){return-1!==this._clients.indexOf(x)},LightDismissService.prototype.isTopmost=function(x){return x===this._clients[this._clients.length-1]},LightDismissService.prototype._setDebug=function(x){this._debug=x},LightDismissService.prototype._updateDom=function(x){var A=!!(x=x||{}).activeDismissableNeedsFocus,R=this._updateDom_rendered;if(!this._notifying){var D=this._clients.length>1;if(D!==R.serviceActive){if(D)V.addEventListener("beforerequestingfocusonkeyboardinput",this._onBeforeRequestingFocusOnKeyboardInputBound),U._addEventListener(B.document.documentElement,"focusin",this._onFocusInBound),B.document.documentElement.addEventListener("keydown",this._onKeyDownBound),B.window.addEventListener("resize",this._onWindowResizeBound),this._bodyClient.currentFocus=B.document.activeElement,B.document.body.appendChild(this._clickEaterEl);else{V.removeEventListener("beforerequestingfocusonkeyboardinput",this._onBeforeRequestingFocusOnKeyboardInputBound),U._removeEventListener(B.document.documentElement,"focusin",this._onFocusInBound),B.document.documentElement.removeEventListener("keydown",this._onKeyDownBound),B.window.removeEventListener("resize",this._onWindowResizeBound);var N=this._clickEaterEl.parentNode;N&&N.removeChild(this._clickEaterEl)}R.serviceActive=D}var W=0,H=1001;this._clients.forEach((function(x,A){var V=parseInt(H.toString())+parseInt(W.toString());x.setZIndex(""+V),H=V,W=parseInt(x.getZIndexCount().toString())+1})),D&&(this._clickEaterEl.style.zIndex=""+(H-1));var z=this._clients.length>0?this._clients[this._clients.length-1]:null;if(this._activeDismissable!==z&&(this._activeDismissable=z,A=!0),A){var G=!F._keyboardSeenLast;this._activeDismissable&&this._activeDismissable.onTakeFocus(G)}}},LightDismissService.prototype._dispatchKeyboardEvent=function(x,A,V){var R=this._clients.indexOf(x);if(-1!==R)for(var D={type:A,keyCode:V.keyCode,propagationStopped:!1,stopPropagation:function(){this.propagationStopped=!0,V.stopPropagation()}},N=this._clients.slice(0,R+1),U=N.length-1;U>=0&&!D.propagationStopped;U--)N[U].onKeyInStack(D)},LightDismissService.prototype._dispatchLightDismiss=function(x,A,V){if(this._notifying)W.log&&W.log('_LightDismissService ignored dismiss trigger to avoid re-entrancy: "'+x+'"',"winjs _LightDismissService","warning");else if(0!==(A=A||this._clients.slice(0)).length){this._notifying=!0;for(var R={reason:x,active:!1,_stop:!1,stopPropagation:function(){this._stop=!0},_doDefault:!0,preventDefault:function(){this._doDefault=!1}},D=A.length-1;D>=0&&!R._stop;D--)R.active=this._activeDismissable===A[D],A[D].onShouldLightDismiss(R)&&A[D].onLightDismiss(R);return this._notifying=!1,this._updateDom(V),R._doDefault}},LightDismissService.prototype._onBeforeRequestingFocusOnKeyboardInput=function(x){return!0},LightDismissService.prototype._clickEaterTapped=function(){this._dispatchLightDismiss(A.LightDismissalReasons.tap)},LightDismissService.prototype._onFocusIn=function(x){for(var V=x.target,R=this._clients.length-1;R>=0&&!this._clients[R].containsElement(V);R--);-1!==R&&this._clients[R].onFocus(V),R+1<this._clients.length&&this._dispatchLightDismiss(A.LightDismissalReasons.lostFocus,this._clients.slice(R+1),{activeDismissableNeedsFocus:!0})},LightDismissService.prototype._onKeyDown=function(x){x.keyCode===U.Key.escape&&this._escapePressed(x)},LightDismissService.prototype._escapePressed=function(x){x.preventDefault(),x.stopPropagation(),this._dispatchLightDismiss(A.LightDismissalReasons.escape)},LightDismissService.prototype._onBackClick=function(x){return!this._dispatchLightDismiss(A.LightDismissalReasons.hardwareBackButton)},LightDismissService.prototype._onWindowResize=function(x){this._dispatchLightDismiss(A.LightDismissalReasons.windowResize)},LightDismissService.prototype._onWindowBlur=function(x){if(!this._debug)if(B.document.hasFocus()){var V=B.document.activeElement;V&&"IFRAME"===V.tagName&&!V.msLightDismissBlur&&(V.addEventListener("blur",this._onWindowBlur.bind(this),!1),V.msLightDismissBlur=!0)}else this._dispatchLightDismiss(A.LightDismissalReasons.windowBlur)},LightDismissService.prototype._createClickEater=function(){var x=B.document.createElement("section");return x.className=A._ClassNames._clickEater,x.addEventListener("pointerdown",this._onClickEaterPointerDown.bind(this),!0),x.setAttribute("role","menuitem"),x.setAttribute("aria-label",z.closeOverlay),x.setAttribute("unselectable","on"),x},LightDismissService.prototype._onClickEaterPointerDown=function(x){x.stopPropagation(),x.preventDefault(),this._clickEaterPointerId=x.pointerId,this._registeredClickEaterCleanUp||(U._addEventListener(B.window,"pointerup",this._onClickEaterPointerUpBound),U._addEventListener(B.window,"pointercancel",this._onClickEaterPointerCancelBound),this._registeredClickEaterCleanUp=!0)},LightDismissService.prototype._onClickEaterPointerUp=function(x){var A=this;x.stopPropagation(),x.preventDefault(),x.pointerId===this._clickEaterPointerId&&(this._resetClickEaterPointerState(),B.document.elementFromPoint(x.clientX,x.clientY)===this._clickEaterEl&&(this._skipClickEaterClick=!0,N._yieldForEvents((function(){A._skipClickEaterClick=!1})),this._clickEaterTapped()))},LightDismissService.prototype._onClickEaterClick=function(x){x.stopPropagation(),x.preventDefault(),this._skipClickEaterClick||this._clickEaterTapped()},LightDismissService.prototype._onClickEaterPointerCancel=function(x){x.pointerId===this._clickEaterPointerId&&this._resetClickEaterPointerState()},LightDismissService.prototype._resetClickEaterPointerState=function(){this._registeredClickEaterCleanUp&&(U._removeEventListener(B.window,"pointerup",this._onClickEaterPointerUpBound),U._removeEventListener(B.window,"pointercancel",this._onClickEaterPointerCancelBound)),this._clickEaterPointerId=null,this._registeredClickEaterCleanUp=!1},LightDismissService}());A.shown=Y.shown.bind(Y),A.hidden=Y.hidden.bind(Y),A.updated=Y.updated.bind(Y),A.isShown=Y.isShown.bind(Y),A.isTopmost=Y.isTopmost.bind(Y),A.keyDown=Y.keyDown.bind(Y),A.keyUp=Y.keyUp.bind(Y),A.keyPress=Y.keyPress.bind(Y),A._clickEaterTapped=Y._clickEaterTapped.bind(Y),A._onBackClick=Y._onBackClick.bind(Y),A._setDebug=Y._setDebug.bind(Y),R.Namespace.define("WinJS.UI._LightDismissService",{shown:A.shown,hidden:A.hidden,updated:A.updated,isShown:A.isShown,isTopmost:A.isTopmost,keyDown:A.keyDown,keyUp:A.keyUp,keyPress:A.keyPress,_clickEaterTapped:A._clickEaterTapped,_onBackClick:A._onBackClick,_setDebug:A._setDebug,LightDismissableElement:K,DismissalPolicies:A.DismissalPolicies,LightDismissalReasons:A.LightDismissalReasons,_ClassNames:A._ClassNames,_service:Y})})),R("WinJS/Controls/_LegacyAppBar/_Constants",["exports","../../Core/_Base"],(function appBarConstantsInit(x,A){"use strict";A.Namespace._moduleDefine(x,null,{appBarClass:"win-navbar",firstDivClass:"win-firstdiv",finalDivClass:"win-finaldiv",invokeButtonClass:"win-navbar-invokebutton",ellipsisClass:"win-navbar-ellipsis",primaryCommandsClass:"win-primarygroup",secondaryCommandsClass:"win-secondarygroup",commandLayoutClass:"win-commandlayout",menuLayoutClass:"win-menulayout",topClass:"win-top",bottomClass:"win-bottom",showingClass:"win-navbar-opening",shownClass:"win-navbar-opened",hidingClass:"win-navbar-closing",hiddenClass:"win-navbar-closed",compactClass:"win-navbar-compact",minimalClass:"win-navbar-minimal",menuContainerClass:"win-navbar-menu",appBarPlacementTop:"top",appBarPlacementBottom:"bottom",appBarLayoutCustom:"custom",appBarLayoutCommands:"commands",appBarLayoutMenu:"menu",appBarInvokeButtonWidth:32,typeSeparator:"separator",typeContent:"content",typeButton:"button",typeToggle:"toggle",typeFlyout:"flyout",appBarCommandClass:"win-command",appBarCommandGlobalClass:"win-global",appBarCommandSelectionClass:"win-selection",commandHiddenClass:"win-command-hidden",sectionSelection:"selection",sectionGlobal:"global",sectionPrimary:"primary",sectionSecondary:"secondary",menuCommandClass:"win-command",menuCommandButtonClass:"win-command-button",menuCommandToggleClass:"win-command-toggle",menuCommandFlyoutClass:"win-command-flyout",menuCommandFlyoutActivatedClass:"win-command-flyout-activated",menuCommandSeparatorClass:"win-command-separator",_menuCommandInvokedEvent:"_invoked",menuClass:"win-menu",menuContainsToggleCommandClass:"win-menu-containstogglecommand",menuContainsFlyoutCommandClass:"win-menu-containsflyoutcommand",menuMouseSpacingClass:"win-menu-mousespacing",menuTouchSpacingClass:"win-menu-touchspacing",menuCommandHoverDelay:400,overlayClass:"win-overlay",flyoutClass:"win-flyout",flyoutLightClass:"win-ui-light",settingsFlyoutClass:"win-settingsflyout",scrollsClass:"win-scrolls",pinToRightEdge:-1,pinToBottomEdge:-1,separatorWidth:34,buttonWidth:68,narrowClass:"win-narrow",wideClass:"win-wide",_visualViewportClass:"win-visualviewport-space",commandPropertyMutated:"_commandpropertymutated",commandVisibilityChanged:"commandvisibilitychanged"})})),R("WinJS/Utilities/_KeyboardInfo",["require","exports","../Core/_BaseCoreUtils","../Core/_Global","../Core/_WinRT"],(function(x,A,V,R,D){"use strict";var N="win-visualviewport-space",U=150;A._KeyboardInfo,A._KeyboardInfo={get _visible(){try{return D.Windows.UI.ViewManagement.InputPane&&D.Windows.UI.ViewManagement.InputPane.getForCurrentView().occludedRect.height>0}catch(x){return!1}},get _extraOccluded(){var x=0;return!A._KeyboardInfo._isResized&&D.Windows.UI.ViewManagement.InputPane&&(x=D.Windows.UI.ViewManagement.InputPane.getForCurrentView().occludedRect.height),x},get _isResized(){var x=R.document.documentElement.clientHeight/R.innerHeight;return R.document.documentElement.clientWidth/R.innerWidth/x<.99},get _visibleDocBottom(){return A._KeyboardInfo._visibleDocTop+A._KeyboardInfo._visibleDocHeight},get _visibleDocHeight(){return A._KeyboardInfo._visualViewportHeight-A._KeyboardInfo._extraOccluded},get _visibleDocTop(){return 0},get _visibleDocBottomOffset(){return A._KeyboardInfo._extraOccluded},get _visualViewportHeight(){return A._KeyboardInfo._visualViewportSpace.height},get _visualViewportWidth(){return A._KeyboardInfo._visualViewportSpace.width},get _visualViewportSpace(){var x=R.document.body.querySelector("."+N);return x||((x=R.document.createElement("DIV")).className=N,R.document.body.appendChild(x)),x.getBoundingClientRect()},get _animationShowLength(){if(V.hasWinRT){if(D.Windows.UI.Core.AnimationMetrics){for(var x=D.Windows.UI.Core.AnimationMetrics,A=new x.AnimationDescription(x.AnimationEffect.showPanel,x.AnimationEffectTarget.primary).animations,R=0,N=0;N<A.size;N++){var U=A[N];R=Math.max(R,U.delay+U.duration)}return R}return 350}return 0},get _scrollTimeout(){return U},get _layoutViewportCoords(){var x=R.window.pageYOffset-R.document.documentElement.scrollTop;return{visibleDocTop:x,visibleDocBottom:R.document.documentElement.clientHeight-(x+this._visibleDocHeight)}}}})),R("require-style!less/styles-overlay",[],(function(){})),R("require-style!less/colors-overlay",[],(function(){})),R("WinJS/Controls/Flyout/_Overlay",["exports","../../Core/_Global","../../Core/_WinRT","../../Core/_Base","../../Core/_BaseUtils","../../Core/_ErrorFromName","../../Core/_Events","../../Core/_Resources","../../Core/_WriteProfilerMark","../../_Accents","../../Animations","../../Application","../../ControlProcessor","../../Promise","../../Scheduler","../../Utilities/_Control","../../Utilities/_ElementUtilities","../../Utilities/_KeyboardInfo","../_LegacyAppBar/_Constants","require-style!less/styles-overlay","require-style!less/colors-overlay"],(function overlayInit(x,A,V,R,D,N,U,B,F,W,H,z,G,j,q,Q,K,J,X){"use strict";W.createAccentRule("button[aria-checked=true].win-command:before,         .win-menu-containsflyoutcommand button.win-command-flyout-activated:before",[{name:"background-color",value:W.ColorTypes.accent},{name:"border-color",value:W.ColorTypes.accent}]),W.createAccentRule(".win-flyout, .win-settingsflyout",[{name:"border-color",value:W.ColorTypes.accent}]),R.Namespace._moduleDefine(x,"WinJS.UI",{_Overlay:R.Namespace._lazy((function(){function _allOverlaysCallback(x,V,R){var D=A.document.querySelectorAll("."+X.overlayClass);if(D)for(var N=D.length,U=0;U<N;U++){var B=D[U].winControl;if(!B._disposed&&B){var F=B[V](x);if(R&&F)return F}}}var x=R.Class.define((function _GlobalListener_ctor(){this._currentState=x.states.off,this._inputPaneShowing=this._inputPaneShowing.bind(this),this._inputPaneHiding=this._inputPaneHiding.bind(this),this._documentScroll=this._documentScroll.bind(this),this._windowResized=this._windowResized.bind(this)}),{initialize:function _GlobalListener_initialize(){this._toggleListeners(x.states.on)},reset:function _GlobalListener_reset(){this._toggleListeners(x.states.off),this._toggleListeners(x.states.on)},_inputPaneShowing:function _GlobalListener_inputePaneShowing(x){_allOverlaysCallback(x,"_showingKeyboard")},_inputPaneHiding:function _GlobalListener_inputPaneHiding(x){_allOverlaysCallback(x,"_hidingKeyboard")},_documentScroll:function _GlobalListener_documentScroll(x){_allOverlaysCallback(x,"_checkScrollPosition")},_windowResized:function _GlobalListener_windowResized(x){_allOverlaysCallback(x,"_baseResize")},_toggleListeners:function _GlobalListener_toggleListeners(R){var D;if(this._currentState!==R){if(R===x.states.on?D="addEventListener":R===x.states.off&&(D="removeEventListener"),V.Windows.UI.ViewManagement.InputPane){var N=V.Windows.UI.ViewManagement.InputPane.getForCurrentView();N[D]("showing",this._inputPaneShowing,!1),N[D]("hiding",this._inputPaneHiding,!1),A.document[D]("scroll",this._documentScroll,!1)}A.addEventListener("resize",this._windowResized,!1),this._currentState=R}}},{profilerString:{get:function(){return"WinJS.UI._Overlay Global Listener:"}},states:{get:function(){return{off:0,on:1}}}}),D={get duplicateConstruction(){return"Invalid argument: Controls may only be instantiated one time for each DOM element"},get mustContainCommands(){return"Invalid HTML: AppBars/Menus must contain only AppBarCommands/MenuCommands"},get closeOverlay(){return B._getWinJSString("ui/closeOverlay").value}},U=R.Class.define((function _Overlay_ctor(x,A){this._baseOverlayConstructor(x,A)}),{_baseOverlayConstructor:function _Overlay_baseOverlayConstructor(x,V){if(this._disposed=!1,x||(x=A.document.createElement("div")),x.winControl)throw new N("WinJS.UI._Overlay.DuplicateConstruction",D.duplicateConstruction);this._element||(this._element=x),this._element.hasAttribute("tabIndex")||(this._element.tabIndex=-1),this._sticky=!1,this._doNext="",this._element.style.visibility="hidden",this._element.style.opacity=0,x.winControl=this,K.addClass(this._element,X.overlayClass);var R=this._element.getAttribute("unselectable");null==R&&this._element.setAttribute("unselectable","on"),this._currentAnimateIn=this._baseAnimateIn,this._currentAnimateOut=this._baseAnimateOut,this._animationPromise=j.as(),this._queuedToShow=[],this._queuedToHide=[],this._queuedCommandAnimation=!1,V&&Q.setOptions(this,V),U._globalEventListeners.initialize()},element:{get:function(){return this._element}},dispose:function(){this._disposed||(this._disposed=!0,this._dispose())},_dispose:function _Overlay_dispose(){},_show:function _Overlay_show(){this._baseShow()},_hide:function _Overlay_hide(){this._baseHide()},hidden:{get:function(){return"hidden"===this._element.style.visibility||"hiding"===this._element.winAnimating||"hide"===this._doNext},set:function(x){var A=this.hidden;!x&&A?this.show():x&&!A&&this.hide()}},addEventListener:function(x,A,V){return this._element.addEventListener(x,A,V)},removeEventListener:function(x,A,V){return this._element.removeEventListener(x,A,V)},_baseShow:function _Overlay_baseShow(){if(this._animating||this._needToHandleHidingKeyboard)return this._doNext="show",!1;if("visible"!==this._element.style.visibility){this._element.winAnimating="showing",this._element.style.display="",this._element.style.visibility="hidden",this._queuedCommandAnimation&&(this._showAndHideFast(this._queuedToShow,this._queuedToHide),this._queuedToShow=[],this._queuedToHide=[]),this._beforeShow(),this._sendEvent(U.beforeShow),this._ensurePosition();var x=this;return this._animationPromise=this._currentAnimateIn().then((function(){x._baseEndShow()}),(function(){x._baseEndShow()})),!0}return!1},_beforeShow:function _Overlay_beforeShow(){},_ensurePosition:function _Overlay_ensurePosition(){},_baseEndShow:function _Overlay_baseEndShow(){this._disposed||(this._element.setAttribute("aria-hidden","false"),this._element.winAnimating="","show"===this._doNext&&(this._doNext=""),this._sendEvent(U.afterShow),q.schedule(this._checkDoNext,q.Priority.normal,this,"WinJS.UI._Overlay._checkDoNext"))},_baseHide:function _Overlay_baseHide(){if(this._animating)return this._doNext="hide",!1;if(this._needToHandleHidingKeyboard&&(this._element.style.visibility=""),"hidden"!==this._element.style.visibility){if(this._element.winAnimating="hiding",this._element.setAttribute("aria-hidden","true"),this._sendEvent(U.beforeHide),""===this._element.style.visibility)this._element.style.opacity=0,this._baseEndHide();else{var x=this;this._animationPromise=this._currentAnimateOut().then((function(){x._baseEndHide()}),(function(){x._baseEndHide()}))}return!0}return!1},_baseEndHide:function _Overlay_baseEndHide(){this._disposed||(this._beforeEndHide(),this._element.style.visibility="hidden",this._element.style.display="none",this._element.winAnimating="",this._queuedCommandAnimation&&(this._showAndHideFast(this._queuedToShow,this._queuedToHide),this._queuedToShow=[],this._queuedToHide=[]),"hide"===this._doNext&&(this._doNext=""),this._afterHide(),this._sendEvent(U.afterHide),q.schedule(this._checkDoNext,q.Priority.normal,this,"WinJS.UI._Overlay._checkDoNext"))},_beforeEndHide:function _Overlay_beforeEndHide(){},_afterHide:function _Overlay_afterHide(){},_checkDoNext:function _Overlay_checkDoNext(){this._animating||this._needToHandleHidingKeyboard||this._disposed||("hide"===this._doNext?(this._hide(),this._doNext=""):this._queuedCommandAnimation?this._showAndHideQueue():"show"===this._doNext&&(this._show(),this._doNext=""))},_baseAnimateIn:function _Overlay_baseAnimateIn(){return this._element.style.opacity=0,this._element.style.visibility="visible",K._getComputedStyle(this._element,null).opacity,H.fadeIn(this._element)},_baseAnimateOut:function _Overlay_baseAnimateOut(){return this._element.style.opacity=1,K._getComputedStyle(this._element,null).opacity,H.fadeOut(this._element)},_animating:{get:function _Overlay_animating_get(){return!!this._element.winAnimating}},_sendEvent:function _Overlay_sendEvent(x,V){if(!this._disposed){var R=A.document.createEvent("CustomEvent");R.initEvent(x,!0,!0,V||{}),this._element.dispatchEvent(R)}},_showCommands:function _Overlay_showCommands(x,A){var V=this._resolveCommands(x);this._showAndHideCommands(V.commands,[],A)},_hideCommands:function _Overlay_hideCommands(x,A){var V=this._resolveCommands(x);this._showAndHideCommands([],V.commands,A)},_showOnlyCommands:function _Overlay_showOnlyCommands(x,A){var V=this._resolveCommands(x);this._showAndHideCommands(V.commands,V.others,A)},_showAndHideCommands:function _Overlay_showAndHideCommands(x,A,V){V||this.hidden&&!this._animating?(this._showAndHideFast(x,A),this._removeFromQueue(x,this._queuedToShow),this._removeFromQueue(A,this._queuedToHide)):(this._updateAnimateQueue(x,this._queuedToShow,this._queuedToHide),this._updateAnimateQueue(A,this._queuedToHide,this._queuedToShow))},_removeFromQueue:function _Overlay_removeFromQueue(x,A){var V;for(V=0;V<x.length;V++){var R;for(R=0;R<A.length;R++)if(A[R]===x[V]){A.splice(R,1);break}}},_updateAnimateQueue:function _Overlay_updateAnimateQueue(x,A,V){if(!this._disposed){var R;for(R=0;R<x.length;R++){var D;for(D=0;D<A.length&&A[D]!==x[R];D++);for(D===A.length&&(A[D]=x[R]),D=0;D<V.length;D++)if(V[D]===x[R]){V.splice(D,1);break}}this._queuedCommandAnimation||(this._animating||q.schedule(this._checkDoNext,q.Priority.normal,this,"WinJS.UI._Overlay._checkDoNext"),this._queuedCommandAnimation=!0)}},_showAndHideFast:function _Overlay_showAndHideFast(x,A){var V,R;for(V=0;V<x.length;V++)(R=x[V])&&R.style&&(R.style.visibility="",R.style.display="");for(V=0;V<A.length;V++)(R=A[V])&&R.style&&(R.style.visibility="hidden",R.style.display="none");this._commandsUpdated()},_showAndHideQueue:function _Overlay_showAndHideQueue(){if(this._queuedCommandAnimation=!1,this.hidden)this._showAndHideFast(this._queuedToShow,this._queuedToHide),q.schedule(this._checkDoNext,q.Priority.normal,this,"WinJS.UI._Overlay._checkDoNext");else{var x,V=this._queuedToShow,R=this._queuedToHide,D=this._findSiblings(V.concat(R));for(x=0;x<V.length;x++)V[x]&&V[x].style&&A.document.body.contains(V[x])?"hidden"!==V[x].style.visibility&&"0"!==V[x].style.opacity&&(D.push(V[x]),V.splice(x,1),x--):(V.splice(x,1),x--);for(x=0;x<R.length;x++)R[x]&&R[x].style&&A.document.body.contains(R[x])&&"hidden"!==R[x].style.visibility&&"0"!==R[x].style.opacity||(R.splice(x,1),x--);var N=this._baseBeginAnimateCommands(V,R,D),U=this;N?N.done((function(){U._baseEndAnimateCommands(R)}),(function(){U._baseEndAnimateCommands(R)})):q.schedule((function Overlay_async_baseEndAnimationCommands(){U._baseEndAnimateCommands([])}),q.Priority.normal,null,"WinJS.UI._Overlay._endAnimateCommandsWithoutAnimation")}this._queuedToShow=[],this._queuedToHide=[]},_baseBeginAnimateCommands:function _Overlay_baseBeginAnimateCommands(x,A,V){this._beginAnimateCommands(x,A,this._getVisibleCommands(V));var R=null,D=null;A.length>0&&(D=H.createDeleteFromListAnimation(A,0===x.length?V:void 0)),x.length>0&&(R=H.createAddToListAnimation(x,V));for(var N=0,U=A.length;N<U;N++){var B=A[N].getBoundingClientRect(),F=K._getComputedStyle(A[N]);A[N].style.top=B.top-parseFloat(F.marginTop)+"px",A[N].style.left=B.left-parseFloat(F.marginLeft)+"px",A[N].style.opacity=0,A[N].style.position="fixed"}this._element.winAnimating="rearranging";var W=null;for(D&&(W=D.execute()),N=0;N<x.length;N++)x[N].style.visibility="",x[N].style.display="",x[N].style.opacity=1;if(R){var z=R.execute();W=W?j.join([W,z]):z}return W},_beginAnimateCommands:function _Overlay_beginAnimateCommands(){},_getVisibleCommands:function _Overlay_getVisibleCommands(x){var A,V=x,R=[];V||(V=this.element.querySelectorAll(".win-command"));for(var D=0,N=V.length;D<N;D++)(A=V[D].winControl||V[D]).hidden||R.push(A);return R},_baseEndAnimateCommands:function _Overlay_baseEndAnimateCommands(x){if(!this._disposed){var A;for(A=0;A<x.length;A++)x[A].style.position="",x[A].style.top="",x[A].style.left="",x[A].getBoundingClientRect(),x[A].style.visibility="hidden",x[A].style.display="none",x[A].style.opacity=1;this._element.winAnimating="",this._endAnimateCommands(),this._checkDoNext()}},_endAnimateCommands:function _Overlay_endAnimateCommands(){},_resolveCommands:function _Overlay_resolveCommands(x){x=function _resolveElements(x){if(!x)return[];"string"!=typeof x&&x&&x.length||(x=[x]);var V,R=[];for(V=0;V<x.length;V++)if(x[V])if("string"==typeof x[V]){var D=A.document.getElementById(x[V]);D&&R.push(D)}else x[V].element?R.push(x[V].element):R.push(x[V]);return R}(x);var V,R,D={commands:[],others:[]},N=this.element.querySelectorAll(".win-command");for(V=0;V<N.length;V++){var U=!1;for(R=0;R<x.length;R++)if(x[R]===N[V]){D.commands.push(N[V]),x.splice(R,1),U=!0;break}U||D.others.push(N[V])}return D},_findSiblings:function _Overlay_findSiblings(x){var A,V,R=[],D=this.element.querySelectorAll(".win-command");for(A=0;A<D.length;A++){var N=!1;for(V=0;V<x.length;V++)if(x[V]===D[A]){x.splice(V,1),N=!0;break}N||R.push(D[A])}return R},_baseResize:function _Overlay_baseResize(x){this._resize(x)},_hideOrDismiss:function _Overlay_hideOrDismiss(){var x=this._element;x&&K.hasClass(x,X.settingsFlyoutClass)?this._dismiss():x&&K.hasClass(x,X.appBarClass)?this.close():this.hide()},_resize:function _Overlay_resize(){},_commandsUpdated:function _Overlay_commandsUpdated(){},_checkScrollPosition:function _Overlay_checkScrollPosition(){},_showingKeyboard:function _Overlay_showingKeyboard(){},_hidingKeyboard:function _Overlay_hidingKeyboard(){},_verifyCommandsOnly:function _Overlay_verifyCommandsOnly(x,A){for(var V=x.children,R=new Array(V.length),U=0;U<V.length;U++){if(!K.hasClass(V[U],"win-command")&&V[U].getAttribute("data-win-control")!==A)throw new N("WinJS.UI._Overlay.MustContainCommands",D.mustContainCommands);G.processAll(V[U]),R[U]=V[U].winControl}return R},_focusOnLastFocusableElementOrThis:function _Overlay_focusOnLastFocusableElementOrThis(){this._focusOnLastFocusableElement()||U._trySetActive(this._element)},_focusOnLastFocusableElement:function _Overlay_focusOnLastFocusableElement(){if(this._element.firstElementChild){var x=this._element.firstElementChild.tabIndex,V=this._element.lastElementChild.tabIndex;this._element.firstElementChild.tabIndex=-1,this._element.lastElementChild.tabIndex=-1;var R=K._focusLastFocusableElement(this._element);return R&&U._trySelect(A.document.activeElement),this._element.firstElementChild.tabIndex=x,this._element.lastElementChild.tabIndex=V,R}return!1},_focusOnFirstFocusableElementOrThis:function _Overlay_focusOnFirstFocusableElementOrThis(){this._focusOnFirstFocusableElement()||U._trySetActive(this._element)},_focusOnFirstFocusableElement:function _Overlay__focusOnFirstFocusableElement(x,V){if(this._element.firstElementChild){var R=this._element.firstElementChild.tabIndex,D=this._element.lastElementChild.tabIndex;this._element.firstElementChild.tabIndex=-1,this._element.lastElementChild.tabIndex=-1;var N=K._focusFirstFocusableElement(this._element,x,V);return N&&U._trySelect(A.document.activeElement),this._element.firstElementChild.tabIndex=R,this._element.lastElementChild.tabIndex=D,N}return!1},_writeProfilerMark:function _Overlay_writeProfilerMark(x){}},{_isFlyoutVisible:function(){for(var x=A.document.querySelectorAll("."+X.flyoutClass),V=0;V<x.length;V++){var R=x[V].winControl;if(R&&!R.hidden)return!0}return!1},_trySetActive:function(x,V){return!!(x&&A.document.body&&A.document.body.contains(x))&&!!K._setActive(x,V)&&x===A.document.activeElement},_trySelect:function(x){try{x&&x.select&&x.select()}catch(x){}},_sizeOfDocument:function(){return{width:A.document.documentElement.offsetWidth,height:A.document.documentElement.offsetHeight}},_getParentControlUsingClassName:function(x,V){for(;x&&x!==A.document.body;){if(K.hasClass(x,V))return x.winControl;x=x.parentNode}return null},_globalEventListeners:new x,_hideAppBars:function _Overlay_hideAppBars(x,A){var V=x.map((function(x){return x.close(),x._animationPromise}));return j.join(V)},_showAppBars:function _Overlay_showAppBars(x,A){var V=x.map((function(x){return x._show(),x._animationPromise}));return j.join(V)},_keyboardInfo:J._KeyboardInfo,_scrollTimeout:J._KeyboardInfo._scrollTimeout,beforeShow:"beforeshow",beforeHide:"beforehide",afterShow:"aftershow",afterHide:"afterhide",commonstrings:{get cannotChangeCommandsWhenVisible(){return"Invalid argument: You must call hide() before changing {0} commands"},get cannotChangeHiddenProperty(){return"Unable to set hidden property while parent {0} is visible."}}});return R.Class.mix(U,Q.DOMEventMixin),U}))})})),R("WinJS/Controls/Flyout",["exports","../Core/_Global","../Core/_Base","../Core/_BaseUtils","../Core/_ErrorFromName","../Core/_Events","../Core/_Log","../Core/_Resources","../Core/_WriteProfilerMark","../Animations","../_Signal","../_LightDismissService","../Utilities/_Dispose","../Utilities/_ElementUtilities","../Utilities/_KeyboardBehavior","../Utilities/_Hoverable","./_LegacyAppBar/_Constants","./Flyout/_Overlay"],(function flyoutInit(x,A,V,R,D,N,U,B,F,W,H,z,G,j,q,Q,K,J){"use strict";V.Namespace._moduleDefine(x,"WinJS.UI",{Flyout:V.Namespace._lazy((function(){var x=j.Key;function getDimension(x,A){return j.convertToPixels(x,j._getComputedStyle(x,null)[A])}var F={get ariaLabel(){return B._getWinJSString("ui/flyoutAriaLabel").value},get noAnchor(){return"Invalid argument: Flyout anchor element not found in DOM."},get badPlacement(){return"Invalid argument: Flyout placement should be 'top' (default), 'bottom', 'left', 'right', 'auto', 'autohorizontal', or 'autovertical'."},get badAlignment(){return"Invalid argument: Flyout alignment should be 'center' (default), 'left', or 'right'."},get noCoordinates(){return"Invalid argument: Flyout coordinates must contain a valid x,y pair."}},Q=N._createEventProperty,X=V.Class.define((function _LightDismissableLayer_ctor(x){this._onLightDismiss=x,this._currentlyFocusedClient=null,this._clients=[]}),{shown:function _LightDismissableLayer_shown(x){x._focusable=!0,-1===this._clients.indexOf(x)&&(this._clients.push(x),x.onShow(this),z.isShown(this)?(z.updated(this),this._activateTopFocusableClientIfNeeded()):z.shown(this))},hiding:function _LightDismissableLayer_hiding(x){var A=this._clients.indexOf(x);-1!==A&&(this._clients[A]._focusable=!1,this._activateTopFocusableClientIfNeeded())},hidden:function _LightDismissableLayer_hidden(x){var A=this._clients.indexOf(x);-1!==A&&(this._clients.splice(A,1),x.setZIndex(""),x.onHide(),0===this._clients.length?z.hidden(this):(z.updated(this),this._activateTopFocusableClientIfNeeded()))},keyDown:function _LightDismissableLayer_keyDown(x,A){z.keyDown(this,A)},keyUp:function _LightDismissableLayer_keyUp(x,A){z.keyUp(this,A)},keyPress:function _LightDismissableLayer_keyPress(x,A){z.keyPress(this,A)},clients:{get:function _LightDismissableLayer_clients_get(){return this._clients}},_clientForElement:function _LightDismissableLayer_clientForElement(x){for(var A=this._clients.length-1;A>=0;A--)if(this._clients[A].containsElement(x))return this._clients[A];return null},_focusableClientForElement:function _LightDismissableLayer_focusableClientForElement(x){for(var A=this._clients.length-1;A>=0;A--)if(this._clients[A]._focusable&&this._clients[A].containsElement(x))return this._clients[A];return null},_getTopmostFocusableClient:function _LightDismissableLayer_getTopmostFocusableClient(){for(var x=this._clients.length-1;x>=0;x--){var A=this._clients[x];if(A&&A._focusable)return A}return null},_activateTopFocusableClientIfNeeded:function _LightDismissableLayer_activateTopFocusableClientIfNeeded(){var x=this._getTopmostFocusableClient();if(x&&z.isTopmost(this)){var A=!q._keyboardSeenLast;x.onTakeFocus(A)}},setZIndex:function _LightDismissableLayer_setZIndex(x){this._clients.forEach((function(A,V){A.setZIndex(x+V)}),this)},getZIndexCount:function _LightDismissableLayer_getZIndexCount(){return this._clients.length},containsElement:function _LightDismissableLayer_containsElement(x){return!!this._clientForElement(x)},onTakeFocus:function _LightDismissableLayer_onTakeFocus(x){var V=this._focusableClientForElement(A.document.activeElement);!V&&-1!==this._clients.indexOf(this._currentlyFocusedClient)&&this._currentlyFocusedClient._focusable&&(V=this._currentlyFocusedClient),V||(V=this._getTopmostFocusableClient()),this._currentlyFocusedClient=V,V&&V.onTakeFocus(x)},onFocus:function _LightDismissableLayer_onFocus(x){this._currentlyFocusedClient=this._clientForElement(x),this._currentlyFocusedClient&&this._currentlyFocusedClient.onFocus(x)},onShow:function _LightDismissableLayer_onShow(x){},onHide:function _LightDismissableLayer_onHide(){this._currentlyFocusedClient=null},onKeyInStack:function _LightDismissableLayer_onKeyInStack(x){var A=this._clients.indexOf(this._currentlyFocusedClient);if(-1!==A)for(var V=this._clients.slice(0,A+1),R=V.length-1;R>=0&&!x.propagationStopped;R--)V[R]._focusable&&V[R].onKeyInStack(x)},onShouldLightDismiss:function _LightDismissableLayer_onShouldLightDismiss(x){return z.DismissalPolicies.light(x)},onLightDismiss:function _LightDismissableLayer_onLightDismiss(x){this._onLightDismiss(x)}}),Y=V.Class.define((function _CascadeManager_ctor(){var x=this;this._dismissableLayer=new X((function _CascadeManager_onLightDismiss(A){A.reason===z.LightDismissalReasons.escape?x.collapseFlyout(x.getAt(x.length-1)):x.collapseAll()})),this._cascadingStack=[],this._handleKeyDownInCascade_bound=this._handleKeyDownInCascade.bind(this),this._inputType=null}),{appendFlyout:function _CascadeManager_appendFlyout(x){if(U.log&&this.reentrancyLock&&U.log("_CascadeManager is attempting to append a Flyout through reentrancy.","winjs _CascadeManager","error"),this.indexOf(x)<0){var A=this.collapseAll;if(x._positionRequest instanceof Z.AnchorPositioning){var V=this.indexOfElement(x._positionRequest.anchor);V>=0&&(A=function collapseFn(){this.collapseFlyout(this.getAt(V+1))})}A.call(this),x.element.addEventListener("keydown",this._handleKeyDownInCascade_bound,!1),this._cascadingStack.push(x)}},collapseFlyout:function _CascadeManager_collapseFlyout(x){if(!this.reentrancyLock&&x&&this.indexOf(x)>=0){this.reentrancyLock=!0;var A,V=new H;for(this.unlocked=V.promise;this.length&&x!==A;)(A=this._cascadingStack.pop()).element.removeEventListener("keydown",this._handleKeyDownInCascade_bound,!1),A._hide();0===this._cascadingStack.length&&(this._inputType=null),this.reentrancyLock=!1,this.unlocked=null,V.complete()}},flyoutShown:function _CascadeManager_flyoutShown(x){this._dismissableLayer.shown(x._dismissable)},flyoutHiding:function _CascadeManager_flyoutHiding(x){this._dismissableLayer.hiding(x._dismissable)},flyoutHidden:function _CascadeManager_flyoutHidden(x){this._dismissableLayer.hidden(x._dismissable)},collapseAll:function _CascadeManager_collapseAll(){var x=this.getAt(0);x&&this.collapseFlyout(x)},indexOf:function _CascadeManager_indexOf(x){return this._cascadingStack.indexOf(x)},indexOfElement:function _CascadeManager_indexOfElement(x){for(var A=-1,V=0,R=this.length;V<R;V++)if(this.getAt(V).element.contains(x)){A=V;break}return A},length:{get:function _CascadeManager_getLength(){return this._cascadingStack.length}},getAt:function _CascadeManager_getAt(x){return this._cascadingStack[x]},handleFocusIntoFlyout:function _CascadeManager_handleFocusIntoFlyout(x){var A=this.indexOfElement(x.target);if(A>=0){var V=this.getAt(A+1);this.collapseFlyout(V)}},inputType:{get:function _CascadeManager_inputType_get(){return this._inputType||(this._inputType=q._lastInputType),this._inputType}},dismissableLayer:{get:function _CascadeManager_dismissableLayer_get(){return this._dismissableLayer}},_handleKeyDownInCascade:function _CascadeManager_handleKeyDownInCascade(A){var V="rtl"===j._getComputedStyle(A.target).direction?x.rightArrow:x.leftArrow,R=A.target;if(A.keyCode===V){var D=this.indexOfElement(R);if(D>=1){var N=this.getAt(D);this.collapseFlyout(N),A.preventDefault()}}else A.keyCode!==x.alt&&A.keyCode!==x.F10||this.collapseAll()}}),$={top:{top:"50px",left:"0px",keyframe:"WinJS-showFlyoutTop"},bottom:{top:"-50px",left:"0px",keyframe:"WinJS-showFlyoutBottom"},left:{top:"0px",left:"50px",keyframe:"WinJS-showFlyoutLeft"},right:{top:"0px",left:"-50px",keyframe:"WinJS-showFlyoutRight"}},Z={AnchorPositioning:V.Class.define((function AnchorPositioning_ctor(x,V,R){if("string"==typeof x?x=A.document.getElementById(x):x&&x.element&&(x=x.element),!x)throw new D("WinJS.UI.Flyout.NoAnchor",F.noAnchor);this.anchor=x,this.placement=V,this.alignment=R}),{getTopLeft:function AnchorPositioning_getTopLeft(x,A){var V,R,N,U,B;try{V=this.anchor.getBoundingClientRect()}catch(x){throw new D("WinJS.UI.Flyout.NoAnchor",F.noAnchor)}var W=x.totalHeight-x.contentHeight,H=x.contentHeight;function configureVerticalWithScroll(x){!function topHasMoreRoom(x){return spaceAbove(x)>spaceBelow(x)}(x)?(H=spaceBelow(x)-W,N=K.pinToBottomEdge,B=$.bottom):(H=spaceAbove(x)-W,N=J._Overlay._keyboardInfo._visibleDocTop,B=$.top),U=!0}function spaceAbove(x){return x.top-J._Overlay._keyboardInfo._visibleDocTop}function spaceBelow(x){return J._Overlay._keyboardInfo._visibleDocBottom-x.bottom}function fitTop(x,A){return N=x-A.totalHeight,B=$.top,N>=J._Overlay._keyboardInfo._visibleDocTop&&N+A.totalHeight<=J._Overlay._keyboardInfo._visibleDocBottom}function fitBottom(x,A){return B=$.bottom,(N=x)>=J._Overlay._keyboardInfo._visibleDocTop&&N+A.totalHeight<=J._Overlay._keyboardInfo._visibleDocBottom}function fitLeft(x,A){return R=x-A.totalWidth,B=$.left,R>=0&&R+A.totalWidth<=J._Overlay._keyboardInfo._visualViewportWidth}function fitRight(x,A){return B=$.right,(R=x)>=0&&R+A.totalWidth<=J._Overlay._keyboardInfo._visualViewportWidth}function centerVertically(x,A){(N=x.top+x.height/2-A.totalHeight/2)<J._Overlay._keyboardInfo._visibleDocTop?N=J._Overlay._keyboardInfo._visibleDocTop:N+A.totalHeight>=J._Overlay._keyboardInfo._visibleDocBottom&&(N=K.pinToBottomEdge)}function alignHorizontally(x,A,V){if("center"===V)R=x.left+x.width/2-A.totalWidth/2;else if("left"===V)R=x.left;else{if("right"!==V)throw new D("WinJS.UI.Flyout.BadAlignment",F.badAlignment);R=x.right-A.totalWidth}R<0?R=0:R+A.totalWidth>=J._Overlay._keyboardInfo._visualViewportWidth&&(R=K.pinToRightEdge)}var z=this.alignment;switch(this.placement){case"top":fitTop(V.top,x)||(N=J._Overlay._keyboardInfo._visibleDocTop,U=!0,H=spaceAbove(V)-W),alignHorizontally(V,x,z);break;case"bottom":fitBottom(V.bottom,x)||(N=K.pinToBottomEdge,U=!0,H=spaceBelow(V)-W),alignHorizontally(V,x,z);break;case"left":fitLeft(V.left,x)||(R=0),centerVertically(V,x);break;case"right":fitRight(V.right,x)||(R=K.pinToRightEdge),centerVertically(V,x);break;case"autovertical":fitTop(V.top,x)||fitBottom(V.bottom,x)||configureVerticalWithScroll(V),alignHorizontally(V,x,z);break;case"autohorizontal":fitLeft(V.left,x)||fitRight(V.right,x)||(R=K.pinToRightEdge),centerVertically(V,x);break;case"auto":!function fitsVerticallyWithCenteredAnchor(x,A){return(J._Overlay._keyboardInfo._visibleDocHeight-x.height)/2>=A.totalHeight}(V,x)?fitLeft(V.left,x)||fitRight(V.right,x)?centerVertically(V,x):(configureVerticalWithScroll(V),alignHorizontally(V,x,z)):(fitTop(V.top,x)||fitBottom(V.bottom,x),alignHorizontally(V,x,z));break;case"_cascade":fitBottom(V.top-x.marginTop,x)||fitTop(V.bottom+x.marginBottom,x)||centerVertically(V,x);var G=V.right-x.marginLeft-3,j=V.left+x.marginRight+3;A?fitLeft(j,x)||fitRight(G,x)||(R=0,B=$.left):fitRight(G,x)||fitLeft(j,x)||(R=K.pinToRightEdge,B=$.right);break;default:throw new D("WinJS.UI.Flyout.BadPlacement",F.badPlacement)}return{left:R,top:N,animOffset:B,doesScroll:U,contentHeight:H,verticalMarginBorderPadding:W}}}),CoordinatePositioning:V.Class.define((function CoordinatePositioning_ctor(x){if(x.clientX===+x.clientX&&x.clientY===+x.clientY){var A=x;x={x:A.clientX,y:A.clientY}}else if(x.x!==+x.x||x.y!==+x.y)throw new D("WinJS.UI.Flyout.NoCoordinates",F.noCoordinates);this.coordinates=x}),{getTopLeft:function CoordinatePositioning_getTopLeft(x,A){var V=this.coordinates,R=x.totalWidth-x.marginLeft-x.marginRight,D=A?R:0,N=x.totalHeight-x.contentHeight,U=x.contentHeight,B=V.y-x.marginTop,F=V.x-x.marginLeft-D;return B<0?B=0:B+x.totalHeight>J._Overlay._keyboardInfo._visibleDocBottom&&(B=K.pinToBottomEdge),F<0?F=0:F+x.totalWidth>J._Overlay._keyboardInfo._visualViewportWidth&&(F=K.pinToRightEdge),{left:F,top:B,verticalMarginBorderPadding:N,contentHeight:U,doesScroll:!1,animOffset:$.top}}})},ee=V.Class.derive(J._Overlay,(function Flyout_ctor(x,V){V=V||{},this._element=x||A.document.createElement("div"),this._id=this._element.id||j._uniqueID(this._element),this._baseFlyoutConstructor(this._element,V);var R=this._element.getElementsByTagName("*");return this._addFirstDiv().tabIndex=j._getLowestTabIndexInList(R),this._addFinalDiv().tabIndex=j._getHighestTabIndexInList(R),this._element.addEventListener("keydown",this._handleKeyDown,!0),this}),{_lastMaxHeight:null,_baseFlyoutConstructor:function Flyout_baseFlyoutContstructor(x,A){this._placement="auto",this._alignment="center",this._baseOverlayConstructor(x,A),this._element.style.visibilty="hidden",this._element.style.display="none",j.addClass(this._element,K.flyoutClass);var V=this;this._dismissable=new z.LightDismissableElement({element:this._element,tabIndex:this._element.hasAttribute("tabIndex")?this._element.tabIndex:-1,onLightDismiss:function(){V.hide()},onTakeFocus:function(x){V._dismissable.restoreFocus()||(j.hasClass(V.element,K.menuClass)?J._Overlay._trySetActive(V._element):V._focusOnFirstFocusableElementOrThis())}});var R=this._element.getAttribute("role");null!==R&&""!==R&&void 0!==R||(j.hasClass(this._element,K.menuClass)?this._element.setAttribute("role","menu"):this._element.setAttribute("role","dialog"));var D=this._element.getAttribute("aria-label");null!==D&&""!==D&&void 0!==D||this._element.setAttribute("aria-label",F.ariaLabel),this._currentAnimateIn=this._flyoutAnimateIn,this._currentAnimateOut=this._flyoutAnimateOut,j._addEventListener(this.element,"focusin",this._handleFocusIn.bind(this),!1)},anchor:{get:function(){return this._anchor},set:function(x){this._anchor=x}},placement:{get:function(){return this._placement},set:function(x){if("top"!==x&&"bottom"!==x&&"left"!==x&&"right"!==x&&"auto"!==x&&"autohorizontal"!==x&&"autovertical"!==x)throw new D("WinJS.UI.Flyout.BadPlacement",F.badPlacement);this._placement=x}},alignment:{get:function(){return this._alignment},set:function(x){if("right"!==x&&"left"!==x&&"center"!==x)throw new D("WinJS.UI.Flyout.BadAlignment",F.badAlignment);this._alignment=x}},disabled:{get:function(){return!!this._element.disabled},set:function(x){x=!!x,!!this._element.disabled!==x&&(this._element.disabled=x,!this.hidden&&this._element.disabled&&this.hide())}},onbeforeshow:Q(J._Overlay.beforeShow),onaftershow:Q(J._Overlay.afterShow),onbeforehide:Q(J._Overlay.beforeHide),onafterhide:Q(J._Overlay.afterHide),_dispose:function Flyout_dispose(){G.disposeSubTree(this.element),this._hide(),ee._cascadeManager.flyoutHidden(this),this.anchor=null},show:function(x,A,V){this._positionRequest=new Z.AnchorPositioning(x||this._anchor,A||this._placement,V||this._alignment),this._show()},_show:function Flyout_show(){this._baseFlyoutShow()},showAt:function Flyout_showAt(x){this._positionRequest=new Z.CoordinatePositioning(x),this._show()},hide:function(){this._hide()},_hide:function Flyout_hide(){ee._cascadeManager.collapseFlyout(this),this._baseHide()&&ee._cascadeManager.flyoutHiding(this)},_beforeEndHide:function Flyout_beforeEndHide(){ee._cascadeManager.flyoutHidden(this)},_baseFlyoutShow:function Flyout_baseFlyoutShow(){if(!this.disabled&&!this._disposed)if(ee._cascadeManager.appendFlyout(this),this._element.winAnimating)this._doNext="show";else if(ee._cascadeManager.reentrancyLock){this._doNext="show";var x=this;ee._cascadeManager.unlocked.then((function(){x._checkDoNext()}))}else if(this._baseShow()){if(!j.hasClass(this.element,"win-menu")){var A=this._element.getElementsByTagName("*"),V=this.element.querySelectorAll(".win-first");this.element.children.length&&!j.hasClass(this.element.children[0],K.firstDivClass)&&(V&&V.length>0&&V.item(0).parentNode.removeChild(V.item(0)),V=this._addFirstDiv()),V.tabIndex=j._getLowestTabIndexInList(A);var R=this.element.querySelectorAll(".win-final");j.hasClass(this.element.children[this.element.children.length-1],K.finalDivClass)||(R&&R.length>0&&R.item(0).parentNode.removeChild(R.item(0)),R=this._addFinalDiv()),R.tabIndex=j._getHighestTabIndexInList(A)}ee._cascadeManager.flyoutShown(this)}},_lightDismiss:function Flyout_lightDismiss(){ee._cascadeManager.collapseAll()},_ensurePosition:function Flyout_ensurePosition(){this._keyboardMovedUs=!1,this._clearAdjustedStyles(),this._setAlignment();var x=function measureElement(x){return{marginTop:getDimension(x,"marginTop"),marginBottom:getDimension(x,"marginBottom"),marginLeft:getDimension(x,"marginLeft"),marginRight:getDimension(x,"marginRight"),totalWidth:j.getTotalWidth(x),totalHeight:j.getTotalHeight(x),contentWidth:j.getContentWidth(x),contentHeight:j.getContentHeight(x)}}(this._element),A="rtl"===j._getComputedStyle(this._element).direction;this._currentPosition=this._positionRequest.getTopLeft(x,A),this._currentPosition.top<0?(this._element.style.bottom=J._Overlay._keyboardInfo._visibleDocBottomOffset+"px",this._element.style.top="auto"):(this._element.style.top=this._currentPosition.top+"px",this._element.style.bottom="auto"),this._currentPosition.left<0?(this._element.style.right="0px",this._element.style.left="auto"):(this._element.style.left=this._currentPosition.left+"px",this._element.style.right="auto"),this._currentPosition.doesScroll&&(j.addClass(this._element,K.scrollsClass),this._lastMaxHeight=this._element.style.maxHeight,this._element.style.maxHeight=this._currentPosition.contentHeight+"px"),J._Overlay._keyboardInfo._visible&&(this._checkKeyboardFit(),this._keyboardMovedUs&&this._adjustForKeyboard())},_clearAdjustedStyles:function Flyout_clearAdjustedStyles(){this._element.style.top="0px",this._element.style.bottom="auto",this._element.style.left="0px",this._element.style.right="auto",j.removeClass(this._element,K.scrollsClass),null!==this._lastMaxHeight&&(this._element.style.maxHeight=this._lastMaxHeight,this._lastMaxHeight=null),j.removeClass(this._element,"win-rightalign"),j.removeClass(this._element,"win-leftalign")},_setAlignment:function Flyout_setAlignment(){switch(this._positionRequest.alignment){case"left":j.addClass(this._element,"win-leftalign");break;case"right":j.addClass(this._element,"win-rightalign")}},_showingKeyboard:function Flyout_showingKeyboard(x){if(!this.hidden&&(x.ensuredFocusedElementInView=!0,this._checkKeyboardFit(),this._keyboardMovedUs)){this._element.style.opacity=0;var V=this;A.setTimeout((function(){V._adjustForKeyboard(),V._baseAnimateIn()}),J._Overlay._keyboardInfo._animationShowLength)}},_resize:function Flyout_resize(){if((!this.hidden||this._animating)&&this._needToHandleHidingKeyboard){var x=this;R._setImmediate((function(){x.hidden&&!x._animating||x._ensurePosition()})),this._needToHandleHidingKeyboard=!1}},_checkKeyboardFit:function Flyout_checkKeyboardFit(){var x=!1,A=J._Overlay._keyboardInfo._visibleDocHeight,V=this._currentPosition.contentHeight+this._currentPosition.verticalMarginBorderPadding;V>A?(x=!0,this._currentPosition.top=K.pinToBottomEdge,this._currentPosition.contentHeight=A-this._currentPosition.verticalMarginBorderPadding,this._currentPosition.doesScroll=!0):this._currentPosition.top>=0&&this._currentPosition.top+V>J._Overlay._keyboardInfo._visibleDocBottom?(this._currentPosition.top=K.pinToBottomEdge,x=!0):this._currentPosition.top===K.pinToBottomEdge&&(x=!0),this._keyboardMovedUs=x},_adjustForKeyboard:function Flyout_adjustForKeyboard(){this._currentPosition.doesScroll&&(this._lastMaxHeight||(j.addClass(this._element,K.scrollsClass),this._lastMaxHeight=this._element.style.maxHeight),this._element.style.maxHeight=this._currentPosition.contentHeight+"px"),this._checkScrollPosition(!0)},_hidingKeyboard:function Flyout_hidingKeyboard(){if(!this.hidden||this._animating)if(J._Overlay._keyboardInfo._isResized)this._needToHandleHidingKeyboard=!0;else{var x=this;R._setImmediate((function(){x.hidden&&!x._animating||x._ensurePosition()}))}},_checkScrollPosition:function Flyout_checkScrollPosition(x){this.hidden&&!x||void 0!==this._currentPosition&&(this._currentPosition.top<0?(this._element.style.bottom=J._Overlay._keyboardInfo._visibleDocBottomOffset+"px",this._element.style.top="auto"):(this._element.style.top=this._currentPosition.top+"px",this._element.style.bottom="auto"))},_flyoutAnimateIn:function Flyout_flyoutAnimateIn(){return this._keyboardMovedUs?this._baseAnimateIn():(this._element.style.opacity=1,this._element.style.visibility="visible",W.showPopup(this._element,void 0!==this._currentPosition?this._currentPosition.animOffset:0))},_flyoutAnimateOut:function Flyout_flyoutAnimateOut(){return this._keyboardMovedUs?this._baseAnimateOut():(this._element.style.opacity=0,W.hidePopup(this._element,void 0!==this._currentPosition?this._currentPosition.animOffset:0))},_hideAllOtherFlyouts:function Flyout_hideAllOtherFlyouts(x){for(var V=A.document.querySelectorAll("."+K.flyoutClass),R=0;R<V.length;R++){var D=V[R].winControl;D&&!D.hidden&&D!==x&&D.hide()}},_handleKeyDown:function Flyout_handleKeyDown(V){V.keyCode!==x.space&&V.keyCode!==x.enter||this!==A.document.activeElement?!V.shiftKey||V.keyCode!==x.tab||this!==A.document.activeElement||V.altKey||V.ctrlKey||V.metaKey||(V.preventDefault(),V.stopPropagation(),this.winControl._focusOnLastFocusableElementOrThis()):(V.preventDefault(),V.stopPropagation(),this.winControl.hide())},_handleFocusIn:function Flyout_handleFocusIn(x){this.element.contains(x.relatedTarget)||ee._cascadeManager.handleFocusIntoFlyout(x)},_addFirstDiv:function Flyout_addFirstDiv(){var x=A.document.createElement("div");x.className=K.firstDivClass,x.style.display="inline",x.setAttribute("role","menuitem"),x.setAttribute("aria-hidden","true"),this._element.children[0]?this._element.insertBefore(x,this._element.children[0]):this._element.appendChild(x);var V=this;return j._addEventListener(x,"focusin",(function(){V._focusOnLastFocusableElementOrThis()}),!1),x},_addFinalDiv:function Flyout_addFinalDiv(){var x=A.document.createElement("div");x.className=K.finalDivClass,x.style.display="inline",x.setAttribute("role","menuitem"),x.setAttribute("aria-hidden","true"),this._element.appendChild(x);var V=this;return j._addEventListener(x,"focusin",(function(){V._focusOnFirstFocusableElementOrThis()}),!1),x},_writeProfilerMark:function Flyout_writeProfilerMark(x){}},{_cascadeManager:new Y});return ee}))})})),R("require-style!less/styles-contentdialog",[],(function(){})),R("require-style!less/colors-contentdialog",[],(function(){})),R("WinJS/Controls/Popup",["../Application","../Utilities/_Dispose","../_Accents","../Promise","../_Signal","../_LightDismissService","../Core/_BaseUtils","../Core/_Global","../Core/_WinRT","../Core/_Base","../Core/_Events","../Core/_ErrorFromName","../Core/_Resources","../Utilities/_Control","../Utilities/_ElementUtilities","../Utilities/_KeyboardInfo","../Utilities/_Hoverable","../Animations","./_LegacyAppBar/_Constants","require-style!less/styles-contentdialog","require-style!less/colors-contentdialog"],(function popupInit(A,V,R,D,N,U,B,F,W,H,z,G,j,q,Q,K,J,X,Y){"use strict";H.Namespace.define("WinJS.UI",{Popup:H.Namespace._lazy((function(){var A={get duplicateConstruction(){return"Invalid argument: Controls may only be instantiated one time for each DOM element"},get controlDisposed(){return"Cannot interact with the control after it has been disposed"},get popupAlreadyShowing(){return"Cannot show a Popup if there is already a Popup that is showing"}},R={none:"none",primary:"primary",secondary:"secondary"},B={popup:"vw-popup",backgroundOverlay:"vw-popup__scrim",popupRegion:"vw-popup__region"},W="result",j="beforeshow",J="aftershow",$="beforehide",Z="afterhide";function getDimension(x,A){return Q.convertToPixels(x,Q._getComputedStyle(x,null)[A])}function cancelablePromise(x){return D._cancelBlocker(x,(function(){x.cancel()}))}function onInputPaneShown(x){x.ensuredFocusedElementInView=!0,this.popup._renderForInputPane(x.occludedRect.height)}function onInputPaneHidden(){this.popup._clearInputPaneRendering()}function _(){}function interruptible(x,A){x._interruptibleWorkPromises=x._interruptibleWorkPromises||[];var V=new N;x._interruptibleWorkPromises.push(A(x,V.promise)),V.complete()}function cancelInterruptibles(){(this._interruptibleWorkPromises||[]).forEach((function(x){x.cancel()}))}Q.Key;var ee={Init:H.Class.define(null,{name:"Init",hidden:!0,enter:function Popup_InitState_enter(){var x=this.popup;x.modal?x._dismissable=new U.ModalElement({element:x._dom.root,tabIndex:x._dom.root.hasAttribute("tabIndex")?x._dom.root.tabIndex:-1,onLightDismiss:function(){x.hide(R.none)},onTakeFocus:function(A){x._dismissable.restoreFocus()}}):x._dismissable=new U.LightDismissableElement({element:x._dom.root,tabIndex:x._dom.root.hasAttribute("tabIndex")?x._dom.root.tabIndex:-1,onLightDismiss:function(){x.hide(R.none)},onTakeFocus:function(A){x._dismissable.restoreFocus()}}),this.popup._dismissedSignal=null,this.popup._setState(ee.Hidden,!1)},exit:_,show:function Popup_InitState_show(){throw"It's illegal to call show on the Init state"},hide:_,onCommandClicked:_,onInputPaneShown:_,onInputPaneHidden:_}),Hidden:H.Class.define(null,{name:"Hidden",hidden:!0,enter:function Popup_HiddenState_enter(x){x&&this.show()},exit:_,show:function Popup_HiddenState_show(){var x=this.popup._dismissedSignal=new N;return this.popup._setState(ee.BeforeShow),x.promise},hide:_,onCommandClicked:_,onInputPaneShown:_,onInputPaneHidden:_}),BeforeShow:H.Class.define(null,{name:"BeforeShow",hidden:!0,enter:function Popup_BeforeShowState_enter(){interruptible(this,(function(x,A){return A.then((function(){return x.popup._fireBeforeShow()})).then((function(A){return A||x.popup._cancelDismissalPromise(null),A})).then((function(A){A?x.popup._setState(ee.Showing):x.popup._setState(ee.Hidden,!1)}))}))},exit:cancelInterruptibles,show:function Popup_BeforeShowState_show(){return D.wrapError(new G("WinJS.UI.Popup.PopupAlreadyShowing",A.PopupAlreadyShowing))},hide:_,onCommandClicked:_,onInputPaneShown:_,onInputPaneHidden:_}),Showing:H.Class.define(null,{name:"Showing",hidden:{get:function Popup_ShowingState_hidden_get(){return!!this._pendingHide}},enter:function Popup_ShowingState_enter(){interruptible(this,(function(x,A){return A.then((function(){return x._pendingHide=null,x.popup._dom.root.style.display="flex",x.popup._addExternalListeners(),K._KeyboardInfo._visible&&x.popup._renderForInputPane(),U.shown(x.popup._dismissable),x.popup._playEntranceAnimation()})).then((function(){x.popup._fireEvent(J)})).then((function(){x.popup._setState(ee.Shown,x._pendingHide)}))}))},exit:cancelInterruptibles,show:function Popup_ShowingState_show(){if(this._pendingHide){var x=this._pendingHide.dismissalResult;return this._pendingHide=null,this.popup._resetDismissalPromise(x,new N).promise}return D.wrapError(new G("WinJS.UI.Popup.PopupAlreadyShowing",A.PopupAlreadyShowing))},hide:function Popup_ShowingState_hide(x){this._pendingHide={dismissalResult:x}},onCommandClicked:_,onInputPaneShown:onInputPaneShown,onInputPaneHidden:onInputPaneHidden}),Shown:H.Class.define(null,{name:"Shown",hidden:!1,enter:function Popup_ShownState_enter(x){x&&this.hide(x.dismissalResult)},exit:_,show:function Popup_ShownState_show(){return D.wrapError(new G("WinJS.UI.Popup.PopupAlreadyShowing",A.PopupAlreadyShowing))},hide:function Popup_ShownState_hide(x){this.popup._setState(ee.BeforeHide,x)},onCommandClicked:function Popup_ShownState_onCommandClicked(x){this.hide(x)},onInputPaneShown:onInputPaneShown,onInputPaneHidden:onInputPaneHidden}),BeforeHide:H.Class.define(null,{name:"BeforeHide",hidden:!1,enter:function Popup_BeforeHideState_enter(x){interruptible(this,(function(A,V){return V.then((function(){return A.popup._fireBeforeHide(x)})).then((function(V){V?A.popup._setState(ee.Hiding,x):A.popup._setState(ee.Shown,null)}))}))},exit:cancelInterruptibles,show:function Popup_BeforeHideState_show(){return D.wrapError(new G("WinJS.UI.Popup.PopupAlreadyShowing",A.PopupAlreadyShowing))},hide:_,onCommandClicked:_,onInputPaneShown:onInputPaneShown,onInputPaneHidden:onInputPaneHidden}),Hiding:H.Class.define(null,{name:"Hiding",hidden:{get:function Popup_HidingState_hidden_get(){return!this._showIsPending}},enter:function Popup_HidingState_enter(x){interruptible(this,(function(A,V){return V.then((function(){A._showIsPending=!1,A.popup._resetDismissalPromise(x,null)})).then((function(){A.popup._removeExternalListeners(),U.hidden(A.popup._dismissable),A.popup._dom.root.style.display="block",A.popup._clearInputPaneRendering(),A.popup._fireAfterHide(x)})).then((function(){A.popup._setState(ee.Hidden,A._showIsPending)}))}))},exit:cancelInterruptibles,show:function Popup_HidingState_show(){return this._showIsPending?D.wrapError(new G("WinJS.UI.Popup.PopupAlreadyShowing",A.PopupAlreadyShowing)):(this._showIsPending=!0,this.popup._dismissedSignal=new N,this.popup._dismissedSignal.promise)},hide:function Popup_HidingState_hide(x){this._showIsPending&&(this._showIsPending=!1,this.popup._resetDismissalPromise(x,null))},onCommandClicked:_,onInputPaneShown:_,onInputPaneHidden:_}),Disposed:H.Class.define(null,{name:"Disposed",hidden:!0,enter:function Popup_DisposedState_enter(){U.hidden(this.popup._dismissable),this.popup._removeExternalListeners(),this.popup._dismissedSignal&&this.popup._dismissedSignal.error(new G("WinJS.UI.Popup.ControlDisposed",A.controlDisposed))},exit:_,show:function Popup_DisposedState_show(){return D.wrapError(new G("WinJS.UI.Popup.ControlDisposed",A.controlDisposed))},hide:_,onCommandClicked:_,onInputPaneShown:_,onInputPaneHidden:_})},te={top:{top:"50px",left:"0px",keyframe:"WinJS-showFlyoutTop"},bottom:{top:"-50px",left:"0px",keyframe:"WinJS-showFlyoutBottom"},left:{top:"0px",left:"50px",keyframe:"WinJS-showFlyoutLeft"},right:{top:"0px",left:"-50px",keyframe:"WinJS-showFlyoutRight"}},ie={AnchorPositioning:H.Class.define((function AnchorPositioning_ctor(x,A,V){if("string"==typeof x?x=F.document.getElementById(x):x&&x.element&&(x=x.element),!x)throw new G("WinJS.UI.Popup.NoAnchor",strings.noAnchor);this.anchor=x,this.placement=A,this.alignment=V}),{getTopLeft:function AnchorPositioning_getTopLeft(x,A,V){var R,D,N,U,B;try{R=this.anchor.getBoundingClientRect()}catch(x){throw new G("WinJS.UI.Popup.NoAnchor",strings.noAnchor)}var F=x.totalHeight-x.contentHeight,W=x.contentHeight,H=V.getBoundingClientRect();function configureVerticalWithScroll(x){!function topHasMoreRoom(x){return spaceAbove(x)>spaceBelow(x)}(x)?(W=spaceBelow(x)-F,N=Y.pinToBottomEdge,B=te.bottom):(W=spaceAbove(x)-F,N=H.top,B=te.top),U=!0}function spaceAbove(x){return x.top-H.top}function spaceBelow(x){return H.bottom-x.bottom}function fitTop(x,A){return N=x-A.totalHeight,B=te.top,N>=H.top&&N+A.totalHeight<=H.bottom}function fitBottom(x,A){return B=te.bottom,(N=x)>=H.top&&N+A.totalHeight<=H.bottom}function fitLeft(x,A){return D=x-A.totalWidth,B=te.left,D>=0&&D+A.totalWidth<=H.width}function fitRight(x,A){return B=te.right,(D=x)>=0&&D+A.totalWidth<=H.width}function centerVertically(x,A){(N=x.top+x.height/2-A.totalHeight/2)<H.top?N=H.top:N+A.totalHeight>=H.bottom&&(N=Y.pinToBottomEdge)}function alignHorizontally(x,A,V){if("Center"===V)D=x.left+x.width/2-A.totalWidth/2;else if("Left"===V)D=x.left;else{if("Right"!==V)throw new G("WinJS.UI.Flyout.BadAlignment",strings.badAlignment);D=x.right-A.totalWidth}D<0?D=0:D+A.totalWidth>=H.width&&(D=Y.pinToRightEdge)}var z=this.alignment;switch(this.placement){case"Top":fitTop(R.top,x)||(N=H.top,U=!0,W=spaceAbove(R)-F),alignHorizontally(R,x,z);break;case"Bottom":fitBottom(R.bottom,x)||(N=Y.pinToBottomEdge,U=!0,W=spaceBelow(R)-F),alignHorizontally(R,x,z);break;case"Left":fitLeft(R.left,x)||(D=0),centerVertically(R,x);break;case"Right":fitRight(R.right,x)||(D=Y.pinToRightEdge),centerVertically(R,x);break;case"Autovertical":fitTop(R.top,x)||fitBottom(R.bottom,x)||configureVerticalWithScroll(R),alignHorizontally(R,x,z);break;case"Autohorizontal":fitLeft(R.left,x)||fitRight(R.right,x)||(D=Y.pinToRightEdge),centerVertically(R,x);break;case"Auto":!function fitsVerticallyWithCenteredAnchor(x,A){return(H.height-x.height)/2>=A.totalHeight}(R,x)?fitLeft(R.left,x)||fitRight(R.right,x)?centerVertically(R,x):(configureVerticalWithScroll(R),alignHorizontally(R,x,z)):(fitTop(R.top,x)||fitBottom(R.bottom,x),alignHorizontally(R,x,z));break;default:throw new G("WinJS.UI.Popup.BadPlacement",strings.badPlacement)}return{left:D,top:N,animOffset:B,doesScroll:U,contentHeight:W,verticalMarginBorderPadding:F}}}),CoordinatePositioning:H.Class.define((function CoordinatePositioning_ctor(x){if(x.clientX===+x.clientX&&x.clientY===+x.clientY){var A=x;x={x:A.clientX,y:A.clientY}}else if(x.x!==+x.x||x.y!==+x.y)throw new G("WinJS.UI.Popup.NoCoordinates",strings.noCoordinates);this.coordinates=x}),{getTopLeft:function CoordinatePositioning_getTopLeft(x,A,V){var R=this.coordinates,D=x.totalWidth-x.marginLeft-x.marginRight,N=A?D:0,U=x.totalHeight-x.contentHeight,B=x.contentHeight,F=R.y-x.marginTop,W=R.x-x.marginLeft-N,H=overlay.getBoundingClientRect();return F<0?F=0:F+x.totalHeight>H.bottom&&(F=Y.pinToBottomEdge),W<0?W=0:W+x.totalWidth>overlayRectidth&&(W=Y.pinToRightEdge),{left:W,top:F,verticalMarginBorderPadding:U,contentHeight:B,doesScroll:!1,animOffset:te.top}}})},ne=H.Class.define((function Popup_ctor(x,V){if(x&&x.winControl)throw new G("WinJS.UI.Popup.DuplicateConstruction",A.duplicateConstruction);V=V||{},this.controlName="Popup",this.controlType="WinJS.UI.Popup",this.contentControlElement,this._onInputPaneShownBound=this._onInputPaneShown.bind(this),this._onInputPaneHiddenBound=this._onInputPaneHidden.bind(this),this._onUpdateInputPaneRenderingBound=this._onUpdateInputPaneRendering.bind(this),this._boundNavigated=this.navigated.bind(this),this._boundOnOverlayClick=this._onOverlayClick.bind(this),this._boundOnClick=this._onClick.bind(this),this._disposed=!1,this._currentFocus=null,this._modal=V.modal,this._rendered={registeredForResize:!1,resizedForInputPane:!1,top:"",bottom:""},this._initializeDom(x||F.document.createElement("div"),V),this._setState(ee.Init),this._placement="Auto",this._alignment="Center",this._anchor=null,this._dialogScrimColor=null,q.setOptions(this,V)}),{dialogScrimColor:{get:function(){return this._dialogScrimColor},set:function(x){this._dialogScrimColor=x,this._dom&&this._dom.backgroundOverlay&&(this._dom.backgroundOverlay.style.backgroundColor=x)}},anchor:{get:function(){return this._anchor},set:function(x){this._anchor=x}},placement:{get:function(){return this._placement},set:function(x){if("Top"!==x&&"Bottom"!==x&&"Left"!==x&&"Right"!==x&&"Auto"!==x&&"Autohorizontal"!==x&&"Autovertical"!==x)throw new G("WinJS.UI.Popup.BadPlacement",strings.badPlacement);this._placement=x}},alignment:{get:function(){return this._alignment},set:function(x){if("Right"!==x&&"Left"!==x&&"Center"!==x)throw new G("WinJS.UI.Popup.BadAlignment",strings.badAlignment);this._alignment=x}},element:{get:function Popup_element_get(){return this._dom.root}},modal:{get:function modal_get(){return this._modal},set:function modal_set(x){this._modal=x}},hidden:{get:function Popup_hidden_get(){return this._state.hidden},set:function Popup_hidden_set(x){if(!x&&this._state.hidden){var nop=function(){};this.show().done(nop,nop)}else x&&!this._state.hidden&&this.hide(R.none)}},dispose:function Popup_dispose(){this._disposed||(this._setState(ee.Disposed),this._disposed=!0,Q._resizeNotifier.unsubscribe(this._dom.root,this._onUpdateInputPaneRenderingBound),V._disposeElement(this._dom.region))},navigated:function(x){this._fireEvent(W,{detail:{result:"RESULT_NAVIGATED"}});var A=this._state.show();return this._anchor?(Q.addClass(this.element,"vw-popup__anchor"),this._ensurePosition()):Q.removeClass(this.element,"vw-popup__anchor"),A},show:function(x,A,V,R){this._anchor=A||this._anchor,this._placement=V||this._placement,this._alignment=R||this._alignment,this._anchor&&(this._positionRequest=new ie.AnchorPositioning(this._anchor,this._placement,this._alignment)),this._show(x)},showAt:function Popup_showAt(x,A){this._writeProfilerMark("show,StartTM"),this._positionRequest=new ie.CoordinatePositioning(A),this._show(x)},_show:function Popup_show(x){this.disabled||this._disposed||x&&this._dom.region&&this._dom.region.winControl&&(this._dom.region.winControl.addEventListener("navigated",this._boundNavigated),this._dom.region.winControl._lastPage=null,this._dom.region.winControl._pageName=null,this._dom.region.winControl.pageName=x)},hide:function Popup_hide(x){this._state.hide(void 0===x?R.none:x)},_initializeDom:function Popup_initializeDom(A,V){this.viewName||V.viewName||this.pageName||V.pageName,A.winControl=this,Q.addClass(A,B.popup);var R='<div class="'+B.backgroundOverlay+'"></div>';R+='<div class="'+B.popupRegion+'" data-win-control="VisiWin.UI.Region" > </div>',A.innerHTML=R,A.style.display="flex";var D={};D.root=A,D.backgroundOverlay=D.root.firstElementChild,D.region=D.backgroundOverlay.nextElementSibling,D.commands=[],this._dom=D,D.root.addEventListener("keydown",this._onKeyDownEnteringElement.bind(this),!0),Q._addEventListener(D.root,"pointerdown",this._onPointerDown.bind(this)),Q._addEventListener(D.root,"pointerup",this._onPointerUp.bind(this)),D.root.addEventListener("click",this._boundOnClick),this.modal||D.backgroundOverlay.addEventListener("click",this._boundOnOverlayClick),x.UI.process(D.region)},_ensurePosition:function Popup_ensurePosition(){this._keyboardMovedUs=!1;var x=this._dom.region,A=function measureElement(x){return{marginTop:getDimension(x,"marginTop"),marginBottom:getDimension(x,"marginBottom"),marginLeft:getDimension(x,"marginLeft"),marginRight:getDimension(x,"marginRight"),totalWidth:Q.getTotalWidth(x),totalHeight:Q.getTotalHeight(x),contentWidth:Q.getContentWidth(x),contentHeight:Q.getContentHeight(x)}}(x),V="rtl"===Q._getComputedStyle(x).direction;this._currentPosition=this._positionRequest.getTopLeft(A,V,this._dom.backgroundOverlay),this._currentPosition.top<0?(x.style.bottom="0",x.style.top="auto"):(x.style.top=this._currentPosition.top+"px",x.style.bottom="auto"),this._currentPosition.left<0?(x.style.right="0px",x.style.left="auto"):(x.style.left=this._currentPosition.left+"px",x.style.right="auto"),this._currentPosition.doesScroll&&(Q.addClass(x,Y.scrollsClass),this._lastMaxHeight=x.style.maxHeight,x.style.maxHeight=this._currentPosition.contentHeight+"px")},_clearAdjustedStyles:function Flyout_clearAdjustedStyles(){var x=this._dom.region;x.style.top="0px",x.style.bottom="auto",x.style.left="0px",x.style.right="auto",Q.removeClass(x,"win-rightalign"),Q.removeClass(x,"win-leftalign")},_setAlignment:function Flyout_setAlignment(){switch(this._positionRequest.alignment){case"left":Q.addClass(this._dom.region,"win-leftalign");break;case"right":Q.addClass(this._dom.region,"win-rightalign")}},_elementInPopup:function Popup_elementInPopup(x){return null},_onCommandClicked:function Popup_onCommandClicked(x){this._state.onCommandClicked(x)},_onPointerDown:function Popup_onPointerDown(x){},_onPointerUp:function Popup_onPointerUp(x){},_onClick:function Popup_onClick(x){},_onOverlayClick:function Dialof_onOverlayClick(x){this._fireEvent(W,{detail:{result:"RESULT_OVERLAYCLICK"}})},_onKeyDownEnteringElement:function Popup_onKeyDownEnteringElement(x){},_onInputPaneShown:function Popup_onInputPaneShown(x){this._state.onInputPaneShown(x.detail.originalEvent)},_onInputPaneHidden:function Popup_onInputPaneHidden(){this._state.onInputPaneHidden()},_onUpdateInputPaneRendering:function Popup_onUpdateInputPaneRendering(){this._renderForInputPane()},_setState:function Popup_setState(x,A){this._disposed||(this._state&&this._state.exit(),this._state=new x,this._state.popup=this,this._state.enter(A))},_resetDismissalPromise:function Popup_resetDismissalPromise(x,A){var V=this._dismissedSignal,R=this._dismissedSignal=A;return V.complete({result:x}),R},_cancelDismissalPromise:function Popup_cancelDismissalPromise(x){var A=this._dismissedSignal,V=this._dismissedSignal=x;return A.cancel(),V},_fireEvent:function Popup_fireEvent(x,A){var V=(A=A||{}).detail||null,R=!!A.cancelable,D=F.document.createEvent("CustomEvent");return D.initCustomEvent(x,!0,R,V),this._dom.root.dispatchEvent(D)},_fireBeforeShow:function Popup_fireBeforeShow(){return this._fireEvent(j,{cancelable:!0})},_fireBeforeHide:function Popup_fireBeforeHide(x){return this._fireEvent($,{detail:{result:x},cancelable:!0})},_fireAfterHide:function Popup_fireAfterHide(x){this._fireEvent(Z,{detail:{result:x}})},_playEntranceAnimation:function Popup_playEntranceAnimation(){return cancelablePromise(X.fadeIn(this._dom.root))},_playExitAnimation:function Popup_playExitAnimation(){return cancelablePromise(X.fadeOut(this._dom.root))},_addExternalListeners:function Popup_addExternalListeners(){Q._inputPaneListener.addEventListener(this._dom.root,"showing",this._onInputPaneShownBound),Q._inputPaneListener.addEventListener(this._dom.root,"hiding",this._onInputPaneHiddenBound)},_removeExternalListeners:function Popup_removeExternalListeners(){Q._inputPaneListener.removeEventListener(this._dom.root,"showing",this._onInputPaneShownBound),Q._inputPaneListener.removeEventListener(this._dom.root,"hiding",this._onInputPaneHiddenBound)},_shouldResizeForInputPane:function Popup_shouldResizeForInputPane(){if(this._rendered.resizedForInputPane)return!0;var x=this._dom.region.getBoundingClientRect();return K._KeyboardInfo._visibleDocTop>x.top||K._KeyboardInfo._visibleDocBottom<x.bottom},_renderForInputPane:function Popup_renderForInputPane(){var x=this._rendered;if(x.registeredForResize||(Q._resizeNotifier.subscribe(this._dom.root,this._onUpdateInputPaneRenderingBound),x.registeredForResize=!0),this._shouldResizeForInputPane()){var A=K._KeyboardInfo._visibleDocTop+"px",V=K._KeyboardInfo._visibleDocBottomOffset+"px";x.top!==A&&(this._dom.root.style.top=A,x.top=A),x.bottom!==V&&(this._dom.root.style.bottom=V,x.bottom=V),x.resizedForInputPane||(this._dom.root.style.height="auto",F.document.activeElement,x.resizedForInputPane=!0)}},_clearInputPaneRendering:function Popup_clearInputPaneRendering(){var x=this._rendered;x.registeredForResize&&(Q._resizeNotifier.unsubscribe(this._dom.root,this._onUpdateInputPaneRenderingBound),x.registeredForResize=!1),""!==x.top&&(this._dom.root.style.top="",x.top=""),""!==x.bottom&&(this._dom.root.style.bottom="",x.bottom=""),x.resizedForInputPane&&(this._dom.root.style.height="",x.resizedForInputPane=!1)}},{DismissalResult:R,_ClassNames:B});return H.Class.mix(ne,z.createEventProperties("result","beforeshow","aftershow","beforehide","afterhide")),H.Class.mix(ne,q.DOMEventMixin),ne}))})})),R("WinJS/Controls/SettingsFlyout",["../Core/_Global","../Core/_WinRT","../Core/_Base","../Core/_BaseUtils","../Core/_ErrorFromName","../Core/_Events","../Core/_Resources","../Core/_WriteProfilerMark","../Animations","../Pages","../Promise","../_LightDismissService","../Utilities/_Dispose","../Utilities/_ElementUtilities","../Utilities/_ElementListUtilities","../Utilities/_Hoverable","./_LegacyAppBar/_Constants","./Flyout/_Overlay"],(function settingsFlyoutInit(x,A,V,R,D,N,U,B,F,W,H,z,G,j,q,Q,K,J){"use strict";V.Namespace.define("WinJS.UI",{SettingsFlyout:V.Namespace._lazy((function(){var R,B=j.Key,Q=N._createEventProperty;function _shouldAnimateFromLeft(){if(A.Windows.UI.ApplicationSettings.SettingsEdgeLocation){var x=A.Windows.UI.ApplicationSettings;return x.SettingsPane.edge===x.SettingsEdgeLocation.left}return!1}function _getChildSettingsControl(x,A){for(var V,R,D=x.querySelectorAll("."+K.settingsFlyoutClass),N=0;N<D.length;N++)if(R=D[N].winControl){if(R.settingsCommandId===A){V=R;break}D[N].id===A&&(V=V||R)}return V}var X=V.Class.derive(J._Overlay,(function SettingsFlyout_ctor(A,V){j._deprecated($.settingsFlyoutIsDeprecated),this._element=A||x.document.createElement("div"),this._id=this._element.id||j._uniqueID(this._element),this._baseOverlayConstructor(this._element,V),this._addFirstDiv(),this._addFinalDiv(),this._element.addEventListener("keydown",this._handleKeyDown,!0),this._element.style.visibilty="hidden",this._element.style.display="none",j.addClass(this._element,K.settingsFlyoutClass);var D=this;this._dismissable=new z.LightDismissableElement({element:this._element,tabIndex:this._element.hasAttribute("tabIndex")?this._element.tabIndex:-1,onLightDismiss:function(){D.hide()},onTakeFocus:function(x){if(!D._dismissable.restoreFocus()){var A=D.element.querySelector("."+K.firstDivClass);A&&(A.msSettingsFlyoutFocusOut||(j._addEventListener(A,"focusout",(function(){R=1}),!1),A.msSettingsFlyoutFocusOut=!0),R=0,j._tryFocus(A,x))}}}),q.query("div.win-content",this._element).forEach((function(x){j._matchesSelector(x,".win-ui-dark, .win-ui-dark *")||j.addClass(x,K.flyoutLightClass)}));var N=this._element.getAttribute("role");null!==N&&""!==N&&void 0!==N||this._element.setAttribute("role","dialog");var U=this._element.getAttribute("aria-label");null!==U&&""!==U&&void 0!==U||this._element.setAttribute("aria-label",$.ariaLabel),this._currentAnimateIn=this._animateSlideIn,this._currentAnimateOut=this._animateSlideOut}),{width:{get:function(){return this._width},set:function(x){j._deprecated($.widthDeprecationMessage),x!==this._width&&("narrow"===this._width?j.removeClass(this._element,K.narrowClass):"wide"===this._width&&j.removeClass(this._element,K.wideClass),this._width=x,"narrow"===this._width?j.addClass(this._element,K.narrowClass):"wide"===this._width&&j.addClass(this._element,K.wideClass))}},settingsCommandId:{get:function(){return this._settingsCommandId},set:function(x){this._settingsCommandId=x}},disabled:{get:function(){return!!this._element.disabled},set:function(x){x=!!x,!!this._element.disabled!==x&&(this._element.disabled=x,!this.hidden&&this._element.disabled&&this._dismiss())}},onbeforeshow:Q(J._Overlay.beforeShow),onaftershow:Q(J._Overlay.afterShow),onbeforehide:Q(J._Overlay.beforeHide),onafterhide:Q(J._Overlay.afterHide),show:function(){this.disabled||this._show()},_dispose:function SettingsFlyout_dispose(){z.hidden(this._dismissable),G.disposeSubTree(this.element),this._dismiss()},_show:function SettingsFlyout_show(){if(this._baseShow()){if(!j.hasClass(this.element.children[0],K.firstDivClass)){var x=this.element.querySelectorAll("."+K.firstDivClass);x&&x.length>0&&x.item(0).parentNode.removeChild(x.item(0)),this._addFirstDiv()}if(!j.hasClass(this.element.children[this.element.children.length-1],K.finalDivClass)){var A=this.element.querySelectorAll("."+K.finalDivClass);A&&A.length>0&&A.item(0).parentNode.removeChild(A.item(0)),this._addFinalDiv()}this._setBackButtonsAriaLabel(),z.shown(this._dismissable)}},_setBackButtonsAriaLabel:function SettingsFlyout_setBackButtonsAriaLabel(){for(var x,A=this.element.querySelectorAll(".win-backbutton"),V=0;V<A.length;V++)null!==(x=A[V].getAttribute("aria-label"))&&""!==x&&void 0!==x||A[V].setAttribute("aria-label",$.backbuttonAriaLabel)},hide:function(){this._hide()},_hide:function SettingsFlyout_hide(){this._baseHide()},_beforeEndHide:function SettingsFlyout_beforeEndHide(){z.hidden(this._dismissable)},_animateSlideIn:function SettingsFlyout_animateSlideIn(){var x=_shouldAnimateFromLeft(),A=x?"-100px":"100px";q.query("div.win-content",this._element).forEach((function(x){F.enterPage(x,{left:A})}));var V,R=this._element.offsetWidth;return x?(V={top:"0px",left:"-"+R+"px"},this._element.style.right="auto",this._element.style.left="0px"):(V={top:"0px",left:R+"px"},this._element.style.right="0px",this._element.style.left="auto"),this._element.style.opacity=1,this._element.style.visibility="visible",F.showPanel(this._element,V)},_animateSlideOut:function SettingsFlyout_animateSlideOut(){var x,A=this._element.offsetWidth;return _shouldAnimateFromLeft()?(x={top:"0px",left:A+"px"},this._element.style.right="auto",this._element.style.left="-"+A+"px"):(x={top:"0px",left:"-"+A+"px"},this._element.style.right="-"+A+"px",this._element.style.left="auto"),F.showPanel(this._element,x)},_fragmentDiv:{get:function SettingsFlyout_fragmentDiv_get(){return this._fragDiv},set:function SettingsFlyout_fragmentDiv_set(x){this._fragDiv=x}},_unloadPage:function SettingsFlyout_unloadPage(A){var V=A.currentTarget.winControl;V.removeEventListener(J._Overlay.afterHide,this._unloadPage,!1),H.as().then((function(){V._fragmentDiv&&(x.document.body.removeChild(V._fragmentDiv),V._fragmentDiv=null)}))},_dismiss:function SettingsFlyout_dismiss(){this.addEventListener(J._Overlay.afterHide,this._unloadPage,!1),this._hide()},_handleKeyDown:function SettingsFlyout_handleKeyDown(A){if(A.keyCode!==B.space&&A.keyCode!==B.enter||this.children[0]!==x.document.activeElement){if(A.shiftKey&&A.keyCode===B.tab&&this.children[0]===x.document.activeElement){A.preventDefault(),A.stopPropagation();for(var V=this.getElementsByTagName("*"),R=V.length-2;R>=0&&(V[R].focus(),V[R]!==x.document.activeElement);R--);}}else A.preventDefault(),A.stopPropagation(),this.winControl._dismiss()},_focusOnLastFocusableElementFromParent:function SettingsFlyout_focusOnLastFocusableElementFromParent(){var A=x.document.activeElement;if(R&&A&&j.hasClass(A,K.firstDivClass)){var V=this.parentElement.getElementsByTagName("*");if(!(V.length<=2)){var D,N=V[V.length-1].tabIndex;if(N){for(D=V.length-2;D>0;D--)if(V[D].tabIndex===N){V[D].focus();break}}else for(D=V.length-2;D>0&&("DIV"===V[D].tagName&&null===V[D].getAttribute("tabIndex")||(V[D].focus(),V[D]!==x.document.activeElement));D--);}}},_focusOnFirstFocusableElementFromParent:function SettingsFlyout_focusOnFirstFocusableElementFromParent(){var A=x.document.activeElement;if(A&&j.hasClass(A,K.finalDivClass)){var V=this.parentElement.getElementsByTagName("*");if(!(V.length<=2)){var R,D=V[0].tabIndex;if(D){for(R=1;R<V.length-1;R++)if(V[R].tabIndex===D){V[R].focus();break}}else for(R=1;R<V.length-1&&("DIV"===V[R].tagName&&null===V[R].getAttribute("tabIndex")||(V[R].focus(),V[R]!==x.document.activeElement));R++);}}},_addFirstDiv:function SettingsFlyout_addFirstDiv(){for(var A=this._element.getElementsByTagName("*"),V=0,R=0;R<A.length;R++)0<A[R].tabIndex&&(0===V||A[R].tabIndex<V)&&(V=A[R].tabIndex);var D=x.document.createElement("div");D.className=K.firstDivClass,D.style.display="inline",D.setAttribute("role","menuitem"),D.setAttribute("aria-hidden","true"),D.tabIndex=V,j._addEventListener(D,"focusin",this._focusOnLastFocusableElementFromParent,!1),this._element.children[0]?this._element.insertBefore(D,this._element.children[0]):this._element.appendChild(D)},_addFinalDiv:function SettingsFlyout_addFinalDiv(){for(var A=this._element.getElementsByTagName("*"),V=0,R=0;R<A.length;R++)A[R].tabIndex>V&&(V=A[R].tabIndex);var D=x.document.createElement("div");D.className=K.finalDivClass,D.style.display="inline",D.setAttribute("role","menuitem"),D.setAttribute("aria-hidden","true"),D.tabIndex=V,j._addEventListener(D,"focusin",this._focusOnFirstFocusableElementFromParent,!1),this._element.appendChild(D)},_writeProfilerMark:function SettingsFlyout_writeProfilerMark(x){}});X.show=function(){A.Windows.UI.ApplicationSettings.SettingsPane&&A.Windows.UI.ApplicationSettings.SettingsPane.show();for(var V=x.document.querySelectorAll('div[data-win-control="WinJS.UI.SettingsFlyout"]'),R=V.length,D=0;D<R;D++){var N=V[D].winControl;N&&N._dismiss()}};var Y={event:void 0};X.populateSettings=function(x){if(Y.event=x.detail,Y.event.applicationcommands){var V=A.Windows.UI.ApplicationSettings;Object.keys(Y.event.applicationcommands).forEach((function(x){var A=Y.event.applicationcommands[x];A.title||(A.title=x);var R=new V.SettingsCommand(x,A.title,X._onSettingsCommand);Y.event.e.request.applicationCommands.append(R)}))}},X._onSettingsCommand=function(x){var A=x.id;Y.event.applicationcommands&&Y.event.applicationcommands[A]&&X.showSettings(A,Y.event.applicationcommands[A].href)},X.showSettings=function(A,V){var R=_getChildSettingsControl(x.document,A);if(R)R.show();else{if(!V)throw new D("WinJS.UI.SettingsFlyout.BadReference",$.badReference);var N=x.document.createElement("div");N=x.document.body.appendChild(N),W.render(V,N).then((function(){(R=_getChildSettingsControl(N,A))?(R._fragmentDiv=N,R.show()):x.document.body.removeChild(N)}))}};var $={get ariaLabel(){return U._getWinJSString("ui/settingsFlyoutAriaLabel").value},get badReference(){return"Invalid argument: Invalid href to settings flyout fragment"},get backbuttonAriaLabel(){return U._getWinJSString("ui/backbuttonarialabel").value},get widthDeprecationMessage(){return"SettingsFlyout.width may be altered or unavailable in future versions. Instead, style the CSS width property on elements with the .win-settingsflyout class."},get settingsFlyoutIsDeprecated(){return"SettingsFlyout is deprecated and may not be available in future releases. Instead, put settings on their own page within the app."}};return X}))})})),R("WinJS/Controls/ContentDialog",["../Application","../Utilities/_Dispose","../_Accents","../Promise","../_Signal","../_LightDismissService","../Core/_BaseUtils","../Core/_Global","../Core/_WinRT","../Core/_Base","../Core/_Events","../Core/_ErrorFromName","../Core/_Resources","../Utilities/_Control","../Utilities/_ElementUtilities","../Utilities/_KeyboardInfo","../Utilities/_Hoverable","../Animations","require-style!less/styles-contentdialog","require-style!less/colors-contentdialog"],(function contentDialogInit(x,A,V,R,D,N,U,B,F,W,H,z,G,j,q,Q,K,J){"use strict";V.createAccentRule(".win-contentdialog-dialog",[{name:"outline-color",value:V.ColorTypes.accent}]),W.Namespace.define("WinJS.UI",{ContentDialog:W.Namespace._lazy((function(){var x,V={get duplicateConstruction(){return"Invalid argument: Controls may only be instantiated one time for each DOM element"},get controlDisposed(){return"Cannot interact with the control after it has been disposed"},get contentDialogAlreadyShowing(){return"Cannot show a ContentDialog if there is already a ContentDialog that is showing"}},F={none:"none",primary:"primary",secondary:"secondary"},G={contentDialog:"win-contentdialog",backgroundOverlay:"win-contentdialog-backgroundoverlay",dialog:"win-contentdialog-dialog",title:"win-contentdialog-title",content:"win-contentdialog-content",commands:"win-contentdialog-commands",primaryCommand:"win-contentdialog-primarycommand",secondaryCommand:"win-contentdialog-secondarycommand",_verticalAlignment:"win-contentdialog-verticalalignment",_scroller:"win-contentdialog-scroller",_column0or1:"win-contentdialog-column0or1",_visible:"win-contentdialog-visible",_tabStop:"win-contentdialog-tabstop",_commandSpacer:"win-contentdialog-commandspacer",_deviceFixedSupported:"win-contentdialog-devicefixedsupported"},K="beforeshow",X="aftershow",Y="beforehide",$="afterhide";function cancelablePromise(x){return R._cancelBlocker(x,(function(){x.cancel()}))}function onInputPaneShown(x){x.ensuredFocusedElementInView=!0,this.dialog._renderForInputPane(x.occludedRect.height)}function onInputPaneHidden(){this.dialog._clearInputPaneRendering()}function _(){}function interruptible(x,A){x._interruptibleWorkPromises=x._interruptibleWorkPromises||[];var V=new D;x._interruptibleWorkPromises.push(A(x,V.promise)),V.complete()}function cancelInterruptibles(){(this._interruptibleWorkPromises||[]).forEach((function(x){x.cancel()}))}var Z={Init:W.Class.define(null,{name:"Init",hidden:!0,enter:function ContentDialog_InitState_enter(){var x=this.dialog;x._dismissable=new N.ModalElement({element:x._dom.root,tabIndex:x._dom.root.hasAttribute("tabIndex")?x._dom.root.tabIndex:-1,onLightDismiss:function(){x.hide(F.none)},onTakeFocus:function(A){x._dismissable.restoreFocus()||q._tryFocusOnAnyElement(x._dom.dialog,A)}}),this.dialog._dismissedSignal=null,this.dialog._setState(Z.Hidden,!1)},exit:_,show:function ContentDialog_InitState_show(){throw"It's illegal to call show on the Init state"},hide:_,onCommandClicked:_,onInputPaneShown:_,onInputPaneHidden:_}),Hidden:W.Class.define(null,{name:"Hidden",hidden:!0,enter:function ContentDialog_HiddenState_enter(x){x&&this.show()},exit:_,show:function ContentDialog_HiddenState_show(){var x=this.dialog._dismissedSignal=new D;return this.dialog._setState(Z.BeforeShow),x.promise},hide:_,onCommandClicked:_,onInputPaneShown:_,onInputPaneHidden:_}),BeforeShow:W.Class.define(null,{name:"BeforeShow",hidden:!0,enter:function ContentDialog_BeforeShowState_enter(){interruptible(this,(function(x,A){return A.then((function(){return x.dialog._fireBeforeShow()})).then((function(A){return A||x.dialog._cancelDismissalPromise(null),A})).then((function(A){A?x.dialog._setState(Z.Showing):x.dialog._setState(Z.Hidden,!1)}))}))},exit:cancelInterruptibles,show:function ContentDialog_BeforeShowState_show(){return R.wrapError(new z("WinJS.UI.ContentDialog.ContentDialogAlreadyShowing",V.contentDialogAlreadyShowing))},hide:_,onCommandClicked:_,onInputPaneShown:_,onInputPaneHidden:_}),Showing:W.Class.define(null,{name:"Showing",hidden:{get:function ContentDialog_ShowingState_hidden_get(){return!!this._pendingHide}},enter:function ContentDialog_ShowingState_enter(){interruptible(this,(function(x,A){return A.then((function(){return x._pendingHide=null,q.addClass(x.dialog._dom.root,G._visible),x.dialog._addExternalListeners(),Q._KeyboardInfo._visible&&x.dialog._renderForInputPane(),N.shown(x.dialog._dismissable),x.dialog._playEntranceAnimation()})).then((function(){x.dialog._fireEvent(X)})).then((function(){x.dialog._setState(Z.Shown,x._pendingHide)}))}))},exit:cancelInterruptibles,show:function ContentDialog_ShowingState_show(){if(this._pendingHide){var x=this._pendingHide.dismissalResult;return this._pendingHide=null,this.dialog._resetDismissalPromise(x,new D).promise}return R.wrapError(new z("WinJS.UI.ContentDialog.ContentDialogAlreadyShowing",V.contentDialogAlreadyShowing))},hide:function ContentDialog_ShowingState_hide(x){this._pendingHide={dismissalResult:x}},onCommandClicked:_,onInputPaneShown:onInputPaneShown,onInputPaneHidden:onInputPaneHidden}),Shown:W.Class.define(null,{name:"Shown",hidden:!1,enter:function ContentDialog_ShownState_enter(x){x&&this.hide(x.dismissalResult)},exit:_,show:function ContentDialog_ShownState_show(){return R.wrapError(new z("WinJS.UI.ContentDialog.ContentDialogAlreadyShowing",V.contentDialogAlreadyShowing))},hide:function ContentDialog_ShownState_hide(x){this.dialog._setState(Z.BeforeHide,x)},onCommandClicked:function ContentDialog_ShownState_onCommandClicked(x){this.hide(x)},onInputPaneShown:onInputPaneShown,onInputPaneHidden:onInputPaneHidden}),BeforeHide:W.Class.define(null,{name:"BeforeHide",hidden:!1,enter:function ContentDialog_BeforeHideState_enter(x){interruptible(this,(function(A,V){return V.then((function(){return A.dialog._fireBeforeHide(x)})).then((function(V){V?A.dialog._setState(Z.Hiding,x):A.dialog._setState(Z.Shown,null)}))}))},exit:cancelInterruptibles,show:function ContentDialog_BeforeHideState_show(){return R.wrapError(new z("WinJS.UI.ContentDialog.ContentDialogAlreadyShowing",V.contentDialogAlreadyShowing))},hide:_,onCommandClicked:_,onInputPaneShown:onInputPaneShown,onInputPaneHidden:onInputPaneHidden}),Hiding:W.Class.define(null,{name:"Hiding",hidden:{get:function ContentDialog_HidingState_hidden_get(){return!this._showIsPending}},enter:function ContentDialog_HidingState_enter(x){interruptible(this,(function(A,V){return V.then((function(){A._showIsPending=!1,A.dialog._resetDismissalPromise(x,null)})).then((function(){return A.dialog._playExitAnimation()})).then((function(){A.dialog._removeExternalListeners(),N.hidden(A.dialog._dismissable),q.removeClass(A.dialog._dom.root,G._visible),A.dialog._clearInputPaneRendering(),A.dialog._fireAfterHide(x)})).then((function(){A.dialog._setState(Z.Hidden,A._showIsPending)}))}))},exit:cancelInterruptibles,show:function ContentDialog_HidingState_show(){return this._showIsPending?R.wrapError(new z("WinJS.UI.ContentDialog.ContentDialogAlreadyShowing",V.contentDialogAlreadyShowing)):(this._showIsPending=!0,this.dialog._dismissedSignal=new D,this.dialog._dismissedSignal.promise)},hide:function ContentDialog_HidingState_hide(x){this._showIsPending&&(this._showIsPending=!1,this.dialog._resetDismissalPromise(x,null))},onCommandClicked:_,onInputPaneShown:_,onInputPaneHidden:_}),Disposed:W.Class.define(null,{name:"Disposed",hidden:!0,enter:function ContentDialog_DisposedState_enter(){N.hidden(this.dialog._dismissable),this.dialog._removeExternalListeners(),this.dialog._dismissedSignal&&this.dialog._dismissedSignal.error(new z("WinJS.UI.ContentDialog.ControlDisposed",V.controlDisposed))},exit:_,show:function ContentDialog_DisposedState_show(){return R.wrapError(new z("WinJS.UI.ContentDialog.ControlDisposed",V.controlDisposed))},hide:_,onCommandClicked:_,onInputPaneShown:_,onInputPaneHidden:_})},ee=W.Class.define((function ContentDialog_ctor(x,A){if(x&&x.winControl)throw new z("WinJS.UI.ContentDialog.DuplicateConstruction",V.duplicateConstruction);A=A||{},this._onInputPaneShownBound=this._onInputPaneShown.bind(this),this._onInputPaneHiddenBound=this._onInputPaneHidden.bind(this),this._onUpdateInputPaneRenderingBound=this._onUpdateInputPaneRendering.bind(this),this._disposed=!1,this._currentFocus=null,this._rendered={registeredForResize:!1,resizedForInputPane:!1,top:"",bottom:""},this._initializeDom(x||B.document.createElement("div")),this._setState(Z.Init),this.title="",this.primaryCommandText="",this.primaryCommandDisabled=!1,this.secondaryCommandText="",this.secondaryCommandDisabled=!1,j.setOptions(this,A)}),{element:{get:function ContentDialog_element_get(){return this._dom.root}},title:{get:function ContentDialog_title_get(){return this._title},set:function ContentDialog_title_set(x){x=x||"",this._title!==x&&(this._title=x,this._dom.title.textContent=x,this._dom.title.style.display=x?"":"none")}},primaryCommandText:{get:function ContentDialog_primaryCommandText_get(){return this._primaryCommandText},set:function ContentDialog_primaryCommandText_set(x){x=x||"",this._primaryCommandText!==x&&(this._primaryCommandText=x,this._dom.commands[0].textContent=x,this._updateCommandsUI())}},secondaryCommandText:{get:function ContentDialog_secondaryCommandText_get(){return this._secondaryCommandText},set:function ContentDialog_secondaryCommandText_set(x){x=x||"",this._secondaryCommandText!==x&&(this._secondaryCommandText=x,this._dom.commands[1].textContent=x,this._updateCommandsUI())}},primaryCommandDisabled:{get:function ContentDialog_primaryCommandDisabled_get(){return this._primaryCommandDisabled},set:function ContentDialog_primaryCommandDisabled_set(x){x=!!x,this._primaryCommandDisabled!==x&&(this._primaryCommandDisabled=x,this._dom.commands[0].disabled=x)}},secondaryCommandDisabled:{get:function ContentDialog_secondaryCommandDisabled_get(){return this._secondaryCommandDisabled},set:function ContentDialog_secondaryCommandDisabled_set(x){x=!!x,this._secondaryCommandDisabled!==x&&(this._secondaryCommandDisabled=x,this._dom.commands[1].disabled=x)}},hidden:{get:function ContentDialog_hidden_get(){return this._state.hidden},set:function ContentDialog_hidden_set(x){if(!x&&this._state.hidden){var nop=function(){};this.show().done(nop,nop)}else x&&!this._state.hidden&&this.hide(F.none)}},dispose:function ContentDialog_dispose(){this._disposed||(this._setState(Z.Disposed),this._disposed=!0,q._resizeNotifier.unsubscribe(this._dom.root,this._onUpdateInputPaneRenderingBound),A._disposeElement(this._dom.content))},show:function ContentDialog_show(){return this._state.show()},hide:function ContentDialog_hide(x){this._state.hide(void 0===x?F.none:x)},_initializeDom:function ContentDialog_initializeDom(A){var V=B.document.createElement("div");V.className=G.content,q._reparentChildren(A,V),A.winControl=this,q.addClass(A,G.contentDialog),q.addClass(A,G._verticalAlignment),A.innerHTML='<div class="'+G.backgroundOverlay+'"></div><div class="'+G._tabStop+'"></div><div tabindex="-1" role="dialog" class="'+G.dialog+'"><h2 class="'+G.title+'" role="heading"></h2><div class="'+G._scroller+'"></div><div class="'+G.commands+'"><button type="button" class="'+G._commandSpacer+' win-button"></button><button type="button" class="'+G.primaryCommand+' win-button"></button><button type="button" class="'+G.secondaryCommand+' win-button"></button></div></div><div class="'+G._tabStop+'"></div><div class="'+G._column0or1+'"></div>';var R={};R.root=A,R.backgroundOverlay=R.root.firstElementChild,R.startBodyTab=R.backgroundOverlay.nextElementSibling,R.dialog=R.startBodyTab.nextElementSibling,R.title=R.dialog.firstElementChild,R.scroller=R.title.nextElementSibling,R.commandContainer=R.scroller.nextElementSibling,R.commandSpacer=R.commandContainer.firstElementChild,R.commands=[],R.commands.push(R.commandSpacer.nextElementSibling),R.commands.push(R.commands[0].nextElementSibling),R.endBodyTab=R.dialog.nextElementSibling,R.content=V,this._dom=R,R.scroller.appendChild(R.content),q._ensureId(R.title),q._ensureId(R.startBodyTab),q._ensureId(R.endBodyTab),R.dialog.setAttribute("aria-labelledby",R.title.id),R.startBodyTab.setAttribute("x-ms-aria-flowfrom",R.endBodyTab.id),R.endBodyTab.setAttribute("aria-flowto",R.startBodyTab.id),this._updateTabIndices(),R.root.addEventListener("keydown",this._onKeyDownEnteringElement.bind(this),!0),q._addEventListener(R.root,"pointerdown",this._onPointerDown.bind(this)),q._addEventListener(R.root,"pointerup",this._onPointerUp.bind(this)),R.root.addEventListener("click",this._onClick.bind(this)),q._addEventListener(R.startBodyTab,"focusin",this._onStartBodyTabFocusIn.bind(this)),q._addEventListener(R.endBodyTab,"focusin",this._onEndBodyTabFocusIn.bind(this)),R.commands[0].addEventListener("click",this._onCommandClicked.bind(this,F.primary)),R.commands[1].addEventListener("click",this._onCommandClicked.bind(this,F.secondary)),function supportsMsDevicedFixed(A){if(void 0===x){var V=B.document.createElement("div");V.style.position="-ms-device-fixed",x="-ms-device-fixed"===q._getComputedStyle(V).position}return x}()&&q.addClass(R.root,G._deviceFixedSupported)},_updateCommandsUI:function ContentDialog_updateCommandsUI(){this._dom.commands[0].style.display=this.primaryCommandText?"":"none",this._dom.commands[1].style.display=this.secondaryCommandText?"":"none",this._dom.commandSpacer.style.display=this.primaryCommandText&&!this.secondaryCommandText||!this.primaryCommandText&&this.secondaryCommandText?"":"none"},_updateTabIndices:function ContentDialog_updateTabIndices(){this._updateTabIndicesThrottled||(this._updateTabIndicesThrottled=U._throttledFunction(100,this._updateTabIndicesImpl.bind(this))),this._updateTabIndicesThrottled()},_updateTabIndicesImpl:function ContentDialog_updateTabIndicesImpl(){var x=q._getHighAndLowTabIndices(this._dom.content);this._dom.startBodyTab.tabIndex=x.lowest,this._dom.commands[0].tabIndex=x.highest,this._dom.commands[1].tabIndex=x.highest,this._dom.endBodyTab.tabIndex=x.highest},_elementInDialog:function ContentDialog_elementInDialog(x){return this._dom.dialog.contains(x)||x===this._dom.startBodyTab||x===this._dom.endBodyTab},_onCommandClicked:function ContentDialog_onCommandClicked(x){this._state.onCommandClicked(x)},_onPointerDown:function ContentDialog_onPointerDown(x){x.stopPropagation(),this._elementInDialog(x.target)||x.preventDefault()},_onPointerUp:function ContentDialog_onPointerUp(x){x.stopPropagation(),this._elementInDialog(x.target)||x.preventDefault()},_onClick:function ContentDialog_onClick(x){x.stopPropagation(),this._elementInDialog(x.target)||x.preventDefault()},_onKeyDownEnteringElement:function ContentDialog_onKeyDownEnteringElement(x){x.keyCode===q.Key.tab&&this._updateTabIndices()},_onStartBodyTabFocusIn:function ContentDialog_onStartBodyTabFocusIn(){q._focusLastFocusableElement(this._dom.dialog)},_onEndBodyTabFocusIn:function ContentDialog_onEndBodyTabFocusIn(){q._focusFirstFocusableElement(this._dom.dialog)},_onInputPaneShown:function ContentDialog_onInputPaneShown(x){this._state.onInputPaneShown(x.detail.originalEvent)},_onInputPaneHidden:function ContentDialog_onInputPaneHidden(){this._state.onInputPaneHidden()},_onUpdateInputPaneRendering:function ContentDialog_onUpdateInputPaneRendering(){this._renderForInputPane()},_setState:function ContentDialog_setState(x,A){this._disposed||(this._state&&this._state.exit(),this._state=new x,this._state.dialog=this,this._state.enter(A))},_resetDismissalPromise:function ContentDialog_resetDismissalPromise(x,A){var V=this._dismissedSignal,R=this._dismissedSignal=A;return V.complete({result:x}),R},_cancelDismissalPromise:function ContentDialog_cancelDismissalPromise(x){var A=this._dismissedSignal,V=this._dismissedSignal=x;return A.cancel(),V},_fireEvent:function ContentDialog_fireEvent(x,A){var V=(A=A||{}).detail||null,R=!!A.cancelable,D=B.document.createEvent("CustomEvent");return D.initCustomEvent(x,!0,R,V),this._dom.root.dispatchEvent(D)},_fireBeforeShow:function ContentDialog_fireBeforeShow(){return this._fireEvent(K,{cancelable:!0})},_fireBeforeHide:function ContentDialog_fireBeforeHide(x){return this._fireEvent(Y,{detail:{result:x},cancelable:!0})},_fireAfterHide:function ContentDialog_fireAfterHide(x){this._fireEvent($,{detail:{result:x}})},_playEntranceAnimation:function ContentDialog_playEntranceAnimation(){return cancelablePromise(J.fadeIn(this._dom.root))},_playExitAnimation:function ContentDialog_playExitAnimation(){return cancelablePromise(J.fadeOut(this._dom.root))},_addExternalListeners:function ContentDialog_addExternalListeners(){q._inputPaneListener.addEventListener(this._dom.root,"showing",this._onInputPaneShownBound),q._inputPaneListener.addEventListener(this._dom.root,"hiding",this._onInputPaneHiddenBound)},_removeExternalListeners:function ContentDialog_removeExternalListeners(){q._inputPaneListener.removeEventListener(this._dom.root,"showing",this._onInputPaneShownBound),q._inputPaneListener.removeEventListener(this._dom.root,"hiding",this._onInputPaneHiddenBound)},_shouldResizeForInputPane:function ContentDialog_shouldResizeForInputPane(){if(this._rendered.resizedForInputPane)return!0;var x=this._dom.dialog.getBoundingClientRect();return Q._KeyboardInfo._visibleDocTop>x.top||Q._KeyboardInfo._visibleDocBottom<x.bottom},_renderForInputPane:function ContentDialog_renderForInputPane(){var x=this._rendered;if(x.registeredForResize||(q._resizeNotifier.subscribe(this._dom.root,this._onUpdateInputPaneRenderingBound),x.registeredForResize=!0),this._shouldResizeForInputPane()){var A=Q._KeyboardInfo._visibleDocTop+"px",V=Q._KeyboardInfo._visibleDocBottomOffset+"px";if(x.top!==A&&(this._dom.root.style.top=A,x.top=A),x.bottom!==V&&(this._dom.root.style.bottom=V,x.bottom=V),!x.resizedForInputPane){this._dom.scroller.insertBefore(this._dom.title,this._dom.content),this._dom.root.style.height="auto";var R=B.document.activeElement;R&&this._dom.scroller.contains(R)&&R.scrollIntoView(),x.resizedForInputPane=!0}}},_clearInputPaneRendering:function ContentDialog_clearInputPaneRendering(){var x=this._rendered;x.registeredForResize&&(q._resizeNotifier.unsubscribe(this._dom.root,this._onUpdateInputPaneRenderingBound),x.registeredForResize=!1),""!==x.top&&(this._dom.root.style.top="",x.top=""),""!==x.bottom&&(this._dom.root.style.bottom="",x.bottom=""),x.resizedForInputPane&&(this._dom.dialog.insertBefore(this._dom.title,this._dom.scroller),this._dom.root.style.height="",x.resizedForInputPane=!1)}},{DismissalResult:F,_ClassNames:G});return W.Class.mix(ee,H.createEventProperties("beforeshow","aftershow","beforehide","afterhide")),W.Class.mix(ee,j.DOMEventMixin),ee}))})})),R("ui",["WinJS/Core/_WinJS","WinJS/VirtualizedDataSource","WinJS/Vui","WinJS/Controls/IntrinsicControls","WinJS/Controls/ListView","WinJS/Controls/ItemContainer","WinJS/Controls/Repeater","WinJS/Controls/SemanticZoom","WinJS/Controls/Flyout","WinJS/Controls/Popup","WinJS/Controls/SettingsFlyout","WinJS/Controls/ContentDialog"],(function(x){"use strict";return x})),V(["WinJS/Core/_WinJS","ui"],(function(x){A.WinJS=x,"undefined"!=typeof module&&(module.exports=x)})),A.WinJS},"function"==typeof define&&define.amd?define(["./base"],x):(A.msWriteProfilerMark&&msWriteProfilerMark("WinJS.4.4 4.4.4.winjs.2022.2.24 ui.js,StartTM"),"object"==typeof exports&&"string"!=typeof exports.nodeName?x(require("./base")):x(A.WinJS),A.msWriteProfilerMark&&msWriteProfilerMark("WinJS.4.4 4.4.4.winjs.2022.2.24 ui.js,StopTM"))}(),function(x,A){"object"==typeof exports&&"object"==typeof module?module.exports=A():"function"==typeof define&&define.amd?define([],A):"object"==typeof exports?exports.SimpleKeyboard=A():x.SimpleKeyboard=A()}(this,(function(){return function(){"use strict";var x={509:function(x,A,V){var R=V(9985),D=V(3691),N=TypeError;x.exports=function(x){if(R(x))return x;throw new N(D(x)+" is not a function")}},2655:function(x,A,V){var R=V(9429),D=V(3691),N=TypeError;x.exports=function(x){if(R(x))return x;throw new N(D(x)+" is not a constructor")}},3550:function(x,A,V){var R=V(9985),D=String,N=TypeError;x.exports=function(x){if("object"==typeof x||R(x))return x;throw new N("Can't set "+D(x)+" as a prototype")}},7370:function(x,A,V){var R=V(4201),D=V(5391),N=V(2560).f,U=R("unscopables"),B=Array.prototype;void 0===B[U]&&N(B,U,{configurable:!0,value:D(null)}),x.exports=function(x){B[U][x]=!0}},1514:function(x,A,V){var R=V(730).charAt;x.exports=function(x,A,V){return A+(V?R(x,A).length:1)}},5027:function(x,A,V){var R=V(8999),D=String,N=TypeError;x.exports=function(x){if(R(x))return x;throw new N(D(x)+" is not an object")}},7612:function(x,A,V){var R=V(2960).forEach,D=V(6834)("forEach");x.exports=D?[].forEach:function(x){return R(this,x,arguments.length>1?arguments[1]:void 0)}},1055:function(x,A,V){var R=V(4071),D=V(2615),N=V(690),U=V(1228),B=V(3292),F=V(9429),W=V(6310),H=V(6522),z=V(5185),G=V(1664),j=Array;x.exports=function(x){var A=N(x),V=F(this),q=arguments.length,Q=q>1?arguments[1]:void 0,K=void 0!==Q;K&&(Q=R(Q,q>2?arguments[2]:void 0));var J,X,Y,$,Z,ee,te=G(A),ie=0;if(!te||this===j&&B(te))for(J=W(A),X=V?new this(J):j(J);J>ie;ie++)ee=K?Q(A[ie],ie):A[ie],H(X,ie,ee);else for(Z=($=z(A,te)).next,X=V?new this:[];!(Y=D(Z,$)).done;ie++)ee=K?U($,Q,[Y.value,ie],!0):Y.value,H(X,ie,ee);return X.length=ie,X}},4328:function(x,A,V){var R=V(5290),D=V(7578),N=V(6310),a=function(x){return function(A,V,U){var B,F=R(A),W=N(F),H=D(U,W);if(x&&V!=V){for(;W>H;)if((B=F[H++])!=B)return!0}else for(;W>H;H++)if((x||H in F)&&F[H]===V)return x||H||0;return!x&&-1}};x.exports={includes:a(!0),indexOf:a(!1)}},2960:function(x,A,V){var R=V(4071),D=V(8844),N=V(4413),U=V(690),B=V(6310),F=V(7120),W=D([].push),l=function(x){var A=1===x,V=2===x,D=3===x,H=4===x,z=6===x,G=7===x,j=5===x||z;return function(q,Q,K,J){for(var X,Y,$=U(q),Z=N($),ee=R(Q,K),te=B(Z),ie=0,ne=J||F,re=A?ne(q,te):V||G?ne(q,0):void 0;te>ie;ie++)if((j||ie in Z)&&(Y=ee(X=Z[ie],ie,$),x))if(A)re[ie]=Y;else if(Y)switch(x){case 3:return!0;case 5:return X;case 6:return ie;case 2:W(re,X)}else switch(x){case 4:return!1;case 7:W(re,X)}return z?-1:D||H?H:re}};x.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6),filterReject:l(7)}},9042:function(x,A,V){var R=V(3689),D=V(4201),N=V(3615),U=D("species");x.exports=function(x){return N>=51||!R((function(){var A=[];return(A.constructor={})[U]=function(){return{foo:1}},1!==A[x](Boolean).foo}))}},6834:function(x,A,V){var R=V(3689);x.exports=function(x,A){var V=[][x];return!!V&&R((function(){V.call(null,A||function(){return 1},1)}))}},8820:function(x,A,V){var R=V(509),D=V(690),N=V(4413),U=V(6310),B=TypeError,u=function(x){return function(A,V,F,W){R(V);var H=D(A),z=N(H),G=U(H),j=x?G-1:0,q=x?-1:1;if(F<2)for(;;){if(j in z){W=z[j],j+=q;break}if(j+=q,x?j<0:G<=j)throw new B("Reduce of empty array with no initial value")}for(;x?j>=0:G>j;j+=q)j in z&&(W=V(W,z[j],j,H));return W}};x.exports={left:u(!1),right:u(!0)}},5649:function(x,A,V){var R=V(7697),D=V(2297),N=TypeError,U=Object.getOwnPropertyDescriptor,B=R&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(x){return x instanceof TypeError}}();x.exports=B?function(x,A){if(D(x)&&!U(x,"length").writable)throw new N("Cannot set read only .length");return x.length=A}:function(x,A){return x.length=A}},9015:function(x,A,V){var R=V(7578),D=V(6310),N=V(6522),U=Array,B=Math.max;x.exports=function(x,A,V){for(var F=D(x),W=R(A,F),H=R(void 0===V?F:V,F),z=U(B(H-W,0)),G=0;W<H;W++,G++)N(z,G,x[W]);return z.length=G,z}},6004:function(x,A,V){var R=V(8844);x.exports=R([].slice)},382:function(x,A,V){var R=V(9015),D=Math.floor,i=function(x,A){var V=x.length,N=D(V/2);return V<8?a(x,A):s(x,i(R(x,0,N),A),i(R(x,N),A),A)},a=function(x,A){for(var V,R,D=x.length,N=1;N<D;){for(R=N,V=x[N];R&&A(x[R-1],V)>0;)x[R]=x[--R];R!==N++&&(x[R]=V)}return x},s=function(x,A,V,R){for(var D=A.length,N=V.length,U=0,B=0;U<D||B<N;)x[U+B]=U<D&&B<N?R(A[U],V[B])<=0?A[U++]:V[B++]:U<D?A[U++]:V[B++];return x};x.exports=i},5271:function(x,A,V){var R=V(2297),D=V(9429),N=V(8999),U=V(4201)("species"),B=Array;x.exports=function(x){var A;return R(x)&&(A=x.constructor,(D(A)&&(A===B||R(A.prototype))||N(A)&&null===(A=A[U]))&&(A=void 0)),void 0===A?B:A}},7120:function(x,A,V){var R=V(5271);x.exports=function(x,A){return new(R(x))(0===A?0:A)}},1228:function(x,A,V){var R=V(5027),D=V(2125);x.exports=function(x,A,V,N){try{return N?A(R(V)[0],V[1]):A(V)}catch(A){D(x,"throw",A)}}},6431:function(x,A,V){var R=V(4201)("iterator"),D=!1;try{var N=0,U={next:function(){return{done:!!N++}},return:function(){D=!0}};U[R]=function(){return this},Array.from(U,(function(){throw 2}))}catch(x){}x.exports=function(x,A){try{if(!A&&!D)return!1}catch(x){return!1}var V=!1;try{var N={};N[R]=function(){return{next:function(){return{done:V=!0}}}},x(N)}catch(x){}return V}},6648:function(x,A,V){var R=V(8844),D=R({}.toString),N=R("".slice);x.exports=function(x){return N(D(x),8,-1)}},926:function(x,A,V){var R=V(3043),D=V(9985),N=V(6648),U=V(4201)("toStringTag"),B=Object,F="Arguments"===N(function(){return arguments}());x.exports=R?N:function(x){var A,V,R;return void 0===x?"Undefined":null===x?"Null":"string"==typeof(V=function(x,A){try{return x[A]}catch(x){}}(A=B(x),U))?V:F?N(A):"Object"===(R=N(A))&&D(A.callee)?"Arguments":R}},8758:function(x,A,V){var R=V(6812),D=V(9152),N=V(2474),U=V(2560);x.exports=function(x,A,V){for(var B=D(A),F=U.f,W=N.f,H=0;H<B.length;H++){var z=B[H];R(x,z)||V&&R(V,z)||F(x,z,W(A,z))}}},7413:function(x,A,V){var R=V(4201)("match");x.exports=function(x){var A=/./;try{"/./"[x](A)}catch(V){try{return A[R]=!1,"/./"[x](A)}catch(x){}}return!1}},1748:function(x,A,V){var R=V(3689);x.exports=!R((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},7807:function(x){x.exports=function(x,A){return{value:x,done:A}}},5773:function(x,A,V){var R=V(7697),D=V(2560),N=V(5684);x.exports=R?function(x,A,V){return D.f(x,A,N(1,V))}:function(x,A,V){return x[A]=V,x}},5684:function(x){x.exports=function(x,A){return{enumerable:!(1&x),configurable:!(2&x),writable:!(4&x),value:A}}},6522:function(x,A,V){var R=V(8360),D=V(2560),N=V(5684);x.exports=function(x,A,V){var U=R(A);U in x?D.f(x,U,N(0,V)):x[U]=V}},1797:function(x,A,V){var R=V(5027),D=V(5899),N=TypeError;x.exports=function(x){if(R(this),"string"===x||"default"===x)x="string";else if("number"!==x)throw new N("Incorrect hint");return D(this,x)}},2148:function(x,A,V){var R=V(8702),D=V(2560);x.exports=function(x,A,V){return V.get&&R(V.get,A,{getter:!0}),V.set&&R(V.set,A,{setter:!0}),D.f(x,A,V)}},1880:function(x,A,V){var R=V(9985),D=V(2560),N=V(8702),U=V(5014);x.exports=function(x,A,V,B){B||(B={});var F=B.enumerable,W=void 0!==B.name?B.name:A;if(R(V)&&N(V,W,B),B.global)F?x[A]=V:U(A,V);else{try{B.unsafe?x[A]&&(F=!0):delete x[A]}catch(x){}F?x[A]=V:D.f(x,A,{value:V,enumerable:!1,configurable:!B.nonConfigurable,writable:!B.nonWritable})}return x}},5014:function(x,A,V){var R=V(9037),D=Object.defineProperty;x.exports=function(x,A){try{D(R,x,{value:A,configurable:!0,writable:!0})}catch(V){R[x]=A}return A}},8494:function(x,A,V){var R=V(3691),D=TypeError;x.exports=function(x,A){if(!delete x[A])throw new D("Cannot delete property "+R(A)+" of "+R(x))}},7697:function(x,A,V){var R=V(3689);x.exports=!R((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]}))},2659:function(x){var A="object"==typeof document&&document.all,V=void 0===A&&void 0!==A;x.exports={all:A,IS_HTMLDDA:V}},6420:function(x,A,V){var R=V(9037),D=V(8999),N=R.document,U=D(N)&&D(N.createElement);x.exports=function(x){return U?N.createElement(x):{}}},5565:function(x){var A=TypeError;x.exports=function(x){if(x>9007199254740991)throw A("Maximum allowed index exceeded");return x}},6338:function(x){x.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},3265:function(x,A,V){var R=V(6420)("span").classList,D=R&&R.constructor&&R.constructor.prototype;x.exports=D===Object.prototype?void 0:D},7365:function(x,A,V){var R=V(71).match(/firefox\/(\d+)/i);x.exports=!!R&&+R[1]},7298:function(x,A,V){var R=V(71);x.exports=/MSIE|Trident/.test(R)},806:function(x,A,V){var R=V(9037),D=V(6648);x.exports="process"===D(R.process)},71:function(x){x.exports="undefined"!=typeof navigator&&String(navigator.userAgent)||""},3615:function(x,A,V){var R,D,N=V(9037),U=V(71),B=N.process,F=N.Deno,W=B&&B.versions||F&&F.version,H=W&&W.v8;H&&(D=(R=H.split("."))[0]>0&&R[0]<4?1:+(R[0]+R[1])),!D&&U&&(!(R=U.match(/Edge\/(\d+)/))||R[1]>=74)&&(R=U.match(/Chrome\/(\d+)/))&&(D=+R[1]),x.exports=D},7922:function(x,A,V){var R=V(71).match(/AppleWebKit\/(\d+)\./);x.exports=!!R&&+R[1]},2739:function(x){x.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},9989:function(x,A,V){var R=V(9037),D=V(2474).f,N=V(5773),U=V(1880),B=V(5014),F=V(8758),W=V(5266);x.exports=function(x,A){var V,H,z,G,j,q=x.target,Q=x.global,K=x.stat;if(V=Q?R:K?R[q]||B(q,{}):(R[q]||{}).prototype)for(H in A){if(G=A[H],z=x.dontCallGetSet?(j=D(V,H))&&j.value:V[H],!W(Q?H:q+(K?".":"#")+H,x.forced)&&void 0!==z){if(typeof G==typeof z)continue;F(G,z)}(x.sham||z&&z.sham)&&N(G,"sham",!0),U(V,H,G,x)}}},3689:function(x){x.exports=function(x){try{return!!x()}catch(x){return!0}}},8678:function(x,A,V){V(4043);var R=V(6576),D=V(1880),N=V(6308),U=V(3689),B=V(4201),F=V(5773),W=B("species"),H=RegExp.prototype;x.exports=function(x,A,V,z){var G=B(x),j=!U((function(){var A={};return A[G]=function(){return 7},7!==""[x](A)})),q=j&&!U((function(){var A=!1,V=/a/;return"split"===x&&((V={}).constructor={},V.constructor[W]=function(){return V},V.flags="",V[G]=/./[G]),V.exec=function(){return A=!0,null},V[G](""),!A}));if(!j||!q||V){var Q=R(/./[G]),K=A(G,""[x],(function(x,A,V,D,U){var B=R(x),F=A.exec;return F===N||F===H.exec?j&&!U?{done:!0,value:Q(A,V,D)}:{done:!0,value:B(V,A,D)}:{done:!1}}));D(String.prototype,x,K[0]),D(H,G,K[1])}z&&F(H[G],"sham",!0)}},1735:function(x,A,V){var R=V(7215),D=Function.prototype,N=D.apply,U=D.call;x.exports="object"==typeof Reflect&&Reflect.apply||(R?U.bind(N):function(){return U.apply(N,arguments)})},4071:function(x,A,V){var R=V(6576),D=V(509),N=V(7215),U=R(R.bind);x.exports=function(x,A){return D(x),void 0===A?x:N?U(x,A):function(){return x.apply(A,arguments)}}},7215:function(x,A,V){var R=V(3689);x.exports=!R((function(){var x=function(){}.bind();return"function"!=typeof x||x.hasOwnProperty("prototype")}))},2615:function(x,A,V){var R=V(7215),D=Function.prototype.call;x.exports=R?D.bind(D):function(){return D.apply(D,arguments)}},1236:function(x,A,V){var R=V(7697),D=V(6812),N=Function.prototype,U=R&&Object.getOwnPropertyDescriptor,B=D(N,"name"),F=B&&"something"===function(){}.name,W=B&&(!R||R&&U(N,"name").configurable);x.exports={EXISTS:B,PROPER:F,CONFIGURABLE:W}},2743:function(x,A,V){var R=V(8844),D=V(509);x.exports=function(x,A,V){try{return R(D(Object.getOwnPropertyDescriptor(x,A)[V]))}catch(x){}}},6576:function(x,A,V){var R=V(6648),D=V(8844);x.exports=function(x){if("Function"===R(x))return D(x)}},8844:function(x,A,V){var R=V(7215),D=Function.prototype,N=D.call,U=R&&D.bind.bind(N,N);x.exports=R?U:function(x){return function(){return N.apply(x,arguments)}}},6058:function(x,A,V){var R=V(9037),D=V(9985);x.exports=function(x,A){return arguments.length<2?(V=R[x],D(V)?V:void 0):R[x]&&R[x][A];var V}},1664:function(x,A,V){var R=V(926),D=V(4849),N=V(981),U=V(9478),B=V(4201)("iterator");x.exports=function(x){if(!N(x))return D(x,B)||D(x,"@@iterator")||U[R(x)]}},5185:function(x,A,V){var R=V(2615),D=V(509),N=V(5027),U=V(3691),B=V(1664),F=TypeError;x.exports=function(x,A){var V=arguments.length<2?B(x):A;if(D(V))return N(R(V,x));throw new F(U(x)+" is not iterable")}},2643:function(x,A,V){var R=V(8844),D=V(2297),N=V(9985),U=V(6648),B=V(4327),F=R([].push);x.exports=function(x){if(N(x))return x;if(D(x)){for(var A=x.length,V=[],R=0;R<A;R++){var W=x[R];"string"==typeof W?F(V,W):"number"!=typeof W&&"Number"!==U(W)&&"String"!==U(W)||F(V,B(W))}var H=V.length,z=!0;return function(x,A){if(z)return z=!1,A;if(D(this))return A;for(var R=0;R<H;R++)if(V[R]===x)return A}}}},4849:function(x,A,V){var R=V(509),D=V(981);x.exports=function(x,A){var V=x[A];return D(V)?void 0:R(V)}},7017:function(x,A,V){var R=V(8844),D=V(690),N=Math.floor,U=R("".charAt),B=R("".replace),F=R("".slice),W=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,H=/\$([$&'`]|\d{1,2})/g;x.exports=function(x,A,V,R,z,G){var j=V+x.length,q=R.length,Q=H;return void 0!==z&&(z=D(z),Q=W),B(G,Q,(function(D,B){var W;switch(U(B,0)){case"$":return"$";case"&":return x;case"`":return F(A,0,V);case"'":return F(A,j);case"<":W=z[F(B,1,-1)];break;default:var H=+B;if(0===H)return D;if(H>q){var G=N(H/10);return 0===G?D:G<=q?void 0===R[G-1]?U(B,1):R[G-1]+U(B,1):D}W=R[H-1]}return void 0===W?"":W}))}},9037:function(x,A,V){var o=function(x){return x&&x.Math===Math&&x};x.exports=o("object"==typeof globalThis&&globalThis)||o("object"==typeof window&&window)||o("object"==typeof self&&self)||o("object"==typeof V.g&&V.g)||function(){return this}()||this||Function("return this")()},6812:function(x,A,V){var R=V(8844),D=V(690),N=R({}.hasOwnProperty);x.exports=Object.hasOwn||function(x,A){return N(D(x),A)}},7248:function(x){x.exports={}},2688:function(x,A,V){var R=V(6058);x.exports=R("document","documentElement")},8506:function(x,A,V){var R=V(7697),D=V(3689),N=V(6420);x.exports=!R&&!D((function(){return 7!==Object.defineProperty(N("div"),"a",{get:function(){return 7}}).a}))},4413:function(x,A,V){var R=V(8844),D=V(3689),N=V(6648),U=Object,B=R("".split);x.exports=D((function(){return!U("z").propertyIsEnumerable(0)}))?function(x){return"String"===N(x)?B(x,""):U(x)}:U},3457:function(x,A,V){var R=V(9985),D=V(8999),N=V(9385);x.exports=function(x,A,V){var U,B;return N&&R(U=A.constructor)&&U!==V&&D(B=U.prototype)&&B!==V.prototype&&N(x,B),x}},6738:function(x,A,V){var R=V(8844),D=V(9985),N=V(4091),U=R(Function.toString);D(N.inspectSource)||(N.inspectSource=function(x){return U(x)}),x.exports=N.inspectSource},618:function(x,A,V){var R,D,N,U=V(9834),B=V(9037),F=V(8999),W=V(5773),H=V(6812),z=V(4091),G=V(2713),j=V(7248),q="Object already initialized",Q=B.TypeError,K=B.WeakMap;if(U||z.state){var J=z.state||(z.state=new K);J.get=J.get,J.has=J.has,J.set=J.set,R=function(x,A){if(J.has(x))throw new Q(q);return A.facade=x,J.set(x,A),A},D=function(x){return J.get(x)||{}},N=function(x){return J.has(x)}}else{var X=G("state");j[X]=!0,R=function(x,A){if(H(x,X))throw new Q(q);return A.facade=x,W(x,X,A),A},D=function(x){return H(x,X)?x[X]:{}},N=function(x){return H(x,X)}}x.exports={set:R,get:D,has:N,enforce:function(x){return N(x)?D(x):R(x,{})},getterFor:function(x){return function(A){var V;if(!F(A)||(V=D(A)).type!==x)throw new Q("Incompatible receiver, "+x+" required");return V}}}},3292:function(x,A,V){var R=V(4201),D=V(9478),N=R("iterator"),U=Array.prototype;x.exports=function(x){return void 0!==x&&(D.Array===x||U[N]===x)}},2297:function(x,A,V){var R=V(6648);x.exports=Array.isArray||function(x){return"Array"===R(x)}},9985:function(x,A,V){var R=V(2659),D=R.all;x.exports=R.IS_HTMLDDA?function(x){return"function"==typeof x||x===D}:function(x){return"function"==typeof x}},9429:function(x,A,V){var R=V(8844),D=V(3689),N=V(9985),U=V(926),B=V(6058),F=V(6738),c=function(){},W=[],H=B("Reflect","construct"),z=/^\s*(?:class|function)\b/,G=R(z.exec),j=!z.test(c),v=function(x){if(!N(x))return!1;try{return H(c,W,x),!0}catch(x){return!1}},y=function(x){if(!N(x))return!1;switch(U(x)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return j||!!G(z,F(x))}catch(x){return!0}};y.sham=!0,x.exports=!H||D((function(){var x;return v(v.call)||!v(Object)||!v((function(){x=!0}))||x}))?y:v},5266:function(x,A,V){var R=V(3689),D=V(9985),N=/#|\.prototype\./,a=function(x,A){var V=B[U(x)];return V===W||V!==F&&(D(A)?R(A):!!A)},U=a.normalize=function(x){return String(x).replace(N,".").toLowerCase()},B=a.data={},F=a.NATIVE="N",W=a.POLYFILL="P";x.exports=a},1973:function(x,A,V){var R=V(8999),D=Math.floor;x.exports=Number.isInteger||function(x){return!R(x)&&isFinite(x)&&D(x)===x}},981:function(x){x.exports=function(x){return null==x}},8999:function(x,A,V){var R=V(9985),D=V(2659),N=D.all;x.exports=D.IS_HTMLDDA?function(x){return"object"==typeof x?null!==x:R(x)||x===N}:function(x){return"object"==typeof x?null!==x:R(x)}},3931:function(x){x.exports=!1},1245:function(x,A,V){var R=V(8999),D=V(6648),N=V(4201)("match");x.exports=function(x){var A;return R(x)&&(void 0!==(A=x[N])?!!A:"RegExp"===D(x))}},734:function(x,A,V){var R=V(6058),D=V(9985),N=V(3622),U=V(9525),B=Object;x.exports=U?function(x){return"symbol"==typeof x}:function(x){var A=R("Symbol");return D(A)&&N(A.prototype,B(x))}},2125:function(x,A,V){var R=V(2615),D=V(5027),N=V(4849);x.exports=function(x,A,V){var U,B;D(x);try{if(!(U=N(x,"return"))){if("throw"===A)throw V;return V}U=R(U,x)}catch(x){B=!0,U=x}if("throw"===A)throw V;if(B)throw U;return D(U),V}},974:function(x,A,V){var R=V(2013).IteratorPrototype,D=V(5391),N=V(5684),U=V(5997),B=V(9478),u=function(){return this};x.exports=function(x,A,V,F){var W=A+" Iterator";return x.prototype=D(R,{next:N(+!F,V)}),U(x,W,!1,!0),B[W]=u,x}},1934:function(x,A,V){var R=V(9989),D=V(2615),N=V(3931),U=V(1236),B=V(9985),F=V(974),W=V(1868),H=V(9385),z=V(5997),G=V(5773),j=V(1880),q=V(4201),Q=V(9478),K=V(2013),J=U.PROPER,X=U.CONFIGURABLE,Y=K.IteratorPrototype,$=K.BUGGY_SAFARI_ITERATORS,Z=q("iterator"),ee="keys",te="values",ie="entries",k=function(){return this};x.exports=function(x,A,V,U,q,K,ne){F(V,A,U);var re,se,oe,M=function(x){if(x===q&&ue)return ue;if(!$&&x&&x in ce)return ce[x];switch(x){case ee:case te:case ie:return function(){return new V(this,x)}}return function(){return new V(this)}},ae=A+" Iterator",le=!1,ce=x.prototype,de=ce[Z]||ce["@@iterator"]||q&&ce[q],ue=!$&&de||M(q),he="Array"===A&&ce.entries||de;if(he&&(re=W(he.call(new x)))!==Object.prototype&&re.next&&(N||W(re)===Y||(H?H(re,Y):B(re[Z])||j(re,Z,k)),z(re,ae,!0,!0),N&&(Q[ae]=k)),J&&q===te&&de&&de.name!==te&&(!N&&X?G(ce,"name",te):(le=!0,ue=function(){return D(de,this)})),q)if(se={values:M(te),keys:K?ue:M(ee),entries:M(ie)},ne)for(oe in se)($||le||!(oe in ce))&&j(ce,oe,se[oe]);else R({target:A,proto:!0,forced:$||le},se);return N&&!ne||ce[Z]===ue||j(ce,Z,ue,{name:q}),Q[A]=ue,se}},2013:function(x,A,V){var R,D,N,U=V(3689),B=V(9985),F=V(8999),W=V(5391),H=V(1868),z=V(1880),G=V(4201),j=V(3931),q=G("iterator"),Q=!1;[].keys&&("next"in(N=[].keys())?(D=H(H(N)))!==Object.prototype&&(R=D):Q=!0),!F(R)||U((function(){var x={};return R[q].call(x)!==x}))?R={}:j&&(R=W(R)),B(R[q])||z(R,q,(function(){return this})),x.exports={IteratorPrototype:R,BUGGY_SAFARI_ITERATORS:Q}},9478:function(x){x.exports={}},6310:function(x,A,V){var R=V(3126);x.exports=function(x){return R(x.length)}},8702:function(x,A,V){var R=V(8844),D=V(3689),N=V(9985),U=V(6812),B=V(7697),F=V(1236).CONFIGURABLE,W=V(6738),H=V(618),z=H.enforce,G=H.get,j=String,q=Object.defineProperty,Q=R("".slice),K=R("".replace),J=R([].join),X=B&&!D((function(){return 8!==q((function(){}),"length",{value:8}).length})),Y=String(String).split("String"),$=x.exports=function(x,A,V){"Symbol("===Q(j(A),0,7)&&(A="["+K(j(A),/^Symbol\(([^)]*)\)/,"$1")+"]"),V&&V.getter&&(A="get "+A),V&&V.setter&&(A="set "+A),(!U(x,"name")||F&&x.name!==A)&&(B?q(x,"name",{value:A,configurable:!0}):x.name=A),X&&V&&U(V,"arity")&&x.length!==V.arity&&q(x,"length",{value:V.arity});try{V&&U(V,"constructor")&&V.constructor?B&&q(x,"prototype",{writable:!1}):x.prototype&&(x.prototype=void 0)}catch(x){}var R=z(x);return U(R,"source")||(R.source=J(Y,"string"==typeof A?A:"")),x};Function.prototype.toString=$((function(){return N(this)&&G(this).source||W(this)}),"toString")},8828:function(x){var A=Math.ceil,V=Math.floor;x.exports=Math.trunc||function(x){var R=+x;return(R>0?V:A)(R)}},2124:function(x,A,V){var R=V(1245),D=TypeError;x.exports=function(x){if(R(x))throw new D("The method doesn't accept regular expressions");return x}},5394:function(x,A,V){var R=V(7697),D=V(8844),N=V(2615),U=V(3689),B=V(300),F=V(7518),W=V(9556),H=V(690),z=V(4413),G=Object.assign,j=Object.defineProperty,q=D([].concat);x.exports=!G||U((function(){if(R&&1!==G({b:1},G(j({},"a",{enumerable:!0,get:function(){j(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var x={},A={},V=Symbol("assign detection"),D="abcdefghijklmnopqrst";return x[V]=7,D.split("").forEach((function(x){A[x]=x})),7!==G({},x)[V]||B(G({},A)).join("")!==D}))?function(x,A){for(var V=H(x),D=arguments.length,U=1,G=F.f,j=W.f;D>U;)for(var Q,K=z(arguments[U++]),J=G?q(B(K),G(K)):B(K),X=J.length,Y=0;X>Y;)Q=J[Y++],R&&!N(j,K,Q)||(V[Q]=K[Q]);return V}:G},5391:function(x,A,V){var R,D=V(5027),N=V(8920),U=V(2739),B=V(7248),F=V(2688),W=V(6420),H=V(2713),z="prototype",G="script",j=H("IE_PROTO"),h=function(){},v=function(x){return"<script>"+x+"</"+G+">"},y=function(x){x.write(v("")),x.close();var A=x.parentWindow.Object;return x=null,A},g=function(){try{R=new ActiveXObject("htmlfile")}catch(x){}var x,A;g="undefined"!=typeof document?document.domain&&R?y(R):("javascript:",(A=W("iframe")).style.display="none",F.appendChild(A),A.src=String("javascript:"),(x=A.contentWindow.document).open(),x.write(v("document.F=Object")),x.close(),x.F):y(R);for(var V=U.length;V--;)delete g[z][U[V]];return g()};B[j]=!0,x.exports=Object.create||function(x,A){var V;return null!==x?(h[z]=D(x),V=new h,h[z]=null,V[j]=x):V=g(),void 0===A?V:N.f(V,A)}},8920:function(x,A,V){var R=V(7697),D=V(5648),N=V(2560),U=V(5027),B=V(5290),F=V(300);A.f=R&&!D?Object.defineProperties:function(x,A){U(x);for(var V,R=B(A),D=F(A),W=D.length,H=0;W>H;)N.f(x,V=D[H++],R[V]);return x}},2560:function(x,A,V){var R=V(7697),D=V(8506),N=V(5648),U=V(5027),B=V(8360),F=TypeError,W=Object.defineProperty,H=Object.getOwnPropertyDescriptor,z="enumerable",G="configurable",j="writable";A.f=R?N?function(x,A,V){if(U(x),A=B(A),U(V),"function"==typeof x&&"prototype"===A&&"value"in V&&j in V&&!V[j]){var R=H(x,A);R&&R[j]&&(x[A]=V.value,V={configurable:G in V?V[G]:R[G],enumerable:z in V?V[z]:R[z],writable:!1})}return W(x,A,V)}:W:function(x,A,V){if(U(x),A=B(A),U(V),D)try{return W(x,A,V)}catch(x){}if("get"in V||"set"in V)throw new F("Accessors not supported");return"value"in V&&(x[A]=V.value),x}},2474:function(x,A,V){var R=V(7697),D=V(2615),N=V(9556),U=V(5684),B=V(5290),F=V(8360),W=V(6812),H=V(8506),z=Object.getOwnPropertyDescriptor;A.f=R?z:function(x,A){if(x=B(x),A=F(A),H)try{return z(x,A)}catch(x){}if(W(x,A))return U(!D(N.f,x,A),x[A])}},6062:function(x,A,V){var R=V(6648),D=V(5290),N=V(2741).f,U=V(9015),B="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];x.exports.f=function(x){return B&&"Window"===R(x)?function(x){try{return N(x)}catch(x){return U(B)}}(x):N(D(x))}},2741:function(x,A,V){var R=V(4948),D=V(2739).concat("length","prototype");A.f=Object.getOwnPropertyNames||function(x){return R(x,D)}},7518:function(x,A){A.f=Object.getOwnPropertySymbols},1868:function(x,A,V){var R=V(6812),D=V(9985),N=V(690),U=V(2713),B=V(1748),F=U("IE_PROTO"),W=Object,H=W.prototype;x.exports=B?W.getPrototypeOf:function(x){var A=N(x);if(R(A,F))return A[F];var V=A.constructor;return D(V)&&A instanceof V?V.prototype:A instanceof W?H:null}},3622:function(x,A,V){var R=V(8844);x.exports=R({}.isPrototypeOf)},4948:function(x,A,V){var R=V(8844),D=V(6812),N=V(5290),U=V(4328).indexOf,B=V(7248),F=R([].push);x.exports=function(x,A){var V,R=N(x),W=0,H=[];for(V in R)!D(B,V)&&D(R,V)&&F(H,V);for(;A.length>W;)D(R,V=A[W++])&&(~U(H,V)||F(H,V));return H}},300:function(x,A,V){var R=V(4948),D=V(2739);x.exports=Object.keys||function(x){return R(x,D)}},9556:function(x,A){var V={}.propertyIsEnumerable,R=Object.getOwnPropertyDescriptor,D=R&&!V.call({1:2},1);A.f=D?function(x){var A=R(this,x);return!!A&&A.enumerable}:V},600:function(x,A,V){var R=V(3931),D=V(9037),N=V(3689),U=V(7922);x.exports=R||!N((function(){if(!(U&&U<535)){var x=Math.random();__defineSetter__.call(null,x,(function(){})),delete D[x]}}))},9385:function(x,A,V){var R=V(2743),D=V(5027),N=V(3550);x.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var x,A=!1,V={};try{(x=R(Object.prototype,"__proto__","set"))(V,[]),A=V instanceof Array}catch(x){}return function(V,R){return D(V),N(R),A?x(V,R):V.__proto__=R,V}}():void 0)},5073:function(x,A,V){var R=V(3043),D=V(926);x.exports=R?{}.toString:function(){return"[object "+D(this)+"]"}},5899:function(x,A,V){var R=V(2615),D=V(9985),N=V(8999),U=TypeError;x.exports=function(x,A){var V,B;if("string"===A&&D(V=x.toString)&&!N(B=R(V,x)))return B;if(D(V=x.valueOf)&&!N(B=R(V,x)))return B;if("string"!==A&&D(V=x.toString)&&!N(B=R(V,x)))return B;throw new U("Can't convert object to primitive value")}},9152:function(x,A,V){var R=V(6058),D=V(8844),N=V(2741),U=V(7518),B=V(5027),F=D([].concat);x.exports=R("Reflect","ownKeys")||function(x){var A=N.f(B(x)),V=U.f;return V?F(A,V(x)):A}},496:function(x,A,V){var R=V(9037);x.exports=R},8055:function(x,A,V){var R=V(2560).f;x.exports=function(x,A,V){V in x||R(x,V,{configurable:!0,get:function(){return A[V]},set:function(x){A[V]=x}})}},6100:function(x,A,V){var R=V(2615),D=V(5027),N=V(9985),U=V(6648),B=V(6308),F=TypeError;x.exports=function(x,A){var V=x.exec;if(N(V)){var W=R(V,x,A);return null!==W&&D(W),W}if("RegExp"===U(x))return R(B,x,A);throw new F("RegExp#exec called on incompatible receiver")}},6308:function(x,A,V){var R,D,N=V(2615),U=V(8844),B=V(4327),F=V(9633),W=V(7901),H=V(3430),z=V(5391),G=V(618).get,j=V(2100),q=V(6422),Q=H("native-string-replace",String.prototype.replace),K=RegExp.prototype.exec,J=K,X=U("".charAt),Y=U("".indexOf),$=U("".replace),Z=U("".slice),ee=(D=/b*/g,N(K,R=/a/,"a"),N(K,D,"a"),0!==R.lastIndex||0!==D.lastIndex),te=W.BROKEN_CARET,ie=void 0!==/()??/.exec("")[1];(ee||ie||te||j||q)&&(J=function(x){var A,V,R,D,U,W,H,j=this,q=G(j),ne=B(x),re=q.raw;if(re)return re.lastIndex=j.lastIndex,A=N(J,re,ne),j.lastIndex=re.lastIndex,A;var se=q.groups,oe=te&&j.sticky,ae=N(F,j),le=j.source,ce=0,de=ne;if(oe&&(ae=$(ae,"y",""),-1===Y(ae,"g")&&(ae+="g"),de=Z(ne,j.lastIndex),j.lastIndex>0&&(!j.multiline||j.multiline&&"\n"!==X(ne,j.lastIndex-1))&&(le="(?: "+le+")",de=" "+de,ce++),V=new RegExp("^(?:"+le+")",ae)),ie&&(V=new RegExp("^"+le+"$(?!\\s)",ae)),ee&&(R=j.lastIndex),D=N(K,oe?V:j,de),oe?D?(D.input=Z(D.input,ce),D[0]=Z(D[0],ce),D.index=j.lastIndex,j.lastIndex+=D[0].length):j.lastIndex=0:ee&&D&&(j.lastIndex=j.global?D.index+D[0].length:R),ie&&D&&D.length>1&&N(Q,D[0],V,(function(){for(U=1;U<arguments.length-2;U++)void 0===arguments[U]&&(D[U]=void 0)})),D&&se)for(D.groups=W=z(null),U=0;U<se.length;U++)W[(H=se[U])[0]]=D[H[1]];return D}),x.exports=J},9633:function(x,A,V){var R=V(5027);x.exports=function(){var x=R(this),A="";return x.hasIndices&&(A+="d"),x.global&&(A+="g"),x.ignoreCase&&(A+="i"),x.multiline&&(A+="m"),x.dotAll&&(A+="s"),x.unicode&&(A+="u"),x.unicodeSets&&(A+="v"),x.sticky&&(A+="y"),A}},3477:function(x,A,V){var R=V(2615),D=V(6812),N=V(3622),U=V(9633),B=RegExp.prototype;x.exports=function(x){var A=x.flags;return void 0!==A||"flags"in B||D(x,"flags")||!N(B,x)?A:R(U,x)}},7901:function(x,A,V){var R=V(3689),D=V(9037).RegExp,N=R((function(){var x=D("a","y");return x.lastIndex=2,null!==x.exec("abcd")})),U=N||R((function(){return!D("a","y").sticky})),B=N||R((function(){var x=D("^r","gy");return x.lastIndex=2,null!==x.exec("str")}));x.exports={BROKEN_CARET:B,MISSED_STICKY:U,UNSUPPORTED_Y:N}},2100:function(x,A,V){var R=V(3689),D=V(9037).RegExp;x.exports=R((function(){var x=D(".","s");return!(x.dotAll&&x.test("\n")&&"s"===x.flags)}))},6422:function(x,A,V){var R=V(3689),D=V(9037).RegExp;x.exports=R((function(){var x=D("(?<a>b)","g");return"b"!==x.exec("b").groups.a||"bc"!=="b".replace(x,"$<a>c")}))},4684:function(x,A,V){var R=V(981),D=TypeError;x.exports=function(x){if(R(x))throw new D("Can't call method on "+x);return x}},4241:function(x,A,V){var R=V(6058),D=V(2148),N=V(4201),U=V(7697),B=N("species");x.exports=function(x){var A=R(x);U&&A&&!A[B]&&D(A,B,{configurable:!0,get:function(){return this}})}},5997:function(x,A,V){var R=V(2560).f,D=V(6812),N=V(4201)("toStringTag");x.exports=function(x,A,V){x&&!V&&(x=x.prototype),x&&!D(x,N)&&R(x,N,{configurable:!0,value:A})}},2713:function(x,A,V){var R=V(3430),D=V(4630),N=R("keys");x.exports=function(x){return N[x]||(N[x]=D(x))}},4091:function(x,A,V){var R=V(9037),D=V(5014),N="__core-js_shared__",U=R[N]||D(N,{});x.exports=U},3430:function(x,A,V){var R=V(3931),D=V(4091);(x.exports=function(x,A){return D[x]||(D[x]=void 0!==A?A:{})})("versions",[]).push({version:"3.33.2",mode:R?"pure":"global",copyright:" 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.33.2/LICENSE",source:"https://github.com/zloirock/core-js"})},6373:function(x,A,V){var R=V(5027),D=V(2655),N=V(981),U=V(4201)("species");x.exports=function(x,A){var V,B=R(x).constructor;return void 0===B||N(V=R(B)[U])?A:D(V)}},730:function(x,A,V){var R=V(8844),D=V(8700),N=V(4327),U=V(4684),B=R("".charAt),F=R("".charCodeAt),W=R("".slice),l=function(x){return function(A,V){var R,H,z=N(U(A)),G=D(V),j=z.length;return G<0||G>=j?x?"":void 0:(R=F(z,G))<55296||R>56319||G+1===j||(H=F(z,G+1))<56320||H>57343?x?B(z,G):R:x?W(z,G,G+2):H-56320+(R-55296<<10)+65536}};x.exports={codeAt:l(!1),charAt:l(!0)}},5984:function(x,A,V){var R=V(1236).PROPER,D=V(3689),N=V(6350);x.exports=function(x){return D((function(){return!!N[x]()||""!==""[x]()||R&&N[x].name!==x}))}},1435:function(x,A,V){var R=V(8844),D=V(4684),N=V(4327),U=V(6350),B=R("".replace),F=RegExp("^["+U+"]+"),W=RegExp("(^|[^"+U+"])["+U+"]+$"),l=function(x){return function(A){var V=N(D(A));return 1&x&&(V=B(V,F,"")),2&x&&(V=B(V,W,"$1")),V}};x.exports={start:l(1),end:l(2),trim:l(3)}},146:function(x,A,V){var R=V(3615),D=V(3689),N=V(9037).String;x.exports=!!Object.getOwnPropertySymbols&&!D((function(){var x=Symbol("symbol detection");return!N(x)||!(Object(x)instanceof Symbol)||!Symbol.sham&&R&&R<41}))},3032:function(x,A,V){var R=V(2615),D=V(6058),N=V(4201),U=V(1880);x.exports=function(){var x=D("Symbol"),A=x&&x.prototype,V=A&&A.valueOf,B=N("toPrimitive");A&&!A[B]&&U(A,B,(function(x){return R(V,this)}),{arity:1})}},6549:function(x,A,V){var R=V(146);x.exports=R&&!!Symbol.for&&!!Symbol.keyFor},3648:function(x,A,V){var R=V(8844);x.exports=R(1..valueOf)},7578:function(x,A,V){var R=V(8700),D=Math.max,N=Math.min;x.exports=function(x,A){var V=R(x);return V<0?D(V+A,0):N(V,A)}},5290:function(x,A,V){var R=V(4413),D=V(4684);x.exports=function(x){return R(D(x))}},8700:function(x,A,V){var R=V(8828);x.exports=function(x){var A=+x;return A!=A||0===A?0:R(A)}},3126:function(x,A,V){var R=V(8700),D=Math.min;x.exports=function(x){return x>0?D(R(x),9007199254740991):0}},690:function(x,A,V){var R=V(4684),D=Object;x.exports=function(x){return D(R(x))}},8732:function(x,A,V){var R=V(2615),D=V(8999),N=V(734),U=V(4849),B=V(5899),F=V(4201),W=TypeError,H=F("toPrimitive");x.exports=function(x,A){if(!D(x)||N(x))return x;var V,F=U(x,H);if(F){if(void 0===A&&(A="default"),V=R(F,x,A),!D(V)||N(V))return V;throw new W("Can't convert object to primitive value")}return void 0===A&&(A="number"),B(x,A)}},8360:function(x,A,V){var R=V(8732),D=V(734);x.exports=function(x){var A=R(x,"string");return D(A)?A:A+""}},3043:function(x,A,V){var R={};R[V(4201)("toStringTag")]="z",x.exports="[object z]"===String(R)},4327:function(x,A,V){var R=V(926),D=String;x.exports=function(x){if("Symbol"===R(x))throw new TypeError("Cannot convert a Symbol value to a string");return D(x)}},3691:function(x){var A=String;x.exports=function(x){try{return A(x)}catch(x){return"Object"}}},4630:function(x,A,V){var R=V(8844),D=0,N=Math.random(),U=R(1..toString);x.exports=function(x){return"Symbol("+(void 0===x?"":x)+")_"+U(++D+N,36)}},9525:function(x,A,V){var R=V(146);x.exports=R&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},5648:function(x,A,V){var R=V(7697),D=V(3689);x.exports=R&&D((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},9834:function(x,A,V){var R=V(9037),D=V(9985),N=R.WeakMap;x.exports=D(N)&&/native code/.test(String(N))},5405:function(x,A,V){var R=V(496),D=V(6812),N=V(6145),U=V(2560).f;x.exports=function(x){var A=R.Symbol||(R.Symbol={});D(A,x)||U(A,x,{value:N.f(x)})}},6145:function(x,A,V){var R=V(4201);A.f=R},4201:function(x,A,V){var R=V(9037),D=V(3430),N=V(6812),U=V(4630),B=V(146),F=V(9525),W=R.Symbol,H=D("wks"),z=F?W.for||W:W&&W.withoutSetter||U;x.exports=function(x){return N(H,x)||(H[x]=B&&N(W,x)?W[x]:z("Symbol."+x)),H[x]}},6350:function(x){x.exports="\t\n\v\f\r \u2028\u2029\ufeff"},4338:function(x,A,V){var R=V(9989),D=V(3689),N=V(2297),U=V(8999),B=V(690),F=V(6310),W=V(5565),H=V(6522),z=V(7120),G=V(9042),j=V(4201),q=V(3615),Q=j("isConcatSpreadable"),K=q>=51||!D((function(){var x=[];return x[Q]=!1,x.concat()[0]!==x})),g=function(x){if(!U(x))return!1;var A=x[Q];return void 0!==A?!!A:N(x)};R({target:"Array",proto:!0,arity:1,forced:!K||!G("concat")},{concat:function(x){var A,V,R,D,N,U=B(this),G=z(U,0),j=0;for(A=-1,R=arguments.length;A<R;A++)if(g(N=-1===A?U:arguments[A]))for(D=F(N),W(j+D),V=0;V<D;V++,j++)V in N&&H(G,j,N[V]);else W(j+1),H(G,j++,N);return G.length=j,G}})},8077:function(x,A,V){var R=V(9989),D=V(2960).filter;R({target:"Array",proto:!0,forced:!V(9042)("filter")},{filter:function(x){return D(this,x,arguments.length>1?arguments[1]:void 0)}})},7049:function(x,A,V){var R=V(9989),D=V(1055);R({target:"Array",stat:!0,forced:!V(6431)((function(x){Array.from(x)}))},{from:D})},6801:function(x,A,V){var R=V(9989),D=V(4328).includes,N=V(3689),U=V(7370);R({target:"Array",proto:!0,forced:N((function(){return!Array(1).includes()}))},{includes:function(x){return D(this,x,arguments.length>1?arguments[1]:void 0)}}),U("includes")},7195:function(x,A,V){var R=V(9989),D=V(6576),N=V(4328).indexOf,U=V(6834),B=D([].indexOf),F=!!B&&1/B([1],1,-0)<0;R({target:"Array",proto:!0,forced:F||!U("indexOf")},{indexOf:function(x){var A=arguments.length>1?arguments[1]:void 0;return F?B(this,x,A)||0:N(this,x,A)}})},752:function(x,A,V){var R=V(5290),D=V(7370),N=V(9478),U=V(618),B=V(2560).f,F=V(1934),W=V(7807),H=V(3931),z=V(7697),G="Array Iterator",j=U.set,q=U.getterFor(G);x.exports=F(Array,"Array",(function(x,A){j(this,{type:G,target:R(x),index:0,kind:A})}),(function(){var x=q(this),A=x.target,V=x.index++;if(!A||V>=A.length)return x.target=void 0,W(void 0,!0);switch(x.kind){case"keys":return W(V,!1);case"values":return W(A[V],!1)}return W([V,A[V]],!1)}),"values");var Q=N.Arguments=N.Array;if(D("keys"),D("values"),D("entries"),!H&&z&&"values"!==Q.name)try{B(Q,"name",{value:"values"})}catch(x){}},6203:function(x,A,V){var R=V(9989),D=V(8844),N=V(4413),U=V(5290),B=V(6834),F=D([].join);R({target:"Array",proto:!0,forced:N!==Object||!B("join",",")},{join:function(x){return F(U(this),void 0===x?",":x)}})},886:function(x,A,V){var R=V(9989),D=V(2960).map;R({target:"Array",proto:!0,forced:!V(9042)("map")},{map:function(x){return D(this,x,arguments.length>1?arguments[1]:void 0)}})},278:function(x,A,V){var R=V(9989),D=V(8820).left,N=V(6834),U=V(3615);R({target:"Array",proto:!0,forced:!V(806)&&U>79&&U<83||!N("reduce")},{reduce:function(x){var A=arguments.length;return D(this,x,A,A>1?arguments[1]:void 0)}})},9730:function(x,A,V){var R=V(9989),D=V(2297),N=V(9429),U=V(8999),B=V(7578),F=V(6310),W=V(5290),H=V(6522),z=V(4201),G=V(9042),j=V(6004),q=G("slice"),Q=z("species"),K=Array,J=Math.max;R({target:"Array",proto:!0,forced:!q},{slice:function(x,A){var V,R,z,G=W(this),q=F(G),X=B(x,q),Y=B(void 0===A?q:A,q);if(D(G)&&(V=G.constructor,(N(V)&&(V===K||D(V.prototype))||U(V)&&null===(V=V[Q]))&&(V=void 0),V===K||void 0===V))return j(G,X,Y);for(R=new(void 0===V?K:V)(J(Y-X,0)),z=0;X<Y;X++,z++)X in G&&H(R,z,G[X]);return R.length=z,R}})},5137:function(x,A,V){var R=V(9989),D=V(8844),N=V(509),U=V(690),B=V(6310),F=V(8494),W=V(4327),H=V(3689),z=V(382),G=V(6834),j=V(7365),q=V(7298),Q=V(3615),K=V(7922),J=[],X=D(J.sort),Y=D(J.push),$=H((function(){J.sort(void 0)})),Z=H((function(){J.sort(null)})),ee=G("sort"),te=!H((function(){if(Q)return Q<70;if(!(j&&j>3)){if(q)return!0;if(K)return K<603;var x,A,V,R,D="";for(x=65;x<76;x++){switch(A=String.fromCharCode(x),x){case 66:case 69:case 70:case 72:V=3;break;case 68:case 71:V=4;break;default:V=2}for(R=0;R<47;R++)J.push({k:A+R,v:V})}for(J.sort((function(x,A){return A.v-x.v})),R=0;R<J.length;R++)A=J[R].k.charAt(0),D.charAt(D.length-1)!==A&&(D+=A);return"DGBEFHACIJK"!==D}}));R({target:"Array",proto:!0,forced:$||!Z||!ee||!te},{sort:function(x){void 0!==x&&N(x);var A=U(this);if(te)return void 0===x?X(A):X(A,x);var V,R,D=[],H=B(A);for(R=0;R<H;R++)R in A&&Y(D,A[R]);for(z(D,function(x){return function(A,V){return void 0===V?-1:void 0===A?1:void 0!==x?+x(A,V)||0:W(A)>W(V)?1:-1}}(x)),V=B(D),R=0;R<V;)A[R]=D[R++];for(;R<H;)F(A,R++);return A}})},2506:function(x,A,V){var R=V(9989),D=V(690),N=V(7578),U=V(8700),B=V(6310),F=V(5649),W=V(5565),H=V(7120),z=V(6522),G=V(8494),j=V(9042)("splice"),q=Math.max,Q=Math.min;R({target:"Array",proto:!0,forced:!j},{splice:function(x,A){var V,R,j,K,J,X,Y=D(this),$=B(Y),Z=N(x,$),ee=arguments.length;for(0===ee?V=R=0:1===ee?(V=0,R=$-Z):(V=ee-2,R=Q(q(U(A),0),$-Z)),W($+V-R),j=H(Y,R),K=0;K<R;K++)(J=Z+K)in Y&&z(j,K,Y[J]);if(j.length=R,V<R){for(K=Z;K<$-R;K++)X=K+V,(J=K+R)in Y?Y[X]=Y[J]:G(Y,X);for(K=$;K>$-R+V;K--)G(Y,K-1)}else if(V>R)for(K=$-R;K>Z;K--)X=K+V-1,(J=K+R-1)in Y?Y[X]=Y[J]:G(Y,X);for(K=0;K<V;K++)Y[K+Z]=arguments[K+2];return F(Y,$-R+V),j}})},9903:function(x,A,V){var R=V(6812),D=V(1880),N=V(1797),U=V(4201)("toPrimitive"),B=Date.prototype;R(B,U)||D(B,U,N)},4284:function(x,A,V){var R=V(7697),D=V(1236).EXISTS,N=V(8844),U=V(2148),B=Function.prototype,F=N(B.toString),W=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,H=N(W.exec);R&&!D&&U(B,"name",{configurable:!0,get:function(){try{return H(W,F(this))[1]}catch(x){return""}}})},8324:function(x,A,V){var R=V(9989),D=V(6058),N=V(1735),U=V(2615),B=V(8844),F=V(3689),W=V(9985),H=V(734),z=V(6004),G=V(2643),j=V(146),q=String,Q=D("JSON","stringify"),K=B(/./.exec),J=B("".charAt),X=B("".charCodeAt),Y=B("".replace),$=B(1..toString),Z=/[\uD800-\uDFFF]/g,ee=/^[\uD800-\uDBFF]$/,te=/^[\uDC00-\uDFFF]$/,ie=!j||F((function(){var x=D("Symbol")("stringify detection");return"[null]"!==Q([x])||"{}"!==Q({a:x})||"{}"!==Q(Object(x))})),ne=F((function(){return'"\\udf06\\ud834"'!==Q("\udf06\ud834")||'"\\udead"'!==Q("\udead")})),P=function(x,A){var V=z(arguments),R=G(A);if(W(R)||void 0!==x&&!H(x))return V[1]=function(x,A){if(W(R)&&(A=U(R,this,q(x),A)),!H(A))return A},N(Q,null,V)},I=function(x,A,V){var R=J(V,A-1),D=J(V,A+1);return K(ee,x)&&!K(te,D)||K(te,x)&&!K(ee,R)?"\\u"+$(X(x,0),16):x};Q&&R({target:"JSON",stat:!0,arity:3,forced:ie||ne},{stringify:function(x,A,V){var R=z(arguments),D=N(ie?P:Q,null,R);return ne&&"string"==typeof D?Y(D,Z,I):D}})},9288:function(x,A,V){var R=V(9989),D=V(3931),N=V(7697),U=V(9037),B=V(496),F=V(8844),W=V(5266),H=V(6812),z=V(3457),G=V(3622),j=V(734),q=V(8732),Q=V(3689),K=V(2741).f,J=V(2474).f,X=V(2560).f,Y=V(3648),$=V(1435).trim,Z="Number",ee=U[Z],te=B[Z],ie=ee.prototype,ne=U.TypeError,re=F("".slice),se=F("".charCodeAt),C=function(x){var A,V,R,D,N,U,B,F,W=q(x,"number");if(j(W))throw new ne("Cannot convert a Symbol value to a number");if("string"==typeof W&&W.length>2)if(W=$(W),43===(A=se(W,0))||45===A){if(88===(V=se(W,2))||120===V)return NaN}else if(48===A){switch(se(W,1)){case 66:case 98:R=2,D=49;break;case 79:case 111:R=8,D=55;break;default:return+W}for(U=(N=re(W,2)).length,B=0;B<U;B++)if((F=se(N,B))<48||F>D)return NaN;return parseInt(N,R)}return+W},oe=W(Z,!ee(" 0o1")||!ee("0b1")||ee("+0x1")),M=function(x){var A,V=arguments.length<1?0:ee(function(x){var A=q(x,"number");return"bigint"==typeof A?A:C(A)}(x));return G(ie,A=this)&&Q((function(){Y(A)}))?z(Object(V),this,M):V};M.prototype=ie,oe&&!D&&(ie.constructor=M),R({global:!0,constructor:!0,wrap:!0,forced:oe},{Number:M});var T=function(x,A){for(var V,R=N?K(A):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),D=0;R.length>D;D++)H(A,V=R[D])&&!H(x,V)&&X(x,V,J(A,V))};D&&te&&T(B[Z],te),(oe||D)&&T(B[Z],ee)},5765:function(x,A,V){V(9989)({target:"Number",stat:!0},{isInteger:V(1973)})},429:function(x,A,V){var R=V(9989),D=V(5394);R({target:"Object",stat:!0,arity:2,forced:Object.assign!==D},{assign:D})},3994:function(x,A,V){var R=V(9989),D=V(7697),N=V(600),U=V(509),B=V(690),F=V(2560);D&&R({target:"Object",proto:!0,forced:N},{__defineGetter__:function(x,A){F.f(B(this),x,{get:U(A),enumerable:!0,configurable:!0})}})},1919:function(x,A,V){var R=V(9989),D=V(3689),N=V(5290),U=V(2474).f,B=V(7697);R({target:"Object",stat:!0,forced:!B||D((function(){U(1)})),sham:!B},{getOwnPropertyDescriptor:function(x,A){return U(N(x),A)}})},9474:function(x,A,V){var R=V(9989),D=V(7697),N=V(9152),U=V(5290),B=V(2474),F=V(6522);R({target:"Object",stat:!0,sham:!D},{getOwnPropertyDescriptors:function(x){for(var A,V,R=U(x),D=B.f,W=N(R),H={},z=0;W.length>z;)void 0!==(V=D(R,A=W[z++]))&&F(H,A,V);return H}})},9997:function(x,A,V){var R=V(9989),D=V(3689),N=V(6062).f;R({target:"Object",stat:!0,forced:D((function(){return!Object.getOwnPropertyNames(1)}))},{getOwnPropertyNames:N})},9434:function(x,A,V){var R=V(9989),D=V(146),N=V(3689),U=V(7518),B=V(690);R({target:"Object",stat:!0,forced:!D||N((function(){U.f(1)}))},{getOwnPropertySymbols:function(x){var A=U.f;return A?A(B(x)):[]}})},9358:function(x,A,V){var R=V(9989),D=V(690),N=V(300);R({target:"Object",stat:!0,forced:V(3689)((function(){N(1)}))},{keys:function(x){return N(D(x))}})},228:function(x,A,V){var R=V(3043),D=V(1880),N=V(5073);R||D(Object.prototype,"toString",N,{unsafe:!0})},2003:function(x,A,V){var R=V(7697),D=V(9037),N=V(8844),U=V(5266),B=V(3457),F=V(5773),W=V(2741).f,H=V(3622),z=V(1245),G=V(4327),j=V(3477),q=V(7901),Q=V(8055),K=V(1880),J=V(3689),X=V(6812),Y=V(618).enforce,$=V(4241),Z=V(4201),ee=V(2100),te=V(6422),ie=Z("match"),ne=D.RegExp,re=ne.prototype,se=D.SyntaxError,oe=N(re.exec),ae=N("".charAt),le=N("".replace),ce=N("".indexOf),de=N("".slice),ue=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,he=/a/g,pe=/a/g,me=new ne(he)!==he,ge=q.MISSED_STICKY,ye=q.UNSUPPORTED_Y;if(U("RegExp",R&&(!me||ge||ee||te||J((function(){return pe[ie]=!1,ne(he)!==he||ne(pe)===pe||"/a/i"!==String(ne(he,"i"))}))))){for(var _=function(x,A){var V,R,D,N,U,W,q=H(re,this),Q=z(x),K=void 0===A,J=[],$=x;if(!q&&Q&&K&&x.constructor===_)return x;if((Q||H(re,x))&&(x=x.source,K&&(A=j($))),x=void 0===x?"":G(x),A=void 0===A?"":G(A),$=x,ee&&"dotAll"in he&&(R=!!A&&ce(A,"s")>-1)&&(A=le(A,/s/g,"")),V=A,ge&&"sticky"in he&&(D=!!A&&ce(A,"y")>-1)&&ye&&(A=le(A,/y/g,"")),te&&(x=(N=function(x){for(var A,V=x.length,R=0,D="",N=[],U={},B=!1,F=!1,W=0,H="";R<=V;R++){if("\\"===(A=ae(x,R)))A+=ae(x,++R);else if("]"===A)B=!1;else if(!B)switch(!0){case"["===A:B=!0;break;case"("===A:oe(ue,de(x,R+1))&&(R+=2,F=!0),D+=A,W++;continue;case">"===A&&F:if(""===H||X(U,H))throw new se("Invalid capture group name");U[H]=!0,N[N.length]=[H,W],F=!1,H="";continue}F?H+=A:D+=A}return[D,N]}(x))[0],J=N[1]),U=B(ne(x,A),q?this:re,_),(R||D||J.length)&&(W=Y(U),R&&(W.dotAll=!0,W.raw=_(function(x){for(var A,V=x.length,R=0,D="",N=!1;R<=V;R++)"\\"!==(A=ae(x,R))?N||"."!==A?("["===A?N=!0:"]"===A&&(N=!1),D+=A):D+="[\\s\\S]":D+=A+ae(x,++R);return D}(x),V)),D&&(W.sticky=!0),J.length&&(W.groups=J)),x!==$)try{F(U,"source",""===$?"(?:)":$)}catch(x){}return U},fe=W(ne),_e=0;fe.length>_e;)Q(_,ne,fe[_e++]);re.constructor=_,_.prototype=re,K(D,"RegExp",_,{constructor:!0})}$("RegExp")},4043:function(x,A,V){var R=V(9989),D=V(6308);R({target:"RegExp",proto:!0,forced:/./.exec!==D},{exec:D})},2826:function(x,A,V){var R=V(1236).PROPER,D=V(1880),N=V(5027),U=V(4327),B=V(3689),F=V(3477),W="toString",H=RegExp.prototype[W],z=B((function(){return"/a/b"!==H.call({source:"a",flags:"b"})})),G=R&&H.name!==W;(z||G)&&D(RegExp.prototype,W,(function(){var x=N(this);return"/"+U(x.source)+"/"+U(F(x))}),{unsafe:!0})},3843:function(x,A,V){var R=V(9989),D=V(8844),N=V(2124),U=V(4684),B=V(4327),F=V(7413),W=D("".indexOf);R({target:"String",proto:!0,forced:!F("includes")},{includes:function(x){return!!~W(B(U(this)),B(N(x)),arguments.length>1?arguments[1]:void 0)}})},1694:function(x,A,V){var R=V(730).charAt,D=V(4327),N=V(618),U=V(1934),B=V(7807),F="String Iterator",W=N.set,H=N.getterFor(F);U(String,"String",(function(x){W(this,{type:F,string:D(x),index:0})}),(function(){var x,A=H(this),V=A.string,D=A.index;return D>=V.length?B(void 0,!0):(x=R(V,D),A.index+=x.length,B(x,!1))}))},9866:function(x,A,V){var R=V(9989),D=V(2615),N=V(6576),U=V(974),B=V(7807),F=V(4684),W=V(3126),H=V(4327),z=V(5027),G=V(981),j=V(6648),q=V(1245),Q=V(3477),K=V(4849),J=V(1880),X=V(3689),Y=V(4201),$=V(6373),Z=V(1514),ee=V(6100),te=V(618),ie=V(3931),ne=Y("matchAll"),re="RegExp String",se=re+" Iterator",oe=te.set,ae=te.getterFor(se),le=RegExp.prototype,ce=TypeError,de=N("".indexOf),ue=N("".matchAll),he=!!ue&&!X((function(){ue("a",/./)})),pe=U((function(x,A,V,R){oe(this,{type:se,regexp:x,string:A,global:V,unicode:R,done:!1})}),re,(function(){var x=ae(this);if(x.done)return B(void 0,!0);var A=x.regexp,V=x.string,R=ee(A,V);return null===R?(x.done=!0,B(void 0,!0)):x.global?(""===H(R[0])&&(A.lastIndex=Z(V,W(A.lastIndex),x.unicode)),B(R,!1)):(x.done=!0,B(R,!1))})),L=function(x){var A,V,R,D=z(this),N=H(x),U=$(D,RegExp),B=H(Q(D));return A=new U(U===RegExp?D.source:D,B),V=!!~de(B,"g"),R=!!~de(B,"u"),A.lastIndex=W(D.lastIndex),new pe(A,N,V,R)};R({target:"String",proto:!0,forced:he},{matchAll:function(x){var A,V,R,N,U=F(this);if(G(x)){if(he)return ue(U,x)}else{if(q(x)&&(A=H(F(Q(x))),!~de(A,"g")))throw new ce("`.matchAll` does not allow non-global regexes");if(he)return ue(U,x);if(void 0===(R=K(x,ne))&&ie&&"RegExp"===j(x)&&(R=L),R)return D(R,x,U)}return V=H(U),N=new RegExp(x,"g"),ie?D(L,N,V):N[ne](V)}}),ie||ne in le||J(le,ne,L)},2462:function(x,A,V){var R=V(2615),D=V(8678),N=V(5027),U=V(981),B=V(3126),F=V(4327),W=V(4684),H=V(4849),z=V(1514),G=V(6100);D("match",(function(x,A,V){return[function(A){var V=W(this),D=U(A)?void 0:H(A,x);return D?R(D,A,V):new RegExp(A)[x](F(V))},function(x){var R=N(this),D=F(x),U=V(A,R,D);if(U.done)return U.value;if(!R.global)return G(R,D);var W=R.unicode;R.lastIndex=0;for(var H,j=[],q=0;null!==(H=G(R,D));){var Q=F(H[0]);j[q]=Q,""===Q&&(R.lastIndex=z(D,B(R.lastIndex),W)),q++}return 0===q?null:j}]}))},7267:function(x,A,V){var R=V(1735),D=V(2615),N=V(8844),U=V(8678),B=V(3689),F=V(5027),W=V(9985),H=V(981),z=V(8700),G=V(3126),j=V(4327),q=V(4684),Q=V(1514),K=V(4849),J=V(7017),X=V(6100),Y=V(4201)("replace"),$=Math.max,Z=Math.min,ee=N([].concat),te=N([].push),ie=N("".indexOf),ne=N("".slice),re="$0"==="a".replace(/./,"$0"),se=!!/./[Y]&&""===/./[Y]("a","$0");U("replace",(function(x,A,V){var N=se?"$":"$0";return[function(x,V){var R=q(this),N=H(x)?void 0:K(x,Y);return N?D(N,x,R,V):D(A,j(R),x,V)},function(x,D){var U=F(this),B=j(x);if("string"==typeof D&&-1===ie(D,N)&&-1===ie(D,"$<")){var H=V(A,U,B,D);if(H.done)return H.value}var q=W(D);q||(D=j(D));var K,Y=U.global;Y&&(K=U.unicode,U.lastIndex=0);for(var re,se=[];null!==(re=X(U,B))&&(te(se,re),Y);)""===j(re[0])&&(U.lastIndex=Q(B,G(U.lastIndex),K));for(var oe,ae="",le=0,ce=0;ce<se.length;ce++){for(var de,ue=j((re=se[ce])[0]),he=$(Z(z(re.index),B.length),0),pe=[],me=1;me<re.length;me++)te(pe,void 0===(oe=re[me])?oe:String(oe));var ge=re.groups;if(q){var ye=ee([ue],pe,he,B);void 0!==ge&&te(ye,ge),de=j(R(D,void 0,ye))}else de=J(ue,B,he,pe,ge,D);he>=le&&(ae+=ne(B,le,he)+de,le=he+ue.length)}return ae+ne(B,le)}]}),!!B((function(){var x=/./;return x.exec=function(){var x=[];return x.groups={a:"7"},x},"7"!=="".replace(x,"$<a>")}))||!re||se)},9873:function(x,A,V){var R=V(1735),D=V(2615),N=V(8844),U=V(8678),B=V(5027),F=V(981),W=V(1245),H=V(4684),z=V(6373),G=V(1514),j=V(3126),q=V(4327),Q=V(4849),K=V(9015),J=V(6100),X=V(6308),Y=V(7901),$=V(3689),Z=Y.UNSUPPORTED_Y,ee=4294967295,te=Math.min,ie=[].push,ne=N(/./.exec),re=N(ie),se=N("".slice);U("split",(function(x,A,V){var N;return N="c"==="abbc".split(/(b)*/)[1]||4!=="test".split(/(?:)/,-1).length||2!=="ab".split(/(?:ab)*/).length||4!==".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(x,V){var N=q(H(this)),U=void 0===V?ee:V>>>0;if(0===U)return[];if(void 0===x)return[N];if(!W(x))return D(A,N,x,U);for(var B,F,z,G=[],j=(x.ignoreCase?"i":"")+(x.multiline?"m":"")+(x.unicode?"u":"")+(x.sticky?"y":""),Q=0,J=new RegExp(x.source,j+"g");(B=D(X,J,N))&&!((F=J.lastIndex)>Q&&(re(G,se(N,Q,B.index)),B.length>1&&B.index<N.length&&R(ie,G,K(B,1)),z=B[0].length,Q=F,G.length>=U));)J.lastIndex===B.index&&J.lastIndex++;return Q===N.length?!z&&ne(J,"")||re(G,""):re(G,se(N,Q)),G.length>U?K(G,0,U):G}:"0".split(void 0,0).length?function(x,V){return void 0===x&&0===V?[]:D(A,this,x,V)}:A,[function(A,V){var R=H(this),U=F(A)?void 0:Q(A,x);return U?D(U,A,R,V):D(N,q(R),A,V)},function(x,R){var D=B(this),U=q(x),F=V(N,D,U,R,N!==A);if(F.done)return F.value;var W=z(D,RegExp),H=D.unicode,Q=(D.ignoreCase?"i":"")+(D.multiline?"m":"")+(D.unicode?"u":"")+(Z?"g":"y"),K=new W(Z?"^(?:"+D.source+")":D,Q),X=void 0===R?ee:R>>>0;if(0===X)return[];if(0===U.length)return null===J(K,U)?[U]:[];for(var Y=0,$=0,ie=[];$<U.length;){K.lastIndex=Z?0:$;var ne,oe=J(K,Z?se(U,$):U);if(null===oe||(ne=te(j(K.lastIndex+(Z?$:0)),U.length))===Y)$=G(U,$,H);else{if(re(ie,se(U,Y,$)),ie.length===X)return ie;for(var ae=1;ae<=oe.length-1;ae++)if(re(ie,oe[ae]),ie.length===X)return ie;$=Y=ne}}return re(ie,se(U,Y)),ie}]}),!!$((function(){var x=/(?:)/,A=x.exec;x.exec=function(){return A.apply(this,arguments)};var V="ab".split(x);return 2!==V.length||"a"!==V[0]||"b"!==V[1]})),Z)},8436:function(x,A,V){var R=V(9989),D=V(1435).trim;R({target:"String",proto:!0,forced:V(5984)("trim")},{trim:function(){return D(this)}})},7855:function(x,A,V){var R=V(9989),D=V(9037),N=V(2615),U=V(8844),B=V(3931),F=V(7697),W=V(146),H=V(3689),z=V(6812),G=V(3622),j=V(5027),q=V(5290),Q=V(8360),K=V(4327),J=V(5684),X=V(5391),Y=V(300),$=V(2741),Z=V(6062),ee=V(7518),te=V(2474),ie=V(2560),ne=V(8920),re=V(9556),se=V(1880),oe=V(2148),ae=V(3430),le=V(2713),ce=V(7248),de=V(4630),ue=V(4201),he=V(6145),pe=V(5405),me=V(3032),ge=V(5997),ye=V(618),fe=V(2960).forEach,_e=le("hidden"),Ce="Symbol",be="prototype",ve=ye.set,Se=ye.getterFor(Ce),Te=Object[be],Ee=D.Symbol,we=Ee&&Ee[be],Ie=D.RangeError,xe=D.TypeError,Ae=D.QObject,Le=te.f,Ve=ie.f,Pe=Z.f,Re=re.f,De=U([].push),Ne=ae("symbols"),ke=ae("op-symbols"),Ue=ae("wks"),Me=!Ae||!Ae[be]||!Ae[be].findChild,at=function(x,A,V){var R=Le(Te,A);R&&delete Te[A],Ve(x,A,V),R&&x!==Te&&Ve(Te,A,R)},Oe=F&&H((function(){return 7!==X(Ve({},"a",{get:function(){return Ve(this,"a",{value:7}).a}})).a}))?at:Ve,ut=function(x,A){var V=Ne[x]=X(we);return ve(V,{type:Ce,tag:x,description:A}),F||(V.description=A),V},ct=function(x,A,V){x===Te&&ct(ke,A,V),j(x);var R=Q(A);return j(V),z(Ne,R)?(V.enumerable?(z(x,_e)&&x[_e][R]&&(x[_e][R]=!1),V=X(V,{enumerable:J(0,!1)})):(z(x,_e)||Ve(x,_e,J(1,{})),x[_e][R]=!0),Oe(x,R,V)):Ve(x,R,V)},lt=function(x,A){j(x);var V=q(A),R=Y(V).concat(ht(V));return fe(R,(function(A){F&&!N(ft,V,A)||ct(x,A,V[A])})),x},ft=function(x){var A=Q(x),V=N(Re,this,A);return!(this===Te&&z(Ne,A)&&!z(ke,A))&&(!(V||!z(this,A)||!z(Ne,A)||z(this,_e)&&this[_e][A])||V)},dt=function(x,A){var V=q(x),R=Q(A);if(V!==Te||!z(Ne,R)||z(ke,R)){var D=Le(V,R);return!D||!z(Ne,R)||z(V,_e)&&V[_e][R]||(D.enumerable=!0),D}},pt=function(x){var A=Pe(q(x)),V=[];return fe(A,(function(x){z(Ne,x)||z(ce,x)||De(V,x)})),V},ht=function(x){var A=x===Te,V=Pe(A?ke:q(x)),R=[];return fe(V,(function(x){!z(Ne,x)||A&&!z(Te,x)||De(R,Ne[x])})),R};W||(se(we=(Ee=function(){if(G(we,this))throw new xe("Symbol is not a constructor");var x=arguments.length&&void 0!==arguments[0]?K(arguments[0]):void 0,A=de(x),n=function(x){var V=void 0===this?D:this;V===Te&&N(n,ke,x),z(V,_e)&&z(V[_e],A)&&(V[_e][A]=!1);var R=J(1,x);try{Oe(V,A,R)}catch(x){if(!(x instanceof Ie))throw x;at(V,A,R)}};return F&&Me&&Oe(Te,A,{configurable:!0,set:n}),ut(A,x)})[be],"toString",(function(){return Se(this).tag})),se(Ee,"withoutSetter",(function(x){return ut(de(x),x)})),re.f=ft,ie.f=ct,ne.f=lt,te.f=dt,$.f=Z.f=pt,ee.f=ht,he.f=function(x){return ut(ue(x),x)},F&&(oe(we,"description",{configurable:!0,get:function(){return Se(this).description}}),B||se(Te,"propertyIsEnumerable",ft,{unsafe:!0}))),R({global:!0,constructor:!0,wrap:!0,forced:!W,sham:!W},{Symbol:Ee}),fe(Y(Ue),(function(x){pe(x)})),R({target:Ce,stat:!0,forced:!W},{useSetter:function(){Me=!0},useSimple:function(){Me=!1}}),R({target:"Object",stat:!0,forced:!W,sham:!F},{create:function(x,A){return void 0===A?X(x):lt(X(x),A)},defineProperty:ct,defineProperties:lt,getOwnPropertyDescriptor:dt}),R({target:"Object",stat:!0,forced:!W},{getOwnPropertyNames:pt}),me(),ge(Ee,Ce),ce[_e]=!0},6544:function(x,A,V){var R=V(9989),D=V(7697),N=V(9037),U=V(8844),B=V(6812),F=V(9985),W=V(3622),H=V(4327),z=V(2148),G=V(8758),j=N.Symbol,q=j&&j.prototype;if(D&&F(j)&&(!("description"in q)||void 0!==j().description)){var Q={},y=function(){var x=arguments.length<1||void 0===arguments[0]?void 0:H(arguments[0]),A=W(q,this)?new j(x):void 0===x?j():j(x);return""===x&&(Q[A]=!0),A};G(y,j),y.prototype=q,q.constructor=y;var K="Symbol(description detection)"===String(j("description detection")),J=U(q.valueOf),X=U(q.toString),Y=/^Symbol\((.*)\)[^)]+$/,$=U("".replace),Z=U("".slice);z(q,"description",{configurable:!0,get:function(){var x=J(this);if(B(Q,x))return"";var A=X(x),V=K?Z(A,7,-1):$(A,Y,"$1");return""===V?void 0:V}}),R({global:!0,constructor:!0,forced:!0},{Symbol:y})}},3975:function(x,A,V){var R=V(9989),D=V(6058),N=V(6812),U=V(4327),B=V(3430),F=V(6549),W=B("string-to-symbol-registry"),H=B("symbol-to-string-registry");R({target:"Symbol",stat:!0,forced:!F},{for:function(x){var A=U(x);if(N(W,A))return W[A];var V=D("Symbol")(A);return W[A]=V,H[V]=A,V}})},4254:function(x,A,V){V(5405)("iterator")},9749:function(x,A,V){V(7855),V(3975),V(1445),V(8324),V(9434)},1445:function(x,A,V){var R=V(9989),D=V(6812),N=V(734),U=V(3691),B=V(3430),F=V(6549),W=B("symbol-to-string-registry");R({target:"Symbol",stat:!0,forced:!F},{keyFor:function(x){if(!N(x))throw new TypeError(U(x)+" is not a symbol");if(D(W,x))return W[x]}})},9373:function(x,A,V){var R=V(5405),D=V(3032);R("toPrimitive"),D()},9012:function(x,A,V){V(9866)},7522:function(x,A,V){var R=V(9037),D=V(6338),N=V(3265),U=V(7612),B=V(5773),u=function(x){if(x&&x.forEach!==U)try{B(x,"forEach",U)}catch(A){x.forEach=U}};for(var F in D)D[F]&&u(R[F]&&R[F].prototype);u(N)},6265:function(x,A,V){var R=V(9037),D=V(6338),N=V(3265),U=V(752),B=V(5773),F=V(4201),W=F("iterator"),H=F("toStringTag"),z=U.values,d=function(x,A){if(x){if(x[W]!==z)try{B(x,W,z)}catch(A){x[W]=z}if(x[H]||B(x,H,A),D[A])for(var V in U)if(x[V]!==U[V])try{B(x,V,U[V])}catch(A){x[V]=U[V]}}};for(var G in D)d(R[G]&&R[G].prototype,G);d(N,"DOMTokenList")}},A={};function n(V){var R=A[V];if(void 0!==R)return R.exports;var D=A[V]={exports:{}};return x[V].call(D.exports,D,D.exports,n),D.exports}n.d=function(x,A){for(var V in A)n.o(A,V)&&!n.o(x,V)&&Object.defineProperty(x,V,{enumerable:!0,get:A[V]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(x){if("object"==typeof window)return window}}(),n.o=function(x,A){return Object.prototype.hasOwnProperty.call(x,A)},n.r=function(x){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(x,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(x,"__esModule",{value:!0})};var V={};return function(){function t(x){return function(x){if(Array.isArray(x))return r(x)}(x)||function(x){if("undefined"!=typeof Symbol&&null!=x[Symbol.iterator]||null!=x["@@iterator"])return Array.from(x)}(x)||e(x)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(x,A){if(x){if("string"==typeof x)return r(x,A);var V=Object.prototype.toString.call(x).slice(8,-1);return"Object"===V&&x.constructor&&(V=x.constructor.name),"Map"===V||"Set"===V?Array.from(x):"Arguments"===V||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(V)?r(x,A):void 0}}function r(x,A){(null==A||A>x.length)&&(A=x.length);for(var V=0,R=new Array(A);V<A;V++)R[V]=x[V];return R}function i(x){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(x){return typeof x}:function(x){return x&&"function"==typeof Symbol&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x})(x)}function a(x,A){for(var V=0;V<A.length;V++){var R=A[V];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(x,u(R.key),R)}}function s(x,A,V){return(A=u(A))in x?Object.defineProperty(x,A,{value:V,enumerable:!0,configurable:!0,writable:!0}):x[A]=V,x}function u(x){var A=function(x,A){if("object"!==i(x)||null===x)return x;var V=x[Symbol.toPrimitive];if(void 0!==V){var R=V.call(x,A);if("object"!==i(R))return R;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(x)}(x,"string");return"symbol"===i(A)?A:String(A)}n.r(V),n.d(V,{SimpleKeyboard:function(){return U},default:function(){return B}}),n(8436),n(4043),n(7267),n(7195),n(4284),n(9873),n(228),n(2826),n(2506),n(6203),n(3994),n(9730),"undefined"==typeof Element||"remove"in Element.prototype||(Element.prototype.remove=function(){this.parentNode&&this.parentNode.removeChild(this)}),"undefined"!=typeof self&&"document"in self&&((!("classList"in document.createElement("_"))||document.createElementNS&&!("classList"in document.createElementNS("http://www.w3.org/2000/svg","g")))&&function(x){if("Element"in x){var A="classList",V="prototype",R=x.Element[V],D=Object,N=String[V].trim||function(){return this.replace(/^\s+|\s+$/g,"")},U=Array[V].indexOf||function(x){for(var A=0,V=this.length;A<V;A++)if(A in this&&this[A]===x)return A;return-1},s=function(x,A){this.name=x,this.code=DOMException[x],this.message=A},u=function(x,A){if(""===A)throw new s("SYNTAX_ERR","The token must not be empty.");if(/\s/.test(A))throw new s("INVALID_CHARACTER_ERR","The token must not contain space characters.");return U.call(x,A)},c=function(x){for(var A=N.call(x.getAttribute("class")||""),V=A?A.split(/\s+/):[],R=0,D=V.length;R<D;R++)this.push(V[R]);this._updateClassName=function(){x.setAttribute("class",this.toString())}},B=c[V]=[],f=function(){return new c(this)};if(s[V]=Error[V],B.item=function(x){return this[x]||null},B.contains=function(x){return~u(this,x+"")},B.add=function(){var x,A=arguments,V=0,R=A.length,D=!1;do{~u(this,x=A[V]+"")||(this.push(x),D=!0)}while(++V<R);D&&this._updateClassName()},B.remove=function(){var x,A,V=arguments,R=0,D=V.length,N=!1;do{for(A=u(this,x=V[R]+"");~A;)this.splice(A,1),N=!0,A=u(this,x)}while(++R<D);N&&this._updateClassName()},B.toggle=function(x,A){var V=this.contains(x),R=V?!0!==A&&"remove":!1!==A&&"add";return R&&this[R](x),!0===A||!1===A?A:!V},B.replace=function(x,A){var V=u(x+"");~V&&(this.splice(V,1,A),this._updateClassName())},B.toString=function(){return this.join(" ")},D.defineProperty){var F={get:f,enumerable:!0,configurable:!0};try{D.defineProperty(R,A,F)}catch(x){void 0!==x.number&&-2146823252!==x.number||(F.enumerable=!1,D.defineProperty(R,A,F))}}else D[V].__defineGetter__&&R.__defineGetter__(A,f)}}(self),function(){var x=document.createElement("_");if(x.classList.add("c1","c2"),!x.classList.contains("c2")){var e=function(x){var A=DOMTokenList.prototype[x];DOMTokenList.prototype[x]=function(x){var V,R=arguments.length;for(V=0;V<R;V++)x=arguments[V],A.call(this,x)}};e("add"),e("remove")}if(x.classList.toggle("c3",!1),x.classList.contains("c3")){var A=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(x,V){return 1 in arguments&&!this.contains(x)==!V?V:A.call(this,x)}}"replace"in document.createElement("_").classList||(DOMTokenList.prototype.replace=function(x,A){var V=this.toString().split(" "),R=V.indexOf(x+"");~R&&(V=V.slice(R),this.remove.apply(this,V),this.add(A),this.add.apply(this,V.slice(1)))}),x=null}()),n(8077),n(4338),n(9358),n(2003),n(9012),n(5137),n(6801),n(3843),n(7522),n(429),n(886),n(7049),n(1694),n(9373),n(9903),n(9749),n(6544),n(9288),n(1919),n(9474),n(4254),n(752),n(6265),n(5765),n(2462),n(278),n(9997);var x=function(){function n(x){var A=x.getOptions,V=x.getCaretPosition,R=x.getCaretPositionEnd,D=x.dispatch;!function(x,A){if(!(x instanceof A))throw new TypeError("Cannot call a class as a function")}(this,n),s(this,"getOptions",void 0),s(this,"getCaretPosition",void 0),s(this,"getCaretPositionEnd",void 0),s(this,"dispatch",void 0),s(this,"maxLengthReached",void 0),s(this,"isStandardButton",(function(x){return x&&!("{"===x[0]&&"}"===x[x.length-1])})),this.getOptions=A,this.getCaretPosition=V,this.getCaretPositionEnd=R,this.dispatch=D,n.bindMethods(n,this)}var x,A,V;return x=n,V=[{key:"bindMethods",value:function(x,A){var V,R=function(x,A){var V="undefined"!=typeof Symbol&&x[Symbol.iterator]||x["@@iterator"];if(!V){if(Array.isArray(x)||(V=e(x))){V&&(x=V);var R=0,i=function(){};return{s:i,n:function(){return R>=x.length?{done:!0}:{done:!1,value:x[R++]}},e:function(x){throw x},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var D,N=!0,U=!1;return{s:function(){V=V.call(x)},n:function(){var x=V.next();return N=x.done,x},e:function(x){U=!0,D=x},f:function(){try{N||null==V.return||V.return()}finally{if(U)throw D}}}}(Object.getOwnPropertyNames(x.prototype));try{for(R.s();!(V=R.n()).done;){var D=V.value;"constructor"===D||"bindMethods"===D||(A[D]=A[D].bind(A))}}catch(x){R.e(x)}finally{R.f()}}}],(A=[{key:"getButtonType",value:function(x){return x.includes("{")&&x.includes("}")&&"{//}"!==x?"functionBtn":"standardBtn"}},{key:"getButtonClass",value:function(x){var A=this.getButtonType(x),V=x.replace("{","").replace("}",""),R="";return"standardBtn"!==A&&(R=" hg-button-".concat(V)),"hg-".concat(A).concat(R)}},{key:"getDefaultDiplay",value:function(){return{"{bksp}":"backspace","{backspace}":"backspace","{enter}":"< enter","{shift}":"shift","{shiftleft}":"shift","{shiftright}":"shift","{alt}":"alt","{s}":"shift","{tab}":"tab","{lock}":"caps","{capslock}":"caps","{accept}":"Submit","{space}":" ","{//}":" ","{esc}":"esc","{escape}":"esc","{f1}":"f1","{f2}":"f2","{f3}":"f3","{f4}":"f4","{f5}":"f5","{f6}":"f6","{f7}":"f7","{f8}":"f8","{f9}":"f9","{f10}":"f10","{f11}":"f11","{f12}":"f12","{numpaddivide}":"/","{numlock}":"lock","{arrowup}":"","{arrowleft}":"","{arrowdown}":"","{arrowright}":"","{prtscr}":"print","{scrolllock}":"scroll","{pause}":"pause","{insert}":"ins","{home}":"home","{pageup}":"up","{delete}":"del","{forwarddelete}":"del","{end}":"end","{pagedown}":"down","{numpadmultiply}":"*","{numpadsubtract}":"-","{numpadadd}":"+","{numpadenter}":"enter","{period}":".","{numpaddecimal}":".","{numpad0}":"0","{numpad1}":"1","{numpad2}":"2","{numpad3}":"3","{numpad4}":"4","{numpad5}":"5","{numpad6}":"6","{numpad7}":"7","{numpad8}":"8","{numpad9}":"9"}}},{key:"getButtonDisplayName",value:function(x,A){return(A=arguments.length>2&&void 0!==arguments[2]&&arguments[2]?Object.assign({},this.getDefaultDiplay(),A):A||this.getDefaultDiplay())[x]||x}},{key:"getUpdatedInput",value:function(x,A,V){var R=arguments.length>3&&void 0!==arguments[3]?arguments[3]:V,D=arguments.length>4&&void 0!==arguments[4]&&arguments[4],N=this.getOptions(),U=[V,R,D],B=A;return("{bksp}"===x||"{backspace}"===x)&&B.length>0?B=this.removeAt.apply(this,[B].concat(U)):("{delete}"===x||"{forwarddelete}"===x)&&B.length>0?B=this.removeForwardsAt.apply(this,[B].concat(U)):"{space}"===x?B=this.addStringAt.apply(this,[B," "].concat(U)):"{tab}"!==x||"boolean"==typeof N.tabCharOnTab&&!1===N.tabCharOnTab?"{enter}"!==x&&"{numpadenter}"!==x||!N.newLineOnEnter?x.includes("numpad")&&Number.isInteger(Number(x[x.length-2]))?B=this.addStringAt.apply(this,[B,x[x.length-2]].concat(U)):"{numpaddivide}"===x?B=this.addStringAt.apply(this,[B,"/"].concat(U)):"{numpadmultiply}"===x?B=this.addStringAt.apply(this,[B,"*"].concat(U)):"{numpadsubtract}"===x?B=this.addStringAt.apply(this,[B,"-"].concat(U)):"{numpadadd}"===x?B=this.addStringAt.apply(this,[B,"+"].concat(U)):"{numpaddecimal}"===x?B=this.addStringAt.apply(this,[B,"."].concat(U)):"{"===x||"}"===x?B=this.addStringAt.apply(this,[B,x].concat(U)):x.includes("{")||x.includes("}")||(B=this.addStringAt.apply(this,[B,x].concat(U))):B=this.addStringAt.apply(this,[B,"\n"].concat(U)):B=this.addStringAt.apply(this,[B,"\t"].concat(U)),N.debug&&console.log("Input will be: "+B),B}},{key:"updateCaretPos",value:function(x){var A=arguments.length>1&&void 0!==arguments[1]&&arguments[1],V=this.updateCaretPosAction(x,A);this.dispatch((function(x){x.setCaretPosition(V)}))}},{key:"updateCaretPosAction",value:function(x){var A=arguments.length>1&&void 0!==arguments[1]&&arguments[1],V=this.getOptions(),R=this.getCaretPosition();return null!=R&&(A?R>0&&(R-=x):R+=x),V.debug&&console.log("Caret at:",R),R}},{key:"addStringAt",value:function(x,A){var V,R=arguments.length>2&&void 0!==arguments[2]?arguments[2]:x.length,D=arguments.length>3&&void 0!==arguments[3]?arguments[3]:x.length,N=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return R||0===R?(V=[x.slice(0,R),A,x.slice(D)].join(""),this.isMaxLengthReached()||N&&this.updateCaretPos(A.length)):V=x+A,V}},{key:"removeAt",value:function(x){var A,V=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x.length,R=arguments.length>2&&void 0!==arguments[2]?arguments[2]:x.length,D=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(0===V&&0===R)return x;if(V===R){var N=/([\uD800-\uDBFF][\uDC00-\uDFFF])/g;V&&V>=0?x.substring(V-2,V).match(N)?(A=x.substr(0,V-2)+x.substr(V),D&&this.updateCaretPos(2,!0)):(A=x.substr(0,V-1)+x.substr(V),D&&this.updateCaretPos(1,!0)):x.slice(-2).match(N)?(A=x.slice(0,-2),D&&this.updateCaretPos(2,!0)):(A=x.slice(0,-1),D&&this.updateCaretPos(1,!0))}else A=x.slice(0,V)+x.slice(R),D&&this.dispatch((function(x){x.setCaretPosition(V)}));return A}},{key:"removeForwardsAt",value:function(x){var A,V=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x.length,R=arguments.length>2&&void 0!==arguments[2]?arguments[2]:x.length,D=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return null!=x&&x.length&&null!==V?(V===R?A=x.substring(V,V+2).match(/([\uD800-\uDBFF][\uDC00-\uDFFF])/g)?x.substr(0,V)+x.substr(V+2):x.substr(0,V)+x.substr(V+1):(A=x.slice(0,V)+x.slice(R),D&&this.dispatch((function(x){x.setCaretPosition(V)}))),A):x}},{key:"handleMaxLength",value:function(x,A){var V=this.getOptions(),R=V.maxLength,D=x[V.inputName||"default"],N=A.length-1>=R;if(A.length<=D.length)return!1;if(Number.isInteger(R))return V.debug&&console.log("maxLength (num) reached:",N),N?(this.maxLengthReached=!0,!0):(this.maxLengthReached=!1,!1);if("object"===i(R)){var U=A.length-1>=R[V.inputName||"default"];return V.debug&&console.log("maxLength (obj) reached:",U),U?(this.maxLengthReached=!0,!0):(this.maxLengthReached=!1,!1)}}},{key:"isMaxLengthReached",value:function(){return Boolean(this.maxLengthReached)}},{key:"isTouchDevice",value:function(){return"ontouchstart"in window||navigator.maxTouchPoints}},{key:"pointerEventsSupported",value:function(){return!!window.PointerEvent}},{key:"camelCase",value:function(x){return x?x.toLowerCase().trim().split(/[.\-_\s]/g).reduce((function(x,A){return A.length?x+A[0].toUpperCase()+A.slice(1):x})):""}},{key:"chunkArray",value:function(x,A){return t(Array(Math.ceil(x.length/A))).map((function(V,R){return x.slice(A*R,A+A*R)}))}},{key:"escapeRegex",value:function(x){return x.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}},{key:"getRtlOffset",value:function(x,A){var V=x,R=A.indexOf("");return R<x&&-1!=R&&V--,A.indexOf("")<x&&-1!=R&&V--,V<0?0:V}}])&&a(x.prototype,A),V&&a(x,V),Object.defineProperty(x,"prototype",{writable:!1}),n}();s(x,"noop",(function(){}));var A=x;function f(x){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(x){return typeof x}:function(x){return x&&"function"==typeof Symbol&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x})(x)}function d(x,A){for(var V=0;V<A.length;V++){var R=A[V];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(x,h(R.key),R)}}function p(x,A,V){return(A=h(A))in x?Object.defineProperty(x,A,{value:V,enumerable:!0,configurable:!0,writable:!0}):x[A]=V,x}function h(x){var A=function(x,A){if("object"!==f(x)||null===x)return x;var V=x[Symbol.toPrimitive];if(void 0!==V){var R=V.call(x,A);if("object"!==f(R))return R;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(x)}(x,"string");return"symbol"===f(A)?A:String(A)}var R=function(){function t(x){var V=this,R=x.dispatch,D=x.getOptions;!function(x,A){if(!(x instanceof A))throw new TypeError("Cannot call a class as a function")}(this,t),p(this,"getOptions",void 0),p(this,"dispatch",void 0),p(this,"isMofifierKey",(function(x){return x.altKey||x.ctrlKey||x.shiftKey||["Tab","CapsLock","Esc","ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(x.code||x.key||V.keyCodeToKey(null==x?void 0:x.keyCode))})),this.dispatch=R,this.getOptions=D,A.bindMethods(t,this)}var x,V;return x=t,(V=[{key:"handleHighlightKeyDown",value:function(x){var A=this.getOptions();A.physicalKeyboardHighlightPreventDefault&&this.isMofifierKey(x)&&(x.preventDefault(),x.stopImmediatePropagation());var V=this.getSimpleKeyboardLayoutKey(x);this.dispatch((function(R){var D,N,U=R.getButtonElement(V),B=R.getButtonElement("{".concat(V,"}"));if(U)D=U,N=V;else{if(!B)return;D=B,N="{".concat(V,"}")}var F,c=function(x){x.style.background=A.physicalKeyboardHighlightBgColor||"#dadce4",x.style.color=A.physicalKeyboardHighlightTextColor||"black"};if(D)if(Array.isArray(D)){if(D.forEach((function(x){return c(x)})),A.physicalKeyboardHighlightPress)if(A.physicalKeyboardHighlightPressUsePointerEvents)null===(F=D[0])||void 0===F||F.onpointerdown();else if(A.physicalKeyboardHighlightPressUseClick){var W;null===(W=D[0])||void 0===W||W.click()}else R.handleButtonClicked(N,x)}else c(D),A.physicalKeyboardHighlightPress&&(A.physicalKeyboardHighlightPressUsePointerEvents?D.onpointerdown():A.physicalKeyboardHighlightPressUseClick?D.click():R.handleButtonClicked(N,x))}))}},{key:"handleHighlightKeyUp",value:function(x){var A=this.getOptions();A.physicalKeyboardHighlightPreventDefault&&this.isMofifierKey(x)&&(x.preventDefault(),x.stopImmediatePropagation());var V=this.getSimpleKeyboardLayoutKey(x);this.dispatch((function(x){var R,D=x.getButtonElement(V)||x.getButtonElement("{".concat(V,"}")),i=function(x){x.removeAttribute&&x.removeAttribute("style")};D&&(Array.isArray(D)?(D.forEach((function(x){return i(x)})),A.physicalKeyboardHighlightPressUsePointerEvents&&(null===(R=D[0])||void 0===R||R.onpointerup())):(i(D),A.physicalKeyboardHighlightPressUsePointerEvents&&D.onpointerup()))}))}},{key:"getSimpleKeyboardLayoutKey",value:function(x){var A,V,R=x.code||x.key||this.keyCodeToKey(null==x?void 0:x.keyCode);return(V=null!=R&&R.includes("Numpad")||null!=R&&R.includes("Shift")||null!=R&&R.includes("Space")||null!=R&&R.includes("Backspace")||null!=R&&R.includes("Control")||null!=R&&R.includes("Alt")||null!=R&&R.includes("Meta")?x.code||"":x.key||this.keyCodeToKey(null==x?void 0:x.keyCode)||"").length>1?null===(A=V)||void 0===A?void 0:A.toLowerCase():V}},{key:"keyCodeToKey",value:function(x){return{8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",91:"Meta",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9",106:"NumpadMultiply",107:"NumpadAdd",109:"NumpadSubtract",110:"NumpadDecimal",111:"NumpadDivide",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"}[x]||""}}])&&d(x.prototype,V),Object.defineProperty(x,"prototype",{writable:!1}),t}();function y(x){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(x){return typeof x}:function(x){return x&&"function"==typeof Symbol&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x})(x)}function g(x,A){for(var V=0;V<A.length;V++){var R=A[V];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(x,b(R.key),R)}}function m(x,A,V){return(A=b(A))in x?Object.defineProperty(x,A,{value:V,enumerable:!0,configurable:!0,writable:!0}):x[A]=V,x}function b(x){var A=function(x,A){if("object"!==y(x)||null===x)return x;var V=x[Symbol.toPrimitive];if(void 0!==V){var R=V.call(x,A);if("object"!==y(R))return R;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(x)}(x,"string");return"symbol"===y(A)?A:String(A)}var D=function(){function t(x){var V=x.utilities,R=x.options;!function(x,A){if(!(x instanceof A))throw new TypeError("Cannot call a class as a function")}(this,t),m(this,"utilities",void 0),m(this,"options",void 0),m(this,"candidateBoxElement",void 0),m(this,"pageIndex",0),m(this,"pageSize",void 0),this.utilities=V,this.options=R,A.bindMethods(t,this),this.pageSize=this.utilities.getOptions().layoutCandidatesPageSize||5}var x,V;return x=t,(V=[{key:"destroy",value:function(){this.candidateBoxElement&&(this.candidateBoxElement.remove(),this.pageIndex=0)}},{key:"show",value:function(x){var A=this,V=x.candidateValue,R=x.targetElement,D=x.onSelect;if(V&&V.length){var N=this.utilities.chunkArray(V.split(" "),this.pageSize);this.renderPage({candidateListPages:N,targetElement:R,pageIndex:this.pageIndex,nbPages:N.length,onItemSelected:function(x,V){D(x,V),A.destroy()}})}}},{key:"renderPage",value:function(x){var A,V=this,R=x.candidateListPages,D=x.targetElement,N=x.pageIndex,U=x.nbPages,B=x.onItemSelected;null===(A=this.candidateBoxElement)||void 0===A||A.remove(),this.candidateBoxElement=document.createElement("div"),this.candidateBoxElement.className="hg-candidate-box";var F=document.createElement("ul");F.className="hg-candidate-box-list",R[N].forEach((function(x){var A,R=document.createElement("li"),r=function(){var x=new(V.options.useTouchEvents?TouchEvent:MouseEvent)("click");return Object.defineProperty(x,"target",{value:R}),x};R.className="hg-candidate-box-list-item",R.innerHTML=(null===(A=V.options.display)||void 0===A?void 0:A[x])||x,V.options.useTouchEvents?R.ontouchstart=function(A){return B(x,A||r())}:R.onclick=function(){var A=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r();return B(x,A)},F.appendChild(R)}));var W=N>0,H=document.createElement("div");H.classList.add("hg-candidate-box-prev"),W&&H.classList.add("hg-candidate-box-btn-active");var f=function(){W&&V.renderPage({candidateListPages:R,targetElement:D,pageIndex:N-1,nbPages:U,onItemSelected:B})};this.options.useTouchEvents?H.ontouchstart=f:H.onclick=f,this.candidateBoxElement.appendChild(H),this.candidateBoxElement.appendChild(F);var z=N<U-1,G=document.createElement("div");G.classList.add("hg-candidate-box-next"),z&&G.classList.add("hg-candidate-box-btn-active");var h=function(){z&&V.renderPage({candidateListPages:R,targetElement:D,pageIndex:N+1,nbPages:U,onItemSelected:B})};this.options.useTouchEvents?G.ontouchstart=h:G.onclick=h,this.candidateBoxElement.appendChild(G),D.prepend(this.candidateBoxElement)}}])&&g(x.prototype,V),Object.defineProperty(x,"prototype",{writable:!1}),t}();function E(x){return function(x){if(Array.isArray(x))return S(x)}(x)||function(x){if("undefined"!=typeof Symbol&&null!=x[Symbol.iterator]||null!=x["@@iterator"])return Array.from(x)}(x)||function(x,A){if(x){if("string"==typeof x)return S(x,A);var V=Object.prototype.toString.call(x).slice(8,-1);return"Object"===V&&x.constructor&&(V=x.constructor.name),"Map"===V||"Set"===V?Array.from(x):"Arguments"===V||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(V)?S(x,A):void 0}}(x)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(x,A){(null==A||A>x.length)&&(A=x.length);for(var V=0,R=new Array(A);V<A;V++)R[V]=x[V];return R}function O(x){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(x){return typeof x}:function(x){return x&&"function"==typeof Symbol&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x})(x)}function k(x,A){var V=Object.keys(x);if(Object.getOwnPropertySymbols){var R=Object.getOwnPropertySymbols(x);A&&(R=R.filter((function(A){return Object.getOwnPropertyDescriptor(x,A).enumerable}))),V.push.apply(V,R)}return V}function P(x,A){for(var V=0;V<A.length;V++){var R=A[V];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(x,C(R.key),R)}}function I(x,A,V){return(A=C(A))in x?Object.defineProperty(x,A,{value:V,enumerable:!0,configurable:!0,writable:!0}):x[A]=V,x}function C(x){var A=function(x,A){if("object"!==O(x)||null===x)return x;var V=x[Symbol.toPrimitive];if(void 0!==V){var R=V.call(x,A);if("object"!==O(R))return R;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(x)}(x,"string");return"symbol"===O(A)?A:String(A)}var N=function(){function t(x,V){var N=this;if(function(x,A){if(!(x instanceof A))throw new TypeError("Cannot call a class as a function")}(this,t),I(this,"input",void 0),I(this,"options",void 0),I(this,"utilities",void 0),I(this,"caretPosition",void 0),I(this,"caretPositionEnd",void 0),I(this,"keyboardDOM",void 0),I(this,"keyboardPluginClasses",void 0),I(this,"keyboardDOMClass",void 0),I(this,"buttonElements",void 0),I(this,"currentInstanceName",void 0),I(this,"allKeyboardInstances",void 0),I(this,"keyboardInstanceNames",void 0),I(this,"isFirstKeyboardInstance",void 0),I(this,"physicalKeyboard",void 0),I(this,"modules",void 0),I(this,"activeButtonClass",void 0),I(this,"holdInteractionTimeout",void 0),I(this,"holdTimeout",void 0),I(this,"isMouseHold",void 0),I(this,"initialized",void 0),I(this,"candidateBox",void 0),I(this,"keyboardRowsDOM",void 0),I(this,"defaultName","default"),I(this,"activeInputElement",null),I(this,"handleParams",(function(x,A){var V,R,D;if("string"==typeof x)V=x.split(".").join(""),R=document.querySelector(".".concat(V)),D=A;else if(x instanceof HTMLDivElement){if(!x.className)throw console.warn("Any DOM element passed as parameter must have a class."),new Error("KEYBOARD_DOM_CLASS_ERROR");V=x.className.split(" ")[0],R=x,D=A}else V="simple-keyboard",R=document.querySelector(".".concat(V)),D=x;return{keyboardDOMClass:V,keyboardDOM:R,options:D}})),I(this,"getOptions",(function(){return N.options})),I(this,"getCaretPosition",(function(){return N.caretPosition})),I(this,"getCaretPositionEnd",(function(){return N.caretPositionEnd})),I(this,"registerModule",(function(x,A){N.modules[x]||(N.modules[x]={}),A(N.modules[x])})),I(this,"getKeyboardClassString",(function(){for(var x=arguments.length,A=new Array(x),V=0;V<x;V++)A[V]=arguments[V];return[N.keyboardDOMClass].concat(A).filter((function(x){return!!x})).join(" ")})),"undefined"!=typeof window){var U=this.handleParams(x,V),B=U.keyboardDOMClass,F=U.keyboardDOM,W=U.options,H=void 0===W?{}:W;this.utilities=new A({getOptions:this.getOptions,getCaretPosition:this.getCaretPosition,getCaretPositionEnd:this.getCaretPositionEnd,dispatch:this.dispatch}),this.caretPosition=null,this.caretPositionEnd=null,this.keyboardDOM=F,this.options=function(x){for(var A=1;A<arguments.length;A++){var V=null!=arguments[A]?arguments[A]:{};A%2?k(Object(V),!0).forEach((function(A){I(x,A,V[A])})):Object.getOwnPropertyDescriptors?Object.defineProperties(x,Object.getOwnPropertyDescriptors(V)):k(Object(V)).forEach((function(A){Object.defineProperty(x,A,Object.getOwnPropertyDescriptor(V,A))}))}return x}({layoutName:"default",theme:"hg-theme-default",inputName:"default",preventMouseDownDefault:!1,enableLayoutCandidates:!0,excludeFromLayout:{}},H),this.keyboardPluginClasses="",A.bindMethods(t,this);var z=this.options.inputName,G=void 0===z?this.defaultName:z;if(this.input={},this.input[G]="",this.keyboardDOMClass=B,this.buttonElements={},window.SimpleKeyboardInstances||(window.SimpleKeyboardInstances={}),this.currentInstanceName=this.utilities.camelCase(this.keyboardDOMClass),window.SimpleKeyboardInstances[this.currentInstanceName]=this,this.allKeyboardInstances=window.SimpleKeyboardInstances,this.keyboardInstanceNames=Object.keys(window.SimpleKeyboardInstances),this.isFirstKeyboardInstance=this.keyboardInstanceNames[0]===this.currentInstanceName,this.physicalKeyboard=new R({dispatch:this.dispatch,getOptions:this.getOptions}),this.candidateBox=this.options.enableLayoutCandidates?new D({utilities:this.utilities,options:this.options}):null,!this.keyboardDOM)throw console.warn('".'.concat(B,'" was not found in the DOM.')),new Error("KEYBOARD_DOM_ERROR");this.render(),this.modules={},this.loadModules()}}var x,V;return x=t,(V=[{key:"setCaretPosition",value:function(x){var A=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x;this.caretPosition=x,this.caretPositionEnd=A}},{key:"getInputCandidates",value:function(x){var A=this,V=this.options,R=V.layoutCandidates,D=V.layoutCandidatesCaseSensitiveMatch;if(!R||"object"!==O(R))return{};var N=Object.keys(R).filter((function(V){var R=x.substring(0,A.getCaretPositionEnd()||0)||x,N=new RegExp("".concat(A.utilities.escapeRegex(V),"$"),D?"g":"gi");return!!E(R.matchAll(N)).length}));if(N.length>1){var U=N.sort((function(x,A){return A.length-x.length}))[0];return{candidateKey:U,candidateValue:R[U]}}if(N.length){var B=N[0];return{candidateKey:B,candidateValue:R[B]}}return{}}},{key:"showCandidatesBox",value:function(x,A,V){var R=this;this.candidateBox&&this.candidateBox.show({candidateValue:A,targetElement:V,onSelect:function(A,V){var D=R.options,N=D.layoutCandidatesCaseSensitiveMatch,U=D.disableCandidateNormalization,B=D.enableLayoutCandidatesKeyPress,F=A;U||(F=A.normalize("NFD"));var W=R.getInput(R.options.inputName,!0),H=R.getCaretPositionEnd()||0,z=W.substring(0,H||0)||W,G=new RegExp("".concat(R.utilities.escapeRegex(x),"$"),N?"g":"gi"),j=z.replace(G,F),q=W.replace(z,j),Q=j.length-z.length,K=(H||W.length)+Q;K<0&&(K=0),R.setInput(q,R.options.inputName,!0),R.setCaretPosition(K),B&&"function"==typeof R.options.onKeyPress&&R.options.onKeyPress(A,V),"function"==typeof R.options.onChange&&R.options.onChange(R.getInput(R.options.inputName,!0),V),"function"==typeof R.options.onChangeAll&&R.options.onChangeAll(R.getAllInputs(),V)}})}},{key:"handleButtonClicked",value:function(x,A){var V=this.options,R=V.inputName,D=void 0===R?this.defaultName:R,N=V.debug;if("{//}"!==x){this.input[D]||(this.input[D]="");var U=this.utilities.getUpdatedInput(x,this.input[D],this.caretPosition,this.caretPositionEnd);if(this.utilities.isStandardButton(x)&&this.activeInputElement&&this.input[D]&&this.input[D]===U&&0===this.caretPosition&&this.caretPositionEnd===U.length)return this.setInput("",this.options.inputName,!0),this.setCaretPosition(0),this.activeInputElement.value="",this.activeInputElement.setSelectionRange(0,0),void this.handleButtonClicked(x,A);if("function"==typeof this.options.onKeyPress&&this.options.onKeyPress(x,A),this.input[D]!==U&&(!this.options.inputPattern||this.options.inputPattern&&this.inputPatternIsValid(U))){if(this.options.maxLength&&this.utilities.handleMaxLength(this.input,U))return;var B=this.utilities.getUpdatedInput(x,this.input[D],this.caretPosition,this.caretPositionEnd,!0);if(this.setInput(B,this.options.inputName,!0),N&&console.log("Input changed:",this.getAllInputs()),this.options.debug&&console.log("Caret at: ",this.getCaretPosition(),this.getCaretPositionEnd(),"(".concat(this.keyboardDOMClass,")"),null==A?void 0:A.type),this.options.syncInstanceInputs&&this.syncInstanceInputs(),"function"==typeof this.options.onChange&&this.options.onChange(this.getInput(this.options.inputName,!0),A),"function"==typeof this.options.onChangeAll&&this.options.onChangeAll(this.getAllInputs(),A),null!=A&&A.target&&this.options.enableLayoutCandidates){var F,W=this.getInputCandidates(U),H=W.candidateKey,z=W.candidateValue;H&&z?this.showCandidatesBox(H,z,this.keyboardDOM):null===(F=this.candidateBox)||void 0===F||F.destroy()}}this.caretPositionEnd&&this.caretPosition!==this.caretPositionEnd&&(this.setCaretPosition(this.caretPositionEnd,this.caretPositionEnd),this.activeInputElement&&this.activeInputElement.setSelectionRange(this.caretPositionEnd,this.caretPositionEnd),this.options.debug&&console.log("Caret position aligned",this.caretPosition)),N&&console.log("Key pressed:",x)}}},{key:"getMouseHold",value:function(){return this.isMouseHold}},{key:"setMouseHold",value:function(x){this.options.syncInstanceInputs?this.dispatch((function(A){A.isMouseHold=x})):this.isMouseHold=x}},{key:"handleButtonMouseDown",value:function(x,A){var V=this;A&&(this.options.preventMouseDownDefault&&A.preventDefault(),this.options.stopMouseDownPropagation&&A.stopPropagation(),A.target.classList.add(this.activeButtonClass)),this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),this.holdTimeout&&clearTimeout(this.holdTimeout),this.setMouseHold(!0),this.options.disableButtonHold||(this.holdTimeout=window.setTimeout((function(){(V.getMouseHold()&&(!x.includes("{")&&!x.includes("}")||"{delete}"===x||"{backspace}"===x||"{bksp}"===x||"{space}"===x||"{tab}"===x)||"{arrowright}"===x||"{arrowleft}"===x||"{arrowup}"===x||"{arrowdown}"===x)&&(V.options.debug&&console.log("Button held:",x),V.handleButtonHold(x)),clearTimeout(V.holdTimeout)}),500))}},{key:"handleButtonMouseUp",value:function(x,A){var V=this;A&&(this.options.preventMouseUpDefault&&A.preventDefault&&A.preventDefault(),this.options.stopMouseUpPropagation&&A.stopPropagation&&A.stopPropagation(),!(A.target===this.keyboardDOM||A.target&&this.keyboardDOM.contains(A.target)||this.candidateBox&&this.candidateBox.candidateBoxElement&&(A.target===this.candidateBox.candidateBoxElement||A.target&&this.candidateBox.candidateBoxElement.contains(A.target)))&&this.candidateBox&&this.candidateBox.destroy()),this.recurseButtons((function(x){x.classList.remove(V.activeButtonClass)})),this.setMouseHold(!1),this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),x&&"function"==typeof this.options.onKeyReleased&&this.options.onKeyReleased(x,A)}},{key:"handleKeyboardContainerMouseDown",value:function(x){this.options.preventMouseDownDefault&&x.preventDefault()}},{key:"handleButtonHold",value:function(x){var A=this;this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),this.holdInteractionTimeout=window.setTimeout((function(){A.getMouseHold()?(A.handleButtonClicked(x),A.handleButtonHold(x)):clearTimeout(A.holdInteractionTimeout)}),100)}},{key:"syncInstanceInputs",value:function(){var x=this;this.dispatch((function(A){A.replaceInput(x.input),A.setCaretPosition(x.caretPosition,x.caretPositionEnd)}))}},{key:"clearInput",value:function(){var x=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.inputName||this.defaultName;this.input[x]="",this.setCaretPosition(0),this.options.syncInstanceInputs&&this.syncInstanceInputs()}},{key:"getInput",value:function(){var x=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.inputName||this.defaultName,A=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.options.syncInstanceInputs&&!A&&this.syncInstanceInputs(),this.options.rtl?""+this.input[x].replace("","").replace("","")+"":this.input[x]}},{key:"getAllInputs",value:function(){var x=this,A={};return Object.keys(this.input).forEach((function(V){A[V]=x.getInput(V,!0)})),A}},{key:"setInput",value:function(x){var A=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.options.inputName||this.defaultName,V=arguments.length>2?arguments[2]:void 0;this.input[A]=x,!V&&this.options.syncInstanceInputs&&this.syncInstanceInputs()}},{key:"replaceInput",value:function(x){this.input=x}},{key:"setOptions",value:function(){var x=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},A=this.changedOptions(x);this.options=Object.assign(this.options,x),A.length&&(this.options.debug&&console.log("changedOptions",A),this.onSetOptions(A),this.render())}},{key:"changedOptions",value:function(x){var A=this;return Object.keys(x).filter((function(V){return JSON.stringify(x[V])!==JSON.stringify(A.options[V])}))}},{key:"onSetOptions",value:function(){var x=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];x.includes("layoutName")&&this.candidateBox&&this.candidateBox.destroy(),(x.includes("layoutCandidatesPageSize")||x.includes("layoutCandidates"))&&this.candidateBox&&(this.candidateBox.destroy(),this.candidateBox=new D({utilities:this.utilities,options:this.options}))}},{key:"resetRows",value:function(){this.keyboardRowsDOM&&this.keyboardRowsDOM.remove(),this.keyboardDOM.className=this.keyboardDOMClass,this.keyboardDOM.setAttribute("data-skInstance",this.currentInstanceName),this.buttonElements={}}},{key:"dispatch",value:function(x){if(!window.SimpleKeyboardInstances)throw console.warn("SimpleKeyboardInstances is not defined. Dispatch cannot be called."),new Error("INSTANCES_VAR_ERROR");return Object.keys(window.SimpleKeyboardInstances).forEach((function(A){x(window.SimpleKeyboardInstances[A],A)}))}},{key:"addButtonTheme",value:function(x,A){var V=this;A&&x&&(x.split(" ").forEach((function(R){A.split(" ").forEach((function(A){V.options.buttonTheme||(V.options.buttonTheme=[]);var D=!1;V.options.buttonTheme.map((function(x){if(null!=x&&x.class.split(" ").includes(A)){D=!0;var V=x.buttons.split(" ");V.includes(R)||(D=!0,V.push(R),x.buttons=V.join(" "))}return x})),D||V.options.buttonTheme.push({class:A,buttons:x})}))})),this.render())}},{key:"removeButtonTheme",value:function(x,A){var V=this;if(!x&&!A)return this.options.buttonTheme=[],void this.render();x&&Array.isArray(this.options.buttonTheme)&&this.options.buttonTheme.length&&(x.split(" ").forEach((function(x){var R;null===(R=V.options)||void 0===R||null===(R=R.buttonTheme)||void 0===R||R.map((function(R,D){if(R&&A&&A.includes(R.class)||!A){var N,U,B=null===(N=R)||void 0===N?void 0:N.buttons.split(" ").filter((function(A){return A!==x}));R&&null!=B&&B.length?R.buttons=B.join(" "):(null===(U=V.options.buttonTheme)||void 0===U||U.splice(D,1),R=null)}return R}))})),this.render())}},{key:"getButtonElement",value:function(x){var A,V=this.buttonElements[x];return V&&(A=V.length>1?V:V[0]),A}},{key:"inputPatternIsValid",value:function(x){var A,V=this.options.inputPattern;if((A=V instanceof RegExp?V:V[this.options.inputName||this.defaultName])&&x){var R=A.test(x);return this.options.debug&&console.log('inputPattern ("'.concat(A,'"): ').concat(R?"passed":"did not pass!")),R}return!0}},{key:"setEventListeners",value:function(){if(this.isFirstKeyboardInstance||!this.allKeyboardInstances){this.options.debug&&console.log("Caret handling started (".concat(this.keyboardDOMClass,")"));var x=this.options.physicalKeyboardHighlightPreventDefault,A=void 0!==x&&x;document.addEventListener("keyup",this.handleKeyUp,A),document.addEventListener("keydown",this.handleKeyDown,A),document.addEventListener("mouseup",this.handleMouseUp),document.addEventListener("touchend",this.handleTouchEnd),document.addEventListener("selectionchange",this.handleSelectionChange),document.addEventListener("select",this.handleSelect)}}},{key:"handleKeyUp",value:function(x){this.caretEventHandler(x),this.options.physicalKeyboardHighlight&&this.physicalKeyboard.handleHighlightKeyUp(x)}},{key:"handleKeyDown",value:function(x){this.options.physicalKeyboardHighlight&&this.physicalKeyboard.handleHighlightKeyDown(x)}},{key:"handleMouseUp",value:function(x){this.caretEventHandler(x)}},{key:"handleTouchEnd",value:function(x){this.caretEventHandler(x)}},{key:"handleSelect",value:function(x){this.caretEventHandler(x)}},{key:"handleSelectionChange",value:function(x){navigator.userAgent.includes("Firefox")||this.caretEventHandler(x)}},{key:"caretEventHandler",value:function(x){var A,V=this;x.target.tagName&&(A=x.target.tagName.toLowerCase()),this.dispatch((function(R){if(x.target===R.keyboardDOM||x.target&&R.keyboardDOM.contains(x.target),V.options.syncInstanceInputs&&Array.isArray(x.path)&&x.path.some((function(x){var A;return null==x||null===(A=x.hasAttribute)||void 0===A?void 0:A.call(x,"data-skInstance")})),("textarea"===A||"input"===A&&["text","search","url","tel","password"].includes(x.target.type))&&!R.options.disableCaretPositioning){var D=x.target.selectionStart,N=x.target.selectionEnd;R.options.rtl&&(D=R.utilities.getRtlOffset(D,R.getInput()),N=R.utilities.getRtlOffset(N,R.getInput())),R.setCaretPosition(D,N),V.activeInputElement=x.target,R.options.debug&&console.log("Caret at: ",R.getCaretPosition(),R.getCaretPositionEnd(),x&&x.target.tagName.toLowerCase(),"(".concat(R.keyboardDOMClass,")"),null==x?void 0:x.type)}}))}},{key:"recurseButtons",value:function(x){var A=this;x&&Object.keys(this.buttonElements).forEach((function(V){return A.buttonElements[V].forEach(x)}))}},{key:"destroy",value:function(){this.options.debug&&console.log("Destroying simple-keyboard instance: ".concat(this.currentInstanceName));var x=this.options.physicalKeyboardHighlightPreventDefault,A=void 0!==x&&x;document.removeEventListener("keyup",this.handleKeyUp,A),document.removeEventListener("keydown",this.handleKeyDown,A),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("touchend",this.handleTouchEnd),document.removeEventListener("select",this.handleSelect),document.removeEventListener("selectionchange",this.handleSelectionChange),document.onpointerup=null,document.ontouchend=null,document.ontouchcancel=null,document.onmouseup=null,this.recurseButtons((function(x){x&&(x.onpointerdown=null,x.onpointerup=null,x.onpointercancel=null,x.ontouchstart=null,x.ontouchend=null,x.ontouchcancel=null,x.onclick=null,x.onmousedown=null,x.onmouseup=null,x.remove(),x=null)})),this.keyboardDOM.onpointerdown=null,this.keyboardDOM.ontouchstart=null,this.keyboardDOM.onmousedown=null,this.resetRows(),this.candidateBox&&(this.candidateBox.destroy(),this.candidateBox=null),this.activeInputElement=null,this.keyboardDOM.removeAttribute("data-skInstance"),this.keyboardDOM.innerHTML="",window.SimpleKeyboardInstances[this.currentInstanceName]=null,delete window.SimpleKeyboardInstances[this.currentInstanceName],this.initialized=!1}},{key:"getButtonThemeClasses",value:function(x){var A=this.options.buttonTheme,V=[];return Array.isArray(A)&&A.forEach((function(A){if(A&&A.class&&"string"==typeof A.class&&A.buttons&&"string"==typeof A.buttons){var R=A.class.split(" ");A.buttons.split(" ").includes(x)&&(V=[].concat(E(V),E(R)))}else console.warn('Incorrect "buttonTheme". Please check the documentation.',A)})),V}},{key:"setDOMButtonAttributes",value:function(x,A){var V=this.options.buttonAttributes;Array.isArray(V)&&V.forEach((function(V){V.attribute&&"string"==typeof V.attribute&&V.value&&"string"==typeof V.value&&V.buttons&&"string"==typeof V.buttons?V.buttons.split(" ").includes(x)&&A(V.attribute,V.value):console.warn('Incorrect "buttonAttributes". Please check the documentation.',V)}))}},{key:"onTouchDeviceDetected",value:function(){this.processAutoTouchEvents(),this.disableContextualWindow()}},{key:"disableContextualWindow",value:function(){window.oncontextmenu=function(x){if(x.target.classList.contains("hg-button"))return x.preventDefault(),x.stopPropagation(),!1}}},{key:"processAutoTouchEvents",value:function(){this.options.autoUseTouchEvents&&(this.options.useTouchEvents=!0,this.options.debug&&console.log("autoUseTouchEvents: Touch device detected, useTouchEvents enabled."))}},{key:"onInit",value:function(){this.options.debug&&console.log("".concat(this.keyboardDOMClass," Initialized")),this.setEventListeners(),"function"==typeof this.options.onInit&&this.options.onInit(this)}},{key:"beforeFirstRender",value:function(){this.utilities.isTouchDevice()&&this.onTouchDeviceDetected(),"function"==typeof this.options.beforeFirstRender&&this.options.beforeFirstRender(this),this.isFirstKeyboardInstance&&this.utilities.pointerEventsSupported()&&!this.options.useTouchEvents&&!this.options.useMouseEvents&&this.options.debug&&console.log("Using PointerEvents as it is supported by this browser"),this.options.useTouchEvents&&this.options.debug&&console.log("useTouchEvents has been enabled. Only touch events will be used.")}},{key:"beforeRender",value:function(){"function"==typeof this.options.beforeRender&&this.options.beforeRender(this)}},{key:"onRender",value:function(){"function"==typeof this.options.onRender&&this.options.onRender(this)}},{key:"onModulesLoaded",value:function(){"function"==typeof this.options.onModulesLoaded&&this.options.onModulesLoaded(this)}},{key:"loadModules",value:function(){var x=this;Array.isArray(this.options.modules)&&(this.options.modules.forEach((function(A){var V=new A(x);V.init&&V.init(x)})),this.keyboardPluginClasses="modules-loaded",this.render(),this.onModulesLoaded())}},{key:"getModuleProp",value:function(x,A){return!!this.modules[x]&&this.modules[x][A]}},{key:"getModulesList",value:function(){return Object.keys(this.modules)}},{key:"parseRowDOMContainers",value:function(x,A,V,R){var D=this,N=Array.from(x.children),U=0;return N.length&&V.forEach((function(V,B){var F=R[B];if(!(F&&F>V))return!1;var W=V-U,H=F-U,z=document.createElement("div");z.className+="hg-button-container";var G="".concat(D.options.layoutName,"-r").concat(A,"c").concat(B);z.setAttribute("data-skUID",G);var j=N.splice(W,H-W+1);U=H-W,j.forEach((function(x){return z.appendChild(x)})),N.splice(W,0,z),x.innerHTML="",N.forEach((function(A){return x.appendChild(A)})),D.options.debug&&console.log("rowDOMContainer",j,W,H,U+1)})),x}},{key:"render",value:function(){var x=this;this.resetRows(),this.initialized||this.beforeFirstRender(),this.beforeRender();var A="hg-layout-".concat(this.options.layoutName),V=this.options.layout||{default:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w e r t y u i o p [ ] \\","{lock} a s d f g h j k l ; ' {enter}","{shift} z x c v b n m , . / {shift}",".com @ {space}"],shift:["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W E R T Y U I O P { } |",'{lock} A S D F G H J K L : " {enter}',"{shift} Z X C V B N M < > ? {shift}",".com @ {space}"]},R=this.options.useTouchEvents||!1,D=R?"hg-touch-events":"",N=this.options.useMouseEvents||!1,U=this.options.disableRowButtonContainers;this.keyboardDOM.className=this.getKeyboardClassString(this.options.theme,A,this.keyboardPluginClasses,D),this.keyboardDOM.setAttribute("data-skInstance",this.currentInstanceName),this.keyboardRowsDOM=document.createElement("div"),this.keyboardRowsDOM.className="hg-rows",V[this.options.layoutName||this.defaultName].forEach((function(A,V){var D=A.split(" ");x.options.excludeFromLayout&&x.options.excludeFromLayout[x.options.layoutName||x.defaultName]&&(D=D.filter((function(A){return x.options.excludeFromLayout&&!x.options.excludeFromLayout[x.options.layoutName||x.defaultName].includes(A)})));var B=document.createElement("div");B.className+="hg-row";var F=[],W=[];D.forEach((function(A,D){var H,z=!U&&"string"==typeof A&&A.length>1&&0===A.indexOf("["),G=!U&&"string"==typeof A&&A.length>1&&A.indexOf("]")===A.length-1;z&&(F.push(D),A=A.replace(/\[/g,"")),G&&(W.push(D),A=A.replace(/\]/g,""));var j=x.utilities.getButtonClass(A),q=x.utilities.getButtonDisplayName(A,x.options.display,x.options.mergeDisplay),Q=x.options.useButtonTag?"button":"div",K=document.createElement(Q);K.className+="hg-button ".concat(j),(H=K.classList).add.apply(H,E(x.getButtonThemeClasses(A))),x.setDOMButtonAttributes(A,(function(x,A){K.setAttribute(x,A)})),x.activeButtonClass="hg-activeButton",!x.utilities.pointerEventsSupported()||R||N?R?(K.ontouchstart=function(V){x.handleButtonClicked(A,V),x.handleButtonMouseDown(A,V)},K.ontouchend=function(V){x.handleButtonMouseUp(A,V)},K.ontouchcancel=function(V){x.handleButtonMouseUp(A,V)}):(K.onclick=function(V){x.setMouseHold(!1),"function"!=typeof x.options.onKeyReleased&&x.handleButtonClicked(A,V)},K.onmousedown=function(V){"function"!=typeof x.options.onKeyReleased||x.isMouseHold||x.handleButtonClicked(A,V),x.handleButtonMouseDown(A,V)},K.onmouseup=function(V){x.handleButtonMouseUp(A,V)}):(K.onpointerdown=function(V){x.handleButtonClicked(A,V),x.handleButtonMouseDown(A,V)},K.onpointerup=function(V){x.handleButtonMouseUp(A,V)},K.onpointercancel=function(V){x.handleButtonMouseUp(A,V)}),K.setAttribute("data-skBtn",A);var J="".concat(x.options.layoutName,"-r").concat(V,"b").concat(D);K.setAttribute("data-skBtnUID",J);var X=document.createElement("span");X.innerHTML=q,K.appendChild(X),x.buttonElements[A]||(x.buttonElements[A]=[]),x.buttonElements[A].push(K),B.appendChild(K)})),B=x.parseRowDOMContainers(B,V,F,W),x.keyboardRowsDOM.appendChild(B)})),this.keyboardDOM.appendChild(this.keyboardRowsDOM),this.onRender(),this.initialized||(this.initialized=!0,!this.utilities.pointerEventsSupported()||R||N?R?(document.ontouchend=function(A){return x.handleButtonMouseUp(void 0,A)},document.ontouchcancel=function(A){return x.handleButtonMouseUp(void 0,A)},this.keyboardDOM.ontouchstart=function(A){return x.handleKeyboardContainerMouseDown(A)}):R||(document.onmouseup=function(A){return x.handleButtonMouseUp(void 0,A)},this.keyboardDOM.onmousedown=function(A){return x.handleKeyboardContainerMouseDown(A)}):(document.onpointerup=function(A){return x.handleButtonMouseUp(void 0,A)},this.keyboardDOM.onpointerdown=function(A){return x.handleKeyboardContainerMouseDown(A)}),this.onInit())}}])&&P(x.prototype,V),Object.defineProperty(x,"prototype",{writable:!1}),t}(),U=N,B=N}(),V}()})),function(x){!function(x){let A;!function(x){let A;A=x.Application||(x.Application={})}(A||(A={})),function(x){let A;!function(x){let A;!function(x){x.namespace="VisiWin.AppServices.Impl"}(A=x.Impl||(x.Impl={}))}(A=x.AppServices||(x.AppServices={}))}(A||(A={}))}(x.Application||(x.Application={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){x.namespace="VisiWin.AppServices.Impl"}(x.Impl||(x.Impl={}))}(x.AppServices||(x.AppServices={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){let A;!function(x){x.FlexStart="flex-start",x.FlexEnd="flex-end",x.Center="center",x.Baseline="baseline",x.Stretch="stretch"}(A=x.AlignItems||(x.AlignItems={}))}(x.Enums||(x.Enums={}))}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){let A;!function(x){x.FlexStart="flex-start",x.FlexEnd="flex-end",x.Center="center",x.SpaceBetween="space-between",x.SpaceAround="space-around",x.SpaceEvenly="space-evenly"}(A=x.JustifyContent||(x.JustifyContent={}))}(x.Enums||(x.Enums={}))}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){let A;!function(x){x.Visible="Visible",x.Disabled="Disabled",x.Hidden="Hidden",x.Collapse="Collapse"}(A=x.AuthorizationMode||(x.AuthorizationMode={}))}(x.Enums||(x.Enums={}))}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){let A;!function(x){x.None="none",x.Dotted="dotted",x.Dashed="dashed",x.Solid="solid",x.Double="double",x.Groove="groove",x.Ridge="ridge",x.Inset="inset",x.Outset="outset"}(A=x.BorderStyle||(x.BorderStyle={}))}(x.Enums||(x.Enums={}))}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){let A;!function(x){x.Visible="visible",x.visible="visible",x.Hidden="hidden",x.hidden="hidden",x.Collapse="collapse",x.collapse="collapse"}(A=x.Visibility||(x.Visibility={}))}(x.Enums||(x.Enums={}))}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){let A;!function(x){x.Horizontal="Horizontal",x.Vertical="Vertical"}(A=x.Orientation||(x.Orientation={}))}(x.Enums||(x.Enums={}))}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){let A;!function(x){x.None="None",x.Uniform="Uniform",x.UniformToFill="UniformToFill",x.Fill="Fill"}(A=x.StretchMode||(x.StretchMode={}))}(x.Enums||(x.Enums={}))}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){let A;!function(x){x.Both="Both",x.DownOnly="DownOnly",x.UpOnly="UpOnly"}(A=x.StretchDirection||(x.StretchDirection={}))}(x.Enums||(x.Enums={}))}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){x.DesignerType={Child:"Child",TemplateChild:"TemplateChild",RegionControl:"RegionControl",Control:"Control",CustomControl:"CustomControl",UserControl:"UserControl",ContentControl:"ContentControl",DesignerContainer:"DesignerContainer",Collection:"Collection",DisabledControl:"DisabledControl",TemplateContainer:"TemplateContainer",UserControlChild:"UserControlChild",child:"child"}}(x.Enums||(x.Enums={}))}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){let A;!function(x){x.Numeric="Numeric",x.Alphanumeric="Alphanumeric"}(A=x.TouchKeyboardType||(x.TouchKeyboardType={}))}(x.Enums||(x.Enums={}))}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){let A;!function(x){x.Synchronous="Synchronous",x.Asynchronous="Asynchronous"}(A=x.RenderMode||(x.RenderMode={}))}(x.Enums||(x.Enums={}))}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){let A;!function(x){x.None="None",x.Single="Single"}(A=x.SelectionMode||(x.SelectionMode={}))}(x.Enums||(x.Enums={}))}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){let A;!function(x){x.Auto="Auto",x.Alphabetical="Alphabetical",x.Numeric="Numeric",x.Date="Date",x.Boolean="Boolean"}(A=x.SortType||(x.SortType={}))}(x.Enums||(x.Enums={}))}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){let A;!function(x){x.Internal="Internal",x.External="External"}(A=x.SortMode||(x.SortMode={}))}(x.Enums||(x.Enums={}))}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){let A;!function(x){x.None="None",x.Ascending="Ascending",x.Descending="Descending"}(A=x.SortDirection||(x.SortDirection={}))}(x.Enums||(x.Enums={}))}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(x){let A;!function(x){x.mouse="mouse",x.pen="pen",x.touch="touch"}(A=x.PointerType||(x.PointerType={}))}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(x){x.ControlEvent={onClick:"click",onDown:"down",onUp:"up",onButtonDown:"buttondown",onButtonUp:"buttonup",onButtonClick:"buttonclick",onButtonClickTrue:"buttonclicktrue",onButtonClickFalse:"buttonclickfalse"},x.PointerEventType={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",pointercancel:"pointercancel",pointerenter:"pointerenter",pointerleave:"pointerleave"}}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(x){x.KeyboardEventType={keyup:"keyup",keydown:"keydown",keypress:"keypress"}}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(x){x.MouseEventType={click:"click",dblclick:"dblclick",mouseup:"mouseup",mousedown:"mousedown",mouseover:"mouseover",mouseenter:"mouseenter",mouseout:"mouseout",mouseleave:"mouseleave",mousemove:"mousemove",contextmenu:"contextmenu"}}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(x){x.FocusEventType={focus:"focus",focusin:"focusin",focusout:"focusout",blur:"blur"}}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(x){x.Conditions={OPERATOR_NONE:0,OPERATOR_GREATER:1,OPERATOR_GRATEREQUAL:2,OPERATOR_LESS:3,OPERATOR_LESSEQUAL:4,OPERATOR_EQUAL:5,OPERATOR_UNEQUAL:6,OPERATOR_INRANGE:7,OPERATOR_OUTRANGE:8,OPERATOR_NUMERATION:9}}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(x){x.PropertyParserState={PPS_CONST:0,PPS_AT:1,PPS_PARA:2,PPS_END:3},x.ConditionOperators={OPERATOR_GRATER:">",OPERATOR_GRATEREQUAL:">=",OPERATOR_LESS:"<",OPERATOR_LESSEQUAL:"<=",OPERATOR_EQUAL:"==",OPERATOR_UNEQUAL:"!=",OPERATOR_INRANGE:"<>",OPERATOR_OUTRANGE:"!<>",OPERATOR_NUMERATION:","}}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(x){x.eventHandler=WinJS.UI.eventHandler,x.process=WinJS.UI.process,x.processAll=WinJS.UI.processAll,x.setControl=WinJS.UI.setControl,x.setOptions=WinJS.UI.setOptions}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(x){x.setInnerHTML=WinJS.Utilities.setInnerHTML,x.setInnerHTMLUnsafe=WinJS.Utilities.setInnerHTMLUnsafe,x.setOuterHTML=WinJS.Utilities.setOuterHTML,x.setOuterHTMLUnsafe=WinJS.Utilities.setOuterHTMLUnsafe,x.insertAdjacentHTML=WinJS.Utilities.insertAdjacentHTML,x.insertAdjacentHTMLUnsafe=WinJS.Utilities.insertAdjacentHTMLUnsafe,x.query=WinJS.Utilities.query,x.getMember=WinJS.Utilities.getMember,x.Scheduler=WinJS.Utilities.Scheduler,x.markSupportedForProcessing=WinJS.Utilities.markSupportedForProcessing,x.Key=WinJS.Utilities.Key,x.addEventListener=function(x,A,V,R){WinJS.Utilities._addEventListener(x,A,V,R)},x.addGlobalEventListener=function(x,A,V){WinJS.Utilities._addEventListener(document.body,x,A,V)},x.removeEventListener=function(x,A,V,R){WinJS.Utilities._removeEventListener(x,A,V,R)},x.removeGlobalEventListener=function(x,A,V){WinJS.Utilities._removeEventListener(document.body,x,A,V)},x.schedule=function schedule(x,A,V){WinJS.Utilities.Scheduler.schedule((function xhrCallback(){x(A)}),V,null,"VisiWin.Utilities.xhr")}}(x.Utilities||(x.Utilities={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";const V=["abort","abort","abort","afterprint","animationend","animationiteration","animationstart","audioprocess","beforeprint","beforeunload","beginEvent","blocked","blur","cached","canplay","canplaythrough","change","chargingchange","chargingtimechange","checking","click","close","compassneedscalibration","complete","complete","compositionend","compositionstart","compositionupdate","contextmenu","copy","cut","dblclick","devicelight","devicemotion","deviceorientation","deviceproximity","dischargingtimechange","DOMActivate","DOMAttributeNameChanged","DOMAttrModified","DOMCharacterDataModified","DOMContentLoaded","DOMElementNameChanged","DOMFocusIn","DOMFocusOut","DOMNodeInserted","DOMNodeInsertedIntoDocument","DOMNodeRemoved","DOMNodeRemovedFromDocument","DOMSubtreeModified","downloading","drag","dragend","dragenter","dragleave","dragover","dragstart","drop","durationchange","emptied","ended","ended","endEvent","error","error","error","error","error","error","focus","focusin","focusout","fullscreenchange","fullscreenerror","gamepadconnected","gamepaddisconnected","hashchange","input","invalid","keydown","keypress","keyup","languagechange","levelchange","load","load","loadeddata","loadedmetadata","loadend","loadstart","message","message","message","message","mousedown","mouseenter","mouseleave","mousemove","mouseout","mouseover","mouseup","noupdate","obsolete","offline","online","open","open","orientationchange","pagehide","pageshow","paste","pause","pointerlockchange","pointerlockerror","play","playing","popstate","progress","progress","ratechange","readystatechange","repeatEvent","reset","resize","scroll","seeked","seeking","select","show","stalled","storage","submit","success","suspend","SVGAbort","SVGError","SVGLoad","SVGResize","SVGScroll","SVGUnload","SVGZoom","timeout","timeupdate","touchcancel","touchend","touchenter","touchleave","touchmove","touchstart","transitionend","unload","updateready","upgradeneeded","userproximity","versionchange","visibilitychange","volumechange","waiting","wheel"];function getObjectFromName(x,A){let V=A||window;if("string"==typeof x){let A=x.split(".");for(;A.length>1;)if(V=V[A.shift()],void 0===V)return null;return V=V[A.shift()],void 0!==V?V:null}return"function"==typeof x?x:null}function getAppSettings(x){const A=x.split(".");return getObjectFromName(x="UI"==A[0]||"Client"==A[0]||"System"==A[0]?"VisiWin.Application.Settings."+x:"Settings"==A[0]?"VisiWin.Application."+x:"Application"==A[0]?"VisiWin."+x:"VisiWin.Application.Settings."+x,window)}function getPathString(x){return x&&"/"===x[0]?x.substr(1):x}function isChrome(){return navigator.userAgent.indexOf("Chrome")>-1}A.extendPointerEventArgs=function extendPointerEventArgs(x,A){return{sender:x,tag:x.tag,detail:A}},A.isDomEvents=function isDomEvents(x){0==x.indexOf("on")&&(x=x.substr(2));for(let A=0;A<V.length;A++)if(V[A]===x)return!0;return!1},A.mixAppSettings=function mixAppSettings(A,V){let R=A;if("string"==typeof V||"number"==typeof V||"boolean"==typeof V||"function"==typeof V)R=V;else if("object"==typeof V)if("object"!=typeof R||"{}"==JSON.stringify(R))R=V;else for(const x in V)R[x]?R[x]=mixAppSettings(R[x],V[x]):R[x]=V[x];else x.Application.WarnLog.log("VisiWin.Utilities: mixAppSettings unknown type for mixing: "+typeof V+". ");return R},A.getObjectFromName=getObjectFromName,A.getAppSettings=getAppSettings,A.getPathString=getPathString,A.getPathSetting=function getPathSetting(x){return getPathString(getAppSettings(x))},A.checkNumberInString=function checkNumberInString(x){return/^-?\d+(?:[.,]\d*?)?$/.test(x)},A.csvToArray=function csvToArray(A){return null==A||"undefined"==A||""==A||A=={}||A==[]?[]:x.isArray(A)?A:"string"==typeof A?x.Internal.stringContains(A,",")?A.split(",").map((function(x){return x.trim()})):x.Internal.stringContains(A,";")?A.split(";").map((function(x){return x.trim()})):[A]:[A]},A.markControlStart=function markControlStart(){return performance.now()},A.markControlEnd=function markControlEnd(A,V){if(x.Application.Settings.TimeMarkLogging){let R=(performance.now()-A).toFixed(4);return x.Application.InfoLog.log("VisiWin TimeMark "+V+":\t",R+" msec"),R}return-1},A.isChrome=isChrome,A.isExplorer=function isExplorer(){return!!document.documentMode},A.isFirefox=function isFirefox(){return navigator.userAgent.indexOf("Firefox")>-1},A.isCamino=function isCamino(){return navigator.userAgent.indexOf("Camino")>-1},A.isSafari=function isSafari(){return navigator.userAgent.indexOf("Safari")>-1&&!isChrome()},A.isOpera=function isOpera(){return navigator.userAgent.toLowerCase().indexOf("op")>-1&&!isChrome()},A.isAndroidOS=function isAndroidOS(){return/(android)/i.test(navigator.userAgent)},A.isWindowsOS=function isWindowsOS(){return-1!=navigator.appVersion.indexOf("Win")},A.isMacOS=function isMacOS(){return-1!=navigator.appVersion.indexOf("Mac")},A.isLinuxOS=function isLinuxOS(){return-1!=navigator.appVersion.indexOf("Linux")},A.isX11OS=function isX11OS(){return-1!=navigator.appVersion.indexOf("X11")},A.isMobile=function isMobile(){return!(!/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent)&&!/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(navigator.userAgent.substr(0,4)))},A.isTouchDisplay=function isTouchDisplay(){return"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0},A.hasWhiteSpace=function hasWhiteSpace(x){return/\s/g.test(x)},A.getFirstStackEntry=function getFirstStackEntry(x){if(x&&""!=x){let A=x.indexOf("   at");return A>=0&&(A=x.indexOf("   at",A+3),A>=0&&(x=x.substr(0,A))),x}return"no Stack"};let R=null;function getBrowserLoc(){R||(R=null!=window.navigator.languages?window.navigator.languages[0]:window.navigator.browser?window.navigator.browser:window.navigator.userLanguage?window.navigator.userLanguage:window.navigator.language)}A.getLocPointServer=function getLocPointServer(){return"."},A.getLocPointUser=function getLocPointUser(){return"."},A.locLanguage=function locLanguage(){return R},A.getBrowserLoc=getBrowserLoc,getBrowserLoc(),A.valueToJS=function valueToJS(x){return x?("number"==typeof x&&(x=x.toString()),x.replace(/,/,".")):x},A.valueToServer=function valueToServer(x){return x?("number"==typeof x&&(x=x.toString()),"string"==typeof x?x.replace(/,/,"."):"object"==typeof x?x:void 0):x},A.valueToUser=function valueToUser(x){return x?("number"==typeof x&&(x=x.toString()),"string"==typeof x?x.replace(/,/,"."):"object"==typeof x?x:void 0):x},A.addClass=function addClass(x,A){x.classList.add(A)},A.removeClass=function removeClass(x,A){x.classList.remove(A)},A.hasClass=function hasClass(x,A){return x.classList.contains(A)},A.reparentChildren=function reparentChildren(x,A){let V=x.firstChild;for(;V;){const x=V.nextSibling;A.appendChild(V),V=x}},A.isInDesignMode=function isInDesignMode(){if(x.Application.designMode)switch(x.Application.designMode){case"DesignMode.VisiWin":case"DesignMode.Blend":case"DesignMode.Simulation":return x.AppServices.AppService&&(x.AppServices.AppService.isInDesignMode=!0),!0;default:return x.AppServices.AppService&&(x.AppServices.AppService.isInDesignMode=!1),!1}const A=window.location.search.substring(1).split("&");for(let V=0;V<A.length;V++){const R=A[V].split("=");if("DesignMode"==R[0]&&("true"==R[1]||"TRUE"==R[1]||"True"==R[1]))return x.Application.designMode="DesignMode.VisiWin",x.AppServices.AppService&&(x.AppServices.AppService.isInDesignMode=!0),!0}return x.Application.Settings.UI.ForceDesignMode?(x.Application.designMode="DesignMode.Simulation",x.AppServices.AppService&&(x.AppServices.AppService.isInDesignMode=!0),!0):(x.Application.designMode="DesignMode.None",x.AppServices.AppService&&(x.AppServices.AppService.isInDesignMode=!1),!1)},A.isInInteractiveRunMode=function isInInteractiveRunMode(){return!1},A.isInDefaultPage=function isInDefaultPage(){const x=document.querySelector('meta[name="viewport"]');return!!x&&!!x.getAttribute("content")};let D=1e3;function addNull(x,A,V){if(!V)return(x+="00000000000000000000").substring(0,A);for(;x.length<A;)V?x="0"+x:x+="0";return x}function noop(){}A.getUniqId=function getUniqId(x){return x?(D++,"id"+x+D.toString()):(D++,"id"+D.toString())},A.createObjectFromName=function createObjectFromName(x,A){try{let V=this;const R=x.split(".");if(R.length>0){let x=R.shift();"object"!=typeof V[x]&&(V[x]={}),V=V[x],x=R.shift();do{"object"!=typeof V[x]&&(V[x]={}),V=V[x],x=R.shift()}while(x)}else"object"!=typeof V[x]&&(V[x]={}),V=V[x];return void 0===V[A]&&(V[A]=null),V}catch(x){return null}},A.elementShow=function elementShow(x,A){switch(x.tagName){case"SPAN":x.innerText=A;break;case"INPUT":x.value=A;break;default:x.innerHTML=A}},A.frmString=function frmString(A,V){const R=V;let D,N=!1,U=!1,B=!1,F=!1,W=!1,H=0,z="",G="0",j="1",q="";if("number"==typeof R)D=R.toString();else{if("string"!=typeof R)return"NaN";D=R}let Q="",K=0;if(A.length>=1&&(Q=A.substring(0,1)),A.length>=2&&(K=parseInt(A.substring(1))),D=x.Utilities.valueToJS(D),"f"==Q||"F"==Q){const A=Math.pow(10,K);let V=parseFloat(D);V=Math.round(V*A)/A,D=x.Utilities.valueToJS(V.toString())}switch(D.indexOf("-")>=0&&(U=!0,D=D.substring(1)),(H=D.indexOf("."))>=0?(N=!0,F=!0,G=D.substring(0,H),z=D.substring(H+1)):G=D,((H=D.indexOf("e"))>=0||(H=D.indexOf("E"))>=0)&&(W=!0,j=D.substring(H+1),j.indexOf("-")>=0&&(B=!0,j=j.substring(1))),Q){case"d":case"D":if(F||W)return"NaI";U&&(q="-"),q+=K>0?addNull(G,K,!0):G;break;case"f":case"F":if(W)return"NaF";U&&(q="-"),q+=G,K>0&&(q+=x.Utilities.getLocPointUser(),q+=addNull(z,K,!1));break;case"e":case"E":G.length>0&&(G=G.substring(0,1)),U&&(q="-"),G.length>0?q+=G:q+="0",q+=".",q+=K>0?addNull(z,K,!1):z,W&&(q+="E",q+=B?"-":"+",q+=addNull(j,3,!0));break;default:q=V}return N?x.Utilities.valueToUser(q):q},A.detachSubTree=function(A,V){if(!A)return;let R=A;A&&A.__VWCONTROL__&&(R=A.element);const D=R.querySelectorAll("[data-win-control]");let N=0;const U=D.length;for(;N<U;){const A=D[N];if(A.winControl&&A.winControl.detach)try{A.winControl.detach()}catch(V){x.Application.WarnLog.log("detachSubTree: Wincontrol "+A.winControl.__VWCONTROL__+" problem in detach.")}N++}if(V&&R&&R.winControl&&R.winControl.detach)try{R.winControl.detach()}catch(A){x.Application.WarnLog.log(R.winControl.__VWCONTROL__+".detachSubTree: problem in detach.")}},A.attachSubTree=function(A,V){if(!A)return;let R=A;A&&A.__VWCONTROL__&&(R=A.element);const D=R.querySelectorAll("[data-win-control]");let N=0;const U=D.length;for(;N<U;){const A=D[N];if(A.winControl&&A.winControl.attach)try{A.winControl.attach()}catch(V){x.Application.WarnLog.log("attachSubTree: Wincontrol "+A.winControl.__VWCONTROL__+" problem in attach.")}N++}if(V&&R&&R.winControl&&R.winControl.attach)try{R.winControl.attach()}catch(A){x.Application.WarnLog.log("attachSubTree: Wincontrol "+R.winControl.__VWCONTROL__+" problem in attach.")}},A.initializeSubTree=function(A,V){if(!A)return;const R=A.querySelectorAll("[data-win-control]");let D=0;const N=R.length;for(;D<N;){const A=R[D];if(A.winControl&&A.winControl.initializedBase)try{A.winControl.initializedBase()}catch(V){x.Application.WarnLog.log("initializeSubTree: Wincontrol "+A.winControl.__VWCONTROL__+" problem in initializedBase.")}D++}if(V&&A&&A.winControl&&A.winControl.initializedBase)try{A.winControl.initializedBase()}catch(V){x.Application.WarnLog.log("initializeSubTree: Wincontrol "+A.winControl.__VWCONTROL__+" problem in initializedBase.")}},A.readySubTree=function(A,V){if(!A)return;const R=A.querySelectorAll("[data-win-control]");let D=0;const N=R.length;for(;D<N;){const A=R[D];if(A.winControl&&A.winControl.readyBase)try{A.winControl.readyBase()}catch(V){x.Application.WarnLog.log("readySubTree: Wincontrol "+A.winControl.__VWCONTROL__+" problem in readyBase.")}D++}if(V&&A&&A.winControl&&A.winControl.readyBase)try{A.winControl.readyBase()}catch(V){x.Application.WarnLog.log("readySubTree: Wincontrol "+A.winControl.__VWCONTROL__+" problem in readyBase.")}},A.disposeSubTree=function(A,V){if(A){if(A.querySelectorAll){const V="[data-win-control]",R=A.querySelectorAll(V);let D=0;const N=R.length;for(;D<N;){const A=R[D];if(A.winControl&&A.winControl.dispose)try{A.winControl.dispose(),delete A.winControl,A.winControl&&x.Application.WarnLog.log(A.winControl.__VWCONTROL__+" VisiWin.Utilities.disposeSubTree: control not deleted."),A.parentElement&&A.parentElement.removeChild(A)}catch(V){x.Application.WarnLog.log(A.winControl.__VWCONTROL__+" VisiWin.Utilities.disposeSubTree: problem in dispose.")}if(A.dispose)try{A.dispose()}catch(x){}D++}}if(V&&A&&A.winControl&&A.winControl.dispose)try{A.winControl.dispose(),delete A.winControl,A.parentElement&&A.parentElement.removeChild(A)}catch(V){x.Application.WarnLog.log(A.winControl.__VWCONTROL__+" VisiWin.Utilities.disposeSubTree: problem in dispose.")}}},A.resizeNotifier=function(x,A){function EventQueue(){let x,A;this.q=[],this.add=function(x){this.q.push(x)},this.call=function(){for(x=0,A=this.q.length;x<A;x++)this.q[x].call()}}function attachResizeEvent(x,A){if(x.resizedAttached){if(x.resizedAttached)return void x.resizedAttached.add(A)}else x.resizedAttached=new EventQueue,x.resizedAttached.add(A);x.resizeSensor=document.createElement("div"),x.resizeSensor.className="resize-sensor";const V="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: scroll; z-index: -1; visibility: hidden;",R="position: absolute; left: 0; top: 0;";x.resizeSensor.style.cssText=V,x.resizeSensor.innerHTML='<div class="resize-sensor-expand" style="'+V+'"><div style="'+R+'"></div></div><div class="resize-sensor-shrink" style="'+V+'"><div style="'+R+' width: 200%; height: 200%"></div></div>',x.appendChild(x.resizeSensor),{fixed:1,absolute:1}[function getComputedStyle(x,A){return x.currentStyle?x.currentStyle[A]:window.getComputedStyle?window.getComputedStyle(x,null).getPropertyValue(A):x.style[A]}(x,"position")]||(x.style.position="relative");const D=x.resizeSensor.childNodes[0],N=D.childNodes[0],U=x.resizeSensor.childNodes[1];let B,F;const reset=function(){N.style.width=D.offsetWidth+10+"px",N.style.height=D.offsetHeight+10+"px",D.scrollLeft=D.scrollWidth,D.scrollTop=D.scrollHeight,U.scrollLeft=U.scrollWidth,U.scrollTop=U.scrollHeight,B=x.offsetWidth,F=x.offsetHeight};reset();const changed=function(){x.resizedAttached&&x.resizedAttached.call()},addEvent=function(x,A,V){x.attachEvent?x.attachEvent("on"+A,V):x.addEventListener(A,V)};addEvent(D,"scroll",(function(){(x.offsetWidth>B||x.offsetHeight>F)&&changed(),reset()})),addEvent(U,"scroll",(function(){(x.offsetWidth<B||x.offsetHeight<F)&&changed(),reset()}))}if("[object Array]"===Object.prototype.toString.call(x)||void 0!==window.jQuery&&x instanceof window.jQuery||void 0!==window.Elements&&x instanceof window.Elements){let V=0,R=x.length;for(;V<R;V++)attachResizeEvent(x[V],A)}else attachResizeEvent(x,A);this.detach=function(){x.resizeSensor&&(x.removeChild(x.resizeSensor),delete x.resizeSensor,delete x.resizedAttached)}};const N=/^(\w+)\:\/\//;A.xhr=function xhr(V){let R;return new Promise((function(D,U){const B=x.Utilities.Scheduler.currentPriority;R=new XMLHttpRequest;let F=!1;const W=N.exec(V.url.toLowerCase());W?"file"===W[1]&&(F=!0):"file:"===document.location.protocol&&(F=!0),R.onreadystatechange=function(){R._canceled?R.onreadystatechange=noop:4===R.readyState&&(R.status>=200&&R.status<300||F&&0===R.status?A.schedule(D,R,B):A.schedule(U,R,B),R.onreadystatechange=noop)},R.open(V.type||"GET",V.url,!0,V.user,V.password),R.responseType=V.responseType||"",Object.keys(V.headers||{}).forEach((function(x){R.setRequestHeader(x,V.headers[x])})),V.customRequestInitializer&&V.customRequestInitializer(R);try{void 0===V.data?R.send():R.send(V.data)}catch(x){}}))},A.loadScript=function loadScript(x){return new Promise((function(A,V){let R=null;const D=document.createElement("script");D.setAttribute("type","text/javascript"),R=setTimeout((function(){R=null,V()}),3e3),D.onload=function(x){R&&(clearTimeout(R),R=null),A(x)},D.onerror=function(x){R&&(clearTimeout(R),R=null),V(x)},D.setAttribute("src",x),document.getElementsByTagName("head")[0].appendChild(D)}))};const U=/^\s*(-?\d+\.?\d*)\s*(px|ex|em|ex|%|ch|rem|vw|vh|vmin|cm|mm|in|pt|pc)?\s*(.*)$/gi,B=/^\s*(-?\d+\.?\d*)\s*(px|ex|em|ex|%|ch|rem|vw|vh|vmin|cm|mm|in|pt|pc)?\s*(-?\d*\.?\d*)\s*(px|ex|em|ex|%|ch|rem|vw|vh|vmin|cm|mm|in|pt|pc)?\s*(.*)$/gi,F=/^\s*(-?\d+\.?\d*)\s*(px|ex|em|ex|%|ch|rem|vw|vh|vmin|cm|mm|in|pt|pc)?\s*(-?\d*\.?\d*)\s*(px|ex|em|ex|%|ch|rem|vw|vh|vmin|cm|mm|in|pt|pc)?\s*(-?\d*\.?\d*)\s*(px|ex|em|ex|%|ch|rem|vw|vh|vmin|cm|mm|in|pt|pc)?\s*(-?\d*\.?\d*)\s*(px|ex|em|ex|%|ch|rem|vw|vh|vmin|cm|mm|in|pt|pc)?\s*(.*)$/gi;A.checkHtmlProperty1Q=function checkHtmlProperty1Q(x){const A={error:null,p:[]};return"number"==typeof x&&(x=x.toString()),x.replace(U,(function(V,R,D,N){return R?(D||(D="px"),N?(A.p.push(R+D.toLocaleLowerCase()),A.match=A.p[0],A.error="more than one html parameter in ["+x+"].",A):(A.p.push(R+D.toLocaleLowerCase()),A.match=A.p[0],A)):(A.error="no valid html parameter in ["+x+"].",A)})),A},A.checkHtmlProperty2Q=function checkHtmlProperty2Q(x){const A={error:null,p:[]};return"number"==typeof x&&(x=x.toString()),x.replace(B,(function(V,R,D,N,U,B){return R?(D||(D="px"),N?(U||(U="px"),B?(A.p.push(R+D.toLocaleLowerCase()),A.p.push(N+U.toLocaleLowerCase()),A.match=A.p[0]+" "+A.p[1],A.error="more than two html parameter in ["+x+"].",A):(A.p.push(R+D.toLocaleLowerCase()),A.p.push(N+U.toLocaleLowerCase()),A.match=A.p[0]+" "+A.p[1],A)):(A.p.push(R+D.toLocaleLowerCase()),A.match=A.p[0],A)):(A.error="no valid html parameter in ["+x+"].",A)})),A},A.checkHtmlProperty4Q=function checkHtmlProperty4Q(x){const A={error:null,p:[]};return"number"==typeof x&&(x=x.toString()),x.replace(F,(function(V,R,D,N,U,B,F,W,H,z){return R?(D||(D="px"),N?(U||(U="px"),B?(F||(F="px"),W?(H||(H="px"),z?(A.p.push(R+D.toLocaleLowerCase()),A.p.push(N+U.toLocaleLowerCase()),A.p.push(B+F.toLocaleLowerCase()),A.p.push(W+H.toLocaleLowerCase()),A.match=A.p[0]+" "+A.p[1]+" "+A.p[2]+" "+A.p[3],A.error="more than four html parameter in ["+x+"].",A):(A.p.push(R+D.toLocaleLowerCase()),A.p.push(N+U.toLocaleLowerCase()),A.p.push(B+F.toLocaleLowerCase()),A.p.push(W+H.toLocaleLowerCase()),A.match=A.p[0]+" "+A.p[1]+" "+A.p[2]+" "+A.p[3],A)):(A.error="unvalid three html parameter in ["+x+"].",A.p.push(R+D.toLocaleLowerCase()),A.p.push(N+U.toLocaleLowerCase()),A.match=A.p[0]+" "+A.p[1],A)):(A.p.push(R+D.toLocaleLowerCase()),A.p.push(N+U.toLocaleLowerCase()),A.match=A.p[0]+" "+A.p[1],A)):(A.p.push(R+D.toLocaleLowerCase()),A.match=A.p[0],A)):(A.error="no valid html parameter in ["+x+"].",A)})),A},A.clamp=function clamp(A,V){let R=null;return window.$clamp?R=window.$clamp(A,V):x.Application.ErrorLog.log('VisiWin.Utilities.clamp:(Utilities.ts) For using need library "libs/js/clamp.js".'),R},A.processElements=function processElements(A){const V=[];for(let R=0;R<A.length;R++)V.push(x.UI.processAll(A[R]));return WinJS.Promise.join(V)};const W={af_ZA:1078,am_ET:1118,ar_AE:14337,ar_BH:15361,ar_DZ:5121,ar_EG:3073,ar_IQ:2049,ar_JO:11265,ar_KW:13313,ar_LB:12289,ar_LY:4097,ar_MA:6145,ar_OM:8193,ar_QA:16385,ar_SA:1025,ar_SY:10241,ar_TN:7169,ar_YE:9217,arn_CL:1146,as_IN:1101,az_AZ:2092,ba_RU:1133,be_BY:1059,bg_BG:1026,bn_IN:1093,bo_BT:2129,bo_CN:1105,br_FR:1150,bs_BA:8218,ca_ES:1027,co_FR:1155,cs_CZ:1029,cy_GB:1106,da_DK:1030,de_AT:3079,de_CH:2055,de_DE:1031,de_LI:5127,de_LU:4103,div_MV:1125,dsb_DE:2094,el_GR:1032,en_AU:3081,en_BZ:10249,en_CA:4105,en_CB:9225,en_GB:2057,en_IE:6153,en_IN:18441,en_JA:8201,en_MY:17417,en_NZ:5129,en_PH:13321,en_TT:11273,en_US:1033,en_ZA:7177,en_ZW:12297,es_AR:11274,es_BO:16394,es_CL:13322,es_CO:9226,es_CR:5130,es_DO:7178,es_EC:12298,es_ES:3082,es_GT:4106,es_HN:18442,es_MX:2058,es_NI:19466,es_PA:6154,es_PE:10250,es_PR:20490,es_PY:15370,es_SV:17418,es_UR:14346,es_US:21514,es_VE:8202,et_EE:1061,eu_ES:1069,fa_IR:1065,fi_FI:1035,fil_PH:1124,fo_FO:1080,fr_BE:2060,fr_CA:3084,fr_CH:4108,fr_FR:1036,fr_LU:5132,fr_MC:6156,fy_NL:1122,ga_IE:2108,gbz_AF:1164,gl_ES:1110,gsw_FR:1156,gu_IN:1095,ha_NG:1128,he_IL:1037,hi_IN:1081,hr_BA:4122,hr_HR:1050,hu_HU:1038,hy_AM:1067,id_ID:1057,ii_CN:1144,is_IS:1039,it_CH:2064,it_IT:1040,iu_CA:2141,ja_JP:1041,ka_GE:1079,kh_KH:1107,kk_KZ:1087,kl_GL:1135,kn_IN:1099,ko_KR:1042,kok_IN:1111,ky_KG:1088,lb_LU:1134,lo_LA:1108,lt_LT:1063,lv_LV:1062,mi_NZ:1153,mk_MK:1071,ml_IN:1100,mn_CN:2128,mn_MN:1104,moh_CA:1148,mr_IN:1102,ms_BN:2110,ms_MY:1086,mt_MT:1082,my_MM:1109,nb_NO:1044,ne_NP:1121,nl_BE:2067,nl_NL:1043,nn_NO:2068,ns_ZA:1132,oc_FR:1154,or_IN:1096,pa_IN:1094,pl_PL:1045,ps_AF:1123,pt_BR:1046,pt_PT:2070,qut_GT:1158,quz_BO:1131,quz_EC:2155,quz_PE:3179,rm_CH:1047,ro_RO:1048,ru_RU:1049,rw_RW:1159,sa_IN:1103,sah_RU:1157,se_FI:3131,se_NO:1083,se_SE:2107,si_LK:1115,sk_SK:1051,sl_SI:1060,sma_NO:6203,sma_SE:7227,smj_NO:4155,smj_SE:5179,smn_FI:9275,sms_FI:8251,sq_AL:1052,sr_BA:7194,sr_SP:3098,sv_FI:2077,sv_SE:1053,sw_KE:1089,syr_SY:1114,ta_IN:1097,te_IN:1098,tg_TJ:1064,th_TH:1054,tk_TM:1090,tmz_DZ:2143,tn_ZA:1074,tr_TR:1055,tt_RU:1092,ug_CN:1152,uk_UA:1058,ur_IN:2080,ur_PK:1056,uz_UZ:2115,vi_VN:1066,wen_DE:1070,wo_SN:1160,xh_ZA:1076,yo_NG:1130,zh_CHS:4,zh_CHT:31748,zh_CN:2052,zh_HK:3076,zh_MO:5124,zh_SG:4100,zh_TW:1028,zu_ZA:1077};A.lang2lcid=function lang2lcid(x){return W[x]?W[x]:(x=x.replace(/-/,"_"),W[x]?W[x]:null)},A.lcid2locale=function lcid2locale(x){for(const A in W)if(W[A]===x)return A.replace(/_/,"-");return""},A.setRenderedFontClass=function setRenderedFontClass(){const A=document.body||document.getElementsByTagName("BODY")[0];let V=function _renderedfont(x){const A=(getComputedStyle(x)["font-family"]+","+function(){const A=document.createElement("iframe");document.body.appendChild(A),A.contentWindow.document.open(),A.contentWindow.document.write("<html><body>");const V=A.contentWindow.document.createElement(x.tagName);A.contentWindow.document.body.appendChild(V);const R=getComputedStyle(V)["font-family"];return document.body.removeChild(A),R}()).split(","),V=document.createElement("canvas"),R=V.getContext("2d");let D;document.body.appendChild(V),V.width=500,V.height=300,A.unshift('"Font That Doesnt Exists '+Math.random()+'"');for(let x=0;x<A.length;x++){const N=A[x].trim();R.clearRect(0,0,V.width,V.height),R.font="16px "+N+", monospace",R.fillText("abcdefghijklmnopqrstuvwxyz!@#$%^&*()",10,100);const U=R.getImageData(0,0,V.width,V.height).data;if(D)for(let x=0;x<U.length;x+=3)if(D[x+3]!==U[x+3])return document.body.removeChild(V),N;D=U}return document.body.removeChild(V),"monospace"}(A),R=V.indexOf('"')+1,D=V.lastIndexOf('"');R>0&&D>0&&R!=D&&(V=V.substring(R,D)),R=V.indexOf("'")+1,D=V.lastIndexOf("'"),R>0&&D>0&&R!=D&&(V=V.substring(R,D)),V=V.trim(),"Segoe UI"===V&&x.Utilities.addClass(A,"segoe-ui")},A.shortId=function shortId(){const S4=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return S4()+S4()+S4()+S4()},A.passAuthorizationToChilds=function passAuthorizationToChilds(A,V,R){for(var D=A.firstChild;D;)D.winControl&&x.isNullOrUndefined(D.winControl.authorizationRight)&&(D.winControl.authorizationMode!==R&&(D.winControl.authorizationMode=R),D.winControl.authorizationRight=V),D=D.nextSibling},A.togglePointerEvents=function togglePointerEvents(A,V){A&&(x.isNullOrUndefined(V)||(A.style.pointerEvents=!0===V?"none":"all"))},A.removeHashFromId=function removeHashFromId(A){let V=A;return x.isString(V)&&x.stringStartsWith(V,"#")&&(V=V.substring(1)),V},A.findParentElementByClassName=function findParentElementByClassName(x,A){let V=x.parentElement;for(;V&&!V.classList.contains(A);)V=V.parentElement;return V},A.getFontWeight=function getFontWeight(x){let A;switch(x){case"FW100":A="100";break;case"FW200":A="200";break;case"FW300":A="300";break;case"FW400":A="400";break;case"FW500":A="500";break;case"FW600":A="600";break;case"FW700":A="700";break;case"FW800":A="800";break;case"FW900":A="900";break;case"Bold":A="bold";break;case"Bolder":A="bolder";break;case"Lighter":A="lighter";break;case"Initial":A="initial";break;case"Inherit":A="inherit";break;default:A="normal"}return A}}(x.Utilities||(x.Utilities={}))}(VisiWin||(VisiWin={})),String.prototype.format=function(x){let A,V;const R=new RegExp("{[0-9]+(:[A-Za-z0-9]*)?}","g");return this.replace(R,R=>(A="",V=R.indexOf(":"),V<0?V=R.length-1:A=R.substring(V+1,R.length-1),VisiWin.Utilities.frmString(A,x[parseInt(R.substring(1,V))])))},function(x){!function(A){let V,R;!function(x){x.LongDate="LongDate",x.ShortDate="ShortDate",x.NamedLongDate="NamedLongDate",x.NamedShortDate="NamedShortDate",x.LongTime="LongTime",x.ShortTime="ShortTime",x.UserDefinedDate="UserDefinedDate",x.UserDefinedTime="UserDefinedTime",x.ISO="ISO"}(V=A.DateTimeFormatNames||(A.DateTimeFormatNames={})),function(x){x.TimeOnly="TimeOnly",x.DateOnly="DateOnly",x.TimeDate="TimeDate",x.DateTime="DateTime",x.TimeCRDate="TimeCRDate",x.DateCRTime="DateCRTime"}(R=A.DateTimeModeNames||(A.DateTimeModeNames={})),A.formatDate=function formatDate(A,R,D){let N="";N=x.isNullOrUndefined(A)?navigator.language:A;let U=0;U=x.isDate(D)?D.getTime():x.isNumber(D)?D:(new Date).getTime();let B=x.Application.Settings.UI.DateTimeFormats.LongDate;switch(R){case V.LongDate:return B=x.Application.Settings.UI.DateTimeFormats.LongDate,new Intl.DateTimeFormat(N,B).format(U);case V.ShortDate:return B=x.Application.Settings.UI.DateTimeFormats.ShortDate,new Intl.DateTimeFormat(N,B).format(U);case V.NamedLongDate:return B=x.Application.Settings.UI.DateTimeFormats.NamedLongDate,new Intl.DateTimeFormat(N,B).format(U);case V.NamedShortDate:return B=x.Application.Settings.UI.DateTimeFormats.NamedShortDate,new Intl.DateTimeFormat(N,B).format(U);case V.LongTime:return B=x.Application.Settings.UI.DateTimeFormats.LongTime,new Date(U).toLocaleTimeString(N,B);case V.ShortTime:return B=x.Application.Settings.UI.DateTimeFormats.ShortTime,new Date(U).toLocaleTimeString(N,B);case V.UserDefinedTime:return x.Application.Settings.UI.DateTimeFormats[R]?(B=x.Application.Settings.UI.DateTimeFormats[R],new Intl.DateTimeFormat(N,B).format(U)):new Date(U).toLocaleTimeString(N);case V.UserDefinedDate:return x.Application.Settings.UI.DateTimeFormats[R]?(B=x.Application.Settings.UI.DateTimeFormats[R],new Intl.DateTimeFormat(N,B).format(U)):new Date(U).toLocaleDateString(N);case V.ISO:return new Date(U).toISOString();default:return x.Application.Settings.UI.DateTimeFormats[R]?(B=x.Application.Settings.UI.DateTimeFormats[R],new Intl.DateTimeFormat(N,B).format(U)):new Date(U).toLocaleString(N)}}}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),VisiWin.Application.Time.addTime("ui.js","eval start"),function(x){!function(x){"use strict";x.define=WinJS.Namespace.define}(x.Namespace||(x.Namespace={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){"use strict";A.define=function(A,V){(!x.Utilities.isInDesignMode()||x.Utilities.isInDesignMode()&&!x.Application.Settings.UI.DisableDesignModeCodeBehind)&&WinJS.UI.Pages.define(A,V)},A.readySubTree=function(x){let A=(x||document.body).querySelectorAll("[data-win-control]");for(let V=0,R=A.length;V<R;V++){const R=A[V];R.winControl&&R.winControl.readyBase&&!R.winControl._disposed&&R.winControl.readyBase(x)}for(let V=0,R=A.length;V<R;V++){const R=A[V];R.winControl&&R.winControl.initializedBase&&!R.winControl._disposed&&R.winControl.initializedBase(x)}A=null}}(A.Pages||(A.Pages={}))}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";A.initializeProperties=function initializeProperties(x,A,V){const R=Object.keys(A),D=Array.isArray(x);let N,U,B;for(U=0,B=R.length;U<B;U++){const B=R[U],F=95!==B.charCodeAt(0),W=A[B];!W||"object"!=typeof W||void 0===W.value&&"function"!=typeof W.get&&"function"!=typeof W.set?F?D?x.forEach((function(x){x[B]=W})):x[B]=W:(N=N||{},N[B]={value:W,enumerable:F,configurable:!0,writable:!0}):(void 0===W.enumerable&&(W.enumerable=F),V&&W.setName&&"function"==typeof W.setName&&W.setName(V+"."+B),N=N||{},N[B]=W)}N&&(D?x.forEach((function(x){Object.defineProperties(x,N)})):Object.defineProperties(x,N))},A.classMix=function classMix(A,V,R){let D=null;return D=A.prototype?A.prototype:A,D.base||(D.base={}),R=R||!1,V.forEach(V=>{const N=V.prototype,U=Object.getOwnPropertyNames(N);for(let B=0,F=U.length;B<F;B++){const F=U[B],W=Object.getOwnPropertyDescriptor(N,F),H=F;"constructor"===F&&(D._mixinList=D._mixinList||[],D._mixinList.push(V)),D.hasOwnProperty(H)?R?(delete D[F],Object.defineProperty(D,H,W),x.Application.InfoLog.log('VisiWin.UI.Class.classMix, Mixin:"'+V.mixinName+' Property:"'+H+'" wurde in Class "'+A.controlName+'" berschrieben.')):"constructor"!==H&&x.Application.ErrorLog.log('VisiWin.UI.Class.classMix, Mixin:"'+V.mixinName+' Property:"'+H+'" bereits in Class "'+A.controlName+'" enthalten.'):Object.defineProperty(D,H,W)}}),D};let V=WinJS.Class.mix;function mix(x,A){return V(x,A)}A.mix=mix,WinJS.Class.mix=mix;let R=WinJS.Class.define;function define(x,A,V){return R(x,A,V)}function derive(A,V,R,D){if(A){V=V||function(){};const N=A.prototype;return V.prototype=Object.create(N),x.Utilities.markSupportedForProcessing(V),Object.defineProperty(V.prototype,"constructor",{value:V,writable:!0,configurable:!0,enumerable:!0}),R&&x.Class.initializeProperties(V.prototype,R),D&&x.Class.initializeProperties(V,D),V}return define(V,R,D)}function unWatch(x,A,V,R){let D,N=V;for(;(D=N.indexOf("."))>=0;){const x=N.substring(0,D),V=N.substring(D+1);A=A[x],N=V}A&&A[N]&&delete A[N]}function watch(A,V,R,D){let N,U=R;try{for(;(N=U.indexOf("."))>=0;){const x=U.substring(0,N),A=U.substring(N+1);if(void 0===V[x])break;V=V[x],U=A}if(void 0===V||void 0===V[U])return x.Application.WarnLog.log("VisiWin.UI.Class.observe "+A._controlName+' property: "'+R+'" is not property or member of the control.'),!1;const B=V.__lookupSetter__(U);if(void 0!==B){const N=V.__lookupGetter__(U);return delete V[U]&&(void 0!==N?(Object.defineProperty(V,U,{get:()=>N.call(V),set:A=>{const F={objName:R,changeType:"observe",changeName:R,newValue:A,oldValue:N.call(V)};x&&x.Resources&&x.Resources.pointerArgs&&(F.pointerArgs=x.Resources.pointerArgs),B.call(V,A),F.newValue=N.call(V),F.oldValue!==F.newValue&&D.call(V[U+"Context"],F)},enumerable:!1,configurable:!0}),V[U+"Context"]=A):(Object.defineProperty(V,U,{set:x=>{const A={objName:R,changeType:"observe",changeName:R,newValue:x,oldValue:null};B.call(V,x),A.oldValue!==A.newValue&&D.call(V[U+"Context"],A)},enumerable:!1,configurable:!0}),V[U+"Context"]=A)),!0}let F=V[U];return delete V[U]?(Object.defineProperty(V,U,{get:()=>F,set:x=>{const A={objName:R,changeType:"observe",changeName:R,newValue:x,oldValue:F};F=x,A.newValue=F,A.oldValue!==A.newValue&&D.call(V[U+"Context"],A)},enumerable:!1,configurable:!0}),V[U+"Context"]=A,!0):(x.Application.WarnLog.log("VisiWin.UI.Class.observe "+V.__VWCONTROL__+' property: "'+U+'" not member of the control.'),!1)}catch(A){return x.Application.WarnLog.log("VisiWin.UI.Class.observe "+V.__VWCONTROL__+' problem with property: "'+U+'".'),!1}}A.define=define,WinJS.Class.define=define,A.derive=derive,WinJS.Class.derive=derive,A.watch=watch,A.initObserve=function initObserve(x,A,V){const R=Object.getOwnPropertyNames(A.observe);let D=null;if(V)D=Object.getOwnPropertyNames(V);else{if(!A||"object"!=typeof A.observe)return;D=R}for(let V=0,R=D.length;V<R;V++){const R=D[V];"function"==typeof A.observe[R]?watch(x,A,R,A.observe[R]):watch(x,A,R,A[A.observe[R]])}},A.initNotityPropertyChangeHandler=function initNotityPropertyChangeHandler(x,A,V){const R=Object.getOwnPropertyNames(A.observe);let D=null;if(V)D=Object.getOwnPropertyNames(V);else{if(!A||"object"!=typeof A.observe)return;D=R}for(let V=0,R=D.length;V<R;V++){const R=D[V];"function"==typeof A.observe[R]?watch(x,A,R,A.observe[R]):watch(x,A,R,A[A.observe[R]])}},A.removeObserve=function removeObserve(x,A){if(A&&"object"==typeof A.observe){const x=Object.getOwnPropertyNames(A.observe);for(let V=0,R=x.length;V<R;V++){const R=x[V];"function"==typeof A.observe[R]?unWatch(0,A,R,A.observe[R]):unWatch(0,A,R,A[A.observe[R]])}}},A.createEventProperty=function createEventProperty(x){const A="_on"+x+"state";return{get:function(){const x=this[A];return x&&x.userHandler},set:function(V){let R=this[A];V?(R||(R={wrapper:function(x){return R.userHandler(x)},userHandler:V},Object.defineProperty(this,A,{value:R,enumerable:!1,writable:!0,configurable:!0}),this.addEventListener(x,R.wrapper,!1)),R.userHandler=V):R&&(this.removeEventListener(x,R.wrapper,!1),this[A]=null)},enumerable:!0}},A._createProperty=function _createProperty(A,V,R,D,N,U,B,F,W,H,z,G,j){if(!(V&&R&&D&&N))return V||x.Application.WarnLog.log("VisiWin.UI."+V.controlName+'.createProperty: Parameter "defClass" nicht definiert fr Property: '+R+"."),R||x.Application.WarnLog.log("VisiWin.UI."+V.controlName+'.createProperty: Parameter "name" nicht definiert fr Property: '+R+"."),D||x.Application.WarnLog.log("VisiWin.UI."+V.controlName+'.createProperty: Parameter "propertyType" nicht definiert fr Property: '+R+"."),N||x.Application.WarnLog.log("VisiWin.UI."+V.controlName+'.createProperty: Parameter "access" nicht definiert fr Property: '+R+"."),!1;let q="",Q=null,K=null,J=null,X=null;switch(N=N||"rw",D=D||"member"){case"event":return J="on"+R,X="_on"+R+"state",Q=V.prototype.__lookupSetter__(R),K=V.prototype.__lookupGetter__(R),void 0!==K||void 0!==Q?(x.Application.WarnLog.log("VisiWin.UI."+V.controlName+'.createProperty: event property "'+R+'" already defined.'),!1):(Object.defineProperty(V.prototype,J,{set:function(x){let A=this[X];x?(A||(A={wrapper:function(x){return A.userHandler(x)},userHandler:x},Object.defineProperty(this,X,{value:A,enumerable:!1,writable:!0,configurable:!0}),this.addEventListener(R,A.wrapper,!1)),A.userHandler=x):A&&(this.removeEventListener(R,A.wrapper,!1),this[X]=null)},get:function(){const x=this[X];return x&&x.userHandler},enumerable:!1,configurable:!0}),!0);case"object":if(B=B||R,Q=V.prototype.__lookupSetter__(R),K=V.prototype.__lookupGetter__(R),z)void 0===Q&&void 0===K||delete V[R];else if(void 0!==Q||void 0!==K)return x.Application.InfoLog.log("VisiWin.UI."+V.controlName+'.createProperty: listen Property "'+R+'" already defined. Property not created.'),!1;if(!F)return x.Application.WarnLog.log("VisiWin.UI."+V.controlName+'.createProperty: listen Property "'+R+'" no object in proterty type "object" set.'),!1;"rw"!==N&&"wo"!==N||(q="\n",q+="    VisiWin.Utilities.createObjectFromName.call(this, '"+F+"','"+B+"'); \n",q+="    let o=this."+F+"."+B+";\n",q+="    if(v !== o){\n",q+="        this."+F+"."+B+"= v;\n",/color/i.test(R)?q+="        this._updateColorsBase('property','"+R+"',v,o);\n":q+="        this._updateLayoutBase('property','"+R+"',v,o);\n",q+=W?"        this.dispatchNotifyPropertyChanged('property','"+R+"',v,o,'"+W+"');\n":"        this.dispatchNotifyPropertyChanged('property','"+R+"',v,o);\n",q+="    }\n",Q=new Function("v",q)),"rw"!==N&&"ro"!==N||(q="return "+F+"."+B+";\n",K=new Function(q));break;case"base":return Q=V.prototype.__lookupSetter__(R),K=V.prototype.__lookupGetter__(R),void 0!==K||void 0!==Q||(x.Application.WarnLog.log("VisiWin.UI."+V.controlName+'.createProperty: base property "'+R+'" not define.'),!1);case"state":return Q=V.prototype.__lookupSetter__(R),K=V.prototype.__lookupGetter__(R),void 0!==K||void 0!==Q||(x.Application.WarnLog.log("VisiWin.UI."+V.controlName+'.createProperty: state property "'+R+'" not define.'),!1);case"custom":return Q=V.prototype.__lookupSetter__(R),K=V.prototype.__lookupGetter__(R),void 0!==K||void 0!==Q||(x.Application.WarnLog.log("VisiWin.UI."+V.controlName+'.createProperty: custom property "'+R+'" not define.'),!1);case"member":case"memberOnly":case"memberStyle":case"memberClass":case"style":case"class":if(B=B||R,F=F||"element",Q=V.prototype.__lookupSetter__(R),K=V.prototype.__lookupGetter__(R),z)void 0===Q&&void 0===K||delete V[R];else if(void 0!==Q||void 0!==K)return x.Application.InfoLog.log("VisiWin.UI."+V.controlName+'.createProperty: listen Property "'+R+'" already defined. Property not created.'),!1;if("rw"===N||"wo"===N){switch(q="if(v !== this._"+R+"){\n",q+="let o=this._"+R+";\n",q+="this._"+R+"= v; \n",H){case"color":case"animation":case"theme":case"background":case"shadow":U&&Array.isArray(U)||(U=[]),U[U.length]="getTheme",A[R].resourceValue=U}if(U&&x.isArray(U))for(let A=0;A<U.length;A++)switch(U[A]){case"getTheme":"theme"!==H&&(q+='v=this.__t(v,"'+R+'");\n');break;case"getColor":"color"!==H&&(q+='v=this.__c(v,"'+R+'");\n');break;case"getBackground":"background"!==H&&(q+='v=this.__b(v,"'+R+'");\n');break;case"getAnimation":"animation"!==H&&(q+='v=this.__a(v,"'+R+'");\n');break;case"getShadow":"shadow"!==H&&(q+='v=this.__s(v,"'+R+'");\n');break;default:x.Application.WarnLog.log("VisiWin.UI."+V.controlName+'.createProperty: custom Property "'+R+'" resourceValue: '+U[A]+" not defined.")}"style"!==D&&"memberStyle"!==D||(q+="this."+F+".style."+B+" = v;\n"),"class"!==D&&"memberClass"!==D||(q+="if (v){\nVisiWin.Utilities.addClass(this."+F+",'"+B+"');\n",q+="} else {\n",q+="VisiWin.Utilities.removeClass(this."+F+",'"+B+"');\n}\n"),/color/i.test(R)||"color"===H?q+="this._updateColorsBase('property','"+R+"',v,o);\n":q+="this._updateLayoutBase('property','"+R+"',v,o);\n",q+=W?"this.dispatchNotifyPropertyChanged('property','"+R+"',v,o,'"+W+"');}":"this.dispatchNotifyPropertyChanged('property','"+R+"',v,o);}",Q=new Function("v",q)}"rw"!==N&&"ro"!==N||(q="style"===D?"return this."+F+".style['"+B+"'];\n":"class"===D?"return VisiWin.Utilities.hasClass(this."+F+",'"+B+"');\n":"return this._"+R+";\n",K=new Function(q));break;case"action":if(Q=V.prototype.__lookupSetter__(R),K=V.prototype.__lookupGetter__(R),z)void 0===Q&&void 0===K||delete V[R];else if(void 0!==Q||void 0!==K)return x.Application.InfoLog.log("VisiWin.UI."+V.controlName+'.createProperty: listen Property "'+R+'" already defined. Property not created.'),!1;q='this.setActionProperty("'+G+'","'+j+'","'+F+'","'+B+'", v)',Q=new Function("v",q),q='return this.getActionProperty("'+G+'","'+j+'","'+F+'","'+B+'")',K=new Function(q);break;case"trigger":if(Q=V.prototype.__lookupSetter__(R),K=V.prototype.__lookupGetter__(R),z)void 0===Q&&void 0===K||delete V[R];else if(void 0!==Q||void 0!==K)return x.Application.InfoLog.log("VisiWin.UI."+V.controlName+'.createProperty: listen Property "'+R+'" already defined. Property not created.'),!1;q='this.setTriggerProperty("'+G+'","'+F+'","'+B+'", v)',Q=new Function("v",q),q='return this.getTriggerProperty("'+G+'","'+F+'","'+B+'")',K=new Function(q);break;case"clone":case"baseClone":if(Q=V.prototype.__lookupSetter__(R),K=V.prototype.__lookupGetter__(R),z)void 0===Q&&void 0===K||delete V[R];else if(void 0!==Q||void 0!==K)return x.Application.InfoLog.log("VisiWin.UI."+V.controlName+'.createProperty: Property "'+R+'" already defined. Property not created.'),!1;if(!B)return x.Application.WarnLog.log("VisiWin.UI."+V.controlName+'.createProperty: clone property has no paramter "cloneProperty" in description for property: '+R+"."),void delete V[R];K=Q=null,"rw"!==N&&"wo"!==N||(q="this."+B+"=v",Q=new Function("v",q)),"rw"!==N&&"ro"!==N||(q="return this."+B+";",K=new Function(q));break;case"child":case"service":case"provider":case"controlChild":if(B=B||R,Q=V.prototype.__lookupSetter__(R),K=V.prototype.__lookupGetter__(R),z)void 0===Q&&void 0===K||delete V[R];else if(void 0!==Q||void 0!==K)return x.Application.InfoLog.log("VisiWin.UI."+V.controlName+".createProperty: "+D+' "'+R+'" already defined. Property not created.'),!1;if(F||x.Application.WarnLog.log("VisiWin.UI."+V.controlName+'.createProperty: Parameter "child" not defined in property description:'+R+"."),K=Q=null,"rw"===N||"wo"===N){if(q="let o=this._"+R+";\n",q+="this._"+R+"=v;\n","child"===D){if(Array.isArray(F)&&Array.isArray(B)){let A=F.length;F.length!==B.length&&x.Application.WarnLog.log("VisiWin.UI."+V.controlName+'.createProperty: Length of array parameter "children" and "childproperties" not equal.'),B.length<A&&(A=B.length);for(let R=0;R<A;R++){const A=F[R].split(":");switch(A.length){case 1:q+="if(this."+F[R]+" && this."+F[R]+".winControl){\nthis."+F[R]+".winControl."+B[R]+"= v;\n}\n";break;case 2:q+='this.setTriggerProperty("'+A[1]+'","'+A[0]+'","'+B[R]+'", v);\n';break;case 3:q+='this.setActionProperty("'+A[1]+'","'+A[2]+'","'+A[0]+'","'+B[R]+'", v);\n';break;default:x.Application.WarnLog.log("VisiWin.UI."+V.controlName+'.createProperty: Format of array parameter "children" is illegal: '+F[R])}}}else if(Array.isArray(F)&&!Array.isArray(B)){const A=F.length;for(let R=0;R<A;R++){const A=F[R].split(":");switch(A.length){case 1:q+="if(this."+F[R]+" && this."+F[R]+".winControl){\nthis."+F[R]+".winControl."+B+"= v;\n}\n";break;case 2:q+='this.setTriggerProperty("'+A[1]+'","'+A[0]+'","'+B+'", v)\n;';break;case 3:q+='this.setActionProperty("'+A[1]+'","'+A[2]+'","'+A[0]+'","'+B+'", v)\b;';break;default:x.Application.WarnLog.log("VisiWin.UI."+V.controlName+'.createProperty: Format of array parameter "children" is illegal: '+F[R])}}}else if(!Array.isArray(F)&&Array.isArray(B)){const A=B.length;for(let R=0;R<A;R++){const A=F.split(":");switch(A.length){case 1:q+="if(this."+F+" && this."+F+".winControl){\nthis."+F+".winControl."+B[R]+"= v;\n}\n";break;case 2:q+='this.setTriggerProperty("'+A[1]+'","'+A[0]+'","'+B[R]+'", v);\n';break;case 3:q+='this.setActionProperty("'+A[1]+'","'+A[2]+'","'+A[0]+'","'+B[R]+'", v);\n';break;default:x.Application.WarnLog.log("VisiWin.UI."+V.controlName+'.createProperty: Format of array parameter "children" is illegal: '+F[R])}}}else if(!Array.isArray(F)&&!Array.isArray(B)){const A=F.split(":");switch(A.length){case 1:q+="if(this."+F+" && this."+F+".winControl){\nthis."+F+".winControl."+B+"= v;\n}\n";break;case 2:q+='this.setTriggerProperty("'+A[1]+'","'+A[0]+'","'+B+'", v);\n';break;case 3:q+='this.setActionProperty("'+A[1]+'","'+A[2]+'","'+A[0]+'","'+B+'", v);\n';break;default:x.Application.WarnLog.log("VisiWin.UI."+V.controlName+'.createProperty: Format of array parameter "children" is illegal: '+F)}}}else if(Array.isArray(F)&&Array.isArray(B)){let A=F.length;F.length!==B.length&&x.Application.WarnLog.log("VisiWin.UI."+V.controlName+'.createProperty: Length of array parameter "children" and "childproperties" not equal.'),B.length<A&&(A=B.length);for(let A=0;A<F.length;A++){const R=F[A].split(":");switch(R.length){case 1:q+="if(this."+F[A]+"){\nthis."+F[A]+"."+B[A]+"= v;\n}\n";break;case 2:q+='this.setTriggerProperty("'+R[1]+'","'+R[0]+'","'+B[A]+'", v);\n';break;case 3:q+='this.setActionProperty("'+R[1]+'","'+R[2]+'","'+R[0]+'","'+B[A]+'", v);\n';break;default:x.Application.WarnLog.log("VisiWin.UI."+V.controlName+'.createProperty: Format of array parameter "children" is illegal: '+F[A])}}}else if(Array.isArray(F)&&!Array.isArray(B)){const A=F.length;for(let R=0;R<A;R++){const A=F[R].split(":");switch(A.length){case 1:q+="if(this."+F[R]+"){\nthis."+F[R]+"."+B+"= v;\n}\n";break;case 2:q+='this.setTriggerProperty("'+A[1]+'","'+A[0]+'","'+B+'", v);\n';break;case 3:q+='this.setActionProperty("'+A[1]+'","'+A[2]+'","'+A[0]+'","'+B+'", v);\n';break;default:x.Application.WarnLog.log("VisiWin.UI."+V.controlName+'.createProperty: Format of array parameter "children" is illegal: '+F[R])}}}else if(!Array.isArray(F)&&Array.isArray(B)){const A=B.length;for(let R=0;R<A;R++){const A=F.split(":");switch(A.length){case 1:q+="if(this."+F+"){\nthis."+F+"."+B[R]+"= v;\n}\n";break;case 2:q+='this.setTriggerProperty("'+A[1]+'","'+A[0]+'","'+B[R]+'", v);\n';break;case 3:q+='this.setActionProperty("'+A[1]+'","'+A[2]+'","'+A[0]+'","'+B[R]+'", v);\n';break;default:x.Application.WarnLog.log("VisiWin.UI."+V.controlName+'.createProperty: Format of array parameter "children" is illegal: '+F[R])}}}else if(!Array.isArray(F)&&!Array.isArray(B)){const A=F.split(":");switch(A.length){case 1:q+="if(this."+F+"){\nthis."+F+"."+B+"= v;\n}\n";break;case 2:q+='this.setTriggerProperty("'+A[1]+'","'+A[0]+'","'+B+'", v);\n';break;case 3:q+='this.setActionProperty("'+A[1]+'","'+A[2]+'","'+A[0]+'","'+B+'", v);\n';break;default:x.Application.WarnLog.log("VisiWin.UI."+V.controlName+'.createProperty: Format of array parameter "children" is illegal: '+F)}}/color/i.test(R)||"color"===H?q+="this._updateColorsBase('property','"+R+"',v,o);\n":q+="this._updateLayoutBase('property','"+R+"',v,o);\n",q+=W?"this.dispatchNotifyPropertyChanged('property','"+R+"',v,o,'"+W+"');\n":"this.dispatchNotifyPropertyChanged('property','"+R+"',v,o);",Q=new Function("v",q)}if("rw"===N||"ro"===N){let A=F,R=B;if(Array.isArray(F)&&(A=F[0]),Array.isArray(B)&&(R=B[0]),"child"===D){const D=A.split(":");switch(D.length){case 1:q=`if(this.${A}) { return this.${A}.winControl.${R}};\n`;break;case 2:q=`return this.getTriggerProperty("${D[1]}", "${D[0]}", "${B}");`;break;case 3:q=`return this.getActionProperty("${D[1]}","${D[2]}", "${D[0]}", "${B}", v);`;break;default:x.Application.WarnLog.log("VisiWin.UI."+V.controlName+'.createProperty: Format of array parameter "children" is illegal: '+A)}}else if("controlChild"===D){const D=A.split(":");switch(D.length){case 1:q=`if(this.${A}) { return this.${A}.${R}};\n`;break;case 2:q=`return this.getTriggerProperty("${D[1]}", "${D[0]}", "${B}");\n`;break;case 3:q=`return this.getActionProperty("${D[1]}","${D[2]}", "${D[0]}", "${B}", v);\n`;break;default:x.Application.WarnLog.log("VisiWin.UI."+V.controlName+'.createProperty: Format of array parameter "children" is illegal: '+A)}}else q=`if(this.${A}) { return this.${A}.${R}};\n`;K=new Function(q)}break;default:return x.Application.WarnLog.log("VisiWin.UI."+V.controlName+".createProperty: Parameter "+D+" for property: "+R+" unknown."),!1}switch(N){case"ro":Object.defineProperty(V.prototype,R,{get:K,enumerable:!1,configurable:!0});break;case"wo":Object.defineProperty(V.prototype,R,{set:Q,enumerable:!1,configurable:!0});break;case"rw":Object.defineProperty(V.prototype,R,{set:Q,get:K,enumerable:!1,configurable:!0});break;default:return x.Application.WarnLog.log("VisiWin.UI."+V.controlName+".createProperty: Parameter "+N+" fr access fr Property: "+R+" ungltig."),!1}return!0},A.createProperties=function createProperties(A,V){let R=null,D=null,N=null,U=!1;for(const B in V){if(R=V[B],R.propertyType=R.propertyType||R.optionType||R.accessType||"member",R.access=R.access||"rw",R.type=R.type||"string",R.group=R.group||"*",R.invisible=R.invisible||!1,R.loc=R.loc||!1,R.resourceValue=R.resourceValue||null,R.triggerName=R.triggerName||null,R.actionName=R.actionName||null,V[B]=R,"child"===R.propertyType&&R.control&&(R.propertyType="controlChild",R.child=R.control),U=R.forceOverwrite||!1,D=R.style||R.childOption||R.class||R.property||R.childProperties||R.childProperty||R.serviceProperty||R.providerProperty||R.cloneProperty||R.sourceProperty||R.css||R.objectProperty||R.triggerProperty||R.actionProperty||null,N=R.element||R.children||R.child||R.childElement||R.service||R.provider||R.selector||R.object||R.controlChild||null,x.Utilities.isInDesignMode()&&void 0!==R.defaultValue_DM&&(R.defaultValue=R.defaultValue_DM,R.defaultValue_DM=void 0),B===N){let V="";A&&A.controlName&&(V=A.controlName),x.Application.ErrorLog.log(`${V}.createProperties: Property name('${B}') and element name('${N}') must not be equal.`)}x.Class._createProperty(V,A,B,R.propertyType,R.access,R.resourceValue,D,N,R.event,R.type,U,R.triggerName,R.actionName)}},A.createStyles=function createStyles(A,V){if(V&&V.css)try{if(!A.styleSheet){let x=document.head.firstElementChild;x&&x.visiWinStyle||(x=document.createElement("style"),x.visiWinStyle="VisiWinStyle",document.head.insertBefore(x,document.head.firstElementChild)),A.styleSheet=x.sheet}const x=V.css.split("}");for(let V=0;V<x.length-1;V++)A.styleSheet.insertRule(x[V]);return!0}catch(V){return x.Application.ErrorLog.log("VisiWin.UI."+A.controlName+" "+V.message),!1}}}(x.Class||(x.Class={}))}(VisiWin||(VisiWin={})),function(x){!function(x){"use strict";x.drawPath=function drawPath(x,A,V,R,D,N,U,B){var F,W,H,z,G,j,q,Q,K,J,X=D<=180?0:1,Y=D<=180?0:1,$=$=Math.PI/180*V-Math.PI/2,Z=Math.PI/180*R-Math.PI/2;return 360===D&&(Z-=2e-4),F=x+N*Math.cos($),W=A+N*Math.sin($),H=x+U*Math.cos($),z=A+U*Math.sin($),G=x+U*Math.cos(Z),j=A+U*Math.sin(Z),q=x+N*Math.cos(Z),Q=A+N*Math.sin(Z),(K=document.createElementNS("http://www.w3.org/2000/svg","path")).setAttribute("fill",B),J="M"+F+","+W+" L"+H+","+z+" A"+U+","+U+" 0 "+X+",1"+G+","+j+" L"+q+","+Q+" A"+N+","+N+" 0 "+Y+",0"+F+","+W+"z",K.setAttribute("d",J),K},x.drawLine=function drawLine(x,A,V,R,D,N,U){var B=document.createElementNS("http://www.w3.org/2000/svg","line");return B.style.stroke=N||"rgba(0,0,0,1)",B.style.strokeWidth=(D||1)+"px",B.setAttribute("x1",x),B.setAttribute("y1",A),B.setAttribute("x2",V),B.setAttribute("y2",R),B},x.drawTetragon=function drawTetragon(x,A,V,R,D,N,U,B,F,W,H){var z,G,j,q,Q,K,J,X,Y,$;switch(U){case"Left":case"Right":z="Left"==U?"Outside"==B?-W:W:"Outside"==B?x+W:x-W,G="Left"==U?"Outside"==B?z-V:z+V:"Outside"==B?z+V:z-V,j="Left"==U?"Outside"==B?z-R:z+R:"Outside"==B?z+R:z-R,q=z,K=Q=F?D:A-D,X=J=F?N:A-N;break;default:G=z=F?x-D:D,q=j=F?x-N:N,Q="Top"==U?"Outside"==B?-W:W:"Outside"==B?A+W:A-W,K="Top"==U?"Outside"==B?Q-V:Q+V:"Outside"==B?Q+V:Q-V,J="Top"==U?"Outside"==B?Q-R:Q+R:"Outside"==B?Q+R:Q-R,X=Q}return($=document.createElementNS("http://www.w3.org/2000/svg","path")).setAttribute("fill",H),Y="M"+z+","+Q+" L"+G+","+K+" L"+j+","+J+" L"+q+","+X+"Z",$.setAttribute("d",Y),$},x.getDegreesSegment=function getDegreesSegment(x,A){var V=360;return A>x&&((V=A-x)>360&&(V%=360),0===V&&(V=360)),A<x&&((V=360-x+A)<0&&(V=360+V),0===V&&(V=360)),V},x.getPixelValue=function getPixelValue(x,A,V){return!0===/%/.test(x)?Math.abs(A/(V?1:2)*(parseFloat(x)/100)):Math.abs(parseFloat(x))},x.correctAngle=function correctAngle(x){return x>360&&0===(x%=360)&&(x=360),x<-360&&0===(x%=360)&&(x=-360),x}}(x.SvgUtilities||(x.SvgUtilities={}))}(VisiWin||(VisiWin={}));var __awaiter=this&&this.__awaiter||function(x,A,V,R){return new(V||(V=Promise))((function(D,N){function fulfilled(x){try{step(R.next(x))}catch(x){N(x)}}function rejected(x){try{step(R.throw(x))}catch(x){N(x)}}function step(x){x.done?D(x.value):function adopt(x){return x instanceof V?x:new V((function(A){A(x)}))}(x.value).then(fulfilled,rejected)}step((R=R.apply(x,A||[])).next())}))},VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin;!function(x){!function(A){"use strict";function convertToType(A,V){const R=typeof A;if(null==V||""===V)return A;if(null==A)return null;if(""===A&&"string"!==V)return null;let D;switch(V){case"number":switch(R){case"boolean":return A?1:0;case"string":return"true"===A.toLowerCase()?1:"false"===A.toLowerCase()?0:(D=parseFloat(A),isNaN(D)?0:D);case"number":return A;default:return 0}case"string":switch(R){case"boolean":return A?"true":"false";case"string":return A;default:return A.toString()}case"boolean":switch(R){case"boolean":return A;case"string":return"true"===A.toLowerCase()||"false"!==A.toLowerCase()&&(x.Utilities.checkNumberInString(A)?0!==(A=parseFloat(A)):null);case"number":return null==A?null:0!==A}}return A}A.convertToType=convertToType,A.parseCommand=function parseCommand(A,V,R){return __awaiter(this,void 0,void 0,(function*(){let D=null;const N=V.split(",");let U=null;switch(A){case"ServerText":case"ClientText":case"Theme":break;case"Variable":const V=x.System.DataAccess.VariableService.getService().GetVariable(N[0]);(yield V.AttachAsync())?(N[1]&&void 0!==V[N[1]]?(D=V[N[1]],D=D.toString()):(D=V.Value,D=D.toString()),yield V.Detach()):D="#Variable: "+N[0]+" can not read #";break;case"TriggerData":D=x.AppServices.DataService.getTriggerData(R+N[0]);break;case"DataContext":U=x.AppServices.DataService;let B=U.getBinding(N[0]);B&&N[1]&&(B=B[N[1]],B&&N[2]&&(B=B[N[2]])),D=B;break;case"StateCollection":const F=this.stateCollectionValue(N[0],convertToType(N[1],"number"));D=null==F?"":F.toString();break;case"Expression":case"Term":break;default:D="#unknown command: "+A+"#"}return Promise.resolve(D)}))},A.parseParameter=function parseParameter(x,A){return __awaiter(this,void 0,void 0,(function*(){let V=null;const R=x.split(",");R&&R.length>0&&(V="");for(let x=0;x<R.length;x++)R[x]=yield this.parseProperty(R[x],A),0!==x&&(V+=","),V+=R[x];return Promise.resolve(V)}))},A.parseProperty=function parseProperty(A,V){return __awaiter(this,void 0,void 0,(function*(){let R,D="",N="",U=0,B=x.UI.PropertyParserState.PPS_CONST,F=0,W=!1;if(null===A||""===A)return Promise.resolve("");let H=null;if("string"==typeof A){H="";do{switch(R=A[U++],B){case x.UI.PropertyParserState.PPS_CONST:"@"===R?B=x.UI.PropertyParserState.PPS_AT:H+=R;break;case x.UI.PropertyParserState.PPS_AT:"@"===R?(H+="@",H+=D):"("===R?(F++,B=x.UI.PropertyParserState.PPS_PARA):D+=R;break;case x.UI.PropertyParserState.PPS_PARA:"("===R?(F++,N+=R):")"==R?(F--,0===F?(N=yield x.Utilities.parseParameter(N,V),D=yield x.Utilities.parseCommand(D,N,V),W=!0,H+=D,N="",D="",B=x.UI.PropertyParserState.PPS_CONST):N+=R):N+=R}}while(U<A.length)}if(""==H)if(D){W=!0;let A=x.Resources.aktTheme;H=x.Resources.themes[A]&&x.Resources.themes[A][D]?x.Resources.themes[A][D]:x.Resources.colors[D]?x.Resources.colors[D]:x.Resources.backgrounds[D]?x.Resources.backgrounds[D]:x.Resources.animations[D]?x.Resources.animations[D]:x.Resources.shadows[D]?x.Resources.shadows[D]:D}else H=A;return!1===W&&H!=A&&x.isString(A)&&x.Internal.stringContains(A,"@")&&(H=A),Promise.resolve(H)}))},A.stateCollectionValue=function stateCollectionValue(A,V){const R=x.Resources.stateCollections;if(!R||!R[A])return V;if(null==V||null==V)return V;const D=R[A],N=D.states;let U=-1;if(!D.parse){for(let A=0;A<N.length;A++){const V=N[A];if(V.op=[],(U=V.value.indexOf("<="))>=0)V.op[0]=parseFloat(V.value.substring(U+2)),V.operator=x.UI.Conditions.OPERATOR_LESSEQUAL;else if((U=V.value.indexOf(">="))>=0)V.op[0]=parseFloat(V.value.substring(U+2)),V.operator=x.UI.Conditions.OPERATOR_GRATEREQUAL;else if((U=V.value.indexOf("=="))>=0)V.op[0]=parseFloat(V.value.substring(U+2)),V.operator=x.UI.Conditions.OPERATOR_EQUAL;else if((U=V.value.indexOf("!="))>=0)V.op[0]=parseFloat(V.value.substring(U+2)),V.operator=x.UI.Conditions.OPERATOR_UNEQUAL;else if((U=V.value.indexOf(".."))>=0)V.op[0]=parseFloat(V.value.substring(0,U)),V.op[1]=parseFloat(V.value.substring(U+2)),V.operator=x.UI.Conditions.OPERATOR_INRANGE;else if((U=V.value.indexOf("<"))>=0)V.op[0]=parseFloat(V.value.substring(U+1)),V.operator=x.UI.Conditions.OPERATOR_LESS;else if((U=V.value.indexOf(">"))>=0)V.op[0]=parseFloat(V.value.substring(U+1)),V.operator=x.UI.Conditions.OPERATOR_GREATER;else if((U=V.value.indexOf(","))>=0){const A=V.value.split(",");for(let x=0;x<A.length;x++)V.op[x]=parseFloat(A[x]);V.operator=x.UI.Conditions.OPERATOR_NUMERATION}else V.op[0]=parseFloat(V.value),V.operator=x.UI.Conditions.OPERATOR_NONE}D.parse=!0}for(let A=0;A<N.length;A++){const R=N[A];switch(R.operator){case x.UI.Conditions.OPERATOR_EQUAL:if(V==R.op[0])return R.propertyValue;break;case x.UI.Conditions.OPERATOR_GREATER:if(V>R.op[0])return R.propertyValue;break;case x.UI.Conditions.OPERATOR_GRATEREQUAL:if(V>=R.op[0])return R.propertyValue;break;case x.UI.Conditions.OPERATOR_INRANGE:if(V>=R.op[0]&&V<=R.op[1])return R.propertyValue;break;case x.UI.Conditions.OPERATOR_LESS:if(V<R.op[0])return R.propertyValue;break;case x.UI.Conditions.OPERATOR_LESSEQUAL:if(V<=R.op[0])return R.propertyValue;break;case x.UI.Conditions.OPERATOR_NONE:if(V==R.op[0])return R.propertyValue;break;case x.UI.Conditions.OPERATOR_NUMERATION:for(let x=0;x<R.op.length;x++)if(V==R.op[x])return R.propertyValue}}}}(x.Utilities||(x.Utilities={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){!function(x){"use strict";x.SplashDelay=500}(x.Settings||(x.Settings={}))}(x.Application||(x.Application={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(A){"use strict";class UiSettings{constructor(){var A,V,R,D,N,U,B,F,W,H,z,G,j,q,Q,K,J,X,Y,$;this.ImportList_RunMode=x.Application.Settings.UI.ImportList_RunMode||{polyJS:{type:"js",path:"libs/visiwin/polyfills.min.js"},depJS:{type:"js",path:"libs/visiwin/dependencies.min.js"},vwJS:{type:"js",path:"libs/visiwin/VisiWinJS.min.js",require:["polyJS","depJS"]},defaultJS:{type:"js",path:"index.js",require:["vwJS"]},mdiconCss:{type:"css",path:"libs/visiwin/iconfonts/material-icons/material-icons.css"},wjiconCss:{type:"css",path:"libs/visiwin/iconfonts/winjs-icons/winjs-icons.css"},vwuiCss:{type:"css",path:"libs/visiwin/visiwin-ui.min.css"},typoCss:{type:"css",path:"libs/visiwin/typography.css",require:["vwuiCss"]}},this.AppServices_RunMode=x.Application.Settings.UI.AppServices_RunMode||[{name:"DataService",viewmodel:"DataViewModel"},{name:"AppService"},{name:"LanguageService"},{name:"ActionService"},{name:"VariableService"},{name:"CurrentAlarmService"},{name:"HistoricalAlarmService"},{name:"RecipeService"},{name:"UserManagementService"},{name:"NavigationService"},{name:"DataTemplateService"},{name:"ViewModelService"}],this.AutoRestartOnError=null===(A=x.Application.Settings.UI.AutoRestartOnError)||void 0===A||A,this.AutoRestartDelay=null!==(V=x.Application.Settings.UI.AutoRestartDelay)&&void 0!==V?V:30,this.SuspendCommunicationDelay=null!==(R=x.Application.Settings.UI.SuspendCommunicationDelay)&&void 0!==R?R:60,this.SuspendCommunicationEnabled=null===(D=x.Application.Settings.UI.SuspendCommunicationEnabled)||void 0===D||D,this.RestartAfterSuspension=null!==(N=x.Application.Settings.UI.RestartAfterSuspension)&&void 0!==N&&N,this.ForceDesignMode=null!==(U=x.Application.Settings.UI.ForceDesignMode)&&void 0!==U&&U,this.ForceDebugMode=null!==(B=x.Application.Settings.UI.ForceDebugMode)&&void 0!==B&&B,this.StartDelay=null!==(F=x.Application.Settings.UI.StartDelay)&&void 0!==F?F:0,this.DisableClearHTML=null!==(W=x.Application.Settings.UI.DisableClearHTML)&&void 0!==W&&W,this.DisableDesignModeCodeBehind=null!==(H=x.Application.Settings.UI.DisableDesignModeCodeBehind)&&void 0!==H&&H,this.PageMode=x.Application.Settings.UI.PageMode||"Cache",this.SymbolPath=x.Application.Settings.UI.SymbolPath||"",this.ImportList_DesignMode=x.Application.Settings.UI.ImportList_DesignMode||{vwDesignJS:{type:"js",path:"libs/visiwin/visiwin.design.js"},depJS:{type:"js",path:"libs/visiwin/dependencies.min.js"},polyJS:{type:"js",path:"libs/visiwin/polyfills.min.js"},vwJS:{type:"js",path:"libs/visiwin/visiwinjs.js",require:["polyJS","depJS"]},defaultJS:{type:"js",path:"index.js",require:["vwJS"]},mdiconCss:{type:"css",path:"libs/visiwin/iconfonts/material-icons/material-icons.css"},wjiconCss:{type:"css",path:"libs/visiwin/iconfonts/winjs-icons/winjs-icons.css"},vwuiCss:{type:"css",path:"libs/visiwin/visiwin-ui.css"},typoCss:{type:"css",path:"libs/visiwin/typography.css",require:["vwuiCss"]}},this.ImportList_DebugMode=x.Application.Settings.UI.ImportList_DebugMode||{polyJS:{type:"js",path:"libs/visiwin/polyfills.min.js"},depJS:{type:"js",path:"libs/visiwin/dependencies.min.js"},winjsBase:{type:"js",path:"libs/visiwin/jsdev/winjsBase.js"},winjsUI:{type:"js",path:"libs/visiwin/jsdev/winjsUI.js",require:["winjsBase"]},system:{type:"js",path:"libs/visiwin/jsdev/system.js",require:["winjsUI"]},core:{type:"js",path:"libs/visiwin/jsdev/core.js",require:["system"]},abJS:{type:"js",path:"libs/visiwin/jsdev/applicationBase.js",require:["polyJS","depJS","core"]},asJS:{type:"js",path:"libs/visiwin/jsdev/appServices.js",require:["abJS"]},acJS:{type:"js",path:"libs/visiwin/jsdev/actions.js",require:["asJS"]},apJS:{type:"js",path:"libs/visiwin/jsdev/provider.js",require:["acJS"]},bcJS:{type:"js",path:"libs/visiwin/jsdev/baseControls.js",require:["apJS"]},ccJS:{type:"js",path:"libs/visiwin/jsdev/coreControls.js",require:["bcJS"]},lcJS:{type:"js",path:"libs/visiwin/jsdev/layoutControls.js",require:["ccJS"]},alJS:{type:"js",path:"libs/visiwin/jsdev/appLayouts.js",require:["lcJS"]},mcJS:{type:"js",path:"libs/visiwin/jsdev/mainControls.js",require:["alJS"]},ucJS:{type:"js",path:"libs/visiwin/jsdev/uiControls.js",require:["mcJS"]},defaultJS:{type:"js",path:"index.js",require:["ucJS"]},mdiconCss:{type:"css",path:"libs/visiwin/iconfonts/material-icons/material-icons.css"},wjiconCss:{type:"css",path:"libs/visiwin/iconfonts/winjs-icons/winjs-icons.css"},vwuiCss:{type:"css",path:"libs/visiwin/visiwin-ui.css"},typoCss:{type:"css",path:"libs/visiwin/typography.css",require:["vwuiCss"]}},this.AppServices_DesignMode=[{name:"DataService"},{name:"AppService"},{name:"LanguageService"},{name:"ActionService"},{name:"VariableService"},{name:"CurrentAlarmService"},{name:"HistoricalAlarmService"},{name:"RecipeService"},{name:"UserManagementService"},{name:"NavigationService"},{name:"DataTemplateService"},{name:"ViewModelService"}],this.WebSocketDisable=null!==(z=x.Application.Settings.UI.WebSocketDisable)&&void 0!==z&&z,this.LoginView=x.Application.Settings.UI.LoginView||"views/LoginView.html",this.ErrorView=x.Application.Settings.UI.ErrorView||"views/ErrorView.html",this.AppShell=x.Application.Settings.UI.AppShell||"views/AppShell.html",this.EmptyPage=null!==(G=x.Application.Settings.UI.EmptyPage)&&void 0!==G?G:".vwdesigner/designerpage/Empty.html",this.StyleColors=null===(j=x.Application.Settings.UI.StyleColors)||void 0===j||j,this.TimingLog=null===(q=x.Application.Settings.UI.TimingLog)||void 0===q||q,this.DevelopmentMode=null!==(Q=x.Application.Settings.UI.DevelopmentMode)&&void 0!==Q&&Q,this.InteractivRunMode=null!==(K=x.Application.Settings.UI.InteractivRunMode)&&void 0!==K&&K,this.PreloadImages=null!==(J=x.Application.Settings.UI.PreloadImages)&&void 0!==J&&J,this.ImageList=x.Application.Settings.UI.ImageList||[],this.DefaultIconFont=x.Application.Settings.UI.DefaultIconFont||"materialicons",this.StyleFamily=x.Application.Settings.UI.StyleFamily||"Default",this.Device=x.Application.Settings.UI.Device||"{}",this.Animation=x.Application.Settings.UI.Animation||{EnterPage:"WinJS.UI.Animation.enterPag"},this.DirectoryNames=x.Application.Settings.UI.DirectoryNames||{Resources:"resources",LocalizationResources:"resources/localizationeresources",Themes:"resources/themes",StateLists:"resources/statelists",TouchKeyboard:"resources/touchkeyboard",StateInfos:"resources/stateinfos",StateCollections:"resources/statecollections",Styls:"resources/styles",DesignModeData:".vwdesigner/designmodedata",Actions:"actions",Services:"services",Controls:"controls",Provider:"provider",Classes:"classes",Colors:"resources/colors",Animations:"resources/animations",Shadows:"resources/shadows",Css:"css",Js:"js",UserControls:"userControls",CustomControls:"customControls",DataTemplates:"resources/datatemplates",Converters:"converters"},this.FileName=x.Application.Settings.UI.FileName||{LocStrings:"strings",LocCultureInfo:"cultureinfo"},this.StateLists=x.Application.Settings.UI.StateLists||["statelist.json","svgbindings.json"],this.TouchKeyboard=x.Application.Settings.UI.TouchKeyboard||["touchkeyboardlayouts.json"],this.StateInfos=x.Application.Settings.UI.StateInfos||["currentalarmstateinfo.json","historicalalarmstateinfo.json"],this.StateCollections=x.Application.Settings.UI.StateCollections||[],this.Colors=x.Application.Settings.UI.Colors||["colorpalette.json","customcolors.json","backgrounds.json"],this.Animations=x.Application.Settings.UI.Animations||["animations.json"],this.Shadows=x.Application.Settings.UI.Shadows||["shadows.json"],this.ProjectStyles=x.Application.Settings.UI.ProjectStyles||[],this.Providers=x.Application.Settings.UI.Providers||[],this.PointerTypes=x.Application.Settings.UI.PointerTypes||["mouse","pen","touch"],this.Controls=x.Application.Settings.UI.Controls||[],this.Services=x.Application.Settings.UI.Services||[],this.Actions=x.Application.Settings.UI.Actions||[],this.Classes=x.Application.Settings.UI.Classes||[],this.Css=x.Application.Settings.UI.Css||[],this.Js=x.Application.Settings.UI.Js||[],this.UserControls=x.Application.Settings.UI.UserControls||[],this.CustomControls=x.Application.Settings.UI.CustomControls||[],this.DataTemplates=x.Application.Settings.UI.DataTemplates||[],this.PreloadDataTemplates=x.Application.Settings.UI.PreloadDataTemplates||[],this.Converters=x.Application.Settings.UI.Converters||[],this.Styles=x.Application.Settings.UI.Styles||["plainstyles.css","plainstyles.json","mediastyles.json","localizedstyles.json"],this.DefaultStyleFamily=x.Application.Settings.UI.DefaultStyleFamily||"Default",this.DefaultDevice=x.Application.Settings.UI.DefaultDevice||{},this.Languages=x.Application.Settings.UI.Languages||["en-US","de-DE"],this.DesignTimeLanguage=x.Application.Settings.UI.DesignTimeLanguage||"en-US",this.RunTimeLanguage=x.Application.Settings.UI.RunTimeLanguage||"en-US",this.Themes=x.Application.Settings.UI.Themes||["lighttheme.json","darktheme.json","greentheme.json"],this.DesignTimeTheme=x.Application.Settings.UI.DesignTimeTheme||"lighttheme.json",this.RunTimeTheme=x.Application.Settings.UI.RunTimeTheme||"lighttheme.json",this.DateTimeFormats=x.Application.Settings.UI.DateTimeFormats||{LongDate:{day:"2-digit",month:"long",year:"numeric"},ShortDate:{day:"2-digit",month:"2-digit",year:"numeric"},NamedLongDate:{month:"long",day:"2-digit",weekday:"long",year:"numeric"},NamedShortDate:{month:"long",day:"2-digit",weekday:"short",year:"numeric"},LongTime:{hour:"2-digit",minute:"2-digit",second:"2-digit"},ShortTime:{hour:"2-digit",minute:"2-digit"}},this.PageHistorySize=x.Application.Settings.UI.PageHistorySize||100,this.ViewHistorySize=x.Application.Settings.UI.ViewHistorySize||100,this.LoadingPageName=x.Application.Settings.UI.LoadingPageName,this.LoadingViewName=x.Application.Settings.UI.LoadingViewName,this.Preloading=x.Application.Settings.UI.Preloading||{Enabled:!1,Main:{},Sub:{}},this.AutomaticUpdateUserManagement=null===(X=x.Application.Settings.UI.AutomaticUpdateUserManagement)||void 0===X||X,this.ShowLoadingPageForUncachedPages=null!==(Y=x.Application.Settings.UI.ShowLoadingPageForUncachedPages)&&void 0!==Y&&Y,this.IncludePartiallyLoadedPages=null===($=x.Application.Settings.UI.IncludePartiallyLoadedPages)||void 0===$||$,this.AppServicesDefault={VariableService:{},LanguageService:{},ThemeService:{},DataService:{MappedData:["User.Code","User.DeactivationTime","User.FullName","User.GroupName","User.Name","User.RemainingLogOns","User.RenewPassword","User.RightNames","User.Tag","User.Type.Namespace","User.Type.TypeName","User.UserState","UserGroup.AutoLogOffTime","UserGroup.Comment","UserGroup.Level","UserGroup.LocalizableText","UserGroup.RightNames","UserGroup.Tag","UserGroup.Text","UserGroup.Type.Namespace","UserGroup.Type.TypeName","UserGroup.UserNames","UserGroup.UsersRemovable"]},TouchKeyboard:{NumericTouchpadDialog:"dialogs/TouchKeyboardDialogs/NumericTouchpadDialog.html",AlphanumericTouchpadDialog:"dialogs/TouchKeyboardDialogs/AlphanumericTouchpadDialog.html",ForceNumericTouchpadDialogOnMobileDevice:!1,ForceAlphanumericTouchpadDialogOnMobileDevice:!1},UserManagementService:{TextKeys:{DialogsUserManagementRemoveUserDeletePermitted:["@[ServerSystem].Dialogs.UserManagement.RemoveUserSuccess.DeletePermitted"],DialogsUserManagementRemoveUserMethodCallFailed:["@[ServerSystem].Dialogs.UserManagement.RemoveUserSuccess.MethodCallFailed"],DialogsUserManagementRemoveUserUnableToSaveUser:["@[ServerSystem].Dialogs.UserManagement.RemoveUserSuccess.UnableToSaveUser"],DialogsUserManagementRemoveUserRemoveUserUnknownGroup:["@[ServerSystem].Dialogs.UserManagement.RemoveUserSuccess.UnknownGroup"],DialogsUserManagementRemoveUserUnknownUser:["@[ServerSystem].Dialogs.UserManagement.RemoveUserSuccess.UnknownUser"],DialogsUserManagementRemoveUserMethodCallFaild:["@[ServerSystem].Dialogs.UserManagement.RemoveUserSuccess.MethodCallFailed"],DialogsUserManagementAddUserSuccessUINoUser:["@[ClientSystem].Dialogs.UserManagement.AddUserSuccess.NoName"],DialogsUserManagementAddUserSuccessUINoRepeatPassword:["@[ServerSystem].Dialogs.UserManagement.EnterRepeatedPassword"],DialogsUserManagementAddUserSuccessForbiddenPassword:["@[ServerSystem].Dialogs.UserManagement.AddUserSuccess.ForbiddenPassword"],DialogsUserManagementAddUserSuccessInvalidPassword:["@[ServerSystem].Dialogs.UserManagement.AddUserSuccess.InvalidPassword"],DialogsUserManagementAddUserSuccessInvalidPasswordLength:["@[ServerSystem].Dialogs.UserManagement.AddUserSuccess.InvalidPasswordLength"],DialogsUserManagementAddUserSuccessMethodCallFailed:["@[ServerSystem].Dialogs.UserManagement.AddUserSuccess.MethodCallFailed"],DialogsUserManagementAddUserSuccessNoCharactersInPassword:["@[ServerSystem].Dialogs.UserManagement.AddUserSuccess.NoCharactersInPassword"],DialogsUserManagementAddUserSuccessNoNumbersInPassword:["@[ServerSystem].Dialogs.UserManagement.AddUserSuccess.NoNumbersInPassword"],DialogsUserManagementAddUserSuccessPasswordMustContainSpecialCharacters:["@[ServerSystem].Dialogs.UserManagement.AddUserSuccess.PasswordMustContainSpecialCharacters"],DialogsUserManagementAddUserSuccessUnableToSaveUser:["@[ServerSystem].Dialogs.UserManagement.AddUserSuccess.UnableToSaveUser"],DialogsUserManagementAddUserSuccessUserExists:["@[ServerSystem].Dialogs.UserManagement.AddUserSuccess.UserExists"],DialogsUserManagementAddUserSuccessNoName:["@[ServerSystem].Dialogs.UserManagement.AddUserSuccess.NoName"],DialogsUserManagementAddUserSuccessNoUserGroup:["@[ServerSystem].Dialogs.UserManagement.AddUserSuccess.NoUserGroup"],DialogsUserManagementAddUserSuccessPasswordsNotEqual:["@[ServerSystem].Dialogs.UserManagement.AddUserSuccess.PasswordsNotEqual"],DialogsUserManagementAddUserSuccessFullUserExists:["@[ServerSystem].Dialogs.UserManagement.AddUserSuccess.FullUserExists"],DialogsUserManagementAddUserSuccessMachineCodeExists:["@[ServerSystem].Dialogs.UserManagement.AddUserSuccess.MachineCodeExists"],DialogsUserManagementAddUserSuccessNoFullName:["@[ServerSystem].Dialogs.UserManagement.AddUserSuccess.NoFullName"],DialogsUserManagementAddUserSuccessLockedPassword:["@[ServerSystem].Dialogs.UserManagement.AddUserSuccess.LockedPassword"],DialogsUserManagementAddUserSuccessUINoNewPassword:["@[ServerSystem].Dialogs.UserManagement.EnterNewPassword"],DialogsUserManagementAddUserSuccessNewPasswordsNotEqual:["@[ServerSystem].Dialogs.UserManagement.ChangePasswordSuccess.NewPasswordsNotEqual"],DialogsUserManagementAddUserSuccessMethodCallFaild:["@[ClientSystem].Dialogs.UserManagement.LogOnSuccess.MethodCallFailed"],DialogsUserManagementAddUserChooseState:["@[ServerSystem].Dialogs.UserManagement.ChooseState"],DialogsUserManagementChangePasswordSuccesUINoUser:["@[ClientSystem].Dialogs.UserManagement.AddUserSuccess.NoName"],DialogsUserManagementChangePasswordSuccessCantAccessDomainInfo:["@[ServerSystem].Dialogs.UserManagement.ChangePasswordSuccess.CantAccessDomainInfo"],DialogsUserManagementChangePasswordSuccessForbiddenPassword:["@[ServerSystem].Dialogs.UserManagement.ChangePasswordSuccess.ForbiddenPassword"],DialogsUserManagementChangePasswordSuccessMethodCallFailed:["@[ServerSystem].Dialogs.UserManagement.ChangePasswordSuccess.MethodCallFailed"],DialogsUserManagementChangePasswordSuccessNewPasswordInvalid:["@[ServerSystem].Dialogs.UserManagement.ChangePasswordSuccess.NewPasswordInvalid"],DialogsUserManagementChangePasswordSuccessNewPasswordInvalidLength:["@[ServerSystem].Dialogs.UserManagement.ChangePasswordSuccess.NewPasswordInvalidLength"],DialogsUserManagementChangePasswordSuccessNoCharactersInPassword:["@[ServerSystem].Dialogs.UserManagement.ChangePasswordSuccess.NoCharactersInPassword"],DialogsUserManagementChangePasswordSuccessNoNumbersInPassword:["@[ServerSystem].Dialogs.UserManagement.ChangePasswordSuccess.NoNumbersInPassword"],DialogsUserManagementChangePasswordSuccessOldPasswordInvalid:["@[ServerSystem].Dialogs.UserManagement.ChangePasswordSuccess.OldPasswordInvalid"],DialogsUserManagementChangePasswordSuccessMustContainSpecialCharacters:["@[ServerSystem].Dialogs.UserManagement.ChangePasswordSuccess.PasswordMustContainSpecialCharacters"],DialogsUserManagementChangePasswordSuccessUnableToSavePassword:["@[ServerSystem].Dialogs.UserManagement.ChangePasswordSuccess.UnableToSavePassword"],DialogsUserManagementChangePasswordSuccessUnknownUser:["@[ServerSystem].Dialogs.UserManagement.ChangePasswordSuccess.UnknownUser"],DialogsUserManagementChangePasswordSuccessNewPasswordsNotEqual:["@[ServerSystem].Dialogs.UserManagement.ChangePasswordSuccess.NewPasswordsNotEqual"],DialogsUserManagementChangePasswordSuccessNoCurrentUser:["@[ServerSystem].Dialogs.UserManagement.ChangePasswordSuccess.NoCurrentUser"],DialogsUserManagementChangePasswordSuccessLockedPassword:["@[ServerSystem].Dialogs.UserManagement.ChangePasswordSuccess.LockedPassword"],DialogsUserManagementChangePasswordSuccessMethodCallFaild:["@[ServerSystem].Dialogs.UserManagement.LogOnSuccess.MethodCallFailed"],DialogsUserManagementChangeUserSuccessUINoUserNoRepeatPassword:["@[ServerSystem].Dialogs.UserManagement.EnterRepeatedPassword"],DialogsUserManagementChangeUserSuccessInvalidUserClass:["@[ServerSystem].Dialogs.UserManagement.ChangeUserSuccess.InvalidUserClass"],DialogsUserManagementChangeUserSuccessUINoRepeatPassword:["@[ServerSystem].Dialogs.UserManagement.EnterRepeatedPassword"],DialogsUserManagementChangeUserSuccessMethodCallFaild:["@[ServerSystem].Dialogs.UserManagement.ChangeUserSuccess.MethodCallFailed"],DialogsUserManagementChangeUserSuccessNewPasswordsNotEqual:["@[ServerSystem].Dialogs.UserManagement.ChangePasswordSuccess.NewPasswordsNotEqual"],DialogsUserManagementChangeUserSuccessForbiddenPassword:["@[ServerSystem].Dialogs.UserManagement.ChangePasswordSuccess.ForbiddenPassword"],DialogsUserManagementChangeUserSuccessFullUserExists:["@[ServerSystem].Dialogs.UserManagement.ChangeUserSuccess.FullUserExists"],DialogsUserManagementChangeUserSuccessInvalidPassword:["@[ServerSystem].Dialogs.UserManagement.ChangeUserSuccess.InvalidPassword"],DialogsUserManagementChangeUserSuccessInvalidPasswordLength:["@[ServerSystem].Dialogs.UserManagement.ChangeUserSuccess.InvalidPasswordLength"],DialogsUserManagementChangeUserSuccessLockedPassword:["@[ServerSystem].Dialogs.UserManagement.ChangeUserSuccess.LockedPassword"],DialogsUserManagementChangeUserSuccessMachineCodeExists:["@[ServerSystem].Dialogs.UserManagement.ChangeUserSuccess.MachineCodeExists"],DialogsUserManagementChangeUserSuccessNoCharactersInPassword:["@[ServerSystem].Dialogs.UserManagement.ChangeUserSuccess.NoCharactersInPassword"],DialogsUserManagementChangeUserSuccessNoNumbersInPassword:["@[ServerSystem].Dialogs.UserManagement.ChangeUserSuccess.NoNumbersInPassword"],DialogsUserManagementChangeUserSuccessMustContainSpecialCharacters:["@[ServerSystem].Dialogs.UserManagement.ChangeUserSuccess.PasswordMustContainSpecialCharacters"],DialogsUserManagementChangeUserSuccessUnableToSaveUser:["@[ServerSystem].Dialogs.UserManagement.ChangeUserSuccess.UnableToSaveUser"],DialogsUserManagementChangeUserSuccessUnknownUser:["@[ServerSystem].Dialogs.UserManagement.ChangeUserSuccess.UnknownUser"],DialogsUserManagementChangeUserSuccessUINoNewUser:["@[ClientSystem].Dialogs.UserManagement.AddUserSuccess.NoName"],DialogsUserManagementhangeUserSuccessUINoUserNoPassword:["@[ServerSystem].Dialogs.UserManagement.AddUserSuccess.NoName"],DialogsUserManagementChangeUserSuccessUINoNewPassword:["@[ServerSystem].Dialogs.UserManagement.EnterNewPassword"],DialogsUserManagementLogOnUINoPassword:["@[ClientSystem].Dialogs.UserManagement.EnterPassword"],DialogsUserManagementLogOnUINoNewPassword:["@[ServerSystem].Dialogs.UserManagement.EnterNewPassword"],DialogsUserManagementLogOnUINoOldPassword:["@[ServerSystem].Dialogs.UserManagement.EnterOldPassword"],DialogsUserManagementLogOnSuccessCantAccessDomainInfo:["@[ClientSystem].Dialogs.UserManagement.LogOnSuccess.CantAccessDomainInfo"],DialogsUserManagementLogOnSuccessInvalidPassword:["@[ClientSystem].Dialogs.UserManagement.LogOnSuccess.InvalidPassword"],DialogsUserManagementLogOnSuccessPasswordExpiered:["@[ClientSystem].Dialogs.UserManagement.LogOnSuccess.PasswordExpired"],DialogsUserManagementLogOnSuccessRenewPassword:["@[ClientSystem].Dialogs.UserManagement.LogOnSuccess.RenewPassword"],DialogsUserManagementLogOnSuccessTooManyFaildLogOns:["@[ClientSystem].Dialogs.UserManagement.LogOnSuccess.TooManyFailedLogOns"],DialogsUserManagementLogOnSuccessUnknownUser:["@[ClientSystem].Dialogs.UserManagement.LogOnSuccess.UnknownUser"],DialogsUserManagementLogOnSuccessUserDeactivated:["@[ClientSystem].Dialogs.UserManagement.LogOnSuccess.UserDeactivated"],DialogsUserManagementLogOnSuccessMethodCallFaild:["@[ClientSystem].Dialogs.UserManagement.LogOnSuccess.MethodCallFailed"],DialogsUserManagementLogOnSuccessNoCorrespondingLocalUserClass:["@[ClientSystem].Dialogs.UserManagement.LogOnSuccess.NoCorrespondingLocalUserClass"],DialogsUserManagementLogOnSuccessUINoUserNoPassword:["@[ClientSystem].Dialogs.UserManagement.AddUserSuccess.NoName"],DialogsUserManagementLogOnSuccessNewPasswordsNotEqual:["@[ServerSystem].Dialogs.UserManagement.ChangePasswordSuccess.NewPasswordsNotEqual"]}}},this.AppServices=x.Utilities.mixAppSettings(x.Application.Settings.UI.AppServices,this.AppServicesDefault)}}A.UiSettings=UiSettings,x.Application.Settings.UI=new UiSettings}(A.Settings||(A.Settings={}))}(A.Application||(A.Application={}))}(x.Internal||(x.Internal={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";let V=0;function changeHandler(A){var R=5,D=!0;const N={ClientString:x.System.Client.ClientState[A],State:A};document.getElementById("clientStateView");if(!x.Application.restartRunning)switch(A){case x.System.Client.ClientState.Unloaded:x.Application.InfoLog.log("VisiWin.Application.ClientStateChanged: Client start not triggerd yet.");break;case x.System.Client.ClientState.Starting:x.Application.InfoLog.log("VisiWin.Application.ClientStateChanged: Client is on start "+JSON.stringify(N,null,4));break;case x.System.Client.ClientState.Error:x.Application.InfoLog.log("VisiWin.Application.ClientStateChanged: Client start up has errors "+JSON.stringify(N,null,4));break;case x.System.Client.ClientState.Running:clearTimeout(V),x.Application.InfoLog.log("VisiWin.Application.ClientStateChanged: Client is running "+JSON.stringify(N,null,4));break;case x.System.Client.ClientState.OnExit:x.Application.InfoLog.log("VisiWin.Application.ClientStateChanged: Client is on shuting down "+JSON.stringify(N,null,3));break;case x.System.Client.ClientState.Stopped:x.Application.InfoLog.log("VisiWin.Application.ClientStateChanged: Client is stopped "+JSON.stringify(N,null,4));break;case x.System.Client.ClientState.Paused:x.Application.InfoLog.log("VisiWin.Application.ClientStateChanged: Client does not communicate. No User Logged on "+JSON.stringify(N,null,4));break;case x.System.Client.ClientState.Uncertain:x.Application.InfoLog.log("VisiWin.Application.ClientStateChanged: Client run into PingPong timeout. Communication may be unstable "+JSON.stringify(N,null,4));break;case x.System.Client.ClientState.SocketNotAvailable:D=x.Utilities.getAppSettings("UI.AutoRestartOnError"),R=x.Utilities.getAppSettings("UI.AutoRestartDelay"),D?(x.Application.ErrorLog.log("VisiWin.Application.ClientStateChanged: Client can not communicate. Socket not available, client will be restart in "+R+" seconds "+JSON.stringify(N,null,4)),x.Application.restartRunning=!0,setTimeout((function(){x.Application.ErrorLog.log("Restart."),location.reload()}),1e3*R)):x.Application.ErrorLog.log("VisiWin.Application.ClientStateChanged: Client can not communicate. Socket not available, client must bet restart "+JSON.stringify(N,null,4));break;case x.System.Client.ClientState.CommunicationUnclear:x.Application.InfoLog.log("VisiWin.Application.ClientStateChanged: Client can not communicate. Possible PingPong timeout between gateway and client "+JSON.stringify(N,null,4));break;case x.System.Client.ClientState.RestartRequired:D=x.Utilities.getAppSettings("UI.AutoRestartOnError"),R=x.Utilities.getAppSettings("UI.AutoRestartDelay"),x.Application.restartRunning=!0,D?(x.Application.ErrorLog.log("VisiWin.Application.ClientStateChanged: The server was restarted, so the client will be restarted in "+R+" seconds "+JSON.stringify(N,null,4)),V=setTimeout((function(){x.Application.ErrorLog.log("Restart."),location.reload()}),1e3*R)):x.Application.ErrorLog.log("VisiWin.Application.ClientStateChanged: The server was restarted, so the client must be restarted "+JSON.stringify(N,null,4));break;default:x.Application.WarnLog.log("VisiWin.Application.ClientStateChanged: Unknown state:"+A)}}A.addClientStateChangedHandler=function addClientStateChangedHandler(){x.System.Client.ClientService.getService().ClientStateChanged.add(changeHandler)},A.restartRunning=!1}(x.Application||(x.Application={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";let V=0;function serverProjectStateChange(A){var R=5,D=!0;const N={ServerProjectString:x.System.Project.ServerRuntimeStatus[A],State:A};document.getElementById("serverProjectStateChangeView");if(!x.Application.restartRunning)switch(A){case x.System.Project.ServerRuntimeStatus.ErrorNoLicense:x.Application.ErrorLog.log("VisiWin.Application.ServerProjectChanged: Server Project has no license.");break;case x.System.Project.ServerRuntimeStatus.Unloaded:break;case x.System.Project.ServerRuntimeStatus.Loaded:x.Application.InfoLog.log("VisiWin.Application.ServerProjectChanged: Server Project is Loaded "+JSON.stringify(N,null,4));break;case x.System.Project.ServerRuntimeStatus.Starting:x.Application.InfoLog.log("VisiWin.Application.ServerProjectChanged: Server Project is Starting "+JSON.stringify(N,null,4));break;case x.System.Project.ServerRuntimeStatus.Running:clearTimeout(V),x.Application.InfoLog.log("VisiWin.Application.ServerProjectChanged: Server Project is Running "+JSON.stringify(N,null,4));break;case x.System.Project.ServerRuntimeStatus.OnExit:if(x.System.Client.ClientService.getService().ClientState==x.System.Client.ClientState.Starting){x.Application.WarnLog.log("VisiWin.Application.ServerProjectChanged: Server Project is OnExit");break}x.System.Client.ClientService.getService().ClientState==x.System.Client.ClientState.Running?(D=x.Utilities.getAppSettings("UI.AutoRestartOnError"),R=x.Utilities.getAppSettings("UI.AutoRestartDelay"),D?(x.Application.restartRunning=!0,x.Application.ErrorLog.log("VisiWin.Application.ServerProjectChanged: Server Project is OnExit, Client will be restart in "+R+" seconds."+JSON.stringify(N,null,4)),setTimeout((function(){x.Application.ErrorLog.log("Restart."),location.reload()}),1e3*R)):x.Application.ErrorLog.log("VisiWin.Application.ServerProjectChanged: Server Project is OnExit."+JSON.stringify(N,null,4))):x.Application.WarnLog.log("VisiWin.Application.ServerProjectChanged: Server Project is OnExit."+JSON.stringify(N,null,4));break;case x.System.Project.ServerRuntimeStatus.Stopped:D=x.Utilities.getAppSettings("UI.AutoRestartOnError"),R=x.Utilities.getAppSettings("UI.AutoRestartDelay"),D&&(x.Application.restartRunning=!0,x.Application.ErrorLog.log("VisiWin.Application.ServerProjectChanged: Server Project is Stopped, Client will be restart in "+R+" seconds."+JSON.stringify(N,null,4)),V=setTimeout((function(){x.Application.ErrorLog.log("Restart."),location.reload()}),1e3*R));break;case x.System.Project.ServerRuntimeStatus.ErrorHostConnectionLost:D=x.Utilities.getAppSettings("UI.AutoRestartOnError"),R=x.Utilities.getAppSettings("UI.AutoRestartDelay"),D&&(x.Application.restartRunning=!0,x.Application.ErrorLog.log("VisiWin.Application.ServerProjectChanged: Connection to Server lost, Client will be restart in "+R+" seconds."+JSON.stringify(N,null,4)),V=setTimeout((function(){x.Application.ErrorLog.log("Restart."),location.reload()}),1e3*R));break;default:x.Application.WarnLog.log("VisiWin.Application.ServerProjectChanged: Unknown state:"+A)}}A.addServerProjectStateChangHandler=function addServerProjectStateChangHandler(){x.System.Project.ProjectService.getService().ServerProjectStateChange.add(serverProjectStateChange)}}(x.Application||(x.Application={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";function changeHandler(A){let V={SocketString:x.System.Client.CommunicationState[A],State:A};document.getElementById("socketStateView");switch(A){case x.System.Client.CommunicationState.Connecting:x.Application.InfoLog.log("VisiWin.Application.SocketStateChanged: Socket start "+JSON.stringify(V,null,4));break;case x.System.Client.CommunicationState.Open:x.Application.InfoLog.log("VisiWin.Application.SocketStateChanged: Socket open "+JSON.stringify(V,null,4));break;case x.System.Client.CommunicationState.Closing:x.Application.InfoLog.log("VisiWin.Application.SocketStateChanged: Socket closing "+JSON.stringify(V,null,4));break;case x.System.Client.CommunicationState.Closed:x.Application.ErrorLog.log("VisiWin.Application.SocketStateChanged:Socket closed "+JSON.stringify(V,null,4));break;default:x.Application.WarnLog.log("VisiWin.Application.SocketStateChanged: Unknown State:"+A)}}A.addSocketStateChangedHandler=function addSocketStateChangedHandler(){x.System.Client.ClientService.getService().CommunicationStateChanged.add(changeHandler)}}(x.Application||(x.Application={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";A.DOMContentReady=!1,A.ErrorLog=x.System.Diagnostics.Logger.ErrorLog,A.WarnLog=x.System.Diagnostics.Logger.WarnLog,A.InfoLog=x.System.Diagnostics.Logger.InfoLog,A.VerboseLog=x.System.Diagnostics.Logger.WebSocketLog,A.currentLogList=new WinJS.Binding.List([]);A.InfoLog.addObserver((function logInfoMessage(V,R){A.ApplicationLog(x.Utilities.getFirstStackEntry(V)+" "+x.Utilities.getFirstStackEntry(JSON.stringify(R)),2)})),A.WarnLog.addObserver((function logWarnMessage(V,R){A.ApplicationLog(x.Utilities.getFirstStackEntry(V)+" "+x.Utilities.getFirstStackEntry(JSON.stringify(R)),3)})),A.ErrorLog.addObserver((function logErrorMessage(V,R){A.ApplicationLog(x.Utilities.getFirstStackEntry(V)+" "+x.Utilities.getFirstStackEntry(JSON.stringify(R)),4)})),A.ApplicationLog=function(A,V,R){4==V&&x.Application&&x.Application.show&&"login"!==x.Application.show.show&&(x.Application.show.show="error"),window.setImmediate((function(D){x.Application.currentLogList.push({msg:A,level:V,time:new Date,stack:R})}))},A.start=function start(){let A=x.Internal.System.Diagnostics.performanceMark("Application Start");var V=x.AppServices.Impl.initAppServices();null!=V&&V.then((function(){var x=document.createEvent("Event");x.initEvent("DOMContentLoaded",!0,!0),window.document.dispatchEvent(x)})),x.Application.addClientStateChangedHandler(),x.Application.addServerProjectStateChangHandler(),x.Application.Settings.UI.DevelopmentMode||x.Utilities.isInDesignMode()?x.Application.Settings.UI.WebSocketDisable=!0:x.Application.addSocketStateChangedHandler(),"undefined"!=typeof WinJS?(WinJS.Application.addEventListener("loaded",(function(A){x.Application.AppService.getService().Start()})),WinJS.Application.start()):x.Application.AppService.getService().Start(),A.endMark()},A.stop=function stop(){}}(x.Application||(x.Application={}))}(VisiWin||(VisiWin={})),function(x){x.Internal||(x.Internal={})}(VisiWin||(VisiWin={})),function(x){!function(x){x.imageList=[],x.mainLayout=null,x.loginMsgHandler=null}(x.Application||(x.Application={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){"use strict";var V=!1;var R="",D=0;function startServices(A,V,R){let D=x.Internal.System.Diagnostics.performanceMark("internal Service"),N=performance.now();InitalizeConnection(A,V,R).then(()=>_InitProject()).then(x=>_InitUser()).then(()=>{var A=[],V=[];A.push(_InitLanguage());for(var R=0;R<x.Application.Settings.System.SystemLoader.length;R++)switch(x.Application.Settings.System.SystemLoader[R]){case"Alarm":V[R]=_InitAlarm(),A.push(V[R]);break;case"Trend":V[R]=_InitTrend(),A.push(V[R]);break;case"Logging":V[R]=_InitLogging(),A.push(V[R]);break;case"Recipe":V[R]=_InitRecipe(),A.push(V[R])}return x.Application.Settings.UI.PreloadImages&&(V[R]=_InitCache(),A.push(V[R].p)),WinJS.Promise.join(A)}).then(A=>{x.Internal.Application.ApplicationManager.getApplication().getDefaultSession().ClientManager.updateClientState(x.System.Client.ClientState.Running),Promise.resolve(x.Application.AppService.getService().StartPromise);var V={then:function(A){let V=performance.now();x.Application.Settings.System.Debug&&x.Application.InfoLog.log("VisiWin.UI initalize startup period: "+(V-N)+" milliseconds.")}};x.Application.AppService.getService().ProcessAllPromise=V},A=>{try{if(x.Application.AppService.getService().StartPromise.catch)if(A.LastSystem&&A.HasError){let V={System:A[A.LastSystem].Result};"Connection"==A.LastSystem?V={Websocket:A.Connection.Socket.Url}:"Project"==A.LastSystem&&(V={ProjectName:A.Project.ProjectName}),x.Application.ErrorLog.log(`Error during initialization sytem: '${A.LastSystem}' `,V),x.Application.AppService.getService().StartPromise.catch(A)}else Promise.resolve(x.Application.AppService.getService().StartPromise);else Promise.resolve(x.Application.AppService.getService().StartPromise)}catch(A){}}),D.endMark()}function InitalizeConnection(A,V,R){var D,N,U;V?(D=A,N=V,U=R):(D=x.Application.Settings.Server.WebSocketPrefix,N=x.Application.Settings.Server.WebSocketHost,U=x.Application.Settings.Server.WebSocketPort);var B=x.Internal.Application.ApplicationManager.getApplication().getDefaultSession();return x.Internal.Application.Start.startSocket(B,D,N,U)}function _InitUser(A,V){var R=x.Application.Settings.Client.AutoLogin,D=null;return new Promise((function(A,V){x.Internal.Application.ApplicationManager.getApplication().getDefaultSession();if(R)x.AppServices.UserManagementService.resetLogon(),x.AppServices.UserManagementService.logonUserAsync(x.Application.Settings.Client.DefaultUser,x.Application.Settings.Client.DefaultPassword,null,!0).then((function(R){if(D=R.errorText,R.result==x.System.UserManagement.LogOnSuccess.Succeeded&&A("Login Succseed."),null!=D){x.Application.show.show="login";var N={then:x=>{A(null)},catch:x=>{V()}};x.Application.AppService.getService().LoginPromise=N,setTimeout((function(){"function"==typeof x.Application.loginMsgHandler&&x.Application.loginMsgHandler(D)}),1e3)}}),(function(R){if(null!=(D=R.errorText)){"function"==typeof x.Application.loginMsgHandler&&x.Application.loginMsgHandler(D),x.Application.show.show="login";var N={then:x=>{A(null)},catch:x=>{V()}};x.Application.AppService.getService().LoginPromise=N}}));else{x.Application.show.show="login";var N={then:x=>{A(null)},catch:x=>{V()}};x.Application.AppService.getService().LoginPromise=N}}))}function _InitProject(){var A=x.Internal.Application.ApplicationManager.getApplication().getDefaultSession();return x.Internal.Application.Start.startProject(A)}function _InitLanguage(){var A=x.Internal.Application.ApplicationManager.getApplication().getDefaultSession();return x.Internal.Application.Start.getCurrentLanguage(A)}function _InitAlarm(){var A=x.Internal.Application.ApplicationManager.getApplication().getDefaultSession();return x.Internal.Application.Start.getAlarm(A)}function _InitTrend(){var A=x.Internal.Application.ApplicationManager.getApplication().getDefaultSession();return x.Internal.Application.Start.getArchivesTrends(A)}function _InitLogging(){var A=x.Internal.Application.ApplicationManager.getApplication().getDefaultSession();return x.Internal.Application.Start.getLogging(A)}function _InitRecipe(){var A=x.Internal.Application.ApplicationManager.getApplication().getDefaultSession();return x.Internal.Application.Start.getRecipeClassNames(A)}function _InitCache(){var A=new Promise((function(A,V){for(var R=0;R<x.Application.Settings.UI.ImageList.length;R++){var D=x.Application.Settings.UI.ImageList[R];WinJS.xhr({url:D,responseType:"blob",data:{}}).then((function(A){if(200===A.status){var V=URL.createObjectURL(A.response);x.Application.imageList.push(V)}}),(function(x){x.status}))}setTimeout((function(){A(null)}),100)})),V={};return V.p=A,V}A.startLog=function startLog(A,V,N){x.Application.Settings.System.DebugLogLevel<=V&&x.Utilities.isInDefaultPage()&&x.Application.InfoLog.log(A),N&&(R=R.substring(0,D)),D=R.length,R=function aktTime(){var x=new Date;return(x.getHours()<10?"0"+x.getHours().toString():x.getHours().toString())+":"+(x.getMinutes()<10?"0"+x.getMinutes().toString():x.getMinutes().toString())+":"+(x.getSeconds()<10?"0"+x.getSeconds().toString():x.getSeconds().toString())+"."+(x.getMilliseconds()<100?"0"+(x.getMilliseconds()<10?"0"+x.getMilliseconds().toString():x.getMilliseconds().toString()):x.getMilliseconds().toString())}()+"-"+A+"<BR>"+R},A.startUp=function startUp(A,R,D){WinJS.Application.addEventListener("ready",(function(N){let U=x.Internal.System.Diagnostics.performanceMark("Application ready");if(!V)if(V=!0,x.Application.Settings.UI.WebSocketDisable){Promise.resolve(x.Application.AppService.getService().StartPromise);x.Application.AppService.getService().ProcessAllPromise={then:x=>{}}}else startServices(A,R,D);U.endMark()}))},A.startServices=startServices,A.InitalizeConnection=InitalizeConnection,A._InitUserOld=function _InitUserOld(A,V){var R;return x.Application.Settings.Client.AutoLogin?R=x.Internal.InitializeSystem._InitUser(x.Application.Settings.Client.DefaultUser,x.Application.Settings.Client.DefaultPassword):(x.Application.show.show="login",x.Application.AppService.getService().LoginPromise=new Promise(()=>{}),R=x.Application.AppService.getService().LoginPromise),R},A._login=function _login(){},A._InitUser=_InitUser,A._InitProject=_InitProject,A._InitLanguage=_InitLanguage,A._InitDataAccess=function _InitDataAccess(){var A=x.Internal.Application.ApplicationManager.getApplication().getDefaultSession();return x.Internal.Application.Start.getDataAccess(A)},A._InitAlarm=_InitAlarm,A._InitTrend=_InitTrend,A._InitLogging=_InitLogging,A._InitRecipe=_InitRecipe,A._InitCache=_InitCache}(A.SystemInit||(A.SystemInit={}))}(x.Application||(x.Application={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";A.Show=class Show{constructor(){this._splashElement=null,this._errorElement=null,this._loginElement=null,this._contentElement=null,this._loadingPageElement=null,this._loadingPageInNavigator=!1,this._loadingViewElement=null,this._loadingViewInPageInNavigator=!1,this._contentsplashFlag=!0,this._show=null,this.init(),this.show="splash"}get show(){return this._show}set show(A){if(this._show=A,this._splashElement&&("splash"==A||this._contentsplashFlag&&"splashcontent"==A?(this._splashElement.style.display="block","splash"==A&&(this._contentsplashFlag=!0)):this._splashElement.style.display="none"),this._errorElement&&(this._errorElement.style.display="error"==A?"block":"none"),this._loginElement&&(this._loginElement.style.display="login"==A?"block":"none"),this._contentElement||(this._contentElement=document.getElementById("content")),this._contentElement&&("content"==A||!this._contentsplashFlag&&"splashcontent"==A?(this._contentElement.style.display="block","content"==A&&(this._contentsplashFlag=!1)):"loadingPage"!==A&&"loadingView"!==A&&"error"==A&&(this._contentElement.style.display="none")),this._loadingPageElement||x.Utilities.isInDesignMode()||this._handleLoadingPage(),this._loadingPageElement&&!x.Utilities.isInDesignMode()&&x.Application.show&&"error"!==x.Application.show.show)if("loadingPage"==A){if(!this._loadingPageInNavigator){let x=document.getElementsByClassName("vw-apppagenavigator");x[0]&&(x[0].prepend(this._loadingPageElement),this._loadingPageInNavigator=!0)}this._loadingPageElement.style.display="block"}else this._loadingPageElement.style.display="none";if(this._loadingViewElement||x.Utilities.isInDesignMode()||this._handleLoadingView(),this._loadingViewElement&&!x.Utilities.isInDesignMode()&&x.Application.show&&"error"!==x.Application.show.show)if("loadingView"==A){if(!this._loadingViewInPageInNavigator){let x=document.getElementsByClassName("vw-apppagenavigator");x[0]&&(x[0].prepend(this._loadingViewElement),this._loadingViewInPageInNavigator=!0)}this._loadingViewElement.style.display="block"}else this._loadingViewElement.style.display="none"}ready2(){this.init()}init(){var V=null;if(this._splashElement||((V=A.Settings.UI.SplashElementId)?this._splashElement=document.getElementById(V):this._splashElement=document.getElementById("splash")),!this._loginElement&&!x.Utilities.isInDesignMode()&&document.body){this._loginElement=document.createElement("div"),x.Utilities.addClass(this._loginElement,"login"),document.body.appendChild(this._loginElement);var R=x.Utilities.getPathString("views/LoginView.html");x.Utilities.getPathSetting("UI.LoginView")&&(R=x.Utilities.getPathSetting("UI.LoginView")),(D=new x.UI.Region(this._loginElement,{pageName:R,width:"100%",height:"100%"}))&&D.addEventListener("navigated",this.ready2.bind(this))}if(!this._errorElement&&!x.Utilities.isInDesignMode()&&document.body){this._errorElement=document.createElement("div"),x.Utilities.addClass(this._errorElement,"error"),document.body.appendChild(this._errorElement);var D,N=x.Utilities.getPathString("views/ErrorView.html");x.Utilities.getPathSetting("UI.ErrorView")&&(N=x.Utilities.getPathSetting("UI.ErrorView")),(D=new x.UI.Region(this._errorElement,{pageName:N,width:"100%",height:"100%"}))&&D.addEventListener("navigated",this.ready2.bind(this))}this._contentElement||((V=A.Settings.UI.ContentElementId)?this._contentElement=document.getElementById(V):this._contentElement=document.getElementById("content"))}_handleLoadingPage(){if(x.Application.Settings.UI.LoadingPageName){this._loadingPageElement=document.createElement("div"),x.Utilities.addClass(this._loadingPageElement,"loadingpage");var A=x.Application.Settings.UI.LoadingPageName;new x.UI.Region(this._loadingPageElement,{pageName:A,width:"100%",height:"100%"});document.body.appendChild(this._loadingPageElement),this._loadingPageElement.style.display="none"}}_handleLoadingView(){if(x.Application.Settings.UI.LoadingViewName){this._loadingViewElement=document.createElement("div"),x.Utilities.addClass(this._loadingViewElement,"loadingview");var A=x.Application.Settings.UI.LoadingViewName;new x.UI.Region(this._loadingViewElement,{pageName:A,width:"100%",height:"100%"});document.body.appendChild(this._loadingViewElement),this._loadingPageElement.style.display="none"}}}}(x.Application||(x.Application={}))}(VisiWin||(VisiWin={})),function(x){x.Internal||(x.Internal={})}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";A.show=null,A.onInitReady=new x.Internal.System.Events.TypedEvent,A.onStartUp=new x.Internal.System.Events.TypedEvent,A.onPageLoad=new x.Internal.System.Events.TypedEvent,A.onWebSocketOpen=new x.Internal.System.Events.TypedEvent,A.onWebSocketMessage=new x.Internal.System.Events.TypedEvent,A.onWebSocketClose=new x.Internal.System.Events.TypedEvent,A.onWebSocketError=new x.Internal.System.Events.TypedEvent,A.onWebSocketSend=new x.Internal.System.Events.TypedEvent;var V=document.title,R=!1,D=!1;window.addEventListener("unload",V=>{A._notifyWinJSEvent("unload",V),x.Application.InfoLog.log("window Event 'unload'")}),window.addEventListener("beforeunload ",V=>{A._notifyWinJSEvent("beforeunload ",V),x.Application.InfoLog.log("window Event 'beforeunload'")}),window.onerror=(V,R,D,N,U)=>{if(U){x.Application.ErrorLog.log("VisiWin.Application.Events.window.onerrore: "+V+" ["+U.toString()+"]\n\nName:\t\t"+(U.name||"-")+"\nMessage:\t"+(U.message||"-")+"\nFile:\t\t\t"+(U.fileName||"-")+"\nSource:\t\t"+(U.toSource&&U.toSource()||"-")+"\nLine #:\t\t"+(U.lineNumber||"-")+"\nColumn #:\t"+(U.columnNumber||"-")+"\n\nStack:\n\n"+(U.stack||"-"));try{throw new x.Internal.System.Exception.WindowException(V,R,D,N,U)}catch(x){}}else{x.Application.ErrorLog.log("VisiWin.Application.Events.window.onerrore: "+V+" ["+V.toString()+"]\n\nMessage:\t"+(V||"-")+"\nFile:\t\t\t"+(R||"-")+"\nLine #:\t\t"+(D||"-")+"\nColumn #:\t"+(N||"-"));try{throw new x.Internal.System.Exception.WindowException(V,R,D,N,U)}catch(x){}}A._notifyWinJSEvent("error","error"),x.Application.ErrorLog.log("window Event 'error'")};var N=0;document.addEventListener("visibilitychange",(function(A){!function visibilityHandler(A){if(document.hidden||document.webkitHidden){if(!0===x.Utilities.getAppSettings("UI.SuspendCommunicationEnabled")){document.title="closing connection: "+V;const A=x.Utilities.getAppSettings("UI.SuspendCommunicationDelay");N=setTimeout(()=>{!function _visibilityChangeHidden(A){x.Utilities.isInDesignMode()||(document.title="connection paused: "+V,x.System.Diagnostics.Logger.ServerLog.log("SuspendCommunication document is hidden"),x.Internal.Domain.MsgHelper.SuspendCommunication())}()},1e3*A),x.Application.VerboseLog.log("Application visibilty hidden :"+new Date(Date.now()).toLocaleTimeString())}}else N&&(window.clearTimeout(N),N=null),function _visibilityChangeVisible(A){document.title=V,N&&(window.clearTimeout(N),N=null);if(!0===x.Utilities.getAppSettings("UI.RestartAfterSuspension"))return void location.reload();x.Application.AppService.getService().IsOnline?(x.System.Diagnostics.Logger.ServerLog.log("ResumeCommunication document is visible"),x.Internal.Domain.MsgHelper.ResumeCommunication()):(x.Application.VerboseLog.log("visible start :"+new Date(Date.now()).toLocaleTimeString()),x.Application.start(),x.System.Diagnostics.Logger.ServerLog.log("Start Communication document is visible WebSocket is offline"))}(),x.Application.VerboseLog.log("visible :"+new Date(Date.now()).toLocaleTimeString())}()})),document.addEventListener("DOMContentLoaded",A=>{x.Application.DOMContentReady=!0}),A._eventListeners={loaded:[],activated:[],ready:[],checkpoint:[],error:[],settings:[],suspend:[],resume:[],unload:[],unloaded:[]},"undefined"!=typeof WinJS?(WinJS.Application.addEventListener("loaded",V=>{let R=x.Internal.System.Diagnostics.performanceMark("WinJS loaded");A.onStartUp.trigger(),x.Application._notifyWinJSEvent("loaded",V),x.Application.SystemInit.startLog("VisiWin.Application Event 'loaded'",2,!1),x.Application.show=new x.Application.Show,R.endMark()}),WinJS.Application.addEventListener("activated",A=>{let V=x.Internal.System.Diagnostics.performanceMark("WinJS activated");if(!R){R=!0,x.Application.show.init();var D={then:V=>{x.Application.Start.StartUpInfo.HasError&&x.Application.ErrorLog.log("Error: "+x.Application.Start.StartUpInfo.LastSystem.toString()),x.Application.SystemInit.startLog("VisiWin.Application Event 'activated'",2,!1),WinJS.UI.disableAnimations();var R=x.UI.processAll().then(()=>(Promise.resolve(x.Application.AppService.getService().ProcessAllPromise),x.Utilities.Scheduler.requestDrain(x.Utilities.Scheduler.Priority.aboveNormal+1))).then(()=>{x.Utilities.isInDesignMode()||WinJS.UI.enableAnimations(),Promise.resolve(x.Application.AppService.getService().ReadyPromise)});x.Application._notifyWinJSEvent("activated",A),A.setPromise(R)},catch:A=>{x.Application.show.show="error"}};x.Application.AppService.getService().StartPromise=D,V.endMark()}}),WinJS.Application.addEventListener("ready",A=>{let V=x.Internal.System.Diagnostics.performanceMark("WinJS ready");if(!D){D=!0;var R=!1,N={then:function(V){if(x.Application.SystemInit.startLog("WinJS Application Event 'ready'",2,!1),!R){if(x.Utilities.isInDesignMode()){var D=document.getElementsByClassName("vw-designercontainer");D&&D[0]&&D[0].winControl&&D[0].winControl.addEventListener("navigated",function(){var x=document.getElementById("splash");x&&(x.style.display="none")}.bind(this))}x.Application._notifyWinJSEvent("ready",A),x.Application.onInitReady.trigger("Ready"),R=!0}}};x.Application.AppService.getService().ReadyPromise=N}V.endMark()}),WinJS.Application.addEventListener("unloaded",A=>{x.Application._notifyWinJSEvent("unloaded",A),x.Application.SystemInit.startLog("WinJS Application Event 'unloaded'",2,!1)}),WinJS.Application.addEventListener("checkpoint",A=>{x.Application._notifyWinJSEvent("checkpoint",A),x.Application.SystemInit.startLog("WinJS Application Event 'checkpoint'",2,!1)}),WinJS.Application.addEventListener("error",A=>{x.Application._notifyWinJSEvent("error",A),x.Application.SystemInit.startLog("WinJS Application Event 'error'",2,!1)}),WinJS.Application.addEventListener("resume",A=>{x.Application._notifyWinJSEvent("resume",A),x.Application.SystemInit.startLog("WinJS Application Event 'resume'",2,!1)}),WinJS.Application.addEventListener("suspend",A=>{x.Application._notifyWinJSEvent("suspend",A),x.Application.SystemInit.startLog("WinJS Application Event 'suspend'",2,!1)})):A.onStartUp.trigger(),A._notifyWinJSEvent=function _notifyWinJSEvent(x,A){var V={};for(V in this._eventListeners[x])this._eventListeners[x].hasOwnProperty(V)&&this._eventListeners[x][V](A)},A.addEventListener=function addEventListener(A,V){x.Application._eventListeners[A]||x.Application.WarnLog.log("VisiWin.addEventListener: Unknown event '"+A+"' specified.  Listener: ",V),x.Application._eventListeners[A].push(V)},A.removeEventListener=function removeEventListener(A,V){x.Application._eventListeners[A]||x.Application.WarnLog.log("VisiWin.AppFramework.Application.removeEventListener: Unknown event '"+A+"' specified.  Listener: ",V);for(var R=x.Application._eventListeners[A],D=0;D<R.length;D++)if(V===R[D])return void R.splice(D,1)}}(x.Application||(x.Application={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){"use strict";A._webSocketOpenMessage=function _webSocketOpenMessage(A){x.Application.AppService.getService().IsOnline=!0,x.Application.onWebSocketOpen.trigger(A)},A._webSocketCloseMessage=function _webSocketCloseMessage(A){x.Application.AppService.getService().IsOnline=!1,x.Application.onWebSocketClose.trigger(A)},A._webSocketErrorMessage=function _webSocketErrorMessage(A){x.Application.onWebSocketError.trigger(A)},A._webSocketSendMessage=function _webSocketSendMessage(A){x.Application.onWebSocketSend.trigger(A),x.Application.AppService.getService().LastQuery=A},A._webSocketMessage=function _webSocketMessage(A){x.Application.onWebSocketMessage.trigger(A),x.Application.AppService.getService().LastResponse=A.data},A._onAuthorizedException=function _onAuthorizedException(A){x.Application.ErrorLog.log("VisiWin.Application.Events.AuthorizedException: "+A.message+" ["+A.toString()+"]\n\nMessage:\t"+(A.message||"-")+"\nFile:\t\t\t"+(A.name||"-"))},A._onResultException=function _onResultException(A){x.Application.ErrorLog.log("VisiWin.Application.Events.ResultException: "+A.message+" ["+A.toString()+"]\n\nMessage:\t"+(A.message||"-")+"\nFile:\t\t\t"+(A.name||"-"))},A.onPageReady=function onPageReady(){},x.Application.addEventListener("error",A=>{try{x.Application.SystemInit.startLog("VisiWin.Application Error EventListener: "+A.type+"  "+A.detail.error.status+"  "+A.detail.error.statusText,2,!1)}catch(A){x.Application.SystemInit.startLog("VisiWin.Application Error EventListener Catch: "+A,2,!1)}})}(A.Internal||(A.Internal={}))}(x.Application||(x.Application={}))}(VisiWin||(VisiWin={})),function(x){x.Internal||(x.Internal={})}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class AppService{constructor(){return this.StartPromise=null,this.ReadyPromise=null,this.ProcessAllPromise=null,this.LoginPromise=null,this.WebSocketConnection=x.Internal.Application.ApplicationManager.getApplication().getDefaultSession().SrvHnd.Socket,this.NavigationService=null,this.IsOnline=!1,this.ConnectionState=0,this.LastQuery="",this.LastResponse="",x.Application.AppService._curService?(x.Application.ErrorLog.log("Overwrite AppService: Error: Instantiation failed: Use AppService.getService() instead of new."),x.Application.AppService._curService):(this.WebSocketConnection.onWebSocketOpen.add(x.Application.Internal._webSocketOpenMessage),this.WebSocketConnection.onWebSocketClose.add(x.Application.Internal._webSocketCloseMessage),this.WebSocketConnection.onWebSocketError.add(x.Application.Internal._webSocketErrorMessage),this.WebSocketConnection.onWebSocketSend.add(x.Application.Internal._webSocketSendMessage),this.WebSocketConnection.onWebSocketMessage.add(x.Application.Internal._webSocketMessage),x.Internal.System.Exception.onAuthorizedException.add(x.Application.Internal._onAuthorizedException),x.Internal.System.Exception.onResultException.add(x.Application.Internal._onResultException),x.Application.onInitReady.add(()=>{x.Internal.Application.ApplicationManager.getApplication().getDefaultSession().SrvHnd.Socket}),this)}Start(){x.Application.SystemInit.startUp()}static getService(){return void 0===x.Application.AppService._curService&&(this._curService=new AppService,x.Application.VerboseLog.log("Create AppService")),x.Application.AppService._curService}}A.AppService=AppService}(x.Application||(x.Application={}))}(VisiWin||(VisiWin={})),function(x){!function(x){x.as=WinJS.Binding.as,x.processAll=WinJS.Binding.processAll,x.initializer=WinJS.Binding.initializer,x.oneTime=WinJS.Binding.oneTime,x.Template=WinJS.Binding.Template,x.List=WinJS.Binding.List,x.converter=WinJS.Binding.converter,x.defaultBind=WinJS.Binding.defaultBind,x.getValue=WinJS.Binding.getValue,x.setAttribute=WinJS.Binding.setAttribute,x.setAttributeOneTime=WinJS.Binding.setAttributeOneTime,x.addClassOneTime=WinJS.Binding.addClassOneTime}(x.Binding||(x.Binding={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){x.disabledClassName="mvvm-disabled",x.getEventParams=function(x){let A={srcProps:[],eventName:null,destProps:[]};return x.forEach((function(x){if(x.indexOf("$")>0){let V=x.split("$");for(let x=0;x<V.length;x++){let R=V[x];0===x?A.eventName=R:A.destProps.push(R)}}else 0===A.destProps.length?A.srcProps.push(x):A.destProps.push(x)})),A},x.getObjectFromProps=(x,A,V)=>{let R=0,D=x;return A.forEach(x=>{(void 0===V||R<A.length-1)&&(D=D[x]),R++}),D},x.getIsTwoWay=function(x){let A=x[x.length-1],V=A.lastIndexOf("$");return"$two"===A.substring(V)},x.removeBindingInfo=function(x){let A=x.length-1,V=x[A],R=V.lastIndexOf("$");return x[A]=V.substring(0,R),x}}(x.BindingExtension||(x.BindingExtension={}))}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){A.debug=x.Binding.initializer((function(A,V,R,D){null!=x.Utilities.getObjectFromName(V.join("."),A)&&x.Binding.defaultBind(A,V,R,D)})),A.oneWay=x.Binding.initializer((function(A,V,R,D){null!=x.Utilities.getObjectFromName(V.join("."),A)&&x.Binding.defaultBind(A,V,R,D)})),A.twoWay=x.Binding.initializer((function(A,V,R,D){let N=null,U=null,B=null,F=D[D.length-1];if(x.Binding.defaultBind(A,V,R,D),R&&R.winControl)return B=V.join("."),N=D.join("."),B=V.join("."),R.winControl.addEventListener("notifyPropertyChanged",D=>{if(D.detail.changeName==F){let D=x.Utilities.getMember(N,R);x.Utilities.getMember(B,A);if(1===V.length)return A[B]=D;{let R=V[V.length-1],N=V.slice(0,-1).join(".");return x.Utilities.getMember(N,A)[R]=D}}});switch(R.nodeName){case"INPUT":U="checkbox"===R.type?"onclick":"oninput";break;case"SELECT":U="onchange"}return U?(N=D.join("."),B=V.join("."),R[U]=D=>{let U=x.Utilities.getMember(N,R);x.Utilities.getMember(B,A);if(1===V.length)return A[B]=U;{let R=V[V.length-1],D=V.slice(0,-1).join(".");return x.Utilities.getMember(D,A)[R]=U}}):void 0})),A.twoWayx=x.Binding.initializer((function(A,V,R,D){x.Binding.defaultBind(A,V,R,D),R.onchange=function(){let x=R[D[0]];A[V[0]]!==x&&(A[V[0]]=x)}})),A.eventToProperty=x.Binding.initializer((function(A,V,R,D){A.debug;let N=x.UI.BindingExtension.getIsTwoWay(V);N&&(V=x.UI.BindingExtension.removeBindingInfo(V));let U=x.UI.BindingExtension.getEventParams(D),B=x.UI.BindingExtension.getEventParams(V),F=x.UI.BindingExtension.getObjectFromProps(R,U.srcProps),W=x.UI.BindingExtension.getObjectFromProps(A,U.destProps,!0);F[U.eventName]=function(A){let V=x.UI.BindingExtension.getObjectFromProps(R,B.srcProps);W[U.destProps[U.destProps.length-1]]=V},N&&W.bind(U.destProps[U.destProps.length-1],(function(A){let D=x.UI.BindingExtension.getObjectFromProps(R,V,!0),N=V[V.length-1];D[N]!=A&&(D[N]=A)}))})),A.invokeOnEvent=x.Binding.initializer((function(x,A,V,R){let D=V,N=x,U=R.length,B=A.length;for(let x=0;x<U-1;x++)D=D[R[x]];for(let x=0;x<B-1;x++)N=N[A[x]];D[R[U-1]]=function(){N[A[B-1]].call(x,V)}})),A.arrayBind=x.Binding.initializer((function(x,A,V,R){let D=x,N=A.length;for(let x=0;x<N-1;x++)D=D[A[x]];let U=V;for(let x=0;x<R.length-1;x++)U=U[R[x]];U[R[R.length-1]]=D[A[N-1]]})),A.command=x.Binding.initializer((function(A,V,R,D){let N=R,U=A,B=D.length,F=V.length;for(let x=0;x<B-1;x++)N=N[D[x]];for(let x=0;x<F;x++)U=U[V[x]];N[D[B-1]]=function(){x.Utilities.hasClass(N,x.UI.BindingExtension.disabledClassName)||U.execute.call(A,R)},U.canExecute.bind("value",(function(A){let V=N.tagName.toLowerCase();A?x.Utilities.removeClass(N,x.UI.BindingExtension.disabledClassName):x.Utilities.addClass(N,x.UI.BindingExtension.disabledClassName),"button"==V&&(N.disabled=!A)}))})),x.Namespace.define("Bindings",{twoWay:x.Binding.Mode.twoWay,oneWay:x.Binding.Mode.oneWay,oneTime:x.Binding.oneTime,debug:x.Binding.Mode.debug,eventToProperty:x.Binding.Mode.eventToProperty,invokeOnEvent:x.Binding.Mode.invokeOnEvent,arrayBind:x.Binding.Mode.arrayBind,command:x.Binding.Mode.command})}(A.Mode||(A.Mode={}))}(x.Binding||(x.Binding={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){"use strict";A.ServiceBase=class ServiceBase{constructor(){this._eventListeners={}}createEvent(x){this._eventListeners[x]||(this._eventListeners[x]=[])}addEventListener(A,V){this._eventListeners[A]||x.Application.WarnLog.log("VisiWin.AppServices.Impl.ServiceManager.addEventListener: Unknown event '"+A+"' specified.  Listener: ",V),this._eventListeners[A]||(this._eventListeners[A]=[]),this._eventListeners[A].push(V)}removeEventListener(A,V){this._eventListeners[A]||x.Application.WarnLog.log("VisiWin.AppServices.Impl.ServiceManager.removeEventListener: Unknown event '"+A+"' specified.  Listener: ",V);const R=this._eventListeners[A];if(R)for(let x=0;x<R.length;x++)if(V===R[x])return void R.splice(x,1)}removeEvent(x){const A=this._eventListeners[x];if(A)for(let x=0;x<A.length;x++)A.splice(x,1);this._eventListeners[x]=null}dispatchEvent(x,A){for(let V in this._eventListeners[x])this._eventListeners[x].hasOwnProperty(V)&&this._eventListeners[x][V](A)}init(){}ready(){}ready2(){}suspend(){}resume(){}unload(){}dispose(){}}}(A.Impl||(A.Impl={}))}(x.AppServices||(x.AppServices={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){"use strict";class ServiceManager{constructor(){this.services={},this._service={},this.initReady=!1,this.readyReady=!1,this.suspendReady=!1,this.servicePromises=[],this.selectedHomeSection=0,x.Application.addEventListener("activated",x=>this.initServiceHandler(x)),x.Application.addEventListener("ready",x=>this.readyServiceHandler(x)),x.Application.addEventListener("unload",x=>this.unloadServiceHandler(x))}initServiceHandler(x){for(let x in this.services)"ServiceManager"!==x&&"Impl"!==x&&this.services[x].init&&this.services[x].init.call(this.services[x]);this.initReady=!0}readyServiceHandler(x){for(const x in this.services)"ServiceManager"!==x&&"Impl"!==x&&this.services[x].init&&this.services[x].ready.call(this.services[x]);this.readyReady=!0}unloadServiceHandler(x){for(const x in this.services)"ServiceManager"!==x&&"Impl"!==x&&(this.services[x].unload&&this.services[x].unload.call(this.services[x]),this.services[x].dispose&&this.services[x].dispose.call(this.services[x]),delete this.services[x]);this.initReady=!1,this.readyReady=!1,this.suspendReady=!1}addService(x,A){return!this.services[x]&&(this.services[x]=new A,this.services[x]||(this.services[x]={}),this.services[x].createEvent=this.services[x].createEvent.bind(this.services[x]),this.services[x].addEventListener=this.services[x].addEventListener.bind(this.services[x]),this.services[x].removeEventListener=this.services[x].removeEventListener.bind(this.services[x]),this.services[x].dispatchEvent=this.services[x].dispatchEvent.bind(this.services[x]),null!=this.services[x].p&&this.servicePromises.push(this.services[x].p),this.initReady&&this.services[x].init&&this.services[x].init.call(this.services[x]),this.readyReady&&this.services[x].ready&&this.services[x].ready.call(this.services[x]),!0)}static getService(A){return x.AppServices[A]?x.AppServices[A]:null}}A.ServiceManager=ServiceManager;const V=new ServiceManager,R=x.AppServices.Impl;x.AppServices=V.services,x.AppServices.ServiceManager=V,x.AppServices.Impl=R}(A.Impl||(A.Impl={}))}(x.AppServices||(x.AppServices={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){"use strict";class AppService extends x.AppServices.Impl.ServiceBase{constructor(){super(),this.mappingData={aktThemeUrl:null,aktMedia:null,aktTheme:null,initialMedia:null,client:{width:null,height:null,sizeRatio:null},isBrowserEdge:!1,isBrowserIE:!1,isBrowserChrome:!1,isBrowserFirefox:!1,isBrowserOpera:!1,isBrowserSafari:!1,isDesktop:!1,isTV:!1,isMobil:!1,isPhone:!1,isTablet:!1,isOsAndroid:!1,isOsWindows:!1,isOsLinux:!1,isOsiOS:!1},this.aktMedia=null,this.aktTheme=null,this.svgBindingFileList=[],this.svgStateFileList=[],this.setting_DirThemesDefault=this.getPathString("resources/themes"),this.setting_ThemeOptionsDefault="lightTheme.json",this.setting_DirThemes=null,this._oldMediaClassName=null,this.actions={},this.userAgent="",this.browser="",this.browserVersion="",this.browserOs="",this._runtimeVersion=null,this._isInDesignMode=!1,x.Application.Time.addTime("AppService","start"),this.createEvent("themeChanged"),this.createEvent("mediaChanged"),this.createEvent("resize"),x.Application.Settings.UI.DirectoryNames.Themes?this.setting_DirThemes=x.Application.Settings.UI.DirectoryNames.Themes:(x.Application.ErrorLog.log("VisiWin.AppServices.AppService: setting value [DirectoryNames.Themes] not set. Use default Directory: "+this.setting_DirThemesDefault+"."),this.setting_DirThemes=this.setting_DirThemesDefault);var A=null;if(x.Utilities.isInDesignMode())x.Application.Settings.UI.DesignTimeTheme?A=x.Application.Settings.UI.DesignTimeTheme:(x.Application.ErrorLog.log("VisiWin.AppServices.AppService: setting value [DesignTimeTheme] not set. Use default Theme: "+this.setting_ThemeOptionsDefault+"."),A=this.setting_ThemeOptionsDefault);else{var V=document.title||"defaultVisiWin7WebProject";x.Application.storageName=("Inosoft_VisiWin7_"+V+"_").replace(/[\\\/,\.+-\s]/g,"_");var R=x.Application.storageName+"RunTimeTheme";localStorage[R]?A=localStorage[R]:x.Application.Settings.UI.RunTimeTheme?A=x.Application.Settings.UI.RunTimeTheme:(x.Application.ErrorLog.log("VisiWin.AppServices.AppService:: setting value [RunTimeTheme] not set. Use default Theme: "+this.setting_ThemeOptionsDefault+"."),A=this.setting_ThemeOptionsDefault);var D=x.Application.Settings.UI.Themes;if(D.length>0){for(var N=0;N<D.length&&D[N]!=A;N++);N===D.length&&(x.Application.WarnLog.log("VisiWin.AppServices.AppService:: Theme:"+A+" are not in themelist. defaultTheme set to:"+D[0]),A=D[0])}else x.Application.WarnLog.log('VisiWin.AppServices.AppService:: There are no themes in the themelist in the "appSettings.json" File.')}var U=A.indexOf(".json");U>0?(this.aktTheme=A.substr(0,U),this.mappingData.aktTheme=A.substr(0,U)):(this.aktTheme=A,this.mappingData.aktTheme=A),x.Application.aktTheme=this.mappingData.aktTheme,x.Resources.aktTheme=this.mappingData.aktTheme,this.changeTheme(A);var B=x.Resources.media;for(var F in B){var W=B[F];W.mql=window.matchMedia(W.rule),W.mql.main=W,W.value=null,W.event=function(A){var V=null;if(A&&A.main)V=A.main;else if(A&&A.target.main)V=A.target.main;else x.Application.ErrorLog.log("VisiWin.Appservices.AppService: no media query support in Browser.");V&&(A.matches?(V.value=!0,V.initial=!1,this.aktMedia=V.name,this.mappingData.aktMedia=V.name,this.initialMedia=V,this.dispatchEvent("mediaChanged",V)):V.value=!1)}.bind(this),W.mql.addListener(W.event),W.event.call(this,W.mql)}x.Application.Time.addTime("AppService","end"),this.initService(),this._checkBrowser(),this._setBrowserDepend()}ready(){}initService(){Element.prototype.scrollIntoViewIfNeeded||(Element.prototype.scrollIntoViewIfNeeded=function(x){x=0===arguments.length||!!x;var A=this.parentNode,V=window.getComputedStyle(A,null),R=parseInt(V.getPropertyValue("border-top-width")),D=parseInt(V.getPropertyValue("border-left-width")),N=this.offsetTop-A.offsetTop<A.scrollTop,U=this.offsetTop-A.offsetTop+this.clientHeight-R>A.scrollTop+A.clientHeight,B=this.offsetLeft-A.offsetLeft<A.scrollLeft,F=this.offsetLeft-A.offsetLeft+this.clientWidth-D>A.scrollLeft+A.clientWidth,W=N&&!U;(N||U)&&x&&(A.scrollTop=this.offsetTop-A.offsetTop-A.clientHeight/2-R+this.clientHeight/2),(B||F)&&x&&(A.scrollLeft=this.offsetLeft-A.offsetLeft-A.clientWidth/2-D+this.clientWidth/2),(N||U||B||F)&&!x&&this.scrollIntoView(W)}),window.addEventListener("resize",function(x){this._checkActions(!0),document.activeElement&&"INPUT"==document.activeElement.tagName&&window.setImmediate((function(){document.activeElement.scrollIntoViewIfNeeded()})),this.dispatchEvent("resize",x)}.bind(this))}_loadThemes(A){return x.Utilities.loadJsonResource(A,null,"loadTheme")}mixProperties(x,A){if("string"==typeof A&&(A=WinJS.UI._optionsParser(A)),"object"==typeof A)for(var V in A)x[V]=A[V]}mixAppSettings(A,V){var R=A;if("string"==typeof V||"number"==typeof V||"boolean"==typeof V||"function"==typeof V)R=V;else if("object"==typeof V)if("object"!=typeof R||"{}"==JSON.stringify(R))R=V;else for(var D in V)R[D]?R[D]=this.mixAppSettings(R[D],V[D]):R[D]=V[D];else x.Application.WarnLog.log("VisiWin.Appservices.AppService: mixAppSettings unknown type for mixing: "+typeof V+". ");return R}getAppSettings(A){var V=A.split(".");A.length;return A="UI"==V[0]||"Client"==V[0]||"Server"==V[0]||"System"==V[0]?"VisiWin.Application.Settings."+A:"Settings"==V[0]?"VisiWin.Application."+A:"Application"==V[0]?"VisiWin."+A:"VisiWin.Application.Settings."+A,x.Utilities.getObjectFromName(A,window)}getPathSetting(x){var A=this.getAppSettings(x);return this.getPathString(A)}getPathString(x){return x&&"/"===x[0]?x.substr(1):x}getMediaOptions(A,V){var R=null;return A&&(R={},x.Resources.styles.controls[A]&&x.Resources.styles.controls[A].media&&x.Resources.styles.controls[A].media[V]&&this.mixProperties(R,x.Resources.styles.controls[A].media[V])),R}getDefaultOptions(A,V){var R=null;return A&&(R={},x.Resources.styles.controls[A]&&x.Resources.styles.controls[A].options?this.mixProperties(R,x.Resources.styles.controls[A].options):x.Resources.styles.controls[V]&&x.Resources.styles.controls[V].options&&this.mixProperties(R,x.Resources.styles.controls[V].options)),R}getThemeOptions(A){var V={};return A&&x.Resources.styles.controls[A]&&x.Resources.styles.controls[A].colors&&this.mixProperties(V,x.Resources.styles.controls[A].colors),V}getSVGBinding(A){return x.Resources.svgBindings[A]?x.Resources.svgBindings[A]:null}getState(A){return x.Resources.states[A]?x.Resources.states[A]:null}getTouchkeyboard(A){return x.Resources.touchkeyboard[A]?x.Resources.touchkeyboard[A]:null}getTheme(A){return x.Resources.themes[A]?x.Resources.themes[A]:null}changeTheme(A){var V=this,R=[];if("number"==typeof A&&x.Application.Settings.UI.Themes){if(!(x.Application.Settings.UI.Themes.length>A))return void x.Application.ErrorLog.log("VisiWin.Appservices.AppService: changeTheme can't set new theme:"+A+".");A=x.Application.Settings.UI.Themes[A]}return this.mappingData.aktTheme=A.substring(0,A.indexOf(".")),this.aktTheme=A.substring(0,A.indexOf(".")),x.Application.aktTheme=A.substring(0,A.indexOf(".")),this.mappingData.aktThemeUrl=this.setting_DirThemes+"/"+A,R.push(this._loadThemes(this.mappingData.aktThemeUrl)),localStorage[x.Application.storageName+"RunTimeTheme"]=A,new Promise((function(A,D){WinJS.Promise.join(R).then((function(R){var D,N={};N.sender=V,N.aktThemeUrl=null!==(D=V.aktThemeUrl)&&void 0!==D?D:V.mappingData.aktThemeUrl,N.senderName="themeChanged",V.dispatchEvent("themeChanged",N),N=null,x.Application.Time.printTime("AppService","loaded"),A(null)}),(function(R){var D,N={};N.sender=V,N.aktThemeUrl=null!==(D=V.aktThemeUrl)&&void 0!==D?D:V.mappingData.aktThemeUrl,N.senderName="themeChanged",V.dispatchEvent("themeChanged",N),N=null,x.Application.Time.printTime("AppService","loaded error"),A(null)}))}))}removeWidthAction(x,A,V){var R;switch(x){case"trigger":R="trg"+A;case"<":R="wle"+A;break;case"<=":R="wlq"+A;break;case">":R="wgt"+A;break;case">=":R="wgq"+A;break;default:return!1}if(V&&this.actions[R]&&this.actions[R].event){for(var D=0;D<this.actions[R].event.length;D++)if(this.actions[R].event[D]==V)return this.actions[R].event[D]=null,!0;return!1}return!!this.actions[R]&&(delete this.actions[R],!0)}addWidthAction(x,A,V){var R=null;if("trigger"===x&&(R="trg"+A,this.actions[R]={},this.actions[R].event=[],this.actions[R].event.push(V)),"number"!=typeof A)return!1;if("function"!=typeof V)return!1;switch(x){case"<":R="wle"+A.toString();break;case"<=":R="wlq"+A.toString();break;case">":R="wgt"+A.toString();break;case">=":R="wgq"+A.toString();break;default:return!1}this.actions[R]={},this.actions[R].state=null,this.actions[R].event=[],this.actions[R].event.push(V),this._checkActions(!1)}_checkActions(x){this.mappingData.client.width=document.documentElement.clientWidth,this.mappingData.client.height=document.documentElement.clientHeight,this.mappingData.client.sizeRatio=this.mappingData.client.width/this.mappingData.client.height;var A=0,V=!1;for(var R in this.actions){switch(A=parseInt(R.substring(3)),R.substring(0,3)){case"trg":if(x&&this.actions[R].event.length>0)for(var D=0;D<this.actions[R].event.length;D++)"function"==typeof this.actions[R].event[D]&&this.actions[R].event[D]();continue;case"wle":V=this.mappingData.client.width<A;break;case"wlq":V=this.mappingData.client.width<=A;break;case"wgt":V=this.mappingData.client.width>A;break;case"wgq":V=this.mappingData.client.width>=A;break;default:continue}if(this.actions[R].state!=V&&(this.actions[R].state=V,V&&this.actions[R].event.length>0))for(D=0;D<this.actions[R].event.length;D++)"function"==typeof this.actions[R].event[D]&&this.actions[R].event[D]()}}_setBrowserDepend(){if(document&&"Chrome"!==this.browser&&"Safari"!==this.browser){var x=document.body;x&&x.style&&(x.style.position="absolute",x.style.top="0",x.style.left="0")}}_checkBrowser(){if(this.userAgent=navigator.userAgent.toLowerCase(),this.browser="",this.browserVersion="",this.browserOs="",this.mappingData.isBrowserEdge=!1,this.mappingData.isBrowserIE=!1,this.mappingData.isBrowserChrome=!1,this.mappingData.isBrowserFirefox=!1,this.mappingData.isBrowserOpera=!1,this.mappingData.isDesktop=!1,this.mappingData.isTV=!1,this.mappingData.isMobil=!1,this.mappingData.isPhone=!1,this.mappingData.isTablet=!1,this.mappingData.isOsAndroid=!1,this.mappingData.isOsWindows=!1,this.mappingData.isOsLinux=!1,this.mappingData.isOsiOS=!1,this.userAgent.match(/Edge\/\d./i))this.browser="Edge",this.browserOs="Windows",this.mappingData.isBrowserEdge=!0,this.userAgent.match(/Edge\/12./i)?this.browserVersion="12":this.userAgent.match(/Edge\/13./i)?this.browserVersion="13":this.userAgent.match(/Edge\/14./i)?this.browserVersion="14":this.browserVersion="xx";else if(this.userAgent.match(/trident\/7.0/))this.browser="MSIE",this.browserOs="Windows",this.mappingData.isBrowserIE=!0,this.userAgent.match(/msie 10.0/i)?this.browserVersion="10":(this.userAgent.match(/rv:11.0/)||this.userAgent.match(/rv 11.0/))&&(this.browserVersion="11");else if(this.userAgent.search(/msie/)>-1)this.browser="MSIE",this.browserOs="Windows",this.browserVersion="<10";else if(this.userAgent.match(/Windows Phone/i)||this.browser.match(/ZuneWP7/))this.browser="MSIE",this.browserOs="WindowsMobil",this.browserVersion="",this.mappingData.isMobil=!0,this.mappingData.isPhone=!0;else if(this.userAgent.search(/chrome/)>-1){this.browser="Chrome";var x=this.userAgent.split(" ");this.browserVersion=x[x.length-2].substr(7)}else this.userAgent.search(/firefox/)>-1?(this.browser="Firefox",this.browserVersion=""):this.userAgent.search(/opera/)>-1?(this.browser="Opera",this.browserVersion="",this.userAgent.search(/opera mini/)>-1&&(this.mappingData.isPhone=!0,this.mappingData.isMobil=!0)):this.userAgent.search(/netscape/)>-1?(this.browser="Netscape",this.browserVersion=""):this.userAgent.search(/safari/)>-1?(this.browser="Safari",this.browserVersion="",this.userAgent.search(/(iphone|ipod)/)>-1?(this.browserOs="iOS",this.mappingData.isOsiOS=!0,this.mappingData.isBrowserSafari=!0,this.mappingData.isMobil=!0,this.mappingData.isPhone=!0):this.userAgent.search(/(ipad)/)>-1&&(this.browserOs="iOS",this.mappingData.isOsiOS=!0,this.mappingData.isBrowserSafari=!0,this.mappingData.isMobil=!0,this.mappingData.isTablet=!0)):this.browser="Alternativ";this.userAgent.search(/(android)/)>-1&&(this.browserOs="Android",this.mappingData.isOsAndroid=!0,this.userAgent.search(/(mobile)/)>-1?(this.mappingData.isPhone=!0,this.mappingData.isMobil=!0):this.userAgent.search(/(large screen)|googletv/)>-1?(this.mappingData.isTV=!0,this.mappingData.isTablet=!1,this.mappingData.isPhone=!1,this.mappingData.isMobil=!1):(this.mappingData.isTablet=!0,this.mappingData.isMobil=!0))}get isInDesignMode(){const A=x.Utilities.isInDesignMode();return this.isInDesignMode=!0===A,this._isInDesignMode}set isInDesignMode(x){this._isInDesignMode=x}}AppService.namespace="VisiWin.AppServices.Impl",AppService.serviceName="AppService",AppService.requireServices=["MessageService"],A.AppService=AppService}(A.Impl||(A.Impl={}))}(x.AppServices||(x.AppServices={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){"use strict";let V=!1;A.registerAppService=function(A){!x.AppServices[A]&&x.AppServices.Impl[A]?x.AppServices.ServiceManager.addService(A,x.AppServices.Impl[A])?x.Application.Settings.System.DebugLogLevel<3&&x.Application.InfoLog.log("VisiWin.AppServices.Impl.registerAppService: System Service '"+A+"' gestartet."):x.Application.WarnLog.log("VisiWin.AppServices.Impl.registerAppService: System Service '"+A+"' bereits vorhanden."):x.AppServices[A]?x.Application.WarnLog.log("VisiWin.AppServices.Impl.registerAppService: System Service '"+A+"' bereits vorhanden."):x.Application.WarnLog.log("VisiWin.AppServices.Impl.registerAppService: System Service '"+A+"' nicht implementiert.")},A.initAppServices=function(){const A=x.Internal.System.Diagnostics.performanceMark("AppServices");if(x.Internal.Application.ApplicationManager.getApplication().SessionManager.CreateSession(),V)return null;let R=null;x.Utilities.preServiceImport(),V=!0,R=x.Utilities.isInDesignMode()?x.Application.Settings.UI.AppServices_DesignMode:x.Application.Settings.UI.AppServices_RunMode;for(let A=0;R&&A<R.length;A++){const V=R[A];V.path?x.Utilities.loadScript(V.path).then((function(A){x.AppServices.Impl[V.name]?x.AppServices.ServiceManager.addService(V.name,x.AppServices.Impl[V.name])?x.Application.Settings.System.DebugLogLevel<3&&x.Application.InfoLog.log("VisiWin.AppServices.ServiceManager: Service '"+V.name+"' gestartet."):x.Application.WarnLog.log("VisiWin.AppServices.ServiceManager: Service '"+V.name+"' bereits vorhanden."):x.Application.WarnLog.log("VisiWin.AppServices.ServiceManager: Service Class '"+V.name+"' nicht vorhanden.")}),(function(A){x.Application.WarnLog.log("VisiWin.AppServices.ServiceManager: Service Script '"+V.path+"' konnte nicht gleaden werden.")})):!x.AppServices[V.name]&&x.AppServices.Impl[V.name]?x.AppServices.ServiceManager.addService(V.name,x.AppServices.Impl[V.name])?x.Application.Settings.System.DebugLogLevel<3&&x.Application.InfoLog.log("VisiWin.AppServices.ServiceManager: System Service '"+V.name+"' gestartet."):x.Application.WarnLog.log("VisiWin.AppServices.ServiceManager: System Service '"+V.name+"' bereits vorhanden."):x.AppServices[V.name]?x.Application.WarnLog.log("VisiWin.AppServices.ServiceManager: System Service '"+V.name+"' bereits vorhanden."):x.Application.WarnLog.log("VisiWin.AppServices.ServiceManager: System Service '"+V.name+"' nicht implementiert.")}try{const V=WinJS.Promise.join(x.AppServices.ServiceManager.servicePromises);return x.Utilities.postServiceImport(),A.endMark(),V}catch(V){return x.Utilities.postServiceImport(),A.endMark(),null}}}(A.Impl||(A.Impl={}))}(x.AppServices||(x.AppServices={}))}(VisiWin||(VisiWin={})),function(x){x.AppServices||(x.AppServices={})}(VisiWin||(VisiWin={})),VisiWin||(VisiWin={}),VisiWin||(VisiWin={});var __awaiter=this&&this.__awaiter||function(x,A,V,R){return new(V||(V=Promise))((function(D,N){function fulfilled(x){try{step(R.next(x))}catch(x){N(x)}}function rejected(x){try{step(R.throw(x))}catch(x){N(x)}}function step(x){x.done?D(x.value):function adopt(x){return x instanceof V?x:new V((function(A){A(x)}))}(x.value).then(fulfilled,rejected)}step((R=R.apply(x,A||[])).next())}))},VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,Converters,Converters,Converters,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin;!function(x){!function(A){!function(A){"use strict";class DataService extends x.AppServices.Impl.ServiceBase{constructor(){super(),this.observable={},this.dataSources={},this.converters={},this.bindings={},this.Observables={},this.DataSources={},this.AlertDialog=null,this.AlertDialogDescription=null,this.AlertDialogObservableDescription=null,this.Timer=null,this.TimerDescription=null,this.TimerObservableDescription=null,this.dataServiceStore=new x.AppServices.Impl.DataServiceStore(this),x.Observables||(x.Observables={}),x.DataSources||(x.DataSources={}),this._initObservables()}getBinding(A){if(x.Observables[A])return x.Observables[A];if(this.dataServiceStore&&this.dataServiceStore.observables&&this.dataServiceStore.observables.Contains(A)){return this.dataServiceStore.observables.GetFromKey(A).observable}return null}getDataSource(A){if(x.DataSources[A])return x.DataSources[A];if(this.dataServiceStore&&this.dataServiceStore.dataSources&&this.dataServiceStore.dataSources.Contains(A)){return this.dataServiceStore.dataSources.GetFromKey(A).observable}return null}registerDesignTimeObservable(A,V,R){if(x.Utilities.isInDesignMode()){this.observable[A]={name:A,type:"Object",desc:V,description:R},this.observable[A].desc.name=A;for(const x in this.observable[A].description)this.observable[A].description[x].name=x}}registerDesignTimeDataSource(A,V,R){x.Utilities.isInDesignMode()&&(this.observable[A]={name:A,type:"Array",desc:V,description:R})}init(){x.AppServices.Impl.registerAlertDialogDesignerObservable(this),x.AppServices.Impl.registerTimerDesignObservable(this)}ready(){x.AppServices.Impl.DataServiceHelper._loadAppSettingsConverters(),Converters.initialized()}unload(){}dispose(){return super.dispose()}getObservables(){return x.AppServices.Impl.DataServiceHelper._getObservables(this.observable)}getObservablesDescription(){return x.AppServices.Impl.DataServiceHelper._getObservablesDescription(this.observable)}getObservableDescriptionByName(A){return x.AppServices.Impl.DataServiceHelper._getObservableDescriptionByName(A,this.observable)}getDataSources(){return x.AppServices.Impl.DataServiceHelper._getDataSources(this.dataSources)}getDataSourcesDescription(){return x.AppServices.Impl.DataServiceHelper._getDataSourcesDescription(this.dataSources)}getDataSourceDescriptionByName(A){return x.AppServices.Impl.DataServiceHelper._getDataSourceDescriptionByName(A,this.dataSources)}getConverters(){return x.AppServices.Impl.DataServiceHelper._getConverters(this.converters)}registerDesignTimeConverter(A,V){return x.AppServices.Impl.DataServiceHelper._registerDesignTimeConverter(A,V,this.converters)}getConverterByName(A){return x.AppServices.Impl.DataServiceHelper._getConverterByName(A,this.converters)}setData(x,A){}clearTriggerData(){x.AppServices.ActionService.clearTriggerData()}clearTriggerDataStartsWidth(A){x.AppServices.ActionService.clearTriggerDataStartsWidth(A)}setTriggerData(A,V){x.AppServices.ActionService.setTriggerData(A,V)}getTriggerData(A){return x.AppServices.ActionService.getTriggerData(A)}getData(A,V,R){return __awaiter(this,void 0,void 0,(function*(){return x.AppServices.ActionService.getData(A,V,R)}))}_initObservables(){this.AlertDialogDescription={category:"AlertDialog",displayName:"AlertDialog"},this.AlertDialogObservableDescription={style:{propertyType:"member",displayName:"Style",type:"string",access:"rw"},titleText:{propertyType:"member",displayName:"TitleText",type:"string",access:"rw"},localizableTitleText:{propertyType:"member",displayName:"LocalizableTitleText",type:"string",access:"rw"},contentText:{propertyType:"member",displayName:"ContentText",type:"string",access:"rw"},localizableContentText:{propertyType:"member",displayName:"LocalizableContentText",type:"string",access:"rw"},action1ButtonText:{propertyType:"member",displayName:"Action1ButtonText",type:"string",access:"rw"},localizableAction1ButtonText:{propertyType:"member",displayName:"LocalizableAction1ButtonText",type:"string",access:"rw"},action2ButtonText:{propertyType:"member",displayName:"Action2ButtonText",type:"string",access:"rw"},localizableAction2ButtonText:{propertyType:"member",displayName:"LocalizableAction2ButtonText",type:"string",access:"rw"},showAction1Button:{propertyType:"member",displayName:"ShowAction1Button",type:"boolean",access:"rw"},showAction2Button:{propertyType:"member",displayName:"ShowAction2Button",type:"boolean",access:"rw"}},this.AlertDialog={},this.AlertDialog.style="",this.AlertDialog.titleText="",this.AlertDialog.localizableTitleText="",this.AlertDialog.contentText="",this.AlertDialog.localizableContentText="",this.AlertDialog.action1ButtonText="",this.AlertDialog.localizableAction1ButtonText="",this.AlertDialog.action2ButtonText="",this.AlertDialog.localizableAction2ButtonText="",this.AlertDialog.showAction1Button=!0,this.AlertDialog.showAction2Button=!0,x.Utilities.isInDesignMode()||(this.AlertDialog=x.Binding.as(this.AlertDialog),x.Observables.AlertDialog=this.AlertDialog),this.registerDesignTimeObservable("AlertDialog",this.AlertDialogDescription,this.AlertDialogObservableDescription)}getBindings(){return x.AppServices.Impl.DataServiceHelper._getBindings(this.bindings)}registerBinding(x,A){x&&A&&(A.name=x,this.bindings[x]=A)}getBindingsByName(x){return this.bindings[x]?this.bindings[x]:null}getDescription(x){return this.observable[x].description}_getVariable(x){return __awaiter(this,void 0,void 0,(function*(){try{const A=yield this.__getVariable(x);return Promise.resolve(A)}catch(x){return null}}))}__getVariable(A){return __awaiter(this,void 0,void 0,(function*(){return new Promise((V,R)=>{x.AppServices.VariableService.getValueAsync(A).then(x=>{V(x)},x=>{R(x)})})}))}_getThemeData(x,A){return x}_getMappingData(A,V,R,D){let N=A.substr(1);if(D&&(N=D+N),null!=V){const A=N.indexOf(".");if(!(A>=0))return V[N];{const R=N.substr(0,N.indexOf("."));if(null!=V&&V[R]){const D=V[R],U=N.substr(A+1);return x.Utilities.getObjectFromName(U,D)}}}return null===R||void 0!==R?R:A}insertSampleData(){}}DataService.namespace="VisiWin.DataServices.Impl",DataService.serviceName="DataService",DataService.requireServices=[],A.DataService=DataService}(A.Impl||(A.Impl={}))}(x.AppServices||(x.AppServices={}))}(VisiWin||(VisiWin={})),function(VisiWin){var Utilities;!function(Utilities){"use strict";const settingDirServicesDefault=Utilities.getPathString("services"),settingDirControlsDefault=Utilities.getPathString("controls"),settingDirCustomControlsDefault=Utilities.getPathString("customControls"),settingDirUserControlsDefault=Utilities.getPathString("userControls"),settingDirProviderDefault=Utilities.getPathString("provider"),settingDirActionsDefault=Utilities.getPathString("actions"),settingDirClassesDefault=Utilities.getPathString("classes");let settingDirServices=null,settingDirControls=null,settingDirCustomControls=null,settingDirUserControls=null,settingDirProvider=null,settingDirActions=null,settingDirClasses=null;function preServiceImport(){this.loadPromise=[],Utilities.getPathSetting("UI.DirectoryNames.Services")?settingDirServices=Utilities.getPathSetting("UI.DirectoryNames.Services"):(settingDirServices=settingDirServicesDefault,VisiWin.Application.InfoLog.log("VisiWin.AppServices.PostService: setting value [DirectoryNames.Service] not set. Use default Directory: "+settingDirServicesDefault+"."));const x=VisiWin.Application.Settings.UI.Services;if(x)if(VisiWin.isArray(x))for(let A=0;A<x.length;A++)"/"===x[A].substr(0,1)?this.loadPromise.push(this.loadJsTag(x[A])):this.loadPromise.push(this.loadJsTag(settingDirServices+"/"+x[A]));else"/"===x.substr(0,1)?this.loadPromise.push(this.loadJsTag(x)):this.loadPromise.push(this.loadJsTag(settingDirServices+"/"+x));this.p=WinJS.Promise.join(this.loadPromise).then((function(x){}),(function(x){}))}function postServiceImport(){this.loadPromise=[],Utilities.getPathSetting("UI.DirectoryNames.Controls")?settingDirControls=Utilities.getPathSetting("UI.DirectoryNames.Controls"):(settingDirControls=settingDirControlsDefault,VisiWin.Application.InfoLog.log("VisiWin.AppServices.PostService: setting value [DirectoryNames.Controls] not set. Use default Directory: "+settingDirControlsDefault+"."));const x=VisiWin.Application.Settings.UI.Controls;if(x)if(VisiWin.isArray(x))for(let A=0;A<x.length;A++)"/"===x[A].substr(0,1)?this.loadPromise.push(VisiWin.Utilities.loadJSCssTag(x[A])):this.loadPromise.push(VisiWin.Utilities.loadJSCssTag(settingDirControls+"/"+x[A]));else"/"===x.substr(0,1)?this.loadPromise.push(VisiWin.Utilities.loadJSCssTag(x)):this.loadPromise.push(VisiWin.Utilities.loadJSCssTag(settingDirControls+"/"+x));Utilities.getPathSetting("UI.DirectoryNames.CustomControls")?settingDirCustomControls=Utilities.getPathSetting("UI.DirectoryNames.CustomControls"):(settingDirCustomControls=settingDirCustomControlsDefault,VisiWin.Application.InfoLog.log("VisiWin.AppServices.PostService: setting value [DirectoryNames.CustomControls] not set. Use default Directory: "+settingDirCustomControlsDefault+"."));const A=VisiWin.Application.Settings.UI.CustomControls;if(A)if(VisiWin.isArray(A))for(let x=0;x<A.length;x++)"/"===A[x].substr(0,1)?this.loadPromise.push(VisiWin.Utilities.loadJSCssTag(A[x])):this.loadPromise.push(VisiWin.Utilities.loadJSCssTag(settingDirCustomControls+"/"+A[x]));else"/"===A.substr(0,1)?this.loadPromise.push(VisiWin.Utilities.loadJSCssTag(A)):this.loadPromise.push(VisiWin.Utilities.loadJSCssTag(settingDirCustomControls+"/"+A));Utilities.getPathSetting("UI.DirectoryNames.UserControls")?settingDirUserControls=Utilities.getPathSetting("UI.DirectoryNames.UserControls"):(settingDirUserControls=settingDirUserControlsDefault,VisiWin.Application.InfoLog.log("VisiWin.AppServices.PostService: setting value [DirectoryNames.UserControls] not set. Use default Directory: "+settingDirUserControlsDefault+"."));const V=VisiWin.Application.Settings.UI.UserControls;if(V)if(VisiWin.isArray(V))for(let x=0;x<V.length;x++)"/"===V[x].substr(0,1)?this.loadPromise.push(VisiWin.Utilities.loadJSCssTag(V[x])):this.loadPromise.push(VisiWin.Utilities.loadJSCssTag(settingDirUserControls+"/"+V[x]));else"/"===V.substr(0,1)?this.loadPromise.push(VisiWin.Utilities.loadJSCssTag(V)):this.loadPromise.push(VisiWin.Utilities.loadJSCssTag(settingDirUserControls+"/"+V));Utilities.getPathSetting("UI.DirectoryNames.Provider")?settingDirProvider=Utilities.getPathSetting("UI.DirectoryNames.Provider"):(settingDirProvider=settingDirProviderDefault,VisiWin.Application.InfoLog.log("VisiWin.AppServices.PostService: setting value [DirectoryNames.Provider] not set. Use default Directory: "+settingDirProviderDefault+"."));const R=VisiWin.Application.Settings.UI.Providers;if(R)if(VisiWin.isArray(R))for(let x=0;x<R.length;x++)"/"===R[x].substr(0,1)?this.loadPromise.push(VisiWin.Utilities.loadJSCssTag(R[x])):this.loadPromise.push(VisiWin.Utilities.loadJSCssTag(settingDirProvider+"/"+R[x]));else"/"===R.substr(0,1)?this.loadPromise.push(VisiWin.Utilities.loadJSCssTag(R)):this.loadPromise.push(VisiWin.Utilities.loadJSCssTag(settingDirProvider+"/"+R));Utilities.getPathSetting("UI.DirectoryNames.Actions")?settingDirActions=Utilities.getPathSetting("UI.DirectoryNames.Actions"):(settingDirActions=settingDirActionsDefault,VisiWin.Application.InfoLog.log("VisiWin.AppServices.PostService: setting value [DirectoryNames.Actions] not set. Use default Directory: "+settingDirActionsDefault+"."));const D=VisiWin.Application.Settings.UI.Actions;if(D)if(VisiWin.isArray(D))for(let x=0;x<D.length;x++)"/"===D[x].substr(0,1)?this.loadPromise.push(VisiWin.Utilities.loadJSCssTag(D[x])):this.loadPromise.push(VisiWin.Utilities.loadJSCssTag(settingDirActions+"/"+D[x]));else"/"===D.substr(0,1)?this.loadPromise.push(VisiWin.Utilities.loadJSCssTag(D)):this.loadPromise.push(VisiWin.Utilities.loadJSCssTag(settingDirActions+"/"+D));Utilities.getPathSetting("UI.DirectoryNames.Classes")?settingDirClasses=Utilities.getPathSetting("UI.DirectoryNames.Classes"):(settingDirClasses=settingDirClassesDefault,VisiWin.Application.InfoLog.log("VisiWin.AppServices.PostService: setting value [DirectoryNames.Classes] not set. Use default Directory: "+settingDirClassesDefault+"."));const N=VisiWin.Application.Settings.UI.Classes;if(N)if(VisiWin.isArray(N))for(let x=0;x<N.length;x++)"/"===N[x].substr(0,1)?this.loadPromise.push(VisiWin.Utilities.loadJSCssTag(N[x])):this.loadPromise.push(VisiWin.Utilities.loadJSCssTag(settingDirClasses+"/"+N[x]));else"/"===N.substr(0,1)?this.loadPromise.push(VisiWin.Utilities.loadJSCssTag(N)):this.loadPromise.push(VisiWin.Utilities.loadJSCssTag(settingDirClasses+"/"+N));this.p=WinJS.Promise.join(this.loadPromise).then((function(x){}),(function(x){}))}function copyPropertyArray(x,A,V,R){if(void 0===x[A])x[A]=V[R];else if("object"==typeof V[R]){"object"!=typeof x[A]&&(x={});for(const D in V[R])copyPropertyObj(x[A],V[R],D)}else if(Array.isArray(V[R])){let D=0;Array.isArray(x[A])?D=x[A].length:x[A]=[];for(let N=0;N<V.length;N++)copyPropertyArray(x[A],D++,V[R],N++)}else"number"==typeof V[R]||"string"==typeof V[R]||"boolean"==typeof V[R]?x[A]=V[R]:VisiWin.Application.ErrorLog.log("VisiWin.Utilities.copyPropertyArray: unhandeld case -> typeof source:"+typeof V[R]+"  typeof target:"+typeof x[A])}function copyPropertyObj(x,A,V){if(void 0===x[V])x[V]=A[V];else if("object"==typeof A[V]){"object"!=typeof x[V]&&(x={});for(const R in A[V])copyPropertyObj(x[V],A[V],R)}else if(Array.isArray(A[V])){let R=0;Array.isArray(x[V])?R=x[V].length:x[V]=[];for(let D=0;D<A.length;D++)copyPropertyArray(x[V],R++,A[V],D++)}else"number"==typeof A[V]||"string"==typeof A[V]||"boolean"==typeof A[V]?x[V]=A[V]:VisiWin.Application.ErrorLog.log("VisiWin.Utilities.copyPropertyObj: unhandeld case -> typeof source:"+typeof A[V]+"  typeof target:"+typeof x[V])}function getFileName(x){let A=null;return x.target.href?A=x.target.href:x.target.src?A=x.target.src:x.srcElement.href?A=x.srcElement.href:x.srcElement.src&&(A=x.srcElement.src),A}function translateTheme(x,A,V){const R=x,D=A,N=V;for(const x in R)"string"==typeof R[x]&&"colors"!=x||"string"==typeof R[x]&&"colors"==x?D[x]=R[x]:"object"==typeof R[x]&&(D[x]||(D[x]={}),VisiWin.Utilities.translateTheme(R[x],D[x],N+"."+x))}function translateLoc(source,dest,infoString){const _source=source,_dest=dest,_infoString=infoString;for(const c in _source)if("string"==typeof _source[c]){let source=_source[c];if(source.indexOf('"')>0&&source.indexOf(",")>0)try{source=JSON.parse(source)}catch(ex){eval("source = "+source)}else{const x=source;source={},source[c]=x}for(const x in source){const A=source[x];0==x.indexOf("localizable")&&(VisiWin.Resources.strings&&VisiWin.Resources.strings[VisiWin.AppServices.LanguageService.currentLanguage]&&VisiWin.Resources.strings[VisiWin.AppServices.LanguageService.currentLanguage][A]?_dest[x.substr(11)]=VisiWin.Resources.strings[VisiWin.AppServices.LanguageService.currentLanguage][A]:(VisiWin.Application.ErrorLog.log("VisiWin.Utilities.translateLoc: "+_infoString+": unknown textIndex:"+A),_dest[x.substr(11)]="@"+[A]))}}else"object"==typeof _source[c]&&(_dest[c]||(_dest[c]={}),VisiWin.Utilities.translateLoc(_source[c],_dest[c],_infoString+"."+c))}function loadJsonResource(x,A,V){const R=VisiWin.Resources,D=x,N=V;return new Promise((function(x,A){if(R.jsonUrlList[D]){for(let x=0;x<R.jsonUrlList[D+"Type"].length;x++)switch(R.jsonUrlList[D+"Type"][x]){case"themes":VisiWin.Utilities.translateTheme(R.styles.controlsSource,R.styles.controls,N),VisiWin.Utilities.translateTheme(R.styles.stateinfoSource,R.styles.stateinfo,N)}x(null)}else VisiWin.Utilities.xhr({url:D,data:{}}).then((function completed(A){if(200===A.status){let V=null;try{V=JSON.parse(A.responseText)}catch(x){VisiWin.Application.ErrorLog.log("VisiWin.Utilities.loadJsonResource: "+N+" ParseError in resource file: "+D+".")}R.jsonUrlList[D]=D,R.jsonUrlList[D+"Type"]=[];for(const x in V)if("styles"===x){R.jsonUrlList[D+"Type"].push("styles");for(const A in V[x])if("controls"===A){for(const D in V[x][A])copyPropertyObj(R[x][A+"Source"],V[x][A],D);VisiWin.Utilities.translateTheme(R.styles[A+"Source"],R.styles[A],N)}else if("stateinfo"===A){for(const D in V[x][A])copyPropertyObj(R[x][A+"Source"],V[x][A],D);VisiWin.Utilities.translateTheme(R.styles[A+"Source"],R.styles[A],N),VisiWin.Utilities.translateLoc(R.styles[A+"Source"],R.styles[A],N)}else VisiWin.Application.ErrorLog.log("VisiWin.Utilities.loadJsonResource: unknown styles object "+N+': unknown "styles" item:'+x+" in resource File:"+D+".")}else if("themes"===x){R.jsonUrlList[D+"Type"].push("themes");for(const A in V[x]){R[x][A]||(R[x][A]={});for(const D in V[x][A])copyPropertyObj(R[x][A],V[x][A],D)}VisiWin.Utilities.translateTheme(R.styles.controlsSource,R.styles.controls,N),VisiWin.Utilities.translateTheme(R.styles.stateinfoSource,R.styles.stateinfo,N)}else if("strings"===x){R.jsonUrlList[D+"Type"].push("strings");for(const A in V[x]){R[x][A]||(R[x][A]={});for(const D in V[x][A])copyPropertyObj(R[x][A],V[x][A],D)}}else if("media"===x)for(const A in V[x])R[x][A]={},R[x][A].name=A,R[x][A].rule=V[x][A];else if("cultureInfo"==x)for(const A in V[x])copyPropertyObj(R[x],V[x],A);else if("samples"===x||"states"===x||"svgBindings"===x||"touchkeyboard"===x)for(const A in V[x])copyPropertyObj(R[x],V[x],A);else if("stateCollections"===x)for(const A in V[x])copyPropertyObj(R[x],V[x],A);else VisiWin.Application.ErrorLog.log("VisiWin.Utilities.loadJsonResource: "+N+" unknown object: "+x+" in resource File:"+D+".");VisiWin.Application.Time.printTime("CurrentAlarmService","loaded"),x(null)}else VisiWin.Application.ErrorLog.log("VisiWin.Utilities.loadJsonResource "+N+": result error, can't read resource file: "+D+". Result status: "+A.status),x(null)}),(function error(A){VisiWin.Application.ErrorLog.log("VisiWin.Utilities.loadJsonResource: "+N+": error can't read resource file: "+D+". Request status: "+A.status),x(null)}))}))}function loadJsResource(x,A,V){const R=VisiWin.Resources,D=x,N=V;return new Promise((function(x,A){R.jsonUrlList[D]?x(null):VisiWin.Utilities.jsXhr({url:D,data:{}}).then((function complete(A){R.jsonUrlList[D]=D,R.jsonUrlList[D+"Type"]=[],x(null)}),(function error(A){VisiWin.Application.ErrorLog.log("VisiWin.Utilities.loadJsResource "+N+": result error, can't read resource file: "+D+"."),x(null)}))}))}function loadJSCssTag(x){const A=x.lastIndexOf(".");switch(x.substr(A+1)){case"js":return VisiWin.Utilities.loadJsTag(x);case"css":return VisiWin.Utilities.loadCssTag(x);default:return VisiWin.Application.ErrorLog.log("VisiWin.Utilities.loadJsCssResource: result error, can't read resource file: "+x+"."),null}}function loadCssTag(x){const A=document.createElement("link");return A.type="text/css",A.rel="stylesheet",A.href=x,A.media="all",A.async=!0,A.onload=function(x){const A=getFileName(x);VisiWin.Application.InfoLog.log("VisiWin.Utilities.loadCssTag: Import File: "+A+" loaded.")},A.onerror=function(x){const A=getFileName(x);VisiWin.Application.InfoLog.log("VisiWin.Utilities.loadCssTag: Import File: "+A+" can not loaded.")},document.getElementsByTagName("head")[0].appendChild(A),A}function loadJsTag(x){const A=document.createElement("script");return A.setAttribute("type","text/javascript"),A.setAttribute("src",x),A.async=!0,A.async=!0,A.onload=function(x){const A=getFileName(x);VisiWin.Application.InfoLog.log("VisiWin.Utilities.loadJsTag: Import File: "+A+" loaded.")},A.onerror=function(x){const A=getFileName(x);VisiWin.Application.InfoLog.log("VisiWin.Utilities.loadJsTag: Import File: "+A+" can not loaded.")},document.getElementsByTagName("head")[0].appendChild(A),A}function schedule(x,A,V){VisiWin.Utilities.Scheduler.schedule((function xhr_callback(){x(A)}),V,null,"VisiWin.Utilities.xhr")}function noop(){}function jsXhr(x){return new Promise((function(A,V){const R=VisiWin.Utilities.Scheduler.currentPriority;function onLoad(x,D){let N=null;x.target.href?N=x.target.href:x.target.src?N=x.target.src:x.srcElement.href?N=x.srcElement.href:x.srcElement.src?N=x.srcElement.src:VisiWin.Application.ErrorLog.log("VisiWin.Utilities.jsXhr.onLoad: Import File: no property for filename found in onLoad or onError Event.");N.substr(N.lastIndexOf("/")+1);D?(VisiWin.Application.ErrorLog.log("VisiWin.Utilities.jsXhr.onLoad: Import File: "+N+" can not loaded."),schedule(V,void 0,R)):(VisiWin.Application.InfoLog.log("VisiWin.Utilities.jsXhr.onLoad: Import File: "+N+" loaded."),schedule(A,void 0,R))}const D=document.createElement("script");D.setAttribute("type","text/javascript"),D.setAttribute("src",x.url),D.async=!0,D.onload=function jsOnLoad(x){onLoad(x,!1)},D.onerror=function jsOnError(x){onLoad(x,!0)},document.getElementsByTagName("head")[0].appendChild(D)}))}Utilities.preServiceImport=preServiceImport,Utilities.postServiceImport=postServiceImport,Utilities.copyPropertyArray=copyPropertyArray,Utilities.copyPropertyObj=copyPropertyObj,Utilities.translateTheme=translateTheme,Utilities.translateLoc=translateLoc,Utilities.loadJsonResource=loadJsonResource,Utilities.loadJsResource=loadJsResource,Utilities.loadJSCssTag=loadJSCssTag,Utilities.loadCssTag=loadCssTag,Utilities.loadJsTag=loadJsTag,Utilities.jsXhr=jsXhr}(Utilities=VisiWin.Utilities||(VisiWin.Utilities={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){"use strict";class ActionService extends x.AppServices.Impl.ServiceBase{constructor(){super(),this.triggerResultList={},this.triggerData={},this.mappingData={},this.createEvent("result")}setData(x,A){const V=this.mappingData;null!=x&&(V[x]=A)}clearTriggerData(){this.triggerData={}}clearTriggerDataStartsWidth(x){const A=this.triggerData;for(const V in A)V.startsWith(x)&&(A[V]=null,delete A[V])}setTriggerData(x,A){const V=this.triggerData;null!=x&&(V[x]=A)}getTriggerData(A){let V=this.triggerData;return A.indexOf(".")>=0?(V=x.Utilities.getObjectFromName(A,V),V):null!=A?V[A]:null}_getMappingData(A,V,R,D){let N=A.substr(1);if(D&&(N=D+N),null!=V){const A=N.indexOf(".");if(!(A>=0))return V[N];{const R=N.substr(0,N.indexOf("."));if(null!=V&&V[R]){const D=V[R],U=N.substr(A+1);return x.Utilities.getObjectFromName(U,D)}}}return null===R||void 0!==R?R:A}getData(A,V,R){return __awaiter(this,void 0,void 0,(function*(){let D=null;if(A)switch("string"==typeof A&&("value"===A.toLowerCase()||x.Internal.stringContains(A.toLowerCase(),"%value")||A.toLowerCase().startsWith("triggerwert (%value)")||A.toLowerCase().startsWith("trigger value (%value)"))&&(A="%value"),A.substr(0,1)){case"$":return x.Application.WarnLog.log("getData by identifier '$' is not supported "+A),Promise.resolve(null);case"%":if(D=this._getMappingData(A,this.triggerData,V,R),!x.isNullOrUndefined(D))return Promise.resolve(D);default:null!=A&&(D=A)}return D||(D=null!=V?V:null),D=yield x.Utilities.parseProperty(D,R),Promise.resolve(D)}))}executeAction(x,A,V,R){return R.sender.setTriggerData("ActionService",R.sender._triggerData,R.localTriggerData),this.triggerResultList[x]?this.triggerResultList[x].executeHandler.call(this.triggerResultList[x].context,V,R):null}init(){}ready(){}unload(){}dispose(){}}ActionService.namespace="VisiWin.Services.Impl",ActionService.serviceName="ActionService",ActionService.requireServices=[],A.ActionService=ActionService}(A.Impl||(A.Impl={}))}(x.AppServices||(x.AppServices={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){"use strict";A.CurrentAlarmViewModel=class CurrentAlarmViewModel{constructor(){this.currentAlarm=null,this.currentAlarmList=null,this.currentAlarmLine=null}};class CurrentAlarmService extends x.AppServices.Impl.ServiceBase{constructor(){super(),this.vm=null,this._alarmService=null,this._currentAlarms=null,this._appService=x.AppServices.AppService,this._langService=x.AppServices.LanguageService,this._currentAlarm={classNames:[],groupNames:[],stateNames:["None","Active","Inactive","ActiveAck","InactiveAck","Cleared","Reactivated"],sumCounter:0,classCounter:{},groupCounter:{},stateCounter:{},oldAlarmState:null},this._sampleData=null,x.Application.Time.addTime("CurrentAlarmService","start"),this._alarmService=x.System.Alarm.AlarmService.getService(),this.vm={},this.vm.currentAlarmList=new WinJS.Binding.List,this.vm.currentAlarmLine=new WinJS.Binding.List;let A=this._appService.getPathString("resources/stateinfos");this._appService.getPathSetting("UI.DirectoryNames.StateInfos")?A=this._appService.getPathSetting("UI.DirectoryNames.StateInfos"):x.Application.ErrorLog.log('VisiWin.UI.CurrentAlarmService: setting value [DirectoryNames.StateInfos] not set. Use default directory: "'+this._appService.getPathString("resources/stateinfos")+'".');const V=x.Application.Settings.UI.StateInfos;for(let R=0;R<V.length;R++){const D=A+"/"+V[R];x.Utilities.loadJsonResource(D,null,V[R])}this._appService.addEventListener("themeChanged",this._changeColorService.bind(this)),this._langService.addEventListener("languageChanged",this._changeLocService.bind(this)),x.Application.Time.addTime("CurrentAlarmService","end"),this.createEvent("stateChanged")}static createRequestId(){return"CurrentAlarmsProvider"+CurrentAlarmService._instanceCounter++}alarmCounterUpdate(A,V){"+"===A?(this.vm.currentAlarm.classCounter[V.Class.Name]++,this.vm.currentAlarm.groupCounter[V.Group.Name]++,this.vm.currentAlarm.sumCounter++):"-"===A&&(this.vm.currentAlarm.classCounter[V.Class.Name]--,this.vm.currentAlarm.groupCounter[V.Group.Name]--,this.vm.currentAlarm.sumCounter--),this.vm.currentAlarm.oldAlarmState&&this.vm.currentAlarm.stateCounter[this.vm.currentAlarm.oldAlarmState]--,this.vm.currentAlarm.stateCounter[x.System.Alarm.AlarmState[V.AlarmState]]++,this.vm.currentAlarm.oldAlarmState=x.System.Alarm.AlarmState[V.AlarmState]}_currentAlarmsChange(A){const V=Object.assign({},A),R=Object.assign({},A.StateInfo),D=Object.assign({},A.Class),N=Object.assign({},A.Group);V.StateInfo=R,V.Class=D,V.Group=N,V.activationTime=V.ActivationTime,V.time=V.ActivationTime.toLocaleTimeString();switch(V.AlarmState){case 0:case 1:V.alarmStateTime=V.ActivationTime;break;case 4:V.alarmStateTime=V.AcknowledgeTime||V.ActivationTime;break;case 2:case 8:V.DeactivationTime>V.AcknowledgeTime?V.alarmStateTime=V.DeactivationTime:V.alarmStateTime=V.AcknowledgeTime;break;case 16:V.alarmStateTime=V.DeactivationTime||V.ActivationTime;break;case 32:default:V.alarmStateTime=V.ActivationTime}let U=!1;if(this.vm.currentAlarmList.length)for(let A=0;A<this.vm.currentAlarmList.length;A++){if(this.vm.currentAlarmList.getItem(A).data.ID===V.ID){if(V.AlarmState===x.System.Alarm.AlarmState.Cleared){const x=this.vm.currentAlarmList.splice(A,1);for(const A in x[0])x[0][A]=null,delete x[0][A];x[0]={},x[0]=null,this.alarmCounterUpdate("-",V)}else this.vm.currentAlarmList.setAt(A,V),this.vm.currentAlarmList.move(A,0),this.alarmCounterUpdate(".",V);U=!0;break}}if(A.AlarmState!==x.System.Alarm.AlarmState.Cleared&&!U){const x=this.vm.currentAlarmList.push(V)-1;this.vm.currentAlarmList.move(x,0),this.alarmCounterUpdate("+",A)}this.vm.currentAlarmList.length?this.vm.currentAlarmLine=this.vm.currentAlarmList._keyMap[this.vm.currentAlarmList._keys[0]].data:this.vm.currentAlarmLine=null,this.dispatchEvent("stateChanged",{source:this})}init(){}_changeColorService(x){}_changeLocService(x){}ready(){if(x.Internal.Application.ApplicationManager.getApplication().getDefaultSession().SrvHnd.Socket.IsOnline){if(this.vm&&this._alarmService){if(this._alarmService.GroupNames){this._currentAlarm.groupNames=this._alarmService.GroupNames;for(let x=0;x<this._currentAlarm.groupNames.length;x++)this._currentAlarm.groupCounter[this._currentAlarm.groupNames[x]]=0}if(this._alarmService.ClassNames){this._currentAlarm.classNames=this._alarmService.ClassNames;for(let x=0;x<this._currentAlarm.classNames.length;x++)this._currentAlarm.classCounter[this._currentAlarm.classNames[x]]=0}for(let x=0;x<this._currentAlarm.stateNames.length;x++)this._currentAlarm.stateCounter[this._currentAlarm.stateNames[x]]=0;this.vm.currentAlarm=x.Binding.as(this._currentAlarm)}CurrentAlarmService.createRequestId();const A=this.createAlarmFilter();this._currentAlarms=this.getCurrentAlarms(A),this._currentAlarms.ChangeAlarm.add(this._currentAlarmsChange.bind(this)),this._currentAlarms.InitAlarm.add(this._currentAlarmsChange.bind(this)),this._currentAlarms.NewAlarm.add(this._currentAlarmsChange.bind(this)),this._currentAlarms.ClearAlarm.add(this._currentAlarmsChange.bind(this))}}_insertSampleData(){if(window.designModeData&&this.vm.currentAlarmList)for(let x=0;x<window.designModeData.length;x++){const A=window.designModeData[x];A.ActivationTime=new Date,A.DeactivationTime=new Date,A.AcknowledgeTime=new Date,this._currentAlarmsChange(window.designModeData[x])}}set sampleData(A){if(x.Utilities.isInDesignMode()&&this._sampleData!=A){let V=null;this._appService.getPathSetting("UI.DirectoryNames.SampleData")?V=this._appService.getPathSetting("UI.DirectoryNames.SampleData"):(x.Application.ErrorLog.log('VisiWin.UI.CurrentAlarmProvider: setting value [DirectoryNames.DesignModeData] not set. Use default directory: "/',+this._appService.getPathString(".vwdesigner/designmodedata")+'".'),V=this._appService.getPathString(".vwdesigner/designmodedata")),A||(A="alarmlistview.json"),this._sampleData=A;const R=this,D=V+"/"+this._sampleData;new Promise((function(A,V){window.designModeDataUrl=D,x.Utilities.xhr({url:D,data:{}}).then((function completed(V){if(200===V.status){try{const A=JSON.parse(V.responseText);if(A&&A.samples&&A.samples.currentAlarmProvider){window.designModeData=A.samples.currentAlarmProvider,R._insertSampleData();let x={};x.sender=this,x.senderName="designModeDataLoaded",R.dispatchEvent("designModeDataLoaded",x),x=null}else x.Application.ErrorLog.log('VisiWin.UI.CurrentAlarmProvider: Parse error in resource file, no "samples" and/or "samples.currentAlarmProvider" object in: '+window.designModeDataUrl+".")}catch(A){x.Application.ErrorLog.log("VisiWin.UI.CurrentAlarmProvider: Parse error in resource file: "+window.designModeDataUrl+".")}A(null)}else{V.status;x.Application.ErrorLog.log("VisiWin.UI.CurrentAlarmProvider: can't read resource file: "+window.designModeDataUrl+". Result status: "+V.status),A(null)}}),(function error(V){x.Application.ErrorLog.log("VisiWin.UI.CurrentAlarmProvider: can't read resource file: "+window.designModeDataUrl+". Request status: "+V.status),A(null)}))}))}}get sampleData(){return this._sampleData}unload(){}dispose(){this._currentAlarms&&(this._currentAlarms.ChangeAlarm.remove(this._currentAlarmsChange.bind(this)),this._currentAlarms.InitAlarm.remove(this._currentAlarmsChange.bind(this)),this._currentAlarms.NewAlarm.remove(this._currentAlarmsChange.bind(this)),this._currentAlarms.ClearAlarm.remove(this._currentAlarmsChange.bind(this)))}acknowledgeAlarm(x){this._alarmService.AcknowledgeAlarm(x)}createAlarmFilter(){return this._alarmService.CreateAlarmFilter()}getCurrentAlarms(x){return this._alarmService.GetCurrentAlarms(x)}acknowledgeAlarmClass(x){this._alarmService.AcknowledgeAlarmClass(x)}acknowledgeAlarmGroup(x){this._alarmService.AcknowledgeAlarmGroup(x)}acknowledgeAllAlarms(){this._alarmService.AcknowledgeAllAlarms()}}CurrentAlarmService.namespace="VisiWin.Services.Impl",CurrentAlarmService.serviceName="CurrentAlarmService",CurrentAlarmService.requireServices=["AppService","ThemeServce","LanguageServce"],CurrentAlarmService._instanceCounter=0,A.CurrentAlarmService=CurrentAlarmService}(A.Impl||(A.Impl={}))}(x.AppServices||(x.AppServices={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){"use strict";A.HistoricalAlarmViewModel=class HistoricalAlarmViewModel{constructor(){this.historicalAlarm=null,this.historicalAlarmList=null}};class HistoricalAlarmService extends x.AppServices.Impl.ServiceBase{constructor(){super(),this.maxPriority=null,this.minPriority=null,this._alarmService=null,this._historicalAlarms=null,this._appService=x.AppServices.AppService,this.vm=null,this._historicalAlarm={classNames:[],groupNames:[],stateNames:["None","Active","Inactive","ActiveAck","InactiveAck","Cleared","Reactivated"],sumCounter:0,classCounter:{},groupCounter:{},stateCounter:{},oldAlarmState:null},this._desiredClasses=null,this._desiredClassesArray=[],this._desiredGroups=null,this._desiredGroupsArray=[],this._desiredStates=null,this._desiredStatesArray=[],this._minDate=new Date(0),this._maxDate=new Date(Date.now()),x.Application.Time.addTime("HistoricalAlarmService","start"),this.vm={},this._alarmService=x.System.Alarm.AlarmService.getService(),this.vm.historicalAlarmList=new WinJS.Binding.List;let A=this._appService.getPathString("resources/stateinfos");this._appService.getPathSetting("UI.DirectoryNames.StateInfos")?A=this._appService.getPathSetting("UI.DirectoryNames.StateInfos"):x.Application.ErrorLog.log('VisiWin.UI.HistoricalAlarmService: setting value [DirectoryNames.StateInfos] not set. Use default directory: "'+this._appService.getPathString("resources/stateinfos")+'".');const V=x.Application.Settings.UI.StateInfos;for(let R=0;R<V.length;R++){const D=A+"/"+V[R];x.Utilities.loadJsonResource(D,null,V[R])}x.Application.Time.addTime("HistoricalAlarmService","end")}set desiredClasses(A){this._desiredClasses=A,this._desiredClassesArray=x.Utilities.csvToArray(A)}get desiredClasses(){return this._desiredClasses}set desiredGroups(A){this._desiredGroups=A,this._desiredGroupsArray=x.Utilities.csvToArray(A)}get desiredGroups(){return this._desiredGroups}set desiredStates(A){this._desiredStates=A,this._desiredStatesArray=x.Utilities.csvToArray(A)}get desiredStates(){return this._desiredStates}dateAdd(x,A,V){let R=new Date(x);const checkRollover=function(){R.getDate()!==x.getDate()&&R.setDate(0)};switch(A.toLowerCase()){case"year":R.setFullYear(R.getFullYear()+V),checkRollover();break;case"quarter":R.setMonth(R.getMonth()+3*V),checkRollover();break;case"month":R.setMonth(R.getMonth()+V),checkRollover();break;case"week":R.setDate(R.getDate()+7*V);break;case"day":R.setDate(R.getDate()+V);break;case"hour":R.setTime(R.getTime()+36e5*V);break;case"minute":R.setTime(R.getTime()+6e4*V);break;case"second":R.setTime(R.getTime()+1e3*V);break;default:R=void 0}return R}dateSub(x,A,V){let R=new Date(x);const checkRollover=function(){R.getDate()!==x.getDate()&&R.setDate(0)};switch(A.toLowerCase()){case"year":R.setFullYear(R.getFullYear()-V),checkRollover();break;case"quarter":R.setMonth(R.getMonth()-3*V),checkRollover();break;case"month":R.setMonth(R.getMonth()-V),checkRollover();break;case"week":R.setDate(R.getDate()-7*V);break;case"day":R.setDate(R.getDate()-V);break;case"hour":R.setTime(R.getTime()-36e5*V);break;case"minute":R.setTime(R.getTime()-6e4*V);break;case"second":R.setTime(R.getTime()-1e3*V);break;default:R=void 0}return R}set minDate(x){this._minDate=x}get minDate(){return this._minDate}set maxDate(x){this._maxDate=x}get maxDate(){return this._maxDate}set period(x){switch(this._period=x,x){case"hour":this.maxDate=new Date,this.minDate=this.dateSub(this.maxDate,"hour",1);break;case"day":this.maxDate=new Date,this.minDate=this.dateSub(this.maxDate,"day",1);break;case"week":this.maxDate=new Date,this.minDate=this.dateSub(this.maxDate,"week",1)}}get period(){return this._period}updateAlarmList(){this.dispatchEvent("updateAlarmList",{})}static createRequestId(){return"HistoricalAlarmsProvider"+HistoricalAlarmService._instanceCounter++}alarmCounterUpdate(A,V){"+"===A?(this.vm.historicalAlarm.classCounter[V.Class.Name]++,this.vm.historicalAlarm.groupCounter[V.Group.Nmae]++,this.vm.historicalAlarm.sumCounter++):"-"===A&&(this.vm.historicalAlarm.classCounter[V.Class.Name]--,this.vm.historicalAlarm.groupCounter[V.Group.Name]--,this.vm.historicalAlarm.sumCounter--),this.vm.historicalAlarm.oldAlarmState&&this.vm.historicalAlarm.stateCounter[this.vm.historicalAlarm.oldAlarmState]--,this.vm.historicalAlarm.stateCounter[x.System.Alarm.AlarmState[V.AlarmState]]++,this.vm.historicalAlarm.oldAlarmState=x.System.Alarm.AlarmState[V.AlarmState]}_historicalAlarmsChange(A){const V=A;switch(V.activationTime=A.ActivationTime,V.time=A.ActivationTime.toLocaleTimeString(),V.AlarmState){case 0:case 1:V.alarmStateTime=V.ActivationTime;break;case 4:V.alarmStateTime=V.AcknowledgeTime;break;case 2:case 8:V.DeactivationTime>V.AcknowledgeTime?V.alarmStateTime=V.DeactivationTime:V.alarmStateTime=V.AcknowledgeTime;break;case 16:V.DeactivationTime>V.AcknowledgeTime?V.alarmStateTime=V.DeactivationTime:V.AcknowledgeTime>V.DeactivationTime?V.alarmStateTime=V.AcknowledgeTime:V.alarmStateTime=V.DeactivationTime;break;case 32:default:V.alarmStateTime=V.ActivationTime}let R=!1;if(this.vm.historicalAlarmList.length)for(let D=0;D<this.vm.historicalAlarmList.length;D++){if(this.vm.historicalAlarmList.getItem(D).data.ID===A.ID){A.AlarmState===x.System.Alarm.AlarmState.Cleared?(this.vm.historicalAlarmList.splice(D,1),this.alarmCounterUpdate("-",A)):(this.vm.historicalAlarmList.setAt(D,V),this.vm.historicalAlarmList.move(D,0),this.alarmCounterUpdate(".",A)),R=!0;break}}if(A.AlarmState!==x.System.Alarm.AlarmState.Cleared&&!R){const x=this.vm.historicalAlarmList.push(V)-1;this.vm.historicalAlarmList.move(x,0),this.alarmCounterUpdate("+",A)}this.dispatchEvent("stateChanged",{source:this})}init(){}_changeColorService(x){}_changeLocService(x){}ready(){}xready(){if(x.Internal.Application.ApplicationManager.getApplication().getDefaultSession().SrvHnd.Socket.IsOnline){if(this.vm&&this._alarmService){if(this._alarmService.GroupNames){this._historicalAlarm.groupNames=this._alarmService.GroupNames;for(let x=0;x<this._historicalAlarm.groupNames.length;x++)this._historicalAlarm.groupCounter[this._historicalAlarm.groupNames[x]]=0}if(this._alarmService.ClassNames){this._historicalAlarm.classNames=this._alarmService.ClassNames;for(let x=0;x<this._historicalAlarm.classNames.length;x++)this._historicalAlarm.classCounter[this._historicalAlarm.classNames[x]]=0}for(let x=0;x<this._historicalAlarm.stateNames.length;x++)this._historicalAlarm.stateCounter[this._historicalAlarm.stateNames[x]]=0;this.vm.historicalAlarm=x.Binding.as(this._historicalAlarm)}const A=this.createHistoricalAlarmFilter();A.DesiredClasses=this._desiredClassesArray,A.DesiredGroups=this._desiredGroupsArray,A.DesiredStates=this._desiredStatesArray,A.MaxPriority=this.maxPriority,A.MinPriority=this.minPriority,A.MaxTime=this._maxDate,A.MinTime=this._minDate,this._historicalAlarms=this.createHistoricalAlarmRequest(A),this._historicalAlarms.GetHistoricalDataCompleted.add(this._historicalAlarmsChange.bind(this)),this._historicalAlarms.GetHistoricalDataAsync()}}unload(){}dispose(){this._historicalAlarms&&this._historicalAlarms.GetHistoricalDataCompleted.remove(this._historicalAlarmsChange.bind(this)),this._historicalAlarms&&this._historicalAlarms.Dispose&&this._historicalAlarms.Dispose()}createHistoricalAlarmFilter(){return this._alarmService.CreateHistoricalAlarmFilter()}createHistoricalAlarmRequest(x){return this._alarmService.CreateHistoricalAlarmRequest(x)}}HistoricalAlarmService.namespace="VisiWin.Services.Impl",HistoricalAlarmService.serviceName="HistoricalAlarmService",HistoricalAlarmService.requireServices=["AppService","ThemeServce","LanguageServce"],HistoricalAlarmService._instanceCounter=0,A.HistoricalAlarmService=HistoricalAlarmService}(A.Impl||(A.Impl={}))}(x.AppServices||(x.AppServices={}))}(VisiWin||(VisiWin={})),function(x){"use strict";x.booleanInverter=VisiWin.Binding.converter((function(x){if(VisiWin.isBoolean(x))return!x;return!VisiWin.Internal.stringToBoolean(x)}))}(Converters||(Converters={})),function(x){"use strict";x.boolToVisibilityHidden=VisiWin.Binding.converter((function(x){let A=x;if(!VisiWin.isBoolean(x)){A=VisiWin.Internal.stringToBoolean(x)}return!0===A?VisiWin.UI.Enums.Visibility.visible:VisiWin.UI.Enums.Visibility.hidden})),x.boolToVisibilityCollapse=VisiWin.Binding.converter((function(x){let A=x;if(!VisiWin.isBoolean(x)){A=VisiWin.Internal.stringToBoolean(x)}return!0===A?VisiWin.UI.Enums.Visibility.visible:VisiWin.UI.Enums.Visibility.collapse}))}(Converters||(Converters={})),function(x){"use strict";x.initialized=function initialized(){VisiWin.Utilities.isInDesignMode()&&(VisiWin.AppServices.DataService.registerDesignTimeConverter("booleanInverter",{name:"booleanInverter",info:"Inverts a boolean value",displayName:"BooleanInverter",inputType:"boolean",inputSubType:null,outputType:"boolean",outputSubType:null}),VisiWin.AppServices.DataService.registerDesignTimeConverter("boolToVisibilityHidden",{name:"boolToVisibilityHidden",info:"Converts a boolean value into the string visible or hidden",displayName:"BoolToVisibilityHidden ",inputType:"boolean",inputSubType:null,outputType:"string",outputSubType:null}),VisiWin.AppServices.DataService.registerDesignTimeConverter("boolToVisibilityCollapse",{name:"boolToVisibilityCollapse",info:"Converts a boolean value into the string visible or collapse",displayName:"BoolToVisibilityCollapse",inputType:"boolean",inputSubType:null,outputType:"string",outputSubType:null}))}}(Converters||(Converters={})),function(x){!function(x){!function(x){!function(x){let A;!function(x){x[x.NoUserNoPassword=0]="NoUserNoPassword",x[x.NoUser=1]="NoUser",x[x.NoPassword=2]="NoPassword",x[x.NoNewPassword=3]="NoNewPassword",x[x.NoOldPassword=4]="NoOldPassword",x[x.NewPasswordsNotEqual=5]="NewPasswordsNotEqual"}(A=x.InteractivEvents||(x.InteractivEvents={})),Object.freeze(A)}(x.Variable||(x.Variable={}))}(x.Impl||(x.Impl={}))}(x.AppServices||(x.AppServices={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){"use strict";class VariableService extends x.AppServices.Impl.ServiceBase{constructor(){super(),this.mappingData={},this.variabeNamespace="window",this.vm=null,this._appService=x.AppServices.AppService,this._variableService=null,this._sampleData=null,this.data={},this.boundProccessChangeHandler=this.proccessChangeHandler.bind(this),this.vm={},this._variableService=x.System.DataAccess.VariableService.getService(),this._initObservables()}set sampleData(x){}get sampleData(){return this._sampleData}init(){}ready(){let A=x.Utilities.getAppSettings("UI.AppServices.VariableService.Variables.Alias");for(const x in A)A[x].variableType="Alias",this.addVariable(x,A[x]);A=x.Utilities.getAppSettings("UI.AppServices.VariableService.Variables.Proccess");for(const x in A)A[x].variableType="Proccess",this.addVariable(x,A[x]);A=x.Utilities.getAppSettings("UI.AppServices.VariableService.Variables.JsVar");for(const x in A)A[x].variableType="JsVar",this.addVariable(x,A[x]);A=x.Utilities.getAppSettings("UI.AppServices.VariableService.Variables.CookieVar");for(const x in A)A[x].variableType="CookieVar",this.addVariable(x,A[x]);A=x.Utilities.getAppSettings("UI.AppServices.VariableService.Variables.SessionVar");for(const x in A)A[x].variableType="SessionVar",this.addVariable(x,A[x]);A=x.Utilities.getAppSettings("UI.AppServices.VariableService.Variables.LocalVar");for(const x in A)A[x].variableType="LocalVar",this.addVariable(x,A[x])}_initObservables(){return __awaiter(this,void 0,void 0,(function*(){this.touchkeyboardInfo={varName:"",varMaxValue:"",varMinValue:"",varValue:"",varText:"",varUnitText:"",varDecimalPlaces:"",isTouchkeyboardActive:!1},this.touchkeyboardInfoDescription={category:"TouchKeyboard",displayName:"TouchkeyboardInfo"},this.touchkeyboardInfoObservableDescription={varName:{propertyType:"member",displayName:"Name",type:"string",access:"rw"},varMaxValue:{propertyType:"member",displayName:"MaxValue",type:"string",access:"rw"},varMinValue:{propertyType:"member",displayName:"MinValue",type:"string",access:"rw"},varValue:{propertyType:"member",displayName:"Value",type:"string",access:"rw"},varText:{propertyType:"member",displayName:"Text",type:"string",access:"rw"},varUnitText:{propertyType:"member",displayName:"UnitText",type:"string",access:"rw"},varDecimalPlaces:{propertyType:"member",displayName:"DecimalPlaces",type:"string",access:"rw"}},this.touchkeyboardInfo=x.Binding.as(this.touchkeyboardInfo),x.Observables.touchkeyboardInfo=this.touchkeyboardInfo,x.AppServices.DataService.registerDesignTimeObservable("touchkeyboardInfo",this.touchkeyboardInfoDescription,this.touchkeyboardInfoObservableDescription)}))}unload(){}proccessChangeHandler(A){for(const V in x.AppServices.VariableService.data){const R=x.AppServices.VariableService.data[V],D=R.variableName,N=R.variableType;if(D===A.Name&&"Proccess"===N){for(let x=0;x<R.propertyNames.length;x++)A[R.propertyNames[x]]&&(R.nameSpaceObj[V][R.propertyNames[x]]=A[R.propertyNames[x]]);R.value=A.Value}}}addVariable(A,V){A&&"string"==typeof A||x.Application.WarnLog.log("VisiWin.AppServices.VariableService: addVariable, parameter name not set or invalid."),this.data&&this.data.name&&x.Application.WarnLog.log("VisiWin.AppServices.VariableService: addVariable, variable with name '"+A+"' alredy in use.");let R=this.data[A]={};switch(V.variableType){case"Proccess":R.name=A,R.variableType=V.variableType,R.variableName=V.variableName,R.nameSpace=V.nameSpace||x.Utilities.getAppSettings("UI.AppServices.VariableService.DefaultNamespace")||"window",R.nameSpaceObj=x.Utilities.getObjectFromName(R.nameSpace),R.propertyNames=V.propertyNames||["Value"],R.oneTime="boolean"==typeof V.oneTime&&V.oneTime,R.mapping="boolean"!=typeof V.mapping||V.mapping,R.access=V.access||"rw",R.oneTime?R.vwVariable=this.getVariable(R.variableName):(R.vwVariable=this.getVariable(R.variableName),R.handler=this.boundProccessChangeHandler,R.vwVariable.Change.add(R.handler,this),R.vwVariable.AttachAsync()),R.nameSpaceObj[A]={};for(let x=0;x<R.propertyNames.length;x++)R.nameSpaceObj[A][R.propertyNames[x]]=null;R.mapping&&x.AppServices.DataService.setData(A,R.nameSpaceObj[A]);break;case"Alias":R={},R.name=A,R.variableType=V.variableType,R.source=V.source,R.nameSpace=V.nameSpace||x.Utilities.getAppSettings("UI.AppServices.VariableService.DefaultNamespace")||"window",R.nameSpaceObj=x.Utilities.getObjectFromName(R.nameSpace),R.mapping="boolean"==typeof V.mapping&&(R.mapping=V.mapping),R.nameSpaceObj[A]=x.Utilities.getObjectFromName(V.source),R.mapping&&x.AppServices.DataService.setData(A,R.nameSpaceObj[A]);break;case"JsVar":R={},R.name=A,R.variableType=V.variableType,R.nameSpace=V.nameSpace||V.nameSpace||x.Utilities.getAppSettings("UI.AppServices.VariableService.DefaultNamespace")||"window",R.nameSpaceObj=x.Utilities.getObjectFromName(R.nameSpace),R.defaultValue=V.defaultValue||null,R.value=this.data[A].defaultValue,R.mapping="boolean"==typeof V.mapping&&(R.mapping=V.mapping),R.nameSpaceObj[A]=R.defaultValue,R.mapping&&x.AppServices.DataService.setData(A,R.nameSpaceObj.name)}}dispose(){return super.dispose()}getVariable(x){return this._variableService.GetVariable(x)}getValueAsync(x,A){return __awaiter(this,void 0,void 0,(function*(){return this._variableService.GetValueAsync(x,A)}))}setValueAsync(x,A,V){return __awaiter(this,void 0,void 0,(function*(){return this._variableService.SetValueAsync(x,A,V)}))}setRawValueAsync(x,A,V){return __awaiter(this,void 0,void 0,(function*(){return this._variableService.SetRawValueAsync(x,A,V)}))}}VariableService.namespace="VisiWin.VariableServices.Impl",VariableService.serviceName="VariableService",VariableService.requireServices=["MessageService","AppService","DataService"],A.VariableService=VariableService}(A.Impl||(A.Impl={}))}(x.AppServices||(x.AppServices={}))}(VisiWin||(VisiWin={})),function(x){x.AppServices||(x.AppServices={})}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){"use strict";class ProjectLanguage{}A.ProjectLanguage=ProjectLanguage;A.LocalizedText=class LocalizedText{};class LanguageService extends x.AppServices.Impl.ServiceBase{constructor(){super(),this._FALLBACKLANGUAGE="en-US",this._CLIENTSYSTEMPREFIX="@[ClientSystem]",this._SERVERSYSTEMPREFIX="@[ServerSystem]",this._APPSERVICESLANGUAGESERVICE="AppServices.LanguageService",this._DESIGNTIMELANGUAGE="DesigntimeLanguage",this._RUNTIMELANGUAGE="RuntimeLanguage",this._DESIGNTIMELANGUAGE_OLD="DesignTimeLanguage",this._RUNTIMELANGUAGE_OLD="RunTimeLanguage",this._LANGUAGECHANGED="languageChanged",this._appService=x.AppServices.AppService||null,this._languageService=null,this._session=x.Internal.Application.ApplicationManager.getApplication().getDefaultSession(),this._clientStrings={},this._runtimeLanguage=this._FALLBACKLANGUAGE,this._desingerLanguage=this._runtimeLanguage,this._currentLanguage=this._FALLBACKLANGUAGE,this.languageListDescription=null,this.languageListDataSourceDescription=null,this.actualLanguageDescription=null,this.actualLanguageDataSourceDescription=null,this._oldUiLanguages="UI.Languages",this._oldDesignTimeLanguage="UI."+this._DESIGNTIMELANGUAGE_OLD,this._oldRunTimeLanguage="UI."+this._RUNTIMELANGUAGE_OLD,this.aktLang=this._runtimeLanguage,this.availableProjectLanguages=[],this.CurrentLanguage=null,this.currentLcid=1033,x.Application.Time.addTime("Language Service","start"),this._appService||x.Application.WarnLog.log(`VisiWin.${this._APPSERVICESLANGUAGESERVICE}: depent service "AppService" is not avalible.`),this.createEvent(this._LANGUAGECHANGED),this._fillAvailableProjectLanguages(),this._initDataSources(),this._initObservables(),x.Application.Time.addTime("Language Service","end")}get currentLanguage(){return this._currentLanguage}set currentLanguage(x){const A=this._getProjectLanguage(x);this._currentLanguage=A.locale,this.currentLcid=A.lcid,this.aktLang=A.locale,this._session.ClientManager.LCID=A.lcid}changeLanguageAsync(A){return __awaiter(this,void 0,void 0,(function*(){const V=this._getProjectLanguage(A);if(this.currentLanguage=V.locale,!this._session.SrvHnd.Socket.IsOnline)return this._updateClientTexts(),Promise.resolve(A);try{yield this.changeLanguageLcidAsync(this.currentLcid)}catch(V){x.Application.ErrorLog.log("VisiWin.AppServices.LanguageService: changeLanguage can't set new language:"+A+".")}try{this._setLocalStorageLanguageTag(),this._updateClientTexts()}catch(x){}const R={sender:this,defaultLanguage:this._runtimeLanguage,aktLanguage:this.currentLanguage,senderName:this._LANGUAGECHANGED};return this.dispatchEvent(this._LANGUAGECHANGED,R),x.Observables.CurrentLanguage.setProperty("englishName",V.englishName),x.Observables.CurrentLanguage.setProperty("lcid",V.lcid),x.Observables.CurrentLanguage.setProperty("locale",V.locale),x.Observables.CurrentLanguage.setProperty("nativeName",V.nativeName),Promise.resolve(A)}))}getTextFallback(x){return __awaiter(this,void 0,void 0,(function*(){let A=0,V=null;if(!x&&x.length<=0)return null;for(;A<x.length;){if(V=yield this._getText(x[A]),V&&"@"!==V.substr(0,1))return Promise.resolve({text:V,textIds:x,index:A});A++}return Promise.resolve({text:null,textIds:x,index:null})}))}addLocalizedTextAsync(A,V){return __awaiter(this,void 0,void 0,(function*(){let R=null;if(!x.isNullOrEmpty(A)){if(this._session.ClientManager.clientState===x.System.Client.ClientState.Paused&&(A=A.replace(this._SERVERSYSTEMPREFIX,this._CLIENTSYSTEMPREFIX)),A.substr(0,15)===this._CLIENTSYSTEMPREFIX){const D=A.substr(16);return this._clientStrings[D]?(R=this._clientStrings[D],this.currentLanguage&&x.Resources.strings&&x.Resources.strings[this.currentLanguage]&&x.Resources.strings[this.currentLanguage][D]?(R.Changed.add(V),R.Changed.trigger(R)):R.DisplayText="@"+A):(R=new x.AppServices.Impl.LocalizedText,R.FullQualifiedText=A,R.TextName=D,R.TextGroup="Client",R.TextType=x.System.Language.TextType.ClientApplication,this._clientStrings[D]=R,R.DisplayText=null,this.currentLanguage&&x.Resources.strings&&x.Resources.strings[this.currentLanguage]&&x.Resources.strings[this.currentLanguage][D]?(R.DisplayText=x.Resources.strings[this.currentLanguage][D],R.Changed=new x.Internal.System.Events.TypedEvent,R.Changed.add(V),R.Changed.trigger(R)):R.DisplayText="@"+A),Promise.resolve(R)}{let x=null;return x=yield this.getLocalizedTextAsync(A),x.Changed.add(V),Promise.resolve(x)}}return null}))}addLocalizedTextHandler(x,A,V){return __awaiter(this,void 0,void 0,(function*(){V&&V.Changed&&V.Changed.add(A)}))}removeLocalizedText(x,A,V){V&&V.Changed&&V.Changed.remove(A),V&&"function"==typeof V.Dispose?V.Dispose():V.Changed&&V.Changed.remove()}removeLocalizedTextHandler(x,A,V){V&&V.Changed&&V.Changed.remove(A)}getOptions(A){let V=null;return A&&(V={},x.Resources.styles.controls[A]&&x.Resources.styles.controls[A].language&&x.Resources.styles.controls[A].language[this.currentLanguage]&&this._mixProperties(V,x.Resources.styles.controls[A].language[this.currentLanguage])),V}init(){this._languageService=x.System.Language.LanguageService.getService(),this._languageService.LanguageChanged.add(x=>{this.CurrentLanguage=this._getProjectLanguageFromLcid(x),this.CurrentLanguage&&(this.currentLanguage=this.CurrentLanguage.locale,this._setLocalStorageLanguageTag())}),x.Utilities.isInDesignMode()&&(this.currentLanguage=this._desingerLanguage,this.CurrentLanguage=this._getProjectLanguage(this.currentLanguage)),this.currentLanguage||(this.currentLanguage=this._runtimeLanguage,x.Application.WarnLog.log(`VisiWin.${this._APPSERVICESLANGUAGESERVICE}: Language:"${this._runtimeLanguage}" is not in languagelist`)),this._updateClientTexts()}_initDataSources(){this.ProjectLanguages,this.languageListDescription={category:"Languages",displayName:"ProjectLanguages"},this.languageListDataSourceDescription={englishName:{propertyType:"member",displayName:"EnglishName",type:"string",access:"ro"},locale:{propertyType:"member",displayName:"Locale",type:"string",access:"ro"},lcid:{propertyType:"member",displayName:"LCID",type:"number",access:"ro"},nativeName:{propertyType:"member",displayName:"NativeName",type:"string",access:"ro"},command:{propertyType:"command",displayName:"ChangeLanguage",access:"rw"}},this.ProjectLanguages=[...this.availableProjectLanguages],x.DataSources.ProjectLanguages=new WinJS.Binding.List(this.ProjectLanguages),x.AppServices.DataService.registerDesignTimeDataSource("ProjectLanguages",this.languageListDescription,this.languageListDataSourceDescription)}_initObservables(){this.CurrentLanguage=null,this.actualLanguageDescription={category:"Language",displayName:"CurrentLanguage"},this.actualLanguageDataSourceDescription={englishName:{propertyType:"member",displayName:"EnglishName",type:"string",access:"ro"},locale:{propertyType:"member",displayName:"Locale",type:"string",access:"ro"},lcid:{propertyType:"member",displayName:"LCID",type:"number",access:"ro"},nativeName:{propertyType:"member",displayName:"NativeName",type:"string",access:"ro"}},this.CurrentLanguage=this._getProjectLanguage(this.currentLanguage);const A=Object.assign({},this.CurrentLanguage);x.Observables.CurrentLanguage=x.Binding.as(A),x.AppServices.DataService.registerDesignTimeObservable("CurrentLanguage",this.actualLanguageDescription,this.actualLanguageDataSourceDescription)}_mixProperties(A,V){if(x.isString(V)&&(V=WinJS.UI._optionsParser(V)),x.isObject(V))for(const x in V)A[x]=V[x]}_getText(A){return __awaiter(this,void 0,void 0,(function*(){if(!x.isNullOrEmpty(A)){if(this._session.ClientManager.clientState===x.System.Client.ClientState.Paused&&(A=A.replace(this._SERVERSYSTEMPREFIX,this._CLIENTSYSTEMPREFIX)),A.substr(0,15)===this._CLIENTSYSTEMPREFIX){const V=A.substr(16);return this.currentLanguage&&x.Resources.strings&&x.Resources.strings[this.currentLanguage]&&x.Resources.strings[this.currentLanguage][V]?Promise.resolve(x.Resources.strings[this.currentLanguage][V]):Promise.resolve(A)}{const x=yield this.getLocalizedTextAsync(A);return Promise.resolve(x.DisplayText)}}return null}))}_updateClientTexts(){for(const A in this._clientStrings){const V=this._clientStrings[A];this.currentLanguage&&x.Resources.strings&&x.Resources.strings[this.currentLanguage]&&x.Resources.strings[this.currentLanguage][A]&&(V.DisplayText=x.Resources.strings[this.currentLanguage][A]),V&&V.Changed&&V.Changed.trigger(V)}}_fillAvailableProjectLanguages(){let A=!0;const V=this._appService.getAppSettings(this._APPSERVICESLANGUAGESERVICE);if(V){if(x.isArray(V.Locales))for(let A=0;A<V.Locales.length;A++){const R=V.Locales[A],D=new ProjectLanguage;if(D.locale=R.Name,R.LCID)if(x.isNumber(R.LCID))D.lcid=R.LCID;else{const x=R.LCID.toString();D.lcid=parseInt(x,10)}else D.lcid=x.System.Language._locale2lcid(R.Name);x.isNullOrUndefined(R.NativeName)||""===R.NativeName?D.nativeName=x.Internal.Domain.Language._tryGetNativeLanguageName(R.Name):D.nativeName=R.NativeName,x.isNullOrUndefined(R.EnglishName)||""===R.EnglishName?D.englishName=x.Internal.Domain.Language._tryGetNativeEnglishLanguageName(R.Name):D.englishName=R.EnglishName,this.availableProjectLanguages.push(D);try{const A=new x.Internal.System.Language.ProjectLanguage(this._session.LanguageManager,D.nativeName,D.lcid,null,D.englishName);this._session.LanguageManager._LanguageService.ProjectLanguages.push(A)}catch(x){}}V[this._DESIGNTIMELANGUAGE]&&(this._desingerLanguage=V[this._DESIGNTIMELANGUAGE]),V[this._RUNTIMELANGUAGE]&&(this._runtimeLanguage=V[this._RUNTIMELANGUAGE])}else A=!1;if(!1===A){this._runtimeLanguage=this._appService.getAppSettings(this._oldRunTimeLanguage),this._runtimeLanguage||(this._runtimeLanguage=this._FALLBACKLANGUAGE),this._desingerLanguage=this._appService.getAppSettings(this._oldDesignTimeLanguage),this._desingerLanguage||(this._desingerLanguage=this._runtimeLanguage);const A=this._appService.getAppSettings(this._oldUiLanguages);if(A)for(let V=0;V<A.length;V++){const R=new ProjectLanguage;R.locale=A[V],R.lcid=x.System.Language._locale2lcid(A[V]),R.nativeName=x.Internal.Domain.Language._tryGetNativeLanguageName(A[V]),R.englishName=x.Internal.Domain.Language._tryGetNativeEnglishLanguageName(A[V]),this.availableProjectLanguages.push(R)}}const R=this._getLocalStorageLanguageTag();if(R){let x=!1;if(V&&V.Locales)for(var D=0;D<V.Locales.length;D++)V.Locales[D].Name==R&&(x=!0);x?(this.currentLanguage=R,this._runtimeLanguage=this.currentLanguage):V.RuntimeLanguage?this.currentLanguage=V.RuntimeLanguage:this.currentLanguage=this._runtimeLanguage}else this.currentLanguage=this._runtimeLanguage}_getProjectLanguage(A){if(x.Internal.Domain.Language._isValidLocale(A))for(let x=0;x<this.availableProjectLanguages.length;x++)if(this.availableProjectLanguages[x].locale===A)return this.availableProjectLanguages[x];const V=new ProjectLanguage;return V.locale=A,V.lcid=x.System.Language._locale2lcid(A),V.nativeName=x.Internal.Domain.Language._tryGetNativeLanguageName(A),V.englishName=x.Internal.Domain.Language._tryGetNativeEnglishLanguageName(A),this.availableProjectLanguages.push(V),V}_getProjectLanguageFromLcid(x){for(let A=0;A<this.availableProjectLanguages.length;A++)if(this.availableProjectLanguages[A].lcid===x)return this.availableProjectLanguages[A]}_getLocalStorageLanguageTag(){const x=this._getLocalStorageName(),A=localStorage[x];return A||null}_setLocalStorageLanguageTag(){const x=this._getLocalStorageName();localStorage[x]=this.currentLanguage}_getLocalStorageName(){const A=document.title||"defaultVisiWin7WebProject";return x.Application.storageName=("Inosoft_VisiWin7_"+A+"_").replace(/[\\/,.+-\s]/g,"_"),x.Application.storageName+this._RUNTIMELANGUAGE}getLocalizedTextAsync(x,A,V){return this._languageService.GetLocalizedTextAsync(x,A,V)}changeLanguageLcidAsync(x){return this._languageService.ChangeLanguageAsync(x)}}LanguageService.namespace="VisiWin.Services.Impl",LanguageService.serviceName="LanguageService",LanguageService.requireServices=["AppService"],A.LanguageService=LanguageService}(A.Impl||(A.Impl={}))}(x.AppServices||(x.AppServices={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){x.Navigation||(x.Navigation={})}(x.Impl||(x.Impl={}))}(x.AppServices||(x.AppServices={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){"use strict";class NavigationService extends x.AppServices.Impl.ServiceBase{constructor(){var A,V;super(),this._currentPage=null,this.pageInfo=[],this.appNavMenuItems=[],this.isNavigationCurrentlyRunning=!1,this.preloadingObject=null,this.preloadingObjectDescription=null,this.preloadingObjectObservableDescription=null,this._skippedPages=[],this._includePartiallyLoadedPages=null===(A=x.Application.Settings.UI.IncludePartiallyLoadedPages)||void 0===A||A,this._requestedPage="",this._navigatedEventName="navigated",this._navigatedInternalEventName="navigatedInternal",this._navigatingEventName="navigating",this._beforenavigateEventName="beforenavigate",this._onPageTitleChanged="pageTitleChanged",this._onViewTitleChanged="viewTitleChanged",this._onPageChangedEventname="onPageChanged",this._onViewChangedEventname="onViewChanged",this._onloadingPageName="onLoadingPage",this._preloadingReady=!1,this._storageName="",this._storageExtension="preloadCount",this.preloadCount=0,this.preloadCounter=0,this._preloadReadyName="preloadingready",this._preloadChangeName="preloadingchange",this.appShellReady=!1,this.startPageInit=!1,this._startPage=null,this._history={backStack:[],current:{location:"",initialPlaceholder:!0,state:null},forwardStack:[]},this._pageHistorySize=x.Application.Settings.UI.PageHistorySize||100,this._pageHistory=[],this._viewHistorySize=x.Application.Settings.UI.ViewHistorySize||100,this._viewHistory=[],this._showLoadingPageForUncachedPages=null!==(V=x.Application.Settings.UI.ShowLoadingPageForUncachedPages)&&void 0!==V?V:x.Utilities.getAppSettings("UI.ShowLoadingPageForUncachedPages"),this._loadingPage=x.Application.Settings.UI.LoadingPageName,this._loadingView=x.Application.Settings.UI.LoadingViewName,this._requieredPage={location:null,state:null},this._handlePageChangeEvent=x=>{this._requestedPage="",this._resolvePageChange&&this._resolvePageChange(x)},this._handleViewChangeEvent=x=>{this._resolveViewChange&&this._resolveViewChange(x)},this._handleLoadingViewChangeEvent=x=>{this._resolveLoadingViewChange&&this._resolveLoadingViewChange(x)},this.currentPageName="",this.currentPage=null,this.currentView=null,this.createEvent(this._navigatingEventName),this.createEvent(this._navigatedEventName),this.createEvent(this._beforenavigateEventName),this.createEvent(this._navigatedInternalEventName),this.createEvent(this._onPageChangedEventname),this.createEvent(this._onViewChangedEventname),this.createEvent(this._onPageTitleChanged),this.createEvent(this._onViewTitleChanged),this.createEvent(this._onloadingPageName),this.createEvent(this._preloadReadyName),this.createEvent(this._preloadChangeName),this.createEvent("AppShellReady"),this.addEventListener(this._beforenavigateEventName,this._beforeNavigate.bind(this)),this.addEventListener(this._onPageChangedEventname,this._handlePageChangeEvent),this.addEventListener(this._onPageChangedEventname,this._handleMissingPages.bind(this)),this.addEventListener(this._onViewChangedEventname,this._handleViewChangeEvent),this.addEventListener(this._onloadingPageName,this._handleLoadingViewChangeEvent),this._initObservables()}set startPage(x){if(this._startPage=x,null!=this._startPage&&this._preloadingReady){let x={details:{startPage:this._startPage,preloadingReady:this._preloadingReady}};this.dispatchEvent(this._preloadReadyName,x)}}get startPage(){return this._startPage}set preloadingReady(x){if(this._preloadingReady=x,null!=this._startPage&&this._preloadingReady){let x={details:{startPage:this._startPage,preloadingReady:this._preloadingReady}};this.dispatchEvent(this._preloadReadyName,x)}}get preloadReadyFlag(){return this._preloadingReady}_getTitleFromNavMenu(x){if(this.appNavMenuItems&&this.appNavMenuItems.length>0)for(let A=0;A<this.appNavMenuItems.length;A++){let V=this.appNavMenuItems[A];if(this.appNavMenuItems[A].winControl&&(V=this.appNavMenuItems[A].winControl),V.pageName===x)return{title:V.text,localaizableTitle:V.localizableText}}return{title:null,localaizableTitle:null}}registerMenuItems(x){this.appNavMenuItems=x}incrementPreloadCounter(A,V){this.preloadingObject.preloadingFileCount;this.preloadingObject.preloadingCounter++,this.preloadingObject.preloadingFilename=A,this.preloadingObject.preloadingCounter<this.preloadingObject.preloadingFileCount?this.preloadingObject.preloadingPercent=Math.trunc(100*this.preloadingObject.preloadingCounter/this.preloadingObject.preloadingFileCount):this.preloadingObject.preloadingPercent=100,""===A?(this.preloadingObject.preloadingEnable=x.Application.Settings.UI.Preloading.Enabled,this.preloadingObject.preloadingFilename="",this.preloadingObject.preloadingPercent=0,this.preloadingObject.preloadingReady=!1,this.preloadingObject.preloadingCounter=0):V&&(this.preloadingObject.preloadingFilename="ready",this.preloadingObject.preloadingPercent=100,this.preloadingObject.preloadingReady=!0,localStorage.setItem(this._storageName,this.preloadingObject.preloadingCounter.toString()));let R=this.preloadingObject.backingData;this.dispatchEvent(this._preloadChangeName,{detail:R})}_updateFromRegionNavigation(A){var V,R,D,N,U,B,F,W;if(!x.Utilities.isInDesignMode())try{if(this._history.current.location===A.location){if(A.isPage){if(this._pageHistory.length>=this._pageHistorySize&&this._pageHistory.shift(),A.ctrl&&!A.ctrl.pageOptions&&A.state&&(A.ctrl.pageOptions=A.state),this.currentPage=A.ctrl,this.currentPageName=A.location,A.pageLocation=A.location,A.location!==this._loadingPage&&("Cache"!==x.Application.Settings.UI.PageMode&&(A.ctrl=null),x.isNullOrUndefined(A.error)&&this._pageHistory.push(A)),this.isNavigationCurrentlyRunning=!1,this._loadingPage&&A.location===this._loadingPage)this.dispatchEvent(this._onloadingPageName,{detail:A});else{if(A.error&&A.error.error&&A.isPage){const V={statusText:A.error.error.statusText,status:A.error.error.status,location:A.location};x.Application.WarnLog.log("NavigationService navigateToPage invalid page:",V)}this.dispatchEvent(this._onPageChangedEventname,{detail:A})}const U=this._getTitleFromNavMenu(A.location);this.dispatchEvent(this._onPageTitleChanged,{menuTitle:U.title,localizableMenuTitle:U.localaizableTitle,pageTitle:null===(R=null===(V=this.currentPage)||void 0===V?void 0:V.winControl)||void 0===R?void 0:R.title,localizebalePageTitle:null===(N=null===(D=this.currentPage)||void 0===D?void 0:D.winControl)||void 0===N?void 0:N.localizableTitle})}}else if(A.isView){if(this._viewHistory.length>=this._viewHistorySize&&this._viewHistory.shift(),A.ctrl&&!A.ctrl.pageOptions&&A.state&&(A.ctrl.pageOptions=A.state),this.currentView=A.ctrl,this.currentViewName=A.location,A.viewLocation=A.location,A.location!==this._loadingView&&("Cache"!==x.Application.Settings.UI.PageMode&&(A.ctrl=null),x.isNullOrUndefined(A.error)&&this._viewHistory.push(A)),A.error&&A.error.error){const V={statusText:A.error.error.statusText,status:A.error.error.status,viewLocation:A.viewLocation,regionID:A.regionID,pageLocation:A.pageLocation};A.error.error.status&&x.Application.WarnLog.log("NavigationService navigateToView invalid view:",V)}this.dispatchEvent(this._onViewChangedEventname,{detail:A}),this.dispatchEvent(this._onViewTitleChanged,{menuTitle:null,localizableMenuTitle:null,pageTitle:null===(B=null===(U=this.currentView)||void 0===U?void 0:U.winControl)||void 0===B?void 0:B.title,localizebalePageTitle:null===(W=null===(F=this.currentView)||void 0===F?void 0:F.winControl)||void 0===W?void 0:W.localizableTitle})}}catch(V){let R=A.location+" ";V.message&&(R+="Message: "+V.message),V.stack&&(R+=" | stack: "+V.stack),x.Application.WarnLog.log("Could not update navigation service history",R)}}_beforeNavigate(A){return __awaiter(this,void 0,void 0,(function*(){x.Utilities.isInDesignMode()||A.detail.setPromise(new Promise((V,R)=>__awaiter(this,void 0,void 0,(function*(){if(!this._showLoadingPageForUncachedPages&&!1===A.detail.showLoadingSymbol)return V(null);if(A.detail.location===this._loadingPage||A.detail.location===this._requieredPage.location)V(null);else{const R=[...this._pageHistory];this._requieredPage=A.detail;let D=!1;for(let x=0;x<R.length;x++)if(R[x].location===this._requieredPage.location){D=!0;break}if(!D&&(!0===A.detail.showLoadingSymbol||this._showLoadingPageForUncachedPages))try{this._loadingPage&&(yield this._navigateToLoadingPage(this._loadingPage,null),this.isNavigationCurrentlyRunning=!1,yield x.sleep(10))}catch(x){}try{D?(!0===A.detail.showLoadingSymbol||this._showLoadingPageForUncachedPages)&&this.navigateToPage(this._requieredPage.location,this._requieredPage.state,!1):yield this.navigateToPage(this._requieredPage.location,this._requieredPage.state,!1)}catch(x){}this._requieredPage={location:null,state:null},V(null)}}))))}))}_initObservables(){return __awaiter(this,void 0,void 0,(function*(){this.preloadingObject={preloadingFileCount:10,preloadingCounter:0,preloadingFilename:"",preloadingPercent:0,preloadingReady:!1,preloadingEnable:x.Application.Settings.UI.Preloading.Enabled},this.preloadingObjectDescription={category:"Navigation",displayName:"PreloadingObject"},this.preloadingObjectObservableDescription={preloadingFileCount:{propertyType:"member",displayName:"PreloadingFileCount",type:"number",access:"r"},preloadingCounter:{propertyType:"member",displayName:"PreloadingCounter",type:"number",access:"r"},preloadingFilename:{propertyType:"member",displayName:"PreloadingFileName",type:"string",access:"r"},preloadingPercent:{propertyType:"member",displayName:"PreloadingPercent",type:"number",access:"r"},preloadingReady:{propertyType:"member",displayName:"PreloadingReady",type:"number",boolean:"r"},preloadingIsEnable:{propertyType:"member",displayName:"PreloadIsEnable",type:"boolean",access:"r"}},this.preloadingObject=x.Binding.as(this.preloadingObject),x.Observables.preloadingObject=this.preloadingObject,x.AppServices.DataService.registerDesignTimeObservable("preloadingObject",this.preloadingObjectDescription,this.preloadingObjectObservableDescription)}))}_navigateToLoadingPage(x,A,V=!1){return __awaiter(this,void 0,void 0,(function*(){return new Promise((V,R)=>{this._resolveLoadingViewChange=V;try{WinJS.Promise.as(this.navigate(x,A,!1)).then(x=>{},x=>{})}catch(x){R(x)}})}))}navigateToPage(A,V,R=!1){return __awaiter(this,void 0,void 0,(function*(){if(A!==this._requestedPage){if(!x.isString(A)&&""===A)return this.isNavigationCurrentlyRunning=!1,Promise.reject(null);if(this.currentPage&&this.currentPage.winControl.location===A){const x=this._pageHistory.find(x=>x.location===A);return this.isNavigationCurrentlyRunning=!1,Promise.resolve({detail:x})}return this._requestedPage=A,this._resolvePageChange=null,this._rejectPageChange=null,new Promise((x,D)=>{this._resolvePageChange=x;try{WinJS.Promise.as(this.navigate(A,V,R)).then(x=>{},x=>{})}catch(x){D(x)}})}}))}getPageHistory(){return this._pageHistory}navigateToView(A,V,R,D,N=!1){return __awaiter(this,void 0,void 0,(function*(){const U={error:"Empty viewName:"+V,location:V,setPromise:null,state:null,isPage:!1,isView:!0,regionID:R,viewLocation:V,pageLocation:A,value:D,ctrl:null,showLoadingSymbol:N};if(!x.isString(V)&&""===V)return Promise.reject({detail:U});if(!x.isString(R)&&""===R)return U.error="Empty regionName: "+R,Promise.reject({detail:U});if(x.isString(A)&&""!==A){const U=yield this.navigateToPage(A,D,N);return this._resolveViewChange=null,new Promise((B,F)=>{try{if(U){const F=document.getElementById(x.Utilities.removeHashFromId(R));if(F&&F.winControl)if(F.winControl.viewName==V)U.detail.isView=!0,U.detail.regionID=R,U.detail.showLoadingSymbol=N,U.detail.viewLocation=V,this._resolveViewChange=B,B(U);else if(null===F.winControl.viewName||""===F.winControl.viewName)D&&(F.winControl.pageOptions=D),this._resolveViewChange=B,U.detail.showLoadingSymbol=N,F.winControl.viewName=V;else{let A=!1;for(var W in x.UI.pages)x.UI.pages[W]&&x.UI.pages[W].winControl&&x.UI.pages[W].winControl.uri&&x.Internal.stringContains(x.UI.pages[W].winControl.uri,F.winControl.viewName)&&(A=!0);A?window.setTimeout(()=>{D&&(F.winControl.pageOptions=D),this._resolveViewChange=B,U.detail.showLoadingSymbol=N,F.winControl.viewName=V},0):window.setTimeout(()=>{D&&(F.winControl.pageOptions=D),this._resolveViewChange=B,U.detail.showLoadingSymbol=N,F.winControl.viewName=V},100)}else{if(null===F&&U.detail){U.detail.error=`Region('${R}') not found in Page('${A}').`,U.detail.isView=!0,U.detail.regionID=R,U.detail.viewLocation=V;const D={regionName:U.detail.regionID,pageLocation:U.detail.location,viewLocation:U.detail.viewLocation};x.Application.WarnLog.log("NavigationService navigateToView invalid region:",D)}else U.detail={location:A,state:D,error:`Region('${R}') not found in Page('${A}').`,isView:!0,regionID:R,viewLocation:V},x.Application.WarnLog.log("NavigationService navigateToView:",U.detail);this.currentPageName="",this.isNavigationCurrentlyRunning=!1,B(U)}}}catch(x){F(x)}})}return U.error="Unkown Error",Promise.reject({detail:U})}))}navigateToViews(A,V,R,D,N=!1){return __awaiter(this,void 0,void 0,(function*(){const U=[];for(let B=0;B<V.length;B++)if(R[B]){const x=yield this.navigateToView(A,V[B],R[B],D,N);U.push(x)}else x.Application.WarnLog.log(`NavigationService.navigateToViews: views(${V.length}) and regions(${R.length}) array  do not match.`);return Promise.resolve(U)}))}getViewHistory(x){if(x){return this._viewHistory.filter(A=>A.regionID===x)}return this._viewHistory}_handleMissingPages(x){return __awaiter(this,void 0,void 0,(function*(){if(this._skippedPages.length>0)if(this._includePartiallyLoadedPages){const x=this._skippedPages.shift();x&&null!==x.location&&(this.currentPage&&this.currentPage.winControl&&this.currentPage.winControl.location!==x.location?yield this.navigateToPage(x.location,x.state,x.showLoadingSymbol):this._handleMissingPages(x))}else{const x=this._skippedPages.pop();this._skippedPages=[],yield this.navigateToPage(x.location,x.state,x.showLoadingSymbol)}}))}raiseBeforeNavigate(x){return WinJS.Promise.as().then(function(){let A=WinJS.Promise.as(),V=this.dispatchEvent(this._beforenavigateEventName,{detail:{setPromise:function(x){A=A.then((function(){return x}))},location:x.location,state:x.state,showLoadingSymbol:x.showLoadingSymbol}});return this.currentPageName===x.location&&this._loadingPage!==x.location&&(V={}),A.then((function beforeNavComplete(x){return V||x}))}.bind(this))}raiseNavigating(x){return WinJS.Promise.as().then(function(){let A=WinJS.Promise.as();return this.currentPageName!==this._history.current.location&&this.dispatchEvent(this._navigatingEventName,{detail:{setPromise:function(x){A=A.then((function(){return x}))},location:this._history.current.location,state:this._history.current.state,delta:x,showLoadingSymbol:this._history.current.showLoadingSymbol}}),A}.bind(this))}raiseNavigated(x,A){let V=WinJS.Promise.as();const R=this._history,D={detail:{value:x,location:R.current.location,state:R.current.state,setPromise:function(x){V=V.then((function(){return x}))},error:null,showLoadingSymbol:R.current.showLoadingSymbol}};return!x&&A&&(D.detail.error=A),this._currentPage=R.current.location,this.currentPageName!==this._history.current.location&&(this.dispatchEvent(this._navigatedInternalEventName,D),this.dispatchEvent(this._navigatedEventName,D)),V}navigate(x,A,V=!1){if(null==x)return;if(x!==this._loadingPage&&this.isNavigationCurrentlyRunning){const R={location:x,state:A,showLoadingSymbol:V};return void this._skippedPages.push(R)}this.isNavigationCurrentlyRunning=!0;const R={location:x,state:A,showLoadingSymbol:V};return this.raiseBeforeNavigate(R).then(function navBeforeCompleted(x){return x?(this.raiseNavigating().then(function(){this.raiseNavigated(void 0,"Canceled Navigation")}.bind(this)),this.isNavigationCurrentlyRunning=!1,!1):(this._history.current.initialPlaceholder||(this._history.current.showLoadingSymbol=V,this._history.current.location!==this._loadingPage&&(0===this._history.backStack.length?this._history.backStack.push(this._history.current):this._history.backStack[this._history.backStack.length-1].location!==this._history.current.location&&(this._history.backStack.length>=this._pageHistorySize&&this._history.backStack.shift(),this._history.backStack.push(this._history.current)))),R.location!==this._loadingPage&&(this._history.forwardStack=[]),this._history.current=R,this.raiseNavigating().then(this.raiseNavigated.bind(this),function(x){throw this.raiseNavigated(void 0,x||!0),x}.bind(this)).then((function(x){return!0})))}.bind(this))}get canGoForward(){return this._history.forwardStack.length>0}get canGoBack(){return this._history.backStack.length>0}get location(){return this._history.current.location}get state(){return this._history.current.state}set state(x){this._history.current.state=x}get history(){return this._history}set history(x){this._history=x,this._history.backStack=this._history.backStack||[],this._history.forwardStack=this._history.forwardStack||[],this._history.current=this._history.current||{location:"",initialPlaceholder:!0,state:null,showLoadingSymbol:!1},this._history.current.location=this._history.current.location||""}go(x,A,V,R){return(x=Math.min(x,A.length))>0?(this.currentPageName="",this._history.current.location===A[A.length-x].location&&A.pop(),this.raiseBeforeNavigate(A[A.length-x]).then(function goBeforeCompleted(D){if(D)return!1;for(V.push(this._history.current);x-1>0;)x--,V.push(A.pop());return this._history.current=A.pop(),this.raiseNavigating(R).then(this.raiseNavigated.bind(this),function(x){throw this.raiseNavigated(void 0,x||!0),x}.bind(this)).then((function(x){return!0}))}.bind(this))):WinJS.Promise.wrap(!1)}forward(x){return x=x||1,this.go(x,this._history.forwardStack,this._history.backStack,x)}back(x){return x=x||1,this.go(x,this._history.backStack,this._history.forwardStack,-x)}getCurrentPage(){return this._currentPage?this._currentPage:null}getPageInfo(x){return this.pageInfo[x]?this.pageInfo[x]:null}setPageState(A,V){if(this.pageInfo[A])switch(this.pageInfo[A].state=V,V){case x.UI.PageState.PageBeforeNavigate:this.pageInfo[A].isReady=!1,this.pageInfo[A].isInit=!1,this.pageInfo[A].isAttach=!1,this.pageInfo[A].isDetach=!1;break;case x.UI.PageState.PageNavigating:case x.UI.PageState.PageNavigated:break;case x.UI.PageState.PageReady:this.pageInfo[A].isReady=!0;break;case x.UI.PageState.PageInitialize:this.pageInfo[A].isInit=!0;break;case x.UI.PageState.PageAttach:this.pageInfo[A].isAttach=!0,this.pageInfo[A].isDetach=!1;break;case x.UI.PageState.PageDetach:this.pageInfo[A].isAttach=!1,this.pageInfo[A].isDetach=!0;break;case x.UI.PageState.PageDispose:this.pageInfo[A].isReady=!1,this.pageInfo[A].isInit=!1,this.pageInfo[A].isAttach=!1,this.pageInfo[A].isDetach=!1}}dispose(){return super.dispose()}init(){this._storageName=x.Application.storageName+this._storageExtension;let A=parseInt(localStorage.getItem(this._storageName));"number"==typeof A&&NaN!=A||(A=10),this.preloadingObject.preloadingFileCount=A,this.preloadingObject.preloadingCounter=0,this.preloadingObject.preloadingFilename="",this.preloadingObject.preloadingPercent=0}ready(){}unload(){}}NavigationService.namespace="VisiWin.NavigationServices.Impl",NavigationService.serviceName="NavigationService",NavigationService.requireServices=["MessageService","AppService"],A.NavigationService=NavigationService}(A.Impl||(A.Impl={}))}(x.AppServices||(x.AppServices={}))}(VisiWin||(VisiWin={})),function(x){!function(x){let A;!function(x){x.PageBeforeNavigate="pageBeforeNavigate",x.PageNavigating="pageNavigating",x.PageNavigated="pageNavigated",x.PageReady="pageReady",x.PageInitialize="pageInitialize",x.PageAttach="pageAttach",x.PageDetach="pageDetach",x.PageDispose="pageDispose"}(A=x.PageState||(x.PageState={}))}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){"use strict";class RecipeService extends x.AppServices.Impl.ServiceBase{constructor(){super(),this._recipeService=null,this._session=x.Internal.Application.ApplicationManager.getApplication().getDefaultSession(),this._recipeClassNames=null,this._pendingActionRecipeClassRequests=[],this._hasPendingActionRecipeClassRequests=!1,this.createEvent("designModeDataLoaded")}set recipeClassNames(x){this._recipeClassNames=x}get recipeClassNames(){return this._recipeClassNames}getRecipeClassAsync(x){return __awaiter(this,void 0,void 0,(function*(){const A=yield this._recipeService.GetRecipeClassAsync(x);return Promise.resolve(A)}))}deleteFileAsync(x,A){return __awaiter(this,void 0,void 0,(function*(){const V=yield this._recipeService.DeleteFileAsync(x,A);return Promise.resolve(V)}))}getRecipeFileAsync(x,A){return __awaiter(this,void 0,void 0,(function*(){const V=yield this._recipeService.GetRecipeFileAsync(x,A);return Promise.resolve(V)}))}getRecipeFileNamesAsync(x){return __awaiter(this,void 0,void 0,(function*(){const A=yield this._recipeService.GetRecipeFileNamesAsync(x);return Promise.resolve(A)}))}loadRecipeFileValuesAsync(x,A,V){return __awaiter(this,void 0,void 0,(function*(){const R=yield this._recipeService.LoadRecipeFileValuesAsync(x,A,V);return Promise.resolve(R)}))}unlockAllAsync(){return __awaiter(this,void 0,void 0,(function*(){const x=yield this._recipeService.UnlockAllAsync();return Promise.resolve(x)}))}_initRecipeClassForAction(x){return __awaiter(this,void 0,void 0,(function*(){if(this._currentActionRecipeClass&&this._currentActionRecipeClass.Name===x)return Promise.resolve(this._currentActionRecipeClass);{let A,V;const R=new Promise((x,R)=>{A=x,V=R});return this._pendingActionRecipeClassRequests.push({resolveFn:A,rejectFn:V}),this._setRecipeClass(x),R}}))}_setRecipeClass(x){return __awaiter(this,void 0,void 0,(function*(){if(this.RecipeClass,!this._hasPendingActionRecipeClassRequests){this._hasPendingActionRecipeClassRequests=!0;const A=yield this.getRecipeClassAsync(x);return A.RecipeClass?(this._currentActionRecipeClass=A.RecipeClass,this._pendingActionRecipeClassRequests.length>0&&(this._currentActionRecipeClass?this._pendingActionRecipeClassRequests.forEach(x=>{x.resolveFn(this._currentActionRecipeClass)}):this._pendingActionRecipeClassRequests.forEach(x=>{x.rejectFn(null)}),this._pendingActionRecipeClassRequests=[]),Promise.resolve(A.RecipeClass)):Promise.resolve(null)}}))}_registerDesignTimeViewModels(){x.Utilities.isInDesignMode()&&(new x.ViewModels.Recipe.RecipeClass(null,null),new x.ViewModels.Recipe.ClassNames(null,null),new x.ViewModels.Recipe.FileNames(null,null),new x.ViewModels.Recipe.Files(null,null),new x.ViewModels.Recipe.Variables(null,null),new x.ViewModels.Recipe.DeleteFile(null,null),new x.ViewModels.Recipe.NewFile(null,null),new x.ViewModels.Recipe.SaveFileAs(null,null),new x.ViewModels.Recipe.WriteBufferToProcess(null,null))}init(){return __awaiter(this,void 0,void 0,(function*(){-1!=x.Application.Settings.System.SystemLoader.indexOf("Recipe")&&(this._recipeService=x.System.Recipe.RecipeService.getService(),this._session.RecipeManager.attach(),this._recipeService&&(this.recipeClassNames=this._recipeService.RecipeClassNames),this._registerDesignTimeViewModels())}))}ready(){}unload(){}dispose(){return super.dispose()}}RecipeService.namespace="VisiWin.AppServices.Impl",RecipeService.serviceName="RecipeService",A.RecipeService=RecipeService}(A.Impl||(A.Impl={}))}(x.AppServices||(x.AppServices={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){!function(x){let A;!function(x){x[x.NoUser=0]="NoUser",x[x.NoGroupName=1]="NoGroupName",x[x.NoPassword=2]="NoPassword",x[x.NoUserNoPassword=3]="NoUserNoPassword",x[x.NoNewPassword=4]="NoNewPassword",x[x.NoOldPassword=5]="NoOldPassword",x[x.NoRepeatPassword=6]="NoRepeatPassword",x[x.NewPasswordsNotEqual=7]="NewPasswordsNotEqual",x[x.NoWorkState=8]="NoWorkState"}(A=x.InteractivEvents||(x.InteractivEvents={})),Object.freeze(A)}(x.UserManagement||(x.UserManagement={}))}(x.Impl||(x.Impl={}))}(x.AppServices||(x.AppServices={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){"use strict";class UserManagementService extends x.AppServices.Impl.ServiceBase{constructor(){super(),this.currentUser=null,this.currentUserDescription=null,this.currentUserObservableDescription=null,this.logon=null,this.logonDescription=null,this.logonObservableDescription=null,this.logonHandler=null,this.changePassword=null,this.changePasswordDescription=null,this.changePasswordObservableDescription=null,this.changePasswordHandler=null,this.addUser=null,this.addUserDescription=null,this.addUserObservableDescription=null,this.addUserHandler=null,this.changeUser=null,this.changeUserDescription=null,this.changeUserObservableDescription=null,this.changeUserHandler=null,this.removeUser=null,this.removeUserDescription=null,this.removeUserPropertyDescription=null,this.removeUserHandler=null,this.userList=null,this.removableUserList=null,this.userListDescription=null,this.userListDataSourceDescription=null,this.userGroupList=null,this.userGroupListDescription=null,this.userGroupListDataSourceDescription=null,this._appService=x.AppServices.AppService,this._userManagementService=null,this._boundUserLoggedOnHandler=this._userLoggedOnHandler.bind(this),this._boundUserLoggedOffHandler=this._userLoggedOffHandler.bind(this),this._boundUsersModifiedHandler=this.updateUserList.bind(this),this._boundGroupsModifiedHandler=this.updateUserList.bind(this),this._boundRightsModifiedHandler=this.updateUserList.bind(this),this._dataService=null,this.userStateList=[{userState:"Deactivated",locUserState:null,index:0},{userState:"Active",locUserState:null,index:1},{userState:"Invalidated",locUserState:null,index:2},{userState:"PasswordExpired",locUserState:null,index:3}],this._userManagementService=x.System.UserManagement.UserManagementService.getService(),this._dataService=x.AppServices.DataService,this._initObservables(),this._userManagementService.UserLoggedOn.add(this._boundUserLoggedOnHandler),this._userManagementService.UserLoggedOff.add(this._boundUserLoggedOffHandler),x.Application.Settings.UI.AutomaticUpdateUserManagement&&(this._userManagementService.UsersModified.add(this._boundUsersModifiedHandler),this._userManagementService.GroupsModified.add(this._boundGroupsModifiedHandler),this._userManagementService.RightsModified.add(this._boundRightsModifiedHandler))}ready(){return __awaiter(this,void 0,void 0,(function*(){let A=!1;x.Utilities.isInDesignMode()?x.DataSources.userList=new WinJS.Binding.List(this.userList):null!==this.userList&&0!==this.userList.length||(A=!0),x.Utilities.isInDesignMode()?x.DataSources.userGroupList=new WinJS.Binding.List(this.userGroupList):null!==this.userGroupList&&0!==this.userGroupList.length||(A=!0),null!==this.removableUserList&&0!==this.removableUserList.length||(A=!0),""===this._userManagementService.CurrentUserName&&(A=!0),this.updateUserStateList()}))}_initObservables(){return __awaiter(this,void 0,void 0,(function*(){this.userList=[],this.userListDescription={category:"UserManagement",displayName:"UserList"},this.userListDataSourceDescription={name:{propertyType:"member",displayName:"Name",type:"string",access:"ro"},fullName:{propertyType:"member",displayName:"FullName",type:"string",access:"ro"},groupName:{propertyType:"member",displayName:"GroupName",type:"string",access:"ro"},userState:{propertyType:"member",displayName:"UserState",type:"string",access:"ro"}},x.DataSources.userList=new WinJS.Binding.List(this.userList),x.AppServices.DataService.registerDesignTimeDataSource("userList",this.userListDescription,this.userListDataSourceDescription),this.userGroupList=[],this.userGroupListDescription={category:"UserManagement",displayName:"UserList"},this.userGroupListDataSourceDescription={name:{propertyType:"member",displayName:"Name",type:"string",access:"ro"},text:{propertyType:"member",displayName:"FullName",type:"string",access:"ro"},localizableText:{propertyType:"member",displayName:"GroupName",type:"string",access:"ro"}},x.DataSources.userGroupList=new WinJS.Binding.List(this.userGroupList),x.AppServices.DataService.registerDesignTimeDataSource("userGroupList",this.userGroupListDescription,this.userGroupListDataSourceDescription),this.currentUser={name:"",Name:"",fullName:"",FullName:""},this.currentUserDescription={category:"UserManagement",displayName:"CurrentUser"},this.currentUserObservableDescription={name:{propertyType:"member",displayName:"Name",type:"string",access:"ro"},fullName:{propertyType:"member",displayName:"FullName",type:"string",access:"ro"}},this.currentUser=x.Binding.as(this.currentUser),x.Observables.currentUser=this.currentUser,x.AppServices.DataService.registerDesignTimeObservable("currentUser",this.currentUserDescription,this.currentUserObservableDescription),this.logon={name:"",password:"",errorText:"",isUserNameError:!1,isPasswordError:!1,canExecute:!1,reset:WinJS.UI.eventHandler(function(x){this.resetLogon()}.bind(this)),command:WinJS.UI.eventHandler(function(x){this.loginAsync()}.bind(this))},this.logonDescription={category:"UserManagement",displayName:"Logon"},this.logonObservableDescription={name:{propertyType:"member",displayName:"Name",type:"string",access:"rw"},password:{propertyType:"member",displayName:"Password",type:"string",access:"rw"},errorText:{propertyType:"member",displayName:"ErrorText",type:"string",access:"ro"},isUserNameError:{propertyType:"member",displayName:"IsUserNameError",type:"boolean",access:"ro"},isPasswordError:{propertyType:"member",displayName:"IsPasswordError",type:"boolean",access:"ro"},canExecute:{propertyType:"member",displayName:"CanExecute",type:"boolean",access:"ro"},reset:{propertyType:"command",displayName:"Reset",access:"rw"},command:{propertyType:"command",displayName:"Command",access:"rw"}},this.logon=x.Binding.as(this.logon),x.Observables.logon=this.logon,x.AppServices.DataService.registerDesignTimeObservable("logon",this.logonDescription,this.logonObservableDescription),this.logonHandler=function(x){this.logon.name&&this.logon.password?this.logon.canExecute=!0:this.logon.canExecute=!1}.bind(this),this.logon.bind("name",this.logonHandler),this.logon.bind("password",this.logonHandler),this.changePassword={name:"",fullName:"",password:"",newPassword:"",repeatPassword:"",errorText:"",isPasswordError:!1,isNewPasswordError:!1,isRepeatPasswordError:!1,canExecute:!1,reset:x.UI.eventHandler(function(x){this.resetChangePassword()}.bind(this)),command:x.UI.eventHandler(function(x){this.changePasswordCurrentUserAsync()}.bind(this))},this.changePasswordDescription={category:"UserManagement",displayName:"ChangePassword"},this.changePasswordObservableDescription={name:{propertyType:"member",displayName:"Name",type:"string",access:"ro"},fullName:{propertyType:"member",displayName:"FullName",type:"string",access:"ro"},password:{propertyType:"member",displayName:"Password",type:"string",access:"rw"},newPassword:{propertyType:"member",displayName:"NewPassword",type:"string",access:"rw"},repeatPassword:{propertyType:"member",displayName:"RepeatPassword",type:"string",access:"rw"},errorText:{propertyType:"member",displayName:"ErrorText",type:"string",access:"ro"},isPasswordError:{propertyType:"member",displayName:"IsPasswordError",type:"boolean",access:"ro"},isNewPasswordError:{propertyType:"member",displayName:"IsNewPasswordError",type:"boolean",access:"ro"},isRepeatPasswordError:{propertyType:"member",displayName:"IsRepeatPasswordError",type:"boolean",access:"ro"},canExecute:{propertyType:"member",displayName:"CanExecute",type:"boolean",access:"ro"},reset:{propertyType:"command",displayName:"Reset",access:"rw"},command:{propertyType:"command",displayName:"Command",access:"rw"}},this.changePassword=x.Binding.as(this.changePassword),x.Observables.changePassword=this.changePassword,x.AppServices.DataService.registerDesignTimeObservable("changePassword",this.changePasswordDescription,this.changePasswordObservableDescription),this.changePasswordHandler=function(x){this.changePassword.password&&this.changePassword.newPassword&&this.changePassword.repeatPassword?this.changePassword.canExecute=!0:this.changePassword.canExecute=!1}.bind(this),this.changePassword.bind("password",this.changePasswordHandler),this.changePassword.bind("newPassword",this.changePasswordHandler),this.changePassword.bind("repeatPassword",this.changePasswordHandler),this.addUser={name:"",fullName:"",groupName:"",userState:"",newPassword:"",repeatPassword:"",errorText:"",isUserNameError:!1,isUserFullNameError:!1,isUserGroupError:!1,isNewPasswordError:!1,isRepeatPasswordError:!1,isUserStateError:!1,isUserCodeError:!1,canExecute:!1,reset:x.UI.eventHandler(function(x){this.resetAddUser()}.bind(this)),command:x.UI.eventHandler(function(x){this.addUserAsync()}.bind(this))},this.addUserDescription={category:"UserManagement",displayName:"AddUser"},this.addUserObservableDescription={name:{propertyType:"member",displayName:"Name",type:"string",access:"rw"},fullName:{propertyType:"member",displayName:"FullName",type:"string",access:"rw"},groupName:{propertyType:"member",displayName:"GroupName",type:"string",access:"rw"},userState:{propertyType:"member",displayName:"UserState",type:"string",access:"rw"},newPassword:{propertyType:"member",displayName:"NewPassword",type:"string",access:"rw"},repeatPassword:{propertyType:"member",displayName:"RepeatPassword",type:"string",access:"rw"},errorText:{propertyType:"member",displayName:"ErrorText",type:"string",access:"ro"},isUserNameError:{propertyType:"member",displayName:"IsUserNameError",type:"boolean",access:"ro"},isUserFullNameError:{propertyType:"member",displayName:"IsUserFullnameError",type:"boolean",access:"ro"},isUserGroupError:{propertyType:"member",displayName:"IsUserGroupError",type:"boolean",access:"ro"},isNewPasswordError:{propertyType:"member",displayName:"IsNewPasswordError",type:"boolean",access:"ro"},isRepeatPasswordError:{propertyType:"member",displayName:"IsRepeatPasswordError",type:"boolean",access:"ro"},isUserStateError:{propertyType:"member",displayName:"IsUserStateError",type:"boolean",access:"ro"},isUserCodeError:{propertyType:"member",displayName:"IsUserCodeError",type:"boolean",access:"ro"},canExecute:{propertyType:"member",displayName:"CanExecute",type:"boolean",access:"ro"},reset:{propertyType:"command",displayName:"Reset",access:"rw"},command:{propertyType:"command",displayName:"Command",access:"rw"}},this.addUser=x.Binding.as(this.addUser),x.Observables.addUser=this.addUser,x.AppServices.DataService.registerDesignTimeObservable("addUser",this.addUserDescription,this.addUserObservableDescription),this.addUserHandler=function(x){this.addUser.name&&this.addUser.groupName&&this.addUser.newPassword&&this.addUser.repeatPassword&&this.addUser.userState?this.addUser.canExecute=!0:this.addUser.canExecute=!1}.bind(this),this.addUser.bind("name",this.addUserHandler),this.addUser.bind("groupName",this.addUserHandler),this.addUser.bind("newPassword",this.addUserHandler),this.addUser.bind("repeatPassword",this.addUserHandler),this.addUser.bind("userState",this.addUserHandler),this.changeUser={name:"",fullName:"",groupName:"",userState:"",newPassword:"",repeatPassword:"",errorText:"",changePasswordFlag:!1,noUserSelected:!0,isUserNameError:!1,isUserFullNameError:!1,isUserGroupError:!1,isUserStateError:!1,isPasswordError:!1,isNewPasswordError:!1,isRepeatPasswordError:!1,isCodeError:!1,canExecute:!1,reset:x.UI.eventHandler(function(x){this.resetChangeUser()}.bind(this)),command:x.UI.eventHandler(function(x){this.changeUserAsync()}.bind(this))},this.changeUserDescription={category:"UserManagement",displayName:"ChangeUser"},this.changeUserObservableDescription={name:{propertyType:"member",displayName:"Name",type:"string",access:"rw"},fullName:{propertyType:"member",displayName:"FullName",type:"string",access:"rw"},groupName:{propertyType:"member",displayName:"GroupName",type:"string",access:"rw"},userState:{propertyType:"member",displayName:"UserState",type:"string",access:"rw"},newPassword:{propertyType:"member",displayName:"NewPassword",type:"string",access:"rw"},repeatPassword:{propertyType:"member",displayName:"RepeatPassword",type:"string",access:"rw"},errorText:{propertyType:"member",displayName:"ErrorText",type:"string",access:"rw"},changePasswordFlag:{propertyType:"member",displayName:"ChangePasswordFlag",type:"boolean",access:"rw"},noUserSelected:{propertyType:"member",displayName:"NoUserSelected",type:"boolean",access:"ro"},isUserNameError:{propertyType:"member",displayName:"IsUserNameError",type:"boolean",access:"ro"},isUserFullNameError:{propertyType:"member",displayName:"IsUserFullNameError",type:"boolean",access:"ro"},isUserGroupError:{propertyType:"member",displayName:"IsUserGroupError",type:"boolean",access:"ro"},isUserStateError:{propertyType:"member",displayName:"IsUserStateError",type:"boolean",access:"ro"},isPasswordError:{propertyType:"member",displayName:"IsPasswordError",type:"boolean",access:"ro"},isNewPasswordError:{propertyType:"member",displayName:"IsNewPasswordError",type:"boolean",access:"ro"},isRepeatPasswordError:{propertyType:"member",displayName:"IsRepeatPasswordError",type:"boolean",access:"ro"},isCodeError:{propertyType:"member",displayName:"IsCodeError",type:"boolean",access:"ro"},canExecute:{propertyType:"member",displayName:"CanExcecute",type:"boolean",access:"ro"},reset:{propertyType:"command",displayName:"Reset",access:"rw"},command:{propertyType:"command",displayName:"Command",access:"rw"}},this.changeUser=x.Binding.as(this.changeUser),x.Observables.changeUser=this.changeUser,x.AppServices.DataService.registerDesignTimeObservable("changeUser",this.changeUserDescription,this.changeUserObservableDescription),this.changeUser.bind("name",function(x){x&&(this.changeUser.noUserSelected=!1)}.bind(this)),this.changeUserHandler=function(x){this.changeUser.changePasswordFlag?this.changeUser.name&&this.changeUser.groupName&&this.changeUser.newPassword&&this.changeUser.repeatPassword&&this.changeUser.userState?this.changeUser.canExecute=!0:this.changeUser.canExecute=!1:this.changeUser.name&&this.changeUser.groupName&&this.changeUser.userState?this.changeUser.canExecute=!0:this.changeUser.canExecute=!1}.bind(this),this.changeUser.bind("name",this.changeUserHandler),this.changeUser.bind("groupName",this.changeUserHandler),this.changeUser.bind("newPassword",this.changeUserHandler),this.changeUser.bind("repeatPassword",this.changeUserHandler),this.changeUser.bind("userState",this.changeUserHandler),this.changeUser.bind("changePasswordFlag",this.changeUserHandler),this.removeUser={name:"",errorText:"",isUserNameError:!1,canExecute:!1,reset:x.UI.eventHandler(function(x){this.resetRemoveUser()}.bind(this)),command:x.UI.eventHandler(function(x){this.removeUserAsync()}.bind(this))},this.removeUserDescription={category:"UserManagement",displayName:"RemoveUser"},this.removeUserPropertyDescription={name:{propertyType:"member",displayName:"Name",type:"string",access:"rw"},errorText:{propertyType:"member",displayName:"ErrorText",type:"string",access:"rw"},isUserNameError:{propertyType:"member",displayName:"IsUserNameError",type:"string",access:"rw"},canExecute:{propertyType:"member",displayName:"CanExcecute",type:"boolean",access:"ro"},reset:{propertyType:"command",displayName:"Reset",access:"rw"},command:{propertyType:"command",displayName:"Command",access:"rw"}},this.removeUser=x.Binding.as(this.removeUser),x.Observables.removeUser=this.removeUser,x.AppServices.DataService.registerDesignTimeObservable("removeUser",this.removeUserDescription,this.removeUserPropertyDescription),this.removeUserHandler=function(x){this.removeUser.name?this.removeUser.canExecute=!0:this.removeUser.canExecute=!1}.bind(this),this.removeUser.bind("name",this.removeUserHandler),x.AppServices.DataService.setData("User",this.currentUser),x.AppServices.DataService.setData("CurrentUser",this.currentUser)}))}_userStateIndexByName(x){for(let A=0;A<this.userStateList.length;A++)if(this.userStateList[A].userState===x)return this.userStateList[A].index;return-1}_userStateByIndex(x){return x>=0&&x<this.userStateList.length?this.userStateList[x].userState:"UnknownState"}_locUserStateByIndex(x){return x>=0&&x<this.userStateList.length?null!==this.userStateList[x].locUserState&&this.userStateList[x].locUserState.length>0?this.userStateList[x].locUserState:this.userStateList[x].userState:"UnknownState"}_copyReturnToUser(x,A){for(const V in x)A[V]=x[V]}forceUserManagementUpdate(){return __awaiter(this,void 0,void 0,(function*(){yield this.updateUserList()}))}updateUserList(){return __awaiter(this,void 0,void 0,(function*(){try{let A;x.Utilities.isInDesignMode()||(A=yield this.getUsersAndGroupsAsync()),this.userList=[];let V=null;V=x.Utilities.isInDesignMode()?[]:A.Users;for(let x=0;x<V.length;x++)this.userList.push({name:V[x].Name,fullName:V[x].FullName,groupName:V[x].GroupName,userState:this._userStateByIndex(V[x].UserState),locUserState:this._locUserStateByIndex(V[x].UserState)});x.DataSources.userList=new WinJS.Binding.List(this.userList);let R=null;R=x.Utilities.isInDesignMode()?[]:A.UserGroups,this.userGroupList=[];for(let x=0;x<R.length;x++)this.userGroupList.push({name:R[x].Name,text:R[x].Text,locText:R[x].LocalizableText});x.DataSources.userGroupList=new WinJS.Binding.List(this.userGroupList),this.removableUserList=[];for(let x=0;x<V.length;x++)for(let A=0;A<R.length;A++)R[A].Name===V[x].GroupName&&R[A].UsersRemovable&&this.removableUserList.push({name:V[x].Name,fullName:V[x].FullName,groupName:V[x].GroupName,userState:this._userStateByIndex(V[x].UserState),locUserState:this._locUserStateByIndex(V[x].UserState)});x.DataSources.removableUserList=new WinJS.Binding.List(this.removableUserList)}catch(x){}}))}updateUserGroupList(){return __awaiter(this,void 0,void 0,(function*(){let A=null;A=x.Utilities.isInDesignMode()?[]:yield this.getUserGroupsAsync(),this.userGroupList=[];for(let x=0;x<A.length;x++)this.userGroupList.push({name:A[x].Name,text:A[x].Text,locText:A[x].LocalizableText});x.DataSources.userGroupList=new WinJS.Binding.List(this.userGroupList)}))}resultRemoveUser(A){return __awaiter(this,void 0,void 0,(function*(){const V=x.Application.Settings.UI.AppServices.UserManagementService.TextKeys;let R=null;const D={result:A,succeed:!1,reason:null,errorText:null,isUserNameError:!1};switch(A){case x.System.UserManagement.RemoveUserSuccess.Succeeded:return D.succeed=!0,D.reason="RemoveUserSuccess_Succeeded",D.errorText=null,D.isUserNameError=!0,D;case x.System.UserManagement.RemoveUserSuccess.DeletePermitted:return D.succeed=!1,D.reason="RemoveUser_DeletePermitted",R=yield x.AppServices.LanguageService.getTextFallback(V.DialogsUserManagementRemoveUserDeletePermitted),D.errorText=R.text,D.isUserNameError=!0,D;case x.System.UserManagement.RemoveUserSuccess.MethodCallFailed:return D.succeed=!1,D.reason="RemoveUser_MethodCallFailed",R=yield x.AppServices.LanguageService.getTextFallback(V.DialogsUserManagementRemoveUserMethodCallFailed),D.errorText=R.text,D.isUserNameError=!0,D;case x.System.UserManagement.RemoveUserSuccess.UnableToSaveUser:return D.succeed=!1,D.reason="RemoveUser_UnableToSaveUser",R=yield x.AppServices.LanguageService.getTextFallback(V.DialogsUserManagementRemoveUserUnableToSaveUser),D.errorText=R.text,D.isUserNameError=!0,D;case x.System.UserManagement.RemoveUserSuccess.UnknownGroup:return D.succeed=!1,D.reason="RemoveUser_UnknownGroup",R=yield x.AppServices.LanguageService.getTextFallback(V.DialogsUserManagementRemoveUserRemoveUserUnknownGroup),D.errorText=R.text,D.isUserNameError=!0,D;case x.System.UserManagement.RemoveUserSuccess.UnknownUser:return D.succeed=!1,D.reason="RemoveUser_UnknownUser",R=yield x.AppServices.LanguageService.getTextFallback(V.DialogsUserManagementRemoveUserUnknownUser),D.errorText=R.text,D.isUserNameError=!0,D;default:return D.succeed=!1,D.reason="RemoveUserSuccess_FailedUnknown_"+A,R=yield x.AppServices.LanguageService.getTextFallback(V.DialogsUserManagementRemoveUserMethodCallFaild),D.errorText=R.text,D.isUserNameError=!0,D}}))}resultAddUser(A){return __awaiter(this,void 0,void 0,(function*(){const V=x.Application.Settings.UI.AppServices.UserManagementService.TextKeys;let R=null;const D={result:A,succeed:!1,reason:null,errorText:null,isUserNameError:!1,isUserFullNameError:!1,isUserGroupError:!1,isNewPasswordError:!1,isRepeatPasswordError:!1,isUserStateError:!1,isUserCodeError:!1};switch(A){case x.System.UserManagement.AddUserSuccess.Succeeded:return D.succeed=!0,D.reason="AddUserSuccess_Succeeded",D.errorText=null,this.resetAddUser(),D;case x.System.UserManagement.AddUserSuccess.InvalidPasswordLength:return D.succeed=!1,D.reason="AddUserSuccess_InvalidPasswordLength",R=yield x.AppServices.LanguageService.getTextFallback(V.DialogsUserManagementAddUserSuccessInvalidPasswordLength),D.errorText=R.text,D.isNewPasswordError=!0,D;case x.System.UserManagement.AddUserSuccess.InvalidPassword:return D.succeed=!1,D.reason="AddUserSuccess_InvalidPassword",R=yield x.AppServices.LanguageService.getTextFallback(V.DialogsUserManagementAddUserSuccessInvalidPassword),D.errorText=R.text,D.isNewPasswordError=!0,D;case x.System.UserManagement.AddUserSuccess.UserExists:return D.succeed=!1,D.reason="AddUserSuccess_UserExists",R=yield x.AppServices.LanguageService.getTextFallback(V.DialogsUserManagementAddUserSuccessUserExists),D.errorText=R.text,D.isUserNameError=!0,D;case x.System.UserManagement.AddUserSuccess.UnableToSaveUser:return D.succeed=!1,D.reason="AddUserSuccess_UnableToSaveUser",R=yield x.AppServices.LanguageService.getTextFallback(V.DialogsUserManagementAddUserSuccessUnableToSaveUser),D.errorText=R.text,D.isUserNameError=!0,D;case x.System.UserManagement.AddUserSuccess.MethodCallFailed:return D.succeed=!1,D.reason="AddUserSuccess_MethodCallFailed",R=yield x.AppServices.LanguageService.getTextFallback(V.DialogsUserManagementAddUserSuccessMethodCallFailed),D.errorText=R.text,D.isNewPasswordError=!0,D;case x.System.UserManagement.AddUserSuccess.NoCharactersInPassword:return D.succeed=!1,D.reason="AddUserSuccess_NoCharactersInPassword",R=yield x.AppServices.LanguageService.getTextFallback(V.DialogsUserManagementAddUserSuccessNoCharactersInPassword),D.errorText=R.text,D.isNewPasswordError=!0,D;case x.System.UserManagement.AddUserSuccess.NoNumbersInPassword:return D.succeed=!1,D.reason="AddUserSuccess_NoNumbersInPassword",R=yield x.AppServices.LanguageService.getTextFallback(V.DialogsUserManagementAddUserSuccessNoNumbersInPassword),D.errorText=R.text,D.isNewPasswordError=!0,D;case x.System.UserManagement.AddUserSuccess.PasswordMustContainSpecialCharacters:return D.succeed=!1,D.reason="AddUserSuccess_PasswordMustContainSpecialCharacters",R=yield x.AppServices.LanguageService.getTextFallback(V.DialogsUserManagementAddUserSuccessPasswordMustContainSpecialCharacters),D.errorText=R.text,D.isNewPasswordError=!0,D;case x.System.UserManagement.AddUserSuccess.ForbiddenPassword:return D.succeed=!1,D.reason="AddUserSuccess_ForbiddenPassword",R=yield x.AppServices.LanguageService.getTextFallback(V.DialogsUserManagementAddUserSuccessForbiddenPassword),D.errorText=R.text,D.isNewPasswordError=!0,D;case x.System.UserManagement.AddUserSuccess.FullUserExists:return D.succeed=!1,D.reason="AddUserSuccess_FullUserExists",R=yield x.AppServices.LanguageService.getTextFallback(V.DialogsUserManagementAddUserSuccessFullUserExists),D.errorText=R.text,D.isUserFullNameError=!0,D;case x.System.UserManagement.AddUserSuccess.MachineCodeExists:return D.succeed=!1,D.reason="AddUserSuccess_MachineCodeExists",R=yield x.AppServices.LanguageService.getTextFallback(V.DialogsUserManagementAddUserSuccessMachineCodeExists),D.errorText=R.text,D.isUserCodeError=!0,D;case x.System.UserManagement.AddUserSuccess.LockedPassword:return D.succeed=!1,D.reason="AddUserSuccess_LockedPassword",R=yield x.AppServices.LanguageService.getTextFallback(V.DialogsUserManagementAddUserSuccessLockedPassword),D.errorText=R.text,D.isNewPasswordError=!0,D;case x.System.UserManagement.AddUserSuccess.UnknownGroup:return D.succeed=!1,D.reason="AddUserSuccess_NoUserGroup",R=yield x.AppServices.LanguageService.getTextFallback(V.DialogsUserManagementAddUserSuccessNoUserGroup),D.errorText=R.text,D.isUserGroupError=!0,D;default:return D.succeed=!1,D.reason="AddUserSuccess_FailedUnknown_"+A,R=yield x.AppServices.LanguageService.getTextFallback(V.DialogsUserManagementAddUserSuccessMethodCallFaild),D.errorText=R.text,D.isUserNameError=!0,D}}))}resultAddUserExpirse(A){return __awaiter(this,void 0,void 0,(function*(){const V=x.Application.Settings.UI.AppServices.UserManagementService.TextKeys;let R=null;const D={result:A,succeed:!1,reason:null,errorText:null,isUserNameError:!1,isUserFullNameError:!1,isUserGroupError:!1,isNewPasswordError:!1,isRepeatPasswordError:!1,isUserStateError:!1,isUserCodeError:!1};switch(A){case x.AppServices.Impl.UserManagement.InteractivEvents.NoUser:return D.succeed=!1,D.reason="LogOnSuccess_NoUser",R=yield x.AppServices.LanguageService.getTextFallback(V.DialogsUserManagementAddUserSuccessUINoUser),D.errorText=R.text,D.isUserNameError=!0,D;case x.AppServices.Impl.UserManagement.InteractivEvents.NoGroupName:return D.succeed=!1,D.reason="LogOnSuccess_NoGroupName",R=yield x.AppServices.LanguageService.getTextFallback(V.DialogsUserManagementAddUserSuccessNoUserGroup),D.errorText=R.text,D.isUserGroupError=!0,D;case x.AppServices.Impl.UserManagement.InteractivEvents.NoNewPassword:return D.succeed=!1,D.reason="LogOnSuccess_NoNewPassword",R=yield x.AppServices.LanguageService.getTextFallback(V.DialogsUserManagementAddUserSuccessUINoNewPassword),D.errorText=R.text,D.isNewPasswordError=!0,D;case x.AppServices.Impl.UserManagement.InteractivEvents.NoRepeatPassword:return D.succeed=!1,D.reason="LogOnSuccess_NoRepeatPassword",R=yield x.AppServices.LanguageService.getTextFallback(V.DialogsUserManagementAddUserSuccessUINoRepeatPassword),D.errorText=R.text,D.isRepeatPasswordError=!0,D;case x.AppServices.Impl.UserManagement.InteractivEvents.NewPasswordsNotEqual:return D.succeed=!1,D.reason="LogOnSuccess_NewPasswordsNotEqual",R=yield x.AppServices.LanguageService.getTextFallback(V.DialogsUserManagementAddUserSuccessNewPasswordsNotEqual),D.errorText=R.text,D.isRepeatPasswordError=!0,D;case x.AppServices.Impl.UserManagement.InteractivEvents.NoWorkState:return D.succeed=!1,D.reason="LogOnSuccess_NewPasswordsNotEqual",R=yield x.AppServices.LanguageService.getTextFallback(V.DialogsUserManagementAddUserChooseState),D.errorText=R.text,D.isUserStateError=!0,D;default:return D.succeed=!1,D.reason="LogOnSuccess_FailedUnknown_"+A,R=yield x.AppServices.LanguageService.getTextFallback(V.DialogsUserManagementAddUserSuccessMethodCallFaild),D.errorText=R.text,D.isUserNameError=!0,D}}))}resultChangeUserExpirse(A){return __awaiter(this,void 0,void 0,(function*(){const V=x.Application.Settings.UI.AppServices.UserManagementService.TextKeys;let R=null;const D={result:A,succeed:!1,reason:null,errorText:null,isUserNameError:!1,isUserFullNameError:!1,isUserGroupError:!1,isNewPasswordError:!1,isRepeatPasswordError:!1,isUserStateError:!1,isUserCodeError:!1};switch(A){case x.AppServices.Impl.UserManagement.InteractivEvents.NoUser:return D.succeed=!1,D.reason="ChangeUser_NoNewPassword",R=yield x.AppServices.LanguageService.getTextFallback(V.DialogsUserManagementChangeUserSuccessUINoNewUser),D.errorText=R.text,D.isUserNameError=!0,D;case x.AppServices.Impl.UserManagement.InteractivEvents.NoNewPassword:return D.succeed=!1,D.reason="ChangeUser_NoNewPassword",R=yield x.AppServices.LanguageService.getTextFallback(V.DialogsUserManagementChangeUserSuccessUINoNewPassword),D.errorText=R.text,D.isNewPasswordError=!0,D;case x.AppServices.Impl.UserManagement.InteractivEvents.NoRepeatPassword:return D.succeed=!1,D.reason="ChangeUser_NoRepeatPassword",R=yield x.AppServices.LanguageService.getTextFallback(V.DialogsUserManagementChangeUserSuccessUINoRepeatPassword),D.errorText=R.text,D.isRepeatPasswordError=!0,D;case x.AppServices.Impl.UserManagement.InteractivEvents.NewPasswordsNotEqual:return D.succeed=!1,D.reason="LogOnSuccess_NewPasswordsNotEqual",R=yield x.AppServices.LanguageService.getTextFallback(V.DialogsUserManagementChangeUserSuccessNewPasswordsNotEqual),D.errorText=R.text,D.isRepeatPasswordError=!0,D;default:return D.succeed=!1,D.reason="LogOnSuccess_FailedUnknown_"+A,R=yield x.AppServices.LanguageService.getTextFallback(V.DialogsUserManagementChangeUserSuccessMethodCallFaild),D.errorText=R.text,D.isUserNameError=!0,D}}))}resultChangeUser(A){return __awaiter(this,void 0,void 0,(function*(){const V=x.Application.Settings.UI.AppServices.UserManagementService.TextKeys;let R=null;const D={result:A,succeed:!1,reason:null,errorText:null,isUserNameError:!1,isUserFullNameError:!1,isUserGroupError:!1,isNewPasswordError:!1,isRepeatPasswordError:!1,isUserCodeError:!1};switch(A){case x.System.UserManagement.ChangeUserSuccess.Succeeded:return D.succeed=!0,D.reason="ChangeUserSuccess_Succeeded",D.errorText=null,D.isUserNameError=!0,this.resetChangeUser(),D;case x.System.UserManagement.ChangeUserSuccess.ForbiddenPassword:return D.succeed=!1,D.reason="ChangeUserSuccess_ForbiddenPassword",R=yield x.AppServices.LanguageService.getTextFallback(V.DialogsUserManagementChangeUserSuccessForbiddenPassword),D.errorText=R.text,D.isNewPasswordError=!0,D;case x.System.UserManagement.ChangeUserSuccess.FullUserExists:return D.succeed=!1,D.reason="ChangeUserSuccesss_FullUserExists",R=yield x.AppServices.LanguageService.getTextFallback(V.DialogsUserManagementChangeUserSuccessFullUserExists),D.errorText=R.text,D.isUserFullNameError=!0,D;case x.System.UserManagement.ChangeUserSuccess.InvalidPassword:return D.succeed=!1,D.reason="ChangeUserSuccesss_InvalidPassword",R=yield x.AppServices.LanguageService.getTextFallback(V.DialogsUserManagementChangeUserSuccessInvalidPassword),D.errorText=R.text,D.isNewPasswordError=!0,D;case x.System.UserManagement.ChangeUserSuccess.InvalidPasswordLength:return D.succeed=!1,D.reason="ChangeUserSuccesss_InvalidPasswordLength",R=yield x.AppServices.LanguageService.getTextFallback(V.DialogsUserManagementChangeUserSuccessInvalidPasswordLength),D.errorText=R.text,D.isNewPasswordError=!0,D;case x.System.UserManagement.ChangeUserSuccess.InvalidUserClass:return D.succeed=!1,D.reason="ChangeUserSuccesss_InvalidUserClass",R=yield x.AppServices.LanguageService.getTextFallback(V.DialogsUserManagementChangeUserSuccessInvalidUserClass),D.errorText=R.text,D.isUserGroupError=!0,D;case x.System.UserManagement.ChangeUserSuccess.LockedPassword:return D.succeed=!1,D.reason="ChangeUserSuccess_LockedPassword",R=yield x.AppServices.LanguageService.getTextFallback(V.DialogsUserManagementChangeUserSuccessLockedPassword),D.errorText=R.text,D.isNewPasswordError=!0,D;case x.System.UserManagement.ChangeUserSuccess.MachineCodeExists:return D.succeed=!1,D.reason="ChangeUserSuccess_MachineCodeExists",R=yield x.AppServices.LanguageService.getTextFallback(V.DialogsUserManagementChangeUserSuccessMachineCodeExists),D.errorText=R.text,D.isUserCodeError=!0,D;case x.System.UserManagement.ChangeUserSuccess.MethodCallFailed:return D.succeed=!1,D.reason="ChangeUserSuccess_MethodCallFailed",R=yield x.AppServices.LanguageService.getTextFallback(V.DialogsUserManagementChangeUserSuccessMethodCallFaild),D.errorText=R.text,D.isUserNameError=!0,D;case x.System.UserManagement.ChangeUserSuccess.NoCharactersInPassword:return D.succeed=!1,D.reason="ChangeUserSuccess_NoCharactersInPassword",R=yield x.AppServices.LanguageService.getTextFallback(V.DialogsUserManagementChangeUserSuccessNoCharactersInPassword),D.errorText=R.text,D.isNewPasswordError=!0,D;case x.System.UserManagement.ChangeUserSuccess.NoNumbersInPassword:return D.succeed=!1,D.reason="ChangeUserSuccess_NoNumbersInPassword",R=yield x.AppServices.LanguageService.getTextFallback(V.DialogsUserManagementChangeUserSuccessNoNumbersInPassword),D.errorText=R.text,D.isNewPasswordError=!0,D;case x.System.UserManagement.ChangeUserSuccess.PasswordMustContainSpecialCharacters:return D.succeed=!1,D.reason="ChangeUserSuccess_PasswordMustContainSpecialCharacters",R=yield x.AppServices.LanguageService.getTextFallback(V.DialogsUserManagementChangePasswordSuccessMustContainSpecialCharacters),D.errorText=R.text,D.isNewPasswordError=!0,D;case x.System.UserManagement.ChangeUserSuccess.UnableToSaveUser:return D.succeed=!1,D.reason="ChangeUserSuccess_UnableToSaveUser",R=yield x.AppServices.LanguageService.getTextFallback(V.DialogsUserManagementChangeUserSuccessUnableToSaveUser),D.errorText=R.text,D.isUserNameError=!0,D;case x.System.UserManagement.ChangeUserSuccess.UnknownUser:return D.succeed=!1,D.reason="LogOnSuccess_UnknownUser",R=yield x.AppServices.LanguageService.getTextFallback(V.DialogsUserManagementLogOnSuccessUnknownUser),D.errorText=R.text,D.isUserNameError=!0,D;case x.System.UserManagement.ChangeUserSuccess.UnknownUserClass:return D.succeed=!1,D.reason="ChangeUserSuccess_UnknownUserClass",R=yield x.AppServices.LanguageService.getTextFallback(V.DialogsUserManagementhangeUserSuccessUINoUserNoPassword),D.errorText=R.text,D.isUserNameError=!0,D;default:return D.succeed=!1,D.reason="LogOnSuccess_FailedUnknown_"+A,R=yield x.AppServices.LanguageService.getTextFallback(V.DialogsUserManagementChangeUserMethodCallFaild),D.errorText=R.text,D.isUserNameError=!0,D}}))}resultLogOnUserExpirse(A){return __awaiter(this,void 0,void 0,(function*(){const V=x.Application.Settings.UI.AppServices.UserManagementService.TextKeys;let R=null;const D={result:A,succeed:!1,reason:null,errorText:null,isUserNameError:!1,isPasswordError:!1,isNewPasswordError:!1,isRepeatPasswordError:!1};switch(A){case x.AppServices.Impl.UserManagement.InteractivEvents.NoUserNoPassword:return D.succeed=!1,D.reason="LogOnSuccess_NoUserPassword",R=yield x.AppServices.LanguageService.getTextFallback(V.DialogsUserManagementLogOnSuccessUINoUserNoPassword),D.errorText=R.text,D.isUserNameError=!0,D;case x.AppServices.Impl.UserManagement.InteractivEvents.NoUser:return D.succeed=!1,D.reason="LogOnSuccess_NoUser",R=yield x.AppServices.LanguageService.getTextFallback(V.DialogsUserManagementLogOnSuccessUINoUserNoPassword),D.errorText=R.text,D.isUserNameError=!0,D;case x.AppServices.Impl.UserManagement.InteractivEvents.NoPassword:return D.succeed=!1,D.reason="LogOnSuccess_NoPassword",R=yield x.AppServices.LanguageService.getTextFallback(V.DialogsUserManagementLogOnSuccessUINoUserNoPassword),D.errorText=R.text,D.isPasswordError=!0,D;case x.AppServices.Impl.UserManagement.InteractivEvents.NoNewPassword:return D.succeed=!1,D.reason="LogOnSuccess_NoNewPassword",R=yield x.AppServices.LanguageService.getTextFallback(V.DialogsUserManagementLogOnUINoNewPassword),D.errorText=R.text,D.isNewPasswordError=!0,D;case x.AppServices.Impl.UserManagement.InteractivEvents.NoRepeatPassword:return D.succeed=!1,D.reason="LogOnSuccess_NoNewPassword",R=yield x.AppServices.LanguageService.getTextFallback(V.DialogsUserManagementChangeUserSuccessUINoUserNoRepeatPassword),D.errorText=R.text,D.isRepeatPasswordError=!0,D;case x.AppServices.Impl.UserManagement.InteractivEvents.NewPasswordsNotEqual:return D.succeed=!1,D.reason="LogOnSuccess_NewPasswordNotEqual",R=yield x.AppServices.LanguageService.getTextFallback(V.DialogsUserManagementChangePasswordSuccessNewPasswordsNotEqual),D.errorText=R.text,D.isRepeatPasswordError=!0,D;case x.AppServices.Impl.UserManagement.InteractivEvents.NoOldPassword:return D.succeed=!1,D.reason="LogOnSuccess_NoPassword",R=yield x.AppServices.LanguageService.getTextFallback(V.DialogsUserManagementLogOnUINoOldPassword),D.errorText=R.text,D.isPasswordError=!0,D;default:return D.succeed=!1,D.reason="LogOnSuccess_FailedUnknown_"+A,R=yield x.AppServices.LanguageService.getTextFallback(V.DialogsUserManagementLogOnSuccessMethodCallFaild),D.errorText=R.text,D.isUserNameError=!0,D}}))}resultLogOnSuccess(A){return __awaiter(this,void 0,void 0,(function*(){const V=x.Application.Settings.UI.AppServices.UserManagementService.TextKeys;let R=null;const D={result:A,succeed:!1,reason:null,errorText:null,isUserNameError:!1,isPasswordError:!1};switch(A){case x.System.UserManagement.LogOnSuccess.Succeeded:return D.succeed=!0,D.reason="LogOnSuccess_Succeeded",D.errorText=null,D;case x.System.UserManagement.LogOnSuccess.MethodCallFailed:return D.succeed=!1,D.reason="LogOnSuccess_MethodCallFailed",R=yield x.AppServices.LanguageService.getTextFallback(V.DialogsUserManagementLogOnSuccessMethodCallFailed),D.errorText=R.text,D.isUserNameError=!0,D;case x.System.UserManagement.LogOnSuccess.PasswordExpired:return D.succeed=!1,D.reason="LogOnSuccess_PasswordExpired",R=yield x.AppServices.LanguageService.getTextFallback(V.DialogsUserManagementLogOnSuccessPasswordExpiered),D.errorText=R.text,D.isPasswordError=!0,D;case x.System.UserManagement.LogOnSuccess.RenewPassword:return D.succeed=!1,D.reason="LogOnSuccess_RenewPassword",R=yield x.AppServices.LanguageService.getTextFallback(V.DialogsUserManagementLogOnSuccessRenewPassword),D.errorText=R.text,D.isPasswordError=!0,D;case x.System.UserManagement.LogOnSuccess.TooManyFailedLogOns:return D.succeed=!1,D.reason="LogOnSuccess_TooManyFailedLogOns",R=yield x.AppServices.LanguageService.getTextFallback(V.DialogsUserManagementLogOnSuccessTooManyFaildLogOns),D.errorText=R.text,D.isUserNameError=!0,D;case x.System.UserManagement.LogOnSuccess.UserDeactivated:return D.succeed=!1,D.reason="LogOnSuccess_UserDeactivated",R=yield x.AppServices.LanguageService.getTextFallback(V.DialogsUserManagementLogOnSuccessUserDeactivated),D.errorText=R.text,D.isUserNameError=!0,D;case x.System.UserManagement.LogOnSuccess.UnknownUser:return D.succeed=!1,D.reason="LogOnSuccess_UnknownUser",R=yield x.AppServices.LanguageService.getTextFallback(V.DialogsUserManagementLogOnSuccessUnknownUser),D.errorText=R.text,D.isUserNameError=!0,D;case x.System.UserManagement.LogOnSuccess.InvalidPassword:return D.succeed=!1,D.reason="LogOnSuccess_InvalidPassword",R=yield x.AppServices.LanguageService.getTextFallback(V.DialogsUserManagementLogOnSuccessInvalidPassword),D.errorText=R.text,D.isPasswordError=!0,D;case x.System.UserManagement.LogOnSuccess.NoCorrespondingLocalUserClass:return D.succeed=!1,D.reason="LogOnSuccess_NoCorrespondingLocalUserClass",R=yield x.AppServices.LanguageService.getTextFallback(V.DialogsUserManagementLogOnSuccessNoCorrespondingLocalUserClass),D.errorText=R.text,D.isUserNameError=!0,D;case x.System.UserManagement.LogOnSuccess.CantAccessDomainInfo:return D.succeed=!1,D.reason="LogOnSuccess_CantAccessDomainInfo",R=yield x.AppServices.LanguageService.getTextFallback(V.DialogsUserManagementLogOnSuccessCantAccessDomainInfo),D.errorText=R.text,D.isUserNameError=!0,D;default:return D.succeed=!1,D.reason="LogOnSuccess_FailedUnknown_"+A,R=yield x.AppServices.LanguageService.getTextFallback(V.DialogsUserManagementLogOnSuccessMethodCallFaild),D.errorText=R.text,D.isUserNameError=!0,D}}))}resultChangePasswordSuccess(A){return __awaiter(this,void 0,void 0,(function*(){const V=x.Application.Settings.UI.AppServices.UserManagementService.TextKeys;let R=null;const D={result:A,succeed:!1,reason:null,errorText:null,isUserNameError:!1,isPasswordError:!1,isNewPasswordError:!1,isRepeatPasswordError:!1};switch(A){case x.System.UserManagement.ChangePasswordSuccess.Succeeded:return D.succeed=!0,D.reason="ChangePasswordSuccess_Succeeded",D.errorText=null,D;case x.System.UserManagement.ChangePasswordSuccess.ForbiddenPassword:return D.succeed=!1,D.reason="ChangePasswordSuccess_ForbiddenPassword",R=yield x.AppServices.LanguageService.getTextFallback(V.DialogsUserManagementChangePasswordSuccessForbiddenPassword),D.errorText=R.text,D.isNewPasswordError=!0,D;case x.System.UserManagement.ChangePasswordSuccess.OldPasswordInvalid:return D.succeed=!1,D.reason="ChangePasswordSuccess_OldPasswordInvalid",R=yield x.AppServices.LanguageService.getTextFallback(V.DialogsUserManagementChangePasswordSuccessOldPasswordInvalid),D.errorText=R.text,D.isPasswordError=!0,D;case x.System.UserManagement.ChangePasswordSuccess.NewPasswordInvalid:return D.succeed=!1,D.reason="ChangePasswordSuccess_NewPasswordInvalid",R=yield x.AppServices.LanguageService.getTextFallback(V.DialogsUserManagementChangePasswordSuccessNewPasswordInvalid),D.errorText=R.text,D.isNewPasswordError=!0,D;case x.System.UserManagement.ChangePasswordSuccess.NewPasswordInvalidLength:return D.succeed=!1,D.reason="ChangePasswordSuccess_NewPasswordInvalidLength",R=yield x.AppServices.LanguageService.getTextFallback(V.DialogsUserManagementChangePasswordSuccessNewPasswordInvalidLength),D.errorText=R.text,D.isNewPasswordError=!0,D;case x.System.UserManagement.ChangePasswordSuccess.MethodCallFailed:return D.succeed=!1,D.reason="ChangePasswordSuccess_MethodCallFailed",R=yield x.AppServices.LanguageService.getTextFallback(V.DialogsUserManagementChangePasswordSuccessMethodCallFailed),D.errorText=R.text,D.isNewPasswordError=!0,D;case x.System.UserManagement.ChangePasswordSuccess.NoCharactersInPassword:return D.succeed=!1,D.reason="ChangePasswordSuccess_NoCharactersInPassword",R=yield x.AppServices.LanguageService.getTextFallback(V.DialogsUserManagementChangePasswordSuccessNoCharactersInPassword),D.errorText=R.text,D.isNewPasswordError=!0,D;case x.System.UserManagement.ChangePasswordSuccess.NoNumbersInPassword:return D.succeed=!1,D.reason="ChangePasswordSuccess_NoNumbersInPassword",R=yield x.AppServices.LanguageService.getTextFallback(V.DialogsUserManagementChangePasswordSuccessNoNumbersInPassword),D.errorText=R.text,D.isNewPasswordError=!0,D;case x.System.UserManagement.ChangePasswordSuccess.PasswordMustContainSpecialCharacters:return D.succeed=!1,D.reason="ChangePasswordSuccess_PasswordMustContainSpecialCharacters",R=yield x.AppServices.LanguageService.getTextFallback(V.DialogsUserManagementChangePasswordSuccessMustContainSpecialCharacters),D.errorText=R.text,D.isNewPasswordError=!0,D;case x.System.UserManagement.ChangePasswordSuccess.UnableToSavePassword:return D.succeed=!1,D.reason="ChangePasswordSuccess_UnableToSavePassword",R=yield x.AppServices.LanguageService.getTextFallback(V.DialogsUserManagementChangePasswordSuccessUnableToSavePassword),D.errorText=R.text,D.isPasswordError=!0,D;case x.System.UserManagement.ChangePasswordSuccess.UnknownUser:return D.succeed=!1,D.reason="ChangePasswordSuccess_UnknownUser",R=yield x.AppServices.LanguageService.getTextFallback(V.DialogsUserManagementChangePasswordSuccessUnknownUser),D.errorText=R.text,D.isPasswordError=!0,D;case x.System.UserManagement.ChangePasswordSuccess.CantAccessDomainInfo:return D.succeed=!1,D.reason="ChangePasswordSuccess_CantAccessDomainInfo",R=yield x.AppServices.LanguageService.getTextFallback(V.DialogsUserManagementChangePasswordSuccessCantAccessDomainInfo),D.errorText=R.text,D.isPasswordError=!0,D;case x.System.UserManagement.ChangePasswordSuccess.LockedPassword:return D.succeed=!1,D.reason="ChangePasswordSuccess_LockedPassword",R=yield x.AppServices.LanguageService.getTextFallback(V.DialogsUserManagementChangePasswordSuccessLockedPassword),D.errorText=R.text,D.isPasswordError=!0,D;default:return D.succeed=!1,D.reason="ChangePasswordSuccess_FailedUnknown_"+A,R=yield x.AppServices.LanguageService.getTextFallback(V.DialogsUserManagementLogOnSuccessMethodCallFaild),D.errorText=R.text,D.isPasswordError=!0,D}}))}_userLoggedOnHandler(A){return __awaiter(this,void 0,void 0,(function*(){this.resetLogon(),this.resetCurrentUser(),this.currentUser.name=A.Name,this.currentUser.Name=A.Name,this.currentUser.fullName=A.FullName,this.currentUser.FullName=A.FullName,x.Application.Settings.UI.AutomaticUpdateUserManagement&&(yield this.updateUserList())}))}_userLoggedOffHandler(A){x.Application.Settings.UI.AutomaticUpdateUserManagement&&(this.resetUserList(),this.resetUserGroupList()),this.resetCurrentUser(),this.resetLogon(),this.resetChangePassword(),this.resetAddUser()}updateUserStateList(){return __awaiter(this,void 0,void 0,(function*(){const A=x.AppServices.UserManagementService.userStateList;for(let V=0;V<A.length;V++){const R=yield x.AppServices.LanguageService.getLocalizedTextAsync("@[ServerSystem].Dialogs.UserManagement.UserStates."+A[V].userState);A[V].locUserState=R.DisplayText}}))}getUserGroupsAsync(){return __awaiter(this,void 0,void 0,(function*(){const x=yield this._userManagementService.GetUserGroupsAsync();return Promise.resolve(x)}))}getUsersAsync(){return __awaiter(this,void 0,void 0,(function*(){const x=yield this._userManagementService.GetUsersAsync();return Promise.resolve(x)}))}logonUserAsync(A,V,R,D=!1){return __awaiter(this,void 0,void 0,(function*(){let N;if(this.logon.errorText="",this.logon.isPasswordError=!1,this.logon.isUserNameError=!1,A?(this.logon.name=A,this.logon.password=V):(A=this.logon.name,V=this.logon.password),!A&&!V)return N=yield this.resultLogOnUserExpirse(x.AppServices.Impl.UserManagement.InteractivEvents.NoUserNoPassword),this._copyReturnToUser(N,this.logon),Promise.resolve(N);if(!A)return N=yield this.resultLogOnUserExpirse(x.AppServices.Impl.UserManagement.InteractivEvents.NoUser),this._copyReturnToUser(N,this.logon),Promise.resolve(N);if(!V)return N=yield this.resultLogOnUserExpirse(x.AppServices.Impl.UserManagement.InteractivEvents.NoPassword),this._copyReturnToUser(N,this.logon),Promise.resolve(N);let U=null,B=A;if(U=yield this._userManagementService.LogOnAsync(A,V,R),N=yield this.resultLogOnSuccess(U),this._copyReturnToUser(N,this.logon),U===x.System.UserManagement.LogOnSuccess.Succeeded)if(this.resetLogon(),this.resetCurrentUser(),x.Application.Settings.UI.AutomaticUpdateUserManagement)if(!0===D){const x=yield this._userManagementService.GetUserAsync(A);this.currentUser.name=x.Name,this.currentUser.Name=x.Name,this.currentUser.fullName=x.FullName,this.currentUser.FullName=x.FullName,this.changePassword.name=x.Name,this.changePassword.fullName=x.FullName}else this._userManagementService.GetUserAsync(A).then(x=>{this.currentUser.name=x.Name,this.currentUser.Name=x.Name,this.currentUser.fullName=x.FullName,this.currentUser.FullName=x.FullName,this.changePassword.name=x.Name,this.changePassword.fullName=x.FullName});else B!=this.currentUser.name&&(this.currentUser.name=B,this.currentUser.Name=B,this.currentUser.fullName=B,this.currentUser.FullName=B,this.changePassword.name=B,this.changePassword.fullName=B);return Promise.resolve(N)}))}verifyUserAsync(A,V,R){return __awaiter(this,void 0,void 0,(function*(){let R;if(this.logon.errorText="",this.logon.isUserNameError=!1,this.logon.isPasswordError=!1,A||(A=this.logon.name,V=this.logon.password),!A&&!V)return R=yield this.resultLogOnUserExpirse(x.AppServices.Impl.UserManagement.InteractivEvents.NoUserNoPassword),this._copyReturnToUser(R,this.logon),Promise.resolve(R);if(!A)return R=yield this.resultLogOnUserExpirse(x.AppServices.Impl.UserManagement.InteractivEvents.NoUser),this._copyReturnToUser(R,this.logon),Promise.resolve(R);if(!V)return R=yield this.resultLogOnUserExpirse(x.AppServices.Impl.UserManagement.InteractivEvents.NoPassword),this._copyReturnToUser(R,this.logon),Promise.resolve(R);let D=null;return D=yield this._userManagementService.VerifyUserAsync(A,V),R=yield this.resultLogOnSuccess(D),null!==this.logon&&this._copyReturnToUser(R,this.logon),Promise.resolve(R)}))}changePasswordAsync(A,V,R,D){return __awaiter(this,void 0,void 0,(function*(){if(!A&&!(V||R||D))return this.resultLogOnUserExpirse(x.AppServices.Impl.UserManagement.InteractivEvents.NoUserNoPassword);if(!A)return this.resultLogOnUserExpirse(x.AppServices.Impl.UserManagement.InteractivEvents.NoUser);if(!V)return this.resultLogOnUserExpirse(x.AppServices.Impl.UserManagement.InteractivEvents.NoOldPassword);if(!R)return this.resultLogOnUserExpirse(x.AppServices.Impl.UserManagement.InteractivEvents.NoNewPassword);if(!D)return this.resultLogOnUserExpirse(x.AppServices.Impl.UserManagement.InteractivEvents.NoRepeatPassword);if(R!==D)return this.resultLogOnUserExpirse(x.AppServices.Impl.UserManagement.InteractivEvents.NewPasswordsNotEqual);let N=null;return N=yield this._userManagementService.ChangeUserPasswordAsync(A,V,R),Promise.resolve(this.resultChangePasswordSuccess(N))}))}changePasswordCurrentUserAsync(A,V,R,D){return __awaiter(this,void 0,void 0,(function*(){let N;if(D||(D=this.currentUser.name),this.changePassword.isPasswordError=!1,this.changePassword.isNewPasswordError=!1,this.changePassword.isRepeatPasswordError=!1,this.changePassword.errorText="",A||(A=this.changePassword.password,V=this.changePassword.newPassword,R=this.changePassword.repeatPassword),!D)return N=yield this.resultLogOnUserExpirse(x.AppServices.Impl.UserManagement.InteractivEvents.NoUser),this._copyReturnToUser(N,this.changePassword),Promise.resolve(N);if(!A)return N=yield this.resultLogOnUserExpirse(x.AppServices.Impl.UserManagement.InteractivEvents.NoOldPassword),this._copyReturnToUser(N,this.changePassword),Promise.resolve(N);if(!V)return N=yield this.resultLogOnUserExpirse(x.AppServices.Impl.UserManagement.InteractivEvents.NoNewPassword),this._copyReturnToUser(N,this.changePassword),Promise.resolve(N);if(!R)return N=yield this.resultLogOnUserExpirse(x.AppServices.Impl.UserManagement.InteractivEvents.NoRepeatPassword),this._copyReturnToUser(N,this.changePassword),Promise.resolve(N);if(V!==R)return N=yield this.resultLogOnUserExpirse(x.AppServices.Impl.UserManagement.InteractivEvents.NewPasswordsNotEqual),this._copyReturnToUser(N,this.changePassword),Promise.resolve(N);let U=null;return U=yield this._userManagementService.ChangeUserPasswordAsync(D,A,V),N=yield this.resultChangePasswordSuccess(U),this._copyReturnToUser(N,this.changePassword),Promise.resolve(N)}))}changeUserAsync(){return __awaiter(this,void 0,void 0,(function*(){let A=null,V=null;if(null===this.changeUser.name||0===this.changeUser.name.length)return V=yield x.AppServices.UserManagementService.resultChangeUserExpirse(x.AppServices.Impl.UserManagement.InteractivEvents.NoUser),this._copyReturnToUser(V,this.changeUser),Promise.resolve(V);if(this.changeUser.changePasswordFlag){if(null===this.changeUser.newPassword||0===this.changeUser.newPassword.length)return V=yield x.AppServices.UserManagementService.resultChangeUserExpirse(x.AppServices.Impl.UserManagement.InteractivEvents.NoNewPassword),this._copyReturnToUser(V,this.changeUser),Promise.resolve(V);if(null===this.changeUser.repeatPassword||0===this.changeUser.repeatPassword.length)return V=yield x.AppServices.UserManagementService.resultChangeUserExpirse(x.AppServices.Impl.UserManagement.InteractivEvents.NoRepeatPassword),this._copyReturnToUser(V,this.changeUser),Promise.resolve(V);if(this.changeUser.newPassword!==this.changeUser.repeatPassword)return V=yield x.AppServices.UserManagementService.resultChangeUserExpirse(x.AppServices.Impl.UserManagement.InteractivEvents.NewPasswordsNotEqual),this._copyReturnToUser(V,this.changeUser),Promise.resolve(V)}let R=null;this.changeUser.changePasswordFlag&&(R=this.changeUser.newPassword);const D=this._userManagementService.CreateUserDefinition();return D.Name=this.changeUser.name,D.FullName=this.changeUser.fullName,D.GroupName=this.changeUser.groupName,D.Password=R,D.UserState=this._userStateIndexByName(this.changeUser.userState),A=yield this._userManagementService.ChangeUserAsync(D),x.System.UserManagement.ChangeUserSuccess.Succeeded,V=yield this.resultChangeUser(A),this._copyReturnToUser(V,this.changeUser),Promise.resolve(V)}))}addUserAsync(){return __awaiter(this,void 0,void 0,(function*(){let A=null;this.addUser.errorText="",this.addUser.isUserNameError=!1,this.addUser.isUserFullNameError=!1,this.addUser.isUserGroupError=!1,this.addUser.isNewPasswordError=!1,this.addUser.isRepeatPasswordError=!1,this.addUser.isUserStateError=!1,this.addUser.isUserCodeError=!1;let V=null;if(null===this.addUser.name||0===this.addUser.name.length)return A=yield x.AppServices.UserManagementService.resultAddUserExpirse(x.AppServices.Impl.UserManagement.InteractivEvents.NoUser),this._copyReturnToUser(A,this.addUser),Promise.resolve(A);if(null===this.addUser.groupName||0===this.addUser.groupName.length)return A=yield x.AppServices.UserManagementService.resultAddUserExpirse(x.AppServices.Impl.UserManagement.InteractivEvents.NoGroupName),this._copyReturnToUser(A,this.addUser),Promise.resolve(A);if(null===this.addUser.newPassword||0===this.addUser.newPassword.length)return A=yield x.AppServices.UserManagementService.resultAddUserExpirse(x.AppServices.Impl.UserManagement.InteractivEvents.NoNewPassword),this._copyReturnToUser(A,this.addUser),Promise.resolve(A);if(null===this.addUser.repeatPassword||0===this.addUser.repeatPassword.length)return A=yield x.AppServices.UserManagementService.resultAddUserExpirse(x.AppServices.Impl.UserManagement.InteractivEvents.NoRepeatPassword),this._copyReturnToUser(A,this.addUser),Promise.resolve(A);if(this.addUser.newPassword!==this.addUser.repeatPassword)return A=yield x.AppServices.UserManagementService.resultAddUserExpirse(x.AppServices.Impl.UserManagement.InteractivEvents.NewPasswordsNotEqual),this._copyReturnToUser(A,this.addUser),Promise.resolve(A);if(null===this.addUser.userState||0===this.addUser.userState.length)return A=yield x.AppServices.UserManagementService.resultAddUserExpirse(x.AppServices.Impl.UserManagement.InteractivEvents.NoWorkState),this._copyReturnToUser(A,this.addUser),Promise.resolve(A);const R=this._userManagementService.CreateUserDefinition();return R.UserState<0||R.UserState>4?(A=yield x.AppServices.UserManagementService.resultAddUserExpirse(x.AppServices.Impl.UserManagement.InteractivEvents.NoWorkState),this._copyReturnToUser(A,this.addUser),Promise.resolve(A)):(R.Name=this.addUser.name,R.FullName=this.addUser.fullName,R.GroupName=this.addUser.groupName,R.Password=this.addUser.newPassword,R.UserState=this._userStateIndexByName(this.addUser.userState),V=yield this._userManagementService.AddUserAsync(R),A=yield this.resultAddUser(V),this._copyReturnToUser(A,this.addUser),Promise.resolve(A))}))}removeUserAsync(){return __awaiter(this,void 0,void 0,(function*(){if(this.removeUser.errorText="",this.removeUser.isUserNameError=!1,null===this.removeUser.name||0===this.removeUser.name.length){const A=yield x.AppServices.UserManagementService.resultAddUserExpirse(x.AppServices.Impl.UserManagement.InteractivEvents.NoUser);return this._copyReturnToUser(A,this.removeUser),Promise.resolve(A)}let A=null;A=yield this._userManagementService.RemoveUserAsync(this.removeUser.name);const V=yield this.resultRemoveUser(A);return this._copyReturnToUser(V,this.removeUser),Promise.resolve(V)}))}setSelectedUserIndex(A){return __awaiter(this,void 0,void 0,(function*(){yield this.updateUserList();const V=x.DataSources.userList.getAt(A);for(const x in V)"function"!=typeof V[x]&&(this.changeUser[x]=V[x]);this.changeUser.newPassword="",this.changeUser.repeatPassword=""}))}setRemoveUserIndex(A){return __awaiter(this,void 0,void 0,(function*(){yield this.updateUserList();const V=x.DataSources.removableUserList.getAt(A);for(const x in V)"function"!=typeof V[x]&&(this.removeUser[x]=V[x])}))}resetCurrentUser(){this.currentUser.name="",this.currentUser.fullName="",this.currentUser.Name="",this.currentUser.FullName=""}resetLogon(){this.logon.name="",this.logon.password="",this.logon.errorText="",this.logon.isUserNameError=!1,this.logon.isPasswordError=!1}resetChangePassword(){this.changePassword.password="",this.changePassword.newPassword="",this.changePassword.repeatPassword="",this.changePassword.errorText="",this.changePassword.isPasswordError=!1,this.changePassword.isNewPasswordError=!1,this.changePassword.isRepeatPasswordError=!1}resetAddUser(){this.addUser.name="",this.addUser.fullName="",this.addUser.groupName="",this.addUser.userState="",this.addUser.newPassword="",this.addUser.repeatPassword="",this.addUser.errorText="",this.addUser.isUserNameError=!1,this.addUser.isUserFullNameError=!1,this.addUser.isUserGroupError=!1,this.addUser.isNewPasswordError=!1,this.addUser.isRepeatPasswordError=!1,this.addUser.isUserStateError=!1,this.addUser.isUserCodeError=!1}resetChangeUser(){this.changeUser.name="",this.changeUser.fullName="",this.changeUser.groupName="",this.changeUser.userState="",this.changeUser.newPassword="",this.changeUser.repeatPassword="",this.changeUser.errorText="",this.changeUser.changePasswordFlag=!1,this.changeUser.noUserSelected=!0,this.changeUser.isUserNameError=!1,this.changeUser.isUserFullNameError=!1,this.changeUser.isUserGroupError=!1,this.changeUser.isUserStateError=!1,this.changeUser.isNewPasswordError=!1,this.changeUser.isRepeatPasswordError=!1,this.changeUser.isCodeError=!1}resetRemoveUser(){return __awaiter(this,void 0,void 0,(function*(){yield this.updateUserList(),this.removeUser.name="",this.removeUser.errorText="",this.removeUser.isUserNameError=!1}))}resetUserList(){this.userList=[],x.DataSources.userList=new WinJS.Binding.List(this.userList)}resetUserGroupList(){this.userGroupList=[],x.DataSources.userGroupList=new WinJS.Binding.List(this.userGroupList)}reset(){return __awaiter(this,void 0,void 0,(function*(){yield this.updateUserList(),this.resetLogon(),this.resetChangePassword(),this.resetAddUser(),this.resetChangeUser(),this.resetRemoveUser()}))}dispose(){return super.dispose()}logOnAsync(x,A,V){return __awaiter(this,void 0,void 0,(function*(){return this._userManagementService.LogOnAsync(x,A,V)}))}getAuthorization(x){return this._userManagementService.GetAuthorization(x)}getUsersAndGroupsAsync(){return __awaiter(this,void 0,void 0,(function*(){const x=yield this._userManagementService.GetUsersAndGroupsAsync();return Promise.resolve(x)}))}}UserManagementService.namespace="VisiWin.UserManagementServices.Impl",UserManagementService.serviceName="UserManagementService",UserManagementService.requiredServices=["DataService","LanguageService"],A.UserManagementService=UserManagementService}(A.Impl||(A.Impl={}))}(x.AppServices||(x.AppServices={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){"use strict";class DataTemplateService extends x.AppServices.Impl.ServiceBase{constructor(){super(),this.mappingData={},this.triggerData={}}init(){}loadDataTemplate(A){let V=A.replace(/[\\/,.+-\s]/g,"_");if(x.DataTemplateRoot||(x.DataTemplateRoot=document.createElement("DIV")),!x.Resources.templates[V]){let V=x.Utilities.getPathSetting("UI.DirectoryNames.DataTemplates")+"/"+A+".html",R=document.createElement("DIV");return fetch(V).then(x=>x.text()).then(A=>{R.innerHTML=A,x.DataTemplateRoot.appendChild(R);let D=V.replace(/[\\/,.+-\s]/g,"_");return x.Resources.jsonUrlList[D]={},x.Resources.jsonUrlList[D].url=V,x.Resources.jsonUrlList[D].type=[],x.Resources.jsonUrlList[D].type.push("htmlTemplate"),WinJS.UI.processAll(R)}).then(x=>Promise.resolve(x)).catch((function(x){return console.log("VisiWin.getDateTemplate: can't load HTML fragment: "+x.toString()),Promise.resolve(!1)}))}}getDataTemplate(A,V,R){return __awaiter(this,void 0,void 0,(function*(){if(!x.isNullOrUndefined(V)){let D=V.replace(/[\\/,.+-\s]/g,"_");if(x.Resources.templates||(x.Resources.templates={}),x.Resources.templates&&x.Resources.templates[D])return void A.dispatchEvent(R,x.Resources.templates);this.loadDataTemplate(V).then(V=>{x.isNullOrEmpty(R)||A.dispatchEvent(R,x.Resources.templates)},x=>{})}}))}registerDataTemplate(A,V,R){if(x.Resources.templates||(x.Resources.templates={}),A){const V=A.replace(/[\\/,.+-\s]/g,"_");x.Resources.templates[V]&&console.log("VisiWin.AppServices.DataTemplateService: DataTemplate "+A+" already defined. Will be overwrite!");const D=document.createElement("DIV");D.innerHTML=R;const N=new x.Binding.Template(D),U=N._compileTemplate({target:"render"}),B=U.toString();N.disableOptimizedProcessing=!0;const F=WinJS.Utilities._syncRenderer(D,"DIV"),W=F.toString();x.Resources.templates[V]={templateFragment:R,templateElement:D,templateControl:N,compiledRenderer:U,compiledRendererString:B,syncRenderer:F,syncRendererString:W}}else console.log("VisiWin.AppServices.DataTemplateService: registerTemplate without a id")}ready(){return __awaiter(this,void 0,void 0,(function*(){for(let A in x.Resources.templates)x.Resources.templates[A]&&x.Resources.templates[A].source&&(WinJS.UI.processAll(x.Resources.templates[A].source).then((function(x){}),(function(x){})),x.Resources.templates[A].source=null)}))}unload(){}dispose(){return super.dispose()}}DataTemplateService.namespace="VisiWin.DataTemplateServices.Impl",DataTemplateService.serviceName="DataTemplateService",DataTemplateService.requireServices=[],A.DataTemplateService=DataTemplateService}(A.Impl||(A.Impl={}))}(x.AppServices||(x.AppServices={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){"use strict";A.registerAlertDialogDesignerObservable=function registerAlertDialogDesignerObservable(A){const V={category:"AlertDialog",displayName:"AlertDialog"};A.AlertDialog={},A.AlertDialog.style="",A.AlertDialog.titleText="",A.AlertDialog.localizableTitleText="",A.AlertDialog.contentText="",A.AlertDialog.localizableContentText="",A.AlertDialog.action1ButtonText="",A.AlertDialog.localizableAction1ButtonText="",A.AlertDialog.action2ButtonText="",A.AlertDialog.localizableAction2ButtonText="",A.AlertDialog.showAction1Button=!0,A.AlertDialog.showAction2Button=!0,x.Utilities.isInDesignMode()||(A.AlertDialog=x.Binding.as(A.AlertDialog)),A.registerDesignTimeObservable("AlertDialog",V,{style:{propertyType:"member",displayName:"Style",type:"string",access:"rw"},titleText:{propertyType:"member",displayName:"TitleText",type:"string",access:"rw"},localizableTitleText:{propertyType:"member",displayName:"LocalizableTitleText",type:"string",access:"rw"},contentText:{propertyType:"member",displayName:"ContentText",type:"string",access:"rw"},localizableContentText:{propertyType:"member",displayName:"LocalizableContentText",type:"string",access:"rw"},action1ButtonText:{propertyType:"member",displayName:"Action1ButtonText",type:"string",access:"rw"},localizableAction1ButtonText:{propertyType:"member",displayName:"LocalizableAction1ButtonText",type:"string",access:"rw"},action2ButtonText:{propertyType:"member",displayName:"Action2ButtonText",type:"string",access:"rw"},localizableAction2ButtonText:{propertyType:"member",displayName:"LocalizableAction2ButtonText",type:"string",access:"rw"},showAction1Button:{propertyType:"member",displayName:"ShowAction1Button",type:"boolean",access:"rw"},showAction2Button:{propertyType:"member",displayName:"ShowAction2Button",type:"boolean",access:"rw"}}),x.Observables.AlertDialog=A.AlertDialog}}(A.Impl||(A.Impl={}))}(x.AppServices||(x.AppServices={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){"use strict";A.registerTimerDesignObservable=function registerTimerDesignObservable(A){const V={category:"Timer",displayName:"Timer"};A.Timer={},A.Timer.second=0,x.Utilities.isInDesignMode()||(A.Timer=x.Binding.as(A.Timer)),A.registerDesignTimeObservable("Timer",V,{second:{propertyType:"member",displayName:"Second",type:"number",access:"rw"}}),x.Observables.Timer=A.Timer,setInterval(()=>{A.Timer.second++},1e3)}}(A.Impl||(A.Impl={}))}(x.AppServices||(x.AppServices={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){!function(x){"use strict";x._getBindings=function _getBindings(x){const A=[];for(const V in x)A.push(x[V]);return A}}(x.DataServiceHelper||(x.DataServiceHelper={}))}(x.Impl||(x.Impl={}))}(x.AppServices||(x.AppServices={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(A){"use strict";A._registerDesignTimeConverter=function _registerDesignTimeConverter(x,A,V){x&&A&&(A.name=x,V[x]=A)},A._getConverters=function _getConverters(x){const A=[];for(const V in x)A.push(x[V]);return A},A._getConverterByName=function _getConverterByName(x,A){return A[x]?A[x]:null},A._loadAppSettingsConverters=function _loadAppSettingsConverters(){const A=[];let V=null;x.Utilities.getPathString("Converters");let R="";if(x.Utilities.getPathSetting("UI.DirectoryNames.Converters")&&(R=x.Utilities.getPathSetting("UI.DirectoryNames.Converters")),V=x.Utilities.getAppSettings("UI.Converters"),V||(V=A),Array.isArray(V))for(let A=0;A<V.length;A++){const D=R+"/"+V[A];x.Utilities.loadJsTag(D)}else{const A=R+"/"+V;x.Utilities.loadJsTag(A)}}}(A.DataServiceHelper||(A.DataServiceHelper={}))}(A.Impl||(A.Impl={}))}(x.AppServices||(x.AppServices={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){!function(x){"use strict";x._getDataSources=function _getDataSources(x){const A=[];for(const V in x)"Array"===x[V].type&&A.push(x[V].name);return A},x._getDataSourcesDescription=function _getDataSourcesDescription(x){const A=[];for(const V in x)"Array"===x[V].type&&A.push(x[V]);return A},x._getDataSourceDescriptionByName=function _getDataSourceDescriptionByName(x,A){for(const V in A)if("Array"===A[V].type&&V===x)return A[V];return null}}(x.DataServiceHelper||(x.DataServiceHelper={}))}(x.Impl||(x.Impl={}))}(x.AppServices||(x.AppServices={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(A){"use strict";A._getObservables=function _getObservables(A){const V=[],R=x.AppServices.Impl.ServiceManager.getService("DataService");if(R&&R.dataServiceStore){const x=R.dataServiceStore.observables.GetAll();for(let A=0;A<x.length;A++)V.push(x[A].shortDescription)}for(const x in A)"Object"===A[x].type&&V.push({name:A[x].name,displayName:A[x].desc.displayName,category:A[x].desc.category});return V},A._getObservableDescriptionByName=function _getObservableDescriptionByName(A,V){const R=x.AppServices.Impl.ServiceManager.getService("DataService");if(R&&R.dataServiceStore&&R.dataServiceStore.observables&&R.dataServiceStore.observables.Contains(A)){const x=R.dataServiceStore.observables.GetFromKey(A);if(x.observable&&x.getDesignTimeBinding)return x.getDesignTimeBinding()}for(const x in V)if("Object"===V[x].type&&x===A)return V[x];return null},A._getObservablesDescription=function _getObservablesDescription(x){const A=[];for(const V in x)"Object"===x[V].type&&A.push(x[V]);return A}}(A.DataServiceHelper||(A.DataServiceHelper={}))}(A.Impl||(A.Impl={}))}(x.AppServices||(x.AppServices={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){"use strict";A.DataStore=class DataStore{constructor(){this.dictionary=new x.Internal.System.Collections.GenericDictionary}Add(x,A){this.dictionary.add(x,A)}Contains(x){return this.dictionary.containsKey(x)}GetFromKey(x){return this.dictionary.getByKey(x)}GetFromKeyValue(x,A){for(const V of this.dictionary.values())if(V[x]===A)return V;return null}GetFromObjectKey(A,V){for(const R of this.dictionary.values())if(R[A]===V[A]&&!x.isUndefined(R[A]))return R;return null}GetAll(){return this.dictionary.values()}Delete(x){this.dictionary.remove(x)}DeleteAll(){this.dictionary=new x.Internal.System.Collections.GenericDictionary}}}(A.Impl||(A.Impl={}))}(x.AppServices||(x.AppServices={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){"use strict";A.DataServiceStore=class DataServiceStore{constructor(A){this._dataService=A,this._session=x.Internal.Application.ApplicationManager.getApplication().getDefaultSession(),this.converters=new x.AppServices.Impl.DataStore,this.triggerData=new x.AppServices.Impl.DataStore,this.observables=new x.AppServices.Impl.DataStore,this.dataSources=new x.AppServices.Impl.DataStore}Dispose(){}}}(A.Impl||(A.Impl={}))}(x.AppServices||(x.AppServices={}))}(VisiWin||(VisiWin={})),function(x){!function(x){"use strict";let A,V,R,D,N;!function(x){x.ro="ro",x.rw="rw"}(A=x.AccessTypes||(x.AccessTypes={})),function(x){x.string="string",x.boolean="boolean",x.number="number",x.enum="enum"}(V=x.TypeStrings||(x.TypeStrings={})),function(x){x.member="member",x.event="event"}(R=x.PropertyTypes||(x.PropertyTypes={})),function(x){x.observable="observable",x.dataSource="dataSource",x.converter="converter"}(D=x.BindingType||(x.BindingType={})),function(x){x.UserManagement="UserManagement",x.TouchKeyboard="TouchKeyboard",x.Languages="Languages",x.TrendChart="TrendChart",x.Alarms="Alarms",x.Recipes="Recipes",x.Logging="Logging",x.DataAccess="DataAccess",x.Language="Language",x.Dialogs="Dialogs",x.HMI="HMI",x.ViewModels="ViewModels"}(N=x.Categories||(x.Categories={}))}(x.DataServices||(x.DataServices={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";A.BindingHelper=class BindingHelper{constructor(x,A,V){this.isInDesignMode=!1,this.isInTemplateView=!1,this._addToStore=!0,this._designTimeBinding="designTimeBinding",this._addToStore=!0,this.targetElement=V,this.designTimeDescription=x,this.object=A,this._init()}_init(){this.isInDesignMode=x.Utilities.isInDesignMode(),this.isInTemplateView=x.DataServices._isInDataTemplateView(this.targetElement),this._makeId(),this._validateBindingType(),this._setBindingDesc(),this._setShortDesc(),this._setBindingStore(),this._createObservableFromBindingType(),this.isInDesignMode&&this.createDesignTimeDescription(),this.addToServiceStore(this)}_makeId(){this.targetElement||document&&(this.targetElement=document),(x.isNullOrEmpty(this.designTimeDescription.displayName)||x.isNullOrUndefined(this.designTimeDescription.displayName))&&(this.targetElement&&this.targetElement.winControl&&this.targetElement.winControl.controlId?this.designTimeDescription.displayName=this.targetElement.winControl.controlId:this.designTimeDescription.displayName="TODO"),this.isInDesignMode||this.isInTemplateView||this.targetElement&&this.targetElement.winControl&&this.targetElement.winControl.controlId&&(this.designTimeDescription.displayName=this.targetElement.winControl.controlId),this.id=this.designTimeDescription.displayName}_setBindingDesc(){this.bindingDescription={displayName:this.designTimeDescription.displayName,bindingType:this.designTimeDescription.bindingType||null,category:this.designTimeDescription.category||x.DataServices.Categories.HMI}}_setShortDesc(){this.shortDescription={name:this.designTimeDescription.displayName,displayName:this.designTimeDescription.displayName,category:this.designTimeDescription.category}}_validateBindingType(){if(x.isNullOrUndefined(this.designTimeDescription.bindingType)){if(x.isArray(this.object))return void(this.isInTemplateView||this.targetElement===document?this.designTimeDescription.bindingType=x.DataServices.BindingType.observable:this.designTimeDescription.bindingType=x.DataServices.BindingType.dataSource);if(x.isObject(this.object))return void(this.designTimeDescription.bindingType=x.DataServices.BindingType.observable);if(x.isFunction(this.object))return void(this.designTimeDescription.bindingType=x.DataServices.BindingType.converter)}}_setBindingStore(){const A=x.AppServices.Impl.ServiceManager.getService("DataService");this.designTimeDescription.bindingType===x.DataServices.BindingType.observable&&(this.dataServiceStore=A.dataServiceStore.observables,x.isArray(this.object)&&(this.object=this.object[0])),this.designTimeDescription.bindingType===x.DataServices.BindingType.dataSource&&(this.isInTemplateView?this.dataServiceStore=A.dataServiceStore.observables:this.dataServiceStore=A.dataServiceStore.dataSources),this.designTimeDescription.bindingType===x.DataServices.BindingType.converter&&(this.dataServiceStore=A.dataServiceStore.converters)}_createObservableFromBindingType(){this.designTimeDescription.bindingType===x.DataServices.BindingType.observable&&(this.observable=x.DataServices.createObservableFromObject(this.object)),this.designTimeDescription.bindingType!==x.DataServices.BindingType.dataSource?(this.designTimeDescription.bindingType,x.DataServices.BindingType.converter):this.isInTemplateView?x.isArray(this.object)&&(this.observable=x.DataServices.createObservableFromObject(this.object[0])):this.observable=x.DataServices.createObservableListFromObjectArray(this.object)}createDesignTimeDescription(){if(this.isInDesignMode){this.object&&this.object.dataSource&&this.designTimeDescription.displayName;const A={displayName:this.designTimeDescription.displayName,dataSourceDescription:{}};if(!this.designTimeDescription.dataSourceDescription){let V=this.object;x.isArray(this.object)&&(V=V[0]);for(const R in V)x.isString(V[R])&&(A.dataSourceDescription[R]={displayName:R,type:x.DataServices.TypeStrings.string}),x.isNumber(V[R])&&(A.dataSourceDescription[R]={displayName:R,type:x.DataServices.TypeStrings.number}),x.isBoolean(V[R])&&(A.dataSourceDescription[R]={displayName:R,type:x.DataServices.TypeStrings.boolean});this.designTimeDescription.dataSourceDescription=A.dataSourceDescription}this.designTimeDescription=x.DataServices._validateDataSourceDescription(this.designTimeDescription)}}getDesignTimeBinding(){this.observable[this._designTimeBinding]={name:this.id,type:"Object",desc:this.bindingDescription,description:this.designTimeDescription.dataSourceDescription},this.observable[this._designTimeBinding].desc.name=this.id;for(const x in this.observable[this._designTimeBinding].description)this.observable[this._designTimeBinding].description[x].name=x;return this.observable[this._designTimeBinding]}updateBinding(A){return __awaiter(this,void 0,void 0,(function*(){if(!this.targetElement||!this.targetElement.winControl)return Promise.resolve(null);if(!this.targetElement.winControl._isAttached)return Promise.resolve(null);if(x.isNullOrUndefined(A))return Promise.resolve(null);const V={hasChanges:!1,observable:{},object:{}},R=Object.keys(A);if(this.observable&&this.observable.dataSource&&this.observable.dataSource.list){for(;this.observable.length>0;)this.observable.pop();yield x.sleep(100)}for(const D in R)if(x.isFunction(A[R[D]]));else if(x.isObject(A[R[D]])){if(!x.isNullOrUndefined(this.observable[R[D]])){V.observable[R[D]]={};const N=Object.keys(A[R[D]]);for(const U in N)x.isFunction(A[R[D]][N[U]])||(V.observable[R[D]][N[U]]={},x.isNullOrUndefined(this.observable[R[D]][N[U]])||this.observable[R[D]][N[U]]!==A[R[D]][N[U]]&&(this.observable[R[D]][N[U]]=A[R[D]][N[U]],V.hasChanges=!0,V.observable[R[D]][N[U]]=A[R[D]][N[U]]))}this.observable.dataSource&&this.observable.dataSource.list&&(this.observable.dataSource.list.setAt(R[D],A[R[D]]),V.hasChanges=!0)}else x.isNullOrUndefined(this.observable[R[D]])||this.observable[R[D]]!==A[R[D]]&&(this.observable&&this.observable.setProperty&&this.observable.setProperty(R[D],A[R[D]]),V.hasChanges=!0);return V.object=A,yield x.sleep(50),Promise.resolve(V)}))}processAll(A){return __awaiter(this,void 0,void 0,(function*(){x.Binding.processAll(A,this.observable)}))}delete(){this._addToStore&&this.dataServiceStore.Delete(this.id)}addToServiceStore(x){if(this._addToStore){const A=this.dataServiceStore.GetFromKey(this.id);A?A.targetElement&&A.targetElement===document&&this.targetElement!==A.targetElement&&(this.dataServiceStore.Delete(this.id),this.dataServiceStore.Add(this.id,x)):this.dataServiceStore.Add(this.id,x)}}dispose(){if(this._addToStore){const A=this.dataServiceStore.GetFromKey(this.id);this.dataServiceStore.Delete(this.id),x.ViewModels.dispose(A)}}}}(x.DataServices||(x.DataServices={}))}(VisiWin||(VisiWin={})),function(x){x.DataServices||(x.DataServices={})}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";A._validateDataContextId=function _validateDataContextId(A){const V={isViewModelObjectName:!1,isFunctionConstructorName:!1,isName:!1};return x.stringStartsWith(A,"{")&&x.stringEndsWith(A,"}")?V.isViewModelObjectName=!0:x.Internal.stringContains(A,".")?V.isFunctionConstructorName=!0:V.isName=!0,V},A.createObservableFromObject=function createObservableFromObject(A){try{return x.Binding.as(A)}catch(x){}},A.createObservableListFromObjectArray=function createObservableListFromObjectArray(x){try{return new WinJS.Binding.List(x)}catch(x){}},A._validateDataSourceDescription=function _validateDataSourceDescription(V){for(const R in V.dataSourceDescription)V.dataSourceDescription[R].access||(V.dataSourceDescription[R].access=A.AccessTypes.rw),V.dataSourceDescription[R].propertyType||(V.dataSourceDescription[R].propertyType=A.PropertyTypes.member),V.dataSourceDescription[R].type||(V.dataSourceDescription[R].type=A.TypeStrings.string),V.dataSourceDescription[R].displayName||(V.dataSourceDescription[R].displayName=R),V.dataSourceDescription[R].sampleArray||(V.dataSourceDescription[R].type===x.DataServices.TypeStrings.string&&(V.dataSourceDescription[R].sampleArray=[R]),V.dataSourceDescription[R].type===x.DataServices.TypeStrings.number&&(V.dataSourceDescription[R].sampleArray=[-1]),V.dataSourceDescription[R].type===x.DataServices.TypeStrings.boolean&&(V.dataSourceDescription[R].sampleArray=[!1]),V.dataSourceDescription[R].type===x.DataServices.TypeStrings.enum&&(V.dataSourceDescription[R].sampleArray=[])),V.dataSourceDescription[R].sampleData||(V.dataSourceDescription[R].sampleData=R);return V},A._isInDataTemplateView=function _isInDataTemplateView(A){return!!A&&("VisiWin.UI.DataTemplateView"===A.getAttribute("data-win-control")||x.DataServices._isInDataTemplateView(A.parentElement))}}(x.DataServices||(x.DataServices={}))}(VisiWin||(VisiWin={})),function(x){x.DataServices||(x.DataServices={})}(VisiWin||(VisiWin={})),function(x){x.ViewModels||(x.ViewModels={})}(VisiWin||(VisiWin={})),function(x){x.ViewModels||(x.ViewModels={})}(VisiWin||(VisiWin={})),function(x){!function(x){"use strict";x.MediatorBase=class MediatorBase{constructor(x){this.viewModels=new Set,this.mediatorName="VisiWin.ViewModels.MediatorBase",this.viewModelMediatorName=x}addViewModel(x){this.viewModels.add(x)}broadcastViewModelMessage(x,A){throw new Error("'broadcastViewModelMessage' method not implemented, in derivation.")}}}(x.ViewModels||(x.ViewModels={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";const stringToFunction=function(x){const A=x.split(".");let V=window||this;for(let x=0,R=A.length;x<R;x++)V=V[A[x]];if("function"!=typeof V)throw new Error("function not found");return V};A._getOrCreateMediator=function _getOrCreateMediator(A){const V=x.AppServices.Impl.ServiceManager.getService("ViewModelService");let R,D=null;if(A&&(R=V.getMediator(A),R))return R;if(x.isString(A)&&(D=stringToFunction(A),!x.isFunction(D)))throw Error("viewModelMediator could not be called as function");if(D)try{R=new D(A),V.addMediator(A,R)}catch(x){throw Error("viewModelMediator could not be called or constructed")}return R},A.getOrCreateViewModel=function getOrCreateViewModel(A,V,R){var D,N;let U=null,B=null;const F=x.AppServices.Impl.ServiceManager.getService("ViewModelService");if(null===(D=null==V?void 0:V.winControl)||void 0===D?void 0:D.controlId){const x=F.getViewModel(null===(N=null==V?void 0:V.winControl)||void 0===N?void 0:N.controlId);if(x)return x}if(!x.isString(A))throw Error("ViewModel is not callable from data context: "+A);if(B=stringToFunction(A),!x.isFunction(B))throw Error("Viewmodel is not a function");if(B)try{U=new B(V,R)}catch(x){throw Error("ViewModel could not be called from data context: "+A)}return U}}(x.ViewModels||(x.ViewModels={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){"use strict";A.Message=class Message{constructor(){this.properties=new x.Internal.System.Collections.GenericDictionary}}}(A.Message||(A.Message={}))}(x.ViewModels||(x.ViewModels={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";A.ViewModelBase=class ViewModelBase{constructor(A){this.viewModelId=x.Utilities.shortId(),this.isTargetElementAttached=!1,this.targetElement=A,this._initViewModel()}_initViewModel(){this._addEventListener()}attached(x){this.isTargetElementAttached=!0}detached(x){this.isTargetElementAttached=!1}initialized(x){}notifyPropertyChanged(x){}dispose(){this.isTargetElementAttached=!1,this._removeEventListener(),x.ViewModels.dispose(this)}_addEventListener(){this.targetElement&&(this.targetElement.winControl.addEventListener("notifyPropertyChanged",this.notifyPropertyChanged.bind(this),!1),this.targetElement.winControl.addEventListener("initialized",this.initialized.bind(this),!1),this.targetElement.winControl.addEventListener("attached",this.attached.bind(this),!1),this.targetElement.winControl.addEventListener("detached",this.detached.bind(this),!1))}_removeEventListener(){this.targetElement&&(this.targetElement.winControl.removeEventListener("notifyPropertyChanged",this.notifyPropertyChanged.bind(this),!1),this.targetElement.winControl.removeEventListener("initialized",this.initialized.bind(this),!1),this.targetElement.winControl.removeEventListener("attached",this.attached.bind(this),!1),this.targetElement.winControl.removeEventListener("detached",this.detached.bind(this),!1))}},A.dispose=function dispose(A){for(const V in A){if(A[V]&&A[V]instanceof x.Internal.System.Events.TypedEvent)try{A[V].remove(),delete A[V]}catch(A){x.System.Diagnostics.Logger.ErrorLog.log("Object dispose event error.")}if(x.isObject(A[V]))try{this[V].isDisposable?(this[V].Dispose(),this[V]=null,delete this[V]):this[V].dispose&&(this[V].dispose(),this[V]=null,delete this[V])}catch(A){x.System.Diagnostics.Logger.ErrorLog.log("Object dispose error.")}Object.prototype.hasOwnProperty.call(A,V)&&delete A[V]}A=null}}(x.ViewModels||(x.ViewModels={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class ViewModel extends x.ViewModels.ViewModelBase{constructor(x,A,V=""){super(x),this.mainMediator=null,this.targetElement=x,this.configParameters=A,this.mainMediatorName=V,this.initMediators()}initMediators(A,V){return __awaiter(this,void 0,void 0,(function*(){if(this.configParameters&&this.configParameters.viewModelMediator&&""===this.mainMediatorName&&(this.mainMediatorName=this.configParameters.viewModelMediator),""!==this.mainMediatorName)try{this.mainMediator=x.ViewModels._getOrCreateMediator(this.mainMediatorName),this.mainMediator&&this.mainMediator.addViewModel(this)}catch(x){console.error("mainMediator could not be created "+this.mainMediatorName),console.error("mainMediator error "+x)}}))}broadcastViewModelMessage(x,A){console.log("RecipeClassMediator notifies changes for "+x.properties.keys().join(" ")),this.mainMediator.broadcastViewModelMessage(x,A)}receivingViewModelMessage(x){this.mainMediator.broadcastViewModelMessage(x,this),console.log(`RecipeClassMediator receive changes for ${this.constructor.name} , ${x.properties.keys().join(" ")}`)}}A.ViewModel=ViewModel}(x.ViewModels||(x.ViewModels={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){"use strict";class ViewModelService extends x.AppServices.Impl.ServiceBase{constructor(){super(),this.viewModelStore=new Map,this.mediatorStore=new Map}tryCreateViewModel(A,V){var R,D;if(null===(R=null==A?void 0:A.winControl)||void 0===R?void 0:R.controlId){const x=this.getViewModel(null===(D=null==A?void 0:A.winControl)||void 0===D?void 0:D.controlId);if(x)return x}const N=this.getViewModelParams(A);try{const R=x.ViewModels.getOrCreateViewModel(V,A,N);return R&&this.addViewModel(A.winControl.controlId,R),R}catch(x){throw Error("ViewModel could not be created from data context: "+V)}}getViewModelParams(x){const A=x.attributes["data-win-bind-options"];let V=null;if(A&&A.value)try{V=JSON.parse(A.value)}catch(x){console.error("invalid json string: "+A.value)}return V}addViewModel(x,A){this.viewModelStore.has(x)||this.viewModelStore.set(x,A)}getViewModel(x){return this.viewModelStore.has(x)?this.viewModelStore.get(x):null}addMediator(x,A){this.mediatorStore.has(x)||this.mediatorStore.set(x,A)}getMediator(x){return this.mediatorStore.has(x)?this.mediatorStore.get(x):null}init(){}ready(){return __awaiter(this,void 0,void 0,(function*(){}))}unload(){}dispose(){return super.dispose()}}ViewModelService.namespace="VisiWin.DataTemplateServices.Impl",ViewModelService.serviceName="ViewModelService",ViewModelService.requireServices=[],A.ViewModelService=ViewModelService}(A.Impl||(A.Impl={}))}(x.AppServices||(x.AppServices={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){"use strict";class BaseClassViewModel extends x.ViewModels.ViewModel{constructor(x,A,V="VisiWin.ViewModels.Recipe.MainMediator"){super(x,A,V),this.viewModelId="VisiWin.ViewModels.Recipe.BaseClassViewModel",this.classInitialized=!1,this._isClassUpdating=!1,this._ClassName="",this._initBase()}get ClassName(){return this._ClassName}set ClassName(x){x!==this._ClassName&&""!==x&&(this._ClassName=x,this.updateCurrentClass())}get currentClass(){return this._currentClass}set currentClass(A){A!==this._currentClass&&(x.isNullOrUndefined(A)||A&&(this._currentClass=A,this._ClassName=A.Name,this.currentClassChanged(A),this.currentClassNameChanged(A.Name),this._ClassName!==A.Name&&x.Application.InfoLog.log(`Problem on creating recipe class ${this._ClassName}!==${A.Name}`,null,x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Recipe)))}_initBase(){this.recipeService=x.AppServices.Impl.ServiceManager.getService("RecipeService"),""===this.ClassName&&this.configParameters&&this.configParameters.viewModelParameters&&x.isString(this.configParameters.viewModelParameters.ClassName)&&""!==this.configParameters.viewModelParameters.ClassName&&(this.ClassName=this.configParameters.viewModelParameters.ClassName)}updateCurrentClass(x){var A;return __awaiter(this,void 0,void 0,(function*(){if(!this._isClassUpdating&&(this._isClassUpdating=!0,x&&this._ClassName!==x&&(this.ClassName=x),""!==this._ClassName)){this.classInitialized=!1,this.mainMediator.checkNewMessage("CurrentRecipeClass");const x=this.mainMediator.checkNewMessage("CurrentRecipeClass");if(x&&x.Name===this.ClassName)return this.currentClass=x,this._isClassUpdating=!1,this.mainMediator.createNewMessage(this,"CurrentRecipeClass",this.currentClass),void this.mainMediator.createNewMessage(this,"CurrentRecipeClassName",this.currentClass.Name);const V=yield null===(A=this.recipeService)||void 0===A?void 0:A.getRecipeClassAsync(this._ClassName);V?(this.currentClass=V.RecipeClass,this.mainMediator.createNewMessage(this,"CurrentRecipeClass",this.currentClass),this.mainMediator.createNewMessage(this,"CurrentRecipeClassName",this.currentClass.Name),this.classInitialized=!0,this._isClassUpdating=!1):this._isClassUpdating=!1}}))}checkForMessageUpdates(){return __awaiter(this,void 0,void 0,(function*(){if(this.mainMediator){const x=this.mainMediator.checkNewMessage("CurrentRecipeClassName");x&&this.ClassName!==x&&(this.ClassName=x)}}))}receivingViewModelMessage(x){return __awaiter(this,void 0,void 0,(function*(){this.isTargetElementAttached&&this.classInitialized&&this.checkForMessageUpdates()}))}attached(x){const A=Object.create(null,{attached:{get:()=>super.attached}});return __awaiter(this,void 0,void 0,(function*(){A.attached.call(this,x),yield this.checkForMessageUpdates()}))}detached(x){super.detached(x)}dispose(){super.dispose()}}A.BaseClassViewModel=BaseClassViewModel}(A.Recipe||(A.Recipe={}))}(x.ViewModels||(x.ViewModels={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){"use strict";class BaseFileViewModel extends x.ViewModels.Recipe.BaseClassViewModel{constructor(x,A){super(x,A),this.viewModelId="VisiWin.ViewModels.Recipe.BaseFileViewModel",this._FileName="",this._initFile()}get FileName(){return this._FileName}set FileName(x){if(this._FileName!==x){if(""===x){const x=this.mainMediator.checkNewMessage("CurrentRecipeFileName");if(""!==x&&-1!==this.currentClass.FileNames.indexOf(x))return}this._FileName=x,this.currentFileNameChanged(this._FileName),this.mainMediator.createNewMessage(this,"CurrentRecipeFileName",this._FileName)}}_initFile(){""===this.FileName&&this.configParameters&&this.configParameters.viewModelParameters&&x.isString(this.configParameters.viewModelParameters.FileName)&&""!==this.configParameters.viewModelParameters.FileName&&(this.FileName=this.configParameters.viewModelParameters.FileName)}checkForMessageUpdates(){const A=Object.create(null,{checkForMessageUpdates:{get:()=>super.checkForMessageUpdates}});return __awaiter(this,void 0,void 0,(function*(){if(yield A.checkForMessageUpdates.call(this),this.mainMediator){const A=this.mainMediator.checkNewMessage("CurrentRecipeFileName");x.isString(A)&&this.FileName!==A&&(this.FileName=A);const V=this.mainMediator.checkNewMessage("FileDeleted");V&&""!==V&&V===this._FileName&&(this.FileName="")}}))}receivingViewModelMessage(x){return __awaiter(this,void 0,void 0,(function*(){this.isTargetElementAttached&&this.classInitialized&&(yield this.checkForMessageUpdates())}))}currentClassNameChanged(x){}currentClassChanged(x){}attached(x){const A=Object.create(null,{attached:{get:()=>super.attached}});return __awaiter(this,void 0,void 0,(function*(){A.attached.call(this,x),yield this.checkForMessageUpdates()}))}detached(x){super.detached(x)}dispose(){super.dispose()}}A.BaseFileViewModel=BaseFileViewModel}(A.Recipe||(A.Recipe={}))}(x.ViewModels||(x.ViewModels={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){"use strict";class MainMediator extends x.ViewModels.MediatorBase{constructor(A){super(A),this.mediatorName=this.constructor.name,this.messageStack=new x.AppServices.Impl.DataStore}broadcastViewModelMessage(x,A){const V=x.properties.keys();for(const A in V)this.messageStack.Add(V[A],x.properties.getByKey(V[A]));this.viewModels.forEach(V=>{V!==A&&V.receivingViewModelMessage(x)})}checkNewMessage(x){var A;return(null===(A=this.messageStack)||void 0===A?void 0:A.Contains(x))?this.messageStack.GetFromKey(x):null}createNewMessage(A,V,R){const D=new x.ViewModels.Message.Message;D.properties.add(V,R),this.broadcastViewModelMessage(D,A)}}A.MainMediator=MainMediator}(A.Recipe||(A.Recipe={}))}(x.ViewModels||(x.ViewModels={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){"use strict";A.createViewModelMessage=function createViewModelMessage(A,V){const R=new x.ViewModels.Message.Message;return R.properties.add(A,V),R};const objectsEqual=(x,A)=>"object"==typeof x&&Object.keys(x).length>0&&(Object.keys(x).length===Object.keys(A).length&&!!Object.keys(x).every(V=>objectsEqual(x[V],A[V])));A.arraysEqual=(x,A)=>x.length===A.length&&!!x.every((x,V)=>objectsEqual(x,A[V]))}(A.Helper||(A.Helper={}))}(x.ViewModels||(x.ViewModels={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){"use strict";class ClassNames extends x.ViewModels.Recipe.BaseClassViewModel{constructor(A,V){super(A,V),this.viewModelId="VisiWin.ViewModels.Recipe.ClassNames",this.objList=[],this._objListInitialized=!1,this.itemsLoaded=x.UI.eventHandler(A=>{if(this.listBinding&&""!==this.ClassName){const A=this.objList.findIndex(x=>x.ClassName===this.ClassName);setTimeout(()=>{this.listBinding.selectedIndex=A,x.Application.VerboseLog.log("Class name list update selectedIndex for "+this.ClassName,null,x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Recipe)},200)}}),this.itemInserted=x.UI.eventHandler(x=>{}),this.indexChanged=x.UI.eventHandler(x=>{if(x.detail&&-1!==x.detail.selectedIndex){if(!this._objListInitialized)return;this.objList[x.detail.selectedIndex].ClassName!==this.ClassName&&(this.ClassName=this.objList[x.detail.selectedIndex].ClassName,setTimeout(()=>{this.mainMediator.createNewMessage(this,"CurrentRecipeFileName","")},100))}}),this._init()}_init(){return __awaiter(this,void 0,void 0,(function*(){x.Utilities.isInDesignMode()?this.objList.push({ClassName:"",LocalizableText:""}):this.objList=[],this._registerObservable(),this._getClassNames()}))}_getClassNames(){var x,A,V;return __awaiter(this,void 0,void 0,(function*(){let R=!1;const D=yield null===(x=this.recipeService)||void 0===x?void 0:x.recipeClassNames;let N=[];if(D)for(var U=0;U<D.length;U++){const x=yield null===(A=this.recipeService)||void 0===A?void 0:A.getRecipeClassAsync(D[U]);x&&x.RecipeClass&&N.push(null===(V=null==x?void 0:x.RecipeClass)||void 0===V?void 0:V.LocalizableText)}if(D){for(let x=0;x<D.length;x++)this.objList[x]&&D[x]!==this.objList[x].ClassName&&(R=!0);if(this.objList[0]||(R=!0),R){this.objList[0]&&this.objList.splice(0,this.objList.length);for(let x=0;x<D.length;x++)this.objList.push({ClassName:D[x],LocalizableText:N[x]});this._objListInitialized=!0,yield this._updateBinding()}}}))}currentClassNameChanged(x){}currentClassChanged(x){}_registerObservable(){var A,V;const R={category:x.DataServices.Categories.Recipes,displayName:this.viewModelId};if(x.Utilities.isInDesignMode()&&(x.DataServices._isInDataTemplateView(this.targetElement)||(this.objList={},this.objList.dataSource="",this.objList.selectedIndex=-1)),this.objectHelper=new x.DataServices.BindingHelper(R,this.objList,this.targetElement),!this.objectHelper.isInTemplateView&&this.targetElement){const R={dataSource:(null===(V=null===(A=null==this?void 0:this.targetElement)||void 0===A?void 0:A.winControl)||void 0===V?void 0:V.controlId)||this.viewModelId,selectedIndex:-1,selectedIndexChanged:this.indexChanged,itemsLoaded:this.itemsLoaded,itemInserted:this.itemInserted},D={displayName:this.viewModelId,category:x.DataServices.Categories.Recipes};this.listHelper=new x.DataServices.BindingHelper(D,R,this.targetElement),this.listBinding=this.listHelper.observable,this.listHelper.processAll(this.targetElement)}}_updateBinding(){var A;return __awaiter(this,void 0,void 0,(function*(){x.Utilities.isInDesignMode()||(x.Application.VerboseLog.log("Class name list update binding for "+this.ClassName,null,x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Recipe),this.objList[0]&&this.objList[0].ClassName&&(yield null===(A=null==this?void 0:this.objectHelper)||void 0===A?void 0:A.updateBinding(this.objList),this._updateSelectedIndex()))}))}_updateSelectedIndex(){return __awaiter(this,void 0,void 0,(function*(){if(this.objList[0]&&""!==this.objList[0].ClassName)if(this.listBinding&&""!==this.ClassName){const A=this.objList.findIndex(x=>x.ClassName===this.ClassName);setTimeout(()=>{this.listBinding.selectedIndex=A,x.Application.VerboseLog.log("Class name list update selectedIndex for "+this.ClassName,null,x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Recipe)},100)}else this.listBinding.selectedIndex=-1}))}checkForMessageUpdates(){const x=Object.create(null,{checkForMessageUpdates:{get:()=>super.checkForMessageUpdates}});return __awaiter(this,void 0,void 0,(function*(){yield x.checkForMessageUpdates.call(this)}))}receivingViewModelMessage(x){return __awaiter(this,void 0,void 0,(function*(){this.isTargetElementAttached}))}attached(x){const A=Object.create(null,{attached:{get:()=>super.attached}});return __awaiter(this,void 0,void 0,(function*(){A.attached.call(this,x),yield this._getClassNames(),yield this.checkForMessageUpdates(),this._updateBinding()}))}detached(x){super.detached(x)}dispose(){super.dispose()}}A.ClassNames=ClassNames}(A.Recipe||(A.Recipe={}))}(x.ViewModels||(x.ViewModels={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){"use strict";class RecipeClass extends x.ViewModels.Recipe.BaseFileViewModel{constructor(x,A){super(x,A),this.viewModelId="VisiWin.ViewModels.Recipe.RecipeClass",this._initalized=!1,this._varArrayMemberChangedHandler=this._varArrayMemberChanged.bind(this),this._varArray=[],this._init()}get hasValidFile(){return this._hasValidFile}set hasValidFile(x){this._hasValidFile=x,this.listBinding&&(this.listBinding.canDelete=x,this.listBinding.canLoad=x,this.listBinding.canEdit=x,this.listBinding.canRead=x,this.listBinding.canReset=x,this.listBinding.canSave=x,this.listBinding.canWrite=x,this.listBinding.canSend=x)}get hasValidClass(){return this._hasValidClass}set hasValidClass(x){this._hasValidClass=x,this.listBinding&&(this.listBinding.canCreate=x)}_init(){return __awaiter(this,void 0,void 0,(function*(){""===this.FileName&&this.configParameters&&this.configParameters.viewModelParameters&&x.isString(this.configParameters.viewModelParameters.FileName)&&""!==this.configParameters.viewModelParameters.FileName&&(this.FileName=this.configParameters.viewModelParameters.FileName),this.object={isEditing:!1,isLocked:!1,hasChangesForFile:!1,hasChangesForProcess:!1,canCreate:!1,canDelete:!1,canLoad:!1,canEdit:!1,canRead:!1,canReset:!1,canSave:!1,canWrite:!1,canSend:!1,recipeClass:{}},this._initClass(),this._registerObservable()}))}_initClass(){if(x.Utilities.isInDesignMode()){let x={};x=this._createClassShape(),this.currentClass=x,this.object.recipeClass=this.currentClass}}_createClassShape(){return{Name:"",FileNames:[""],LockState:x.System.Recipe.RecipeLockState.Unlocked,IsEditing:!1,LocalizableText:"",Comment:"",IncludeSubRecipesInStorage:!1,InitialDirectory:"",InitialRecipeDescription:"",InitialRecipeName:"",HasChangesForFile:!1,HasChangesForProcess:!1,IsServerSideRecipe:!1,LoadOnStartup:!1,LoggingCategoryName:"",ReadValuesOnProcessChange:!1,SaveRecipeValueChanges:!1,SaveRecipeValuesOnChange:!1,SetRecipeValuesToProcessOnChange:!1,CurrentPath:""}}currentClassNameChanged(x){this.object&&x!==this.object.ClassName&&this.listBinding&&this.listBinding.setProperty("ClassName",x)}currentClassChanged(x){this._removeHandler(),this._addHandler(),this.currentClass!==x&&(this.currentClass=x,!0===this._initalized&&this.stopRecipeClassEdit()),this.currentClass?this.hasValidClass=!0:this.hasValidClass=!1}currentFileNameChanged(x){x!==this.object.FileName&&!0===this._initalized&&(this.stopRecipeClassEdit(),this.listBinding.setProperty("FileName",x),this.FileName=x),""!==this.FileName?this.hasValidFile=!0:this.hasValidFile=!1}_registerObservable(){var A,V;this.object.lockRecipe=x.UI.eventHandler(x=>__awaiter(this,void 0,void 0,(function*(){this.currentClass.LockRecipeAsync()}))),this.object.unLockRecipe=x.UI.eventHandler(x=>__awaiter(this,void 0,void 0,(function*(){this.currentClass.UnlockRecipeAsync()}))),this.object.startEdit=x.UI.eventHandler(x=>__awaiter(this,void 0,void 0,(function*(){this.startRecipeClassEdit()}))),this.object.stopEdit=x.UI.eventHandler(x=>__awaiter(this,void 0,void 0,(function*(){this.stopRecipeClassEdit()}))),this.object.toggleEdit=x.UI.eventHandler(x=>__awaiter(this,void 0,void 0,(function*(){this.currentClass.IsEditing?this.stopRecipeClassEdit():this.startRecipeClassEdit()}))),this.object.readProcessToBuffer=x.UI.eventHandler(x=>__awaiter(this,void 0,void 0,(function*(){yield this.currentClass.ReadProcessToBufferAsync()}))),this.object.setDefaultValuesToBuffer=x.UI.eventHandler(A=>__awaiter(this,void 0,void 0,(function*(){if(""!==this.FileName){yield this.currentClass.SetDefaultValuesToBufferAsync(x.System.Recipe.ClearBufferDefaultValues.Recipe,!0)}}))),this.object.saveBufferToFileAsync=x.UI.eventHandler(x=>__awaiter(this,void 0,void 0,(function*(){var x;if(""!==this.FileName){const A=yield this.currentClass.GetRecipeFileAsync(this.FileName),V=(null===(x=null==A?void 0:A.RecipeFile)||void 0===x?void 0:x.Description)||"";yield this.currentClass.SaveBufferToFileAsync(this.FileName,V,!0,!0)}}))),this.object.ClassName=null!==(A=this.ClassName)&&void 0!==A?A:"   ",this.object.FileName=null!==(V=this.FileName)&&void 0!==V?V:"   ";const R={displayName:this.viewModelId,category:x.DataServices.Categories.Recipes,isEditing:!1,isLocked:!1,hasChangesForFile:!1,hasChangesForProcess:!1,canCreate:!1,canDelete:!1,canLoad:!1,canEdit:!1,canRead:!1,canReset:!1,canSave:!1,canWrite:!1,canSend:!1,recipeClass:null,ClassName:this.ClassName,FileName:this.FileName};this.viewModelId,x.DataServices.Categories.Recipes;this.listHelper=new x.DataServices.BindingHelper(R,this.object,this.targetElement),this.listBinding=this.listHelper.observable,this.listHelper.processAll(this.targetElement)}_updateBinding(){return __awaiter(this,void 0,void 0,(function*(){x.Utilities.isInDesignMode()||(x.Application.VerboseLog.log(`Recipe class update binding for ${this.ClassName} ${this.FileName||"-"}`,null,x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Recipe),this.listHelper&&(yield this.listHelper.updateBinding(this.listBinding),this._initalized=!0))}))}startRecipeClassEdit(){return __awaiter(this,void 0,void 0,(function*(){if(this.currentClass&&this.listBinding)if(yield x.sleep(100),""!==this.FileName){if(-1===this.currentClass.FileNames.indexOf(this.FileName)&&x.Application.WarnLog.log(`Recipe class no file for ${this.ClassName} ${this.FileName||"-"}`,null,x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Recipe),(!this.currentClass.IsEditing||this.currentClass.loadFileName!==this.FileName)&&!this.currentClass.IsEditing&&!this.listBinding.isEditing&&this.FileName){this.listBinding.isEditing=!0,x.Application.VerboseLog.log(`Recipe class StartEditAsync for ${this.ClassName} ${this.FileName||"-"}`,null,x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Recipe);if(!(yield this.currentClass.StartEditAsync()))return this.listBinding.isEditing=!1,void x.Application.VerboseLog.log(`Recipe class could not StartEditAsync for ${this.ClassName} ${this.FileName||"-"}`,null,x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Recipe);if(""===this.FileName)return void x.Application.WarnLog.log(`Recipe class no file for ${this.ClassName} ${this.FileName||"-"}`,null,x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Recipe);x.Application.VerboseLog.log(`Recipe class LoadFileToBufferAsync ${this.ClassName} ${this.FileName||"-"}`,null,x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Recipe);(yield this.currentClass.LoadFileToBufferAsync(this.FileName))&&(this.currentClass.loadBuffer=!0,this.currentClass.loadFileName=this.FileName),this._addVariableHandler()}}else x.Application.WarnLog.log(`Recipe class no file for ${this.ClassName} ${this.FileName||"-"}`,null,x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Recipe)}))}stopRecipeClassEdit(){return __awaiter(this,void 0,void 0,(function*(){if(this.listBinding.isEditing=!1,this.currentClass.IsEditing){x.Application.VerboseLog.log(`Recipe class StopEditAsync ${this.ClassName} ${this.FileName||"-"}`,null,x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Recipe),this.currentClass.IsEditing=!1;yield this.currentClass.StopEditAsync();this._resetVarArray()}}))}receivingViewModelMessage(A){return __awaiter(this,void 0,void 0,(function*(){if(this.isTargetElementAttached){yield this.checkForMessageUpdates();const R=A.properties.keys();for(var V in R)if("RecipeFilesInfo"===R[V]){A.properties.getByKey(R[V]).length>0&&this.configParameters&&this.configParameters.viewModelParameters&&this.configParameters.viewModelParameters.StartEdit&&this.currentClass&&this.FileName&&this.currentClass&&this.FileName&&(this.currentClass.IsEditing&&(yield this.stopRecipeClassEdit()),yield x.sleep(100),yield this.startRecipeClassEdit())}}}))}checkForMessageUpdates(){const x=Object.create(null,{checkForMessageUpdates:{get:()=>super.checkForMessageUpdates}});return __awaiter(this,void 0,void 0,(function*(){yield x.checkForMessageUpdates.call(this),this.mainMediator}))}initialized(x){const A=Object.create(null,{initialized:{get:()=>super.initialized}});return __awaiter(this,void 0,void 0,(function*(){A.initialized.call(this,x)}))}attached(x){const A=Object.create(null,{attached:{get:()=>super.attached}});return __awaiter(this,void 0,void 0,(function*(){A.attached.call(this,x),yield this.checkForMessageUpdates(),this._updateBinding()}))}detached(x){super.detached(x)}dispose(){super.dispose()}_addVariableHandler(){if(this._resetVarArray(),this.currentClass._variableNames&&this.currentClass._variableNames.length){let V=this.currentClass._variableNames;for(var A=0;A<V.length;A++){const R=x.System.DataAccess.VariableService.getService()._manager._getVariableMasterFromStore(V[A]);if(R)for(let x=0;x<R.Subscribers.length;x++)R.Subscribers[x].CanRecipeEdit&&(R.Subscribers[x].RecipeItemChange.add(this._varArrayMemberChangedHandler),this._varArray.push(R.Subscribers[x]))}}}_varArrayMemberChanged(x){x.OldValue!==x.Value&&(this.listBinding.hasChangesForFile=!0)}_resetVarArray(){for(var x=0;x<this._varArray.length;x++)this._varArray[x].RecipeItemChange.remove(this._varArrayMemberChangedHandler);this._varArray=[]}_addHandler(){this.currentClass&&!x.Utilities.isInDesignMode()&&(this.currentClass.BufferChanged.add(this._bufferChanged.bind(this)),this.currentClass.FilesChanged.add(this._fileChanged.bind(this)),this.currentClass.WrittenToProcess.add(this._writtenToProcess.bind(this)),this.currentClass.LockStateChanged.add(this._lockStateChanged.bind(this)))}_removeHandler(){this.currentClass&&!x.Utilities.isInDesignMode()&&(this.currentClass.BufferChanged.remove(this._bufferChanged.bind(this)),this.currentClass.FilesChanged.remove(this._fileChanged.bind(this)),this.currentClass.WrittenToProcess.remove(this._writtenToProcess.bind(this)),this.currentClass.LockStateChanged.remove(this._lockStateChanged.bind(this)))}_bufferChanged(A){x.Application.VerboseLog.log(`Recipe class BufferChanged ${x.System.Recipe.RecipeChangedAction[A.Action]} from ${x.System.Recipe.RecipeChangedSource[A.Source]}`,null,x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Recipe),this.mainMediator.createNewMessage(this,"RecipeBufferChangedEventArgs",A),this.listBinding.hasChangesForFile=this.currentClass.HasChangesForFile,this.listBinding.hasChangesForProcess=this.currentClass.HasChangesForProcess,this._updateBinding()}_fileChanged(A){x.Application.VerboseLog.log(`Recipe class FilesChanged ${x.System.Recipe.FileAction[A.FileAction]} from ${A.Name} in ${A.ClassName}`,null,x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Recipe),this.mainMediator.createNewMessage(this,"RecipeFilesChangedEventArgs",A),this.listBinding.hasChangesForFile=this.currentClass.HasChangesForFile,this.listBinding.hasChangesForProcess=this.currentClass.HasChangesForProcess,this._updateBinding()}_writtenToProcess(x){this.mainMediator.createNewMessage(this,"RecipeWrittenToProcessEventArgs",x),this.listBinding.hasChangesForFile=this.currentClass.HasChangesForFile,this.listBinding.hasChangesForProcess=this.currentClass.HasChangesForProcess,this._updateBinding()}_lockStateChanged(A){this.mainMediator.createNewMessage(this,"RecipeLockStateChangedEventArgs",A),x.Application.VerboseLog.log(`Recipe class LockStateChanged ${x.System.Recipe.RecipeLockState[A.LockState]} for  ${A.RecipeClassName}`,null,x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Recipe),this.currentClass.Name===A.RecipeClassName&&(A.LockState===x.System.Recipe.RecipeLockState.LockedByOtherClient?this.listBinding.isLocked=!0:this.listBinding.isLocked=!1),this._updateBinding()}}A.RecipeClass=RecipeClass}(A.Recipe||(A.Recipe={}))}(x.ViewModels||(x.ViewModels={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){"use strict";class DeleteFile extends x.ViewModels.Recipe.BaseFileViewModel{constructor(A,V){super(A,V),this.viewModelId="VisiWin.ViewModels.Recipe.DeleteFile",this.deleteClicked=x.UI.eventHandler(x=>__awaiter(this,void 0,void 0,(function*(){if(yield this.checkForMessageUpdates(),x&&x.detail){if(this.object.FileName=this.FileName,this.object.ClassName=this.ClassName,this.object.FileName=this.objectBinding.FileName,this.currentClass&&""!==this.FileName){(yield this.currentClass.DeleteFileAsync(this.objectBinding.FileName)).Result&&this.mainMediator.createNewMessage(this,"FileDeleted",this.objectBinding.FileName)}yield this._updateBinding()}}))),this._init(),this._registerObservable()}_init(){this.object={FileName:"",ClassName:""}}currentClassNameChanged(x){}currentClassChanged(x){}currentFileNameChanged(x){}_registerObservable(){const A={FileName:"",ClassName:"",Delete:this.deleteClicked},V={category:x.DataServices.Categories.Recipes,displayName:this.viewModelId};this.objectHelper=new x.DataServices.BindingHelper(V,A,this.targetElement),this.objectBinding=this.objectHelper.observable,this.objectHelper.processAll(this.targetElement)}_updateBinding(){var A;return __awaiter(this,void 0,void 0,(function*(){x.Application.VerboseLog.log(`Delete file update binding for ${this.ClassName} ${this.FileName||"-"}`,null,x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Recipe),yield null===(A=null==this?void 0:this.objectHelper)||void 0===A?void 0:A.updateBinding(this.object)}))}receivingViewModelMessage(x){return __awaiter(this,void 0,void 0,(function*(){this.isTargetElementAttached&&(yield this.checkForMessageUpdates())}))}checkForMessageUpdates(){const x=Object.create(null,{checkForMessageUpdates:{get:()=>super.checkForMessageUpdates}});return __awaiter(this,void 0,void 0,(function*(){if(yield x.checkForMessageUpdates.call(this),this.mainMediator){if(""===this.FileName)return;this.object.FileName=this.FileName,this.objectBinding.FileName=this.FileName}}))}attached(x){const A=Object.create(null,{attached:{get:()=>super.attached}});return __awaiter(this,void 0,void 0,(function*(){A.attached.call(this,x),yield this.checkForMessageUpdates(),yield this._updateBinding()}))}detached(x){super.detached(x)}dispose(){super.dispose()}}A.DeleteFile=DeleteFile}(A.Recipe||(A.Recipe={}))}(x.ViewModels||(x.ViewModels={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){"use strict";class Variables extends x.ViewModels.Recipe.BaseFileViewModel{constructor(A,V){super(A,V),this.viewModelId="VisiWin.ViewModels.Recipe.Variables",this.objList=[],this._objListInitialized=!1,this._isUpdating=!1,this._sortOrder="ascending",this._varArray=[],this._boudUnitHandler=this._unitChanged.bind(this),this.listInitialized=x.UI.eventHandler(x=>{}),this.itemInserted=x.UI.eventHandler(A=>{x.isNullOrUndefined(A.detail)||A.detail.repeatedDOMLength==this.objList.length&&this.mainMediator.createNewMessage(this,"RecipeFilesInfo",this.objList)}),this.indexChanged=x.UI.eventHandler(x=>{}),this._init()}_unitChanged(){return __awaiter(this,void 0,void 0,(function*(){yield this._getFileValues()}))}_init(){return __awaiter(this,void 0,void 0,(function*(){x.Utilities.isInDesignMode()&&this.objList.push({Comment:"",DefaultValue:"",LocalizableText:"",LocalizableVariableText:"",SortIndex:0,VariableFullName:"",MaxValue:"",MinValue:"",Value:"",UnitText:"",ErrorCode:0}),this._registerObservable()}))}currentClassNameChanged(x){return __awaiter(this,void 0,void 0,(function*(){}))}currentClassChanged(x){return __awaiter(this,void 0,void 0,(function*(){}))}currentFileNameChanged(x){return __awaiter(this,void 0,void 0,(function*(){yield this._getFileValues()}))}_registerObservable(){var A,V;const R={category:x.DataServices.Categories.Recipes,displayName:this.viewModelId};if(this.objectHelper=new x.DataServices.BindingHelper(R,this.objList,this.targetElement),!this.objectHelper.isInTemplateView&&this.targetElement){const R={dataSource:(null===(V=null===(A=null==this?void 0:this.targetElement)||void 0===A?void 0:A.winControl)||void 0===V?void 0:V.controlId)||this.viewModelId,selectedIndex:-1,selectedIndexChanged:this.indexChanged,listInitialized:this.listInitialized,itemInserted:this.itemInserted},D={displayName:this.viewModelId,category:x.DataServices.Categories.Recipes};this.listHelper=new x.DataServices.BindingHelper(D,R,this.targetElement),this.listBinding=this.listHelper.observable,this.listHelper.processAll(this.targetElement)}}_updateBinding(){var A;return __awaiter(this,void 0,void 0,(function*(){x.Application.VerboseLog.log(`Variable list update binding for ${this.ClassName} ${this.FileName||"-"}`,null,x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Recipe),yield null===(A=null==this?void 0:this.objectHelper)||void 0===A?void 0:A.updateBinding(this.objList)}))}receivingViewModelMessage(A){return __awaiter(this,void 0,void 0,(function*(){if(this.isTargetElementAttached){yield this.checkForMessageUpdates();const R=A.properties.keys();for(var V in R){if(this.currentClass.IsServerSideRecipe){if("RecipeBufferChangedEventArgs"===R[V]){let D=A.properties.getByKey(R[V]);D.Action&&D.Action===x.System.Recipe.RecipeChangedAction.SaveBufferToFile&&(yield this._getFileValues())}if("RecipeFilesChangedEventArgs"===R[V]){A.properties.getByKey(R[V]).FileAction===x.System.Recipe.FileAction.Saved&&(yield this._getFileValues())}if("RecipeWrittenToProcessEventArgs"===R[V]){A.properties.getByKey(R[V]).Action===x.System.Recipe.RecipeChangedAction.SaveBufferToFile&&(yield this._getFileValues())}}if("CurrentRecipeFileName"===R[V]){let x=A.properties.getByKey(R[V]);x===this.FileName&&""!==x||(yield this._getFileValues())}if("CurrentRecipeClass"===R[V]){let x=A.properties.getByKey(R[V]);this.ClassName!==x.Name&&(yield this._getFileValues())}}}}))}checkForMessageUpdates(){const x=Object.create(null,{checkForMessageUpdates:{get:()=>super.checkForMessageUpdates}});return __awaiter(this,void 0,void 0,(function*(){yield x.checkForMessageUpdates.call(this),this._isUpdating}))}_updateList(x){return __awaiter(this,void 0,void 0,(function*(){if(x){if(this._objListInitialized)return;if(!(x.length>0&&this.objList.length>0)){if(0==x.length)this.objList[0]&&this.objList.splice(0,this.objList.length),this.mainMediator.createNewMessage(this,"RecipeFilesInfo",this.objList);else{this.objList[0]&&this.objList.splice(0,this.objList.length);for(let A=0;A<x.length;A++)this.objList.push(x[A])}return void(yield this._updateBinding())}this.objList.splice(0,this.objList.length);for(let A=0;A<x.length;A++)this.objList.push(x[A]);""===this.FileName&&(this.objList[0]&&this.objList.splice(0,this.objList.length),this._objListInitialized=!0,yield this._updateBinding()),this.objList[0]&&""!==this.objList[0].VariableFullName&&(this._objListInitialized=!0,yield this._updateBinding())}}))}_cleanUpVariableArray(){for(var x=0;x<this._varArray.length;x++)this._varArray[x].UnitClass&&this._varArray[x].UnitClass.Change.remove(this._boudUnitHandler),this._varArray[x].Detach(),this._varArray[x].Dispose();this._varArray=[]}_getFileValues(){var A,V;return __awaiter(this,void 0,void 0,(function*(){if(this._isUpdating)return;this._isUpdating=!0;let R=[];if(""===this.ClassName)return void(this._isUpdating=!1);if(!this.currentClass)return void(this._isUpdating=!1);if(""===this.FileName)return R=[],this._isUpdating=!1,this._objListInitialized=!1,void this._updateList(R);{const A=this.mainMediator.checkNewMessage("CurrentRecipeFileName");x.isNullOrEmpty(A)&&(R=[])}this._objListInitialized=!1;const D=setTimeout(()=>{this._isUpdating=!1,clearTimeout(D)},5e3);let N=yield this.currentClass.GetMemberDefinitionsAsync();try{if("ascending"!==this._sortOrder){var U=N.sort(({SortIndex:x},{SortIndex:A})=>A-x);N=U}else{const x=N.sort(({SortIndex:x},{SortIndex:A})=>x-A);N=x}}catch(A){x.Application.WarnLog.log(`Variable list sort error ${this.ClassName} ${this.FileName||"-"}`,A,x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Recipe)}const B=[],F=x.System.DataAccess.VariableService.getService();this._cleanUpVariableArray();for(let x=0;x<N.length;x++){const A=F.GetVariable(N[x].VariableFullName);this._varArray.push(A),B.push(A.AttachAsync())}yield Promise.all(B);for(var W=0;W<this._varArray.length;W++)this._varArray[W].UnitClass&&this._varArray[W].UnitClass.Change&&this._varArray[W].UnitClass.Change.add(this._boudUnitHandler);const H=x.System.Recipe.RecipeService.getService(),z=yield H.GetRecipeFileAsync(this.ClassName,this.FileName),G=yield z.RecipeFile.GetValuesAsync();for(let x=0;x<N.length;x++){const D=this._varArray.find(A=>{if(A.Name&&A.Name==N[x].VariableFullName)return A}),U=G.find(A=>{if(A.VariableName==N[x].VariableFullName)return A});R.push({Comment:N[x].Comment,DefaultValue:N[x].DefaultValue,LocalizableText:N[x].LocalizableText,LocalizableVariableText:D.LocalizableText,SortIndex:N[x].SortIndex,VariableFullName:N[x].VariableFullName,MaxValue:null==D?void 0:D.MaxValue,MinValue:null==D?void 0:D.MinValue,Value:null==U?void 0:U.Value,UnitText:null===(V=null===(A=null==D?void 0:D.UnitClass)||void 0===A?void 0:A.CurrentUnit)||void 0===V?void 0:V.Text,ErrorCode:null==U?void 0:U.ErrorCode})}clearTimeout(D),this._updateList(R),yield x.sleep(500),this._isUpdating=!1}))}attached(x){const A=Object.create(null,{attached:{get:()=>super.attached}});return __awaiter(this,void 0,void 0,(function*(){A.attached.call(this,x),yield this.checkForMessageUpdates(),yield this._getFileValues()}))}detached(x){this._cleanUpVariableArray(),super.detached(x)}dispose(){super.dispose()}}A.Variables=Variables}(A.Recipe||(A.Recipe={}))}(x.ViewModels||(x.ViewModels={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){"use strict";class Files extends x.ViewModels.Recipe.BaseFileViewModel{constructor(A,V){super(A,V),this.viewModelId="VisiWin.ViewModels.Recipe.Files",this.objList=[],this._objListInitialized=!1,this.stateValid=!1,this._isUpdating=!1,this.itemInserted=x.UI.eventHandler(x=>{x.detail.repeatedDOMLength==this.objList.length&&this._updateSelectedIndex()}),this.indexChanged=x.UI.eventHandler(A=>{this._objListInitialized&&""!==A.detail&&-1!==A.detail&&x.isNumber(A.detail.selectedIndex)&&-1!==A.detail.selectedIndex&&this.objList.length>=A.detail.selectedIndex&&(this.FileName=this.objList[A.detail.selectedIndex].FileName)}),this._init()}_init(){return __awaiter(this,void 0,void 0,(function*(){const A=this._createFileShape();x.Utilities.isInDesignMode()?this.objList.push(A):this.objList[0]&&this.objList.splice(0,this.objList.length),this._registerObservable()}))}_validateState(){return __awaiter(this,void 0,void 0,(function*(){this.classInitialized&&(this.stateValid=!0,this.objList.length),yield this.checkForMessageUpdates()}))}_initRecipeFiles(){return __awaiter(this,void 0,void 0,(function*(){if(this.currentClass){if(this._isUpdating)return;this.stateValid=!1,this._objListInitialized=!1;let x=!1;const A=[];if(this.currentClass.FileNames.length>0)for(let A=0;A<this.currentClass.FileNames.length;A++){-1===this.objList.findIndex(x=>{x.FileName,this.currentClass.FileNames[A]})&&(x=!0)}if(this.currentClass.FileNames.length!==this.objList.length&&(x=!0),x){if(this._isUpdating=!0,this.currentClass.FileNames.length>0){const x=this.currentClass.FileNames;for(let V=0;V<x.length;V++){const R=yield this.currentClass.GetRecipeFileAsync(x[V]);R&&R.RecipeFile&&A.push(R.RecipeFile)}}this.objList[0]&&this.objList.splice(0,this.objList.length);for(let x=0;x<A.length;x++)this.objList.push(A[x]);this.stateValid=!0,this._objListInitialized=!0,yield this._updateBinding(),this._isUpdating=!1}}else this._objListInitialized=!0,this.stateValid=!1,this._isUpdating=!1}))}_createFileShape(){return{Description:"",FileName:this.FileName,RecipeClassName:"",SavedByMachine:null,SavedByUser:null,TimeOfLastChange:null,WhoSavedRecipe:""}}currentClassNameChanged(x){this._initRecipeFiles()}currentClassChanged(x){this._initRecipeFiles()}currentFileNameChanged(x){this._updateSelectedIndex()}_registerObservable(){var A,V;const R={category:x.DataServices.Categories.Recipes,displayName:this.viewModelId};if(this.objectHelper=new x.DataServices.BindingHelper(R,this.objList,this.targetElement),!this.objectHelper.isInTemplateView&&this.targetElement){const R={dataSource:(null===(V=null===(A=null==this?void 0:this.targetElement)||void 0===A?void 0:A.winControl)||void 0===V?void 0:V.controlId)||this.viewModelId,selectedIndex:-1,selectedIndexChanged:this.indexChanged,itemInserted:this.itemInserted},D={displayName:this.viewModelId,category:x.DataServices.Categories.Recipes};this.listHelper=new x.DataServices.BindingHelper(D,R,this.targetElement),this.listBinding=this.listHelper.observable,this.listHelper.processAll(this.targetElement)}}_updateBinding(){return __awaiter(this,void 0,void 0,(function*(){this.stateValid===this._objListInitialized&&(x.Application.VerboseLog.log(`File list update binding for ${this.ClassName} ${this.FileName||"-"}`,null,x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Recipe),yield this.objectHelper.updateBinding(this.objList),this._updateSelectedIndex())}))}_updateSelectedIndex(){return __awaiter(this,void 0,void 0,(function*(){if(this.objList.length>0&&this.listBinding){const A=this.objList.findIndex(x=>x.FileName===this.FileName);setTimeout(()=>{this.listBinding.selectedIndex!==A&&(this.listBinding.selectedIndex=A,x.Application.VerboseLog.log(`File list update selectedIndex for ${this.ClassName} ${this.FileName||"-"}  ${A}`,null,x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Recipe))},20)}}))}checkForMessageUpdates(){const x=Object.create(null,{checkForMessageUpdates:{get:()=>super.checkForMessageUpdates}});return __awaiter(this,void 0,void 0,(function*(){yield x.checkForMessageUpdates.call(this),this.stateValid=!1,this._objListInitialized||(yield this._initRecipeFiles()),this.stateValid=!0,this._updateSelectedIndex()}))}receivingViewModelMessage(x){return __awaiter(this,void 0,void 0,(function*(){if(this.isTargetElementAttached){yield this.checkForMessageUpdates();const V=x.properties.keys();for(var A in V){if("NewFileName"===V[A]){""!==x.properties.getByKey(V[A])&&(yield this._initRecipeFiles())}if("FileDeleted"===V[A]){""!==x.properties.getByKey(V[A])&&(yield this._initRecipeFiles())}}}}))}attached(x){const A=Object.create(null,{attached:{get:()=>super.attached}});return __awaiter(this,void 0,void 0,(function*(){A.attached.call(this,x),yield this.checkForMessageUpdates(),yield this._validateState()}))}detached(x){super.detached(x)}dispose(){super.dispose()}}A.Files=Files}(A.Recipe||(A.Recipe={}))}(x.ViewModels||(x.ViewModels={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){"use strict";class FileNames extends x.ViewModels.Recipe.BaseFileViewModel{constructor(A,V){super(A,V),this.viewModelId="VisiWin.ViewModels.Recipe.FileNames",this.objList=[],this._isUpdating=!1,this._objListInitialized=!1,this.stateValid=!1,this.itemsLoaded=x.UI.eventHandler(x=>{this.myItemsLoaded=!0,this._updateSelectedIndex()}),this.itemInserted=x.UI.eventHandler(x=>{x.detail.repeatedDOMLength==this.objList.length&&this._updateSelectedIndex()}),this.indexChanged=x.UI.eventHandler(x=>{this._objListInitialized&&x.detail&&-1!==x.detail.selectedIndex&&(this.FileName=this.objList[x.detail.selectedIndex].FileName)}),this._init()}_init(){return __awaiter(this,void 0,void 0,(function*(){x.Utilities.isInDesignMode()?this.objList.push({FileName:""}):this.objList=[],this._registerObservable()}))}_getFileNames(){return __awaiter(this,void 0,void 0,(function*(){if(this.currentClass){if(this._isUpdating)return;this._isUpdating=!0,this.objList[0]&&this.objList.splice(0,this.objList.length),this._objListInitialized=!1;let A=[];A=this.currentClass.FileNames.map(x=>({FileName:x}));let V=!0;if(A.length===this.objList.length)for(let x=0;x<A.length;x++)A[x].FileName!==this.objList[x].FileName&&(V=!1);else V=!1;if(!V){let x=this.objectHelper.observable.dataSource.list;this.objList[0]&&this.objList.splice(0,this.objList.length),x.splice(0,x.length);for(let V=0;V<A.length;V++)this.objList.push(A[V]),x.push(A[V]);0===this.objList.length&&this.objList.push({FileName:""}),this._objListInitialized=!0,this.mainMediator.createNewMessage(this,"RecipeFileNames",this.objList)}yield x.sleep(100),this._isUpdating=!1,this._objListInitialized=!0}}))}_validateState(){return __awaiter(this,void 0,void 0,(function*(){yield this._getFileNames(),yield this._updateBinding(),this._updateSelectedIndex()}))}currentClassNameChanged(x){this.FileName="",this._validateState()}currentClassChanged(x){this.FileName="",this._validateState()}currentFileNameChanged(x){}_registerObservable(){var A,V;const R={category:x.DataServices.Categories.Recipes,displayName:this.viewModelId};if(this.objectHelper=new x.DataServices.BindingHelper(R,this.objList,this.targetElement),!this.objectHelper.isInTemplateView&&this.targetElement){const R={dataSource:(null===(V=null===(A=null==this?void 0:this.targetElement)||void 0===A?void 0:A.winControl)||void 0===V?void 0:V.controlId)||this.viewModelId,selectedIndex:-1,selectedIndexChanged:this.indexChanged,itemInserted:this.itemInserted,itemsLoaded:this.itemsLoaded},D={displayName:this.viewModelId,category:x.DataServices.Categories.Recipes};this.listHelper=new x.DataServices.BindingHelper(D,R,this.targetElement),this.listBinding=this.listHelper.observable,this.listHelper.processAll(this.targetElement)}}_updateBinding(){var A;return __awaiter(this,void 0,void 0,(function*(){x.Application.VerboseLog.log(`File name list update binding for ${this.ClassName} ${this.FileName||"-"}`,null,x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Recipe),yield null===(A=null==this?void 0:this.objectHelper)||void 0===A?void 0:A.updateBinding(this.objList)}))}_updateSelectedIndex(){return __awaiter(this,void 0,void 0,(function*(){if(this.objList[0]&&""!==this.objList[0].FileName)if(this.listBinding&&""!==this.FileName){const A=this.objList.findIndex(x=>x.FileName===this.FileName);setTimeout(()=>{this.listBinding.selectedIndex!==A&&(this.listBinding.selectedIndex=A,x.Application.VerboseLog.log(`File name list update selectedIndex for ${this.ClassName} ${this.FileName||"-"}`,null,x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Recipe))},100)}else this.listBinding.selectedIndex=-1;else this.listBinding.selectedIndex=-1}))}receivingViewModelMessage(x){return __awaiter(this,void 0,void 0,(function*(){if(this.isTargetElementAttached&&this.stateValid){yield this.checkForMessageUpdates();const V=x.properties.keys();for(var A in V){if("NewFileName"===V[A]){""!==x.properties.getByKey(V[A])&&(yield this._getFileNames())}if("FileDeleted"===V[A]){""!==x.properties.getByKey(V[A])&&(yield this._getFileNames())}}}}))}checkForMessageUpdates(){const x=Object.create(null,{checkForMessageUpdates:{get:()=>super.checkForMessageUpdates}});return __awaiter(this,void 0,void 0,(function*(){yield x.checkForMessageUpdates.call(this),this.stateValid=!1,yield this._getFileNames(),this.stateValid=!0,this._updateSelectedIndex()}))}attached(x){const A=Object.create(null,{attached:{get:()=>super.attached}});return __awaiter(this,void 0,void 0,(function*(){A.attached.call(this,x),yield this.checkForMessageUpdates(),yield this._validateState()}))}detached(x){super.detached(x)}dispose(){super.dispose()}}A.FileNames=FileNames}(A.Recipe||(A.Recipe={}))}(x.ViewModels||(x.ViewModels={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){"use strict";class NewFile extends x.ViewModels.Recipe.BaseFileViewModel{constructor(A,V){super(A,V),this.viewModelId="VisiWin.ViewModels.Recipe.NewFile",this.saveClicked=x.UI.eventHandler(A=>__awaiter(this,void 0,void 0,(function*(){if(yield this.checkForMessageUpdates(),A&&A.detail){if(this.object.Description=this.objectBinding.Description,this.object.NewFileName=this.objectBinding.NewFileName,this.object.UseDefaultValues=this.objectBinding.UseDefaultValues,this.object.UseProcessValues=this.objectBinding.UseProcessValues,this.currentClass&&this.objectBinding.NewFileName){if(this.objectBinding.UseDefaultValues){yield this.currentClass.SetDefaultValuesToBufferAsync(x.System.Recipe.ClearBufferDefaultValues.Recipe,!0)}if(this.objectBinding.UseProcessValues){yield this.currentClass.ReadProcessToBufferAsync()}}0===(yield this.currentClass.SaveBufferToFileAsync(this.objectBinding.NewFileName,this.objectBinding.Description,!0,!0)).Result&&(this.mainMediator.createNewMessage(this,"NewFileName",this.objectBinding.NewFileName),this.FileName=this.objectBinding.NewFileName),yield this._updateBinding()}}))),this._init()}_init(){return __awaiter(this,void 0,void 0,(function*(){this.object={Description:"",ClassName:"",NewFileName:"",UseDefaultValues:!1,UseProcessValues:!1},this._registerObservable()}))}currentClassNameChanged(x){}currentClassChanged(x){}currentFileNameChanged(x){}_registerObservable(){const A={Description:"",ClassName:"",NewFileName:"",UseDefaultValues:!1,UseProcessValues:!1,Save:this.saveClicked},V={category:x.DataServices.Categories.Recipes,displayName:this.viewModelId};this.objectHelper=new x.DataServices.BindingHelper(V,A,this.targetElement),this.objectBinding=this.objectHelper.observable,this.objectHelper.processAll(this.targetElement)}_updateBinding(){var A;return __awaiter(this,void 0,void 0,(function*(){x.Application.VerboseLog.log(`New File update binding for ${this.ClassName} ${this.FileName||"-"}`,null,x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Recipe),yield null===(A=null==this?void 0:this.objectHelper)||void 0===A?void 0:A.updateBinding(this.object)}))}receivingViewModelMessage(x){return __awaiter(this,void 0,void 0,(function*(){this.isTargetElementAttached&&this.checkForMessageUpdates()}))}checkForMessageUpdates(){const x=Object.create(null,{checkForMessageUpdates:{get:()=>super.checkForMessageUpdates}});return __awaiter(this,void 0,void 0,(function*(){yield x.checkForMessageUpdates.call(this)}))}attached(x){const A=Object.create(null,{attached:{get:()=>super.attached}});return __awaiter(this,void 0,void 0,(function*(){A.attached.call(this,x),yield this.checkForMessageUpdates(),yield this._updateBinding()}))}detached(x){super.detached(x)}dispose(){super.dispose()}}A.NewFile=NewFile}(A.Recipe||(A.Recipe={}))}(x.ViewModels||(x.ViewModels={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){"use strict";class SaveFileAs extends x.ViewModels.Recipe.BaseFileViewModel{constructor(A,V){super(A,V),this.viewModelId="VisiWin.ViewModels.Recipe.SaveFileAs",this.saveClicked=x.UI.eventHandler(x=>__awaiter(this,void 0,void 0,(function*(){if(yield this.checkForMessageUpdates(),x&&x.detail){if(this.object.NewDescription=this.objectBinding.NewDescription||this.object.CurrentDescription,this.object.NewFileName=this.objectBinding.NewFileName||this.object.FileName,""!==this.object.NewFileName){yield this.currentClass.LoadFileToBufferAsync(this.object.NewFileName,!0);0===(yield this.currentClass.SaveBufferToFileAsync(this.object.NewFileName,this.object.NewDescription,!0,!0)).Result&&(this.mainMediator.createNewMessage(this,"NewFileName",this.object.NewFileName),this.FileName=this.object.NewFileName)}yield this._updateBinding()}}))),this._initObject(),this._registerObservable()}_initObject(){this.object={NewDescription:"",FileName:"",ClassName:"",NewFileName:"",CurrentDescription:""}}currentClassNameChanged(x){}currentClassChanged(x){}currentFileNameChanged(x){}_registerObservable(){const A={NewDescription:"",FileName:"",ClassName:"",NewFileName:"",CurrentDescription:"",Save:this.saveClicked},V={category:x.DataServices.Categories.Recipes,displayName:this.viewModelId};this.objectHelper=new x.DataServices.BindingHelper(V,A,this.targetElement),this.objectBinding=this.objectHelper.observable,this.objectHelper.processAll(this.targetElement)}_updateBinding(){var A;return __awaiter(this,void 0,void 0,(function*(){if(this.mainMediator){const x=this.mainMediator.checkNewMessage("CurrentRecipeFileName");if(!x)return;const A=this.mainMediator.checkNewMessage("CurrentRecipeClassName"),V=this.mainMediator.checkNewMessage("CurrentRecipeClass");if(!V)return;const R=(yield V.GetRecipeFileAsync(x)).RecipeFile.Description;this.object.ClassName=A,this.object.CurrentDescription=R,this.object.FileName=x}x.Application.VerboseLog.log(`Save file update binding for ${this.ClassName} ${this.FileName||"-"}`,null,x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Recipe),yield null===(A=null==this?void 0:this.objectHelper)||void 0===A?void 0:A.updateBinding(this.object)}))}receivingViewModelMessage(x){return __awaiter(this,void 0,void 0,(function*(){this.isTargetElementAttached&&this.checkForMessageUpdates()}))}checkForMessageUpdates(){const x=Object.create(null,{checkForMessageUpdates:{get:()=>super.checkForMessageUpdates}});return __awaiter(this,void 0,void 0,(function*(){yield x.checkForMessageUpdates.call(this)}))}attached(x){const A=Object.create(null,{attached:{get:()=>super.attached}});return __awaiter(this,void 0,void 0,(function*(){A.attached.call(this,x),this.checkForMessageUpdates(),yield this._updateBinding()}))}detached(x){super.detached(x)}dispose(){super.dispose()}}A.SaveFileAs=SaveFileAs}(A.Recipe||(A.Recipe={}))}(x.ViewModels||(x.ViewModels={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){"use strict";class WriteBufferToProcess extends x.ViewModels.Recipe.BaseFileViewModel{constructor(A,V){super(A,V),this.viewModelId="VisiWin.ViewModels.Recipe.WriteBufferToProcess",this._isSending=!1,this.writeBufferClicked=x.UI.eventHandler(A=>__awaiter(this,void 0,void 0,(function*(){if(yield this.checkForMessageUpdates(),A&&A.detail){if(this.spinner&&(this.spinner.style.visibility="visible"),this.object.FileName=this.FileName,this.objectBinding.FileName=this.FileName,this.object.ClassName=this.ClassName,!this.objectBinding.FileName)return;let V;if(this._isSending=!0,yield x.sleep(1e3),this.currentClass.IsEditing&&(V=yield this.currentClass.WriteBufferToProcessAsync()),this._isSending=!1,this.spinner&&(this.spinner.style.visibility="hidden"),this.dialog)this.dialog.hide&&this.dialog.hide();else{const x=this.getDialogControl(A.target.element);x&&x.hide&&x.hide()}}}))),this._init()}currentClassNameChanged(x){}currentClassChanged(x){}currentFileNameChanged(x){}_init(){this.object={FileName:"",ClassName:""},this._registerObservable()}getDialogControl(x){let A=x.parentElement;for(;A;){if(A&&A.winControl&&"WinJS.UI.Popup"===A.winControl.controlType)return A.winControl.contentControlElement.winControl;A=A.parentElement?A.parentElement:null}}_registerObservable(){const A={FileName:"",ClassName:"",WriteBufferToProcess:this.writeBufferClicked},V={category:x.DataServices.Categories.Recipes,displayName:this.viewModelId};this.objectHelper=new x.DataServices.BindingHelper(V,A,this.targetElement),this.objectBinding=this.objectHelper.observable,this.objectHelper.processAll(this.targetElement)}_updateBinding(){var A;return __awaiter(this,void 0,void 0,(function*(){x.Application.VerboseLog.log(`Write buffer to process update binding for ${this.ClassName} ${this.FileName||"-"}`,null,x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Recipe),yield null===(A=null==this?void 0:this.objectHelper)||void 0===A?void 0:A.updateBinding(this.object)}))}receivingViewModelMessage(x){return __awaiter(this,void 0,void 0,(function*(){this.isTargetElementAttached&&this.checkForMessageUpdates()}))}checkForMessageUpdates(){const x=Object.create(null,{checkForMessageUpdates:{get:()=>super.checkForMessageUpdates}});return __awaiter(this,void 0,void 0,(function*(){yield x.checkForMessageUpdates.call(this)}))}attached(x){const A=Object.create(null,{attached:{get:()=>super.attached}});return __awaiter(this,void 0,void 0,(function*(){this.dialog=this.getDialogControl(this.targetElement),this.spinner=document.getElementById("sendRecipeSpinner"),this.spinner&&(this.spinner.style.visibility="hidden"),A.attached.call(this,x),this.checkForMessageUpdates(),yield this._updateBinding()}))}detached(x){super.detached(x)}dispose(){super.dispose()}}WriteBufferToProcess.mediatorName="VisiWin.ViewModels.Recipe.MainMediator",A.WriteBufferToProcess=WriteBufferToProcess}(A.Recipe||(A.Recipe={}))}(x.ViewModels||(x.ViewModels={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){"use strict";class LoadFileToProcess extends x.ViewModels.Recipe.BaseFileViewModel{constructor(A,V){super(A,V),this.viewModelId="VisiWin.ViewModels.Recipe.LoadFileToProcess",this._isSending=!1,this.writeBufferClicked=x.UI.eventHandler(A=>__awaiter(this,void 0,void 0,(function*(){if(yield this.checkForMessageUpdates(),A&&A.detail){if(this.spinner&&(this.spinner.style.visibility="visible"),this.object.FileName=this.FileName,this.objectBinding.FileName=this.FileName,this.object.ClassName=this.ClassName,!this.objectBinding.FileName)return;let V;if(this._isSending=!0,yield x.sleep(1e3),V=yield this.currentClass.LoadFileToProcessAsync(this.FileName),this._isSending=!1,V.Result,this.spinner&&(this.spinner.style.visibility="hidden"),this.dialog)this.dialog.hide&&this.dialog.hide();else{const x=this.getDialogControl(A.target.element);x&&x.hide&&x.hide()}}}))),this._init()}currentClassNameChanged(x){}currentClassChanged(x){}currentFileNameChanged(x){}_init(){this.object={FileName:"",ClassName:""},this._registerObservable()}getDialogControl(x){let A=x.parentElement;for(;A;){if(A&&A.winControl&&"WinJS.UI.Popup"===A.winControl.controlType)return A.winControl.contentControlElement.winControl;A=A.parentElement?A.parentElement:null}}_registerObservable(){const A={FileName:"",ClassName:"",LoadFileToProcess:this.writeBufferClicked},V={category:x.DataServices.Categories.Recipes,displayName:this.viewModelId};this.objectHelper=new x.DataServices.BindingHelper(V,A,this.targetElement),this.objectBinding=this.objectHelper.observable,this.objectHelper.processAll(this.targetElement)}_updateBinding(){var A;return __awaiter(this,void 0,void 0,(function*(){x.Application.VerboseLog.log(`Load file to process update binding for ${this.ClassName} ${this.FileName||"-"}`,null,x.Internal.System.Diagnostics.Logging.AppDomainEventSource.Recipe),yield null===(A=null==this?void 0:this.objectHelper)||void 0===A?void 0:A.updateBinding(this.object)}))}receivingViewModelMessage(x){return __awaiter(this,void 0,void 0,(function*(){this.isTargetElementAttached&&this.checkForMessageUpdates()}))}checkForMessageUpdates(){const x=Object.create(null,{checkForMessageUpdates:{get:()=>super.checkForMessageUpdates}});return __awaiter(this,void 0,void 0,(function*(){yield x.checkForMessageUpdates.call(this)}))}attached(x){const A=Object.create(null,{attached:{get:()=>super.attached}});return __awaiter(this,void 0,void 0,(function*(){this.dialog=this.getDialogControl(this.targetElement),this.spinner=document.getElementById("sendRecipeSpinner"),this.spinner&&(this.spinner.style.visibility="hidden"),A.attached.call(this,x),this.checkForMessageUpdates(),yield this._updateBinding()}))}detached(x){super.detached(x)}dispose(){super.dispose()}}LoadFileToProcess.mediatorName="VisiWin.ViewModels.Recipe.MainMediator",A.LoadFileToProcess=LoadFileToProcess}(A.Recipe||(A.Recipe={}))}(x.ViewModels||(x.ViewModels={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){"use strict";function processMetadata(A,V,R){const D={};let N=!1;R&&R._metadata&&(N=!0,x.Class.initializeProperties(D,R._metadata)),V&&(N=!0,x.Class.initializeProperties(D,V)),N&&Object.defineProperty(A,"_metadata",{value:D,enumerable:!1})}A.processMetadata=processMetadata,A.processActionMetadata=function processActionMetadata(x,A,V){processMetadata(x,A,V)},A.processTriggerMetadata=function processTriggerMetadata(x,A,V){processMetadata(x,A,V)}}(A.Class||(A.Class={}))}(x.Triggers||(x.Triggers={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){"use strict";function getString(x){return{"VisiWin.Triggers.Util.JsonUnexpectedProperty":'Property "{0}" is not expected for {1}.',"VisiWin.Triggers.Util.JsonTypeMismatch":"{0}.{1}: Found type: {2}; Expected type: {3}.","VisiWin.Triggers.Util.JsonPropertyMissing":'Required property "{0}.{1}" is missing or invalid.',"VisiWin.Triggers.Util.JsonArrayTypeMismatch":"{0}.{1}[{2}]: Found type: {3}; Expected type: {4}.","VisiWin.Triggers.Util.JsonArrayElementMissing":"{0}.{1}[{2}] is missing or invalid.","VisiWin.Triggers.Util.JsonEnumValueNotString":"{0}.{1}: Found type: {2}; Expected type: String (choice of: {3}).","VisiWin.Triggers.Util.JsonInvalidEnumValue":"{0}.{1}: Invalid value. Found: {2}; Expected one of: {3}.","VisiWin.Triggers.Util.NoMetadataForType":"No property metadata found for type {0}.","VisiWin.Triggers.Util.NoTypeMetadataForProperty":"No type metadata specified for {0}.{1}.","VisiWin.Triggers.Util.NoElementTypeMetadataForArrayProperty":"No element type metadata specified for {0}.{1}[].","VisiWin.Triggers.Resources.MalformedFormatStringInput":"Malformed, did you mean to escape your '{0}'?","VisiWin.Actions.ActionNotImplemented":"Custom action does not implement execute method.","VisiWin.Triggers.ActionTrees.JsonNotArray":"ActionTrees JSON data must be an array ({0}).","VisiWin.Triggers.ActionTrees.JsonDuplicateActionTreeName":'Duplicate action tree name "{0}" ({1}).',"VisiWin.Triggers.Animations.InvalidRemove":"Do not call remove on an animation instance that is contained in a group."}[x]||""}function formatString(x,...A){return A.length>1&&(x=x.replace(/({{)|(}})|{(\d+)}|({)|(})/g,(function(x,V,R,D,N,U){if(N||U)throw formatString(getString("VisiWin.Triggers.Resources.MalformedFormatStringInput"),N||U);return(V?"{":R&&"}")||A[1+(0|D)]}))),x}function reportError(...A){const V=[...A];let R=V[0];const D=getString(R);if(""!==D){const x=Array.prototype.slice.call(V,0);x[0]=D,R+=": "+formatString.apply(null,x)}x.System.Diagnostics.Logger.ErrorLog.log(R)}function reportWarning(...A){const V=[...A];let R=V[0];const D=getString(R);if(""!==D){const x=Array.prototype.slice.call(V,0);x[0]=D,R+=": "+formatString.apply(null,x)}x.System.Diagnostics.Logger.WarnLog.log(R)}function getObjectTypeDescription(x){let A;A="function"==typeof x?x:x.constructor;let V=A.toString().match(/function (.{1,})\(/);if(V&&V.length>1){V=V[1];const x=V.length-5;-1!==V.indexOf("_ctor",x)&&(V=V.substring(0,x))}else V="(unknown type)";return V}function setProperty(x,A,V,R){R||(R=x.constructor._metadata);const D=R?R[A]:null,N=D?D.type:null;if(N){const R=function validatedPropertyValue(x,A,V,R,D){if(null==V)return null;if("function"==typeof R){if(!(V instanceof R||R===String&&"string"==typeof V||R===Boolean&&"boolean"==typeof V||R===Number&&"number"==typeof V)){if("function"==typeof R&&V.constructor===Object)return convertObjectToType(V,R);if(R.converter){const x=R.converter.convertFrom(V);if(x)return x}return reportError("VisiWin.Triggers.Util.JsonTypeMismatch",getObjectTypeDescription(x),A,getObjectTypeDescription(V),getObjectTypeDescription(R)),null}if(R===Array)if(D)for(let R=0;R<V.length;R++){const N=validatedPropertyValue(x,A,V[R],D);if(!N)return V[R]?reportError("VisiWin.Triggers.Util.JsonArrayTypeMismatch",getObjectTypeDescription(x),A,R,getObjectTypeDescription(V[R]),getObjectTypeDescription(D)):reportError("VisiWin.Triggers.Util.JsonArrayElementMissing",getObjectTypeDescription(x),A,R),null;V[R]=N}else reportWarning("VisiWin.Triggers.Util.NoElementTypeMetadataForArrayProperty",getObjectTypeDescription(x),A);return V}if("object"==typeof R){const D=Object.keys(R);return"string"!=typeof V?(reportError("VisiWin.Triggers.Util.JsonEnumValueNotString",getObjectTypeDescription(x),A,getObjectTypeDescription(V),D),null):-1===D.indexOf(V)?(reportError("VisiWin.Triffers.Util.JsonInvalidEnumValue",getObjectTypeDescription(x),A,V,D),null):R[V]}throw new Error("Not handling type "+R+" when validating against metadata")}(x,A,V,N,D.elementType);null!=R&&(x[A]=R)}else R&&D&&reportWarning("VisiWin.Triggers.Util.NoTypeMetadataForProperty",getObjectTypeDescription(x.constructor),A),x[A]=V}function convertObjectToType(x,A){const V=new A,R=A._metadata;R||reportWarning("VisiWin.Triggers.Util.NoMetadataForType",getObjectTypeDescription(V));for(const A in x)if("type"!==A){setProperty(V,A,x[A],R)}if(R)for(const x in R)if(R[x].required&&!V[x])return reportError("VisiWin.Triggers.Util.JsonPropertyMissing",getObjectTypeDescription(V),x),null;return V}function jsonReviver(x,A){if(A&&"object"==typeof A&&A.type){const x=A.type.split(".").reduce((function(x,A){return x?x[A]:null}),window);if(x&&"function"==typeof x)return convertObjectToType(A,x)}return A}A.parseJson=function parseJson(x,A){let V;try{if(V=JSON.parse(x,jsonReviver),A){for(const x in V)"type"!==x&&(A[x]=V[x]);return A}return V}catch(x){return V}},A.getVWType=function getVWType(A){let V;const R={variableType:"undefined",typeCode:x.System.DataAccess.TypeCode.Empty,jsType:"undefined",typeMin:null,typeMax:null,negFlag:!1,floatFlag:!1,eFlag:!1};switch("string"==typeof A?(V=A,A=x.Internal.EnumHelper.convertToNumber(x.System.DataAccess.TypeCode,A)):V=x.System.DataAccess.TypeCode[A],R.typeCode=A,R.variableType=V,A){case x.System.DataAccess.TypeCode.Boolean:R.jsType="boolean",R.typeMin=0,R.typeMax=1,R.negFlag=!1,R.floatFlag=!1,R.eFlag=!1;break;case x.System.DataAccess.TypeCode.Byte:R.jsType="number",R.typeMin=0,R.typeMax=255,R.negFlag=!1,R.floatFlag=!1,R.eFlag=!1;break;case x.System.DataAccess.TypeCode.UInt16:R.jsType="number",R.typeMin=0,R.typeMax=65535,R.negFlag=!1,R.floatFlag=!1,R.eFlag=!1;break;case x.System.DataAccess.TypeCode.UInt32:R.jsType="number",R.typeMin=0,R.typeMax=4294967295,R.negFlag=!1,R.floatFlag=!1,R.eFlag=!1;break;case x.System.DataAccess.TypeCode.SByte:R.jsType="number",R.typeMin=-128,R.typeMax=127,R.negFlag=!0,R.floatFlag=!1,R.eFlag=!1;break;case x.System.DataAccess.TypeCode.Int16:R.jsType="number",R.typeMin=-32768,R.typeMax=32767,R.negFlag=!0,R.floatFlag=!1,R.eFlag=!1;break;case x.System.DataAccess.TypeCode.Int32:R.jsType="number",R.typeMin=-2147483648,R.typeMax=2147483647,R.negFlag=!0,R.floatFlag=!1,R.eFlag=!1;break;case x.System.DataAccess.TypeCode.Single:R.jsType="number",R.typeMin=-1e38,R.typeMax=1e38,R.negFlag=!0,R.floatFlag=!0,R.eFlag=!0;break;case x.System.DataAccess.TypeCode.Double:R.jsType="number",R.typeMin=-1e307,R.typeMax=1e307,R.negFlag=!0,R.floatFlag=!0,R.eFlag=!0;break;case x.System.DataAccess.TypeCode.String:R.jsType="string",R.typeMin=null,R.typeMax=null,R.negFlag=!1,R.floatFlag=!1,R.eFlag=!1;break;case x.System.DataAccess.TypeCode.DateTime:R.jsType="datetime",R.typeMin=null,R.typeMax=null,R.negFlag=null,R.floatFlag=null,R.eFlag=null;break;default:R.jsType="undefined",R.variableType="undefined"}return R}}(A.Util||(A.Util={}))}(x.Triggers||(x.Triggers={}))}(VisiWin||(VisiWin={}));var __awaiter=this&&this.__awaiter||function(x,A,V,R){return new(V||(V=Promise))((function(D,N){function fulfilled(x){try{step(R.next(x))}catch(x){N(x)}}function rejected(x){try{step(R.throw(x))}catch(x){N(x)}}function step(x){x.done?D(x.value):function adopt(x){return x instanceof V?x:new V((function(A){A(x)}))}(x.value).then(fulfilled,rejected)}step((R=R.apply(x,A||[])).next())}))},VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin;!function(x){!function(A){"use strict";class ActionBase{constructor(){this.actionName=null,this.targetSelector="self",this.conditionResult=!1,this.operand1=null,this.operator="true",this.operand2=null,this.propertyList=[],this.__triggerData=null,this._actionId=null,this._target=null,this._resultId=null,this._resultIdIfTrue=null,this._resultIdIfFalse=null,this._actionId=x.Utilities.shortId(),this.addPropertyList(ActionBase,ActionBase.actionBasePropertyList)}set resultId(x){this._resultId=x}get resultId(){return this._resultId}set resultIdIfTrue(x){this._resultIdIfTrue=x}get resultIdIfTrue(){return this._resultIdIfTrue}set resultIdIfFalse(x){this._resultIdIfFalse=x}get resultIdIfFalse(){return this._resultIdIfFalse}addPropertyList(x,A){let V,R,D;for(R in A)for(D in V=A[R],V=A[R],this.propertyList[R]={},V)this.propertyList[R][D]=V[D]}setActionResult(A,V){this.__triggerData.resultAction.succeed=A,this.__triggerData.resultAction.reason=V,this._setTriggerData("result",A),this._setTriggerData("reason",V),this.resultId&&x.AppServices.ActionService.executeAction(this.resultId,this.__triggerData.value,this._target,this.__triggerData),null!==A&&(A?this.resultIdIfTrue&&x.AppServices.ActionService.executeAction(this.resultIdIfTrue,this.__triggerData.value,this._target,this.__triggerData):this.resultIdIfFalse&&x.AppServices.ActionService.executeAction(this.resultIdIfFalse,this.__triggerData.value,this._target,this.__triggerData))}getData(A,V){return __awaiter(this,void 0,void 0,(function*(){let R=null;return x&&x.AppServices&&x.AppServices.DataService&&(R=yield x.AppServices.DataService.getData(A,V,this._actionId)),Promise.resolve(R)}))}init(x,A){}execute(x,A,V){throw new Error("Custom action does not implement execute method.")}getInitialValue(x,A){}disposeAction(){}dispose(){}_executeAllAsync(A,V,R){return __awaiter(this,void 0,void 0,(function*(){this.__triggerData=R,R.sender.triggerElements&&R.sender.triggerElements.length>0&&(V=R.sender.triggerElements),this.__triggerData=R,this._setTriggerData("trigger",R),this._setTriggerData("action",this),R.sourceElement.__VWCONTROL__?(this._setTriggerData("sourceControl",R.sourceElement),this._setTriggerData("sourceElement",R.sourceElement.element)):(this._setTriggerData("sourceElement",R.sourceElement),this._setTriggerData("sourceControl",R.sourceElement.winControl)),this._setTriggerData("eventArgs",R.event);let D=[];Array.isArray(V)?D=this.getTargetElements(V)||[]:D.push(V);for(let V=0;V<D.length;V++){this._setTriggerData("targetElement",D[V]),this._setTriggerData("targetControl",D[V].winControl),this._setTriggerData("value",A),D[V].winControl||(D[V].winControl=D[V]);const N=yield x.Utilities.parseProperty(this.operand1,this._actionId),U=yield x.Utilities.parseProperty(this.operand2,this._actionId),B=yield this._checkCondition(N,this.operator,U);if(B.errorText){x.Application.ErrorLog.log("VisiWin.Action.ActionBase: Error in condition: "+B.errorText);break}this.conditionResult=B.returnValue,R.conditionResult=this.conditionResult,this._setTriggerData("conditionResult",R.conditionResult),R.targetElement=D[0],this._target=D[V],this.execute&&(yield this.execute(A,this._target,R))}return null}))}_getInitialValueInit(x,A){const V=this.getTargetElements(x)||[];A=A||null;for(let x=0;x<V.length;x++)this.init&&this.init(V[x],A)}getInitialValueAll(x,A){try{const V=this.getTargetElements(x)||[];return A=A||null,V.length>0?this.getInitialValue?this.getInitialValue(V[0],A):null:this.getInitialValue?this.getInitialValue(null,A):null}catch(x){return null}}getTargetElements(A){return this.targetSelector&&""!==this.targetSelector&&"self"!==this.targetSelector.toLowerCase()?"&"===this.targetSelector[0]?[x.AppServices[this.targetSelector.substring(1)]]:document.querySelectorAll(this.targetSelector):A}executeAll(x,A,V){return __awaiter(this,void 0,void 0,(function*(){return this._executeAllAsync(x,A,V)}))}_setTriggerData(A,V){x&&x.AppServices&&x.AppServices.DataService&&x.AppServices.DataService.setTriggerData(this._actionId+A,V)}_checkCondition(A,V,R){return __awaiter(this,void 0,void 0,(function*(){let D=!0;(V=unescape(JSON.parse('"'+V+'"')))&&V.trim();let N,U,B,F,W,H,z,G=[],j=V;const q=typeof j;let Q=[],K=null;if(!j)return{returnValue:!0,errorText:null};if("string"!==q)return Promise.resolve({returnValue:!1,errorText:"Operator has unknown type: "+q+"."});if("true"===j.toLowerCase())return Promise.resolve({returnValue:!0,errorText:null});if("false"===j.toLowerCase())return Promise.resolve({returnValue:!1,errorText:null});{if("string"==typeof A&&A.indexOf("..")>=0&&(K=A,A=R,R=K),F=""!==R?yield this.getData(R):R,W=""!==A?yield this.getData(A):A,"string"==typeof F&&"false"===F.toLowerCase()&&(F=!1),"string"==typeof F&&"true"===F.toLowerCase()&&(F=!0),"string"==typeof W&&"false"===W.toLowerCase()&&(W=F,F=!1),"string"==typeof W&&"true"===W.toLowerCase()&&(W=F,F=!0),"boolean"!=typeof F||"number"!=typeof W&&"string"!=typeof W||(K=W,W=F,F=K),H=typeof F,z=typeof W,"string"!==z&&"number"!==z&&"boolean"!==z)return Promise.resolve({returnValue:!1,errorText:"Operand1 must be from type string, number or boolean."});if("string"!==H&&"number"!==H&&"boolean"!==H)return Promise.resolve({returnValue:!1,errorText:"Operand2 must be from type string, number or boolean."});let V=parseFloat(W),D=parseFloat(F);x.Utilities.checkNumberInString(W)&&!isNaN(V)?(W=V,z=typeof V):"string"===z&&(V=W.toLowerCase(),"false"===V.trim()?(W=!1,z=typeof V):"true"===V.trim()&&(W=!0,z=typeof V)),x.Utilities.checkNumberInString(F)&&!isNaN(D)?(F=D,H=typeof D):"string"===H&&(D=F.toLowerCase(),"false"===D.trim()?(F=!1,H=typeof D):"true"===D.trim()&&(F=!0,H=typeof D)),"string"===z&&"string"!==H?(F=F.toString(),H=typeof F):"string"!==z&&"string"===H&&(W=W.toString(),z=typeof W);let q=-1;if("string"===H&&(q=F.indexOf("..")),"string"===H&&q>0){G=F.replace(".."," .. ").split(" ");for(let x=G.length-1;x>=0;x--)""===G[x]&&G.splice(x,1);if(N=parseFloat(G[0].trim()),U=G[1].trim(),B=parseFloat(G[2].trim()),N>B){const x=N;N=B,B=x}}else G.push(F.toString());switch(z){case"boolean":case"string":Q=[x.UI.ConditionOperators.OPERATOR_EQUAL,x.UI.ConditionOperators.OPERATOR_UNEQUAL];break;case"number":Q=[x.UI.ConditionOperators.OPERATOR_LESS,x.UI.ConditionOperators.OPERATOR_GRATER,x.UI.ConditionOperators.OPERATOR_LESSEQUAL,x.UI.ConditionOperators.OPERATOR_GRATEREQUAL,x.UI.ConditionOperators.OPERATOR_EQUAL,x.UI.ConditionOperators.OPERATOR_UNEQUAL,x.UI.ConditionOperators.OPERATOR_INRANGE,x.UI.ConditionOperators.OPERATOR_OUTRANGE];break;default:return Promise.resolve({returnValue:!1,errorText:"wrong type on first operand in condition: "+z+"."})}for(let x=0;x<Q.length;x++)if(Q[x]===j){j=Q[x];break}}if("number"===z&&1===G.length){const A=G[0].trim(),V=parseFloat(A);if(isNaN(V))return Promise.resolve({returnValue:!1,errorText:'operand2 must be from type "number"'});switch(j){case x.UI.ConditionOperators.OPERATOR_LESS:return D=W<V,Promise.resolve({returnValue:D,errorText:null});case x.UI.ConditionOperators.OPERATOR_GRATER:return D=W>V,Promise.resolve({returnValue:D,errorText:null});case x.UI.ConditionOperators.OPERATOR_LESSEQUAL:return D=W<=V,Promise.resolve({returnValue:D,errorText:null});case x.UI.ConditionOperators.OPERATOR_GRATEREQUAL:return D=W>=V,Promise.resolve({returnValue:D,errorText:null});case x.UI.ConditionOperators.OPERATOR_EQUAL:return D=W===V,Promise.resolve({returnValue:D,errorText:null});case x.UI.ConditionOperators.OPERATOR_UNEQUAL:return D=W!==V,Promise.resolve({returnValue:D,errorText:null});default:return Promise.resolve({returnValue:!1,errorText:'unknown operator for number condidition "'+j+'".'})}}else if("boolean"===z&&1===G.length){const A=G[0];let V;if("true"===A.toLowerCase().trim())V=!0;else if("false"===A.toLowerCase().trim())V=!1;else{if("number"!==H)return Promise.resolve({returnValue:!1,errorText:'operand2 must be from type "boolean" or "number"'});V=0!==F}switch(j){case x.UI.ConditionOperators.OPERATOR_EQUAL:return D=W===V,Promise.resolve({returnValue:D,errorText:null});case x.UI.ConditionOperators.OPERATOR_UNEQUAL:return D=W!==V,Promise.resolve({returnValue:D,errorText:null});default:return Promise.resolve({returnValue:!1,errorText:'unknown operator for boolean condition "'+j+'".'})}}else if("number"===z&&3===G.length){if(isNaN(N))return Promise.resolve({returnValue:!1,errorText:'operand2 first subvalue must be from type "number"'});if(isNaN(N))return Promise.resolve({returnValue:!1,errorText:'operand2 second subvalue must be from type "number"'});if(".."!==U)return Promise.resolve({returnValue:!1,errorText:'unknown operator in subvalue from operand2 "'+j+'".'});switch(j){case x.UI.ConditionOperators.OPERATOR_INRANGE:return D=W>=N&&W<=B,Promise.resolve({returnValue:D,errorText:null});case x.UI.ConditionOperators.OPERATOR_OUTRANGE:return D=W<N||W>B,Promise.resolve({returnValue:D,errorText:null});default:return Promise.resolve({returnValue:!1,errorText:'unknown operator for range condition "'+j+'".'})}}else if("string"===z&&3===G.length){if(W=parseFloat(W),z=typeof W,"number"!==z)return Promise.resolve({returnValue:!1,errorText:'unknown type in first operand of condition: "'+z+'".'});if(isNaN(N))return Promise.resolve({returnValue:!1,errorText:'operand2 first subvalue must be from type "number"'});if(isNaN(N))return Promise.resolve({returnValue:!1,errorText:'operand2 second subvalue must be from type "number"'});if(".."!==U)return Promise.resolve({returnValue:!1,errorText:'unknown operator in subvalue from operand2 "'+j+'".'});switch(j){case x.UI.ConditionOperators.OPERATOR_INRANGE:return D=W>=N&&W<=B,Promise.resolve({returnValue:D,errorText:null});case x.UI.ConditionOperators.OPERATOR_OUTRANGE:return D=W<N||W>B,Promise.resolve({returnValue:D,errorText:null});default:return Promise.resolve({returnValue:!1,errorText:'unknown operator for range condition "'+j+'".'})}}else{if("string"!==z||1!==G.length)return Promise.resolve({returnValue:!1,errorText:'unknown type in first operand of condition: "'+z+'".'});{const A=G[0].toString();switch(j){case x.UI.ConditionOperators.OPERATOR_EQUAL:return D=W===A,Promise.resolve({returnValue:D,errorText:null});case x.UI.ConditionOperators.OPERATOR_UNEQUAL:return D=W!==A,Promise.resolve({returnValue:D,errorText:null});default:return Promise.resolve({returnValue:!1,errorText:'unknown operator for string condition "'+j+'".'})}}}}))}_disposeActionBase(){x.AppServices.DataService.clearTriggerDataStartsWidth(this._actionId)}}ActionBase.actionName="ActionBase",ActionBase.actionBasePropertyList={resultId:{type:String},resultIdIfTrue:{type:String},resultIdIfFalse:{type:String},operand1:{type:String},operator:{type:String},operand2:{type:String},stateCollection:{type:String},enableAction:{type:String},disableAction:{type:String}},A.ActionBase=ActionBase,x.Triggers.Class.processActionMetadata(ActionBase,ActionBase.actionBasePropertyList)}(x.Actions||(x.Actions={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class SetThemeAction extends A.ActionBase{constructor(){super(),this.theme=null,this.themeIfTrue=null,this.themeIfFalse=null,this.addPropertyList(SetThemeAction,SetThemeAction.propertyList)}execute(A,V,R){return __awaiter(this,void 0,void 0,(function*(){if(V){for(var A in R.value);let V=null;this.themeIfTrue||this.themeIfFalse?this.conditionResult?(V=yield this.getData(this.themeIfTrue,R.sender.triggerSourcePropertyValue),this.setActionResult(!0,V)):(V=yield this.getData(this.themeIfFalse,R.sender.triggerSourcePropertyValue),this.setActionResult(!1,V)):(V=yield this.getData(this.theme,R.sender.triggerSourcePropertyValue),this.setActionResult(null,V)),V&&x.Application.aktTheme!==V&&x.AppServices.AppService.changeTheme(V+".json")}return null}))}init(x,A){}disposeAction(){}getInitialValue(A,V){return x.Application.aktTheme}}SetThemeAction.actionName="SetThemeAction",SetThemeAction.propertyList={theme:{type:String},themeIfTrue:{type:String},themeIfFalse:{type:String}},A.SetThemeAction=SetThemeAction,x.Triggers.Class.processActionMetadata(SetThemeAction,SetThemeAction.propertyList,x.Actions.ActionBase)}(x.Actions||(x.Actions={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class SetPropertyAction extends A.ActionBase{constructor(){super(),this.propertyName=null,this.propertyValue=null,this.propertyValueIfTrue=null,this.propertyValueIfFalse=null,this._targetPropertyType=null,this.addPropertyList(SetPropertyAction,SetPropertyAction.propertyList)}execute(A,V,R){return __awaiter(this,void 0,void 0,(function*(){if(V){const A=V.winControl?V.winControl:null;let D=null,N=null;null===this.propertyValueIfTrue&&null===this.propertyValueIfFalse?(D=yield this.getData(this.propertyValue,R.sender.triggerSourcePropertyValue),this.setActionResult(null,D)):this.conditionResult?(D=yield this.getData(this.propertyValueIfTrue),null!==this.propertyValueIfTrue&&(this.propertyValueIfTrue.toLowerCase().startsWith("triggerwert (%value)")?D=this.propertyValueIfTrue.toLowerCase().replace("triggerwert (%value)",D):this.propertyValueIfTrue.toLowerCase().startsWith("trigger value (%value)")?D=this.propertyValueIfTrue.toLowerCase().replace("trigger value (%value)",D):x.Internal.stringContains(this.propertyValueIfTrue,"%value")&&(D=this.propertyValueIfTrue.replace("%value",D))),this.setActionResult(!0,D)):(D=yield this.getData(this.propertyValueIfFalse),null!==this.propertyValueIfFalse&&(this.propertyValueIfFalse.toLowerCase().startsWith("triggerwert (%value)")?D=this.propertyValueIfFalse.toLowerCase().replace("triggerwert (%value)",D):this.propertyValueIfFalse.toLowerCase().startsWith("trigger value (%value)")?D=this.propertyValueIfFalse.toLowerCase().replace("trigger value (%value)",D):x.Internal.stringContains(this.propertyValueIfFalse,"%value")&&(D=this.propertyValueIfFalse.replace("%value",D))),this.setActionResult(!1,D)),D=x.Utilities.convertToType(D,this._targetPropertyType),N=yield this.getData(this.propertyName,R.sender.triggerSourcePropertyType),null!=D&&""!==D&&A&&(A[this.propertyName]=D)}return null}))}init(x,A){if(x){const A=x.winControl;A&&A.optionsList&&A.optionsList[this.propertyName]?this._targetPropertyType=A.optionsList[this.propertyName].type:this._targetPropertyType="object"}}disposeAction(){}getInitialValue(x,A){let V=null;if(x){const A=x.winControl;V=A&&A.optionsList&&A.optionsList[this.propertyName]?A[this.propertyName]:x[this.propertyName]}return V}}SetPropertyAction.actionName="SetPropertyAction",SetPropertyAction.propertyList={targetSelector:{type:String},propertyName:{type:String},propertyValue:{type:String},propertyValueIfTrue:{type:String},propertyValueIfFalse:{type:String}},A.SetPropertyAction=SetPropertyAction,x.Triggers.Class.processActionMetadata(SetPropertyAction,SetPropertyAction.propertyList,x.Actions.ActionBase)}(x.Actions||(x.Actions={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class TogglePropertyAction extends A.ActionBase{constructor(){super(),this.propertyName=null,this.addPropertyList(TogglePropertyAction,TogglePropertyAction.propertyList)}execute(x,A,V){const R=this.propertyName||V.sender.triggerSourcePropertyType;return A&&A.winControl?A.winControl[R]?A.winControl[R]=!1:A.winControl[R]=!0:A[R]?A[R]=!1:A[R]=!0,null}init(x,A){}disposeAction(){}getInitialValue(x,A){const V=this.propertyName||A.sender.triggerSourcePropertyType;return x&&x.winControl?x.winControl[V]:x[V]}}TogglePropertyAction.actionName="TogglePropertyAction",TogglePropertyAction.propertyList={targetSelector:{type:String},propertyName:{type:String}},A.TogglePropertyAction=TogglePropertyAction,x.Triggers.Class.processActionMetadata(TogglePropertyAction,TogglePropertyAction.propertyList,x.Actions.ActionBase)}(x.Actions||(x.Actions={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class CallMethodAction extends A.ActionBase{constructor(){super(),this.method=null,this.arg1=null,this.arg2=null,this.addPropertyList(CallMethodAction,CallMethodAction.propertyList)}execute(x,A,V){return null!==this.method&&(A&&A.winControl?A.winControl[this.method||V.sender.triggerSourcePropertyType](this.arg1||V.sender.triggerSourcePropertyValue,this.arg2):A[this.method||V.sender.triggerSourcePropertyType](this.arg1||V.sender.triggerSourcePropertyValue,this.arg2)),null}init(x,A){}disposeAction(){}getInitialValue(x,A){return null}}CallMethodAction.actionName="CallMethodAction",CallMethodAction.propertyList={targetSelector:{type:String},method:{type:String},arg1:{type:String},arg2:{type:String}},A.CallMethodAction=CallMethodAction,x.Triggers.Class.processActionMetadata(CallMethodAction,CallMethodAction.propertyList,x.Actions.ActionBase)}(x.Actions||(x.Actions={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class RestartAction extends A.ActionBase{constructor(){super(),this.addPropertyList(RestartAction,RestartAction.propertyList)}execute(A,V,R){if(!x.Utilities.isInDesignMode())return this.conditionResult&&location.reload(),null}init(x,A){}disposeAction(){}getInitialValue(x,A){return null}}RestartAction.actionName="RestartAction",RestartAction.propertyList={},A.RestartAction=RestartAction,x.Triggers.Class.processActionMetadata(RestartAction,RestartAction.propertyList,x.Actions.ActionBase)}(x.Actions||(x.Actions={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class ApplicationShowAction extends A.ActionBase{constructor(){super(),this.addPropertyList(ApplicationShowAction,ApplicationShowAction.propertyList)}execute(A,V,R){let D="content";return this.conditionResult&&("login"!==x.Application.show.show&&"splash"==x.Application.show.show?D="content"===x.Application.show.show?"error":"splashcontent":"login"!==x.Application.show.show&&(D="content"===x.Application.show.show||"splash"===x.Application.show.show||"splashcontent"===x.Application.show.show?"error":"splashcontent"),x.Application.show.show=D),null}init(x,A){}disposeAction(){}getInitialValue(A,V){return x.Application.show.show}}ApplicationShowAction.actionName="ApplicationShowAction",ApplicationShowAction.propertyList={showValue:{type:String}},A.ApplicationShowAction=ApplicationShowAction,x.Triggers.Class.processActionMetadata(ApplicationShowAction,ApplicationShowAction.propertyList,x.Actions.ActionBase)}(x.Actions||(x.Actions={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class ConverterAction extends A.ActionBase{constructor(){super(),this.converter=null,this.addPropertyList(ConverterAction,ConverterAction.propertyList)}execute(x,A,V){return Converters&&"function"==typeof Converters[this.converter]&&(V.sender.triggerSourcePropertyValue=Converters[this.converter](V.sender.triggerSourcePropertyValue)),null}init(x,A){}disposeAction(){}getInitialValue(x,A){return null}}ConverterAction.actionName="ConverterAction",ConverterAction.propertyList={converter:{type:String}},A.ConverterAction=ConverterAction,x.Triggers.Class.processActionMetadata(ConverterAction,ConverterAction.propertyList,x.Actions.ActionBase)}(x.Actions||(x.Actions={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class IfConditionAction extends A.ActionBase{constructor(){super(),this.propertyName=null,this.propertyValue=null,this.propertyValueIfTrue=null,this.propertyValueIfFalse=null,this._targetPropertyType=null,this.addPropertyList(IfConditionAction,IfConditionAction.propertyList)}execute(A,V,R){return __awaiter(this,void 0,void 0,(function*(){if(V){const A=V.winControl?V.winControl:null;let D=null,N=null;null===this.propertyValueIfTrue&&null===this.propertyValueIfFalse?(D=yield this.getData(this.propertyValue,R.sender.triggerSourcePropertyValue),this.setActionResult(null,D)):this.conditionResult?(D=yield this.getData(this.propertyValueIfTrue),this.setActionResult(!0,D)):(D=yield this.getData(this.propertyValueIfFalse),this.setActionResult(!1,D)),D=x.Utilities.convertToType(D,this._targetPropertyType),N=yield this.getData(this.propertyName,R.sender.triggerSourcePropertyType),null!=D&&""!==D&&A&&(A[this.propertyName]=D)}return null}))}init(x,A){if(x){const A=x.winControl;A&&A.optionsList&&A.optionsList[this.propertyName]?this._targetPropertyType=A.optionsList[this.propertyName].type:this._targetPropertyType="object"}}disposeAction(){}getInitialValue(x,A){let V=null;if(x){const A=x.winControl;V=A&&A.optionsList&&A.optionsList[this.propertyName]?A[this.propertyName]:x[this.propertyName]}return V}}IfConditionAction.actionName="IfConditionAction",IfConditionAction.propertyList={targetSelector:{type:String},propertyName:{type:String},propertyValue:{type:String},propertyValueIfTrue:{type:String},propertyValueIfFalse:{type:String}},A.IfConditionAction=IfConditionAction,x.Triggers.Class.processActionMetadata(IfConditionAction,IfConditionAction.propertyList,x.Actions.ActionBase)}(x.Actions||(x.Actions={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class AcknowledgeAlarmAction extends A.ActionBase{constructor(){super(),this.addPropertyList(AcknowledgeAlarmAction,AcknowledgeAlarmAction.propertyList)}execute(A,V,R){if(!x.Utilities.isInDesignMode()){if(this.conditionResult){const A=document.getElementsByClassName("vw-currentalarms__listview")[0].winControl;A&&setTimeout((function(){let V=void 0;try{V=A.currentItem.index}catch(A){x.Application.WarnLog.log("AcknowledgeAlarmAction not excuted. The alarm list could not determine the current item.")}V>=0&&A.itemDataSource.itemFromIndex(V).then((function(A){if("Systemalarm"===A.data.Group.GroupTree){let V=parseInt(A.data.Name);x.isNumber(V)?x.AppServices.CurrentAlarmService.acknowledgeAlarm(V):x.AppServices.CurrentAlarmService.acknowledgeAlarm(A.data.Name)}else x.AppServices.CurrentAlarmService.acknowledgeAlarm(A.data.Group.GroupTree+"."+A.data.Name)}))}),10)}return null}}init(x,A){}disposeAction(){}getInitialValue(x,A){return null}}AcknowledgeAlarmAction.actionName="AcknowledgeAlarmAction",AcknowledgeAlarmAction.propertyList={targetSelector:{type:String}},A.AcknowledgeAlarmAction=AcknowledgeAlarmAction,x.Triggers.Class.processActionMetadata(AcknowledgeAlarmAction,AcknowledgeAlarmAction.propertyList,x.Actions.ActionBase)}(x.Actions||(x.Actions={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class AcknowledgeAlarmsAction extends A.ActionBase{constructor(){super(),this.desiredGroups=null,this.desiredClasses=null,this.addPropertyList(AcknowledgeAlarmsAction,AcknowledgeAlarmsAction.propertyList)}execute(A,V,R){if(!x.Utilities.isInDesignMode()){if(this.conditionResult){if(null!==this.desiredGroups&&this.desiredGroups.length>0){const A=x.Utilities.csvToArray(this.desiredGroups);for(let V=0;V<A.length;V++)x.AppServices.CurrentAlarmService.acknowledgeAlarmGroup(A[V])}if(null!==this.desiredClasses&&this.desiredClasses.length>0){const A=x.Utilities.csvToArray(this.desiredClasses);for(let V=0;V<A.length;V++)x.AppServices.CurrentAlarmService.acknowledgeAlarmClass(A[V])}if(null===this.desiredClasses&&null===this.desiredGroups)return x.AppServices.CurrentAlarmService.acknowledgeAllAlarms(),null}return null}}init(x,A){}getInitialValue(x,A){}disposeAction(){}}AcknowledgeAlarmsAction.actionName="AcknowledgeAlarmAction",AcknowledgeAlarmsAction.propertyList={desiredGroups:{type:String},desiredClasses:{type:String}},A.AcknowledgeAlarmsAction=AcknowledgeAlarmsAction,x.Triggers.Class.processActionMetadata(AcknowledgeAlarmsAction,AcknowledgeAlarmsAction.propertyList,x.Actions.ActionBase)}(x.Actions||(x.Actions={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class SetVariableAction extends A.ActionBase{constructor(){super(),this.variableName=null,this.value=null,this.valueIfTrue=null,this.valueIfFalse=null,this._vwVariable=null,this._vwType=null,this._isAttach=!1,this._postSetFlag=!1,this._postSetValue=null,this._postSetPropertyValue=null}execute(A,V,R){return __awaiter(this,void 0,void 0,(function*(){let V=null;return null===this.valueIfTrue&&null===this.valueIfFalse?(V=yield this.getData(this.value,R.sender.triggerSourcePropertyValue),this.setActionResult(null,V)):this.conditionResult?(V=yield this.getData(this.valueIfTrue,R.sender.triggerSourcePropertyValue),this.setActionResult(!0,V)):(V=yield this.getData(this.valueIfFalse,R.sender.triggerSourcePropertyValue),this.setActionResult(!1,V)),null!=this._vwType||this._isAttach?(V=x.Utilities.convertToType(V,this._vwType.jsType),null!==V&&(yield this.setValue(V)),null):(this._postSetPropertyValue=V,this._postSetValue=A,this._postSetFlag=!0,null)}))}setValue(A){return __awaiter(this,void 0,void 0,(function*(){if(this._vwVariable){yield x.System.DataAccess.VariableService.getService().SetValueAsync(this._vwVariable.Name,A)}}))}_attachVariable(){return __awaiter(this,void 0,void 0,(function*(){if(this._vwVariable&&(yield this._vwVariable.AttachAsync(),this._isAttach=!0,this._vwType=x.Triggers.Util.getVWType(this._vwVariable.TypeCode)),this._postSetFlag&&!x.isNullOrUndefined(this._vwType)){this._postSetFlag=!1,null!==x.Utilities.convertToType(this._postSetValue,this._vwType.jsType)&&(yield this.setValue(this._postSetPropertyValue))}}))}disposeAction(){this._vwVariable&&setTimeout(x=>{this._vwVariable.Detach()},10)}init(A,V){const R=this.variableName||V.sender.triggerSourcePropertyType;if(x.isNullOrUndefined(R))return null;this._vwVariable||(this._vwVariable=x.AppServices.VariableService.getVariable(R),this._attachVariable())}getInitialValue(x,A){return null}}SetVariableAction.actionName="SetVariableAction",SetVariableAction.propertyList={variableName:{type:String},value:{type:String},valueIfTrue:{type:String},valueIfFalse:{type:String}},A.SetVariableAction=SetVariableAction,x.Triggers.Class.processActionMetadata(SetVariableAction,SetVariableAction.propertyList,x.Actions.ActionBase)}(x.Actions||(x.Actions={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class DecrementVariableAction extends A.ActionBase{constructor(){super(),this.variableName=null,this.value=1,this.valueIfTrue=null,this.valueIfFalse=null,this.useRawValue=!1,this.isLimitCheckEnabled=!1,this.rawLimitMin=0,this.useVariableLimits=!1,this.curentUnit=null,this._vwVariable=null,this._vwType=null,this._isAttach=!1,this._postSetFlag=!1,this._postSetValue=null,this._postSetPropertyValue=null,this._boundUnitClassChangedHandler=this._unitClassChangedHandler.bind(this),this.addPropertyList(DecrementVariableAction,DecrementVariableAction.propertyList)}execute(A,V,R){return __awaiter(this,void 0,void 0,(function*(){let V;return null===this.valueIfTrue&&null===this.valueIfFalse?(V=yield this.getData(this.value.toString(),R.sender.triggerSourcePropertyValue),this.setActionResult(null,V)):this.conditionResult?(V=yield this.getData(this.valueIfTrue.toString()),this.setActionResult(!0,V)):(V=yield this.getData(this.valueIfFalse.toString()),this.setActionResult(!1,V)),null!=this._vwType||this._isAttach?(V=x.Utilities.convertToType(V,this._vwType.jsType),null!=V&&""!==V&&(yield this.setValue(V)),null):(this._postSetPropertyValue=V,this._postSetValue=A,this._postSetFlag=!0,null)}))}setValue(A){return __awaiter(this,void 0,void 0,(function*(){if(this._vwVariable){const V=this.useVariableLimits&&this._vwVariable.RawMinValue?this.useRawValue?this._vwVariable.RawMinValue:this._rawValue2value(this._vwVariable.RawMinValue):this.useRawValue?this.rawLimitMin:this._rawValue2value(this.rawLimitMin),R=this.useRawValue?this._vwVariable.Value-A:this._vwVariable.Value-this._rawValue2value(A);if(this.isLimitCheckEnabled&&R<V)return;yield x.System.DataAccess.VariableService.getService().SetValueAsync(this._vwVariable.Name,R)}}))}_attachVariable(){return __awaiter(this,void 0,void 0,(function*(){if(this._vwVariable&&(yield this._vwVariable.AttachAsync(),this._isAttach=!0,this._vwType=x.Triggers.Util.getVWType(this._vwVariable.TypeCode),this._vwVariable.UnitClass&&(this.curentUnit=this._vwVariable.UnitClass.CurrentUnit,this._vwVariable.UnitClass.Change.add(this._boundUnitClassChangedHandler,this)),this._postSetFlag&&!x.isNullOrUndefined(this._vwType))){this._postSetFlag=!1,null!==x.Utilities.convertToType(this._postSetValue,this._vwType.jsType)&&this.setValue(this._postSetPropertyValue)}}))}disposeAction(){this._vwVariable&&setTimeout(x=>{this._vwVariable.Detach()},10)}init(A,V){const R=this.variableName||V.sender.triggerSourcePropertyType;if(x.isNullOrUndefined(R))return null;this._vwVariable||(this._vwVariable=x.AppServices.VariableService.getVariable(R),this._attachVariable())}getInitialValue(x,A){return null}_unitClassChangedHandler(x){this.curentUnit=x}_rawValue2value(x){if(!this.curentUnit)return x;return x*this.curentUnit.Slope+this.curentUnit.Offset}}DecrementVariableAction.actionName="DecrementVariableAction",DecrementVariableAction.propertyList={variableName:{type:String},value:{type:Number},valueIfTrue:{type:Number},valueIfFalse:{type:Number},useRawValue:{type:Boolean},isLimitCheckEnabled:{type:Boolean},rawLimitMin:{type:Number},useVariableLimits:{type:Boolean}},A.DecrementVariableAction=DecrementVariableAction,x.Triggers.Class.processActionMetadata(DecrementVariableAction,DecrementVariableAction.propertyList,x.Actions.ActionBase)}(x.Actions||(x.Actions={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class IncrementVariableAction extends A.ActionBase{constructor(){super(),this.variableName=null,this.value=1,this.valueIfTrue=null,this.valueIfFalse=null,this.useRawValue=!1,this.isLimitCheckEnabled=!1,this.rawLimitMax=100,this.useVariableLimits=!1,this.curentUnit=null,this._vwVariable=null,this._vwType=null,this._isAttach=!1,this._postSetFlag=!1,this._postSetValue=null,this._postSetPropertyValue=null,this._boundUnitClassChangedHandler=this._unitClassChangedHandler.bind(this),this.addPropertyList(IncrementVariableAction,IncrementVariableAction.propertyList)}execute(A,V,R){return __awaiter(this,void 0,void 0,(function*(){let V;return null===this.valueIfTrue&&null===this.valueIfFalse?(V=yield this.getData(this.value.toString(),R.sender.triggerSourcePropertyValue),this.setActionResult(null,V)):this.conditionResult?(V=yield this.getData(this.valueIfTrue.toString()),this.setActionResult(!0,V)):(V=yield this.getData(this.valueIfFalse.toString()),this.setActionResult(!1,V)),null!=this._vwType||this._isAttach?(V=x.Utilities.convertToType(V,this._vwType.jsType),null!=V&&""!==V&&(yield this.setValue(V)),null):(this._postSetPropertyValue=V,this._postSetValue=A,this._postSetFlag=!0,null)}))}setValue(A){return __awaiter(this,void 0,void 0,(function*(){if("string"==typeof A&&(A=parseFloat(A)),this._vwVariable){const V=this.useVariableLimits&&this._vwVariable.RawMaxValue?this.useRawValue?this._vwVariable.RawMaxValue:this._rawValue2value(this._vwVariable.RawMaxValue):this.useRawValue?this.rawLimitMax:this._rawValue2value(this.rawLimitMax),R=this.useRawValue?this._vwVariable.Value+A:this._vwVariable.Value+this._rawValue2value(A);if(this.isLimitCheckEnabled&&R>V)return;yield x.System.DataAccess.VariableService.getService().SetValueAsync(this._vwVariable.Name,R)}}))}_attachVariable(){return __awaiter(this,void 0,void 0,(function*(){if(this._vwVariable&&(yield this._vwVariable.AttachAsync(),this._isAttach=!0,this._vwType=x.Triggers.Util.getVWType(this._vwVariable.TypeCode),this._vwVariable.UnitClass&&(this.curentUnit=this._vwVariable.UnitClass.CurrentUnit,this._vwVariable.UnitClass.Change.add(this._boundUnitClassChangedHandler,this)),this._postSetFlag&&!x.isNullOrUndefined(this._vwType))){this._postSetFlag=!1,null!==x.Utilities.convertToType(this._postSetValue,this._vwType.jsType)&&(yield this.setValue(this._postSetPropertyValue))}}))}disposeAction(){this._vwVariable&&setTimeout(x=>{this._vwVariable.Detach()},10)}init(A,V){const R=this.variableName||V.sender.triggerSourcePropertyType;if(x.isNullOrUndefined(R))return null;this._vwVariable||(this._vwVariable=x.AppServices.VariableService.getVariable(R),this._attachVariable())}getInitialValue(x,A){return null}_unitClassChangedHandler(x){this.curentUnit=x}_rawValue2value(x){if(!this.curentUnit)return x;return x*this.curentUnit.Slope+this.curentUnit.Offset}}IncrementVariableAction.actionName="IncrementVariableAction",IncrementVariableAction.propertyList={variableName:{type:String},value:{type:Number},valueIfTrue:{type:Number},valueIfFalse:{type:Number},useRawValue:{type:Boolean},isLimitCheckEnabled:{type:Boolean},rawLimitMax:{type:Number},useVariableLimits:{type:Boolean}},A.IncrementVariableAction=IncrementVariableAction,x.Triggers.Class.processActionMetadata(IncrementVariableAction,IncrementVariableAction.propertyList,x.Actions.ActionBase)}(x.Actions||(x.Actions={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class SetBitAction extends A.ActionBase{constructor(){super(),this.variableName=null,this.bitNumber=0,this._vwVariable=null,this._vwType=null,this._isAttach=!1,this._postSetFlag=!1,this._postSetValue=null,this._postSetPropertyValue=null,this.addPropertyList(SetBitAction,SetBitAction.propertyList)}execute(A,V,R){return __awaiter(this,void 0,void 0,(function*(){let V=yield this.getData(this.bitNumber.toString(),R.sender.triggerSourcePropertyValue);if(V=x.Utilities.convertToType(V,"number"),this.conditionResult){if(!this._isAttach&&null==this._vwType)return this._postSetPropertyValue=V,this._postSetValue=A,this._postSetFlag=!0,null;const x=yield this.setBit(V);this.setActionResult(x,A)}else this.setActionResult(!1,A);return null}))}setBit(A){return __awaiter(this,void 0,void 0,(function*(){let V=!0;return V="number"===this._vwType.jsType?yield x.System.DataAccess.VariableService.getService().SetBitAsync(this._vwVariable.Name,A,!0):"boolean"===this._vwType.jsType&&(yield x.System.DataAccess.VariableService.getService().SetValueAsync(this._vwVariable.Name,!0)),Promise.resolve(V)}))}_attachVariable(){return __awaiter(this,void 0,void 0,(function*(){this._vwVariable&&(yield this._vwVariable.AttachAsync(),this._isAttach=!0,this._vwType=x.Triggers.Util.getVWType(this._vwVariable.TypeCode)),this._postSetFlag&&this._vwType&&(this._postSetFlag=!1,this.setBit(this._postSetPropertyValue))}))}disposeAction(){this._vwVariable&&setTimeout(x=>{this._vwVariable.Detach()},10)}init(A,V){const R=this.variableName||V.sender.triggerSourcePropertyType;if(x.isNullOrUndefined(R))return null;this._vwVariable||(this._vwVariable=x.AppServices.VariableService.getVariable(R),this._attachVariable())}getInitialValue(x,A){return null}}SetBitAction.actionName="SetBitAction",SetBitAction.propertyList={variableName:{type:String},bitNumber:{type:Number}},A.SetBitAction=SetBitAction,x.Triggers.Class.processActionMetadata(SetBitAction,SetBitAction.propertyList,x.Actions.ActionBase)}(x.Actions||(x.Actions={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class ResetBitAction extends A.ActionBase{constructor(){super(),this.variableName=null,this.bitNumber=0,this._vwVariable=null,this._vwType=null,this._isAttach=!1,this._postSetFlag=!1,this._postSetValue=null,this._postSetPropertyValue=null,this.addPropertyList(ResetBitAction,ResetBitAction.propertyList)}execute(A,V,R){return __awaiter(this,void 0,void 0,(function*(){let V=yield this.getData(this.bitNumber.toString(),R.sender.triggerSourcePropertyValue);if(V=x.Utilities.convertToType(V,"number"),this.conditionResult){if(!this._isAttach&&null==this._vwType)return this._postSetPropertyValue=V,this._postSetValue=A,this._postSetFlag=!0,null;const x=yield this.setBit(V);this.setActionResult(x,A)}else this.setActionResult(!1,A);return null}))}setBit(A){return __awaiter(this,void 0,void 0,(function*(){let V=!0;return V="number"===this._vwType.jsType?yield x.System.DataAccess.VariableService.getService().SetBitAsync(this._vwVariable.Name,A,!1):"boolean"===this._vwType.jsType&&(yield x.System.DataAccess.VariableService.getService().SetValueAsync(this._vwVariable.Name,!1)),Promise.resolve(V)}))}_attachVariable(){return __awaiter(this,void 0,void 0,(function*(){this._vwVariable&&(yield this._vwVariable.AttachAsync(),this._isAttach=!0,this._vwType=x.Triggers.Util.getVWType(this._vwVariable.TypeCode)),this._postSetFlag&&this._vwType&&(this._postSetFlag=!1,this.setBit(this._postSetPropertyValue))}))}disposeAction(){this._vwVariable&&setTimeout(x=>{this._vwVariable.Detach()},10)}init(A,V){const R=this.variableName||V.sender.triggerSourcePropertyType;if(x.isNullOrUndefined(R))return null;this._vwVariable||(this._vwVariable=x.AppServices.VariableService.getVariable(R),this._attachVariable())}getInitialValue(x,A){return null}}ResetBitAction.actionName="ResetBitAction",ResetBitAction.propertyList={variableName:{type:String},bitNumber:{type:Number}},A.ResetBitAction=ResetBitAction,x.Triggers.Class.processActionMetadata(ResetBitAction,ResetBitAction.propertyList,x.Actions.ActionBase)}(x.Actions||(x.Actions={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class ToggleBitAction extends A.ActionBase{constructor(){super(),this.variableName=null,this.bitNumber=0,this._vwVariable=null,this._vwType=null,this._isAttach=!1,this._postSetFlag=!1,this._postSetValue=null,this._postSetPropertyValue=null,this.addPropertyList(ToggleBitAction,ToggleBitAction.propertyList)}execute(A,V,R){return __awaiter(this,void 0,void 0,(function*(){this.variableName||R.sender.triggerSourcePropertyType;let V=yield this.getData(this.bitNumber.toString(),R.sender.triggerSourcePropertyValue);if(V=x.Utilities.convertToType(V,"number"),this.conditionResult){if(this.setActionResult(!0,A),!this._isAttach&&null==this._vwType)return this._postSetPropertyValue=V,this._postSetValue=A,this._postSetFlag=!0,null;yield this.setBit(V)}else this.setActionResult(!1,A);return null}))}setBit(A){return __awaiter(this,void 0,void 0,(function*(){if("number"===this._vwType.jsType){const V=this._vwVariable.Value^Math.pow(2,A);yield x.System.DataAccess.VariableService.getService().SetValueAsync(this._vwVariable.Name,V)}else if("boolean"===this._vwType.jsType){yield x.System.DataAccess.VariableService.getService().SetValueAsync(this._vwVariable.Name,!this._vwVariable.Value)}}))}_attachVariable(){return __awaiter(this,void 0,void 0,(function*(){this._vwVariable&&(yield this._vwVariable.AttachAsync(),this._isAttach=!0,this._vwType=x.Triggers.Util.getVWType(this._vwVariable.TypeCode)),this._postSetFlag&&this._vwType&&(this._postSetFlag=!1,yield this.setBit(this._postSetPropertyValue))}))}disposeAction(){this._vwVariable&&setTimeout(x=>{this._vwVariable.Detach()},10)}init(A,V){const R=this.variableName||V.sender.triggerSourcePropertyType;if(x.isNullOrUndefined(R))return null;this._vwVariable||(this._vwVariable=x.AppServices.VariableService.getVariable(R),this._attachVariable())}getInitialValue(x,A){return null}}ToggleBitAction.actionName="ToggleBitAction",ToggleBitAction.propertyList={variableName:{type:String},bitNumber:{type:Number}},A.ToggleBitAction=ToggleBitAction,x.Triggers.Class.processActionMetadata(ToggleBitAction,ToggleBitAction.propertyList,x.Actions.ActionBase)}(x.Actions||(x.Actions={}))}(VisiWin||(VisiWin={})),function(x){x.Actions||(x.Actions={})}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class DialogBase extends A.ActionBase{constructor(){super(),this.actionName=null,this.addPropertyList(DialogBase,DialogBase.dialogBasePropertyList)}getDialogControl(x){let A=x.parentElement;for(;A;){if(A&&A.winControl&&"WinJS.UI.Popup"===A.winControl.controlType)return A.winControl.contentControlElement.winControl;A=A.parentElement?A.parentElement:null}}init(x,A){throw new Error("Custom action does not implement init method.")}disposeAction(){}execute(x,A,V){throw new Error("Custom action does not implement execute method.")}getInitialValue(x,A){throw new Error("Custom action does not implement getInitialValue method.")}}DialogBase.actionName="DialogBase",DialogBase.dialogBasePropertyList={resultId:{type:String},resultIdIfTrue:{type:String},resultIdIfFalse:{type:String},operand1:{type:String},operator:{type:String},operand2:{type:String}},A.DialogBase=DialogBase,x.Triggers.Class.processActionMetadata(DialogBase,DialogBase.dialogBasePropertyList)}(x.Actions||(x.Actions={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class DialogResultAction extends A.DialogBase{constructor(){super(),this.dialogResult="",this._dialogControl=null,this.addPropertyList(DialogResultAction,DialogResultAction.propertyList)}execute(x,A,V){return __awaiter(this,void 0,void 0,(function*(){return this.conditionResult&&(this.setActionResult(!0,this.dialogResult),this._dialogControl.dispatchEvent("result",this.dialogResult)),this._dialogControl&&this._dialogControl.hide(this.dialogResult),null}))}init(x,A){Array.isArray(x)?this._dialogControl=this.getDialogControl(x[0]):this._dialogControl=this.getDialogControl(x)}disposeAction(){}getInitialValue(x,A){return null}}DialogResultAction.actionName="DialogResultAction",DialogResultAction.propertyList={dialogResult:{type:String}},A.DialogResultAction=DialogResultAction,x.Triggers.Class.processActionMetadata(DialogResultAction,DialogResultAction.propertyList,x.Actions.ActionBase)}(x.Actions||(x.Actions={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class ShowPopupAction extends A.ActionBase{constructor(){super(),this.viewName=null,this.anchor=null,this.placement=null,this.alignment=null,this.mode=null,this.popupBackgroundColor="DialogText",this._boundResultHandler=this.resultHandler.bind(this),this.addPropertyList(ShowPopupAction,ShowPopupAction.propertyList)}execute(A,V,R){if(!x.Utilities.isInDesignMode())return V&&V.winControl&&(this._popupControl=V.winControl,this.viewName&&(this._popupControl.viewName=this.viewName),this.alignment&&(this._popupControl.alignment=this.alignment),this.placement&&(this._popupControl.placement=this.placement),this.mode&&(this._popupControl.mode=this.mode),this.popupBackgroundColor&&(this._popupControl.popupBackgroundColor=this.popupBackgroundColor),this._popupControl.show()),null}showAt(x,A){this._popupControl.showAt(x,A)}resultHandler(x,A){if("RESULTDIALOG_OPTION"!==x.detail&&"RESULTDIALOG_OPENDIALOG"!==x.detail){const x=this._popupControl.element,A=this._popupControl,V=this._boundResultHandler;window.setImmediate((function(){A.removeEventListener("result",V),A.dispose();const R=document.body.childElementCount;if(document.body.removeChild(x),R===document.body.childElementCount){}}))}}init(x,A){}disposeAction(){}getInitialValue(x,A){return null}}ShowPopupAction.actionName="ShowPopupAction",ShowPopupAction.propertyList={viewName:{type:String},anchor:{type:String},placement:{type:String},alignment:{type:String},mode:{type:String},popupBackgroundColor:{type:String}},A.ShowPopupAction=ShowPopupAction,x.Triggers.Class.processActionMetadata(ShowPopupAction,ShowPopupAction.propertyList,x.Actions.ActionBase)}(x.Actions||(x.Actions={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class ShowDialogAction extends A.DialogBase{constructor(){super(),this._appService=x.AppServices.AppService,this._langService=x.AppServices.LanguageService,this.anchor=null,this.placement=null,this.alignment=null,this.mode="Modal",this.dialogName=null,this.dialogNameIfFalse=null,this.autoClose=!0,this.dialogScrimColor=null,this._dialogControl=null,this.addPropertyList(ShowDialogAction,ShowDialogAction.propertyList)}execute(A,V,R){return __awaiter(this,void 0,void 0,(function*(){if(x.Utilities.isInDesignMode())return;let A=!1;try{if(V.winControl&&V.winControl.controlId){document.querySelectorAll(".vw-popover__"+V.winControl.controlId).length>0&&(A=!0)}}catch(x){A=!1}return A&&(this.conditionResult=!1),this.conditionResult?this.dialogName&&this.openDialog(this.dialogName,V):this.dialogNameIfFalse&&this.openDialog(this.dialogNameIfFalse,V),null}))}openDialog(A,V){if(document.body){const R=document.createElement("div"),D={anchor:this.anchor,placement:this.placement,alignment:this.alignment,mode:this.mode,dialogName:A,dialogScrimColor:this.dialogScrimColor};if(document.body.insertBefore(R,document.body.firstElementChild),this._dialogControl=new x.UI.Dialog(R,D),!this._dialogControl)return null;V.winControl&&V.winControl.controlId&&(this._dialogControl.element.className+=" vw-popover__"+V.winControl.controlId),this._dialogControl.dispatchEvent("result","RESULTDIALOG_OPENDIALOG"),this._dialogControl.show();return new Promise((x,A)=>{const V=function(A,V){if("RESULTDIALOG_OPTION"!==A.detail&&"RESULTDIALOG_OPENDIALOG"!==A.detail){if(this.setActionResult(!0,A.detail),this.autoClose){const x=this._dialogControl.element;let A=this._dialogControl;const V=this._boundResultHandler;window.setImmediate((function(){A.removeEventListener("result",V),A.dispose(),x&&x.parentElement&&(document.body.removeChild(x),A=null)}))}x(null)}}.bind(this);this._dialogControl.addEventListener("result",V)})}}init(x,A){}disposeAction(){}getInitialValue(x,A){return null}showAt(x,A){this._dialogControl.showAt(x,A)}}ShowDialogAction.actionName="ShowDialogAction",ShowDialogAction.propertyList={anchor:{type:String},placement:{type:String},alignment:{type:String},mode:{type:String},dialogName:{type:String},dialogNameIfFalse:{type:String},autoClose:{type:Boolean},dialogScrimColor:{type:String}},A.ShowDialogAction=ShowDialogAction,x.Triggers.Class.processActionMetadata(ShowDialogAction,ShowDialogAction.propertyList,x.Actions.ActionBase)}(x.Actions||(x.Actions={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class ShowAlertDialogAction extends A.DialogBase{constructor(){super(),this._appService=x.AppServices.AppService,this.anchor=null,this.placement=null,this.alignment=null,this.mode="Modal",this.dialogName=this._appService.getPathString("dialogs/AlertDialog.html"),this.style=null,this.titleText="Title",this.localizableTitleText=null,this.contentText="Content Text",this.localizableContentText=null,this.action1ButtonText="Action1",this.localizableAction1ButtonText=null,this.action2ButtonText="Action2",this.localizableAction2ButtonText=null,this.showAction1Button=!0,this.showAction2Button=!0,this.dialogScrimColor=null,this._dialogControl=null,this._boundResultHandler=this.resultHandler.bind(this),this.addPropertyList(ShowAlertDialogAction,ShowAlertDialogAction.propertyList)}execute(A,V,R){return __awaiter(this,void 0,void 0,(function*(){if(x.Utilities.isInDesignMode())return;let A=!1;try{if(V.winControl&&V.winControl.controlId){document.querySelectorAll(".vw-popover__"+V.winControl.controlId).length>0&&(A=!0)}}catch(x){A=!1}if(A)return null;if(document.body){const A=document.createElement("div"),R={anchor:this.anchor,placement:this.placement,alignment:this.alignment,mode:this.mode,dialogName:this.dialogName,dialogScrimColor:this.dialogScrimColor};x&&x.Observables&&x.Observables.AlertDialog?(x.Observables.AlertDialog.style=this.style,x.Observables.AlertDialog.titleText=this.titleText,x.Observables.AlertDialog.localizableTitleText=this.localizableTitleText,x.Observables.AlertDialog.contentText=this.contentText,x.Observables.AlertDialog.localizableContentText=this.localizableContentText,x.Observables.AlertDialog.action1ButtonText=this.action1ButtonText,x.Observables.AlertDialog.localizableAction1ButtonText=this.localizableAction1ButtonText,x.Observables.AlertDialog.action2ButtonText=this.action2ButtonText,x.Observables.AlertDialog.localizableAction2ButtonText=this.localizableAction2ButtonText,x.Observables.AlertDialog.showAction1Button=this.showAction1Button,x.Observables.AlertDialog.showAction2Button=this.showAction2Button):x.Application.ErrorLog.log('VisiWin.Observables.AlertDialog: Observables object "AlertDialog" not found.'),document.body.insertBefore(A,document.body.firstElementChild),V.winControl&&V.winControl.controlId&&(A.className+=" vw-popover__"+V.winControl.controlId),this._dialogControl=yield new x.UI.Dialog(A,R),this._dialogControl&&(this._dialogControl.addEventListener("result",this._boundResultHandler),this._dialogControl.dispatchEvent("result","RESULTDIALOG_OPENDIALOG")),this._dialogControl.show()}return null}))}resultHandler(x,A){if("RESULTDIALOG_OPTION"!==x.detail&&"RESULTDIALOG_OPENDIALOG"!==x.detail){const x=this._dialogControl.element;let A=this._dialogControl;const V=this._boundResultHandler;window.setImmediate((function(){A.removeEventListener("result",V),A.dispose(),x&&x.parentElement&&(document.body.removeChild(x),A=null)}))}}init(x,A){}disposeAction(){}getInitialValue(x,A){return null}showAt(x,A){this._dialogControl.showAt(x,A)}}ShowAlertDialogAction.actionName="ShowAlertDialogAction",ShowAlertDialogAction.propertyList={anchor:{type:String},placement:{type:String},alignment:{type:String},mode:{type:String},dialogName:{type:String},style:{type:String},titleText:{type:String},localizableTitleText:{type:String},contentText:{type:String},localizableContentText:{type:String},action1ButtonText:{type:String},localizableAction1ButtonText:{type:String},action2ButtonText:{type:String},localizableAction2ButtonText:{type:String},showAction1Button:{type:Boolean},showAction2Button:{type:Boolean},dialogScrimColor:{type:String}},A.ShowAlertDialogAction=ShowAlertDialogAction,x.Triggers.Class.processActionMetadata(ShowAlertDialogAction,ShowAlertDialogAction.propertyList,x.Actions.ActionBase)}(x.Actions||(x.Actions={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class CloseDialogAction extends A.DialogBase{constructor(){super(),this._dialogControl=null,this.addPropertyList(CloseDialogAction,CloseDialogAction.propertyList)}execute(x,A,V){return __awaiter(this,void 0,void 0,(function*(){return new Promise((x,A)=>{this.setActionResult(!0,null),setTimeout(function(){this._dialogControl&&this._dialogControl.hide(this.__triggerData),x(!0)}.bind(this),0)})}))}init(x,A){Array.isArray(x)?this._dialogControl=this.getDialogControl(x[0]):this._dialogControl=this.getDialogControl(x)}disposeAction(){}getInitialValue(x,A){return null}}CloseDialogAction.actionName="CloseDialogAction",CloseDialogAction.propertyList={},A.CloseDialogAction=CloseDialogAction,x.Triggers.Class.processActionMetadata(CloseDialogAction,CloseDialogAction.propertyList,x.Actions.ActionBase)}(x.Actions||(x.Actions={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class CloseKeyboardDialogAction extends A.DialogBase{constructor(){super(),this._dialogControl=null,this.applyValue=null,this.dialogViewIdentifier="vw-dialogview",this.addPropertyList(CloseKeyboardDialogAction,CloseKeyboardDialogAction.propertyList)}execute(x,A,V){return __awaiter(this,void 0,void 0,(function*(){return new Promise((x,A)=>{let V;V=this.applyValue?this.dataSource.varValue:null,this.setActionResult(!0,V),setTimeout(function(){this._dialogControl&&(this._dialogControl.hide(this.__triggerData),this.dataSource.isTouchkeyboardActive=!1),x(!0)}.bind(this),0)})}))}init(A,V){Array.isArray(A)?this._dialogControl=this.getDialogControl(A[0]):this._dialogControl=this.getDialogControl(A),this.dataSource=x.AppServices.DataService.getBinding(this.getDataContext()),x.isNullOrUndefined(this.dataSource)&&(this.dataSource=x.AppServices.VariableService.touchkeyboardInfo)}disposeAction(){}getInitialValue(x,A){return null}getDataContext(){return document.getElementsByClassName(this.dialogViewIdentifier)[0].winControl.dataContext}}CloseKeyboardDialogAction.actionName="CloseKeyboardDialogAction",CloseKeyboardDialogAction.propertyList={applyValue:{type:Boolean}},A.CloseKeyboardDialogAction=CloseKeyboardDialogAction,x.Triggers.Class.processActionMetadata(CloseKeyboardDialogAction,CloseKeyboardDialogAction.propertyList,x.Actions.ActionBase)}(x.Actions||(x.Actions={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class LoginAction extends A.DialogBase{constructor(){super(),this.user=null,this.password=null,this._userElement=null,this._passwordElement=null,this._messageElement=null,this._userMessageElement=null,this._passwordMessageElement=null,this._dialogControl=null,this._triggerData=null,this.addPropertyList(LoginAction,LoginAction.propertyList)}execute(A,V,R){return __awaiter(this,void 0,void 0,(function*(){if(this.conditionResult){let A=null,V=null;return A=this._userElement&&this._userElement.winControl&&this._userElement.winControl.value?this._userElement.winControl.value:this.user||R.sender.triggerSourcePropertyValue,V=this._passwordElement&&this._passwordElement.winControl&&this._passwordElement.winControl.value?this._passwordElement.winControl.value:this.password||R.sender.triggerSourcePropertyType,this._triggerData=R,A?V?x.AppServices.UserManagementService.logOnAsync(A,V).then(A=>{switch(A){case x.System.UserManagement.LogOnSuccess.Succeeded:this._triggerData.resultAction.reason="LogOnSuccess_Succeeded",this._triggerData.resultAction.succeed=!0,this._setUserMessage(""),this._setPasswordMessage(""),this._setMessage("Login succeeded"),this._dialogControl?this._dialogControl.hide("RESULTDIALOG_SUCCSEED"):Promise.resolve(x.Application.AppService.getService().LoginPromise);break;case x.System.UserManagement.LogOnSuccess.MethodCallFailed:this._triggerData.resultAction.reason="LogOnSuccess_MethodCallFailed",this._triggerData.resultAction.succeed=!1,this._setUserMessage("Login failed"+x.System.UserManagement.LogOnSuccess[A]+" Name and password not set");break;case x.System.UserManagement.LogOnSuccess.PasswordExpired:this._triggerData.resultAction.reason="LogOnSuccess_PasswordExpired",this._triggerData.resultAction.succeed=!1,this._setPasswordMessage("Password expired.");break;case x.System.UserManagement.LogOnSuccess.RenewPassword:this._triggerData.resultAction.reason="LogOnSuccess_RenewPassword",this._triggerData.resultAction.succeed=!1,this._setPasswordMessage("Password must be renewed.");break;case x.System.UserManagement.LogOnSuccess.TooManyFailedLogOns:this._triggerData.resultAction.reason="LogOnSuccess_TooManyFailedLogOns",this._triggerData.resultAction.succeed=!1,this._setUserMessage("Too many login attempts.");break;case x.System.UserManagement.LogOnSuccess.UserDeactivated:this._triggerData.resultAction.reason="LogOnSuccess_UserDeactivated",this._triggerData.resultAction.succeed=!1,this._setUserMessage("User deactivated.");break;case x.System.UserManagement.LogOnSuccess.UnknownUser:this._triggerData.resultAction.reason="LogOnSuccess_UnknownUser",this._triggerData.resultAction.succeed=!1,this._setUserMessage("Unknown user.");break;case x.System.UserManagement.LogOnSuccess.InvalidPassword:this._triggerData.resultAction.reason="LogOnSuccess_InvalidPassword",this._triggerData.resultAction.succeed=!1,this._setPasswordMessage("Wrong password.");break;default:this._triggerData.resultAction.reason="LogOnSuccess_Fail",this._triggerData.resultAction.succeed=!1,this._setUserMessage("Login faild"+x.System.UserManagement.LogOnSuccess[A])}},A=>{switch(A){case x.System.UserManagement.LogOnSuccess.MethodCallFailed:this._triggerData.resultAction.reason="LogOnSuccess_MethodCallFailed",this._triggerData.resultAction.succeed=!1,this._setUserMessage("Login failed"+x.System.UserManagement.LogOnSuccess[A]+" Name and password not set");break;case x.System.UserManagement.LogOnSuccess.PasswordExpired:this._triggerData.resultAction.reason="LogOnSuccess_PasswordExpired",this._triggerData.resultAction.succeed=!1,this._setPasswordMessage("Password expired.");break;case x.System.UserManagement.LogOnSuccess.RenewPassword:this._triggerData.resultAction.reason="LogOnSuccess_RenewPassword",this._triggerData.resultAction.succeed=!1,this._setPasswordMessage("Password must be renewed.");break;case x.System.UserManagement.LogOnSuccess.TooManyFailedLogOns:this._triggerData.resultAction.reason="LogOnSuccess_TooManyFailedLogOns",this._triggerData.resultAction.succeed=!1,this._setUserMessage("Too many login attempts.");break;case x.System.UserManagement.LogOnSuccess.UserDeactivated:this._triggerData.resultAction.reason="LogOnSuccess_UserDeactivated",this._triggerData.resultAction.succeed=!1,this._setUserMessage("User deactivated.");break;case x.System.UserManagement.LogOnSuccess.UnknownUser:this._triggerData.resultAction.reason="LogOnSuccess_UnknownUser",this._triggerData.resultAction.succeed=!1,this._setUserMessage("Unknown user.");break;case x.System.UserManagement.LogOnSuccess.InvalidPassword:this._triggerData.resultAction.reason="LogOnSuccess_InvalidPassword",this._triggerData.resultAction.succeed=!1,this._setPasswordMessage("Wrong password.");break;default:this._triggerData.resultAction.reason="LogOnSuccess_Fail",this._triggerData.resultAction.succeed=!1,this._setUserMessage("Login faild"+x.System.UserManagement.LogOnSuccess[A])}}):(this._setPasswordMessage("Please enter a password to log in."),this._triggerData.resultAction.reason="LogOnSuccess_NoPassword",this._triggerData.resultAction.succeed=!1,new Promise((x,A)=>{x(null)})):(this._setUserMessage("Please enter your username to log in."),this._triggerData.resultAction.reason="LogOnSuccess_NoUser",this._triggerData.resultAction.succeed=!1,new Promise((x,A)=>{x(null)}))}return Promise.resolve(!1)}))}init(x,A){if(this.userElementId){const x=document.getElementById(this.userElementId);x&&(this._userElement=x)}if(this.passwordElementId){const x=document.getElementById(this.passwordElementId);x&&(this._passwordElement=x)}if(this.messageElementId){const x=document.getElementById(this.messageElementId);x&&(this._messageElement=x)}if(this.userMessageElementId){const x=document.getElementById(this.userMessageElementId);x&&(this._userMessageElement=x)}if(this.passwordMessageElementId){const x=document.getElementById(this.passwordMessageElementId);x&&(this._passwordMessageElement=x)}Array.isArray(x)?this._dialogControl=this.getDialogControl(x[0].parentElement):this._dialogControl=this.getDialogControl(x.parentElement)}disposeAction(){}getInitialValue(x,A){return null}_setUserMessage(x){const A=this._userMessageElement&&this._userMessageElement.winControl?this._userMessageElement.winControl:null;null!==A&&(A.text=x),this._setMessage(x)}_setPasswordMessage(x){const A=this._passwordMessageElement&&this._passwordMessageElement.winControl?this._passwordMessageElement.winControl:null;null!==A&&(A.text=x),this._setMessage(x)}_setMessage(x){const A=this._messageElement&&this._messageElement.winControl?this._messageElement.winControl:null;null!==A&&(A.text=x)}}LoginAction.actionName="LoginAction",LoginAction.propertyList={user:{type:String},password:{type:String},userElementId:{type:String},passwordElementId:{type:String},messageElementId:{type:String},userMessageElementId:{type:String},passwordMessageElementId:{type:String}},A.LoginAction=LoginAction,x.Triggers.Class.processActionMetadata(LoginAction,LoginAction.propertyList,x.Actions.ActionBase)}(x.Actions||(x.Actions={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class LogonAction extends A.DialogBase{constructor(){super(),this.initialLogon=!1,this.resultName="LogonAction",this.element=null,this._userElement=null,this._passwordElement=null,this._userMessageElement=null,this._passwordMessageElement=null,this._dialogControl=null,this._newAlertDialog=null,this._newChangePwDialog=null,this._showDialog=!1,this._boundAlertResultHandler=this.alertResultHandler.bind(this),this._appService=x.AppServices.AppService,this.addPropertyList(LogonAction,LogonAction.propertyList)}changePassword(){if(document.body){const A=document.createElement("div"),V={mode:"Modal",dialogName:"dialogs/ChangePasswordDialog.html"};x.AppServices.UserManagementService.changePassword.name=x.AppServices.UserManagementService.logon.name,x.AppServices.UserManagementService.changePassword.fullName=x.AppServices.UserManagementService.logon.name,x.Observables.changePassword.name=x.AppServices.UserManagementService.logon.name,x.Observables.changePassword.fullName=x.AppServices.UserManagementService.logon.name,document.body.insertBefore(A,document.body.firstElementChild),this._newChangePwDialog=new x.UI.Dialog(A,V),this._newChangePwDialog&&(this._newChangePwDialog.show(),this._newChangePwDialog.readySubTree(this._newChangePwDialog._popupControl.element,!1));return new Promise((x,A)=>{const changeResultHandler=(A,V)=>{if("RESULTDIALOG_OPTION"!==A.detail&&"RESULTDIALOG_OPENDIALOG"!==A.detail){this.setActionResult(!0,A.detail);const V=this._newChangePwDialog.element;let R=this._newChangePwDialog;window.setImmediate(()=>{R.removeEventListener("result",changeResultHandler),R.dispose(),V.parentElement&&(document.body.removeChild(V),R=null)}),x(null)}};this._newChangePwDialog.addEventListener("result",changeResultHandler)})}return null}renewPassword(){return __awaiter(this,void 0,void 0,(function*(){if(document.body){const A=document.createElement("div"),V={mode:"Modal",dialogName:this._appService.getPathString("dialogs/AlertDialog.html"),style:this.element.winControl.style};x&&x.Observables&&x.Observables.AlertDialog?(x.Observables.AlertDialog.style=this.element.winControl.style,x.Observables.AlertDialog.localizableTitleText="@[ClientSystem].UserManagement.Results.LogOnSuccess.PasswordExpired",x.Observables.AlertDialog.localizableContentText="@[ClientSystem].UserManagement.Results.LogOnSuccess.RenewPassword",x.Observables.AlertDialog.action1ButtonText="OK",x.Observables.AlertDialog.showAction1Button=!0,x.Observables.AlertDialog.showAction2Button=!1):x.Application.ErrorLog.log('VisiWin.Observables.AlertDialog: Observables object "AlertDialog" not found.'),document.body.insertBefore(A,document.body.firstElementChild),this._newAlertDialog=yield new x.UI.Dialog(A,V),this._newAlertDialog&&(this._newAlertDialog.addEventListener("result",this._boundAlertResultHandler),this._newAlertDialog.show())}return null}))}alertResultHandler(x,A){if("RESULTDIALOG_OPTION"!==x.detail&&"RESULTDIALOG_OPENDIALOG"!==x.detail&&!this._showDialog){const x=this._newAlertDialog.element;let A=this._newAlertDialog;this._showDialog=!0,window.setImmediate(()=>{A.removeEventListener("result",this._boundAlertResultHandler),A.dispose(),x.parentElement&&(document.body.removeChild(x),A=null),this.changePassword()})}}execute(A,V,R){return __awaiter(this,void 0,void 0,(function*(){if(this._showDialog=!1,this.element=V,this.conditionResult){let A=this._userElement&&this._userElement.winControl&&this._userElement.winControl.value?this._userElement.winControl.value:null,V=this._passwordElement&&this._passwordElement.winControl&&this._passwordElement.winControl.value?this._passwordElement.winControl.value:null;const R=this._userElement&&this._userElement.winControl?this._userElement.winControl:null,D=this._passwordElement&&this._passwordElement.winControl?this._passwordElement.winControl:null,N=this._userMessageElement&&this._userMessageElement.winControl?this._userMessageElement.winControl:null,U=this._passwordMessageElement&&this._passwordMessageElement.winControl?this._passwordMessageElement.winControl:null;if(this.password&&(x.AppServices.UserManagementService.logon.password&&(this.password=x.AppServices.UserManagementService.logon.password),V=this.password),this.user&&(x.AppServices.UserManagementService.logon.name&&(this.user=x.AppServices.UserManagementService.logon.name),A=this.user),this.initialLogon){const B=yield x.AppServices.UserManagementService.logonUserAsync(A,V,null,this.initialLogon);return B.succeed?this._dialogControl?this._dialogControl.hide("RESULTDIALOG_SUCCSEED"):Promise.resolve(x.Application.AppService.getService().LoginPromise):B.result===x.System.UserManagement.LogOnSuccess.RenewPassword?setTimeout(()=>{x.Observables.changePassword.name=x.Observables.logon.name,x.Observables.logon.fullName?x.Observables.changePassword.fullName=x.Observables.logon.fullName:x.Observables.changePassword.fullName=" ",x.Observables.logon.password="",x.Observables.logon.isPasswordError=!1,this.renewPassword()},10):(A&&(x.AppServices.UserManagementService.logon.name=A),V&&(x.AppServices.UserManagementService.logon.password=V),null!==R&&(B.isUserNameError?(R.errorText=B.errorText,R.errorMode=!0):R.errorMode=!1),null!==D&&(B.isPasswordError?(D.errorText=B.errorText,D.errorMode=!0):D.errorMode=!1),null!==N&&(N.text=B.isUserNameError?B.errorText:""),null!==U&&(U.text=B.isPasswordError?B.errorText:"")),B}{const B=yield x.AppServices.UserManagementService.verifyUserAsync(A,V);if(B.succeed){(yield x.AppServices.UserManagementService.logonUserAsync(A,V,null,this.initialLogon)).succeed&&this._dialogControl&&this._dialogControl.hide("RESULTDIALOG_SUCCSEED")}else B.result===x.System.UserManagement.LogOnSuccess.RenewPassword?setTimeout(()=>{x.Observables.changePassword.name=x.Observables.logon.name,x.Observables.logon.fullName?x.Observables.changePassword.fullName=x.Observables.logon.fullName:x.Observables.changePassword.fullName=" ",x.Observables.logon.password="",x.Observables.logon.isPasswordError=!1,this.renewPassword()},10):(null!==R&&(B.isUserNameError?(R.errorText=B.errorText,R.errorMode=!0):R.errorMode=!1),null!==D&&(B.isPasswordError?(D.errorText=B.errorText,D.errorMode=!0):D.errorMode=!1),null!==N&&(N.text=B.isUserNameError?B.errorText:""),null!==U&&(U.text=B.isPasswordError?B.errorText:""));return Promise.resolve(B)}}}))}init(x,A){if(this.userSelector){const x=document.querySelectorAll(this.userSelector);x&&x[0]&&(this._userElement=x[0])}if(this.passwordSelector){const x=document.querySelectorAll(this.passwordSelector);x&&x[0]&&(this._passwordElement=x[0])}if(this.userMessageSelector){const x=document.querySelectorAll(this.userMessageSelector);x&&x[0]&&(this._userMessageElement=x[0])}if(this.passwordMessageSelector){const x=document.querySelectorAll(this.passwordMessageSelector);x&&x[0]&&(this._passwordMessageElement=x[0])}Array.isArray(x)?this._dialogControl=this.getDialogControl(x[0].parentElement):this._dialogControl=this.getDialogControl(x.parentElement)}disposeAction(){}getInitialValue(x,A){return null}}LogonAction.actionName="LogonAction",LogonAction.propertyList={user:{type:String},password:{type:String},userSelector:{type:String},passwordSelector:{type:String},userMessageSelector:{type:String},passwordMessageSelector:{type:String},initialLogon:{type:Boolean}},A.LogonAction=LogonAction,x.Triggers.Class.processActionMetadata(LogonAction,LogonAction.propertyList,x.Actions.ActionBase)}(x.Actions||(x.Actions={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class VerifyLoginAction extends A.DialogBase{constructor(){super(),this.resultName="LoginActionResult",this.autoDialogHide=!1,this._msgElement=null,this._dialogControl=null,this._msgControl=null,this._userMsgControl=null,this._passwordMsgControl=null,this._loginTriggerData=null,this.addPropertyList(VerifyLoginAction,VerifyLoginAction.propertyList)}execute(A,V,R){return __awaiter(this,void 0,void 0,(function*(){let A=null,D=null;if(this._dialogControl||(this._dialogControl=this.getDialogControl(V)),this._loginTriggerData=R,this.conditionResult){if(this.userSelector){const x=document.querySelectorAll(this.userSelector);if(x&&x[0]){const V=x[0];V&&V.winControl&&V.winControl.value&&(A=V.winControl.value)}}else A=this.user||R.sender.triggerSourcePropertyValue;if(this.passwordSelector){const x=document.querySelectorAll(this.passwordSelector);if(x&&x[0]){const A=x[0];A&&A.winControl&&A.winControl.value&&(D=A.winControl.value)}}else D=this.password||R.sender.triggerSourcePropertyType;if(this.messageSelector){const x=document.querySelectorAll(this.messageSelector);if(x&&x[0]){const A=x[0];A&&A.winControl&&(this._msgControl=A.winControl)}}if(this.userMessageSelector){const x=document.querySelectorAll(this.messageSelector);if(x&&x[0]){const A=x[0];A&&A.winControl&&(this._userMsgControl=A.winControl)}}if(this.passwordMessageSelector){const x=document.querySelectorAll(this.passwordMessageSelector);if(x&&x[0]){const A=x[0];A&&A.winControl&&(this._passwordMsgControl=A.winControl)}}const V=yield x.AppServices.UserManagementService.verifyUser(A,D);if(V.succeed){(yield x.AppServices.UserManagementService.loginUser(A,D)).succeed&&this._dialogHide("RESULTDIALOG_SUCCSEED")}return V}}))}showMessageUser(x){this._msgControl&&(this._msgControl.text=x),this._userMsgControl&&(this._userMsgControl.errorText=x)}disposeAction(){}showMessagePassword(x){this._msgControl&&(this._msgControl.text=x),this._passwordMsgControl&&(this._passwordMsgControl.errorText=x)}_dialogHide(x){this._dialogControl.hide(x)}init(x,A){}getInitialValue(A,V){let R=null;const D=x.AppServices.UserManagementService._userManagementService;return D&&D.CurrentUser&&(R=D.CurrentUser.Name),R}}VerifyLoginAction.actionName="VerifyLoginAction",VerifyLoginAction.propertyList={user:{type:String},userSelector:{type:String},password:{type:String},passwordSelector:{type:String},messageSelector:{type:String},messageText:{type:String},resultName:{type:String},userMessageSelector:{type:String},passwordMessageSelector:{type:String},autoDialogHide:{type:Boolean}},A.VerifyLoginAction=VerifyLoginAction,x.Triggers.Class.processActionMetadata(VerifyLoginAction,VerifyLoginAction.propertyList,x.Actions.ActionBase)}(x.Actions||(x.Actions={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class ChangePasswordAction extends A.DialogBase{constructor(){super(),this.resultName="ChangePasswordAction",this._currentUserNameElement=null,this._currentUserFullNameElement=null,this._oldPasswordElement=null,this._newPasswordElement=null,this._repeatPasswordElement=null,this._currentUserNameMessageElement=null,this._currentUserFullNameMessageElement=null,this._oldPasswordMessageElement=null,this._newPasswordMessageElement=null,this._repeatPasswordMessageElement=null,this._dialogControl=null,this.addPropertyList(ChangePasswordAction,ChangePasswordAction.propertyList)}execute(A,V,R){return __awaiter(this,void 0,void 0,(function*(){if(this.conditionResult){let A=this._oldPasswordElement&&this._oldPasswordElement.winControl&&this._oldPasswordElement.winControl.value?this._oldPasswordElement.winControl.value:null,V=this._newPasswordElement&&this._newPasswordElement.winControl&&this._newPasswordElement.winControl.value?this._newPasswordElement.winControl.value:null,R=this._repeatPasswordElement&&this._repeatPasswordElement.winControl&&this._repeatPasswordElement.winControl.value?this._repeatPasswordElement.winControl.value:null;const D=this._currentUserNameElement&&this._currentUserNameElement.winControl?this._currentUserNameElement.winControl:null,N=this._oldPasswordElement&&this._oldPasswordElement.winControl?this._oldPasswordElement.winControl:null,U=this._newPasswordElement&&this._newPasswordElement.winControl?this._newPasswordElement.winControl:null,B=this._repeatPasswordElement&&this._repeatPasswordElement.winControl?this._repeatPasswordElement.winControl:null,F=this._currentUserNameMessageElement&&this._currentUserNameMessageElement.winControl?this._currentUserNameMessageElement.winControl:null,W=this._oldPasswordMessageElement&&this._oldPasswordMessageElement.winControl?this._oldPasswordMessageElement.winControl:null,H=this._newPasswordMessageElement&&this._newPasswordMessageElement.winControl?this._newPasswordMessageElement.winControl:null,z=this._repeatPasswordMessageElement&&this._repeatPasswordMessageElement.winControl?this._repeatPasswordMessageElement.winControl:null;A||(A=x.AppServices.UserManagementService.changePassword.password,V=x.AppServices.UserManagementService.changePassword.newPassword,R=x.AppServices.UserManagementService.changePassword.repeatPassword);let G=null;const j=yield x.AppServices.LanguageService.getTextFallback(x.Application.Settings.UI.AppServices.UserManagementService.TextKeys.DialogsUserManagementChangePasswordSuccessMethodCallFailed),q=setTimeout(()=>{x.Observables.changePassword.errorText=j.text,x.Observables.changePassword.isNewPasswordError=!0},2e3);try{G=x.AppServices.UserManagementService.changePassword.name&&""!==x.AppServices.UserManagementService.changePassword.name?yield x.AppServices.UserManagementService.changePasswordCurrentUserAsync(A,V,R,x.AppServices.UserManagementService.changePassword.name):yield x.AppServices.UserManagementService.changePasswordCurrentUserAsync(A,V,R)}catch(A){return x.Observables.changePassword.error=j.text,x.Observables.changePassword.isNewPasswordError=!0,null}return clearTimeout(q),G.succeed?this._dialogControl&&this._dialogControl.hide("RESULTDIALOG_SUCCSEED"):(null!==D&&(G.isUserNameError?(D.errorText=G.errorText,D.errorMode=!0):D.errorMode=!1),null!==N&&(G.isPasswordError?(N.errorText=G.errorText,N.errorMode=!0):N.errorMode=!1),null!==U&&(G.isNewPasswordError?(U.errorText=G.errorText,U.errorMode=!0):U.errorMode=!1),null!==B&&(G.isRepeatPasswordError?(B.errorText=G.errorText,B.errorMode=!0):B.errorMode=!1),null!==F&&(F.text=G.isUserNameError?G.errorText:""),null!==W&&(W.text=G.isPasswordError?G.errorText:""),null!==H&&(H.text=G.isNewPasswordError?G.errorText:""),null!==z&&(z.text=G.isRepeatPasswordError?G.errorText:"")),null}}))}init(A,V){if(this.currentUserNameSelector){const x=document.querySelectorAll(this.currentUserNameSelector);x&&x[0]&&(this._currentUserNameElement=x[0])}if(this.currentUserFullNameSelector){const x=document.querySelectorAll(this.currentUserFullNameSelector);x&&x[0]&&(this._currentUserFullNameElement=x[0])}if(this.oldPasswordSelector){const x=document.querySelectorAll(this.oldPasswordSelector);x&&x[0]&&(this._oldPasswordElement=x[0])}if(this.newPasswordSelector){const x=document.querySelectorAll(this.newPasswordSelector);x&&x[0]&&(this._newPasswordElement=x[0])}if(this.repeatPasswordSelector){const x=document.querySelectorAll(this.repeatPasswordSelector);x&&x[0]&&(this._repeatPasswordElement=x[0])}if(this.currentUserNameMessageSelector){const x=document.querySelectorAll(this.currentUserNameMessageSelector);x&&x[0]&&(this._currentUserNameMessageElement=x[0])}if(this.currentUserFullNameMessageSelector){const x=document.querySelectorAll(this.currentUserFullNameMessageSelector);x&&x[0]&&(this._currentUserFullNameMessageElement=x[0])}if(this.oldPasswordMessageSelector){const x=document.querySelectorAll(this.oldPasswordMessageSelector);x&&x[0]&&(this._oldPasswordMessageElement=x[0])}if(this.newPasswordMessageSelector){const x=document.querySelectorAll(this.newPasswordMessageSelector);x&&x[0]&&(this._newPasswordMessageElement=x[0])}if(this.repeatPasswordMessageSelector){const x=document.querySelectorAll(this.repeatPasswordMessageSelector);x&&x[0]&&(this._repeatPasswordMessageElement=x[0])}Array.isArray(A)?this._dialogControl=this.getDialogControl(A[0].parentElement):this._dialogControl=this.getDialogControl(A.parentElement),x.AppServices.UserManagementService.resetChangePassword()}disposeAction(){}getInitialValue(x,A){return null}}ChangePasswordAction.actionName="ChangePasswordAction",ChangePasswordAction.propertyList={currentUserNameSelector:{type:String},currentUserFullNameSelector:{type:String},oldPasswordSelector:{type:String},newPasswordSelector:{type:String},repeatPasswordSelector:{type:String},currentUserNameMessageSelector:{type:String},currentUserFullNameMessageSelector:{type:String},oldPasswordMessageSelector:{type:String},newPasswordMessageSelector:{type:String},repeatPasswordMessageSelector:{type:String}},A.ChangePasswordAction=ChangePasswordAction,x.Triggers.Class.processActionMetadata(ChangePasswordAction,ChangePasswordAction.propertyList,x.Actions.ActionBase)}(x.Actions||(x.Actions={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class AddUserAction extends A.DialogBase{constructor(){super(),this.resultName="AddUserAction",this._dialogControl=null,this.addPropertyList(AddUserAction,AddUserAction.propertyList)}execute(A,V,R){return __awaiter(this,void 0,void 0,(function*(){if(this.conditionResult){return(yield x.AppServices.UserManagementService.addUserAsync(x.AppServices.UserManagementService.AddUser)).succeed&&this._dialogControl&&this._dialogControl.hide("RESULTDIALOG_SUCCSEED"),null}}))}init(x,A){Array.isArray(x)?this._dialogControl=this.getDialogControl(x[0].parentElement):this._dialogControl=this.getDialogControl(x.parentElement)}disposeAction(){}getInitialValue(x,A){return null}}AddUserAction.actionName="AddUserAction",AddUserAction.propertyList={},A.AddUserAction=AddUserAction,x.Triggers.Class.processActionMetadata(AddUserAction,AddUserAction.propertyList,x.Actions.ActionBase)}(x.Actions||(x.Actions={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class RefreshUserAction extends A.ActionBase{constructor(){super(),this._dialogControl=null,this.addPropertyList(RefreshUserAction,RefreshUserAction.propertyList)}execute(A,V,R){return __awaiter(this,void 0,void 0,(function*(){if(this.conditionResult)return yield x.AppServices.UserManagementService.reset(),null}))}init(x,A){}disposeAction(){}getInitialValue(x,A){return null}}RefreshUserAction.actionName="RefreshUserAction",RefreshUserAction.propertyList={},A.RefreshUserAction=RefreshUserAction,x.Triggers.Class.processActionMetadata(RefreshUserAction,RefreshUserAction.propertyList,x.Actions.ActionBase)}(x.Actions||(x.Actions={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class ChangeUserAction extends A.DialogBase{constructor(){super(),this.resultName="ChangeUserAction",this._dialogControl=null,this.addPropertyList(ChangeUserAction,ChangeUserAction.propertyList)}execute(A,V,R){return __awaiter(this,void 0,void 0,(function*(){if(this.conditionResult){return(yield x.AppServices.UserManagementService.changeUserAsync(x.AppServices.UserManagementService.SelectedUser)).succeed&&this._dialogControl&&this._dialogControl.hide("RESULTDIALOG_SUCCSEED"),null}}))}init(x,A){Array.isArray(x)?this._dialogControl=this.getDialogControl(x[0].parentElement):this._dialogControl=this.getDialogControl(x.parentElement)}disposeAction(){}getInitialValue(x,A){return null}}ChangeUserAction.actionName="ChangeUserAction",ChangeUserAction.propertyList={},A.ChangeUserAction=ChangeUserAction,x.Triggers.Class.processActionMetadata(ChangeUserAction,ChangeUserAction.propertyList,x.Actions.ActionBase)}(x.Actions||(x.Actions={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class ChangeSelectedUserAction extends A.DialogBase{constructor(){super(),this._dialogControl=null,this.addPropertyList(ChangeSelectedUserAction,ChangeSelectedUserAction.propertyList)}execute(A,V,R){return __awaiter(this,void 0,void 0,(function*(){return(yield x.AppServices.UserManagementService.changeSelectedUserAsync(x.AppServices.UserManagementService.SelectedUser)).succeed&&this._dialogControl&&this._dialogControl.hide("RESULTDIALOG_SUCCSEED"),null}))}init(x,A){}disposeAction(){}getInitialValue(x,A){return Array.isArray(x)?this._dialogControl=this.getDialogControl(x[0].parentElement):this._dialogControl=this.getDialogControl(x.parentElement),null}}ChangeSelectedUserAction.actionName="ChangeSelectedUserAction",ChangeSelectedUserAction.propertyList={},A.ChangeSelectedUserAction=ChangeSelectedUserAction,x.Triggers.Class.processActionMetadata(ChangeSelectedUserAction,ChangeSelectedUserAction.propertyList,x.Actions.ActionBase)}(x.Actions||(x.Actions={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class RemoveSelectedUserAction extends A.ActionBase{constructor(){super(),this._dialogControl=null,this.addPropertyList(RemoveSelectedUserAction,RemoveSelectedUserAction.propertyList)}execute(A,V,R){return __awaiter(this,void 0,void 0,(function*(){return(yield x.AppServices.UserManagementService.addSelectedUserAsync(x.AppServices.UserManagementService.SelectedUser)).succeed&&this._dialogControl&&this._dialogControl.hide("RESULTDIALOG_SUCCSEED"),null}))}init(x,A){}disposeAction(){}getInitialValue(x,A){return null}}RemoveSelectedUserAction.actionName="RemoveSelectedUserAction",RemoveSelectedUserAction.propertyList={},A.RemoveSelectedUserAction=RemoveSelectedUserAction,x.Triggers.Class.processActionMetadata(RemoveSelectedUserAction,RemoveSelectedUserAction.propertyList,x.Actions.ActionBase)}(x.Actions||(x.Actions={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class RemoveUserAction extends A.DialogBase{constructor(){super(),this.resultName="RemoveUserAction",this._userNameElement=null,this._userNameMessageElement=null,this._dialogControl=null,this.addPropertyList(RemoveUserAction,RemoveUserAction.propertyList)}execute(A,V,R){return __awaiter(this,void 0,void 0,(function*(){if(this.conditionResult){const A=this._userNameElement&&this._userNameElement.winControl?this._userNameElement.winControl:null,V=this._userNameMessageElement&&this._userNameMessageElement.winControl?this._userNameMessageElement.winControl:null,R=yield x.AppServices.UserManagementService.removeUserAsync();return R.succeed?this._dialogControl&&this._dialogControl.hide("RESULTDIALOG_SUCCSEED"):(null!==A&&(A.errorText=R.isUserNameText?R.text:""),null!==V&&(V.text=R.isUserNameText?R.text:"")),null}}))}init(A,V){if(this.userNameSelector){const x=document.querySelectorAll(this.userNameSelector);x&&x[0]&&(this._userNameElement=x[0])}if(this.userNameMessageSelector){const x=document.querySelectorAll(this.userNameMessageSelector);x&&x[0]&&(this._userNameMessageElement=x[0])}Array.isArray(A)?this._dialogControl=this.getDialogControl(A[0].parentElement):this._dialogControl=this.getDialogControl(A.parentElement),x.AppServices.UserManagementService.resetRemoveUser()}disposeAction(){}getInitialValue(x,A){return null}}RemoveUserAction.actionName="RemoveUserAction",RemoveUserAction.propertyList={userNameSelector:{type:String},userNameMessageSelector:{type:String}},A.RemoveUserAction=RemoveUserAction,x.Triggers.Class.processActionMetadata(RemoveUserAction,RemoveUserAction.propertyList,x.Actions.ActionBase)}(x.Actions||(x.Actions={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class LoginAsyncAction extends A.ActionBase{constructor(){super(),this.addPropertyList(LoginAsyncAction,LoginAsyncAction.propertyList)}execute(A,V,R){let D=null,N=null;let U=null,B=null;if(this.userElementId){const x=document.getElementById(this.userElementId);x&&x.winControl&&x.winControl.value&&(U=x.winControl.value)}else U=this.user||R.sender.triggerSourcePropertyValue;if(this.passwordElementId){const x=document.getElementById(this.passwordElementId);x&&x.winControl&&x.winControl.value&&(B=x.winControl.value)}else B=this.password||R.sender.triggerSourcePropertyType;if(this.messageElementId&&(D=document.getElementById(this.messageElementId),D&&D.winControl&&(N=D.winControl)),!U)return void(N.text="Please enter your username to log in.");if(!B)return void(N.text="Please enter your password to log in.");this._msgControl=N;const F=R;x.AppServices.UserManagementService.logOnAsync(U,B).then(A=>{switch(A){case x.System.UserManagement.LogOnSuccess.Succeeded:F.resultAction.reason="LogOnSuccess_Succeeded",F.resultAction.succeed=!0,Promise.resolve(x.Application.AppService.getService().LoginPromise);break;case x.System.UserManagement.LogOnSuccess.MethodCallFailed:F.resultAction.reason="LogOnSuccess_MethodCallFailed",F.resultAction.succeed=!1,this._msgControl.text="Login failed"+x.System.UserManagement.LogOnSuccess[A]+" Name and password not set";break;case x.System.UserManagement.LogOnSuccess.PasswordExpired:F.resultAction.reason="LogOnSuccess_PasswordExpired",F.resultAction.succeed=!1,this._msgControl.text="Password expired.";break;case x.System.UserManagement.LogOnSuccess.RenewPassword:F.resultAction.reason="LogOnSuccess_RenewPassword",F.resultAction.succeed=!1,this._msgControl.text="Password must be renewed.";break;case x.System.UserManagement.LogOnSuccess.TooManyFailedLogOns:F.resultAction.reason="LogOnSuccess_TooManyFailedLogOns",F.resultAction.succeed=!1,this._msgControl.text="Too many login attempts.";break;case x.System.UserManagement.LogOnSuccess.UserDeactivated:F.resultAction.reason="LogOnSuccess_UserDeactivated",F.resultAction.succeed=!1,this._msgControl.text="User deactivated.";break;case x.System.UserManagement.LogOnSuccess.UnknownUser:F.resultAction.reason="LogOnSuccess_UnknownUser",F.resultAction.succeed=!1,this._msgControl.text="Unknown user.";break;case x.System.UserManagement.LogOnSuccess.InvalidPassword:F.resultAction.reason="LogOnSuccess_InvalidPassword",F.resultAction.succeed=!1,this._msgControl.text="Passwort falsch.",this._msgControl.text="Wrong password.";break;default:F.resultAction.reason="LogOnSuccess_Fail",F.resultAction.succeed=!1,this._msgControl.text="Login faild"+x.System.UserManagement.LogOnSuccess[A]}},A=>{switch(A){case x.System.UserManagement.LogOnSuccess.MethodCallFailed:F.resultAction.reason="LogOnSuccess_MethodCallFailed",F.resultAction.succeed=!1,this._msgControl.text="Login failed"+x.System.UserManagement.LogOnSuccess[A]+" Name and password not set";break;case x.System.UserManagement.LogOnSuccess.PasswordExpired:F.resultAction.reason="LogOnSuccess_PasswordExpired",F.resultAction.succeed=!1,this._msgControl.text="Password expired.";break;case x.System.UserManagement.LogOnSuccess.RenewPassword:F.resultAction.reason="LogOnSuccess_RenewPassword",F.resultAction.succeed=!1,this._msgControl.text="Password must be renewed.";break;case x.System.UserManagement.LogOnSuccess.TooManyFailedLogOns:F.resultAction.reason="LogOnSuccess_TooManyFailedLogOns",F.resultAction.succeed=!1,this._msgControl.text="Too many login attempts.";break;case x.System.UserManagement.LogOnSuccess.UserDeactivated:F.resultAction.reason="LogOnSuccess_UserDeactivated",F.resultAction.succeed=!1,this._msgControl.text="User deactivated.";break;case x.System.UserManagement.LogOnSuccess.UnknownUser:F.resultAction.reason="LogOnSuccess_UnknownUser",F.resultAction.succeed=!1,this._msgControl.text="Unknown user.";break;case x.System.UserManagement.LogOnSuccess.InvalidPassword:F.resultAction.reason="LogOnSuccess_InvalidPassword",F.resultAction.succeed=!1,this._msgControl.text="Passwort falsch.",this._msgControl.text="Wrong password.";break;default:F.resultAction.reason="LogOnSuccess_Fail",F.resultAction.succeed=!1,this._msgControl.text="Login faild"+x.System.UserManagement.LogOnSuccess[A]}});return null}_loginMsgHandler(x){if(this.messageElementId){const A=document.getElementById(this.messageElementId);A&&A.winControl&&(A.winControl.text=x)}}init(x,A){}disposeAction(){}getInitialValue(A,V){let R=null;const D=x.AppServices.UserManagementService._userManagementService;return D&&D.CurrentUser&&(R=D.CurrentUser.Name),R}}LoginAsyncAction.actionName="LoginAsyncAction",LoginAsyncAction.propertyList={user:{type:String},userElementId:{type:String},password:{type:String},passwordElementId:{type:String},messageElementId:{type:String},messageText:{type:String}},A.LoginAsyncAction=LoginAsyncAction,x.Triggers.Class.processActionMetadata(LoginAsyncAction,LoginAsyncAction.propertyList,x.Actions.ActionBase)}(x.Actions||(x.Actions={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class SetLanguageAction extends A.ActionBase{constructor(){super(),this.language=null,this.languageIfTrue=null,this.languageIfFalse=null,this.addPropertyList(SetLanguageAction,SetLanguageAction.propertyList)}execute(A,V,R){return __awaiter(this,void 0,void 0,(function*(){if(V){let A=null;if(this.languageIfTrue||this.languageIfFalse?this.conditionResult?(A=yield this.getData(this.languageIfTrue,R.sender.triggerSourcePropertyValue),this.setActionResult(!0,A)):(A=yield this.getData(this.languageIfFalse,R.sender.triggerSourcePropertyValue),this.setActionResult(!1,A)):(A=yield this.getData(this.language,R.sender.triggerSourcePropertyValue),this.setActionResult(null,A)),A=x.Utilities.convertToType(A,"string"),"null"!==A&&void 0!==A&&""!==A&&x.AppServices.LanguageService&&x.AppServices.LanguageService.availableProjectLanguages){const V=x.AppServices.LanguageService.availableProjectLanguages;for(let R=0;R<V.length;R++)V[R].locale===A&&x.AppServices.LanguageService.currentLanguage!==A&&x.AppServices.LanguageService.changeLanguageAsync(A)}}return null}))}init(x,A){}disposeAction(){}getInitialValue(A,V){if(x.AppServices.LanguageService&&x.AppServices.LanguageService.availableProjectLanguages){const A=x.AppServices.LanguageService.availableProjectLanguages;for(let V=0;V<A.length;V++)if(A[V].locale===x.AppServices.LanguageService.currentLanguage)return x.AppServices.LanguageService.currentLanguage}return null}}SetLanguageAction.actionName="SetLanguageAction",SetLanguageAction.propertyList={language:{type:String},languageIfTrue:{type:String},languageIfFalse:{type:String}},A.SetLanguageAction=SetLanguageAction,x.Triggers.Class.processActionMetadata(SetLanguageAction,SetLanguageAction.propertyList,x.Actions.ActionBase)}(x.Actions||(x.Actions={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class RecipeGetClassListAction extends A.ActionBase{constructor(){super(),this.addPropertyList(RecipeGetClassListAction,RecipeGetClassListAction.propertyList)}execute(x,A,V){if(A&&A.winControl){const x=A.winControl.recipeClassList;if(V&&V.targetElement&&V.targetElement.winControl&&V.targetElement.winControl._listItems){const A=V.targetElement.winControl._listItems;for(let V=0;V<A.length;V++)V<x.length?A[V].control.text=x[V]:A[V].control.text="-"}}return null}init(x,A){}disposeAction(){}getInitialValue(x,A){return null}}RecipeGetClassListAction.actionName="RecipeGetClassListAction",RecipeGetClassListAction.propertyList={targetSelector:{type:String}},A.RecipeGetClassListAction=RecipeGetClassListAction,x.Triggers.Class.processActionMetadata(RecipeGetClassListAction,RecipeGetClassListAction.propertyList,x.Actions.ActionBase)}(x.Actions||(x.Actions={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class RecipeDeleteFileAction extends A.ActionBase{constructor(){super(),this.recipeFileName=null,this.recipeFileNameId=null,this.addPropertyList(RecipeDeleteFileAction,RecipeDeleteFileAction.propertyList)}execute(A,V,R){let D=null;if(this.recipeFileNameId){const A=document.getElementById(this.recipeFileNameId);A&&A.winControl&&A.winControl.value?D=A.winControl.value:x.Application.ErrorLog.log('VisiWin.Actions.RecipeDeleteFile.execute: recipeFileNameId "'+this.recipeFileNameId+'"not found.')}else D=this.recipeFileName||R.sender.triggerSourcePropertyValue;return V&&V.winControl&&x.AppServices.RecipeService.deleteFileAsync(D).then((function(x){}),(function(x){})),null}init(x,A){}disposeAction(){}getInitialValue(x,A){return null}}RecipeDeleteFileAction.actionName="RecipeDeleteFileAction",RecipeDeleteFileAction.propertyList={recipeFileName:{type:String},recipeFileNameId:{type:String}},A.RecipeDeleteFileAction=RecipeDeleteFileAction,x.Triggers.Class.processActionMetadata(RecipeDeleteFileAction,RecipeDeleteFileAction.propertyList,x.Actions.ActionBase)}(x.Actions||(x.Actions={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(V){"use strict";class RecipeClassBaseAction extends A.ActionBase{constructor(){super(),this.recipeClassName=null,this.actionResultId="",this.actionResultOutPutElement=null,this.addPropertyList(RecipeClassBaseAction,RecipeClassBaseAction.propertyList)}execute(x,A,V){return __awaiter(this,void 0,void 0,(function*(){throw new Error("Custom action does not implement execute method.")}))}init(A,V){this._initClass(V),this.actionResultId&&(this.actionResultOutPutElement=x.Actions.Recipe._tryGetOutputWinControl(this.actionResultId))}_initClass(A){return __awaiter(this,void 0,void 0,(function*(){const R=yield this.getData(this.recipeClassName,A.sender.triggerSourcePropertyValue);x.Utilities.isInDesignMode()||(R?(this.recipeClass=yield x.AppServices.RecipeService._initRecipeClassForAction(R),this.recipeClass||V._displayOutputResult(this.actionResultOutPutElement,"ErrorLog",`Recipe class '${R}' is not valid.`)):V._displayOutputResult(this.actionResultOutPutElement,"ErrorLog",`Recipe class name '${R}' is not valid.`))}))}}RecipeClassBaseAction.actionName="RecipeClassBaseAction",RecipeClassBaseAction.propertyList={recipeClassName:{type:String},actionResultId:{type:String}},V.RecipeClassBaseAction=RecipeClassBaseAction,x.Triggers.Class.processActionMetadata(RecipeClassBaseAction,RecipeClassBaseAction.propertyList,x.Actions.ActionBase)}(A.Recipe||(A.Recipe={}))}(x.Actions||(x.Actions={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){"use strict";function _tryGetWinControl(A){let V=null;x.stringStartsWith(A,"#")&&(A=A.substring(1));let R=document.getElementById(A);return R&&R.winControl?(V=R.winControl,V):(R=document.querySelector(A),R&&R.winControl?(V=R.winControl,V):V)}A._tryGetWinControl=_tryGetWinControl,A._tryGetOutputWinControl=function _tryGetOutputWinControl(A){let V=null;const R=_tryGetWinControl(A);return R&&(x.isNullOrUndefined(R.text)||(V=R),x.isNullOrUndefined(R.value)||(V=R)),V},A._displayOutputResult=function _displayOutputResult(A,V,R){V&&x.Application[V].log(R),A&&!x.isNullOrUndefined(A.text)?A.text=R:A&&!x.isNullOrUndefined(A.value)&&(A.value=R)}}(A.Recipe||(A.Recipe={}))}(x.Actions||(x.Actions={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class RecipeClassLoadFileToBufferAction extends A.Recipe.RecipeClassBaseAction{constructor(){super(),this.recipeClassName="",this.actionResultId="",this.recipeFileName=null,this.recipeFileNameId=null,this.normalized=!1,this.addPropertyList(RecipeClassLoadFileToBufferAction,RecipeClassLoadFileToBufferAction.propertyList)}execute(V,R,D){return __awaiter(this,void 0,void 0,(function*(){if(yield this._get(D),this.recipeFileName&&this.recipeClass){const V=yield this.recipeClass.LoadFileToBufferAsync(this.recipeFileName,this.normalized);return V.Result!==x.System.Recipe.LoadRecipeResults.Succeeded?A.Recipe._displayOutputResult(this.actionResultOutPutElement,"WarnLog",`Recipe file '${this.recipeFileNameId}' LoadRecipeResults:${x.System.Recipe.LoadRecipeResults[V.Result]}`):A.Recipe._displayOutputResult(this.actionResultOutPutElement,"InfoLog","LoadRecipeResults:"+x.System.Recipe.LoadRecipeResults[V.Result]),null}return A.Recipe._displayOutputResult(this.actionResultOutPutElement,"WarnLog","Recipe file name not valid:"+this.recipeFileName),null}))}init(x,A){super.init(x,A)}disposeAction(){}getInitialValue(x,A){return null}_get(V){return __awaiter(this,void 0,void 0,(function*(){if(this.recipeFileNameId){const V=A.Recipe._tryGetWinControl(this.recipeFileNameId);V&&!x.isNullOrUndefined(V.value)?this.recipeFileName=V.value:A.Recipe._displayOutputResult(this.actionResultOutPutElement,"ErrorLog","Recipe file name control ID is not valid:"+this.recipeFileNameId)}else this.recipeFileName=yield this.getData(this.recipeFileName,V.sender.triggerSourcePropertyValue)}))}}RecipeClassLoadFileToBufferAction.actionName="RecipeClassLoadFileToBufferAction",RecipeClassLoadFileToBufferAction.propertyList={recipeClassName:{type:String},actionResultId:{type:String},recipeFileName:{type:String},recipeFileNameId:{type:String},normalized:{type:Boolean,defaultValue:!1}},A.RecipeClassLoadFileToBufferAction=RecipeClassLoadFileToBufferAction,x.Triggers.Class.processActionMetadata(RecipeClassLoadFileToBufferAction,RecipeClassLoadFileToBufferAction.propertyList,x.Actions.ActionBase)}(x.Actions||(x.Actions={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class RecipeClassLoadFileToProcessAction extends A.Recipe.RecipeClassBaseAction{constructor(){super(),this.recipeClassName="",this.actionResultId="",this.recipeFileName=null,this.recipeFileNameId=null,this.normalized=!1,this.addPropertyList(RecipeClassLoadFileToProcessAction,RecipeClassLoadFileToProcessAction.propertyList)}execute(V,R,D){return __awaiter(this,void 0,void 0,(function*(){if(yield this._get(D),this.recipeFileName&&this.recipeClass){const V=yield this.recipeClass.LoadFileToProcessAsync(this.recipeFileName,this.normalized);return V.Result!==x.System.Recipe.SendRecipeResult.Succeeded?A.Recipe._displayOutputResult(this.actionResultOutPutElement,"WarnLog",`Recipe file '${this.recipeFileNameId}' SendRecipeResult:${x.System.Recipe.SendRecipeResult[V.Result]}`):A.Recipe._displayOutputResult(this.actionResultOutPutElement,"InfoLog","SendRecipeResult:"+x.System.Recipe.SendRecipeResult[V.Result]),null}return A.Recipe._displayOutputResult(this.actionResultOutPutElement,"WarnLog","Recipe file name not valid:"+this.recipeFileName),null}))}init(x,A){super.init(x,A)}disposeAction(){}getInitialValue(x,A){return null}_get(V){return __awaiter(this,void 0,void 0,(function*(){if(this.recipeFileNameId){const V=A.Recipe._tryGetWinControl(this.recipeFileNameId);V&&!x.isNullOrUndefined(V.value)?this.recipeFileName=V.value:A.Recipe._displayOutputResult(this.actionResultOutPutElement,"ErrorLog","Recipe file name control ID is not valid:"+this.recipeFileNameId)}else this.recipeFileName=yield this.getData(this.recipeFileName,V.sender.triggerSourcePropertyValue)}))}}RecipeClassLoadFileToProcessAction.actionName="RecipeClassLoadFileToProcessAction",RecipeClassLoadFileToProcessAction.propertyList={recipeClassName:{type:String},actionResultId:{type:String},recipeFileName:{type:String},recipeFileNameId:{type:String},normalized:{type:Boolean,defaultValue:!1}},A.RecipeClassLoadFileToProcessAction=RecipeClassLoadFileToProcessAction,x.Triggers.Class.processActionMetadata(RecipeClassLoadFileToProcessAction,RecipeClassLoadFileToProcessAction.propertyList,x.Actions.ActionBase)}(x.Actions||(x.Actions={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class RecipeClassReadProcessToBufferAction extends A.Recipe.RecipeClassBaseAction{constructor(){super(),this.recipeClassName="",this.actionResultId="",this.addPropertyList(RecipeClassReadProcessToBufferAction,RecipeClassReadProcessToBufferAction.propertyList)}execute(V,R,D){return __awaiter(this,void 0,void 0,(function*(){if(this.recipeClass){const V=yield this.recipeClass.ReadProcessToBufferAsync();V.GetRecipeSuccess!==x.System.Recipe.GetRecipeSuccess.Succeeded?A.Recipe._displayOutputResult(this.actionResultOutPutElement,"WarnLog","GetRecipeSuccess: "+x.System.Recipe.GetRecipeSuccess[V.GetRecipeSuccess]):A.Recipe._displayOutputResult(this.actionResultOutPutElement,"InfoLog","GetRecipeSuccess: "+x.System.Recipe.GetRecipeSuccess[V.GetRecipeSuccess])}return null}))}disposeAction(){}getInitialValue(x,A){return null}}RecipeClassReadProcessToBufferAction.actionName="RecipeClassReadProcessToBufferAction",RecipeClassReadProcessToBufferAction.propertyList={recipeClassName:{type:String},actionResultId:{type:String}},A.RecipeClassReadProcessToBufferAction=RecipeClassReadProcessToBufferAction,x.Triggers.Class.processActionMetadata(RecipeClassReadProcessToBufferAction,RecipeClassReadProcessToBufferAction.propertyList,x.Actions.ActionBase)}(x.Actions||(x.Actions={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class RecipeClassSaveBufferToFileAction extends A.Recipe.RecipeClassBaseAction{constructor(){super(),this.recipeClassName="",this.actionResultId="",this.recipeFileName=null,this.recipeFileNameId=null,this.recipeDescriptionId="",this.recipeDescription="",this.normalized=!1,this.forceOverwrite=!1,this.addPropertyList(RecipeClassSaveBufferToFileAction,RecipeClassSaveBufferToFileAction.propertyList)}execute(V,R,D){return __awaiter(this,void 0,void 0,(function*(){if(yield this._get(D),this.recipeFileName&&this.recipeClass){const V=yield this.recipeClass.SaveBufferToFileAsync(this.recipeFileName,this.recipeDescription,this.forceOverwrite,this.normalized);if(V.Result!==x.System.Recipe.SaveRecipeResult.Succeeded){const R=`VisiWin.Actions.RecipeSaveToFileFromBuffer.execute \n                    SaveRecipeResult: ${x.System.Recipe.SaveRecipeResult[V.Result]}\n                    recipeFileName:${this.recipeFileName},\n                    recipeDescription:${this.recipeDescription},\n                    forceOverwrite:${this.forceOverwrite}, \n                    normalized:${this.normalized}`;A.Recipe._displayOutputResult(this.actionResultOutPutElement,"WarnLog",R);const D="SaveRecipeResult: "+x.System.Recipe.SaveRecipeResult[V.Result];A.Recipe._displayOutputResult(this.actionResultOutPutElement,"WarnLog",D)}else{const R="SaveRecipeResult: "+x.System.Recipe.SaveRecipeResult[V.Result];A.Recipe._displayOutputResult(this.actionResultOutPutElement,"InfoLog",R)}}return null}))}init(x,A){super.init(x,A)}disposeAction(){}getInitialValue(x,A){return null}_get(V){return __awaiter(this,void 0,void 0,(function*(){if(this.recipeFileNameId){const V=A.Recipe._tryGetWinControl(this.recipeFileNameId);V&&!x.isNullOrUndefined(V.value)?this.recipeFileName=V.value:A.Recipe._displayOutputResult(this.actionResultOutPutElement,"ErrorLog","Recipe file name control ID is not valid:"+this.recipeFileNameId)}else this.recipeFileName=yield this.getData(this.recipeFileName,V.sender.triggerSourcePropertyValue);if(this.recipeDescriptionId){const V=A.Recipe._tryGetWinControl(this.recipeDescriptionId);V&&!x.isNullOrUndefined(V.value)?this.recipeDescription=V.value:A.Recipe._displayOutputResult(this.actionResultOutPutElement,"ErrorLog","Recipe file name control ID is not valid:"+this.recipeDescriptionId)}else this.recipeDescription=yield this.getData(this.recipeDescription,V.sender.triggerSourcePropertyValue)}))}}RecipeClassSaveBufferToFileAction.actionName="RecipeClassSaveBufferToFileAction",RecipeClassSaveBufferToFileAction.propertyList={recipeClassName:{type:String},actionResultId:{type:String},recipeFileName:{type:String},recipeFileNameId:{type:String},recipeDescription:{type:String},recipeDescriptionId:{type:String},normalized:{type:Boolean,defaultValue:!1},forceOverwrite:{type:Boolean,defaultValue:!1}},A.RecipeClassSaveBufferToFileAction=RecipeClassSaveBufferToFileAction,x.Triggers.Class.processActionMetadata(RecipeClassSaveBufferToFileAction,RecipeClassSaveBufferToFileAction.propertyList,x.Actions.ActionBase)}(x.Actions||(x.Actions={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class RecipeClassSaveProcessToFileAction extends A.Recipe.RecipeClassBaseAction{constructor(){super(),this.recipeClassName="",this.actionResultId="",this.recipeFileName=null,this.recipeFileNameId=null,this.recipeDescriptionId="",this.recipeDescription="",this.normalized=!1,this.forceOverwrite=!1,this.addPropertyList(RecipeClassSaveProcessToFileAction,RecipeClassSaveProcessToFileAction.propertyList)}execute(V,R,D){return __awaiter(this,void 0,void 0,(function*(){if(yield this._get(D),this.recipeFileName&&this.recipeClass){(yield this.recipeClass.ReadProcessToBufferAsync()).Result||A.Recipe._displayOutputResult(this.actionResultOutPutElement,"WarnLog","ReadProcessToBufferAsync failed:"+this.recipeClass.Name);const V=yield this.recipeClass.SaveBufferToFileAsync(this.recipeFileName,this.recipeDescription,this.forceOverwrite,this.normalized);if(V.Result!==x.System.Recipe.SaveRecipeResult.Succeeded){const R=`SaveRecipeResult: ${x.System.Recipe.SaveRecipeResult[V.Result]}\n                    recipeFileName:${this.recipeFileName},\n                    recipeDescription:${this.recipeDescription},\n                    forceOverwrite:${this.forceOverwrite}, \n                    normalized:${this.normalized}`;A.Recipe._displayOutputResult(this.actionResultOutPutElement,"WarnLog",R),A.Recipe._displayOutputResult(this.actionResultOutPutElement,"WarnLog","SaveRecipeResult: "+x.System.Recipe.SaveRecipeResult[V.Result])}else A.Recipe._displayOutputResult(this.actionResultOutPutElement,"InfoLog","SaveRecipeResult: "+x.System.Recipe.SaveRecipeResult[V.Result]);return null}}))}init(x,A){super.init(x,A)}disposeAction(){}getInitialValue(x,A){return null}_get(V){return __awaiter(this,void 0,void 0,(function*(){if(this.recipeFileNameId){const V=A.Recipe._tryGetWinControl(this.recipeFileNameId);V&&!x.isNullOrUndefined(V.value)?this.recipeFileName=V.value:A.Recipe._displayOutputResult(this.actionResultOutPutElement,"ErrorLog","Recipe file name control ID is not valid:"+this.recipeFileNameId)}else this.recipeFileName=yield this.getData(this.recipeFileName,V.sender.triggerSourcePropertyValue);if(this.recipeDescriptionId){const V=A.Recipe._tryGetWinControl(this.recipeDescriptionId);V&&!x.isNullOrUndefined(V.value)?this.recipeDescription=V.value:A.Recipe._displayOutputResult(this.actionResultOutPutElement,"ErrorLog","Recipe file name control ID is not valid:"+this.recipeDescriptionId)}else this.recipeDescription=yield this.getData(this.recipeDescription,V.sender.triggerSourcePropertyValue)}))}}RecipeClassSaveProcessToFileAction.propertyList={recipeClassName:{type:String},actionResultId:{type:String},recipeFileName:{type:String},recipeFileNameId:{type:String},recipeDescription:{type:String},recipeDescriptionId:{type:String},normalized:{type:Boolean,defaultValue:!1},forceOverwrite:{type:Boolean,defaultValue:!1}},A.RecipeClassSaveProcessToFileAction=RecipeClassSaveProcessToFileAction,x.Triggers.Class.processActionMetadata(RecipeClassSaveProcessToFileAction,RecipeClassSaveProcessToFileAction.propertyList)}(x.Actions||(x.Actions={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class RecipeClassStartEditAction extends A.Recipe.RecipeClassBaseAction{constructor(){super(),this.addPropertyList(RecipeClassStartEditAction,RecipeClassStartEditAction.propertyList)}execute(x,V,R){return __awaiter(this,void 0,void 0,(function*(){if(this.recipeClass.IsEditing)A.Recipe._displayOutputResult(this.actionResultOutPutElement,"InfoLog",`Recipe class ${this.recipeClass.Name} is already in edit mode.`);else{!0===(yield this.recipeClass.StartEditAsync())?A.Recipe._displayOutputResult(this.actionResultOutPutElement,"InfoLog",`Recipe class ${this.recipeClass.Name} start edit mode.`):A.Recipe._displayOutputResult(this.actionResultOutPutElement,"WarnLog",`Recipe class ${this.recipeClass.Name} could not start edit mode.`)}return null}))}disposeAction(){}getInitialValue(x,A){return null}}RecipeClassStartEditAction.actionName="RecipeClassStartEditAction",RecipeClassStartEditAction.propertyList={recipeClassName:{type:String},actionResultId:{type:String}},A.RecipeClassStartEditAction=RecipeClassStartEditAction,x.Triggers.Class.processActionMetadata(RecipeClassStartEditAction,RecipeClassStartEditAction.propertyList,x.Actions.ActionBase)}(x.Actions||(x.Actions={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class RecipeClassStopEditAction extends A.Recipe.RecipeClassBaseAction{constructor(){super(),this.recipeClassName=null,this.actionResultId="",this.addPropertyList(RecipeClassStopEditAction,RecipeClassStopEditAction.propertyList)}execute(x,V,R){return __awaiter(this,void 0,void 0,(function*(){if(this.recipeClass.IsEditing){!0===(yield this.recipeClass.StopEditAsync())?A.Recipe._displayOutputResult(this.actionResultOutPutElement,"InfoLog",`Recipe class ${this.recipeClass.Name} stop edit mode.`):A.Recipe._displayOutputResult(this.actionResultOutPutElement,"WarnLog",`Recipe class ${this.recipeClass.Name} could not stop edit mode.`)}else A.Recipe._displayOutputResult(this.actionResultOutPutElement,"InfoLog",`Recipe class ${this.recipeClass.Name} is already not edit mode.`);return null}))}disposeAction(){}getInitialValue(x,A){return null}}RecipeClassStopEditAction.actionName="RecipeClassStopEditAction",RecipeClassStopEditAction.propertyList={recipeClassName:{type:String},actionResultId:{type:String}},A.RecipeClassStopEditAction=RecipeClassStopEditAction,x.Triggers.Class.processActionMetadata(RecipeClassStopEditAction,RecipeClassStopEditAction.propertyList,x.Actions.ActionBase)}(x.Actions||(x.Actions={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class RecipeClassWriteBufferToProcessAction extends A.Recipe.RecipeClassBaseAction{constructor(){super(),this.recipeClassName="",this.actionResultId="",this.addPropertyList(RecipeClassWriteBufferToProcessAction,RecipeClassWriteBufferToProcessAction.propertyList)}execute(V,R,D){return __awaiter(this,void 0,void 0,(function*(){if(this.recipeClass){this.recipeClass.IsEditing||(yield this.recipeClass.StartEditAsync());const V=yield this.recipeClass.WriteBufferToProcessAsync();V.SetRecipeSuccess!==x.System.Recipe.SetRecipeSuccess.Succeeded?A.Recipe._displayOutputResult(this.actionResultOutPutElement,"WarnLog","SetRecipeSuccess: "+x.System.Recipe.SetRecipeSuccess[V.SetRecipeSuccess]):A.Recipe._displayOutputResult(this.actionResultOutPutElement,"InfoLog","SetRecipeSuccess: "+x.System.Recipe.SetRecipeSuccess[V.SetRecipeSuccess])}return null}))}disposeAction(){}getInitialValue(x,A){return null}}RecipeClassWriteBufferToProcessAction.actionName="RecipeClassWriteBufferToProcessAction",RecipeClassWriteBufferToProcessAction.propertyList={recipeClassName:{type:String},actionResultId:{type:String}},A.RecipeClassWriteBufferToProcessAction=RecipeClassWriteBufferToProcessAction,x.Triggers.Class.processActionMetadata(RecipeClassWriteBufferToProcessAction,RecipeClassWriteBufferToProcessAction.propertyList,x.Actions.ActionBase)}(x.Actions||(x.Actions={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class RecipeClassLockRecipeAction extends A.Recipe.RecipeClassBaseAction{constructor(){super(),this.addPropertyList(RecipeClassLockRecipeAction,RecipeClassLockRecipeAction.propertyList)}execute(V,R,D){return __awaiter(this,void 0,void 0,(function*(){if(this.recipeClass.LockState===x.System.Recipe.RecipeLockState.Unlocked){return!0===(yield this.recipeClass.LockRecipeAsync()).Result?A.Recipe._displayOutputResult(this.actionResultOutPutElement,"InfoLog",`Recipe class ${this.recipeClass.Name} locked.`):A.Recipe._displayOutputResult(this.actionResultOutPutElement,"WarnLog",`Recipe class ${this.recipeClass.Name} could not be locked.`),null}return this.recipeClass.LockState===x.System.Recipe.RecipeLockState.LockedByThisClient?(A.Recipe._displayOutputResult(this.actionResultOutPutElement,"InfoLog",`Recipe class ${this.recipeClass.Name} is already ${x.System.Recipe.RecipeLockState[this.recipeClass.LockState]}.`),null):(this.recipeClass.LockState===x.System.Recipe.RecipeLockState.LockedByOtherClient&&A.Recipe._displayOutputResult(this.actionResultOutPutElement,"ErrorLog",`Recipe class ${this.recipeClass.Name} is ${x.System.Recipe.RecipeLockState[this.recipeClass.LockState]}.`),null)}))}disposeAction(){}getInitialValue(x,A){return null}}RecipeClassLockRecipeAction.actionName="RecipeClassLockRecipeAction",RecipeClassLockRecipeAction.propertyList={recipeClassName:{type:String},actionResultId:{type:String}},A.RecipeClassLockRecipeAction=RecipeClassLockRecipeAction,x.Triggers.Class.processActionMetadata(RecipeClassLockRecipeAction,RecipeClassLockRecipeAction.propertyList,x.Actions.ActionBase)}(x.Actions||(x.Actions={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class RecipeClassUnlockRecipeAction extends A.Recipe.RecipeClassBaseAction{constructor(){super(),this.addPropertyList(RecipeClassUnlockRecipeAction,RecipeClassUnlockRecipeAction.propertyList)}execute(V,R,D){return __awaiter(this,void 0,void 0,(function*(){if(this.recipeClass.LockState===x.System.Recipe.RecipeLockState.LockedByThisClient){return!0===(yield this.recipeClass.UnlockRecipeAsync()).Result?A.Recipe._displayOutputResult(this.actionResultOutPutElement,"InfoLog",`Recipe class ${this.recipeClass.Name} unlocked.`):A.Recipe._displayOutputResult(this.actionResultOutPutElement,"WarnLog",`Recipe class ${this.recipeClass.Name} could not be unlocked.`),null}return this.recipeClass.LockState===x.System.Recipe.RecipeLockState.Unlocked?(A.Recipe._displayOutputResult(this.actionResultOutPutElement,"InfoLog",`Recipe class ${this.recipeClass.Name} is already unlocked.`),null):(this.recipeClass.LockState===x.System.Recipe.RecipeLockState.LockedByOtherClient&&A.Recipe._displayOutputResult(this.actionResultOutPutElement,"ErrorLog",`Recipe class ${this.recipeClass.Name} is ${x.System.Recipe.RecipeLockState[this.recipeClass.LockState]}.`),null)}))}disposeAction(){}getInitialValue(x,A){return null}}RecipeClassUnlockRecipeAction.actionName="RecipeClassUnlockRecipeAction",RecipeClassUnlockRecipeAction.propertyList={recipeClassName:{type:String},actionResultId:{type:String}},A.RecipeClassUnlockRecipeAction=RecipeClassUnlockRecipeAction,x.Triggers.Class.processActionMetadata(RecipeClassUnlockRecipeAction,RecipeClassUnlockRecipeAction.propertyList,x.Actions.ActionBase)}(x.Actions||(x.Actions={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class RecipeSetClassAction extends x.Actions.Recipe.RecipeClassBaseAction{constructor(){super(),this.addPropertyList(RecipeSetClassAction,RecipeSetClassAction.propertyList)}execute(V,R,D){return __awaiter(this,void 0,void 0,(function*(){const V=yield this.getData(this.recipeClassName,D.sender.triggerSourcePropertyValue);if(!x.Utilities.isInDesignMode())return V?(this.recipeClass=yield x.AppServices.RecipeService._initRecipeClassForAction(V),this.recipeClass?A.Recipe._displayOutputResult(this.actionResultOutPutElement,"InfoLog",`Recipe class ${this.recipeClass.Name} set as default.`):A.Recipe._displayOutputResult(this.actionResultOutPutElement,"ErrorLog",`Recipe class ${V} is not valid.`)):A.Recipe._displayOutputResult(this.actionResultOutPutElement,"ErrorLog",`Recipe class name '${V}' is not valid.`),null}))}disposeAction(){}getInitialValue(x,A){return null}}RecipeSetClassAction.actionName="RecipeSetClassAction",RecipeSetClassAction.propertyList={recipeClassName:{type:String},actionResultId:{type:String}},A.RecipeSetClassAction=RecipeSetClassAction,x.Triggers.Class.processActionMetadata(RecipeSetClassAction,RecipeSetClassAction.propertyList,x.Actions.ActionBase)}(x.Actions||(x.Actions={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class TrendChartBackwardAction extends A.ActionBase{constructor(){super(),this.addPropertyList(TrendChartBackwardAction,TrendChartBackwardAction.propertyList)}execute(x,A,V){return __awaiter(this,void 0,void 0,(function*(){return this.conditionResult?(A&&A.winControl&&A.winControl.moveBackward(),this.setActionResult(!0,null)):this.setActionResult(!1,null),null}))}init(x,A){}disposeAction(){}getInitialValue(x,A){return null}}TrendChartBackwardAction.actionName="TrendChartBackwardAction",TrendChartBackwardAction.propertyList={targetSelector:{type:String}},A.TrendChartBackwardAction=TrendChartBackwardAction,x.Triggers.Class.processActionMetadata(TrendChartBackwardAction,TrendChartBackwardAction.propertyList,x.Actions.ActionBase)}(x.Actions||(x.Actions={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class TrendChartFastBackwardAction extends A.ActionBase{constructor(){super(),this.addPropertyList(TrendChartFastBackwardAction,TrendChartFastBackwardAction.propertyList)}execute(x,A,V){return __awaiter(this,void 0,void 0,(function*(){return this.conditionResult?(A&&A.winControl&&A.winControl.moveFastBackward(),this.setActionResult(!0,null)):this.setActionResult(!1,null),null}))}init(x,A){}disposeAction(){}getInitialValue(x,A){return null}}TrendChartFastBackwardAction.actionName="TrendChartFastBackwardAction",TrendChartFastBackwardAction.propertyList={targetSelector:{type:String}},A.TrendChartFastBackwardAction=TrendChartFastBackwardAction,x.Triggers.Class.processActionMetadata(TrendChartFastBackwardAction,TrendChartFastBackwardAction.propertyList,x.Actions.ActionBase)}(x.Actions||(x.Actions={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class TrendChartForwardAction extends A.ActionBase{constructor(){super(),this.addPropertyList(TrendChartForwardAction,TrendChartForwardAction.propertyList)}execute(x,A,V){return __awaiter(this,void 0,void 0,(function*(){return this.conditionResult?(A&&A.winControl&&A.winControl.moveForward(),this.setActionResult(!0,null)):this.setActionResult(!1,null),null}))}init(x,A){}disposeAction(){}getInitialValue(x,A){return null}}TrendChartForwardAction.actionName="TrendChartForwardAction",TrendChartForwardAction.propertyList={targetSelector:{type:String}},A.TrendChartForwardAction=TrendChartForwardAction,x.Triggers.Class.processActionMetadata(TrendChartForwardAction,TrendChartForwardAction.propertyList,x.Actions.ActionBase)}(x.Actions||(x.Actions={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class TrendChartFastForwardAction extends A.ActionBase{constructor(){super(),this.addPropertyList(TrendChartFastForwardAction,TrendChartFastForwardAction.propertyList)}execute(x,A,V){return __awaiter(this,void 0,void 0,(function*(){return this.conditionResult?(A&&A.winControl&&A.winControl.moveFastForward(),this.setActionResult(!0,null)):this.setActionResult(!1,null),null}))}init(x,A){}disposeAction(){}getInitialValue(x,A){return null}}TrendChartFastForwardAction.actionName="TrendChartFastForwardAction",TrendChartFastForwardAction.propertyList={targetSelector:{type:String}},A.TrendChartFastForwardAction=TrendChartFastForwardAction,x.Triggers.Class.processActionMetadata(TrendChartFastForwardAction,TrendChartFastForwardAction.propertyList,x.Actions.ActionBase)}(x.Actions||(x.Actions={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class TrendChartOfflineAction extends A.ActionBase{constructor(){super(),this.addPropertyList(TrendChartOfflineAction,TrendChartOfflineAction.propertyList)}execute(x,A,V){return __awaiter(this,void 0,void 0,(function*(){return this.conditionResult?(A&&A.winControl&&(A.winControl.trendOnline=!1),this.setActionResult(!0,null)):this.setActionResult(!1,null),null}))}init(x,A){}disposeAction(){}getInitialValue(x,A){return null}}TrendChartOfflineAction.actionName="TrendChartOfflineAction",TrendChartOfflineAction.propertyList={targetSelector:{type:String}},A.TrendChartOfflineAction=TrendChartOfflineAction,x.Triggers.Class.processActionMetadata(TrendChartOfflineAction,TrendChartOfflineAction.propertyList,x.Actions.ActionBase)}(x.Actions||(x.Actions={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class TrendChartOnlineAction extends A.ActionBase{constructor(){super(),this.addPropertyList(TrendChartOnlineAction,TrendChartOnlineAction.propertyList)}execute(x,A,V){return __awaiter(this,void 0,void 0,(function*(){return this.conditionResult?(A&&A.winControl&&(A.winControl.trendOnline=!0),this.setActionResult(!0,null)):this.setActionResult(!1,null),null}))}init(x,A){}disposeAction(){}getInitialValue(x,A){return null}}TrendChartOnlineAction.actionName="TrendChartOnlineAction",TrendChartOnlineAction.propertyList={targetSelector:{type:String}},A.TrendChartOnlineAction=TrendChartOnlineAction,x.Triggers.Class.processActionMetadata(TrendChartOnlineAction,TrendChartOnlineAction.propertyList,x.Actions.ActionBase)}(x.Actions||(x.Actions={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class TrendChartRefreshAction extends A.ActionBase{constructor(){super(),this.addPropertyList(TrendChartRefreshAction,TrendChartRefreshAction.propertyList)}execute(x,A,V){return __awaiter(this,void 0,void 0,(function*(){return this.conditionResult?(A&&A.winControl&&A.winControl.refresh(),this.setActionResult(!0,null)):this.setActionResult(!1,null),null}))}init(x,A){}disposeAction(){}getInitialValue(x,A){return null}}TrendChartRefreshAction.actionName="TrendChartRefreshAction",TrendChartRefreshAction.propertyList={targetSelector:{type:String}},A.TrendChartRefreshAction=TrendChartRefreshAction,x.Triggers.Class.processActionMetadata(TrendChartRefreshAction,TrendChartRefreshAction.propertyList,x.Actions.ActionBase)}(x.Actions||(x.Actions={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class TrendChartTimeSpanAction extends A.ActionBase{constructor(){super(),this.timeSpan=null,this.timeSpanIfTrue=null,this.timeSpanIfFalse=null,this.addPropertyList(TrendChartTimeSpanAction,TrendChartTimeSpanAction.propertyList)}execute(x,A,V){return __awaiter(this,void 0,void 0,(function*(){if(A){const x=A.winControl?A.winControl:null;let R=null;this.timeSpanIfTrue||this.timeSpanIfFalse?this.conditionResult?(R=yield this.getData(this.timeSpanIfTrue.toString(),V.sender.triggerSourcePropertyValue),this.setActionResult(!0,R)):(R=yield this.getData(this.timeSpanIfFalse.toString(),V.sender.triggerSourcePropertyValue),this.setActionResult(!1,R)):(R=yield this.getData(this.timeSpan.toString(),V.sender.triggerSourcePropertyValue),this.setActionResult(null,R)),null!==x&&"number"!=typeof R&&x.setTimespan(R)}return null}))}init(x,A){}disposeAction(){}getInitialValue(x,A){return null}}TrendChartTimeSpanAction.actionName="TrendChartTimeSpanAction",TrendChartTimeSpanAction.propertyList={targetSelector:{type:String},timeSpan:{type:String},timeSpanIfTrue:{type:String},timeSpanIfFalse:{type:String}},A.TrendChartTimeSpanAction=TrendChartTimeSpanAction,x.Triggers.Class.processActionMetadata(TrendChartTimeSpanAction,TrendChartTimeSpanAction.propertyList,x.Actions.ActionBase)}(x.Actions||(x.Actions={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class TrendChartToggleOnlineAction extends A.ActionBase{constructor(){super(),this.addPropertyList(TrendChartToggleOnlineAction,TrendChartToggleOnlineAction.propertyList)}execute(x,A,V){return __awaiter(this,void 0,void 0,(function*(){return this.conditionResult?(A&&A.winControl&&(A.winControl.trendOnline?A.winControl.trendOnline=!1:A.winControl.trendOnline=!0),this.setActionResult(!0,null)):this.setActionResult(!1,null),null}))}init(x,A){}disposeAction(){}getInitialValue(x,A){return null}}TrendChartToggleOnlineAction.actionName="TrendChartToggleOnlineAction",TrendChartToggleOnlineAction.propertyList={targetSelector:{type:String}},A.TrendChartToggleOnlineAction=TrendChartToggleOnlineAction,x.Triggers.Class.processActionMetadata(TrendChartToggleOnlineAction,TrendChartToggleOnlineAction.propertyList,x.Actions.ActionBase)}(x.Actions||(x.Actions={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class LoadPageAction extends A.ActionBase{constructor(){super(),this.page=null,this.pageLoaded=null,this.addPropertyList(LoadPageAction,LoadPageAction.propertyList)}execute(x,A,V){A.innerHTML="";const R=A,D=this,N=WinJS;return N&&N.UI&&N.UI.Fragments&&WinJS.UI.Fragments.render(D.page||V.sender.triggerSourcePropertyValue,A).then((function(){WinJS.UI.processAll(R),D.pageLoaded&&D.pageLoaded.forEach((function(x){}))}),(function(x){})),null}init(x,A){}disposeAction(){}getInitialValue(x,A){return null}}LoadPageAction.actionName="LoadPageAction",LoadPageAction.propertyList={targetSelector:{type:String},page:{type:String},pageLoaded:{type:Array,elementType:x.Actions.ActionBase}},A.LoadPageAction=LoadPageAction,x.Triggers.Class.processActionMetadata(LoadPageAction,LoadPageAction.propertyList,x.Actions.ActionBase)}(x.Actions||(x.Actions={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class AddClassAction extends A.ActionBase{constructor(){super(),this.className=null}execute(x,A,V){const R=A.className,D=this.className||V.sender.triggerSourcePropertyType;return-1===R.indexOf(D)&&(null===R||""===R?A.className=D:A.className+=" "+D),null}init(x,A){}disposeAction(){}getInitialValue(x,A){const V=x.className,R=this.className||A.sender.triggerSourcePropertyType;return!(!V||-1===V.indexOf(R))}}AddClassAction.propertyList={className:{type:String},targetSelector:{type:String}},A.AddClassAction=AddClassAction,x.Triggers.Class.processActionMetadata(AddClassAction,AddClassAction.propertyList,x.Actions.ActionBase)}(x.Actions||(x.Actions={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class RemoveChildrenAction extends A.ActionBase{constructor(){super(),this.addPropertyList(RemoveChildrenAction,RemoveChildrenAction.propertyList)}get parentElement(){return this.targetSelector}set parentElement(x){this.targetSelector=x}execute(x,A,V){return A.innerHTML="",null}init(x,A){}disposeAction(){}getInitialValue(x,A){return null}}RemoveChildrenAction.actionName="RemoveChildrenAction",RemoveChildrenAction.propertyList={parentElement:{type:String}},A.RemoveChildrenAction=RemoveChildrenAction,x.Triggers.Class.processActionMetadata(RemoveChildrenAction,RemoveChildrenAction.propertyList,x.Actions.ActionBase)}(x.Actions||(x.Actions={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class RemoveClassAction extends A.ActionBase{constructor(){super(),this.className=null,this.addPropertyList(RemoveClassAction,RemoveClassAction.propertyList)}execute(x,A,V){const R=A.className,D=this.className||V.sender.triggerSourcePropertyType,N=R.split(" "),U=[];for(let x=0;x<N.length;x++)N[x]!==D&&U.push(N[x]);let B="";return U.length>0&&(B=1===U.length?U[0]:U.join(" ")),A.className=B,null}init(x,A){}disposeAction(){}getInitialValue(x,A){return null}}RemoveClassAction.actionName="RemoveClassAction",RemoveClassAction.propertyList={className:{type:String},targetSelector:{type:String}},A.RemoveClassAction=RemoveClassAction,x.Triggers.Class.processActionMetadata(RemoveClassAction,RemoveClassAction.propertyList,x.Actions.ActionBase)}(x.Actions||(x.Actions={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class RemoveElementsAction extends A.ActionBase{constructor(){super(),this.addPropertyList(RemoveElementsAction,RemoveElementsAction.propertyList)}get elementsToRemove(){return this.targetSelector}set elementsToRemove(x){this.targetSelector=x}execute(x,A,V){return A.removeNode(!0),null}init(x,A){}disposeAction(){}getInitialValue(x,A){return null}}RemoveElementsAction.actionNAme="RemoveElementsAction",RemoveElementsAction.propertyList={elementsToRemove:{type:String}},A.RemoveElementsAction=RemoveElementsAction,x.Triggers.Class.processActionMetadata(RemoveElementsAction,RemoveElementsAction.propertyList,x.Actions.ActionBase)}(x.Actions||(x.Actions={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class SetHTMLAttributeAction extends A.ActionBase{constructor(){super(),this.attribute=null,this.attributeValue=null,this.addPropertyList(SetHTMLAttributeAction,SetHTMLAttributeAction.propertyList)}execute(x,A,V){return A.setAttribute(this.attribute||V.sender.triggerSourcePropertyType,this.attributeValue||V.sender.triggerSourcePropertyValue),null}init(x,A){}disposeAction(){}getInitialValue(x,A){return x.getAttribute(this.attribute||A.sender.triggerSourcePropertyType)}}SetHTMLAttributeAction.actionName="SetHTMLAttributeAction",SetHTMLAttributeAction.propertyList={targetSelector:{type:String},attribute:{type:String},attributeValue:{type:String}},A.SetHTMLAttributeAction=SetHTMLAttributeAction,x.Triggers.Class.processActionMetadata(SetHTMLAttributeAction,SetHTMLAttributeAction.propertyList,x.Actions.ActionBase)}(x.Actions||(x.Actions={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class SetStyleAction extends A.ActionBase{constructor(){super(),this.styleProperty=null,this.styleValue=null,this.addPropertyList(SetStyleAction,SetStyleAction.propertyList)}execute(x,A,V){return A.style[this.styleProperty||V.sender.triggerSourcePropertyType]=this.styleValue||V.sender.triggerSourcePropertyValue,null}init(x,A){}disposeAction(){}getInitialValue(x,A){return x.style[this.styleProperty||A.sender.triggerSourcePropertyType]}}SetStyleAction.actionName="SetStyleAction",SetStyleAction.propertyList={targetSelector:{type:String},styleProperty:{type:String},styleValue:{type:String}},A.SetStyleAction=SetStyleAction,x.Triggers.Class.processActionMetadata(SetStyleAction,SetStyleAction.propertyList,x.Actions.ActionBase)}(x.Actions||(x.Actions={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class ToggleStyleAction extends A.ActionBase{constructor(){super(),this.styleProperty=null,this.styleValueFirst=null,this.styleValueSecond=null,this.addPropertyList(ToggleStyleAction,ToggleStyleAction.propertyList)}execute(x,A,V){return A.style[this.styleProperty]===this.styleValueSecond?A.style[this.styleProperty]=this.styleValueFirst:A.style[this.styleProperty]===this.styleValueFirst?A.style[this.styleProperty]=this.styleValueSecond:A.style[this.styleProperty]=this.styleValueFirst,null}init(x,A){}disposeAction(){}getInitialValue(x,A){return x.style[this.styleProperty]===this.styleValueFirst}}ToggleStyleAction.actionName="ToggleStyleAction",ToggleStyleAction.propertyList={targetSelector:{type:String},styleProperty:{type:String},styleValueFirst:{type:String},styleValueSecond:{type:String}},A.ToggleStyleAction=ToggleStyleAction,x.Triggers.Class.processActionMetadata(ToggleStyleAction,ToggleStyleAction.propertyList,x.Actions.ActionBase)}(x.Actions||(x.Actions={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class ToggleClassAction extends A.ActionBase{constructor(){super(),this.className=null,this.addPropertyList(ToggleClassAction,ToggleClassAction.propertyList)}execute(x,A,V){const R=A.className,D=this.className||V.sender.triggerSourcePropertyType;return R&&-1!==R.indexOf(D)?A.className=A.className.replace(D,""):R?A.className+=" "+D:A.className=D,null}init(x,A){}disposeAction(){}getInitialValue(x,A){const V=x.className,R=this.className||A.sender.triggerSourcePropertyType;return!V||-1===V.indexOf(R)}}ToggleClassAction.actionName="ToggleClassAction",ToggleClassAction.propertyList={className:{type:String},targetSelector:{type:String}},A.ToggleClassAction=ToggleClassAction,x.Triggers.Class.processActionMetadata(ToggleClassAction,ToggleClassAction.propertyList,x.Actions.ActionBase)}(x.Actions||(x.Actions={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class NavigateAction extends A.ActionBase{constructor(){super(),this.pageName=null,this.viewName=null,this.regionElementId=null,this.pageOptions={},this.targetProperty="pageName"}execute(A,V,R){const D=this.pageName||R.sender.triggerSourcePropertyValue,N=this.viewName||R.sender.triggerSourcePropertyValue,U=x.Utilities.csvToArray(this.regionElementId||R.sender.triggerSourcePropertyType),B=this.pageOptions;this.targetProperty;if(U.length>0&&N)for(let A=0;A<U.length;A++){const V=document.getElementById(x.Utilities.removeHashFromId(U[A]));V&&V.winControl&&(V.winControl.regionId=A,B&&(V.winControl.pageOptions=B),this.targetProperty?V.winControl[this.targetProperty]=N:V.winControl.viewName=N)}else if(D){WinJS.Promise.as(x.AppServices.NavigationService.navigate(D,B)).then(()=>{},()=>{})}return null}init(x,A){}disposeAction(){}getInitialValue(x,A){return null}}NavigateAction.actionName="NavigateAction",NavigateAction.propertyList={viewName:{type:String},pageName:{type:String},regionElementId:{type:String},pageOptions:{type:Object},targetProperty:{type:String}},A.NavigateAction=NavigateAction,x.Triggers.Class.processActionMetadata(NavigateAction,NavigateAction.propertyList,x.Actions.ActionBase)}(x.Actions||(x.Actions={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class DelayAction extends A.ActionBase{constructor(){super(),this.ticks=3e3,this.addPropertyList(DelayAction,DelayAction.propertyList)}execute(x,A,V){return __awaiter(this,void 0,void 0,(function*(){return new Promise((x,A)=>{setInterval((function(A){x("TIMEOUT")}),this.ticks)})}))}init(x,A){}disposeAction(){}getInitialValue(x,A){return null}}DelayAction.actionName="DelayAction",DelayAction.propertyList={ticks:{type:Number}},A.DelayAction=DelayAction,x.Triggers.Class.processActionMetadata(DelayAction,DelayAction.propertyList,x.Actions.ActionBase)}(x.Actions||(x.Actions={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class NavigateToPageAction extends A.ActionBase{constructor(){super(),this.pageOptions={},this.pageNameIfTrue=null,this.pageNameIfFalse=null,this.showLoadingSymbol=!1}execute(x,A,V){const R=this.pageNameIfTrue,D=this.pageNameIfFalse,N=this.pageOptions;return this.conditionResult?R&&this.setPage(R,N):D&&this.setPage(D,N),null}setPage(A,V){WinJS.Promise.as(x.AppServices.NavigationService.navigate(A,V,this.showLoadingSymbol)).then(()=>{},()=>{})}init(x,A){}disposeAction(){}getInitialValue(x,A){return null}}NavigateToPageAction.actionName="NavigateAction",NavigateToPageAction.propertyList={pageOptions:{type:Object},pageNameIfTrue:{type:String},pageNameIfFalse:{type:String},showLoadingSymbol:{type:Boolean}},A.NavigateToPageAction=NavigateToPageAction,x.Triggers.Class.processActionMetadata(NavigateToPageAction,NavigateToPageAction.propertyList,x.Actions.ActionBase)}(x.Actions||(x.Actions={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class SetViewAction extends A.ActionBase{constructor(){super(),this.pageOptions={},this.regionElementId=null,this.viewNameIfTrue=null,this.viewNameIfFalse=null,this.showLoadingSymbol=!1}execute(A,V,R){const D=this.viewNameIfTrue,N=this.viewNameIfFalse,U=V,B=x.Utilities.csvToArray(this.regionElementId||R.sender.triggerSourcePropertyType),F=this.pageOptions;return this.conditionResult?D&&this.setView(B,D,F,U):N&&this.setView(B,N,F,U),null}setView(A,V,R,D){if(A.length>0&&V)for(let N=0;N<A.length;N++){const U=document.getElementById(x.Utilities.removeHashFromId(A[N]));U&&U.winControl?(U.winControl.regionId=N,R&&(U.winControl.pageOptions=R),this.showLoadingSymbol&&(U.winControl.showLoadingSymbol=this.showLoadingSymbol),U.winControl.viewName=V):"self"==A[N]&&"Region"===D.__VWELEMENT__&&(R&&(D.winControl.pageOptions=R),this.showLoadingSymbol&&(D.winControl.showLoadingSymbol=this.showLoadingSymbol),D.winControl.viewName=V)}}init(x,A){}disposeAction(){}getInitialValue(x,A){return null}}SetViewAction.actionName="SetViewAction",SetViewAction.propertyList={pageOptions:{type:Object},regionElementId:{type:String},viewNameIfTrue:{type:String},viewNameIfFalse:{type:String},showLoadingSymbol:{type:Boolean}},A.SetViewAction=SetViewAction,x.Triggers.Class.processActionMetadata(SetViewAction,SetViewAction.propertyList,x.Actions.ActionBase)}(x.Actions||(x.Actions={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class NavigateOverPageHistoryAction extends A.ActionBase{constructor(){super(),this.pageOptions={},this.showLoadingSymbol=!1,this.goForward=!1,this.distance=1,this._targetElement=null}execute(A,V,R){return this.goForward?x.AppServices.NavigationService.forward(this.distance):x.AppServices.NavigationService.back(this.distance),null}_handleButtons(){this._targetElement&&this._targetElement.winControl&&(this.goForward&&(x.AppServices.NavigationService.canGoForward?this._targetElement.winControl.disabled=!1:this._targetElement.winControl.disabled=!0),this.goForward||(x.AppServices.NavigationService.canGoBack?this._targetElement.winControl.disabled=!1:this._targetElement.winControl.disabled=!0))}init(A,V){this._targetElement=A,x.AppServices.NavigationService.addEventListener("navigated",A=>{A.detail.location!==x.Application.Settings.UI.LoadingPageName&&this._handleButtons()})}disposeAction(){}getInitialValue(x,A){return null}}NavigateOverPageHistoryAction.actionName="NavigateAction",NavigateOverPageHistoryAction.propertyList={showLoadingSymbol:{type:Boolean},goForward:{type:Boolean},distance:{type:Number}},A.NavigateOverPageHistoryAction=NavigateOverPageHistoryAction,x.Triggers.Class.processActionMetadata(NavigateOverPageHistoryAction,NavigateOverPageHistoryAction.propertyList,x.Actions.ActionBase)}(x.Actions||(x.Actions={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";const V={},R=[];function InititalizeTriggerBase(A,V){"string"!=typeof V&&(V=JSON.stringify(V));const D=x.Triggers.Util.parseJson(V);let N=null;if(D){N=D.triggers;for(let V=0;V<N.length;V++){const R=N[V];"function"==typeof R._inititalizeBase?R._inititalizeBase(A):x.Application.ErrorLog.log("VisiWin.Trigger problem with trigger in "+this.__VWCONTROL__+" control.")}R.push(A)}return N}function UnintitalizeTriggerBase(A){if(R){const V=R.indexOf(A);if(V>-1){const D=x.Triggers.getTriggerInstances(A).slice();D&&D.forEach((function(x){x._unititalizeBase(A)})),R.splice(V,1)}}}function DisposeTriggerBase(A){if(R){const V=R.indexOf(A);if(V>-1){const D=x.Triggers.getTriggerInstances(A).slice();D&&D.forEach((function(x){x._disposeTriggerBase(A)}));R.splice(V,1)[0]=null}}}A.InititalizeTriggerBase=InititalizeTriggerBase,A.attach=function attach(x,A){return InititalizeTriggerBase(x,A)},A.UnintitalizeTriggerBase=UnintitalizeTriggerBase,A.detach=function detach(x){UnintitalizeTriggerBase(x)},A.DisposeTriggerBase=DisposeTriggerBase,A.dispose=function dispose(x){DisposeTriggerBase(x)},A.getTriggerInstances=function getTriggerInstances(x){if(V&&x)return x.winControl?V[x.winControl.controlId]:V[x.controlId]},A.addTriggerInstance=function addTriggerInstance(A,R){if(A.winControl){(x.Triggers.getTriggerInstances(A)||(V[A.winControl.controlId]=[])).push(R)}else{(x.Triggers.getTriggerInstances(A)||(V[A.controlId]=[])).push(R)}}}(x.Triggers||(x.Triggers={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class TriggerBase{constructor(A,V){this.triggerName=null,this.triggerElements=null,this.triggeredActions=null,this._attachedElementsMap=null,this._attachedElementsCount=0,this.propertyList=[],this.addPropertyList(TriggerBase,TriggerBase.tiggerBasePropertyList),this._attachedElementsCount=0,this._attachedElementsMap={},A&&x.Triggers.Util.parseJson(A,this),V&&this._inititalizeBase(V)}addPropertyList(x,A){let V,R,D;for(R in this.triggerName=x.triggerName,A)for(D in V=A[R],V=A[R],this.propertyList[R]={},V)this.propertyList[R][D]=V[D]}executeActionsAsync(x,A,V){return __awaiter(this,void 0,void 0,(function*(){if(V.resultAction={succeed:!0,reason:null},V&&V.sender&&V.event&&V.event.target){const x=V.sender,A=V.event.target;this.setSourceProperties(x,A)}const R=x,D=A,N=V;if(this.triggeredActions)for(const U in this.triggeredActions){const B=this.triggeredActions[U];x=R,A=D,V=N,yield B._executeAllAsync(x,A,V)}}))}disposeActions(){if(this.triggeredActions)for(const x in this.triggeredActions){const A=this.triggeredActions[x];A._disposeActionBase&&A._disposeActionBase(),A.disposeAction&&A.disposeAction(),A.dispose&&A.dispose()}}getAttachedElements(){const x=[];for(const A in this._attachedElementsMap)x.push(this._attachedElementsMap[A].element);return x}getAttachedElementsCount(){return this._attachedElementsCount}getAttachedElementInfo(x){return x.winControl?x&&this._attachedElementsMap[x.winControl.controlId].element||null:x&&this._attachedElementsMap[x.controlId].element||null}getInitialValueActions(x,A){if(A&&A.sender&&A.event&&A.event.target){const x=A.sender,V=A.event.target;this.setSourceProperties(x,V)}if(this.triggeredActions){for(let V=0;V<this.triggeredActions.length;V++)this.triggeredActions[V]._getInitialValueInit(x,A);if(this.triggeredActions.length>0)if(x.length>0){if(this.triggeredActions[0].getInitialValue)return this.triggeredActions[0].getInitialValue(x[0],A)}else if(this.triggeredActions[0].getInitialValue)return this.triggeredActions[0].getInitialValue(null,A)}return null}isElementAttached(x){return x.winControl?!!this._attachedElementsMap[x.winControl.controlId]:!!this._attachedElementsMap[x.controlId]}adapter(x,A){return x&&x[A]?x[A]:A}setSourceProperties(x,A){let V=null;if(x.triggerSourcePropertyValue=null,x.sourcePropertyValueName&&void 0!==A[x.sourcePropertyValueName]){let R=A[x.sourcePropertyValueName];V=R,void 0!==x.sourcePropertyValueAdapter&&(R=this.adapter(x.sourcePropertyValueAdapter,R)),x.triggerSourcePropertyValue=R}if(x.sourcePropertyTypeName&&void 0!==A[x.sourcePropertyTypeName]){const V=A[x.sourcePropertyTypeName];x.triggerSourcePropertyType=V}return V}_disposeTriggerBase(A){if(A){let V;const R=x.Triggers.getTriggerInstances(A);if(R){const x=R.indexOf(this);if(x>-1){R[x].disposeTrigger&&R[x].disposeTrigger(A),R[x].dispose&&R[x].dispose(A),R[x].disposeActions&&R[x].disposeActions();R.splice(x,1)[0]=null}}V=A.winControl?this._attachedElementsMap[A.winControl.controlId]:this._attachedElementsMap[A.controlId],V&&(this.onElementDetached&&this.onElementDetached(A),A.winControl?delete this._attachedElementsMap[A.winControl.controlId]:delete this._attachedElementsMap[A.controlId],this._attachedElementsCount--)}}_inititalizeBase(A){if(A&&!this.isElementAttached(A)){const V={element:A};A.winControl?this._attachedElementsMap[A.winControl.controlId]=V:this._attachedElementsMap[A.controlId]=V,this._attachedElementsCount++,x.Triggers.addTriggerInstance(A,this),this.onElementAttached&&this.onElementAttached(A)}}_unititalizeBase(A){if(A){const V=x.Triggers.getTriggerInstances(A);let R;if(V){const x=V.indexOf(this);if(x>-1){V.splice(x,1)[0].disposeTrigger(A)}}R=A.winControl?this._attachedElementsMap[A.winControl.ontrolId]:this._attachedElementsMap[A.controlId],R&&(A.winControl?delete this._attachedElementsMap[A.winControl.controlId]:delete this._attachedElementsMap[A.controlId],this._attachedElementsCount--)}}executeActions(x,A,V){return __awaiter(this,void 0,void 0,(function*(){this.executeActionsAsync(x,A,V)}))}executeDispose(){this.disposeActions()}onElementAttached(x){}onElementDetached(x){}disposeTrigger(x){}}TriggerBase.tiggerBasePropertyList={triggerName:{type:String}},TriggerBase.triggerName="TriggerBase",A.TriggerBase=TriggerBase}(x.Triggers||(x.Triggers={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class SelectorSourcedTrigger extends A.TriggerBase{constructor(x,A){super(x,A),this.triggerDataName=null,this.triggerDataValue=null,this.triggerSourcePropertyValue=null,this.initialProperty=null,this._sources=null,this._sourceSelector="self",this.addPropertyList(SelectorSourcedTrigger,SelectorSourcedTrigger.selectorSourcedPropertyList),this._sources={}}get sourceSelector(){return this._sourceSelector}set sourceSelector(x){this._sourceSelector=x||"",this._refreshSources()}onElementAttached(x){x&&(""===this._sourceSelector||null===this._sourceSelector||"self"===this._sourceSelector.toLowerCase()?(this._initialSources([x]),this._addSource(x)):this._refreshSources())}onElementDetached(x){if(x)if(""===this._sourceSelector||null===this._sourceSelector||"self"===this._sourceSelector.toLowerCase()){this.getSourceElementInfo(x)&&(this.onSourceElementRemoved(x),x.controlId&&delete this._sources[x.controlId],x.winControl.controlId&&delete this._sources[x.winControl.controlId])}else{const x=this.getAttachedElementsCount()-1;this._refreshSources(x)}}onSourceElementRemoved(x){}onSourceElementAdded(x){}getSourceElementInfo(x){return this._sources[x.controlId]?this._sources[x.controlId]:this._sources[x.winControl.controlId]?this._sources[x.winControl.controlId]:null}getSourceElements(){const x=[];for(const A in this._sources)x.push(this._sources[A].element);return x}getTargetElementsForEventSourceElement(x){return this._initialControlEvent(x),this.isElementAttached(x)?[x]:this.getAttachedElements()}_initialControlEvent(A){const V=this.eventName;if(V&&A&&A.winControl){const R=this._getEventItem(A,V);if(R)if(x.Utilities.isInDesignMode()||(this.eventName=R.name),R.triggerDataValue)this.triggerDataValue=R.triggerDataValue;else if(R.triggerDataName){this.triggerDataName=R.triggerDataName;const x=R.triggerDataName;this.triggerDataValue=A[x]}}}getInitialValueForActions(x,A){if(x){const V=this.getTargetElementsForEventSourceElement(x),R={event:A,sender:this};return this.getInitialValueActions(V,R)}return null}_initialSources(x){let A=null;for(let V=0;V<x.length;V++)x[V]&&(x[V].winControl?(A=this.getInitialValueForActions(x[V],"event"),null!==A&&this.initialProperty&&(x[V].winControl[this.initialProperty]=A)):(A=this.getInitialValueForActions(x[V],"event"),null!==A&&this.initialProperty&&(x[V][this.initialProperty]=A)))}_refreshSources(A){let V=null;this._removeAllSources(),void 0===A&&(A=this.getAttachedElementsCount()),this.triggerElements=this.getAttachedElements(),A>0&&(""!==this._sourceSelector&&null!==this._sourceSelector&&"self"!==this._sourceSelector.toLowerCase()?"&"===this._sourceSelector[0]?(V=x.AppServices[this._sourceSelector.substring(1)],this._addAllSources(V)):(V=document.querySelectorAll(this._sourceSelector),this._addAllSources(V)):(V=this.getAttachedElements(),this._addAllSources(V)))}_removeAllSources(){for(const x in this._sources){const A=this._sources[x];this.onSourceElementRemoved(A.element)}this._sources={}}_addAllSources(x){this._initialSources(x);for(let A=0;A<x.length;A++)this._addSource(x[A])}_addSource(x){const A={element:x};x.controlId&&(this._sources[x.controlId]=A),x.winControl.controlId&&(this._sources[x.winControl.controlId]=A),this.onSourceElementAdded(x)}_getEventItem(x,A){var V=A.toLowerCase();if(0==V.indexOf("on")&&(V=V.substr(2)),x.winControl.optionsList)for(var R in x.winControl.eventList)if(R.toLowerCase()===V)return x.winControl.eventList[R].name=R,x.winControl.eventList[R];return null}}SelectorSourcedTrigger.triggerName="SelectorSourcedTrigger",SelectorSourcedTrigger.selectorSourcedPropertyList={sourceSelector:{type:String},sourcePropertyValue:{type:String},triggerDataName:{type:String},triggerDataValue:{type:String},initialProperty:{type:String}},A.SelectorSourcedTrigger=SelectorSourcedTrigger,x.Triggers.Class.processTriggerMetadata(SelectorSourcedTrigger,SelectorSourcedTrigger.selectorSourcedPropertyList,x.Triggers.TriggerBase)}(x.Triggers||(x.Triggers={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class ControlEventTrigger extends A.SelectorSourcedTrigger{constructor(A,V){super(A,V),this._eventDelay=null,this._eventHandler=(A,V,R)=>{this.triggerSourcePropertyValue=this._element.winControl[this.triggerDataName],this.preloadComprise(A.target._currentPage)&&"login"!==x.Application.show.show?x.AppServices.NavigationService.startPageInit?x.AppServices.NavigationService.preloadReadyFlag&&this._executeControlEventActions(A.currentTarget,A):"initialized"==this.eventName?this._eventDelay={currentPage:A.target._currentPage,eventName:this.eventName,event_currentTarget:A.currentTarget,event:A,context:this}:("attached"==this.eventName||this.eventName,x.AppServices.NavigationService.startPageInit&&this._executeControlEventActions(A.currentTarget,A)):this._executeControlEventActions(A.currentTarget,A)},this._eventName=null,this.addPropertyList(ControlEventTrigger,ControlEventTrigger.propertyList)}preloadComprise(A){try{if(A&&x.Application.Settings.UI.Preloading.Enabled){let V=x.Application.Settings.UI.Preloading.Main.Source;if(Array.isArray(V))for(let x=0;x<V.length;x++)if(V[x].FileName===A)return!0;V=x.Application.Settings.UI.Preloading.Sub;for(let x=0;x<V.length;x++){let R=V[x].Target;for(let x=0;x<R.length;x++){let V=R[x].FileName;for(let x=0;x<V.length;x++)if(V[x]===A)return!0}}}return!1}catch(x){return!1}}get eventName(){return this._eventName}set eventName(x){x.length>2&&"o"===x[0].toLowerCase()&&"n"===x[1].toLowerCase()&&(x=(x=x.substr(2)).toLowerCase());const A=x||"";if((this._eventName||"")!==A){const x=this.getSourceElements();for(let A=0;A<x.length;A++)this.onSourceElementRemoved(x[A]);this._eventName=A;for(let A=0;A<x.length;A++)this.onSourceElementAdded(x[A])}}onSourceElementAdded(A){const V=this.getSourceElementInfo(A);this._element=A,V._eventListener=this._eventHandler,""!==this.eventName&&(x.Application.Settings.UI.Preloading.Enabled&&"initialized"==this.eventName&&"login"!==x.Application.show.show&&(x.AppServices.NavigationService.startPageInit||A.winControl.addEventListener("attached",A=>{if(x.AppServices.NavigationService.startPageInit&&this._eventDelay){let x=this._eventDelay;"initialized"===this._eventDelay.eventName&&(this._executeControlEventActions.call(x.context,x.event_currentTarget,x.event),this._eventDelay=null)}})),A&&A.winControl&&A.winControl.addEventListener(this.eventName,V._eventListener,!1))}onSourceElementRemoved(x){if(x){const A=this.getSourceElementInfo(x);A&&A._eventListener&&(""!==this.eventName&&x&&x.winControl&&x.winControl.removeEventListener(this.eventName,A._eventListener),A._eventListener=null)}}disposeTrigger(x){this.disposeActions(),this.onSourceElementRemoved(x)}_executeControlEventActions(x,A,V,R){if(x){const V=this.getTargetElementsForEventSourceElement(x);let R=null;R=!x||!this.triggerDataName||x[this.triggerDataName];const D={event:A,sender:this,sourceElement:x,value:R};this.executeActionsAsync(D.value,V,D)}}}ControlEventTrigger.triggerName="ControlEventTrigger",ControlEventTrigger.propertyList={eventName:{type:String},triggeredActions:{type:Array,elementType:x.Actions.ActionBase}},A.ControlEventTrigger=ControlEventTrigger,x.Triggers.Class.processTriggerMetadata(ControlEventTrigger,ControlEventTrigger.propertyList,A.SelectorSourcedTrigger)}(x.Triggers||(x.Triggers={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class ControlPropertyTrigger extends A.SelectorSourcedTrigger{constructor(x,A){super(x,A),this._sourceInfo=null,this._onNotifyPropertyChanged=x=>{x.detail.changeName===this.propertyName&&this._executeControlPropertyEventActions(this._sourceInfo.element,x,null,null)},this._propertyName=null,this.addPropertyList(ControlPropertyTrigger,ControlPropertyTrigger.propertyList)}get propertyName(){return this._propertyName}set propertyName(x){const A=x||"";if((this._propertyName||"")!==A){const x=this.getSourceElements();for(let A=0;A<x.length;A++)this.onSourceElementRemoved(x[A]);this._propertyName=A;for(let A=0;A<x.length;A++)this.onSourceElementAdded(x[A])}}onSourceElementAdded(x){this._sourceInfo=this.getSourceElementInfo(x),this._sourceInfo._eventListener=this._onNotifyPropertyChanged,""!==this.propertyName&&x&&x.winControl&&x.winControl.addEventListener("notifyPropertyChanged",this._sourceInfo._eventListener,!1)}onSourceElementRemoved(x){x&&(this._sourceInfo=this.getSourceElementInfo(x),this._sourceInfo&&this._sourceInfo._eventListener&&(""!==this.propertyName&&x&&x.winControl&&x.winControl.removeEventListener("notyfiPropertyChange",this._sourceInfo._eventListener),this._sourceInfo._eventListener=null))}disposeTrigger(x){this.disposeActions(),this.onSourceElementRemoved(x)}_executeControlPropertyEventActions(x,A,V,R){if(x){const V=this.getTargetElementsForEventSourceElement(x),R={event:A,sender:this,sourceElement:x,value:A.detail.newValue};this.executeActionsAsync(R.value,V,R)}}}ControlPropertyTrigger.triggerName="ControlPropertyTrigger",ControlPropertyTrigger.propertyList={propertyName:{type:String},triggeredActions:{type:Array,elementType:x.Actions.ActionBase}},A.ControlPropertyTrigger=ControlPropertyTrigger,x.Triggers.Class.processTriggerMetadata(ControlPropertyTrigger,ControlPropertyTrigger.propertyList,A.SelectorSourcedTrigger)}(x.Triggers||(x.Triggers={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class VariableTrigger extends A.SelectorSourcedTrigger{constructor(x,A){super(x,A),this._vwVariable=null,this._sourceInfo=null,this._boundAttach=this._attachVariable.bind(this),this._boundDetach=this._detachVariable.bind(this),this._variableChangeHandler=x=>{void 0!==x[this._variablePropertyName]&&(this.triggerSourcePropertyValue=x[this.variablePropertyName],this._executeControlEventActions(this._sourceInfo.element,x))},this._variableName=null,this._variablePropertyName="Value",this.addPropertyList(VariableTrigger,VariableTrigger.propertyList)}get variableName(){return this._variableName}set variableName(x){this._variableName=x}get variablePropertyName(){return this._variablePropertyName}set variablePropertyName(x){this._variablePropertyName=x}onSourceElementAdded(A){""===this.variableName||x.Utilities.isInDesignMode()||(this._vwVariable=x.AppServices.VariableService.getVariable(this.variableName)),this._sourceInfo=this.getSourceElementInfo(A),this._sourceInfo._eventListener=this._variableChangeHandler,A.winControl.addEventListener("attached",this._boundAttach),A.winControl.addEventListener("detached",this._boundDetach)}onSourceElementRemoved(x){""!==this.variableName&&this._vwVariable&&(this._detachVariable(),this._vwVariable.Change.remove(),this._vwVariable=null,this.variableName=""),x&&this._sourceInfo&&this._sourceInfo._eventListener&&(this._sourceInfo._eventListener=null)}disposeTrigger(x){this.disposeActions(),this.onSourceElementRemoved(x)}_attachVariable(){return __awaiter(this,void 0,void 0,(function*(){if(this._vwVariable){this._vwVariable.Change.add(this._sourceInfo._eventListener.bind(this),this);try{(yield this._vwVariable.AttachAsync())||x.System.Diagnostics.Logger.WarnLog.log(`Variable could not be attached inside ${this.triggerName}:${this.variableName}.`)}catch(A){x.System.Diagnostics.Logger.ErrorLog.log(`Exception variable attach ${this.triggerName}:${this.variableName}.`)}}}))}_detachVariable(){this._vwVariable&&(this._vwVariable.Change.remove(this._sourceInfo._eventListener.bind(this),this),this._vwVariable.Detach())}_executeControlEventActions(x,A){if(x){const V=this.getTargetElementsForEventSourceElement(x),R={event:A,sender:this,sourceElement:x,value:A.Value};this.executeActionsAsync(R.value,V,R)}}}VariableTrigger.triggerName="VariableTrigger",VariableTrigger.propertyList={variableName:{type:String},variablePropertyName:{type:String}},A.VariableTrigger=VariableTrigger,x.Triggers.Class.processTriggerMetadata(VariableTrigger,VariableTrigger.propertyList,A.SelectorSourcedTrigger)}(x.Triggers||(x.Triggers={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class EventTrigger extends A.SelectorSourcedTrigger{constructor(x,A){super(x,A),this._eventName=null,this.addPropertyList(EventTrigger,EventTrigger.propertyList)}get eventName(){return this._eventName}set eventName(x){const A=x||"";if((this._eventName||"")!==A){const x=this.getSourceElements();for(let A=0;A<x.length;A++)this.onSourceElementRemoved(x[A]);this._eventName=A;for(let A=0;A<x.length;A++)this.onSourceElementAdded(x[A])}}onSourceElementAdded(A){if("load"===this.eventName)return void this._executeControlEventActions(A,null);let V=null;x.Utilities.isDomEvents(this.eventName)?(V=this.getSourceElementInfo(A),V._eventListener=x=>{this._executeControlEventActions(x.currentTarget,x)},""!==this.eventName&&A.addEventListener(this.eventName,V._eventListener,!1)):(V=this.getSourceElementInfo(A),V._eventListener=(x,A,V)=>{this._executeControlEventActions(x.currentTarget,x)},""!==this.eventName&&A&&A.winControl&&A.winControl.addEventListener(this.eventName,V._eventListener,!1))}onSourceElementRemoved(A){if(x.Utilities.isDomEvents(this.eventName)){if(A){const V=this.getSourceElementInfo(A);V&&V._eventListener&&(""!==this.eventName&&x.Utilities.removeEventListener(A,this.eventName,V._eventListener),V._eventListener=null)}}else if(A){const x=this.getSourceElementInfo(A);x&&x._eventListener&&(""!==this.eventName&&A&&A.winControl&&A.winControl.removeEventListener(this.eventName,x._eventListener),x._eventListener=null)}}_executeControlEventActions(x,A,V,R){if(x){const V=this.getTargetElementsForEventSourceElement(x),R={event:A,sender:this,sourceElement:x,value:null};this.executeActionsAsync(R.value,V,R)}}disposeTrigger(x){this.disposeActions(),this.onSourceElementRemoved(x)}}EventTrigger.triggerName="EventTrigger",EventTrigger.propertyList={eventName:{type:String},triggeredActions:{type:Array,elementType:x.Actions.ActionBase}},A.EventTrigger=EventTrigger,x.Triggers.Class.processTriggerMetadata(EventTrigger,EventTrigger.propertyList,A.SelectorSourcedTrigger)}(x.Triggers||(x.Triggers={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class DomEventTrigger extends A.SelectorSourcedTrigger{constructor(x,A){super(x,A),this._eventName=null,this.addPropertyList(DomEventTrigger,DomEventTrigger.propertyList)}get actionName(){return this._eventName}set eventName(x){const A=x||"";if((this._eventName||"")!==A){const x=this.getSourceElements();for(let A=0;A<x.length;A++)this.onSourceElementRemoved(x[A]);this._eventName=A;for(let A=0;A<x.length;A++)this.onSourceElementAdded(x[A])}}onSourceElementAdded(A){if("load"===this.eventName)return void this._executeControlEventActions(A,null,null);const V=this.getSourceElementInfo(A);V._eventListener=x=>{this._executeControlEventActions(x.currentTarget,x,null)},""!==this.eventName&&x.Utilities.addEventListener(A,this.eventName,V._eventListener,!1)}onSourceElementRemoved(A){if(A){const V=this.getSourceElementInfo(A);V&&V._eventListener&&(""!==this.eventName&&x.Utilities.removeEventListener(A,this.eventName,V._eventListener),V._eventListener=null)}}_executeControlEventActions(x,A,V){if(x){const R=this.getTargetElementsForEventSourceElement(x),D={event:A,sender:this,sourceElement:x,value:V};this.executeActionsAsync(D.value,R,D)}}disposeTrigger(x){this.disposeActions(),this.onSourceElementRemoved(x)}}DomEventTrigger.triggerName="DomEventTrigger",DomEventTrigger.propertyList={actionName:{type:String},triggeredActions:{type:Array,elementType:x.Actions.ActionBase}},A.DomEventTrigger=DomEventTrigger,x.Triggers.Class.processTriggerMetadata(DomEventTrigger,DomEventTrigger.propertyList,A.SelectorSourcedTrigger)}(x.Triggers||(x.Triggers={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class TimerTrigger extends A.TriggerBase{constructor(x,A){super(x,A),this.totalTicks=10,this.millisecondsPerTick=1e3,this.addPropertyList(TimerTrigger,TimerTrigger.propertyList)}onElementAttached(x){const A=this.getAttachedElementInfo(x),V={event:this,sender:x.winControl};A._count=0,A["_timerId "]=window.setInterval(()=>{this._tickHandler(x,V)},this.millisecondsPerTick)}onElementDetached(x){const A=this.getAttachedElementInfo(x);window.clearInterval(A["_timerId "])}_tickHandler(A,V){const R=this.getAttachedElementInfo(A);if(R)if(R._count!==Number.POSITIVE_INFINITY&&R._count++>=this.totalTicks)x.Triggers.UnintitalizeTriggerBase(A);else{const x={event:this,sender:A.winControl,value:null};this.executeActionsAsync(x.value,[A],x)}}disposeTrigger(x){this.disposeActions(),this.onElementDetached(x)}}TimerTrigger.triggerName="TimerTrigger",TimerTrigger.propertyList={totalTicks:{type:Number},millisecondsPerTick:{type:Number},triggeredActions:{type:Array,elementType:x.Actions.ActionBase}},A.TimerTrigger=TimerTrigger,x.Triggers.Class.processTriggerMetadata(TimerTrigger,TimerTrigger.propertyList,A.SelectorSourcedTrigger)}(x.Triggers||(x.Triggers={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class RequestAnimationFrameTrigger extends A.TriggerBase{constructor(x,A){super(x,A),this.addPropertyList(RequestAnimationFrameTrigger,RequestAnimationFrameTrigger.propertyList)}onElementAttached(x){if(x){const A=this.getAttachedElementInfo(x);A._callback=()=>{this._frameCallBack(x)},A._requestId=window.requestAnimationFrame(A._callback)}}onElementDetached(x){if(x){const A=this.getAttachedElementInfo(x);window.cancelAnimationFrame(A._requestId),A._callback=null}}_frameCallBack(x){const A=this.getAttachedElementInfo(x);if(A){const V={event:event,sender:this,value:null};this.executeActionsAsync(V.value,[x],V),A._requestId=window.requestAnimationFrame(A._callback)}}}RequestAnimationFrameTrigger.triggerName="RequestAnimationFrameTrigger",RequestAnimationFrameTrigger.propertyList={triggeredActions:{type:Array,elementType:x.Actions.ActionBase},booleanTriggeredActionsTrue:{type:Array,elementType:x.Actions.ActionBase},booleanTriggeredActionsFalse:{type:Array,elementType:x.Actions.ActionBase}},A.RequestAnimationFrameTrigger=RequestAnimationFrameTrigger,x.Triggers.Class.processTriggerMetadata(RequestAnimationFrameTrigger,RequestAnimationFrameTrigger.propertyList,x.Triggers.TriggerBase)}(x.Triggers||(x.Triggers={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class InitialTrigger extends A.SelectorSourcedTrigger{constructor(x,A){super(x,A),this.addPropertyList(InitialTrigger,InitialTrigger.propertyList)}onSourceElementAdded(x){this._executeControlEventActions(x,null)}onSourceElementRemoved(x){if(x){const A=this.getSourceElementInfo(x);A&&A._eventListener&&(A._eventListener=null)}}_executeControlEventActions(x,A,V,R){if(x){const V=this.getTargetElementsForEventSourceElement(x),R={event:A,sender:this,sourceElement:x,value:"initial"};this.executeActionsAsync(R.value,V,R)}}disposeTrigger(x){this.disposeActions(),this.onSourceElementRemoved(x)}}InitialTrigger.triggerName="InitialTrigger",InitialTrigger.propertyList={triggeredActions:{type:Array,elementType:x.Actions.ActionBase}},A.InitialTrigger=InitialTrigger,x.Triggers.Class.processTriggerMetadata(InitialTrigger,InitialTrigger.propertyList,A.SelectorSourcedTrigger)}(x.Triggers||(x.Triggers={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class ActionResultTrigger extends A.SelectorSourcedTrigger{constructor(A,V){super(A,V),this.resultId=null,this._resultService=x.AppServices.ActionService,this._sourceInfo=null,this.addPropertyList(ActionResultTrigger,ActionResultTrigger.propertyList)}remoteExecuteAction(x,A){return __awaiter(this,void 0,void 0,(function*(){this._sourceInfo=this.getSourceElementInfo(x),this._executeControlEventActions(this._sourceInfo.element,A.event,A,null)}))}_executeControlEventActions(x,A,V,R){if(x){const R=this.getTargetElementsForEventSourceElement(x),D={event:A,sender:this,sourceElement:x,value:V.value,triggerSourceData:V};this.executeActionsAsync(V.value,R,D)}}}ActionResultTrigger.triggerName="ActionResultTrigger",ActionResultTrigger.propertyList={resultId:{type:String},triggeredActions:{type:Array,elementType:x.Actions.ActionBase}},A.ActionResultTrigger=ActionResultTrigger,x.Triggers.Class.processTriggerMetadata(ActionResultTrigger,ActionResultTrigger.propertyList,A.SelectorSourcedTrigger)}(x.Triggers||(x.Triggers={}))}(VisiWin||(VisiWin={})),function(x){!function(x){"use strict";class EventMixinEvent{constructor(x,A,V){this.bubbles={value:!1,writable:!1},this.cancelable={value:!1,writable:!1},this.trusted={value:!1,writable:!1},this.eventPhase={value:0,writable:!1},this.timeStamp=null,this.type=null,this.target=null,this._stopImmediatePropagationCalled=!1,this.detail=A,this.target=V,this.timeStamp=Date.now(),this.type=x}get currentTarget(){return this.target}get defaultPrevented(){return this._preventDefaultCalled}preventDefault(){this._preventDefaultCalled=!0}stopImmediatePropagation(){this._stopImmediatePropagationCalled=!0}stopPropagation(){}}EventMixinEvent.supportedForProcessing=!1,x.EventMixinEvent=EventMixinEvent}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){"use strict";A._getResourceValue=function _getResourceValue(A,V){return x.Application.InfoLog.log("Do not use the internal outdated method call: VisiWin.UI.Internal._getResourceValue"),A.getColor(V)},A._toCamelCase=function _toCamelCase(A){return x.Application.InfoLog.log("Do not use the internal outdated method call: VisiWin.UI.Internal._toCamelCase"),A.replace(/-([a-z])/g,(function(x,A){return A.toUpperCase()}))},A._msType2vwType=function _msType2vwType(A){x.Application.InfoLog.log("Do not use the internal outdated method call: VisiWin.UI.Internal._msType2vwType");let V=null;switch(A){case String:V="string";break;case Boolean:V="boolean";break;case Number:V="number";break;default:V="any"}return V},A._dispatchUpdateBase=function _dispatchUpdateBase(A,V,R,D,N){x.Application.InfoLog.log("Do not use the internal outdated method call: VisiWin.UI.Internal._dispatchUpdateBase"),/color/i.test(R)?A._updateColorsBase(V,R,D,N):A._updateLayoutBase(V,R,D,N)},A._getPredictProperty=function _getPredictProperty(A,V){x.Application.InfoLog.log("Do not use the internal outdated method call: VisiWin.UI.Internal._getPredictProperty");let R=A[V];return A.optionsList[V]&&void 0!==A.optionsList[V].defaultValue&&(R=A.optionsList[V].defaultValue),void 0!==A.inlineOptions[V]&&null!==A.inlineOptions[V]&&(R=A.inlineOptions[V]),R},A._getEventList=function _getEventList(A){x.Application.InfoLog.log("Do not use the internal outdated method call: VisiWin.UI.Internal._getEventList");const V=[];for(const x in A.optionsList){const R=A.optionsList[x];"event"===(R.propertyType||R.optionType||R.accessType||"member")&&V.push(R)}return V},A._getEventItem=function _getEventItem(A,V){x.Application.InfoLog.log("Do not use the internal outdated method call: VisiWin.UI.Internal._getEventItem");let R=V.toLowerCase();if(0===R.indexOf("on")&&(R=R.substr(2)),A.optionsList)for(const x in A.eventList)if(x.toLowerCase()===R)return A.eventList[x].name=x,A.eventList[x];return null}}(A.Internal||(A.Internal={}))}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){"use strict";function __getThemeResource(A,V){return A.appService&&x.Resources.themes[A.appService.aktTheme]&&null!=x.Resources.themes[A.appService.aktTheme][V.substring(1)]?x.Resources.themes[A.appService.aktTheme][V.substring(1)]:V}function __getColorResource(A){return x.Resources.colors&&x.Resources.colors[A.substring(1)]?x.Resources.colors[A.substring(1)]:A}function __getBackgroundResource(A){return x.Resources.backgrounds&&x.Resources.backgrounds[A.substring(1)]?x.Resources.backgrounds[A.substring(1)]:A}function __getAnimationResource(A){return x.Resources.animations&&x.Resources.animations[A.substring(1)]?x.Resources.animations[A.substring(1)]:A}function __getShadowResource(A){return x.Resources.shadows&&x.Resources.shadows[A.substring(1)]?x.Resources.shadows[A.substring(1)]:A}function ___c(A,V,R){if(x.isNullOrUndefined(V))return null;return V.replace(/([@]\w+)\b/g,x=>{let A=x;switch(x.substring(0,1)){case"@":A=__getColorResource(x)}return A})}function ___t(A,V,R){if(x.isNullOrUndefined(V))return null;return V.replace(/([@]\w+)\b/g,x=>{let D=x;switch(x.substring(0,1)){case"@":R&&(A.themeChangeProperties[R]=V),D=__getThemeResource(A,x),D=___c(0,D)}return D})}A.__getThemeResource=__getThemeResource,A.__getColorResource=__getColorResource,A.__getBackgroundResource=__getBackgroundResource,A.__getAnimationResource=__getAnimationResource,A.__getShadowResource=__getShadowResource,A.___c=___c,A.___t=___t,A.___b=function ___b(A,V,R){return x.isNullOrUndefined(V)?null:V.replace(/([@]\w+)\b/g,x=>{let V=x;switch(x.substring(0,1)){case"@":V=__getBackgroundResource(x),V=___t(A,V,R)}return V})},A.___a=function ___a(A,V,R){return x.isNullOrUndefined(V)?null:V.replace(/([@]\w+)\b/g,x=>{let V=x;switch(x.substring(0,1)){case"@":V=__getAnimationResource(x),V=___t(A,V,R)}return V})},A.___s=function ___s(A,V,R){return x.isNullOrUndefined(V)?null:V.replace(/([@]\w+)\b/g,x=>{let V=x;switch(x.substring(0,1)){case"@":V=__getShadowResource(x),V=___t(A,V,R)}return V})},A._getThemeColor=function _getThemeColor(A,V,R){return x.isNullOrUndefined(V)?null:V.replace(/([@]\w+)\b/g,x=>{let V=x;switch(x.substring(0,1)){case"@":V=__getThemeResource(A,x),V=___c(0,V)}return V})},A.__unused=function __unused(A,V,R){return x.isNullOrUndefined(V)?null:V.replace(/([&%]\w+)\b/g,x=>{let V=x;switch(x.substring(0,1)){case"&":case"%":V=__getThemeResource(A,x),V=___c(0,V)}return V})}}(A.Internal||(A.Internal={}))}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(A){"use strict";function _toCssName(x){return x.replace(/([A-Z])/g,"-$1").toLowerCase()}function _calculatedStyle(A,V,R,D,N){let U=null,B=!1,F=null,W=!1,H=null,z=!1,G=!1;const j=[];let q="",Q=null,K=!1;const J=x.Resources.styles.controls[A.controlType+"."+A.style];if(J&&J.options&&J.options[V]&&(U=J.options[V],B=!0),"style"===A.optionsList[V].propertyType||"memberStyle"===A.optionsList[V].propertyType){const x=R.optionsList[V].element||"element",A=R.optionsList[V].style||V,D=R[x];D.style[A]&&(F=D.style[A],W=!0);let N=R.optionsList[V].style||V;N=_toCssName(N);let U=!1,B=null,j=!1;D.matches=D.matches||D.webkitMatchesSelector||D.mozMatchesSelector||D.msMatchesSelector||D.oMatchesSelector;const J=document.styleSheets;for(const x in J){const A=J[x],V=A.rules||A.cssRules;for(const x in V){const R=V[x];if(D.matches(R.selectorText)){const x=R.cssText;if(x.indexOf(N)>=0&&(U=/!important/i.test(x),B=R.style[N],B)){B=B.replace(/var\((\-\-[A-Za-z0-9_\-]+)\)/g,(function(x,A){const V=window.getComputedStyle(D).getPropertyValue(A);return V||"var("+A+")"}));const V=x.indexOf("{");G=G||U,q="File:"+A.href+" Rule:"+x.substr(V)+" Value:"+B+(G?" important":""),j||(j=U,H=B,z=!0)}}}}window.getComputedStyle(D)[N]&&("style"===R.optionsList[V].propertyType?(Q=window.getComputedStyle(D)[N],K=!0):(Q=R[V],K=!0))}G&&j.push("cssVal:"+H+" "+q+" !important"),W&&j.push("inlineVal:"+F),B&&j.push("styleVal:"+U),G||z&&j.push("cssVal:"+H+" "+q),K&&j.push("compVal:"+Q);const X=D.optionsList[N].initSetter;if(X&&x.isArray(X))for(let x=0;x<X.length;x++)j.push(X[x]);D.optionsList[N].info=j;let Y="",$=!1;return G?($=W||B||K,Y="[css Important ",$&&(Y+="("),W&&(Y+="inline "),B&&(Y+="style"),K&&(Y+="computed "),$&&(Y+=")"),Y+="]",D.optionsList[N].getterAccess=Y,D.optionsList[N].propertySource="cssi",H):W?($=B||z||K,Y="[inline",$&&(Y+=" ("),B&&(Y+="style "),W&&(Y+="css "),K&&(Y+="computed "),$&&(Y+=")"),Y+="]",D.optionsList[N].getterAccess=Y,D.optionsList[N].propertySource="inline",F):B?($=z||K,Y="[style",$&&(Y+=" ("),W&&(Y+="css "),K&&(Y+="computed "),$&&(Y+=")"),Y+="]",D.optionsList[N].getterAccess=Y,D.optionsList[N].propertySource="style",U):z?($=K,Y="[style",$&&(Y+=" ("),K&&(Y+="computed "),$&&(Y+=")"),Y+="]",D.optionsList[N].getterAccess=Y,D.optionsList[N].propertySource="css",H):K?(Y="[computed]",D.optionsList[N].getterAccess=Y,D.optionsList[N].propertySource="computed",Q):(Y="[none]",D.optionsList[N].getterAccess=Y,D.optionsList[N].propertySource="none",D[N]?D[N]:null)}function _getOptionsDefaultValue(A,V){let R=null,D=null,N=null,U=null;do{if(R=A.optionsList,R&&!x.isNullOrUndefined(A.optionsList[V])){if(D=A.optionsList[V],!x.isNullOrUndefined(D.defaultValue))return D.defaultValue;"child"===D.propertyType||"controlChild"===D.propertyType||"service"===D.propertyType||"provider"===D.propertyType?(D.childElement&&(N=D.childElement),D.child&&(N=D.child),U=V,D.childOption&&(U=D.childOption),D.childProperty&&(U=D.childProperty),A[N]?A[N].__VWCONTROL__?A[N].optionsList[U]&&"child"===A[N].optionsList[U].propertyType?(A=A[N],V=U):A=null:A[N].winControl&&A[N].winControl.optionsList[U]&&"controlChild"===A[N].winControl.optionsList[U].propertyType?(A=A[N].winControl,V=U):A=null:A=null):A=null}}while(A);return null}function _getOptionsListProperty(A,V,R,D){let N={};if(N=R.optionsList[D],"child"===A.optionsList[V].propertyType||"controlChild"===A.optionsList[V].propertyType||"service"===A.optionsList[V].propertyType||"provider"===A.optionsList[V].propertyType){let x=null;A.optionsList[V].childElement&&(x=A.optionsList[V].childElement),A.optionsList[V].child&&(x=A.optionsList[V].child);let U=V;A.optionsList[V].childOption&&(U=A.optionsList[V].childOption),A.optionsList[V].childProperty&&(U=A.optionsList[V].childProperty),A[x]?A[x].__VWCONTROL__?!A[x].optionsList[U]||"style"!==A[x].optionsList[U].propertyType&&"controlChild"!==A[x].optionsList[U].propertyType?N.aktValue=A[V]:N=_getOptionsListProperty(A[x],U,R,D):A[x].winControl&&A[x].winControl.optionsList[U]&&("style"===A[x].winControl.optionsList[U].propertyType||"child"===A[x].winControl.optionsList[U].propertyType)?N=_getOptionsListProperty(A[x].winControl,U,R,D):N.aktValue=A[V]:N.aktValue=null}else"event"!==A.optionsList[V].propertyType?"style"===A.optionsList[V].propertyType?N.aktValue=_calculatedStyle(A,V,A,R,D):N.aktValue=A[V]:N.aktValue=null;return x.isNullOrUndefined(N.aktValue)&&(N.aktValue=_getOptionsDefaultValue(A,V)),N}function _getStyle(A,V){const R=x.Resources.styles.controls[A.controlType+"."+A.style];return!!(R&&R.options&&R.options[V])}A._toCssName=_toCssName,A._calculatedStyle=_calculatedStyle,A._getOptionsDefaultValue=_getOptionsDefaultValue,A._getOptionsListProperty=_getOptionsListProperty,A._getStyle=_getStyle,A._getOptionsValue=function _getOptionsValue(A,V){let R,D;const N=[];for(const U in A.optionsList){const B=A.optionsList[U],F=B.propertyType||B.optionType||B.accessType||"member";if(!B.invisible&&"event"!==F&&V)N.push(_getOptionsListProperty(A,U,A,U));else if(!B.invisible&&"event"!==F&&!V){let V=_getOptionsListProperty(A,U,A,U).aktValue;D=!(A.inlineOptions&&!x.isNullOrUndefined(A.inlineOptions[U]))&&_getStyle(A,U),x.isNullOrUndefined(V)&&(V=A[U]),x.isNullOrUndefined(V)||(R={value:V,propertySource:A.optionsList[U].propertySource||null,propertyInfo:A.optionsList[U].info||[""],style:D},N.push({[U]:R}))}}return N},A._getActionPropertyList=function _getActionPropertyList(x,A,V){const R=[];if(x.triggerCollection){const D=x.triggerCollection;if(D){const x=D.length;if(A>=0&&A<x){const x=D[A],N=x.triggeredActions.length;if(V>=0&&V<N){const A=x.triggeredActions[V];for(const x in A.propertyList)R.push({name:x,value:A[x]})}}}}return R},A._getTriggerPropertyList=function _getTriggerPropertyList(x,A){const V=[];if(x.triggerCollection){const R=x.triggerCollection;if(R){const x=R.length;if(A>=0&&A<x){const x=R[A];delete x.triggeredActions;for(const A in x.propertyList)V.push({name:A,value:x[A]})}}}return V},A._getStyleNameFromType=function _getStyleNameFromType(A){const V=[];V.push("Default");const R=x.Resources.styles.controls;for(const x in R)if(x.indexOf(A+".")>=0){const R=A.length,D=x.substr(R+1);D.length>0&&!V[D]&&V.push(D)}return V},A._getOptionsList=function _getOptionsList(x,A){const V={};for(const R in x.optionsList){const D=x.optionsList[R],N=D.propertyType||D.optionType||D.accessType||"member";!x.optionsList[R].invisible&&"event"!==N&&A?V[R]=_getOptionsListProperty(x,R,x,R):x.optionsList[R].invisible||"event"===N||A||(V[R]=x[R])}return V}}(A.Design||(A.Design={}))}(A.Internal||(A.Internal={}))}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";const V=x.UI.Internal;class ProviderBase{constructor(x,A){if(this.namespace="VisiWin.UI",this.mutationElement="element",this.resizedElement="element",this.maxInterrations=10,this.optionsList=[],this.eventList=[],this.childElements=[],this.arrayObjects=[],this.inlineOptions={},this.themeChangeProperties={},this._firstAttach=!0,this._listeners={},this._observeListenerList={},this._mutationObserver=null,this._resizeObserver=null,this._boundResizeHandlerDesignMode=null,this._boundResizeHandlerRunMode=null,this._boundResizeHandler=null,this._boundMutationHandlerDesignMode=null,this._boundMutationHandlerRunMode=null,this._boundMutationHandler=null,this._boundObserveHandler=this._observeHandler.bind(this),this._boundChangeLanguageBase=this._changeLanguageBase.bind(this),this._dataContext=null,this._parentElement=null,this._parentControl=null,this._resourceName=null,this._resourceNameBase=null,this._controlType=null,this._style=null,this._styleBase=null,this._basedOn=null,this._controlId=null,this._locService=null,this._appService=null,this._registerSourceId=null,this._blockAction=!1,this._updateLayoutEnable=!1,this._isAttached=!1,this._updateLayoutAsync=!1,this._updateLayoutWork=0,this._updateColorAsync=!1,this._updateColorWork=0,this._updateLayoutTimerId=null,this._basedOnBase=null,this._changeMediaArgs=null,this._updateColorTimerId=null,this.addPropertyList(ProviderBase,ProviderBase.ProviderBasePropertyList),this.element=x||document.createElement("div"),A=A||{},this.inlineOptions=A,this.designerType=A.designerType||"Control",this.style=A.style,this.basedOn=A.basedOn,this._mixinList){var V=this._mixinList,R=this;V.forEach(V=>{V.prototype&&"function"==typeof V.prototype.constructor&&V.prototype.constructor.call(R,x,A)})}}set dataContext(x){this._dataContext=x}get dataContext(){return this._dataContext}get parentElement(){return this._parentElement||(this.element&&this.element.parentElement?this._parentElement=this.element.parentElement:this._parentElement=null),this._parentElement}get parentControl(){return this._parentControl||(this.parentElement&&this.parentElement.winControl?this._parentControl=this.parentElement.winControl:this._parentControl=null),this._parentControl}get resourceName(){return this._resourceName||(this.style?this._resourceName=this.controlType+"."+this.style:this._resourceName=this.controlType,this.basedOn?this._resourceNameBase=this.controlType+"."+this.basedOn:this._resourceNameBase=this.controlType),this._resourceName}set resourceName(x){}get controlType(){return this._controlType||(this.namespace?this._controlType=this.namespace+"."+this.controlName:this._controlType=this.constructor.namespace+"."+this.constructor.controlName),this._controlType}set controlType(x){}get style(){return this._style}set style(A){var V=this._style,R=null;if(this._style=A,V&&"string"==typeof V){R=V.split(".");for(var D=0;D<R.length;D++)x.Utilities.removeClass(this.element,R[D].toLowerCase())}if(A&&"string"==typeof A){R=A.split("."),this._styleBase=R[R.length-1];for(D=0;D<R.length;D++)x.Utilities.addClass(this.element,R[D].toLowerCase())}this._updateLayoutBase("property","style",A,V),this.dispatchNotifyPropertyChanged("property","style",A,V)}get basedOn(){return this._basedOn}set basedOn(x){var A=this._basedOn,V=null;this._basedOn=x,x&&"string"==typeof x&&(V=x.split("."),this._basedOnBase=V[V.length-1]),this._updateLayoutBase("property","basedOn",x,A),this.dispatchNotifyPropertyChanged("property","basedOn",x,A)}get controlId(){return this.element.getAttribute("id")}set controlId(x){var A=this._controlId;this._controlId=x,this.element.setAttribute("id",x),this._updateLayoutBase("property","controlId",x,A),this.dispatchNotifyPropertyChanged("property","controlId",x,A)}get locService(){return this._locService||(this._locService=x.AppServices.LanguageService),this._locService}set locService(x){}get appService(){return this._appService||(this._appService=x.AppServices.AppService),this._appService}set appService(x){}set registerSourceId(x){if(this._registerSourceId!=x){var A=this._registerSourceId;this._registerSourceId&&this.unregisterAtParent(this.controlName,this._registerSourceId,this.element),this._registerSourceId=x,this._registerSourceId&&this.registerAtParent(this.controlName,this._registerSourceId,this.element),this._updateLayoutBase("property","registerSourceId",x,A),this.dispatchNotifyPropertyChanged("property","registerSourceId",x,A,"focusChanged")}}get registerSourceId(){return this._registerSourceId}get blockAction(){return this._blockAction}set blockAction(x){this._blockAction=x,x&&this.element.removeAttribute("tabIndex")}createControlBaseHandler(x,A){this.locService&&this.locService.addEventListener("languageChanged",this._boundChangeLanguageBase)}removeControlBaseHandler(){this.locService&&this.locService.removeEventListener("languageChanged",this._boundChangeLanguageBase)}updateLayoutEnable(x,A,V){if(this._updateLayoutEnable=x,this.childElements.length>0)for(var R=0;R<this.childElements.length;R++)this.childElements[R]&&this.childElements[R].winControl&&"function"==typeof this.childElements[R].winControl.updateLayoutEnable&&this.childElements[R].winControl.updateLayoutEnable(x,A,V);x&&(this._updateLayoutBase(A,V,null,null),this._updateColorsBase(A,V,null,null))}initializedBase(x){"function"==typeof this.initializedBasis&&this.initializedBasis(x),"function"==typeof this.initialized&&this.initialized(x),this._updateLayoutBase("lifeCycle","initialized",null,null),this.dispatchEvent("initialized",{sender:this,element:x})}readyBase(A){if("function"==typeof this.readyBasis&&this.readyBasis(A),"function"==typeof this.ready&&this.ready(A),"Child"===this.designerType&&"function"==typeof this._initRipple&&this._initRipple(),this.dataContext){var V=x.AppServices.DataService.getBinding(this.dataContext);V&&WinJS.Binding.processAll(this.element,V)}}get isAttached(){return this._isAttached}set isAttached(x){this._isAttached=x}attach(){return this.isAttached||(this.isAttached=!0,"Child"!==this.designerType&&(this._firstAttach?this._firstAttach=!1:this.updateLayoutEnable(!0,"lifeCycle","attach")),this.dispatchEvent("attached",{})),null}detach(){return this.isAttached&&(this.isAttached=!1,this.dispatchEvent("detached",{})),null}registerAtParent(A,V,R,D){var N=R||this.element;N=N.parentElement,D=D||{};var U=this.maxInterrations||10,B=null;for(A||x.Application.WarnLog.log("VisiWin.UI.ControlBase, beim registrieren des Controls "+this.__VWCONTROL__+" wurde kein Name bergeben");N&&U;){if(N.winControl&&"function"==typeof(B=N.winControl).registerChild&&!B.registerChild(A,V,R,D))return;N=N.parentElement,U--}}unregisterAtParent(x,A,V,R){}mixProperties(x,A){if("string"==typeof A&&(A=WinJS.UI._optionsParser(A)),"object"==typeof A)for(var V in A)x[V]=A[V]}setDefaultOptionsBasedOn(x){var A=null,V={};return this.appService&&this.resourceName&&"Default"!==this._styleBase&&"Default"!==this.basedOn&&(A=this.appService.getDefaultOptions(this._resourceNameBase,this.controlType),this.mixProperties(V,A),this.setPropertyInfo(A,"[JSON_BASEDON]")),this.mixProperties(x,V),x}setDefaultOptionsResource(x){var A=null,V={};return this.appService&&this.resourceName&&(A=this.appService.getDefaultOptions(this.resourceName,this.controlType),this.mixProperties(V,A),this.setPropertyInfo(A,"[JSON_DEFAULT]")),this.mixProperties(x,V),x}setDefaultOptionsId(x){var A=null,V={};return this.appService&&this.controlId&&(A=this.appService.getDefaultOptions("#"+this.controlId,null),this.mixProperties(V,A),this.setPropertyInfo(A,"[JSON_CONTROLID]")),this.mixProperties(x,V),x}setLangOptions(x){var A={},V=null;return this.locService&&this.resourceName&&(V=this.locService.getOptions(this.resourceName),this.mixProperties(A,V),this.setPropertyInfo(V,"[JSON_LANG]")),this.locService&&this.controlId&&(V=this.locService.getOptions("#"+this.controlId),this.mixProperties(A,V),this.setPropertyInfo(V,"[JSON_LANGID]")),this.mixProperties(x,A),x}dispatchNotifyPropertyChanged(x,A,V,R,D,N){if(this._updateLayoutEnable){var U={};if(U.sender=this,U.changeType=x,U.changeName=A,U.newValue=V,U.oldValue=R,N)for(var B in N)U[B]=N[B];D&&this.dispatchEvent(D,U),this.dispatchEvent("notifyPropertyChanged",U),U=null}}updateLayout(x){x||(x="default"),this._updateLayoutBase("updateLayout",x)}_updateLayoutBase(x,A,V,R){if(!(this._updateLayoutAsync||(this._updateLayoutAsync=!0,this._updateLayoutWork>=1))){if(this._updateLayoutEnable){if(this._updateLayoutWork++,"function"==typeof this._updateLayout){var D={};D.sender=this,"object"==typeof x&&null!=x?(D.changeType=x.changeType,D.changeName=x.changeName,D.newValue=x.newValue,D.oldValue=x.oldValue):(D.changeType=x,D.changeName=A,D.newValue=V,D.oldValue=R),this._updateLayout(D),D=null}this._updateLayoutWork--}this._updateLayoutAsync=!1}}_updateColorsBase(A,V,R,D){if(x.uc0++,!(this._updateColorAsync||(this._updateColorAsync=!0,x.uc1++,this._updateColorWork>=1))){if(this._updateLayoutEnable){if(this._updateColorWork++,"function"==typeof this._updateColors){var N={};N.sender=this,"object"==typeof A&&null!=A?(N.changeType=A.changeType,N.changeName=A.changeName,N.newValue=A.newValue,N.oldValue=A.oldValue):(N.changeType=A,N.changeName=V,N.newValue=R,N.oldValue=D),this._updateColors(N),N=null}this._updateColorWork--}this._updateColorAsync=!1}}getOptionListDefault(){var x={};for(var A in this.optionsList)void 0!==this.optionsList[A].defaultValue&&(x[A]=this.optionsList[A].defaultValue);return x}defaultConstructor(A,V,R,D,N){if("function"==typeof this.preCheck&&this.preCheck(A,V),this.baseSettings(A,R,D),"function"==typeof this.createTemplateBase)var U=this.createTemplateBase(A,V);if("function"==typeof this.createControlBase)U=this.createControlBase(A,V);if("function"==typeof this.createControl||"function"==typeof this.createTemplate){if("function"==typeof this.createTemplate)U=this.createTemplate(A,V);else U=this.createControl(A,V);if(U&&"function"==typeof U.then){var B=this;U.then((function(x){B._defaultConstructor2.call(B,A,V,R,D,N)}),(function(U){"function"==typeof B.createControl?x.Application.ErrorLog.log("VisiWin.UI."+B.__VWCONTROL__+".createControl, Promise im Returnwert liefert Error."):x.Application.ErrorLog.log("VisiWin.UI."+B.__VWCONTROL__+".createTemplate, Promise im Returnwert liefert Error."),B._defaultConstructor2.call(B,A,V,R,D,N)}))}else this._defaultConstructor2(A,V,R,D,N)}else this._defaultConstructor2(A,V,R,D,N)}_defaultConstructor2(A,V,R,D,N){"function"==typeof this.createControlBaseHandler&&this.createControlBaseHandler(A,V),"function"==typeof this.createHandlerBase&&this.createHandlerBase(A,V),"function"==typeof this.createHandler&&this.createHandler(A,V),x.Utilities.isInDesignMode()?("function"==typeof this.resizeHandlerDesignMode?(this._boundResizeHandlerDesignMode=this.resizeHandlerDesignMode.bind(this),this._resizeObserver=new window.ResizeObserver(this._boundResizeHandlerDesignMode),this._resizeObserver.observe(this[this.resizedElement])):"function"==typeof this.resizeHandler&&(this._boundResizeHandler=this.resizeHandler.bind(this),this._resizeObserver=new window.ResizeObserver(this._boundResizeHandler),this._resizeObserver.observe(this[this.resizedElement])),"function"==typeof this.mutationHandlerDesignMode?(this._boundMutationHandlerDesignMode=this.mutationHandlerDesignMode.bind(this),this._mutationObserver=new MutationObserver(this._boundMutationHandlerDesignMode),this._mutationObserver.observe(this[this.mutationElement],{childList:!0})):"function"==typeof this.mutationHandler&&(this._boundMutationHandler=this.mutationHandler.bind(this),this._mutationObserver=new MutationObserver(this._boundMutationHandler),this._mutationObserver.observe(this[this.mutationElement],{childList:!0}))):("function"==typeof this.resizeHandlerRunMode?(this._boundResizeHandlerRunMode=this.resizeHandlerRunMode.bind(this),this._resizeObserver=new window.ResizeObserver(this._boundResizeHandlerRunMode),this._resizeObserver.observe(this[this.resizedElement])):"function"==typeof this.resizeHandler&&(this._boundResizeHandler=this.resizeHandler.bind(this),this._resizeObserver=new window.ResizeObserver(this._boundResizeHandler),this._resizeObserver.observe(this[this.resizedElement])),"function"==typeof this.mutationHandlerRunMode?(this._boundMutationHandlerRunMode=this.mutationHandlerRunMode.bind(this),this._mutationObserver=new MutationObserver(this._boundMutationHandlerRunMode),this._mutationObserver.observe(this[this.mutationElement],{childList:!0})):"function"==typeof this.mutationHandler&&(this._boundMutationHandler=this.mutationHandler.bind(this),this._mutationObserver=new MutationObserver(this._boundMutationHandler),this._mutationObserver.observe(this[this.mutationElement],{childList:!0}))),"function"==typeof this.beforeInitBase&&this.beforeInitBase(A,V),"function"==typeof this.preSetOptionsBase&&this.preSetOptionsBase(A,V),"function"==typeof this.beforeInit&&this.beforeInit(A,V),"function"==typeof this.preSetOptions&&this.preSetOptions(A,V),this.setPropertyInfo(V,"[INLINE]");var U=this.getOptionListDefault();return"Child"===this.designerType?(this.observe&&x.Class.initObserve(this,this,this.observe),this.mixProperties(U,V),WinJS.UI.setOptions(this,U),"function"==typeof this.afterInit&&this.afterInit(A,V),"function"==typeof this.postSetOptions&&this.postSetOptions(A,V)):(U=this.setDefaultOptionsBasedOn(U),U=this.setDefaultOptionsResource(U),U=this.setDefaultOptionsId(U),U=this.setLangOptions(U),this.mixProperties(U,V),this.observe&&x.Class.initObserve(this,this,this.observe),WinJS.UI.setOptions(this,U),"function"==typeof this.afterInit&&this.afterInit(A,V),"function"==typeof this.postSetOptions&&this.postSetOptions(A,V),this.updateLayoutEnable(!0,"lifeCycle","updateLayout"),this.updateLayoutEnable(!0,"lifeCycle","firstUpdate")),A}baseSettings(A,V,R,D){this.controlName=this.__VWCONTROL__=V,this.element=A||document.createElement(D||"div"),this.element.__VWELEMENT__=V,this.element.winControl=this,R&&x.Utilities.addClass(this.element,R)}processElements(A){let V=[];for(var R=0;R<A.length;R++){var D=A[R];if(D){var N=D.getAttribute("data-win-options");if(N){if(N.indexOf("designerType")<0){var U=N.indexOf("{");N="{designerType: 'Child',"+(N=N.substring(U+1)),D.setAttribute("data-win-options",N)}}else N="{designerType: 'Child'}",D.setAttribute("data-win-options",N)}}for(let R=0;R<A.length;R++){let D=A[R];D&&(V.push(WinJS.UI.processAll(D).then((function(x){D.winControl.designerType="Child"}),(function(A){let V=D.getAttribute("data-win-control");x.Application.ErrorLog.log(V+".processElements():  Fehler in WinJS.processAll().")}))),this.childElements.push(D))}return V.length>0?WinJS.Promise.join(V):null}initializeChilds(A){let V=[],R=this.element.querySelectorAll("[data-ref-element],[data-ref]"),D=Array.from(R);A&&D.concat(A);for(let A=0;A<D.length;A++){let R=D[A];if(R){let x=R.getAttribute("data-win-options");if(x){if(x.indexOf("designerType")<0){let A=x.indexOf("{");x=x.substring(A+1),x="{designerType: 'Child',"+x,R.setAttribute("data-win-options",x)}}else x="{designerType: 'Child'}",R.setAttribute("data-win-options",x)}let N=R.getAttribute("data-win-control"),U=R.getAttribute("data-ref-element"),B=R.getAttribute("data-ref");B&&N?R.winControl?(R.winControl.designerType="Child",R.removeAttribute("data-ref"),this.childElements.push(R),this[B]=R.winControl):(V.push(WinJS.UI.processAll(R).then(function(x){R.winControl.designerType="Child",this[B]=R.winControl}.bind(this),function(A){let V=R.getAttribute(N);x.Application.ErrorLog.log(V+".initializeChilds():  Error in processAll().")}.bind(this))),R.removeAttribute("data-ref"),this.childElements.push(R)):U&&N?R.winControl?(R.winControl.designerType="Child",R.removeAttribute("data-ref-element"),this.childElements.push(R),this[U]=R):(V.push(WinJS.UI.processAll(R).then(function(x){R.winControl.designerType="Child",this[U]=R}.bind(this),function(A){let V=R.getAttribute(N);x.Application.ErrorLog.log(V+".initializeChilds():  Error in processAll().")}.bind(this))),R.removeAttribute("data-ref-element"),this.childElements.push(R)):U&&(R.removeAttribute("data-ref-element"),this[U]=R)}return V.length>0?WinJS.Promise.join(V):null}_observeHandler(x){"function"==typeof this._observeListenerList[x.detail.changeName]&&this._observeListenerList[x.detail.changeName](x)}_changeLanguageBase(x){var A={};this.mixProperties(A,this.locService.getOptions(this.resourceName)),this.controlId&&this.mixProperties(A,this.locService.getOptions("#"+this.controlId)),A&&WinJS.UI.setOptions(this,A),"function"==typeof this.onLanguageChangedBase&&this.onLanguageChangedBase(x),"function"==typeof this.onLanguageChangedMixin&&this.onLanguageChangedMixin(x),"function"==typeof this.onLanguageChanged&&this.onLanguageChanged(x)}getColor(x){var A=null;if(!this.optionsList||!this.optionsList[x])return this[x];A=this.optionsList[x];var V=this[x];if(A.resourceValue)for(var R=0;R<A.resourceValue.length;R++)switch(A.resourceValue[R]){case"getTheme":V=this.__t(V,x);break;case"getColor":V=this.__c(V,x);break;case"getBackground":V=this.__b(V,x);break;case"getAnamation":V=this.__a(V,x);break;case"getShadow":V=this.__s(V,x)}return V}setColor(x,A,V,R){var D=null,N=x,U="element";if(!this.optionsList||!this.optionsList[x])return null;D=this.optionsList[x],A&&(N=A),V&&(U=V);var B=this[x];if(D.resourceValue)for(var F=0;F<D.resourceValue.length;F++)switch(D.resourceValue[F]){case"getTheme":B=this.__t(B,x);break;case"getColor":B=this.__c(B,x);break;case"getBackground":B=this.__b(B,x);break;case"getAnamation":B=this.__a(B,x);break;case"getShadow":B=this.__s(B,x)}return null!=B&&(R?this[R]&&this[R].winControl&&(this[R].winControl[N]=B):V?this[U]&&(this[U].style[N]=B):this[U].style[N]=B),B}addPropertyList(A,V){var R,D;for(var N in A[A.controlName]||(x.Class.createProperties(A,V),A[A.controlName]=!0),V)if("base"==(R=(D=V[N]).propertyType||D.optionType||D.accessType||"member"))void 0!==D.defaultValue&&(this.optionsList[N]?this.optionsList[N].defaultValue=D.defaultValue:x.Application.WarnLog.log("VisiWin.UI.ControlBase.addOptionsList: "+this.controlType+": defaultValue fr base Property "+N+" nicht vorhanden.")),void 0!==D.defaultValue_DM&&(this.optionsList[N]?this.optionsList[N].defaultValue_DM=D.defaultValue_DM:x.Application.WarnLog.log("VisiWin.UI.ControlBase.addOptionsList: "+this.controlType+": defaultValue_DM fr base Property "+N+" nicht vorhanden.")),void 0!==D.defaultValue_RM&&(this.optionsList[N]?this.optionsList[N].defaultValue_RM=D.defaultValue_RM:x.Application.WarnLog.log("VisiWin.UI.ControlBase.addOptionsList: "+this.controlType+": defaultValue_RM fr base Property "+N+" nicht vorhanden."));else if("event"==R)this.eventList[N]=V[N];else{for(var U in D=V[N],this.optionsList[N]={},D)this.optionsList[N][U]=D[U];"member"!=D.propertyType&&"memberOnly"!=D.propertyType&&"memberStyle"!=D.propertyType&&"memberClass"!=D.optionType||(this["_"+N]=null)}}addEventListener(x,A,V){V=V||!1,this._listeners=this._listeners||{};for(var R=this._listeners[x]=this._listeners[x]||[],D=0,N=R.length;D<N;D++){var U=R[D];if(U.useCapture===V&&U.listener===A)return}R.push({listener:A,useCapture:V})}dispatchEvent(A,V){var R=this._listeners&&this._listeners[A];if(R){for(var D=new x.UI.EventMixinEvent(A,V,this),N=0,U=(R=R.slice(0,R.length)).length;N<U&&!D._stopImmediatePropagationCalled;N++)R[N].listener(D);return D.defaultPrevented||!1}return!1}removeEventListener(x,A,V){V=V||!1;var R=this._listeners&&this._listeners[x];if(R)for(var D=0,N=R.length;D<N;D++){var U=R[D];if(U.listener===A&&U.useCapture===V){R.splice(D,1),0===R.length&&delete this._listeners[x];break}}}getStyleProperty(A){if(x.Resources&&x.Resources.styles&&x.Resources.styles.controls&&x.Resources.styles.controls[this.resourceName]&&x.Resources.styles.controls[this.resourceName].options){var V=x.Resources.styles.controls[this.resourceName].options;if("string"==typeof V)for(var R=V.indexOf("{")+1,D=V.lastIndexOf("}"),N=(V=V.substring(R,D)).split(","),U=0;U<N.length;U++){var B=N[U].split(":"),F=B[0].trim(),W=B[1];if(F===A)return"true"==W||"false"!==W&&(W.indexOf("'")>=0?(R=W.indexOf("'")+1,D=W.lastIndexOf("'"),W.substring(R,D)):W.indexOf('"')>=0?(R=W.indexOf('"')+1,D=W.lastIndexOf('"'),W.substring(R,D)):null==W||null==W?W:W.indexOf(".")>=0?parseFloat(W):parseInt(W))}else if("object"==typeof V)for(var H in V){W=V[H];if(H===A)return W}else x.Application.WarnLog.log("VisiWin.UI.ControlBase.getPropertyStyle: UnbekannterType in den Resources: "+V.toString()+". ")}return null}dispose(){if(this._disposed)return!1;if(this._disposed=!0,this.isAttached&&this.detach(),this._disposeList){var A=this._disposeList,V=this;A.forEach(x=>{"function"==typeof V[x]&&V[x]()}),this._disposeList=null}for(var R in"function"==typeof this.removeHandlerBase&&this.removeHandlerBase(),"function"==typeof this.removeHandler&&this.removeHandler(),"function"==typeof this.removeControlBaseHandler&&this.removeControlBaseHandler(),this._resizeObserver&&this._resizeObserver.disconnect(),this._mutationObserver&&this._mutationObserver.disconnect(),this.removeProviderBaseHandler(),"function"==typeof this.removeControl&&this.removeControl(),"function"==typeof this.removeTemplate&&this.removeTemplate(),this.observe&&x.Class.removeObserve(this,this),this.removeEventListener("notifyPropertyChanged",this._boundObserveHandler),"function"==typeof this.unregisterChild&&this.unregisterChild(),this)delete this[R];return delete this.constructor,this._disposed=!0,this.__VWCONTROL__="name",!0}setPropertyInfo(x,A){for(var V in x)this.optionsList[V]||(this.optionsList[V]={},A="[UNKNOWN_PROPERTY]"+A),this.optionsList[V].propertyInfo||(this.optionsList[V].propertyInfo=[]),this.optionsList[V].propertyInfo.push(A+":"+x[V])}getResourceValue(x){return V._getResourceValue(this,x)}toCamelCase(x){return V._toCamelCase(x)}msType2vwType(x){return V._msType2vwType(x)}dispatchUpdateBase(x,A,R,D){return V._dispatchUpdateBase(this,x,A,R,D)}getPredictProperty(x){return V._getPredictProperty(this,x)}getEventList(){return V._getEventList(this)}getEventItem(x){return V._getEventItem(this,x)}createProviderBaseHandler(x,A){this.locService&&this.locService.addEventListener("languageChanged",this._boundChangeLanguageBase)}removeProviderBaseHandler(){this.locService&&this.locService.removeEventListener("languageChanged",this._boundChangeLanguageBase)}addDisposeList(x){this._disposeList=this._disposeList||[],this._disposeList.push(x)}_changeMediaBase(A){if(this._changeMediaArgs=A,A&&A.value&&!A.initial&&x.Resources.media[A.name]){var V=x.Resources.media[A.name].name,R={};this.mixProperties(R,this.appService.getMediaOptions(this.resourceName,V)),this.controlId&&this.mixProperties(R,this.appService.getMediaOptions("#"+this.controlId,V)),R&&WinJS.UI.setOptions(this,R)}"function"==typeof this.onMediaChangedBase&&this.onMediaChangedBase(A),"function"==typeof this.onMediaChangedMixin&&this.onMediaChangedMixin(A),"function"==typeof this.onMediaChanged&&this.onMediaChanged(A)}_changeColorBase(A){if(this._disposed&&x.Application.WarnLog.log("VisiWin.UI."+this.__VWCONTROL__+".ThemeChange, memory leake, disposed Control for event handlerr."),x.Application.Settings.UI.StyleColors&&this.element&&this.element.winControl){for(var V in"function"==typeof this._changeRippleColor&&this._changeRippleColor(),this.updateLayoutEnable(!1),this.themeChangeProperties)this["_"+V]=null,this[V]=this.__t(this.themeChangeProperties[V],null);this.updateLayoutEnable(!0,"lifeCycle","updateLayout"),"function"==typeof this.onThemeChangedBase&&this.onThemeChangedBase(A),"function"==typeof this.onThemeChangedMixin&&this.onColorThemedMixin(A),"function"==typeof this.onThemeChanged&&this.onThemeChanged(A)}}_getThemeResource(x){return V.__getThemeResource(this,x)}_getColorResource(x){return V.__getColorResource(x)}_getBackgroundResource(x){return V.__getBackgroundResource(x)}_getAnimationResource(x){return V.__getAnimationResource(x)}_getShadowResource(x){return V.__getShadowResource(x)}__m(x,A){return V.__unused(this,x,A)}__t(x,A){return V.___t(this,x,A)}__c(x,A){return V.___c(this,x,A)}__b(x,A){return V.___b(this,x,A)}__a(x,A){return V.___a(this,x,A)}__s(x,A){return V.___s(this,x,A)}getThemeColor(x,A){return V._getThemeColor(this,x,A)}getStyleNameFromType(x){return V.Design._getStyleNameFromType(x)}getOptionsValue(x){return V.Design._getOptionsValue(this,x)}getOptionsList(x){return V.Design._getOptionsList(this,x)}toCssName(x){return V.Design._toCssName(x)}getOptionsListProperty(x,A,R,D){return V.Design._getOptionsListProperty(x,A,R,D)}calculatedStyle(x,A,R,D){return V.Design._calculatedStyle(this,x,A,R,D)}getStyle(x){return V.Design._getStyle(this,x)}}ProviderBase.controlName="ProviderBase",ProviderBase.supportedForProcessing=!0,ProviderBase.ProviderBasePropertyList={notifyPropertyChanged:{propertyType:"event",group:"Event"},element:{propertyType:"member",group:"Base",type:"any",invisible:!0},resourceName:{propertyType:"custom",group:"Base",access:"ro"},controlType:{propertyType:"custom",group:"Base",access:"ro"},controlName:{propertyType:"member",group:"Base"},designerType:{propertyType:"member",group:"Base"},dataContext:{propertyType:"custom",type:"string"},style:{propertyType:"custom",defaultValue:"Default"},basedOn:{propertyType:"custom",defaultValue:"Default"},controlId:{propertyType:"custom",group:"Base"},tag:{propertyType:"member",group:"Base",type:"any",invisible:!0},registerSourceId:{propertyType:"custom",group:"Register"},registerTargetId:{propertyType:"member",group:"Register"}},ProviderBase._mixinList=[],ProviderBase._disposeList=[],A.ProviderBase=ProviderBase}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(VisiWin){var UI;!function(UI){"use strict";class CurrentAlarmProvider extends VisiWin.UI.ProviderBase{constructor(x,A){super(x,A),this.requestID=null,this.currentAlarmList=null,this._initObserve=!1,this._alarmService=null,this._currentAlarm=null,this._currentAlarmFilter=null,this.activeText="active",this.activeBackgroundColor="red",this.activeForegroundColor="white",this.activeSymbol="warning",this.activeTag=null,this.inactiveText="inactive",this.inactiveBackgroundColor="red",this.inactiveForegroundColor="black",this.inactiveSymbol="warning",this.inactiveTag=null,this.activeackText="active acknowledge",this.activeackBackgroundColor="aqua",this.activeackForegroundColor="black",this.activeackSymbol="warning",this.activeackTag=null,this.inactiveackText="inactive acknowledge",this.inactiveackBackgroundColor="black",this.inactiveackForegroundColor="white",this.inactiveackSymbol="warning",this.inactiveackTag=null,this._sampleData=null,this._desiredClasses=null,this._desiredClassesArray=[],this._desiredGroups=null,this._desiredGroupsArray=[],this._desiredStates=null,this._desiredStatesArray=[],this._maxPriority=-1,this._minPriority=-1,this._sortMode="alarmStateTime",this._orignalAlarms=[],this.addPropertyList(CurrentAlarmProvider,CurrentAlarmProvider.propertyList),this.defaultConstructor(x,A,VisiWin.UI.CurrentAlarmProvider.controlName,null)}set sampleData(x){if(VisiWin.Utilities.isInDesignMode()&&this._sampleData!=x){var A=null;VisiWin.Application.Settings.UI.DirectoryNames.DesignModeData?A=VisiWin.Application.Settings.UI.DirectoryNames.DesignModeData:(VisiWin.Application.ErrorLog.log('VisiWin.UI.CurrentAlarmProvider: setting value [DirectoryNames.DesignModeData] not set. Use default directory: ".vwdesigner/designmodedata".'),A=".vwdesigner/designmodedata"),this._sampleData=x;var V=this,R=A+"/"+this._sampleData;new Promise((function(x,A){window.designModeDataUrl=R,VisiWin.Utilities.xhr({url:R,data:{}}).then((function completed(A){if(200===A.status){try{var R=JSON.parse(A.responseText);if(R&&R.samples&&R.samples.currentAlarmProvider){window.designModeData=R.samples.currentAlarmProvider;var D={};D.sender=this,D.senderName="designModeDataLoaded",V.dispatchEvent("designModeDataLoaded",D),D=null}else VisiWin.Application.ErrorLog.log('VisiWin.UI.CurrentAlarmProvider: Parse error in resource file, no "samples" and/or "samples.currentAlarmProvider" object in: '+window.designModeDataUrl+".")}catch(x){VisiWin.Application.ErrorLog.log("VisiWin.UI.CurrentAlarmProvider: Parse error in resource file: "+window.designModeDataUrl+".")}x(null)}else{A.status;VisiWin.Application.ErrorLog.log("VisiWin.UI.CurrentAlarmProvider: can't read resource file: "+window.designModeDataUrl+". Result status: "+A.status),x(null)}}),(function error(A){VisiWin.Application.ErrorLog.log("VisiWin.UI.CurrentAlarmProvider: can't read resource file: "+window.designModeDataUrl+". Request status: "+A.status),x(null)}))}))}}get sampleData(){return this._sampleData}set desiredClasses(x){var A=this._desiredClasses;this._desiredClasses=x,this._desiredClassesArray=VisiWin.Utilities.csvToArray(x),this._refresh(),this._updateLayoutBase("property","desiredClasses",this._desiredClasses,A)}get desiredClasses(){return this._desiredClasses}set desiredGroups(x){var A=this._desiredGroups;this._desiredGroups=x,this._desiredGroupsArray=VisiWin.Utilities.csvToArray(x),this._refresh(),this._updateLayoutBase("property","desiredGroups",this._desiredGroups,A)}get desiredGroups(){return this._desiredGroups}set desiredStates(x){var A=this._desiredStates;this._desiredStates=x,this._desiredStatesArray=VisiWin.Utilities.csvToArray(x),this._refresh(),this._updateLayoutBase("property","desiredStates",this._desiredStates,A)}get desiredStates(){return this._desiredStates}set maxPriority(x){this._maxPriority;this._maxPriority=x,this._refresh()}get maxPriority(){return this._maxPriority}set minPriority(x){this._minPriority;this._minPriority=x,this._refresh()}get minPriority(){return this._minPriority}get sortMode(){return this._sortMode}set sortMode(x){this._sortMode=x}preCheck(x,A){var V=0;return VisiWin.AppServices.CurrentAlarmService||(VisiWin.Application.ErrorLog.log("VisiWin.UI.CurrentAlarmProvider: CurrentAlarmService is not available."),V++),V}createTemplate(){return this.element.style.display="none",this.currentAlarmList=new WinJS.Binding.List([],{proxy:!0}),null}createHandler(){this.onLanguageChanged=this.updateOnLanguageChanged.bind(this),this.onThemeChange=this.updateOnThemeChange.bind(this)}removeHandler(){this.onLanguageChanged=null,this.onThemeChanged=null}updateOnLanguageChanged(){this._refresh()}updateOnThemeChange(){this._refresh()}attach(){let x=null;return this.isAttached||(x=super.attach(),this._refresh(),this.createHandler()),x}detach(){let x=null;if(this.isAttached){x=super.detach(),this._currentAlarm&&(this._currentAlarm.ChangeAlarm.remove(this._currentAlarmChange.bind(this)),this._currentAlarm.InitAlarm.remove(this._currentAlarmChange.bind(this)),this._currentAlarm.NewAlarm.remove(this._currentAlarmChange.bind(this)),this._currentAlarm.ClearAlarm.remove(this._currentAlarmChange.bind(this)),this._currentAlarm.ReleaseCurrentAlarms(),this._currentAlarm=null);try{let x=this;this.currentAlarmList.dataSource._forEachBinding((function getItem(A){x.currentAlarmList._dataSource._releaseBinding(A)})),this.currentAlarmList.unbind(),this.currentAlarmList=null}catch(x){}this.removeHandler()}return x}afterInit(){VisiWin.Utilities.isInDesignMode()||(this._alarmService=VisiWin.AppServices.CurrentAlarmService)}insertSampleData(){if(window.designModeData&&this.currentAlarmList)for(var x=0;x<window.designModeData.length;x++){var A=window.designModeData[x];A.ActivationTime=new Date,A.DeactivationTime=new Date,A.AcknowledgeTime=new Date,this._currentAlarmChange(window.designModeData[x])}}_mixProperties(target,source){try{if("string"==typeof source)if(source.indexOf('"')>0)try{source=JSON.parse(source)}catch(x){}else eval("source = "+source);if("object"!=typeof source)return null;for(var item in source)(0==item.indexOf("localizable")||0==item.indexOf("localization")&&VisiWin.Resources.strings&&VisiWin.Resources.strings[VisiWin.AppServices.LanguageService.currentLanguage])&&(target[item.substr(11)]=VisiWin.Resources.strings[VisiWin.AppServices.LanguageService.currentLanguage][source[item]]),target[item]=source[item]}catch(x){return null}}_translateResource(x){var A=null;if(VisiWin.Resources.styles.stateinfo.currentAlarmProvider){A=VisiWin.Resources.styles.stateinfo.currentAlarmProvider;var V=x.Class.Name,R=VisiWin.System.Alarm.AlarmState[x.AlarmState],D=x.Group.Name;A.classes&&A.classes[V]&&A.classes[V][R]&&this._mixProperties(x,A.classes[V][R]),A.groups&&A.groups[D]&&this._mixProperties(x,A.groups[D]),A.states&&A.states[R]&&this._mixProperties(x,A.states[R])}}_currentAlarmChange(x){if(!VisiWin.Utilities.isInDesignMode()){let A=this._currentAlarm.Alarms.indexOf(x);-1==this._orignalAlarms.findIndex(A=>A.ID===x.ID)&&this._orignalAlarms.push(Object.assign({},this._currentAlarm.Alarms[A]))}let A=Object.assign({},x),V=Object.assign({},x.StateInfo),R=Object.assign({},x.Class),D=Object.assign({},x.Group);A.StateInfo=V,A.Class=R,A.Group=D,A.activationTime=A.ActivationTime,A.time=A.ActivationTime.toLocaleTimeString();switch(A.AlarmState){case 0:case 1:A.alarmStateTime=A.ActivationTime;break;case 4:A.alarmStateTime=A.AcknowledgeTime||A.ActivationTime;break;case 2:case 8:A.DeactivationTime>A.AcknowledgeTime?A.alarmStateTime=A.DeactivationTime:A.alarmStateTime=A.AcknowledgeTime;break;case 16:A.alarmStateTime=A.DeactivationTime||A.ActivationTime;break;case 32:default:A.alarmStateTime=A.ActivationTime}let N=this._orignalAlarms.findIndex(A=>A.ID===x.ID);if(N>-1)switch(this._orignalAlarms[N].ID===A.ID&&(this._orignalAlarms[N]=A),this.sortMode){case"NewestFaultOnTop":this._orignalAlarms.sort((function(x,A){return A.ActivationTime-x.ActivationTime}));break;case"FirstUpFaultOnTop":this._orignalAlarms.sort((function(x,A){return x.ActivationTime-A.ActivationTime}));break;default:this._orignalAlarms.sort((function(x,A){return A.alarmStateTime-x.alarmStateTime}))}this._translateResource(A);var U={};U.sender=this,U.alarmItem=A,U.senderName="alarmItemChange",this.dispatchEvent("alarmItemChange",U),A=U.alarmItem,U=null;var B=!1;if(this.currentAlarmList.length)for(var F=0;F<this.currentAlarmList.length;F++){if(this.currentAlarmList.getItem(F).data.ID==A.ID){const x=this._filterAlarms(A,this._currentAlarmFilter);if(A.AlarmState==VisiWin.System.Alarm.AlarmState.Cleared||!1===x){let x=this._orignalAlarms.findIndex(x=>x.ID===A.ID);this._orignalAlarms.splice(x,1);let V=this.currentAlarmList.splice(F,1);for(var W in V[0])V[0][W]=null,delete V[0][W];V[0]={},V[0]=null}else this.currentAlarmList.setAt(F,A);B=!0;break}}if(!B&&A.AlarmState!=VisiWin.System.Alarm.AlarmState.Cleared)this.currentAlarmList.push(A);if(this._currentAlarm&&this._orignalAlarms&&this._orignalAlarms.length){let x=this._orignalAlarms.findIndex(x=>x.ID===A.ID);if(x>-1){let V=this.currentAlarmList.indexOf(A);V>-1&&this.currentAlarmList.move(V,x)}}}_refresh(){if(this._orignalAlarms=[],this._currentAlarm){this._currentAlarm.ChangeAlarm.remove(this._currentAlarmChange.bind(this)),this._currentAlarm.InitAlarm.remove(this._currentAlarmChange.bind(this)),this._currentAlarm.NewAlarm.remove(this._currentAlarmChange.bind(this)),this._currentAlarm.ClearAlarm.remove(this._currentAlarmChange.bind(this)),this._currentAlarm.ReleaseCurrentAlarms(),this._currentAlarm=null;for(var x=0;x<this.currentAlarmList.length;x++){let x=this.currentAlarmList.pop();x=null}this.currentAlarmList.length=0}if(!VisiWin.Utilities.isInDesignMode()){this._currentAlarmFilter=this._alarmService.createAlarmFilter(),this._currentAlarmFilter.DesiredClasses=this._desiredClassesArray,this._currentAlarmFilter.DesiredGroups=this._desiredGroupsArray;let x=[],A=!1;for(let V=0;V<this._desiredStatesArray.length;V++){if(VisiWin.isString(this._desiredStatesArray[V]))if(1===this._desiredStatesArray[V].length){const R=parseInt(this._desiredStatesArray[V]);if(VisiWin.isNumber(R)){const D=VisiWin.System.Alarm.AlarmState[R];VisiWin.isString(D)?x.push(R):(VisiWin.Application.WarnLog.log(`Historical alarm filter 'DesiredStates' is not valid '${this._desiredStatesArray[V]}' does not exists`),A=!0)}}else{const R=VisiWin.Internal.EnumHelper.convertToNumber(VisiWin.System.Alarm.AlarmState,this._desiredStatesArray[V]);VisiWin.isNullOrUndefined(R)?(VisiWin.Application.WarnLog.log(`Historical alarm filter 'DesiredStates' is not valid '${this._desiredStatesArray[V]}' does not exists`),A=!0):x.push(R)}if(VisiWin.isNumber(this._desiredStatesArray[V])){const R=VisiWin.System.Alarm.AlarmState[this._desiredStatesArray[V]];VisiWin.isString(R)?x.push(this._desiredStatesArray[V]):(VisiWin.Application.WarnLog.log(`Historical alarm filter 'DesiredStates' is not valid '${this._desiredStatesArray[V]}' does not exists`),A=!0)}}A&&(x=[]),this._desiredStatesArray=x,this._currentAlarmFilter.DesiredStates=this._desiredStatesArray,this._currentAlarmFilter.MaxPriority=this.maxPriority,this._currentAlarmFilter.MinPriority=this.minPriority,this.requestID=VisiWin.AppServices.Impl.CurrentAlarmService.createRequestId(),this._currentAlarm=this._alarmService.getCurrentAlarms(this._currentAlarmFilter),this._currentAlarm.ChangeAlarm.add(this._currentAlarmChange.bind(this)),this._currentAlarm.InitAlarm.add(this._currentAlarmChange.bind(this)),this._currentAlarm.NewAlarm.add(this._currentAlarmChange.bind(this)),this._currentAlarm.ClearAlarm.add(this._currentAlarmChange.bind(this))}}_filterAlarms(x,A){let V=!1,R=!1,D=!1,N=!1,U=!1;if((A.DesiredClasses.length>0&&A.DesiredClasses.indexOf(x.Class.Name)>-1||0===A.DesiredClasses.length)&&(V=!0),0===A.DesiredGroups.length&&(R=!0),R||A.DesiredGroups.length>=0&&A.DesiredGroups.indexOf(x.Group.Name)>-1&&(R=!0),R||A.DesiredGroups.length>=0&&A.DesiredGroups.indexOf(x.Group.GroupTree)>-1&&(R=!0),!R)for(let V=0;V<A.DesiredGroups.length;V++){if(x.Group.GroupTree.includes(A.DesiredGroups[V],0)){R=!0;break}}return(A.DesiredStates.length>=0&&A.DesiredStates.indexOf(x.AlarmState)>-1||0===A.DesiredStates.length)&&(D=!0),(-1!==A.MaxPriority&&x.Priority<=A.MaxPriority||-1===A.MaxPriority)&&(N=!0),(-1!==A.MinPriority&&x.Priority>=A.MinPriority||-1===A.MinPriority)&&(U=!0),!!(V&&R&&D&&N&&U)}dispose(){return this._currentAlarm&&(this._currentAlarm.ChangeAlarm.remove(this._currentAlarmChange.bind(this)),this._currentAlarm.InitAlarm.remove(this._currentAlarmChange.bind(this)),this._currentAlarm.NewAlarm.remove(this._currentAlarmChange.bind(this)),this._currentAlarm.ClearAlarm.remove(this._currentAlarmChange.bind(this)),this._currentAlarm.ReleaseCurrentAlarm(),this._currentAlarm=null),super.dispose()}}CurrentAlarmProvider.namespace="VisiWin.UI",CurrentAlarmProvider.controlName="CurrentAlarmProvider",CurrentAlarmProvider.propertyList={sampleDataLoaded:{propertyType:"event"},alarmItemChange:{propertyType:"event"},sampleData:{propertyType:"custom"},desiredClasses:{propertyType:"custom"},desiredGroups:{propertyType:"custom"},desiredStates:{propertyType:"custom"},maxPriority:{propertyType:"custom"},minPriority:{propertyType:"custom"},sortMode:{propertyType:"custom"}},UI.CurrentAlarmProvider=CurrentAlarmProvider}(UI=VisiWin.UI||(VisiWin.UI={}))}(VisiWin||(VisiWin={})),function(VisiWin){var UI;!function(UI){class HistoricalAlarmProvider extends VisiWin.UI.ProviderBase{constructor(x,A){super(x,A),this.historicalAlarmList=[],this._historicalAlarmsFilter=null,this._historicalAlarmsService=null,this._historicalAlarms=null,this._minDate=new Date(0),this._maxDate=new Date(Date.now()),this._sampleData=null,this._desiredClasses=null,this._desiredClassesArray=[],this._desiredGroups=null,this._desiredGroupsArray=[],this._desiredStates=null,this._desiredStatesArray=[],this._maxPriority=-1,this._minPriority=-1,this.addPropertyList(HistoricalAlarmProvider,HistoricalAlarmProvider.propertyList),this.defaultConstructor(x,A,VisiWin.UI.HistoricalAlarmProvider.controlName,null),VisiWin.AppServices.HistoricalAlarmService&&(this._historicalAlarmsService=VisiWin.AppServices.HistoricalAlarmService),this.addEventListener("updateAlarmListEvent",this._refresh.bind(this))}dateAdd(x,A,V){var R=new Date(x),checkRollover=function(){R.getDate()!=x.getDate()&&R.setDate(0)};switch(A.toLowerCase()){case"year":R.setFullYear(R.getFullYear()+V),checkRollover();break;case"quarter":R.setMonth(R.getMonth()+3*V),checkRollover();break;case"month":R.setMonth(R.getMonth()+V),checkRollover();break;case"week":R.setDate(R.getDate()+7*V);break;case"day":R.setDate(R.getDate()+V);break;case"hour":R.setTime(R.getTime()+36e5*V);break;case"minute":R.setTime(R.getTime()+6e4*V);break;case"second":R.setTime(R.getTime()+1e3*V);break;default:R=void 0}return R}dateSub(x,A,V){var R=new Date(x),checkRollover=function(){R.getDate()!=x.getDate()&&R.setDate(0)};switch(A.toLowerCase()){case"year":R.setFullYear(R.getFullYear()-V),checkRollover();break;case"quarter":R.setMonth(R.getMonth()-3*V),checkRollover();break;case"month":R.setMonth(R.getMonth()-V),checkRollover();break;case"week":R.setDate(R.getDate()-7*V);break;case"day":R.setDate(R.getDate()-V);break;case"hour":R.setTime(R.getTime()-36e5*V);break;case"minute":R.setTime(R.getTime()-6e4*V);break;case"second":R.setTime(R.getTime()-1e3*V);break;default:R=void 0}return R}set minDate(x){var A=this._minDate;this._minDate=x,this._updateLayoutBase("property","minDate",x,A)}get minDate(){return this._minDate}set maxDate(x){var A=this._maxDate;this._maxDate=x,this._updateLayoutBase("property","maxDate",x,A)}get maxDate(){return this._maxDate}set period(x){switch(Array.isArray(x)&&(x=x[0]),this._period=x,x){case"hour":this.maxDate=new Date,this.minDate=this.dateSub(this.maxDate,"hour",1);break;case"day":this.maxDate=new Date,this.minDate=this.dateSub(this.maxDate,"day",1);break;case"week":this.maxDate=new Date,this.minDate=this.dateSub(this.maxDate,"week",1)}}get period(){return this._period}set sampleData(x){if(VisiWin.Utilities.isInDesignMode()&&this._sampleData!=x){var A=null;VisiWin.Application.Settings.UI.DirectoryNames.DesignModeData?A=VisiWin.Application.Settings.UI.DirectoryNames.DesignModeData:(VisiWin.Application.ErrorLog.log('VisiWin.UI.HistoricalAlarmProvider: setting value [DirectoryNames.DesignModeData] not set. Use default directory: ".vwdesigner/designmodedata".'),A=".vwdesigner/designmodedata"),this._sampleData=x;var V=this,R=A+"/"+this._sampleData;new Promise((function(x,A){window.designModeDataUrl=R,VisiWin.Utilities.xhr({url:R,data:{}}).then((function completed(A){if(200===A.status){try{var R=JSON.parse(A.responseText);if(R&&R.samples&&R.samples.historicalAlarmProvider){window.designModeData=R.samples.historicalAlarmProvider;var D={};D.sender=this,D.senderName="designModeDataLoaded",V.dispatchEvent("designModeDataLoaded",D),D=null}else VisiWin.Application.ErrorLog.log('VisiWin.UI.HistoricalAlarmProvider: Parse error in resource file, no "samples" and/or "samples.historicalAlarmProvider" object in: '+window.designModeDataUrl+".")}catch(x){VisiWin.Application.ErrorLog.log("VisiWin.UI.HistoricalAlarmProvider: Parse error in resource file: "+window.designModeDataUrl+".")}x(null)}else{A.status;VisiWin.Application.ErrorLog.log("VisiWin.UI.HistoricalAlarmProvider: can't read resource file: "+window.designModeDataUrl+". Result status: "+A.status),x(null)}}),(function error(A){VisiWin.Application.ErrorLog.log("VisiWin.UI.HistoricalAlarmProvider: can't read resource file: "+window.designModeDataUrl+". Request status: "+A.status),x(null)}))}))}}get sampleData(){return this._sampleData}set desiredClasses(x){var A=this._desiredClasses;this._desiredClasses=x,this._desiredClassesArray=VisiWin.Utilities.csvToArray(x),this._updateLayoutBase("property","desiredClasses",this._desiredClasses,A)}get desiredClasses(){return this._desiredClasses}set desiredGroups(x){var A=this._desiredGroups;this._desiredGroups=x,this._desiredGroupsArray=VisiWin.Utilities.csvToArray(x),this._updateLayoutBase("property","desiredGroups",this._desiredGroups,A)}get desiredGroups(){return this._desiredGroups}set desiredStates(x){var A=this._desiredStates;this._desiredStates=x,this._desiredStatesArray=VisiWin.Utilities.csvToArray(x),this._updateLayoutBase("property","desiredStates",this._desiredStates,A)}get desiredStates(){return this._desiredStates}set maxPriority(x){var A=this._maxPriority;this._maxPriority=x,this._updateLayoutBase("property","desiredStates",x,A)}get maxPriority(){return this._maxPriority}set minPriority(x){var A=this._minPriority;this._minPriority=x,this._updateLayoutBase("property","desiredStates",x,A)}get minPriority(){return this._minPriority}updateAlarmList(x){this.dispatchEvent("updateAlarmListEvent",{})}attach(){let x=null;return this.isAttached||(x=super.attach(),VisiWin.Utilities.isInDesignMode()&&this._refresh()),x}detach(){let x=null;return this.isAttached&&(x=super.detach(),this._historicalAlarms&&(this._historicalAlarms.GetHistoricalDataCompleted.remove(this._historicalAlarmsChange.bind(this)),this._historicalAlarms=null),this.historicalAlarmList=null),x}createTemplate(){return this.element.style.display="none",VisiWin.Utilities.addClass(this.element,"vw-historicalalarmlistprovider"),this.historicalAlarmList=new WinJS.Binding.List([],{proxy:!0}),null}createHandler(x,A){this.onLanguageChanged=this.updateOnLanguageChanged.bind(this),this.onThemeChange=this.updateOnThemeChange.bind(this)}removeHandler(){this.onLanguageChanged=null,this.onThemeChanged=null}updateOnLanguageChanged(){if(this.historicalAlarmList)for(;this.historicalAlarmList.length>0;)this.historicalAlarmList.pop();this._refresh()}updateOnThemeChange(){this._refresh()}insertSampleData(){if(window.designModeData&&this.historicalAlarmList)for(var x=0;x<window.designModeData.length;x++){var A=window.designModeData[x];A.ActivationTime=new Date,A.DeactivationTime=new Date,A.AcknowledgeTime=new Date,this._historicalAlarmsSample(window.designModeData[x])}}_mixProperties(target,source){try{if("string"==typeof source)if(source.indexOf('"')>0)try{source=JSON.parse(source)}catch(x){}else eval("source = "+source);if("object"!=typeof source)return null;for(var item in source)0==item.indexOf("localizable")&&VisiWin.Resources.strings&&VisiWin.Resources.strings[VisiWin.AppServices.LanguageService.currentLanguage]&&(target[item.substr(11)]=VisiWin.Resources.strings[VisiWin.AppServices.LanguageService.currentLanguage][source[item]]),target[item]=source[item]}catch(x){return null}}_translateResource(x){var A=null;switch(x.AlarmState){case 0:case 1:x.alarmStateTime=x.ActivationTime;break;case 4:x.alarmStateTime=x.AcknowledgeTime;break;case 2:case 8:x.DeactivationTime>x.AcknowledgeTime?x.alarmStateTime=x.DeactivationTime:x.alarmStateTime=x.AcknowledgeTime;break;case 16:x.DeactivationTime>x.AcknowledgeTime?x.alarmStateTime=x.DeactivationTime:x.AcknowledgeTime>x.DeactivationTime?x.alarmStateTime=x.AcknowledgeTime:x.alarmStateTime=x.DeactivationTime;break;case 32:default:x.alarmStateTime=x.ActivationTime}if(VisiWin.Resources.styles.stateinfo.historicalAlarmProvider){A=VisiWin.Resources.styles.stateinfo.historicalAlarmProvider;var V=x.Class.Name,R=VisiWin.System.Alarm.AlarmState[x.AlarmState],D=x.Group.Name;A.classes&&A.classes[V]&&A.classes[V][R]&&this._mixProperties(x,A.classes[V][R]),A.groups&&A.groups[D]&&this._mixProperties(x,A.groups[D]),A.states&&A.states[R]&&this._mixProperties(x,A.states[R])}}_historicalAlarmsChange(x){let A;try{A=x.HistoricalAlarms.reverse()}catch(V){A=x.HistoricalAlarms}for(var V=0;V<x.HistoricalAlarms.length;V++)this._historicalAlarmsSample(A[V])}_historicalAlarmsSample(x){var A=x;A.activationTime=x.ActivationTime,A.time=x.ActivationTime.toLocaleTimeString(),this._translateResource(A);var V={};V.sender=this,V.alarmItem=A,V.senderName="alarmItemChange",this.dispatchEvent("alarmItemChange",V),A=V.alarmItem,V=null;this.historicalAlarmList.push(A)}_refresh(){if(this.period=this._period,this._historicalAlarms&&(this._historicalAlarms.GetHistoricalDataCompleted.remove(this._historicalAlarmsChange.bind(this)),this._historicalAlarms=null),!VisiWin.Utilities.isInDesignMode()&&this.historicalAlarmList){this._historicalAlarmsFilter=this._historicalAlarmsService.createHistoricalAlarmFilter(),this._historicalAlarmsFilter.DesiredClasses=this._desiredClassesArray,this._historicalAlarmsFilter.DesiredGroups=this._desiredGroupsArray;let x=[],A=!1;for(let V=0;V<this._desiredStatesArray.length;V++){if(VisiWin.isString(this._desiredStatesArray[V]))if(1===this._desiredStatesArray[V].length){const R=parseInt(this._desiredStatesArray[V]);if(VisiWin.isNumber(R)){const D=VisiWin.System.Alarm.AlarmState[R];VisiWin.isString(D)?x.push(R):(VisiWin.Application.WarnLog.log(`Historical alarm filter 'DesiredStates' is not valid '${this._desiredStatesArray[V]}' does not exists`),A=!0)}}else{const R=VisiWin.Internal.EnumHelper.convertToNumber(VisiWin.System.Alarm.AlarmState,this._desiredStatesArray[V]);VisiWin.isNullOrUndefined(R)?(VisiWin.Application.WarnLog.log(`Historical alarm filter 'DesiredStates' is not valid '${this._desiredStatesArray[V]}' does not exists`),A=!0):x.push(R)}if(VisiWin.isNumber(this._desiredStatesArray[V])){const R=VisiWin.System.Alarm.AlarmState[this._desiredStatesArray[V]];VisiWin.isString(R)?x.push(this._desiredStatesArray[V]):(VisiWin.Application.WarnLog.log(`Historical alarm filter 'DesiredStates' is not valid '${this._desiredStatesArray[V]}' does not exists`),A=!0)}}A&&(x=[]),this._desiredStatesArray=x,this._historicalAlarmsFilter.DesiredStates=this._desiredStatesArray,this._historicalAlarmsFilter.MaxPriority=this.maxPriority,this._historicalAlarmsFilter.MinPriority=this.minPriority,this._historicalAlarmsFilter.MaxTime=this._maxDate,this._historicalAlarmsFilter.MinTime=this._minDate,this._historicalAlarms=this._historicalAlarmsService.createHistoricalAlarmRequest(this._historicalAlarmsFilter),this._historicalAlarms.GetHistoricalDataCompleted.add(this._historicalAlarmsChange.bind(this)),this._historicalAlarms.GetHistoricalDataAsync()}}dispose(){return this._historicalAlarms&&(this._historicalAlarms.GetHistoricalDataCompleted.remove(this._historicalAlarmsChange.bind(this)),this._historicalAlarms=null),null!=this._historicalAlarmsService&&this._historicalAlarmsService.removeEventListener("updateAlarmListEvent",this._refresh.bind(this)),super.dispose()}_createRequestId(){return"HistoricalAlarmProvider"+VisiWin.UI.HistoricalAlarmProvider._counter++}}HistoricalAlarmProvider.namespace="VisiWin.UI",HistoricalAlarmProvider.controlName="HistoricalAlarmProvider",HistoricalAlarmProvider._counter=0,HistoricalAlarmProvider.propertyList={sampleDataLoaded:{propertyType:"event"},alarmItemChange:{propertyType:"event"},updateAlarmListEvent:{propertyType:"event"},sampleData:{propertyType:"custom"},desiredClasses:{propertyType:"custom"},desiredGroups:{propertyType:"custom"},desiredStates:{propertyType:"custom"},maxPriority:{propertyType:"custom"},minPriority:{propertyType:"custom"},maxDate:{propertyType:"custom"},minDate:{propertyType:"custom"},period:{propertyType:"custom",defaultValue:"hour"}},UI.HistoricalAlarmProvider=HistoricalAlarmProvider}(UI=VisiWin.UI||(VisiWin.UI={}))}(VisiWin||(VisiWin={}));var __awaiter=this&&this.__awaiter||function(x,A,V,R){return new(V||(V=Promise))((function(D,N){function fulfilled(x){try{step(R.next(x))}catch(x){N(x)}}function rejected(x){try{step(R.throw(x))}catch(x){N(x)}}function step(x){x.done?D(x.value):function adopt(x){return x instanceof V?x:new V((function(A){A(x)}))}(x.value).then(fulfilled,rejected)}step((R=R.apply(x,A||[])).next())}))},VisiWin,VisiWin,VisiWin,VisiWin;!function(x){!function(A){"use strict";class RecipeProvider extends x.UI.ProviderBase{constructor(A,V){super(A,V),this.listViewId=null,this.aktRecipeFileList=null,this._recipeService=null,this._recipeClassList=null,this._recipeClassArray=null,this._recipeFileList=null,this.recipeFileArray=null,this.addPropertyList(RecipeProvider,RecipeProvider.propertyList),this.defaultConstructor(A,V,x.UI.RecipeProvider.controlName,null)}set recipeClassList(x){this._recipeClassList=x}get recipeClassList(){return this._recipeClassList}set recipeFileList(x){this._recipeFileList=x,this.dispatchEvent("recipeFileUpdate",this)}get recipeFileList(){return this._recipeFileList}createTemplate(){return null}createHandler(){this.onLanguageChanged=this.updateOnLanguageChanged.bind(this),this.onThemeChange=this.updateOnThemeChange.bind(this)}removeHandler(){this.onLanguageChanged=null,this.onThemeChanged=null}updateOnLanguageChanged(){this._refresh()}updateOnThemeChange(){this._refresh()}attach(){let x=null;return this.isAttached||(x=super.attach(),this._refresh()),x}detach(){let x=null;return this.isAttached&&(x=super.detach(),this.removeHandler()),x}setRecipeClassName(x){this._setRecipeClass(x)}_setRecipeClass(x){return __awaiter(this,void 0,void 0,(function*(){var A=x;"number"==typeof x&&x<this._recipeClassList.length&&(A=this._recipeClassList[x]);let V=yield this._recipeService.GetRecipeClassAsync(A);if(this._currentRecipeClass=V.RecipeClass,this.recipeFileList=this._currentRecipeClass.FileNames,this.listViewId){var R=document.getElementById(this.listViewId);R&&R.winControl&&(R.winControl.itemDataSource=this.recipeFileArray.dataSource)}}))}transferRecipeBufferToFile(x,A){return __awaiter(this,void 0,void 0,(function*(){if(this._currentRecipeClass){return(yield this._currentRecipeClass.SaveToFileFromBufferAsync(x,A,!0)).Result}}))}transferRecipeBufferToSPS(){return __awaiter(this,void 0,void 0,(function*(){if(this._currentRecipeClass){return(yield this._currentRecipeClass.WriteBufferToProcessAsync()).Result}}))}transferRecipeFileToBuffer(x){return __awaiter(this,void 0,void 0,(function*(){if(this._currentRecipeClass){return(yield this._currentRecipeClass.LoadFromFileToBufferAsync(x)).Result}}))}transferRecipeFileToSPS(x){return __awaiter(this,void 0,void 0,(function*(){if(this._currentRecipeClass){return(yield this._currentRecipeClass.LoadFromFileToProcessAsync(x)).Result}}))}transferRecipeSPSToBuffer(){return __awaiter(this,void 0,void 0,(function*(){if(this._currentRecipeClass){return(yield this._currentRecipeClass.ReadProcessToBufferAsync()).Result}}))}deleteRecipeFile(x){return __awaiter(this,void 0,void 0,(function*(){if(this._currentRecipeClass){return(yield this._currentRecipeClass.DeleteFileAsync(x)).Result}}))}afterInit(){return __awaiter(this,void 0,void 0,(function*(){this._recipeService=x.System.Recipe.RecipeService.getService(),this._recipeService&&(this.recipeClassList=this._recipeService.RecipeClassNames)}))}insertSampleData(){}_refresh(){}dispose(){return super.dispose()}}RecipeProvider.namespace="VisiWin.UI",RecipeProvider.controlName="RecipeProvider",RecipeProvider.propertyList={recipeFileUpdate:{propertyType:"event"},recipeClassList:{propertyType:"custom"},recipeFileList:{propertyType:"custom"},aktRecipeClass:{propertyType:"event"},aktRecipeFileList:{propertyType:"member"},listViewId:{propertyType:"member"}},A.RecipeProvider=RecipeProvider}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class VariableProvider extends x.UI.ProviderBase{constructor(A,V){super(A,V),this._varItems=[],this._variableNameList=null,this._variableNameArray=null,this._variableList=null,this.addPropertyList(VariableProvider,VariableProvider.propertyList),this.defaultConstructor(A,V,x.UI.VariableProvider.controlName,null)}set variableNameList(A){this._variableNameList=A,this._variableNameArray=x.Utilities.csvToArray(A),this._varItems=[];for(var V=0;V<this._variableNameArray.length;V++)this._varItems[V].name=this._variableNameArray[V];this._variableList=new WinJS.Binding.List(this._varItems,{proxy:!0})}get variableNameList(){return this._variableNameList}get variableList(){return this._variableList}preCheck(x,A){return 0}createTemplate(){return null}createHandler(){this.onLanguageChanged=this.updateOnLanguageChanged.bind(this),this.onThemeChange=this.updateOnThemeChange.bind(this)}removeHandler(){this.onLanguageChanged=null,this.onThemeChanged=null}updateOnLanguageChanged(){this._refresh()}updateOnThemeChange(){this._refresh()}attach(){return super.attach(),this._refresh(),this.createHandler(),null}detach(){return super.detach(),null}afterInit(){}_refresh(){}dispose(){return super.dispose()}}VariableProvider.namespace="VisiWin.UI",VariableProvider.controlName="VariableProvider",VariableProvider.propertyList={variableNameList:{propertyType:"custom",type:"any"},variableList:{propertyType:"custom",type:"any"}},A.VariableProvider=VariableProvider}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(x){x.WINCONTROL="winControl",x.DEFAULT_NAMESPACE="VisiWin.UI",x.CSS_CLASSPREFIX="vw",x.ATTRIB_DATA_WIN_ACTIONS="data-win-actions",x.ATTRIB_DATA_WIN_OPTIONS="data-win-options",x.ATTRIB_DATA_WIN_CONTROL="data-win-control",x.ATTRIB_DATA_REF_CONTROL="data-ref",x.ATTRIB_DATA_REF_ELEMENT="data-ref-element"}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";const V=x.UI.Internal;class ControlBase{constructor(V,R){this.namespace=A.DEFAULT_NAMESPACE,this._isUserControl=null,this._changeMediaArgs=null,this._firstAttach=!0,this._boundFocusOn=this._focusOn.bind(this),this._boundFocusOff=this._focusOff.bind(this),this._boundAuthHandler=this._authHandler.bind(this),this._authObj=null,this.mutationElement="element",this.resizedElement="element",this.maxInterrations=10,this.optionsList=[],this.eventList=[],this.childElements=[],this.childControls=[],this.arrayObjects=[],this.inlineOptions={},this._varBinding={},this.themeChangeProperties={},this._listeners={},this._observeListenerList={},this._mutationObserver=null,this._resizeObserver=null,this._pointerEventsArgs="",this._currentPage=null,this._boundHoverIn=this._hoverIn.bind(this),this._boundHoverOut=this._hoverOut.bind(this),this._boundPointerUpBase=this._pointerUpHandlerBase.bind(this),this._boundPointerDownHandlerBase=this._pointerDownHandlerBase.bind(this),this._boundPointerClickUpBase=this._pointerClickUpHandlerBase.bind(this),this._boundPointerClickHandlerBase=this._pointerClickHandlerBase.bind(this),this.boundPreventEvent=this._preventEvent.bind(this),this._boundResizeHandlerDesignMode=null,this._boundResizeHandlerRunMode=null,this._boundResizeHandler=null,this._boundMutationHandlerDesignMode=null,this._boundMutationHandlerRunMode=null,this._boundMutationHandler=null,this._boundObserveHandler=this._observeHandler.bind(this),this._boundChangeLanguageBase=this._changeLanguageBase.bind(this),this._boundChangeColorBase=this._changeColorBase.bind(this),this._boundChangeMediaBase=this._changeMediaBase.bind(this),this.inputEventsEnable=!1,this.cssClassPrefix=A.CSS_CLASSPREFIX,this._disabled=!1,this._visibilityDisplay=null,this._visibility=A.Enums.Visibility.Visible,this._authorizationMode=null,this._authorized=!0,this._authorizationRight=null,this._hover=!1,this._focused=!1,this._scale=null,this._dataContext=null,this._parentElement=null,this._parentControl=null,this._resourceName=null,this._controlType=null,this._classNames=null,this._actionType=null,this._style=null,this._resultStyle=null,this._controlId=null,this._registerSourceId=null,this._blockAction=!1,this.eventHandlerEnabled=!1,this._updateLayoutEnable=!1,this._isAttached=!1,this._updateLayoutWork=0,this._updateColorWork=0,this.disposeSubTree=function(A,V){if(A){if(A.querySelectorAll){const V="[data-win-control]",R=A.querySelectorAll(V);let D=0;const N=R.length;for(;D<N;){const A=R[D];if(A.winControl&&A.winControl.dispose)try{A.winControl.dispose(),delete A.winControl,A.winControl&&x.Application.WarnLog.log(A.winControl.__VWCONTROL__+".disposeSubTree: control not deleted."),A.parentElement&&A.parentElement.removeChild(A)}catch(V){x.Application.WarnLog.log(A.winControl.__VWCONTROL__+".disposeSubTree: problem in dispose.")}if(A.dispose)try{A.dispose()}catch(x){}D++}}if(V&&A&&A.winControl&&A.winControl.dispose)try{A.winControl.dispose(),delete A.winControl,A.parentElement&&A.parentElement.removeChild(A)}catch(V){x.Application.WarnLog.log(A.winControl.__VWCONTROL__+".disposeSubTree: problem in dispose.")}this.navigationService.setPageState(this._currentPage,x.UI.PageState.PageDispose)}},this._currentPage=this.navigationService.getCurrentPage(),this.addPropertyList(ControlBase,ControlBase.controlBasePropertyList),this.element=V||document.createElement("div"),R=R||{},this.inlineOptions=R,this.designerType=R.designerType||A.Enums.DesignerType.Control,this.isInDesignMode=x.Utilities.isInDesignMode(),this.isInRunMode=!this.isInDesignMode,R.style&&"Default"!==R.style&&"Default.Default"!==R.style&&(this.style=R.style)}returnPreventDefaults(x){return!this.enablePreventEvents||this.boundPreventEvent(x)}_hoverIn(A){x.Resources.pointerArgs=A,A.srcElement===this.element&&(this.hover=!0)}_hoverOut(A){x.Resources.pointerArgs=A,A.srcElement===this.element&&(this.hover=!1)}_pointerUpHandlerBase(V){x.Utilities.removeEventListener(this.element,A.PointerEventType.pointerup,this._boundPointerUpBase,!0);let R=x.Utilities.extendPointerEventArgs(this,V);this.dispatchEvent(A.ControlEvent.onUp,R),R=null}_pointerDownHandlerBase(V){x.Utilities.addEventListener(this.element,A.PointerEventType.pointerup,this._boundPointerUpBase,!0);let R=x.Utilities.extendPointerEventArgs(this,V);this.dispatchEvent(A.ControlEvent.onDown,R),R=null}_pointerClickUpHandlerBase(V){let R=x.Utilities.extendPointerEventArgs(this,V);this.dispatchEvent(A.ControlEvent.onClick,R),R=null,this.element&&x.Utilities.removeEventListener(this.element,A.PointerEventType.pointerup,this._boundPointerClickUpBase)}_pointerClickHandlerBase(V){x.Utilities.addEventListener(this.element,A.PointerEventType.pointerup,this._boundPointerClickUpBase,!0)}_preventEvent(x){const A=x||window.event;return A.preventDefault&&A.preventDefault(),A.stopPropagation&&A.stopPropagation(),A.cancelBubble&&(A.cancelBubble=!0),A.returnValue&&(A.returnValue=!1),!1}_initHandler(){this.element&&(x.Utilities.addEventListener(this.element,A.PointerEventType.pointerdown,this._boundPointerDownHandlerBase),x.Utilities.addEventListener(this.element,A.PointerEventType.pointerdown,this._boundPointerClickHandlerBase))}_removeHandler(){this.element&&(x.Utilities.removeEventListener(this.element,A.PointerEventType.pointerdown,this._boundPointerDownHandlerBase),x.Utilities.removeEventListener(this.element,A.PointerEventType.pointerdown,this._boundPointerClickHandlerBase),x.Utilities.removeEventListener(this.element,A.PointerEventType.pointerup,this._boundPointerUpBase),x.Utilities.removeEventListener(this.element,A.PointerEventType.pointerup,this._boundPointerClickUpBase))}set borderWidth(x){if(x!==this._borderWidth){const A=this._borderWidth;this._borderWidth=x,this.element.style.borderWidth=x,this._updateLayoutBase("property","_borderWidth",x,A),this.dispatchNotifyPropertyChanged("property","_borderWidth",x,A)}}get borderWidth(){return this._borderWidth}set disabled(V){const R=this._disabled;if(this._disabled=V,this._disabled){if(!x.Utilities.isInDesignMode()){const x=document.createAttribute(ControlBase.attributDisabled);this.element.setAttributeNode(x),""===this._pointerEventsArgs&&""!==this.element.style.pointerEvents&&"none"!==this.element.style.pointerEvents&&(this._pointerEventsArgs=this.element.style.pointerEvents),this.element.style.pointerEvents="none"}}else this.element.removeAttribute(ControlBase.attributDisabled),this.element.style.pointerEvents=this._pointerEventsArgs;this.blockAction=this._disabled||this._visibility===A.Enums.Visibility.Hidden||this._visibility===A.Enums.Visibility.Collapse,this._updateLayoutBase("status","disabled",V,R),this._updateColorsBase("status","disabled",V,R),this.dispatchNotifyPropertyChanged("status","disabled",V,R,"disabledChanged")}get disabled(){return this._disabled}get visibility(){return this._visibility}set visibility(V){let R=V.toLowerCase();if(null===this._visibilityDisplay&&(this._visibilityDisplay=window.getComputedStyle(this.element,null).display),R!==this._visibility){const V=this._visibility;switch(R!==A.Enums.Visibility.Visible&&R!==A.Enums.Visibility.Hidden&&R!==A.Enums.Visibility.Collapse&&(x.Application.WarnLog.log("VisiWin.UI."+this.controlName+".visibility: unbekannter Wert: "+R+'. Gltige Werte: "Visible", "Hidden" oder "Collapse". Auf visible gesetzt.'),R=A.Enums.Visibility.Visible),this._visibility=A.Enums.Visibility[R],this.element.style.visibility=R,R){case A.Enums.Visibility.Collapse:this.element.style.display="none";break;case A.Enums.Visibility.Visible:case A.Enums.Visibility.Hidden:if(this.element.style.display=this._visibilityDisplay,this.element.style.visibility=R,this.childElements.length>0)for(let x=0;x<this.childElements.length;x++)this.childElements[x]&&this.childElements[x].winControl&&this.childElements[x].winControl.show&&(this.childElements[x].winControl.visibility=R)}this.blockAction=this._disabled||this._visibility===A.Enums.Visibility.Hidden||this._visibility===A.Enums.Visibility.Collapse,this._updateLayoutBase("property","visibility",R,V),this._updateColorsBase("property","visibility",R,V),this.dispatchNotifyPropertyChanged("property","visibility",R,V,"visibilityChanged")}}get authorizationMode(){return this._authorizationMode}set authorizationMode(V){if(this._authorizationMode!==V){const R=this._authorizationMode;switch(V){case A.Enums.AuthorizationMode.Disabled:case A.Enums.AuthorizationMode.Hidden:case A.Enums.AuthorizationMode.Collapse:this._authorizationMode=V;break;default:this._authorizationMode=A.Enums.AuthorizationMode.Disabled,x.Application.WarnLog.log("VisiWin.UI."+this.controlName+".authorizationMode: unbekannter Wert: "+V+'. Gltige Werte: "Disabled", "Hidden" oder "Collapse". Gesetzt auf "Disabled".')}this._updateLayoutBase("property","authorizationMode",V,R),this.dispatchNotifyPropertyChanged("property","authorizationMode",V,R)}}get authorized(){return this._authorized}set authorized(V){if(this._authorized!==V){const R=this._authorized;switch(this._authorized=V,this._authorized?x.Utilities.removeClass(this.element,ControlBase.classUnauthorized):x.Utilities.addClass(this.element,ControlBase.classUnauthorized),this.authorizationMode){case A.Enums.AuthorizationMode.Collapse:this.authorized?this.visibility=A.Enums.Visibility.Visible:this.visibility=A.Enums.Visibility.Collapse,this.disabled=!1;break;case A.Enums.AuthorizationMode.Hidden:this.authorized?this.visibility=A.Enums.Visibility.Visible:this.visibility=A.Enums.Visibility.Hidden,this.disabled=!1;break;case A.Enums.AuthorizationMode.Disabled:this.visibility=A.Enums.Visibility.Visible,this.authorized?this.disabled=!1:this.disabled=!0;break;default:this._authorizationMode=A.Enums.AuthorizationMode.Disabled,this.visibility=A.Enums.Visibility.Visible,this.authorized?this.disabled=!1:this.disabled=!0,x.Application.ErrorLog.log("VisiWin.UI."+this.controlName+".authorization: unbekannter Wert in authorizationMode: "+this.authorizationMode+' . Gltige Werte: "Disabled", "Hidden" oder "Collapse". Gesetzt auf "Disabled".')}this._updateLayoutBase("property","authorized",V,R),this._updateColorsBase("property","authorized",V,R),this.dispatchNotifyPropertyChanged("property","authorized",V,R)}}_authHandler(x){this.authorized=x}get authorizationRight(){return this._authorizationRight}set authorizationRight(A){const V=this._authorizationRight;""===A||this._authorizationRight!==A&&(x.Utilities.isInDesignMode()?this.authorized=!0:(this._authObj&&(this._authObj.Changed.remove(this._boundAuthHandler),this._authObj=null),this._authObj=x.AppServices.UserManagementService.getAuthorization(A),this._authObj.Changed.add(this._boundAuthHandler),this.authorized=this._authObj.IsAuthorized),this._authorizationRight=A),this._updateLayoutBase("property","authorizationRight",A,V),this._updateColorsBase("property","authorizationRight",A,V),this.dispatchNotifyPropertyChanged("property","authorizationRight",A,V)}get hover(){return this._hover}set hover(x){if(this._hover!==x){const A=this._hover;this._hover=x,this._updateColorsBase("status","hover",x,A),this._updateLayoutBase("status","hover",x,A),this.dispatchNotifyPropertyChanged("status","hover",x,A,"hoverChanged")}}_focusOn(){this.focused=!0}_focusOff(){this.focused=!1}get focused(){return this._focused}set focused(x){if(this._focused!==x){const A=this._focused;this._focused=x,this._updateColorsBase("status","focused",x,A),this._updateLayoutBase("status","focused",x,A),this.dispatchNotifyPropertyChanged("status","focused",x,A,"focusChanged")}}get scale(){return this._scale}set scale(x){if(this._scale!==x){const A=this._scale;this._scale=x,this.element.style.transform="scale("+x+")",this._updateLayoutBase("status","scale",x,A),this.dispatchNotifyPropertyChanged("status","scale",x,A)}}set dataContext(x){this._dataContext=x}get dataContext(){return this._dataContext}get parentElement(){return this._parentElement||(this.element&&this.element.parentElement?this._parentElement=this.element.parentElement:this._parentElement=null),this._parentElement}get parentControl(){return this._parentControl||(this.parentElement&&this.parentElement[A.WINCONTROL]?this._parentControl=this.parentElement[A.WINCONTROL]:this._parentControl=null),this._parentControl}get resourceName(){return this._resultStyle?this._resourceName=this.controlType+"."+this._resultStyle:this._resourceName=this.controlType,this._resourceName}set resourceName(x){}get controlType(){return this._controlType||(this.constructor.namespace?this._controlType=this.constructor.namespace+"."+this.constructor.controlName:this._controlType=this.namespace+"."+this.controlName),this._controlType}set controlType(x){}get classNames(){return this._classNames}set classNames(x){if(null!=this._classNames){const x=this._classNames.split(" ");for(let A=0;A<x.length;A++)this.element.classList.remove(x[A])}this._classNames=x;const A=x.split(" ");for(let x=0;x<A.length;x++)this.element.classList.add(A[x])}get actionType(){return this._actionType||this.element&&(this._actionType=this.element.getAttribute(A.ATTRIB_DATA_WIN_ACTIONS)),this._actionType}set actionType(x){this._actionType=x,x&&this._processActions(x)}get style(){return this._style}set style(x){const A=this._style;if(this._style=x,x){const A=x.split(".");1==A.length?this._resultStyle="Default"==x?null:x:2==A.length?(this._resultStyle=x,"Default"===A[0]&&"Default"===A[1]?this._resultStyle=null:"Default"===A[1]?this._resultStyle=x:"Default"===A[0]?this._resultStyle=null:this._resultStyle=x,this._resultStyle&&0===this._resultStyle.length&&(this._resultStyle=null)):this._resultStyle=null}else this._resultStyle=null;this._updateLayoutBase("property","style",x,A),this.dispatchNotifyPropertyChanged("property","style",x,A)}get controlId(){if(this.element){if(this._controlId)return this._controlId;{const A=this.element.getAttribute("id");return A?(this._controlId=A,this._controlId):(this._controlId=x.Utilities.shortId(),this._controlId)}}return null}set controlId(x){const A=this._controlId;this._controlId=x,this.element.setAttribute("id",x),this._updateLayoutBase("property","controlId",x,A),this.dispatchNotifyPropertyChanged("property","controlId",x,A)}set registerSourceId(x){if(this._registerSourceId!==x){const A=this._registerSourceId;this._registerSourceId&&this.unregisterAtParent(this.controlName,this._registerSourceId,this.element),this._registerSourceId=x,this._registerSourceId&&this.registerAtParent(this.controlName,this._registerSourceId,this.element),this._updateLayoutBase("property","registerSourceId",x,A),this.dispatchNotifyPropertyChanged("property","registerSourceId",x,A,"focusChanged")}}get registerSourceId(){return this._registerSourceId}get blockAction(){return this._blockAction}set blockAction(x){this._blockAction=x,x&&this.element.removeAttribute("tabIndex")}get navigationService(){return x.AppServices.NavigationService}set navigationService(x){}get locService(){return x.AppServices.LanguageService}set locService(x){}get langService(){return x.AppServices.LanguageService}set langService(x){}get appService(){return x.AppServices.AppService}set appService(x){}createControlBaseHandler(V,R){this.eventHandlerEnabled||(this.locService&&this.locService.addEventListener("languageChanged",this._boundChangeLanguageBase),this.appService&&this.appService.addEventListener("themeChanged",this._boundChangeColorBase),(x.Resources.styles.controlsSource&&x.Resources.styles.controlsSource[this.resourceName]&&x.Resources.styles.controlsSource[this.resourceName].media||x.Resources.styles.controlsSource["#"+this.controlId]&&x.Resources.styles.controlsSource["#"+this.controlId].media)&&(this.appService.addEventListener("mediaChanged",this._boundChangeMediaBase),x.AppServices.AppService.initialMedia?(x.AppServices.AppService.initialMedia.initial=!0,this._changeMediaBase(x.AppServices.AppService.initialMedia)):this._changeMediaBase(this._changeMediaArgs)),this.inputEventsEnable&&(this.element.addEventListener(A.FocusEventType.focus,this._boundFocusOn),this.element.addEventListener(A.FocusEventType.blur,this._boundFocusOff),this.element.addEventListener(A.PointerEventType.pointerenter,this._boundHoverIn),this.element.addEventListener(A.PointerEventType.pointerleave,this._boundHoverOut)),this.eventHandlerEnabled=!0)}removeControlBaseHandler(){this.eventHandlerEnabled&&(this.locService&&this.locService.removeEventListener("languageChanged",this._boundChangeLanguageBase),this.appService&&this.appService.removeEventListener("themeChanged",this._boundChangeColorBase),x.Resources.styles.controlsSource&&x.Resources.styles.controlsSource[this.resourceName]&&x.Resources.styles.controlsSource[this.resourceName].media&&this.appService.removeEventListener("mediaChanged",this._boundChangeMediaBase),this.inputEventsEnable&&(this.element.removeEventListener(A.FocusEventType.focus,this._boundFocusOn),this.element.removeEventListener(A.FocusEventType.blur,this._boundFocusOff),this.element.removeEventListener(A.PointerEventType.pointerenter,this._boundHoverIn),this.element.removeEventListener(A.PointerEventType.pointerleave,this._boundHoverOut)),this.eventHandlerEnabled=!1)}updateLayoutEnable(x,A,V){if(this._updateLayoutEnable=x,this.childElements&&this.childElements.length>0)for(let R=0;R<this.childElements.length;R++)this.childElements[R]&&this.childElements[R].winControl&&"function"==typeof this.childElements[R].winControl.updateLayoutEnable&&this.childElements[R].winControl.updateLayoutEnable(x,A,V);x&&(this._updateLayoutBase(A,V,null,null),this._updateColorsBase(A,V,null,null))}initializedBase(x){"function"==typeof this.initializedBasis&&this.initializedBasis(x),"function"==typeof this.initialized&&this.initialized(x),this._updateLayoutBase("lifeCycle","initialized",null,null),this.dispatchEvent("initialized",{sender:this,element:x})}readyBase(V){if(this.dataContext){const A=x.DataServices._validateDataContextId(this.dataContext);if(A.isFunctionConstructorName){x.AppServices.Impl.ServiceManager.getService("ViewModelService").tryCreateViewModel(this.element,this.dataContext)}if(A.isViewModelObjectName){const A=this.dataContext.substring(1,this.dataContext.length-1);x.AppServices.Impl.ServiceManager.getService("ViewModelService").tryCreateViewModel(this.element,A)}if(A.isName){const A=x.AppServices.DataService.getBinding(this.dataContext);A&&WinJS.Binding.processAll(this.element,A)}}this.actionType&&this._processActions(this._actionType),"function"==typeof this.readyBasis&&this.readyBasis(V),"function"==typeof this.ready&&this.ready(V),this.designerType===A.Enums.DesignerType.Child&&"function"==typeof this._initRipple&&this._initRipple(),this.designerType!==A.Enums.DesignerType.ContentControl&&!0!==this._isUserControl||!x.Utilities.isInDesignMode()&&this.authorizationRight&&x.Utilities.passAuthorizationToChilds(this.element,this.authorizationRight,this.authorizationMode)}get isAttached(){return this._isAttached}set isAttached(x){this._isAttached=x}attach(){return this.isAttached||(this.isAttached=!0,this.designerType!==A.Enums.DesignerType.Child&&(this._firstAttach?this._firstAttach=!1:this.updateLayoutEnable(!0,"lifeCycle","attach")),this.dispatchEvent("attached",{})),null}detach(){return this.isAttached&&(this.isAttached=!1,this.dispatchEvent("detached",{})),null}registerAtParent(A,V,R,D){let N=R||this.element;N=N.parentElement,D=D||{};let U=this.maxInterrations||10,B=null;for(A||x.Application.WarnLog.log("VisiWin.UI.ControlBase, beim registrieren des Controls "+this.__VWCONTROL__+" wurde kein Name bergeben");N&&U;){if(N.winControl&&(B=N.winControl,"function"==typeof B.registerChild&&!B.registerChild(A,V,R,D)))return;N=N.parentElement,U--}}unregisterAtParent(x,A,V,R){}mixProperties(x,A){if("string"==typeof A&&(A=WinJS.UI._optionsParser(A)),"object"==typeof A)for(const V in A)x[V]=A[V]}setMediaOptions(A){const V={};if(x.Resources.styles.controlsSource){if(x.Resources.styles.controlsSource[this.resourceName]&&x.Resources.styles.controlsSource[this.resourceName].media){const A=x.Resources.styles.controlsSource[this.resourceName].media;for(const R in A){const A=x.Resources.media[R];A&&A.value&&this.mixProperties(V,this.appService.getMediaOptions(this.resourceName,A.name))}this.setOptionListProperties(V,"[JSON_MEDIA]")}if(x.Resources.styles.controlsSource["#"+this.controlId]&&x.Resources.styles.controlsSource["#"+this.controlId].media){const A=x.Resources.styles.controlsSource["#"+this.controlId].media;for(const R in A){const A=x.Resources.media[R];A&&A.value&&this.mixProperties(V,this.appService.getMediaOptions("#"+this.controlId,A.name))}this.setOptionListProperties(V,"[JSON_MEDIA_ID]")}this.mixProperties(A,V)}return A}setDefaultOptions(x){const A={};return this.appService&&this.resourceName&&(this.mixProperties(A,this.appService.getDefaultOptions(this.resourceName,this.controlType)),this.setOptionListProperties(A,"[JSON_STYLE]")),this.appService&&this.controlId&&(this.mixProperties(A,this.appService.getDefaultOptions("#"+this.controlId,null)),this.setOptionListProperties(A,"[JSON_STYLE_ID]")),this.mixProperties(x,A),x}setColorOptions(x){const A={};return this.appService&&this.resourceName&&(this.mixProperties(A,this.appService.getThemeOptions(this.resourceName)),this.setOptionListProperties(A,"[JSON_THEME]")),this.appService&&this.controlId&&(this.mixProperties(A,this.appService.getThemeOptions("#"+this.controlId)),this.setOptionListProperties(A,"[JSON_THEME_ID]")),this.mixProperties(x,A),x}setLangOptions(x){const A={};return this.locService&&this.resourceName&&(this.mixProperties(A,this.locService.getOptions(this.resourceName)),this.setOptionListProperties(A,"[JSON_LANG]")),this.locService&&this.controlId&&(this.mixProperties(A,this.locService.getOptions("#"+this.controlId)),this.setOptionListProperties(A,"[JSON_LANG_ID]")),this.mixProperties(x,A),x}dispatchNotifyPropertyChanged(x,A,V,R,D,N){if(this._updateLayoutEnable){let U={sender:this,changeType:x,changeName:A,newValue:V,oldValue:R};if(N)for(const x in N)U[x]=N[x];D&&this.dispatchEvent(D,U),this.dispatchEvent("notifyPropertyChanged",U),U=null}}updateLayout(x){x||(x="default"),this._updateLayoutBase("updateLayout",x)}updateColors(x){x||(x="default"),this._updateColorsBase("updateColor",x)}_updateLayoutBase(x,A,V,R){if(!(this._updateLayoutWork>=2)&&this._updateLayoutEnable){if(this._updateLayoutWork++,"function"==typeof this._updateLayout){let D={};D.sender=this,"object"==typeof x&&null!==x?(D.changeType=x.changeType,D.changeName=x.changeName,D.newValue=x.newValue,D.oldValue=x.oldValue):(D.changeType=x,D.changeName=A,D.newValue=V,D.oldValue=R),this._updateLayout(D),D=null}this._updateLayoutWork--}}_updateColorsBase(x,A,V,R){if(!(this._updateColorWork>=2)&&this._updateLayoutEnable){if(this._updateColorWork++,"function"==typeof this._updateColors){let D={};D.sender=this,"object"==typeof x&&null!==x?(D.changeType=x.changeType,D.changeName=x.changeName,D.newValue=x.newValue,D.oldValue=x.oldValue):(D.changeType=x,D.changeName=A,D.newValue=V,D.oldValue=R),this._updateColors(D),D=null}this._updateColorWork--}}setOptionListProperties(x,A){for(const V in x)this.optionsList[V]||(this.optionsList[V]={},this.optionsList[V].initSetter=[]),this.optionsList[V].initSetter||(this.optionsList[V].initSetter=[]),this.optionsList[V].initSetter.push(A+"="+x[V])}getOptionListDefault(){const x={};for(const A in this.optionsList)void 0!==this.optionsList[A].defaultValue&&(x[A]=this.optionsList[A].defaultValue);return this.setOptionListProperties(x,"[CONTROL_DEFAULT]"),x}defaultConstructor(A,V,R,D,N){let U=null;if("function"==typeof this.preCheck&&this.preCheck(A,V),this.baseSettings(A,R,D,N),"function"==typeof this.createTemplateBase&&(U=this.createTemplateBase(A,V)),"function"==typeof this.createControlBase&&(U=this.createControlBase(A,V)),"function"==typeof this.createControl||"function"==typeof this.createTemplate)if(U="function"==typeof this.createTemplate?this.createTemplate(A,V):this.createControl(A,V),U&&"function"==typeof U.then){const B=this;U.then((function(x){B._defaultConstructor2.call(B,A,V,R,D,N)}),(function(U){"function"==typeof B.createControl?x.Application.ErrorLog.log("VisiWin.UI."+B.__VWCONTROL__+".createControl, Promise im Returnwert liefert Error."):x.Application.ErrorLog.log("VisiWin.UI."+B.__VWCONTROL__+".createTemplate, Promise im Returnwert liefert Error."),B._defaultConstructor2.call(B,A,V,R,D,N)}))}else this._defaultConstructor2(A,V,R,D,N);else this._defaultConstructor2(A,V,R,D,N)}_defaultConstructor2(V,R,D,N,U){"function"==typeof this.createControlBaseHandler&&this.createControlBaseHandler(V,R),"function"==typeof this.createHandlerBase&&this.createHandlerBase(V,R),"function"==typeof this.createHandler&&this.createHandler(V,R),x.Utilities.isInDesignMode()?("function"==typeof this.resizeHandlerDesignMode?(this._boundResizeHandlerDesignMode=this.resizeHandlerDesignMode.bind(this),this._resizeObserver=new window.ResizeObserver(this._boundResizeHandlerDesignMode),this._resizeObserver.observe(this[this.resizedElement])):"function"==typeof this.resizeHandler&&(this._boundResizeHandler=this.resizeHandler.bind(this),this._resizeObserver=new window.ResizeObserver(this._boundResizeHandler),this._resizeObserver.observe(this[this.resizedElement])),"function"==typeof this.mutationHandlerDesignMode?(this._boundMutationHandlerDesignMode=this.mutationHandlerDesignMode.bind(this),this._mutationObserver=new MutationObserver(this._boundMutationHandlerDesignMode),this._mutationObserver.observe(this[this.mutationElement],{childList:!0})):"function"==typeof this.mutationHandler&&(this._boundMutationHandler=this.mutationHandler.bind(this),this._mutationObserver=new MutationObserver(this._boundMutationHandler),this._mutationObserver.observe(this[this.mutationElement],{childList:!0}))):("function"==typeof this.resizeHandlerRunMode?(this._boundResizeHandlerRunMode=this.resizeHandlerRunMode.bind(this),this._resizeObserver=new window.ResizeObserver(this._boundResizeHandlerRunMode),this._resizeObserver.observe(this[this.resizedElement])):"function"==typeof this.resizeHandler&&(this._boundResizeHandler=this.resizeHandler.bind(this),this._resizeObserver=new window.ResizeObserver(this._boundResizeHandler),this._resizeObserver.observe(this[this.resizedElement])),"function"==typeof this.mutationHandlerRunMode?(this._boundMutationHandlerRunMode=this.mutationHandlerRunMode.bind(this),this._mutationObserver=new MutationObserver(this._boundMutationHandlerRunMode),this._mutationObserver.observe(this[this.mutationElement],{childList:!0})):"function"==typeof this.mutationHandler&&(this._boundMutationHandler=this.mutationHandler.bind(this),this._mutationObserver=new MutationObserver(this._boundMutationHandler),this._mutationObserver.observe(this[this.mutationElement],{childList:!0}))),"function"==typeof this.beforeInitBase&&this.beforeInitBase(V,R),"function"==typeof this.preSetOptionsBase&&this.preSetOptionsBase(V,R),"function"==typeof this.beforeInit&&this.beforeInit(V,R),"function"==typeof this.preSetOptions&&this.preSetOptions(V,R);let B=this.getOptionListDefault();if(this.designerType===A.Enums.DesignerType.Child?(this.observe&&x.Class.initObserve(this,this,this.observe),this.mixProperties(B,R),WinJS.UI.setOptions(this,B),"function"==typeof this.afterInit&&this.afterInit(V,R),this._updateLayoutEnable=!0,this._updateLayoutBase("lifeCycle","afterInit",null,null),this._updateColorsBase("lifeCycle","afterInit",null,null),"function"==typeof this.postSetOptions&&this.postSetOptions(V,R)):(this._initHandler(),B=this.setDefaultOptions(B),x.Application.Settings.UI.StyleColors&&(B=this.setColorOptions(B)),B=this.setLangOptions(B),this.mixProperties(B,R),B=this.setMediaOptions(B),this.observe&&x.Class.initObserve(this,this,this.observe),WinJS.UI.setOptions(this,B),"function"==typeof this._initRipple&&this._initRipple(),"function"==typeof this.afterInit&&this.afterInit(V,R),this._updateLayoutEnable=!0,this._updateLayoutBase("lifeCycle","afterInit",null,null),this._updateColorsBase("lifeCycle","afterInit",null,null),this._updateLayoutEnable=!1,"function"==typeof this.postSetOptions&&this.postSetOptions(V,R),this.updateLayoutEnable(!0,"lifeCycle","updateLayout"),this.updateLayoutEnable(!0,"lifeCycle","firstUpdate")),this._currentPage){let A=this.navigationService.getPageInfo(this._currentPage);if(A&&A.state)switch(A.state){case x.UI.PageState.PageBeforeNavigate:case x.UI.PageState.PageNavigating:case x.UI.PageState.PageNavigated:break;case x.UI.PageState.PageReady:this.readyBase(this.element);break;case x.UI.PageState.PageInitialize:this.readyBase(this.element),this.initializedBase(this.element);break;case x.UI.PageState.PageAttach:this.readyBase(this.element),this.initializedBase(this.element),this.attach();break;case x.UI.PageState.PageDetach:this.readyBase(this.element),this.initializedBase(this.element);break;case x.UI.PageState.PageDispose:}}return V}baseSettings(A,V,R,D){this.controlName=this.__VWCONTROL__=V,this.element||(this.element=A||document.createElement(D||"div")),this.element.__VWELEMENT__=V,this.element.winControl=this,R&&(this.className=R,x.Utilities.addClass(this.element,R))}initialize(A,V){if("object"==typeof V)for(const x in V)this[x]=V[x];A?(A[A.name]||(A.controlName=A.name,A.className||(A.className=this.cssClassPrefix+"-"+A.name.toLowerCase())),this.addPropertyList(A,this.properties,this.cssStyles),this.defaultConstructor(this.element,this.inlineOptions,A.controlName,A.className)):x.Application.ErrorLog.log("VisiWin.UI."+name+".initialize: one or more paramter are not set.")}processElements(V){const R=[];for(let x=0;x<V.length;x++){const R=V[x];if(R){let x=R.getAttribute(A.ATTRIB_DATA_WIN_OPTIONS);if(x){if(x.indexOf("designerType")<0){const V=x.indexOf("{");x=x.substring(V+1),x=`{designerType: '${A.Enums.DesignerType.Child}',`+x,R.setAttribute(A.ATTRIB_DATA_WIN_OPTIONS,x)}}else x=`{designerType: '${A.Enums.DesignerType.Child}'}`,R.setAttribute(A.ATTRIB_DATA_WIN_OPTIONS,x)}}for(let D=0;D<V.length;D++){const N=V[D];N&&(R.push(WinJS.UI.processAll(N).then((function(x){N.winControl.designerType=A.Enums.DesignerType.Child}),(function(V){const R=N.getAttribute(A.ATTRIB_DATA_WIN_CONTROL);x.Application.ErrorLog.log(R+".processElements():  Fehler in WinJS.processAll().")}))),this.childElements.push(N))}return R.length>0?WinJS.Promise.join(R):null}initializeChilds(V,R,D){const N=[];let U=this.element.querySelectorAll(`[${A.ATTRIB_DATA_REF_ELEMENT}],[${A.ATTRIB_DATA_REF_CONTROL}]`),B=Array.from(U);if(V&&Array.isArray(V)&&V.length>0)for(let x=0;x<V.length;x++)B.push(V[x]);if(!0===R){this._isUserControl=!0;let x=this.element.querySelectorAll(`[${A.ATTRIB_DATA_WIN_CONTROL}]`);if(x.length>0)for(let A=0;A<x.length;A++)-1===B.indexOf(x[A])&&B.push(x[A])}0===B.length&&(U=this.element.querySelectorAll(`[${A.ATTRIB_DATA_WIN_CONTROL}]`),B=Array.from(U));for(let V=0;V<B.length;V++){const N=B[V];let U=N.getAttribute(A.ATTRIB_DATA_WIN_OPTIONS);const F=N.getAttribute(A.ATTRIB_DATA_WIN_CONTROL),W=N.getAttribute(A.ATTRIB_DATA_REF_ELEMENT),H=N.getAttribute(A.ATTRIB_DATA_REF_CONTROL);if(N.winControl)W&&(this[W]=N,N.removeAttribute(A.ATTRIB_DATA_REF_ELEMENT)),H&&N.winControl&&(this[H]=N.winControl,N.removeAttribute(A.ATTRIB_DATA_REF_CONTROL)),x.Application.WarnLog.log(F+".initializeChilds():  Child Control already initialize.");else if(U)if(R){if(this.isInDesignMode&&!D){const x=U.indexOf("{");U=U.substring(x+1),U=`{'designerType':'${A.Enums.DesignerType.UserControlChild}',`+U,N.setAttribute(A.ATTRIB_DATA_WIN_OPTIONS,U)}}else{const x=U.indexOf("{");U=U.substring(x+1),U=`{'designerType':'${A.Enums.DesignerType.UserControlChild}',`+U,N.setAttribute(A.ATTRIB_DATA_WIN_OPTIONS,U)}else R?this.isInDesignMode&&!D&&(U=`{'designerType':'${A.Enums.DesignerType.UserControlChild}'}`,N.setAttribute(A.ATTRIB_DATA_WIN_OPTIONS,U)):(U=`{'designerType':'${A.Enums.DesignerType.Child}'}`,N.setAttribute(A.ATTRIB_DATA_WIN_OPTIONS,U))}for(let V=0;V<B.length;V++){const D=B[V],U=D.getAttribute(A.ATTRIB_DATA_WIN_CONTROL),F=D.getAttribute(A.ATTRIB_DATA_REF_ELEMENT),W=D.getAttribute(A.ATTRIB_DATA_REF_CONTROL);U?N.push(WinJS.UI.processAll(D).then(function(x){F&&(this[F]=D,D.removeAttribute(A.ATTRIB_DATA_REF_ELEMENT)),W&&D.winControl&&(this[W]=D.winControl,D.removeAttribute(A.ATTRIB_DATA_REF_CONTROL)),R||this.childElements.push(D),this.childControls.push(D.winControl)}.bind(this),function(A){x.Application.ErrorLog.log(U+".initializeChilds():  Error in processAll().")}.bind(this))):F&&(this[F]=D,R||this.childElements.push(D),D.removeAttribute(A.ATTRIB_DATA_REF_ELEMENT))}return N.length>0?WinJS.Promise.join(N):null}_initializeChilds(V){const R=[],D=this.element.querySelectorAll("[data-ref-element],[data-ref]");let N=Array.from(D);V&&(N=N.concat.apply(N,V));for(let V=0;V<N.length;V++){const D=N[V];if(D){let x=D.getAttribute(A.ATTRIB_DATA_WIN_OPTIONS);if(x){if(x.indexOf("designerType")<0){const V=x.indexOf("{");x=x.substring(V+1),x="{designerType: 'Child',"+x,D.setAttribute(A.ATTRIB_DATA_WIN_OPTIONS,x)}}else x="{designerType: 'Child'}",D.setAttribute(A.ATTRIB_DATA_WIN_OPTIONS,x)}const U=D.getAttribute(A.ATTRIB_DATA_WIN_CONTROL),B=D.getAttribute(A.ATTRIB_DATA_REF_ELEMENT),F=D.getAttribute(A.ATTRIB_DATA_REF_CONTROL);F&&U?D.winControl?(D.winControl.designerType=A.Enums.DesignerType.Child,D.removeAttribute(A.ATTRIB_DATA_REF_CONTROL),this.childElements.push(D),this.childControls.push(D.winControl),this[F]=D.winControl):(R.push(WinJS.UI.processAll(D).then(function(x){D.winControl.designerType=A.Enums.DesignerType.Child,this[F]=D.winControl}.bind(this),function(A){const V=D.getAttribute(U);x.Application.ErrorLog.log(V+".initializeChilds():  Error in processAll().")}.bind(this))),D.removeAttribute(A.ATTRIB_DATA_REF_CONTROL),this.childElements.push(D),this.childControls.push(D.winControl)):B&&U?D.winControl?(D.winControl.designerType=A.Enums.DesignerType.Child,D.removeAttribute(A.ATTRIB_DATA_REF_ELEMENT),this.childElements.push(D),this.childControls.push(D.winControl),this[B]=D):(R.push(WinJS.UI.processAll(D).then(function(x){D.winControl.designerType=A.Enums.DesignerType.Child,this[B]=D}.bind(this),function(A){const V=D.getAttribute(U);x.Application.ErrorLog.log(V+".initializeChilds():  Error in processAll().")}.bind(this))),D.removeAttribute(A.ATTRIB_DATA_REF_ELEMENT),this.childElements.push(D),this.childControls.push(D.winControl)):B?(D.removeAttribute(A.ATTRIB_DATA_REF_ELEMENT),this[B]=D):U&&R.push(WinJS.UI.processAll(D).then(function(x){D.winControl.designerType=A.Enums.DesignerType.Child}.bind(this),function(A){const V=D.getAttribute(U);x.Application.ErrorLog.log(V+".initializeChilds():  Error in processAll().")}.bind(this)))}return R.length>0?WinJS.Promise.join(R):null}_observeHandler(A){x.up0++,"function"==typeof this._observeListenerList[A.detail.changeName]&&(x.up1++,this._observeListenerList[A.detail.changeName](A))}_changeLanguageBase(x){const A={};this.mixProperties(A,this.locService.getOptions(this.resourceName)),this.controlId&&this.mixProperties(A,this.locService.getOptions("#"+this.controlId)),A&&WinJS.UI.setOptions(this,A),"function"==typeof this.onLanguageChangedBase&&this.onLanguageChangedBase(x),"function"==typeof this.onLanguageChangedMixin&&this.onLanguageChangedMixin(x),"function"==typeof this.onLanguageChanged&&this.onLanguageChanged(x)}getColor(x){let A=null;if(!this.optionsList||!this.optionsList[x])return this[x];A=this.optionsList[x];let V=this[x];if(A.resourceValue)for(let R=0;R<A.resourceValue.length;R++)switch(A.resourceValue[R]){case"getTheme":V=this.__t(V,x);break;case"getColor":V=this.__c(V,x);break;case"getBackground":V=this.__b(V,x);break;case"getAnamation":V=this.__a(V,x);break;case"getShadow":V=this.__s(V,x)}else V=this.__t(V,x);return V}setColor(x,A,V,R){let D=this[x],N=x;return A&&(N=A,N.includes("foregroundColor")&&(N="color")),D=this.__t(D,x),null!=D&&(R?this[R]&&(this[R].winControl?(this[R].style[N]=D,this[R].winControl[N]=D):this[R].element.style[N]=D):V?this[V]&&(this[V].winControl?(this[V].style[N]=D,this[V].winControl[N]=D):this[V].__VWCONTROL__?this[V].element.style[N]=D:this[V].style[N]=D):this.element.style[N]=D),D}_changeMediaBase(A){if(this._changeMediaArgs=A,A&&A.value&&!A.initial&&x.Resources.media[A.name]){const V=x.Resources.media[A.name].name,R={};this.mixProperties(R,this.appService.getMediaOptions(this.resourceName,V)),this.controlId&&this.mixProperties(R,this.appService.getMediaOptions("#"+this.controlId,V)),R&&WinJS.UI.setOptions(this,R)}"function"==typeof this.onMediaChangedBase&&this.onMediaChangedBase(A),"function"==typeof this.onMediaChangedMixin&&this.onMediaChangedMixin(A),"function"==typeof this.onMediaChanged&&this.onMediaChanged(A)}_changeColorBase(A){if(this.isDisposed&&x.Application.WarnLog.log("VisiWin.UI."+this.__VWCONTROL__+".ThemeChange, memory leake, disposed Control for event handlerr."),x.Application.Settings.UI.StyleColors&&this.element&&this.element.winControl){"function"==typeof this._changeRippleColor&&this._changeRippleColor(),this.updateLayoutEnable(!1);for(const x in this.themeChangeProperties)this["_"+x]=null,this[x]=this.__t(this.themeChangeProperties[x],null);this.updateLayoutEnable(!0,"theme","updateColor"),"function"==typeof this.onThemeChangedBase&&this.onThemeChangedBase(A),"function"==typeof this.onThemeChangedMixin&&this.onColorThemedMixin(A),"function"==typeof this.onThemeChanged&&this.onThemeChanged(A)}}addDisposeList(x){this._disposeList=this._disposeList||[],this._disposeList.push(x)}addPropertyList(A,V,R){this.controlName=A.name,A[A.name]||(this.properties&&x.isObject(this.properties)&&(V=this.properties),this.cssStyles&&x.isObject(this.cssStyles)&&(R=this.cssStyles),V&&x.Class.createProperties(A,V),R&&this.createStyles(A,R),!A.namespace&&this.namespace&&(A.namespace=this.namespace),A[A.name]=!0);for(const A in V){const R=V[A],D=R.propertyType||R.optionType||R.accessType||"member";if("base"==D)x.isUndefined(R.defaultValue)||(this.optionsList[A]?this.optionsList[A].defaultValue=R.defaultValue:x.Application.WarnLog.log("VisiWin.UI.ControlBase.addPropertyList: "+this.controlType+": defaultValue for base property "+A+" not avalible.")),x.isUndefined(R.defaultValue_DM)||(this.optionsList[A]?this.optionsList[A].defaultValue_DM=R.defaultValue_DM:x.Application.WarnLog.log("VisiWin.UI.ControlBase.addPropertyList: "+this.controlType+": defaultValue_DM for base property "+A+" not avalible.")),x.isUndefined(R.defaultValue_RM)||(this.optionsList[A]?this.optionsList[A].defaultValue_RM=R.defaultValue_RM:x.Application.WarnLog.log("VisiWin.UI.ControlBase.addOptionsList: "+this.controlType+": defaultValue_RM for base property "+A+" not avalible."));else if("event"==D)this.eventList[A]=V[A];else{this.optionsList[A]={};for(const x in R)this.optionsList[A][x]=R[x];"member"!=R.propertyType&&"memberOnly"!=R.propertyType&&"memberStyle"!=R.propertyType&&"memberClass"!=R.optionType||(this["_"+A]=null)}}return!0}createStyles(A,V){if(V&&V.css)try{if(!A.styleSheet){let x=document.head.children[0],R=document.head.children[1],D=document.head.children[2];x&&"VisiWinBaseStyles"==x.visiWinStyle&&1==V.baseStyle?A.styleSheet=x.sheet:R&&"VisiWinCoreStyles"==R.visiWinStyle&&1==V.coreStyle?A.styleSheet=R.sheet:D&&"VisiWinStyles"==D.visiWinStyle&&null==V.baseStyle&&null==V.coreStyle?A.styleSheet=D.sheet:(D=document.createElement("style"),D.visiWinStyle="VisiWinStyles",document.head.insertBefore(D,document.head.firstElementChild),R=document.createElement("style"),R.visiWinStyle="VisiWinCoreStyles",document.head.insertBefore(R,document.head.firstElementChild),x=document.createElement("style"),x.visiWinStyle="VisiWinBaseStyles",document.head.insertBefore(x,document.head.firstElementChild),V.baseStyle?A.styleSheet=x.sheet:V.coreStyle?A.styleSheet=R.sheet:A.styleSheet=D.sheet)}const x=V.css.split("}");for(let V=0;V<x.length-1;V++)A.styleSheet.insertRule(x[V],0);return!0}catch(V){return x.Application.ErrorLog.log("VisiWin.UI."+A.controlName+" "+V.message),!1}}addEventListener(x,A,V){V=V||!1,this._listeners=this._listeners||{};const R=this._listeners[x]=this._listeners[x]||[];for(let x=0,D=R.length;x<D;x++){const D=R[x];if(D.useCapture===V&&D.listener===A)return}R.push({listener:A,useCapture:V})}dispatchEvent(A,V){let R=this._listeners&&this._listeners[A];if(R){const D=new x.UI.EventMixinEvent(A,V,this);R=R.slice(0,R.length);for(let x=0,A=R.length;x<A&&!D._stopImmediatePropagationCalled;x++)R[x].listener(D);return D.defaultPrevented||!1}return!1}removeEventListener(x,A,V){V=V||!1;const R=this._listeners&&this._listeners[x];if(R)for(let D=0,N=R.length;D<N;D++){const N=R[D];if(N.listener===A&&N.useCapture===V){R.splice(D,1),0===R.length&&delete this._listeners[x];break}}}_processActions(A){try{x.Triggers.UnintitalizeTriggerBase(this.element);const V=x.Triggers.InititalizeTriggerBase(this.element,A);this.triggerCollection=V}catch(A){x.Application.WarnLog.log("VisiWin.UI."+this.__VWCONTROL__+".processAction: Fehler beim Scannen des data-win-actions Attributes: "+A.toString()+". ")}}getStyleProperty(A){if(x.Resources&&x.Resources.styles&&x.Resources.styles.controls&&x.Resources.styles.controls[this.resourceName]&&x.Resources.styles.controls[this.resourceName].options){let V=x.Resources.styles.controls[this.resourceName].options;if("string"==typeof V){let x=V.indexOf("{")+1,R=V.lastIndexOf("}");V=V.substring(x,R);const D=V.split(",");for(let V=0;V<D.length;V++){const N=D[V].split(":"),U=N[0].trim(),B=N[1];if(U===A)return"true"==B||"false"!==B&&(B.indexOf("'")>=0?(x=B.indexOf("'")+1,R=B.lastIndexOf("'"),B.substring(x,R)):B.indexOf('"')>=0?(x=B.indexOf('"')+1,R=B.lastIndexOf('"'),B.substring(x,R)):null==B||null==B?B:B.indexOf(".")>=0?parseFloat(B):parseInt(B))}}else if("object"==typeof V)for(const x in V){const R=V[x];if(x===A)return R}else x.Application.WarnLog.log("VisiWin.UI.ControlBase.getPropertyStyle: UnbekannterType in den Resources: "+V.toString()+". ")}return null}reparentChildren(x,A){let V=x.firstChild;for(;V;){const x=V.nextSibling;A.appendChild(V),V=x}}detachSubTree(A,V){if(!A)return;let R=A;if(A&&A.__VWCONTROL__&&(R=A.element),A.querySelectorAll){const A="[data-win-control]",V=R.querySelectorAll(A);let D=0;const N=V.length;for(;D<N;){const A=V[D];if(A.winControl&&A.winControl.detach)try{A.winControl.detach()}catch(V){x.Application.WarnLog.log(A.winControl.__VWCONTROL__+".detachSubTree: problem in detach.")}D++}}if(V&&R&&R.winControl&&R.winControl.detach)try{R.winControl.detach()}catch(A){x.Application.WarnLog.log(R.winControl.__VWCONTROL__+".detachSubTree: problem in detach.")}this.navigationService.setPageState(this._currentPage,x.UI.PageState.PageDetach)}attachSubTree(A,V){if(!A)return;let R=A;A&&A.__VWCONTROL__&&(R=A.element);const D=R.querySelectorAll("[data-win-control]");let N=0;const U=D.length;for(;N<U;){const A=D[N];if(A.winControl&&A.winControl.attach)try{A.winControl.attach()}catch(V){x.Application.WarnLog.log(A.winControl.__VWCONTROL__+".attachSubTree: problem in attach.")}N++}if(V&&R&&R.winControl&&R.winControl.attach)try{R.winControl.attach()}catch(A){x.Application.WarnLog.log(R.winControl.__VWCONTROL__+".attachSubTree: problem in attach.")}this.navigationService.setPageState(this._currentPage,x.UI.PageState.PageAttach)}initializeSubTree(A,V){if(!A)return;const R=A.querySelectorAll("[data-win-control]");let D=0;const N=R.length;for(;D<N;){const A=R[D];if(A.winControl&&A.winControl.initializedBase)try{A.winControl.initializedBase()}catch(V){x.Application.WarnLog.log(A.winControl.__VWCONTROL__+".initializeSubTree: problem in initializedBase.")}D++}if(V&&A&&A.winControl&&A.winControl.initializedBase)try{A.winControl.initializedBase()}catch(V){x.Application.WarnLog.log(A.winControl.__VWCONTROL__+".initializeSubTree: problem in initializedBase.")}this.navigationService.setPageState(this._currentPage,x.UI.PageState.PageInitialize)}readySubTree(A,V){if(!A)return;const R=A.querySelectorAll("[data-win-control]");let D=0;const N=R.length;for(;D<N;){const A=R[D];if(A.winControl&&A.winControl.readyBase)try{A.winControl.readyBase()}catch(V){x.Application.WarnLog.log(A.winControl.__VWCONTROL__+".readySubTree: problem in readyBase.")}D++}if(V&&A&&A.winControl&&A.winControl.readyBase)try{A.winControl.readyBase()}catch(V){x.Application.WarnLog.log(A.winControl.__VWCONTROL__+".readySubTree: problem in readyBase.")}this.navigationService.setPageState(this._currentPage,x.UI.PageState.PageReady)}verifyShowProperty(x){if(this.isInDesignMode)return!0;if(this.optionsList&&this.optionsList[x]){let A=!1;return this.inlineOptions[x]?A=this.inlineOptions[x]:(A=null==this.optionsList[x].defaultValue||this.optionsList[x].defaultValue,null!=this.getStyleProperty(x)&&(A=this.getStyleProperty(x))),A}return!0}get isDisposed(){return this._disposed}set isDisposed(x){this._disposed=x}dispose(){if(this.isDisposed)return!1;if(this._removeHandler(),this.isDisposed=!0,this.disposeSubTree&&this.disposeSubTree(this.element,!1),this.isAttached&&this.detach(),x.Triggers.DisposeTriggerBase(this.element),this.triggerCollection,this._authObj&&(this._authObj.Changed.remove(this._boundAuthHandler),this._authObj=null),this._disposeList){const x=this._disposeList,A=this;x.forEach(x=>{"function"==typeof A[x]&&A[x]()}),this._disposeList=null}"function"==typeof this.removeHandlerBase&&this.removeHandlerBase(),"function"==typeof this.removeHandler&&this.removeHandler(),this.removeControlBaseHandler(),this._resizeObserver&&this._resizeObserver.disconnect(),this._mutationObserver&&this._mutationObserver.disconnect(),"function"==typeof this.removeControl&&this.removeControl(),"function"==typeof this.removeTemplate&&this.removeTemplate(),this.observe&&x.Class.removeObserve(this,this),this.removeEventListener("notifyPropertyChanged",this._boundObserveHandler),"function"==typeof this.unregisterChild&&this.unregisterChild();for(const x in this)this[x]=null,delete this[x];return this.appService=null,this.langService=null,this.locService=null,delete this.appService,delete this.langService,delete this.locService,delete this.constructor,!0}getResourceValue(x){return V._getResourceValue(this,x)}toCamelCase(x){return V._toCamelCase(x)}msType2vwType(x){return V._msType2vwType(x)}dispatchUpdateBase(x,A,R,D){return V._dispatchUpdateBase(this,x,A,R,D)}getPredictProperty(x){return V._getPredictProperty(this,x)}getEventList(){return V._getEventList(this)}getEventItem(x){return V._getEventItem(this,x)}_getThemeResource(x){return V.__getThemeResource(this,x)}_getColorResource(x){return V.__getColorResource(x)}_getBackgroundResource(x){return V.__getBackgroundResource(x)}_getAnimationResource(x){return V.__getAnimationResource(x)}_getShadowResource(x){return V.__getShadowResource(x)}__m(x,A){return V.__unused(this,x,A)}__t(x,A){return V.___t(this,x,A)}__c(x,A){return V.___c(this,x,A)}__b(x,A){return V.___b(this,x,A)}__a(x,A){return V.___a(this,x,A)}__s(x,A){return V.___s(this,x,A)}getThemeColor(x,A){return V._getThemeColor(this,x,A)}getOptionsValue(){return V.Design._getOptionsValue(this)}getActionPropertyList(x,A){return V.Design._getActionPropertyList(this,x,A)}getTriggerPropertyList(x){return V.Design._getTriggerPropertyList(this,x)}getStyleNameFromType(x){return V.Design._getStyleNameFromType(x)}getOptionsList(x){return V.Design._getOptionsList(this,x)}getOptionsListProperty(x,A,R,D){return V.Design._getOptionsListProperty(x,A,R,D)}getOptionsDefaultValue(x,A){return V.Design._getOptionsDefaultValue(x,A)}calculatedStyle(x,A,R,D){return V.Design._calculatedStyle(this,x,A,R,D)}getStyle(x){return V.Design._getStyle(this,x)}toCssName(x){return V.Design._toCssName(x)}}ControlBase.controlName="ControlBase",ControlBase.className="",ControlBase.classHide="hide",ControlBase.classDisabled="disabled",ControlBase.attributDisabled="disabled",ControlBase.classFocused="focus",ControlBase.classCollapsed="collapsed",ControlBase.classHover="hover",ControlBase.classUnauthorized="unauthorized",ControlBase.supportedForProcessing=!0,ControlBase.loaded=!1,ControlBase.controlBasePropertyList={click:{propertyType:"event"},down:{propertyType:"event"},up:{propertyType:"event"},enablePreventEvents:{propertyType:"member",type:"boolean",defaultValue:!1},notifyPropertyChanged:{propertyType:"event"},disabledChanged:{propertyType:"event",triggerDataName:"disabled"},visibilityChanged:{propertyType:"event",triggerDataName:"visibility"},focusedChanged:{propertyType:"event",triggerDataName:"focused"},hoverChanged:{propertyType:"event",triggerDataName:"hover"},attached:{propertyType:"event"},detached:{propertyType:"event"},initialized:{propertyType:"event"},element:{propertyType:"member",type:"any",invisible:!0},gridArea:{propertyType:"style",type:"string"},resourceName:{propertyType:"custom",access:"ro"},controlType:{propertyType:"custom",access:"ro"},controlName:{propertyType:"member"},designerType:{propertyType:"member"},dataContext:{propertyType:"custom",type:"string"},style:{propertyType:"custom",defaultValue:"Default"},controlId:{propertyType:"custom"},classNames:{propertyType:"custom"},tag:{propertyType:"member",type:"any",invisible:!0},actionType:{propertyType:"custom",access:"ro"},triggerCollection:{propertyType:"member",type:"any",invisible:!0},registerSourceId:{propertyType:"custom",type:"string"},registerTargetId:{propertyType:"member",type:"string"},visibility:{propertyType:"custom",type:"enum"},top:{propertyType:"style",type:"string"},bottom:{propertyType:"style",type:"string"},left:{propertyType:"style",type:"string"},right:{propertyType:"style",type:"string"},width:{propertyType:"style",type:"string"},minWidth:{propertyType:"style",type:"string"},maxWidth:{propertyType:"style",type:"string"},height:{propertyType:"style",type:"string"},minHeight:{propertyType:"style",type:"string"},maxHeight:{propertyType:"style",type:"string"},padding:{propertyType:"style",type:"string"},margin:{propertyType:"style",type:"string"},flex:{propertyType:"style",type:"string"},flexShrink:{propertyType:"style",type:"string"},flexGrow:{propertyType:"style",type:"string"},flexBasis:{propertyType:"style",type:"string"},opacity:{propertyType:"style",type:"string"},borderStyle:{propertyType:"style",type:"enum"},borderWidth:{propertyType:"style",type:"string",forceOverwrite:!0},borderRadius:{propertyType:"style",type:"string"},scale:{propertyType:"custom",type:"string"},authorizationMode:{propertyType:"custom",type:"string",defaultValue:"Disabled"},authorized:{propertyType:"custom",type:"boolean"},authorizationRight:{propertyType:"custom",type:"string"},disabled:{propertyType:"state",type:"boolean",defaultValue:!1},shadow:{propertyType:"memberStyle",style:"boxShadow",resourceValue:["getShadow"]},background:{propertyType:"memberStyle",type:"string",resourceValue:["getBackground"]},backgroundImage:{propertyType:"memberStyle",type:"string",resourceValue:["getBackground"]}},ControlBase._mixinList=[],ControlBase._disposeList=[],A.ControlBase=ControlBase}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={}));var __awaiter=this&&this.__awaiter||function(x,A,V,R){return new(V||(V=Promise))((function(D,N){function fulfilled(x){try{step(R.next(x))}catch(x){N(x)}}function rejected(x){try{step(R.throw(x))}catch(x){N(x)}}function step(x){x.done?D(x.value):function adopt(x){return x instanceof V?x:new V((function(A){A(x)}))}(x.value).then(fulfilled,rejected)}step((R=R.apply(x,A||[])).next())}))},VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin;!function(x){!function(A){"use strict";let V;!function(x){x[x.VARERR_None=0]="VARERR_None",x[x.VARERR_NoConnection=1]="VARERR_NoConnection",x[x.VARERR_NoRegister=2]="VARERR_NoRegister",x[x.VARERR_NoAttach=4]="VARERR_NoAttach",x[x.VARERR_LowQuality=8]="VARERR_LowQuality",x[x.VARERR_WriteToServer=16]="VARERR_WriteToServer",x[x.VARERR_OverflowLimitMin=32]="VARERR_OverflowLimitMin",x[x.VARERR_OverflowLimitMax=64]="VARERR_OverflowLimitMax"}(V=A._VariableError||(A._VariableError={}));class VariableBase extends A.ControlBase{constructor(A,V){super(A,V),this._varProperty="Value",this._sourceDecPoint=".",this._rawValue=null,this._numValue=0,this._isVariableAttached=!1,this._variableType=null,this._jsType=null,this._typeMin=-Number.MAX_VALUE,this._typeMax=Number.MAX_VALUE,this._service=null,this.x=null,this.currentUnit=null,this.unitClass=null,this._block=!1,this._variableName=null,this._propVariableName=null,this._vwVariable=null,this._negFlag=!0,this._floatFlag=!0,this._dividerFlag=!1,this._eFlag=!1,this._fromVarChangeHandler=!1,this._boundLocFormatStringHandler=this._locFormatStringHandler.bind(this),this._boundLocalizedTextChangedHandler=this._localizedTextChangedHandler.bind(this),this._boundUnitClassChangeHandler=this._unitClassChangeHandler.bind(this),this._boundLoctextHandler=this._loctextHandler.bind(this),this._boundLocUnitTextHandler=this._locUnitTextHandler.bind(this),this._boundLocLabelTextHandler=this._locLabelTextHandler.bind(this),this._boundVariableChangeHandler=this._variableChangeHandler.bind(this),this._boundWriteValue=this.writeVariable.bind(this),this._boundRecipeItemChangeHandler=this._recipeItemChangeHandler.bind(this),this._canRecipeEdit=!1,this._isRecipeEditing=!1,this._resultDecimalPlaces=null,this._decimalPlaces=null,this._font=null,this._fontClass=null,this._fontClassName=null,this._fontWeight=null,this._fontFamily=null,this._varRawLimitMin=null,this._varRawLimitMax=null,this._varLimitMin=null,this._varLimitMax=null,this._useVariableLimits=!1,this._formattedValue=null,this.__value=null,this._bitValue=null,this._useRawValue=!1,this._formatString=null,this._locFormatString=null,this._locFormatObject=null,this._varUnitText=null,this._unitText=null,this._locUnitText=null,this._locUnitObject=null,this._useVariableUnitText=!1,this._varText=null,this._text=null,this._locText=null,this._locTextObject=null,this._labelText=null,this._locLabelText=null,this._locLabeltextObject=null,this._useVariableText=!1,this._exponent=!1,this._dezimalPoint=!1,this.addPropertyList(VariableBase,VariableBase.VariableBaseOptionsList),this._service=x.AppServices.VariableService._variableService,this.resultDecimalPlaces=this.decimalPlaces}set canRecipeEdit(x){this._canRecipeEdit!=x&&(this._canRecipeEdit=x,this._vwVariable&&(this._vwVariable.CanRecipeEdit=this._canRecipeEdit))}get canRecipeEdit(){return this._canRecipeEdit}set isRecipeEditing(x){this._isRecipeEditing!=x&&(this._isRecipeEditing=x,this._isRecipeEditing)&&this._vwVariable._master.RecipeItem.Value&&this.formattedValue(this._vwVariable._master.RecipeItem.Value)}get isRecipeEditing(){return this._isRecipeEditing}set resultDecimalPlaces(x){if("number"==typeof x){x<0&&(x=0),x>127&&(x=127);this._variableType;if(this._resultDecimalPlaces!=x){var A=this._resultDecimalPlaces;this._resultDecimalPlaces=x,this.formatString="F"+x.toString();var V=this.__value;this.__value=null,this.value=V,this._updateLayoutBase("property","resultDecimalPlaces",x,A),this.dispatchNotifyPropertyChanged("property","resultDecimalPlaces",x,A)}}}get resultDecimalPlaces(){return this._resultDecimalPlaces}get decimalPlaces(){return this._decimalPlaces}set decimalPlaces(x){if("number"==typeof x){x<0&&(x=0),x>127&&(x=127);this._variableType;if(this._decimalPlaces!=x){var A=this._decimalPlaces;this._decimalPlaces=x,this.formatString="F"+x.toString();var V=this.__value;this.__value=null,this.value=V,this._updateLayoutBase("property","decimalPlaces",x,A),this.dispatchNotifyPropertyChanged("property","decimalPlaces",x,A)}}}get font(){return this._font}set font(x){if(this._font!=x){var A=this._font;this._font=x,this.element.style.font=x,this._updateLayoutBase("property","font",x,A),this.dispatchNotifyPropertyChanged("property","font",x,A)}}get fontClassName(){return this._fontClassName}get fontClass(){return this._fontClass}set fontClass(A){if(this._fontClass!=A){null!=this.fontClass&&x.Utilities.removeClass(this.element,this._fontClass.toLowerCase());var V=this._fontClass;this._fontClass=A,null!=this.fontClass&&x.Utilities.addClass(this.element,this._fontClass.toLowerCase()),null!=this._fontClassName&&(x.Utilities.removeClass(this.element,this._fontClassName),this._fontClassName=null),this._updateLayoutBase("property","fontClass",A,V),this.dispatchNotifyPropertyChanged("property","fontClass",A,V)}}set fontWeight(x){var A=null;switch(x){case"FW100":A="100";break;case"FW200":A="200";break;case"FW300":A="300";break;case"FW400":A="400";break;case"FW500":A="500";break;case"FW600":A="600";break;case"FW700":A="700";break;case"FW800":A="800";break;case"FW900":A="900";break;case"Normal":A="normal";break;case"Bold":A="bold";break;case"Bolder":A="bolder";break;case"Lighter":A="lighter";break;default:A="normal"}this._fontWeight=x,this.element.style.fontWeight=A}get fontWeight(){return this._fontWeight}set fontFamily(x){if(this._fontFamily!=x){var A=this._fontFamily;this._fontFamily=x,this.element.style.fontFamily=x,this._updateLayoutBase("property","fontFamily",x,A),this.dispatchNotifyPropertyChanged("property","fontFamily",x,A)}}get fontFamily(){if(this.fontClass&&"none"!=this.fontClass){var x=window.getComputedStyle(this.element,null).fontFamily.split(",")[0];return x=(x=x.replace(/^"(.+)"$/,"$1")).replace(/^'(.+)'$/,"$1")}return"none"}_unitClassChangeHandler(x){this.useRawValue||this.inlineOptions.useRawValue?this.resultDecimalPlaces=this.decimalPlaces:this.resultDecimalPlaces=this.decimalPlaces+x.DecPoint,this.currentUnit=x,this.varLimitMin=this.rawValue2value(this.varRawLimitMin),this.varLimitMax=this.rawValue2value(this.varRawLimitMax),x.Text&&(this.varUnitText=x.Text,this.useVariableUnitText&&(this.unitText=this.varUnitText))}_localizedTextChangedHandler(x){x.DisplayText&&(this.varUnitText=x.DisplayText,this.useVariableUnitText&&(this.unitText=this.varUnitText))}detachUpdate(x){x.UnitClass&&(x.UnitClass.Change.remove(this._boundUnitClassChangeHandler,this),x.UnitClass.CurrentUnit.LocalizedText&&x.UnitClass.CurrentUnit.LocalizedText.Changed.remove(this._boundLocalizedTextChangedHandler))}detach(){let x=null;return this.isAttached&&(x=super.detach(),null!=this._vwVariable&&(this.useVariableText&&this.localizableText&&(this.localizableText=null),this._vwVariable.Change.remove(this._boundVariableChangeHandler,this),this._vwVariable.RecipeItemChange.remove(this._boundRecipeItemChangeHandler),this.detachUpdate(this._vwVariable),this._vwVariable.Detach(),this._isVariableAttached=!1)),x}attachUpdate(A){A?(A.UnitClass?(this.unitClass=A.UnitClass,this.currentUnit=A.UnitClass.CurrentUnit,this.useRawValue||this.inlineOptions.useRawValue?this.resultDecimalPlaces=this.decimalPlaces:A.UnitClass.UnitClassType===x.System.DataAccess.UnitClassType.Display&&(this.resultDecimalPlaces=this.decimalPlaces+this.currentUnit.DecPoint),A.UnitClass.Change.add(this._boundUnitClassChangeHandler,this)):this.resultDecimalPlaces=this.decimalPlaces,this.currentUnit&&this.currentUnit.Text&&(this.varUnitText=this.currentUnit.Text,this.useVariableUnitText&&(this.unitText=this.varUnitText)),null!==A.MaxValue&&(this.varLimitMax=A.MaxValue),null!==A.MinValue&&(this.varLimitMin=A.MinValue),null!==A.RawMaxValue&&(this.varRawLimitMax=A.RawMaxValue,A.MaxValue||(this.varLimitMax=this.rawValue2value(this.varRawLimitMax))),null!==A.RawMinValue&&(this.varRawLimitMin=A.RawMinValue,A.MinValue||(this.varLimitMin=this.rawValue2value(this.varRawLimitMin))),this.canRecipeEdit&&(this._vwVariable.CanRecipeEdit=this.canRecipeEdit,this._vwVariable.RecipeItemChange.add(this._boundRecipeItemChangeHandler))):x.Application.WarnLog.log("VisiWin.UI."+this.__VWCONTROL__+".attachUpdate: no object in item.")}attach(){let A=null;if(!this.isAttached&&(A=super.attach(),null!=this._vwVariable)){null===this._vwVariable.Quality&&null!==this._vwVariable.Value&&(this._vwVariable.Change.remove(this._boundVariableChangeHandler,this),this.detachUpdate(this._vwVariable),this._vwVariable.Detach(),this._vwVariable=x.AppServices.VariableService.getVariable(this._variableName));var V=this,R=this._vwVariable.AttachAsync();if(this._vwVariable.Change.add(this._boundVariableChangeHandler,this),R)return R.then(function(x){V.useVariableText&&V._vwVariable.LocalizableText&&(V.localizableText=V._vwVariable.LocalizableText,V.localizableLabelText=V._vwVariable.LocalizableText),V._isVariableAttached=!0,V.attachUpdate(V._vwVariable)}.bind(V),function(A){V._isVariableAttached=!1,x.Application.ErrorLog.log("VisiWin.UI."+V.__VWCONTROL__+".attach, Variable "+V._vwVariable.Name+"kann nicht angemeldet werden.")}.bind(V)),R;this._vwVariable&&(this._isVariableAttached=!0,this.attachUpdate(this._vwVariable))}return A}set variableName(A){var V=this._variableName;if(this._variableName=A,(!x.Utilities.isInDesignMode()||x.Utilities.isInInteractiveRunMode()&&x.Utilities.isInDesignMode())&&A!==this._propVariableName&&(this._vwVariable&&(this._vwVariable.Change.remove(this._boundVariableChangeHandler,this),this._vwVariable.RecipeItemChange.remove(this._boundRecipeItemChangeHandler),this._vwVariable.Detach(),this._vwVariable.Dispose(),this._vwVariable=null,this._propVariableName=null,this._isVariableAttached=!1),!this._vwVariable&&A&&(this._vwVariable=x.AppServices.VariableService.getVariable(A),this._propVariableName=A,this.isAttached&&this._vwVariable))){var R=this,D=this._vwVariable.AttachAsync();this._vwVariable.Change.add(this._boundVariableChangeHandler,this),D?D.then((function(x){R._isVariableAttached=!0}),(function(x){R._isVariableAttached=!1})):this._isVariableAttached=!0}this._updateLayoutBase("property","variableName",A,V),this.dispatchNotifyPropertyChanged("property","variableName",A,V)}get variableName(){return this._variableName}set varRawLimitMin(x){if(this._varRawLimitMin!=x){var A=this._varRawLimitMin;this._varRawLimitMin=x,this.varLimitMin=this.rawValue2value(this.varRawLimitMin),this._updateLayoutBase("property","varRawLimitMin",x,A),this.dispatchNotifyPropertyChanged("property","varRawLimitMin",x,A)}}get varRawLimitMin(){return this._varRawLimitMin}set varRawLimitMax(x){if(this._varRawLimitMax!=x){var A=this._varRawLimitMax;this._varRawLimitMax=x,this.varLimitMax=this.rawValue2value(this.varRawLimitMax),this._updateLayoutBase("property","varRawLimitMax",x,A),this.dispatchNotifyPropertyChanged("property","varRawLimitMax",x,A)}}get varRawLimitMax(){return this._varRawLimitMax}set varLimitMin(x){if(this._varLimitMin!=x){var A=this._varLimitMin;this._varLimitMin=x,this._updateLayoutBase("property","varLimitMin",x,A),this.dispatchNotifyPropertyChanged("property","varLimitMin",x,A)}}get varLimitMin(){return this._varLimitMin}set varLimitMax(x){var A=this._varLimitMax;this._varLimitMax=x,this._updateLayoutBase("property","varLimitMax",x,A),this.dispatchNotifyPropertyChanged("property","varLimitMax",x,A)}get varLimitMax(){return this._varLimitMax}set useVariableLimits(x){if(this._useVariableLimits!=x){var A=this._useVariableLimits;this._useVariableLimits=x,this._updateLayoutBase("property","useVariableLimits",x,A),this.dispatchNotifyPropertyChanged("property","useVariableLimits",x,A)}}get useVariableLimits(){return this._useVariableLimits}set formattedValue(x){if(this._formattedValue!=x){var A=this._formattedValue;this._formattedValue=x,this._updateLayoutBase("property","formattedValue",x,A),this.dispatchNotifyPropertyChanged("property","formattedValue",x,A)}}get formattedValue(){return this._formattedValue}set value(x){if(this._value!==x){var A=this._value;this._value=x,this._updateLayoutBase("property","value",x,A),this.dispatchNotifyPropertyChanged("property","value",x,A,"valueChanged")}}get value(){return this.__value}set _value(A){this.__value=A,this.formatString&&"number"==typeof A&&this._floatFlag?this.formattedValue=x.Utilities.frmString(this.formatString,A):this.formattedValue="number"==typeof A?A.toString():A,"function"==typeof this._onVariableValueChanged&&this._onVariableValueChanged(this._vwVariable,this.__value)}get _value(){return this.__value}set bitValue(x){if(this._bitValue!=x){var A=this._bitValue;this._bitValue=x,this._key?this.showRemotePressed&&(this.pressed=x):this.checkedWithoutWrite=x,this._toggle&&(this.active=x),this._updateLayoutBase("property","bitValue",x,A),this.dispatchNotifyPropertyChanged("property","bitValue",x,A)}}get bitValue(){return this._bitValue}set useRawValue(x){if(this._useRawValue!=x){var A=this._useRawValue;this._useRawValue=x,this._varProperty=x?"RawValue":"Value",this._updateLayoutBase("property","useRawValue",x,A),this.dispatchNotifyPropertyChanged("property","useRawValue",x,A)}}get useRawValue(){return this._useRawValue}set formatString(x){if(this._formatString!=x){var A=this._formatString;this._formatString=x,null!=this.__value&&(this.value=this.__value),this._updateLayoutBase("property","formatString",x,A),this.dispatchNotifyPropertyChanged("property","formatString",x,A)}}get formatString(){return this._formatString}_locFormatStringHandler(x){this.formatString=x.DisplayText}set locFormatString(x){if(this._locFormatString!=x){null!=this._locFormatString&&this.locService&&this._locFormatObject&&this.locService.removeLocalizedText(this._locFormatString,this._boundLocFormatStringHandler,this._locFormatObject),this._locFormatString=x;var A=this._locFormatString;this.locService&&this.locService.addLocalizedTextAsync(this._locFormatString,this._boundLocFormatStringHandler).then(x=>{this._locFormatObject=x}),this._updateLayoutBase("property","locFormatString",x,A),this.dispatchNotifyPropertyChanged("property","locFormatString",x,A)}}get locFormatString(){return this._locFormatString}set varUnitText(x){if(this._varUnitText!=x){var A=this._varUnitText;this._varUnitText=x,this._updateLayoutBase("property","varUnitText",x,A),this.dispatchNotifyPropertyChanged("property","varUnitText",x,A)}}get varUnitText(){return this._varUnitText}set unitText(x){if(this._unitText!=x){var A=this._unitText;this._unitText=x,this._updateLayoutBase("property","unitText",x,A),this.dispatchNotifyPropertyChanged("property","unitText",x,A)}}get unitText(){return this._unitText}_locUnitTextHandler(x){this.useVariableUnitText||(this.unitText=x.DisplayText)}set locUnitText(x){if(this._locUnitText!=x){var A=this._locUnitText;null!=this._locUnitText&&this.locService&&this._locUnitObject&&this.locService.removeLocalizedText(this._locUnitText,this._boundLocUnitTextHandler,this._locUnitObject),this._locUnitText=x,this.locService&&this.locService.addLocalizedTextAsync(this._locUnitText,this._boundLocUnitTextHandler).then(x=>{this._locUnitObject=x}),this._updateLayoutBase("property","locUnitText",x,A),this.dispatchNotifyPropertyChanged("property","locUnitText",x,A)}}get locUnitText(){return this._locUnitText}set localizableUnitText(x){this.locUnitText=x}get localizableUnitText(){return this.locUnitText}set useVariableUnitText(x){if(this._useVariableUnitText!=x){var A=this._useVariableUnitText;this._useVariableUnitText=x,x&&this.varUnitText&&(this.unitText=this.varUnitText),this._updateLayoutBase("property","useVariableUnitText",x,A),this.dispatchNotifyPropertyChanged("property","useVariableUnitText",x,A)}}get useVariableUnitText(){return this._useVariableUnitText}get varText(){return this._varText}set varText(x){if(this._varText!=x){var A=this._varText;this._varText=x,this._updateLayoutBase("property","varText",x,A),this.dispatchNotifyPropertyChanged("property","varText",x,A)}}set text(x){var A=this._text;this._text=x,this._updateLayoutBase("property","text",x,A),this.dispatchNotifyPropertyChanged("property","text",x,A)}get text(){return this._text}_loctextHandler(x){var A=this.text;this.text=x.DisplayText,this._updateLayoutBase("eventProperty","text",this.text,A),this.dispatchNotifyPropertyChanged("eventProperty","text",this.text,A)}set locText(x){if(this._locText!=x){var A=this._locText;null!=this._locText&&this.locService&&this._locTextObject&&this.locService.removeLocalizedText(this._locText,this._boundLoctextHandler,this._locTextObject),this._locText=x,this.locService&&this.locService.addLocalizedTextAsync(this._locText,this._boundLoctextHandler).then(x=>{this._locTextObject=x}),this._updateLayoutBase("property","locText",x,A),this.dispatchNotifyPropertyChanged("property","locText",x,A)}}get locText(){return this._locText}set localizableText(x){this.locText=x}get localizableText(){return this.locText}set labelText(x){var A=this._labelText;this._labelText=x,this._updateLayoutBase("property","labelText",x,A),this.dispatchNotifyPropertyChanged("property","labelText",x,A)}get labelText(){return this._labelText}_locLabelTextHandler(x){var A=this.labelText;this.labelText=x.DisplayText,this._updateLayoutBase("eventProperty","labelText",this.labelText,A),this.dispatchNotifyPropertyChanged("eventProperty","labelText",this.labelText,A)}set locLabelText(x){if(this._locLabelText!=x){var A=this._locLabelText;null!=this._locLabelText&&this.locService&&this._locLabeltextObject&&this.locService.removeLocalizedText(this._locLabelText,this._boundLocLabelTextHandler,this._locLabeltextObject),this._locLabelText=x,this.locService&&this.locService.addLocalizedTextAsync(this._locLabelText,this._boundLocLabelTextHandler).then(x=>{this._locLabeltextObject=x}),this._updateLayoutBase("property","locLabelText",x,A),this.dispatchNotifyPropertyChanged("property","locLabelText",x,A)}}get locLabelText(){return this._locLabelText}set localizableLabelText(x){this.locLabelText=x}get localizableLabelText(){return this.locLabelText}set useVariableText(x){if(this._useVariableText!=x){var A=this._useVariableText;this._useVariableText=x,this._updateLayoutBase("property","useVariableText",x,A),this.dispatchNotifyPropertyChanged("property","useVariableText",x,A)}}get useVariableText(){return this._useVariableText}validateValue(x){var A,V,R=0;if(null==this.value||null==this.value)return!1;if((R=x.indexOf(","))>=0){for(var D=x.split(","),N=0;N<D.length;N++)if((R=D[N].indexOf(".."))>=0){if((A=D[N].substring(0,R))>(V=D[N].substring(R+2))){let x=V;V=A,A=x}if(this.value>=parseFloat(A)&&this.value<=parseFloat(V))return!0}else if(D[N].toString()===this.value.toString())return!0}else if((R=x.indexOf(".."))>=0){if((A=x.substring(0,R))>(V=x.substring(R+2))){let x=V;V=A,A=x}if(this.value>=parseFloat(A)&&this.value<=parseFloat(V))return!0}else if((R=x.indexOf(">="))>=0){if(V=x.substring(R+2),this.value>=parseFloat(V))return!0}else if((R=x.indexOf(">"))>=0){if(V=x.substring(R+1),this.value>parseFloat(V))return!0}else if((R=x.indexOf("<="))>=0){if(V=x.substring(R+2),this.value<=parseFloat(V))return!0}else if((R=x.indexOf("<"))>=0){if(V=x.substring(R+1),this.value<parseFloat(V))return!0}else if(x.toString()===this.value.toString())return!0;return!1}writeVariable(x){return __awaiter(this,void 0,void 0,(function*(){if(this._propVariableName){var A=0;if(x.sender.checked&&(A=1,"1","True"),"boolean"===x.sender._jsType){if(this._vwVariable.IsRecipeEditing)return void(this._vwVariable._master.RecipeItem.RecipeClass&&this._vwVariable._master.RecipeItem.RecipeClass.SetValueAsync(this.variableName,!!A));yield this._service.SetValueAsync(this._propVariableName,!!A)}else if("number"===x.sender._jsType)if(null!=x.sender.bitNumber){if(this._vwVariable.IsRecipeEditing)return void(this._vwVariable._master.RecipeItem.RecipeClass&&this._vwVariable._master.RecipeItem.RecipeClass.SetValueAsync(this.variableName,!!A));yield this._service.SetBitAsync(this._propVariableName,x.sender.bitNumber,!!A),this._block=!1}else{this._block=!0;var V=1;if(this._dividerFlag&&this.decimalPlaces>=0&&(V=Math.pow(10,this.decimalPlaces)),this._vwVariable.IsRecipeEditing)return void(this._vwVariable._master.RecipeItem.RecipeClass&&this._vwVariable._master.RecipeItem.RecipeClass.SetValueAsync(this.variableName,x.value*V));yield this._service.SetValueAsync(this._propVariableName,x.value*V)}else if("string"===x.sender._jsType){if(this._vwVariable.IsRecipeEditing)return void(this._vwVariable._master.RecipeItem.RecipeClass&&this._vwVariable._master.RecipeItem.RecipeClass.SetValueAsync(this.variableName,x.value));yield this._service.SetValueAsync(this._propVariableName,x.value)}}}))}get exponent(){return this._exponent}set exponent(x){this._exponent=x}get dezimalPoint(){return this._dezimalPoint}set dezimalPoint(x){this._dezimalPoint=x}_setTypeProperties(A){var V;switch("string"==typeof A?(V=A,A=x.System.DataAccess.TypeCode[A]):V=x.System.DataAccess.TypeCode[A],this._variableType=V,A){case x.System.DataAccess.TypeCode.Boolean:this._jsType="boolean",this._typeMin=0,this._typeMax=1,this._negFlag=!1,this._floatFlag=!1,this._eFlag=!1;break;case x.System.DataAccess.TypeCode.Byte:this._jsType="number",this._typeMin=0,this._typeMax=255,this._negFlag=!1,this._floatFlag=!1,this._eFlag=!1;break;case x.System.DataAccess.TypeCode.UInt16:this._jsType="number",this._typeMin=0,this._typeMax=65535,this._negFlag=!1,this._floatFlag=!1,this._eFlag=!1;break;case x.System.DataAccess.TypeCode.UInt32:this._jsType="number",this._typeMin=0,this._typeMax=4294967295,this._negFlag=!1,this._floatFlag=!1,this._eFlag=!1;break;case x.System.DataAccess.TypeCode.SByte:this._jsType="number",this._typeMin=-128,this._typeMax=127,this._negFlag=!0,this._floatFlag=!1,this._eFlag=!1;break;case x.System.DataAccess.TypeCode.Int16:this._jsType="number",this._typeMin=-32768,this._typeMax=32767,this._negFlag=!0,this._floatFlag=!1,this._eFlag=!1;break;case x.System.DataAccess.TypeCode.Int32:this._jsType="number",this._typeMin=-2147483648,this._typeMax=2147483647,this._negFlag=!0,this._floatFlag=!1,this._eFlag=!1;break;case x.System.DataAccess.TypeCode.Single:this._jsType="number",this._typeMin=-1e38,this._typeMax=1e38,this._negFlag=!0,this._floatFlag=!0,this._eFlag=!0;break;case x.System.DataAccess.TypeCode.Double:this._jsType="number",this._typeMin=-1e307,this._typeMax=1e307,this._negFlag=!0,this._floatFlag=!0,this._eFlag=!0;break;case x.System.DataAccess.TypeCode.String:this._jsType="string",this._typeMin=null,this._typeMax=null,this._negFlag=!1,this._floatFlag=!1,this._eFlag=!1;break;case x.System.DataAccess.TypeCode.DateTime:this._jsType="datetime",this._typeMin=null,this._typeMax=null,this._negFlag=null,this._floatFlag=null,this._eFlag=null;break;case x.System.DataAccess.TypeCode.Object:this._jsType="object",this._typeMin=null,this._typeMax=null,this._negFlag=null,this._floatFlag=null,this._eFlag=null;break;default:this._jsType="undefined",this._variableType="undefined"}}_isInteger(x){return x%1==0}_recipeItemChangeHandler(x){this._vwVariable.IsRecipeEditing&&null!==x.Value&&this._variableChangeHandler(x)}_variableChangeHandler(A){if(A&&void 0!==A[this._varProperty]){var V=A[this._varProperty];if("Value"==this._varProperty&&this._vwVariable.IsRecipeEditing&&this._vwVariable._master.RecipeItem.Value&&(V=this._vwVariable._master.RecipeItem.Value),this._vwVariable.UseUnitConversion&&this._vwVariable.UnitClass&&this._vwVariable.UnitClass.UnitClassType===x.System.DataAccess.UnitClassType.Display?this._setTypeProperties(this._vwVariable.TypeCode):this._setTypeProperties(this._vwVariable.RawTypeCode),"boolean"===this._jsType)!0===V?(V="1",this._numValue=1,this._fromVarChangeHandler=!0,this.bitValue=!0):(V="0",this._numValue=0,this._fromVarChangeHandler=!0,this.bitValue=!1),this.value=V;else if("string"===this._jsType)this._fromVarChangeHandler=!0,this.value=V;else if("number"===this._jsType){var R=1;this.useRawValue||this._vwVariable.RawTypeCode==x.System.DataAccess.TypeCode.Single||this._vwVariable.RawTypeCode==x.System.DataAccess.TypeCode.Double||this.decimalPlaces>=0&&(R=Math.pow(10,this.decimalPlaces),this._dividerFlag=!0),V=x.Utilities.valueToJS(V),this._numValue=parseFloat(V),this.value=V/R,this._fromVarChangeHandler=!0,this.value=this._numValue/R,null===A.RawValue||void 0===A.RawValue?this.rawValue=A.Value:this.rawValue=A.RawValue;var D=A.RawValue||A.Value;if(this._isInteger(D)){if(null!=this.bitNumber){var N=0!=(D&Math.pow(2,this.bitNumber));N!=this._bitValue&&(this._fromVarChangeHandler=!0,this.bitValue=N)}if(this.bitCalculation){this.bitNumberSetLSB=null,this.bitNumberSetMSB=null,this.bitNumberSetCnt=0;for(var U=D,B=0;B<32;B++)1&U&&(null==this.bitNumberSetLSB&&(this.bitNumberSetLSB=B),this.bitNumberSetMSB=B,this.bitNumberSetCnt++),U>>=1}}}else"real"===this._jsType?(V=x.Utilities.valueToJS(V),this._numValue=parseFloat(V),this._fromVarChangeHandler=!0,this.value=V):"datetime"===this._jsType||"object"===this._jsType?(this._fromVarChangeHandler=!0,this.value=V):"Undefined"!==this._variableType?(this._fromVarChangeHandler=!0,this.value=parseInt(V).toString()):(this._fromVarChangeHandler=!0,this.value=NaN.toString());this._fromVarChangeHandler=!1}else this._fromVarChangeHandler=!1}value2rawValue(A){if(!this.currentUnit||!this._vwVariable.UnitClass||this._vwVariable.UnitClass.UnitClassType===x.System.DataAccess.UnitClassType.Process)return A;var V=this.currentUnit.Slope;return(A-this.currentUnit.Offset)/V}rawValue2value(A){if(!this.currentUnit||!this._vwVariable.UnitClass||this._vwVariable.UnitClass.UnitClassType===x.System.DataAccess.UnitClassType.Process)return A;var V=A*this.currentUnit.Slope+this.currentUnit.Offset;if(this.currentUnit.DecPoint>0&&x.Internal.isIntergerType(this._vwVariable.RawTypeCode)){let x=V.toString();-1===x.indexOf(".")&&(V=x.substring(0,x.length-this.currentUnit.DecPoint)+"."+x.substring(x.length-this.currentUnit.DecPoint))}return V}calcValueWithUnitClass(x,A){let V=0;if(this._vwVariable.UnitClass&&this._vwVariable.UnitClass.CurrentUnit.DecPoint>0){let R=parseFloat(x)*A;V=this.value2rawValue(R)/Math.pow(10,this._vwVariable.UnitClass.CurrentUnit.DecPoint)*this._vwVariable.UnitClass.CurrentUnit.Slope+this._vwVariable.UnitClass.CurrentUnit.Offset}else V=parseFloat(x)*A;return V}getFormattedMinValue(A){let V=null;if(V=this.useVariableLimits&&null!==this.varRawLimitMin?this.useRawValue?this.varRawLimitMin:this.rawValue2value(this.varRawLimitMin):this.useRawValue?A:this.rawValue2value(A),null===V&&(V=this.useVariableLimits&&this.varRawLimitMin?this.useRawValue?this.varRawLimitMin:this.rawValue2value(this.varRawLimitMin):this.useRawValue?A:this.rawValue2value(A)),!x.isNullOrUndefined(this._vwVariable)){let A=1;!this.useRawValue&&this.decimalPlaces>0&&!x.Internal.isFloatingType(this._vwVariable.RawTypeCode)&&(A=Math.pow(10,this.decimalPlaces)),V/=A}return V}getFormattedMaxValue(A){let V=null;V=this.useVariableLimits&&null!==this.varRawLimitMax?this.useRawValue?this.varRawLimitMax:this.rawValue2value(this.varRawLimitMax):this.useRawValue?A:this.rawValue2value(A),null===V&&(V=this.useVariableLimits&&this.varRawLimitMax?this.useRawValue?this.varRawLimitMax:this.rawValue2value(this.varRawLimitMax):this.useRawValue?A:this.rawValue2value(A));let R=1;return x.isNullOrUndefined(this._vwVariable)||(!this.useRawValue&&this.decimalPlaces>0&&!x.Internal.isFloatingType(this._vwVariable.RawTypeCode)&&(R=Math.pow(10,this.decimalPlaces)),V/=R),V}dispose(){return this._vwVariable&&(this._vwVariable.Change.remove(this._boundVariableChangeHandler,this),this._vwVariable.RecipeItemChange.remove(this._boundRecipeItemChangeHandler),this._vwVariable.Detach(),this._vwVariable=null,this._propVariableName=null,this._variableName=null),null!=this._locFormatString&&this.locService&&this._locFormatObject&&this.locService.removeLocalizedText(this._locFormatString,this._boundLocFormatStringHandler,this._locFormatObject),null!=this._locUnitText&&this.locService&&this._locUnitObject&&this.locService.removeLocalizedText(this._locUnitText,this._boundLocUnitTextHandler,this._locUnitObject),null!=this._locText&&this.locService&&this._locTextObject&&this.locService.removeLocalizedText(this._locText,this._boundLoctextHandler,this._locTextObject),null!=this._locLabelText&&this.locService&&this._locLabeltextObject&&this.locService.removeLocalizedText(this._locLabelText,this._boundLocLabelTextHandler,this._locLabeltextObject),super.dispose()}}VariableBase.controlName="VariableBase",VariableBase.VariableBaseOptionsList={formatTextChanged:{propertyType:"event"},unitTextChanged:{propertyType:"event"},textChanged:{propertyType:"event"},labelTextChanged:{propertyType:"event"},bitNrChanged:{propertyType:"event"},valueChanged:{propertyType:"event"},variableNameChanged:{propertyType:"event"},valueError:{propertyType:"event"},variableName:{propertyType:"custom",type:"string"},canRecipeEdit:{propertyType:"custom",type:"boolean",defaultValue:!1},value:{propertyType:"custom",type:"number"},rawValue:{propertyType:"member",type:"number"},useRawValue:{propertyType:"custom",type:"boolean",defaultValue:!1},bitValue:{propertyType:"custom",type:"boolean"},bitNumber:{propertyType:"member",type:"number"},varRawLimitMin:{propertyType:"custom",type:"number"},varRawLimitMax:{propertyType:"custom",type:"number"},varLimitMin:{propertyType:"custom",type:"number"},varLimitMax:{propertyType:"custom",type:"number"},useVariableLimits:{propertyType:"custom",type:"boolean",defaultValue:!1},decimalPlaces:{propertyType:"custom",type:"number",defaultValue:0},formatString:{propertyType:"custom",type:"string"},locFormatString:{propertyType:"custom",type:"string"},formattedValue:{propertyType:"custom",type:"string"},bitCalculation:{propertyType:"member",type:"boolean",defaultValue:!1},bitNumberSetLSB:{propertyType:"member",type:"number"},bitNumberSetMSB:{propertyType:"member",type:"number"},bitNumberSetCnt:{propertyType:"member",type:"number",defaultValue:0},text:{propertyType:"custom",type:"string"},locText:{propertyType:"custom",type:"string"},localizableText:{propertyType:"custom",type:"string"},useVariableText:{propertyType:"custom",type:"boolean",defaultValue:!1},unitText:{propertyType:"custom",type:"string"},locUnitText:{propertyType:"custom",type:"string"},localizableUnitText:{propertyType:"custom",type:"string"},useVariableUnitText:{propertyType:"custom",type:"boolean",defaultValue:!1},labelText:{propertyType:"custom",type:"string"},locLabelText:{propertyType:"custom",type:"string"},localizableLabelText:{propertyType:"custom",type:"string"},showRemotePressed:{propertyType:"member",type:"boolean",defaultValue:!1},font:{propertyType:"custom",type:"string"},fontClassName:{propertyType:"custom",type:"string"},fontClass:{propertyType:"custom",type:"enum"},fontFamily:{propertyType:"custom",type:"string"},fontSize:{propertyType:"style",type:"string"},fontWeight:{propertyType:"custom",type:"enum",defaultValue:"fw400"},lineHeight:{propertyType:"style",type:"string"}},A.VariableBase=VariableBase}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class ButtonBase extends A.VariableBase{constructor(x,A){super(x,A),this.ripple=null,this.showLoadingSymbol=!1,this._mousedown=!1,this._inuse=!1,this.outside=!1,this._dragXStart=0,this._dragYStart=0,this._dragX=0,this._dragY=0,this._dragOff=!1,this._boundPointerMove=this._pointerMoveHandler.bind(this),this._boundPointerUp=this._pointerUpHandler.bind(this),this._boundPointerDownHandler=this._pointerDownHandler.bind(this),this._boundPointerCancelHandler=this._pointerCancelHandler.bind(this),this._boundDocumentPointerCancelHandler=this._doumentPointerCancelHandler.bind(this),this._boundLocalizableTextOnHandler=this._localizableTextOnHandler.bind(this),this._boundLocalizableTextOffHandler=this._localizableTextOffHandler.bind(this),this._textOn=null,this._localizableTextOn=null,this._localizableTextOnObject=null,this._textOff=null,this._localizableTextOff=null,this._localizableTextOffObject=null,this._indeterminate=!1,this._checked=!1,this._pressed=!1,this.addPropertyList(ButtonBase,ButtonBase.ButtonBaseOptionsList),this.buttonInitHandler(x),this.actionHandler=this._navAction.bind(this),"function"==typeof this.addDisposeList&&this.addDisposeList("buttonRemoveHandler")}_initRipple(){if(this.touchRippleEnabled){const x={target:this[this.rippleTarget]||null,targetAsParent:this.rippleTargetAsParent,radius:this.rippleRadius,speedAmount:this.rippleSpeedAmount,centered:this.rippleCentered,unbounded:this.rippleUnbounded,persistent:this.ripplePersistent,fadeInDuration:this.rippleFadeInDuration,fadeOutDuration:this.rippleFadeOutDuration,color:this.getColor("rippleColor")};this.ripple=new A.TouchRipple(this[this.rippleElement]||this.element,x)}}_changeRippleColor(){null!=this.ripple&&(this.ripple.options.color=this.getColor("rippleColor"))}get textOn(){return this._textOn}set textOn(x){if(this._textOn!=x){const A=this._textOn;this._textOn=x,!this.useVariableText&&this.checked&&(this._textOn||this._textOff)&&(this.text=x||" "),this._updateLayoutBase("property","textOn",x,A),this.dispatchNotifyPropertyChanged("property","textOn",x,A)}}_localizableTextOnHandler(x){this.textOn=x.DisplayText}set localizableTextOn(x){if(this._localizableTextOn!=x){const A=this._localizableTextOn;null!=this._localizableTextOn&&this.locService&&this._localizableTextOnObject&&this.locService.removeLocalizedText(this.localizableTextOn,this._boundLocalizableTextOnHandler,this._localizableTextOnObject),this._localizableTextOn=x,this.locService&&this.locService.addLocalizedTextAsync(this.localizableTextOn,this._boundLocalizableTextOnHandler).then(x=>{this._localizableTextOnObject=x}),this._updateLayoutBase("property","localizableTextOn",x,A),this.dispatchNotifyPropertyChanged("property","localizableTextOn",x,A)}}get localizableTextOn(){return this._localizableTextOn}get textOff(){return this._textOff}set textOff(x){if(this._textOff!=x){const A=this._textOff;this._textOff=x,this.checked||this.useVariableText||!this._textOn&&!this._textOff||(this.text=x||" "),this._updateLayoutBase("property","textOff",x,A),this.dispatchNotifyPropertyChanged("property","textOff",x,A)}}_localizableTextOffHandler(x){this.textOff=x.DisplayText}get localizableTextOff(){return this._localizableTextOff}set localizableTextOff(x){if(this._localizableTextOff!=x){const A=this._localizableTextOff;null!=this._localizableTextOff&&this.locService&&this._localizableTextOffObject&&this.locService.removeLocalizedText(this.localizableTextOff,this._boundLocalizableTextOffHandler,this._localizableTextOffObject),this._localizableTextOff=x,this.locService&&this.locService.addLocalizedTextAsync(this.localizableTextOff,this._boundLocalizableTextOffHandler).then(x=>{this._localizableTextOffObject=x}),this._updateLayoutBase("property","localizableTextOff",x,A),this.dispatchNotifyPropertyChanged("property","localizableTextOff",x,A)}}set indeterminate(A){if(this._indeterminate!=A){const V=this._indeterminate;this._indeterminate=A,this._indeterminate?(this.checked=!1,x.Utilities.addClass(this.element,ButtonBase.classIndeterminate)):x.Utilities.removeClass(this.element,ButtonBase.classIndeterminate),this._updateLayoutBase("property","indeterminate",A,V),this.dispatchNotifyPropertyChanged("property","indeterminate",A,V,"indeterminateChange")}}get indeterminate(){return this._indeterminate}set checkedWithoutWrite(A){if(this._checked!=A){const V=this._checked;this._checked=A,this._checked?(x.Utilities.addClass(this.element,ButtonBase.classChecked),x.Utilities.removeClass(this.element,ButtonBase.classUnchecked),this.useVariableText||!this._textOn&&!this._textOff||(this.textOn?this.text=this.textOn:this.text=" ")):(x.Utilities.addClass(this.element,ButtonBase.classUnchecked),x.Utilities.removeClass(this.element,ButtonBase.classChecked),this.useVariableText||!this._textOn&&!this._textOff||(this.textOn?this.text=this.textOff:this.text=" ")),"function"==typeof this.actionHandler&&(this._fromVarChangeHandler||this.actionHandler(this)),this._updateColorsBase("state","checked",A,V),this._updateLayoutBase("state","checked",A,V),this.dispatchNotifyPropertyChanged("state","checked",A,V,"checkedChanged")}}set checked(A){const V=this._checked;this._checked=A,this._checked?(x.Utilities.addClass(this.element,ButtonBase.classChecked),x.Utilities.removeClass(this.element,ButtonBase.classUnchecked),this.useVariableText||!this._textOn&&!this._textOff||(this.textOn?this.text=this.textOn:this.text=" ")):(x.Utilities.addClass(this.element,ButtonBase.classUnchecked),x.Utilities.removeClass(this.element,ButtonBase.classChecked),this.useVariableText||!this._textOn&&!this._textOff||(this.textOn?this.text=this.textOff:this.text=" "));let R={};R.sender=this,R.tag=this.tag,R.value=A,R.senderName="checked",this.writeVariable(R),R=null,"function"==typeof this.actionHandler&&this.actionHandler(this),this._updateColorsBase("state","checked",A,V),this._updateLayoutBase("state","checked",A,V),this.dispatchNotifyPropertyChanged("state","checked",A,V,"checkedChanged")}get checked(){return this._checked}set checkedIntern(A){const V=this._checked;this._checked=A,this._checked?(x.Utilities.addClass(this.element,ButtonBase.classChecked),x.Utilities.removeClass(this.element,ButtonBase.classUnchecked),this.useVariableText||!this._textOn&&!this._textOff||(this.textOn?this.text=this.textOn:this.text=" ")):(x.Utilities.addClass(this.element,ButtonBase.classUnchecked),x.Utilities.removeClass(this.element,ButtonBase.classChecked),this.useVariableText||!this._textOn&&!this._textOff||(this.textOn?this.text=this.textOff:this.text=" "));let R={};R.sender=this,R.tag=this.tag,R.value=A,R.senderName="checked",this.writeVariable(R),R=null,this._updateColorsBase("state","checked",A,V),this._updateLayoutBase("state","checked",A,V),this.dispatchNotifyPropertyChanged("state","checked",A,V,"checkedChanged")}get checkedIntern(){return this._checked}set pressed(A){if(this._pressed!=A){const V=this._pressed;this._pressed=A,this._pressed?x.Utilities.addClass(this.element,ButtonBase.classPressed):x.Utilities.removeClass(this.element,ButtonBase.classPressed),this._updateColorsBase("status","pressed",A,V),this._updateLayoutBase("status","pressed",A,V),this.dispatchNotifyPropertyChanged("status","pressed",A,V,"pressedChanged")}}get pressed(){return this._pressed}beforeInitBase(x,A){}postSetOptionsBase(x,A){this.useVariableText||(this.checked&&(this.textOn||this.textOff)?this.textOn?this.text=this.textOn:this.text=" ":this.checked||!this.textOn&&!this.textOff||(this.textOff?this.text=this.textOff:this.text=" "))}navigate(A){let V,R,D,N,U;if(A?(R=A,this.regionId=null):(R=this.pageName?this.pageName:this.inlineOptions.pageName,D=this.viewName?this.viewName:this.inlineOptions.viewName,N=this.regionId?this.regionId:this.inlineOptions.regionId),V=this.pageOptions?this.pageOptions:this.inlineOptions.pageOptions,U=this.targetProperty?this.targetProperty:this.inlineOptions.targetProperty,N)if("[object Array]"===Object.prototype.toString.call(N)){for(let A=0;A<N.length;A++)if(D){const R=document.getElementById(x.Utilities.removeHashFromId(N[A]));R&&R.winControl&&(V&&(R.winControl.pageOptions=V),U?R.winControl[U]=D:R.winControl.viewName=D)}let A={};A.sender=this,A.tag=this.tag,this.dispatchEvent("navigated",A),A=null}else if(D){const A=document.getElementById(x.Utilities.removeHashFromId(N));A&&A.winControl&&(V&&(A.winControl.pageOptions=V),U?A.winControl[U]=D:(A.winControl.showLoadingSymbol=this.showLoadingSymbol,A.winControl.viewName=D))}if(R){let A={};if(A.sender=this,A.tag=this.tag,R&&D&&N)x.AppServices.NavigationService.navigateToView(R,D,N,V,this.showLoadingSymbol);else{WinJS.Promise.as(x.AppServices.NavigationService.navigate(R,V,this.showLoadingSymbol)).then(()=>{A=null},()=>{A=null})}}}_navAction(x){this.blockAction||(x&&x.details&&x.details.url?this.navigate(x.details.url):this.navigate(null))}buttonInitHandler(V){x.Utilities.addEventListener(this.element,A.PointerEventType.pointerdown,this._boundPointerDownHandler),x.Utilities.addEventListener(this.element,A.PointerEventType.pointercancel,this._boundPointerCancelHandler),this.key&&document.addEventListener(A.PointerEventType.pointercancel,this._boundDocumentPointerCancelHandler),x.Utilities.addEventListener(this.element,"contextmenu",this.boundPreventEvent)}buttonRemoveHandler(){this.element&&(this.key||x.Utilities.removeEventListener(this.element,A.PointerEventType.pointermove,this._boundPointerMove),x.Utilities.removeEventListener(this.element,A.PointerEventType.pointerdown,this._boundPointerDownHandler),x.Utilities.removeEventListener(this.element,A.PointerEventType.pointercancel,this._boundPointerCancelHandler),x.Utilities.removeEventListener(this.element,"contextmenu",this.boundPreventEvent),x.Utilities.removeEventListener(this.element,A.PointerEventType.pointerup,this._boundPointerUp),x.Utilities.removeEventListener(this.element,A.PointerEventType.pointerleave,this._boundPointerCancelHandler),this.key&&document.removeEventListener(A.PointerEventType.pointercancel,this._boundDocumentPointerCancelHandler))}_resetPressedState(){if(this.key&&this.pressed){this.pressed=!1;const x={};x.sender=this,x.tag=this.tag,x.value=!1,x.senderName="pressed",this.writeVariable(x)}this._mousedown=!1,this.element&&(this.key||x.Utilities.removeEventListener(this.element,A.PointerEventType.pointermove,this._boundPointerMove),x.Utilities.removeEventListener(this.element,A.PointerEventType.pointerup,this._boundPointerUp),x.Utilities.removeEventListener(this.element,A.PointerEventType.pointerleave,this._boundPointerCancelHandler))}_doumentPointerCancelHandler(x){this.key&&this.keyMode&&"Key"==this.keyMode&&(this.pressed||this._mousedown)&&this._resetPressedState()}_pointerCancelHandler(x){this._mousedown=!1,this._inuse=!0,this.pressed=!1,this._resetPressedState(),this._inuse=!1}_pointerDownHandler(V){if(this._mousedown||this.disabled)return this._mousedown=!1,this.returnPreventDefaults(V);V.stopPropagation();let R=x.Utilities.extendPointerEventArgs(this,V);return this.dispatchEvent(A.ControlEvent.onButtonDown,R),R=null,"touch"==this.lastPointerAction&&(this.hover=!1),this._dragOff=!1,this.pressed=!0,this._mousedown=!0,this._dragXStart=V.pageX-this.element.getBoundingClientRect().left,this._dragYStart=V.pageY-this.element.getBoundingClientRect().top,this._dragX=this._dragXStart,this._dragY=this._dragYStart,this.key||x.Utilities.addEventListener(this.element,A.PointerEventType.pointermove,this._boundPointerMove),x.Utilities.addEventListener(this.element,A.PointerEventType.pointerup,this._boundPointerUp),x.Utilities.addEventListener(this.element,A.PointerEventType.pointerleave,this._boundPointerCancelHandler),this.returnPreventDefaults(V)}_pointerUpHandler(V){this._mousedown=!1,this.pressed=!1,V.stopPropagation();let R=x.Utilities.extendPointerEventArgs(this,V);this.dispatchEvent(A.ControlEvent.onButtonUp,R),R=null;const D=this.element.getBoundingClientRect(),N=V.pageX-D.left,U=V.pageY-D.top;return this.dragThreshold>0&&(this._dragOff||N>D.width||U>D.height)?(this._dragOff=!1,this.pressed=!1,this.hover=!1,this._resetPressedState(),this.returnPreventDefaults(V)):(this.toggle?this.radio?this.checked?this._dispatchButtonEvents(V,!1):(this.checked=!0,this._dispatchButtonEvents(V,!0)):this.checked?(this.checked=!1,this._dispatchButtonEvents(V,!1)):(this.checkbox&&this.indeterminate&&(this.indeterminate=!1),this.checked=!0,this._dispatchButtonEvents(V,!0)):"function"==typeof this.actionHandler&&(this.actionHandler(this),this._dispatchButtonEvents(V,null)),this._resetPressedState(),this.returnPreventDefaults(V))}_pointerMoveHandler(x){if(this.blockAction||!this._mousedown)return this.returnPreventDefaults(x);x.stopPropagation();const A=this.element.getBoundingClientRect(),V=x.pageX-A.left,R=x.pageY-A.top;if(this.dragThreshold>0){const A=this._dragXStart-V,D=this._dragYStart-R;if(Math.sqrt(A*A+D*D)>this.dragThreshold)return this.pressed=!1,this.hover=!1,this.toggle&&this.checked&&(this.checked=this._checked),this._dragOff=!0,this._resetPressedState(),this.returnPreventDefaults(x)}return this.returnPreventDefaults(x)}_keyDownHandler(A){A.keyCode===x.Utilities.Key.space&&(A.preventDefault(),this.checked=!this.checked),A.keyCode!==x.Utilities.Key.rightArrow&&A.keyCode!==x.Utilities.Key.upArrow||(A.preventDefault(),this.checked=!0),A.keyCode!==x.Utilities.Key.leftArrow&&A.keyCode!==x.Utilities.Key.downArrow||(A.preventDefault(),this.checked=!1)}dispose(){return null!=this._localizableTextOn&&this.locService&&this._localizableTextOnObject&&this.locService.removeLocalizedText(this.localizableTextOn,this._boundLocalizableTextOnHandler,this._localizableTextOnObject),null!=this._localizableTextOff&&this.locService&&this._localizableTextOffObject&&this.locService.removeLocalizedText(this.localizableTextOff,this._boundLocalizableTextOffHandler,this._localizableTextOffObject),this.ripple&&this.ripple.dispose(),super.dispose()}_dispatchButtonEvents(V,R){let D=x.Utilities.extendPointerEventArgs(this,V);this.dispatchEvent(A.ControlEvent.onButtonClick,D),!0===R&&this.dispatchEvent(A.ControlEvent.onButtonClickTrue,D),!1===R&&this.dispatchEvent(A.ControlEvent.onButtonClickFalse,D),this.dispatchEvent("buttonClick",D),!0===R&&(this.dispatchEvent("buttonclickTrue",D),this.dispatchEvent("buttonClickTrue",D)),!1===R&&(this.dispatchEvent("buttonclickFalse",D),this.dispatchEvent("buttonClickFalse",D)),D=null}}ButtonBase.controlName="ButtonBase",ButtonBase.classPressed="pressed",ButtonBase.classChecked="checked",ButtonBase.classUnchecked="unchecked",ButtonBase.classIndeterminate="indeterminate",ButtonBase.ButtonBaseOptionsList={interdetermintateChanged:{propertyType:"event",triggerDataName:"indeterminate"},buttonclick:{propertyType:"event",triggerDataName:"pressed"},buttondown:{propertyType:"event"},buttonup:{propertyType:"event"},pressedChanged:{propertyType:"event",triggerDataName:"pressed"},checkedChanged:{propertyType:"event",triggerDataName:"checked"},navigated:{propertyType:"event",triggerDataValue:!0},navigateError:{propertyType:"event"},indeterminate:{propertyType:"custom",type:"boolean"},lastPointerAction:{propertyType:"member",type:"string"},checked:{propertyType:"state",type:"boolean",group:"Status"},pressed:{propertyType:"state",type:"boolean",group:"Status"},remoteActionHandler:{propertyType:"member",type:"any",invisible:!0},actionHandler:{propertyType:"member",type:"any",invisible:!0},dragThreshold:{propertyType:"member",type:"number",defaultValue:50},toggle:{propertyType:"member",type:"boolean",defaultValue:!1},radio:{propertyType:"member",type:"boolean",defaultValue:!1},key:{propertyType:"member",type:"boolean",defaultValue:!1},checkbox:{propertyType:"member",type:"boolean",defaultValue:!1},fastTap:{propertyType:"member",type:"boolean"},pageName:{propertyType:"member",type:"string"},viewName:{propertyType:"member",type:"string"},pageOptions:{propertyType:"member",type:"any",invisible:!0,defaultValue:{}},regionId:{propertyType:"member",type:"string"},showLoadingSymbol:{propertyType:"member",type:"boolean",defaultValue:!1},targetProperty:{propertyType:"member",type:"string"},textOn:{propertyType:"custom",type:"string"},localizableTextOn:{propertyType:"custom",type:"string"},textOff:{propertyType:"custom",type:"string"},localizableTextOff:{propertyType:"custom",type:"string"},touchRippleEnabled:{propertyType:"member",type:"boolean",defaultValue:!1},rippleElement:{propertyType:"member",type:"string",defaultValue:null},rippleTarget:{propertyType:"member",type:"string",defaultValue:null},rippleTargetAsParent:{propertyType:"member",type:"boolean",defaultValue:!1},rippleRadius:{propertyType:"member",type:"number",defaultValue:null},rippleSpeedAmount:{propertyType:"member",type:"number",defaultValue:1.25},rippleCentered:{propertyType:"member",type:"boolean",defaultValue:!1},rippleUnbounded:{propertyType:"member",type:"boolean",defaultValue:!1},ripplePersistent:{propertyType:"member",type:"boolean",defaultValue:!1},rippleFadeInDuration:{propertyType:"member",type:"number",defaultValue:450},rippleFadeOutDuration:{propertyType:"member",type:"number",defaultValue:400},rippleColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@RippleColor"}},A.ButtonBase=ButtonBase}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(x){"use strict";class NavButtonBase extends x.ButtonBase{constructor(x,A){super(x,A)}dispose(){return super.dispose()}}NavButtonBase.controlName="NavButtonBase",x.NavButtonBase=NavButtonBase}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class KeyBase extends x.UI.ButtonBase{constructor(A,V){super(A,V),this._boundKeyEventHandler=this._keyEventHandler.bind(this),this._pending=!1,this._lastValueValid=!1,this._keyMode=null,this.addPropertyList(x.UI.KeyBase,x.UI.KeyBase.KeyBaseOptionsList),this.bitNumber=0,this.toggle=!1,this.key=!0,this.buttonInitHandler(this.element),this.addEventListener("pressedChanged",this._boundKeyEventHandler),"function"==typeof this.addDisposeList&&this.addDisposeList("buttonRemoveHandler")}set mode(x){this.keyMode=x}get keyMode(){return this._keyMode}set keyMode(x){if(this._keyMode!==x){const A=this._keyMode;switch(x){case"Toggle":this.toggle=!0,this._keyMode=x;break;case"On":case"Off":case"Key":this.toggle=!1,this._keyMode=x;break;default:this.toggle=!1,this._keyMode="Key"}this._updateLayoutBase("property","keyMode",x,A),this.dispatchNotifyPropertyChanged("property","keyMode",x,A)}}_onVariableValueChanged(A,V){switch(this._keyMode){case"Toggle":x.Internal.valueToBoolean(V)?this.checkedWithoutWrite=!0:this.checkedWithoutWrite=!1}}detach(){return this.keyReset(),super.detach()}keyReset(){"Key"===this.keyMode&&(this.checked=!1,this.pressed=!1),this._pointerCancelHandler(null)}_keyEventHandler(x){return __awaiter(this,void 0,void 0,(function*(){switch(this._keyMode){case"Toggle":break;case"On":this.checked=!0;break;case"Off":this.checked=!1;break;case"Key":if(this._pending)this._lastValue=x.detail.newValue,this._lastValueValid=!0;else{this._pending=!0,this.checkedWithoutWrite=x.detail.newValue;let A={};for(A.sender=this,A.tag=this.tag,A.value=x.detail.newValue,A.senderName="key",yield this.writeVariable(A),A=null;this._lastValueValid;){this._lastValueValid=!1,this.checkedWithoutWrite=this._lastValue;let x={};x.sender=this,x.tag=this.tag,x.value=this._lastValue,x.senderName="key",yield this.writeVariable(x),x=null}this._pending=!1}}}))}dispose(){return this.keyReset(),super.dispose()}}KeyBase.controlName="KeyBase",KeyBase.KeyBaseOptionsList={mode:{propertyType:"custom",type:"string"},keyMode:{propertyType:"custom",type:"string",defaultValue:"Key"},key:{propertyType:"base",type:"boolean",defaultValue:!0}},A.KeyBase=KeyBase}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class ToggleButtonBase extends A.ButtonBase{constructor(x,A){super(x,A),this.toggle=!0,this.addPropertyList(ToggleButtonBase,ToggleButtonBase.ToggleButtonBaseOptionsList),this.actionHandler=this.onNavToggleAction.bind(this)}onLanguageChangedBase(){this.checked?this.useVariableText||this.textOn&&(this.text=this.textOn):this.useVariableText||this.textOff&&(this.text=this.textOff)}beforeInitBase(x,A){this.bitNumber=0}afterInit(x,A){(this.textOff||this.textOn||this.localizableTextOn||this.localizableTextOff)&&(this.localizableText=null,this.text=null)}onNavToggleAction(A){if(!this.blockAction)if(this.checked){if(this.pageOn&&this.regionId&&this.viewOn)return void x.AppServices.NavigationService.navigateToView(this.pageOn,this.viewOn,this.regionId,{},this.showLoadingSymbol);this.pageOn&&this.navigate(this.pageOn),this.regionId&&(this.viewName=this.viewOn,this.navigate())}else{if(this.pageOff&&this.regionId&&this.viewOff)return void x.AppServices.NavigationService.navigateToView(this.pageOff,this.viewOff,this.regionId,{},this.showLoadingSymbol);!this.regionId&&this.pageOffBack?x.AppServices.NavigationService.back():this.pageOff&&this.navigate(this.pageOff),this.regionId&&(this.viewName=this.viewOff,this.navigate())}}dispose(){return super.dispose()}}ToggleButtonBase.controlName="ToggleButtonBase",ToggleButtonBase.ToggleButtonBaseOptionsList={buttonclick:{propertyType:"event",triggerDataName:"checked"},pageOn:{propertyType:"member",type:"string"},pageOff:{propertyType:"member",type:"string"},pageOffBack:{propertyType:"member",type:"string"},viewOn:{propertyType:"member",type:"string"},viewOff:{propertyType:"member",type:"string"},bitNumber:{propertyType:"base",type:"number",defaultValue:0},toggle:{propertyType:"base",type:"boolean",defaultValue:!0}},A.ToggleButtonBase=ToggleButtonBase}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(x){"use strict";class NavToggleButtonBase extends x.ToggleButtonBase{constructor(x,A){super(x,A)}dispose(){return super.dispose()}}NavToggleButtonBase.controlName="NavToggleButtonBase",x.NavToggleButtonBase=NavToggleButtonBase}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(x){"use strict";class RadioButtonBase extends x.ToggleButtonBase{constructor(x,A){super(x,A),this.radio=!0,this.addPropertyList(RadioButtonBase,RadioButtonBase.RadioButtonBaseOptionsList)}beforeInitBase(x,A){super.beforeInitBase(x,A),this.registerSourceId="Group"}dispose(){return this._parentControl=null,this._parentElement=null,super.dispose()}}RadioButtonBase.controlName="RadioButtonBase",RadioButtonBase.RadioButtonBaseOptionsList={registerSourceId:{propertyType:"base",defaultValue:"Group"},radio:{propertyType:"base",defaultValue:!0}},x.RadioButtonBase=RadioButtonBase}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(x){"use strict";class CheckboxBase extends x.ToggleButtonBase{constructor(x,A){super(x,A),this.addPropertyList(CheckboxBase,CheckboxBase.CheckboxBaseOptionsList)}beforeInitBase(x,A){super.beforeInitBase(x,A),this.checkbox=!0}dispose(){return super.dispose()}}CheckboxBase.controlName="CheckboxBase",CheckboxBase.CheckboxBaseOptionsList={},x.CheckboxBase=CheckboxBase}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(x){"use strict";class TabButtonBase extends x.ButtonBase{constructor(x,A){super(x,A),this.addPropertyList(TabButtonBase,TabButtonBase.TabButtonBaseOptionsList)}dispose(){return super.dispose()}}TabButtonBase.controlName="TabButtonBase",TabButtonBase.TabButtonBaseOptionsList={toggle:{propertyType:"base",defaultValue:!0},radio:{propertyType:"base",defaultValue:!0},bitNumber:{propertyType:"base",defaultValue:0},registerSourceId:{propertyType:"base",defaultValue:"Group"}},x.TabButtonBase=TabButtonBase}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class DropDownBoxBase extends A.ButtonBase{constructor(x,A){super(x,A),this._iconElement=null,this._firstPage=!0,this._flyoutOptions={},this._flyoutControl=null,this._focusIndex=null,this._flyoutOpenFlag=!1,this._wheelEvent=null,this._keyFlagAlt=!1,this._listItems=[],this._listItemCnt=0,this._flyoutElement=null,this._selectedIndex=null,this._collectionContainerElement=null,this._boundFlyoutDismissHandler=this._flyoutDismissHandler.bind(this),this._boundFlyoutKeypressHandler=this._flyoutKeypressHandler.bind(this),this._boundKeypressHandler=this._keypressHandler.bind(this),this.selectedItem={itemSymbolElement:null,textElement:null,anchorElement:null},this._menuPlacement=null,this._menuAlignment="center",this._menuWidth=null,this._menuHeight=null,this.addPropertyList(DropDownBoxBase,DropDownBoxBase.DropDownBoxBaseOptionsList),this.dragThreshold=0,this.enablePreventEvents=!0,this.actionHandler=this._dropdownAction.bind(this)}set selectedIndex(x){var A=this._selectedIndex;if(this._selectedIndex!=x||this._firstPage)if(this._listItems[x]&&this._listItems[x].control){if(this.selectedItem.textElement&&this.selectedItem.textElement.winControl&&(this.selectedItem.textElement.winControl.localizableText=this._listItems[x].control.localizableText,this.selectedItem.textElement.winControl.text=this._listItems[x].control.text),this.selectedItem.itemSymbolElement&&this._listItems[x].control._symbolElement&&this._listItems[x].control._symbolElement.winControl&&(this.selectedItem.itemSymbolElement.winControl.symbolType=this._listItems[x].control._symbolElement.winControl.symbolType,this.selectedItem.itemSymbolElement.winControl.symbol=this._listItems[x].control._symbolElement.winControl.symbol,this.selectedItem.itemSymbolElement.winControl.symbolSize=this._listItems[x].control._symbolElement.winControl.symbolSize,void 0!==this._listItems[x].control.color?this.color=this._listItems[x].control.color:this.color=null),null!=this._selectedIndex&&this._selectedIndex>=0&&(this._listItems[this._selectedIndex].control.checked=!1,this._listItems[this._selectedIndex].control.active=!1),1!=this._listItems[x].control.checked&&(this._listItems[x].control.checked=!0),this._selectedIndex=x,this.value=this._listItems[x].control.value,this._flyoutOpenFlag||(null!=this._focusIndex&&(this._listItems[this._focusIndex].control.focused=!1),this._listItems[x].control.focused=!0,this._focusIndex=x),!this._firstPage){var V={};V.sender=this,V.tag=this.tag,V.senderName="selectedIndex",this.dispatchEvent("selectedIndexChanged",V),V=null}this._firstPage=!1}else null!=this._selectedIndex&&this._selectedIndex>=0&&this._listItems[this._selectedIndex]&&(this._listItems[this._selectedIndex].control.checked=!1,this._listItems[this._selectedIndex].control.active=!1),this._selectedIndex=x;this._updateLayoutBase("property","selectedIndex",x,A),this.dispatchNotifyPropertyChanged("property","selectedIndex",x,A)}get selectedIndex(){return this._selectedIndex}set menuPlacement(x){if(this._menuPlacement!=x){var A=this._menuPlacement;switch(x){case"Top":case"Bottom":case"Left":case"Right":case"Auto":case"Autohorizontal":case"Autovertical":this._menuPlacement=x.toLowerCase();break;default:this._menuPlacement="auto"}this._updateLayoutBase("property","menuPlacement",x,A),this.dispatchNotifyPropertyChanged("property","menuPlacement",x,A)}}get menuPlacement(){return this._menuPlacement}set menuAlignment(x){if(this._menuAlignment!=x){var A=this._menuAlignment;switch(x){case"Left":case"Right":case"Center":this._menuAlignment=x.toLowerCase();break;default:this._menuAlignment="center"}this._updateLayoutBase("property","menuAlignment",this._menuAlignment,A),this.dispatchNotifyPropertyChanged("property","menuAlignment",this._menuAlignment,A)}}get menuAlignment(){return this._menuAlignment}set menuWidth(x){if(x!=this._menuWidth){var A=this._menuWidth;this._menuWidth=x,this._flyoutElement&&(this._flyoutElement.style.width=x),this._updateLayoutBase("property","menuWidth",this._menuWidth,A),this.dispatchNotifyPropertyChanged("property","menuWidth",this._menuWidth,A)}}get menuWidth(){return this._menuWidth}set menuHeight(x){if(x!=this._menuHeight){var A=this._menuHeight;this._menuHeight=x,this._flyoutElement&&(this._flyoutElement.style.height=x),this._updateLayoutBase("property","_menuHeight",this._menuHeight,A),this.dispatchNotifyPropertyChanged("property","_menuHeight",this._menuHeight,A)}}get menuHeight(){return this._menuHeight}set open(A){if(x.Utilities.isInDesignMode()&&this._open!=A){var V=this._open;if(this._open=A,A){if(this._listItems&&this._listItems.length>0){for(var R=0;R<this._listItems.length;R++)this._listItems[R]&&this._listItems[R].control&&(this._listItems[R].control._element.style.display="flex");this._dropdownAction(null)}}else if(this._listItems&&this._listItems.length>0){for(R=0;R<this._listItems.length;R++)this._listItems[R]&&this._listItems[R].control&&(this._listItems[R].control._element.style.display="none");this._flyoutDismissHandler(null)}this._updateLayoutBase("property","open",A,V),this.dispatchNotifyPropertyChanged("property","open",A,V)}}get open(){return this._open}onValueChanged(x){for(var A=0;A<this._listItems.length;A++)if("number"==typeof x.newValue){var V=parseInt(x.newValue);if(this._listItems[A].control.value==V&&"number"==typeof V&&null!=V){this.selectedIndex=A;break}}else if(this._listItems[A].control.value==x.newValue){this.selectedIndex=A;break}}createTemplateBase(){this.fastTap=!1;return x.Utilities.isInDesignMode()&&x.Utilities.query('div[data-win-control="WinJS.UI.AppBar"]',document.body),x.Utilities.isInDesignMode()||(this._flyoutElement=document.createElement("div"),document.body?(document.body.insertBefore(this._flyoutElement,document.body.firstElementChild),x.Utilities.addClass(this._flyoutElement,"vw-dropdownbox__flyout"),this._flyoutControl=new WinJS.UI.Flyout(this._flyoutElement,this._flyoutOptions)):x.Application.ErrorLog.log("VisiWin.UI.DropDownBoxBase.createControlBase: Flyout kann nicht erzeugt werden, kein body Element."),this._flyoutControl.addEventListener("afterhide",this._boundFlyoutDismissHandler),this._flyoutControl.addEventListener("beforehide",this._boundFlyoutDismissHandler),this._flyoutElement.addEventListener(A.KeyboardEventType.keydown,this._boundFlyoutKeypressHandler)),null}createHandlerDropDownBoxBase(V,R){x.Utilities.isInDesignMode()||(this.element.addEventListener(A.KeyboardEventType.keydown,this._boundKeypressHandler),this.selectedItem.textElement.addEventListener(A.KeyboardEventType.keydown,this._boundKeypressHandler),this.selectedItem.itemSymbolElement.addEventListener(A.KeyboardEventType.keydown,this._boundKeypressHandler))}removeHandlerDropDownBoxBase(V){this.actionHandler=null,x.Utilities.isInDesignMode()||(this._flyoutControl.removeEventListener("afterhide",this._boundFlyoutDismissHandler),this._flyoutControl.removeEventListener("beforehide",this._boundFlyoutDismissHandler),this._flyoutElement.removeEventListener(A.KeyboardEventType.keydown,this._boundFlyoutKeypressHandler),this.element.removeEventListener(A.KeyboardEventType.keydown,this._boundKeypressHandler),this.selectedItem.textElement.removeEventListener(A.KeyboardEventType.keydown,this._boundKeypressHandler),this.selectedItem.itemSymbolElement.removeEventListener(A.KeyboardEventType.keydown,this._boundKeypressHandler))}_keypressHandler(x){switch(null==this._focusIndex&&(this._focusIndex,this._selectedIndex),x.key){case"PageUp":this._keyFlagAlt&&(this._listItems[this._focusIndex].control.focused=!1,this._focusIndex=0,this._listItems[this._focusIndex].control.focused=!0,this._dropdownAction(x));break;case"PageDown":this._keyFlagAlt&&(this._listItems[this._focusIndex].control.focused=!1,this._focusIndex=this._listItemCnt-1,this._listItems[this._focusIndex].control.focused=!0,this._dropdownAction(x));break;case"Up":case"Down":this._keyFlagAlt&&(this._listItems[this._focusIndex].control.focused=!1,this._focusIndex=this._selectedIndex,this._listItems[this._focusIndex].control.focused=!0,this._dropdownAction(x));break;case"Spacebar":case"Enter":this._listItems[this._focusIndex].control.focused=!1,this._focusIndex=this._selectedIndex,this._listItems[this._focusIndex].control.focused=!0,this._dropdownAction(x)}"Alt"==x.key?this._keyFlagAlt=!0:this._keyFlagAlt=!1}_flyoutKeypressHandler(x){switch(x.key){case"PageUp":this._listItems[this._focusIndex].control.focused=!1,this._focusIndex=0,this._listItems[this._focusIndex].control.focused=!0;break;case"PageDown":this._listItems[this._focusIndex].control.focused=!1,this._focusIndex=this._listItemCnt-1,this._listItems[this._focusIndex].control.focused=!0;break;case"Up":this._focusIndex&&this._focusIndex>0?(this._listItems[this._focusIndex].control.focused=!1,this._focusIndex--,this._listItems[this._focusIndex].control.focused=!0):(this._focusIndex=0,this._listItems[this._focusIndex].control.focused=!0);break;case"Down":this._focusIndex&&this._focusIndex<this._listItemCnt-1?(this._listItems[this._focusIndex].control.focused=!1,this._focusIndex++,this._listItems[this._focusIndex].control.focused=!0):(this._focusIndex=this._listItemCnt-1,this._listItems[this._focusIndex].control.focused=!0);break;case"Spacebar":case"Enter":this._listItems[this._focusIndex].control._onItemAction.call(this,this._listItems[this._focusIndex].control);break;case"Escape":this._listItems[this._focusIndex].control.focused=!1,this._focusIndex=this._selectedIndex,this._listItems[this._focusIndex].control.focused=!0,this._flyoutControl.hide(),this._flyoutOpenFlag=!1,this.element.focus()}}_flyoutDismissHandler(x){this._flyoutControl&&this._flyoutControl.hide(),this._flyoutOpenFlag=!1,this.element.focus()}_dropdownAction(x){if(this._flyoutControl){var A=this.selectedItem.anchorElement||this.element,V=this.menuWidth||A.clientWidth;this._flyoutElement.style.width=V+"px",this._flyoutElement.style.height=this.menuHeight,this._flyoutControl.show(A,this.menuPlacement,this.menuAlignment),this._flyoutElement.focus()}this._flyoutOpenFlag=!0}registerItem(A){return x.Utilities.isInDesignMode()&&(this._open||(A.winControl._element.style.display="none")),A.winControl.createControlForce.call(this,A),!1}dispose(){return this.removeHandlerDropDownBoxBase(this.element),this._flyoutControl&&(this._flyoutControl.dispose(),this._flyoutElement&&document.body.removeChild(this._flyoutElement)),super.dispose()}}DropDownBoxBase.controlName="DropDownBoxBase",DropDownBoxBase.DropDownBoxBaseOptionsList={selectedIndexChanged:{propertyType:"event"},selectedIndex:{propertyType:"custom",type:"number",defaultValue:0},menuPlacement:{propertyType:"custom",type:"enum",defaultValue:"Autovertical"},menuAlignment:{propertyType:"custom",type:"enum",defaultValue:"Center"},menuWidth:{propertyType:"custom",type:"string"},menuHeight:{propertyType:"custom",type:"string"},open:{propertyType:"custom",type:"boolean",defaultValue_DM:!1}},A.DropDownBoxBase=DropDownBoxBase}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class OptionBase extends x.UI.ButtonBase{constructor(A,V){super(A,V),this._iconElement=null,this._labelElement=null,this._submenuIconElement=null,this._submenuElement=null,this._submenu=!1,this._lastSymbol=null,this.index=null,this.addPropertyList(x.UI.OptionBase,x.UI.OptionBase.OptionBasePropertyList),this.toggle=!1,this.radio=!0,this.dragThreshold=10,this.enablePreventEvents=!0}createTemplate(){return this.fastTap=!1,null}_onItemAction(A){null!=this._focusIndex&&(this._listItems[this._focusIndex].control.focused=!1),this._focusIndex=A.index,A.focused=!0,null!=A.value&&this._vwVariable?x.AppServices.VariableService.setValueAsync(this.variableName,A.value):null==A.value?this.selectedIndex=A.index:this._value=A.value,this.popupControl.hide(),this.popupOpenFlag=!1,this.element.focus(),this.replaceFloatingLabelText&&(this.floatingLabelText=A.text),this.value=A.value,this.selectedValue=A.value}createControlForce(x,A,V){var R=x.winControl;this._listItems[this._listItemCnt]={},this._listItems[this._listItemCnt].control=R,this._listItems[this._listItemCnt].control._actionHandler=R._onItemAction.bind(this),this._listItems[this._listItemCnt].control.index=this._listItemCnt,this._listItems[this._listItemCnt].control.index==this.selectedIndex&&(this.selectedIndex=this._selectedIndex),this._listItemCnt++}dispose(){return super.dispose()}}OptionBase.controlName="OptionBaseBase",OptionBase.OptionBasePropertyList={color:{propertyType:"member",type:"string"},registerSourceId:{propertyType:"base",type:"string",defaultValue:"SelectOption"}},A.OptionBase=OptionBase}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class DropDownBoxItemBase extends x.UI.ButtonBase{constructor(A,V){super(A,V),this._iconElement=null,this._labelElement=null,this._submenuIconElement=null,this._submenuElement=null,this._submenu=!1,this._lastSymbol=null,this.index=null,this.addPropertyList(x.UI.DropDownBoxItemBase,x.UI.DropDownBoxItemBase.DropDownBoxItemBaseOptionsList),this.toggle=!1,this.radio=!0,this.dragThreshold=10,this.enablePreventEvents=!0}createTemplate(){return this.fastTap=!1,null}_onItemAction(A){null!=this._focusIndex&&(this._listItems[this._focusIndex].control.focused=!1),this._focusIndex=A.index,A.focused=!0,null!=A.value&&this._vwVariable?x.AppServices.VariableService.setValueAsync(this.variableName,A.value):null==A.value?this.selectedIndex=A.index:this._value=A.value,this._flyoutControl.hide(),this._flyoutOpenFlag=!1,this.element.focus()}createControlForce(A,V,R){var D=A.winControl;if(this._listItems[this._listItemCnt]={},this._listItems[this._listItemCnt].control=D,this._listItems[this._listItemCnt].control._actionHandler=D._onItemAction.bind(this),this._listItems[this._listItemCnt].control.index=this._listItemCnt,this._listItems[this._listItemCnt].control.index==this.selectedIndex&&(this.selectedIndex=this._selectedIndex),this._listItemCnt++,!x.Utilities.isInDesignMode()){var N=A.parentElement.removeChild(A);this._flyoutElement&&this._flyoutElement.insertBefore(N,this._flyoutElement.lastChild)}}dispose(){return super.dispose()}}DropDownBoxItemBase.controlName="DropDownBoxItemBase",DropDownBoxItemBase.DropDownBoxItemBaseOptionsList={color:{propertyType:"member",type:"string"},registerSourceId:{propertyType:"base",type:"string",defaultValue:"DropDownItem"}},A.DropDownBoxItemBase=DropDownBoxItemBase}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(V){"use strict";function _attachPage(V,R,D){let N=(R||document.body).querySelectorAll("[data-win-control]");if(x.Utilities.isInDesignMode()&&"VisiWin.UI.DesignerContainer"!==D)for(let x=0,V=N.length;x<V;x++){const V=N[x];V.winControl&&(V.winControl.designerType!==A.Enums.DesignerType.Control&&V.winControl.designerType!==A.Enums.DesignerType.UserControl&&V.winControl.designerType!==A.Enums.DesignerType.CustomControl&&V.winControl.designerType!==A.Enums.DesignerType.ContentControl&&V.winControl.designerType!==A.Enums.DesignerType.DesignerContainer&&V.winControl.designerType!==A.Enums.DesignerType.Collection&&V.winControl.designerType!==A.Enums.DesignerType.DisabledControl||(V.winControl.designerType=A.Enums.DesignerType.RegionControl))}const U=[];for(let A=0,V=N.length;A<V;A++){const V=N[A];if(V.winControl&&"function"==typeof V.winControl.attach){const A=V.winControl.attach();x.isNullOrUndefined(A)||U.push(A)}}return N=null,WinJS.Promise.join(U).then(function(x){R.winControl.attach(R)}.bind(V),function(x){R.winControl.attach(R)}.bind(V))}function _detachPage(A){let V=(A||document.body).querySelectorAll("[data-win-control]");const R=[];for(let A=0,D=V.length;A<D;A++){const D=V[A];if(D.winControl&&"function"==typeof D.winControl.detach){const A=D.winControl.detach.call(D.winControl);x.isNullOrUndefined(A)||R.push(A)}}return V=null,WinJS.Promise.join(R).then((function(x){A&&A.winControl&&A.winControl.detach(A)}),(function(x){A&&A.winControl&&A.winControl.detach(A)}))}function _handleRenderMode(A,V){return __awaiter(this,void 0,void 0,(function*(){const R=A.element.firstElementChild,D=A.createPageElement();let N=null,U={};if(A.element.firstElementChild)if(V.detail.isView){if(A.element.insertBefore(D,R),x.Application.show&&x.Application.show._loadingViewElement&&V.detail.showLoadingSymbol&&(x.Application.show._loadingViewElement.children[0]&&(N=x.Application.show._loadingViewElement.children[0].cloneNode(!0)),N)){const V=A.element.getBoundingClientRect();A.element.insertBefore(N,D),V.width>0&&(N.style.zindex="1000",N.style.width=V.width+"px",N.style.height=V.height+"px",N.children[0]&&(N.children[0].style.width=V.width+"px",N.children[0].style.height=V.height+"px")),N.style.display="block",yield x.sleep(10)}D.style.display="block",R.style.display="none"}else{let x=A.element.firstElementChild;x.parentNode.insertBefore(D,x.nextSibling)}else A.element.appendChild(D);const B={newElement:D,oldElement:R,attachError:null,detachError:null};try{let R=null;try{if(x.AppServices.NavigationService.startPage===V.detail.location){let x=document.getElementById("splash"),A=document.getElementById("content");A&&(U.content={},""===A.style.transform?U.content.ransform="none":U.content.ransform=A.style.transform,A.style.transform=`translateX(${window.screen.width}px)`,U.content.display=A.style.display,A.style.display="block"),x&&(x.style.display="block"),U.body={},U.body.overflow=document.body.style.overflow,document.body.style.overflow="hidden",U.body.overflowX=document.body.style.overflowX,document.body.style.overflowX="hidden",U.body.overflowY=document.body.style.overflowY,document.body.style.overflowY="hidden"}R=yield WinJS.UI.Pages.render(V.detail.location,D,V.detail.state)}catch(x){return _removeFromCache(V.detail.location),A._navigationRunning=!1,B.renderError=x,B.detail=V.detail,Promise.resolve(B)}if("Dom"===x.Application.Settings.UI.PageMode)A._oldTempElement=A._newTempElement,A._newTempElement=D,D.style.display="block",V.detail.location.indexOf("?timestamp=")<0&&(x.UI.pages[V.detail.location+A._regionBaseId]=D);else if("Cache"===x.Application.Settings.UI.PageMode){V.detail.location.indexOf("?timestamp=")<0&&(V.detail.location===x.Application.Settings.UI.LoadingPageName||V.detail.location===x.Application.Settings.UI.LoadingViewName?x.UI.pages[V.detail.location]=D:x.UI.pages[V.detail.location+A._regionBaseId]=D);try{yield _attachPage(A,D,A.controlType),B.newElement=D}catch(x){B.attachError=x}}else try{yield _attachPage(A,D,A.controlType),B.newElement=D;try{_removeFromCache(V.detail.location)}catch(x){}}catch(x){B.attachError=x}}catch(x){_removeFromCache(V.detail.location),A._navigationRunning=!1,B.renderError=x}try{if(V.detail.isPage&&A.element.insertBefore(D,A.element.firstElementChild),D.style.display="block",x.AppServices.NavigationService.startPage===V.detail.location){let A=document.getElementById("content");if(A&&U.content&&(U.content.display&&(A.style.display=U.content.display),U.content.ransform&&(A.style.transform=U.content.ransform)),U.body&&(document.body.style.overflow=U.body.overflow,document.body.style.overflowX=U.body.overflowX,document.body.style.overflowY=U.body.overflowY),x.Application.show.show="content",!x.AppServices.NavigationService.preloadReadyFlag){let x=document.getElementById("splash");x&&(x.style.display="block")}}N&&(A.element.removeChild(A.element.firstElementChild),N.style.display="none"),yield _detachPage(R)}catch(x){B.detachError=x}return Promise.resolve(B)}))}function _removeFromCache(x){const A=window.document.createElement("a");A.href=x;const V=A.href.toLowerCase();let R=WinJS.UI.Pages._viewMap;delete R[V],R=WinJS.UI.Fragments._cacheStore,delete R[V]}function _initNavigatingPageOrView(A,V){return __awaiter(this,void 0,void 0,(function*(){A._lastPage=V.detail.location,V.detail.isPage&&(A._navigationRunning=!0),A.dispatchEvent("navigatingPage",{senderName:"navigating",destination:A.pageName,sender:A}),A.dispatchEvent("navigating",{senderName:"navigating",destination:A.pageName,sender:A});const R={domMode:null,cacheMode:null,renderMode:null};return"Dom"===x.Application.Settings.UI.PageMode&&x.UI.pages[V.detail.location+A._regionBaseId]&&(R.domMode=yield function _handleDomMode(A,V){return __awaiter(this,void 0,void 0,(function*(){const R=A._newTempElement,D=x.UI.pages[V.detail.location+A._regionBaseId];A._newTempElement=D,A._newTempElement.style.display="block";const N={newElement:D,oldElement:R,attachError:null,detachError:null};try{yield _attachPage(A,D,A.controlType)}catch(x){N.attachError=x}try{yield _detachPage(R),A._oldTempElement=R}catch(x){N.detachError=x}return R.style.display="none",Promise.resolve(N)}))}(A,V),R.renderMode=yield _handleRenderMode(A,V)),"Cache"===x.Application.Settings.UI.PageMode&&(x.UI.pages[V.detail.location+A._regionBaseId]||x.UI.pages[V.detail.location])?R.cacheMode=yield function _handleCacheMode(A,V){return __awaiter(this,void 0,void 0,(function*(){let R,D=A.element.firstElementChild;if(R=V.detail.location===x.Application.Settings.UI.LoadingPageName||V.detail.location===x.Application.Settings.UI.LoadingViewName?x.UI.pages[V.detail.location]:x.UI.pages[V.detail.location+A._regionBaseId]?x.UI.pages[V.detail.location+A._regionBaseId]:x.UI.pages[V.detail.location],A.element.firstElementChild){if(R&&R.msSourceLocation&&A.element.firstElementChild&&A.element.firstElementChild.msSourceLocation&&R.msSourceLocation===A.element.firstElementChild.msSourceLocation){const x={newElement:R,oldElement:D,attachError:null,detachError:null};return Promise.resolve(x)}V.detail.isView?(R.style.display="block",A.element.insertBefore(R,A.element.firstElementChild),D.style.display="none"):A.element.insertBefore(R,A.element.firstElementChild)}else A.element.appendChild(R);const N={newElement:R,oldElement:D,attachError:null,detachError:null};try{yield _attachPage(A,R,A.controlType)}catch(x){N.attachError=x}try{R.style.display="block",yield _detachPage(D),D&&D.winControl&&("function"==typeof D.winControl.unload&&D.winControl.unload.call(D.winControl,D,R),D.parentNode.removeChild(D)),D=null}catch(x){N.detachError=x}return R.style.display="block",Promise.resolve(N)}))}(A,V):R.renderMode=yield _handleRenderMode(A,V),function _handleNavigationCleanUp(A){return __awaiter(this,void 0,void 0,(function*(){const V=A.createPageElement();if("Dom"===x.Application.Settings.UI.PageMode)A._newTempElement==A._oldTempElement&&(A._oldTempElement=A.element.firstElementChild),A._oldTempElement&&(A._oldTempElement.style.display="none"),A._oldTempElement&&A._oldTempElement.winControl&&"function"==typeof A._oldTempElement.winControl.unload&&A._oldTempElement.winControl.unload.call(A._oldTempElement.winControl,A._oldTempElement,V);else if(A.element.childElementCount>1){const V=A.element.firstElementChild;let R=V.nextElementSibling||null;"Cache"===x.Application.Settings.UI.PageMode?(R&&R.winControl&&("function"==typeof R.winControl.unload&&R.winControl.unload.call(R.winControl,R,V),R.parentNode.removeChild(R)),R=null):(R&&R.winControl&&("function"==typeof R.winControl.unload&&R.winControl.unload.call(R.winControl,R,V),R.winControl.dispose.call(R.winControl,R),delete R.winControl,R.parentNode.removeChild(R)),R=null)}A._navigationRunning=!1}))}(A),Promise.resolve(R)}))}function _navigatedEnd(A,V){x.Utilities.isInDesignMode()&&A.dispatchEvent("navigated",{senderName:"navigated",destination:V.detail.location,sender:A}),A._navigationRunning||function _prepareNavigationEnd(A,V){let R=A.pageName;x.isNullOrUndefined(R)&&(R=A._pageName),A._navigationRunning||(A.dispatchEvent("navigated",{senderName:"navigated",destination:R,sender:A}),A.dispatchEvent("navigatedPage",{senderName:"navigated",destination:R,sender:A}));let D=null;if(V.detail.isPage?D=A.element.querySelector('[data-win-control="VisiWin.UI.Page"]'):V.detail.isView&&(D=A.element.querySelector('[data-win-control="VisiWin.UI.View"]')),!D){const x=A.element.querySelectorAll(".vw-view");x&&x[0]&&"View"===x[0].__VWELEMENT__&&(D=x[0])}if(!D){const x=A.element.querySelectorAll(".vw-page");x&&x[0]&&"Page"===x[0].__VWELEMENT__&&(D=x[0])}if(!D){if(!A.element.querySelector('[data-win-control="VisiWin.UI.DialogView"]')){const x=A.element.querySelectorAll("[data-win-control]");for(let A=0;A<x.length;A++)if(x[A].winControl&&x[A].winControl.location){x[A].winControl.location=V.detail.location;break}}}D&&D.winControl&&(D.winControl.location=V.detail.location,V.detail.ctrl=D);const N={error:V.detail.error,location:V.detail.location,pageLocation:V.detail.pageLocation,viewLocation:V.detail.viewLocation,setPromise:null,state:V.detail.state,isPage:V.detail.isPage,isView:V.detail.isView,regionID:V.detail.regionID,value:V.detail.value,ctrl:V.detail.ctrl,showLoadingSymbol:V.detail.showLoadingSymbol};x.AppServices.NavigationService._updateFromRegionNavigation(N)}(A,V),A._navigationRunning&&x.Application.onPageLoad.trigger(A.pageElement),x.Application.Settings.UI.AppShell===V.detail.location&&(x.AppServices.NavigationService.dispatchEvent("AppShellReady",V),x.AppServices.NavigationService.appShellReady=!0)}V._attachPage=_attachPage,V._detachPage=_detachPage,V._beforeInit=function _beforeInit(A){if(A.element.style.overflow="hidden",x.Utilities.isInDesignMode()&&"VisiWin.UI.AppPageNavigator"===A.controlType)if(x.Application.Settings.UI.EmptyPage)A.navigatingInternal({detail:{location:x.Application.Settings.UI.EmptyPage,setPromise:null,state:null}});else{const x=document.querySelectorAll(".vw-appnavmenu");x[0]&&x[0].winControl&&x[0].winControl._items[0]&&x[0].winControl._items[0]._pageName&&A.navigatingInternal({detail:{location:x[0].winControl._items[0]._pageName,setPromise:null,state:null}})}},V._createPageElement=function _createPageElement(A,V){const R=document.createElement("div");return x.Utilities.addClass(R,x.UI.RegionBase.classNamePageControl),R.setAttribute("dir",window.getComputedStyle(A,null).direction),R},V.__getAnimationElements=function __getAnimationElements(A){return x.Utilities.isInDesignMode()?null:A.pageControl&&A.pageControl.getAnimationElements?A.pageControl.getAnimationElements():A.pageElement},V._refresh=function _refresh(A,V){let R=A.pageName;const D=R.indexOf("?timestamp=");D>0&&(R=R.substr(0,D)),x.UI.pages[R+V]&&(x.UI.pages[R+V]=null),R=R+"?timestamp="+(new Date).getTime(),A.pageName=R},V._navigatedEnd=_navigatedEnd,V._navigatingStart=function _navigatingStart(A,V){var R;return __awaiter(this,void 0,void 0,(function*(){let D=A.pageName;if(x.isNullOrUndefined(D)&&(D=A._pageName),V&&V.detail&&V.detail.location&&(D=V.detail.location),D!==A._lastPage){if(!A._navigationRunning||V.detail.isView){A._navigationRunning=!0,V.detail.isPage&&(V.detail.pageLocation=V.detail.location),V.detail.isView&&(V.detail.viewLocation=V.detail.location);const x=yield _initNavigatingPageOrView(A,V);let D=null;return(null===(R=x.renderMode)||void 0===R?void 0:R.renderError)&&(D=x.renderMode.renderError),V.detail.error=D,_navigatedEnd(A,V),Promise.resolve(V)}}else x.Utilities.isInDesignMode()&&A.dispatchEvent("navigated",{senderName:"navigated",destination:D,sender:A})}))}}(A.RegionHelper||(A.RegionHelper={}))}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){A.pages={};class RegionBase extends x.UI.ControlBase{constructor(A,V){super(A,V),this.showLoadingSymbol=!1,this._viewName=null,this._privatePageName=null,this._pageName=null,this._lastPage=null,this._oldTempElement=null,this._newTempElement=null,this._navigationRunning=!1,this._regionBaseId="_",this._regionBaseId="_"+x.UI.RegionBase.regionBaseCounter.toString(),x.UI.RegionBase.regionBaseCounter++,this.addPropertyList(RegionBase,RegionBase.PropertyList)}set viewName(x){this.pageName=x,this._viewName=x}get viewName(){return this._viewName}set pageName(x){if(x&&""!==x&&this._pageName!==x){const A=this._pageName;this._pageName=x,this._privatePageName=x,this._navigateFromNameSetter(this.pageName,this.pageOptions),this._updateLayoutBase("property","pageName",this.pageName,A),this.dispatchNotifyPropertyChanged("property","pageName",this.pageName,A)}}get pageName(){return this._privatePageName}get pageControl(){return this.pageElement&&this.pageElement.winControl?this.pageElement&&this.pageElement.winControl:null}set pageControl(x){}get pageElement(){return this.element&&this.element.firstElementChild?this.element.firstElementChild:null}set pageElement(x){}createPageElement(){return A.RegionHelper._createPageElement(this.element,x.UI.RegionBase.classNamePageControl)}navigationStarting(x){return __awaiter(this,void 0,void 0,(function*(){this._privatePageName=x.detail.location;const V={detail:{error:null,location:x.detail.location,setPromise:null,state:x.detail.state,isPage:!0,isView:!1,regionID:null,value:null,ctrl:null,showLoadingSymbol:x.detail.showLoadingSymbol||this.showLoadingSymbol}};yield A.RegionHelper._navigatingStart(this,V)}))}navigationEnding(x){this._navigationRunning&&A.RegionHelper._navigatedEnd(this,x)}_navigateFromNameSetter(x,V){return __awaiter(this,void 0,void 0,(function*(){if(x!==this._lastPage&&!this._navigationRunning){const R={detail:{error:null,location:x,setPromise:null,state:V,isPage:!0,isView:!1,regionID:null,value:null,ctrl:null,showLoadingSymbol:this.showLoadingSymbol}};yield A.RegionHelper._navigatingStart(this,R)}}))}attachPage(x){return A.RegionHelper._attachPage(this,x,this.controlType)}detachPage(x){return A.RegionHelper._detachPage(x)}_getAnimationElements(){return A.RegionHelper.__getAnimationElements(this)}refresh(){A.RegionHelper._refresh(this,this._regionBaseId)}resizeHandler(x){this.pageControl&&"function"==typeof this.pageControl.updateLayoutEnable&&this.pageControl.updateLayoutEnable.call(this.pageControl,this.pageElement)}beforeInit(){A.RegionHelper._beforeInit(this)}dispose(){let x=this.element.firstElementChild;return x&&x.winControl&&("function"==typeof x.winControl.unload&&x.winControl.unload.call(this,x,null),x.winControl.dispose.call(this,x),delete x.winControl,x=null),this.disposeSubTree(this.element),super.dispose()}navigatingInternal(x){this.navigationStarting(x)}navigatingAction(x){this.navigationStarting(x)}navigated(x){this.navigationEnding(x)}navigating(x){this.navigationStarting(x)}}RegionBase.controlName="RegionBase",RegionBase.classNamePageControl="vw-pagecontrol",RegionBase.regionBaseCounter=0,RegionBase.PropertyList={initialized:{propertyType:"event"},navigated:{propertyType:"event"},navigating:{propertyType:"event"},navigationStarting:{propertyType:"event"},navigationEnding:{propertyType:"event"},pageName:{propertyType:"custom",type:"string"},viewName:{propertyType:"custom",type:"string"},pageOptions:{propertyType:"member",type:"any",invisible:!0},pageControl:{propertyType:"custom",type:"string",access:"ro",invisible:!0},pageElement:{propertyType:"custom",type:"string",access:"ro",invisible:!0},showLoadingSymbol:{propertyType:"member",type:"boolean",defaultValue:!1}},A.RegionBase=RegionBase}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){class RuntimeRegionBase extends x.UI.ControlBase{constructor(A,V){super(A,V),this.showLoadingSymbol=!1,this._viewName=null,this._lastViewName=null,this._pageName=null,this._oldTempElement=null,this._newTempElement=null,this._navigationRunning=!1,this._regionBaseId="_",this._regionBaseId="_"+x.UI.RuntimeRegionBase.runtimeRegionBaseCounter.toString(),x.UI.RuntimeRegionBase.runtimeRegionBaseCounter++,this.addPropertyList(RuntimeRegionBase,RuntimeRegionBase.PropertyList)}set viewName(A){if(this._viewName!==A){A!==x.Application.Settings.UI.LoadingViewName&&(this._lastViewName=A);const V=this._viewName;this._viewName=A,this._pageName=A,""!==this.viewName&&this.navigatingInternal(this._viewName,this.pageOptions),this._updateLayoutBase("property","pageName",this._viewName,V),this.dispatchNotifyPropertyChanged("property","pageName",this._viewName,V)}}get viewName(){return this._viewName}set pageName(x){this._pageName=x,this.viewName=x}get pageName(){return this._pageName}get pageControl(){return this.pageElement&&this.pageElement.winControl?this.pageElement&&this.pageElement.winControl:null}set pageControl(x){}get pageElement(){return this.element&&this.element.firstElementChild?this.element.firstElementChild:null}set pageElement(x){}createPageElement(){return A.RegionHelper._createPageElement(this.element,x.UI.RuntimeRegionBase.classNamePageControl)}navigatingInternal(x,V){return __awaiter(this,void 0,void 0,(function*(){const R={detail:{error:null,location:x,setPromise:null,state:V,isPage:!1,isView:!0,regionID:this.controlId,pageLocation:this.navigationService.getCurrentPage(),value:null,ctrl:null,showLoadingSymbol:this.showLoadingSymbol}};yield A.RegionHelper._navigatingStart(this,R)}))}attach(){return null!=this._lastViewName&&(this.viewName=this._lastViewName),super.attach()}detach(){return this.viewName=x.Application.Settings.UI.LoadingViewName,super.detach()}_getAnimationElements(){return A.RegionHelper.__getAnimationElements(this)}refresh(){A.RegionHelper._refresh(this,this._regionBaseId)}resizeHandler(x){this.pageControl&&"function"==typeof this.pageControl.updateLayoutEnable&&this.pageControl.updateLayoutEnable.call(this.pageControl,this.pageElement)}beforeInit(){A.RegionHelper._beforeInit(this)}dispose(){let x=this.element.firstElementChild;return x&&x.winControl&&("function"==typeof x.winControl.unload&&x.winControl.unload.call(this,x,null),x.winControl.dispose.call(this,x),delete x.winControl,x=null),this.disposeSubTree(this.element),super.dispose()}navigated(x){}navigating(x){}}RuntimeRegionBase.controlName="RuntimeRegionBase",RuntimeRegionBase.classNamePageControl="vw-pagecontrol",RuntimeRegionBase.runtimeRegionBaseCounter=0,RuntimeRegionBase.PropertyList={initialized:{propertyType:"event"},navigated:{propertyType:"event"},navigating:{propertyType:"event"},pageName:{propertyType:"custom",type:"string"},viewName:{propertyType:"custom",type:"string"},pageOptions:{propertyType:"member",type:"any",invisible:!0},pageControl:{propertyType:"custom",type:"string",access:"ro",invisible:!0},pageElement:{propertyType:"custom",type:"string",access:"ro",invisible:!0},showLoadingSymbol:{propertyType:"member",type:"boolean",defaultValue:!1}},A.RuntimeRegionBase=RuntimeRegionBase}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class GroupBase extends A.ControlBase{constructor(x,A){super(x,A),this._itemCount=0,this._items=[],this._preventActionHandler=!1,this._mode=null,this._selectedIndex=null,this._firstRemoteAction=!0,this.addPropertyList(GroupBase,GroupBase.groupBasePropertyList)}set mode(x){if(x!==this._mode)switch(x){case"RadioMode":case"ToggleMode":case"CheckedMode":case"DirectMode":this._mode=x;break;default:this._mode="RadioMode"}}get mode(){return this._mode}set selectedIndex(x){var A=this._selectedIndex;this._preventActionHandler||this._actionHandler(x),this._selectedIndex=x,this._updateLayoutBase("property","selectedIndex",x,A),this.dispatchNotifyPropertyChanged("property","selectedIndex",x,A,"selectedIndexChanged")}get selectedIndex(){return this._selectedIndex}readyBasis(x,A){this.selectedIndex>=0&&this.selectedIndex<this._items.length&&this._items[this.selectedIndex].remoteActionHandler.call(this._items[this.selectedIndex])}registerChild(A,V,R,D){var N=null!=this.inlineOptions.registerItems?this.inlineOptions.registerItems:x.UI.GroupBase.groupBasePropertyList.registerItems.defaultValue;return V!==this.registerTargetId||!N||(this._registerItem(R,V,D),!1)}_registerItem(x,A,V){var R=x.winControl;return R?(this._items.push(R),R.groupIndex=this._itemCount,R.remoteActionHandler=x.winControl.actionHandler.bind(x.winControl),R.actionHandler=this._actionHandler.bind(this),this._itemCount===this.selectedIndex?"DirectMode"==this.mode?(R.checkedIntern=!0,this._preventActionHandler=!0,this.selectedIndex=this._selectedIndex,this._preventActionHandler=!1):(R.checked=!0,this.selectedIndex=this._selectedIndex):"DirectMode"==this.mode?R.checkedIntern=!1:R.checked=!1,"RadioMode"===this.mode?R.radio=!0:R.radio=!1,null!==this.dragThreshold&&(R.dragThreshold=this.dragThreshold),this._itemCount++,R):null}_actionHandler(x,A){if(x&&"object"==typeof x&&(x=x.groupIndex),this._mode||(this.mode="RadioMode"),"CheckedMode"==this._mode)return x>=0&&x<this._items.length&&this._items[x].remoteActionHandler(),this._preventActionHandler=!0,this.selectedIndex=x,void(this._preventActionHandler=!1);if("RadioMode"==this._mode){if(this.selectedIndex!==x&&x>=0&&x<this._items.length){for(var V=0;V<this._items.length;V++)V!==x&&(this._items[V].checkedIntern=!1);this._items[x].remoteActionHandler()}return this._preventActionHandler=!0,this.selectedIndex=x,void(this._preventActionHandler=!1)}if("DirectMode"!=this._mode){for(V=0;V<this._items.length&&!this._items[V].checkedIntern;V++);if(V==this._items.length){if(this._preventActionHandler=!0,this.selectedIndex=x,this._preventActionHandler=!1,this._items&&null!==this.selectedIndex&&this.selectedIndex>=0&&this.selectedIndex<this._items.length&&this.selectedIndex>=0&&this.selectedIndex<this._items.length){var R=this._items[this.selectedIndex];if(this.regionId&&this.viewOff){var D=document.getElementById(this.regionId);D&&D.winControl&&(this.pageOptions&&(D.winControl.pageOptions=this.pageOptions),this.targetProperty?D.winControl[this.targetProperty]=this.viewOff:D.winControl.pageName=this.viewOff)}else this.pageOff&&R.navigate(this.pageOff,this.pageOptions||{})}}else{if(x>=0&&x<this._items.length)if(A&&this._items[x].checkedIntern){for(V=0;V<this._items.length;V++)V!==x&&(this._items[V].checkedIntern=!1);this._items[x].remoteActionHandler()}else if(this.selectedIndex==x||A)this._items[x].checkedIntern&&!A&&this._items[x].remoteActionHandler();else{for(V=0;V<this._items.length;V++)V!==x&&(this._items[V].checkedIntern=!1);this._items[x].remoteActionHandler()}this._preventActionHandler=!0,this.selectedIndex=x,this._preventActionHandler=!1}}else 1==this._items[x].checkedIntern&&(this._items&&null!==this.selectedIndex&&this.selectedIndex>=0&&this.selectedIndex<this._items.length&&(this._items[this.selectedIndex].checkedIntern=!1),this._preventActionHandler=!0,this.selectedIndex=x,this._preventActionHandler=!1)}dispose(){return super.dispose()}}GroupBase.controlName="GroupBase",GroupBase.groupBasePropertyList={selectedIndexChanged:{propertyType:"event"},registerSourceId:{propertyType:"base",defaultValue:"Selector"},registerTargetId:{propertyType:"base",defaultValue:"Group"},dragThreshold:{propertyType:"member",type:"number",defaultValue:10},selectedIndex:{propertyType:"custom",type:"number",defaultValue:0},mode:{propertyType:"custom",type:"enum",defaultValue:"RadioMode"},registerItems:{propertyType:"member",type:"boolean",defaultValue:!0}},A.GroupBase=GroupBase}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class NavGroupBase extends A.ControlBase{constructor(x,A){super(x,A),this._itemCount=0,this._items=[],this.firstPage=!0,this._preventActionHandler=!1,this._selectedIndex=null,this._firstRemoteAction=!0,this.addPropertyList(NavGroupBase,NavGroupBase.basePropertyList)}set selectedIndex(x){const A=this._selectedIndex;-2===x&&(x=0,this._selectedIndex=-1,this._firstRemoteAction=!0),this._preventActionHandler||this._actionHandler(x),this._selectedIndex=x,this._updateLayoutBase("property","selectedIndex",x,A),this.dispatchNotifyPropertyChanged("property","selectedIndex",x,A,"selectedIndexChanged")}get selectedIndex(){return this._selectedIndex}ready(A,V){return __awaiter(this,void 0,void 0,(function*(){if(this.selectedIndex>=0)if(x.Utilities.isInDesignMode())this.selectedIndex=-2;else{const A=this._selectedIndex;this._selectedIndex=-1,x.AppServices.NavigationService.startPage=this._items[A].pageName}}))}_updateMenuItem(A){if(this._items&&this._items.length>0){let V=!1;for(let R=0;R<this._items.length;R++){let D=this._items[R];if(this._items[R].winControl&&(D=this._items[R].winControl),D.pageName===A&&(V=!0,!D.checked)){x.isNullOrUndefined(D.groupIndex)||x.isNullOrUndefined(this._selectedIndex)||this._selectedIndex!==D.groupIndex&&(this._selectedIndex=D.groupIndex),D.checkedIntern=!0;let A=D;for(;A.parentElement;)if(A=A.parentElement,"VisiWin.UI.Submenu"===A.dataset.winControl){const x=A.querySelector('[data-win-control="VisiWin.UI.SubmenuHeader"]');x&&x.winControl&&(x.winControl.checked=!0)}}}!1===V&&(this._selectedIndex=-1)}if(this._items&&this._items.length>0)for(let x=0;x<this._items.length;x++){let V=this._items[x];this._items[x].winControl&&(V=this._items[x].winControl),V.pageName!==A&&V.checked&&(V.checkedIntern=!1)}}_getMenuTitle(x){if(this._items&&this._items.length>0)for(let A=0;A<this._items.length;A++){let V=this._items[A];if(this._items[A].winControl&&(V=this._items[A].winControl),V.pageName===x)return V.text}}registerChild(x,A,V,R){return A!==this.registerTargetId||(this._registerItem(V,A,R),!1)}_registerItem(x,A,V){const R=x.winControl;return R?(this._items.push(R),R.groupIndex=this._itemCount,R.remoteActionHandler=x.winControl.actionHandler.bind(x.winControl),R.actionHandler=this._actionHandler.bind(this),this._itemCount===this._selectedIndex?R.checkedIntern=!0:R.checkedIntern=!1,null!==this.dragThreshold&&(R.dragThreshold=this.dragThreshold),this._itemCount++,R):null}_actionHandler(A){A&&"object"==typeof A&&(A=A.groupIndex),this._selectedIndex!==A||this.firstPage?A>=0&&this._items[A]&&(this._items[this._selectedIndex]&&(this._items[this._selectedIndex].checkedIntern=!1),this._preventActionHandler=!0,this.selectedIndex=A,this._preventActionHandler=!1,this._items[this._selectedIndex].toggle||this._items[this._selectedIndex].radio||(this._items[this._selectedIndex].checkedIntern=!0),x.Utilities.isInDesignMode()||this._items[this._selectedIndex].remoteActionHandler(),this.firstPage||this.dispatchEvent("selectedIndexChanged",this._items[this._selectedIndex]),this.firstPage=!1):this._items[this._selectedIndex].checkedIntern||(this._items[this._selectedIndex].checkedIntern=!0)}dispose(){return super.dispose()}}NavGroupBase.controlName="NavGroupBase",NavGroupBase.basePropertyList={selectedIndexChanged:{propertyType:"event"},registerSourceId:{propertyType:"base",defaultValue:"Selector"},registerTargetId:{propertyType:"base",defaultValue:"Group"},dragThreshold:{propertyType:"member",type:"number",defaultValue:10},selectedIndex:{propertyType:"custom",type:"number",defaultValue:0}},A.NavGroupBase=NavGroupBase}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class LayoutBase extends x.UI.ControlBase{constructor(x,A){super(x,A),this._mousedown=!1,this._boundPointerMove=this._pointerMoveHandler.bind(this),this._boundPointerUp=this._pointerUpHandler.bind(this),this._boundPointerDownHandler=this._pointerDownHandler.bind(this),this._boundPointerCancelHandler=this._pointerCancelHandler.bind(this),this._pressed=!1,this.layoutInitHandler(x),this.addPropertyList(LayoutBase,LayoutBase.LayoutBaseOptionsList)}set pressed(V){if(this._pressed!=V){const R=this._pressed;this._pressed=V,this._pressed?x.Utilities.addClass(this.element,A.ButtonBase.classPressed):x.Utilities.removeClass(this.element,A.ButtonBase.classPressed),this._updateColorsBase("status","pressed",V,R),this._updateLayoutBase("status","pressed",V,R),this.dispatchNotifyPropertyChanged("status","pressed",V,R,"pressedChanged")}}get pressed(){return this._pressed}layoutInitHandler(V){this.enablePointerDownEvent&&x.Utilities.addEventListener(this.element,A.PointerEventType.pointerdown,this._boundPointerDownHandler),this.enablePointerCancelEvents&&x.Utilities.addEventListener(this.element,A.PointerEventType.pointercancel,this._boundPointerCancelHandler),this.enableContextEvents&&x.Utilities.addEventListener(this.element,"contextmenu",this.boundPreventEvent)}layoutRemoveHandler(){this.element&&(x.Utilities.removeEventListener(this.element,A.PointerEventType.pointermove,this._boundPointerMove),x.Utilities.removeEventListener(this.element,A.PointerEventType.pointerup,this._boundPointerUp),x.Utilities.removeEventListener(this.element,A.PointerEventType.pointerleave,this._boundPointerCancelHandler),x.Utilities.removeEventListener(this.element,"contextmenu",this.boundPreventEvent),x.Utilities.removeEventListener(this.element,A.PointerEventType.pointerdown,this._boundPointerDownHandler),x.Utilities.removeEventListener(this.element,A.PointerEventType.pointercancel,this._boundPointerCancelHandler))}returnPreventDefaults(x){return!this.enablePreventEvents||this.boundPreventEvent(x)}_resetPressedState(V){if(this._mousedown){this._mousedown=!1,this.pressed=!1,V.stopPropagation();let A=x.Utilities.extendPointerEventArgs(this,V);this.dispatchEvent("layoutup",A),this.dispatchEvent("layoutclick",A),this.dispatchEvent("layoutclickFalse",A),A=null}this.element&&(x.Utilities.removeEventListener(this.element,A.PointerEventType.pointermove,this._boundPointerMove),x.Utilities.removeEventListener(this.element,A.PointerEventType.pointerup,this._boundPointerUp),x.Utilities.removeEventListener(this.element,A.PointerEventType.pointerleave,this._boundPointerCancelHandler))}_pointerCancelHandler(x){this._resetPressedState(x)}_pointerDownHandler(V){if(V.stopPropagation(),this._mousedown||this.disabled)return this._mousedown=!1,this.returnPreventDefaults(V);this._mousedown=!0,this.pressed=!0;let R=x.Utilities.extendPointerEventArgs(this,V);return this.dispatchEvent("layoutdown",R),this.dispatchEvent("layoutclick",R),this.dispatchEvent("layotclickTrue",R),R=null,x.Utilities.addEventListener(this.element,A.PointerEventType.pointermove,this._boundPointerMove),x.Utilities.addEventListener(this.element,A.PointerEventType.pointerup,this._boundPointerUp),x.Utilities.addEventListener(this.element,A.PointerEventType.pointerleave,this._boundPointerCancelHandler),this.returnPreventDefaults(V)}_pointerUpHandler(A){this._mousedown=!1,this.pressed=!1,A.stopPropagation();let V=x.Utilities.extendPointerEventArgs(this,A);return this.dispatchEvent("layoutup",V),this.dispatchEvent("layoutclick",V),this.dispatchEvent("layoutclickFalse",V),V=null,this._resetPressedState(A),this.returnPreventDefaults(A)}_pointerMoveHandler(A){if(A.stopPropagation(),this.blockAction||!this._mousedown)return this.returnPreventDefaults(A);let V=x.Utilities.extendPointerEventArgs(this,A);return this.dispatchEvent("layoutmove",V),V=null,this.returnPreventDefaults(A)}dispose(){return this.layoutRemoveHandler(),super.dispose()}}LayoutBase.controlName="LayoutBase",LayoutBase.LayoutBaseOptionsList={layoutclick:{propertyType:"event",triggerDataName:"pressed",triggerCondition:"== true"},layoutmove:{propertyType:"event"},layoutclickTrue:{propertyType:"event",triggerDataName:"pressed",triggerCondition:"== true"},layoutclickFalse:{propertyType:"event",triggerDataName:"pressed",triggerCondition:"== false"},layoutdown:{propertyType:"event",triggerDataName:"pressed",triggerCondition:"== true"},layoutup:{propertyType:"event",triggerDataName:"pressed",triggerCondition:"== false"},designWidth:{propertyType:"member",type:"string"},designHeight:{propertyType:"member",type:"string"},pressed:{propertyType:"state",type:"boolean"},enablePreventEvents:{propertyType:"member",type:"boolean"},enablePointerDownEvent:{propertyType:"member",type:"boolean",defaultValu:!1},enablePointerCancelEvents:{propertyType:"member",type:"boolean",defaultValu:!1},enableContextEvents:{propertyType:"member",type:"boolean",defaultValu:!1}},A.LayoutBase=LayoutBase}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class TextBase extends x.UI.ControlBase{constructor(x,A){super(x,A),this._boundLocalizableTextHandler=this._localizableTextHandler.bind(this),this._boundTextHandler=this._textHandler.bind(this),this._textObject=null,this._text=null,this._localizableTextObject=null,this._localizableText=null,this._textAlignment=null,this._textContrast=null,this._textWrapping=null,this._textTrimming=null,this._lineClamp=null,this._uppercase=null,this._show=!0,this._fontClass=null,this._fontWeight=null,this.addPropertyList(TextBase,TextBase.TextBasePropertyList)}_textHandler(x){this.element.textContent=x.DisplayText,this._setTextWrapping()}get text(){return this._text}set text(A){if("string"==typeof A&&"@["==A.substr(0,2))if(this.isAttached){if(this._text!=A){var V=this._text;null!=this._text&&this.locService&&this._textObject&&(this.locService.removeLocalizedText(this._text,this._boundTextHandler,this._textObject),this._textObject=null),this._text=A,this.locService&&this.locService.addLocalizedTextAsync(this._text,this._boundTextHandler).then(x=>{this._textObject=x}),this._updateLayoutBase("property","text",A,V),this.dispatchNotifyPropertyChanged("property","text",A,V)}}else{V=this._text;this._text=A,this._updateLayoutBase("property","text",A,V),this.dispatchNotifyPropertyChanged("property","text",A,V)}else{V=this._text;this._text=A,this.element&&(x.isString(A)&&-1!=A.indexOf("@")?x.Utilities.parseProperty(A).then(x=>{null!==x&&(this.element.textContent=x,this._setTextWrapping(),this._updateLayoutBase("property","text",A,V),this.dispatchNotifyPropertyChanged("property","text",A,V))},x=>{null!==x&&(this.element.textContent=x,this._setTextWrapping())}):(this.element.textContent=A,this._updateLayoutBase("property","text",A,V),this.dispatchNotifyPropertyChanged("property","text",A,V)))}}_localizableTextHandler(x){this.text=x.DisplayText,this._setTextWrapping()}get localizableText(){return this._localizableText}set localizableText(x){if(this.isAttached){if(this._localizableText!=x){var A=this._localizableText;null!=this._localizableText&&this.locService&&this._localizableTextObject&&(this.locService.removeLocalizedText(this.localizableText,this._boundLocalizableTextHandler,this._localizableTextObject),this._localizableTextObject=null),this._localizableText=x,this.locService&&this.locService.addLocalizedTextAsync(this.localizableText,this._boundLocalizableTextHandler).then(x=>{this._localizableTextObject=x}),this._updateLayoutBase("property","localizableText",x,A),this.dispatchNotifyPropertyChanged("property","localizableText",x,A)}}else{A=this._localizableText;this._localizableText=x,this._updateLayoutBase("property","localizableText",x,A),this.dispatchNotifyPropertyChanged("property","localizableText",x,A)}}get textContent(){return this.element.textContent}set textContent(x){}get textAlignment(){return this._textAlignment}set textAlignment(x){if(this._textAlignment!=x){var A=this._textAlignment;this._textAlignment=x;var V=null;switch(x){case"Right":V="right";break;case"Center":V="center";break;case"Justify":V="justify";break;case"Initial":V="initial";break;case"Inherit":V="inherit";break;default:V="left"}this.element.style.textAlign=V,this._updateLayoutBase("property","textAlignment",x,A),this.dispatchNotifyPropertyChanged("property","textAlignment",x,A)}}get textContrast(){return this._textContrast}set textContrast(x){if(this._textContrast!=x){var A=this._textContrast;this._textContrast=x,this.element.style.opacity=x.toString(),this._updateLayoutBase("property","textContrast",x,A),this.dispatchNotifyPropertyChanged("property","textContrast",x,A)}}get textWrapping(){return this._textWrapping}set textWrapping(x){if(this._textWrapping!=x){var A=this._textWrapping;this._textWrapping=x,this._setTextWrapping(),this._updateLayoutBase("property","textWrapping",x,A),this.dispatchNotifyPropertyChanged("property","textWrapping",x,A)}}get textTrimming(){return this._textTrimming}set textTrimming(x){if(this._textTrimming!=x){var A=this._textTrimming;this._textTrimming=x;var V="",R="";switch(x){case"Ellipsis":V="hidden",R="ellipsis";break;case"Overflow":V="",R="";break;default:V="hidden",R=""}this.element.style.overflow=V,this.element.style.textOverflow=R,this._updateLayoutBase("property","textTrimming",x,A),this.dispatchNotifyPropertyChanged("property","textTrimming",x,A)}}get lineClamp(){return this._lineClamp}set lineClamp(x){if(this._lineClamp!=x){var A=this._lineClamp;this._lineClamp=x,this._setTextWrapping(),this._updateLayoutBase("property","lineClamp",x,A),this.dispatchNotifyPropertyChanged("property","lineClamp",x,A)}}get uppercase(){return this._uppercase}set uppercase(x){if(this._uppercase!=x){var A=this._uppercase;this._uppercase=x,this.element.style.textTransform=x?"uppercase":"",this._updateLayoutBase("property","uppercase",x,A),this.dispatchNotifyPropertyChanged("property","uppercase",x,A)}}get show(){return this._show}set show(x){if(this._show!=x){var A=this._show;this._show=x,this.element.style.WebkitLineClamp?this.element.style.display=this.show?"-webkit-box":"none":this.element.style.display=this.show?"":"none",this._updateLayoutBase("property","show",x,A),this.dispatchNotifyPropertyChanged("property","show",x,A)}}get fontClass(){return this._fontClass}set fontClass(A){if(this._fontClass!=A){var V=this._fontClass;null!=this._fontClass&&x.Utilities.removeClass(this.element,this._fontClass.toLowerCase()),this._fontClass=A,null!=this._fontClass&&x.Utilities.addClass(this.element,this._fontClass.toLowerCase()),this._updateLayoutBase("property","fontClass",A,V),this.dispatchNotifyPropertyChanged("property","fontClass",A,V)}}get fontWeight(){return this._fontWeight}set fontWeight(x){if(this._fontWeight!=x){var A=this._fontWeight;this._fontWeight=x;var V=null;switch(x){case"FW100":V="100";break;case"FW200":V="200";break;case"FW300":V="300";break;case"FW400":V="400";break;case"FW500":V="500";break;case"FW600":V="600";break;case"FW700":V="700";break;case"FW800":V="800";break;case"FW900":V="900";break;case"Bold":V="bold";break;case"Bolder":V="bolder";break;case"Lighter":V="lighter";break;case"Initial":V="initial";break;case"Inherit":V="inherit";break;default:V="normal"}this.element.style.fontWeight=V,this._updateLayoutBase("property","fontWeight",x,A),this.dispatchNotifyPropertyChanged("property","fontWeight",x,A)}}_setTextWrapping(){if(this.element){switch(this.textWrapping){case"NoWrap":this.element.style.whiteSpace="nowrap",this.element.style.wordBreak="",this.element.style.WebkitLineClamp="";break;case"PreWrap":this.element.style.whiteSpace="pre-wrap",this.element.style.wordBreak="",this.element.style.WebkitLineClamp="",this.height="auto";break;case"PreLine":this.element.style.whiteSpace="pre-line",this.element.style.wordBreak="",this.element.style.WebkitLineClamp="",this.height="auto";break;case"Wrap":this.element.style.whiteSpace="",this.element.style.wordBreak="",this.element.style.WebkitLineClamp="",this.height="auto";break;case"WrapWithLineClamp":this.element.style.whiteSpace="",this.element.style.wordBreak="",this.lineClamp>0&&(this.element.style.WebkitLineClamp=this.lineClamp),this.height="auto",this.textTrimming="Ellipsis",this.element.style.overflow="hidden",this.element.style.textOverflow="ellipsis";break;case"WrapWithWordBreak":this.element.style.whiteSpace="",this.element.style.wordBreak="break-all",this.element.style.WebkitLineClamp="",this.height="auto"}this.element.style.WebkitLineClamp?(this.element.style.display=this.show?"-webkit-box":"none",this.element.style.WebkitBoxOrient="vertical"):(this.element.style.display=this.show?"":"none",this.element.style.WebkitBoxOrient="")}}attach(){let x=null;return this.isAttached||(x=super.attach(),null!=this._localizableText&&this.locService&&this.locService.addLocalizedTextAsync(this.localizableText,this._boundLocalizableTextHandler).then(x=>{this._localizableTextObject=x}),null!=this._text&&this.locService&&"string"==typeof this._text&&"@["==this._text.substr(0,2)&&this.locService.addLocalizedTextAsync(this._text,this._boundTextHandler).then(x=>{this._textObject=x})),x}detach(){let x=null;return this.isAttached&&(x=super.detach(),null!=this._localizableText&&this.locService&&this._localizableTextObject&&(this.locService.removeLocalizedText(this.localizableText,this._boundLocalizableTextHandler,this._localizableTextObject),this._localizableTextObject=null),null!=this._text&&this.locService&&this._textObject&&(this.locService.removeLocalizedText(this._text,this._boundTextHandler,this._textObject),this._textObject=null)),x}dispose(){return null!=this._localizableText&&this.locService&&this._localizableTextObject&&(this.locService.removeLocalizedText(this.localizableText,this._boundLocalizableTextHandler,this._localizableTextObject),this._localizableTextObject=null),null!=this._text&&this.locService&&this._textObject&&(this.locService.removeLocalizedText(this._text,this._boundTextHandler,this._textObject),this._textObject=null),super.dispose()}}TextBase.controlName="TextBase",TextBase.TextBasePropertyList={show:{propertyType:"custom",type:"boolean",defaultValue:!0},text:{propertyType:"custom"},textContent:{propertyType:"custom",access:"ro"},localizableText:{propertyType:"custom"},textAlignment:{propertyType:"custom",type:"string",defaultValue:"Left"},lineClamp:{propertyType:"custom",type:"number",defaultValue:1},textWrapping:{propertyType:"custom",type:"string",defaultValue:"NoWrap"},textTrimming:{propertyType:"custom",type:"string",defaultValue:"Ellipsis"},textContrast:{propertyType:"custom",type:"number",defaultValue:1},uppercase:{propertyType:"custom",type:"boolean",defaultValue:!1},textDecoration:{propertyType:"style"},textShadow:{propertyType:"style"},fontClass:{propertyType:"custom",defaultValue:"Label1"},fontFamily:{propertyType:"style"},fontSize:{propertyType:"style"},fontWeight:{propertyType:"custom"},lineHeight:{propertyType:"style"},fontStyle:{propertyType:"style"},letterSpacing:{propertyType:"style"}},A.TextBase=TextBase}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class RepeaterBase extends x.UI.ControlBase{constructor(x,A){super(x,A),this._inlineItems=!1,this._boundItemCheckedChanged=this._onItemCheckedChanged.bind(this),this._repeatedDOM=[],this._dataSource=null,this._modifying=!1,this._dataListeners={itemchanged:this._dataItemChangedHandler.bind(this),iteminserted:this._dataItemInsertedHandler.bind(this),itemmoved:this._dataItemMovedHandler.bind(this),itemremoved:this._dataItemRemovedHandler.bind(this),reload:this._dataReloadHandler.bind(this)},this._repeatedDOMOrigin=[],this._dataTemplateObject=null,this._dataTemplate=null,this._boundDataTemplateReady=this.dataTemplateReady.bind(this),this.boundDataItemRemovedHandler=this._dataItemRemovedHandler.bind(this),this.addPropertyList(RepeaterBase,RepeaterBase.properties)}itemsLoaded(){}itemChangingBase(x,A,V,R){}itemInsertingBase(x,A,V){}itemMovingBase(x,A,V,R){}itemMovedBase(x,A,V,R){}itemRemovingBase(x,A,V){}itemsReloadingBase(x){}itemsReloadedBase(x){}get itemList(){return this._repeatedDOM}_checkDataReady(){this._dataSource&&this._render&&(this._addDataListeners(),this._reloadRepeater(!0),this.renderMode===x.UI.Enums.RenderMode.Synchronous?(this.itemsLoaded(),this.dispatchEvent("itemsLoaded",{})):setTimeout(()=>{this.itemsLoaded(),this.dispatchEvent("itemsLoaded",{})},0))}get dataSource(){return this._dataSource}set dataSource(A){if(this._dataSource&&this._removeDataListeners(),A&&A.dataSource)this._dataSource=A,this._checkDataReady();else if(A&&A.list&&A.list.dataSource)this._dataSource=A.list,this._checkDataReady();else if("string"==typeof A){if(x.DataSources[A])this._dataSource=x.DataSources[A];else{const V=x.AppServices.DataService.getDataSource(A);V&&(this._dataSource=V)}this._checkDataReady()}}get dataTemplate(){return this._dataTemplate}set dataTemplate(A){this._dataTemplate=A,this.addEventListener("templateReady",this._boundDataTemplateReady),x.isNullOrUndefined(A)||(this._dataTemplateObject=x.AppServices.DataTemplateService.getDataTemplate(this,A,"templateReady"))}dataTemplateReady(x){this.compiledDataTemplate?this._render=x.detail[this._dataTemplate].compiledRenderer:this._render=x.detail[this._dataTemplate].syncRenderer,this._checkDataReady()}_renderAllItems(){const A=document.createDocumentFragment();let V=null;for(let R=0,D=this._dataSource.length;R<D;R++){let D,N;this.compiledDataTemplate?this._render(this._dataSource.getAt(R)).then(x=>{V=x.children[0]}):V=this._render(this._dataSource.getAt(R)),this.findDataTemplateSelector(V,this._dataSource,R),this._dataSource._keys?(D=this._dataSource._keys[R],N=this._dataSource._keys[R]):this._dataSource._keyMap?(D=this._dataSource._keyMap[R].key,N=this._dataSource._keyMap[R].data.value):this._dataSource._sortedKeys&&(D=this._dataSource._sortedKeys[R]),V||x.Application.WarnLog.log("VisiWin.UI."+this.controlName+" Top level items must render synchronously.");let U=this.renderedItemBase(V,R,D,N);U&&(A.appendChild(U),this._repeatedDOM.push(U))}for(this._repeatedDOMOrigin=this._repeatedDOM;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.element.appendChild(A)}_reloadRepeater(A){this._unloadRepeatedDOM(A),this._repeatedDOM=[],this.renderMode===x.UI.Enums.RenderMode.Synchronous?this._renderAllItems():setTimeout(()=>{this._renderAllItems()},0)}_unloadRepeatedDOM(x){for(let A=0,V=this._repeatedDOM.length;A<V;A++){let V=this._repeatedDOM[A];if(x&&V.winControl.dispose(),V.parentElement===this.element)for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild)}}_addDataListeners(){Object.keys(this._dataListeners).forEach(x=>{this._dataSource.addEventListener(x,this._dataListeners[x],!1)})}_removeDataListeners(){Object.keys(this._dataListeners).forEach(x=>{this._dataSource.removeEventListener(x,this._dataListeners[x],!1)})}_beginModification(){this._modifying&&x.Application.WarnLog.log("VisiWin.UI."+this.controlName+" Cannot modify Repeater data until Repeater has commited previous modification."),this._modifying=!0}_endModification(){this._modifying=!1}_dataItemChangedHandler(A){let V;this._beginModification();let R,D=this.element,N=A.detail.index,U=A.detail.key,B=this._render(A.detail.newValue);B||x.Application.WarnLog.log("VisiWin.UI."+this.controlName+" Top level items must render synchronously."),this._repeatedDOM[N]&&(A.detail.oldItem=this._repeatedDOM[N]),A.detail.renderedItem=B,A.detail.setPromise=function setPromise(x){V=x},this.itemChangingBase(B,N,U,A.detail),this.dispatchEvent("itemChanging",A.detail),N<this._repeatedDOM.length?(R=this._repeatedDOM[N],D.replaceChild(B,R),this._repeatedDOM[N]=B):(D.appendChild(B),this._repeatedDOM.push(B)),this._endModification(),this.itemChangedBase(B,N,U,A.detail);const F=this.createEventDetails(A.detail.index,A.detail.newValue,this.selectedItem,A.detail.index,this.selectedItem,null,null,A.detail.newValue,A.detail.oldValue,A.detail.renderedItem,A.detail.oldItem);this.dispatchEvent("itemChanged",F),R&&WinJS.Promise.as(V).done(()=>{this.disposeSubTree(R,!0)})}_dataItemInsertedHandler(A){this._beginModification();let V=A.detail.index,R=this._render(A.detail.value);R||x.Application.WarnLog.log("VisiWin.UI."+this.controlName+" Top level items must render synchronously.");let D=this.element;if(A.detail.affectedElement=R,this.itemInsertingBase(R,V,A.detail),this.dispatchEvent("itemInserting",A.detail),V<this._repeatedDOM.length){var N=this._repeatedDOM[V];D.insertBefore(R,N)}else D.appendChild(R);this._repeatedDOM.splice(V,0,R),this._endModification(),this.itemInsertedBase(R,V,A.detail.key,A.detail);const U=this.createEventDetails(A.detail.index,A.detail.value,this.selectedItem,A.detail.index,A.detail.affectedElement.winControl,null,null,null,null,null,null);this.dispatchEvent("itemInserted",U),this.findDataTemplateSelector(R,null,null)}_dataItemMovedHandler(x){this._beginModification();var A=this._repeatedDOM[x.detail.oldIndex];if(x.detail.affectedElement=A,this.itemMovingBase(x.detail.affectedElement,x.detail.newIndex,x.detail.oldIndex,x.detail.key),this.dispatchEvent("itemMoving",x.detail),this._repeatedDOM.splice(x.detail.oldIndex,1)[0],A.parentNode.removeChild(A),x.detail.newIndex<this._dataSource.length-1){var V=this._repeatedDOM[x.detail.newIndex];this.element.insertBefore(A,V),this._repeatedDOM.splice(x.detail.newIndex,0,A)}else this._repeatedDOM.push(A),this.element.appendChild(A);this._endModification(),this.itemMovedBase(x.detail.affectedElement,x.detail.newIndex,x.detail.oldIndex,x.detail.key);const R=this.createEventDetails(this.selectedIndex,this.selectedValue,this.selectedItem,x.detail.oldIndex,x.detail.affectedElement,x.detail.newIndex,x.detail.oldIndex,null,null,null,null);this.dispatchEvent("itemMoved",R)}_dataItemRemovedHandler(x){var A;let V;this._beginModification();let R=this._repeatedDOM[x.detail.index],D={affectedElement:R,index:x.detail.index,item:x.detail.item,setPromise:null};D.setPromise=function setPromise(x){V=x},this.itemRemovingBase(D.affectedElement,D.index,D),this.dispatchEvent("itemRemoving",D),null===(A=null==R?void 0:R.parentNode)||void 0===A||A.removeChild(R),this._repeatedDOM.splice(x.detail.index,1),this._endModification(),this.itemRemovedBase(D.affectedElement,D.index,D);const N=this.createEventDetails(x.detail.index,x.detail.value,this.selectedItem,x.detail.index,this.selectedItem,null,null,null,null,null,null);this.dispatchEvent("itemRemoved",N),this.disposeSubTree(R,!0)}_dataReloadHandler(){let x;this._beginModification();let A=this._repeatedDOM.slice(0),V={affectedElements:A,setPromise:null};V.setPromise=function(A){x=A},this.itemsReloadingBase(V),this.dispatchEvent("itemsReloading",V),this._reloadRepeater(!1);let R=this._repeatedDOM.slice(0);this._endModification(),this.itemsReloadedBase(R);const D=this.createEventDetails(null,null,null,null,R,null,null,null,null,null,null);this.dispatchEvent("itemsReloaded",D),WinJS.Promise.as(x).done(()=>{for(let x=0,V=A.length;x<V;x++)this.disposeSubTree(A[x],!0)})}_reloadSortedList(){for(let x=0,A=this._repeatedDOM.length;x<A;x++){if(this._repeatedDOM[x].parentElement===this.element)for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild)}this._repeatedDOM=[]}renderedItemBase(A,V,R,D){if(this._inlineItems)return;if(!A.winControl)return;A.winControl.inlineItems=!1,this.initializeSubTree(A,!0),this.readySubTree(A,!0),this.attachSubTree(A,!0);const N=A.winControl;return N.selectionMode=this.selectionMode,N.index=V,N.keyMember=R,N.value=D,N.disabled=this.disabled,N.authorizationRight=this.authorizationRight,N.authorizationMode=this.authorizationMode,A.winControl.disabled=this.disabled,A.winControl.authorizationRight=this.authorizationRight,A.winControl.authorizationMode=this.authorizationMode,this.isInDesignMode&&this._setDesignerType(A),this.selectionMode!=x.UI.Enums.SelectionMode.None&&N.addEventListener("checkedChanged",this._boundItemCheckedChanged),A}itemChangedBase(x,A,V,R){if(!x.winControl)return;x.winControl.inlineItems=!1,this.initializeSubTree(x,!0),this.readySubTree(x,!0),this.attachSubTree(x,!0);const D=x.winControl;return D.selectionMode=this.selectionMode,D.index=A,D.keyMember=V,D.disabled=this.disabled,D.authorizationRight=this.authorizationRight,D.authorizationMode=this.authorizationMode,D.addEventListener("checkedChanged",this._boundItemCheckedChanged),this.selectedIndex===D.index&&!0===this.selectedItem.checked&&(this.updateLayoutEnable(!1),D.checked=!0,this.updateLayoutEnable(!0)),x}itemInsertedBase(A,V,R,D){if(!A.winControl)return;A.winControl.inlineItems=!1,this.initializeSubTree(A,!0),this.readySubTree(A,!0),this.attachSubTree(A,!0);const N=A.winControl;if(N.selectionMode=this.selectionMode,N.template=this.dataTemplate,N.inlineTemplate=this.inlineTemplate,N.index=V,N.keyMember=R,N.disabled=this.disabled,N.authorizationRight=this.authorizationRight,N.authorizationMode=this.authorizationMode,this.isInDesignMode&&this._setDesignerType(A),this.selectionMode!==x.UI.Enums.SelectionMode.None){N.addEventListener("checkedChanged",this._boundItemCheckedChanged);for(let x=0;x<this.itemList.length;x++){const A=this.itemList[x].winControl;A.index=x,1==A.checked&&(this.updateLayoutEnable(!1),this.selectedIndex=x,this.updateLayoutEnable(!0))}}}itemRemovedBase(A,V,R){if(this.selectionMode!==x.UI.Enums.SelectionMode.None){null==A||A.removeEventListener("checkedChanged",this._boundItemCheckedChanged),this.updateLayoutEnable(!1),A&&A.winControl&&!0===A.winControl.checked&&(this.selectedValue="",this.selectedItem=null,this.selectedIndex=-1);for(let x=0;x<this.itemList.length;x++){let A=this.itemList[x].winControl;A.index=x,A.checked}this.updateLayoutEnable(!0)}}_setDesignerType(x){let A=x.querySelectorAll("[data-win-control]"),V=Array.from(A);for(let x=0;x<V.length;x++){let A=V[x].winControl;"Child"!==A.designerType&&(A.designerType="child")}x.winControl.designerType="child"}_onItemCheckedChanged(A){if(this.selectionMode===x.UI.Enums.SelectionMode.Single){this.selectedItem&&this.selectedItem.__VWCONTROL__&&this._uncheckItem(this.selectedItem),this.updateLayoutEnable(!1),this.selectedItem=A.detail.sender,this.selectedValue=A.detail.sender.value,this._dataSource&&this._dataSource._sortedKeys?(this.selectedIndex=Number(this._dataSource._sortedKeys[A.detail.sender.index]),this.selectedIndex=Number(this.getKeyByValue(this._dataSource._list._keys,this._dataSource._sortedKeys[A.detail.sender.index]))):this.selectedIndex=A.detail.sender.index,this.updateLayoutEnable(!0);const x=this.createEventDetails(this.selectedIndex,A.detail.sender.value,this.selectedItem,A.detail.sender.index,this.selectedItem,null,null,null,null,null,null);this.dispatchEvent("selectedIndexChanged",x)}}getKeyByValue(A,V){if(!x.isNullOrUndefined(A))return Object.keys(A).find(x=>A[x]===V)}_checkItem(x){x&&(x.removeEventListener("checkedChanged",this._boundItemCheckedChanged),x.checked=!0,x.addEventListener("checkedChanged",this._boundItemCheckedChanged))}_uncheckItem(x){x&&(x.removeEventListener("checkedChanged",this._boundItemCheckedChanged),x.checked=!1,x.addEventListener("checkedChanged",this._boundItemCheckedChanged))}createEventDetails(x,A,V,R,D,N,U,B,F,W,H){let z={selectedIndex:x,selectedValue:A,selectedItem:V,itemData:null,affectedIndex:R,affectedItem:D,newIndex:N,oldIndex:U,newValue:B,oldValue:F,newItem:H,oldItem:W,repeatedDOMLength:this._repeatedDOM.length};if(-1!=x&&this.dataSource)if(this.dataSource._keys)this.dataSource._keys[x]&&this.dataSource._keys[x]&&(z.itemData=this.dataSource._keyMap[Number(this.dataSource._keys[x])].data);else if(this.dataSource._keyMap)z.itemData=this.dataSource._keyMap[x].data;else if(this.dataSource._sortedKeys&&this.dataSource._list._keyMap&&this.dataSource._sortedKeys.length>0)try{z.itemData=this.dataSource._list._keyMap[this.dataSource._sortedKeys[x]].data}catch(x){}return z}findDataTemplateSelector(x,A,V){if("DataTemplateSelector"===x.__VWELEMENT__)return x.winControl.loadTemplate(null,A,V),!0;for(let R=0;R<x.children.length;R++){let D=x.children[R];if(this.findDataTemplateSelector(D,A,V))return!0}return!1}itemFromKey(x){if(x)for(var A=0;A<this._repeatedDOMOrigin.length;A++){if(this._repeatedDOMOrigin[A].winControl.keyMember==x)return this._repeatedDOMOrigin[A]}return null}itemFromIndexBase(x){if(x>=0&&x<this._repeatedDOM.length)return this._repeatedDOM[x]}attach(){return this.attachSubTree(this.element),super.attach()}detach(){return this.detachSubTree(this.element),super.detach()}dispose(){this._dataSource=null,this._dataTemplate=null,this._removeDataListeners(),this.disposeSubTree(this.element);for(let x=0;x<this._repeatedDOM.length;x++)this._repeatedDOM.splice(x,1);return super.dispose()}}RepeaterBase.controlName="RepeaterBase",RepeaterBase.properties={itemsLoaded:{propertyType:"event"},itemChanging:{propertyType:"event"},itemChanged:{propertyType:"event"},itemInserting:{propertyType:"event"},itemInserted:{propertyType:"event"},itemMoving:{propertyType:"event"},itemMoved:{propertyType:"event"},itemRemoving:{propertyType:"event"},itemRemoved:{propertyType:"event"},itemsReloading:{propertyType:"event"},itemsReloaded:{propertyType:"event"},templateReady:{propertyType:"event"},dataSource:{propertyType:"custom"},dataTemplate:{propertyType:"custom"},compiledDataTemplate:{propertyType:"member",type:"boolean",defaultValue:!1},renderMode:{defaultValue:x.UI.Enums.RenderMode.Asynchronous},selectedIndex:{type:"number",defaultValue:-1},selectedValue:{},selectionMode:{defaultValue:x.UI.Enums.SelectionMode.None},selectedItem:{type:"any"},inlineTemplate:{type:"boolean",defaultValue:!1}},A.RepeaterBase=RepeaterBase}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class ItemBase extends x.UI.ButtonBase{constructor(x,A){A&&"Child"===A.designerType&&(A.designerType="Control"),super(x,A),this.addPropertyList(ItemBase,ItemBase.ItemBaseProperties),this._boundItemsLoaded=this._onActionItemChanged.bind(this)}get keyMember(){return this._keyMember}set keyMember(x){this._keyMember=x}get value(){return this._valueMember}set value(x){this._valueMember=x}initializedBasis(){this.inlineItems&&this.element&&this.element.parentElement&&this.element.parentElement.winControl&&"ItemsContainer"===this.element.parentElement.__VWELEMENT__&&"function"==typeof this.element.parentElement.winControl.registerItem&&this.element.parentElement.winControl.registerItem(null,"RegisterItem",this.element,null);const x=this.element.querySelectorAll(".secondaryaction");if(x[0]){x[0].winControl.addEventListener("checkedChanged",this._boundItemsLoaded)}}_onActionItemChanged(x){this.element&&this.element.parentElement&&this.element.parentElement.winControl&&"ItemsContainer"===this.element.parentElement.__VWELEMENT__&&"function"==typeof this.element.parentElement.winControl.onSecondaryValueAction&&this.element.parentElement.winControl.onSecondaryValueAction(x,this.secondaryValue,this.index)}setFlexProperties(A){if("afterInit"===A||"orientation"===A)switch(this.orientation){case x.UI.Enums.Orientation.Vertical:this.element.style.flexDirection="column";break;case x.UI.Enums.Orientation.Horizontal:this.element.style.flexDirection="row"}if("afterInit"===A||"alignItems"===A)switch(this.alignItems){case"Center":this.element.style.alignItems=x.UI.Enums.AlignItems.Center;break;case"Start":this.element.style.alignItems=x.UI.Enums.AlignItems.FlexStart;break;case"End":this.element.style.alignItems=x.UI.Enums.AlignItems.FlexEnd;break;case"Baseline":this.element.style.alignItems=x.UI.Enums.AlignItems.Baseline;break;default:this.element.style.alignItems=x.UI.Enums.AlignItems.Stretch}if("afterInit"===A||"justifyContent"===A)switch(this.justifyContent){case"End":this.element.style.justifyContent=x.UI.Enums.JustifyContent.FlexEnd;break;case"Center":this.element.style.justifyContent=x.UI.Enums.JustifyContent.Center;break;case"Space-between":this.element.style.justifyContent=x.UI.Enums.JustifyContent.SpaceBetween;break;case"Space-around":this.element.style.justifyContent=x.UI.Enums.JustifyContent.SpaceAround;break;case"Space-evenly":this.element.style.justifyContent=x.UI.Enums.JustifyContent.SpaceEvenly;break;default:this.element.style.justifyContent=x.UI.Enums.JustifyContent.FlexStart}}authorizeChilds(A,V,R){let D=A.firstChild;for(;D;)D.winControl&&x.isNullOrUndefined(D.winControl.authorizationRight)&&(D.winControl.authorizationRight=V,D.winControl.authorizationMode!==R&&(D.winControl.authorizationMode=R)),this.authorizeChilds(D,V,R),D=D.nextSibling}}ItemBase.controlName="ItemBase",ItemBase.ItemBaseProperties={radio:{propertyType:"base",defaultValue:!0},orientation:{defaultValue:x.UI.Enums.Orientation.Horizontal},alignItems:{defaultValue:x.UI.Enums.AlignItems.Center},justifyContent:{defaultValue:x.UI.Enums.JustifyContent.Center},dataTemplate:{type:"boolean",defaultValue:!1},inlineItems:{type:"boolean",defaultValue:!0},index:{type:"number",defaultValue:-1},value:{propertyType:"custom",type:"string"},secondaryValue:{type:"string"},keyMember:{propertyType:"custom",type:"string"},selectionMode:{defaultValue:x.UI.Enums.SelectionMode.None},toggle:{propertyType:"base",type:"boolean",defaultValue:!0}},A.ItemBase=ItemBase}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(x){x.RippleRender=class RippleRender{constructor(A,V){this.element=null,this.options={radius:null,speedAmount:1,centered:!1,disabled:!1,unbounded:!1,persistent:!1,color:"rgba(232, 235, 239, 0.5)",fadeInDuration:450,fadeOutDuration:400,cssClass:"vw-ripplerender__ripple"},this._isMouseDown=!1,this._activeRipples=new Set,this.handleEvent=function(A){switch(A.type){case x.PointerEventType.pointerdown:this.onPointerDown(A);case x.PointerEventType.pointerleave:this.onPointerLeave();case x.PointerEventType.pointerup:this.onPointerUp()}},this.onPointerUp=function(x){this._isMouseDown=!1;var A=this;this._activeRipples.forEach((function(x){x.options.persistent||"visible"!==x.state||A.fadeOut(x)}))},this.setRippleElement(A),this.setRippleOptions(V)}setRippleElement(x){this.element&&this.removeEvents(this.element),x&&this.addEvents(x),this.element=x,this.setRippleOptions({})}setRippleOptions(x){if(x){if(null===x.radius)this.options.radius=null;else if(x.radius){var A=parseFloat(x.radius);isNaN(A)||(this.options.radius=A)}if(null===x.speedAmount)this.options.speedAmount=1;else if(x.speedAmount){var V=parseFloat(x.speedAmount);isNaN(V)||(this.options.speedAmount=V)}"boolean"==typeof x.centered&&(this.options.centered=x.centered),"boolean"==typeof x.disabled&&(this.options.disabled=x.disabled),"boolean"==typeof x.unbounded&&(this.options.unbounded=x.unbounded),"boolean"==typeof x.persistent&&(this.options.persistent=x.persistent),"string"==typeof x.color&&(this.options.color=x.color),"string"==typeof x.cssClass&&(this.options.cssClass=x.cssClass),this.options.unbounded?this.element.style.overflow="visible":this.element.style.overflow="hidden",this.element.style.position="relative"}}addEvents(A){A.addEventListener(x.PointerEventType.pointerdown,this),A.addEventListener(x.PointerEventType.pointerleave,this),A.addEventListener(x.PointerEventType.pointerup,this)}removeEvents(A){A.removeEventListener(x.PointerEventType.pointerdown,this),A.removeEventListener(x.PointerEventType.pointerleave,this),A.removeEventListener(x.PointerEventType.pointerup,this)}onPointerDown(x){this.options.disabled||(this._isMouseDown=!0,this.fadeIn(x.pageX,x.pageY,this.options))}onPointerLeave(x){this._isMouseDown&&this.onPointerUp(x)}getPosition(x,A){var V=window.innerWidth,R=window.innerHeight,D=document.documentElement.getBoundingClientRect(),N=-D.left||document.body.scrollLeft||window.scrollX||document.documentElement.scrollLeft||0,U=-D.top||document.body.scrollTop||window.scrollY||document.documentElement.scrollTop||0,B=x.getBoundingClientRect(),F=window.getComputedStyle(x,null),W=parseFloat(F.getPropertyValue("border-left-width")),H=parseFloat(F.getPropertyValue("border-right-width")),z=parseFloat(F.getPropertyValue("border-top-width")),G=parseFloat(F.getPropertyValue("border-bottom-width"));return{document:{width:V,height:R,left:N,top:U,right:N+V,bottom:U+R},element:{width:B.width-W-z,height:B.height-H-G,left:B.left+W,top:B.top+H,right:B.right-z,bottom:B.bottom-G,borderLeft:W,borderTop:H,borderRight:z,borderBottom:G}}}fadeIn(x,A,V){var R,D,N,U,B,F,W=this.getPosition(this.element),H=this;V.centered?(x=W.element.left+W.element.width/2,A=W.element.top+W.element.height/2):(x-=W.document.left,A-=W.document.top),R=null!=V.radius?V.radius:this.distanceToFurthestCorner(x,A,W.element),D=V.fadeInDuration*(1/V.speedAmount),N=x-W.element.left,U=A-W.element.top,(B=document.createElement("span")).classList.add(V.cssClass),B.style.width=2*R+"px",B.style.height=2*R+"px",B.style.top=U-R+"px",B.style.left=N-R+"px",B.style.backgroundColor=V.color,B.style.transitionDuration=D+"ms",this.element.insertBefore(B,this.element.firstChild),this.enforceStyleRecalculation(B),B.style.transform="scale(1)",F={element:B,options:V,state:"fadingIn"},this._activeRipples.add(F),setTimeout((function(){F.state="visible",V.persistent||H._isMousedown||H.fadeOut(F)}),D)}fadeOut(x){if(this._activeRipples.delete(x)){var A=x.element;A.style.transitionDuration=this.options.fadeOutDuration+"ms",A.style.opacity="0",x.state="fadingOut";setTimeout((function(){x.state="hidden",A.parentNode&&A.parentNode.removeChild(A)}),this.options.fadeOutDuration)}}fadeOutAll(){var x=this;this._activeRipples.forEach((function(A){return x.fadeOut(A)}))}enforceStyleRecalculation(x){window.getComputedStyle(x).getPropertyValue("opacity")}distanceToFurthestCorner(x,A,V){var R=Math.max(Math.abs(x-V.left),Math.abs(x-V.right)),D=Math.max(Math.abs(A-V.top),Math.abs(A-V.bottom));return Math.sqrt(R*R+D*D)}dispose(){this.element&&this.removeEvents(this.element),this.element=null,this.options={radius:null,speedAmount:1,centered:!1,disabled:!1,unbounded:!1,persistent:!1,color:"rgba(232, 235, 239, 0.2)",fadeInDuration:450,fadeOutDuration:400,cssClass:"vw-ripplerender__ripple"},this._isMouseDown=!1,this.fadeOutAll(),this._activeRipples=new Set}}}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){A.TouchRipple=class TouchRipple{constructor(x,A){this._isMouseDown=!1,this._boundPointerDown=this.onPointerDown.bind(this),this._boundPointerLeave=this.onPointerLeave.bind(this),this._boundPointerUp=this.onPointerUp.bind(this),this._boundFocusOut=this.onFocusOut.bind(this),this.element=null,this.options={target:null,targetAsParent:!1,radius:null,speedAmount:1,centered:!1,disabled:!1,unbounded:!1,persistent:!1,color:null,fadeInDuration:450,fadeOutDuration:400,cssClass:"vw-ripple"},this._activeRipples=new Set,this.setRippleElement(x),this.setRippleOptions(A)}setRippleElement(x){x&&this.removeEvents(x),this.element&&this.removeEvents(this.element),x&&this.addEvents(x),this.element=x,this.setRippleOptions({})}setRippleOptions(x){if(x){if(null===x.target?this.options.target=null:x.target&&1==x.target.nodeType&&(this.options.target=x.target),"boolean"==typeof x.targetAsParent&&(this.options.targetAsParent=x.targetAsParent),null===x.radius)this.options.radius=null;else if(x.radius){const A=parseFloat(x.radius);isNaN(A)||(this.options.radius=A)}if(null===x.speedAmount)this.options.speedAmount=1;else if(x.speedAmount){const A=parseFloat(x.speedAmount);isNaN(A)||(this.options.speedAmount=A)}if("boolean"==typeof x.centered&&(this.options.centered=x.centered),"boolean"==typeof x.disabled&&(this.options.disabled=x.disabled),"boolean"==typeof x.unbounded&&(this.options.unbounded=x.unbounded),"boolean"==typeof x.persistent&&(this.options.persistent=x.persistent),"string"==typeof x.color&&(this.options.color=x.color),"string"==typeof x.cssClass&&(this.options.cssClass=x.cssClass),this.options.unbounded?this.element.style.overflow="visible":this.element.style.overflow="hidden",this.options.persistent&&(this.element.tabIndex=-1),x.fadeInDuration){const A=parseFloat(x.fadeInDuration);isNaN(A)||(this.options.fadeInDuration=A)}if(x.fadeOutDuration){const A=parseFloat(x.fadeOutDuration);isNaN(A)||(this.options.fadeOutDuration=A)}}}addEvents(V){x.Utilities.addEventListener(V,A.PointerEventType.pointerdown,this._boundPointerDown),x.Utilities.addEventListener(V,A.PointerEventType.pointerleave,this._boundPointerLeave),x.Utilities.addEventListener(V,A.PointerEventType.pointerup,this._boundPointerUp),x.Utilities.addEventListener(V,A.FocusEventType.focusout,this._boundFocusOut)}removeEvents(V){x.Utilities.removeEventListener(V,A.PointerEventType.pointerdown,this._boundPointerDown),x.Utilities.removeEventListener(V,A.PointerEventType.pointerleave,this._boundPointerLeave),x.Utilities.removeEventListener(V,A.PointerEventType.pointerup,this._boundPointerUp),x.Utilities.removeEventListener(V,A.FocusEventType.focusout,this._boundFocusOut)}onPointerDown(x){this.options.disabled||(this._isMouseDown=!0,this.fadeIn(x.pageX,x.pageY,this.options))}onPointerLeave(){this._isMouseDown&&this.fadeOutAll()}onPointerUp(){this._isMouseDown=!1;const x=this;this._activeRipples.forEach((function(A,V,R){A.options.persistent?1!=R.size&&x.fadeOut(A):"visible"===A.state&&x.fadeOut(A)}))}onFocusOut(){this.options.persistent&&this.fadeOutAll()}fadeIn(x,A,V){const R=this.getPosition(this.element);let D=null,N=R,U=this.element;const B=this;let F,W;null!=V.target?(V.unbounded?V.target.style.overflow="visible":V.target.style.overflow="hidden",D=N=this.getPosition(V.target),x=N.element.left+N.element.width/2,A=N.element.top+N.element.height/2):V.centered?(x=N.element.left+N.element.width/2,A=N.element.top+N.element.height/2):(x-=N.document.left,A-=N.document.top);const H=null!=V.radius?V.radius:this.distanceToFurthestCorner(x,A,N.element),z=V.fadeInDuration*(1/V.speedAmount);null!=V.target?1==V.targetAsParent?(F=x-N.element.left,W=A-N.element.top,U=V.target):(F=x-N.element.left+(D.element.left-R.element.left),W=A-N.element.top+(D.element.top-R.element.top)):(F=x-N.element.left,W=A-N.element.top);const G=document.createElement("span");G.style.width=2*H+"px",G.style.height=2*H+"px",G.style.top=W-H+"px",G.style.left=F-H+"px",G.style.backgroundColor=V.color,G.classList.add(V.cssClass),G.style.transitionDuration=z+"ms",U.insertBefore(G,U.firstChild),this.enforceStyleRecalculation(G),G.style.transform="scale(1)";const j={element:G,options:V,state:"fadingIn"};this._activeRipples.add(j),setTimeout((function(){j.state="visible",V.persistent||B._isMouseDown||B.fadeOut(j)}),z)}fadeOut(x){if(!this._activeRipples.delete(x))return;const A=x.element;A.style.transitionDuration=this.options.fadeOutDuration+"ms",A.style.opacity="0",x.state="fadingOut",setTimeout((function(){x.state="hidden",A.parentNode&&A.parentNode.removeChild(A)}),this.options.fadeOutDuration)}fadeOutAll(){const x=this;this._activeRipples.forEach((function(A){return x.fadeOut(A)}))}getPosition(x,A){const V=window.innerWidth,R=window.innerHeight,D=document.documentElement.getBoundingClientRect(),N=-D.left||document.body.scrollLeft||window.scrollX||document.documentElement.scrollLeft||0,U=-D.top||document.body.scrollTop||window.scrollY||document.documentElement.scrollTop||0,B=x.getBoundingClientRect(),F=window.getComputedStyle(x,null),W=parseFloat(F.getPropertyValue("border-left-width")),H=parseFloat(F.getPropertyValue("border-right-width")),z=parseFloat(F.getPropertyValue("border-top-width")),G=parseFloat(F.getPropertyValue("border-bottom-width"));return{document:{width:V,height:R,left:N,top:U,right:N+V,bottom:U+R},element:{width:B.width-W-z,height:B.height-H-G,left:B.left+W,top:B.top+H,right:B.right-z,bottom:B.bottom-G,borderLeft:W,borderTop:H,borderRight:z,borderBottom:G}}}enforceStyleRecalculation(x){window.getComputedStyle(x).getPropertyValue("opacity")}distanceToFurthestCorner(x,A,V){const R=Math.max(Math.abs(x-V.left),Math.abs(x-V.right)),D=Math.max(Math.abs(A-V.top),Math.abs(A-V.bottom));return Math.sqrt(R*R+D*D)}dispose(){this.element&&this.removeEvents(this.element),this.element=null,this.options={target:null,targetAsParent:!1,radius:null,speedAmount:1,centered:!1,disabled:!1,unbounded:!1,persistent:!1,color:null,fadeInDuration:450,fadeOutDuration:400,cssClass:"vw-ripple"},this._isMouseDown=!1,this.fadeOutAll(),this._activeRipples=new Set}}}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class NumericVarInCore extends x.UI.VariableBase{constructor(A,V){super(A,V),this._oldInputValue=null,this._keyPress=!1,this._checkValueLengthOnInput=!0,this._boundKeyPressHandler=this._keyPressHandler.bind(this),this._boundKeyDownHandler=this._keyDownHandler.bind(this),this._boundKeyUpHandler=this._keyUpHandler.bind(this),this._boundFocusHandler=this._focusHandler.bind(this),this._boundBlurHandler=this._blurHandler.bind(this),this._boundInputHandler=this._inputHandler.bind(this),this._boundLocalizableWatermarkTextHandler=this._localizableWatermarkTextHandler.bind(this),this._boundLocalizableLimitMinErrorTextHandler=this._localizableLimitMinErrorTextHandler.bind(this),this._boundLocalizableLimitMaxErrorTextHandler=this._localizableLimitMaxErrorTextHandler.bind(this),this._boundLocalizableVariableWriteErrorTextHandler=this._localizableVariableWriteErrorTextHandler.bind(this),this.numericvarin=null,this._dialogControl=null,this._localizableLimitMinErrorTextObject=null,this._localizableLimitMinErrorText=null,this._localizableLimitMaxErrorTextObject=null,this._localizableLimitMaxErrorText=null,this._localizableVariableWriteErrorTextObject=null,this._localizableVariableWriteErrorText=null,this._localizableWatermarkTextObject=null,this._localizableWatermarkText=null,this.inputEventsEnable=!0,this.addPropertyList(NumericVarInCore,NumericVarInCore.propertyList),this.defaultConstructor(A,this.inlineOptions,x.UI.NumericVarInCore.controlName,x.UI.NumericVarInCore.className)}preCheck(){return"INPUT"!==this.element.tagName&&x.Application.ErrorLog.log("VisiWin.UI.NumericVarInCore, Control kann nur in einem Input Element platziert werden"),0}beforeInit(){x.Utilities.isAndroidOS()&&x.Utilities.isChrome()?this.element.setAttribute("inputmode","numeric"):this.element.setAttribute("type","text")}createHandler(){this.element.addEventListener(A.KeyboardEventType.keypress,this._boundKeyPressHandler,!1),this.element.addEventListener(A.KeyboardEventType.keydown,this._boundKeyDownHandler,!1),this.element.addEventListener(A.KeyboardEventType.keyup,this._boundKeyUpHandler,!1),this.element.addEventListener(A.FocusEventType.focus,this._boundFocusHandler,!1),this.element.addEventListener(A.FocusEventType.blur,this._boundBlurHandler,!1),x.Utilities.isAndroidOS()&&x.Utilities.isChrome()&&this.element.addEventListener("input",this._boundInputHandler)}removeHandler(){this.element.removeEventListener(A.KeyboardEventType.keypress,this._boundKeyPressHandler,!1),this.element.removeEventListener(A.KeyboardEventType.keydown,this._boundKeyDownHandler,!1),this.element.removeEventListener(A.KeyboardEventType.keyup,this._boundKeyUpHandler,!1),this.element.removeEventListener(A.FocusEventType.focus,this._boundFocusHandler,!1),this.element.removeEventListener(A.FocusEventType.blur,this._boundBlurHandler,!1),x.Utilities.isAndroidOS()&&x.Utilities.isChrome()&&this.element.removeEventListener("input",this._boundInputHandler)}_localizableLimitMinErrorTextHandler(x){this.limitMinErrorText=x.DisplayText}get localizableLimitMinErrorText(){return this._localizableLimitMinErrorText}set localizableLimitMinErrorText(x){if(this._localizableLimitMinErrorText!=x){const A=this._localizableLimitMinErrorText;null!=this._localizableLimitMinErrorText&&this.locService&&this._localizableLimitMinErrorTextObject&&(this.locService.removeLocalizedText(this._localizableLimitMinErrorText,this._boundLocalizableLimitMinErrorTextHandler,this._localizableLimitMinErrorTextObject),this._localizableLimitMinErrorTextObject=null),this._localizableLimitMinErrorText=x,this.locService&&this.locService.addLocalizedTextAsync(this._localizableLimitMinErrorText,this._boundLocalizableLimitMinErrorTextHandler).then(x=>{this._localizableLimitMinErrorTextObject=x}),this._updateLayoutBase("property","localizableLimitMinErrorText",x,A),this.dispatchNotifyPropertyChanged("property","localizableLimitMinErrorText",x,A)}}_localizableLimitMaxErrorTextHandler(x){this.limitMaxErrorText=x.DisplayText}get localizableLimitMaxErrorText(){return this._localizableLimitMaxErrorText}set localizableLimitMaxErrorText(x){if(this._localizableLimitMaxErrorText!=x){const A=this._localizableLimitMaxErrorText;null!=this._localizableLimitMaxErrorText&&this.locService&&this._localizableLimitMaxErrorTextObject&&(this.locService.removeLocalizedText(this._localizableLimitMaxErrorText,this._boundLocalizableLimitMaxErrorTextHandler,this._localizableLimitMaxErrorTextObject),this._localizableLimitMaxErrorTextObject=null),this._localizableLimitMaxErrorText=x,this.locService&&this.locService.addLocalizedTextAsync(this._localizableLimitMaxErrorText,this._boundLocalizableLimitMaxErrorTextHandler).then(x=>{this._localizableLimitMaxErrorTextObject=x}),this._updateLayoutBase("property","localizableLimitMaxErrorText",x,A),this.dispatchNotifyPropertyChanged("property","localizableLimitMaxErrorText",x,A)}}_localizableVariableWriteErrorTextHandler(x){this.variableWriteErrorText=x.DisplayText}get localizableVariableWriteErrorText(){return this._localizableVariableWriteErrorText}set localizableVariableWriteErrorText(x){if(this._localizableVariableWriteErrorText!=x){const A=this._localizableVariableWriteErrorText;null!=this._localizableVariableWriteErrorText&&this.locService&&this._localizableVariableWriteErrorTextObject&&(this.locService.removeLocalizedText(this._localizableVariableWriteErrorText,this._boundLocalizableVariableWriteErrorTextHandler,this._localizableVariableWriteErrorTextObject),this._localizableVariableWriteErrorTextObject=null),this._localizableVariableWriteErrorText=x,this.locService&&this.locService.addLocalizedTextAsync(this._localizableVariableWriteErrorText,this._boundLocalizableVariableWriteErrorTextHandler).then(x=>{this._localizableVariableWriteErrorTextObject=x}),this._updateLayoutBase("property","localizableVariableWriteErrorText",x,A),this.dispatchNotifyPropertyChanged("property","localizableVariableWriteErrorText",x,A)}}_localizableWatermarkTextHandler(x){this.watermarkText=x.DisplayText}get localizableWatermarkText(){return this._localizableWatermarkText}set localizableWatermarkText(x){if(this._localizableWatermarkText!=x){const A=this._localizableWatermarkText;null!=this._localizableWatermarkText&&this.locService&&this._localizableWatermarkTextObject&&(this.locService.removeLocalizedText(this._localizableWatermarkText,this._boundLocalizableWatermarkTextHandler,this._localizableWatermarkTextObject),this._localizableWatermarkTextObject=null),this._localizableWatermarkText=x,this.locService&&this.locService.addLocalizedTextAsync(this._localizableWatermarkText,this._boundLocalizableWatermarkTextHandler).then(x=>{this._localizableWatermarkTextObject=x}),this._updateLayoutBase("property","localizableWatermarkText",x,A),this.dispatchNotifyPropertyChanged("property","localizableWatermarkText",x,A)}}_updateLayout(x){if("updateLayout"!=x.changeName&&"watermarkText"!=x.changeName||this.element.setAttribute("placeholder",this.watermarkText),"updateLayout"==x.changeName||"spellcheck"==x.changeName)switch(this.spellcheck){case!0:this.element.setAttribute("spellcheck","true");break;default:this.element.setAttribute("spellcheck","false")}if("updateLayout"==x.changeName||"autocomplete"==x.changeName)switch(this.autocomplete){case"On":this.element.setAttribute("autocomplete","on");break;default:this.element.setAttribute("autocomplete","off")}if("updateLayout"==x.changeName||"textAlignment"==x.changeName)switch(this.textAlignment){case"Center":this.element.style.textAlign="center";break;case"Right":this.element.style.textAlign="right";break;default:this.element.style.textAlign="left"}"updateLayout"!=x.changeName&&"textContrast"!=x.changeName||(this.element.style.opacity=this.textContrast.toString()),"varRawLimitMin"!=x.changeName&&"varRawLimitMax"!=x.changeName&&"varLimitMin"!=x.changeName&&"varLimitMax"!=x.changeName||this._onVariableValueChanged(null,null),"limitMinErrorText"==x.changeName&&this.isLimitCheckEnabled&&this._validateLimitMin(this.element.value)&&(this.errorText=this.limitMinErrorText),"limitMaxErrorText"==x.changeName&&this.isLimitCheckEnabled&&this._validateLimitMax(this.element.value)&&(this.errorText=this.limitMaxErrorText)}_onVariableValueChanged(A,V){this.focused||(this.element.value=x.Utilities.valueToUser(this.formattedValue),this._limitCheck(this.element.value))}_writeValueFromVarIn(x){null!==x&&(this.element.value=x,this._writeValue())}_writeValue(){let A=this.element.value;const V=this;let R;null!=A&&""!=A||(A="0");let D=Math.pow(10,this.resultDecimalPlaces);if(R=!this.useRawValue&&this._dividerFlag&&this.resultDecimalPlaces>0&&!x.Internal.isFloatingType(this._vwVariable.RawTypeCode)?this.calcValueWithUnitClass(A,D):parseFloat(A),this._limitCheck(A),!0===this.limitError)this.element.value=this.formattedValue,!1===this._previousLimitError&&this._limitCheck(this.element.value);else if(this.useRawValue)if(this.rawValue=parseFloat(A),this.limitError=!1,this.variableName){if(this._vwVariable.CanRecipeEdit&&this._vwVariable.IsRecipeEditing&&this._vwVariable.IsRecipeEditing)return void(this._vwVariable._master.RecipeItem.RecipeClass&&(this._vwVariable._master.RecipeItem.RecipeClass.SetValueAsync(this.variableName,this.rawValue),this.formattedValue=A));x.AppServices.VariableService.setRawValueAsync(this.variableName,this.rawValue).then(x=>{V.writeError=!1,V.dispatchEvent("errorChanged",{error:"NoError"}),V.errorText=""},x=>{V.writeError=!0,V.dispatchEvent("errorChanged",{error:"WriteError"}),V.errorText=V.variableWriteErrorText})}else this.writeError=!1,this.dispatchEvent("errorChanged",{error:"NoError"}),this.errorText="";else if(this._value=0,this.value=parseFloat(A),this.limitError=!1,this.variableName){if(x.Internal.isIntergerType(this._vwVariable.RawTypeCode)&&(this._vwVariable.UnitClass?(this._vwVariable.RawTypeCode,this._vwVariable.TypeCode):Number.isInteger(R)||(R=Math.round(R))),this._vwVariable.CanRecipeEdit&&this._vwVariable.IsRecipeEditing&&this._vwVariable.IsRecipeEditing)return void(this._vwVariable._master.RecipeItem.RecipeClass&&(this._vwVariable._master.RecipeItem.RecipeClass.SetValueAsync(this.variableName,R),this.formattedValue=A));x.AppServices.VariableService.setValueAsync(this.variableName,R).then(x=>{V.writeError=!1,V.dispatchEvent("errorChanged",{error:"NoError"}),V.errorText=""},x=>{V.writeError=!0,V.dispatchEvent("errorChanged",{error:"WriteError"}),V.errorText=V.variableWriteErrorText})}else this.writeError=!1,this.dispatchEvent("errorChanged",{error:"NoError"}),this.errorText=""}_inputHandler(A){let V=A.data;if(null==V||!(V>="0"&&V<="9"||"."==V||"-"==V))return;V=V.charCodeAt(0);event||window.event;const R=String.fromCharCode(V);let D="",N=0;if(R===x.Utilities.getLocPointUser()&&(this.resultDecimalPlaces>0||this._floatFlag))D=this.element.value,D.split(".").length>2?this.element.value=this._oldInputValue:(N="number"==typeof this.element.selectionStart?this.element.selectionStart:parseFloat(this.element.selectionStart),this.element.selectionStart!=this.element.selectionEnd&&(D=this.element.value.substr(0,this.element.selectionStart),D+=this.element.value.substr(this.element.selectionEnd),N="number"==typeof this.element.selectionStart?this.element.selectionStart:parseFloat(this.element.selectionStart)),D.substr(N).length>this.resultDecimalPlaces&&(D=D.substring(0,N+this.resultDecimalPlaces)),this.element.value=D,this.element.focus(),this._setSelect(N,N));else if("-"===R&&this._negFlag){D=this._oldInputValue,"-"===D[0]?D=D.substring(1):D?D="-"+D:(D="-0",this._setSelect(1,2));const x=D.lastIndexOf(".");x>=0&&(D=D.substr(0,x)),this.element.value=D,event.preventDefault()}else if(null!==R&&this._isNumericChar(R)){if(this.formatString&&"F"==this.formatString.substring(0,1)&&this.formatString.length>=2){const A=parseInt(this.formatString.substring(1,2));D=this.element.value,this.element.selectionStart!=this.element.selectionEnd?(D=this.element.value.substr(0,this.element.selectionStart),D+=this.element.value.substr(this.element.selectionEnd),N="number"==typeof this.element.selectionStart?this.element.selectionStart:parseFloat(this.element.selectionStart)):N="number"==typeof this.element.selectionStart?this.element.selectionStart:parseFloat(this.element.selectionStart);var U=0;if((F=D.indexOf(x.Utilities.getLocPointUser()))>=0&&this.element.selectionStart>F&&((U=D.length-F)-1>A||0==A))return void(this.element.value=this._oldInputValue);this.element.value=D,null!=N&&(this.element.focus(),this._setSelect(N,N))}if(this._checkValueLengthOnInput){var B=null;let A=null,V=null;var F;if(this.useVariableLimits?((B=this.varRawLimitMin)<0&&(B=-B),A=Math.log(B)/Math.LN10+1,(B=this.varRawLimitMax)<0&&(B=-B),V=Math.log(B)/Math.LN10+1,A>V&&(V=A)):((B=this.rawLimitMin)<0&&(B=-B),A=0===B?0:Math.log(B)/Math.LN10+1,(B=this.rawLimitMax)<0&&(B=-B),V=0===B?0:Math.log(B)/Math.LN10+1,A>V&&(V=A)),(F=this.element.value.indexOf(x.Utilities.getLocPointUser()))>=0){if((U=F)>=V+1||0==V)return void(this.element.value=this._oldInputValue)}else if(U=this.element.value.length,"-"==this.element.value[0]&&U--,U>=V+1||0==V)return void(this.element.value=this._oldInputValue)}}}_keyPressHandler(A){const V=A||window.event,R=V.which||V.keyCode,D=String.fromCharCode(R)||V.keyCode;let N="",U=0;if(13===R&&this.writeOnReturn&&(this._keyPress=!0,this.element.blur(),this._writeValue()),D===x.Utilities.getLocPointUser()&&(this._floatFlag||this.resultDecimalPlaces>0)){N=this.element.value;if(N.indexOf(".")>=0)return V.returnValue=!1,V.preventDefault&&V.preventDefault(),!1;U="number"==typeof this.element.selectionStart?this.element.selectionStart:parseFloat(this.element.selectionStart),this.element.selectionStart!=this.element.selectionEnd&&(N=this.element.value.substr(0,this.element.selectionStart),N+=this.element.value.substr(this.element.selectionEnd),U="number"==typeof this.element.selectionStart?this.element.selectionStart:parseFloat(this.element.selectionStart)),this.element.value=N,this.element.focus(),this._setSelect(U,U)}else if("-"===D&&this._negFlag)N=this.element.value,"-"===N[0]?N=N.substring(1):N?N="-"+N:(N="-0",this._setSelect(1,2)),this.element.value=N,A.preventDefault();else if(null!==D&&this._isNumericChar(D)){if(this.formatString&&"F"==this.formatString.substring(0,1)&&this.formatString.length>=2){const A=parseInt(this.formatString.substring(1,2));N=this.element.value,this.element.selectionStart!=this.element.selectionEnd?(N=this.element.value.substr(0,this.element.selectionStart),N+=this.element.value.substr(this.element.selectionEnd),U="number"==typeof this.element.selectionStart?this.element.selectionStart:parseFloat(this.element.selectionStart)):U="number"==typeof this.element.selectionStart?this.element.selectionStart:parseFloat(this.element.selectionStart);var B=0;if((W=N.indexOf(x.Utilities.getLocPointUser()))>=0&&this.element.selectionStart>W&&((B=N.length-W)>A||0==A))return V.returnValue=!1,V.preventDefault&&V.preventDefault(),!1;this.element.value=N,null!=U&&(this.element.focus(),this._setSelect(U,U))}if(this._checkValueLengthOnInput&&(U<=W||W<0)){var F=null;let A=1,R=127;var W;if(this.isLimitCheckEnabled)if(this.useVariableLimits)(F=this.varRawLimitMin)<0&&(F=-F),A=0===F?0:Math.log(F)/Math.LN10+1,(F=this.varRawLimitMax)<0&&(F=-F),R=0===F?0:Math.log(F)/Math.LN10+1,A>R&&(R=A);else this.useRawValue?((F=this.rawLimitMin)<0&&(F=-F),A=0===F?0:Math.log(F)/Math.LN10+1,(F=this.rawLimitMax)<0&&(F=-F),R=0===F?0:Math.log(F)/Math.LN10+1,A>R&&(R=A)):((F=this.rawValue2value(this.rawLimitMin))<0&&(F=-F),A=0===F?0:Math.log(F)/Math.LN10+1,(F=this.rawValue2value(this.rawLimitMax))<0&&(F=-F),R=0===F?0:Math.log(F)/Math.LN10+1,A>R&&(R=A));if((W=this.element.value.indexOf(x.Utilities.getLocPointUser()))>=0){if((B=W)>=R||0==R)return V.returnValue=!1,V.preventDefault&&V.preventDefault(),!1}else if(B=this.element.value.length,"-"==this.element.value[0]&&B--,B>=R||0==R)return V.returnValue=!1,V.preventDefault&&V.preventDefault(),!1}}else A.preventDefault()}_keyDownHandler(x){this._oldInputValue=this.element.value}_keyUpHandler(x){const A=x||window.event,V=A.which||A.keyCode;String.fromCharCode(V)||A.keyCode;27===V&&this.abortOnEsc&&(this.element.value=this.value),this.preventDefault&&(A.preventDefault?A.preventDefault():A.returnValue=!1),this.stopPropagation&&(A.stopPropagation?A.stopPropagation():A.cancelBubble=!0),this._limitCheck(this.element.value)}_focusHandler(A){if(!this.disabled&&(this.selectOnFocus&&this._setSelect(0,9999),this.focused=!0,this._previousLimitError=this.limitError,this.limitError=!1,this.writeError=!1,this.dispatchEvent("focusedChanged",{focused:!0}),this.dispatchEvent("errorChanged",{error:"NoError"}),this.errorText="",this.useTouchKeyboard)){if(x.isNullOrUndefined(this.numericvarin))for(this.numericvarin=this.element.parentElement;"NumericVarIn"!==this.numericvarin.__VWELEMENT__;)this.numericvarin=this.numericvarin.parentElement;this._openKeyboard()}}hideSoftKeyboard(x){x.setAttribute("readonly","readonly"),x.setAttribute("disabled","true"),setTimeout((function(){x.blur(),x.removeAttribute("readonly"),x.removeAttribute("disabled")}),100)}_openKeyboard(){let A=!1;if(x.isNullOrUndefined(x.Application.Settings.AppServices.TouchKeyboard)||x.isNullOrUndefined(x.Application.Settings.AppServices.TouchKeyboard.ForceNumericTouchpadDialogOnMobileDevice)||(A=x.Application.Settings.AppServices.TouchKeyboard.ForceNumericTouchpadDialogOnMobileDevice),!x.Utilities.isMobile()||A){if(this.focused=!1,this.dispatchEvent("focusedChanged",{focused:!1}),this.element.blur(),x.AppServices.VariableService.touchkeyboardInfo.isTouchkeyboardActive)return;if(x.AppServices.VariableService.touchkeyboardInfo.isTouchkeyboardActive=!0,x.Utilities.isMobile()||A){let x=document.getElementsByTagName("input")[0];x&&this.hideSoftKeyboard(x)}let V="dialogs/TouchKeyboardDialogs/NumericTouchpadDialog.html";if(x.isNullOrUndefined(x.Application.Settings.AppServices.TouchKeyboard)||x.isNullOrUndefined(x.Application.Settings.AppServices.TouchKeyboard.NumericTouchpadDialog)||(V=x.Application.Settings.AppServices.TouchKeyboard.NumericTouchpadDialog),document.body){const A=document.createElement("div"),R={anchor:null,placement:null,alignment:null,mode:"Modal",dialogName:V,dialogScrimColor:null},D=this.element.winControl,N=D._vwVariable;if(D){if(D._isLimitCheckEnabled?(x.AppServices.VariableService.touchkeyboardInfo.varMinValue=this.getFormattedMinValue(this.rawLimitMin),x.AppServices.VariableService.touchkeyboardInfo.varMaxValue=this.getFormattedMaxValue(this.rawLimitMax)):(x.AppServices.VariableService.touchkeyboardInfo.varMinValue=this._typeMin,x.AppServices.VariableService.touchkeyboardInfo.varMaxValue=this._typeMax),x.isNullOrUndefined(N))x.AppServices.VariableService.touchkeyboardInfo.varText="Touchkeyboard",x.AppServices.VariableService.touchkeyboardInfo.varValue=this.formattedValue;else if(x.AppServices.VariableService.touchkeyboardInfo.varName=this._vwVariable.Name,x.AppServices.VariableService.touchkeyboardInfo.varText=this._vwVariable.Text,0!==D._decimalPlaces){let A=this.formattedValue;x.AppServices.VariableService.touchkeyboardInfo.varValue=A}else x.AppServices.VariableService.touchkeyboardInfo.varValue=this.formattedValue;x.AppServices.VariableService.touchkeyboardInfo.varDecimalPlaces=this.decimalPlaces}else x.AppServices.VariableService.touchkeyboardInfo.varMaxValue=0,x.AppServices.VariableService.touchkeyboardInfo.varMinValue=0,x.AppServices.VariableService.touchkeyboardInfo.varText="Touchkeyboard",x.AppServices.VariableService.touchkeyboardInfo.varDecimalPlaces=0;if(D.unitClass){let A=D.unitClass.CurrentUnit.DecPoint;x.isNullOrUndefined(A)||0===A||(x.AppServices.VariableService.touchkeyboardInfo.varDecimalPlaces=this.resultDecimalPlaces)}if(D.unitText?x.AppServices.VariableService.touchkeyboardInfo.varUnitText=D.unitText:x.AppServices.VariableService.touchkeyboardInfo.varUnitText=null,x.isNullOrUndefined(x.AppServices.VariableService.touchkeyboardInfo.varMaxValue)&&x.isNullOrUndefined(x.AppServices.VariableService.touchkeyboardInfo.varMinValue)&&(x.AppServices.VariableService.touchkeyboardInfo.varMaxValue=this._typeMax,x.AppServices.VariableService.touchkeyboardInfo.varMinValue=this._typeMin),x.isNullOrUndefined(x.AppServices.VariableService.touchkeyboardInfo.varMinValue)&&(x.AppServices.VariableService.touchkeyboardInfo.varMinValue=0),x.isNullOrUndefined(x.AppServices.VariableService.touchkeyboardInfo.varMaxValue)&&(x.AppServices.VariableService.touchkeyboardInfo.varMaxValue=0),x.isNullOrUndefined(x.AppServices.VariableService.touchkeyboardInfo.varMinValue)||x.isNullOrUndefined(x.AppServices.VariableService.touchkeyboardInfo.varMaxValue)||(x.AppServices.VariableService.touchkeyboardInfo.varMaxValue.toString().includes("e")||x.AppServices.VariableService.touchkeyboardInfo.varMinValue.toString().includes("e"))&&(x.AppServices.VariableService.touchkeyboardInfo.varMaxValue="",x.AppServices.VariableService.touchkeyboardInfo.varMinValue=""),document.body.insertBefore(A,document.body.firstElementChild),this._dialogControl=new x.UI.Dialog(A,R),!this._dialogControl)return null;this.element.winControl&&this.element.winControl.controlId&&(this._dialogControl.element.className+=" vw-popover__"+this.element.winControl.controlId),this._dialogControl.dispatchEvent("result","RESULTDIALOG_OPENDIALOG"),this._dialogControl.show();return new Promise((A,V)=>{const R=function(V,R){if("RESULTDIALOG_OPTION"!==V.detail&&"RESULTDIALOG_OPENDIALOG"!==V.detail){if(!x.isNullOrUndefined(V.detail.resultAction)){const A=V.detail.resultAction.reason;x.isNullOrUndefined(A)||this._limitCheckTouchKeyboard(A)}const R=this._dialogControl.element;let D=this._dialogControl;const N=this._boundResultHandler;window.setImmediate((function(){x.AppServices.VariableService.touchkeyboardInfo.isTouchkeyboardActive=!1,D.removeEventListener("result",N),D.dispose(),R&&R.parentElement&&(document.body.removeChild(R),D=null)})),A(null)}}.bind(this);this._dialogControl.addEventListener("result",R)})}}}_limitCheckTouchKeyboard(A){if(this.isLimitCheckEnabled){const V=x.AppServices.VariableService.touchkeyboardInfo.varMinValue,R=x.AppServices.VariableService.touchkeyboardInfo.varMaxValue;null!=V&&null!=R&&(Number(A)>=V&&Number(A)<=R||""===V&&""===R)&&(this.numericvarin.winControl.value=A,this.numericvarin.winControl.writeValue(A))}else A>=this._typeMin&&A<=this._typeMax&&(this.numericvarin.winControl.value=A,this.numericvarin.winControl.writeValue(A))}_blurHandler(x){if(!this.disabled){if(this._keyPress)this._keyPress=!1;else switch(this.lostKeyboardFocusBehaviour){case"RestoreValue":this.limitError=this._previousLimitError,this.limitError?this._limitCheck(this.element.value):this.element.value=this.formattedValue;break;case"WriteInput":this._writeValue()}this.focused=!1,this.dispatchEvent("focusedChanged",{focused:!1})}}_validateLimitMin(A){return x.isNumber(A)||(A=parseFloat(A)),A<this.getFormattedMinValue(this.rawLimitMin)}_validateLimitMax(A){return x.isNumber(A)||(A=parseFloat(A)),A>this.getFormattedMaxValue(this.rawLimitMax)}_validateTypeMin(x){return x<this._typeMin}_validateTypeMax(x){return x>this._typeMax}_setSelect(x,A){this.element.setSelectionRange(x,A)}_isNumericChar(x){return"0123456789".indexOf(x)>=0}_limitCheck(x){this.isLimitCheckEnabled&&this._validateLimitMin(x)?(this.limitError=!0,this.dispatchEvent("errorChanged",{error:"LimitMinError"}),this.errorText=this.limitMinErrorText):this.isLimitCheckEnabled&&this._validateLimitMax(x)?(this.limitError=!0,this.dispatchEvent("errorChanged",{error:"LimitMaxError"}),this.errorText=this.limitMaxErrorText):this._validateTypeMin(x)?(this.limitError=!0,this.dispatchEvent("errorChanged",{error:"LimitMinError"}),this.errorText=this.limitMinErrorText):this._validateTypeMax(x)?(this.limitError=!0,this.dispatchEvent("errorChanged",{error:"LimitMaxError"}),this.errorText=this.limitMaxErrorText):(this.limitError=!1,this.dispatchEvent("errorChanged",{error:"NoError"}),this.errorText="")}dispose(){return null!=this._localizableLimitMinErrorText&&this.locService&&this._localizableLimitMinErrorTextObject&&(this.locService.removeLocalizedText(this._localizableLimitMinErrorText,this._boundLocalizableLimitMinErrorTextHandler,this._localizableLimitMinErrorTextObject),this._localizableLimitMinErrorTextObject=null),null!=this._localizableLimitMaxErrorText&&this.locService&&this._localizableLimitMaxErrorTextObject&&(this.locService.removeLocalizedText(this._localizableLimitMaxErrorText,this._boundLocalizableLimitMaxErrorTextHandler,this._localizableLimitMaxErrorTextObject),this._localizableLimitMaxErrorTextObject=null),null!=this._localizableVariableWriteErrorText&&this.locService&&this._localizableVariableWriteErrorTextObject&&(this.locService.removeLocalizedText(this._localizableVariableWriteErrorText,this._boundLocalizableVariableWriteErrorTextHandler,this._localizableVariableWriteErrorTextObject),this._localizableVariableWriteErrorTextObject=null),null!=this._localizableWatermarkText&&this.locService&&this._localizableWatermarkTextObject&&(this.locService.removeLocalizedText(this._localizableWatermarkText,this._boundLocalizableWatermarkTextHandler,this._localizableWatermarkTextObject),this._localizableWatermarkTextObject=null),super.dispose()}}NumericVarInCore.namespace="VisiWin.UI",NumericVarInCore.controlName="NumericVarInCore",NumericVarInCore.className="vw-numericvarincore",NumericVarInCore.propertyList={focusedChanged:{propertyType:"event",group:"event"},errorChanged:{propertyType:"event",group:"event"},focused:{propertyType:"member",type:"boolean",defaultValue:!1,forceOverwrite:!0},limitError:{propertyType:"member",type:"boolean",defaultValue:!1},writeError:{propertyType:"member",type:"boolean",defaultValue:!1},rawLimitMin:{propertyType:"member",type:"number"},rawLimitMax:{propertyType:"member",type:"number"},isLimitCheckEnabled:{propertyType:"member",type:"boolean",defaultValue:!1},errorText:{propertyType:"member",type:"string",defaultValue:null},limitMinErrorText:{propertyType:"member",type:"string"},localizableLimitMinErrorText:{propertyType:"custom",type:"string"},limitMaxErrorText:{propertyType:"member",type:"string"},localizableLimitMaxErrorText:{propertyType:"custom",type:"string"},variableWriteErrorText:{propertyType:"member",type:"string"},localizableVariableWriteErrorText:{propertyType:"custom",type:"string"},watermarkText:{propertyType:"member",type:"string"},localizableWatermarkText:{propertyType:"custom",type:"string"},preventDefault:{propertyType:"member",type:"boolean",defaultValue:!1},stopPropagation:{propertyType:"member",type:"boolean",defaultValue:!0},abortOnEsc:{propertyType:"member",type:"boolean",defaultValue:!0},writeOnReturn:{propertyType:"member",type:"boolean",defaultValue:!0},selectOnFocus:{propertyType:"member",type:"boolean",defaultValue:!1},lostKeyboardFocusBehaviour:{propertyType:"member",type:"enum",defaultValue:"RestoreValue"},spellcheck:{propertyType:"member",type:"boolean",defaultValue:!1},autocomplete:{propertyType:"member",type:"string",defaultValue:"Off"},textAlignment:{propertyType:"member",type:"string",defaultValue:"Left"},textContrast:{propertyType:"member",type:"number",defaultValue:1},useTouchKeyboard:{propertyType:"member",type:"boolean",defaultValue:!1},touchKeyboardDialogName:{propertyType:"member",type:"string"},forceTouchKeyboardOnMobileDevice:{propertyType:"member",type:"boolean",defaultValue:!1}},A.NumericVarInCore=NumericVarInCore}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class TextVarInCore extends x.UI.VariableBase{constructor(A,V){super(A,V),this._keyPress=!1,this._boundKeyPressHandler=this._keyPressHandler.bind(this),this._boundKeyDownHandler=this._keyDownHandler.bind(this),this._boundKeyUpHandler=this._keyUpHandler.bind(this),this._boundFocusHandler=this._focusHandler.bind(this),this._boundBlurHandler=this._blurHandler.bind(this),this._boundLocalizableWatermarkTextHandler=this._localizableWatermarkTextHandler.bind(this),this._boundLocalizableLimitMinErrorTextHandler=this._localizableLimitMinErrorTextHandler.bind(this),this._boundLocalizableLimitMaxErrorTextHandler=this._localizableLimitMaxErrorTextHandler.bind(this),this._boundLocalizableVariableWriteErrorTextHandler=this._localizableVariableWriteErrorTextHandler.bind(this),this.textvarin=null,this._dialogControl=null,this._localizableLimitMinErrorTextObject=null,this._localizableLimitMinErrorText=null,this._localizableLimitMaxErrorTextObject=null,this._localizableLimitMaxErrorText=null,this._localizableVariableWriteErrorTextObject=null,this._localizableVariableWriteErrorText=null,this._localizableWatermarkTextObject=null,this._localizableWatermarkText=null,this.inputEventsEnable=!0,this.addPropertyList(TextVarInCore,TextVarInCore.propertyList),this.defaultConstructor(A,this.inlineOptions,x.UI.TextVarInCore.controlName,x.UI.TextVarInCore.className)}preCheck(){return"INPUT"!==this.element.tagName&&x.Application.ErrorLog.log("VisiWin.UI.TextVarInCore, Control kann nur in einem Input Element platziert werden"),0}createHandler(){this.element.addEventListener(A.KeyboardEventType.keypress,this._boundKeyPressHandler,!1),this.element.addEventListener(A.KeyboardEventType.keydown,this._boundKeyDownHandler,!1),this.element.addEventListener(A.KeyboardEventType.keyup,this._boundKeyUpHandler,!1),this.element.addEventListener(A.FocusEventType.focus,this._boundFocusHandler,!1),this.element.addEventListener(A.FocusEventType.blur,this._boundBlurHandler,!1)}removeHandler(){this.element.removeEventListener(A.KeyboardEventType.keypress,this._boundKeyPressHandler,!1),this.element.removeEventListener(A.KeyboardEventType.keydown,this._boundKeyDownHandler,!1),this.element.removeEventListener(A.KeyboardEventType.keyup,this._boundKeyUpHandler,!1),this.element.removeEventListener(A.FocusEventType.focus,this._boundFocusHandler,!1),this.element.removeEventListener(A.FocusEventType.blur,this._boundBlurHandler,!1)}_localizableLimitMinErrorTextHandler(x){this.limitMinErrorText=x.DisplayText}get localizableLimitMinErrorText(){return this._localizableLimitMinErrorText}set localizableLimitMinErrorText(x){if(this._localizableLimitMinErrorText!=x){var A=this._localizableLimitMinErrorText;null!=this._localizableLimitMinErrorText&&this.locService&&this._localizableLimitMinErrorTextObject&&(this.locService.removeLocalizedText(this._localizableLimitMinErrorText,this._boundLocalizableLimitMinErrorTextHandler,this._localizableLimitMinErrorTextObject),this._localizableLimitMinErrorTextObject=null),this._localizableLimitMinErrorText=x,this.locService&&this.locService.addLocalizedTextAsync(this._localizableLimitMinErrorText,this._boundLocalizableLimitMinErrorTextHandler).then(x=>{this._localizableLimitMinErrorTextObject=x}),this._updateLayoutBase("property","localizableLimitMinErrorText",x,A),this.dispatchNotifyPropertyChanged("property","localizableLimitMinErrorText",x,A)}}_localizableLimitMaxErrorTextHandler(x){this.limitMaxErrorText=x.DisplayText}get localizableLimitMaxErrorText(){return this._localizableLimitMaxErrorText}set localizableLimitMaxErrorText(x){if(this._localizableLimitMaxErrorText!=x){var A=this._localizableLimitMaxErrorText;null!=this._localizableLimitMaxErrorText&&this.locService&&this._localizableLimitMaxErrorTextObject&&(this.locService.removeLocalizedText(this._localizableLimitMaxErrorText,this._boundLocalizableLimitMaxErrorTextHandler,this._localizableLimitMaxErrorTextObject),this._localizableLimitMaxErrorTextObject=null),this._localizableLimitMaxErrorText=x,this.locService&&this.locService.addLocalizedTextAsync(this._localizableLimitMaxErrorText,this._boundLocalizableLimitMaxErrorTextHandler).then(x=>{this._localizableLimitMaxErrorTextObject=x}),this._updateLayoutBase("property","localizableLimitMaxErrorText",x,A),this.dispatchNotifyPropertyChanged("property","localizableLimitMaxErrorText",x,A)}}_localizableVariableWriteErrorTextHandler(x){this.variableWriteErrorText=x.DisplayText}get localizableVariableWriteErrorText(){return this._localizableVariableWriteErrorText}set localizableVariableWriteErrorText(x){if(this._localizableVariableWriteErrorText!=x){var A=this._localizableVariableWriteErrorText;null!=this._localizableVariableWriteErrorText&&this.locService&&this._localizableVariableWriteErrorTextObject&&(this.locService.removeLocalizedText(this._localizableVariableWriteErrorText,this._boundLocalizableVariableWriteErrorTextHandler,this._localizableVariableWriteErrorTextObject),this._localizableVariableWriteErrorTextObject=null),this._localizableVariableWriteErrorText=x,this.locService&&this.locService.addLocalizedTextAsync(this._localizableVariableWriteErrorText,this._boundLocalizableVariableWriteErrorTextHandler).then(x=>{this._localizableVariableWriteErrorTextObject=x}),this._updateLayoutBase("property","localizableVariableWriteErrorText",x,A),this.dispatchNotifyPropertyChanged("property","localizableVariableWriteErrorText",x,A)}}_localizableWatermarkTextHandler(x){this.watermarkText=x.DisplayText}get localizableWatermarkText(){return this._localizableWatermarkText}set localizableWatermarkText(x){if(this._localizableWatermarkText!=x){var A=this._localizableWatermarkText;null!=this._localizableWatermarkText&&this.locService&&this._localizableWatermarkTextObject&&(this.locService.removeLocalizedText(this._localizableWatermarkText,this._boundLocalizableWatermarkTextHandler,this._localizableWatermarkTextObject),this._localizableWatermarkTextObject=null),this._localizableWatermarkText=x,this.locService&&this.locService.addLocalizedTextAsync(this._localizableWatermarkText,this._boundLocalizableWatermarkTextHandler).then(x=>{this._localizableWatermarkTextObject=x}),this._updateLayoutBase("property","localizableWatermarkText",x,A),this.dispatchNotifyPropertyChanged("property","localizableWatermarkText",x,A)}}_updateLayout(x){if("updateLayout"!=x.changeName&&"watermarkText"!=x.changeName||this.element.setAttribute("placeholder",this.watermarkText),"updateLayout"==x.changeName||"inputType"==x.changeName)switch(this.inputType){case"Password":this.element.setAttribute("type","password");break;default:this.element.setAttribute("type","text")}if("updateLayout"==x.changeName||"spellcheck"==x.changeName)switch(this.spellcheck){case!0:this.element.setAttribute("spellcheck","true");break;default:this.element.setAttribute("spellcheck","false")}if("updateLayout"==x.changeName||"autocomplete"==x.changeName)switch(this.autocomplete){case"On":this.element.setAttribute("autocomplete","on");break;default:this.element.setAttribute("autocomplete","off")}if("updateLayout"==x.changeName||"textAlignment"==x.changeName)switch(this.textAlignment){case"Center":this.element.style.textAlign="center";break;case"Right":this.element.style.textAlign="right";break;default:this.element.style.textAlign="left"}"updateLayout"!=x.changeName&&"textContrast"!=x.changeName||(this.element.style.opacity=this.textContrast.toString()),"varLimitMin"!=x.changeName&&"varLimitMax"!=x.changeName||this._onVariableValueChanged(null,this.formattedValue),"limitMinErrorText"==x.changeName&&this.isLimitCheckEnabled&&this._minLimitLengthExceeded(this.element.value)&&(this.errorText=this.limitMinErrorText),"limitMaxErrorText"==x.changeName&&this.isLimitCheckEnabled&&this._maxLimitLengthExceeded(this.element.value)&&(this.errorText=this.limitMaxErrorText)}_onVariableValueChanged(x,A){if(!this.focused){this.element.value=A;this._checkLengthLimits()}}_writeValueFromVarIn(x){null!==x&&(this.element.value=x,this._writeValue())}_writeValue(){var A=this.element.value,V=this;if(this._checkLengthLimits(),this.isLimitCheckEnabled&&this._minLimitLengthExceeded(A));else if(this.isLimitCheckEnabled&&this._maxLimitLengthExceeded(A));else if(this.value=A,this.variableName){if(this._vwVariable.IsRecipeEditing)return void(this._vwVariable._master.RecipeItem.RecipeClass&&(this._vwVariable._master.RecipeItem.RecipeClass.SetValueAsync(this.variableName,A),this.formattedValue=A));x.AppServices.VariableService.setValueAsync(this.variableName,A).then(x=>{V.writeError=!1,V.dispatchEvent("errorChanged",{error:"NoError"}),V.errorText=""},x=>{V.writeError=!0,V.dispatchEvent("errorChanged",{error:"WriteError"}),V.errorText=V.variableWriteErrorText})}else this.writeError=!1,this.dispatchEvent("errorChanged",{error:"NoError"}),this.errorText=""}_keyPressHandler(x){var A=x||window.event,V=A.which||A.keyCode;String.fromCharCode(V)||A.keyCode;13===V&&this.writeOnReturn&&(this._keyPress=!0,this.element.blur(),this._writeValue()),this.preventDefault&&(A.preventDefault?A.preventDefault():A.returnValue=!1),this.stopPropagation&&(A.stopPropagation?A.stopPropagation():A.cancelBubble=!0)}_keyDownHandler(x){}_keyUpHandler(x){var A=x||window.event,V=A.which||A.keyCode;String.fromCharCode(V)||A.keyCode;27===V&&this.abortOnEsc&&(this.element.value=this.value),this.preventDefault&&(A.preventDefault?A.preventDefault():A.returnValue=!1),this.stopPropagation&&(A.stopPropagation?A.stopPropagation():A.cancelBubble=!0)}_focusHandler(A){if(!this.disabled&&(this.selectOnFocus&&this._setSelect(0,9999),this.focused=!0,this.limitError=!1,this.writeError=!1,this.dispatchEvent("focusedChanged",{focused:!0}),this.dispatchEvent("errorChanged",{error:"NoError"}),this.errorText="",this.useTouchKeyboard)){if(x.isNullOrUndefined(this.textvarin))for(this.textvarin=this.element.parentElement;"TextVarIn"!==this.textvarin.__VWELEMENT__;)this.textvarin=this.textvarin.parentElement;this._openKeyboard()}}hideSoftKeyboard(x){x.setAttribute("readonly","readonly"),x.setAttribute("disabled","true"),setTimeout((function(){x.blur(),x.removeAttribute("readonly"),x.removeAttribute("disabled")}),100)}_openKeyboard(){let A=!1;if(x.isNullOrUndefined(x.Application.Settings.AppServices.TouchKeyboard)||x.isNullOrUndefined(x.Application.Settings.AppServices.TouchKeyboard.ForceAlphanumericTouchpadDialogOnMobileDevice)||(A=x.Application.Settings.AppServices.TouchKeyboard.ForceAlphanumericTouchpadDialogOnMobileDevice),!x.Utilities.isMobile()||A){if(this.focused=!1,this.dispatchEvent("focusedChanged",{focused:!1}),this.element.blur(),x.AppServices.VariableService.touchkeyboardInfo.isTouchkeyboardActive)return;if(x.AppServices.VariableService.touchkeyboardInfo.isTouchkeyboardActive=!0,x.Utilities.isMobile()||A){let x=document.getElementsByTagName("input")[0];x&&this.hideSoftKeyboard(x)}let V="dialogs/TouchKeyboardDialogs/AlphanumericTouchpadDialog.html";if(x.isNullOrUndefined(x.Application.Settings.AppServices.TouchKeyboard)||x.isNullOrUndefined(x.Application.Settings.AppServices.TouchKeyboard.AlphanumericTouchpadDialog)||(V=x.Application.Settings.AppServices.TouchKeyboard.AlphanumericTouchpadDialog),document.body){const A=document.createElement("div"),R={anchor:null,placement:null,alignment:null,mode:"Modal",dialogName:V,dialogScrimColor:null},D=this.element.winControl,N=D._vwVariable;if(D?(D._isLimitCheckEnabled?D._useVariableLimits?x.isNullOrUndefined(N)?(x.AppServices.VariableService.touchkeyboardInfo.varMaxValue=this._typeMax,x.AppServices.VariableService.touchkeyboardInfo.varMinValue=this._typeMin):(x.AppServices.VariableService.touchkeyboardInfo.varMaxValue=this.rawValue2value(D._vwVariable.RawMaxValue),x.AppServices.VariableService.touchkeyboardInfo.varMinValue=this.rawValue2value(D._vwVariable.RawMinValue)):(x.AppServices.VariableService.touchkeyboardInfo.varMaxValue=D._textLengthMax,x.AppServices.VariableService.touchkeyboardInfo.varMinValue=D._textLengthMin):(x.AppServices.VariableService.touchkeyboardInfo.varMaxValue=this._typeMax,x.AppServices.VariableService.touchkeyboardInfo.varMinValue=this._typeMin),x.isNullOrUndefined(N)?(x.AppServices.VariableService.touchkeyboardInfo.varText="Touchkeyboard",x.AppServices.VariableService.touchkeyboardInfo.varValue=D.__value):(x.AppServices.VariableService.touchkeyboardInfo.varName=D._vwVariable.Name,x.AppServices.VariableService.touchkeyboardInfo.varText=D._vwVariable.Text,x.AppServices.VariableService.touchkeyboardInfo.varValue=D._vwVariable.Value),x.AppServices.VariableService.touchkeyboardInfo.varDecimalPlaces=0):(x.AppServices.VariableService.touchkeyboardInfo.varMaxValue=0,x.AppServices.VariableService.touchkeyboardInfo.varMinValue=0,x.AppServices.VariableService.touchkeyboardInfo.varText="Touchkeyboard",x.AppServices.VariableService.touchkeyboardInfo.varDecimalPlaces=0),D.unitText?x.AppServices.VariableService.touchkeyboardInfo.varUnitText=D.unitText:x.AppServices.VariableService.touchkeyboardInfo.varUnitText=null,document.body.insertBefore(A,document.body.firstElementChild),this._dialogControl=new x.UI.Dialog(A,R),!this._dialogControl)return null;this.element.winControl&&this.element.winControl.controlId&&(this._dialogControl.element.className+=" vw-popover__"+this.element.winControl.controlId),this._dialogControl.dispatchEvent("result","RESULTDIALOG_OPENDIALOG"),this._dialogControl.show();return new Promise((A,V)=>{const R=function(V,R){if("RESULTDIALOG_OPTION"!==V.detail&&"RESULTDIALOG_OPENDIALOG"!==V.detail){if(!x.isNullOrUndefined(V.detail.resultAction)){const A=V.detail.resultAction.reason;x.isNullOrUndefined(A)||this._limitCheckTouchKeyboard(A)}const R=this._dialogControl.element;let D=this._dialogControl;const N=this._boundResultHandler;window.setImmediate((function(){x.AppServices.VariableService.touchkeyboardInfo.isTouchkeyboardActive=!1,D.removeEventListener("result",N),D.dispose(),R&&R.parentElement&&(document.body.removeChild(R),D=null)})),A(null)}}.bind(this);this._dialogControl.addEventListener("result",R)})}}}_limitCheckTouchKeyboard(A){const V=x.AppServices.VariableService.touchkeyboardInfo.varMinValue,R=x.AppServices.VariableService.touchkeyboardInfo.varMaxValue;this.isLimitCheckEnabled?A.length>=V&&A.length<=R&&(this.textvarin.winControl.value=A,this.textvarin.winControl.writeValue(A)):(this.textvarin.winControl.value=A,this.textvarin.winControl.writeValue(A))}_blurHandler(x){if(!this.disabled){if(this._keyPress)this._keyPress=!1;else switch(this.lostKeyboardFocusBehaviour){case"RestoreValue":this.element.value=this.value;break;case"WriteInput":this._writeValue()}this.focused=!1,this._checkLengthLimits(),this.dispatchEvent("focusedChanged",{focused:!1})}}_minLimitLengthExceeded(A){var V=this.textLengthMin;return!x.isNullOrUndefined(this.varLimitMin)&&this.useVariableLimits&&(V=this.varLimitMin),A.length<V}_maxLimitLengthExceeded(A){var V=this.textLengthMax;return!x.isNullOrUndefined(this.varLimitMax)&&this.useVariableLimits&&(V=this.varLimitMax),A.length>V}_validateLimitMin(x){var A=this.useVariableLimits&&this.varLimitMin?this.varLimitMin:this.textLengthMin;return x.length<A}_validateLimitMax(x){var A=this.useVariableLimits&&this.varLimitMax?this.varLimitMax:this.textLengthMax;return x.length>A}_setSelect(x,A){this.element.setSelectionRange(x,A)}_checkLengthLimits(){this.limitError=!1,this.isLimitCheckEnabled&&(this._minLimitLengthExceeded(this.element.value)&&(this.limitError=!0,this.dispatchEvent("errorChanged",{error:"LimitMinError"}),this.errorText=this.limitMinErrorText),this._maxLimitLengthExceeded(this.element.value)&&(this.limitError=!0,this.dispatchEvent("errorChanged",{error:"LimitMaxError"}),this.errorText=this.limitMaxErrorText)),this.limitError||(this.dispatchEvent("errorChanged",{error:"NoError"}),this.errorText="")}dispose(){return null!=this._localizableLimitMinErrorText&&this.locService&&this._localizableLimitMinErrorTextObject&&(this.locService.removeLocalizedText(this._localizableLimitMinErrorText,this._boundLocalizableLimitMinErrorTextHandler,this._localizableLimitMinErrorTextObject),this._localizableLimitMinErrorTextObject=null),null!=this._localizableLimitMaxErrorText&&this.locService&&this._localizableLimitMaxErrorTextObject&&(this.locService.removeLocalizedText(this._localizableLimitMaxErrorText,this._boundLocalizableLimitMaxErrorTextHandler,this._localizableLimitMaxErrorTextObject),this._localizableLimitMaxErrorTextObject=null),null!=this._localizableVariableWriteErrorText&&this.locService&&this._localizableVariableWriteErrorTextObject&&(this.locService.removeLocalizedText(this._localizableVariableWriteErrorText,this._boundLocalizableVariableWriteErrorTextHandler,this._localizableVariableWriteErrorTextObject),this._localizableVariableWriteErrorTextObject=null),null!=this._localizableWatermarkText&&this.locService&&this._localizableWatermarkTextObject&&(this.locService.removeLocalizedText(this._localizableWatermarkText,this._boundLocalizableWatermarkTextHandler,this._localizableWatermarkTextObject),this._localizableWatermarkTextObject=null),super.dispose()}}TextVarInCore.namespace="VisiWin.UI",TextVarInCore.controlName="TextVarInCore",TextVarInCore.className="vw-textvarincore",TextVarInCore.propertyList={focusedChanged:{propertyType:"event",group:"event"},errorChanged:{propertyType:"event",group:"event"},focused:{propertyType:"member",type:"boolean",defaultValue:!1,forceOverwrite:!0},limitError:{propertyType:"member",type:"boolean",defaultValue:!1},writeError:{propertyType:"member",type:"boolean",defaultValue:!1},textLengthMin:{propertyType:"member",type:"number"},textLengthMax:{propertyType:"member",type:"number"},isLimitCheckEnabled:{propertyType:"member",type:"boolean",defaultValue:!1},errorText:{propertyType:"member",type:"string",defaultValue:null},limitMinErrorText:{propertyType:"member",type:"string"},localizableLimitMinErrorText:{propertyType:"custom",type:"string"},limitMaxErrorText:{propertyType:"member",type:"string"},localizableLimitMaxErrorText:{propertyType:"custom",type:"string"},variableWriteErrorText:{propertyType:"member",type:"string"},localizableVariableWriteErrorText:{propertyType:"custom",type:"string"},watermarkText:{propertyType:"member",type:"string"},localizableWatermarkText:{propertyType:"custom",type:"string"},preventDefault:{propertyType:"member",type:"boolean",defaultValue:!1},stopPropagation:{propertyType:"member",type:"boolean",defaultValue:!0},abortOnEsc:{propertyType:"member",type:"boolean",defaultValue:!0},writeOnReturn:{propertyType:"member",type:"boolean",defaultValue:!0},selectOnFocus:{propertyType:"member",type:"boolean",defaultValue:!1},lostKeyboardFocusBehaviour:{propertyType:"member",type:"enum",defaultValue:"RestoreValue"},inputType:{propertyType:"member",type:"string",defaultValue:"Text"},spellcheck:{propertyType:"member",type:"boolean",defaultValue:!1},autocomplete:{propertyType:"member",type:"string",defaultValue:"Off"},textAlignment:{propertyType:"member",type:"string",defaultValue:"Left"},textContrast:{propertyType:"member",type:"number",defaultValue:1},useTouchKeyboard:{propertyType:"member",type:"boolean",defaultValue:!1},touchKeyboardDialogName:{propertyType:"member",type:"string"},forceTouchKeyboardOnMobileDevice:{propertyType:"member",type:"boolean",defaultValue:!1}},A.TextVarInCore=TextVarInCore}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class VarOutCore extends A.VariableBase{constructor(x,A){super(x,A),this.observe=null,A&&A.debug,this.addPropertyList(VarOutCore,VarOutCore.propertyList),this.defaultConstructor(x,A,VarOutCore.controlName,VarOutCore.className)}_onVariableValueChanged(A,V){var R=null;this.formattedValue?(R=this.formattedValue,R=x.Utilities.valueToUser(R)):R=this.value,this.element.textContent=R}dispose(){return super.dispose()}}VarOutCore.namespace="VisiWin.UI",VarOutCore.controlName="VarOutCore",VarOutCore.className="vw-varoutcore",VarOutCore.propertyList={},A.VarOutCore=VarOutCore}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class DonutGaugeCore extends x.UI.VariableBase{constructor(x,A){super(x,A),this.properties={designerType:{propertyType:"base",defaultValue:"Control"},registerTargetId:{propertyType:"base",defaultValue:"DonutGaugeLimit"},rawLimitMin:{defaultValue:0,type:"number"},rawLimitMax:{defaultValue:100,type:"number"},startAngle:{defaultValue:-135,type:"number"},endAngle:{defaultValue:135,type:"number"},centerX:{defaultValue:"100%"},centerY:{defaultValue:"100%"},innerRadius:{defaultValue:"70%"},outerRadius:{defaultValue:"100%"},limits:{type:"any"},backgroundColor:{defaultValue:"@None"},borderColor:{defaultValue:"@None"},indicatorBackgroundColor:{defaultValue:"@ChromeMediumHigh"},indicatorColor:{defaultValue:"@PrimaryColor"},disabledBackgroundColor:{defaultValue:"@None"},disabledBorderColor:{defaultValue:"@None"},disabledIndicatorBackgroundColor:{defaultValue:"@None"},disabledIndicatorColor:{defaultValue:"@None"}},this.cssStyles={coreStyle:!0,css:"\n            .vw-donutgaugecore {\n                position: relative;\n                width: 100px;\n                height: 100px;\n            }           \n            .vw-donutgaugecore__svg {\n                overflow: visible;\n            }\n        "},this._svgElement=null,this._limitsCollection=[],this.initialize(DonutGaugeCore)}createTemplate(){let x=document.createElement("div");return this.reparentChildren(this.element,x),this.element.innerHTML='<svg class="vw-donutgaugecore__svg" width="100%" height="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"></svg>',this._svgElement=this.element.firstElementChild,this.reparentChildren(x,this.element),null}registerChild(x,A,V,R){return A===this.registerTargetId&&V&&V.winControl&&(this._limitsCollection.push(V.winControl),this.isInDesignMode?(V.style.display="none",V.winControl.addEventListener("notifyPropertyChanged",this._limitsChangedHandler.bind(this))):V.remove()),!1}resizeHandler(x){x?(this._clientWidth=x[0].contentRect.width,this._clientHeight=x[0].contentRect.height):(this._clientWidth=this.element.clientWidth,this._clientHeight=this.element.clientHeight),this._drawDonut(this._clientWidth,this._clientHeight)}_updateColors(x){"property"!=x.changeType&&"status"!=x.changeType&&"afterInit"!=x.changeName||(this.disabled?(this.setColor("disabledBackgroundColor","backgroundColor"),this.setColor("disabledBorderColor","borderColor")):(this.setColor("backgroundColor","backgroundColor"),this.setColor("borderColor","borderColor"))),"property"!=x.changeType&&"status"!=x.changeType||this._drawDonut(this._clientWidth,this._clientHeight)}_updateLayout(x){"startAngle"!=x.changeName&&"endAngle"!=x.changeName&&"innerRadius"!=x.changeName&&"outerRadius"!=x.changeName&&"rawLimitMin"!=x.changeName&&"rawLimitMax"!=x.changeName&&"limits"!=x.changeName||this._drawDonut(this._clientWidth,this._clientHeight),"afterInit"==x.changeName&&this.isInDesignMode&&"Control"===this.designerType&&null==this.value&&(this.value=40),"initialized"==x.changeName&&"Control"===this.designerType&&this._limitsChangedHandler(null),"formattedValue"!=x.changeName&&"value"!=x.changeName&&"rawValue"!=x.changeName&&"varLimitMin"!=x.changeName&&"varLimitMax"!=x.changeName&&"varUnitText"!=x.changeName||this._drawDonut(this._clientWidth,this._clientHeight)}_drawDonut(A,V){if(!A||!V)return;let R=this.useRawValue?this.rawValue:this.value;for(;this._svgElement.lastChild;)this._svgElement.removeChild(this._svgElement.lastChild);let D,N,U,B,F,W,H,z,G=A>V?V:A,j=this.useVariableLimits&&this.varRawLimitMin?this.useRawValue?this.varRawLimitMin:this.rawValue2value(this.varRawLimitMin):this.useRawValue?this.rawLimitMin:this.rawValue2value(this.rawLimitMin),q=this.useVariableLimits&&this.varRawLimitMax?this.useRawValue?this.varRawLimitMax:this.rawValue2value(this.varRawLimitMax):this.useRawValue?this.rawLimitMax:this.rawValue2value(this.rawLimitMax),Q=x.SvgUtilities.correctAngle(this.startAngle),K=x.SvgUtilities.correctAngle(this.endAngle),J=x.SvgUtilities.getPixelValue(this.centerX,A),X=x.SvgUtilities.getPixelValue(this.centerY,V),Y=x.SvgUtilities.getPixelValue(this.innerRadius,G),$=x.SvgUtilities.getPixelValue(this.outerRadius,G);if(D=x.SvgUtilities.getDegreesSegment(Q,K),N=q-j,U=D/N,R<j&&(R=j),R>q&&(R=q),B=x.SvgUtilities.correctAngle(Q+U*(R-j)),F=U*(R-j),W=D-F,this.disabled?(H=this.getColor("disabledIndicatorBackgroundColor"),z=this.getColor("disabledIndicatorColor")):(H=this.getColor("indicatorBackgroundColor"),z=this.getColor("indicatorColor")),null!=this.limits&&this.limits.length>0)for(var Z=0;Z<this.limits.length;Z++){let x=this.limits[Z];if(x.value&&x.color&&this.validateValue(x.value)){z=x.color;break}}this._svgElement.appendChild(x.SvgUtilities.drawPath(J,X,Q,B,F,Y,$,this.getThemeColor(z))),this._svgElement.appendChild(x.SvgUtilities.drawPath(J,X,B,K,W,Y,$,this.getThemeColor(H)))}_limitsChangedHandler(x){if(this._limitsCollection&&this._limitsCollection.length>0){let x=[];for(let A=0;A<this._limitsCollection.length;A++){let V=this._limitsCollection[A];x.push({value:V.value,color:V.fillColor})}this.limits=x}else this.limits=[]}}A.DonutGaugeCore=DonutGaugeCore}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class SliderCore extends x.UI.VariableBase{constructor(A,V){super(A,V),this._activeTrackElement=null,this._trackElement=null,this._thumbElement=null,this._posX=0,this._posY=0,this._boundKeyDownHandler=this._keyDownHandler.bind(this),this._boundPointerDownHandler=this._pointerDownHandler.bind(this),this._boundPointerMoveHandler=this._pointerMoveHandler.bind(this),this._boundPointerUpHandler=this._pointerUpHandler.bind(this),this._touchElement=null,this._pressed=null,this._dragging=null,this.inputEventsEnable=!0,this.addPropertyList(SliderCore,SliderCore.propertyList),this.pressed=!1,this.dragging=!1,this.defaultConstructor(A,this.inlineOptions,x.UI.SliderCore.controlName,x.UI.SliderCore.className)}createTemplate(){return this.element.innerHTML=['<div class="vw-slidercore__activetrack"></div>','<div class="vw-slidercore__track"></div>','<div class="vw-slidercore__thumb"></div>'].join("\n"),this._activeTrackElement=this.element.firstElementChild,this._trackElement=this._activeTrackElement.nextElementSibling,this._thumbElement=this._trackElement.nextElementSibling,null}createHandler(){this.element.addEventListener(A.KeyboardEventType.keydown,this._boundKeyDownHandler),x.Utilities.addEventListener(this.touchElement?this.touchElement:this.element,A.PointerEventType.pointerdown,this._boundPointerDownHandler)}removeHandler(){this.element.removeEventListener(A.KeyboardEventType.keydown,this._boundKeyDownHandler),x.Utilities.removeEventListener(this.touchElement?this.touchElement:this.element,A.PointerEventType.pointerdown,this._boundPointerDownHandler),x.Utilities.removeGlobalEventListener(A.PointerEventType.pointermove,this._boundPointerMoveHandler,!0),x.Utilities.removeGlobalEventListener(A.PointerEventType.pointerup,this._boundPointerUpHandler,!0)}resizeHandler(){}set minValue(x){this.rawLimitMin=x}set maxValue(x){this.rawLimitMax=x}get touchElement(){return this._touchElement}set touchElement(V){if(this._touchElement!=V){var R=this._touchElement;this._touchElement=V,x.Utilities.removeEventListener(this.element,A.PointerEventType.pointerdown,this._boundPointerDownHandler),R&&x.Utilities.removeEventListener(R,A.PointerEventType.pointerdown,this._boundPointerDownHandler),x.Utilities.addEventListener(this._touchElement,A.PointerEventType.pointerdown,this._boundPointerDownHandler),this._updateLayoutBase("property","touchElement",V,R),this.dispatchNotifyPropertyChanged("property","touchElement",V,R)}}get pressed(){return this._pressed}set pressed(A){if(this._pressed!=A){var V=this._pressed;this._pressed=A,this._pressed?x.Utilities.addClass(this.element,x.UI.SliderCore.classPressed):x.Utilities.removeClass(this.element,x.UI.SliderCore.classPressed),this._updateColorsBase("state","pressed",A,V),this.dispatchNotifyPropertyChanged("state","pressed",A,V,"pressedChanged")}}get dragging(){return this._dragging}set dragging(A){if(this._dragging!=A){var V=this._dragging;this._dragging=A,this._dragging?x.Utilities.addClass(this.element,x.UI.SliderCore.classDragging):x.Utilities.removeClass(this.element,x.UI.SliderCore.classDragging),this.dispatchNotifyPropertyChanged("state","dragging",A,V,"draggingChanged")}}_updateColors(x){this.disabled?(this.setColor("disabledActiveTrackColor","backgroundColor","_activeTrackElement"),this.setColor("disabledTrackColor","backgroundColor","_trackElement"),this.setColor("disabledThumbBackgroundColor","backgroundColor","_thumbElement"),this.setColor("disabledThumbBorderColor","borderColor","_thumbElement")):this.pressed?(this.setColor("pressedActiveTrackColor","backgroundColor","_activeTrackElement"),this.setColor("pressedTrackColor","backgroundColor","_trackElement"),this.setColor("pressedThumbBackgroundColor","backgroundColor","_thumbElement"),this.setColor("pressedThumbBorderColor","borderColor","_thumbElement")):this.hover?(this.setColor("hoverActiveTrackColor","backgroundColor","_activeTrackElement"),this.setColor("hoverTrackColor","backgroundColor","_trackElement"),this.setColor("hoverThumbBackgroundColor","backgroundColor","_thumbElement"),this.setColor("hoverThumbBorderColor","borderColor","_thumbElement")):(this.setColor("activeTrackColor","backgroundColor","_activeTrackElement"),this.setColor("trackColor","backgroundColor","_trackElement"),this.setColor("thumbBackgroundColor","backgroundColor","_thumbElement"),this.setColor("thumbBorderColor","borderColor","_thumbElement"))}_updateLayout(x){if("hover"!=x.changeName){if("updateLayout"==x.changeName||"orientation"==x.changeName||"orientationReversed"==x.changeName||"trackThickness"==x.changeName)switch(this.orientation){case"Vertical":this.element.style.flexDirection=this.orientationReversed?"column":"column-reverse",this._trackElement.style.width=this.trackThickness,this._trackElement.style.height="100%";break;default:this.element.style.flexDirection=this.orientationReversed?"row-reverse":"row",this._trackElement.style.width="100%",this._trackElement.style.height=this.trackThickness}"updateLayout"!=x.changeName&&"trackBorderRadius"!=x.changeName||(this._activeTrackElement.style.borderRadius=this.trackBorderRadius,this._trackElement.style.borderRadius=this.trackBorderRadius),isNaN(this._valueToPixel())||(this._posX=this._posY=this._valueToPixel(),this._updateSliderLayout())}}_keyDownHandler(A){this.disabled||(A.keyCode===x.Utilities.Key.space&&A.preventDefault(),A.keyCode!==x.Utilities.Key.rightArrow&&A.keyCode!==x.Utilities.Key.upArrow||A.preventDefault(),A.keyCode!==x.Utilities.Key.leftArrow&&A.keyCode!==x.Utilities.Key.downArrow||A.preventDefault())}_pointerDownHandler(V){if(!this.disabled&&this._activeTrackElement&&this._trackElement&&this._thumbElement&&!this.pressed){V.preventDefault(),this.pressed=!0,this.dragging=!1;var R=this.element.getBoundingClientRect();this._posX=this._clampValue(V.pageX-R.left,0,R.width),this._posY=this._clampValue(V.pageY-R.top,0,R.height),this._updateSliderLayout(),x.Utilities.addGlobalEventListener(A.PointerEventType.pointermove,this._boundPointerMoveHandler,!0),x.Utilities.addGlobalEventListener(A.PointerEventType.pointerup,this._boundPointerUpHandler,!0)}}_pointerMoveHandler(A){if(!this.disabled&&this._activeTrackElement&&this._trackElement&&this._thumbElement&&this.pressed){A.preventDefault(),this.dragging=!0;var V=this.element.getBoundingClientRect();if(this._posX=this._clampValue(A.pageX-V.left,0,V.width),this._posY=this._clampValue(A.pageY-V.top,0,V.height),this._updateSliderLayout(),this.variableName&&this._vwVariable&&this.immediate){var R=this._pixelToValue();if(null!=R&&!isNaN(R)&&R!=this._vwVariable.Value){if(this._vwVariable.IsRecipeEditing)return void(this._vwVariable._master.RecipeItem.RecipeClass&&(this._vwVariable._master.RecipeItem.RecipeClass.SetValueAsync(this.variableName,this.useRawValue?this.rawValue2value(R):R),this.formattedValue=R));x.AppServices.VariableService.setValueAsync(this.variableName,this.useRawValue?this.rawValue2value(R):R)}}}}_pointerUpHandler(V){if(!this.disabled&&this._activeTrackElement&&this._trackElement&&this._thumbElement&&this.pressed){V.preventDefault(),this.pressed=!1,this.dragging=!1;var R=this.element.getBoundingClientRect();if(this._posX=this._clampValue(V.pageX-R.left,0,R.width),this._posY=this._clampValue(V.pageY-R.top,0,R.height),this._updateSliderLayout(),this.variableName&&this._vwVariable){var D=this._pixelToValue();if(null!=D&&!isNaN(D)&&D!=this._vwVariable.Value){if(this._vwVariable.IsRecipeEditing)return void(this._vwVariable._master.RecipeItem.RecipeClass&&(this._vwVariable._master.RecipeItem.RecipeClass.SetValueAsync(this.variableName,this.useRawValue?this.rawValue2value(D):D),this.formattedValue=D));x.AppServices.VariableService.setValueAsync(this.variableName,this.useRawValue?this.rawValue2value(D):D)}}x.Utilities.removeGlobalEventListener(A.PointerEventType.pointermove,this._boundPointerMoveHandler,!0),x.Utilities.removeGlobalEventListener(A.PointerEventType.pointerup,this._boundPointerUpHandler,!0)}}_valueToPixel(){var x,A=this.element.getBoundingClientRect(),V=this.useRawValue?this.rawValue:this.value,R=this.useVariableLimits&&this.varRawLimitMin?this.useRawValue?this.varRawLimitMin:this.rawValue2value(this.varRawLimitMin):this.useRawValue?this.rawLimitMin:this.rawValue2value(this.rawLimitMin),D=this.useVariableLimits&&this.varRawLimitMax?this.useRawValue?this.varRawLimitMax:this.rawValue2value(this.varRawLimitMax):this.useRawValue?this.rawLimitMax:this.rawValue2value(this.rawLimitMax),N=this.step?this.step:1;return 0==A.width||0==A.height||isNaN(R)||isNaN(D)||isNaN(V)||isNaN(N)||R>=D?null:(x=("Horizontal"==this.orientation?A.width:A.height)/(D-R)*(this._clampValue(this._roundValue(V,N),R,D)-R),"Horizontal"==this.orientation?this.orientationReversed?A.width-x:x:this.orientationReversed?x:A.height-x)}_pixelToValue(){var x,A,V=this.element.getBoundingClientRect(),R=this.useVariableLimits&&this.varRawLimitMin?this.useRawValue?this.varRawLimitMin:this.rawValue2value(this.varRawLimitMin):this.useRawValue?this.rawLimitMin:this.rawValue2value(this.rawLimitMin),D=this.useVariableLimits&&this.varRawLimitMax?this.useRawValue?this.varRawLimitMax:this.rawValue2value(this.varRawLimitMax):this.useRawValue?this.rawLimitMax:this.rawValue2value(this.rawLimitMax),N=this.step?this.step:1;return 0==V.width||0==V.height||isNaN(R)||isNaN(D)||isNaN(N)||R>=D?null:(A=("Horizontal"==this.orientation?V.width:V.height)/(D-R),x="Horizontal"==this.orientation?((this.orientationReversed?V.width-this._posX:this._posX)- -A*R)/A:((this.orientationReversed?this._posY:V.height-this._posY)- -A*R)/A,this._clampValue(this._roundValue(x,N),R,D))}_updateSliderLayout(){var A=window.getComputedStyle(this.element,null),V=window.getComputedStyle(this._thumbElement,null),R=this.element.getBoundingClientRect(),D=this._thumbElement.getBoundingClientRect(),N=parseFloat(A.getPropertyValue("border-left-width")),U=parseFloat(A.getPropertyValue("border-top-width")),B=parseFloat(V.getPropertyValue("margin-left")),F=parseFloat(V.getPropertyValue("margin-top")),W=parseFloat(V.getPropertyValue("margin-right")),H=parseFloat(V.getPropertyValue("margin-bottom")),z=-N-D.width/2,G=-U-D.height/2,j=-N+R.width-B+D.width/2-W,q=-U+R.height-F+D.height/2-H;this._thumbElement.style.left=("Horizontal"==this.orientation?this._clampValue(this._posX-D.width/2,z,j):-N+(R.width-D.width)/2-W)+"px",this._thumbElement.style.top=("Horizontal"==this.orientation?-U+(R.height-D.height)/2-H:this._clampValue(this._posY-D.height/2,G,q))+"px",this._activeTrackElement.style.width=("Horizontal"==this.orientation?this.orientationReversed?R.width-this._posX:this._posX:parseFloat(this.trackThickness))+"px",this._activeTrackElement.style.height=("Horizontal"==this.orientation?parseFloat(this.trackThickness):this.orientationReversed?this._posY:R.height-this._posY)+"px";var Q={};Q.posX=this._posX,Q.posY=this._posY,Q.value=this.formatString?x.Utilities.frmString(this.formatString,this._pixelToValue()):this._pixelToValue(),this.dispatchEvent("thumbPositionChanged",Q)}_clampValue(x,A,V){return Math.min(Math.max(x,A),V)}_roundValue(x,A){return Math.round(x/A)/(1/A)}attach(){return setTimeout(()=>{this._updateSliderLayout()},100),super.attach()}dispose(){return super.dispose()}}SliderCore.classPressed="pressed",SliderCore.classDragging="dragging",SliderCore.namespace="VisiWin.UI",SliderCore.controlName="SliderCore",SliderCore.className="vw-slidercore",SliderCore.propertyList={touchElement:{propertyType:"custom",type:"string"},pressedChanged:{propertyType:"event",group:"Event"},draggingChanged:{propertyType:"event",group:"Event"},thumbPositionChanged:{propertyType:"event",group:"Event"},pressed:{propertyType:"custom",type:"boolean"},dragging:{propertyType:"custom",type:"boolean"},rawLimitMin:{propertyType:"member",type:"number",defaultValue:0},rawLimitMax:{propertyType:"member",type:"number",defaultValue:100},step:{propertyType:"member",type:"number",defaultValue:1},immediate:{propertyType:"member",type:"boolean",defaultValue:!1},orientation:{propertyType:"member",type:"string",defaultValue:"Horizontal"},orientationReversed:{propertyType:"member",type:"boolean",defaultValue:!1},trackThickness:{propertyType:"member",type:"string",defaultValue:"6px"},trackBorderRadius:{propertyType:"member",type:"string",defaultValue:"0px"},minValue:{propertyType:"custom",type:"number"},maxValue:{propertyType:"custom",type:"number"},thumbBorderWidth:{propertyType:"style",type:"string",element:"_thumbElement",style:"borderWidth"},thumbBorderStyle:{propertyType:"style",type:"enum",element:"_thumbElement",style:"borderStyle"},thumbBorderRadius:{propertyType:"style",type:"string",element:"_thumbElement",style:"borderRadius"},thumbWidth:{propertyType:"style",type:"string",element:"_thumbElement",style:"width"},thumbHeight:{propertyType:"style",type:"string",element:"_thumbElement",style:"height"},thumbMargin:{propertyType:"style",type:"string",element:"_thumbElement",style:"margin"},thumbPadding:{propertyType:"style",type:"string",element:"_thumbElement",style:"padding"},thumbShadow:{propertyType:"style",type:"string",element:"_thumbElement",style:"boxShadow",resourceValue:["getShadow"]},activeTrackColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@CheckedBackgroundColor"},hoverActiveTrackColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@CheckedBackgroundColor"},pressedActiveTrackColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@CheckedBackgroundColor"},disabledActiveTrackColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ChromeMedium"},trackColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ChromeMedium"},hoverTrackColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ChromeMedium"},pressedTrackColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ChromeMedium"},disabledTrackColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ChromeMediumLow"},thumbBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@CheckedBackgroundColor"},hoverThumbBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@CheckedBackgroundColor"},pressedThumbBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@CheckedBackgroundColor"},disabledThumbBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ChromeMedium"},thumbBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"},hoverThumbBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"},pressedThumbBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"},disabledThumbBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledBorderColor"}},A.SliderCore=SliderCore}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class DateTimeVarInCore extends x.UI.VariableBase{constructor(A,V){super(A,V),this._keyPress=!1,this._boundKeyPressHandler=this._keyPressHandler.bind(this),this._boundKeyDownHandler=this._keyDownHandler.bind(this),this._boundKeyUpHandler=this._keyUpHandler.bind(this),this._boundFocusHandler=this._focusHandler.bind(this),this._boundBlurHandler=this._blurHandler.bind(this),this._boundChange=this._changeHandler.bind(this),this._boundLocalizableInvalidDateErrorTextHandler=this._localizableInvalidDateErrorTextHandler.bind(this),this._boundLocalizableLimitMinErrorTextHandler=this._localizableLimitMinErrorTextHandler.bind(this),this._boundLocalizableLimitMaxErrorTextHandler=this._localizableLimitMaxErrorTextHandler.bind(this),this._boundLocalizableVariableWriteErrorTextHandler=this._localizableVariableWriteErrorTextHandler.bind(this),this._boundLocalizableWatermarkTextHandler=this._localizableWatermarkTextHandler.bind(this),this._localizableInvalidDateErrorTextObject=null,this._localizableInvalidDateErrorText=null,this._localizableLimitMinErrorTextObject=null,this._localizableLimitMinErrorText=null,this._localizableLimitMaxErrorTextObject=null,this._localizableLimitMaxErrorText=null,this._localizableVariableWriteErrorTextObject=null,this._localizableVariableWriteErrorText=null,this._localizableWatermarkTextObject=null,this._localizableWatermarkText=null,this._originalDate=new Date,this.inputEventsEnable=!0,this.addPropertyList(DateTimeVarInCore,DateTimeVarInCore.propertyList),this.defaultConstructor(A,this.inlineOptions,x.UI.DateTimeVarInCore.controlName,x.UI.DateTimeVarInCore.className)}preCheck(){return"INPUT"!==this.element.tagName&&x.Application.ErrorLog.log("VisiWin.UI.DateTimeVarInCore, Control kann nur in einem Input Element platziert werden"),0}createHandler(){this.element.addEventListener(A.KeyboardEventType.keypress,this._boundKeyPressHandler,!1),this.element.addEventListener(A.KeyboardEventType.keydown,this._boundKeyDownHandler,!1),this.element.addEventListener(A.KeyboardEventType.keyup,this._boundKeyUpHandler,!1),this.element.addEventListener(A.FocusEventType.focus,this._boundFocusHandler,!1),this.element.addEventListener(A.FocusEventType.blur,this._boundBlurHandler,!1),this.element.addEventListener("change",this._boundChange,!1)}removeHandler(){this.element.removeEventListener(A.KeyboardEventType.keypress,this._boundKeyPressHandler,!1),this.element.removeEventListener(A.KeyboardEventType.keydown,this._boundKeyDownHandler,!1),this.element.removeEventListener(A.KeyboardEventType.keyup,this._boundKeyUpHandler,!1),this.element.removeEventListener(A.FocusEventType.focus,this._boundFocusHandler,!1),this.element.removeEventListener(A.FocusEventType.blur,this._boundBlurHandler,!1),this.element.removeEventListener("change",this._boundChange,!1)}_localizableInvalidDateErrorTextHandler(x){this.invalidDateErrorText=x.DisplayText}get localizableInvalidDateErrorText(){return this._localizableInvalidDateErrorText}set localizableInvalidDateErrorText(x){if(this._localizableInvalidDateErrorText!==x){const A=this._localizableInvalidDateErrorText;null!==this._localizableInvalidDateErrorText&&this.locService&&this._localizableInvalidDateErrorTextObject&&(this.locService.removeLocalizedText(this._localizableInvalidDateErrorText,this._boundLocalizableInvalidDateErrorTextHandler,this._localizableInvalidDateErrorTextObject),this._localizableInvalidDateErrorTextObject=null),this._localizableInvalidDateErrorText=x,this.locService&&this.locService.addLocalizedTextAsync(this._localizableInvalidDateErrorText,this._boundLocalizableInvalidDateErrorTextHandler).then(x=>{this._localizableInvalidDateErrorTextObject=x}),this._updateLayoutBase("property","localizableInvalidDateErrorText",x,A),this.dispatchNotifyPropertyChanged("property","localizableInvalidDateErrorText",x,A)}}_localizableLimitMinErrorTextHandler(x){this.limitMinErrorText=x.DisplayText}get localizableLimitMinErrorText(){return this._localizableLimitMinErrorText}set localizableLimitMinErrorText(x){if(this._localizableLimitMinErrorText!==x){const A=this._localizableLimitMinErrorText;null!==this._localizableLimitMinErrorText&&this.locService&&this._localizableLimitMinErrorTextObject&&(this.locService.removeLocalizedText(this._localizableLimitMinErrorText,this._boundLocalizableLimitMinErrorTextHandler,this._localizableLimitMinErrorTextObject),this._localizableLimitMinErrorTextObject=null),this._localizableLimitMinErrorText=x,this.locService&&this.locService.addLocalizedTextAsync(this._localizableLimitMinErrorText,this._boundLocalizableLimitMinErrorTextHandler).then(x=>{this._localizableLimitMinErrorTextObject=x}),this._updateLayoutBase("property","localizableLimitMinErrorText",x,A),this.dispatchNotifyPropertyChanged("property","localizableLimitMinErrorText",x,A)}}_localizableLimitMaxErrorTextHandler(x){this.limitMaxErrorText=x.DisplayText}get localizableLimitMaxErrorText(){return this._localizableLimitMaxErrorText}set localizableLimitMaxErrorText(x){if(this._localizableLimitMaxErrorText!==x){const A=this._localizableLimitMaxErrorText;null!==this._localizableLimitMaxErrorText&&this.locService&&this._localizableLimitMaxErrorTextObject&&(this.locService.removeLocalizedText(this._localizableLimitMaxErrorText,this._boundLocalizableLimitMaxErrorTextHandler,this._localizableLimitMaxErrorTextObject),this._localizableLimitMaxErrorTextObject=null),this._localizableLimitMaxErrorText=x,this.locService&&this.locService.addLocalizedTextAsync(this._localizableLimitMaxErrorText,this._boundLocalizableLimitMaxErrorTextHandler).then(x=>{this._localizableLimitMaxErrorTextObject=x}),this._updateLayoutBase("property","localizableLimitMaxErrorText",x,A),this.dispatchNotifyPropertyChanged("property","localizableLimitMaxErrorText",x,A)}}_localizableVariableWriteErrorTextHandler(x){this.variableWriteErrorText=x.DisplayText}get localizableVariableWriteErrorText(){return this._localizableVariableWriteErrorText}set localizableVariableWriteErrorText(x){if(this._localizableVariableWriteErrorText!==x){const A=this._localizableVariableWriteErrorText;null!==this._localizableVariableWriteErrorText&&this.locService&&this._localizableVariableWriteErrorTextObject&&(this.locService.removeLocalizedText(this._localizableVariableWriteErrorText,this._boundLocalizableVariableWriteErrorTextHandler,this._localizableVariableWriteErrorTextObject),this._localizableVariableWriteErrorTextObject=null),this._localizableVariableWriteErrorText=x,this.locService&&this.locService.addLocalizedTextAsync(this._localizableVariableWriteErrorText,this._boundLocalizableVariableWriteErrorTextHandler).then(x=>{this._localizableVariableWriteErrorTextObject=x}),this._updateLayoutBase("property","localizableVariableWriteErrorText",x,A),this.dispatchNotifyPropertyChanged("property","localizableVariableWriteErrorText",x,A)}}_localizableWatermarkTextHandler(x){this.watermarkText=x.DisplayText}get localizableWatermarkText(){return this._localizableWatermarkText}set localizableWatermarkText(x){if(this._localizableWatermarkText!==x){const A=this._localizableWatermarkText;null!==this._localizableWatermarkText&&this.locService&&this._localizableWatermarkTextObject&&(this.locService.removeLocalizedText(this._localizableWatermarkText,this._boundLocalizableWatermarkTextHandler,this._localizableWatermarkTextObject),this._localizableWatermarkTextObject=null),this._localizableWatermarkText=x,this.locService&&this.locService.addLocalizedTextAsync(this._localizableWatermarkText,this._boundLocalizableWatermarkTextHandler).then(x=>{this._localizableWatermarkTextObject=x}),this._updateLayoutBase("property","localizableWatermarkText",x,A),this.dispatchNotifyPropertyChanged("property","localizableWatermarkText",x,A)}}_updateLayout(V){if(("firstUpdate"===V.changeName||"limitMin"===V.changeName||"varLimitMin"===V.changeName||"isLimitCheckEnabled"===V.changeName)&&this.isLimitCheckEnabled){let A="0000-01-01T00:00:00";if("varLimitMin"===V.changeName&&this.useVariableLimits){const A=new Date(V.newValue);x.isDate(A)&&(this.limitMin=A.toISOString())}if("limitMin"===V.changeName&&!this.useVariableLimits){const A=new Date(V.newValue);x.isDate(A)&&(this.limitMin=A.toISOString())}if(this.limitMin){const V=this.limitMin;if(V.lastIndexOf(".")>0){let R=""+V.slice(0,V.lastIndexOf("."));const D=new Date(R);x.isDate(D)&&(A=R)}else{const V=new Date(this.limitMin);x.isDate(V)&&(A=this.limitMin)}}this.element.setAttribute("min",A)}if("firstUpdate"===V.changeName||"limitMax"===V.changeName||"varLimitMax"===V.changeName||"isLimitCheckEnabled"===V.changeName){let R="9999-12-31T00:00:00";if(this.dateTimeMode===A.DateTimeModeNames.DateOnly&&(R="9999-12-31"),this.isLimitCheckEnabled){if("varLimitMax"===V.changeName&&this.useVariableLimits){const A=new Date(V.newValue);x.isDate(A)&&(this.limitMax=A.toISOString())}if("limitMax"===V.changeName&&!this.useVariableLimits){const A=new Date(V.newValue);x.isDate(A)&&(this.limitMax=A.toISOString())}if(this.limitMax){const A=this.limitMax;if(A.lastIndexOf(".")>0){let V=""+A.slice(0,A.lastIndexOf("."));const D=new Date(V);x.isDate(D)&&(R=V)}else{const A=new Date(this.limitMax);x.isDate(A)&&(R=this.limitMax)}}}this.element.setAttribute("max",R)}if("firstUpdate"!==V.changeName&&"watermarkText"!==V.changeName||this.element.setAttribute("placeholder",this.watermarkText),"firstUpdate"===V.changeName||"inputMode"===V.changeName||"dateTimeMode"===V.changeName||"formatDate"===V.changeName||"formatTime"===V.changeName||"userDefinedDate"===V.changeName||"userDefinedTime"===V.changeName){if("Dialog"===this.inputMode||"Inline"===this.inputMode)this.element.setAttribute("type","text");else switch(this.dateTimeMode){case A.DateTimeModeNames.DateOnly:this.element.setAttribute("type","date"),this.formatTime=null;break;case A.DateTimeModeNames.TimeOnly:this.element.setAttribute("type","time"),this.formatDate=null,this._checkIfStepAttributeIsCorrect();break;default:this.element.setAttribute("type","datetime-local"),this._checkIfStepAttributeIsCorrect()}this.element.value=this._formattingDateTime(this.value,this.inputMode,this.dateTimeMode,this.formatDate,this.formatTime,this.userDefinedDate,this.userDefinedTime)}if("firstUpdate"===V.changeName||"spellcheck"===V.changeName)switch(this.spellcheck){case!0:this.element.setAttribute("spellcheck","true");break;default:this.element.setAttribute("spellcheck","false")}if("firstUpdate"===V.changeName||"autocomplete"===V.changeName)switch(this.autocomplete){case"On":this.element.setAttribute("autocomplete","on");break;default:this.element.setAttribute("autocomplete","off")}if("firstUpdate"===V.changeName||"textAlignment"===V.changeName)switch(this.textAlignment){case"Center":this.element.style.textAlign="center";break;case"Right":this.element.style.textAlign="right";break;default:this.element.style.textAlign="left"}"firstUpdate"!==V.changeName&&"textContrast"!==V.changeName||(this.element.style.opacity=this.textContrast.toString()),"isLimitCheckEnabled"!==V.changeName&&"varLimitMin"!==V.changeName&&"varLimitMax"!==V.changeName||this.isLimitCheckEnabled&&this._onVariableValueChanged(this._vwVariable,this.value),"initialized"===V.changeName&&this._checkIfStepAttributeIsCorrect()}_checkIfStepAttributeIsCorrect(){if(this.step)this.element.setAttribute("step",this.step.toString());else if(this.formatTime===A.DateTimeFormatNames.LongTime)this.element.setAttribute("step","1");else if(this.formatTime===A.DateTimeFormatNames.ShortTime){this.element.getAttribute("step")&&this.element.removeAttribute("step")}}_onVariableValueChanged(A,V){if(!this.focused){x.isDate(V)&&(this._originalDate=V);const A=this._formattingDateTime(V,this.inputMode,this.dateTimeMode,this.formatDate,this.formatTime,this.userDefinedDate,this.userDefinedTime);this._validateDate(V)?(this.invalidDate=!0,this.dispatchEvent("errorChanged",{error:"InvalidDateError"}),this.errorText=this.invalidDateErrorText):this.isLimitCheckEnabled&&this._validateLimitMin(A)?(this.limitError=!0,this.dispatchEvent("errorChanged",{error:"LimitMinError"}),this.errorText=this.limitMinErrorText):this.isLimitCheckEnabled&&this._validateLimitMax(A)?(this.limitError=!0,this.dispatchEvent("errorChanged",{error:"LimitMaxError"}),this.errorText=this.limitMaxErrorText):(this.invalidDate=!1,this.limitError=!1,this.dispatchEvent("errorChanged",{error:"NoError"}),this.errorText="",this.element.value=A,this.element.setAttribute("value",A))}}_writeValue(){let V=null;const R=this.element.value;if(this.dateTimeMode===A.DateTimeModeNames.TimeOnly){const x=R.split(":"),A=x[0];this._originalDate.setHours(A);const D=x[1];this._originalDate.setMinutes(D);let N=0,U=0;if(x[2]){const A=x[2].split(".");N=A[0],this._originalDate.setSeconds(N),A[1]&&(U=A[1],this._originalDate.setMilliseconds(U))}V=this._originalDate}if(this.dateTimeMode===A.DateTimeModeNames.DateOnly){const x=R.split("-");this._originalDate.setFullYear(x[0]),this._originalDate.setMonth(Number(x[1])-1),this._originalDate.setDate(x[2]),V=this._originalDate}this.dateTimeMode!==A.DateTimeModeNames.TimeDate&&this.dateTimeMode!==A.DateTimeModeNames.DateTime||(V=new Date(this.element.value),x.isDate(V)&&(this._originalDate=V));const D=this;if(this._validateDate(V))this.invalidDate=!0,this.dispatchEvent("errorChanged",{error:"InvalidDateError"}),this.errorText=this.invalidDateErrorText;else if(this.isLimitCheckEnabled&&this._validateLimitMin(V))this.limitError=!0,this.dispatchEvent("errorChanged",{error:"LimitMinError"}),this.errorText=this.limitMinErrorText;else if(this.isLimitCheckEnabled&&this._validateLimitMax(V))this.limitError=!0,this.dispatchEvent("errorChanged",{error:"LimitMaxError"}),this.errorText=this.limitMaxErrorText;else if(this.value=V,this.invalidDate=!1,this.limitError=!1,this.variableName){if(this._vwVariable.IsRecipeEditing)return void(this._vwVariable._master.RecipeItem.RecipeClass&&(this._vwVariable._master.RecipeItem.RecipeClass.SetValueAsync(this.variableName,V),this.formattedValue=V));x.AppServices.VariableService.setValueAsync(this.variableName,V).then(x=>{D.writeError=!1,D.dispatchEvent("errorChanged",{error:"NoError"}),D.errorText=""},x=>{D.writeError=!0,D.dispatchEvent("errorChanged",{error:"WriteError"}),D.errorText=D.variableWriteErrorText})}else this.writeError=!1,this.dispatchEvent("errorChanged",{error:"NoError"}),this.errorText=""}_keyPressHandler(x){const A=x||window.event;13===(A.which||A.keyCode)&&this.writeOnReturn&&(this._keyPress=!0,this.element.blur(),this._writeValue()),this.preventDefault&&(A.preventDefault?A.preventDefault():A.returnValue=!1),this.stopPropagation&&(A.stopPropagation?A.stopPropagation():A.cancelBubble=!0)}_keyDownHandler(x){}_keyUpHandler(x){if(x.target&&x.target.value){let A=x.target.value;if(A){let x=A.split("-");x[0]&&x[0].length>4&&(x[0]=x[0].substring(0,4),A=x.join("-"),this.element.value=A)}}const A=x||window.event;27===(A.which||A.keyCode)&&this.abortOnEsc&&(this.element.value=this._formattingDateTime(this.value,this.inputMode,this.dateTimeMode,this.formatDate,this.formatTime,this.userDefinedDate,this.userDefinedTime)),this.preventDefault&&(A.preventDefault?A.preventDefault():A.returnValue=!1),this.stopPropagation&&(A.stopPropagation?A.stopPropagation():A.cancelBubble=!0)}_focusHandler(x){this.disabled||(this.selectOnFocus&&this._setSelect(0,9999,this.inputMode),this.focused=!0,this.invalidDate=!1,this.limitError=!1,this.writeError=!1,this.dispatchEvent("focusedChanged",{focused:!0}),this.dispatchEvent("errorChanged",{error:"NoError"}),this.errorText="")}_changeHandler(A){x.Utilities.isSafari()&&this._blurHandler(A)}_blurHandler(x){if(!this.disabled){if(this._keyPress)this._keyPress=!1;else switch(this.lostKeyboardFocusBehaviour){case"RestoreValue":this.element.value=this._formattingDateTime(this.value,this.inputMode,this.dateTimeMode,this.formatDate,this.formatTime,this.userDefinedDate,this.userDefinedTime);break;case"WriteInput":this._writeValue()}this.focused=!1,this.dispatchEvent("focusedChanged",{focused:!1})}}_formattingDateTime(V,R,D,N,U,B,F){const W=new Date(V);let H="",z="",G=W.getHours().toString();1===G.length&&(G="0"+G);let j=W.getMinutes().toString();1===j.length&&(j="0"+j);let q=W.getSeconds().toString();1===q.length&&(q="0"+q);const Q=W.getMilliseconds().toString();switch(D){case A.DateTimeModeNames.DateOnly:return H=new Intl.DateTimeFormat("fr-CA",{year:"numeric",month:"2-digit",day:"2-digit"}).format(W),H;case A.DateTimeModeNames.TimeOnly:return H=`${G}:${j}:${q}`,U===A.DateTimeFormatNames.LongTime?H=`${G}:${j}:${q}`:U===A.DateTimeFormatNames.ShortTime&&(H=`${G}:${j}`),this.step&&(H=`${G}:${j}:${q}.${Q}`),H;case A.DateTimeModeNames.DateTime:return z=new Intl.DateTimeFormat("fr-CA",{year:"numeric",month:"2-digit",day:"2-digit"}).format(W),H=`${z}T${G}:${j}:${q}`,U===A.DateTimeFormatNames.LongTime?H=`${z}T${G}:${j}:${q}`:U===A.DateTimeFormatNames.ShortTime&&(H=`${z}T${G}:${j}`),this.step&&(H=`${z}T${G}:${j}:${q}.${Q}`),H;default:return x.isDate(W)?(z=new Intl.DateTimeFormat("fr-CA",{year:"numeric",month:"2-digit",day:"2-digit"}).format(W),H=z+"T"+G+":"+j,H):(new Date).toISOString().substring(0,16)}}_validateDate(x){return x=new Date(x).valueOf(),!!isNaN(x)}_validateLimitMin(x){let A=this.useVariableLimits&&this.varLimitMin?this.varLimitMin:this.limitMin;return x=new Date(x).valueOf(),A=new Date(A).valueOf(),!isNaN(x)&&!isNaN(A)&&x<A}_validateLimitMax(x){let A=this.useVariableLimits&&this.varLimitMax?this.varLimitMax:this.limitMax;return x=new Date(x).valueOf(),A=new Date(A).valueOf(),!isNaN(x)&&!isNaN(A)&&x>A}_setSelect(x,A,V){"Dialog"!==V&&"Inline"!==V||this.element.setSelectionRange(x,A)}dispose(){return null!==this._localizableInvalidDateErrorText&&this.locService&&this._localizableInvalidDateErrorTextObject&&(this.locService.removeLocalizedText(this._localizableInvalidDateErrorText,this._boundLocalizableInvalidDateErrorTextHandler,this._localizableInvalidDateErrorTextObject),this._localizableInvalidDateErrorTextObject=null),null!==this._localizableLimitMinErrorText&&this.locService&&this._localizableLimitMinErrorTextObject&&(this.locService.removeLocalizedText(this._localizableLimitMinErrorText,this._boundLocalizableLimitMinErrorTextHandler,this._localizableLimitMinErrorTextObject),this._localizableLimitMinErrorTextObject=null),null!==this._localizableLimitMaxErrorText&&this.locService&&this._localizableLimitMaxErrorTextObject&&(this.locService.removeLocalizedText(this._localizableLimitMaxErrorText,this._boundLocalizableLimitMaxErrorTextHandler,this._localizableLimitMaxErrorTextObject),this._localizableLimitMaxErrorTextObject=null),null!==this._localizableVariableWriteErrorText&&this.locService&&this._localizableVariableWriteErrorTextObject&&(this.locService.removeLocalizedText(this._localizableVariableWriteErrorText,this._boundLocalizableVariableWriteErrorTextHandler,this._localizableVariableWriteErrorTextObject),this._localizableVariableWriteErrorTextObject=null),null!==this._localizableWatermarkText&&this.locService&&this._localizableWatermarkTextObject&&(this.locService.removeLocalizedText(this._localizableWatermarkText,this._boundLocalizableWatermarkTextHandler,this._localizableWatermarkTextObject),this._localizableWatermarkTextObject=null),super.dispose()}}DateTimeVarInCore.namespace="VisiWin.UI",DateTimeVarInCore.controlName="DateTimeVarInCore",DateTimeVarInCore.className="vw-datetimevarincore",DateTimeVarInCore.propertyList={focusedChanged:{propertyType:"event",group:"event"},errorChanged:{propertyType:"event",group:"event"},invalidDate:{propertyType:"member",type:"boolean",defaultValue:!1},limitError:{propertyType:"member",type:"boolean",defaultValue:!1},writeError:{propertyType:"member",type:"boolean",defaultValue:!1},limitMin:{propertyType:"member",type:"string"},limitMax:{propertyType:"member",type:"string"},isLimitCheckEnabled:{propertyType:"member",type:"boolean",defaultValue:!1},dateTimeMode:{propertyType:"member",type:"string",defaultValue:A.DateTimeModeNames.DateTime},formatDate:{propertyType:"member",type:"string",defaultValue:A.DateTimeFormatNames.LongDate},formatTime:{propertyType:"member",type:"string",defaultValue:A.DateTimeFormatNames.LongTime},userDefinedDate:{propertyType:"member",type:"string"},userDefinedTime:{propertyType:"member",type:"string"},step:{propertyType:"member",type:"number"},errorText:{propertyType:"member",type:"string",defaultValue:null},invalidDateErrorText:{propertyType:"member",type:"string"},localizableInvalidDateErrorText:{propertyType:"custom",type:"string"},limitMinErrorText:{propertyType:"member",type:"string"},localizableLimitMinErrorText:{propertyType:"custom",type:"string"},limitMaxErrorText:{propertyType:"member",type:"string"},localizableLimitMaxErrorText:{propertyType:"custom",type:"string"},variableWriteErrorText:{propertyType:"member",type:"string"},localizableVariableWriteErrorText:{propertyType:"custom",type:"string"},watermarkText:{propertyType:"member",type:"string"},localizableWatermarkText:{propertyType:"custom",type:"string"},preventDefault:{propertyType:"member",type:"boolean",defaultValue:!1},stopPropagation:{propertyType:"member",type:"boolean",defaultValue:!0},abortOnEsc:{propertyType:"member",type:"boolean",defaultValue:!0},writeOnReturn:{propertyType:"member",type:"boolean",defaultValue:!0},selectOnFocus:{propertyType:"member",type:"boolean",defaultValue:!1},lostKeyboardFocusBehaviour:{propertyType:"member",type:"enum",defaultValue:"WriteInput"},inputMode:{propertyType:"member",type:"enum",defaultValue:"Native"},spellcheck:{propertyType:"member",type:"boolean",defaultValue:!1},autocomplete:{propertyType:"member",type:"string",defaultValue:"Off"},textAlignment:{propertyType:"member",type:"string",defaultValue:"Left"},textContrast:{propertyType:"member",type:"number",defaultValue:1}},A.DateTimeVarInCore=DateTimeVarInCore}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class SwitchCore extends x.UI.VariableBase{constructor(A,V){super(A,V),this.ripple=null,this._trackElement=null,this._thumbElement=null,this._thumbTextElement=null,this._dragXStart=0,this._dragX=0,this._boundKeyDownHandler=this._keyDownHandler.bind(this),this._boundPointerDownHandler=this._pointerDownHandler.bind(this),this._boundPointerMoveHandler=this._pointerMoveHandler.bind(this),this._boundPointerUpHandler=this._pointerUpHandler.bind(this),this._boundLocalizableTextOnOffHandler=this._localizableTextOnOffHandler.bind(this),this._boundLocalizableTextOnHandler=this._localizableTextOnHandler.bind(this),this._boundLocalizableTextOffHandler=this._localizableTextOffHandler.bind(this),this._boundLocalizableThumbTextHandler=this._localizableThumbTextHandler.bind(this),this._boundLocalizableThumbTextOnHandler=this._localizableThumbTextOnHandler.bind(this),this._boundLocalizableThumbTextOffHandler=this._localizableThumbTextOffHandler.bind(this),this._textOnOff=null,this._localizableTextOnOffObject=null,this._localizableTextOnOff=null,this._textOn=null,this._localizableTextOnObject=null,this._localizableTextOn=null,this._textOff=null,this._localizableTextOffObject=null,this._localizableTextOff=null,this._localizableThumbTextObject=null,this._localizableThumbText=null,this._thumbTextOn=null,this._localizableThumbTextOnObject=null,this._localizableThumbTextOn=null,this._thumbTextOff=null,this._localizableThumbTextOffObject=null,this._localizableThumbTextOff=null,this._touchElement=null,this._pressed=null,this._dragging=null,this._checked=null,this.inputEventsEnable=!1,this.addPropertyList(SwitchCore,SwitchCore.propertyList),this.bitNumber=0,this.pressed=!1,this.dragging=!1,this.checked=!1,this.defaultConstructor(A,this.inlineOptions,x.UI.SwitchCore.controlName,x.UI.SwitchCore.className)}createTemplate(){if(x.Utilities.isInDesignMode())return this.element.innerHTML=['<div class="vw-switchcore__track">','<div class="vw-switchcore__thumb">','<div class="switchcore__thumbtext" data-win-control="VisiWin.UI.TextBlock"></div>',"</div>","</div>"].join("\n"),this._trackElement=this.element.firstElementChild,this._thumbElement=this._trackElement.firstElementChild,this._thumbTextElement=this._thumbElement.firstElementChild,this.processElements([this._thumbTextElement]);var A=null!=this.inlineOptions.showThumbText?this.inlineOptions.showThumbText:this.getStyleProperty("showThumbText")?this.getStyleProperty("showThumbText"):x.UI.SwitchCore.propertyList.showThumbText.defaultValue,V='<div class="vw-switchcore__track">';return V+=A?['<div class="vw-switchcore__thumb">','<div class="switchcore__thumbtext" data-win-control="VisiWin.UI.TextBlock"></div>',"</div>"].join("\n"):'<div class="vw-switchcore__thumb"></div>',V+="</div>",this.element.innerHTML=V,this._trackElement=this.element.firstElementChild,this._thumbElement=this._trackElement.firstElementChild,A&&(this._thumbTextElement=this._thumbElement.firstElementChild),this.processElements([this._thumbTextElement])}createHandler(){this.element.addEventListener(A.KeyboardEventType.keydown,this._boundKeyDownHandler),x.Utilities.addEventListener(this.touchElement?this.touchElement:this.element,A.PointerEventType.pointerdown,this._boundPointerDownHandler)}removeHandler(){this.element.removeEventListener(A.KeyboardEventType.keydown,this._boundKeyDownHandler),x.Utilities.removeEventListener(this.touchElement?this.touchElement:this.element,A.PointerEventType.pointerdown,this._boundPointerDownHandler),x.Utilities.removeGlobalEventListener(A.PointerEventType.pointermove,this._boundPointerMoveHandler,!0),x.Utilities.removeGlobalEventListener(A.PointerEventType.pointerup,this._boundPointerUpHandler,!0)}get textOnOff(){return this._textOnOff}set textOnOff(x){if(this._textOnOff!=x){var A=this._textOnOff;this._textOnOff=x,this._updateLayoutBase("property","textOnOff",x,A),this.dispatchNotifyPropertyChanged("property","textOnOff",x,A)}}_localizableTextOnOffHandler(x){this.textOnOff=x.DisplayText}get localizableTextOnOff(){return this._localizableTextOnOff}set localizableTextOnOff(x){if(this._localizableTextOnOff!=x){var A=this._localizableTextOnOff;null!=this._localizableTextOnOff&&this.locService&&this._localizableTextOnOffObject&&(this.locService.removeLocalizedText(this.localizableTextOnOff,this._boundLocalizableTextOnOffHandler,this._localizableTextOnOffObject),this._localizableTextOnOffObject=null),this._localizableTextOnOff=x,this.locService&&this.locService.addLocalizedTextAsync(this.localizableTextOnOff,this._boundLocalizableTextOnOffHandler).then(x=>{this._localizableTextOnOffObject=x}),this._updateLayoutBase("property","localizableTextOnOff",x,A),this.dispatchNotifyPropertyChanged("property","localizableTextOnOff",x,A)}}get textOn(){return this._textOn}set textOn(x){if(this._textOn!=x){var A=this._textOn;this._textOn=x,this.checked&&(this._textOn||this._textOff)&&(this.textOnOff=x||" "),this._updateLayoutBase("property","textOn",x,A),this.dispatchNotifyPropertyChanged("property","textOn",x,A)}}_localizableTextOnHandler(x){this.textOn=x.DisplayText}get localizableTextOn(){return this._localizableTextOn}set localizableTextOn(x){if(this._localizableTextOn!=x){var A=this._localizableTextOn;null!=this._localizableTextOn&&this.locService&&this._localizableTextOnObject&&(this.locService.removeLocalizedText(this.localizableTextOn,this._boundLocalizableTextOnHandler,this._localizableTextOnObject),this._localizableTextOnObject=null),this._localizableTextOn=x,this.locService&&this.locService.addLocalizedTextAsync(this.localizableTextOn,this._boundLocalizableTextOnHandler).then(x=>{this._localizableTextOnObject=x}),this._updateLayoutBase("property","localizableTextOn",x,A),this.dispatchNotifyPropertyChanged("property","localizableTextOn",x,A)}}get textOff(){return this._textOff}set textOff(x){if(this._textOff!=x){var A=this._textOff;this._textOff=x,this.checked||!this._textOn&&!this._textOff||(this._textOff?this.textOnOff=this._textOff:this.textOnOff=" "),this._updateLayoutBase("property","textOff",x,A),this.dispatchNotifyPropertyChanged("property","textOff",x,A)}}_localizableTextOffHandler(x){this.textOff=x.DisplayText}get localizableTextOff(){return this._localizableTextOff}set localizableTextOff(x){if(this._localizableTextOff!=x){var A=this._localizableTextOff;null!=this._localizableTextOff&&this.locService&&this._localizableTextOffObject&&(this.locService.removeLocalizedText(this.localizableTextOff,this._boundLocalizableTextOffHandler,this._localizableTextOffObject),this._localizableTextOffObject=null),this._localizableTextOff=x,this.locService&&this.locService.addLocalizedTextAsync(this.localizableTextOff,this._boundLocalizableTextOffHandler).then(x=>{this._localizableTextOffObject=x}),this._updateLayoutBase("property","localizableTextOff",x,A),this.dispatchNotifyPropertyChanged("property","localizableTextOff",x,A)}}_localizableThumbTextHandler(x){this.thumbText=x.DisplayText}get localizableThumbText(){return this._localizableThumbText}set localizableThumbText(x){if(this._localizableThumbText!=x){var A=this._localizableThumbText;null!=this._localizableThumbText&&this.locService&&this._localizableThumbTextObject&&(this.locService.removeLocalizedText(this.localizableThumbText,this._boundLocalizableThumbTextHandler,this._localizableThumbTextObject),this._localizableThumbTextObject=null),this._localizableThumbText=x,this.locService&&this.locService.addLocalizedTextAsync(this.localizableThumbText,this._boundLocalizableThumbTextHandler).then(x=>{this._localizableThumbTextObject=x}),this._updateLayoutBase("property","localizableThumbText",x,A),this.dispatchNotifyPropertyChanged("property","localizableThumbText",x,A)}}get thumbTextOn(){return this._thumbTextOn}set thumbTextOn(x){if(this._thumbTextOn!=x){var A=this._thumbTextOn;this._thumbTextOn=x,this.checked&&(this._thumbTextOn||this._thumbTextOff)&&(this.thumbText=x||" "),this._updateLayoutBase("property","thumbTextOn",x,A),this.dispatchNotifyPropertyChanged("property","thumbTextOn",x,A)}}_localizableThumbTextOnHandler(x){this.thumbTextOn=x.DisplayText}get localizableThumbTextOn(){return this._localizableThumbTextOn}set localizableThumbTextOn(x){if(this._localizableThumbTextOn!=x){var A=this._localizableThumbTextOn;null!=this._localizableThumbTextOn&&this.locService&&this._localizableThumbTextOnObject&&(this.locService.removeLocalizedText(this.localizableThumbTextOn,this._boundLocalizableThumbTextOnHandler,this._localizableThumbTextOnObject),this._localizableThumbTextOnObject=null),this._localizableThumbTextOn=x,this.locService&&this.locService.addLocalizedTextAsync(this.localizableThumbTextOn,this._boundLocalizableThumbTextOnHandler).then(x=>{this._localizableThumbTextOnObject=x}),this._updateLayoutBase("property","localizableThumbTextOn",x,A),this.dispatchNotifyPropertyChanged("property","localizableThumbTextOn",x,A)}}get thumbTextOff(){return this._thumbTextOff}set thumbTextOff(x){if(this._thumbTextOff!=x){var A=this._thumbTextOff;this._thumbTextOff=x,this.checked||!this._thumbTextOn&&!this._thumbTextOff||(this._thumbTextOff?this.thumbText=this._thumbTextOff:this.thumbText=" "),this._updateLayoutBase("property","thumbTextOff",x,A),this.dispatchNotifyPropertyChanged("property","thumbTextOff",x,A)}}_localizableThumbTextOffHandler(x){this.thumbTextOff=x.DisplayText}get localizableThumbTextOff(){return this._localizableThumbTextOff}set localizableThumbTextOff(x){if(this._localizableThumbTextOff!=x){var A=this._localizableThumbTextOff;null!=this._localizableThumbTextOff&&this.locService&&this._localizableThumbTextOffObject&&(this.locService.removeLocalizedText(this.localizableThumbTextOff,this._boundLocalizableThumbTextOffHandler,this._localizableThumbTextOffObject),this._localizableThumbTextOffObject=null),this._localizableThumbTextOff=x,this.locService&&this.locService.addLocalizedTextAsync(this.localizableThumbTextOff,this._boundLocalizableThumbTextOffHandler).then(x=>{this._localizableThumbTextOffObject=x}),this._updateLayoutBase("property","localizableThumbTextOff",x,A),this.dispatchNotifyPropertyChanged("property","localizableThumbTextOff",x,A)}}get touchElement(){return this._touchElement}set touchElement(V){if(this._touchElement!=V){var R=this._touchElement;this._touchElement=V,x.Utilities.removeEventListener(this.element,A.PointerEventType.pointerdown,this._boundPointerDownHandler),R&&x.Utilities.removeEventListener(R,A.PointerEventType.pointerdown,this._boundPointerDownHandler),x.Utilities.addEventListener(this._touchElement,A.PointerEventType.pointerdown,this._boundPointerDownHandler),this._updateLayoutBase("property","touchElement",V,R),this.dispatchNotifyPropertyChanged("property","touchElement",V,R)}}get pressed(){return this._pressed}set pressed(A){if(this._pressed!=A){var V=this._pressed;this._pressed=A,this._pressed?x.Utilities.addClass(this.element,x.UI.SwitchCore.classPressed):x.Utilities.removeClass(this.element,x.UI.SwitchCore.classPressed),this._updateColorsBase("state","pressed",A,V),this.dispatchNotifyPropertyChanged("state","pressed",A,V,"pressedChanged")}}get dragging(){return this._dragging}set dragging(A){if(this._dragging!=A){var V=this._dragging;this._dragging=A,this._dragging?x.Utilities.addClass(this.element,x.UI.SwitchCore.classDragging):x.Utilities.removeClass(this.element,x.UI.SwitchCore.classDragging),this.dispatchNotifyPropertyChanged("state","dragging",A,V,"draggingChanged")}}get checked(){return this._checked}set checked(A){if(this._checked!=A){var V=this._checked;this._checked=A,this._checked?(x.Utilities.addClass(this.element,x.UI.SwitchCore.classChecked),(this._textOn||this._textOff)&&(this.textOn?this.textOnOff=this.textOn:this.textOnOff=" "),(this._thumbTextOn||this._thumbTextOff)&&(this.thumbTextOn?this.thumbText=this.thumbTextOn:this.thumbText=" ")):(x.Utilities.removeClass(this.element,x.UI.SwitchCore.classChecked),(this._textOn||this._textOff)&&(this.textOff?this.textOnOff=this.textOff:this.textOnOff=" "),(this._thumbTextOn||this._thumbTextOff)&&(this.thumbTextOff?this.thumbText=this.thumbTextOff:this.thumbText=" "));var R={};R.sender=this,R.tag=this.tag,R.value=A,R.senderName="checked",this.writeVariable(R),R=null,this._updateColorsBase("state","checked",A,V),this.dispatchNotifyPropertyChanged("state","checked",A,V,"checkedChanged")}this._updateSwitchLayout()}set checkedWithoutWrite(A){if(this._checked!=A){var V=this._checked;this._checked=A,this._checked?(x.Utilities.addClass(this.element,x.UI.SwitchCore.classChecked),(this._textOn||this._textOff)&&(this.textOn?this.textOnOff=this.textOn:this.textOnOff=" "),(this._thumbTextOn||this._thumbTextOff)&&(this.thumbTextOn?this.thumbText=this.thumbTextOn:this.thumbText=" ")):(x.Utilities.removeClass(this.element,x.UI.SwitchCore.classChecked),(this._textOn||this._textOff)&&(this.textOff?this.textOnOff=this.textOff:this.textOnOff=" "),(this._thumbTextOn||this._thumbTextOff)&&(this.thumbTextOff?this.thumbText=this.thumbTextOff:this.thumbText=" ")),this._updateColorsBase("state","checked",A,V),this.dispatchNotifyPropertyChanged("state","checked",A,V,"checkedChanged")}this._updateSwitchLayout()}_updateColors(x){this.disabled?(this._thumbTextElement&&this._thumbTextElement.winControl&&this.setColor("disabledForegroundColor","foregroundColor",null,"_thumbTextElement"),this.checked?(this.setColor("disabledCheckedTrackBackgroundColor","backgroundColor","_trackElement"),this.setColor("disabledCheckedTrackBorderColor","borderColor","_trackElement"),this.setColor("disabledCheckedThumbBackgroundColor","backgroundColor","_thumbElement"),this.setColor("disabledCheckedThumbBorderColor","borderColor","_thumbElement")):(this.setColor("disabledTrackBackgroundColor","backgroundColor","_trackElement"),this.setColor("disabledTrackBorderColor","borderColor","_trackElement"),this.setColor("disabledThumbBackgroundColor","backgroundColor","_thumbElement"),this.setColor("disabledThumbBorderColor","borderColor","_thumbElement"))):this.checked?(this._thumbTextElement&&this._thumbTextElement.winControl&&this.setColor("checkedThumbTextForegroundColor","foregroundColor",null,"_thumbTextElement"),this.pressed?(this._thumbTextElement&&this._thumbTextElement.winControl&&this.setColor("checkedPressedThumbTextForegroundColor","foregroundColor",null,"_thumbTextElement"),this.setColor("checkedPressedTrackBackgroundColor","backgroundColor","_trackElement"),this.setColor("checkedPressedTrackBorderColor","borderColor","_trackElement"),this.setColor("checkedPressedThumbBackgroundColor","backgroundColor","_thumbElement"),this.setColor("checkedPressedThumbBorderColor","borderColor","_thumbElement")):this.hover?(this.setColor("checkedHoverTrackBackgroundColor","backgroundColor","_trackElement"),this.setColor("checkedHoverTrackBorderColor","borderColor","_trackElement"),this.setColor("checkedHoverThumbBackgroundColor","backgroundColor","_thumbElement"),this.setColor("checkedHoverThumbBorderColor","borderColor","_thumbElement"),this.setColor("checkedHoverThumbTextForegroundColor","foregroundColor","_thumbTextElement")):(this.setColor("checkedTrackBackgroundColor","backgroundColor","_trackElement"),this.setColor("checkedTrackBorderColor","borderColor","_trackElement"),this.setColor("checkedThumbBackgroundColor","backgroundColor","_thumbElement"),this.setColor("checkedThumbBorderColor","borderColor","_thumbElement"),this.setColor("checkedThumbTextForegroundColor","foregroundColor","_thumbTextElement"))):(this._thumbTextElement&&this._thumbTextElement.winControl&&this.setColor("thumbTextForegroundColor","foregroundColor",null,"_thumbTextElement"),this.pressed?(this._thumbTextElement&&this._thumbTextElement.winControl&&this.setColor("pressedThumbTextForegroundColor","foregroundColor",null,"_thumbTextElement"),this.setColor("pressedTrackBackgroundColor","backgroundColor","_trackElement"),this.setColor("pressedTrackBorderColor","borderColor","_trackElement"),this.setColor("pressedThumbBackgroundColor","backgroundColor","_thumbElement"),this.setColor("pressedThumbBorderColor","borderColor","_thumbElement")):this.hover?(this.setColor("hoverTrackBackgroundColor","backgroundColor","_trackElement"),this.setColor("hoverTrackBorderColor","borderColor","_trackElement"),this.setColor("hoverThumbBackgroundColor","backgroundColor","_thumbElement"),this.setColor("hoverThumbTextForegroundColor","foregroundColor","_thumbTextElement"),this.setColor("hoverThumbBorderColor","borderColor","_thumbElement")):(this.setColor("trackBackgroundColor","backgroundColor","_trackElement"),this.setColor("trackBorderColor","borderColor","_trackElement"),this.setColor("thumbBackgroundColor","backgroundColor","_thumbElement"),this.setColor("thumbBorderColor","borderColor","_thumbElement"),this.setColor("thumbTextForegroundColor","foregroundColor","_thumbTextElement")))}_updateLayout(x){if("updateLayout"==x.changeName&&this.touchRippleEnabled){var V=this[this.rippleElement]||this.touchElement||this.element,R={target:this[this.rippleTarget]||null,targetAsParent:this.rippleTargetAsParent,radius:this.rippleRadius,speedAmount:this.rippleSpeedAmount,centered:this.rippleCentered,unbounded:this.rippleUnbounded,persistent:this.ripplePersistent,fadeInDuration:this.rippleFadeInDuration,fadeOutDuration:this.rippleFadeOutDuration,color:this.getColor("rippleColor")};this.ripple=new A.TouchRipple(V,R)}"updateLayout"!=x.changeName&&"trackBorderWidth"!=x.changeName&&"trackWidth"!=x.changeName&&"trackHeight"!=x.changeName&&"trackMargin"!=x.changeName&&"trackPadding"!=x.changeName&&"thumbBorderWidth"!=x.changeName&&"thumbWidth"!=x.changeName&&"thumbHeight"!=x.changeName&&"thumbMargin"!=x.changeName&&"trackPadding"!=x.changeName||this._updateSwitchLayout(),"visibility"!=x.changeName&&"disabled"!=x.changeName&&"authorized"!=x.changeName||this._updateSwitchLayout()}_keyDownHandler(A){this.disabled||(A.keyCode===x.Utilities.Key.space&&(A.preventDefault(),this.checked=!this.checked),A.keyCode!==x.Utilities.Key.rightArrow&&A.keyCode!==x.Utilities.Key.upArrow||(A.preventDefault(),this.checked=!0),A.keyCode!==x.Utilities.Key.leftArrow&&A.keyCode!==x.Utilities.Key.downArrow||(A.preventDefault(),this.checked=!1))}_pointerDownHandler(V){!this.disabled&&this._trackElement&&this._thumbElement&&!this.pressed&&(V.preventDefault(),this.pressed=!0,this.dragging=!1,this._dragXStart=V.pageX-this._trackElement.getBoundingClientRect().left,this._dragX=this._dragXStart,x.Utilities.addGlobalEventListener(A.PointerEventType.pointermove,this._boundPointerMoveHandler,!0),x.Utilities.addGlobalEventListener(A.PointerEventType.pointerup,this._boundPointerUpHandler,!0))}_pointerMoveHandler(x){if(!this.disabled&&this._trackElement&&this._thumbElement&&this.pressed){x.preventDefault();var A=this._trackElement.getBoundingClientRect(),V=x.pageX-A.left;if(!(V>A.width)&&(!this.dragging&&Math.abs(V-this._dragXStart)>3&&(this.dragging=!0),this.dragging)){var R=this._thumbElement.getBoundingClientRect(),D=window.getComputedStyle(this._trackElement,null),N=window.getComputedStyle(this._thumbElement,null),U=parseFloat(D.getPropertyValue("border-left-width")),B=parseFloat(N.getPropertyValue("margin-left")),F=parseFloat(N.getPropertyValue("margin-right")),W=-U,H=W+A.width-B-R.width-F;this._dragX=Math.min(H,V-R.width/2),this._dragX=Math.max(W,this._dragX),this._thumbElement.style.left=this._dragX+"px"}}}_pointerUpHandler(V){if(!this.disabled&&this._trackElement&&this._thumbElement&&this.pressed){if(V.preventDefault(),this.dragging){this.dragging=!1;var R=this._trackElement.getBoundingClientRect(),D=this._thumbElement.getBoundingClientRect(),N="rtl"===window.getComputedStyle(this.element).direction,U=R.width-D.width;this.checked=N?this._dragX<U/2:this._dragX>=U/2}else this.checked=!this.checked;this.pressed=!1,x.Utilities.removeGlobalEventListener(A.PointerEventType.pointermove,this._boundPointerMoveHandler,!0),x.Utilities.removeGlobalEventListener(A.PointerEventType.pointerup,this._boundPointerUpHandler,!0)}}_updateSwitchLayout(){if(this._trackElement&&this._thumbElement){var x=this._trackElement.getBoundingClientRect(),A=this._thumbElement.getBoundingClientRect(),V=window.getComputedStyle(this._trackElement,null),R=window.getComputedStyle(this._thumbElement,null),D=parseFloat(V.getPropertyValue("border-left-width")),N=parseFloat(V.getPropertyValue("border-top-width")),U=parseFloat(R.getPropertyValue("margin-left")),B=parseFloat(R.getPropertyValue("margin-right")),F=parseFloat(R.getPropertyValue("margin-bottom")),W=-D,H=W+x.width-U-A.width-B,z=-N+(x.height-A.height)/2-F;this._thumbElement.style.top=z+"px",this.checked?this._thumbElement.style.left=H+"px":this._thumbElement.style.left=W+"px"}}attach(){return setTimeout(()=>{this._updateSwitchLayout()},100),super.attach()}dispose(){return null!=this._localizableTextOnOff&&this.locService&&this._localizableTextOnOffObject&&(this.locService.removeLocalizedText(this.localizableText,this._boundLocalizableTextOnOffHandler,this._localizableTextOnOffObject),this._localizableTextOnOffObject=null),null!=this._localizableTextOn&&this.locService&&this._localizableTextOnObject&&(this.locService.removeLocalizedText(this.localizableTextOn,this._boundLocalizableTextOnHandler,this._localizableTextOnObject),this._localizableTextOnObject=null),null!=this._localizableTextOff&&this.locService&&this._localizableTextOffObject&&(this.locService.removeLocalizedText(this.localizableTextOff,this._boundLocalizableTextOffHandler,this._localizableTextOffObject),this._localizableTextOffObject=null),null!=this._localizableThumbText&&this.locService&&this._localizableThumbTextObject&&(this.locService.removeLocalizedText(this.localizableThumbText,this._boundLocalizableThumbTextHandler,this._localizableThumbTextObject),this._localizableThumbTextObject=null),null!=this._localizableThumbTextOn&&this.locService&&this._localizableThumbTextOnObject&&(this.locService.removeLocalizedText(this.localizableThumbTextOn,this._boundLocalizableThumbTextOnHandler,this._localizableThumbTextOnObject),this._localizableThumbTextOnObject=null),null!=this._localizableThumbTextOff&&this.locService&&this._localizableThumbTextOffObject&&(this.locService.removeLocalizedText(this.localizableThumbTextOff,this._boundLocalizableThumbTextOffHandler,this._localizableThumbTextOffObject),this._localizableThumbTextOffObject=null),this.ripple&&this.ripple.dispose(),super.dispose()}}SwitchCore.classPressed="pressed",SwitchCore.classDragging="dragging",SwitchCore.classChecked="checked",SwitchCore.namespace="VisiWin.UI",SwitchCore.controlName="SwitchCore",SwitchCore.className="vw-switchcore",SwitchCore.propertyList={touchElement:{propertyType:"custom",type:"string"},pressedChanged:{propertyType:"event",group:"Event",triggerDataName:"pressed"},draggingChanged:{propertyType:"event",group:"Event",triggerDataName:"dragging"},checkedChanged:{propertyType:"event",group:"Event",triggerDataName:"checked"},pressed:{propertyType:"custom",type:"boolean"},dragging:{propertyType:"custom",type:"boolean"},checked:{propertyType:"custom",type:"boolean"},textOnOff:{propertyType:"custom",type:"string"},localizableTextOnOff:{propertyType:"custom",type:"string"},textOn:{propertyType:"custom",type:"string"},localizableTextOn:{propertyType:"custom",type:"string"},textOff:{propertyType:"custom",type:"string"},localizableTextOff:{propertyType:"custom",type:"string"},touchRippleEnabled:{propertyType:"member",type:"boolean",defaultValue:!1},rippleElement:{propertyType:"member",type:"string",defaultValue:null},rippleTarget:{propertyType:"member",type:"string",defaultValue:"_thumbElement"},rippleTargetAsParent:{propertyType:"member",type:"boolean",defaultValue:!0},rippleRadius:{propertyType:"member",type:"number",defaultValue:null},rippleSpeedAmount:{propertyType:"member",type:"number",defaultValue:1.25},rippleCentered:{propertyType:"member",type:"boolean",defaultValue:!1},rippleUnbounded:{propertyType:"member",type:"boolean",defaultValue:!1},ripplePersistent:{propertyType:"member",type:"boolean",defaultValue:!1},rippleFadeInDuration:{propertyType:"member",type:"number",defaultValue:450},rippleFadeOutDuration:{propertyType:"member",type:"number",defaultValue:400},trackBorderWidth:{propertyType:"style",type:"string",element:"_trackElement",style:"borderWidth"},trackBorderStyle:{propertyType:"style",type:"enum",element:"_trackElement",style:"borderStyle"},trackBorderRadius:{propertyType:"style",type:"string",element:"_trackElement",style:"borderRadius"},trackWidth:{propertyType:"style",type:"string",element:"_trackElement",style:"width"},trackHeight:{propertyType:"style",type:"string",element:"_trackElement",style:"height"},trackMargin:{propertyType:"style",type:"string",element:"_trackElement",style:"margin"},trackPadding:{propertyType:"style",type:"string",element:"_trackElement",style:"padding"},trackTransition:{propertyType:"style",type:"string",element:"_trackElement",style:"transition"},trackShadow:{propertyType:"style",type:"string",element:"_trackElement",style:"boxShadow",resourceValue:["getShadow"]},thumbBorderWidth:{propertyType:"style",type:"string",element:"_thumbElement",style:"borderWidth"},thumbBorderStyle:{propertyType:"style",type:"enum",element:"_thumbElement",style:"borderStyle"},thumbBorderRadius:{propertyType:"style",type:"string",element:"_thumbElement",style:"borderRadius"},thumbWidth:{propertyType:"style",type:"string",element:"_thumbElement",style:"width"},thumbHeight:{propertyType:"style",type:"string",element:"_thumbElement",style:"height"},thumbMargin:{propertyType:"style",type:"string",element:"_thumbElement",style:"margin"},thumbPadding:{propertyType:"style",type:"string",element:"_thumbElement",style:"padding"},thumbTransition:{propertyType:"style",type:"string",element:"_thumbElement",style:"transition"},thumbShadow:{propertyType:"style",type:"string",element:"_thumbElement",style:"boxShadow",resourceValue:["getShadow"]},showThumbText:{propertyType:"child",type:"boolean",child:"_thumbTextElement",childProperty:"show",defaultValue:!1},thumbTextWidth:{propertyType:"child",type:"string",child:"_thumbTextElement",childProperty:"width"},thumbTextHeight:{propertyType:"child",type:"string",child:"_thumbTextElement",childProperty:"height"},thumbTextMargin:{propertyType:"child",type:"string",child:"_thumbTextElement",childProperty:"margin"},thumbTextPadding:{propertyType:"child",type:"string",child:"_thumbTextElement",childProperty:"padding"},thumbText:{propertyType:"child",type:"string",child:"_thumbTextElement",childProperty:"text"},localizableThumbText:{propertyType:"custom",type:"string"},thumbTextOn:{propertyType:"custom",type:"string",defaultValue:"On"},localizableThumbTextOn:{propertyType:"custom",type:"string"},thumbTextOff:{propertyType:"custom",type:"string",defaultValue:"Off"},localizableThumbTextOff:{propertyType:"custom",type:"string"},thumbTextAlignment:{propertyType:"child",type:"string",child:"_thumbTextElement",childProperty:"textAlignment"},thumbTextLineClamp:{propertyType:"child",type:"number",child:"_thumbTextElement",childProperty:"lineClamp"},thumbTextWrapping:{propertyType:"child",type:"string",child:"_thumbTextElement",childProperty:"textWrapping"},thumbTextTrimming:{propertyType:"child",type:"string",child:"_thumbTextElement",childProperty:"textTrimming"},thumbTextFontClass:{propertyType:"child",type:"string",child:"_thumbTextElement",childProperty:"fontClass"},thumbTextFontSize:{propertyType:"child",type:"string",child:"_thumbTextElement",childProperty:"fontSize"},thumbTextFontWeight:{propertyType:"child",type:"string",child:"_thumbTextElement",childProperty:"fontWeight"},thumbTextLineHeight:{propertyType:"child",type:"string",child:"_thumbTextElement",childProperty:"lineHeight"},thumbTextContrast:{propertyType:"child",type:"number",child:"_thumbTextElement",childProperty:"textContrast"},thumbTextUppercase:{propertyType:"child",type:"boolean",child:"_thumbTextElement",childProperty:"uppercase"},rippleColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@RippleColor"},trackBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},hoverTrackBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},pressedTrackBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},checkedTrackBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@CheckedBackgroundColor"},checkedHoverTrackBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@CheckedBackgroundColor"},checkedPressedTrackBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@CheckedBackgroundColor"},disabledTrackBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledForegroundColor"},disabledCheckedTrackBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledForegroundColor"},trackBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},hoverTrackBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},pressedTrackBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},checkedTrackBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},checkedHoverTrackBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},checkedPressedTrackBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},disabledTrackBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledForegroundColor"},disabledCheckedTrackBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledForegroundColor"},thumbBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ChromeMediumLow"},hoverThumbBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ChromeMediumLow"},pressedThumbBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ChromeMediumLow"},checkedThumbBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ChromeMediumLow"},checkedHoverThumbBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ChromeMediumLow"},checkedPressedThumbBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ChromeMediumLow"},disabledThumbBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ChromeMediumLow"},disabledCheckedThumbBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ChromeMediumLow"},thumbBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},hoverThumbBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},pressedThumbBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},checkedThumbBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},checkedHoverThumbBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},checkedPressedThumbBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},disabledThumbBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledForegroundColor"},disabledCheckedThumbBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledForegroundColor"},thumbTextForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},hoverThumbTextForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},pressedThumbTextForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},checkedThumbTextForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},checkedHoverThumbTextForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},checkedPressedThumbTextForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},disabledForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledForegroundColor"}},A.SwitchCore=SwitchCore}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class AbsoluteLayout extends x.UI.LayoutBase{constructor(A,V){super(A,V),this.addPropertyList(AbsoluteLayout,AbsoluteLayout.propertyList),this.defaultConstructor(A,this.inlineOptions,x.UI.AbsoluteLayout.controlName,x.UI.AbsoluteLayout.className)}ready(){this._setPosition(this.element)}mutationHandlerDesignMode(){this._setPosition(this.element)}_setPosition(x){for(var A=x.firstChild;A;)A.winControl&&(A.style.position="absolute",void 0!==A.winControl.margin?A.winControl.margin="0px":A.style.margin="0px"),A=A.nextSibling}dispose(){return super.dispose()}}AbsoluteLayout.namespace="VisiWin.UI",AbsoluteLayout.controlName="AbsoluteLayout",AbsoluteLayout.className="vw-absolutelayout",AbsoluteLayout.propertyList={designerType:{propertyType:"base",defaultValue:"ContentControl"},overflow:{propertyType:"style",type:"string"},removeMargins:{propertyType:"member",type:"boolean",defaultValue:!0},backgroundColor:{propertyType:"memberStyle",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},borderColor:{propertyType:"memberStyle",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"}},A.AbsoluteLayout=AbsoluteLayout}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class FlexLayout extends x.UI.LayoutBase{constructor(A,V){super(A,V),this.addPropertyList(FlexLayout,FlexLayout.propertyList),this.defaultConstructor(A,this.inlineOptions,x.UI.FlexLayout.controlName,x.UI.FlexLayout.className)}_updateLayout(x){if("updateLayout"==x.changeName||"orientation"==x.changeName)switch(this.orientation){case"Vertical":this.element.style.flexDirection="column";break;case"VerticalReverse":this.element.style.flexDirection="column-reverse";break;case"HorizontalReverse":this.element.style.flexDirection="row-reverse";break;default:this.element.style.flexDirection="row"}if("updateLayout"==x.changeName||"alignItems"==x.changeName)switch(this.alignItems){case"Center":this.element.style.alignItems="center";break;case"Start":this.element.style.alignItems="flex-start";break;case"End":this.element.style.alignItems="flex-end";break;case"Baseline":this.element.style.alignItems="baseline";break;default:this.element.style.alignItems="stretch"}if("updateLayout"==x.changeName||"justifyContent"==x.changeName)switch(this.justifyContent){case"End":this.element.style.justifyContent="flex-end";break;case"Center":this.element.style.justifyContent="center";break;case"Space-between":this.element.style.justifyContent="space-between";break;case"Space-around":this.element.style.justifyContent="space-around";break;case"Space-evenly":this.element.style.justifyContent="space-evenly";break;default:this.element.style.justifyContent="flex-start"}if("updateLayout"==x.changeName||"alignContent"==x.changeName)switch(this.alignContent){case"Center":this.element.style.alignContent="center";break;case"Start":this.element.style.alignContent="flex-start";break;case"End":this.element.style.alignContent="flex-end";break;case"Space-between":this.element.style.alignContent="space-between";break;case"Space-around":this.element.style.alignContent="space-around";break;default:this.element.style.alignContent="stretch"}"updateLayout"!=x.changeName&&"wrap"!=x.changeName||(this.element.style.flexWrap=this.wrap?"wrap":"nowrap")}dispose(){return super.dispose()}}FlexLayout.namespace="VisiWin.UI",FlexLayout.controlName="FlexLayout",FlexLayout.className="vw-flexlayout",FlexLayout.propertyList={designerType:{propertyType:"base",defaultValue:"ContentControl"},overflow:{propertyType:"style",type:"string"},orientation:{propertyType:"member",type:"string",defaultValue:"Vertical"},alignItems:{propertyType:"member",type:"string",defaultValue:"Start"},justifyContent:{propertyType:"member",type:"string",defaultValue:"Start"},alignContent:{propertyType:"member",type:"string",defaultValue:"Start"},wrap:{propertyType:"member",type:"boolean",defaultValue:!1},backgroundColor:{propertyType:"memberStyle",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},borderColor:{propertyType:"memberStyle",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"}},A.FlexLayout=FlexLayout}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class CardLayout extends x.UI.LayoutBase{constructor(A,V){super(A,V),this.cards=[],this.addPropertyList(CardLayout,CardLayout.propertyList),this.defaultConstructor(A,this.inlineOptions,x.UI.CardLayout.controlName,x.UI.CardLayout.className)}ready(){this._refreshCardLayout()}registerChild(A,V,R,D){switch(A){case"Card":this.cards.push(R.winControl),x.Utilities.isInDesignMode()&&this._updateLayoutBase("event","registerChanged",null,null);break;default:return!1}return!1}_updateLayout(A){this._refreshCardLayout(),"updateLayout"==A.changeName&&(this.pageControl=this.element.parentElement,this.pageControl&&(this.pageControl.scrollTop=0)),x.Utilities.isInDesignMode&&("updateLayout"!=A.changeName&&"scrollYOffset"!=A.changeName||this.pageControl&&(this.pageControl.scrollTop=this.scrollYOffset))}_refreshCardLayout(){for(var x=0;x<this.cards.length;x++){var A=this.cards[x];if("isPhone"==this.deviceType)var V=A.columnsPhone*parseFloat(this.columnWidth)+"%";else if("isTablet"==this.deviceType)V=A.columnsTablet*parseFloat(this.columnWidth)+"%";else if("isDesktop"==this.deviceType)V=A.columnsDesktop*parseFloat(this.columnWidth)+"%";else{if("isLargeDesktop"!=this.deviceType)return;V=A.columnsLargeDesktop*parseFloat(this.columnWidth)+"%"}if("0%"==V)A.visibility="Collapse";else{if(A.visibility="Visible","isPhone"==this.deviceType)A.width="calc("+V+" - "+parseFloat(this.gutterPhone)+"px)",A.margin=parseFloat(this.gutterPhone)/2+"px";else if("isTablet"==this.deviceType)A.width="calc("+V+" - "+parseFloat(this.gutterTablet)+"px)",A.margin=parseFloat(this.gutterTablet)/2+"px";else if("isDesktop"==this.deviceType)A.width="calc("+V+" - "+parseFloat(this.gutterDesktop)+"px)",A.margin=parseFloat(this.gutterDesktop)/2+"px";else{if("isLargeDesktop"!=this.deviceType)return;A.width="calc("+V+" - "+parseFloat(this.gutterLargeDesktop)+"px)",A.margin=parseFloat(this.gutterLargeDesktop)/2+"px"}if("isPhone"==this.deviceType)this.element.winControl.padding=this.paddingPhone;else if("isTablet"==this.deviceType)this.element.winControl.padding=this.paddingTablet;else if("isDesktop"==this.deviceType)this.element.winControl.padding=this.paddingDesktop;else{if("isLargeDesktop"!=this.deviceType)return;this.element.winControl.padding=this.paddingLargeDesktop}}}}dispose(){return super.dispose()}}CardLayout.namespace="VisiWin.UI",CardLayout.controlName="CardLayout",CardLayout.className="vw-cardlayout",CardLayout.propertyList={designerType:{propertyType:"base",defaultValue:"ContentControl"},registerTargetId:{propertyType:"base",defaultValue:"Card"},overflow:{propertyType:"style",type:"string"},scrollYOffset:{propertyType:"member",type:"number",defaultValue:0},columnWidth:{propertyType:"member",type:"string"},deviceType:{propertyType:"member",type:"string"},gutterPhone:{propertyType:"member",type:"string",defaultValue:"8px"},gutterTablet:{propertyType:"member",type:"string",defaultValue:"16px"},gutterDesktop:{propertyType:"member",type:"string",defaultValue:"24px"},gutterLargeDesktop:{propertyType:"member",type:"string",defaultValue:"24px"},paddingPhone:{propertyType:"member",type:"string",defaultValue:"8px"},paddingTablet:{propertyType:"member",type:"string",defaultValue:"8px"},paddingDesktop:{propertyType:"member",type:"string",defaultValue:"8px"},paddingLargeDesktop:{propertyType:"member",type:"string",defaultValue:"8px"},backgroundColor:{propertyType:"memberStyle",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},borderColor:{propertyType:"memberStyle",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"}},A.CardLayout=CardLayout}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class ScrollViewer extends x.UI.LayoutBase{constructor(A,V){super(A,V),this._scrollContainerElement=null,this.addPropertyList(ScrollViewer,ScrollViewer.propertyList),this.defaultConstructor(A,this.inlineOptions,x.UI.ScrollViewer.controlName,x.UI.ScrollViewer.className)}createTemplate(){return this._scrollContainerElement=document.createElement("div"),x.Utilities.addClass(this._scrollContainerElement,"vw-scrollviewer__container"),this.element.appendChild(this._scrollContainerElement),null}ready(){this._scrollContainerElement&&this._reparentChildren(this.element,this._scrollContainerElement)}mutationHandlerDesignMode(){this._scrollContainerElement.innerHtml=null,this._reparentChildren(this.element,this._scrollContainerElement)}_updateLayout(x){"updateLayout"!=x.changeName&&"scrollX"!=x.changeName||(this.scrollX?(this.element.style.overflowX="auto",this._scrollContainerElement.style.width="auto"):(this.element.style.overflowX="hidden",this._scrollContainerElement.style.width="100%")),"updateLayout"!=x.changeName&&"scrollY"!=x.changeName||(this.scrollY?(this.element.style.overflowY="auto",this._scrollContainerElement.style.height="auto"):(this.element.style.overflowY="hidden",this._scrollContainerElement.style.height="100%")),"updateLayout"!=x.changeName&&"scrollXOffset"!=x.changeName||(this.element.scrollLeft=this.scrollXOffset),"updateLayout"!=x.changeName&&"scrollYOffset"!=x.changeName||(this.element.scrollTop=this.scrollYOffset)}_reparentChildren(x,A){for(var V=x.firstChild;V;){var R=V.nextSibling;null!=V&&V.winControl&&A.appendChild(V),V=R}}dispose(){return super.dispose()}}ScrollViewer.namespace="VisiWin.UI",ScrollViewer.controlName="ScrollViewer",ScrollViewer.className="vw-scrollviewer",ScrollViewer.propertyList={designerType:{propertyType:"base",defaultValue:"ContentControl"},scrollX:{propertyType:"member",type:"boolean",defaultValue:!0},scrollY:{propertyType:"member",type:"boolean",defaultValue:!0},scrollXOffset:{propertyType:"member",type:"number",defaultValue:0},scrollYOffset:{propertyType:"member",type:"number",defaultValue:0},backgroundColor:{propertyType:"memberStyle",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},borderColor:{propertyType:"memberStyle",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"}},A.ScrollViewer=ScrollViewer}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class Page extends x.UI.ControlBase{constructor(A,V){super(A,V),this._location="",this._boundTextHandler=this._textHandler.bind(this),this._textObject=null,this._title="",this._boundLocalizableTextHandler=this._localizableTextHandler.bind(this),this._localizableTextObject=null,this._localizableTitle=null,this.addPropertyList(Page,Page.propertyList),this.defaultConstructor(A,this.inlineOptions,x.UI.Page.controlName,x.UI.Page.className)}get location(){return this._location}set location(x){x!==this._location&&(this._location=x)}_textHandler(x){this.title=x.DisplayText}get title(){return this._title}set title(A){if(A!==this._title)if("string"==typeof A&&"@["==A.substr(0,2))if(this.isAttached){if(this._title!=A){var V=this._title;null!=this._title&&this.locService&&this._textObject&&(this.locService.removeLocalizedText(this._title,this._boundTextHandler,this._textObject),this._textObject=null),this._title=A,this.locService&&this.locService.addLocalizedTextAsync(this._title,this._boundTextHandler).then(x=>{this._textObject=x}),this._updateLayoutBase("property","title",A,V),this.dispatchNotifyPropertyChanged("property","title",A,V)}}else{V=this._title;this._title=A,this._updateLayoutBase("property","title",A,V),this.dispatchNotifyPropertyChanged("property","title",A,V)}else{V=this._title;this._title=A,this.element&&(x.isString(A)&&-1!=A.indexOf("@")?x.Utilities.parseProperty(A).then(x=>{null!==x&&(this.element.textContent=x,this._updateLayoutBase("property","title",A,V),this.dispatchNotifyPropertyChanged("property","title",A,V))},x=>{}):this.title=A)}}_localizableTextHandler(x){this.title=x.DisplayText}get localizableTitle(){return this._localizableTitle}set localizableTitle(x){if(this._localizableTitle!=x){var A=this._localizableTitle;null!=this._localizableTitle&&this.locService&&this._localizableTextObject&&(this.locService.removeLocalizedText(this.localizableTitle,this._boundLocalizableTextHandler,this._localizableTextObject),this._localizableTextObject=null),this._localizableTitle=x,this.locService&&this.locService.addLocalizedTextAsync(this.localizableTitle,this._boundLocalizableTextHandler).then(x=>{this._localizableTextObject=x}),this._updateLayoutBase("property","localizableTitle",x,A),this.dispatchNotifyPropertyChanged("property","localizableTitle",x,A)}}attached(){}postSetOptions(x,A){}attach(){let x=null;return this.isAttached||(x=super.attach()),x}detach(){let x=null;return this.isAttached&&(x=super.detach()),x}dispose(){return super.dispose()}}Page.namespace="VisiWin.UI",Page.controlName="Page",Page.className="vw-page",Page.propertyList={designerType:{propertyType:"base",type:"string",defaultValue:"ContentControl"},backgroundColor:{propertyType:"memberStyle",type:"string",resourceValue:["getTheme"],defaultValue:"@AppBackgroundColor"},title:{propertyType:"custom"},localizableTitle:{propertyType:"custom"},location:{propertyType:"custom",typy:"string"}},A.Page=Page}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class View extends x.UI.ControlBase{constructor(A,V){super(A,V),this._location="",this._boundTextHandler=this._textHandler.bind(this),this._textObject=null,this._Title="",this._boundLocalizableTextHandler=this._localizableTextHandler.bind(this),this._localizableTextObject=null,this._localizableTitle=null,this.addPropertyList(View,View.propertyList),this.defaultConstructor(A,this.inlineOptions,x.UI.View.controlName,x.UI.View.className)}get location(){return this._location}set location(x){x!==this._location&&(this._location=x)}_textHandler(x){this.title=x.DisplayText}get title(){return this._Title}set title(A){if(A!==this._Title)if("string"==typeof A&&"@["==A.substr(0,2))if(this.isAttached){if(this._Title!=A){var V=this._Title;null!=this._Title&&this.locService&&this._textObject&&(this.locService.removeLocalizedText(this._Title,this._boundTextHandler,this._textObject),this._textObject=null),this._Title=A,this.locService&&this.locService.addLocalizedTextAsync(this._Title,this._boundTextHandler).then(x=>{this._textObject=x}),this._updateLayoutBase("property","title",A,V),this.dispatchNotifyPropertyChanged("property","title",A,V)}}else{V=this._Title;this._Title=A,this._updateLayoutBase("property","title",A,V),this.dispatchNotifyPropertyChanged("property","title",A,V)}else{V=this._Title;this._Title=A,this.element&&(x.isString(A)&&-1!=A.indexOf("@")?x.Utilities.parseProperty(A).then(x=>{null!==x&&(this.element.textContent=x,this._updateLayoutBase("property","title",A,V),this.dispatchNotifyPropertyChanged("property","title",A,V))},x=>{}):this.title=A)}}_localizableTextHandler(x){this.title=x.DisplayText}get localizableTitle(){return this._localizableTitle}set localizableTitle(x){if(this.isAttached){if(this._localizableTitle!=x){var A=this._localizableTitle;null!=this._localizableTitle&&this.locService&&this._localizableTextObject&&(this.locService.removeLocalizedText(this.localizableTitle,this._boundLocalizableTextHandler,this._localizableTextObject),this._localizableTextObject=null),this._localizableTitle=x,this.locService&&this.locService.addLocalizedTextAsync(this.localizableTitle,this._boundLocalizableTextHandler).then(x=>{this._localizableTextObject=x}),this._updateLayoutBase("property","localizableTitle",x,A),this.dispatchNotifyPropertyChanged("property","localizableTitle",x,A)}}else{A=this._localizableTitle;this._localizableTitle=x,this._updateLayoutBase("property","localizableTitle",x,A),this.dispatchNotifyPropertyChanged("property","localizableTitle",x,A)}}attached(){}postSetOptions(x,A){}attach(){let x=null;return this.isAttached||(x=super.attach()),x}detach(){let x=null;return this.isAttached&&(x=super.detach()),x}dispose(){return super.dispose()}resolve(x,A){var V=document,R=V.getElementsByTagName("base")[0],D=(R&&R.href,V.head||V.getElementsByTagName("head")[0]),N=R||D.appendChild(V.createElement("base")),U=V.createElement("a");return N.href=A||"",U.href=x,U.href}}View.namespace="VisiWin.UI",View.controlName="View",View.className="vw-view",View.propertyList={designerType:{propertyType:"base",type:"string",defaultValue:"ContentControl"},overflow:{propertyType:"style",type:"string"},backgroundColor:{propertyType:"memberStyle",type:"string",resourceValue:["getTheme"],defaultValue:"@AppBackgroundColor"},title:{propertyType:"custom"},localizableTitle:{propertyType:"custom"},location:{propertyType:"custom",typy:"string"}},A.View=View}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class StylingView extends x.UI.ControlBase{constructor(A,V){super(A,V),this.addPropertyList(StylingView,StylingView.propertyList),this.defaultConstructor(A,this.inlineOptions,x.UI.StylingView.controlName,x.UI.StylingView.className)}dispose(){return super.dispose()}}StylingView.namespace="VisiWin.UI",StylingView.controlName="StylingView",StylingView.className="vw-stylingview",StylingView.propertyList={designerType:{propertyType:"base",type:"string",defaultValue:"ContentControl"},backgroundColor:{propertyType:"memberStyle",type:"color",defaultValue:"@None"}},A.StylingView=StylingView}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class DialogView extends x.UI.ControlBase{constructor(A,V){super(A,V),this._dialogControl=null,this._boundBeforeShowHandler=function(x){return this.dispatchEvent("BeforeShow",x)}.bind(this),this._boundBeforeHideHandler=function(x){this.dispatchEvent("BeforeHide",x)}.bind(this),this._boundAfterShowHandler=function(x){this.dispatchEvent("AfterShow",x)}.bind(this),this._boundAafterHideHandler=function(x){this.dispatchEvent("AfterHide",x)}.bind(this),this.addPropertyList(DialogView,DialogView.propertyList),this.defaultConstructor(A,this.inlineOptions,x.UI.DialogView.controlName,x.UI.DialogView.className)}ready(){this._dialogControl=this._getPopUPControl(this.element),this._dialogControl&&(this._dialogControl.addEventListener("beforeShow",this._boundBeforeShowHandler),this._dialogControl.addEventListener("beforeHide",this._boundBeforeHideHandler),this._dialogControl.addEventListener("afterShow",this._boundAfterShowHandler),this._dialogControl.addEventListener("afterHide",this._boundAafterHideHandler))}_getPopUPControl(x){for(var A=x.parentElement;A;){if(A&&A.winControl&&"WinJS.UI.Popup"===A.winControl.controlType)return A.winControl.contentControlElement.winControl;A=A.parentElement?A.parentElement:null}}dispose(){return this._dialogControl&&(this._dialogControl.removeEventListener("beforeShow",this._boundBeforeShowHandler),this._dialogControl.removeEventListener("beforeHide",this._boundBeforeHideHandler),this._dialogControl.removeEventListener("afterShow",this._boundAfterShowHandler),this._dialogControl.removeEventListener("afterHide",this._boundAafterHideHandler)),super.dispose()}}DialogView.namespace="VisiWin.UI",DialogView.controlName="DialogView",DialogView.className="vw-dialogview",DialogView.propertyList={designerType:{propertyType:"base",type:"string",defaultValue:"ContentControl"},BeforeShow:{propertyType:"event"},BeforeHide:{propertyType:"event"},AfterShow:{propertyType:"event"},AfterHide:{propertyType:"event"},overflow:{propertyType:"style",type:"string"},backgroundColor:{propertyType:"memberStyle",type:"string",resourceValue:["getTheme"],defaultValue:"@None"}},A.DialogView=DialogView}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class TemplateView extends x.UI.ControlBase{constructor(A,V){super(A,V),this.addPropertyList(TemplateView,TemplateView.propertyList),this.defaultConstructor(A,this.inlineOptions,x.UI.TemplateView.controlName,x.UI.TemplateView.className)}dispose(){return super.dispose()}}TemplateView.namespace="VisiWin.UI",TemplateView.controlName="TemplateView",TemplateView.className="vw-templateview",TemplateView.propertyList={designerType:{propertyType:"base",type:"string",defaultValue:"ContentControl"},overflow:{propertyType:"style",type:"string"},backgroundColor:{propertyType:"memberStyle",type:"string",resourceValue:["getTheme"],defaultValue:"@None"}},A.TemplateView=TemplateView}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class UserControlView extends x.UI.ControlBase{constructor(A,V){super(A,V),this.addPropertyList(UserControlView,UserControlView.propertyList),this.defaultConstructor(A,this.inlineOptions,x.UI.UserControlView.controlName,x.UI.UserControlView.className)}dispose(){return super.dispose()}}UserControlView.namespace="VisiWin.UI",UserControlView.controlName="UserControlView",UserControlView.className="vw-usercontrolview",UserControlView.propertyList={designerType:{propertyType:"base",type:"string",defaultValue:"ContentControl"}},A.UserControlView=UserControlView}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class Container extends x.UI.ControlBase{constructor(A,V){super(A,V),this.addPropertyList(Container,Container.propertyList),this.defaultConstructor(A,this.inlineOptions,x.UI.Container.controlName,x.UI.Container.className)}_updateLayout(x){"updateLayout"!=x.changeName&&"innerHtml"!=x.changeName||(this.element.innerHTML=this.innerHtml)}dispose(){return super.dispose()}}Container.namespace="VisiWin.UI",Container.controlName="Container",Container.className="vw-container",Container.propertyList={designerType:{propertyType:"base",type:"string",defaultValue:"ContentControl"},innerHtml:{propertyType:"member",type:"string"},backgroundColor:{propertyType:"memberStyle",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},borderColor:{propertyType:"memberStyle",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"}},A.Container=Container}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class ViewBox extends x.UI.LayoutBase{constructor(A,V){super(A,V),this.stretchMode=x.UI.Enums.StretchMode.Uniform,this.stretchDirection=x.UI.Enums.StretchDirection.Both,this.overFlow="Hidden",this.stretchAnchor="left top",this.defaultHeight=null,this.defaultWidth=null,this._desiredPageClassName="vw-page",this.previousWidth=-1,this.previousHeight=-1,this.resizeObserver=new ResizeObserver(A=>{let V=A[0].contentRect.height,R=A[0].contentRect.width;-1===this.previousHeight&&(this.previousHeight=V,this.previousWidth=R);const D=Number(this.element.style.left.replace("px","")),N=Number(this.element.style.top.replace("px",""));this.stretchDirection===x.UI.Enums.StretchDirection.Both?this.changelistener(R-D,V-N):this.stretchDirection===x.UI.Enums.StretchDirection.DownOnly?((this.previousHeight<V-N||this.previousHeight>V-N)&&V-N<=this.defaultHeight||(this.previousWidth<R-D||this.previousWidth>R-D)&&R-D<=this.defaultWidth||this.firstLoad)&&(R-D>=this.defaultWidth?R=this.defaultWidth:R-=D,V-N>=this.defaultHeight?V=this.defaultHeight:V-=N,this.changelistener(R,V),this.firstLoad=!1):this.stretchDirection===x.UI.Enums.StretchDirection.UpOnly&&((this.previousHeight<V-N||this.previousHeight>V-N)&&V-N>=this.defaultHeight||(this.previousWidth<R-D||this.previousWidth>R-D)&&R-D>=this.defaultWidth||this.firstLoad)&&(R-D<=this.defaultWidth?R=this.defaultWidth:R-=D,V-N<=this.defaultHeight?V=this.defaultHeight:V-=N,this.changelistener(R,V),this.firstLoad=!1),this.previousHeight=V,this.previousWidth=R}),this.addPropertyList(ViewBox,ViewBox.propertyList),this.defaultConstructor(A,this.inlineOptions,x.UI.ViewBox.controlName,x.UI.ViewBox.className)}setPageElement(A){this._pageElement=x.Utilities.findParentElementByClassName(this.element,this._desiredPageClassName)}ready(){this._setPosition(this.element)}mutationHandlerDesignMode(){this._setPosition(this.element)}_setPosition(x){let A=x.firstChild;for(;A;)A.winControl&&(A.style.position="absolute",void 0!==A.winControl.margin?A.winControl.margin="0px":A.style.margin="0px"),A=A.nextSibling}changelistener(A,V){this.stretchMode!==x.UI.Enums.StretchMode.None&&(this.element.style.transformOrigin=this.stretchAnchor.toLowerCase(),this.stretchMode===x.UI.Enums.StretchMode.Uniform?this.stretchUniform(A,V):this.stretchMode===x.UI.Enums.StretchMode.Fill&&this.stretchFill(A,V))}stretchFill(x,A){const V=A,R=x;if(!this.isInDesignMode){const x=100/this.defaultWidth*R,A=100/this.defaultHeight*V;void 0!==this.element&&(this.element.style.transform="scale("+x+"%,"+A+"%)")}}stretchUniform(x,A){const V=A,R=x;let D=1;D=R/V<this.defaultWidth/this.defaultHeight?R/this.defaultWidth:V/this.defaultHeight,this.element.style.transform="scale("+D+","+D+")"}stretchUniformToFill(x,A){const V=A,R=x;if(!this.isInDesignMode){const x=100/this.defaultWidth*R,A=100/this.defaultHeight*V;let D;D=x>A?x:A,void 0!==this.element&&(this.element.style.transform="scale("+D+"%,"+D+"%)")}}attach(){var x,A;if(this.firstLoad=!0,!this.isInDesignMode){if(this.element.style.setProperty("flex-shrink","0"),this.element.style.height.includes("%")){const A=Number(null===(x=this.element.parentElement)||void 0===x?void 0:x.clientHeight)*(Number(this.element.style.height.replace("%",""))/100);this.element.style.height=A+"px"}else this.defaultHeight=Number(this.element.style.height.replace("px",""));if(this.element.style.width.includes("%")){const x=Number(null===(A=this.element.parentElement)||void 0===A?void 0:A.clientWidth)*(Number(this.element.style.width.replace("%",""))/100);this.element.style.width=x+"px"}else this.defaultWidth=Number(this.element.style.width.replace("px",""));if(this.tempElement=this.element,this.setPageElement(this._desiredPageClassName),null!=this._pageElement&&(this._pageElement.style.overflow=this.overFlow),this.element.style.overflow=this.overFlow,null===this.defaultHeight&&null===this.defaultWidth)if("auto"===this.defaultDeviceHeight&&"auto"===this.defaultDeviceWidth){let x=null;const A=this.element.firstElementChild.winControl._controlName;x="AbsoluteLayout"===A||"FlexLayout"===A?this.element.firstElementChild:this.element;const V=x.winControl._height,R=x.winControl._width;let D=null,N=null;const U=x.children;let B;for(B of U){const x=B.offsetLeft+B.clientWidth,A=B.offsetTop+B.clientHeight;(null===D||x>D.offsetLeft+D.clientWidth)&&(D=B),(null===N||A>N.offsetTop+N.clientHeight)&&(N=B)}const F=D.offsetLeft+D.clientWidth,W=N.offsetTop+N.clientHeight,H=x.offsetLeft,z=x.offsetTop,G=8;V.includes("%")?(this.element.style.height=W+z+G+"px",this.defaultHeight=W+z+G):(this.element.style.height=V,this.defaultHeight=V.replace("px","")),R.includes("%")?(this.element.style.width=F+H+G+"px",this.defaultWidth=F+H+G):(this.element.style.width=R,this.defaultWidth=R.replace("px",""))}else Number(this.defaultDeviceHeight.replace("px",""))>this.defaultHeight&&(this.defaultHeight=Number(this.defaultDeviceHeight.replace("px",""))),Number(this.defaultDeviceWidth.replace("px",""))>this.defaultWidth&&(this.defaultWidth=Number(this.defaultDeviceWidth.replace("px","")));null!=this._pageElement&&this.resizeObserver.observe(this._pageElement)}return null}dispose(){return this.resizeObserver&&null!=this._pageElement&&this.resizeObserver.unobserve(this._pageElement),super.dispose()}detach(){return this.resizeObserver&&null!=this._pageElement&&this.resizeObserver.unobserve(this._pageElement),super.detach()}}ViewBox.namespace="VisiWin.UI",ViewBox.controlName="ViewBox",ViewBox.className="vw-viewbox",ViewBox.propertyList={designerType:{propertyType:"base",defaultValue:"ContentControl"},removeMargins:{propertyType:"member",type:"boolean",defaultValue:!0},stretchMode:{propertyType:"member",type:"string",defaultValue:x.UI.Enums.StretchMode.Uniform},stretchDirection:{propertyType:"member",type:"string",defaultValue:x.UI.Enums.StretchDirection.Both},overFlow:{propertyType:"member",type:"string",defaultValue:"Hidden"},defaultDeviceWidth:{propertyType:"member",type:"string",defaultValue:"auto"},defaultDeviceHeight:{propertyType:"member",type:"string",defaultValue:"auto"},stretchInDesignMode:{propertyType:"member",type:"boolean",defaultValue:!0},stretchAnchor:{propertyType:"member",type:"string",defaultValue:"left top"},backgroundColor:{propertyType:"memberStyle",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},borderColor:{propertyType:"memberStyle",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"}},A.ViewBox=ViewBox}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class DataTemplateView extends x.UI.ControlBase{constructor(A,V){super(A,V),this.properties={designerType:{propertyType:"base",defaultValue:"ContentControl"},dataTemplateName:{defaultValue:""}},this.innerHTML=null,this.dataTemplateName=null,this.cssStyles={css:"\n            .vw-datatemplateview {\n                position: relative;\n                width: 100%;\n                height: 100%;\n                overflow: auto;         \n            }\n        "},this.initialize(DataTemplateView),this.innerHTML=this.element.innerHTML,x.AppServices.DataTemplateService.registerDataTemplate(this.inlineOptions.dataTemplateName,this.element,this.innerHTML)}loadTemplate(){}}A.DataTemplateView=DataTemplateView}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class AppShellRegion extends x.UI.RegionBase{constructor(A,V){super(A,V),this._boundNavigatedHandler=this._navigatedHandler.bind(this),this.addPropertyList(AppShellRegion,AppShellRegion.propertyList),this.defaultConstructor(A,this.inlineOptions,x.UI.AppShellRegion.controlName,x.UI.AppShellRegion.className)}createTemplate(){return this.element.appendChild(this.createPageElement()),this.controlId="content",null}createHandler(){this.addEventListener("navigated",this._boundNavigatedHandler)}removeHandler(){this.removeEventListener("navigated",this._boundNavigatedHandler)}beforeInit(){x.Utilities.isChrome()?x.Utilities.addClass(this.element,"chrome"):x.Utilities.isExplorer()?x.Utilities.addClass(this.element,"explorer"):x.Utilities.isFirefox()?x.Utilities.addClass(this.element,"firefox"):x.Utilities.isSafari()?x.Utilities.addClass(this.element,"safari"):x.Utilities.isOpera()&&x.Utilities.addClass(this.element,"opera")}_navigatedHandler(A){x.Utilities.setRenderedFontClass()}dispose(){return super.dispose()}}AppShellRegion.namespace="VisiWin.UI",AppShellRegion.controlName="AppShellRegion",AppShellRegion.className="vw-appshellregion",AppShellRegion.propertyList={designerType:{propertyType:"base",type:"string",defaultValue:"DisabledControl"},viewName:{propertyType:"base",type:"string",defaultValue:"views/AppShell.html"}},A.AppShellRegion=AppShellRegion}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class App extends x.UI.RegionBase{constructor(A,V){super(A,V),this._boundNavigatedHandler=this._navigatedHandler.bind(this),this.addPropertyList(App,App.propertyList),this.defaultConstructor(A,this.inlineOptions,x.UI.App.controlName,x.UI.App.className)}createTemplate(){return this.element.appendChild(this.createPageElement()),this.controlId="content",this.inlineOptions.viewName||(this.inlineOptions.viewName=this.appService.getPathSetting("UI.AppShell")),null}createHandler(){this.addEventListener("navigated",this._boundNavigatedHandler)}removeHandler(){this.removeEventListener("navigated",this._boundNavigatedHandler)}beforeInit(){x.Utilities.isChrome()?x.Utilities.addClass(this.element,"chrome"):x.Utilities.isExplorer()?x.Utilities.addClass(this.element,"explorer"):x.Utilities.isFirefox()?x.Utilities.addClass(this.element,"firefox"):x.Utilities.isSafari()?x.Utilities.addClass(this.element,"safari"):x.Utilities.isOpera()&&x.Utilities.addClass(this.element,"opera")}_navigatedHandler(A){x.Utilities.setRenderedFontClass()}dispose(){return super.dispose()}}App.namespace="VisiWin.UI",App.controlName="App",App.className="vw-app",App.propertyList={designerType:{propertyType:"base",type:"string",defaultValue:"DisabledControl"},viewName:{propertyType:"base",type:"string"}},A.App=App}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={}));var __awaiter=this&&this.__awaiter||function(x,A,V,R){return new(V||(V=Promise))((function(D,N){function fulfilled(x){try{step(R.next(x))}catch(x){N(x)}}function rejected(x){try{step(R.throw(x))}catch(x){N(x)}}function step(x){x.done?D(x.value):function adopt(x){return x instanceof V?x:new V((function(A){A(x)}))}(x.value).then(fulfilled,rejected)}step((R=R.apply(x,A||[])).next())}))},VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin;!function(x){!function(A){"use strict";class AppLayoutBase extends x.UI.ControlBase{constructor(x,V){super(x,V),this._boundKeyDownTextField=this._keyDownTextField.bind(this),this.firstPreload=!0,this.addPropertyList(AppLayoutBase,AppLayoutBase.propertyList),document.addEventListener(A.KeyboardEventType.keydown,this._boundKeyDownTextField,!1)}preloadSub(A,V){return __awaiter(this,void 0,void 0,(function*(){let R=x.Application.Settings.UI.Preloading.Sub,D=R.length,N=-1,U=null,B=null;for(let x=0;x<D;x++)if(U=R[x].Source,A===U){N=x,B=R[x].Target;break}if(N>=0){let A,R;for(let D=0;D<B.length;D++){let U=B[D].FileName;if(A=B[D].Id,R=document.getElementById(A),R&&R.winControl){let D=R.winControl.viewName,B="";x.Application.Settings.UI.Preloading.Sub[N]._StartFile=D;for(let R=U.length-1;R>=0;R--){yield x.AppServices.NavigationService.navigateToView(V,U[R],A,{},!1);x.AppServices.NavigationService.incrementPreloadCounter(U[R]),yield this.preloadSub(U[R],V),B=U[R]}D&&D!==B&&(yield x.AppServices.NavigationService.navigateToView(V,D,A,{},!1),x.AppServices.NavigationService.incrementPreloadCounter(R.winControl.viewName))}else x.Application.WarnLog.log("PreloadFiles: ERR no target id "+R)}}}))}ready(){return __awaiter(this,void 0,void 0,(function*(){if("error"!==x.Application.show.show&&(x.Application.show.show="splash"),x.AppServices.NavigationService.incrementPreloadCounter(""),x.Application.Settings.UI.Preloading&&x.Application.Settings.UI.Preloading.Enabled){let A=x.Application.Settings.UI.Preloading;if(A&&A.Main&&A.Main.Source){A.Main.Source;for(let V=A.Main.Source.length-1;V>=0;V--){let R=A.Main.Source[V];if(R){let A=R.FileName,V=R.Id;if("string"==typeof R.Id&&R.Id.length>0){yield x.AppServices.NavigationService.navigateToView("views/ErrorView.html",A,V,{},!1);x.AppServices.NavigationService.incrementPreloadCounter(A)}else{let V=yield x.AppServices.NavigationService.navigateToPage(A,{},!1);if(V.detail.ctrl){const R=V.detail.ctrl.querySelectorAll('[data-win-control="VisiWin.UI.Region"]');if(R[0]&&R[0].winControl){V.detail.ctrl.querySelectorAll('[data-win-control="VisiWin.UI.View"]').length>0?yield this.preloadSub(A,A):yield new Promise((A,V)=>{x.AppServices.NavigationService.addEventListener("onViewChanged",(function xyz(){setTimeout(()=>{x.AppServices.NavigationService.removeEventListener("onViewChanged",xyz)},0),A(!0)}))}),yield this.preloadSub(A,A)}else yield this.preloadSub(A,A)}}}}}}let A=x.Application.commandLine;if(A){let V=A.split("&");for(let A=0;A<V.length;A++){let R=V[A].split("=");"pageName"==R[0]&&R[1]&&(x.AppServices.NavigationService.startPage=R[1])}}x.AppServices.NavigationService.addEventListener("preloadingready",A=>__awaiter(this,void 0,void 0,(function*(){if(this.firstPreload=!1,!0===x.AppServices.NavigationService.appShellReady){yield x.AppServices.NavigationService._navigateToLoadingPage(x.Application.Settings.UI.LoadingPageName),yield x.sleep(100),x.AppServices.NavigationService.startPageInit=!0,yield x.AppServices.NavigationService.navigateToPage(A.details.startPage,{},!1),x.AppServices.NavigationService.incrementPreloadCounter(A.details.startPage,!0),x.Application.InfoLog.log("NavigationService: startPage "+A.details.startPage);var V=document.getElementById("splash");V&&(V.style.display="none"),"login"!==x.Application.show.show&&(x.Application.show.show="content")}else x.AppServices.NavigationService.addEventListener("AppShellReady",()=>__awaiter(this,void 0,void 0,(function*(){x.AppServices.NavigationService.startPageInit=!0,yield x.AppServices.NavigationService.navigateToPage(A.details.startPage,{},!1),x.AppServices.NavigationService.incrementPreloadCounter(A.details.startPage,!0),x.Application.InfoLog.log("NavigationService: startPage "+A.details.startPage);var V=document.getElementById("splash");V&&(V.style.display="none"),"login"!==x.Application.show.show&&(x.Application.show.show="content")})))}))),x.AppServices.NavigationService.preloadingReady=!0}))}_keyDownTextField(A){120==A.keyCode&&("login"!==x.Application.show.show&&"splash"==x.Application.show.show?"content"===x.Application.show.show?x.Application.show.show="error":x.Application.show.show="splashcontent":"login"!==x.Application.show.show&&("content"===x.Application.show.show||"splash"===x.Application.show.show||"splashcontent"===x.Application.show.show?x.Application.show.show="error":x.Application.show.show="splashcontent"))}dispose(){return document.removeEventListener(A.KeyboardEventType.keydown,this._boundKeyDownTextField,!1),super.dispose()}}AppLayoutBase.namespace="VisiWin.UI",AppLayoutBase.controlName="AppLayoutBase",AppLayoutBase.propertyList={},A.AppLayoutBase=AppLayoutBase}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){class AppBaseLayout extends x.UI.AppLayoutBase{constructor(V,R){super(V,R),this.addPropertyList(A.AppLayout,A.AppLayout.propertyList),this.defaultConstructor(V,this.inlineOptions,x.UI.AppLayout.controlName,x.UI.AppLayout.className),this.pageName&&(x.AppServices.NavigationService.StartPage=this.pageName)}ready(){const x=Object.create(null,{ready:{get:()=>super.ready}});return __awaiter(this,void 0,void 0,(function*(){yield x.ready.call(this)}))}dispose(){return super.dispose()}}AppBaseLayout.namespace="VisiWin.UI",AppBaseLayout.controlName="AppBaseLayout",AppBaseLayout.className="vw-appbaselayout",AppBaseLayout.propertyList={designerType:{propertyType:"base",type:"string",defaultValue:"ContentControl"},pageName:{propertyType:"member",type:"string"},backgroundColor:{propertyType:"memberStyle",type:"string",resourceValue:["getTheme"],defaultValue:null},borderColor:{propertyType:"memberStyle",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"}},A.AppBaseLayout=AppBaseLayout}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){class AppLayout extends x.UI.AppLayoutBase{constructor(A,V){super(A,V),this.addPropertyList(AppLayout,AppLayout.propertyList),this.defaultConstructor(A,this.inlineOptions,x.UI.AppLayout.controlName,x.UI.AppLayout.className),this.pageName&&(x.AppServices.NavigationService.StartPage=this.pageName)}ready(){const x=Object.create(null,{ready:{get:()=>super.ready}});return __awaiter(this,void 0,void 0,(function*(){yield x.ready.call(this)}))}dispose(){return super.dispose()}}AppLayout.namespace="VisiWin.UI",AppLayout.controlName="AppLayout",AppLayout.className="vw-applayout",AppLayout.propertyList={designerType:{propertyType:"base",type:"string",defaultValue:"ContentControl"},pageName:{propertyType:"member",type:"string"},backgroundColor:{propertyType:"memberStyle",type:"string",resourceValue:["getTheme"],defaultValue:null},borderColor:{propertyType:"memberStyle",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"}},A.AppLayout=AppLayout}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){class AppSideNavLayout extends x.UI.AppLayoutBase{constructor(A,V){super(A,V),this._scrim=null,this._leftButton=null,this._rightButton=null,this._leftDrawer=null,this._rightDrawer=null,this._contentControl=null,this._titelElement=null,this._dragElement=null,this._selector=null,this._cnt=0,this._buttonCnt=0,this._drawerCnt=0,this._responsiveFlag=!1,this._menueStatus=!1,this._optionsStatus=!1,this._leftDrawerActive=!1,this._rightDrawerActive=!1,this._dragState=null,this._dragFlagLeft=!1,this._dx=0,this.dragThreshold=10,this._menuStartIndex=null,this._pastDrawerinit=!1,this._boundPointerDownHandler=this._pointerDownHandler.bind(this),this._boundPointerMoveHandler=this._pointerMoveHandler.bind(this),this._boundPointerCancelHandler=this._pointerCancelHandler.bind(this),this._boundPointerUpHandler=this._pointerUpHandler.bind(this),this._boundMenueDrawOn=this._menueDrawOn.bind(this),this._boundMenueDrawOff=this._menueDrawOff.bind(this),this._boundMenueHandlerOn=this._menueHandlerOn.bind(this),this._boundMenueHandlerOff=this._menueHandlerOff.bind(this),this._boundOptionsDrawOn=this._optionsDrawOn.bind(this),this._boundOptionsDrawOff=this._optionsDrawOff.bind(this),this._boundOptionsHandlerOn=this._optionsHandlerOn.bind(this),this._boundOptionsHandlerOff=this._optionsHandlerOff.bind(this),this._boundTmpDrawerOffHandler=this._tmpDrawerOffHandler.bind(this),this._boundSelectorActionHandler=this._selectorActionHandler.bind(this),this._drawerMode=null,this._open=!1,this.addPropertyList(AppSideNavLayout,AppSideNavLayout.propertyList),this.defaultConstructor(A,this.inlineOptions,x.UI.AppSideNavLayout.controlName,x.UI.AppSideNavLayout.className)}preCheck(){let A=0;return x.AppServices.AppService||(x.Application.ErrorLog.log("VisiWin.UI.AppSideNavLayout.DependService auf VisiWin.AppServices.AppService kann nicht zugegriffen werden"),A++),A}createTemplate(){return this._scrim=document.createElement("div"),this._scrim.style.zIndex="100",x.Utilities.addClass(this._scrim,x.UI.AppSideNavLayout.classScrim),this.element.appendChild(this._scrim),null}createHandler(){x.Utilities.addEventListener(this.element,A.PointerEventType.pointerdown,this._boundPointerDownHandler,!0),x.Utilities.addEventListener(this.element,A.PointerEventType.pointercancel,this._boundPointerCancelHandler),x.Utilities.addEventListener(this._scrim,A.PointerEventType.pointerdown,this._boundTmpDrawerOffHandler),x.AppServices.AppService.addWidthAction("trigger","options",this._boundTmpDrawerOffHandler)}removeHandler(){x.Utilities.removeEventListener(this.element,A.PointerEventType.pointerdown,this._boundPointerDownHandler,!0),x.Utilities.removeEventListener(this.element,A.PointerEventType.pointercancel,this._boundPointerCancelHandler),x.Utilities.removeEventListener(this._scrim,A.PointerEventType.pointerdown,this._boundTmpDrawerOffHandler),x.AppServices.AppService.removeWidthAction("trigger","options",this._boundTmpDrawerOffHandler)}ready(){const x=Object.create(null,{ready:{get:()=>super.ready}});return __awaiter(this,void 0,void 0,(function*(){yield x.ready.call(this)}))}registerChild(x,A,V,R){switch(x){case"AppNavMenuButton":this._registerHamburger(V,A,R);break;case"OverlayButton":this._registerMenu(V,A,R);break;case"AppNavDrawer":this._contentControl?this._registerDrawer(V,A,R):(this._pastDrawerinit=!0,"leftdrawer"===A&&(this._leftDrawer=V),"rightdrawer"===A&&(this._rightDrawer=V));break;case"AppBarLayout":case"AppHeaderLayout":this._registerContent(V,A,R),this._pastDrawerinit&&(this._leftDrawer&&this._registerDrawer(this._leftDrawer,"leftdrawer",R),this._rightDrawer&&this._registerDrawer(this._rightDrawer,"rightdrawer",R));break;case"AppNavMenu":this._registerSelector(V,A,R);break;case"AppPageTitle":this._registerTitel(V,A,R);break;default:return!0}return!1}get drawerMode(){return this._drawerMode}set drawerMode(A){if(this._drawerMode!=A){const V=this._drawerMode;switch(A){case"Permanent":this._drawerMode=A,this._menueHandlerOn(),this._responsiveOff(),x.Utilities.removeClass(this.element,x.UI.AppSideNavLayout.classClipped);break;case"Temporary":this._drawerMode=A,this._menueHandlerOff(),this._responsiveOff(),x.Utilities.removeClass(this.element,x.UI.AppSideNavLayout.classClipped);break;case"PermanentClipped":this._drawerMode=A,this._menueHandlerOn(),this._responsiveOff(),x.Utilities.addClass(this.element,x.UI.AppSideNavLayout.classClipped);break;case"Responsive":this._drawerMode=A,this._responsiveOn(),x.Utilities.removeClass(this.element,x.UI.AppSideNavLayout.classClipped);break;default:this._drawerMode="Responsive",this._responsiveOn(),x.Utilities.removeClass(this.element,x.UI.AppSideNavLayout.classClipped)}this._updateLayoutBase("property","drawerMode",A,V),this.dispatchNotifyPropertyChanged("property","drawerMode",A,V)}}get open(){return this._open}set open(x){if("Temporary"==this.drawerMode||"Responsive"==this.drawerMode){const A=this._open;x?this._menueDrawOn():this._menueDrawOff(),this._updateLayoutBase("property","open",x,A),this.dispatchNotifyPropertyChanged("property","open",x,A)}}_updateDrawer(){this._menueStatus&&this._menueHandlerOn(),this._optionsStatus&&this._optionsHandlerOn()}_calcDrawer(){this._drawerTotalWidth=0,this._drawerLeftWidth=0,this._drawerRightWidth=0,this._menueStatus&&(this._drawerTotalWidth+=this._leftDrawerWidth,this._drawerLeftWidth=this._leftDrawerWidth),this._optionsStatus&&(this._drawerTotalWidth+=this._rightDrawerWidth,this._drawerRightWidth=this._rightDrawerWidth)}_checkBorder(x,A,V,R){x<A&&(x=A),x>V&&(x=V);let D=(x-A)/(V-A);return"DRAWER_RIGHT"===this._dragState&&(D=1-D),this._scrim.style.opacity=D.toString(),R?x.toString()+"px":x}_registerTitel(x,A,V){x.winControl&&(this._titelElement=x,this._selector&&(this._titelElement.winControl.text=this._selector.winControl._items[this._selector.winControl._selectedIndex].text)),this._updateDrawer()}_registerContent(A,V,R){if(A.winControl&&(this._contentControl=A),this._updateDrawer(),0==this._menueStatus){x.Utilities.addClass(A,"menuoff"),x.Utilities.removeClass(A,"menuon");const V=A.firstElementChild;V&&(x.Utilities.addClass(V,"menuoff"),x.Utilities.removeClass(V,"menuon"))}else{x.Utilities.addClass(A,"menuon"),x.Utilities.removeClass(A,"menuoff");const V=A.firstElementChild;V&&(x.Utilities.addClass(V,"menuon"),x.Utilities.removeClass(V,"menuoff"))}}_registerSelector(x,A,V){x.winControl&&(this._selector=x,this._selector.winControl.inlineOption&&this._selector.winControl.inlineOptions.selectedIndex?this._menuStartIndex=this._selector.winControl.inlineOptions.selectedIndex:this._menuStartIndex=0,this._selector.winControl.selectedIndex=-1,x.winControl.addEventListener("selectedIndexChanged",this._boundSelectorActionHandler))}_registerButton(x,A,V){"leftbutton"!==A&&0!==this._buttonCnt||(this._leftButton=x,x.winControl.addEventListener("buttonclick",this._boundMenueDrawOn)),"rightbutton"!==A&&1!==this._buttonCnt||(this._rightButton=x,x.winControl.addEventListener("buttonclick",this._boundOptionsDrawOn)),this._buttonCnt++,this._menueStatus?(this._leftButton&&(this._leftButton.style.display="none"),this._rightButton&&(this._rightButton.style.display="none")):(this._leftButton&&(this._leftButton.style.display="flex"),this._rightButton&&(this._rightButton.style.display="flex"))}_registerHamburger(x,A,V){this._leftButton=x,x.winControl.addEventListener("buttonclick",this._boundMenueDrawOn),this._buttonCnt++,this._menueStatus?(this._leftButton&&(this._leftButton.style.display="none"),this._rightButton&&(this._rightButton.style.display="none")):(this._leftButton&&(this._leftButton.style.display="flex"),this._rightButton&&(this._rightButton.style.display="flex"))}_registerMenu(x,A,V){this._rightButton=x,x.winControl.addEventListener("buttonclick",this._boundOptionsDrawOn,this),this._buttonCnt++,this._rightButton&&(this._rightButton.style.display="flex")}_registerDrawer(A,V,R){if("leftdrawer"===V&&(this._leftDrawer=A,this._leftDrawerzIndex=A.style.zIndex,x.Utilities.addClass(A,"vw-appdrawer-left"),this._leftDrawerWidth=parseFloat(A.winControl.width),A.style.width=this._leftDrawerWidth.toString()+"px",A.style.left="-"+this._leftDrawerWidth.toString()+"px",this._updateDrawer(),"Responsive"==this.drawerMode&&this._responsiveOn()),"rightdrawer"===V&&(this._rightDrawer=A,this._rightDrawerzIndex=A.style.zIndex,x.Utilities.addClass(A,"vw-appdrawer-right"),this._rightDrawerWidth=parseFloat(A.winControl.width),A.style.width=this._rightDrawerWidth.toString()+"px",A.style.left="100%",this._updateDrawer(),"Responsive"==this.drawerMode&&this.responsiveWidth)){const A=parseFloat(this.responsiveWidth);x.AppServices.AppService.addWidthAction(">=",A,this._boundOptionsHandlerOn),x.AppServices.AppService.addWidthAction("<",A,this._boundOptionsHandlerOff)}}_pointerDownHandler(V){this._cnt=0,this._dx=V.pageX,this._dragXStart=V.pageX-this.element.getBoundingClientRect().left,this._dragYStart=V.pageY-this.element.getBoundingClientRect().top,this._menueStatus||!this._leftDrawer||this._rightDrawerActive||this._leftDrawer.offsetLeft>=0&&V.clientX<this._leftDrawerWidth&&(this._dragState="DRAWER_LEFT",this._dragElement=this._leftDrawer,this._dragMin=-this._leftDrawerWidth,this._dragStartX=this._leftDrawer.offsetLeft,this._dragMax=0,this._dragOnEvent=this._boundMenueDrawOn,this._dragOffEvent=this._boundMenueDrawOff,x.Utilities.addEventListener(this.element,A.PointerEventType.pointerup,this._boundPointerUpHandler)),this._optionsStatus||!this._rightDrawer||this._leftDrawerActive||this._rightDrawer.offsetLeft<this.element.offsetWidth&&V.clientX>this.element.offsetWidth-this._rightDrawerWidth&&(this._dragState="DRAWER_RIGHT",this._dragElement=this._rightDrawer,this._dragMin=this.element.offsetWidth-this._rightDrawerWidth,this._dragStartX=this._rightDrawer.offsetLeft,this._dragMax=this.element.offsetWidth,this._dragOnEvent=this._boundOptionsDrawOff,this._dragOffEvent=this._boundOptionsDrawOn,x.Utilities.addEventListener(this.element,A.PointerEventType.pointerup,this._boundPointerUpHandler))}_pointerMoveHandler(A){if(this._cnt++,!this._dragFlagLeft&&this.dragThreshold>0){const V=this.element.getBoundingClientRect(),R=A.pageX-V.left,D=A.pageY-V.top,N=this._dragXStart-R,U=this._dragYStart-D;Math.sqrt(N*N+U*U)>this.dragThreshold&&(this._dragElement.style.zIndex="101",this._scrim.style.display="block",x.Utilities.addClass(this._dragElement,"drag"),this._dragFlagLeft=!0)}this._dragElement&&this._dragFlagLeft&&(this._dragElement.style.left=this._checkBorder(this._dragStartX+A.pageX-this._dx,this._dragMin,this._dragMax,!0))}_pointerCancelHandler(V){if(this._dragElement){if(this._dragFlagLeft){const x=this._checkBorder(this._dragStartX+V.pageX-this._dx,this._dragMin,this._dragMax,!1);let A=0;A="DRAWER_LEFT"===this._dragState?(this._dragMin-this._dragMax)/2:this._dragMin+(this._dragMax-this._dragMin)/2,x>A?this._dragOnEvent&&this._dragOnEvent():this._dragOffEvent&&this._dragOffEvent()}x.Utilities.removeClass(this._dragElement,"drag")}this._dragFlagLeft=!1,this._dragElement=null,x.Utilities.removeEventListener(this.element,A.PointerEventType.pointermove,this._boundPointerMoveHandler,!0),x.Utilities.removeEventListener(this.element,A.PointerEventType.pointerup,this._boundPointerUpHandler)}_pointerUpHandler(V){if(this._dragElement){if(this._dragFlagLeft){const x=this._checkBorder(this._dragStartX+V.pageX-this._dx,this._dragMin,this._dragMax,!1);let A=0;A="DRAWER_LEFT"===this._dragState?(this._dragMin-this._dragMax)/2:this._dragMin+(this._dragMax-this._dragMin)/2,x>A?this._dragOnEvent&&this._dragOnEvent():this._dragOffEvent&&this._dragOffEvent()}x.Utilities.removeClass(this._dragElement,"drag")}this._dragFlagLeft=!1,this._dragElement=null,x.Utilities.removeEventListener(this.element,A.PointerEventType.pointermove,this._boundPointerMoveHandler,!0),x.Utilities.removeEventListener(this.element,A.PointerEventType.pointerup,this._boundPointerUpHandler)}_menueDrawOn(A){this._menueStatus||(this._leftDrawerActive=!0,this._scrim&&(x.Utilities.addClass(this._scrim,"in"),this._scrim.style.display="block",this._scrim.style.opacity="1.0"),this._leftDrawer&&(this._leftDrawer.style.zIndex="101",x.Utilities.addClass(this._leftDrawer,"in"),this._leftDrawer.style.left="0"),this._open=!0)}_menueDrawOff(){this._leftDrawerActive=!1,this._scrim&&(x.Utilities.removeClass(this._scrim,"in"),this._scrim.style.opacity="0",setTimeout(function(){this._scrim.style.display="none"}.bind(this),380)),this._leftDrawer&&(this._leftDrawer.style.left="-"+this._leftDrawerWidth+"px",x.Utilities.removeClass(this._leftDrawer,"in")),this._open=!1}_menueHandlerOn(){if(this._menueStatus=!0,this._leftDrawerActive=!1,this._calcDrawer(),this._leftDrawer&&(this._leftDrawer.style.left="0px",this._leftDrawer.style.zIndex=this._leftDrawerzIndex),this._contentControl){this._contentControl.style.left=this._drawerLeftWidth+"px",this._contentControl.style.width="calc(100% - "+this._drawerTotalWidth+"px)",x.Utilities.addClass(this._contentControl,"menuon"),x.Utilities.removeClass(this._contentControl,"menuoff");const A=this._contentControl.firstElementChild;A&&(x.Utilities.addClass(A,"menuon"),x.Utilities.removeClass(A,"menuoff"))}this._leftButton&&(this._leftButton.style.display="none"),this._leftDrawer&&x.Utilities.addClass(this._leftDrawer,"responsive-in")}_menueHandlerOff(){if(this._menueStatus=!1,this._calcDrawer(),this._leftDrawer&&(this._leftDrawer.style.left="-"+this._leftDrawerWidth+"px"),this._contentControl){this._contentControl.style.left="0px",this._contentControl.style.width="calc(100% - "+this._drawerLeftWidth+"px)",x.Utilities.addClass(this._contentControl,"menuoff"),x.Utilities.removeClass(this._contentControl,"menuon");const A=this._contentControl.firstElementChild;A&&(x.Utilities.addClass(A,"menuoff"),x.Utilities.removeClass(A,"menuon"))}this._leftButton&&(this._leftButton.style.display="flex"),this._leftDrawer&&x.Utilities.removeClass(this._leftDrawer,"responsive-in")}_optionsDrawOn(A){this._optionsStatus||(this._rightDrawerActive=!0,this._rightDrawer&&x.Utilities.addClass(this._rightDrawer,"in"),this._scrim&&x.Utilities.addClass(this._scrim,"in"),this._scrim.style.display="block",this._scrim.style.opacity="1.0",this._rightDrawer&&(this._rightDrawer.style.zIndex="101",this._rightDrawer.style.left="calc(100% - "+this._rightDrawerWidth+"px)",x.Utilities.addClass(this._rightDrawer,"in")))}resizeHandler(x){this._scrim&&this._optionsDrawOff()}_optionsDrawOff(){this._rightDrawerActive=!1,this._scrim&&(x.Utilities.removeClass(this._scrim,"in"),this._scrim.style.opacity="0",setTimeout(function(){this._scrim.style.display="none"}.bind(this),380)),this._rightDrawer&&(this._rightDrawer.style.left="100%",x.Utilities.removeClass(this._rightDrawer,"in"))}_optionsHandlerOn(){this._optionsStatus=!0,this._rightDrawerActive=!1,this._calcDrawer(),this._rightDrawer&&(this._rightDrawer.style.left="calc(100% - "+this._drawerRightWidth+"px)",this._rightDrawer.style.zIndex=this._leftDrawerzIndex),this._contentControl&&(this._contentControl.style.width="calc(100% -  "+this._drawerTotalWidth+"px)"),this._rightButton&&(this._rightButton.style.display="none"),this._leftDrawer&&x.Utilities.addClass(this._leftDrawer,"responsive-in")}_optionsHandlerOff(){this._optionsStatus=!1,this._calcDrawer(),this._rightDrawer&&(this._rightDrawer.style.left="100%"),this._contentControl&&(this._contentControl.style.width="calc(100% - "+this._drawerTotalWidth+"px)"),this._rightButton&&(this._rightButton.style.display="flex"),this._rightDrawer&&x.Utilities.removeClass(this._rightDrawer,"responsive-in")}_responsiveOn(){if(!this._responsiveFlag&&this.responsiveWidth){const A=parseFloat(this.responsiveWidth);x.AppServices.AppService.addWidthAction(">=",A,this._boundMenueHandlerOn),x.AppServices.AppService.addWidthAction("<",A,this._boundMenueHandlerOff),this._responsiveFlag=!0}}_responsiveOff(){const A=parseFloat(this.responsiveWidth);x.AppServices.AppService.removeWidthAction(">=",A,this._boundMenueHandlerOn),x.AppServices.AppService.removeWidthAction("<",A,this._boundMenueHandlerOff),this._responsiveFlag=!1}_tmpDrawerOffHandler(x){this._leftDrawerActive&&this._menueDrawOff(),this._rightDrawerActive&&this._optionsDrawOff()}_selectorActionHandler(x){this._titelElement&&x.detail&&x.detail.sender&&x.detail.sender.__VWCONTROL__&&(x.detail&&x.detail.sender&&x.detail.sender._items&&x.detail.sender._items[x.detail.newValue]&&x.detail.sender._items[x.detail.newValue].localizableText?this._titelElement.winControl.localizableText=x.detail.sender._items[x.detail.newValue].localizableText:this._titelElement.winControl.text=x.detail.sender._items[x.detail.newValue].text),this._dragFlagLeft=!1,this._tmpDrawerOffHandler(x)}dispose(){return super.dispose()}}AppSideNavLayout.namespace="VisiWin.UI",AppSideNavLayout.controlName="AppSideNavLayout",AppSideNavLayout.className="vw-appsidenavlayout",AppSideNavLayout.classScrim="vw-appsidenavlayout__scrim",AppSideNavLayout.classClipped="vw-clipped",AppSideNavLayout.propertyList={designerType:{propertyType:"base",defaultValue:"ContentControl"},registerTargetId:{propertyType:"base",defaultValue:"title"},drawerMode:{propertyType:"custom",defaultValue:"Permanent"},responsiveWidth:{propertyType:"member",type:"string",defaultValue:"900px"},edgeSwipeSensitivity:{propertyType:"member",type:"string",defaultValue:"30px"},disableEdgeSwipe:{propertyType:"member",type:"boolean",defaultValue:!1},open:{propertyType:"custom",type:"boolean"},backgroundColor:{propertyType:"memberStyle",type:"string",resourceValue:["getTheme"],defaultValue:"@AppBackgroundColor"},borderColor:{propertyType:"memberStyle",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"}},A.AppSideNavLayout=AppSideNavLayout}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class AppNavDrawer extends x.UI.ControlBase{constructor(A,V){super(A,V),this._selectorElement=null,this._parent=null,this._boundActionHandler=this._actionHandler.bind(this),this.addPropertyList(AppNavDrawer,AppNavDrawer.propertyList),this.defaultConstructor(A,this.inlineOptions,x.UI.AppNavDrawer.controlName,x.UI.AppNavDrawer.className);for(var R=this.element;R.parentElement;)if((R=R.parentElement)&&R.winControl&&"VisiWin.UI.AppSideNavLayout"==R.winControl._controlType){this._parent=R.winControl;break}}removeHandler(){this._selectorElement&&this._selectorElement.winControl.removeEventListener("action",this._boundActionHandler)}registerChild(x,A,V,R){return"Selector"!==x||(V.winControl&&(this._selectorElement=V,V.winControl.addEventListener("action",this._boundActionHandler)),!0)}_actionHandler(x){this._parent&&(this._parent._menueStatus||this._parent._menueDrawOff.bind(this._parent)())}dispose(){return super.dispose()}}AppNavDrawer.namespace="VisiWin.UI",AppNavDrawer.controlName="AppNavDrawer",AppNavDrawer.className="vw-appnavdrawer",AppNavDrawer.propertyList={designerType:{propertyType:"base",type:"string",defaultValue:"ContentControl"},registerSourceId:{propertyType:"base",type:"string",defaultValue:"leftdrawer"},width:{propertyType:"base",type:"string",defaultValue:"256px"},shadow:{propertyType:"base",type:"string",defaultValue:"@Elevation_z4"},backgroundColor:{propertyType:"memberStyle",type:"string",resourceValue:["getTheme"],defaultValue:"@BackgroundColor"},borderColor:{propertyType:"memberStyle",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"}},A.AppNavDrawer=AppNavDrawer}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class AppDrawerHeader extends x.UI.ControlBase{constructor(A,V){super(A,V),this.addPropertyList(AppDrawerHeader,AppDrawerHeader.propertyList),this.defaultConstructor(A,this.inlineOptions,x.UI.AppDrawerHeader.controlName,x.UI.AppDrawerHeader.className)}dispose(){return super.dispose()}}AppDrawerHeader.namespace="VisiWin.UI",AppDrawerHeader.controlName="AppDrawerHeader",AppDrawerHeader.className="vw-appdrawerheader",AppDrawerHeader.propertyList={designerType:{propertyType:"base",type:"string",defaultValue:"ContentControl"},backgroundColor:{propertyType:"memberStyle",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},borderColor:{propertyType:"memberStyle",type:"string",resourceValue:["getTheme"],defaultValue:"@DividerColor"}},A.AppDrawerHeader=AppDrawerHeader}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class AppNavMenu extends x.UI.NavGroupBase{constructor(A,V){super(A,V),this._scrollElement=null,this.addPropertyList(AppNavMenu,AppNavMenu.propertyList),this.defaultConstructor(A,this.inlineOptions,x.UI.AppNavMenu.controlName,x.UI.AppNavMenu.className)}createTemplate(){return this._scrollElement=document.createElement("div"),x.Utilities.addClass(this._scrollElement,"vw-appnavmenu__itemscontainer"),x.Utilities.reparentChildren(this.element,this._scrollElement),this.element.appendChild(this._scrollElement),null}ready(A,V){const R=Object.create(null,{ready:{get:()=>super.ready}});return __awaiter(this,void 0,void 0,(function*(){yield R.ready.call(this,A,V),x.AppServices.NavigationService.addEventListener("onPageChanged",x=>{this._updateMenuItem(x.detail.location)}),x.AppServices.NavigationService.registerMenuItems(this._items)}))}dispose(){return super.dispose()}}AppNavMenu.namespace="VisiWin.UI",AppNavMenu.controlName="AppNavMenu",AppNavMenu.className="vw-appnavmenu",AppNavMenu.propertyList={designerType:{propertyType:"base",type:"string",defaultValue:"ContentControl"},registerTargetId:{propertyType:"base",defaultValue:"Group"},registerSourceId:{propertyType:"base",defaultValue:"Selector"},menuItems:{propertyType:"member",type:"string"},backgroundColor:{propertyType:"memberStyle",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},borderColor:{propertyType:"memberStyle",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"}},A.AppNavMenu=AppNavMenu}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class AppBarLayout extends x.UI.ControlBase{constructor(A,V){super(A,V),this.addPropertyList(AppBarLayout,AppBarLayout.propertyList),this.defaultConstructor(A,this.inlineOptions,x.UI.AppBarLayout.controlName,x.UI.AppBarLayout.className)}ready(){}dispose(){return super.dispose()}}AppBarLayout.namespace="VisiWin.UI",AppBarLayout.controlName="AppBarLayout",AppBarLayout.className="vw-appbarlayout",AppBarLayout.propertyList={designerType:{propertyType:"base",type:"string",defaultValue:"ContentControl"},registerSourceId:{propertyType:"base",type:"string",defaultValue:"Header"},margin:{propertyType:"base",type:"string",defaultValue:"0px"},backgroundColor:{propertyType:"memberStyle",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},borderColor:{propertyType:"memberStyle",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"}},A.AppBarLayout=AppBarLayout}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class AppBar extends x.UI.ControlBase{constructor(A,V){super(A,V),this.addPropertyList(AppBar,AppBar.propertyList),this.defaultConstructor(A,this.inlineOptions,x.UI.AppBar.controlName,x.UI.AppBar.className)}registerChild(x,A,V,R){return!0}dispose(){return super.dispose()}}AppBar.namespace="VisiWin.UI",AppBar.controlName="AppBar",AppBar.className="vw-appbar",AppBar.propertyList={designerType:{propertyType:"base",type:"string",defaultValue:"ContentControl"},registerSourceId:{propertyType:"base",type:"string",defaultValue:"Header"},shadow:{propertyType:"base",type:"string",defaultValue:"@Elevation_z4"},backgroundColor:{propertyType:"memberStyle",type:"string",resourceValue:["getTheme"],defaultValue:"@PrimaryColor"},borderColor:{propertyType:"memberStyle",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"}},A.AppBar=AppBar}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class AppToolbar extends x.UI.ControlBase{constructor(A,V){super(A,V),this.addPropertyList(AppToolbar,AppToolbar.propertyList),this.defaultConstructor(A,this.inlineOptions,x.UI.AppToolbar.controlName,x.UI.AppToolbar.className)}registerChild(x,A,V,R){return!0}dispose(){return super.dispose()}}AppToolbar.namespace="VisiWin.UI",AppToolbar.controlName="AppToolbar",AppToolbar.className="vw-apptoolbar",AppToolbar.propertyList={designerType:{propertyType:"base",type:"string",defaultValue:"ContentControl"},backgroundColor:{propertyType:"memberStyle",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},borderColor:{propertyType:"memberStyle",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"}},A.AppToolbar=AppToolbar}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class AppNavMenuButton extends x.UI.ButtonBase{constructor(A,V){super(A,V),this._symbolElement=null,this.addPropertyList(AppNavMenuButton,AppNavMenuButton.propertyList),this.defaultConstructor(A,this.inlineOptions,x.UI.AppNavMenuButton.controlName,x.UI.AppNavMenuButton.className)}beforeInitBase(){this.registerSourceId="Group"}createTemplate(){return this.element.innerHTML=['<div class="vw-appnavmenubutton" data-win-control="VisiWin.UI.Symbol"></div>'].join("\n"),this._symbolElement=this.element.firstElementChild,this.processElements([this._symbolElement])}createHandler(){x.Utilities.addEventListener(this.element,"touchstart",this.boundPreventEvent)}removeHandler(){x.Utilities.removeEventListener(this.element,"touchstart",this.boundPreventEvent)}dispose(){return super.dispose()}}AppNavMenuButton.namespace="VisiWin.UI",AppNavMenuButton.controlName="AppNavMenuButton",AppNavMenuButton.className="vw-appnavmenubutton",AppNavMenuButton.propertyList={designerType:{propertyType:"base",type:"string",defaultValue:"Control"},symbol:{propertyType:"child",type:"string",child:"_symbolElement",defaultValue:"menu"},symbolType:{propertyType:"child",type:"string",child:"_symbolElement"},symbolSize:{propertyType:"child",type:"string",child:"_symbolElement"},backgroundColor:{propertyType:"memberStyle",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},foregroundColor:{propertyType:"child",type:"string",child:"_symbolElement",defaultValue:"@ForegroundColor"},borderColor:{propertyType:"memberStyle",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"}},A.AppNavMenuButton=AppNavMenuButton}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class AppPageTitle extends x.UI.ControlBase{constructor(A,V){super(A,V),this._textElement=null,this._appSideNavLayout=null,this._boundLocalizableTextHandler=this._localizableTextHandler.bind(this),this._localizableTextObject=null,this._localizableTitle=null,this.addPropertyList(AppPageTitle,AppPageTitle.propertyList),this.defaultConstructor(A,this.inlineOptions,x.UI.AppPageTitle.controlName,x.UI.AppPageTitle.className)}createTemplate(){return this.element.innerHTML=['<div class="vw-apppagetitle__text" data-win-control="VisiWin.UI.TextBlock"></div>'].join("\n"),this._textElement=this.element.firstElementChild,this.processElements([this._textElement])}ready(A,V){x.AppServices.NavigationService.addEventListener("pageTitleChanged",x=>{x.menuTitle&&!x.pageTitle?this.text=x.menuTitle:x.pageTitle?this.text=x.pageTitle:this.text="",x.localizableMenuTitle&&!x.localizebalePageTitle?this.localizableAppPageTitle=x.localizableMenuTitle:x.localizebalePageTitle&&(this.localizableAppPageTitle=x.localizebalePageTitle),null!=this._localizableTitle&&this.locService&&this._localizableTextObject&&(this.locService.removeLocalizedText(this.localizableAppPageTitle,this._boundLocalizableTextHandler,this._localizableTextObject),this._localizableTextObject=null)})}_localizableTextHandler(x){this.text=x.DisplayText}get localizableAppPageTitle(){return this._localizableTitle}set localizableAppPageTitle(x){if(this._localizableTitle!=x){var A=this._localizableTitle;null!=this._localizableTitle&&this.locService&&this._localizableTextObject&&(this.locService.removeLocalizedText(this.localizableAppPageTitle,this._boundLocalizableTextHandler,this._localizableTextObject),this._localizableTextObject=null),this._localizableTitle=x,this.locService&&this.locService.addLocalizedTextAsync(this.localizableAppPageTitle,this._boundLocalizableTextHandler).then(x=>{this._localizableTextObject=x}),this._updateLayoutBase("property","localizableAppPageTitle",x,A),this.dispatchNotifyPropertyChanged("property","localizableAppPageTitle",x,A)}}dispose(){return super.dispose()}}AppPageTitle.namespace="VisiWin.UI",AppPageTitle.controlName="AppPageTitle",AppPageTitle.className="vw-apppagetitle",AppPageTitle.propertyList={designerType:{propertyType:"base",type:"string",defaultValue:"Control"},registerSourceId:{propertyType:"base",defaultValue:"AppTitle"},showText:{propertyType:"child",type:"boolean",child:"_textElement",childProperty:"show",defaultValue:!0},textWidth:{propertyType:"child",type:"string",child:"_textElement",childProperty:"width"},textHeight:{propertyType:"child",type:"string",child:"_textElement",childProperty:"height"},textMargin:{propertyType:"child",type:"string",child:"_textElement",childProperty:"margin"},textPadding:{propertyType:"child",type:"string",child:"_textElement",childProperty:"padding"},text:{propertyType:"child",type:"string",child:"_textElement"},localizableText:{propertyType:"child",type:"string",child:"_textElement"},textAlignment:{propertyType:"child",type:"string",child:"_textElement"},lineClamp:{propertyType:"child",type:"number",child:"_textElement"},textWrapping:{propertyType:"child",type:"string",child:"_textElement"},textTrimming:{propertyType:"child",type:"string",child:"_textElement"},fontClass:{propertyType:"child",type:"string",child:"_textElement",defaultValue:"Title"},fontSize:{propertyType:"child",type:"string",child:"_textElement"},fontWeight:{propertyType:"child",type:"string",child:"_textElement"},lineHeight:{propertyType:"child",type:"string",child:"_textElement"},textContrast:{propertyType:"child",type:"number",child:"_textElement"},uppercase:{propertyType:"child",type:"boolean",child:"_textElement"},backgroundColor:{propertyType:"memberStyle",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},foregroundColor:{propertyType:"child",type:"string",child:"_textElement",defaultValue:"@ForegroundColor"},borderColor:{propertyType:"memberStyle",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"}},A.AppPageTitle=AppPageTitle}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class AppPageNavigator extends x.UI.RegionBase{constructor(A,V){super(A,V),this.home=null,this.addPropertyList(AppPageNavigator,AppPageNavigator.propertyList),this.element.appendChild(this.createPageElement()),this.inlineOptions.home&&(this.home=this.inlineOptions.home),x.AppServices.NavigationService.addEventListener("navigating",this.navigationStarting.bind(this),!1),x.AppServices.NavigationService.addEventListener("navigatedInternal",this.navigationEnding.bind(this),!1),this.defaultConstructor(A,this.inlineOptions,x.UI.AppPageNavigator.controlName,x.UI.AppPageNavigator.className),x.Application.navigator=this}ready(A,V){return __awaiter(this,void 0,void 0,(function*(){this.pageName&&(x.AppServices.NavigationService.startPage=this.pageName)}))}dispose(){return x.AppServices.NavigationService.removeEventListener("navigating",this.navigationStarting.bind(this),!1),x.AppServices.NavigationService.removeEventListener("navigatedInternal",this.navigationEnding.bind(this),!1),super.dispose()}}AppPageNavigator.namespace="VisiWin.UI",AppPageNavigator.controlName="AppPageNavigator",AppPageNavigator.className="vw-apppagenavigator",AppPageNavigator.propertyList={designerType:{propertyType:"base",type:"string",defaultValue:"Control"},backgroundColor:{propertyType:"memberStyle",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},borderColor:{propertyType:"memberStyle",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"}},A.AppPageNavigator=AppPageNavigator}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class AppErrorList extends x.UI.ControlBase{constructor(A,V){super(A,V),this.addPropertyList(AppErrorList,AppErrorList.propertyList),this.defaultConstructor(A,this.inlineOptions,x.UI.AppErrorList.controlName,x.UI.AppErrorList.className)}createTemplate(){var A=null!=this.inlineOptions.foregroundColor?this.inlineOptions.foregroundColor:this.getStyleProperty("foregroundColor")?this.getStyleProperty("foregroundColor"):x.UI.AppErrorList.propertyList.foregroundColor.defaultValue;return this.element.innerHTML=['<div class="vw-apperrorlist__repeater" data-win-control="WinJS.UI.Repeater">','<div class="vw-apperrorlist__template">','<div class="vw-apperrorlist__time" data-win-control="VisiWin.UI.DateTimeVarOut" data-win-bind="winControl.value: time" data-win-options="{foregroundColor:\''+A+"',backgroundColor:'@None',dateTimeMode:'TimeOnly',formatTime:'LongTime',timeTextTrimming:'Clip'}\"></div>",'<div class="vw-apperrorlist__level" data-win-control="VisiWin.UI.TextBlock" data-win-bind="winControl.text: level" data-win-options="{foregroundColor:\''+A+"',backgroundColor:'@None',textAlignment:'Center'}\"></div>",'<div class="vw-apperrorlist__message" data-win-control="VisiWin.UI.TextBlock" data-win-bind="winControl.text: msg" data-win-options="{foregroundColor:\''+A+"',backgroundColor:'@None',lineClamp:0, textWrapping:'Wrap',textTrimming:'Clip'}\"></div>","</div>","</div>"].join("\n"),this._repeaterElement=this.element.firstElementChild,this.processElements([this._repeaterElement])}beforeInit(){this._repeaterElement&&this._repeaterElement.winControl&&(this._repeaterElement.winControl.data=x.Application.currentLogList)}dispose(){return super.dispose()}}AppErrorList.namespace="VisiWin.UI",AppErrorList.controlName="AppErrorList",AppErrorList.className="vw-apperrorlist",AppErrorList.propertyList={designerType:{propertyType:"base",type:"string",defaultValue:"Control"},shadow:{propertyType:"base",type:"string",defaultValue:"@Elevation_z2"},backgroundColor:{propertyType:"memberStyle",type:"string",resourceValue:["getTheme"],defaultValue:"@BackgroundColor"},foregroundColor:{propertyType:"memberStyle",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},borderColor:{propertyType:"memberStyle",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"}},A.AppErrorList=AppErrorList}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class DesignerContainer extends x.UI.RegionBase{constructor(x,A){super(x,A),this.boundNavigatedHandler=this.navigatedHandler.bind(this),this.inlineOptions.debug,this.addPropertyList(DesignerContainer,DesignerContainer.DesignerContainerOptionsList),this.defaultConstructor(x,this.inlineOptions,DesignerContainer.controlName,DesignerContainer.className)}createTemplate(A,V){return x.Utilities.addClass(this.element,"vw-designmode"),A.style.position="relative",A.style.width="100%",A.style.height="100%",this.element.appendChild(this.createPageElement()),null}createHandler(){this.addEventListener("navigated",this.boundNavigatedHandler)}removeHandler(){this.addEventListener("navigated",this.boundNavigatedHandler)}navigatedHandler(A){x.Utilities.setRenderedFontClass()}dispose(){return super.dispose()}}DesignerContainer.namespace="VisiWin.UI",DesignerContainer.controlName="DesignerContainer",DesignerContainer.className="vw-designercontainer",DesignerContainer.classNamePageControl="vw-pagecontrol",DesignerContainer.DesignerContainerOptionsList={designerType:{propertyType:"base",type:"string",defaultValue:"DesignerContainer"},height:{propertyType:"base",defaultValue:"100%"},width:{propertyType:"base",defaultValue:"100%"},pageName:{propertyType:"custom",type:"string"},pageOptions:{propertyType:"member",type:"any",invisible:!0},navEvent:{propertyType:"member",type:"any",invisible:!0},pageControl:{propertyType:"custom",type:"any",access:"ro",invisible:!0},pageElement:{propertyType:"custom",type:"string",access:"ro",invisible:!0}},A.DesignerContainer=DesignerContainer}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class Region extends x.UI.RuntimeRegionBase{constructor(A,V){super(A,V),this.addPropertyList(Region,Region.propertyList),this.defaultConstructor(A,this.inlineOptions,x.UI.Region.controlName,x.UI.Region.className)}createTemplate(){return this.element.appendChild(this.createPageElement()),null}dispose(){return super.dispose()}}Region.namespace="VisiWin.UI",Region.controlName="Region",Region.className="vw-region",Region.propertyList={designerType:{propertyType:"base",type:"string",defaultValue:"Control"},overflow:{propertyType:"style",type:"string"},backgroundColor:{propertyType:"memberStyle",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},borderColor:{propertyType:"memberStyle",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"}},A.Region=Region}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class TextBlock extends x.UI.TextBase{constructor(x,A){super(x,A),this.properties={designerType:{propertyType:"base",defaultValue:"Control"},backgroundColor:{defaultValue:"@None"},foregroundColor:{defaultValue:"@ForegroundColor"},borderColor:{defaultValue:"@None"},disabledBackgroundColor:{defaultValue:"@None"},disabledForegroundColor:{defaultValue:"@DisabledForegroundColor"},disabledBorderColor:{defaultValue:"@None"}},this.cssStyles={baseStyle:!0,css:"\n            .vw-textblock {\n                position: relative;\n                width: auto;\n                height: auto;\n                margin: 0;\n                min-width: 8px;\n                min-height: 8px;\n                border-width: 1px;\n                flex-shrink: 0;\n                -webkit-user-select: none;\n                -moz-user-select: none;\n                -ms-user-select: none;\n                user-select: none\n            }\n        "},this.initialize(TextBlock)}_updateColors(x){"property"!=x.changeType&&"status"!=x.changeType&&"theme"!=x.changeType&&"firstUpdate"!=x.changeName||(this.disabled?(this.setColor("disabledBackgroundColor","backgroundColor"),this.setColor("disabledForegroundColor","foregroundColor"),this.setColor("disabledBorderColor","borderColor")):(this.setColor("backgroundColor","backgroundColor"),this.setColor("foregroundColor","foregroundColor"),this.setColor("borderColor","borderColor")))}_updateLayout(x){"initialized"===x.changeName&&this.isInDesignMode&&"Control"===this.designerType&&(this.text||this.localizableText||(this.text="TextBlock"))}}A.TextBlock=TextBlock}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(x){"use strict";class TextVarOutCore extends x.VariableBase{constructor(x,A){super(x,A),this.inlineOptions.debug,this.addPropertyList(TextVarOutCore,TextVarOutCore.TextVarOutCoreOptionList),this.defaultConstructor(x,this.inlineOptions,TextVarOutCore.controlName,TextVarOutCore.classTextVarOutCore)}dispose(){return super.dispose()}}TextVarOutCore.namespace="VisiWin.UI",TextVarOutCore.controlName="TextVarOutCore",TextVarOutCore.classTextVarOutCore="vw-textvaroutcore",TextVarOutCore.TextVarOutCoreOptionList={},x.TextVarOutCore=TextVarOutCore}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class ValuePresenter extends x.UI.VariableBase{constructor(x,A){super(x,A),this.properties={designerType:{propertyType:"base",defaultValue:"Control"},value:{propertyType:"base",type:"number"},show:{defaultValue:!0},showValue:{propertyType:"controlChild",type:"boolean",child:"_valueControl",childProperty:"show",defaultValue:!0},valueWidth:{propertyType:"controlChild",type:"string",child:"_valueControl",childProperty:"width"},valueHeight:{propertyType:"controlChild",type:"string",child:"_valueControl",childProperty:"height"},valueMargin:{propertyType:"controlChild",type:"string",child:"_valueControl",childProperty:"margin"},valuePadding:{propertyType:"controlChild",type:"string",child:"_valueControl",childProperty:"padding"},valueTextAlignment:{propertyType:"controlChild",type:"string",child:"_valueControl",childProperty:"textAlignment",defaultValue:"Right"},valueLineClamp:{propertyType:"controlChild",type:"number",child:"_valueControl",childProperty:"lineClamp"},valueTextWrapping:{propertyType:"controlChild",type:"string",child:"_valueControl",childProperty:"textWrapping"},valueTextTrimming:{propertyType:"controlChild",type:"string",child:"_valueControl",childProperty:"textTrimming"},valueFontClass:{propertyType:"controlChild",type:"string",child:"_valueControl",childProperty:"fontClass"},valueFontSize:{propertyType:"controlChild",type:"string",child:"_valueControl",childProperty:"fontSize"},valueFontWeight:{propertyType:"controlChild",type:"string",child:"_valueControl",childProperty:"fontWeight"},valueLineHeight:{propertyType:"controlChild",type:"string",child:"_valueControl",childProperty:"lineHeight"},valueTextContrast:{propertyType:"controlChild",type:"number",child:"_valueControl",childProperty:"textContrast"},showUnit:{propertyType:"controlChild",type:"boolean",child:"_unitControl",childProperty:"show",defaultValue:!0},unitWidth:{propertyType:"controlChild",type:"string",child:"_unitControl",childProperty:"width"},unitHeight:{propertyType:"controlChild",type:"string",child:"_unitControl",childProperty:"height",defaultValue:"auto"},unitMargin:{propertyType:"controlChild",type:"string",child:"_unitControl",childProperty:"margin"},unitPadding:{propertyType:"controlChild",type:"string",child:"_unitControl",childProperty:"padding"},unitTextAlignment:{propertyType:"controlChild",type:"string",child:"_unitControl",childProperty:"textAlignment"},unitLineClamp:{propertyType:"controlChild",type:"number",child:"_unitControl",childProperty:"lineClamp"},unitTextWrapping:{propertyType:"controlChild",type:"string",child:"_unitControl",childProperty:"textWrapping"},unitTextTrimming:{propertyType:"controlChild",type:"string",child:"_unitControl",childProperty:"textTrimming"},unitFontClass:{propertyType:"controlChild",type:"string",child:"_unitControl",childProperty:"fontClass"},unitFontSize:{propertyType:"controlChild",type:"string",child:"_unitControl",childProperty:"fontSize"},unitFontWeight:{propertyType:"controlChild",type:"string",child:"_unitControl",childProperty:"fontWeight"},unitLineHeight:{propertyType:"controlChild",type:"string",child:"_unitControl",childProperty:"lineHeight"},unitTextContrast:{propertyType:"controlChild",type:"number",child:"_unitControl",childProperty:"textContrast"},unitPosition:{defaultValue:"Inside"},backgroundColor:{defaultValue:"@None"},valueBackgroundColor:{defaultValue:"@None"},unitBackgroundColor:{defaultValue:"@None"},valueForegroundColor:{defaultValue:"@ForegroundColor"},unitForegroundColor:{defaultValue:"@ForegroundColor"},borderColor:{defaultValue:"@None"},disabledBackgroundColor:{defaultValue:"@None"},disabledForegroundColor:{defaultValue:"@DisabledForegroundColor"},disabledBorderColor:{defaultValue:"@None"}},this.cssStyles={coreStyle:!0,css:"\n            .vw-valuepresenter {\n                position: relative;\n                width: auto;\n                height: auto;\n                border-width: 1px;\n                border-radius: 0;\n                overflow: hidden;\n                display: flex;\n                align-items: center;\n                flex-shrink: 0;\n            }           \n            .vw-valuepresenter__value {\n                width: 100%;\n                flex-shrink: 1;\n            }            \n            .vw-valuepresenter__unit {\n                width: auto;\n                margin: 0 0 0 4px;\n            }          \n        "},this.show=!0,this._valueControl=null,this._unitControl=null,this.initialize(ValuePresenter)}createTemplate(){let x="";return this.verifyShowProperty("showValue")&&(x='<div data-ref="_valueControl" class="vw-valuepresenter__value" data-win-control="VisiWin.UI.TextBlock"></div>'),this.verifyShowProperty("showUnit")&&(x+='<div data-ref="_unitControl" class="vw-valuepresenter__unit" data-win-control="VisiWin.UI.TextBlock"></div>'),this.element.innerHTML=x,this.initializeChilds()}_updateColors(x){"property"!=x.changeType&&"status"!=x.changeType&&"firstUpdate"!=x.changeName||(this.disabled?(this.setColor("disabledBackgroundColor","backgroundColor"),this._valueControl&&(this._valueControl.backgroundColor=this.disabledBackgroundColor,this._valueControl.foregroundColor=this.disabledForegroundColor),this._unitControl&&(this._unitControl.backgroundColor=this.disabledBackgroundColor,this._unitControl.foregroundColor=this.disabledForegroundColor),"Outside"==this.unitPosition?this._valueControl&&(this._valueControl.backgroundColor=this.disabledBorderColor):this.setColor("disabledBorderColor","borderColor")):(this.setColor("backgroundColor"),this._valueControl&&(this._valueControl.backgroundColor=this.valueBackgroundColor,this._valueControl.foregroundColor=this.valueForegroundColor),this._unitControl&&(this._unitControl.backgroundColor=this.unitBackgroundColor,this._unitControl.foregroundColor=this.unitForegroundColor),"Outside"==this.unitPosition?this._valueControl&&(this._valueControl.borderColor=this.borderColor):this.setColor("borderColor")))}_updateLayout(x){"firstUpdate"!=x.changeName&&"formattedValue"!=x.changeName||this._valueControl&&(this._valueControl.text=this.formattedValue),"firstUpdate"!=x.changeName&&"unitText"!=x.changeName||this._unitControl&&(this._unitControl.text=this.unitText),"firstUpdate"!=x.changeName&&"unitPosition"!=x.changeName&&"borderRadius"!=x.changeName&&"borderStyle"!=x.changeName&&"borderWidth"!=x.changeName||("Outside"==this.unitPosition?(this._valueControl.borderRadius=this.borderRadius,this._valueControl.borderStyle=this.borderStyle,this._valueControl.borderWidth=this.borderWidth,this.borderRadius="",this.borderStyle=A.Enums.BorderStyle.None,this.borderWidth=""):(this.borderRadius=this.borderRadius,this.borderStyle=this.borderStyle,this.borderWidth=this.borderWidth,this._valueControl&&(this._valueControl.borderRadius="",this._valueControl.borderStyle="",this._valueControl.borderWidth=""))),"firstUpdate"!=x.changeName&&"show"!=x.changeName||(this.element.style.display=this.show?"flex":"none"),"initialized"===x.changeName&&this.isInDesignMode&&"Control"===this.designerType&&(this.value||(this.value="1234"))}}A.ValuePresenter=ValuePresenter}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class Flyout extends x.UI.ControlBase{constructor(x,A){super(x,A),this._containerElement=null,this.inlineOptions.debug,this.addPropertyList(Flyout,Flyout.FlyoutOptionsList),this.defaultConstructor(x,this.inlineOptions,Flyout.controlName,Flyout.className)}dispose(){return super.dispose()}}Flyout.namespace="VisiWin.UI",Flyout.controlName="Flyout",Flyout.className="Flyout",Flyout.FlyoutOptionsList={},A.Flyout=Flyout,x.Class.classMix(x.UI.Flyout,[WinJS.UI.Flyout])}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class ListView extends x.UI.ControlBase{constructor(x,A){super(x,A),this._listViewElement=null,this._listViewControl=null,this.listOptions={},this.boundcontentanimating=this.contentanimatingHandler.bind(this),this.boundfootervisibilitychanged=this.footervisibilitychangedHandler.bind(this),this.boundgroupheaderinvoked=this.groupheaderinvokedHandler.bind(this),this.boundheadervisibilitychanged=this.headervisibilitychangedHandler.bind(this),this.bounditemdragbetween=this.itemdragbetweenHandler.bind(this),this.bounditemdragchanged=this.itemdragchangedHandler.bind(this),this.bounditemdragdrop=this.itemdragdropHandler.bind(this),this.bounditemdragend=this.itemdragendHandler.bind(this),this.bounditemdragenter=this.itemdragenterHandler.bind(this),this.bounditemdragleave=this.itemdragleaveHandler.bind(this),this.bounditemdragstart=this.itemdragstartHandler.bind(this),this.bounditeminvoked=this.iteminvokedHandler.bind(this),this.boundkeyboardnavigating=this.keyboardnavigatingHandler.bind(this),this.boundloadingstatechanged=this.loadingstatechangedHandler.bind(this),this.boundselectionchanged=this.selectionchangedHandler.bind(this),this.boundselectionchanging=this.selectionchangingHandler.bind(this),this._dataSource=null,this._template=null,this.addPropertyList(ListView,ListView.propertyList),this.defaultConstructor(x,this.inlineOptions,ListView.controlName,ListView.className)}set automaticallyLoadPages(x){this._listViewControl&&(this._listViewControl.automaticallyLoadPages=x),this.listOptions.automaticallyLoadPages=x}get automaticallyLoadPages(){return this._listViewControl?this._listViewControl.automaticallyLoadPages:this.listOptions.automaticallyLoadPages}set currentItem(x){this.listOptions.currentItem=x,this._listViewControl&&(this._listViewControl.currentItem=x)}get currentItem(){return this._listViewControl?this._listViewControl.currentItem:this.listOptions.currentItem}set footer(x){this.listOptions.footer=x,this._listViewControl&&(this._listViewControl.footer=x)}get footer(){return this._listViewControl?this._listViewControl.footer:this.listOptions.footer}set groupDataSource(x){this.listOptions.groupDataSource=x,this._listViewControl&&(this._listViewControl.groupDataSource=x)}get groupDataSource(){return this._listViewControl?this._listViewControl.groupDataSource:this.listOptions.groupDataSource}set groupHeaderTapBehavior(x){this.listOptions.groupHeaderTapBehavior=x,this._listViewControl&&(this._listViewControl.groupHeaderTapBehavior=x)}get groupHeaderTapBehavior(){return this._listViewControl?this._listViewControl.groupHeaderTapBehavior:this.listOptions.groupHeaderTapBehavior}set groupHeaderTemplate(x){this.listOptions.groupHeaderTemplate=x,this._listViewControl&&(this._listViewControl.groupHeaderTemplate=x)}get groupHeaderTemplate(){return this._listViewControl?this._listViewControl.groupHeaderTemplate:this.listOptions.groupHeaderTemplate}set header(x){this.listOptions.header=x,this._listViewControl&&(this._listViewControl.header=x)}get header(){return this._listViewControl?this._listViewControl.header:this.listOptions.header}set indexOfFirstVisible(x){this.listOptions.indexOfFirstVisible=x,this._listViewControl&&(this._listViewControl.indexOfFirstVisible=x)}get indexOfFirstVisible(){return this._listViewControl?this._listViewControl.indexOfFirstVisible:this.listOptions.indexOfFirstVisible}set indexOfLastVisible(x){this.listOptions.indexOfLastVisible=x,this._listViewControl&&(this._listViewControl.indexOfLastVisible=x)}get indexOfLastVisible(){return this._listViewControl?this._listViewControl.indexOfLastVisible:this.listOptions.indexOfLastVisible}set itemDataSource(x){this.listOptions.itemDataSource=x,this._listViewControl&&(this._listViewControl.itemDataSource=x)}get itemDataSource(){return this._listViewControl?this._listViewControl.itemDataSource:this.listOptions.itemDataSource}set itemsDraggable(x){this.listOptions.itemsDraggable=x,this._listViewControl&&(this._listViewControl.itemsDraggable=x)}get itemsDraggable(){return this._listViewControl?this._listViewControl.itemsDraggable:this.listOptions.itemsDraggable}set itemsReorderable(x){this.listOptions.itemsReorderable=x,this._listViewControl&&(this._listViewControl.itemsReorderable=x)}get itemsReorderable(){return this._listViewControl?this._listViewControl.itemsReorderable:this.listOptions.itemsReorderable}set itemTemplate(x){this.listOptions.itemTemplate=x,this._listViewControl&&(this._listViewControl.itemTemplate=x)}get itemTemplate(){return this._listViewControl?this._listViewControl.itemTemplate:this.listOptions.itemTemplate}set layout(x){this.listOptions.layout=x,this._listViewControl&&(this._listViewControl.layout=x)}get layout(){return this._listViewControl?this._listViewControl.layout:this.listOptions.layout}set loadingBehavior(x){this.listOptions.loadingBehavior=x,this._listViewControl&&(this._listViewControl.loadingBehavior=x)}get loadingBehavior(){return this._listViewControl?this._listViewControl.loadingBehavior:this.listOptions.loadingBehavior}set loadingState(x){this.listOptions.loadingState=x,this._listViewControl&&(this._listViewControl.loadingState=x)}get loadingState(){return this._listViewControl?this._listViewControl.loadingState:this.listOptions.loadingState}set maxDeferredItemCleanup(x){this.listOptions.maxDeferredItemCleanup=x,this._listViewControl&&(this._listViewControl.maxDeferredItemCleanup=x)}get maxDeferredItemCleanup(){return this._listViewControl?this._listViewControl.maxDeferredItemCleanup:this.listOptions.maxDeferredItemCleanup}set maxLeadingPages(x){this.listOptions.maxLeadingPages=x,this._listViewControl&&(this._listViewControl.maxLeadingPages=x)}get maxLeadingPages(){return this._listViewControl?this._listViewControl.maxLeadingPages:this.listOptions.maxLeadingPages}set maxTrailingPages(x){this.listOptions.maxTrailingPages=x,this._listViewControl&&(this._listViewControl.maxTrailingPages=x)}get maxTrailingPages(){return this._listViewControl?this._listViewControl.maxTrailingPages:this.listOptions.maxTrailingPages}set pagesToLoad(x){this.listOptions.pagesToLoad=x,this._listViewControl&&(this._listViewControl.pagesToLoad=x)}get pagesToLoad(){return this._listViewControl?this._listViewControl.pagesToLoad:this.listOptions.pagesToLoad}set pagesToLoadThreshold(x){this.listOptions.pagesToLoadThreshold=x,this._listViewControl&&(this._listViewControl.pagesToLoadThreshold=x)}get pagesToLoadThreshold(){return this._listViewControl?this._listViewControl.pagesToLoadThreshold:this.listOptions.pagesToLoadThreshold}set resetGroupHeader(x){this.listOptions.resetGroupHeader=x,this._listViewControl&&(this._listViewControl.resetGroupHeader=x)}get resetGroupHeader(){return this._listViewControl?this._listViewControl.resetGroupHeader:this.listOptions.resetGroupHeader}set resetItem(x){this.listOptions.resetItem=x,this._listViewControl&&(this._listViewControl.resetItem=x)}get resetItem(){return this._listViewControl?this._listViewControl.resetItem:this.listOptions.resetItem}set scrollPosition(x){this.listOptions.scrollPosition=x,this._listViewControl&&(this._listViewControl.scrollPosition=x)}get scrollPosition(){return this._listViewControl?this._listViewControl.scrollPosition:this.listOptions.scrollPosition}set selection(x){this.listOptions.selection=x,this._listViewControl&&(this._listViewControl.selection=x)}get selection(){return this._listViewControl?this._listViewControl.selection:this.listOptions.selection}set selectionMode(x){this.listOptions.selectionMode=x,this._listViewControl&&(this._listViewControl.selectionMode=x)}get selectionMode(){return this._listViewControl?this._listViewControl.selectionMode:this.listOptions.selectionMode}set swipeBehavior(x){this.listOptions.swipeBehavior=x,this._listViewControl&&(this._listViewControl.swipeBehavior=x)}get swipeBehavior(){return this._listViewControl?this._listViewControl.swipeBehavior:this.listOptions.swipeBehavior}set tapBehavior(x){this.listOptions.tapBehavior=x,this._listViewControl&&(this._listViewControl.tapBehavior=x)}get tapBehavior(){return this._listViewControl?this._listViewControl.tapBehavior:this.listOptions.tapBehavior}set zoomableView(x){this.listOptions.zoomableView=x,this._listViewControl&&(this._listViewControl.zoomableView=x)}get zoomableView(){return this._listViewControl?this._listViewControl.zoomableView:this.listOptions.zoomableView}contentanimatingHandler(x){this.dispatchEvent("contentanimating",x)}footervisibilitychangedHandler(x){this.dispatchEvent("footervisibilitychanged",x)}groupheaderinvokedHandler(x){this.dispatchEvent("groupheaderinvoked",x)}headervisibilitychangedHandler(x){this.dispatchEvent("headervisibilitychanged",x)}itemdragbetweenHandler(x){this.dispatchEvent("itemdragbetween",x)}itemdragchangedHandler(x){this.dispatchEvent("itemdragchanged",x)}itemdragdropHandler(x){this.dispatchEvent("itemdragdrop",x)}itemdragendHandler(x){this.dispatchEvent("itemdragend",x)}itemdragenterHandler(x){this.dispatchEvent("itemdragenter",x)}itemdragleaveHandler(x){this.dispatchEvent("itemdragleave",x)}itemdragstartHandler(x){this.dispatchEvent("itemdragstart",x)}iteminvokedHandler(x){this.dispatchEvent("iteminvoked",x)}keyboardnavigatingHandler(x){this.dispatchEvent("keyboardnavigating",x)}loadingstatechangedHandler(x){this.dispatchEvent("loadingstatechanged",x)}selectionchangedHandler(x){this.dispatchEvent("selectionchanged",x)}selectionchangingHandler(x){this.dispatchEvent("selectionchanging",x)}attach(){let A=null;if(!this.isAttached){for(A=super.attach();this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.listOptions.layout||(this.listOptions.layout=new WinJS.UI.ListLayout),this.listOptions.selectionMode||(this.listOptions.selectionMode="single"),this._listViewElement=document.createElement("div"),this._listViewControl=new WinJS.UI.ListView(this._listViewElement,this.listOptions),this.element.appendChild(this._listViewElement),this._listViewElement.setAttribute("id","ListViewId"),x.Utilities.addClass(this._listViewElement,"vw-listview__listview"),this._listViewControl.addEventListener("contentanimating",this.boundcontentanimating),this._listViewControl.addEventListener("footervisibilitychanged",this.boundfootervisibilitychanged),this._listViewControl.addEventListener("groupheaderinvoked",this.boundgroupheaderinvoked),this._listViewControl.addEventListener("headervisibilitychanged",this.boundheadervisibilitychanged),this._listViewControl.addEventListener("itemdragbetween",this.bounditemdragbetween),this._listViewControl.addEventListener("itemdragchanged",this.bounditemdragchanged),this._listViewControl.addEventListener("itemdragdrop:",this.bounditemdragdrop),this._listViewControl.addEventListener("itemdragend:",this.bounditemdragend),this._listViewControl.addEventListener("itemdragenter",this.bounditemdragenter),this._listViewControl.addEventListener("itemdragleave",this.bounditemdragleave),this._listViewControl.addEventListener("itemdragstart:",this.bounditemdragstart),this._listViewControl.addEventListener("iteminvoked:",this.bounditeminvoked),this._listViewControl.addEventListener("keyboardnavigating:",this.boundkeyboardnavigating),this._listViewControl.addEventListener("loadingstatechanged",this.boundloadingstatechanged),this._listViewControl.addEventListener("selectionchanged",this.boundselectionchanged),this._listViewControl.addEventListener("selectionchanging",this.boundselectionchanging)}return A}detach(){let x=null;if(this.isAttached)for(x=super.detach(),this._listViewControl&&(this._listViewControl.removeEventListener("contentanimating",this.boundcontentanimating),this._listViewControl.removeEventListener("footervisibilitychanged",this.boundfootervisibilitychanged),this._listViewControl.removeEventListener("groupheaderinvoked",this.boundgroupheaderinvoked),this._listViewControl.removeEventListener("headervisibilitychanged",this.boundheadervisibilitychanged),this._listViewControl.removeEventListener("itemdragbetween",this.bounditemdragbetween),this._listViewControl.removeEventListener("itemdragchanged",this.bounditemdragchanged),this._listViewControl.removeEventListener("itemdragdrop:",this.bounditemdragdrop),this._listViewControl.removeEventListener("itemdragend:",this.bounditemdragend),this._listViewControl.removeEventListener("itemdragenter",this.bounditemdragenter),this._listViewControl.removeEventListener("itemdragleave",this.bounditemdragleave),this._listViewControl.removeEventListener("itemdragstart:",this.bounditemdragstart),this._listViewControl.removeEventListener("iteminvoked:",this.bounditeminvoked),this._listViewControl.removeEventListener("keyboardnavigating:",this.boundkeyboardnavigating),this._listViewControl.removeEventListener("loadingstatechanged",this.boundloadingstatechanged),this._listViewControl.removeEventListener("selectionchanged",this.boundselectionchanged),this._listViewControl.removeEventListener("selectionchanging",this.boundselectionchanging),this._listViewControl.dispose(),this._listViewControl=null),this._listViewElement&&(this.element.removeChild(this._listViewElement),this._listViewElement=null);this.element&&this.element.firstChild;)this.element.removeChild(this.element.firstChild);return x}get dataSource(){return this._dataSource}set dataSource(x){this._dataSource&&(this.itemDataSource=null,this._dataSource=null),x&&x.dataSource?this._dataSource=x:this._dataSource=x?new WinJS.Binding.List(x):new WinJS.Binding.List,this.itemDataSource=this._dataSource.dataSource}get data(){return this._dataSource}set data(x){this.dataSource=x}set template(x){"string"==typeof x&&(x=document.querySelector(x)),this._template=x,this.listOptions.itemTemplate=x,this._listViewControl&&(this._listViewControl.itemTemplate=x)}get template(){return this._listViewControl?this._listViewControl.itemTemplate:this._template}elementFromIndex(x){return this._listViewControl?this._listViewControl.elementFromIndex(x):null}ensureVisible(x){this._listViewControl&&this._listViewControl.ensureVisible(x)}forceLayout(){this._listViewControl&&this._listViewControl.forceLayout()}indexOfElement(x){return this._listViewControl?this._listViewControl.indexOfElement(x):-1}loadMorePages(){if(this._listViewControl)return this._listViewControl.loadMorePages()}recalculateItemPosition(){if(this._listViewControl)return this._listViewControl.recalculateItemPosition()}triggerDispose(){if(this._listViewControl)return this._listViewControl.recalculateItemPosition()}dispose(){return this.detach(),super.dispose()}}ListView.namespace="VisiWin.UI",ListView.controlName="listview",ListView.className="vw-listview",ListView.propertyList={designerType:{propertyType:"base",type:"string",defaultValue:"ContentControl"},contentanimating:{propertyType:"event"},footervisibilitychanged:{propertyType:"event"},groupheaderinvoked:{propertyType:"event"},headervisibilitychanged:{propertyType:"event"},itemdragbetween:{propertyType:"event"},itemdragchanged:{propertyType:"event"},itemdragdrop:{propertyType:"event"},itemdragend:{propertyType:"event"},itemdragenter:{propertyType:"event"},itemdragleave:{propertyType:"event"},itemdragstart:{propertyType:"event"},iteminvoked:{propertyType:"event"},keyboardnavigating:{propertyType:"event"},loadingstatechanged:{propertyType:"event"},selectionchanged:{propertyType:"event"},selectionchanging:{propertyType:"event"},automaticallyLoadPages:{propertyType:"custom",type:"boolean"},currentItem:{propertyType:"custom",type:"any"},footer:{propertyType:"custom",type:"HTMLElement"},groupDataSource:{propertyType:"custom",type:"any"},groupHeaderTapBehavior:{propertyType:"custom",type:"any"},groupHeaderTemplate:{propertyType:"custom",type:"any"},header:{propertyType:"custom",type:"HTMLElement"},indexOfFirstVisible:{propertyType:"custom",type:"number"},indexOfLastVisible:{propertyType:"custom",type:"number"},itemDataSource:{propertyType:"custom",type:"any"},itemsDraggable:{propertyType:"custom",type:"boolean"},itemsReorderable:{propertyType:"custom",type:"boolean"},itemTemplate:{propertyType:"custom",type:"any"},layout:{propertyType:"custom",type:"any"},loadingBehavior:{propertyType:"custom",type:"string"},loadingState:{propertyType:"custom",type:"string"},maxDeferredItemCleanup:{propertyType:"custom",type:"number"},maxLeadingPages:{propertyType:"custom",type:"number"},maxTrailingPages:{propertyType:"custom",type:"number"},pagesToLoad:{propertyType:"custom",type:"number"},pagesToLoadThreshold:{propertyType:"custom",type:"number"},resetGroupHeader:{propertyType:"custom",type:"any"},resetItem:{propertyType:"custom",type:"any"},scrollPosition:{propertyType:"custom",type:"number"},selection:{propertyType:"custom",type:"any"},selectionMode:{propertyType:"custom",type:"any"},swipeBehavior:{propertyType:"custom",type:"any"},tapBehavior:{propertyType:"custom",type:"any"},zoomableView:{propertyType:"custom",type:"any"},data:{propertyType:"custom",type:"any"},dataSource:{propertyType:"custom",type:"any"},template:{propertyType:"custom",type:"any"},backgroundColor:{propertyType:"memberStyle",type:"string",resourceValue:["getTheme"],defaultValue:"@None"}},A.ListView=ListView}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class Menu extends A.GroupBase{constructor(A,V){super(A,V),this._scrollElement=null,this.addPropertyList(Menu,Menu.propertyList),this.defaultConstructor(A,this.inlineOptions,x.UI.Menu.controlName,x.UI.Menu.className)}createTemplate(){return this._scrollElement=document.createElement("div"),x.Utilities.addClass(this._scrollElement,"vw-menu__container"),x.Utilities.reparentChildren(this.element,this._scrollElement),this.element.appendChild(this._scrollElement),null}_updateColors(){this.setColor("backgroundColor","backgroundColor"),this.setColor("borderColor","borderColor")}dispose(){return super.dispose()}}Menu.namespace="VisiWin.UI",Menu.controlName="Menu",Menu.className="vw-menu",Menu.propertyList={designerType:{propertyType:"base",type:"string",defaultValue_DM:"Control"},registerSourceId:{propertyType:"base",type:"string",defaultValue:"Selector"},registerTargetId:{propertyType:"base",type:"string",defaultValue:"Group"},collectionPropertyName:{propertyType:"member",type:"string"},menuItems:{propertyType:"member",type:"string"},backgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BackgroundColor"},borderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"}},A.Menu=Menu}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class MenuButton extends x.UI.ButtonBase{constructor(x,A){super(x,A),this.inlineOptions.debug,this.inputEventsEnable=!0,this.addPropertyList(MenuButton,MenuButton.MenuButtonOptionsList),this.defaultConstructor(x,this.inlineOptions,MenuButton.controlName,MenuButton.className)}createControl(x,A){return this.element.innerHTML=['<div class="vw-menubutton__symbol" data-win-control="VisiWin.UI.Symbol"}"></div>'].join("\n"),this._symbolElement=this.element.firstElementChild,this.processElements([this._symbolElement])}beforeInit(x,A){this.symbol="more_vert",this.maxInterrations=10,this.registerSourceId="Button"}afterInit(x,A){this.element.style.borderColor="transparent",this.element.style.backgroundColor="transparent"}dispose(){return super.dispose()}}MenuButton.namespace="VisiWin.UI",MenuButton.controlName="MenuButton",MenuButton.className="vw-menubutton",MenuButton.MenuButtonOptionsList={registerSourceId:{propertyType:"base",defaultValue:"Button"},symbol:{propertyType:"child",type:"string",childElement:"_symbolElement"},symbolType:{propertyType:"child",type:"string",childElement:"_symbolElement"},symbolSize:{propertyType:"child",type:"string",childElement:"_symbolElement"}},A.MenuButton=MenuButton}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class Popup extends x.UI.ControlBase{constructor(A,V){super(A,V),this._popupElement=null,this._popupControl=null,this._boundBeforeShowChangedHandler=this._beforeShowChangedHandler.bind(this),this._boundBeforeHideChangedHandler=this._beforeHideChangedHandler.bind(this),this._boundAfterShowChangedHandler=this._afterShowChangedHandler.bind(this),this._boundAfterHideChangedHandler=this._afterHideChangedHandler.bind(this),this._popupBackgroundColor=null,this.addPropertyList(Popup,Popup.propertyList),this.defaultConstructor(A,this.inlineOptions,x.UI.Popup.controlName,x.UI.Popup.className)}createTemplate(){return document.body?this.element.style.display="none":x.Application.ErrorLog.log("VisiWin.UI.Popup.createTemplate: Popup kann nicht erzeugt werden, kein body Element."),null}get popupBackgroundColor(){return this._popupBackgroundColor}set popupBackgroundColor(x){this._popupBackgroundColor=x,this._popupControl&&(this._popupControl.dialogScrimColor=x)}_createPopup(){this._popupElement=document.createElement("div"),document.body.insertBefore(this._popupElement,document.body.firstElementChild),this._popupControl=new WinJS.UI.Popup(this._popupElement,{viewName:this.viewName,modal:"Modal"==this.mode}),this._popupControl&&(this._popupControl.contentControlElement=this.element,this._popupControl.addEventListener("beforeshow",this._boundBeforeShowChangedHandler),this._popupControl.addEventListener("beforehide",this._boundBeforeHideChangedHandler),this._popupControl.addEventListener("aftershow",this._boundAfterShowChangedHandler),this._popupControl.addEventListener("afterhide",this._boundAfterHideChangedHandler))}_beforeShowChangedHandler(x){this.dispatchEvent("beforeShowChanged",x)}_beforeHideChangedHandler(x){this.dispatchEvent("beforeHideChanged",x)}_afterShowChangedHandler(x){this.dispatchEvent("afterShowChanged",x)}_afterHideChangedHandler(x){this.dispatchEvent("afterHideChanged",x)}show(){this._createPopup(),this._popupControl&&(this._popupControl.show(this.viewName,this.anchor,this.placement,this.alignment),this._popupElement.focus())}hide(x){if(this._popupControl){var A=this._popupControl.element,V=A.parentElement;this._popupControl.removeEventListener("beforeshow",this._boundBeforeShowChangedHandler),this._popupControl.removeEventListener("beforehide",this._boundBeforeHideChangedHandler),this._popupControl.removeEventListener("aftershow",this._boundAfterShowChangedHandler),this._popupControl.removeEventListener("afterhide",this._boundAfterHideChangedHandler),this._popupControl.hide(),this._popupControl.dispose(),delete this._popupControl,V.removeChild(A)}this.element.focus()}showAt(x,A){}dispose(){return super.dispose()}}Popup.namespace="VisiWin.UI",Popup.controlName="Popup",Popup.className="vw-popup",Popup.propertyList={designerType:{propertyType:"base",type:"string",defaultValue:"Control"},beforeShowChanged:{propertyType:"event"},beforeHideChanged:{propertyType:"event"},afterShowChanged:{propertyType:"event"},afterHideChanged:{propertyType:"event"},anchor:{propertyType:"member",type:"any"},placement:{propertyType:"member",type:"string"},alignment:{propertyType:"member",type:"string"},mode:{propertyType:"member",type:"string",defaultValue:"NonModal"},viewName:{propertyType:"member",type:"string"},showAtX:{propertyType:"member",type:"string"},showAtY:{propertyType:"member",type:"string"},popupBackgroundColor:{propertyType:"custom",type:"string",defaultColor:"transparent"}},A.Popup=Popup}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class PopupMenu extends x.UI.ControlBase{constructor(A,V){super(A,V),this.anchor=null,this._flyoutElement=null,this._flyoutControl=null,this._menuControl=null,this._regionElement=null,this._regionControl=null,this._boundSelectedIndexChangedHandler=this._selectedIndexChangedHandler.bind(this),this._boundBeforeShowChangedHandler=this._beforeShowChangedHandler.bind(this),this._boundBeforeHideChangedHandler=this._beforeHideChangedHandler.bind(this),this._boundAfterShowChangedHandler=this._afterShowChangedHandler.bind(this),this._boundAfterHideChangedHandler=this._afterHideChangedHandler.bind(this),this._menuElement=null,this.addPropertyList(PopupMenu,PopupMenu.propertyList),this.defaultConstructor(A,this.inlineOptions,x.UI.PopupMenu.controlName,x.UI.PopupMenu.className)}createTemplate(){return document.body?(this._flyoutElement=document.createElement("div"),x.Utilities.addClass(this._flyoutElement,"vw-popupmenu__flyout"),document.body.insertBefore(this._flyoutElement,document.body.firstElementChild),this._flyoutControl=new WinJS.UI.Flyout(this._flyoutElement,{}),this._regionControl=new x.UI.Region(null,{}),this._regionElement=this._regionControl&&this._regionControl.element?this._regionControl.element:null,x.Utilities.removeClass(this._regionElement,"vw-region"),x.Utilities.addClass(this._regionElement,"vw-popupmenu__region")):x.Application.ErrorLog.log("VisiWin.UI.PopupMenu.createTemplate: PopupMenu kann nicht erzeugt werden, kein body Element."),null}createHandler(){this._flyoutControl&&(this._flyoutControl.addEventListener("beforeshow",this._boundBeforeShowChangedHandler),this._flyoutControl.addEventListener("beforehide",this._boundBeforeHideChangedHandler),this._flyoutControl.addEventListener("aftershow",this._boundAfterShowChangedHandler),this._flyoutControl.addEventListener("afterhide",this._boundAfterHideChangedHandler))}removeHandler(){this._flyoutControl&&(this._flyoutControl.removeEventListener("beforeshow",this._boundBeforeShowChangedHandler),this._flyoutControl.removeEventListener("beforehide",this._boundBeforeHideChangedHandler),this._flyoutControl.removeEventListener("aftershow",this._boundAfterShowChangedHandler),this._flyoutControl.removeEventListener("afterhide",this._boundAfterHideChangedHandler)),this._menuControl&&this._menuControl.removeEventListener("selectedIndexChanged",this._boundSelectedIndexChangedHandler)}get menuElement(){return this._menuElement}set menuElement(x){this._cleanFlyoutElement();this._menuElement;this._menuElement&&(this._menuElement=null),this._menuElement=x,this._flyoutElement.insertBefore(this._menuElement,this._flyoutElement.lastChild),this._menuControl&&(this._menuControl.removeEventListener("selectedIndexChanged",this._boundSelectedIndexChangedHandler),this._menuControl=null),this._menuElement&&this._menuElement.winControl&&(this._menuControl=this._menuElement.winControl,this._menuControl.addEventListener("selectedIndexChanged",this._boundSelectedIndexChangedHandler))}_updateLayout(x){"pageName"==x.changeName&&this._regionControl&&(this._regionControl.pageName=this.pageName),"viewName"==x.changeName&&this._regionControl&&(this._regionControl.viewName=this.viewName),"mode"==x.changeName&&"View"==this.mode&&this._regionControl&&this._regionElement&&(this._cleanFlyoutElement(),this._flyoutElement.insertBefore(this._regionElement,this._flyoutElement.lastChild)),"width"==x.changeName&&this._flyoutElement&&(this._flyoutElement.style.width=this.width)}_selectedIndexChangedHandler(x){this.dispatchEvent("selectedIndexChanged",x.detail),this.hide()}_beforeShowChangedHandler(x){this.dispatchEvent("beforeShowChanged",x)}_beforeHideChangedHandler(x){this.dispatchEvent("beforeHideChanged",x)}_afterShowChangedHandler(x){this.dispatchEvent("afterShowChanged",x)}_afterHideChangedHandler(x){this.anchor=null,this.placement=null,this.alignment=null,this.mode=null,this.pageName=null,this.viewName=null,this.width=null,this.height=null,this.margin=null,this.borderRadius=null,this.shadow=null,this._cleanFlyoutElement(),this.dispatchEvent("afterHideChanged",x)}_cleanFlyoutElement(){if(this._flyoutElement&&this._flyoutElement.children.length>0)for(var x=1;x<this._flyoutElement.children.length-1;x++)this._flyoutElement.removeChild(this._flyoutElement.children[x])}show(){if(this._flyoutElement&&this._flyoutControl){var x="";switch(this.placement){case"Top":case"Bottom":case"Left":case"Right":case"Autohorizontal":case"Autovertical":x=this.placement.toLowerCase();break;default:x="auto"}var A="";switch(this.alignment){case"Left":case"Right":A=this.alignment.toLowerCase();break;default:A="center"}"View"!=this.mode&&(this._flyoutElement.style.width=this.width?this.width:this.menuElement&&window.getComputedStyle(this.menuElement,null).getPropertyValue("width").indexOf("%")>-1&&this.anchor?this.anchor.clientWidth+"px":"auto"),this._flyoutControl.show(this.anchor||this.element,x,A)}}hide(){this._flyoutControl&&this._flyoutControl.hide()}showAt(x,A){this._flyoutControl&&this._flyoutControl.showAt(x,A)}dispose(){return this._flyoutControl&&this._flyoutControl.dispose(),super.dispose()}}PopupMenu.namespace="VisiWin.UI",PopupMenu.controlName="PopupMenu",PopupMenu.className="vw-popupmenu",PopupMenu.propertyList={designerType:{propertyType:"base",type:"string",defaultValue:"ContentControl"},beforeShowChanged:{propertyType:"event"},beforeHideChanged:{propertyType:"event"},afterShowChanged:{propertyType:"event"},afterHideChanged:{propertyType:"event"},selectedIndexChanged:{propertyType:"event"},menuElement:{propertyType:"custom",type:"object"},anchor:{propertyType:"member",type:"object"},placement:{propertyType:"member",type:"string"},alignment:{propertyType:"member",type:"string"},mode:{propertyType:"member",type:"string"},pageName:{propertyType:"member",type:"string"},viewName:{propertyType:"member",type:"string"},width:{propertyType:"member",type:"string"},height:{propertyType:"style",type:"string",element:"_flyoutElement"},margin:{propertyType:"style",type:"string",element:"_flyoutElement"},borderRadius:{propertyType:"style",type:"string",element:"_flyoutElement"},shadow:{propertyType:"style",type:"string",style:"boxShadow",element:"_flyoutElement",resourceValue:["getShadow"]}},A.PopupMenu=PopupMenu}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class Popover extends x.UI.ControlBase{constructor(A,V){super(A,V),this.anchor=null,this._flyoutElement=null,this._flyoutControl=null,this._menuControl=null,this._regionElement=null,this._regionControl=null,this._boundSelectedIndexChangedHandler=this._selectedIndexChangedHandler.bind(this),this._boundBeforeShowChangedHandler=this._beforeShowChangedHandler.bind(this),this._boundBeforeHideChangedHandler=this._beforeHideChangedHandler.bind(this),this._boundAfterShowChangedHandler=this._afterShowChangedHandler.bind(this),this._boundAfterHideChangedHandler=this._afterHideChangedHandler.bind(this),this._menuElement=null,this.addPropertyList(Popover,Popover.propertyList),this.defaultConstructor(A,this.inlineOptions,x.UI.Popover.controlName,x.UI.Popover.className)}createTemplate(){return document.body?(this._flyoutElement=document.createElement("div"),x.Utilities.addClass(this._flyoutElement,"vw-popover__flyout"),document.body.insertBefore(this._flyoutElement,document.body.firstElementChild),this._flyoutControl=new WinJS.UI.Flyout(this._flyoutElement,{}),this._regionControl=new x.UI.Region(null,{}),this._regionElement=this._regionControl&&this._regionControl.element?this._regionControl.element:null,x.Utilities.removeClass(this._regionElement,"vw-region"),x.Utilities.addClass(this._regionElement,"vw-popover__region")):x.Application.ErrorLog.log("VisiWin.UI.Popover.createTemplate: Popover kann nicht erzeugt werden, kein body Element."),null}createHandler(){this._flyoutControl&&(this._flyoutControl.addEventListener("beforeshow",this._boundBeforeShowChangedHandler),this._flyoutControl.addEventListener("beforehide",this._boundBeforeHideChangedHandler),this._flyoutControl.addEventListener("aftershow",this._boundAfterShowChangedHandler),this._flyoutControl.addEventListener("afterhide",this._boundAfterHideChangedHandler))}removeHandler(){this._flyoutControl&&(this._flyoutControl.removeEventListener("beforeshow",this._boundBeforeShowChangedHandler),this._flyoutControl.removeEventListener("beforehide",this._boundBeforeHideChangedHandler),this._flyoutControl.removeEventListener("aftershow",this._boundAfterShowChangedHandler),this._flyoutControl.removeEventListener("afterhide",this._boundAfterHideChangedHandler)),this._menuControl&&this._menuControl.removeEventListener("selectedIndexChanged",this._boundSelectedIndexChangedHandler)}get menuElement(){return this._menuElement}set menuElement(A){this._cleanFlyoutElement();this._menuElement;this._menuElement&&(this._menuElement=null),this._menuElement=A,this._flyoutElement&&this._flyoutElement.insertBefore?this._flyoutElement.insertBefore(this._menuElement,this._flyoutElement.lastChild):(this.createTemplate(),this._boundSelectedIndexChangedHandler=this._selectedIndexChangedHandler.bind(this),this._boundBeforeShowChangedHandler=this._beforeShowChangedHandler.bind(this),this._boundBeforeHideChangedHandler=this._beforeHideChangedHandler.bind(this),this._boundAfterShowChangedHandler=this._afterShowChangedHandler.bind(this),this._boundAfterHideChangedHandler=this._afterHideChangedHandler.bind(this),this.createHandler(),this._flyoutElement&&this._flyoutElement.insertBefore?this._flyoutElement.insertBefore(this._menuElement,this._flyoutElement.lastChild):x.Application.WarnLog.log("Popover flyoutElement could not be created")),this._menuControl&&(this._menuControl.removeEventListener("selectedIndexChanged",this._boundSelectedIndexChangedHandler),this._menuControl=null),this._menuElement&&this._menuElement.winControl&&(this._menuControl=this._menuElement.winControl,this._menuControl.addEventListener("selectedIndexChanged",this._boundSelectedIndexChangedHandler))}_updateLayout(x){"pageName"==x.changeName&&this._regionControl&&(this._regionControl.pageName=this.pageName),"viewName"==x.changeName&&this._regionControl&&(this._regionControl.viewName=this.viewName),"mode"==x.changeName&&"View"==this.mode&&this._regionControl&&this._regionElement&&(this._cleanFlyoutElement(),this._flyoutElement.insertBefore(this._regionElement,this._flyoutElement.lastChild)),"width"==x.changeName&&this._flyoutElement&&(this._flyoutElement.style.width=this.width)}_selectedIndexChangedHandler(x){this.dispatchEvent("selectedIndexChanged",x.detail),this.hide()}_beforeShowChangedHandler(x){this.dispatchEvent("beforeShowChanged",x)}_beforeHideChangedHandler(x){this.dispatchEvent("beforeHideChanged",x)}_afterShowChangedHandler(x){this.dispatchEvent("afterShowChanged",x)}_afterHideChangedHandler(x){this.anchor=null,this.placement=null,this.alignment=null,this.mode=null,this.pageName=null,this.viewName=null,this.width=null,this.height=null,this.margin=null,this.borderRadius=null,this.shadow=null,this._cleanFlyoutElement(),this.dispatchEvent("afterHideChanged",x)}_cleanFlyoutElement(){if(this._flyoutElement&&this._flyoutElement.children.length>0)for(var x=1;x<this._flyoutElement.children.length-1;x++)this._flyoutElement.removeChild(this._flyoutElement.children[x])}show(){if(this._flyoutElement&&this._flyoutControl){var x="";switch(this.placement){case"Top":case"Bottom":case"Left":case"Right":case"Autohorizontal":case"Autovertical":x=this.placement.toLowerCase();break;default:x="auto"}var A="";switch(this.alignment){case"Left":case"Right":A=this.alignment.toLowerCase();break;default:A="center"}"View"!=this.mode&&(this._flyoutElement.style.width=this.width?this.width:this.menuElement&&window.getComputedStyle(this.menuElement,null).getPropertyValue("width").indexOf("%")>-1&&this.anchor?this.anchor.clientWidth+"px":"auto"),this._flyoutControl.show(this.anchor||this.element,x,A)}}hide(){this._flyoutControl&&this._flyoutControl.hide()}showAt(x,A){this._flyoutControl&&this._flyoutControl.showAt(x,A)}dispose(){return this._flyoutControl&&(this._flyoutControl.dispose(),this._flyoutControl.element&&this._flyoutControl.element.remove()),super.dispose()}}Popover.namespace="VisiWin.UI",Popover.controlName="Popover",Popover.className="vw-popover",Popover.propertyList={designerType:{propertyType:"base",type:"string",defaultValue:"ContentControl"},beforeShowChanged:{propertyType:"event"},beforeHideChanged:{propertyType:"event"},afterShowChanged:{propertyType:"event"},afterHideChanged:{propertyType:"event"},selectedIndexChanged:{propertyType:"event"},menuElement:{propertyType:"custom",type:"object"},anchor:{propertyType:"member",type:"object"},placement:{propertyType:"member",type:"string"},alignment:{propertyType:"member",type:"string"},mode:{propertyType:"member",type:"string"},pageName:{propertyType:"member",type:"string"},viewName:{propertyType:"member",type:"string"},width:{propertyType:"member",type:"string",forceOverwrite:!0},height:{propertyType:"style",type:"string",forceOverwrite:!0,element:"_flyoutElement"},margin:{propertyType:"style",type:"string",forceOverwrite:!0,element:"_flyoutElement"},borderRadius:{propertyType:"style",type:"string",forceOverwrite:!0,element:"_flyoutElement"},shadow:{propertyType:"style",type:"string",forceOverwrite:!0,style:"boxShadow",element:"_flyoutElement",resourceValue:["getShadow"]}},A.Popover=Popover}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class Button extends x.UI.ButtonBase{constructor(A,V){super(A,V),this._containerElement=null,this._symbolElement=null,this._textElement=null,this.inputEventsEnable=!0,this.addPropertyList(Button,Button.propertyList),this.defaultConstructor(A,this.inlineOptions,x.UI.Button.controlName,x.UI.Button.className)}createTemplate(){if(x.Utilities.isInDesignMode())return this.element.innerHTML=['<div class="vw-button__container">','<div class="vw-button__symbol" data-win-control="VisiWin.UI.Symbol"></div>','<div class="vw-button__text" data-win-control="VisiWin.UI.TextBlock"></div>',"</div>"].join("\n"),this._containerElement=this.element.firstElementChild,this._symbolElement=this._containerElement.firstElementChild,this._textElement=this._symbolElement.nextElementSibling,this.processElements([this._symbolElement,this._textElement]);var A=null!=this.inlineOptions.showSymbol?this.inlineOptions.showSymbol:this.getStyleProperty("showSymbol")?this.getStyleProperty("showSymbol"):x.UI.Button.propertyList.showSymbol.defaultValue,V=null!=this.inlineOptions.showText?this.inlineOptions.showText:this.getStyleProperty("showText")?this.getStyleProperty("showText"):x.UI.Button.propertyList.showText.defaultValue,R='<div class="vw-button__container">';return A&&(R+='<div class="vw-button__symbol" data-win-control="VisiWin.UI.Symbol"></div>'),V&&(R+='<div class="vw-button__text" data-win-control="VisiWin.UI.TextBlock"></div>'),R+="</div>",this.element.innerHTML=R,this._containerElement=this.element.firstElementChild,A?(this._symbolElement=this._containerElement.firstElementChild,V&&(this._textElement=this._symbolElement.nextElementSibling)):V&&(this._textElement=this._containerElement.firstElementChild),this.processElements([this._symbolElement,this._textElement])}_updateColors(x){this.disabled?(this._textElement&&this._textElement.winControl&&this.setColor("disabledForegroundColor","foregroundColor",null,"_textElement"),this._symbolElement&&this._symbolElement.winControl&&this.setColor("disabledForegroundColor","foregroundColor",null,"_symbolElement"),this.setColor("disabledBackgroundColor","backgroundColor"),this.setColor("disabledBorderColor","borderColor"),this._containerElement.style.backgroundColor=""):(this._textElement&&this._textElement.winControl&&this.setColor("foregroundColor","foregroundColor",null,"_textElement"),this._symbolElement&&this._symbolElement.winControl&&this.setColor("foregroundColor","foregroundColor",null,"_symbolElement"),this.setColor("backgroundColor"),this.pressed?(this._textElement&&this._textElement.winControl&&this.setColor("pressedForegroundColor","foregroundColor",null,"_textElement"),this._symbolElement&&this._symbolElement.winControl&&this.setColor("pressedForegroundColor","foregroundColor",null,"_symbolElement"),this.setColor("pressedBackgroundColor","backgroundColor","_containerElement")):this.hover?(this.setColor("hoverBorderColor","borderColor"),this.setColor("hoverBackgroundColor","backgroundColor","_containerElement"),this.setColor("hoverForegroundColor","foregroundColor","_textElement")):(this.setColor("borderColor","borderColor"),this._containerElement.style.backgroundColor="",this.setColor("foregroundColor","foregroundColor","_textElement")))}_updateLayout(x){if("updateLayout"!=x.changeName&&"disabled"!=x.changeName&&"pressed"!=x.changeName&&"shadow"!=x.changeName&&"pressedShadow"!=x.changeName||(this.disabled?this.element.style.boxShadow="":(this.element.style.boxShadow=this.getColor("shadow"),this.pressed&&(this.element.style.boxShadow=this.getColor("pressedShadow")))),"updateLayout"!=x.changeName&&"pressed"!=x.changeName&&"symbol"!=x.changeName&&"symbolPressed"!=x.changeName||this._symbolElement&&this._symbolElement.winControl&&(this.pressed&&this.symbolPressed?this._symbolElement.winControl.symbol=this.symbolPressed:this._symbolElement.winControl.symbol=this.symbol),"updateLayout"==x.changeName||"showSymbol"==x.changeName||"showText"==x.changeName||"symbolPosition"==x.changeName||"textPosition"==x.changeName)if(!this.showSymbol&&this.showText)this._containerElement.style.flexDirection="row",this._containerElement.style.alignItems="Top"==this.textPosition?"flex-start":"Bottom"==this.textPosition?"flex-end":"center",this._containerElement.style.justifyContent="Left"==this.textPosition?"flex-start":"Right"==this.textPosition?"flex-end":"center";else if(this.showSymbol&&!this.showText)this._containerElement.style.flexDirection="row",this._containerElement.style.alignItems="Top"==this.symbolPosition?"flex-start":"Bottom"==this.symbolPosition?"flex-end":"center",this._containerElement.style.justifyContent="Left"==this.symbolPosition?"flex-start":"Right"==this.symbolPosition?"flex-end":"center";else if(this.showSymbol&&this.showText)switch(this._containerElement.style.flexDirection="Left"==this.symbolPosition?"row":"Top"==this.symbolPosition?"column":"Right"==this.symbolPosition?"row-reverse":"Bottom"==this.symbolPosition?"column-reverse":"row",this.textPosition){case"Left":this._containerElement.style.alignItems="Left"==this.symbolPosition||"Right"==this.symbolPosition||"Center"==this.symbolPosition?("Left"==this.symbolPosition||this.symbolPosition,"center"):(this.symbolPosition,"flex-start"),this._containerElement.style.justifyContent="Left"==this.symbolPosition||"Right"==this.symbolPosition||"Center"==this.symbolPosition?"Left"==this.symbolPosition||"Center"==this.symbolPosition?"flex-start":"flex-end":(this.symbolPosition,"center");break;case"Top":this._containerElement.style.alignItems="Left"==this.symbolPosition||"Right"==this.symbolPosition||"Center"==this.symbolPosition?("Left"==this.symbolPosition||this.symbolPosition,"flex-start"):(this.symbolPosition,"center"),this._containerElement.style.justifyContent="Left"==this.symbolPosition||"Right"==this.symbolPosition||"Center"==this.symbolPosition?("Left"==this.symbolPosition||this.symbolPosition,"center"):"Top"==this.symbolPosition?"flex-start":"flex-end";break;case"Right":this._containerElement.style.alignItems="Left"==this.symbolPosition||"Right"==this.symbolPosition||"Center"==this.symbolPosition?("Left"==this.symbolPosition||this.symbolPosition,"center"):(this.symbolPosition,"flex-end"),this._containerElement.style.justifyContent="Left"==this.symbolPosition||"Right"==this.symbolPosition||"Center"==this.symbolPosition?"Left"==this.symbolPosition||"Center"==this.symbolPosition?"flex-end":"flex-start":(this.symbolPosition,"center");break;case"Bottom":this._containerElement.style.alignItems="Left"==this.symbolPosition||"Right"==this.symbolPosition||"Center"==this.symbolPosition?("Left"==this.symbolPosition||this.symbolPosition,"flex-end"):(this.symbolPosition,"center"),this._containerElement.style.justifyContent="Left"==this.symbolPosition||"Right"==this.symbolPosition||"Center"==this.symbolPosition?("Left"==this.symbolPosition||this.symbolPosition,"center"):"Top"==this.symbolPosition?"flex-end":"flex-start";break;default:this._containerElement.style.alignItems="center",this._containerElement.style.justifyContent="center"}}dispose(){return super.dispose()}}Button.namespace="VisiWin.UI",Button.controlName="Button",Button.className="vw-button",Button.propertyList={designerType:{propertyType:"base",type:"string",defaultValue_DM:"Control"},padding:{propertyType:"style",type:"string",element:"_containerElement",forceOverwrite:!0},transition:{propertyType:"style",type:"string"},shadow:{propertyType:"member",type:"string",resourceValue:["getShadow"],forceOverwrite:!0},pressedShadow:{propertyType:"member",type:"string",resourceValue:["getShadow"]},containerBorderWidth:{propertyType:"style",type:"string",element:"_containerElement",style:"borderWidth"},containerBorderStyle:{propertyType:"style",type:"string",element:"_containerElement",style:"borderStyle"},containerBorderRadius:{propertyType:"style",type:"string",element:"_containerElement",style:"borderRadius"},containerTransition:{propertyType:"style",type:"string",element:"_containerElement",style:"transition"},showSymbol:{propertyType:"child",type:"boolean",child:"_symbolElement",childProperty:"show",defaultValue:!1},iconFont:{propertyType:"child",type:"string",child:"_symbolElement"},symbol:{propertyType:"member",type:"string"},symbolPressed:{propertyType:"member",type:"string"},symbolType:{propertyType:"child",type:"string",child:"_symbolElement"},symbolSize:{propertyType:"child",type:"string",child:"_symbolElement"},symbolMargin:{propertyType:"child",type:"string",child:"_symbolElement",childProperty:"margin"},symbolPosition:{propertyType:"member",type:"string",defaultValue:"Center"},showText:{propertyType:"child",type:"boolean",child:"_textElement",childProperty:"show",defaultValue:!0},textWidth:{propertyType:"child",type:"string",child:"_textElement",childProperty:"width"},textHeight:{propertyType:"child",type:"string",child:"_textElement",childProperty:"height"},textMargin:{propertyType:"child",type:"string",child:"_textElement",childProperty:"margin"},textPadding:{propertyType:"child",type:"string",child:"_textElement",childProperty:"padding"},text:{propertyType:"child",type:"string",child:"_textElement",forceOverwrite:!0,defaultValue:"Button"},localizableText:{propertyType:"child",type:"string",child:"_textElement",forceOverwrite:!0},textAlignment:{propertyType:"child",type:"string",child:"_textElement"},lineClamp:{propertyType:"child",type:"number",child:"_textElement"},textWrapping:{propertyType:"child",type:"string",child:"_textElement"},textTrimming:{propertyType:"child",type:"string",child:"_textElement"},fontClass:{propertyType:"child",type:"string",child:"_textElement",forceOverwrite:!0,defaultValue:"Button"},fontSize:{propertyType:"child",type:"string",child:"_textElement",forceOverwrite:!0},fontWeight:{propertyType:"child",type:"string",child:"_textElement",forceOverwrite:!0},lineHeight:{propertyType:"child",type:"string",child:"_textElement",forceOverwrite:!0},textContrast:{propertyType:"child",type:"number",child:"_textElement"},uppercase:{propertyType:"child",type:"boolean",child:"_textElement"},textPosition:{propertyType:"member",type:"string",defaultValue:"Center"},backgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ChromeMedium"},hoverBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@HoverBackgroundColor"},hoverForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},pressedBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@PressedBackgroundColor"},disabledBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledBackgroundColor"},foregroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},pressedForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},disabledForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledForegroundColor"},borderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"},hoverBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@HoverBorderColor"},disabledBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledBorderColor"}},A.Button=Button}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class Checkbox extends x.UI.CheckboxBase{constructor(A,V){super(A,V),this._containerElement=null,this._checkmarkElement=null,this._checkmarkSymbolElement=null,this._labelElement=null,this.observe={checked:function(x){this._updateColorsBase("property","checked",x.newValue,x.oldValue),this._updateLayoutBase("property","checked",x.newValue,x.oldValue)}},this.inputEventsEnable=!0,this.addPropertyList(Checkbox,Checkbox.propertyList),this.defaultConstructor(A,this.inlineOptions,x.UI.Checkbox.controlName,x.UI.Checkbox.className)}createTemplate(){if(x.Utilities.isInDesignMode())return this.element.innerHTML=['<div class="vw-checkbox__container">','<div class="vw-checkbox__checkmark">','<div class="vw-checkbox__checkmarksymbol" data-win-control="VisiWin.UI.Symbol"></div>',"</div>",'<div class="vw-checkbox__label" data-win-control="VisiWin.UI.TextBlock"></div>',"</div>"].join("\n"),this._containerElement=this.element.firstElementChild,this._checkmarkElement=this._containerElement.firstElementChild,this._checkmarkSymbolElement=this._checkmarkElement.firstElementChild,this._labelElement=this._checkmarkElement.nextElementSibling,this.processElements([this._checkmarkSymbolElement,this._labelElement]);var A=null!=this.inlineOptions.showLabel?this.inlineOptions.showLabel:this.getStyleProperty("showLabel")?this.getStyleProperty("showLabel"):x.UI.Checkbox.propertyList.showLabel.defaultValue,V='<div class="vw-checkbox__container">';return V+=['<div class="vw-checkbox__checkmark">','<div class="vw-checkbox__checkmarksymbol" data-win-control="VisiWin.UI.Symbol"></div>',"</div>"].join("\n"),A&&(V+='<div class="vw-checkbox__label" data-win-control="VisiWin.UI.TextBlock"></div>'),V+="</div>",this.element.innerHTML=V,this._containerElement=this.element.firstElementChild,this._checkmarkElement=this._containerElement.firstElementChild,this._checkmarkSymbolElement=this._checkmarkElement.firstElementChild,A&&(this._labelElement=this._checkmarkElement.nextElementSibling),this.processElements([this._checkmarkSymbolElement,this._labelElement])}_updateColors(x){this.disabled?(this._labelElement&&this._labelElement.winControl&&this.setColor("disabledForegroundColor","foregroundColor",null,"_labelElement"),this.setColor("disabledBackgroundColor","backgroundColor"),this.setColor("disabledBorderColor","borderColor"),this._containerElement.style.backgroundColor="",this.checked?(this.setColor("disabledCheckedCheckmarkForegroundColor","foregroundColor",null,"_checkmarkSymbolElement"),this.setColor("disabledCheckedCheckmarkBackgroundColor","backgroundColor","_checkmarkElement"),this.setColor("disabledCheckedCheckmarkBorderColor","borderColor","_checkmarkElement")):(this.setColor("disabledCheckmarkForegroundColor","foregroundColor",null,"_checkmarkSymbolElement"),this.setColor("disabledCheckmarkBackgroundColor","backgroundColor","_checkmarkElement"),this.setColor("disabledCheckmarkBorderColor","borderColor","_checkmarkElement"))):this.checked?(this._labelElement&&this._labelElement.winControl&&this.setColor("checkedForegroundColor","foregroundColor",null,"_labelElement"),this.setColor("checkedBackgroundColor","backgroundColor"),this.pressed?(this._labelElement&&this._labelElement.winControl&&this.setColor("checkedPressedForegroundColor","foregroundColor",null,"_labelElement"),this.setColor("checkedPressedBackgroundColor","backgroundColor","_containerElement"),this.setColor("checkedPressedCheckmarkForegroundColor","foregroundColor",null,"_checkmarkSymbolElement"),this.setColor("checkedPressedCheckmarkBackgroundColor","backgroundColor","_checkmarkElement"),this.setColor("checkedPressedCheckmarkBorderColor","borderColor","_checkmarkElement")):this.hover?(this.setColor("checkedHoverBorderColor","borderColor"),this.setColor("checkedHoverBackgroundColor","backgroundColor","_containerElement"),this.setColor("checkedHoverCheckmarkForegroundColor","foregroundColor",null,"_checkmarkSymbolElement"),this.setColor("checkedHoverCheckmarkBackgroundColor","backgroundColor","_checkmarkElement"),this.setColor("checkedHoverCheckmarkBorderColor","borderColor","_checkmarkElement"),this.setColor("checkedHoverForegroundColor","foregroundColor","_labelElement")):(this.setColor("checkedBorderColor","borderColor"),this._containerElement.style.backgroundColor="",this.setColor("checkedForegroundColor","foregroundColor","_labelElement"),this.setColor("checkedCheckmarkForegroundColor","foregroundColor",null,"_checkmarkSymbolElement"),this.setColor("checkedCheckmarkBackgroundColor","backgroundColor","_checkmarkElement"),this.setColor("checkedCheckmarkBorderColor","borderColor","_checkmarkElement"))):(this._labelElement&&this._labelElement.winControl&&this.setColor("foregroundColor","foregroundColor",null,"_labelElement"),this.setColor("backgroundColor"),this.pressed?(this._labelElement&&this._labelElement.winControl&&this.setColor("pressedForegroundColor","foregroundColor",null,"_labelElement"),this.setColor("pressedBackgroundColor","backgroundColor","_containerElement"),this.setColor("pressedCheckmarkForegroundColor","foregroundColor",null,"_checkmarkSymbolElement"),this.setColor("pressedCheckmarkBackgroundColor","backgroundColor","_checkmarkElement"),this.setColor("pressedCheckmarkBorderColor","borderColor","_checkmarkElement")):this.hover?(this.setColor("hoverBorderColor","borderColor"),this.setColor("hoverBackgroundColor","backgroundColor","_containerElement"),this.setColor("hoverCheckmarkForegroundColor","foregroundColor",null,"_checkmarkSymbolElement"),this.setColor("hoverCheckmarkBackgroundColor","backgroundColor","_checkmarkElement"),this.setColor("hoverCheckmarkBorderColor","borderColor","_checkmarkElement"),this.setColor("hoverForegroundColor","foregroundColor","_labelElement")):(this.setColor("borderColor","borderColor"),this._containerElement.style.backgroundColor="",this.setColor("foregroundColor","foregroundColor","_labelElement"),this.setColor("checkmarkForegroundColor","foregroundColor",null,"_checkmarkSymbolElement"),this.setColor("checkmarkBackgroundColor","backgroundColor","_checkmarkElement"),this.setColor("checkmarkBorderColor","borderColor","_checkmarkElement")))}_updateLayout(x){if("updateLayout"!=x.changeName&&"text"!=x.changeName||this._labelElement&&this._labelElement.winControl&&(this.checked?this.textOn?this._labelElement.winControl.text=this.textOn:this._labelElement.winControl.text=this.text:this.checked?this._labelElement.winControl.text=this.text:this.textOff?this._labelElement.winControl.text=this.textOff:this._labelElement.winControl.text=this.text),"updateLayout"!=x.changeName&&"checked"!=x.changeName&&"checkmarkSymbolOn"!=x.changeName&&"checkmarkSymbolOff"!=x.changeName||(this.checkmarkSymbolOn||this.checkmarkSymbolOff)&&(this.checked?this.checkmarkSymbol=this.checkmarkSymbolOn:this.checkmarkSymbol=this.checkmarkSymbolOff),"updateLayout"==x.changeName||"labelPosition"==x.changeName)switch(this.labelPosition){case"Left":this._containerElement.style.flexDirection="row-reverse";break;case"Right":this._containerElement.style.flexDirection="row"}}dispose(){return super.dispose()}}Checkbox.namespace="VisiWin.UI",Checkbox.controlName="Checkbox",Checkbox.className="vw-checkbox",Checkbox.propertyList={designerType:{propertyType:"base",type:"string",defaultValue_DM:"Control"},rippleTarget:{propertyType:"base",type:"string",defaultValue:"_checkmarkElement"},checkmarkBorderWidth:{propertyType:"style",type:"string",element:"_checkmarkElement",style:"borderWidth"},checkmarkBorderStyle:{propertyType:"style",type:"enum",element:"_checkmarkElement",style:"borderStyle"},checkmarkBorderRadius:{propertyType:"style",type:"string",element:"_checkmarkElement",style:"borderRadius"},checkmarkWidth:{propertyType:"style",type:"string",element:"_checkmarkElement",style:"width"},checkmarkHeight:{propertyType:"style",type:"string",element:"_checkmarkElement",style:"height"},checkmarkMargin:{propertyType:"style",type:"string",element:"_checkmarkElement",style:"margin"},checkmarkPadding:{propertyType:"style",type:"string",element:"_checkmarkElement",style:"padding"},checkmarkIconFont:{propertyType:"child",type:"string",child:"_checkmarkSymbolElement",childProperty:"iconFont"},checkmarkSymbol:{propertyType:"child",type:"string",child:"_checkmarkSymbolElement",childProperty:"symbol",defaultValue:"check"},checkmarkSymbolOn:{propertyType:"member",type:"string"},checkmarkSymbolOff:{propertyType:"member",type:"string"},checkmarkSymbolType:{propertyType:"child",type:"string",child:"_checkmarkSymbolElement",childProperty:"symbolType"},checkmarkSymbolSize:{propertyType:"child",type:"string",child:"_checkmarkSymbolElement",childProperty:"symbolSize",defaultValue:"30px"},checkmarkSymbolMargin:{propertyType:"child",type:"string",child:"_checkmarkSymbolElement",childProperty:"margin"},showLabel:{propertyType:"child",type:"boolean",child:"_labelElement",childProperty:"show",defaultValue:!0},labelWidth:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"width"},labelHeight:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"height"},labelMargin:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"margin"},labelPadding:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"padding"},useVariableText:{propertyType:"base",type:"boolean"},labelText:{propertyType:"clone",type:"string",forceOverwrite:!0,cloneProperty:"text",defaultValue:"Checkbox"},localizableLabelText:{propertyType:"clone",type:"string",forceOverwrite:!0,cloneProperty:"localizableText"},labelTextOn:{propertyType:"clone",type:"string",cloneProperty:"textOn"},localizableLabelTextOn:{propertyType:"clone",type:"string",cloneProperty:"localizableTextOn"},labelTextOff:{propertyType:"clone",type:"string",cloneProperty:"textOff"},localizableLabelTextOff:{propertyType:"clone",type:"string",cloneProperty:"localizableTextOff"},labelTextAlignment:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"textAlignment"},labelLineClamp:{propertyType:"child",type:"number",child:"_labelElement",childProperty:"lineClamp"},labelTextWrapping:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"textWrapping"},labelTextTrimming:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"textTrimming"},labelFontClass:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"fontClass"},labelFontSize:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"fontSize"},labelFontWeight:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"fontWeight"},labelLineHeight:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"lineHeight"},labelTextContrast:{propertyType:"child",type:"number",child:"_labelElement",childProperty:"textContrast"},labelUppercase:{propertyType:"child",type:"boolean",child:"_labelElement",childProperty:"uppercase"},labelPosition:{propertyType:"member",type:"string",defaultValue:"Right"},backgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BackgroundColor"},hoverBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},pressedBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},checkedBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BackgroundColor"},checkedHoverBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},checkedPressedBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},disabledBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledBackgroundColor"},foregroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},pressedForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},checkedForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},checkedPressedForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},disabledForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledForegroundColor"},hoverForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},borderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"},hoverBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@HoverBorderColor"},checkedBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@CheckedBorderColor"},checkedHoverBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@CheckedHoverBorderColor"},disabledBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledBorderColor"},checkmarkForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@Transparent"},hoverCheckmarkForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@Transparent"},pressedCheckmarkForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@Transparent"},checkedCheckmarkForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},checkedHoverCheckmarkForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},checkedPressedCheckmarkForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},disabledCheckmarkForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledForegroundColor"},disabledCheckedCheckmarkForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledForegroundColor"},checkedHoverForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},checkmarkBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},hoverCheckmarkBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},pressedCheckmarkBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},checkedCheckmarkBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},checkedHoverCheckmarkBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},checkedPressedCheckmarkBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},disabledCheckmarkBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},disabledCheckedCheckmarkBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledForegroundColor"},checkmarkBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},hoverCheckmarkBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},pressedCheckmarkBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},checkedCheckmarkBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},checkedHoverCheckmarkBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},checkedPressedCheckmarkBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},disabledCheckmarkBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledForegroundColor"},disabledCheckedCheckmarkBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledForegroundColor"}},A.Checkbox=Checkbox}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class DonutGauge extends x.UI.ControlBase{constructor(x,A){super(x,A),this.properties={designerType:{propertyType:"base",defaultValue:"Control"},registerTargetId:{propertyType:"base",defaultValue:"DonutGaugeLimit"},value:{propertyType:"member",type:"number"},variableName:{propertyType:"controlChild",type:"string",child:"_gaugeCoreControl"},decimalPlaces:{propertyType:"controlChild",type:"number",child:"_gaugeCoreControl"},useRawValue:{propertyType:"member",type:"boolean"},rawLimitMin:{propertyType:"controlChild",type:"number",child:"_gaugeCoreControl"},rawLimitMax:{propertyType:"controlChild",type:"number",child:"_gaugeCoreControl"},useVariableLimits:{propertyType:"controlChild",type:"boolean",child:"_gaugeCoreControl"},limits:{propertyType:"member",type:"any"},startAngle:{propertyType:"controlChild",type:"number",child:"_gaugeCoreControl"},endAngle:{propertyType:"controlChild",type:"number",child:"_gaugeCoreControl"},innerRadius:{propertyType:"controlChild",type:"string",child:"_gaugeCoreControl"},outerRadius:{propertyType:"controlChild",type:"string",child:"_gaugeCoreControl"},showValueLabel:{propertyType:"controlChild",child:"_valueLabelControl",childProperty:"show",type:"boolean",defaultValue:!0},valueLabelBorderWidth:{propertyType:"controlChild",child:"_valueLabelControl",childProperty:"borderWidth"},valueLabelBorderStyle:{propertyType:"controlChild",child:"_valueLabelControl",childProperty:"borderStyle"},valueLabelBorderRadius:{propertyType:"controlChild",child:"_valueLabelControl",childProperty:"borderRadius"},valueLabelWidth:{propertyType:"controlChild",child:"_valueLabelControl",childProperty:"width"},valueLabelHeight:{propertyType:"controlChild",child:"_valueLabelControl",childProperty:"height"},valueLabelMargin:{propertyType:"controlChild",child:"_valueLabelControl",childProperty:"margin"},valueLabelPadding:{propertyType:"controlChild",child:"_valueLabelControl",childProperty:"padding"},valueLabelPosition:{defaultValue:"Center"},showValue:{propertyType:"controlChild",type:"boolean",child:"_valueLabelControl",defaultValue:!0},valueWidth:{propertyType:"controlChild",type:"string",child:"_valueLabelControl"},valueHeight:{propertyType:"controlChild",type:"string",child:"_valueLabelControl"},valueMargin:{propertyType:"controlChild",type:"string",child:"_valueLabelControl"},valuePadding:{propertyType:"controlChild",type:"string",child:"_valueLabelControl"},valueTextAlignment:{propertyType:"controlChild",type:"string",child:"_valueLabelControl"},valueLineClamp:{propertyType:"controlChild",type:"number",child:"_valueLabelControl"},valueTextWrapping:{propertyType:"controlChild",type:"string",child:"_valueLabelControl"},valueTextTrimming:{propertyType:"controlChild",type:"string",child:"_valueLabelControl"},valueFontClass:{propertyType:"controlChild",type:"string",child:"_valueLabelControl"},valueFontSize:{propertyType:"controlChild",type:"string",child:"_valueLabelControl"},valueFontWeight:{propertyType:"controlChild",type:"string",child:"_valueLabelControl"},valueLineHeight:{propertyType:"controlChild",type:"string",child:"_valueLabelControl"},valueTextContrast:{propertyType:"controlChild",type:"number",child:"_valueLabelControl"},showUnit:{propertyType:"controlChild",type:"boolean",child:"_valueLabelControl",defaultValue:!0},unitWidth:{propertyType:"controlChild",type:"string",child:"_valueLabelControl"},unitHeight:{propertyType:"controlChild",type:"string",child:"_valueLabelControl"},unitMargin:{propertyType:"controlChild",type:"string",child:"_valueLabelControl"},unitPadding:{propertyType:"controlChild",type:"string",child:"_valueLabelControl"},useVariableUnitText:{propertyType:"controlChild",type:"string",child:"_valueLabelControl"},unitText:{propertyType:"controlChild",type:"string",child:"_valueLabelControl"},localizableUnitText:{propertyType:"controlChild",type:"string",child:"_valueLabelControl"},unitTextAlignment:{propertyType:"controlChild",type:"string",child:"_valueLabelControl"},unitLineClamp:{propertyType:"controlChild",type:"number",child:"_valueLabelControl"},unitTextWrapping:{propertyType:"controlChild",type:"string",child:"_valueLabelControl"},unitTextTrimming:{propertyType:"controlChild",type:"string",child:"_valueLabelControl"},unitFontClass:{propertyType:"controlChild",type:"string",child:"_valueLabelControl"},unitFontSize:{propertyType:"controlChild",type:"string",child:"_valueLabelControl"},unitFontWeight:{propertyType:"controlChild",type:"string",child:"_valueLabelControl"},unitLineHeight:{propertyType:"controlChild",type:"string",child:"_valueLabelControl"},unitTextContrast:{propertyType:"controlChild",type:"number",child:"_valueLabelControl"},unitPosition:{propertyType:"controlChild",type:"string",child:"_valueLabelControl"},backgroundColor:{defaultValue:"@BackgroundColor"},valueLabelBackgroundColor:{defaultValue:"@None"},valueBackgroundColor:{defaultValue:"@None"},unitBackgroundColor:{defaultValue:"@None"},indicatorBackgroundColor:{defaultValue:"@ChromeMediumHigh"},indicatorColor:{defaultValue:"@PrimaryColor"},valueForegroundColor:{defaultValue:"@ForegroundColor"},unitForegroundColor:{defaultValue:"@ForegroundColor"},borderColor:{defaultValue:"@BorderColor"},valueLabelBorderColor:{defaultValue:"@BorderColor"},disabledForegroundColor:{defaultValue:"@DisabledForegroundColor"},disabledBackgroundColor:{defaultValue:"@DisabledBackgroundColor"},disabledBorderColor:{defaultValue:"@DisabledBorderColor"},disabledIndicatorBackgroundColor:{defaultValue:"@ChromeMediumLow"},disabledIndicatorColor:{defaultValue:"@ChromeMedium"}},this.cssStyles={css:"\n            .vw-donutgauge {\n                position: relative;\n                width:  150px;\n                height: 150px;\n                margin: 8px;\n                border-width: 1px;\n                display: flex;\n                flex-shrink: 0;\n            }\n            .vw-donutgauge__core {\n                position: absolute;\n                width:  100%;\n                height: 100%;\n                margin: 0px;\n            }   \n            .vw-donutgauge__valuelabel {\n                position: relative;\n                margin: 0px;\n            }           \n        "},this.limits=[],this._gaugeCoreControl=null,this._valueLabelControl=null,this.limitsCollection=[],this.initialize(DonutGauge)}createTemplate(){let x=document.createElement("div");this.reparentChildren(this.element,x);let A="";return A='<div  data-ref="_gaugeCoreControl" class="vw-donutgauge__core" data-win-control="VisiWin.UI.DonutGaugeCore"></div>',this.verifyShowProperty("showValueLabel")&&(A+='<div data-ref="_valueLabelControl" class="vw-donutgauge__valuelabel" data-win-control="VisiWin.UI.ValuePresenter"></div>'),this.element.innerHTML=A,this.reparentChildren(x,this.element),this.initializeChilds()}registerChild(x,A,V,R){return A===this.registerTargetId&&V&&V.winControl&&(this.limitsCollection.push(V.winControl),this.isInDesignMode?(V.style.display="none",V.winControl.addEventListener("notifyPropertyChanged",this._limitsChangedHandler.bind(this))):V.remove()),!1}_updateColors(x){"property"!=x.changeType&&"status"!=x.changeType&&"afterInit"!=x.changeName&&"theme"!=x.changeType||(this.disabled?(this.setColor("disabledBackgroundColor","backgroundColor"),this.setColor("disabledBorderColor","borderColor"),this._gaugeCoreControl.indicatorBackgroundColor=this.disabledIndicatorBackgroundColor,this._gaugeCoreControl.indicatorColor=this.disabledIndicatorColor,this._valueLabelControl&&(this._valueLabelControl.backgroundColor=this.disabledBackgroundColor,this._valueLabelControl.valueBackgroundColor=this.disabledBackgroundColor,this._valueLabelControl.unitBackgroundColor=this.disabledBackgroundColor,this._valueLabelControl.valueForegroundColor=this.disabledForegroundColor,this._valueLabelControl.unitForegroundColor=this.disabledForegroundColor,this._valueLabelControl.borderColor=this.disabledBorderColor)):(this.setColor("backgroundColor","backgroundColor"),this.setColor("borderColor","borderColor"),this._gaugeCoreControl.indicatorBackgroundColor=this.indicatorBackgroundColor,this._gaugeCoreControl.indicatorColor=this.indicatorColor,this._valueLabelControl&&(this._valueLabelControl.backgroundColor=this.valueLabelBackgroundColor,this._valueLabelControl.valueBackgroundColor=this.valueBackgroundColor,this._valueLabelControl.unitBackgroundColor=this.unitBackgroundColor,this._valueLabelControl.valueForegroundColor=this.valueForegroundColor,this._valueLabelControl.unitForegroundColor=this.unitForegroundColor,this._valueLabelControl.borderColor=this.valueLabelBorderColor)))}_updateLayout(x){if("afterInit"!=x.changeName&&"variableName"!=x.changeName&&"useRawValue"!=x.changeName||(this._valueLabelControl&&(this._valueLabelControl.variableName=this.variableName,this._valueLabelControl.useRawValue=this.useRawValue||!1),this._gaugeCoreControl.useRawValue=this.useRawValue||!1),"afterInit"!=x.changeName&&"decimalPlaces"!=x.changeName||this._valueLabelControl&&(this._valueLabelControl.decimalPlaces=this.decimalPlaces),"afterInit"==x.changeName&&this.isInDesignMode&&"Control"===this.designerType&&(null==this.value?this.value=40:this._gaugeCoreControl.value=this._valueLabelControl.value=this.value),"value"!=x.changeName&&"afterInit"!=x.changeName&&"unitText"!=x.changeName&&"showUnit"!=x.changeName&&"showValue"!=x.changeName||(this._gaugeCoreControl.value=this._valueLabelControl.value=this.value,this._valueLabelControl.unitText=this.unitText),"formattedValue"==x.changeName&&(this._valueLabelControl.value=x.newValue,this._gaugeCoreControl.value=x.newValue),"afterInit"==x.changeName||"valueLabelPosition"==x.changeName)switch(this.valueLabelPosition){case"Left-top":this.element.style.alignItems="flex-start",this.element.style.justifyContent="flex-start";break;case"Left":this.element.style.alignItems="center",this.element.style.justifyContent="flex-start";break;case"Left-bottom":this.element.style.alignItems="flex-end",this.element.style.justifyContent="flex-start";break;case"Top":this.element.style.alignItems="flex-start",this.element.style.justifyContent="center";break;case"Bottom":this.element.style.alignItems="flex-end",this.element.style.justifyContent="center";break;case"Right-top":this.element.style.alignItems="flex-start",this.element.style.justifyContent="flex-end";break;case"Right":this.element.style.alignItems="center",this.element.style.justifyContent="flex-end";break;case"Right-bottom":this.element.style.alignItems="flex-end",this.element.style.justifyContent="flex-end";break;default:this.element.style.alignItems="center",this.element.style.justifyContent="center"}"initialized"==x.changeName&&this._limitsChangedHandler(null)}_limitsChangedHandler(x){if(this.limitsCollection&&this.limitsCollection.length>0){let x=[];for(var A=0;A<this.limitsCollection.length;A++)x.push({value:this.limitsCollection[A].value,color:this.limitsCollection[A].fillColor});this._gaugeCoreControl&&(this._gaugeCoreControl.limits=x)}else this._gaugeCoreControl&&(this._gaugeCoreControl.limits=[])}}A.DonutGauge=DonutGauge}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class DonutGaugeLimit extends x.UI.ProviderBase{constructor(A,V){super(A,V),this.addPropertyList(DonutGaugeLimit,DonutGaugeLimit.propertyList),this.defaultConstructor(A,this.inlineOptions,x.UI.DonutGaugeLimit.controlName,null)}dispose(){return super.dispose()}}DonutGaugeLimit.namespace="VisiWin.UI",DonutGaugeLimit.controlName="DonutGaugeLimit",DonutGaugeLimit.propertyList={designerType:{propertyType:"base",type:"string",defaultValue:"Control"},registerSourceId:{propertyType:"base",type:"string",defaultValue:"DonutGaugeLimit"},value:{propertyType:"member",type:"string"},fillColor:{propertyType:"member",type:"string"}},A.DonutGaugeLimit=DonutGaugeLimit}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class Key extends x.UI.KeyBase{constructor(A,V){super(A,V),this._containerElement=null,this._symbolElement=null,this._textElement=null,this.inputEventsEnable=!0,this.addPropertyList(Key,Key.propertyList),this.defaultConstructor(A,this.inlineOptions,x.UI.Key.controlName,x.UI.Key.className)}createTemplate(){if(x.Utilities.isInDesignMode())return this.element.innerHTML=['<div class="vw-key__container">','<div class="vw-key__symbol" data-win-control="VisiWin.UI.Symbol"></div>','<div class="vw-key__text" data-win-control="VisiWin.UI.TextBlock"></div>',"</div>"].join("\n"),this._containerElement=this.element.firstElementChild,this._symbolElement=this._containerElement.firstElementChild,this._textElement=this._symbolElement.nextElementSibling,this.processElements([this._symbolElement,this._textElement]);var A=null!=this.inlineOptions.showSymbol?this.inlineOptions.showSymbol:this.getStyleProperty("showSymbol")?this.getStyleProperty("showSymbol"):x.UI.Key.propertyList.showSymbol.defaultValue,V=null!=this.inlineOptions.showText?this.inlineOptions.showText:this.getStyleProperty("showText")?this.getStyleProperty("showText"):x.UI.Key.propertyList.showText.defaultValue,R='<div class="vw-key__container">';return A&&(R+='<div class="vw-key__symbol" data-win-control="VisiWin.UI.Symbol"></div>'),V&&(R+='<div class="vw-key__text" data-win-control="VisiWin.UI.TextBlock"></div>'),R+="</div>",this.element.innerHTML=R,this._containerElement=this.element.firstElementChild,A?(this._symbolElement=this._containerElement.firstElementChild,V&&(this._textElement=this._symbolElement.nextElementSibling)):V&&(this._textElement=this._containerElement.firstElementChild),this.processElements([this._symbolElement,this._textElement])}_updateColors(x){this.disabled?(this._textElement&&this._textElement.winControl&&this.setColor("disabledForegroundColor","foregroundColor",null,"_textElement"),this._symbolElement&&this._symbolElement.winControl&&this.setColor("disabledForegroundColor","foregroundColor",null,"_symbolElement"),this.setColor("disabledBackgroundColor","backgroundColor"),this.setColor("disabledBorderColor","borderColor"),this._containerElement.style.backgroundColor=""):(this._textElement&&this._textElement.winControl&&this.setColor("foregroundColor","foregroundColor",null,"_textElement"),this._symbolElement&&this._symbolElement.winControl&&this.setColor("foregroundColor","foregroundColor",null,"_symbolElement"),this.setColor("backgroundColor"),this.pressed?(this._textElement&&this._textElement.winControl&&this.setColor("pressedForegroundColor","foregroundColor",null,"_textElement"),this._symbolElement&&this._symbolElement.winControl&&this.setColor("pressedForegroundColor","foregroundColor",null,"_symbolElement"),this.setColor("pressedBackgroundColor","backgroundColor","_containerElement")):this.hover?(this.setColor("hoverBorderColor","borderColor"),this.setColor("hoverBackgroundColor","backgroundColor","_containerElement"),this.setColor("hoverForegroundColor","foregroundColor","_textElement")):(this.setColor("borderColor","borderColor"),this._containerElement.style.backgroundColor="",this.setColor("foregroundColor","foregroundColor","_textElement")))}_updateLayout(x){if("updateLayout"!=x.changeName&&"disabled"!=x.changeName&&"pressed"!=x.changeName&&"shadow"!=x.changeName&&"pressedShadow"!=x.changeName||(this.disabled?this.element.style.boxShadow="":(this.element.style.boxShadow=this.getColor("shadow"),this.pressed&&(this.element.style.boxShadow=this.getColor("pressedShadow")))),"updateLayout"!=x.changeName&&"text"!=x.changeName||this._textElement&&this._textElement.winControl&&(this._textElement.winControl.text=this.text),"updateLayout"!=x.changeName&&"pressed"!=x.changeName&&"symbol"!=x.changeName&&"symbolPressed"!=x.changeName||this._symbolElement&&this._symbolElement.winControl&&(this.pressed&&this.symbolPressed?this._symbolElement.winControl.symbol=this.symbolPressed:this._symbolElement.winControl.symbol=this.symbol),"updateLayout"==x.changeName||"showSymbol"==x.changeName||"showText"==x.changeName||"symbolPosition"==x.changeName||"textPosition"==x.changeName)if(!this.showSymbol&&this.showText)this._containerElement.style.flexDirection="row",this._containerElement.style.alignItems="Top"==this.textPosition?"flex-start":"Bottom"==this.textPosition?"flex-end":"center",this._containerElement.style.justifyContent="Left"==this.textPosition?"flex-start":"Right"==this.textPosition?"flex-end":"center";else if(this.showSymbol&&!this.showText)this._containerElement.style.flexDirection="row",this._containerElement.style.alignItems="Top"==this.symbolPosition?"flex-start":"Bottom"==this.symbolPosition?"flex-end":"center",this._containerElement.style.justifyContent="Left"==this.symbolPosition?"flex-start":"Right"==this.symbolPosition?"flex-end":"center";else if(this.showSymbol&&this.showText)switch(this._containerElement.style.flexDirection="Left"==this.symbolPosition?"row":"Top"==this.symbolPosition?"column":"Right"==this.symbolPosition?"row-reverse":"Bottom"==this.symbolPosition?"column-reverse":"row",this.textPosition){case"Left":this._containerElement.style.alignItems="Left"==this.symbolPosition||"Right"==this.symbolPosition||"Center"==this.symbolPosition?("Left"==this.symbolPosition||this.symbolPosition,"center"):(this.symbolPosition,"flex-start"),this._containerElement.style.justifyContent="Left"==this.symbolPosition||"Right"==this.symbolPosition||"Center"==this.symbolPosition?"Left"==this.symbolPosition||"Center"==this.symbolPosition?"flex-start":"flex-end":(this.symbolPosition,"center");break;case"Top":this._containerElement.style.alignItems="Left"==this.symbolPosition||"Right"==this.symbolPosition||"Center"==this.symbolPosition?("Left"==this.symbolPosition||this.symbolPosition,"flex-start"):(this.symbolPosition,"center"),this._containerElement.style.justifyContent="Left"==this.symbolPosition||"Right"==this.symbolPosition||"Center"==this.symbolPosition?("Left"==this.symbolPosition||this.symbolPosition,"center"):"Top"==this.symbolPosition?"flex-start":"flex-end";break;case"Right":this._containerElement.style.alignItems="Left"==this.symbolPosition||"Right"==this.symbolPosition||"Center"==this.symbolPosition?("Left"==this.symbolPosition||this.symbolPosition,"center"):(this.symbolPosition,"flex-end"),this._containerElement.style.justifyContent="Left"==this.symbolPosition||"Right"==this.symbolPosition||"Center"==this.symbolPosition?"Left"==this.symbolPosition||"Center"==this.symbolPosition?"flex-end":"flex-start":(this.symbolPosition,"center");break;case"Bottom":this._containerElement.style.alignItems="Left"==this.symbolPosition||"Right"==this.symbolPosition||"Center"==this.symbolPosition?("Left"==this.symbolPosition||this.symbolPosition,"flex-end"):(this.symbolPosition,"center"),this._containerElement.style.justifyContent="Left"==this.symbolPosition||"Right"==this.symbolPosition||"Center"==this.symbolPosition?("Left"==this.symbolPosition||this.symbolPosition,"center"):"Top"==this.symbolPosition?"flex-end":"flex-start";break;default:this._containerElement.style.alignItems="center",this._containerElement.style.justifyContent="center"}}dispose(){return super.dispose()}}Key.namespace="VisiWin.UI",Key.controlName="Key",Key.className="vw-key",Key.propertyList={designerType:{propertyType:"base",type:"string",defaultValue_DM:"Control"},padding:{propertyType:"style",type:"string",element:"_containerElement",forceOverwrite:!0},transition:{propertyType:"style",type:"string"},shadow:{propertyType:"member",type:"string",resourceValue:["getShadow"],forceOverwrite:!0},pressedShadow:{propertyType:"member",type:"string",resourceValue:["getShadow"]},containerBorderWidth:{propertyType:"style",type:"string",element:"_containerElement",style:"borderWidth"},containerBorderStyle:{propertyType:"style",type:"string",element:"_containerElement",style:"borderStyle"},containerBorderRadius:{propertyType:"style",type:"string",element:"_containerElement",style:"borderRadius"},containerTransition:{propertyType:"style",type:"string",element:"_containerElement",style:"transition"},showSymbol:{propertyType:"child",type:"boolean",child:"_symbolElement",childProperty:"show",defaultValue:!1},iconFont:{propertyType:"child",type:"string",child:"_symbolElement"},symbol:{propertyType:"member",type:"string"},symbolPressed:{propertyType:"member",type:"string"},symbolType:{propertyType:"child",type:"string",child:"_symbolElement"},symbolSize:{propertyType:"child",type:"string",child:"_symbolElement"},symbolMargin:{propertyType:"child",type:"string",child:"_symbolElement",childProperty:"margin"},symbolPosition:{propertyType:"member",type:"string",defaultValue:"Center"},showText:{propertyType:"child",type:"boolean",child:"_textElement",childProperty:"show",defaultValue:!0},textWidth:{propertyType:"child",type:"string",child:"_textElement",childProperty:"width"},textHeight:{propertyType:"child",type:"string",child:"_textElement",childProperty:"height"},textMargin:{propertyType:"child",type:"string",child:"_textElement",childProperty:"margin"},textPadding:{propertyType:"child",type:"string",child:"_textElement",childProperty:"padding"},useVariableText:{propertyType:"base",type:"boolean"},text:{propertyType:"base",type:"string",defaultValue:"Key"},localizableText:{propertyType:"base",type:"string"},textAlignment:{propertyType:"child",type:"string",child:"_textElement"},lineClamp:{propertyType:"child",type:"number",child:"_textElement"},textWrapping:{propertyType:"child",type:"string",child:"_textElement"},textTrimming:{propertyType:"child",type:"string",child:"_textElement"},fontClass:{propertyType:"child",type:"string",child:"_textElement",forceOverwrite:!0,defaultValue:"Button"},fontSize:{propertyType:"child",type:"string",child:"_textElement",forceOverwrite:!0},fontWeight:{propertyType:"child",type:"string",child:"_textElement",forceOverwrite:!0},lineHeight:{propertyType:"child",type:"string",child:"_textElement",forceOverwrite:!0},textContrast:{propertyType:"child",type:"number",child:"_textElement"},uppercase:{propertyType:"child",type:"boolean",child:"_textElement"},textPosition:{propertyType:"member",type:"string",defaultValue:"Center"},backgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ChromeMedium"},hoverBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@HoverBackgroundColor"},pressedBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@PressedBackgroundColor"},disabledBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledBackgroundColor"},foregroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},hoverForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},pressedForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},disabledForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledForegroundColor"},borderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"},hoverBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@HoverBorderColor"},disabledBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledBorderColor"}},A.Key=Key}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class LinearRange extends x.UI.VariableBase{constructor(x,A){super(x,A),this.properties={designerType:{propertyType:"base",defaultValue:"Control"},registerTargetId:{propertyType:"base",defaultValue:"LinearRangeLimit"},rawLimitMin:{type:"number",defaultValue:0},rawLimitMax:{type:"number",defaultValue:100},limits:{type:"any"},rawReferenceValue:{type:"number",defaultValue:0},position:{defaultValue:"Left"},direction:{defaultValue:"Up"},placement:{defaultValue:"Inside"},startWidth:{defaultValue:"100%"},endWidth:{defaultValue:"100%"},rangesOffset:{defaultValue:0,type:"number"},showAllRanges:{defaultValue:!0,type:"boolean"},reverse:{defaultValue:!1,type:"boolean"},backgroundColor:{defaultValue:"@None"},disabledBackgroundColor:{defaultValue:"@None"},indicatorColor:{defaultValue:"@Transparent"},disabledIndicatorColor:{defaultValue:"@Transparent"}},this.cssStyles={coreStyle:!0,css:"\n            .vw-linearrange {\n                position: relative;\n                width: 150px;\n                height: 50px;\n            } \n            .vw-linearrange__svg {\n                position: absolute;\n                left: 0;\n                top: 0;\n                width: 100%;\n                height: 100%;\n                overflow: visible;\n            }                 \n        "},this.limits=[],this._limitsCollection=[],this._initialized=!1,this._svgElement=null,this.initialize(LinearRange)}createTemplate(){let x=document.createElement("div");return this.reparentChildren(this.element,x),this.element.innerHTML='<svg class="vw-linearrange__svg" xmlns="http://www.w3.org/2000/svg"></svg>',this._svgElement=this.element.firstElementChild,this.reparentChildren(x,this.element),null}registerChild(x,A,V,R){return A===this.registerTargetId&&V&&V.winControl&&(this._limitsCollection.push(V.winControl),this.isInDesignMode?(V.style.display="none",V.winControl.addEventListener("notifyPropertyChanged",this._limitsChangedHandler.bind(this))):V.remove()),!1}createHandler(){new ResizeObserver(x=>{x?(this._clientWidth=x[0].contentRect.width,this._clientHeight=x[0].contentRect.height):(this._clientWidth=this.element.clientWidth,this._clientHeight=this.element.clientHeight),this._drawRanges()}).observe(this.element)}_updateColors(x){"property"!=x.changeType&&"status"!=x.changeType&&"afterInit"!=x.changeName||(this.disabled?(this.setColor("disabledBackgroundColor","backgroundColor"),this.setColor("disabledBorderColor","borderColor")):(this.setColor("backgroundColor","backgroundColor"),this.setColor("borderColor","borderColor"))),"property"!=x.changeType&&"status"!=x.changeType||this._drawRanges()}_updateLayout(x){if("limits"!=x.changeName&&"useRawValue"!=x.changeName&&"showAllRanges"!=x.changeName&&"rawReferenceValue"!=x.changeName&&"position"!=x.changeName&&"placement"!=x.changeName&&"reverse"!=x.changeName&&"rangesOffset"!=x.changeName||this._drawRanges(),"value"!=x.changeName&&"varLimitMin"!==x.changeName&&"varLimitMax"!==x.changeName&&"rawValue"!==x.changeName||this._drawRanges(),"firstUpdate"==x.changeName||"direction"==x.changeName){switch(this.direction){case"Right":this.position="Up",this.reverse=!1;break;case"Down":this.position="Right",this.reverse=!0;break;case"Left":this.position="Up",this.reverse=!0;break;case"Up":this.position="Right",this.reverse=!1}this._drawRanges()}"initialized"!=x.changeName&&"value"!=x.changeName||this.isInDesignMode&&"Control"===this.designerType&&null==this.value&&(this.value=40),"initialized"==x.changeName&&"Control"===this.designerType&&this._limitsChangedHandler(null)}_drawRanges(){let A=this._clientWidth,V=this._clientHeight;if(!A||!V)return;this._svgElement.innerHTML="";let R=this.useRawValue?this.rawValue:this.value,D=this.useRawValue?this.rawReferenceValue:this.rawValue2value(this.rawReferenceValue),N=this.useVariableLimits&&this.varRawLimitMin?this.useRawValue?this.varRawLimitMin:this.rawValue2value(this.varRawLimitMin):this.useRawValue?this.rawLimitMin:this.rawValue2value(this.rawLimitMin),U=this.useVariableLimits&&this.varRawLimitMax?this.useRawValue?this.varRawLimitMax:this.rawValue2value(this.varRawLimitMax):this.useRawValue?this.rawLimitMax:this.rawValue2value(this.rawLimitMax),B=this.rangesOffset,F=this.limits,W=[],H="Left"==this.position||"Right"==this.position?V:A,z=H/(U-N),G="Left"==this.position||"Right"==this.position?A:V,j=x.SvgUtilities.getPixelValue(this.startWidth,G,!0),q=x.SvgUtilities.getPixelValue(this.endWidth,G,!0);(isNaN(j)||j>G)&&(j=G),(isNaN(q)||q>G)&&(q=G);let Q=(j-q)/(0-H);if(F&&F.length){for(var K=0;K<F.length;K++){let A=F[K],V=parseFloat(A.startValue),H=parseFloat(A.endValue);if(V>H&&(V=parseFloat(A.endValue),H=parseFloat(A.startValue)),!(V<N&&H<=N||V>=U&&H>U)){let F,K,J=isNaN(parseFloat(A.offset))?B:parseFloat(A.offset),X=A.fillColor;V<N&&(V=N),H>U&&(H=U),V=z*(V-N),H=z*(H-N);let Y=z*(D-N);F=x.SvgUtilities.getPixelValue(j,G,!0),K=x.SvgUtilities.getPixelValue(q,G,!0),F>G&&(F=G),K>G&&(K=G),isNaN(F)&&(F=Q*V+j),isNaN(K)&&(K=Q*H+j),this.showAllRanges||isNaN(R)?W.push({show:!0,minValue:V,maxValue:H,startWidth:F,endWidth:K,offset:J,color:X}):V<Y&&H>Y?(W.push({show:!0,minValue:V,maxValue:Y,startWidth:F,endWidth:K,offset:J,color:X}),W.push({show:!0,minValue:Y,maxValue:H,startWidth:F,endWidth:K,offset:J,color:X})):W.push({show:!0,minValue:V,maxValue:H,startWidth:F,endWidth:K,offset:J,color:X})}}if(!this.showAllRanges&&!isNaN(R)){let x,A=[],V=[],R=z*(U-N),B=z*(D-N);for(let x=0;x<W.length;x++){let A=W[x];V.push(A.minValue),V.push(A.maxValue)}-1===V.indexOf(B)&&V.push(B),-1===V.indexOf(0)&&V.push(0),-1===V.indexOf(R)&&V.push(R),V.sort((x,A)=>x-A),x=this.disabled?this.disabledIndicatorColor:this.indicatorColor;for(let x=0;x<V.length;x++){let A=!1,R=V[x];for(let D=0;D<W.length;D++){let N=W[D];if(N.minValue==R&&N.maxValue==V[x+1]||null==V[x+1]){A=!0;break}}A&&(A=!1)}W=W.concat(A)}let H=document.createDocumentFragment();for(var J=0;J<W.length;J++){let U=W[J];if(U.show)if(this.showAllRanges||isNaN(R))H.appendChild(x.SvgUtilities.drawTetragon(A,V,U.startWidth,U.endWidth,U.minValue,U.maxValue,this.position,this.placement,this.reverse,U.offset,this.getThemeColor(U.color)));else{let B=z*(R-N),F=z*(D-N);B>=F?B>=U.minValue&&B>=U.maxValue&&U.minValue>=F&&U.maxValue>=F&&H.appendChild(x.SvgUtilities.drawTetragon(A,V,U.startWidth,U.endWidth,U.minValue,U.maxValue,this.position,this.placement,this.reverse,U.offset,this.getThemeColor(U.color))):B<=U.minValue&&B<=U.maxValue&&U.minValue<=F&&U.maxValue<=F&&H.appendChild(x.SvgUtilities.drawTetragon(A,V,U.startWidth,U.endWidth,U.minValue,U.maxValue,this.position,this.placement,this.reverse,U.offset,this.getThemeColor(U.color)))}}this._svgElement.appendChild(H)}else if(isNaN(R))return void this._svgElement.appendChild(x.SvgUtilities.drawTetragon(A,V,j,q,0,H,this.position,this.placement,this.reverse,B,this.getThemeColor("lightgray")))}_limitsChangedHandler(x){if(this._limitsCollection&&this._limitsCollection.length>0){let x=[];for(var A=0;A<this._limitsCollection.length;A++){let V=this._limitsCollection[A];x.push({startValue:V.startValue,endValue:V.endValue,startWidth:V.startWidth,endWidth:V.endWidth,offset:V.offset,fillColor:V.fillColor})}this.limits=x}else this.limits=[]}}A.LinearRange=LinearRange}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class LinearRangeLimit extends x.UI.ProviderBase{constructor(A,V){super(A,V),this.addPropertyList(LinearRangeLimit,LinearRangeLimit.propertyList),this.defaultConstructor(A,this.inlineOptions,x.UI.LinearRangeLimit.controlName,null)}}LinearRangeLimit.namespace="VisiWin.UI",LinearRangeLimit.controlName="LinearRangeLimit",LinearRangeLimit.propertyList={registerSourceId:{propertyType:"base",type:"string",defaultValue:"LinearRangeLimit"},startValue:{propertyType:"member",type:"number",defaultValue:0},endValue:{propertyType:"member",type:"number",defaultValue:100},startWidth:{propertyType:"member",type:"string"},endWidth:{propertyType:"member",type:"string"},offset:{propertyType:"member",type:"number"},fillColor:{propertyType:"member",type:"string",defaultValue:"@PrimaryColor"}},A.LinearRangeLimit=LinearRangeLimit}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class LinearScale extends x.UI.VariableBase{constructor(x,A){super(x,A),this.properties={designerType:{propertyType:"base",defaultValue:"Control"},rawLimitMin:{propertyType:"member",type:"number",defaultValue:0},rawLimitMax:{propertyType:"member",type:"number",defaultValue:100},mode:{defaultValue:"Steps"},position:{defaultValue:"Bottom"},placement:{defaultValue:"Inside"},reverse:{defaultValue:!1,type:"boolean"},showBaseLine:{defaultValue:!1,type:"boolean"},limitsVisibility:{defaultValue:"Always"},showMajorTicks:{defaultValue:!0,type:"boolean"},majorStepSize:{defaultValue:20,type:"number"},majorSteps:{defaultValue:5,type:"number"},majorTicksLength:{defaultValue:10,type:"number"},majorTicksWidth:{defaultValue:3,type:"number"},showMiddleTicks:{type:"boolean",defaultValue:!0},middleStepSize:{type:"number",defaultValue:10},middleSteps:{type:"number",defaultValue:2},middleTicksLength:{type:"number",defaultValue:6},middleTicksWidth:{type:"number",defaultValue:2},showMinorTicks:{type:"boolean",defaultValue:!0},minorStepSize:{type:"number",defaultValue:5},minorSteps:{type:"number",defaultValue:2},minorTicksLength:{type:"number",defaultValue:4},minorTicksWidth:{type:"number",defaultValue:1},showMajorLabels:{type:"boolean",defaultValue:!0},majorLabelsFontClass:{type:"string",defaultValue:"Label2"},majorLabelsFontSize:{type:"string"},majorLabelsFontWeight:{type:"string"},majorLabelsLineHeight:{type:"string"},majorLabelsTextContrast:{type:"string",defaultValue:1},majorLabelsOffset:{type:"number",defaultValue:8},majorLabelsDecimalPlaces:{type:"number",defaultValue:0},backgroundColor:{defaultValue:"@None"},foregroundColor:{defaultValue:"@ForegroundColor"},majorTicksColor:{defaultValue:"@ForegroundColor"},middleTicksColor:{defaultValue:"@ForegroundColor"},minorTicksColor:{defaultValue:"@ForegroundColor"},disabledBackgroundColor:{defaultValue:"@None"},disabledForegroundColor:{defaultValue:"@None"}},this.cssStyles={coreStyle:!0,css:"\n            .vw-linearscale {\n                position: relative;\n                width: 150px;\n                height: 50px;\n            }\n            .vw-linearscale__svg {\n                position: absolute;\n                left: 0;\n                top: 0;\n                width: 100%;\n                height: 100%;\n                overflow: visible;\n            }\n            .vw-linearscale__svg-label {\n                -webkit-user-select: none;\n                -moz-user-select: none;\n                -ms-user-select: none;\n                user-select: none;\n            }                      \n        "},this._svgElement=null,this._labels=[],this.initialize(LinearScale)}createTemplate(){return this.element.innerHTML='<svg class="vw-linearscale__svg"  xmlns="http://www.w3.org/2000/svg"></svg>',this._svgElement=this.element.firstElementChild,null}createHandler(){new ResizeObserver(x=>{x?(this._clientWidth=x[0].contentRect.width,this._clientHeight=x[0].contentRect.height):(this._clientWidth=this.element.clientWidth,this._clientHeight=this.element.clientHeight),this._drawScale()}).observe(this.element)}_updateColors(x){"property"!==x.changeType&&"status"!==x.changeType&&"afterInit"!==x.changeName||(this.disabled?this.setColor("disabledBackgroundColor","backgroundColor"):this.setColor("backgroundColor","backgroundColor")),"property"!==x.changeType&&"status"!==x.changeType||this._drawScale()}_updateLayout(x){if("majorLabelsFontClass"===x.changeName)for(let A=0;A<this._labels.length;A++)this._labels[A].classList.remove(x.oldValue.toLowerCase());"majorSteps"!==x.changeName&&"majorStepSize"!==x.changeName&&"majorTicksLength"!==x.changeName&&"majorTicksWidth"!==x.changeName&&"middleSteps"!==x.changeName&&"middleStepSize"!==x.changeName&&"middleTicksLength"!==x.changeName&&"middleTicksWidth"!==x.changeName&&"minorSteps"!==x.changeName&&"minorStepSize"!==x.changeName&&"minorTicksLength"!==x.changeName&&"minorTicksWidth"!==x.changeName&&"mode"!==x.changeName&&"placement"!==x.changeName&&"position"!==x.changeName&&"reverse"!==x.changeName&&"limitsVisibility"!==x.changeName&&"showMajorLabels"!==x.changeName&&"showBaseLine"!==x.changeName&&"showMajorTicks"!==x.changeName&&"showMiddleTicks"!==x.changeName&&"showMinorTicks"!==x.changeName&&"majorLabelsDecimalPlaces"!==x.changeName&&"majorLabelsFontClass"!==x.changeName&&"majorLabelsOffset"!==x.changeName&&"majorLabelsTextContrast"!==x.changeName&&"majorLabelsFontSize"!==x.changeName&&"majorLabelsFontWeight"!==x.changeName&&"majorLabelsLineHeight"!==x.changeName&&"varLimitMin"!==x.changeName&&"varLimitMax"!==x.changeName&&"rawLimitMax"!==x.changeName&&"rawLimitMin"!==x.changeName||this._drawScale()}_drawScale(){const x=this._clientWidth,A=this._clientHeight;if(!x||!A)return;let V,R;this._svgElement.innerHTML="",this.element.innerHTML="",this.element.appendChild(this._svgElement),this.isInRunMode&&this.variableName?(V=this.useVariableLimits&&this.varRawLimitMin?this.useRawValue?this.varRawLimitMin:this.rawValue2value(this.varRawLimitMin):this.useRawValue?this.rawLimitMin:this.rawValue2value(this.rawLimitMin),R=this.useVariableLimits&&this.varRawLimitMax?this.useRawValue?this.varRawLimitMax:this.rawValue2value(this.varRawLimitMax):this.useRawValue?this.rawLimitMax:this.rawValue2value(this.rawLimitMax)):(V=this.rawLimitMin,R=this.rawLimitMax);const D=[],N=[],U=[];if(!(0===x||0===A||isNaN(x)||isNaN(A)||isNaN(V)||isNaN(R)||V>=R)){if((isNaN(this.majorStepSize)||this.majorStepSize<1)&&(this.majorStepSize=1),(isNaN(this.majorSteps)||this.majorSteps<1)&&(this.majorSteps=1),(isNaN(this.majorTicksLength)||this.majorTicksLength<0)&&(this.majorTicksLength=0),(isNaN(this.majorTicksWidth)||this.majorTicksWidth<0)&&(this.majorTicksWidth=0),(isNaN(this.middleStepSize)||this.middleStepSize<1)&&(this.middleStepSize=1),(isNaN(this.middleSteps)||this.middleSteps<1)&&(this.middleSteps=1),(isNaN(this.middleTicksLength)||this.middleTicksLength<0)&&(this.middleTicksLength=0),(isNaN(this.middleTicksWidth)||this.middleTicksWidth<0)&&(this.middleTicksWidth=0),(isNaN(this.minorStepSize)||this.minorStepSize<1)&&(this.minorStepSize=1),(isNaN(this.minorSteps)||this.minorSteps<1)&&(this.minorSteps=1),(isNaN(this.minorTicksLength)||this.minorTicksLength<0)&&(this.minorTicksLength=0),(isNaN(this.minorTicksWidth)||this.minorTicksWidth<0)&&(this.minorTicksWidth=0),this.showMajorTicks){const x="StepSize"===this.mode?this._stepSizeToValues(V,R,this.majorStepSize):this._stepsToValues(V,R,this.majorSteps);if(x&&x.length)for(let A=0;A<x.length;A++)if("Never"===this.limitsVisibility?A>0&&A<x.length-1&&D.push(x[A]):"Auto"===this.limitsVisibility&&"StepSize"===this.mode?(A>=0&&A<x.length&&D.push(x[A]),0===A&&x[0].value+this.majorStepSize!==x[1].value&&D.splice(0,1),A===x.length-1&&x[x.length-2].value+this.majorStepSize!==this.rawLimitMax&&D.splice(D.length-1,1)):"Always"===this.limitsVisibility&&D.push(x[A]),this.showMiddleTicks&&x[A]&&!isNaN(x[A].value)&&x[A+1]&&!isNaN(x[A+1].value)){const V="StepSize"===this.mode?this._stepSizeToValues(x[A].value,x[A+1].value,this.middleStepSize):this._stepsToValues(x[A].value,x[A+1].value,this.middleSteps);if(V&&V.length)for(let x=0;x<V.length;x++)if(x>0&&x<V.length-1&&N.push(V[x]),this.showMinorTicks&&V[x]&&!isNaN(V[x].value)&&V[x+1]&&!isNaN(V[x+1].value)){const A="StepSize"===this.mode?this._stepSizeToValues(V[x].value,V[x+1].value,this.minorStepSize):this._stepsToValues(V[x].value,V[x+1].value,this.minorSteps);if(A&&A.length)for(let x=1;x<A.length;x++)U.push(A[x])}}}this.showMajorTicks&&(this._valuesToCordinates(x,A,V,R,this.position,this.placement,this.reverse,D,this.majorTicksLength),this._drawTicks(D,this.majorTicksWidth,this.disabled?"disabledForegroundColor":"majorTicksColor"),this.showMajorLabels&&window.setImmediate(()=>{this._drawLabelsSVG(this.position,this.placement,D,this.majorLabelsFontClass,this.majorLabelsFontSize,this.majorLabelsFontWeight,this.majorLabelsLineHeight,this.majorLabelsTextContrast,this.majorLabelsOffset,this.majorLabelsDecimalPlaces)},0),this.showMiddleTicks&&(this._valuesToCordinates(x,A,V,R,this.position,this.placement,this.reverse,N,this.middleTicksLength),this._drawTicks(N,this.middleTicksWidth,this.disabled?"disabledForegroundColor":"middleTicksColor"),this.showMinorTicks&&(this._valuesToCordinates(x,A,V,R,this.position,this.placement,this.reverse,U,this.minorTicksLength),this._drawTicks(U,this.minorTicksWidth,this.disabled?"disabledForegroundColor":"minorTicksColor")))),this.showBaseLine&&this._drawBaseline(this.position,x,A,1,this.disabled?"disabledForegroundColor":"majorTicksColor")}}_stepsToValues(x,A,V){const R=(A-x)/V;let D=x;const N=[];for(D>=A&&(D=A);D<=A;)if(N.push({value:D}),D+=R,N.length===V){N.push({value:A});break}return N}_stepSizeToValues(x,A,V){let R=x%V!=0?x-x%V:x;const D=[];for(D.push({value:x});R<A;)R>x&&D.push({value:R}),R+=V;return D.push({value:A}),D}_valuesToCordinates(x,A,V,R,D,N,U,B,F){if(B&&B.length){const W=("Left"===D||"Right"===D?A:x)/(R-V);for(let R=0;R<B.length;R++){const H=B[R]&&!isNaN(B[R].value)?B[R].value:null;let z,G,j,q;if(null!==H){switch(D){case"Left":z=0,G="Outside"===N?z-F:z+F,j=U?W*(H-V):A-W*(H-V),q=j;break;case"Right":z=x,G="Outside"===N?z+F:z-F,j=U?W*(H-V):A-W*(H-V),q=j;break;case"Up":case"Top":z=U?x-W*(H-V):W*(H-V),G=z,j=0,q="Outside"===N?j-F:j+F;break;default:z=U?x-W*(H-V):W*(H-V),G=z,j=A,q="Outside"===N?j+F:j-F}B[R].x1=z,B[R].y1=j,B[R].x2=G,B[R].y2=q}}}}_drawTicks(A,V,R){if(A&&A.length){let D=document.createDocumentFragment();for(let N=0;N<A.length;N++)D.appendChild(x.SvgUtilities.drawLine(A[N].x1,A[N].y1,A[N].x2,A[N].y2,V,this.getColor(R),""));this._svgElement.appendChild(D)}}_drawLabels(A,V,R,D,N,U,B,F,W,H){if(R&&R.length)for(let z=0;z<R.length;z++){if(!this._labels[z]){const x=document.createElement("div");this._labels.push(x)}const G=this._labels[z];let j,q;switch(G.style.width="auto",G.style.height="auto",G.style.margin="0px",G.style.padding="0px","None"===D?(G.style.fontSize=N,G.style.fontWeight=U,G.style.lineHeight=B):G.classList.add(D.toLowerCase()),G.style.opacity=F,G.textContent=x.Utilities.frmString("F"+H,R[z].value),G.style.backgroundColor=this.getThemeColor("@Transparent"),G.style.color=this.disabled?this.getColor("disabledForegroundColor"):this.getColor("foregroundColor"),G.style.position="absolute",this.element.appendChild(G),A){case"Left":j="Outside"===V?R[z].x2-G.offsetWidth-W:R[z].x2+W,q=R[z].y2-G.offsetHeight/2;break;case"Right":j="Outside"===V?R[z].x2+W:R[z].x2-G.offsetWidth-W,q=R[z].y2-G.offsetHeight/2;break;case"Up":case"Top":j=R[z].x2-G.offsetWidth/2,q="Outside"===V?R[z].y2-G.offsetHeight-W:R[z].y2+W;break;default:j=R[z].x2-G.offsetWidth/2,q="Outside"===V?R[z].y2+W:R[z].y2-G.offsetHeight-W}G.style.left=j+"px",G.style.top=q+"px"}}_drawBaseline(A,V,R,D,N){switch(A){case"Left":this.showMajorTicks?this._svgElement.appendChild(x.SvgUtilities.drawLine(0,0-this.majorTicksWidth/2,0,R+this.majorTicksWidth/2,D,this.getColor(N),"")):this._svgElement.appendChild(x.SvgUtilities.drawLine(0,0,0,R,D,this.getColor(N),""));break;case"Right":this.showMajorTicks&&"Always"===this.limitsVisibility?this._svgElement.appendChild(x.SvgUtilities.drawLine(V,0-this.majorTicksWidth/2,V,R+this.majorTicksWidth/2,D,this.getColor(N),"")):this._svgElement.appendChild(x.SvgUtilities.drawLine(V,0,V,R,D,this.getColor(N),""));break;case"Up":case"Top":this.showMajorTicks?this._svgElement.appendChild(x.SvgUtilities.drawLine(0-this.majorTicksWidth/2,0,V+this.majorTicksWidth/2,0,D,this.getColor(N),"")):this._svgElement.appendChild(x.SvgUtilities.drawLine(0,0,V,0,D,this.getColor(N),""));break;default:this.showMajorTicks?this._svgElement.appendChild(x.SvgUtilities.drawLine(0-this.majorTicksWidth/2,R,V+this.majorTicksWidth/2,R,D,this.getColor(N),"")):this._svgElement.appendChild(x.SvgUtilities.drawLine(0,R,V,R,D,this.getColor(N),""))}}_drawLabelsSVG(A,V,R,D,N,U,B,F,W,H){if(R&&R.length)for(let B=0;B<R.length;B++){if(!this._labels[B]){const x=document.createElementNS("http://www.w3.org/2000/svg","text");this._labels.push(x)}const z=this._labels[B];z.classList.add("vw-linearscale__svg-label"),"None"!==D?z.classList.add(D.toLowerCase()):(z.setAttribute("font-size",N),z.setAttribute("font-weight",U)),z.setAttribute("alignment-baseline","central"),z.setAttribute("opacity",F),z.setAttribute("backgroundColor",this.getThemeColor("@Transparent")),z.setAttribute("fill",this.disabled?this.getColor("disabledForegroundColor"):this.getColor("foregroundColor")),z.textContent=x.Utilities.frmString("F"+H,R[B].value),this._svgElement.appendChild(z);const G=z.getBBox();let j,q;const Q=8;switch(A){case"Left":j="Outside"===V?R[B].x2-G.width-W:R[B].x2+W,q=R[B].y2;break;case"Right":j="Outside"===V?R[B].x2+W:R[B].x2-G.width-W,q=R[B].y2;break;case"Up":case"Top":j=R[B].x2-G.width/2,q="Outside"===V?R[B].y2-W+Q-G.height:R[B].y2+W-Q+G.height;break;case"Bottom":j=R[B].x2-G.width/2,q="Outside"===V?R[B].y2+W-Q+G.height:R[B].y2-W+Q-G.height}z.setAttribute("x",j),z.setAttribute("y",q)}}}A.LinearScale=LinearScale}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class LinearIndicator extends x.UI.VariableBase{constructor(A,V){super(A,V),this._svgLoadedFlag=!1,this._svgElement=null,this._svgGroupElement=null,this._indicatorUri=null,this._indicatorSize=null,this.addPropertyList(LinearIndicator,LinearIndicator.propertyList),this.defaultConstructor(A,this.inlineOptions,x.UI.LinearIndicator.controlName,x.UI.LinearIndicator.className)}createTemplate(){return this.element.innerHTML=['<svg class="vw-linearindicator__svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"></svg>'].join("\n"),this._svgElement=this.element.firstElementChild,null}resizeHandler(){this._updateLayoutBase("event","sizeChanged",null,null)}beforeInit(){this._svgElement=Snap(this._svgElement),this._svgElement.attr("width","100%"),this._svgElement.attr("height","100%"),this._svgGroupElement=this._svgElement.group()}get indicatorUri(){return this._indicatorUri}set indicatorUri(x){if(this._indicatorUri!=x){var A=this._indicatorUri;if(this._indicatorUri=x,this._svgLoadedFlag=!1,this._svgGroupElement.clear(),null===x||!1===x||"null"===x||"false"===x)return;var V=this;Snap.load(x,(function(R){(R=R.select("svg")).node.getAttribute("viewBox")&&(R.attr({width:"100%"}),R.attr({height:"100%"}),R.attr({preserveAspectRatio:"none"}),V._svgGroupElement.clear(),V._svgGroupElement.append(R),V._svgLoadedFlag=!0,V._updateLayoutBase("property","indicatorUri",x,A),V.dispatchNotifyPropertyChanged("property","indicatorUri",x,A))}))}}get indicatorSize(){return this._indicatorSize}set indicatorSize(x){if(this._indicatorSize!=x){var A=this._indicatorSize;this._indicatorSize=x,this._svgElement.attr("width",x),this._svgElement.attr("height",x),this._updateLayoutBase("property","indicatorSize",x,A),this.dispatchNotifyPropertyChanged("property","indicatorSize",x,A)}}_updateColors(x){this.disabled?this.setColor("disabledBackgroundColor","backgroundColor"):this.setColor("backgroundColor")}_updateLayout(x){if(this._svgLoadedFlag){var A,V,R,D,N,U=window.getComputedStyle(this.element,null),B=parseFloat(U.getPropertyValue("width")),F=parseFloat(U.getPropertyValue("height")),W=this.useRawValue?this.rawValue:this.value,H=this.useVariableLimits&&this.varRawLimitMin?this.useRawValue?this.varRawLimitMin:this.rawValue2value(this.varRawLimitMin):this.useRawValue?this.rawLimitMin:this.rawValue2value(this.rawLimitMin),z=this.useVariableLimits&&this.varRawLimitMax?this.useRawValue?this.varRawLimitMax:this.rawValue2value(this.varRawLimitMax):this.useRawValue?this.rawLimitMax:this.rawValue2value(this.rawLimitMax),G=this.rotateAngle,j=this.indicatorOffset,q=this._svgGroupElement.getBBox(1);if(!(0==B||0==F||isNaN(B)||isNaN(F)||isNaN(W)||isNaN(H)||isNaN(z)||H>=z||isNaN(G)||isNaN(j))){switch(W<H&&(W=H),W>z&&(W=z),A=("Left"==this.position||"Right"==this.position?F:B)/(z-H),V="Left"==this.position||"Right"==this.position?A*(W-H)-q.height/2:A*(W-H)-q.width/2,this.position){case"Left":V=this.reverse?V:-V,this.rotate||(this.rotateAngle=G="Outside"==this.placement?270:90),j="Outside"==this.placement?-q.width-j:j,R=this.reverse?"column":"column-reverse",D="flex-start",N="flex-start";break;case"Right":V=this.reverse?V:-V,this.rotate||(this.rotateAngle=G="Outside"==this.placement?90:270),j="Outside"==this.placement?q.width+j:-j,R=this.reverse?"column":"column-reverse",D="flex-end",N="flex-start";break;case"Up":case"Top":V=this.reverse?-V:V,this.rotate||(this.rotateAngle=G="Outside"==this.placement?0:180),j="Outside"==this.placement?-q.height-j:j,R=this.reverse?"row-reverse":"row",D="flex-start",N="flex-start";break;default:V=this.reverse?-V:V,this.rotate||(this.rotateAngle=G="Outside"==this.placement?180:0),j="Outside"==this.placement?q.height+j:-j,R=this.reverse?"row-reverse":"row",D="flex-end",N="flex-start"}this.element.style.flexDirection=this.element.style.webkitFlexDirection=R,this.element.style.alignItems=this.element.style.webkitAlignItems=D,this.element.style.justifyContent=this.element.style.webkitJustifyContent=N,"Left"==this.position||"Right"==this.position?this._svgGroupElement.transform("t"+j+","+V+" r"+G+","+q.cx+","+q.cy):this._svgGroupElement.transform("t"+V+","+j+" r"+G+","+q.cx+","+q.cy)}}}dispose(){return super.dispose()}}LinearIndicator.namespace="VisiWin.UI",LinearIndicator.controlName="LinearIndicator",LinearIndicator.className="vw-linearindicator",LinearIndicator.propertyList={designerType:{propertyType:"base",type:"string",defaultValue:"Control"},rawLimitMin:{propertyType:"member",type:"number",defaultValue:0},rawLimitMax:{propertyType:"member",type:"number",defaultValue:100},position:{propertyType:"member",type:"string",defaultValue:"Bottom"},placement:{propertyType:"member",type:"string",defaultValue:"Inside"},reverse:{propertyType:"member",type:"boolean",defaultValue:!1},rotate:{propertyType:"member",type:"boolean",defaultValue:!1},rotateAngle:{propertyType:"member",type:"number",defaultValue:0},indicatorUri:{propertyType:"custom",type:"string",defaultValue:x.Utilities.getPathString("images/svgs/indicatorbottom.svg")},indicatorSize:{propertyType:"custom",type:"string",defaultValue:"18px"},indicatorOffset:{propertyType:"member",type:"number",defaultValue:0},backgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},disabledBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledBackgroundColor"}},A.LinearIndicator=LinearIndicator}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class LinearInstrument extends x.UI.ControlBase{constructor(x,A){super(x,A),this.inlineOptions.debug,this.inputEventsEnable=!1,this.addPropertyList(LinearInstrument,LinearInstrument.LinearInstrumentPropertyList),this.defaultConstructor(x,this.inlineOptions,LinearInstrument.controlName,LinearInstrument.classLinearInstrument)}_updateColors(){this.disabled?this.element.style.backgroundColor=this.getColor("disabledBackgroundColor"):this.element.style.backgroundColor=this.getColor("backgroundColor")}dispose(){return super.dispose()}}LinearInstrument.namespace="VisiWin.UI",LinearInstrument.controlName="LinearInstrument",LinearInstrument.classLinearInstrument="vw-linearinstrument",LinearInstrument.LinearInstrumentPropertyList={designerType:{propertyType:"base",type:"string",defaultValue:"ContentControl"},backgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BackgroundColor"},disabledBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledBackgroundColor"}},A.LinearInstrument=LinearInstrument}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class NumericVarIn extends x.UI.ControlBase{constructor(A,V){super(A,V),this._labelElement=null,this._inputContainerElement=null,this._inputFieldContainerElement=null,this._inputElement=null,this._leadingSymbolElement=null,this._inputFieldElement=null,this._floatingLabelElement=null,this._unitElement=null,this._trailingSymbolElement=null,this._errorSymbolElement=null,this._underlineElement=null,this._helperTextElement=null,this._errorTextElement=null,this._boundValueChangedHandler=this.valueChangeHandler.bind(this),this._boundLocalizableErrorTextHandler=this._localizableErrorTextHandler.bind(this),this.observe={disabled:function(x){this._inputElement&&this._inputElement.winControl&&(this._inputElement.winControl.disabled=x.newValue)},errorText:function(x){this._inputElement&&this._inputElement.winControl&&(this._inputElement.winControl.errorText=x.newValue)},"_inputElement.winControl.labelText":function(x){this._labelElement&&this._labelElement.winControl&&(this._labelElement.winControl.text=x.newValue),this._floatingLabelElement&&this._floatingLabelElement.winControl&&this.useVariableText&&(this._floatingLabelElement.winControl.text=x.newValue)},"_inputElement.winControl.errorText":function(x){this._errorTextElement&&this._errorTextElement.winControl&&(this._errorTextElement.winControl.text=x.newValue)},"_inputElement.winControl.unitText":function(x){this._unitElement&&this._unitElement.winControl&&(this._unitElement.winControl.text=x.newValue),this._updateLayoutBase("property","unitText",x.newValue,x.oldValue)},"_inputElement.winControl.hover":function(x){this._updateColorsBase("property","hover",x.newValue,x.oldValue),this.dispatchNotifyPropertyChanged("property","hover",x.newValue,x.oldValue,"hoverChanged")},"_inputElement.winControl.focused":function(x){this._updateColorsBase("property","focused",x.newValue,x.oldValue),this._updateLayoutBase("property","focused",x.newValue,x.oldValue),this.dispatchNotifyPropertyChanged("property","focused",x.newValue,x.oldValue,"focusedChanged")},"_inputElement.winControl.limitError":function(x){this._updateColorsBase("status","limitError",x.newValue,x.oldValue),this._updateLayoutBase("status","limitError",x.newValue,x.oldValue)},"_inputElement.winControl.writeError":function(x){this._updateColorsBase("status","writeError",x.newValue,x.oldValue),this._updateLayoutBase("status","writeError",x.newValue,x.oldValue)},"_inputElement.winControl.watermarkText":function(x){this._updateLayoutBase("property","watermarkText",x.newValue,x.oldValue),this.dispatchNotifyPropertyChanged("property","watermarkText",x.newValue,x.oldValue)},"_inputElement.winControl.value":function(x){this._updateLayoutBase("property","value",x.newValue,x.oldValue),this.dispatchNotifyPropertyChanged("property","value",x.newValue,x.oldValue)},"_floatingLabelElement.winControl.show":function(x){this._updateLayoutBase("property","showFloatingLabel",x.newValue,x.oldValue)},"_leadingSymbolElement.winControl.show":function(x){this._updateLayoutBase("property","showLeadingSymbol",x.newValue,x.oldValue)},"_leadingSymbolElement.winControl.symbolSize":function(x){this._updateLayoutBase("property","leadingSymbolSize",x.newValue,x.oldValue)},"_trailingSymbolElement.winControl.symbolSize":function(x){this._updateLayoutBase("property","trailingSymbolSize",x.newValue,x.oldValue)},"_errorSymbolElement.winControl.symbolSize":function(x){this._updateLayoutBase("property","errorSymbolSize",x.newValue,x.oldValue)},"_leadingSymbolElement.winControl.margin":function(x){this._updateLayoutBase("property","leadingSymbolMargin",x.newValue,x.oldValue)},"_trailingSymbolElement.winControl.margin":function(x){this._updateLayoutBase("property","trailingSymbolMargin",x.newValue,x.oldValue)},"_errorSymbolElement.winControl.margin":function(x){this._updateLayoutBase("property","errorSymbolMargin",x.newValue,x.oldValue)},"_unitElement.winControl.margin":function(x){this._updateLayoutBase("property","unitMargin",x.newValue,x.oldValue)},"_unitElement.winControl.width":function(x){this._updateLayoutBase("property","unitWidth",x.newValue,x.oldValue)}},this.localizableErrorTextObject=null,this._localizableErrorText=null,this.addPropertyList(NumericVarIn,NumericVarIn.propertyList),this.defaultConstructor(A,this.inlineOptions,x.UI.NumericVarIn.controlName,x.UI.NumericVarIn.className)}createTemplate(){return this.element.innerHTML=['<div class="vw-numericvarin__label" data-win-control="VisiWin.UI.Label" data-win-options="{showSymbol:'+this.inlineOptions.showSymbol+'}"></div>','<div class="vw-numericvarin__inputcontainer">','<div class="vw-numericvarin__inputfieldcontainer">','<input class="vw-numericvarin__input" data-win-control="VisiWin.UI.NumericVarInCore">','<div class="vw-numericvarin__leadingsymbol" data-win-control="VisiWin.UI.Symbol"></div>','<div class="vw-numericvarin__inputfield">','<div class="vw-numericvarin__floatinglabel" data-win-control="VisiWin.UI.TextBlock"></div>',"</div>",'<div class="vw-numericvarin__unit" data-win-control="VisiWin.UI.TextBlock"></div>','<div class="vw-numericvarin__trailingsymbol" data-win-control="VisiWin.UI.Symbol"></div>','<div class="vw-numericvarin__errorsymbol" data-win-control="VisiWin.UI.Symbol"></div>','<div class="vw-numericvarin__underline" data-win-control="VisiWin.UI.Divider"></div>',"</div>",'<div class="vw-numericvarin__helpertext" data-win-control="VisiWin.UI.TextBlock"></div>','<div class="vw-numericvarin__errortext" data-win-control="VisiWin.UI.TextBlock"></div>',"</div>"].join("\n"),this._labelElement=this.element.firstElementChild,this._inputContainerElement=this._labelElement.nextElementSibling,this._inputFieldContainerElement=this._inputContainerElement.firstElementChild,this._inputElement=this._inputFieldContainerElement.firstElementChild,this._leadingSymbolElement=this._inputElement.nextElementSibling,this._inputFieldElement=this._leadingSymbolElement.nextElementSibling,this._floatingLabelElement=this._inputFieldElement.firstElementChild,this._unitElement=this._inputFieldElement.nextElementSibling,this._trailingSymbolElement=this._unitElement.nextElementSibling,this._errorSymbolElement=this._trailingSymbolElement.nextElementSibling,this._underlineElement=this._errorSymbolElement.nextElementSibling,this._helperTextElement=this._inputFieldContainerElement.nextElementSibling,this._errorTextElement=this._helperTextElement.nextElementSibling,this.processElements([this._labelElement,this._inputElement,this._leadingSymbolElement,this._floatingLabelElement,this._unitElement,this._trailingSymbolElement,this._errorSymbolElement,this._underlineElement,this._helperTextElement,this._errorTextElement])}afterInit(){this._inputElement&&this._inputElement.winControl&&this._inputElement.winControl.addEventListener("valueChanged",this._boundValueChangedHandler)}writeValue(x){this._inputElement.winControl._writeValueFromVarIn(x)}getCurrentUnit(){try{return this._inputElement.winControl&&this._inputElement.winControl._vwVariable.UnitClass?this._inputElement.winControl._vwVariable.UnitClass.CurrentUnit:null}catch(x){return null}}valueChangeHandler(x){this.dispatchEvent("valueChanged",x.detail),this.decimalPlaces&&"value"==x.detail.changeName&&(0===x.detail.newValue||Number.isInteger(x.detail.newValue))&&(this._inputElement.winControl.value=x.detail.newValue.toFixed(this.decimalPlaces))}_localizableErrorTextHandler(x){this.errorText=x.DisplayText}get localizableErrorText(){return this._localizableErrorText}set localizableErrorText(x){if(this._localizableErrorText!=x){var A=this._localizableErrorText;null!=this._localizableErrorText&&this.locService&&this.localizableErrorTextObject&&(this.locService.removeLocalizedText(this._localizableErrorText,this._boundLocalizableErrorTextHandler,this.localizableErrorTextObject),this.localizableErrorTextObject=null),this._localizableErrorText=x,this.locService&&this.locService.addLocalizedTextAsync(this._localizableErrorText,this._boundLocalizableErrorTextHandler).then(x=>{this.localizableErrorTextObject=x}),this._updateLayoutBase("property","localizableErrorText",x,A),this.dispatchNotifyPropertyChanged("property","localizableErrorText",x,A)}}_updateLayout(A){if("updateLayout"!=A.changeName&&"focused"!=A.changeName||(this._inputElement.winControl.focused?x.Utilities.addClass(this.element,"focused"):x.Utilities.removeClass(this.element,"focused")),"updateLayout"==A.changeName||"alignItems"==A.changeName)switch(this.alignItems){case"Center":this.element.style.alignItems="center";break;case"Start":this.element.style.alignItems="flex-start";break;case"End":this.element.style.alignItems="flex-end";break;case"Baseline":this.element.style.alignItems="baseline";break;default:this.element.style.alignItems="stretch"}if("updateLayout"==A.changeName||"justifyContent"==A.changeName)switch(this.justifyContent){case"End":this.element.style.justifyContent="flex-end";break;case"Center":this.element.style.justifyContent="center";break;case"Space-between":this.element.style.justifyContent="space-between";break;case"Space-around":this.element.style.justifyContent="space-around";break;case"Space-evenly":this.element.style.justifyContent="space-evenly";break;default:this.element.style.justifyContent="flex-start"}if("updateLayout"!=A.changeName&&"inputBorderRadius"!=A.changeName||(this._inputFieldContainerElement.style.borderRadius=this.inputBorderRadius,this._inputElement.style.borderRadius=this.inputBorderRadius),"updateLayout"!=A.changeName&&"inputHeight"!=A.changeName||(this._inputFieldContainerElement.style.height=this.inputHeight,this._inputElement.style.height=this.inputHeight),"updateLayout"!=A.changeName&&"focused"!=A.changeName&&"floatingLabelTransition"!=A.changeName||this._floatingLabelElement&&this.showFloatingLabel&&(x.Utilities.isInDesignMode()?this._floatingLabelElement.style.transition="":this._floatingLabelElement.style.transition=this.floatingLabelTransition),"updateLayout"!=A.changeName&&"focused"!=A.changeName&&"underlineOpacity"!=A.changeName&&"focusedUnderlineOpacity"!=A.changeName||this._underlineElement&&this._underlineElement.winControl&&this.showUnderline&&(this.focused?this._underlineElement.winControl.opacity=this.focusedUnderlineOpacity:this._underlineElement.winControl.opacity=this.underlineOpacity),"updateLayout"!=A.changeName&&"focused"!=A.changeName&&"showUnderline"!=A.changeName&&"underlineTransition"!=A.changeName||(this._underlineElement&&this.showUnderline?(this._underlineElement.style.display="block",x.Utilities.isInDesignMode()?this._underlineElement.style.transition="":this._underlineElement.style.transition=this.underlineTransition):this._underlineElement.style.display="none"),"updateLayout"!=A.changeName&&"focused"!=A.changeName&&"underlineTransform"!=A.changeName&&"focusedUnderlineTransform"!=A.changeName||this._underlineElement&&this.showUnderline&&(this.focused?this._underlineElement.style.transform=this.focusedUnderlineTransform:this._underlineElement.style.transform=this.underlineTransform),"updateLayout"!=A.changeName&&"limitError"!=A.changeName&&"writeError"!=A.changeName&&"showTrailingSymbol"!=A.changeName&&"showErrorSymbol"!=A.changeName&&"showHelperText"!=A.changeName&&"showErrorText"!=A.changeName||(this._inputElement.winControl.limitError||this._inputElement.winControl.writeError?(this._trailingSymbolElement&&this._trailingSymbolElement.winControl&&(this._trailingSymbolElement.winControl.show=!1),this._errorSymbolElement&&this._errorSymbolElement.winControl&&(this._errorSymbolElement.winControl.show=this.showErrorSymbol),this._helperTextElement&&this._helperTextElement.winControl&&(this._helperTextElement.winControl.show=!1),this._errorTextElement&&this._errorTextElement.winControl&&(this._errorTextElement.winControl.show=this.showErrorText)):(this._trailingSymbolElement&&this._trailingSymbolElement.winControl&&(this._trailingSymbolElement.winControl.show=this.showTrailingSymbol),this._errorSymbolElement&&this._errorSymbolElement.winControl&&(this._errorSymbolElement.winControl.show=!1),this._helperTextElement&&this._helperTextElement.winControl&&(this._helperTextElement.winControl.show=this.showHelperText),this._errorTextElement&&this._errorTextElement.winControl&&(this._errorTextElement.winControl.show=!1))),"updateLayout"==A.changeName||"outlined"==A.changeName||"inputFieldMargin"==A.changeName||"showFloatingLabel"==A.changeName||"unitText"==A.changeName||"showLeadingSymbol"==A.changeName||"showTrailingSymbol"==A.changeName||"showErrorSymbol"==A.changeName||"showUnit"==A.changeName||"leadingSymbolSize"==A.changeName||"trailingSymbolSize"==A.changeName||"errorSymbolSize"==A.changeName||"unitWidth"==A.changeName||"leadingSymbolMargin"==A.changeName||"trailingSymbolMargin"==A.changeName||"errorSymbolMargin"==A.changeName||"unitMargin"==A.changeName){var V=window.getComputedStyle(this._inputFieldElement),R=parseFloat(V.getPropertyValue("margin-left",null)),D=parseFloat(V.getPropertyValue("margin-right",null)),N=R,U=D,B=this.outlined?0:this.showFloatingLabel?20:0,F=this.outlined?0:this.showFloatingLabel?6:0,W=0,H=0,z=0;if(this.showLeadingSymbol&&this._leadingSymbolElement){var G=window.getComputedStyle(this._leadingSymbolElement),j=parseFloat(G.getPropertyValue("width",null));N=(W=parseFloat(G.getPropertyValue("margin-left",null))+j+(ee=parseFloat(G.getPropertyValue("margin-right",null)))+R)>N?W:N}if(this.showTrailingSymbol&&this._trailingSymbolElement){var q=window.getComputedStyle(this._trailingSymbolElement),Q=parseFloat(q.getPropertyValue("width",null));U=(H=D+parseFloat(q.getPropertyValue("margin-left",null))+Q+parseFloat(q.getPropertyValue("margin-right",null)))>U?H:U}if(this.showErrorSymbol&&this._errorSymbolElement){var K=window.getComputedStyle(this._errorSymbolElement),J=parseFloat(K.getPropertyValue("width",null));U=(z=D+parseFloat(K.getPropertyValue("margin-left",null))+J+parseFloat(K.getPropertyValue("margin-right",null)))>U?z:U}if(this.showUnit&&this._unitElement){var X=window.getComputedStyle(this._unitElement),Y=parseFloat(X.getPropertyValue("width",null));U+=parseFloat(X.getPropertyValue("margin-left",null))+Y+parseFloat(X.getPropertyValue("margin-right",null)),this._unitElement.winControl&&(this._unitElement.winControl.padding=B+"px 0px "+F+"px 0px")}this._inputElement.style.padding=B+"px "+U+"px "+F+"px "+N+"px"}if(("updateLayout"==A.changeName||"focused"==A.changeName||"limitError"==A.changeName||"writeError"==A.changeName||"watermarkText"==A.changeName||"value"==A.changeName||"outlined"==A.changeName||"inputFieldMargin"==A.changeName||"showFloatingLabel"==A.changeName||"floatingLabelFixed"==A.changeName||"showLeadingSymbol"==A.changeName||"leadingSymbolSize"==A.changeName||"leadingSymbolMargin"==A.changeName)&&this.showFloatingLabel&&this._floatingLabelElement)if(this.outlined)if(this._inputElement.winControl.focused||this._inputElement.winControl.limitError||this._inputElement.winControl.writeError||this._inputElement.winControl.watermarkText||this._inputElement.winControl.value||"number"==typeof this._inputElement.winControl.value||this.floatingLabelFixed){var $=0,Z=this._floatingLabelElement.clientHeight||24;if(this.showLeadingSymbol&&this._leadingSymbolElement){G=window.getComputedStyle(this._leadingSymbolElement),j=parseFloat(G.getPropertyValue("width",null));var ee=parseFloat(G.getPropertyValue("margin-right",null));V=window.getComputedStyle(this._inputFieldElement);$=j+ee+(R=parseFloat(V.getPropertyValue("margin-left",null)))}this._floatingLabelElement.style.alignSelf="flex-start",this._floatingLabelElement.style.transform="translateX("+-$+"px) translateY("+-Z/2+"px) scale(0.75)"}else this._floatingLabelElement.style.alignSelf="center",this._floatingLabelElement.style.transform="translateX(0px) translateY(0px) scale(1)";else this._floatingLabelElement.style.alignSelf="center",this._inputElement.winControl.focused||this._inputElement.winControl.limitError||this._inputElement.winControl.writeError||this._inputElement.winControl.watermarkText||this._inputElement.winControl.value||"number"==typeof this._inputElement.winControl.value||this.floatingLabelFixed?this._floatingLabelElement.style.transform="translateX(0px) translateY(-60%) scale(0.75)":this._floatingLabelElement.style.transform="translateX(0px) translateY(0px) scale(1)";if("updateLayout"!=A.changeName&&"focused"!=A.changeName&&"watermarkText"!=A.changeName&&"value"!=A.changeName&&"floatingLabelFixed"!=A.changeName&&"showUnit"!=A.changeName||(this._unitElement&&this._unitElement.winControl&&(this._inputElement.winControl.focused||this._inputElement.winControl.watermarkText||this._inputElement.winControl.value||"number"==typeof this._inputElement.winControl.value||this.floatingLabelFixed?this._unitElement.winControl.show=this.showUnit:this._unitElement.winControl.show=!1),x.Utilities.isInDesignMode()&&this.decimalPlaces&&"value"==A.changeName&&(x.isString(A.newValue)&&(A.newValue=parseFloat(A.newValue)),(0===A.newValue||Number.isInteger(A.newValue))&&(this._inputElement.winControl.value=A.newValue.toFixed(this.decimalPlaces)))),"updateLayout"==A.changeName||"labelPosition"==A.changeName)switch(this.labelPosition){case"Top":this.element.style.flexDirection="column";break;case"Right":this.element.style.flexDirection="row-reverse";break;case"Bottom":this.element.style.flexDirection="column-reverse";break;default:this.element.style.flexDirection="row"}}_updateColors(x){this.disabled?(this.element.style.backgroundColor=this.getColor("disabledBackgroundColor"),this._inputFieldContainerElement.style.backgroundColor=this.getColor("disabledBackgroundColor"),this._inputElement.style.backgroundColor=this.getColor("disabledBackgroundColor"),this._floatingLabelElement.winControl.backgroundColor=this.getColor("backgroundColor"),this._underlineElement.winControl.backgroundColor=this.getColor("disabledForegroundColor"),this._labelElement.winControl.symbolForegroundColor=this.getColor("disabledForegroundColor"),this._labelElement.winControl.labelForegroundColor=this.getColor("disabledForegroundColor"),this._inputElement.style.color=this.getColor("disabledForegroundColor"),this._leadingSymbolElement.winControl.foregroundColor=this.getColor("disabledForegroundColor"),this._floatingLabelElement.winControl.foregroundColor=this.getColor("disabledForegroundColor"),this._unitElement.winControl.foregroundColor=this.getColor("disabledForegroundColor"),this._trailingSymbolElement.winControl.foregroundColor=this.getColor("disabledForegroundColor"),this._errorSymbolElement.winControl.foregroundColor=this.getColor("disabledForegroundColor"),this._helperTextElement.winControl.foregroundColor=this.getColor("disabledForegroundColor"),this._errorTextElement.winControl.foregroundColor=this.getColor("disabledForegroundColor"),this.element.style.borderColor=this.getColor("disabledBorderColor"),this._inputElement.style.borderColor=this.getColor("disabledBorderColor"),this._floatingLabelElement.style.outlineColor=this.getColor("disabledFloatingLabelOutlineColor")):(this.element.style.backgroundColor=this.getColor("backgroundColor"),this._inputFieldContainerElement.style.backgroundColor=this.getColor("inputBackgroundColor"),this._floatingLabelElement.winControl.backgroundColor=this.getColor("floatingLabelBackgroundColor"),this._labelElement.winControl.symbolForegroundColor=this.getColor("symbolForegroundColor"),this._labelElement.winControl.labelForegroundColor=this.getColor("labelForegroundColor"),this._inputElement.style.color=this.getColor("inputForegroundColor"),this._leadingSymbolElement.winControl.foregroundColor=this.getColor("leadingSymbolForegroundColor"),this._unitElement.winControl.foregroundColor=this.getColor("unitForegroundColor"),this._trailingSymbolElement.winControl.foregroundColor=this.getColor("trailingSymbolForegroundColor"),this._errorSymbolElement.winControl.foregroundColor=this.getColor("errorColor"),this._helperTextElement.winControl.foregroundColor=this.getColor("helperTextForegroundColor"),this._errorTextElement.winControl.foregroundColor=this.getColor("errorColor"),this.element.style.borderColor=this.getColor("borderColor"),this._floatingLabelElement.style.outlineColor=this.getColor("floatingLabelOutlineColor"),this._inputElement.style.caretColor=this.getColor("caretColor"),this._inputElement.winControl.focused?this._inputElement.style.backgroundColor=this.getColor("focusedInputBackgroundColor"):this._inputElement.winControl.hover?(this._inputElement.style.backgroundColor=this.getColor("hoverInputBackgroundColor"),this._inputElement.style.color=this.getColor("hoverInputForegroundColor")):(this._inputElement.style.backgroundColor=this.getColor("inputBackgroundColor"),this._inputElement.style.color=this.getColor("inputForegroundColor")),this._inputElement.winControl.limitError||this._inputElement.winControl.writeError?(this._underlineElement.winControl.backgroundColor=this.getColor("errorColor"),this._floatingLabelElement.winControl.foregroundColor=this.getColor("errorColor"),this._inputElement.style.borderColor=this.getColor("errorColor")):this._inputElement.winControl.focused?(this._underlineElement.winControl.backgroundColor=this.getColor("focusedUnderlineColor"),this._floatingLabelElement.winControl.foregroundColor=this.getColor("focusedFloatingLabelForegroundColor"),this._inputElement.style.borderColor=this.getColor("focusedInputBorderColor")):this._inputElement.winControl.hover?(this._underlineElement.winControl.backgroundColor=this.getColor("underlineColor"),this._floatingLabelElement.winControl.foregroundColor=this.getColor("floatingLabelForegroundColor"),this._inputElement.style.borderColor=this.getColor("hoverInputBorderColor")):(this._underlineElement.winControl.backgroundColor=this.getColor("underlineColor"),this._floatingLabelElement.winControl.foregroundColor=this.getColor("floatingLabelForegroundColor"),this._inputElement.style.borderColor=this.getColor("inputBorderColor")))}dispose(){var x=super.dispose();return null!=this._localizableErrorText&&this.locService&&this.localizableErrorTextObject&&(this.locService.removeLocalizedText(this._localizableErrorText,this._boundLocalizableErrorTextHandler,this.localizableErrorTextObject),this.localizableErrorTextObject=null),this._inputElement&&this._inputElement.winControl&&(this._inputElement.winControl.removeEventListener("valueChanged",this._boundValueChangedHandler),this._inputElement.winControl.dispose()),x}}NumericVarIn.namespace="VisiWin.UI",NumericVarIn.controlName="NumericVarIn",NumericVarIn.className="vw-numericvarin",NumericVarIn.propertyList={designerType:{propertyType:"base",type:"string",defaultValue_DM:"Control"},valueChanged:{propertyType:"event",triggerDataName:"value"},focused:{propertyType:"child",type:"boolean",child:"_inputElement",forceOverwrite:!0},hover:{propertyType:"child",type:"boolean",child:"_inputElement",forceOverwrite:!0},errorMode:{propertyType:"child",type:"boolean",child:"_inputElement",childProperty:"limitError"},alignItems:{propertyType:"member",type:"string",defaultValue:"Start"},justifyContent:{propertyType:"member",type:"string",defaultValue:"Center"},canRecipeEdit:{propertyType:"child",type:"boolean",child:"_inputElement"},variableName:{propertyType:"child",type:"string",child:"_inputElement"},value:{propertyType:"child",type:"string",child:"_inputElement"},decimalPlaces:{propertyType:"child",type:"number",child:"_inputElement"},useRawValue:{propertyType:"child",type:"boolean",child:"_inputElement"},abortOnEsc:{propertyType:"child",type:"boolean",child:"_inputElement"},writeOnReturn:{propertyType:"child",type:"boolean",child:"_inputElement"},selectOnFocus:{propertyType:"child",type:"boolean",child:"_inputElement"},lostKeyboardFocusBehaviour:{propertyType:"child",type:"string",child:"_inputElement"},rawLimitMin:{propertyType:"child",type:"number",child:"_inputElement",defaultValue:0},rawLimitMax:{propertyType:"child",type:"number",child:"_inputElement",defaultValue:100},useVariableLimits:{propertyType:"child",type:"boolean",child:"_inputElement"},isLimitCheckEnabled:{propertyType:"child",type:"boolean",child:"_inputElement"},limitMinErrorText:{propertyType:"child",type:"string",child:"_inputElement",defaultValue:"LimitMinError"},localizableLimitMinErrorText:{propertyType:"child",type:"string",child:"_inputElement"},limitMaxErrorText:{propertyType:"child",type:"string",child:"_inputElement",defaultValue:"LimitMaxError"},localizableLimitMaxErrorText:{propertyType:"child",type:"string",child:"_inputElement"},variableWriteErrorText:{propertyType:"child",type:"string",child:"_inputElement",defaultValue:"VariableWriteError"},localizableVariableWriteErrorText:{propertyType:"child",type:"string",child:"_inputElement"},watermarkText:{propertyType:"child",type:"string",child:"_inputElement",defaultValue:""},localizableWatermarkText:{propertyType:"child",type:"string",child:"_inputElement"},inputContainerWidth:{propertyType:"style",type:"string",element:"_inputContainerElement",style:"width"},inputContainerHeight:{propertyType:"style",type:"string",element:"_inputContainerElement",style:"height"},inputContainerMargin:{propertyType:"style",type:"string",element:"_inputContainerElement",style:"margin"},inputContainerPadding:{propertyType:"style",type:"string",element:"_inputContainerElement",style:"padding"},inputBorderWidth:{propertyType:"child",type:"string",child:"_inputElement",childProperty:"borderWidth"},inputBorderStyle:{propertyType:"child",type:"enum",child:"_inputElement",childProperty:"borderStyle"},inputBorderRadius:{propertyType:"member",type:"string"},inputWidth:{propertyType:"child",type:"string",child:"_inputElement",childProperty:"width"},inputHeight:{propertyType:"member",type:"string",defaultValue:"40px"},inputMargin:{propertyType:"child",type:"string",child:"_inputElement",childProperty:"margin"},inputPadding:{propertyType:"child",type:"string",child:"_inputElement",childProperty:"padding"},inputTextAlignment:{propertyType:"child",type:"string",child:"_inputElement",childProperty:"textAlignment"},inputFontClass:{propertyType:"child",type:"string",child:"_inputElement",childProperty:"fontClass",defaultValue:"Label1"},inputFontSize:{propertyType:"child",type:"string",child:"_inputElement",childProperty:"fontSize"},inputFontWeight:{propertyType:"child",type:"string",child:"_inputElement",childProperty:"fontWeight"},inputLineHeight:{propertyType:"child",type:"string",child:"_inputElement",childProperty:"lineHeight"},inputTextContrast:{propertyType:"child",type:"number",child:"_inputElement",childProperty:"textContrast"},outlined:{propertyType:"member",type:"boolean",defaultValue:!1},inputFieldMargin:{propertyType:"style",type:"string",element:"_inputFieldElement",style:"margin"},showSymbol:{propertyType:"child",type:"boolean",child:"_labelElement"},iconFont:{propertyType:"child",type:"string",child:"_labelElement"},symbol:{propertyType:"child",type:"string",child:"_labelElement"},symbolType:{propertyType:"child",type:"string",child:"_labelElement"},symbolSize:{propertyType:"child",type:"string",child:"_labelElement"},symbolMargin:{propertyType:"child",type:"string",child:"_labelElement"},symbolPosition:{propertyType:"child",type:"string",child:"_labelElement"},labelContainerWidth:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"width"},labelContainerHeight:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"height"},labelContainerMargin:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"margin"},labelContainerPadding:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"padding"},showLabel:{propertyType:"child",type:"boolean",child:"_labelElement",childProperty:"showText",defaultValue:!0},labelWidth:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"textWidth"},labelHeight:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"textHeight"},labelMargin:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"textMargin"},labelPadding:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"textPadding"},useVariableText:{propertyType:"child",type:"boolean",child:"_inputElement"},labelText:{propertyType:"child",type:"string",child:"_inputElement",defaultValue:"NumericVarIn"},localizableLabelText:{propertyType:"child",type:"string",child:"_inputElement"},labelTextAlignment:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"textAlignment"},labelLineClamp:{propertyType:"child",type:"number",child:"_labelElement",childProperty:"lineClamp"},labelTextWrapping:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"textWrapping"},labelTextTrimming:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"textTrimming"},labelFontClass:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"fontClass",defaultValue:"Label2"},labelFontSize:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"fontSize"},labelFontWeight:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"fontWeight"},labelLineHeight:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"lineHeight"},labelTextContrast:{propertyType:"child",type:"number",child:"_labelElement",childProperty:"textContrast"},labelUppercase:{propertyType:"child",type:"boolean",child:"_labelElement",childProperty:"uppercase"},labelPosition:{propertyType:"member",type:"string",defaultValue:"Top"},showLeadingSymbol:{propertyType:"child",type:"boolean",child:"_leadingSymbolElement",childProperty:"show",defaultValue:!1},leadingIconFont:{propertyType:"child",type:"string",child:"_leadingSymbolElement",childProperty:"iconFont"},leadingSymbol:{propertyType:"child",type:"string",child:"_leadingSymbolElement",childProperty:"symbol"},leadingSymbolType:{propertyType:"child",type:"string",child:"_leadingSymbolElement",childProperty:"symbolType"},leadingSymbolSize:{propertyType:"child",type:"string",child:"_leadingSymbolElement",childProperty:"symbolSize"},leadingSymbolMargin:{propertyType:"child",type:"string",child:"_leadingSymbolElement",childProperty:"margin"},showFloatingLabel:{propertyType:"child",type:"boolean",child:"_floatingLabelElement",childProperty:"show",defaultValue:!1},floatingLabelWidth:{propertyType:"child",type:"string",child:"_floatingLabelElement",childProperty:"width"},floatingLabelHeight:{propertyType:"child",type:"string",child:"_floatingLabelElement",childProperty:"height"},floatingLabelMargin:{propertyType:"child",type:"string",child:"_floatingLabelElement",childProperty:"margin"},floatingLabelPadding:{propertyType:"child",type:"string",child:"_floatingLabelElement",childProperty:"padding"},floatingLabelText:{propertyType:"child",type:"string",child:"_floatingLabelElement",childProperty:"text",defaultValue:"NumericVarIn"},localizableFloatingLabelText:{propertyType:"child",type:"string",child:"_floatingLabelElement",childProperty:"localizableText"},floatingLabelTextAlignment:{propertyType:"child",type:"string",child:"_floatingLabelElement",childProperty:"textAlignment"},floatingLabelLineClamp:{propertyType:"child",type:"number",child:"_floatingLabelElement",childProperty:"lineClamp"},floatingLabelTextWrapping:{propertyType:"child",type:"string",child:"_floatingLabelElement",childProperty:"textWrapping"},floatingLabelTextTrimming:{propertyType:"child",type:"string",child:"_floatingLabelElement",childProperty:"textTrimming"},floatingLabelFontClass:{propertyType:"child",type:"string",child:"_floatingLabelElement",childProperty:"fontClass"},floatingLabelFontSize:{propertyType:"child",type:"string",child:"_floatingLabelElement",childProperty:"fontSize"},floatingLabelFontWeight:{propertyType:"child",type:"string",child:"_floatingLabelElement",childProperty:"fontWeight"},floatingLabelLineHeight:{propertyType:"child",type:"string",child:"_floatingLabelElement",childProperty:"lineHeight"},floatingLabelTextContrast:{propertyType:"child",type:"number",child:"_floatingLabelElement",childProperty:"textContrast"},floatingLabelUppercase:{propertyType:"child",type:"boolean",child:"_floatingLabelElement",childProperty:"uppercase"},floatingLabelFixed:{propertyType:"member",type:"boolean",defaultValue:!1},floatingLabelTransition:{propertyType:"member",type:"string"},floatingLabelOutlineWidth:{propertyType:"style",type:"string",element:"_floatingLabelElement",style:"outlineWidth"},floatingLabelOutlineStyle:{propertyType:"style",type:"string",element:"_floatingLabelElement",style:"outlineStyle"},showUnit:{propertyType:"member",type:"boolean",defaultValue:!0},unitWidth:{propertyType:"child",type:"string",child:"_unitElement",childProperty:"width"},unitHeight:{propertyType:"child",type:"string",child:"_unitElement",childProperty:"height"},unitMargin:{propertyType:"child",type:"string",child:"_unitElement",childProperty:"margin"},unitPadding:{propertyType:"child",type:"string",child:"_unitElement",childProperty:"padding"},useVariableUnitText:{propertyType:"child",type:"boolean",child:"_inputElement",defaultValue:!0},unitText:{propertyType:"child",type:"string",child:"_inputElement",defaultValue:null},localizableUnitText:{propertyType:"child",type:"string",child:"_inputElement"},unitTextAlignment:{propertyType:"child",type:"string",child:"_unitElement",childProperty:"textAlignment"},unitLineClamp:{propertyType:"child",type:"number",child:"_unitElement",childProperty:"lineClamp"},unitTextWrapping:{propertyType:"child",type:"string",child:"_unitElement",childProperty:"textWrapping"},unitTextTrimming:{propertyType:"child",type:"string",child:"_unitElement",childProperty:"textTrimming"},unitFontClass:{propertyType:"child",type:"string",child:"_unitElement",childProperty:"fontClass"},unitFontSize:{propertyType:"child",type:"string",child:"_unitElement",childProperty:"fontSize"},unitFontWeight:{propertyType:"child",type:"string",child:"_unitElement",childProperty:"fontWeight"},unitLineHeight:{propertyType:"child",type:"string",child:"_unitElement",childProperty:"lineHeight"},unitTextContrast:{propertyType:"child",type:"number",child:"_unitElement",childProperty:"textContrast"},showTrailingSymbol:{propertyType:"member",type:"boolean",defaultValue:!1},trailingIconFont:{propertyType:"child",type:"string",child:"_trailingSymbolElement",childProperty:"iconFont"},trailingSymbol:{propertyType:"child",type:"string",child:"_trailingSymbolElement",childProperty:"symbol"},trailingSymbolType:{propertyType:"child",type:"string",child:"_trailingSymbolElement",childProperty:"symbolType"},trailingSymbolSize:{propertyType:"child",type:"string",child:"_trailingSymbolElement",childProperty:"symbolSize"},trailingSymbolMargin:{propertyType:"child",type:"string",child:"_trailingSymbolElement",childProperty:"margin"},showErrorSymbol:{propertyType:"member",type:"boolean",defaultValue:!1},errorIconFont:{propertyType:"child",type:"string",child:"_errorSymbolElement",childProperty:"iconFont"},errorSymbol:{propertyType:"child",type:"string",child:"_errorSymbolElement",childProperty:"symbol"},errorSymbolType:{propertyType:"child",type:"string",child:"_errorSymbolElement",childProperty:"symbolType"},errorSymbolSize:{propertyType:"child",type:"string",child:"_errorSymbolElement",childProperty:"symbolSize"},errorSymbolMargin:{propertyType:"child",type:"string",child:"_errorSymbolElement",childProperty:"margin"},showUnderline:{propertyType:"member",type:"boolean",defaultValue:!1},underlineHeight:{propertyType:"child",type:"string",child:"_underlineElement",childProperty:"height"},underlineOpacity:{propertyType:"child",type:"number",child:"_underlineElement",childProperty:"opacity"},focusedUnderlineOpacity:{propertyType:"child",type:"number",child:"_underlineElement",childProperty:"opacity"},underlineTransition:{propertyType:"member",type:"string",defaultValue:""},underlineTransform:{propertyType:"member",type:"string",defaultValue:""},focusedUnderlineTransform:{propertyType:"member",type:"string",defaultValue:""},showHelperText:{propertyType:"member",type:"boolean",defaultValue:!1},helperTextWidth:{propertyType:"child",type:"string",child:"_helperTextElement",childProperty:"width"},helperTextHeight:{propertyType:"child",type:"string",child:"_helperTextElement",childProperty:"height"},helperTextMargin:{propertyType:"child",type:"string",child:"_helperTextElement",childProperty:"margin"},helperTextPadding:{propertyType:"child",type:"string",child:"_helperTextElement",childProperty:"padding"},helperText:{propertyType:"child",type:"string",child:"_helperTextElement",childProperty:"text",defaultValue:"HelperText"},localizableHelperText:{propertyType:"child",type:"string",child:"_helperTextElement",childProperty:"localizableText"},helperTextAlignment:{propertyType:"child",type:"string",child:"_helperTextElement",childProperty:"textAlignment"},helperTextLineClamp:{propertyType:"child",type:"number",child:"_helperTextElement",childProperty:"lineClamp"},helperTextWrapping:{propertyType:"child",type:"string",child:"_helperTextElement",childProperty:"textWrapping"},helperTextTrimming:{propertyType:"child",type:"string",child:"_helperTextElement",childProperty:"textTrimming"},helperTextFontClass:{propertyType:"child",type:"string",child:"_helperTextElement",childProperty:"fontClass",defaultValue:"Label2"},helperTextFontSize:{propertyType:"child",type:"string",child:"_helperTextElement",childProperty:"fontSize"},helperTextFontWeight:{propertyType:"child",type:"string",child:"_helperTextElement",childProperty:"fontWeight"},helperTextLineHeight:{propertyType:"child",type:"string",child:"_helperTextElement",childProperty:"lineHeight"},helperTextContrast:{propertyType:"child",type:"number",child:"_helperTextElement",childProperty:"textContrast"},helperTextUppercase:{propertyType:"child",type:"boolean",child:"_helperTextElement",childProperty:"uppercase"},showErrorText:{propertyType:"member",type:"boolean",defaultValue:!1},errorTextWidth:{propertyType:"child",type:"string",child:"_errorTextElement",childProperty:"width"},errorTextHeight:{propertyType:"child",type:"string",child:"_errorTextElement",childProperty:"height"},errorTextMargin:{propertyType:"child",type:"string",child:"_errorTextElement",childProperty:"margin"},errorTextPadding:{propertyType:"child",type:"string",child:"_errorTextElement",childProperty:"padding"},errorText:{propertyType:"member",type:"string"},localizableErrorText:{propertyType:"member",type:"string",forceOverwrite:!0},errorTextAlignment:{propertyType:"child",type:"string",child:"_errorTextElement",childProperty:"textAlignment"},errorTextLineClamp:{propertyType:"child",type:"number",child:"_errorTextElement",childProperty:"lineClamp"},errorTextWrapping:{propertyType:"child",type:"string",child:"_errorTextElement",childProperty:"textWrapping"},errorTextTrimming:{propertyType:"child",type:"string",child:"_errorTextElement",childProperty:"textTrimming"},errorTextFontClass:{propertyType:"child",type:"string",child:"_errorTextElement",childProperty:"fontClass",defaultValue:"Label2"},errorTextFontSize:{propertyType:"child",type:"string",child:"_errorTextElement",childProperty:"fontSize"},errorTextFontWeight:{propertyType:"child",type:"string",child:"_errorTextElement",childProperty:"fontWeight"},errorTextLineHeight:{propertyType:"child",type:"string",child:"_errorTextElement",childProperty:"lineHeight"},errorTextContrast:{propertyType:"child",type:"number",child:"_errorTextElement",childProperty:"textContrast"},errorTextUppercase:{propertyType:"child",type:"boolean",child:"_errorTextElement",childProperty:"uppercase"},backgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BackgroundColor"},inputBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},hoverInputBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},focusedInputBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},floatingLabelBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},underlineColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"},focusedUnderlineColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@CheckedBorderColor"},symbolForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},labelForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},inputForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},hoverInputForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},leadingSymbolForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},floatingLabelForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},focusedFloatingLabelForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},unitForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},trailingSymbolForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},helperTextForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},errorColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ErrorColor"},borderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"},inputBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"},hoverInputBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@HoverBorderColor"},focusedInputBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@CheckedBorderColor"},floatingLabelOutlineColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},caretColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},disabledBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledBackgroundColor"},disabledForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledForegroundColor"},disabledBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledBorderColor"},disabledFloatingLabelOutlineColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},useTouchKeyboard:{propertyType:"child",child:"_inputElement",childProperty:"useTouchKeyboard",type:"boolean",defaultValue:!1},touchKeyboardDialogName:{propertyType:"child",child:"_inputElement",childProperty:"touchKeyboardDialogName",type:"string"},forceTouchKeyboardOnMobileDevice:{propertyType:"child",child:"_inputElement",childProperty:"forceTouchKeyboardOnMobileDevice",type:"boolean",defaultValue:!1}},A.NumericVarIn=NumericVarIn}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class TextVarIn extends x.UI.ControlBase{constructor(A,V){super(A,V),this._labelElement=null,this._inputContainerElement=null,this._inputFieldContainerElement=null,this._inputElement=null,this._leadingSymbolElement=null,this._inputFieldElement=null,this._floatingLabelElement=null,this._trailingSymbolElement=null,this._errorSymbolElement=null,this._underlineElement=null,this._helperTextElement=null,this._errorTextElement=null,this._boundValueChangedHandler=this.valueChangeHandler.bind(this),this._boundLocalizableErrorTextHandler=this._localizableErrorTextHandler.bind(this),this.observe={disabled:function(x){this._inputElement&&this._inputElement.winControl&&(this._inputElement.winControl.disabled=x.newValue)},errorText:function(x){this._inputElement&&this._inputElement.winControl&&(this._inputElement.winControl.errorText=x.newValue)},"_inputElement.winControl.labelText":function(x){this._labelElement&&this._labelElement.winControl&&(this._labelElement.winControl.text=x.newValue),this._floatingLabelElement&&this._floatingLabelElement.winControl&&this.useVariableText&&(this._floatingLabelElement.winControl.text=x.newValue)},"_inputElement.winControl.errorText":function(x){this._errorTextElement&&this._errorTextElement.winControl&&(this._errorTextElement.winControl.text=x.newValue)},"_inputElement.winControl.hover":function(x){this._updateColorsBase("property","hover",x.newValue,x.oldValue),this.dispatchNotifyPropertyChanged("property","hover",x.newValue,x.oldValue,"hoverChanged")},"_inputElement.winControl.focused":function(x){this._updateColorsBase("property","focused",x.newValue,x.oldValue),this._updateLayoutBase("property","focused",x.newValue,x.oldValue),this.dispatchNotifyPropertyChanged("property","focused",x.newValue,x.oldValue,"focusedChanged")},"_inputElement.winControl.limitError":function(x){this._updateColorsBase("status","limitError",x.newValue,x.oldValue),this._updateLayoutBase("status","limitError",x.newValue,x.oldValue)},"_inputElement.winControl.writeError":function(x){this._updateColorsBase("status","writeError",x.newValue,x.oldValue),this._updateLayoutBase("status","writeError",x.newValue,x.oldValue)},"_inputElement.winControl.watermarkText":function(x){this._updateLayoutBase("property","watermarkText",x.newValue,x.oldValue),this.dispatchNotifyPropertyChanged("property","watermarkText",x.newValue,x.oldValue)},"_inputElement.winControl.value":function(x){this._updateLayoutBase("property","value",x.newValue,x.oldValue),this.dispatchNotifyPropertyChanged("property","value",x.newValue,x.oldValue)},"_floatingLabelElement.winControl.show":function(x){this._updateLayoutBase("property","showFloatingLabel",x.newValue,x.oldValue)},"_leadingSymbolElement.winControl.show":function(x){this._updateLayoutBase("property","showLeadingSymbol",x.newValue,x.oldValue)},"_leadingSymbolElement.winControl.symbolSize":function(x){this._updateLayoutBase("property","leadingSymbolSize",x.newValue,x.oldValue)},"_trailingSymbolElement.winControl.symbolSize":function(x){this._updateLayoutBase("property","trailingSymbolSize",x.newValue,x.oldValue)},"_errorSymbolElement.winControl.symbolSize":function(x){this._updateLayoutBase("property","errorSymbolSize",x.newValue,x.oldValue)},"_leadingSymbolElement.winControl.margin":function(x){this._updateLayoutBase("property","leadingSymbolMargin",x.newValue,x.oldValue)},"_trailingSymbolElement.winControl.margin":function(x){this._updateLayoutBase("property","trailingSymbolMargin",x.newValue,x.oldValue)},"_errorSymbolElement.winControl.margin":function(x){this._updateLayoutBase("property","errorSymbolMargin",x.newValue,x.oldValue)}},this.localizableErrorTextObject=null,this._localizableErrorText=null,this.addPropertyList(TextVarIn,TextVarIn.propertyList),this.defaultConstructor(A,this.inlineOptions,x.UI.TextVarIn.controlName,x.UI.TextVarIn.className)}createTemplate(){return this.element.innerHTML=['<div class="vw-textvarin__label" data-win-control="VisiWin.UI.Label" data-win-options="{showSymbol:'+this.inlineOptions.showSymbol+'}"></div>','<div class="vw-textvarin__inputcontainer">','<div class="vw-textvarin__inputfieldcontainer">','<input class="vw-textvarin__input" data-win-control="VisiWin.UI.TextVarInCore">','<div class="vw-textvarin__leadingsymbol" data-win-control="VisiWin.UI.Symbol"></div>','<div class="vw-textvarin__inputfield">','<div class="vw-textvarin__floatinglabel" data-win-control="VisiWin.UI.TextBlock"></div>',"</div>",'<div class="vw-textvarin__trailingsymbol" data-win-control="VisiWin.UI.Symbol"></div>','<div class="vw-textvarin__errorsymbol" data-win-control="VisiWin.UI.Symbol"></div>','<div class="vw-textvarin__underline" data-win-control="VisiWin.UI.Divider"></div>',"</div>",'<div class="vw-textvarin__helpertext" data-win-control="VisiWin.UI.TextBlock"></div>','<div class="vw-textvarin__errortext" data-win-control="VisiWin.UI.TextBlock"></div>',"</div>"].join("\n"),this._labelElement=this.element.firstElementChild,this._inputContainerElement=this._labelElement.nextElementSibling,this._inputFieldContainerElement=this._inputContainerElement.firstElementChild,this._inputElement=this._inputFieldContainerElement.firstElementChild,this._leadingSymbolElement=this._inputElement.nextElementSibling,this._inputFieldElement=this._leadingSymbolElement.nextElementSibling,this._floatingLabelElement=this._inputFieldElement.firstElementChild,this._trailingSymbolElement=this._inputFieldElement.nextElementSibling,this._errorSymbolElement=this._trailingSymbolElement.nextElementSibling,this._underlineElement=this._errorSymbolElement.nextElementSibling,this._helperTextElement=this._inputFieldContainerElement.nextElementSibling,this._errorTextElement=this._helperTextElement.nextElementSibling,this.processElements([this._labelElement,this._inputElement,this._leadingSymbolElement,this._floatingLabelElement,this._trailingSymbolElement,this._errorSymbolElement,this._underlineElement,this._helperTextElement,this._errorTextElement])}afterInit(){this._inputElement&&this._inputElement.winControl&&this._inputElement.winControl.addEventListener("valueChanged",this._boundValueChangedHandler)}writeValue(x){this._inputElement.winControl._writeValueFromVarIn(x)}valueChangeHandler(x){this.dispatchEvent("valueChanged",x.detail)}_localizableErrorTextHandler(x){this.errorText=x.DisplayText}get localizableErrorText(){return this._localizableErrorText}set localizableErrorText(x){if(this._localizableErrorText!=x){var A=this._localizableErrorText;null!=this._localizableErrorText&&this.locService&&this.localizableErrorTextObject&&(this.locService.removeLocalizedText(this._localizableErrorText,this._boundLocalizableErrorTextHandler,this.localizableErrorTextObject),this.localizableErrorTextObject=null),this._localizableErrorText=x,this.locService&&this.locService.addLocalizedTextAsync(this._localizableErrorText,this._boundLocalizableErrorTextHandler).then(x=>{this.localizableErrorTextObject=x}),this._updateLayoutBase("property","localizableErrorText",x,A),this.dispatchNotifyPropertyChanged("property","localizableErrorText",x,A)}}_updateLayout(A){if("updateLayout"!=A.changeName&&"focused"!=A.changeName||(this._inputElement.winControl.focused?x.Utilities.addClass(this.element,"focused"):x.Utilities.removeClass(this.element,"focused")),"updateLayout"==A.changeName||"alignItems"==A.changeName)switch(this.alignItems){case"Center":this.element.style.alignItems="center";break;case"Start":this.element.style.alignItems="flex-start";break;case"End":this.element.style.alignItems="flex-end";break;case"Baseline":this.element.style.alignItems="baseline";break;default:this.element.style.alignItems="stretch"}if("updateLayout"==A.changeName||"justifyContent"==A.changeName)switch(this.justifyContent){case"End":this.element.style.justifyContent="flex-end";break;case"Center":this.element.style.justifyContent="center";break;case"Space-between":this.element.style.justifyContent="space-between";break;case"Space-around":this.element.style.justifyContent="space-around";break;case"Space-evenly":this.element.style.justifyContent="space-evenly";break;default:this.element.style.justifyContent="flex-start"}if("updateLayout"!=A.changeName&&"inputBorderRadius"!=A.changeName||(this._inputFieldContainerElement.style.borderRadius=this.inputBorderRadius,this._inputElement.style.borderRadius=this.inputBorderRadius),"updateLayout"!=A.changeName&&"inputHeight"!=A.changeName||(this._inputFieldContainerElement.style.height=this.inputHeight,this._inputElement.style.height=this.inputHeight),"updateLayout"!=A.changeName&&"focused"!=A.changeName&&"floatingLabelTransition"!=A.changeName||this._floatingLabelElement&&this.showFloatingLabel&&(x.Utilities.isInDesignMode()?this._floatingLabelElement.style.transition="":this._floatingLabelElement.style.transition=this.floatingLabelTransition),"updateLayout"!=A.changeName&&"focused"!=A.changeName&&"underlineOpacity"!=A.changeName&&"focusedUnderlineOpacity"!=A.changeName||this._underlineElement&&this._underlineElement.winControl&&this.showUnderline&&(this.focused?this._underlineElement.winControl.opacity=this.focusedUnderlineOpacity:this._underlineElement.winControl.opacity=this.underlineOpacity),"updateLayout"!=A.changeName&&"focused"!=A.changeName&&"showUnderline"!=A.changeName&&"underlineTransition"!=A.changeName||(this._underlineElement&&this.showUnderline?(this._underlineElement.style.display="block",x.Utilities.isInDesignMode()?this._underlineElement.style.transition="":this._underlineElement.style.transition=this.underlineTransition):this._underlineElement.style.display="none"),"updateLayout"!=A.changeName&&"focused"!=A.changeName&&"underlineTransform"!=A.changeName&&"focusedUnderlineTransform"!=A.changeName||this._underlineElement&&this.showUnderline&&(this.focused?this._underlineElement.style.transform=this.focusedUnderlineTransform:this._underlineElement.style.transform=this.underlineTransform),"updateLayout"!=A.changeName&&"limitError"!=A.changeName&&"writeError"!=A.changeName&&"showTrailingSymbol"!=A.changeName&&"showErrorSymbol"!=A.changeName&&"showHelperText"!=A.changeName&&"showErrorText"!=A.changeName||(this._inputElement.winControl.limitError||this._inputElement.winControl.writeError?(this._trailingSymbolElement&&this._trailingSymbolElement.winControl&&(this._trailingSymbolElement.winControl.show=!1),this._errorSymbolElement&&this._errorSymbolElement.winControl&&(this._errorSymbolElement.winControl.show=this.showErrorSymbol),this._helperTextElement&&this._helperTextElement.winControl&&(this._helperTextElement.winControl.show=!1),this._errorTextElement&&this._errorTextElement.winControl&&(this._errorTextElement.winControl.show=this.showErrorText)):(this._trailingSymbolElement&&this._trailingSymbolElement.winControl&&(this._trailingSymbolElement.winControl.show=this.showTrailingSymbol),this._errorSymbolElement&&this._errorSymbolElement.winControl&&(this._errorSymbolElement.winControl.show=!1),this._helperTextElement&&this._helperTextElement.winControl&&(this._helperTextElement.winControl.show=this.showHelperText),this._errorTextElement&&this._errorTextElement.winControl&&(this._errorTextElement.winControl.show=!1))),"updateLayout"==A.changeName||"outlined"==A.changeName||"inputFieldMargin"==A.changeName||"showFloatingLabel"==A.changeName||"showLeadingSymbol"==A.changeName||"showTrailingSymbol"==A.changeName||"showErrorSymbol"==A.changeName||"leadingSymbolSize"==A.changeName||"trailingSymbolSize"==A.changeName||"errorSymbolSize"==A.changeName||"leadingSymbolMargin"==A.changeName||"trailingSymbolMargin"==A.changeName||"errorSymbolMargin"==A.changeName){var V=window.getComputedStyle(this._inputFieldElement),R=parseFloat(V.getPropertyValue("margin-left",null)),D=parseFloat(V.getPropertyValue("margin-right",null)),N=R,U=D,B=this.outlined?0:this.showFloatingLabel?20:0,F=this.outlined?0:this.showFloatingLabel?6:0,W=0,H=0,z=0;if(this.showLeadingSymbol&&this._leadingSymbolElement){var G=window.getComputedStyle(this._leadingSymbolElement),j=parseFloat(G.getPropertyValue("width",null));N=(W=parseFloat(G.getPropertyValue("margin-left",null))+j+($=parseFloat(G.getPropertyValue("margin-right",null)))+R)>N?W:N}if(this.showTrailingSymbol&&this._trailingSymbolElement){var q=window.getComputedStyle(this._trailingSymbolElement),Q=parseFloat(q.getPropertyValue("width",null));U=(H=D+parseFloat(q.getPropertyValue("margin-left",null))+Q+parseFloat(q.getPropertyValue("margin-right",null)))>U?H:U}if(this.showErrorSymbol&&this._errorSymbolElement){var K=window.getComputedStyle(this._errorSymbolElement),J=parseFloat(K.getPropertyValue("width",null));U=(z=D+parseFloat(K.getPropertyValue("margin-left",null))+J+parseFloat(K.getPropertyValue("margin-right",null)))>U?z:U}this._inputElement.style.padding=B+"px "+U+"px "+F+"px "+N+"px"}if(("updateLayout"==A.changeName||"focused"==A.changeName||"limitError"==A.changeName||"writeError"==A.changeName||"watermarkText"==A.changeName||"value"==A.changeName||"outlined"==A.changeName||"inputFieldMargin"==A.changeName||"showFloatingLabel"==A.changeName||"floatingLabelFixed"==A.changeName||"showLeadingSymbol"==A.changeName||"leadingSymbolSize"==A.changeName||"leadingSymbolMargin"==A.changeName)&&this.showFloatingLabel&&this._floatingLabelElement)if(this.outlined)if(this._inputElement.winControl.focused||this._inputElement.winControl.limitError||this._inputElement.winControl.writeError||this._inputElement.winControl.watermarkText||this._inputElement.winControl.value||"number"==typeof this._inputElement.winControl.value||this.floatingLabelFixed){var X=0,Y=this._floatingLabelElement.clientHeight||24;if(this.showLeadingSymbol&&this._leadingSymbolElement){G=window.getComputedStyle(this._leadingSymbolElement),j=parseFloat(G.getPropertyValue("width",null));var $=parseFloat(G.getPropertyValue("margin-right",null));V=window.getComputedStyle(this._inputFieldElement);X=j+$+(R=parseFloat(V.getPropertyValue("margin-left",null)))}this._floatingLabelElement.style.alignSelf="flex-start",this._floatingLabelElement.style.transform="translateX("+-X+"px) translateY("+-Y/2+"px) scale(0.75)"}else this._floatingLabelElement.style.alignSelf="center",this._floatingLabelElement.style.transform="translateX(0px) translateY(0px) scale(1)";else this._floatingLabelElement.style.alignSelf="center",this._inputElement.winControl.focused||this._inputElement.winControl.limitError||this._inputElement.winControl.writeError||this._inputElement.winControl.watermarkText||this._inputElement.winControl.value||"number"==typeof this._inputElement.winControl.value||this.floatingLabelFixed?this._floatingLabelElement.style.transform="translateX(0px) translateY(-60%) scale(0.75)":this._floatingLabelElement.style.transform="translateX(0px) translateY(0px) scale(1)";if("updateLayout"==A.changeName||"labelPosition"==A.changeName)switch(this.labelPosition){case"Top":this.element.style.flexDirection="column";break;case"Right":this.element.style.flexDirection="row-reverse";break;case"Bottom":this.element.style.flexDirection="column-reverse";break;default:this.element.style.flexDirection="row"}}_updateColors(x){this.disabled?(this.element.style.backgroundColor=this.getColor("disabledBackgroundColor"),this._inputFieldContainerElement.style.backgroundColor=this.getColor("disabledBackgroundColor"),this._inputElement.style.backgroundColor=this.getColor("disabledBackgroundColor"),this._floatingLabelElement.winControl.backgroundColor=this.getColor("backgroundColor"),this._underlineElement.winControl.backgroundColor=this.getColor("disabledForegroundColor"),this._labelElement.winControl.symbolForegroundColor=this.getColor("disabledForegroundColor"),this._labelElement.winControl.labelForegroundColor=this.getColor("disabledForegroundColor"),this._inputElement.style.color=this.getColor("disabledForegroundColor"),this._leadingSymbolElement.winControl.foregroundColor=this.getColor("disabledForegroundColor"),this._floatingLabelElement.winControl.foregroundColor=this.getColor("disabledForegroundColor"),this._trailingSymbolElement.winControl.foregroundColor=this.getColor("disabledForegroundColor"),this._errorSymbolElement.winControl.foregroundColor=this.getColor("disabledForegroundColor"),this._helperTextElement.winControl.foregroundColor=this.getColor("disabledForegroundColor"),this._errorTextElement.winControl.foregroundColor=this.getColor("disabledForegroundColor"),this.element.style.borderColor=this.getColor("disabledBorderColor"),this._inputElement.style.borderColor=this.getColor("disabledBorderColor"),this._floatingLabelElement.style.outlineColor=this.getColor("disabledFloatingLabelOutlineColor")):(this.element.style.backgroundColor=this.getColor("backgroundColor"),this._inputFieldContainerElement.style.backgroundColor=this.getColor("inputBackgroundColor"),this._floatingLabelElement.winControl.backgroundColor=this.getColor("floatingLabelBackgroundColor"),this._labelElement.winControl.symbolForegroundColor=this.getColor("symbolForegroundColor"),this._labelElement.winControl.labelForegroundColor=this.getColor("labelForegroundColor"),this._inputElement.style.color=this.getColor("inputForegroundColor"),this._leadingSymbolElement.winControl.foregroundColor=this.getColor("leadingSymbolForegroundColor"),this._trailingSymbolElement.winControl.foregroundColor=this.getColor("trailingSymbolForegroundColor"),this._errorSymbolElement.winControl.foregroundColor=this.getColor("errorColor"),this._helperTextElement.winControl.foregroundColor=this.getColor("helperTextForegroundColor"),this._errorTextElement.winControl.foregroundColor=this.getColor("errorColor"),this.element.style.borderColor=this.getColor("borderColor"),this._floatingLabelElement.style.outlineColor=this.getColor("floatingLabelOutlineColor"),this._inputElement.style.caretColor=this.getColor("caretColor"),this._inputElement.winControl.focused?this._inputElement.style.backgroundColor=this.getColor("focusedInputBackgroundColor"):this._inputElement.winControl.hover?(this._inputElement.style.backgroundColor=this.getColor("hoverInputBackgroundColor"),this._inputElement.style.color=this.getColor("hoverInputForegroundColor")):(this._inputElement.style.backgroundColor=this.getColor("inputBackgroundColor"),this._inputElement.style.color=this.getColor("inputForegroundColor")),this._inputElement.winControl.limitError||this._inputElement.winControl.writeError?(this._underlineElement.winControl.backgroundColor=this.getColor("errorColor"),this._floatingLabelElement.winControl.foregroundColor=this.getColor("errorColor"),this._inputElement.style.borderColor=this.getColor("errorColor")):this._inputElement.winControl.focused?(this._underlineElement.winControl.backgroundColor=this.getColor("focusedUnderlineColor"),this._floatingLabelElement.winControl.foregroundColor=this.getColor("focusedFloatingLabelForegroundColor"),this._inputElement.style.borderColor=this.getColor("focusedInputBorderColor")):this._inputElement.winControl.hover?(this._underlineElement.winControl.backgroundColor=this.getColor("underlineColor"),this._floatingLabelElement.winControl.foregroundColor=this.getColor("floatingLabelForegroundColor"),this._inputElement.style.borderColor=this.getColor("hoverInputBorderColor")):(this._underlineElement.winControl.backgroundColor=this.getColor("underlineColor"),this._floatingLabelElement.winControl.foregroundColor=this.getColor("floatingLabelForegroundColor"),this._inputElement.style.borderColor=this.getColor("inputBorderColor")))}dispose(){var x=super.dispose();return null!=this._localizableErrorText&&this.locService&&this.localizableErrorTextObject&&(this.locService.removeLocalizedText(this._localizableErrorText,this._boundLocalizableErrorTextHandler,this.localizableErrorTextObject),this.localizableErrorTextObject=null),this._inputElement&&this._inputElement.winControl&&(this._inputElement.winControl.removeEventListener("valueChanged",this._boundValueChangedHandler),this._inputElement.winControl.dispose()),x}}TextVarIn.namespace="VisiWin.UI",TextVarIn.controlName="TextVarIn",TextVarIn.className="vw-textvarin",TextVarIn.propertyList={designerType:{propertyType:"base",type:"string",defaultValue_DM:"Control"},valueChanged:{propertyType:"event"},focused:{propertyType:"child",type:"boolean",child:"_inputElement",forceOverwrite:!0},hover:{propertyType:"child",type:"boolean",child:"_inputElement",forceOverwrite:!0},errorMode:{propertyType:"child",type:"boolean",child:"_inputElement",childProperty:"limitError"},alignItems:{propertyType:"member",type:"string",defaultValue:"Start"},justifyContent:{propertyType:"member",type:"string",defaultValue:"Center"},canRecipeEdit:{propertyType:"child",type:"boolean",child:"_inputElement"},variableName:{propertyType:"child",type:"string",child:"_inputElement"},value:{propertyType:"child",type:"string",child:"_inputElement"},abortOnEsc:{propertyType:"child",type:"boolean",child:"_inputElement"},writeOnReturn:{propertyType:"child",type:"boolean",child:"_inputElement"},selectOnFocus:{propertyType:"child",type:"boolean",child:"_inputElement"},lostKeyboardFocusBehaviour:{propertyType:"child",type:"string",child:"_inputElement"},textLengthMin:{propertyType:"child",type:"number",child:"_inputElement",defaultValue:0},textLengthMax:{propertyType:"child",type:"number",child:"_inputElement",defaultValue:100},useVariableLimits:{propertyType:"child",type:"boolean",child:"_inputElement"},isLimitCheckEnabled:{propertyType:"child",type:"boolean",child:"_inputElement"},limitMinErrorText:{propertyType:"child",type:"string",child:"_inputElement",defaultValue:"LimitMinError"},localizableLimitMinErrorText:{propertyType:"child",type:"string",child:"_inputElement"},limitMaxErrorText:{propertyType:"child",type:"string",child:"_inputElement",defaultValue:"LimitMaxError"},localizableLimitMaxErrorText:{propertyType:"child",type:"string",child:"_inputElement"},variableWriteErrorText:{propertyType:"child",type:"string",child:"_inputElement",defaultValue:"VariableWriteError"},localizableVariableWriteErrorText:{propertyType:"child",type:"string",child:"_inputElement"},watermarkText:{propertyType:"child",type:"string",child:"_inputElement",defaultValue:""},localizableWatermarkText:{propertyType:"child",type:"string",child:"_inputElement"},inputContainerWidth:{propertyType:"style",type:"string",element:"_inputContainerElement",style:"width"},inputContainerHeight:{propertyType:"style",type:"string",element:"_inputContainerElement",style:"height"},inputContainerMargin:{propertyType:"style",type:"string",element:"_inputContainerElement",style:"margin"},inputContainerPadding:{propertyType:"style",type:"string",element:"_inputContainerElement",style:"padding"},inputBorderWidth:{propertyType:"child",type:"string",child:"_inputElement",childProperty:"borderWidth"},inputBorderStyle:{propertyType:"child",type:"enum",child:"_inputElement",childProperty:"borderStyle"},inputBorderRadius:{propertyType:"member",type:"string"},inputWidth:{propertyType:"child",type:"string",child:"_inputElement",childProperty:"width"},inputHeight:{propertyType:"member",type:"string",defaultValue:"40px"},inputMargin:{propertyType:"child",type:"string",child:"_inputElement",childProperty:"margin"},inputPadding:{propertyType:"child",type:"string",child:"_inputElement",childProperty:"padding"},inputTextAlignment:{propertyType:"child",type:"string",child:"_inputElement",childProperty:"textAlignment"},inputFontClass:{propertyType:"child",type:"string",child:"_inputElement",childProperty:"fontClass",defaultValue:"Label1"},inputFontSize:{propertyType:"child",type:"string",child:"_inputElement",childProperty:"fontSize"},inputFontWeight:{propertyType:"child",type:"string",child:"_inputElement",childProperty:"fontWeight"},inputLineHeight:{propertyType:"child",type:"string",child:"_inputElement",childProperty:"lineHeight"},inputTextContrast:{propertyType:"child",type:"number",child:"_inputElement",childProperty:"textContrast"},inputType:{propertyType:"child",type:"string",child:"_inputElement"},outlined:{propertyType:"member",type:"boolean",defaultValue:!1},inputFieldMargin:{propertyType:"style",type:"string",element:"_inputFieldElement",style:"margin"},showSymbol:{propertyType:"child",type:"boolean",child:"_labelElement"},iconFont:{propertyType:"child",type:"string",child:"_labelElement"},symbol:{propertyType:"child",type:"string",child:"_labelElement"},symbolType:{propertyType:"child",type:"string",child:"_labelElement"},symbolSize:{propertyType:"child",type:"string",child:"_labelElement"},symbolMargin:{propertyType:"child",type:"string",child:"_labelElement"},symbolPosition:{propertyType:"child",type:"string",child:"_labelElement"},labelContainerWidth:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"width"},labelContainerHeight:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"height"},labelContainerMargin:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"margin"},labelContainerPadding:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"padding"},showLabel:{propertyType:"child",type:"boolean",child:"_labelElement",childProperty:"showText",defaultValue:!0},labelWidth:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"textWidth"},labelHeight:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"textHeight"},labelMargin:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"textMargin"},labelPadding:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"textPadding"},useVariableText:{propertyType:"child",type:"boolean",child:"_inputElement"},labelText:{propertyType:"child",type:"string",child:"_inputElement",defaultValue:"TextVarIn"},localizableLabelText:{propertyType:"child",type:"string",child:"_inputElement"},labelTextAlignment:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"textAlignment"},labelLineClamp:{propertyType:"child",type:"number",child:"_labelElement",childProperty:"lineClamp"},labelTextWrapping:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"textWrapping"},labelTextTrimming:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"textTrimming"},labelFontClass:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"fontClass",defaultValue:"Label2"},labelFontSize:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"fontSize"},labelFontWeight:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"fontWeight"},labelLineHeight:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"lineHeight"},labelTextContrast:{propertyType:"child",type:"number",child:"_labelElement",childProperty:"textContrast"},labelUppercase:{propertyType:"child",type:"boolean",child:"_labelElement",childProperty:"uppercase"},labelPosition:{propertyType:"member",type:"string",defaultValue:"Top"},showLeadingSymbol:{propertyType:"child",type:"boolean",child:"_leadingSymbolElement",childProperty:"show",defaultValue:!1},leadingIconFont:{propertyType:"child",type:"string",child:"_leadingSymbolElement",childProperty:"iconFont"},leadingSymbol:{propertyType:"child",type:"string",child:"_leadingSymbolElement",childProperty:"symbol"},leadingSymbolType:{propertyType:"child",type:"string",child:"_leadingSymbolElement",childProperty:"symbolType"},leadingSymbolSize:{propertyType:"child",type:"string",child:"_leadingSymbolElement",childProperty:"symbolSize"},leadingSymbolMargin:{propertyType:"child",type:"string",child:"_leadingSymbolElement",childProperty:"margin"},showFloatingLabel:{propertyType:"child",type:"boolean",child:"_floatingLabelElement",childProperty:"show",defaultValue:!1},floatingLabelWidth:{propertyType:"child",type:"string",child:"_floatingLabelElement",childProperty:"width"},floatingLabelHeight:{propertyType:"child",type:"string",child:"_floatingLabelElement",childProperty:"height"},floatingLabelMargin:{propertyType:"child",type:"string",child:"_floatingLabelElement",childProperty:"margin"},floatingLabelPadding:{propertyType:"child",type:"string",child:"_floatingLabelElement",childProperty:"padding"},floatingLabelText:{propertyType:"child",type:"string",child:"_floatingLabelElement",childProperty:"text",defaultValue:"TextVarIn"},localizableFloatingLabelText:{propertyType:"child",type:"string",child:"_floatingLabelElement",childProperty:"localizableText"},floatingLabelTextAlignment:{propertyType:"child",type:"string",child:"_floatingLabelElement",childProperty:"textAlignment"},floatingLabelLineClamp:{propertyType:"child",type:"number",child:"_floatingLabelElement",childProperty:"lineClamp"},floatingLabelTextWrapping:{propertyType:"child",type:"string",child:"_floatingLabelElement",childProperty:"textWrapping"},floatingLabelTextTrimming:{propertyType:"child",type:"string",child:"_floatingLabelElement",childProperty:"textTrimming"},floatingLabelFontClass:{propertyType:"child",type:"string",child:"_floatingLabelElement",childProperty:"fontClass"},floatingLabelFontSize:{propertyType:"child",type:"string",child:"_floatingLabelElement",childProperty:"fontSize"},floatingLabelFontWeight:{propertyType:"child",type:"string",child:"_floatingLabelElement",childProperty:"fontWeight"},floatingLabelLineHeight:{propertyType:"child",type:"string",child:"_floatingLabelElement",childProperty:"lineHeight"},floatingLabelTextContrast:{propertyType:"child",type:"number",child:"_floatingLabelElement",childProperty:"textContrast"},floatingLabelUppercase:{propertyType:"child",type:"boolean",child:"_floatingLabelElement",childProperty:"uppercase"},floatingLabelFixed:{propertyType:"member",type:"boolean",defaultValue:!1},floatingLabelTransition:{propertyType:"member",type:"string"},floatingLabelOutlineWidth:{propertyType:"style",type:"string",element:"_floatingLabelElement",style:"outlineWidth"},floatingLabelOutlineStyle:{propertyType:"style",type:"string",element:"_floatingLabelElement",style:"outlineStyle"},showTrailingSymbol:{propertyType:"member",type:"boolean",defaultValue:!1},trailingIconFont:{propertyType:"child",type:"string",child:"_trailingSymbolElement",childProperty:"iconFont"},trailingSymbol:{propertyType:"child",type:"string",child:"_trailingSymbolElement",childProperty:"symbol"},trailingSymbolType:{propertyType:"child",type:"string",child:"_trailingSymbolElement",childProperty:"symbolType"},trailingSymbolSize:{propertyType:"child",type:"string",child:"_trailingSymbolElement",childProperty:"symbolSize"},trailingSymbolMargin:{propertyType:"child",type:"string",child:"_trailingSymbolElement",childProperty:"margin"},showErrorSymbol:{propertyType:"member",type:"boolean",defaultValue:!1},errorIconFont:{propertyType:"child",type:"string",child:"_errorSymbolElement",childProperty:"iconFont"},errorSymbol:{propertyType:"child",type:"string",child:"_errorSymbolElement",childProperty:"symbol"},errorSymbolType:{propertyType:"child",type:"string",child:"_errorSymbolElement",childProperty:"symbolType"},errorSymbolSize:{propertyType:"child",type:"string",child:"_errorSymbolElement",childProperty:"symbolSize"},errorSymbolMargin:{propertyType:"child",type:"string",child:"_errorSymbolElement",childProperty:"margin"},showUnderline:{propertyType:"member",type:"boolean",defaultValue:!1},underlineHeight:{propertyType:"child",type:"string",child:"_underlineElement",childProperty:"height"},underlineOpacity:{propertyType:"member",type:"number"},focusedUnderlineOpacity:{propertyType:"member",type:"number"},underlineTransition:{propertyType:"member",type:"string",defaultValue:""},underlineTransform:{propertyType:"member",type:"string",defaultValue:""},focusedUnderlineTransform:{propertyType:"member",type:"string",defaultValue:""},showHelperText:{propertyType:"member",type:"boolean",defaultValue:!1},helperTextWidth:{propertyType:"child",type:"string",child:"_helperTextElement",childProperty:"width"},helperTextHeight:{propertyType:"child",type:"string",child:"_helperTextElement",childProperty:"height"},helperTextMargin:{propertyType:"child",type:"string",child:"_helperTextElement",childProperty:"margin"},helperTextPadding:{propertyType:"child",type:"string",child:"_helperTextElement",childProperty:"padding"},helperText:{propertyType:"child",type:"string",child:"_helperTextElement",childProperty:"text",defaultValue:"HelperText"},localizableHelperText:{propertyType:"child",type:"string",child:"_helperTextElement",childProperty:"localizableText"},helperTextAlignment:{propertyType:"child",type:"string",child:"_helperTextElement",childProperty:"textAlignment"},helperTextLineClamp:{propertyType:"child",type:"number",child:"_helperTextElement",childProperty:"lineClamp"},helperTextWrapping:{propertyType:"child",type:"string",child:"_helperTextElement",childProperty:"textWrapping"},helperTextTrimming:{propertyType:"child",type:"string",child:"_helperTextElement",childProperty:"textTrimming"},helperTextFontClass:{propertyType:"child",type:"string",child:"_helperTextElement",childProperty:"fontClass",defaultValue:"Label2"},helperTextFontSize:{propertyType:"child",type:"string",child:"_helperTextElement",childProperty:"fontSize"},helperTextFontWeight:{propertyType:"child",type:"string",child:"_helperTextElement",childProperty:"fontWeight"},helperTextLineHeight:{propertyType:"child",type:"string",child:"_helperTextElement",childProperty:"lineHeight"},helperTextContrast:{propertyType:"child",type:"number",child:"_helperTextElement",childProperty:"textContrast"},helperTextUppercase:{propertyType:"child",type:"boolean",child:"_helperTextElement",childProperty:"uppercase"},showErrorText:{propertyType:"member",type:"boolean",defaultValue:!1},errorTextWidth:{propertyType:"child",type:"string",child:"_errorTextElement",childProperty:"width"},errorTextHeight:{propertyType:"child",type:"string",child:"_errorTextElement",childProperty:"height"},errorTextMargin:{propertyType:"child",type:"string",child:"_errorTextElement",childProperty:"margin"},errorTextPadding:{propertyType:"child",type:"string",child:"_errorTextElement",childProperty:"padding"},errorText:{propertyType:"member",type:"string"},localizableErrorText:{propertyType:"member",type:"string",forceOverwrite:!0},errorTextAlignment:{propertyType:"child",type:"string",child:"_errorTextElement",childProperty:"textAlignment"},errorTextLineClamp:{propertyType:"child",type:"number",child:"_errorTextElement",childProperty:"lineClamp"},errorTextWrapping:{propertyType:"child",type:"string",child:"_errorTextElement",childProperty:"textWrapping"},errorTextTrimming:{propertyType:"child",type:"string",child:"_errorTextElement",childProperty:"textTrimming"},errorTextFontClass:{propertyType:"child",type:"string",child:"_errorTextElement",childProperty:"fontClass",defaultValue:"Label2"},errorTextFontSize:{propertyType:"child",type:"string",child:"_errorTextElement",childProperty:"fontSize"},errorTextFontWeight:{propertyType:"child",type:"string",child:"_errorTextElement",childProperty:"fontWeight"},errorTextLineHeight:{propertyType:"child",type:"string",child:"_errorTextElement",childProperty:"lineHeight"},errorTextContrast:{propertyType:"child",type:"number",child:"_errorTextElement",childProperty:"textContrast"},errorTextUppercase:{propertyType:"child",type:"boolean",child:"_errorTextElement",childProperty:"uppercase"},backgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BackgroundColor"},inputBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},hoverInputBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},focusedInputBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},floatingLabelBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},underlineColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"},focusedUnderlineColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@CheckedBorderColor"},symbolForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},labelForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},inputForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},hoverInputForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},leadingSymbolForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},floatingLabelForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},focusedFloatingLabelForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},trailingSymbolForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},helperTextForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},errorColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ErrorColor"},borderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"},inputBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"},hoverInputBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@HoverBorderColor"},focusedInputBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@CheckedBorderColor"},floatingLabelOutlineColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},caretColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},disabledBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledBackgroundColor"},disabledForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledForegroundColor"},disabledBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledBorderColor"},disabledFloatingLabelOutlineColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},useTouchKeyboard:{propertyType:"child",child:"_inputElement",childProperty:"useTouchKeyboard",type:"boolean",defaultValue:!1},touchKeyboardDialogName:{propertyType:"child",child:"_inputElement",childProperty:"touchKeyboardDialogName",type:"string"},forceTouchKeyboardOnMobileDevice:{propertyType:"child",child:"_inputElement",childProperty:"forceTouchKeyboardOnMobileDevice",type:"boolean",defaultValue:!1}},A.TextVarIn=TextVarIn}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class DateTimeVarIn extends x.UI.ControlBase{constructor(A,V){super(A,V),this._labelElement=null,this._inputContainerElement=null,this._inputFieldContainerElement=null,this._inputElement=null,this._leadingSymbolElement=null,this._inputFieldElement=null,this._floatingLabelElement=null,this._trailingSymbolElement=null,this._errorSymbolElement=null,this._underlineElement=null,this._helperTextElement=null,this._errorTextElement=null,this._boundValueChangedHandler=this.valueChangeHandler.bind(this),this._boundLocalizableErrorTextHandler=this._localizableErrorTextHandler.bind(this),this.observe={disabled:function(x){this._inputElement&&this._inputElement.winControl&&(this._inputElement.winControl.disabled=x.newValue)},errorText:function(x){this._inputElement&&this._inputElement.winControl&&(this._inputElement.winControl.errorText=x.newValue)},"_inputElement.winControl.labelText":function(x){this._labelElement&&this._labelElement.winControl&&(this._labelElement.winControl.text=x.newValue)},"_inputElement.winControl.errorText":function(x){this._errorTextElement&&this._errorTextElement.winControl&&(this._errorTextElement.winControl.text=x.newValue)},"_inputElement.winControl.hover":function(x){this._updateColorsBase("property","hover",x.newValue,x.oldValue),this.dispatchNotifyPropertyChanged("property","hover",x.newValue,x.oldValue,"hoverChanged")},"_inputElement.winControl.focused":function(x){this._updateColorsBase("property","focused",x.newValue,x.oldValue),this._updateLayoutBase("property","focused",x.newValue,x.oldValue),this.dispatchNotifyPropertyChanged("property","focused",x.newValue,x.oldValue,"focusedChanged")},"_inputElement.winControl.invalidDate":function(x){this._updateColorsBase("status","invalidDate",x.newValue,x.oldValue),this._updateLayoutBase("status","invalidDate",x.newValue,x.oldValue)},"_inputElement.winControl.limitError":function(x){this._updateColorsBase("status","limitError",x.newValue,x.oldValue),this._updateLayoutBase("status","limitError",x.newValue,x.oldValue),this._inputElement.winControl.limitError=x.newValue},"_inputElement.winControl.writeError":function(x){this._updateColorsBase("status","writeError",x.newValue,x.oldValue),this._updateLayoutBase("status","writeError",x.newValue,x.oldValue)},"_inputElement.winControl.watermarkText":function(x){this._updateLayoutBase("property","watermarkText",x.newValue,x.oldValue),this.dispatchNotifyPropertyChanged("property","watermarkText",x.newValue,x.oldValue)},"_inputElement.winControl.value":function(x){this._updateLayoutBase("property","value",x.newValue,x.oldValue),this.dispatchNotifyPropertyChanged("property","value",x.newValue,x.oldValue)},"_floatingLabelElement.winControl.show":function(x){this._updateLayoutBase("property","showFloatingLabel",x.newValue,x.oldValue)},"_leadingSymbolElement.winControl.show":function(x){this._updateLayoutBase("property","showLeadingSymbol",x.newValue,x.oldValue)},"_leadingSymbolElement.winControl.symbolSize":function(x){this._updateLayoutBase("property","leadingSymbolSize",x.newValue,x.oldValue)},"_trailingSymbolElement.winControl.symbolSize":function(x){this._updateLayoutBase("property","trailingSymbolSize",x.newValue,x.oldValue)},"_errorSymbolElement.winControl.symbolSize":function(x){this._updateLayoutBase("property","errorSymbolSize",x.newValue,x.oldValue)},"_leadingSymbolElement.winControl.margin":function(x){this._updateLayoutBase("property","leadingSymbolMargin",x.newValue,x.oldValue)},"_trailingSymbolElement.winControl.margin":function(x){this._updateLayoutBase("property","trailingSymbolMargin",x.newValue,x.oldValue)},"_errorSymbolElement.winControl.margin":function(x){this._updateLayoutBase("property","errorSymbolMargin",x.newValue,x.oldValue)}},this.localizableErrorTextObject=null,this._localizableErrorText=null,this.addPropertyList(DateTimeVarIn,DateTimeVarIn.propertyList),this.defaultConstructor(A,this.inlineOptions,x.UI.DateTimeVarIn.controlName,x.UI.DateTimeVarIn.className)}createTemplate(){return this.element.innerHTML=['<div class="vw-datetimevarin__label" data-win-control="VisiWin.UI.Label" data-win-options="{showSymbol:'+this.inlineOptions.showSymbol+'}"></div>','<div class="vw-datetimevarin__inputcontainer">','<div class="vw-datetimevarin__inputfieldcontainer">','<input class="vw-datetimevarin__input" data-win-control="VisiWin.UI.DateTimeVarInCore">','<div class="vw-datetimevarin__leadingsymbol" data-win-control="VisiWin.UI.Symbol"></div>','<div class="vw-datetimevarin__inputfield">','<div class="vw-datetimevarin__floatinglabel" data-win-control="VisiWin.UI.TextBlock"></div>',"</div>",'<div class="vw-datetimevarin__trailingsymbol" data-win-control="VisiWin.UI.Symbol"></div>','<div class="vw-datetimevarin__errorsymbol" data-win-control="VisiWin.UI.Symbol"></div>','<div class="vw-datetimevarin__underline" data-win-control="VisiWin.UI.Divider"></div>',"</div>",'<div class="vw-datetimevarin__helpertext" data-win-control="VisiWin.UI.TextBlock"></div>','<div class="vw-datetimevarin__errortext" data-win-control="VisiWin.UI.TextBlock"></div>',"</div>"].join("\n"),this._labelElement=this.element.firstElementChild,this._inputContainerElement=this._labelElement.nextElementSibling,this._inputFieldContainerElement=this._inputContainerElement.firstElementChild,this._inputElement=this._inputFieldContainerElement.firstElementChild,this._leadingSymbolElement=this._inputElement.nextElementSibling,this._inputFieldElement=this._leadingSymbolElement.nextElementSibling,this._floatingLabelElement=this._inputFieldElement.firstElementChild,this._trailingSymbolElement=this._inputFieldElement.nextElementSibling,this._errorSymbolElement=this._trailingSymbolElement.nextElementSibling,this._underlineElement=this._errorSymbolElement.nextElementSibling,this._helperTextElement=this._inputFieldContainerElement.nextElementSibling,this._errorTextElement=this._helperTextElement.nextElementSibling,this.processElements([this._labelElement,this._inputElement,this._leadingSymbolElement,this._floatingLabelElement,this._trailingSymbolElement,this._errorSymbolElement,this._underlineElement,this._helperTextElement,this._errorTextElement])}beforeInit(){this.value=new Date}afterInit(){this._inputElement&&this._inputElement.winControl&&this._inputElement.winControl.addEventListener("valueChanged",this._boundValueChangedHandler)}valueChangeHandler(x){this.dispatchEvent("valueChanged",x.detail)}_localizableErrorTextHandler(x){this.errorText=x.DisplayText}get localizableErrorText(){return this._localizableErrorText}set localizableErrorText(x){if(this._localizableErrorText!=x){var A=this._localizableErrorText;null!=this._localizableErrorText&&this.locService&&this.localizableErrorTextObject&&(this.locService.removeLocalizedText(this._localizableErrorText,this._boundLocalizableErrorTextHandler,this.localizableErrorTextObject),this.localizableErrorTextObject=null),this._localizableErrorText=x,this.locService&&this.locService.addLocalizedTextAsync(this._localizableErrorText,this._boundLocalizableErrorTextHandler).then(x=>{this.localizableErrorTextObject=x}),this._updateLayoutBase("property","localizableErrorText",x,A),this.dispatchNotifyPropertyChanged("property","localizableErrorText",x,A)}}_updateLayout(A){if("updateLayout"!=A.changeName&&"focused"!=A.changeName||(this._inputElement.winControl.focused?x.Utilities.addClass(this.element,"focused"):x.Utilities.removeClass(this.element,"focused")),"updateLayout"==A.changeName||"alignItems"==A.changeName)switch(this.alignItems){case"Center":this.element.style.alignItems="center";break;case"Start":this.element.style.alignItems="flex-start";break;case"End":this.element.style.alignItems="flex-end";break;case"Baseline":this.element.style.alignItems="baseline";break;default:this.element.style.alignItems="stretch"}if("updateLayout"==A.changeName||"justifyContent"==A.changeName)switch(this.justifyContent){case"End":this.element.style.justifyContent="flex-end";break;case"Center":this.element.style.justifyContent="center";break;case"Space-between":this.element.style.justifyContent="space-between";break;case"Space-around":this.element.style.justifyContent="space-around";break;case"Space-evenly":this.element.style.justifyContent="space-evenly";break;default:this.element.style.justifyContent="flex-start"}if("updateLayout"!=A.changeName&&"inputBorderRadius"!=A.changeName||(this._inputFieldContainerElement.style.borderRadius=this.inputBorderRadius,this._inputElement.style.borderRadius=this.inputBorderRadius),"updateLayout"!=A.changeName&&"inputHeight"!=A.changeName||(this._inputFieldContainerElement.style.height=this.inputHeight,this._inputElement.style.height=this.inputHeight),"updateLayout"!=A.changeName&&"focused"!=A.changeName&&"floatingLabelTransition"!=A.changeName||this._floatingLabelElement&&this.showFloatingLabel&&(x.Utilities.isInDesignMode()?this._floatingLabelElement.style.transition="":this._floatingLabelElement.style.transition=this.floatingLabelTransition),"updateLayout"!=A.changeName&&"focused"!=A.changeName&&"underlineOpacity"!=A.changeName&&"focusedUnderlineOpacity"!=A.changeName||this._underlineElement&&this._underlineElement.winControl&&this.showUnderline&&(this.focused?this._underlineElement.winControl.opacity=this.focusedUnderlineOpacity:this._underlineElement.winControl.opacity=this.underlineOpacity),"updateLayout"!=A.changeName&&"focused"!=A.changeName&&"showUnderline"!=A.changeName&&"underlineTransition"!=A.changeName||(this._underlineElement&&this.showUnderline?(this._underlineElement.style.display="block",x.Utilities.isInDesignMode()?this._underlineElement.style.transition="":this._underlineElement.style.transition=this.underlineTransition):this._underlineElement.style.display="none"),"updateLayout"!=A.changeName&&"focused"!=A.changeName&&"underlineTransform"!=A.changeName&&"focusedUnderlineTransform"!=A.changeName||this._underlineElement&&this.showUnderline&&(this.focused?this._underlineElement.style.transform=this.focusedUnderlineTransform:this._underlineElement.style.transform=this.underlineTransform),"updateLayout"!=A.changeName&&"invalidDate"!=A.changeName&&"limitError"!=A.changeName&&"writeError"!=A.changeName&&"showTrailingSymbol"!=A.changeName&&"showErrorSymbol"!=A.changeName&&"showHelperText"!=A.changeName&&"showErrorText"!=A.changeName||(this._inputElement.winControl.invalidDate||this._inputElement.winControl.limitError||this._inputElement.winControl.writeError?(this._trailingSymbolElement&&this._trailingSymbolElement.winControl&&(this._trailingSymbolElement.winControl.show=!1),this._errorSymbolElement&&this._errorSymbolElement.winControl&&(this._errorSymbolElement.winControl.show=this.showErrorSymbol),this._helperTextElement&&this._helperTextElement.winControl&&(this._helperTextElement.winControl.show=!1),this._errorTextElement&&this._errorTextElement.winControl&&(this._errorTextElement.winControl.show=this.showErrorText)):(this._trailingSymbolElement&&this._trailingSymbolElement.winControl&&(this._trailingSymbolElement.winControl.show=this.showTrailingSymbol),this._errorSymbolElement&&this._errorSymbolElement.winControl&&(this._errorSymbolElement.winControl.show=!1),this._helperTextElement&&this._helperTextElement.winControl&&(this._helperTextElement.winControl.show=this.showHelperText),this._errorTextElement&&this._errorTextElement.winControl&&(this._errorTextElement.winControl.show=!1))),"updateLayout"==A.changeName||"outlined"==A.changeName||"inputFieldMargin"==A.changeName||"showFloatingLabel"==A.changeName||"showLeadingSymbol"==A.changeName||"showTrailingSymbol"==A.changeName||"showErrorSymbol"==A.changeName||"leadingSymbolSize"==A.changeName||"trailingSymbolSize"==A.changeName||"errorSymbolSize"==A.changeName||"leadingSymbolMargin"==A.changeName||"trailingSymbolMargin"==A.changeName||"errorSymbolMargin"==A.changeName){var V=window.getComputedStyle(this._inputFieldElement),R=parseFloat(V.getPropertyValue("margin-left",null)),D=parseFloat(V.getPropertyValue("margin-right",null)),N=R,U=D,B=this.outlined?0:this.showFloatingLabel?20:0,F=this.outlined?0:this.showFloatingLabel?6:0,W=0,H=0,z=0;if(this.showLeadingSymbol&&this._leadingSymbolElement){var G=window.getComputedStyle(this._leadingSymbolElement),j=parseFloat(G.getPropertyValue("width",null));N=(W=parseFloat(G.getPropertyValue("margin-left",null))+j+($=parseFloat(G.getPropertyValue("margin-right",null)))+R)>N?W:N}if(this.showTrailingSymbol&&this._trailingSymbolElement){var q=window.getComputedStyle(this._trailingSymbolElement),Q=parseFloat(q.getPropertyValue("width",null));U=(H=D+parseFloat(q.getPropertyValue("margin-left",null))+Q+parseFloat(q.getPropertyValue("margin-right",null)))>U?H:U}if(this.showErrorSymbol&&this._errorSymbolElement){var K=window.getComputedStyle(this._errorSymbolElement),J=parseFloat(K.getPropertyValue("width",null));U=(z=D+parseFloat(K.getPropertyValue("margin-left",null))+J+parseFloat(K.getPropertyValue("margin-right",null)))>U?z:U}this._inputElement.style.padding=B+"px "+U+"px "+F+"px "+N+"px"}if(("updateLayout"==A.changeName||"focused"==A.changeName||"invalidDate"==A.changeName||"limitError"==A.changeName||"writeError"==A.changeName||"watermarkText"==A.changeName||"value"==A.changeName||"outlined"==A.changeName||"inputFieldMargin"==A.changeName||"showFloatingLabel"==A.changeName||"floatingLabelFixed"==A.changeName||"showLeadingSymbol"==A.changeName||"leadingSymbolSize"==A.changeName||"leadingSymbolMargin"==A.changeName)&&this.showFloatingLabel&&this._floatingLabelElement)if(this.outlined)if(this._inputElement.winControl.focused||this._inputElement.winControl.invalidDate||this._inputElement.winControl.limitError||this._inputElement.winControl.writeError||this._inputElement.winControl.watermarkText||this._inputElement.winControl.value||"number"==typeof this._inputElement.winControl.value||this.floatingLabelFixed){var X=0,Y=this._floatingLabelElement.clientHeight||24;if(this.showLeadingSymbol&&this._leadingSymbolElement){G=window.getComputedStyle(this._leadingSymbolElement),j=parseFloat(G.getPropertyValue("width",null));var $=parseFloat(G.getPropertyValue("margin-right",null));V=window.getComputedStyle(this._inputFieldElement);X=j+$+(R=parseFloat(V.getPropertyValue("margin-left",null)))}this._floatingLabelElement.style.alignSelf="flex-start",this._floatingLabelElement.style.transform="translateX("+-X+"px) translateY("+-Y/2+"px) scale(0.75)"}else this._floatingLabelElement.style.alignSelf="center",this._floatingLabelElement.style.transform="translateX(0px) translateY(0px) scale(1)";else this._floatingLabelElement.style.alignSelf="center",this._inputElement.winControl.focused||this._inputElement.winControl.invalidDate||this._inputElement.winControl.limitError||this._inputElement.winControl.writeError||this._inputElement.winControl.watermarkText||this._inputElement.winControl.value||"number"==typeof this._inputElement.winControl.value||this.floatingLabelFixed?this._floatingLabelElement.style.transform="translateX(0px) translateY(-60%) scale(0.75)":this._floatingLabelElement.style.transform="translateX(0px) translateY(0px) scale(1)";if("updateLayout"==A.changeName||"labelPosition"==A.changeName)switch(this.labelPosition){case"Top":this.element.style.flexDirection="column";break;case"Right":this.element.style.flexDirection="row-reverse";break;case"Bottom":this.element.style.flexDirection="column-reverse";break;default:this.element.style.flexDirection="row"}}_updateColors(x){this.disabled?(this.element.style.backgroundColor=this.getColor("disabledBackgroundColor"),this._inputFieldContainerElement.style.backgroundColor=this.getColor("disabledBackgroundColor"),this._inputElement.style.backgroundColor=this.getColor("disabledBackgroundColor"),this._floatingLabelElement.winControl.backgroundColor=this.getColor("backgroundColor"),this._underlineElement.winControl.backgroundColor=this.getColor("disabledForegroundColor"),this._labelElement.winControl.symbolForegroundColor=this.getColor("disabledForegroundColor"),this._labelElement.winControl.labelForegroundColor=this.getColor("disabledForegroundColor"),this._inputElement.style.color=this.getColor("disabledForegroundColor"),this._leadingSymbolElement.winControl.foregroundColor=this.getColor("disabledForegroundColor"),this._floatingLabelElement.winControl.foregroundColor=this.getColor("disabledForegroundColor"),this._trailingSymbolElement.winControl.foregroundColor=this.getColor("disabledForegroundColor"),this._errorSymbolElement.winControl.foregroundColor=this.getColor("disabledForegroundColor"),this._helperTextElement.winControl.foregroundColor=this.getColor("disabledForegroundColor"),this._errorTextElement.winControl.foregroundColor=this.getColor("disabledForegroundColor"),this.element.style.borderColor=this.getColor("disabledBorderColor"),this._inputElement.style.borderColor=this.getColor("disabledBorderColor"),this._floatingLabelElement.style.outlineColor=this.getColor("disabledFloatingLabelOutlineColor")):(this.element.style.backgroundColor=this.getColor("backgroundColor"),this._inputFieldContainerElement.style.backgroundColor=this.getColor("inputBackgroundColor"),this._floatingLabelElement.winControl.backgroundColor=this.getColor("floatingLabelBackgroundColor"),this._labelElement.winControl.symbolForegroundColor=this.getColor("symbolForegroundColor"),this._labelElement.winControl.labelForegroundColor=this.getColor("labelForegroundColor"),this._inputElement.style.color=this.getColor("inputForegroundColor"),this._leadingSymbolElement.winControl.foregroundColor=this.getColor("leadingSymbolForegroundColor"),this._trailingSymbolElement.winControl.foregroundColor=this.getColor("trailingSymbolForegroundColor"),this._errorSymbolElement.winControl.foregroundColor=this.getColor("errorColor"),this._helperTextElement.winControl.foregroundColor=this.getColor("helperTextForegroundColor"),this._errorTextElement.winControl.foregroundColor=this.getColor("errorColor"),this.element.style.borderColor=this.getColor("borderColor"),this._floatingLabelElement.style.outlineColor=this.getColor("floatingLabelOutlineColor"),this._inputElement.style.caretColor=this.getColor("caretColor"),this._inputElement.winControl.focused?this._inputElement.style.backgroundColor=this.getColor("focusedInputBackgroundColor"):this._inputElement.winControl.hover?(this._inputElement.style.backgroundColor=this.getColor("hoverInputBackgroundColor"),this._inputElement.style.color=this.getColor("hoverInputForegroundColor")):(this._inputElement.style.backgroundColor=this.getColor("inputBackgroundColor"),this._inputElement.style.color=this.getColor("inputForegroundColor")),this._inputElement.winControl.invalidDate||this._inputElement.winControl.limitError||this._inputElement.winControl.writeError?(this._underlineElement.winControl.backgroundColor=this.getColor("errorColor"),this._floatingLabelElement.winControl.foregroundColor=this.getColor("errorColor"),this._inputElement.style.borderColor=this.getColor("errorColor")):this._inputElement.winControl.focused?(this._underlineElement.winControl.backgroundColor=this.getColor("focusedUnderlineColor"),this._floatingLabelElement.winControl.foregroundColor=this.getColor("focusedFloatingLabelForegroundColor"),this._inputElement.style.borderColor=this.getColor("focusedInputBorderColor")):this._inputElement.winControl.hover?(this._underlineElement.winControl.backgroundColor=this.getColor("underlineColor"),this._floatingLabelElement.winControl.foregroundColor=this.getColor("floatingLabelForegroundColor"),this._inputElement.style.borderColor=this.getColor("hoverInputBorderColor")):(this._underlineElement.winControl.backgroundColor=this.getColor("underlineColor"),this._floatingLabelElement.winControl.foregroundColor=this.getColor("floatingLabelForegroundColor"),this._inputElement.style.borderColor=this.getColor("inputBorderColor")))}dispose(){var x=super.dispose();return null!=this._localizableErrorText&&this.locService&&this.localizableErrorTextObject&&(this.locService.removeLocalizedText(this._localizableErrorText,this._boundLocalizableErrorTextHandler,this.localizableErrorTextObject),this.localizableErrorTextObject=null),this._inputElement&&this._inputElement.winControl&&(this._inputElement.winControl.removeEventListener("valueChanged",this._boundValueChangedHandler),this._inputElement.winControl.dispose()),x}}DateTimeVarIn.namespace="VisiWin.UI",DateTimeVarIn.controlName="DateTimeVarIn",DateTimeVarIn.className="vw-datetimevarin",DateTimeVarIn.propertyList={designerType:{propertyType:"base",type:"string",defaultValue_DM:"Control"},valueChanged:{propertyType:"event",triggerDataName:"value"},focused:{propertyType:"child",type:"boolean",child:"_inputElement",forceOverwrite:!0},hover:{propertyType:"child",type:"boolean",child:"_inputElement",forceOverwrite:!0},alignItems:{propertyType:"member",type:"string",defaultValue:"Start"},justifyContent:{propertyType:"member",type:"string",defaultValue:"Center"},canRecipeEdit:{propertyType:"child",type:"boolean",child:"_inputElement"},variableName:{propertyType:"child",type:"string",child:"_inputElement"},value:{propertyType:"child",type:"any",child:"_inputElement"},abortOnEsc:{propertyType:"child",type:"boolean",child:"_inputElement"},writeOnReturn:{propertyType:"child",type:"boolean",child:"_inputElement"},selectOnFocus:{propertyType:"child",type:"boolean",child:"_inputElement"},lostKeyboardFocusBehaviour:{propertyType:"child",type:"string",child:"_inputElement"},limitMin:{propertyType:"child",type:"string",child:"_inputElement",defaultValue:"0000-01-01T00:00:00"},limitMax:{propertyType:"child",type:"string",child:"_inputElement",defaultValue:"9999-12-31T00:00:00"},useVariableLimits:{propertyType:"child",type:"boolean",child:"_inputElement"},isLimitCheckEnabled:{propertyType:"child",type:"boolean",child:"_inputElement"},dateTimeMode:{propertyType:"child",type:"string",child:"_inputElement"},formatDate:{propertyType:"child",type:"string",child:"_inputElement"},step:{propertyType:"child",type:"number",child:"_inputElement"},formatTime:{propertyType:"child",type:"string",child:"_inputElement"},userDefinedDate:{propertyType:"child",type:"string",child:"_inputElement"},userDefinedTime:{propertyType:"child",type:"string",child:"_inputElement"},invalidDateErrorText:{propertyType:"child",type:"string",child:"_inputElement",defaultValue:"InvalidDate"},localizableInvalidDateErrorText:{propertyType:"child",type:"string",child:"_inputElement"},limitMinErrorText:{propertyType:"child",type:"string",child:"_inputElement",defaultValue:"LimitMinError"},localizableLimitMinErrorText:{propertyType:"child",type:"string",child:"_inputElement"},limitMaxErrorText:{propertyType:"child",type:"string",child:"_inputElement",defaultValue:"LimitMaxError"},localizableLimitMaxErrorText:{propertyType:"child",type:"string",child:"_inputElement"},variableWriteErrorText:{propertyType:"child",type:"string",child:"_inputElement",defaultValue:"VariableWriteError"},localizableVariableWriteErrorText:{propertyType:"child",type:"string",child:"_inputElement"},watermarkText:{propertyType:"child",type:"string",child:"_inputElement",defaultValue:""},localizableWatermarkText:{propertyType:"child",type:"string",child:"_inputElement"},inputContainerWidth:{propertyType:"style",type:"string",element:"_inputContainerElement",style:"width"},inputContainerHeight:{propertyType:"style",type:"string",element:"_inputContainerElement",style:"height"},inputContainerMargin:{propertyType:"style",type:"string",element:"_inputContainerElement",style:"margin"},inputContainerPadding:{propertyType:"style",type:"string",element:"_inputContainerElement",style:"padding"},inputBorderWidth:{propertyType:"child",type:"string",child:"_inputElement",childProperty:"borderWidth"},inputBorderStyle:{propertyType:"child",type:"enum",child:"_inputElement",childProperty:"borderStyle"},inputBorderRadius:{propertyType:"member",type:"string"},inputWidth:{propertyType:"child",type:"string",child:"_inputElement",childProperty:"width"},inputHeight:{propertyType:"member",type:"string",defaultValue:"40px"},inputMargin:{propertyType:"child",type:"string",child:"_inputElement",childProperty:"margin"},inputPadding:{propertyType:"child",type:"string",child:"_inputElement",childProperty:"padding"},inputTextAlignment:{propertyType:"child",type:"string",child:"_inputElement",childProperty:"textAlignment"},inputFontClass:{propertyType:"child",type:"string",child:"_inputElement",childProperty:"fontClass",defaultValue:"Label1"},inputFontSize:{propertyType:"child",type:"string",child:"_inputElement",childProperty:"fontSize"},inputFontWeight:{propertyType:"child",type:"string",child:"_inputElement",childProperty:"fontWeight"},inputLineHeight:{propertyType:"child",type:"string",child:"_inputElement",childProperty:"lineHeight"},inputTextContrast:{propertyType:"child",type:"number",child:"_inputElement",childProperty:"textContrast"},inputMode:{propertyType:"child",type:"string",child:"_inputElement"},outlined:{propertyType:"member",type:"boolean",defaultValue:!1},inputFieldMargin:{propertyType:"style",type:"string",element:"_inputFieldElement",style:"margin"},showSymbol:{propertyType:"child",type:"boolean",child:"_labelElement"},iconFont:{propertyType:"child",type:"string",child:"_labelElement"},symbol:{propertyType:"child",type:"string",child:"_labelElement"},symbolType:{propertyType:"child",type:"string",child:"_labelElement"},symbolSize:{propertyType:"child",type:"string",child:"_labelElement"},symbolMargin:{propertyType:"child",type:"string",child:"_labelElement"},symbolPosition:{propertyType:"child",type:"string",child:"_labelElement"},labelContainerWidth:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"width"},labelContainerHeight:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"height"},labelContainerMargin:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"margin"},labelContainerPadding:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"padding"},showLabel:{propertyType:"child",type:"boolean",child:"_labelElement",childProperty:"showText",defaultValue:!0},labelWidth:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"textWidth"},labelHeight:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"textHeight"},labelMargin:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"textMargin"},labelPadding:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"textPadding"},useVariableText:{propertyType:"child",type:"boolean",child:"_inputElement"},labelText:{propertyType:"child",type:"string",child:"_inputElement",defaultValue:"DateTimeVarIn"},localizableLabelText:{propertyType:"child",type:"string",child:"_inputElement"},labelTextAlignment:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"textAlignment"},labelLineClamp:{propertyType:"child",type:"number",child:"_labelElement",childProperty:"lineClamp"},labelTextWrapping:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"textWrapping"},labelTextTrimming:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"textTrimming"},labelFontClass:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"fontClass",defaultValue:"Label2"},labelFontSize:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"fontSize"},labelFontWeight:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"fontWeight"},labelLineHeight:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"lineHeight"},labelTextContrast:{propertyType:"child",type:"number",child:"_labelElement",childProperty:"textContrast"},labelUppercase:{propertyType:"child",type:"boolean",child:"_labelElement",childProperty:"uppercase"},labelPosition:{propertyType:"member",type:"string",defaultValue:"Top"},showLeadingSymbol:{propertyType:"child",type:"boolean",child:"_leadingSymbolElement",childProperty:"show",defaultValue:!1},leadingIconFont:{propertyType:"child",type:"string",child:"_leadingSymbolElement",childProperty:"iconFont"},leadingSymbol:{propertyType:"child",type:"string",child:"_leadingSymbolElement",childProperty:"symbol"},leadingSymbolType:{propertyType:"child",type:"string",child:"_leadingSymbolElement",childProperty:"symbolType"},leadingSymbolSize:{propertyType:"child",type:"string",child:"_leadingSymbolElement",childProperty:"symbolSize"},leadingSymbolMargin:{propertyType:"child",type:"string",child:"_leadingSymbolElement",childProperty:"margin"},showFloatingLabel:{propertyType:"child",type:"boolean",child:"_floatingLabelElement",childProperty:"show",defaultValue:!1},floatingLabelWidth:{propertyType:"child",type:"string",child:"_floatingLabelElement",childProperty:"width"},floatingLabelHeight:{propertyType:"child",type:"string",child:"_floatingLabelElement",childProperty:"height"},floatingLabelMargin:{propertyType:"child",type:"string",child:"_floatingLabelElement",childProperty:"margin"},floatingLabelPadding:{propertyType:"child",type:"string",child:"_floatingLabelElement",childProperty:"padding"},floatingLabelText:{propertyType:"child",type:"string",child:"_floatingLabelElement",childProperty:"text",defaultValue:"DateTimeVarIn"},localizableFloatingLabelText:{propertyType:"child",type:"string",child:"_floatingLabelElement",childProperty:"localizableText"},floatingLabelTextAlignment:{propertyType:"child",type:"string",child:"_floatingLabelElement",childProperty:"textAlignment"},floatingLabelLineClamp:{propertyType:"child",type:"number",child:"_floatingLabelElement",childProperty:"lineClamp"},floatingLabelTextWrapping:{propertyType:"child",type:"string",child:"_floatingLabelElement",childProperty:"textWrapping"},floatingLabelTextTrimming:{propertyType:"child",type:"string",child:"_floatingLabelElement",childProperty:"textTrimming"},floatingLabelFontClass:{propertyType:"child",type:"string",child:"_floatingLabelElement",childProperty:"fontClass"},floatingLabelFontSize:{propertyType:"child",type:"string",child:"_floatingLabelElement",childProperty:"fontSize"},floatingLabelFontWeight:{propertyType:"child",type:"string",child:"_floatingLabelElement",childProperty:"fontWeight"},floatingLabelLineHeight:{propertyType:"child",type:"string",child:"_floatingLabelElement",childProperty:"lineHeight"},floatingLabelTextContrast:{propertyType:"child",type:"number",child:"_floatingLabelElement",childProperty:"textContrast"},floatingLabelUppercase:{propertyType:"child",type:"boolean",child:"_floatingLabelElement",childProperty:"uppercase"},floatingLabelFixed:{propertyType:"member",type:"boolean",defaultValue:!1},floatingLabelTransition:{propertyType:"member",type:"string"},floatingLabelOutlineWidth:{propertyType:"style",type:"string",element:"_floatingLabelElement",style:"outlineWidth"},floatingLabelOutlineStyle:{propertyType:"style",type:"string",element:"_floatingLabelElement",style:"outlineStyle"},showTrailingSymbol:{propertyType:"member",type:"boolean",defaultValue:!1},trailingIconFont:{propertyType:"child",type:"string",child:"_trailingSymbolElement",childProperty:"iconFont"},trailingSymbol:{propertyType:"child",type:"string",child:"_trailingSymbolElement",childProperty:"symbol"},trailingSymbolType:{propertyType:"child",type:"string",child:"_trailingSymbolElement",childProperty:"symbolType"},trailingSymbolSize:{propertyType:"child",type:"string",child:"_trailingSymbolElement",childProperty:"symbolSize"},trailingSymbolMargin:{propertyType:"child",type:"string",child:"_trailingSymbolElement",childProperty:"margin"},showErrorSymbol:{propertyType:"member",type:"boolean",defaultValue:!1},errorIconFont:{propertyType:"child",type:"string",child:"_errorSymbolElement",childProperty:"iconFont"},errorSymbol:{propertyType:"child",type:"string",child:"_errorSymbolElement",childProperty:"symbol"},errorSymbolType:{propertyType:"child",type:"string",child:"_errorSymbolElement",childProperty:"symbolType"},errorSymbolSize:{propertyType:"child",type:"string",child:"_errorSymbolElement",childProperty:"symbolSize"},errorSymbolMargin:{propertyType:"child",type:"string",child:"_errorSymbolElement",childProperty:"margin"},showUnderline:{propertyType:"member",type:"boolean",defaultValue:!1},underlineHeight:{propertyType:"child",type:"string",child:"_underlineElement",childProperty:"height"},underlineOpacity:{propertyType:"member",type:"number"},focusedUnderlineOpacity:{propertyType:"member",type:"number"},underlineTransition:{propertyType:"member",type:"string",defaultValue:""},underlineTransform:{propertyType:"member",type:"string",defaultValue:""},focusedUnderlineTransform:{propertyType:"member",type:"string",defaultValue:""},showHelperText:{propertyType:"member",type:"boolean",defaultValue:!1},helperTextWidth:{propertyType:"child",type:"string",child:"_helperTextElement",childProperty:"width"},helperTextHeight:{propertyType:"child",type:"string",child:"_helperTextElement",childProperty:"height"},helperTextMargin:{propertyType:"child",type:"string",child:"_helperTextElement",childProperty:"margin"},helperTextPadding:{propertyType:"child",type:"string",child:"_helperTextElement",childProperty:"padding"},helperText:{propertyType:"child",type:"string",child:"_helperTextElement",childProperty:"text",defaultValue:"HelperText"},localizableHelperText:{propertyType:"child",type:"string",child:"_helperTextElement",childProperty:"localizableText"},helperTextAlignment:{propertyType:"child",type:"string",child:"_helperTextElement",childProperty:"textAlignment"},helperTextLineClamp:{propertyType:"child",type:"number",child:"_helperTextElement",childProperty:"lineClamp"},helperTextWrapping:{propertyType:"child",type:"string",child:"_helperTextElement",childProperty:"textWrapping"},helperTextTrimming:{propertyType:"child",type:"string",child:"_helperTextElement",childProperty:"textTrimming"},helperTextFontClass:{propertyType:"child",type:"string",child:"_helperTextElement",childProperty:"fontClass",defaultValue:"Label2"},helperTextFontSize:{propertyType:"child",type:"string",child:"_helperTextElement",childProperty:"fontSize"},helperTextFontWeight:{propertyType:"child",type:"string",child:"_helperTextElement",childProperty:"fontWeight"},helperTextLineHeight:{propertyType:"child",type:"string",child:"_helperTextElement",childProperty:"lineHeight"},helperTextContrast:{propertyType:"child",type:"number",child:"_helperTextElement",childProperty:"textContrast"},helperTextUppercase:{propertyType:"child",type:"boolean",child:"_helperTextElement",childProperty:"uppercase"},showErrorText:{propertyType:"member",type:"boolean",defaultValue:!1},errorTextWidth:{propertyType:"child",type:"string",child:"_errorTextElement",childProperty:"width"},errorTextHeight:{propertyType:"child",type:"string",child:"_errorTextElement",childProperty:"height"},errorTextMargin:{propertyType:"child",type:"string",child:"_errorTextElement",childProperty:"margin"},errorTextPadding:{propertyType:"child",type:"string",child:"_errorTextElement",childProperty:"padding"},errorText:{propertyType:"member",type:"string",defaultValue:"ErrorText"},localizableErrorText:{propertyType:"member",type:"string",forceOverwrite:!0},errorTextAlignment:{propertyType:"child",type:"string",child:"_errorTextElement",childProperty:"textAlignment"},errorTextLineClamp:{propertyType:"child",type:"number",child:"_errorTextElement",childProperty:"lineClamp"},errorTextWrapping:{propertyType:"child",type:"string",child:"_errorTextElement",childProperty:"textWrapping"},errorTextTrimming:{propertyType:"child",type:"string",child:"_errorTextElement",childProperty:"textTrimming"},errorTextFontClass:{propertyType:"child",type:"string",child:"_errorTextElement",childProperty:"fontClass",defaultValue:"Label2"},errorTextFontSize:{propertyType:"child",type:"string",child:"_errorTextElement",childProperty:"fontSize"},errorTextFontWeight:{propertyType:"child",type:"string",child:"_errorTextElement",childProperty:"fontWeight"},errorTextLineHeight:{propertyType:"child",type:"string",child:"_errorTextElement",childProperty:"lineHeight"},errorTextContrast:{propertyType:"child",type:"number",child:"_errorTextElement",childProperty:"textContrast"},errorTextUppercase:{propertyType:"child",type:"boolean",child:"_errorTextElement",childProperty:"uppercase"},errorMode:{propertyType:"child",type:"boolean",child:"_inputElement",childProperty:"limitError",defaultValue:!1},backgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BackgroundColor"},inputBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},hoverInputBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},focusedInputBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},floatingLabelBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},underlineColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"},focusedUnderlineColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@CheckedBorderColor"},symbolForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},labelForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},inputForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},hoverInputForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},leadingSymbolForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},floatingLabelForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},focusedFloatingLabelForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},trailingSymbolForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},helperTextForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},errorColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ErrorColor"},borderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"},inputBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"},hoverInputBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@HoverBorderColor"},focusedInputBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@CheckedBorderColor"},floatingLabelOutlineColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},caretColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},disabledBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledBackgroundColor"},disabledForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledForegroundColor"},disabledBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledBorderColor"},disabledFloatingLabelOutlineColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"}},A.DateTimeVarIn=DateTimeVarIn}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class DateTimeVarOut extends x.UI.VariableBase{constructor(x,V){super(x,V),this.properties={designerType:{propertyType:"base",type:"string",defaultValue:"Control"},alignItems:{propertyType:"member",type:"string",defaultValue:"Center"},justifyContent:{propertyType:"member",type:"string",defaultValue:"Center"},dateTimeMode:{propertyType:"member",type:"string",defaultValue:A.DateTimeModeNames.DateTime},formatDate:{propertyType:"member",type:"string",defaultValue:A.DateTimeFormatNames.LongDate},formatTime:{propertyType:"member",type:"string",defaultValue:A.DateTimeFormatNames.LongTime},userDefinedDate:{propertyType:"member",type:"string"},userDefinedTime:{propertyType:"member",type:"string"},value:{propertyType:"custom",type:"date",forceOverwrite:!0},dateWidth:{propertyType:"child",type:"string",child:"_dateElement",childOption:"width"},dateHeight:{propertyType:"child",type:"string",child:"_dateElement",childOption:"height"},dateMargin:{propertyType:"child",type:"string",child:"_dateElement",childOption:"margin"},datePadding:{propertyType:"child",type:"string",child:"_dateElement",childOption:"padding"},dateTextAlignment:{propertyType:"child",type:"string",child:"_dateElement",childOption:"textAlignment"},dateLineClamp:{propertyType:"child",type:"number",child:"_dateElement",childOption:"lineClamp"},dateTextWrapping:{propertyType:"child",type:"string",child:"_dateElement",childOption:"textWrapping"},dateTextTrimming:{propertyType:"child",type:"string",child:"_dateElement",childOption:"textTrimming"},dateFontClass:{propertyType:"child",type:"string",child:"_dateElement",childOption:"fontClass"},dateFontSize:{propertyType:"child",type:"string",child:"_dateElement",childOption:"fontSize"},dateFontWeight:{propertyType:"child",type:"string",child:"_dateElement",childOption:"fontWeight"},dateLineHeight:{propertyType:"child",type:"string",child:"_dateElement",childOption:"lineHeight"},dateTextContrast:{propertyType:"child",type:"number",child:"_dateElement",childOption:"textContrast"},dateUppercase:{propertyType:"child",type:"boolean",child:"_dateElement",childOption:"uppercase"},timeWidth:{propertyType:"child",type:"string",child:"_timeElement",childOption:"width"},timeHeight:{propertyType:"child",type:"string",child:"_timeElement",childOption:"height"},timeMargin:{propertyType:"child",type:"string",child:"_timeElement",childOption:"margin"},timePadding:{propertyType:"child",type:"string",child:"_timeElement",childOption:"padding"},timeTextAlignment:{propertyType:"child",type:"string",child:"_timeElement",childOption:"textAlignment"},timeLineClamp:{propertyType:"child",type:"number",child:"_timeElement",childOption:"lineClamp"},timeTextWrapping:{propertyType:"child",type:"string",child:"_timeElement",childOption:"textWrapping"},timeTextTrimming:{propertyType:"child",type:"string",child:"_timeElement",childOption:"textTrimming"},timeFontClass:{propertyType:"child",type:"string",child:"_timeElement",childOption:"fontClass"},timeFontSize:{propertyType:"child",type:"string",child:"_timeElement",childOption:"fontSize"},timeFontWeight:{propertyType:"child",type:"string",child:"_timeElement",childOption:"fontWeight"},timeLineHeight:{propertyType:"child",type:"string",child:"_timeElement",childOption:"lineHeight"},timeTextContrast:{propertyType:"child",type:"number",child:"_timeElement",childOption:"textContrast"},timeUppercase:{propertyType:"child",type:"boolean",child:"_timeElement",childOption:"uppercase"},backgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},dateBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},timeBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},dateForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},timeForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},borderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"},disabledBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledBackgroundColor"},disabledForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledForegroundColor"},disabledBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledBorderColor"},floatingLabelBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},floatingLabelForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},focusedFloatingLabelForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},leadingSymbolForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},labelContainerBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"},labelForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},labelContainerBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},showLeadingSymbol:{propertyType:"child",type:"boolean",child:"_leadingSymbolElement",childOption:"show",defaultValue:!1},leadingIconFont:{propertyType:"child",type:"string",child:"_leadingSymbolElement",childOption:"iconFont"},leadingSymbol:{propertyType:"child",type:"string",child:"_leadingSymbolElement",childOption:"symbol"},leadingSymbolType:{propertyType:"child",type:"string",child:"_leadingSymbolElement",childOption:"symbolType"},leadingSymbolSize:{propertyType:"child",type:"string",child:"_leadingSymbolElement",childOption:"symbolSize"},leadingSymbolMargin:{propertyType:"child",type:"string",child:"_leadingSymbolElement",childOption:"margin"},showFloatingLabel:{propertyType:"child",type:"boolean",child:"_floatingLabelElement",childOption:"show",defaultValue:!1},floatingLabelWidth:{propertyType:"child",type:"string",child:"_floatingLabelElement",childOption:"width"},floatingLabelHeight:{propertyType:"child",type:"string",child:"_floatingLabelElement",childOption:"height"},floatingLabelMargin:{propertyType:"child",type:"string",child:"_floatingLabelElement",childOption:"margin"},floatingLabelPadding:{propertyType:"child",type:"string",child:"_floatingLabelElement",childOption:"padding"},floatingLabelText:{propertyType:"child",type:"string",child:"_floatingLabelElement",childOption:"text",defaultValue:"DateTimeVarOut"},localizableFloatingLabelText:{propertyType:"child",type:"string",child:"_floatingLabelElement",childOption:"localizableText"},floatingLabelTextAlignment:{propertyType:"child",type:"string",child:"_floatingLabelElement",childOption:"textAlignment"},floatingLabelLineClamp:{propertyType:"child",type:"number",child:"_floatingLabelElement",childOption:"lineClamp"},floatingLabelTextWrapping:{propertyType:"child",type:"string",child:"_floatingLabelElement",childOption:"textWrapping"},floatingLabelTextTrimming:{propertyType:"child",type:"string",child:"_floatingLabelElement",childOption:"textTrimming"},floatingLabelFontClass:{propertyType:"child",type:"string",child:"_floatingLabelElement",childOption:"fontClass"},floatingLabelFontSize:{propertyType:"child",type:"string",child:"_floatingLabelElement",childOption:"fontSize"},floatingLabelFontWeight:{propertyType:"child",type:"string",child:"_floatingLabelElement",childOption:"fontWeight"},floatingLabelLineHeight:{propertyType:"child",type:"string",child:"_floatingLabelElement",childOption:"lineHeight"},floatingLabelTextContrast:{propertyType:"child",type:"number",child:"_floatingLabelElement",childOption:"textContrast"},floatingLabelUppercase:{propertyType:"child",type:"boolean",child:"_floatingLabelElement",childOption:"uppercase"},floatingLabelFixed:{propertyType:"member",type:"boolean",defaultValue:!1},floatingLabelTransition:{propertyType:"member",type:"string"},labelContainerWidth:{propertyType:"child",type:"string",child:"_labelElement",childOption:"width"},labelContainerHeight:{propertyType:"child",type:"string",child:"_labelElement",childOption:"height"},labelContainerMargin:{propertyType:"child",type:"string",child:"_labelElement",childOption:"margin"},labelContainerPadding:{propertyType:"child",type:"string",child:"_labelElement",childOption:"padding"},labelContainerBorderWidth:{propertyType:"child",type:"string",child:"_labelElement",childOption:"borderWidth"},labelContainerBorderStyle:{propertyType:"child",type:"string",child:"_labelElement",childOption:"borderStyle"},labelContainerBorderRadius:{propertyType:"child",type:"string",child:"_labelElement",childOption:"borderRadius"},showLabel:{propertyType:"child",type:"boolean",child:"_labelElement",childOption:"showText",defaultValue:!1},labelWidth:{propertyType:"child",type:"string",child:"_labelElement",childOption:"textWidth"},labelHeight:{propertyType:"child",type:"string",child:"_labelElement",childOption:"textHeight"},labelMargin:{propertyType:"child",type:"string",child:"_labelElement",childOption:"textMargin",defaultValue:"0px 0px 0px 0px"},labelPadding:{propertyType:"child",type:"string",child:"_labelElement",childOption:"textPadding"},labelText:{propertyType:"child",type:"string",child:"_labelElement",forceOverwrite:!0,childOption:"text",defaultValue:"DateTimeVarOut"},localizableLabelText:{propertyType:"child",type:"string",child:"_labelElement",forceOverwrite:!0,childOption:"localizableText"},useVariableLabelText:{propertyType:"child",type:"boolean",child:"_labelElement",forceOverwrite:!0,childOption:"useVariableText"},variableLabelName:{propertyType:"child",type:"string",child:"_labelElement",forceOverwrite:!0,childOption:"variableName"},labelTextAlignment:{propertyType:"child",type:"string",child:"_labelElement",childOption:"textAlignment"},labelLineClamp:{propertyType:"child",type:"number",child:"_labelElement",childOption:"lineClamp"},labelTextWrapping:{propertyType:"child",type:"string",child:"_labelElement",childOption:"textWrapping"},labelTextTrimming:{propertyType:"child",type:"string",child:"_labelElement",childOption:"textTrimming"},labelFontClass:{propertyType:"child",type:"string",child:"_labelElement",childOption:"fontClass"},labelFontSize:{propertyType:"child",type:"string",child:"_labelElement",childOption:"fontSize"},labelFontWeight:{propertyType:"child",type:"string",child:"_labelElement",childOption:"fontWeight"},labelLineHeight:{propertyType:"child",type:"string",child:"_labelElement",childOption:"lineHeight"},labelTextContrast:{propertyType:"child",type:"number",child:"_labelElement",childOption:"textContrast"},labelUppercase:{propertyType:"child",type:"boolean",child:"_labelElement",childOption:"uppercase"},labelPosition:{propertyType:"member",type:"string",defaultValue:"Left"}},this._dateElement=null,this._timeElement=null,this._dtcontainer=null,this._outerdiv=null,this._leadingSymbolElement=null,this._floatingLabelElement=null,this._labelElement=null,this.initialize(DateTimeVarOut)}get value(){return super.value}set value(x){super.value=x}createTemplate(){return this.element.innerHTML='\n                <div class="vw-datetimevarout__labelElement" data-win-control="VisiWin.UI.Label" data-ref-element="_labelElement"></div>\n                <div class="vw-datetimevarout__floatinglabel" data-win-control="VisiWin.UI.TextBlock" data-ref-element="_floatingLabelElement"></div>\n                   <div class="vw-datetimevarout__outerdiv" data-ref-element="_outerdiv">\n                        <div class="vw-datetimevarout__leadingsymbol" data-win-control="VisiWin.UI.Symbol" data-ref-element="_leadingSymbolElement"></div>\n                        <div class="vw-datetimevarout__container" data-ref-element="_dtcontainer">\n                            <div class="vw-datetimevarout__date" data-win-control="VisiWin.UI.TextBlock" data-ref-element="_dateElement"></div>\n                            <div class="vw-datetimevarout__time"  data-win-control="VisiWin.UI.TextBlock" data-ref-element="_timeElement"></div>\n                        </div>\n                   </div>\n              ',this.initializeChilds()}afterInit(){this.value=new Date,this.variableLabelName=this.variableName}onLanguageChanged(x){this._updateLayout({changeName:"languageChanged"})}_updateColors(x){this.disabled?(this.setColor("disabledBackgroundColor","backgroundColor"),this._dateElement&&this._dateElement.winControl&&(this.setColor("disabledBackgroundColor","backgroundColor",null,"_dateElement"),this.setColor("disabledForegroundColor","foregroundColor",null,"_dateElement")),this._timeElement&&this._timeElement.winControl&&(this.setColor("disabledBackgroundColor","backgroundColor",null,"_timeElement"),this.setColor("disabledForegroundColor","foregroundColor",null,"_timeElement")),this.setColor("disabledBorderColor","borderColor"),this._leadingSymbolElement.winControl.foregroundColor=this.getColor("disabledForegroundColor"),this._floatingLabelElement.winControl.backgroundColor=this.getColor("backgroundColor"),this._floatingLabelElement.winControl.foregroundColor=this.getColor("disabledForegroundColor"),this._labelElement.winControl.labelForegroundColor=this.getColor("disabledForegroundColor")):(this.setColor("backgroundColor","backgroundColor"),this._dateElement&&this._dateElement.winControl&&(this.setColor("dateBackgroundColor","backgroundColor",null,"_dateElement"),this.setColor("dateForegroundColor","foregroundColor",null,"_dateElement")),this._timeElement&&this._timeElement.winControl&&(this.setColor("timeBackgroundColor","backgroundColor",null,"_timeElement"),this.setColor("timeForegroundColor","foregroundColor",null,"_timeElement")),this.setColor("borderColor","borderColor"),this._leadingSymbolElement.winControl.foregroundColor=this.getColor("leadingSymbolForegroundColor"),this._floatingLabelElement.winControl.backgroundColor=this.getColor("floatingLabelBackgroundColor"),this._floatingLabelElement.winControl.foregroundColor=this.getColor("floatingLabelForegroundColor"),this.setColor("labelContainerBorderColor","borderColor",null,"_labelElement"),this.setColor("labelContainerBackgroundColor","backgroundColor",null,"_labelElement"),this.setColor("labelForegroundColor","labelForegroundColor",null,"_labelElement"))}_updateLayout(x){if("firstUpdate"===x.changeName&&(this._dtcontainer.style.display="flex",this._dtcontainer.style.flexDirection="row",this._dtcontainer.style.width=this.element.style.width,this._leadingSymbolElement.style.alignSelf="center",this._outerdiv.style.display="flex",this._outerdiv.style.flexDirection="row",this._outerdiv.style.width=this.element.style.width,this._outerdiv.style.height=this.element.style.height,this.element.style.flexDirection="column",this.showLabel?this._labelElement.style.display="flex":this._labelElement.style.display="none"),"width"!==x.changeName&&"height"!==x.changeName||(this._dtcontainer.style.width=this.element.style.width,this._outerdiv.style.width=this.element.style.width,this._outerdiv.style.height=this.element.style.height),"updateLayout"===x.changeName||"alignItems"===x.changeName)switch(this.alignItems){case"Center":this._dtcontainer.style.alignItems=A.Enums.AlignItems.Center;break;case"Start":this._dtcontainer.style.alignItems=A.Enums.AlignItems.FlexStart;break;case"End":this._dtcontainer.style.alignItems=A.Enums.AlignItems.FlexEnd;break;case"Baseline":this._dtcontainer.style.alignItems=A.Enums.AlignItems.Baseline;break;default:this._dtcontainer.style.alignItems=A.Enums.AlignItems.Stretch}if("updateLayout"===x.changeName||"justifyContent"===x.changeName)switch(this.justifyContent){case"End":this._dtcontainer.style.justifyContent=A.Enums.JustifyContent.FlexEnd;break;case"Center":this._dtcontainer.style.justifyContent=A.Enums.JustifyContent.Center;break;case"Space-between":this._dtcontainer.style.justifyContent=A.Enums.JustifyContent.SpaceBetween;break;case"Space-around":this._dtcontainer.style.justifyContent=A.Enums.JustifyContent.SpaceAround;break;case"Space-evenly":this._dtcontainer.style.justifyContent=A.Enums.JustifyContent.SpaceEvenly;break;default:this._dtcontainer.style.justifyContent=A.Enums.JustifyContent.FlexStart}if("firstUpdate"===x.changeName||"updateLayout"===x.changeName||"dateTimeMode"===x.changeName)switch(this._dateElement&&this._dateElement.winControl&&(this._dateElement.winControl.show=!0),this._timeElement&&this._timeElement.winControl&&(this._timeElement.winControl.show=!0),this.dateTimeMode){case A.DateTimeModeNames.TimeOnly:this._dateElement&&this._dateElement.winControl&&(this._dateElement.winControl.show=!1);break;case A.DateTimeModeNames.DateOnly:this._timeElement&&this._timeElement.winControl&&(this._timeElement.winControl.show=!1);break;case A.DateTimeModeNames.TimeDate:this._dtcontainer.style.flexDirection="row-reverse";break;case A.DateTimeModeNames.DateTime:this._dtcontainer.style.flexDirection="row";break;case A.DateTimeModeNames.TimeCRDate:this._dtcontainer.style.flexDirection="column-reverse";break;case A.DateTimeModeNames.DateCRTime:this._dtcontainer.style.flexDirection="column"}"updateLayout"!==x.changeName&&"value"!==x.changeName&&"languageChanged"!==x.changeName&&"formatDate"!==x.changeName&&"formatTime"!==x.changeName&&"userDefinedDate"!==x.changeName&&"userDefinedTime"!==x.changeName||(this._dateElement&&this._dateElement.winControl&&(this._dateElement.winControl.text=this._formattingDate(this.value)),this._timeElement&&this._timeElement.winControl&&(this._timeElement.winControl.text=this._formattingTime(this.value))),"showLabel"!==x.changeName&&"updateLayout"!==x.changeName||(this.showLabel?this._labelElement.style.display="flex":this._labelElement.style.display="none")}_formattingDate(V){if(V=new Date(V),!x.isDate(V))return;const R=x.AppServices.LanguageService.currentLanguage;switch(this.formatDate){case A.DateTimeFormatNames.NamedLongDate:return x.UI.formatDate(R,A.DateTimeFormatNames.NamedLongDate,V);case A.DateTimeFormatNames.NamedShortDate:return x.UI.formatDate(R,A.DateTimeFormatNames.NamedShortDate,V);case A.DateTimeFormatNames.ShortDate:return x.UI.formatDate(R,A.DateTimeFormatNames.ShortDate,V);case A.DateTimeFormatNames.UserDefinedDate:return x.UI.formatDate(R,A.DateTimeFormatNames.UserDefinedDate,V);default:if(x.Application.Settings.UI.DateTimeFormats[this.formatDate]){const A=x.Application.Settings.UI.DateTimeFormats[this.formatDate];return new Intl.DateTimeFormat(R,A).format(V)}return x.UI.formatDate(R,A.DateTimeFormatNames.LongDate,V)}}_formattingTime(V){if(V=new Date(V),!x.isDate(V))return;const R=x.AppServices.LanguageService.currentLanguage;switch(this.formatTime){case A.DateTimeFormatNames.ShortTime:return x.UI.formatDate(R,A.DateTimeFormatNames.ShortTime,V);case A.DateTimeFormatNames.UserDefinedTime:return x.UI.formatDate(R,A.DateTimeFormatNames.UserDefinedTime,V);default:if(x.Application.Settings.UI.DateTimeFormats[this.formatTime]){const A=x.Application.Settings.UI.DateTimeFormats[this.formatTime];return new Intl.DateTimeFormat(R,A).format(V)}return x.UI.formatDate(R,A.DateTimeFormatNames.LongTime,V)}}dispose(){return super.dispose()}}A.DateTimeVarOut=DateTimeVarOut}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class Clock extends x.UI.VariableBase{constructor(V,R){super(V,R),this.properties={designerType:{propertyType:"base",type:"string",defaultValue:"Control"},alignItems:{propertyType:"member",type:"string",defaultValue:"Center"},justifyContent:{propertyType:"member",type:"string",defaultValue:"Center"},dateTimeMode:{propertyType:"member",type:"string",defaultValue:A.DateTimeModeNames.DateTime},formatDate:{propertyType:"member",type:"string",defaultValue:A.DateTimeFormatNames.LongDate},formatTime:{propertyType:"member",type:"string",defaultValue:A.DateTimeFormatNames.LongTime},userDefinedDate:{propertyType:"member",type:"string"},userDefinedTime:{propertyType:"member",type:"string"},dateWidth:{propertyType:"child",type:"string",child:"_dateElement",childProperty:"width"},dateHeight:{propertyType:"child",type:"string",child:"_dateElement",childProperty:"height"},dateMargin:{propertyType:"child",type:"string",child:"_dateElement",childProperty:"margin"},datePadding:{propertyType:"child",type:"string",child:"_dateElement",childProperty:"padding"},dateTextAlignment:{propertyType:"child",type:"string",child:"_dateElement",childProperty:"textAlignment"},dateLineClamp:{propertyType:"child",type:"number",child:"_dateElement",childProperty:"lineClamp"},dateTextWrapping:{propertyType:"child",type:"string",child:"_dateElement",childProperty:"textWrapping"},dateTextTrimming:{propertyType:"child",type:"string",child:"_dateElement",childProperty:"textTrimming"},dateFontClass:{propertyType:"child",type:"string",child:"_dateElement",childProperty:"fontClass"},dateFontSize:{propertyType:"child",type:"string",child:"_dateElement",childProperty:"fontSize"},dateFontWeight:{propertyType:"child",type:"string",child:"_dateElement",childProperty:"fontWeight"},dateLineHeight:{propertyType:"child",type:"string",child:"_dateElement",childProperty:"lineHeight"},dateTextContrast:{propertyType:"child",type:"number",child:"_dateElement",childProperty:"textContrast"},dateUppercase:{propertyType:"child",type:"boolean",child:"_dateElement",childProperty:"uppercase"},timeWidth:{propertyType:"child",type:"string",child:"_timeElement",childProperty:"width"},timeHeight:{propertyType:"child",type:"string",child:"_timeElement",childProperty:"height"},timeMargin:{propertyType:"child",type:"string",child:"_timeElement",childProperty:"margin"},timePadding:{propertyType:"child",type:"string",child:"_timeElement",childProperty:"padding"},timeTextAlignment:{propertyType:"child",type:"string",child:"_timeElement",childProperty:"textAlignment"},timeLineClamp:{propertyType:"child",type:"number",child:"_timeElement",childProperty:"lineClamp"},timeTextWrapping:{propertyType:"child",type:"string",child:"_timeElement",childProperty:"textWrapping"},timeTextTrimming:{propertyType:"child",type:"string",child:"_timeElement",childProperty:"textTrimming"},timeFontClass:{propertyType:"child",type:"string",child:"_timeElement",childProperty:"fontClass"},timeFontSize:{propertyType:"child",type:"string",child:"_timeElement",childProperty:"fontSize"},timeFontWeight:{propertyType:"child",type:"string",child:"_timeElement",childProperty:"fontWeight"},timeLineHeight:{propertyType:"child",type:"string",child:"_timeElement",childProperty:"lineHeight"},timeTextContrast:{propertyType:"child",type:"number",child:"_timeElement",childProperty:"textContrast"},timeUppercase:{propertyType:"child",type:"boolean",child:"_timeElement",childProperty:"uppercase"},backgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},dateBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},timeBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},dateForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},timeForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},borderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"},disabledBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledBackgroundColor"},disabledForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledForegroundColor"},disabledBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledBorderColor"}},this._dateElement=null,this._timeElement=null,this._clock=null,this._interval=500,this.initialize(x.UI.Clock)}createTemplate(){return this.element.innerHTML='\n                <div class="vw-clock__date" data-ref-element="_dateElement" data-win-control="VisiWin.UI.TextBlock"></div>\n                <div class="vw-clock__time" data-ref-element="_timeElement" data-win-control="VisiWin.UI.TextBlock"></div>\n            ',this.initializeChilds()}afterInit(){this.value=new Date,this.clockStart()}attach(){let x=null;return this.isAttached||(x=super.attach(),this.clockStart()),x}detach(){let x=null;return this.isAttached&&(x=super.detach(),this.clockEnd()),x}onLanguageChanged(x){this._updateLayout({changeName:"languageChanged"})}_updateColors(x){this.disabled?(this.setColor("disabledBackgroundColor","backgroundColor"),this._dateElement&&this._dateElement.winControl&&(this.setColor("disabledBackgroundColor","backgroundColor",null,"_dateElement"),this.setColor("disabledForegroundColor","foregroundColor",null,"_dateElement")),this._timeElement&&this._timeElement.winControl&&(this.setColor("disabledBackgroundColor","backgroundColor",null,"_timeElement"),this.setColor("disabledForegroundColor","foregroundColor",null,"_timeElement")),this.setColor("disabledBorderColor","borderColor")):(this.setColor("backgroundColor","backgroundColor"),this._dateElement&&this._dateElement.winControl&&(this.setColor("dateBackgroundColor","backgroundColor",null,"_dateElement"),this.setColor("dateForegroundColor","foregroundColor",null,"_dateElement")),this._timeElement&&this._timeElement.winControl&&(this.setColor("timeBackgroundColor","backgroundColor",null,"_timeElement"),this.setColor("timeForegroundColor","foregroundColor",null,"_timeElement")),this.setColor("borderColor","borderColor"))}_updateLayout(x){if("initialized"===x.changeName||"alignItems"===x.changeName)switch(this.alignItems){case"Center":this.element.style.alignItems="center";break;case"Start":this.element.style.alignItems="flex-start";break;case"End":this.element.style.alignItems="flex-end";break;case"Baseline":this.element.style.alignItems="baseline";break;default:this.element.style.alignItems="stretch"}if("initialized"===x.changeName||"justifyContent"===x.changeName)switch(this.justifyContent){case"End":this.dateTimeMode===A.DateTimeModeNames.TimeDate?this.element.style.justifyContent="flex-start":this.element.style.justifyContent="flex-end";break;case"Center":this.element.style.justifyContent="center";break;case"Space-between":this.element.style.justifyContent="space-between";break;case"Space-around":this.element.style.justifyContent="space-around";break;case"Space-evenly":this.element.style.justifyContent="space-evenly";break;default:this.dateTimeMode===A.DateTimeModeNames.TimeDate?this.element.style.justifyContent="flex-end":this.element.style.justifyContent="flex-start"}if("initialized"===x.changeName||"dateTimeMode"===x.changeName)switch(this._dateElement&&this._dateElement.winControl&&(this._dateElement.winControl.show=!0),this._timeElement&&this._timeElement.winControl&&(this._timeElement.winControl.show=!0),this.element.style.flexDirection="row","End"===this.justifyContent?this.element.style.justifyContent="flex-end":"Start"===this.justifyContent&&(this.element.style.justifyContent="flex-start"),this.dateTimeMode){case A.DateTimeModeNames.TimeOnly:this._dateElement&&this._dateElement.winControl&&(this._dateElement.winControl.show=!1);break;case A.DateTimeModeNames.DateOnly:this._timeElement&&this._timeElement.winControl&&(this._timeElement.winControl.show=!1);break;case A.DateTimeModeNames.TimeDate:this.element.style.flexDirection="row-reverse","End"===this.justifyContent?this.element.style.justifyContent="flex-start":"Start"===this.justifyContent&&(this.element.style.justifyContent="flex-end");break;case A.DateTimeModeNames.TimeCRDate:this.element.style.flexDirection="column-reverse";break;case A.DateTimeModeNames.DateCRTime:this.element.style.flexDirection="column"}"initialized"!==x.changeName&&"languageChanged"!==x.changeName&&"value"!==x.changeName&&"formatDate"!==x.changeName&&"formatTime"!==x.changeName&&"userDefinedDate"!==x.changeName&&"userDefinedTime"!==x.changeName||(this._dateElement&&this._dateElement.winControl&&(this._dateElement.winControl.text=this._formattingDate(this.value)),this._timeElement&&this._timeElement.winControl&&(this._timeElement.winControl.text=this._formattingTime(this.value)))}_formattingDate(V){if(V=new Date(V),x.isDate(V)&&x.AppServices.LanguageService&&x.AppServices.LanguageService.currentLanguage){const R=x.AppServices.LanguageService.currentLanguage;switch(this.formatDate){case A.DateTimeFormatNames.NamedLongDate:return x.UI.formatDate(R,A.DateTimeFormatNames.NamedLongDate,V);case A.DateTimeFormatNames.NamedShortDate:return x.UI.formatDate(R,A.DateTimeFormatNames.NamedShortDate,V);case A.DateTimeFormatNames.ShortDate:return x.UI.formatDate(R,A.DateTimeFormatNames.ShortDate,V);case A.DateTimeFormatNames.UserDefinedDate:return x.UI.formatDate(R,A.DateTimeFormatNames.UserDefinedDate,V);default:if(x.Application.Settings.UI.DateTimeFormats[this.formatDate]){const A=x.Application.Settings.UI.DateTimeFormats[this.formatDate];return new Intl.DateTimeFormat(R,A).format(V)}return x.UI.formatDate(R,A.DateTimeFormatNames.LongDate,V)}}}_formattingTime(V){if(V=new Date(V),x.isDate(V)&&x.AppServices.LanguageService&&x.AppServices.LanguageService.currentLanguage){const R=x.AppServices.LanguageService.currentLanguage;switch(this.formatTime){case A.DateTimeFormatNames.ShortTime:return x.UI.formatDate(R,A.DateTimeFormatNames.ShortTime,V);case A.DateTimeFormatNames.UserDefinedTime:return x.UI.formatDate(R,A.DateTimeFormatNames.UserDefinedTime,V);default:if(x.Application.Settings.UI.DateTimeFormats[this.formatTime]){const A=x.Application.Settings.UI.DateTimeFormats[this.formatTime];return new Intl.DateTimeFormat(R,A).format(V)}return x.UI.formatDate(R,A.DateTimeFormatNames.LongTime,V)}}}clockStart(){this.clockEnd(),this._clock=setInterval(function(){this.value=new Date}.bind(this),this._interval)}clockEnd(){null!==this._clock&&(clearInterval(this._clock),this._clock=null)}dispose(){return this.clockEnd(),super.dispose()}}A.Clock=Clock}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class RadialRange extends x.UI.VariableBase{constructor(x,A){super(x,A),this.properties={designerType:{propertyType:"base",type:"string",defaultValue:"Control"},registerTargetId:{propertyType:"base",type:"string",defaultValue:"RadialRangeLimit"},rawLimitMin:{propertyType:"member",type:"number",defaultValue:0},rawLimitMax:{propertyType:"member",type:"number",defaultValue:100},limits:{propertyType:"member",type:"any"},pLimits:{propertyType:"member",type:"any"},rawReferenceValue:{propertyType:"member",type:"number",defaultValue:0},startAngle:{propertyType:"member",type:"number",defaultValue:-135},endAngle:{propertyType:"member",type:"number",defaultValue:135},centerX:{propertyType:"member",type:"string",defaultValue:"100%"},centerY:{propertyType:"member",type:"string",defaultValue:"100%"},innerRadius:{propertyType:"member",type:"string",defaultValue:"95%"},outerRadius:{propertyType:"member",type:"string",defaultValue:"100%"},showAllRanges:{propertyType:"member",type:"boolean",defaultValue:!0},backgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},disabledBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledBackgroundColor"},indicatorColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},disabledIndicatorColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"}},this._limitsCollection=[],this._svgElement=null,this._boundLimitsChangedHandler=this._limitsChangedHandler.bind(this);this.initialize(RadialRange,{cssClassPrefix:"vw"})}createTemplate(){let x=document.createElement("div");return this.reparentChildren(this.element,x),this.element.innerHTML='<svg class="vw-radialrange__svg" xmlns="http://www.w3.org/2000/svg"></svg>',this._svgElement=this.element.firstElementChild,this.reparentChildren(x,this.element),this.initializeChilds()}resizeHandler(){this._updateLayoutBase("event","sizeChanged",null,null)}beforeInit(){this._svgElement.setAttribute("width","100%"),this._svgElement.setAttribute("height","100%")}registerChild(x,A,V,R){return A===this.registerTargetId&&V&&V.winControl&&(this._limitsCollection.push(V.winControl),this.isInDesignMode?(V.style.display="none",V.winControl.addEventListener("notifyPropertyChanged",this._boundLimitsChangedHandler)):V.remove()),!1}ready(){"Control"===this.designerType&&(this._limitsChangedHandler(null),this._updateLayoutBase("lifeCycle","ready",null,null))}_updateColors(x){this.disabled?(this.setColor("disabledBackgroundColor","backgroundColor"),this.setColor("disabledIndicatorColor","backgroundColor","_svgElement")):this.setColor("backgroundColor"),"property"!==x.changeType&&"status"!==x.changeType&&"state"!==x.changeType||this._drawRadialRanges()}_updateLayout(x){"initialized"!==x.changeName&&"limits"!==x.changeName&&"useRawValue"!==x.changeName&&"rawLimitMin"!==x.changeName&&"rawLimitMax"!==x.changeName&&"varRawLimitMin"!==x.changeName&&"varRawLimitMax"!==x.changeName&&"value"!==x.changeName&&"showAllRanges"!==x.changeName&&"rawReferenceValue"!==x.changeName&&"position"!==x.changeName&&"startAngle"!==x.changeName&&"endAngle"!==x.changeName&&"innerRadius"!==x.changeName&&"outerRadius"!==x.changeName&&"sizeChanged"!==x.changeName||this._drawRadialRanges()}_drawRadialRanges(){for(;this._svgElement.lastChild;)this._svgElement.removeChild(this._svgElement.lastChild);let A,V,R,D=window.getComputedStyle(this.element,null),N=parseFloat(D.getPropertyValue("width")),U=parseFloat(D.getPropertyValue("height")),B=N>U?U:N,F=this.useRawValue?this.rawValue:this.value,W=this.useRawValue?this.rawReferenceValue:this.rawValue2value(this.rawReferenceValue),H=this.getFormattedMinValue(this.rawLimitMin),z=this.getFormattedMaxValue(this.rawLimitMax),G=x.SvgUtilities.correctAngle(this.startAngle),j=x.SvgUtilities.correctAngle(this.endAngle),q=x.SvgUtilities.getPixelValue(this.centerX,N),Q=x.SvgUtilities.getPixelValue(this.centerY,U),K=x.SvgUtilities.getPixelValue(this.innerRadius,B),J=x.SvgUtilities.getPixelValue(this.outerRadius,B),X=this.limits,Y=[];if(!(0==N||0==U||isNaN(N)||isNaN(U)||isNaN(F)||isNaN(W)||isNaN(H)||isNaN(z)||isNaN(G)||isNaN(j)||isNaN(q)||isNaN(Q)||isNaN(K)||isNaN(J)||H>=z))if(A=x.SvgUtilities.getDegreesSegment(G,j),V=z-H,R=A/V,X&&X.length){for(let A=0;A<X.length;A++){let V=X[A],D=parseFloat(V.startValue),N=parseFloat(V.endValue);if(isNaN(D)||isNaN(N)||D>=N||D<H&&N<=H||D>=z&&N>z||D<W&&N<=W)Y.push({show:!1,minValue:D,maxValue:N});else{let U,j,q,Q=isNaN(x.SvgUtilities.getPixelValue(V.innerRadius,B))?K:x.SvgUtilities.getPixelValue(V.innerRadius,B),X=isNaN(x.SvgUtilities.getPixelValue(V.outerRadius,B))?J:x.SvgUtilities.getPixelValue(V.outerRadius,B),$=V.fillColor||"black";if(D<H&&(D=H),N>z&&(N=z),W>H&&W<z&&W>D&&(D=W),D=R*(D-H),N=R*(N-H),U=x.SvgUtilities.correctAngle(G+D),j=x.SvgUtilities.correctAngle(G+N),q=x.SvgUtilities.getDegreesSegment(U,j),this.showAllRanges||isNaN(F))Y.push({show:!0,minValue:D,maxValue:N,startAngle:U,endAngle:j,innerRadius:Q,outerRadius:X,degreesSegment:q,color:$});else{if(Y[A-1]&&Y[A-1].maxValue>D)break;Y.push({show:!0,minValue:D,maxValue:N,startAngle:U,endAngle:j,innerRadius:Q,outerRadius:X,degreesSegment:q,color:$})}}}if(!this.showAllRanges&&!isNaN(F)){let A=[],V=R*(H-H),D=R*(W-H);for(let R=0;R<Y.length;R++){let N=Y[R-1],U=Y[R];if(U&&U.show){let R=N&&N.show&&N.maxValue?N.maxValue:D>V?D:V;U.maxValue;A.push({show:!0,minValue:R,maxValue:U.minValue,startAngle:x.SvgUtilities.correctAngle(G+R),endAngle:x.SvgUtilities.correctAngle(G+U.minValue),innerRadius:K,outerRadius:J,degreesSegment:x.SvgUtilities.getDegreesSegment(G+R,G+U.minValue),color:this.indicatorColor})}}Y=Y.concat(A)}for(let A=0;A<Y.length;A++)if(Y[A].show)if(this.showAllRanges||isNaN(F))this._svgElement.appendChild(x.SvgUtilities.drawPath(q,Q,Y[A].startAngle,Y[A].endAngle,Y[A].degreesSegment,Y[A].innerRadius,Y[A].outerRadius,this.getThemeColor(Y[A].color)));else{let V=R*(F-H);if(V>=Y[A].minValue&&V<Y[A].maxValue||V<Y[A].minValue||Y[A].minValue==Y[A].maxValue)continue;this._svgElement.appendChild(x.SvgUtilities.drawPath(q,Q,Y[A].startAngle,Y[A].endAngle,Y[A].degreesSegment,Y[A].innerRadius,Y[A].outerRadius,this.getThemeColor(Y[A].color)))}}else if(isNaN(F))return void this._svgElement.appendChild(x.SvgUtilities.drawPath(q,Q,G,j,A,K,J,this.getThemeColor("lightgray")))}_limitsChangedHandler(x){if(this._limitsCollection&&this._limitsCollection.length){let x=[];for(let A=0;A<this._limitsCollection.length;A++)x.push({startValue:this._limitsCollection[A].startValue,endValue:this._limitsCollection[A].endValue,innerRadius:this._limitsCollection[A].innerRadius,outerRadius:this._limitsCollection[A].outerRadius,fillColor:this._limitsCollection[A].fillColor});this.limits=x}else this.limits=[]}dispose(){if(this._limitsCollection&&this._limitsCollection.length)for(let x=0;x<this._limitsCollection.length;x++)this._limitsCollection[x].removeEventListener("notifyPropertyChanged",this._boundLimitsChangedHandler);return this._limitsCollection=[],super.dispose()}}A.RadialRange=RadialRange}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class RadialRangeLimit extends x.UI.ControlBase{constructor(x,A){super(x,A),this.properties={designerType:{propertyType:"base",defaultValue:"Control"},registerSourceId:{propertyType:"base",type:"string",defaultValue:"RadialRangeLimit"},startValue:{propertyType:"member",type:"number",defaultValue:0},endValue:{propertyType:"member",type:"number",defaultValue:100},innerRadius:{propertyType:"member",type:"string"},outerRadius:{propertyType:"member",type:"string"},fillColor:{propertyType:"member",type:"string",defaultValue:"@PrimaryColor"}};this.initialize(RadialRangeLimit,{cssClassPrefix:"vw"})}dispose(){return super.dispose()}}A.RadialRangeLimit=RadialRangeLimit}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class RadialScale extends x.UI.VariableBase{constructor(x,A){super(x,A),this.properties={designerType:{propertyType:"base",type:"string",defaultValue:"Control"},rawLimitMin:{propertyType:"member",type:"number",defaultValue:0},rawLimitMax:{propertyType:"member",type:"number",defaultValue:100},mode:{propertyType:"member",type:"string",defaultValue:"Steps"},placement:{propertyType:"member",type:"string",defaultValue:"Inside"},showBaseLine:{propertyType:"member",type:"boolean",defaultValue:!1},limitsVisibility:{propertyType:"member",type:"string",defaultValue:"Always"},startAngle:{propertyType:"member",type:"number",defaultValue:-135},endAngle:{propertyType:"member",type:"number",defaultValue:135},centerX:{propertyType:"member",type:"string",defaultValue:"100%"},centerY:{propertyType:"member",type:"string",defaultValue:"100%"},radius:{propertyType:"member",type:"string",defaultValue:"100%"},showMajorTicks:{propertyType:"member",type:"boolean",defaultValue:!0},majorStepSize:{propertyType:"member",type:"number",defaultValue:20},majorSteps:{propertyType:"member",type:"number",defaultValue:5},majorTicksLength:{propertyType:"member",type:"number",defaultValue:10},majorTicksWidth:{propertyType:"member",type:"number",defaultValue:3},showMiddleTicks:{propertyType:"member",type:"boolean",defaultValue:!0},middleStepSize:{propertyType:"member",type:"number",defaultValue:10},middleSteps:{propertyType:"member",type:"number",defaultValue:2},middleTicksLength:{propertyType:"member",type:"number",defaultValue:6},middleTicksWidth:{propertyType:"member",type:"number",defaultValue:2},showMinorTicks:{propertyType:"member",type:"boolean",defaultValue:!0},minorStepSize:{propertyType:"member",type:"number",defaultValue:5},minorSteps:{propertyType:"member",type:"number",defaultValue:2},minorTicksLength:{propertyType:"member",type:"number",defaultValue:4},minorTicksWidth:{propertyType:"member",type:"number",defaultValue:1},showMajorLabels:{propertyType:"member",type:"boolean",defaultValue:!0},majorLabelsFontClass:{propertyType:"member",type:"string",defaultValue:"Label2"},majorLabelsFontSize:{propertyType:"member",type:"string"},majorLabelsFontWeight:{propertyType:"member",type:"string"},majorLabelsLineHeight:{propertyType:"member",type:"string"},majorLabelsTextContrast:{propertyType:"member",type:"number",defaultValue:1},majorLabelsOffset:{propertyType:"member",type:"number",defaultValue:8},majorLabelsDecimalPlaces:{propertyType:"member",type:"number",defaultValue:0},backgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},foregroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},majorTicksColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},middleTicksColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},minorTicksColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},disabledBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledBackgroundColor"},disabledForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledForegroundColor"}},this._labels=[],this._svgElement=null;this.initialize(RadialScale,{cssClassPrefix:"vw"})}createTemplate(){return this.element.innerHTML='<svg class="vw-radialscale__svg"  xmlns="http://www.w3.org/2000/svg"></svg>',this._svgElement=this.element.firstElementChild,null}createHandler(){this.resizeObserver=new ResizeObserver(x=>{x?(this._clientWidth=x[0].contentRect.width,this._clientHeight=x[0].contentRect.height):(this._clientWidth=this.element.clientWidth,this._clientHeight=this.element.clientHeight),this._drawRadialScale()}),this.resizeObserver.observe(this.element)}removeHandler(){this.resizeObserver&&this.resizeObserver.unobserve(this.element)}resizeHandler(){this._updateLayoutBase("event","sizeChanged",null,null)}beforeInit(){this._svgElement&&(this._svgElement.setAttribute("width","100%"),this._svgElement.setAttribute("height","100%"))}_updateColors(x){"property"!==x.changeType&&"status"!==x.changeType&&"state"!==x.changeType&&"afterInit"!==x.changeName||(this.disabled?this.setColor("disabledBackgroundColor","backgroundColor"):this.setColor("backgroundColor","backgroundColor")),"property"!==x.changeType&&"status"!==x.changeType&&"state"!==x.changeType||this._drawRadialScale()}_updateLayout(x){if("majorLabelsFontClass"===x.changeName)for(let A=0;A<this._labels.length;A++)this._labels[A].classList.remove(x.oldValue.toLowerCase());"majorSteps"!==x.changeName&&"majorStepSize"!==x.changeName&&"majorTicksLength"!==x.changeName&&"majorTicksWidth"!==x.changeName&&"middleSteps"!==x.changeName&&"middleStepSize"!==x.changeName&&"middleTicksLength"!==x.changeName&&"middleTicksWidth"!==x.changeName&&"minorSteps"!==x.changeName&&"minorStepSize"!==x.changeName&&"minorTicksLength"!==x.changeName&&"minorTicksWidth"!==x.changeName&&"mode"!==x.changeName&&"placement"!==x.changeName&&"position"!==x.changeName&&"reverse"!==x.changeName&&"limitsVisibility"!==x.changeName&&"startAngle"!==x.changeName&&"endAngle"!==x.changeName&&"centerX"!==x.changeName&&"centerY"!==x.changeName&&"radius"!==x.changeName&&"showMajorLabels"!==x.changeName&&"showBaseLine"!==x.changeName&&"showMajorTicks"!==x.changeName&&"showMiddleTicks"!==x.changeName&&"showMinorTicks"!==x.changeName&&"majorLabelsDecimalPlaces"!==x.changeName&&"majorLabelsFontClass"!==x.changeName&&"majorLabelsOffset"!==x.changeName&&"majorLabelsTextContrast"!==x.changeName&&"majorLabelsFontSize"!==x.changeName&&"majorLabelsFontWeight"!==x.changeName&&"majorLabelsLineHeight"!==x.changeName&&"rawLimitMin"!==x.changeName&&"rawLimitMax"!==x.changeName&&"varRawLimitMin"!==x.changeName&&"varRawLimitMax"!==x.changeName&&"variableName"!==x.changeName||this._drawRadialScale()}_drawRadialScale(){let A=this._clientWidth,V=this._clientHeight;if(!A||!V)return;let R=Math.floor(Math.abs(this.rawLimitMin-this.rawLimitMax));if("StepSize"===this.mode){if(R/this.majorStepSize>500||R/this.middleStepSize>500||R/this.minorStepSize>500)return}else if("Steps"===this.mode&&(this.majorSteps>500||this.middleSteps>500||this.minorSteps>500))return;for(;this._svgElement.lastChild;)this._svgElement.removeChild(this._svgElement.lastChild);this.element.appendChild(this._svgElement);let D=A>V?V:A,N=null,U=null;this.isInRunMode&&this.variableName?(N=this.getFormattedMinValue(this.rawLimitMin),U=this.getFormattedMaxValue(this.rawLimitMax)):(N=this.rawLimitMin,U=this.rawLimitMax);let B=x.SvgUtilities.correctAngle(this.startAngle),F=x.SvgUtilities.correctAngle(this.endAngle),W=x.SvgUtilities.getPixelValue(this.centerX,A),H=x.SvgUtilities.getPixelValue(this.centerY,V),z=x.SvgUtilities.getPixelValue(this.radius,D),G=[],j=[],q=[];if(0==A||0==V||isNaN(A)||isNaN(V)||isNaN(N)||isNaN(U)||isNaN(B)||isNaN(F)||isNaN(W)||isNaN(H)||isNaN(z)||N>=U)return;this.majorLabelsDecimalPlaces<0&&(this.majorLabelsDecimalPlaces=0),(isNaN(this.majorStepSize)||this.majorStepSize<1)&&(this.majorStepSize=1),(isNaN(this.majorSteps)||this.majorSteps<1)&&(this.majorSteps=1),(isNaN(this.majorTicksLength)||this.majorTicksLength<0)&&(this.majorTicksLength=0),(isNaN(this.majorTicksWidth)||this.majorTicksWidth<0)&&(this.majorTicksWidth=0),(isNaN(this.middleStepSize)||this.middleStepSize<1)&&(this.middleStepSize=1),(isNaN(this.middleSteps)||this.middleSteps<1)&&(this.middleSteps=1),(isNaN(this.middleTicksLength)||this.middleTicksLength<0)&&(this.middleTicksLength=0),(isNaN(this.middleTicksWidth)||this.middleTicksWidth<0)&&(this.middleTicksWidth=0),(isNaN(this.minorStepSize)||this.minorStepSize<1)&&(this.minorStepSize=1),(isNaN(this.minorSteps)||this.minorSteps<1)&&(this.minorSteps=1),(isNaN(this.minorTicksLength)||this.minorTicksLength<0)&&(this.minorTicksLength=0),(isNaN(this.minorTicksWidth)||this.minorTicksWidth<0)&&(this.minorTicksWidth=0);let Q=[];switch(this.mode){case"Steps":Q=this._stepsToValues(N,U,this.majorSteps);break;case"StepSize":Q=this._stepSizeToValues(N,U,this.majorStepSize)}if(Q&&Q.length)for(let x=0;x<Q.length;x++)G.push(Q[x]);if(G){let x=[];for(let A=0;A<G.length-1;A++){switch(this.mode){case"Steps":x=this._stepsToValues(G[A].value,G[A+1].value,this.middleSteps);break;case"StepSize":x=this._stepSizeToValues(G[A].value,G[A+1].value,this.middleStepSize)}if(x&&x.length)for(let V=0;V<x.length;V++)(0==A||0!=A&&V>0&&V<x.length)&&j.push(x[V])}}if(j){let x=[];for(let A=0;A<j.length-1;A++){switch(this.mode){case"Steps":x=this._stepsToValues(j[A].value,j[A+1].value,this.minorSteps);break;case"StepSize":x=this._stepSizeToValues(j[A].value,j[A+1].value,this.minorStepSize)}if(x&&x.length)for(var K=0;K<x.length;K++)(0==A||0!=A&&K>0&&K<x.length)&&q.push(x[K])}}"Never"==this.limitsVisibility&&(G.splice(0,1),G.splice(G.length-1,1),j.splice(0,1),j.splice(j.length-1,1),q.splice(0,1),q.splice(q.length-1,1)),this.showMinorTicks&&(this.showMajorTicks&&!this.showMiddleTicks&&(q=q.filter((function(x){return!G.some(A=>A.value==x.value)}))),!this.showMajorTicks&&this.showMiddleTicks&&(q=q.filter((function(x){return!j.some(A=>A.value==x.value)}))),this.showMajorTicks&&this.showMiddleTicks&&(q=q.filter((function(x){return!G.some(A=>A.value==x.value)})),q=q.filter((function(x){return!j.some(A=>A.value==x.value)}))),this._ticksToCoordinates(N,U,W,H,B,F,z,this.placement,q,this.minorTicksLength),this._drawTicks(q,this.minorTicksWidth,this.disabled?"disabledForegroundColor":"minorTicksColor")),this.showMiddleTicks&&(this.showMajorTicks&&(j=j.filter((function(x){return!G.some(A=>A.value==x.value)}))),this._ticksToCoordinates(N,U,W,H,B,F,z,this.placement,j,this.middleTicksLength),this._drawTicks(j,this.middleTicksWidth,this.disabled?"disabledForegroundColor":"middleTicksColor")),this.showMajorTicks&&(this._ticksToCoordinates(N,U,W,H,B,F,z,this.placement,G,this.majorTicksLength),this._drawTicks(G,this.majorTicksWidth,this.disabled?"disabledForegroundColor":"majorTicksColor"),this.showMajorLabels&&this._drawRadialLabelsSVG(W,H,z,this.placement,G,this.majorLabelsFontClass,this.majorLabelsFontSize,this.majorLabelsFontWeight,this.majorLabelsLineHeight,this.majorLabelsTextContrast,this.majorTicksLength,this.majorLabelsOffset,this.majorLabelsDecimalPlaces)),this.showBaseLine&&this._drawBaseline(W,H,B,F,z,1,this.placement,this.disabled?"disabledForegroundColor":"majorTicksColor")}_stepsizeStepsToValues(x,A,V,R,D){let N,U,B=[];if(R>0&&R<length){N=(A-x)/V,B.push({value:x});for(let A=1;A<V;A++)if(B.push({value:x+N*A}),A>100){B=[];break}B.push({value:A})}else if(D?(N=this.majorStepSize/this.middleSteps,N/=this.minorSteps):N=this.majorStepSize/V,0==R){U=Math.floor(Math.abs((x-A)/N)),B.push({value:A});for(let x=1;x<=U;x++)if(B.push({value:A-N*x}),x>100){B=[];break}B.push({value:x}),B.reverse()}else{U=Math.floor(Math.abs((x-A)/N)),B.push({value:x});for(let A=1;A<=U;A++)if(B.push({value:x+N*A}),A>100){B=[];break}B.push({value:A})}return B}_stepsToValues(x,A,V){let R=(A-x)/V,D=x,N=[];for(D>=A&&(D=A);D<=A;)if(N.push({value:D}),D+=R,N.length==V){N.push({value:A});break}return N}_stepSizeToValues(x,A,V){var R=x%V!=0?x-x%V:x,D=[];for(D.push({value:x});R<A;)R>x&&D.push({value:R}),R+=V;return D.push({value:A}),D}_ticksToCoordinates(A,V,R,D,N,U,B,F,W,H){if(W&&W.length)for(var z=x.SvgUtilities.getDegreesSegment(N,U)/(V-A),G=0;G<W.length;G++){var j,q,Q,K,J,X,Y=W[G]&&!isNaN(W[G].value)?W[G].value:null;null!=Y&&(j=x.SvgUtilities.correctAngle(N+z*(Y-A)),q=Math.PI/180*j-Math.PI/2,Q=R+B*Math.cos(q),J=D+B*Math.sin(q),K=R+("Outside"==F?B+H:B-H)*Math.cos(q),X=D+("Outside"==F?B+H:B-H)*Math.sin(q),W[G].x1=Q,W[G].y1=J,W[G].x2=K,W[G].y2=X,W[G].valueDeg=j,W[G].valueRad=q)}}_drawTicks(A,V,R){if(A&&A.length)for(var D=0;D<A.length;D++)this._svgElement.appendChild(x.SvgUtilities.drawLine(A[D].x1,A[D].y1,A[D].x2,A[D].y2,V,this.getColor(R),""))}_drawRadialLabelsSVG(A,V,R,D,N,U,B,F,W,H,z,G,j){if(N&&N.length)for(let q=0;q<N.length;q++){if(!this._labels[q]){let x=document.createElementNS("http://www.w3.org/2000/svg","text");this._labels.push(x)}let Q=this._labels[q];Q.classList.add("vw-radialscale__svg-label"),"None"!=U&&Q.classList.add(U.toLowerCase()),B&&(Q.style.fontSize=B),F&&(Q.style.fontWeight=x.Utilities.getFontWeight(F)),W&&(Q.style.lineHeight=W),Q.setAttribute("alignment-baseline","central"),Q.setAttribute("opacity",H),Q.setAttribute("backgroundColor",this.getThemeColor("@Transparent")),Q.setAttribute("fill",this.disabled?this.getColor("disabledForegroundColor"):this.getColor("foregroundColor")),Q.textContent=x.Utilities.frmString("F"+j,N[q].value),this._svgElement.appendChild(Q);let K,J,X=Q.getBBox(),Y=0,$=0,Z=8,ee=N[q].valueDeg,te=N[q].valueRad;switch(ee<0&&(ee=360+ee),D){case"Outside":K=A+(R+z+G)*Math.cos(te),J=V+(R+z+G)*Math.sin(te),ee>=0&&ee<=45?(Y=X.width/2-ee/90*X.width,$=X.height):ee>=45&&ee<=135?(Y=0,$=X.height+(45-ee)/90*X.height):ee>=135&&ee<=225?(Y=X.width-(225-ee)/90*X.width,$=0):ee>=225&&ee<=315?(Y=X.width,$=(1-(315-ee)/90)*X.height):ee>=315&&ee<=360&&(Y=X.width/2+(360-ee)/90*X.width,$=X.height);break;default:K=A+(R-z-G)*Math.cos(te),J=V+(R-z-G)*Math.sin(te),ee>=0&&ee<=45?(Y=X.width*(.5+ee/90),$=0):ee>=45&&ee<135?(Y=X.width,$=X.height*(ee-45)/90):ee>=135&&ee<=225?(Y=X.width*(225-ee)/90,$=X.height):ee>=225&&ee<=315?(Y=0,$=X.height*(315-ee)/90):ee>=315&&ee<=360&&(Y=X.width*(.5+(ee-360)/90),$=0)}Q.setAttribute("x",K-Y),Q.setAttribute("y",J-$+Z)}}_drawBaseline(A,V,R,D,N,U,B,F){if(this._svgElement)switch(B){case"Outside":this._svgElement.appendChild(x.SvgUtilities.drawPath(A,V,R,D,x.SvgUtilities.getDegreesSegment(R,D),N,N+U,this.getColor(F)));break;default:this._svgElement.appendChild(x.SvgUtilities.drawPath(A,V,R,D,x.SvgUtilities.getDegreesSegment(R,D),N-U,N,this.getColor(F)))}}dispose(){return super.dispose()}}A.RadialScale=RadialScale}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class RadialIndicator extends x.UI.VariableBase{constructor(A,V){super(A,V),this.properties={designerType:{propertyType:"base",type:"string",defaultValue:"Control"},rawLimitMin:{propertyType:"member",type:"number",defaultValue:0},rawLimitMax:{propertyType:"member",type:"number",defaultValue:100},startAngle:{propertyType:"member",type:"number",defaultValue:-135},endAngle:{propertyType:"member",type:"number",defaultValue:135},indicatorUri:{propertyType:"member",type:"string",defaultValue:x.Utilities.getPathString("images/svgs/instrumentneedle.svg")},indicatorSize:{propertyType:"member",type:"string",defaultValue:"100%"},backgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},disabledBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledBackgroundColor"}},this._svgLoadedFlag=!1,this._centerX=null,this._centerY=null,this._svgElement=null,this._svgGroupElement=null,this._svgElementHtml=null;this.initialize(RadialIndicator,{cssClassPrefix:"vw"})}createTemplate(){return this.element.innerHTML=['<svg class="vw-radialindicator__svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"></svg>'].join("\n"),this._svgElement=this.element.firstElementChild,null}resizeHandler(){this._clientWidth=this.element.clientWidth,this._clientHeight=this.element.clientHeight,this._drawRadialIndicator()}beforeInit(){this._svgElement=Snap(this._svgElement),this._svgElement.attr("width","100%"),this._svgElement.attr("height","100%"),this._svgElement.attr("preserveAspectRatio","xMidYMid"),this._svgGroupElement=this._svgElement.group()}_updateColors(x){this.disabled?this.setColor("disabledBackgroundColor","backgroundColor"):this.setColor("backgroundColor")}_updateLayout(x){"value"!==x.changeName&&"useRawValue"!==x.changeName&&"rawLimitMin"!==x.changeName&&"rawLimitMax"!==x.changeName&&"varRawLimitMin"!==x.changeName&&"varRawLimitMax"!==x.changeName&&"useVariableLimits"!==x.changeName&&"startAngle"!==x.changeName&&"endAngle"!==x.changeName||this._drawRadialIndicator(),"afterInit"===x.changeName&&(this._svgElement=Snap(this._svgElement),this._svgGroupElement=this._svgElement.group()),"firstUpdate"!==x.changeName&&"indicatorSize"!==x.changeName||(this._svgElement.attr("width",this.indicatorSize),this._svgElement.attr("height",this.indicatorSize)),"firstUpdate"!==x.changeName&&"indicatorUri"!==x.changeName||this._loadSVG(this.indicatorUri),"initialized"===x.changeName&&this.isInDesignMode&&"Control"===this.designerType&&null==this.value&&(this.value=0)}_drawRadialIndicator(){let A=this._clientWidth,V=this._clientHeight;if(!A||!V||!this._svgLoadedFlag)return;let R,D,N=this.useRawValue?this.rawValue:this.value;this.isInRunMode&&this.variableName?(R=this.getFormattedMinValue(this.rawLimitMin),D=this.getFormattedMaxValue(this.rawLimitMax)):(R=this.rawLimitMin,D=this.rawLimitMax);let U=x.SvgUtilities.correctAngle(this.startAngle),B=x.SvgUtilities.correctAngle(this.endAngle),F=x.SvgUtilities.getDegreesSegment(U,B)/(D-R);N<R&&(N=R),N>D&&(N=D);let W=x.SvgUtilities.correctAngle(U+F*(N-R));this._svgElementHtml.style.transformOrigin="center",this._svgElementHtml.style.transform=`rotate(${W}deg)`}_loadSVG(x){Snap.load(x,x=>{let A=(x=x.select("svg")).node.getAttribute("viewBox");A&&(x.attr({width:"100%"}),x.attr({height:"100%"}),x.attr({preserveAspectRatio:"xMidYMid"}),this._svgElement.attr("viewBox",A),this._svgGroupElement.clear(),this._svgGroupElement.append(x),A=A.split(" "),this._centerX=parseFloat(A[2])/2,this._centerY=parseFloat(A[3])/2,this.element&&this.element.childNodes[0]&&(this._svgElementHtml=this.element.childNodes[0]),this._svgLoadedFlag=!0,this._drawRadialIndicator())})}dispose(){return super.dispose()}}A.RadialIndicator=RadialIndicator}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class RadialInstrument extends x.UI.ControlBase{constructor(x,A){super(x,A),this.properties={designerType:{propertyType:"base",type:"string",defaultValue:"Control"},registerTargetId:{propertyType:"base",type:"string",defaultValue:"RadialRangeLimit"},variableName:{propertyType:"member",type:"string"},value:{propertyType:"member",type:"number",defaultValue:40},useRawValue:{propertyType:"member",type:"boolean",defaultValue:!1},rawLimitMin:{propertyType:"member",type:"number",defaultValue:0},rawLimitMax:{propertyType:"member",type:"number",defaultValue:100},useVariableLimits:{propertyType:"member",type:"boolean",defaultValue:!1},limits:{propertyType:"member",type:"any"},rawReferenceValue:{propertyType:"child",type:"number",child:"_rangeElement"},startAngle:{propertyType:"member",type:"number",defaultValue:-135},endAngle:{propertyType:"member",type:"number",defaultValue:135},backgroundUri:{propertyType:"member",type:"string"},rangeInnerRadius:{propertyType:"child",type:"string",child:"_rangeElement",childProperty:"innerRadius"},rangeOuterRadius:{propertyType:"child",type:"string",child:"_rangeElement",childProperty:"outerRadius"},showAllRanges:{propertyType:"child",type:"boolean",child:"_rangeElement",defaultValue:!0},scaleMode:{propertyType:"child",type:"string",child:"_scaleElement",childProperty:"mode"},scalePlacement:{propertyType:"child",type:"string",child:"_scaleElement",childProperty:"placement"},showScaleBaseLine:{propertyType:"child",type:"boolean",child:"_scaleElement",childProperty:"showBaseLine"},scaleLimitsVisibility:{propertyType:"child",type:"string",child:"_scaleElement",childProperty:"limitsVisibility"},scaleRadius:{propertyType:"child",type:"string",child:"_scaleElement",childProperty:"radius"},showMajorTicks:{propertyType:"child",type:"boolean",child:"_scaleElement"},majorStepSize:{propertyType:"child",type:"number",child:"_scaleElement"},majorSteps:{propertyType:"child",type:"number",child:"_scaleElement"},majorTicksLength:{propertyType:"child",type:"number",child:"_scaleElement"},majorTicksWidth:{propertyType:"child",type:"number",child:"_scaleElement"},showMiddleTicks:{propertyType:"child",type:"boolean",child:"_scaleElement"},middleStepSize:{propertyType:"child",type:"number",child:"_scaleElement"},middleSteps:{propertyType:"child",type:"number",child:"_scaleElement"},middleTicksLength:{propertyType:"child",type:"number",child:"_scaleElement"},middleTicksWidth:{propertyType:"child",type:"number",child:"_scaleElement"},showMinorTicks:{propertyType:"child",type:"boolean",child:"_scaleElement"},minorStepSize:{propertyType:"child",type:"number",child:"_scaleElement"},minorSteps:{propertyType:"child",type:"number",child:"_scaleElement"},minorTicksLength:{propertyType:"child",type:"number",child:"_scaleElement"},minorTicksWidth:{propertyType:"child",type:"number",child:"_scaleElement"},showMajorLabels:{propertyType:"child",type:"boolean",child:"_scaleElement"},majorLabelsFontClass:{propertyType:"child",type:"string",child:"_scaleElement"},majorLabelsFontSize:{propertyType:"child",type:"string",child:"_scaleElement"},majorLabelsFontWeight:{propertyType:"child",type:"string",child:"_scaleElement"},majorLabelsLineHeight:{propertyType:"child",type:"string",child:"_scaleElement"},majorLabelsTextContrast:{propertyType:"child",type:"number",child:"_scaleElement"},majorLabelsOffset:{propertyType:"child",type:"number",child:"_scaleElement"},majorLabelsDecimalPlaces:{propertyType:"child",type:"number",child:"_scaleElement"},indicatorUri:{propertyType:"child",type:"string",child:"_indicatorElement"},indicatorSize:{propertyType:"child",type:"string",child:"_indicatorElement"},backgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},rangeBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},scaleBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},disabledBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledBackgroundColor"},disabledRangeBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},disabledScaleBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},foregroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},majorTicksColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},middleTicksColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},minorTicksColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},disabledForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledForegroundColor"},indicatorBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},disabledIndicatorBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledForegroundColor"}},this._rangeElement=null,this._scaleElement=null,this._indicatorElement=null,this._limitsCollection=[],this._boundLimitsChangedHandler=this._limitsChangedHandler.bind(this);this.initialize(RadialInstrument,{cssClassPrefix:"vw"})}createTemplate(){let x=document.createElement("div");this.reparentChildren(this.element,x);return this.element.innerHTML='\n                <div data-ref-element="_rangeElement" class="vw-radialinstrument__range" data-win-control="VisiWin.UI.RadialRange"}"></div>\n                <div data-ref-element="_scaleElement" class="vw-radialinstrument__scale" data-win-control="VisiWin.UI.RadialScale"></div>\n                <div data-ref-element="_indicatorElement" class="vw-radialinstrument__indicator" data-win-control="VisiWin.UI.RadialIndicator"></div>',this.reparentChildren(x,this.element),this.initializeChilds()}registerChild(x,A,V,R){return A!==this.registerTargetId||(V&&V.winControl&&(V.style.display="none",this._limitsCollection.push(V.winControl),V.winControl.addEventListener("notifyPropertyChanged",this._boundLimitsChangedHandler)),!1)}_updateColors(x){this.disabled?(this._scaleElement.winControl.disabled=!0,this.setColor("disabledBackgroundColor","backgroundColor"),this._rangeElement&&this._rangeElement.winControl&&this.setColor("disabledRangeBackgroundColor","backgroundColor",null,"_rangeElement"),this._scaleElement&&this._scaleElement.winControl&&(this.setColor("disabledScaleBackgroundColor","backgroundColor",null,"_scaleElement"),this.setColor("disabledForegroundColor",null,null,"_scaleElement"),this.setColor("disabledForegroundColor","majorTicksColor",null,"_scaleElement"),this.setColor("disabledForegroundColor","middleTicksColor",null,"_scaleElement"),this.setColor("disabledForegroundColor","minorTicksColor",null,"_scaleElement")),this._indicatorElement&&this._indicatorElement.winControl&&this.setColor("disabledIndicatorBackgroundColor","backgroundColor",null,"_indicatorElement")):(this._scaleElement.winControl.disabled=!1,this.setColor("backgroundColor"),this._rangeElement&&this._rangeElement.winControl&&this.setColor("rangeBackgroundColor","backgroundColor",null,"_rangeElement"),this._scaleElement&&this._scaleElement.winControl&&(this.setColor("scaleBackgroundColor","backgroundColor",null,"_scaleElement"),this.setColor("foregroundColor",null,null,"_scaleElement"),this.setColor("majorTicksColor","majorTicksColor",null,"_scaleElement"),this.setColor("middleTicksColor","middleTicksColor",null,"_scaleElement"),this.setColor("minorTicksColor","minorTicksColor",null,"_scaleElement")),this._indicatorElement&&this._indicatorElement.winControl&&this.setColor("indicatorBackgroundColor","backgroundColor",null,"_indicatorElement"))}_updateLayout(x){if("firstUpdate"!==x.changeName&&"variableName"!==x.changeName||(this._rangeElement.winControl.variableName=this.variableName,this._scaleElement.winControl.variableName=this.variableName,this._indicatorElement.winControl.variableName=this.variableName),"firstUpdate"!==x.changeName&&"value"!==x.changeName||(this._rangeElement.winControl.value=this.value,this._scaleElement.winControl.value=this.value,this._indicatorElement.winControl.value=this.value),"firstUpdate"!==x.changeName&&"useRawValue"!==x.changeName||(this._rangeElement.winControl.useRawValue=this.useRawValue,this._scaleElement.winControl.useRawValue=this.useRawValue,this._indicatorElement.winControl.useRawValue=this.useRawValue),"firstUpdate"!==x.changeName&&"rawLimitMin"!==x.changeName||(this._rangeElement.winControl.rawLimitMin=this.rawLimitMin,this._scaleElement.winControl.rawLimitMin=this.rawLimitMin,this._indicatorElement.winControl.rawLimitMin=this.rawLimitMin),"firstUpdate"!==x.changeName&&"rawLimitMax"!==x.changeName||(this._rangeElement.winControl.rawLimitMax=this.rawLimitMax,this._scaleElement.winControl.rawLimitMax=this.rawLimitMax,this._indicatorElement.winControl.rawLimitMax=this.rawLimitMax),"firstUpdate"!==x.changeName&&"useVariableLimits"!==x.changeName||(this._rangeElement.winControl.useVariableLimits=this.useVariableLimits,this._scaleElement.winControl.useVariableLimits=this.useVariableLimits,this._indicatorElement.winControl.useVariableLimits=this.useVariableLimits),"firstUpdate"!==x.changeName&&"startAngle"!==x.changeName||(this._rangeElement.winControl.startAngle=this.startAngle,this._scaleElement.winControl.startAngle=this.startAngle,this._indicatorElement.winControl.startAngle=this.startAngle),"firstUpdate"!==x.changeName&&"endAngle"!==x.changeName||(this._rangeElement.winControl.endAngle=this.endAngle,this._scaleElement.winControl.endAngle=this.endAngle,this._indicatorElement.winControl.endAngle=this.endAngle),("firstUpdate"===x.changeName||"backgroundUri"===x.changeName)&&this.backgroundUri&&this.element){const x=`url('${this.backgroundUri}')`;this.element.style.backgroundImage=x}"initialized"===x.changeName&&(this.isInDesignMode&&0==this.value&&(this.value=40),this._limitsChangedHandler(null))}_limitsChangedHandler(x){if(this._limitsCollection&&this._limitsCollection.length){for(var A=[],V=0;V<this._limitsCollection.length;V++)A.push({startValue:this._limitsCollection[V].startValue,endValue:this._limitsCollection[V].endValue,innerRadius:this._limitsCollection[V].innerRadius,outerRadius:this._limitsCollection[V].outerRadius,fillColor:this._limitsCollection[V].fillColor});this._rangeElement&&this._rangeElement.winControl&&(this._rangeElement.winControl.limits=A)}else this._rangeElement&&this._rangeElement.winControl&&(this._rangeElement.winControl.limits=[])}dispose(){if(this._limitsCollection&&this._limitsCollection.length>0)for(var x=0;x<this._limitsCollection.length;x++)this._limitsCollection[x].removeEventListener("notifyPropertyChanged",this._boundLimitsChangedHandler);return this._limitsCollection=[],super.dispose()}}RadialInstrument.namespace="VisiWin.UI",RadialInstrument.controlName="RadialInstrument",RadialInstrument.className="vw-radialinstrument",A.RadialInstrument=RadialInstrument}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class RadioButton extends x.UI.RadioButtonBase{constructor(A,V){super(A,V),this._containerElement=null,this._outerCircleElement=null,this._innerCircleElement=null,this._labelElement=null,this.inputEventsEnable=!0,this.addPropertyList(RadioButton,RadioButton.propertyList),this.defaultConstructor(A,this.inlineOptions,x.UI.RadioButton.controlName,x.UI.RadioButton.className)}createTemplate(){if(x.Utilities.isInDesignMode())return this.element.innerHTML=['<div class="vw-radiobutton__container">','<div class="vw-radiobutton__outercircle">','<div class="vw-radiobutton__innercircle"></div>',"</div>",'<div class="vw-radiobutton__label" data-win-control="VisiWin.UI.TextBlock"></div>',"</div>"].join("\n"),this._containerElement=this.element.firstElementChild,this._outerCircleElement=this._containerElement.firstElementChild,this._innerCircleElement=this._outerCircleElement.firstElementChild,this._labelElement=this._outerCircleElement.nextElementSibling,this.processElements([this._labelElement]);var A=null!=this.inlineOptions.showLabel?this.inlineOptions.showLabel:this.getStyleProperty("showLabel")?this.getStyleProperty("showLabel"):x.UI.RadioButton.propertyList.showLabel.defaultValue,V='<div class="vw-radiobutton__container">';return V+=['<div class="vw-radiobutton__outercircle">','<div class="vw-radiobutton__innercircle"></div >',"</div>"].join("\n"),A&&(V+='<div class="vw-radiobutton__label" data-win-control="VisiWin.UI.TextBlock"></div>'),V+="</div>",this.element.innerHTML=V,this._containerElement=this.element.firstElementChild,this._outerCircleElement=this._containerElement.firstElementChild,this._innerCircleElement=this._outerCircleElement.firstElementChild,A&&(this._labelElement=this._outerCircleElement.nextElementSibling),this.processElements([this._labelElement])}_updateColors(x){this.disabled?(this._labelElement&&this._labelElement.winControl&&this.setColor("disabledForegroundColor","foregroundColor",null,"_labelElement"),this.setColor("disabledBackgroundColor","backgroundColor"),this.setColor("disabledBorderColor","borderColor"),this._containerElement.style.backgroundColor="",this.checked?(this.setColor("disabledCheckedOuterCircleBackgroundColor","backgroundColor","_outerCircleElement"),this.setColor("disabledCheckedOuterCircleBorderColor","borderColor","_outerCircleElement"),this.setColor("disabledCheckedInnerCircleBackgroundColor","backgroundColor","_innerCircleElement"),this.setColor("disabledCheckedInnerCircleBorderColor","borderColor","_innerCircleElement")):(this.setColor("disabledOuterCircleBackgroundColor","backgroundColor","_outerCircleElement"),this.setColor("disabledOuterCircleBorderColor","borderColor","_outerCircleElement"),this.setColor("disabledInnerCircleBackgroundColor","backgroundColor","_innerCircleElement"),this.setColor("disabledInnerCircleBorderColor","borderColor","_innerCircleElement"))):this.checked?(this._labelElement&&this._labelElement.winControl&&this.setColor("checkedForegroundColor","foregroundColor",null,"_labelElement"),this.setColor("checkedBackgroundColor","backgroundColor"),this.pressed?(this._labelElement&&this._labelElement.winControl&&this.setColor("checkedPressedForegroundColor","foregroundColor",null,"_labelElement"),this.setColor("checkedPressedBackgroundColor","backgroundColor","_containerElement"),this.setColor("checkedPressedOuterCircleBackgroundColor","backgroundColor","_outerCircleElement"),this.setColor("checkedPressedOuterCircleBorderColor","borderColor","_outerCircleElement"),this.setColor("checkedPressedInnerCircleBackgroundColor","backgroundColor","_innerCircleElement"),this.setColor("checkedPressedInnerCircleBorderColor","borderColor","_innerCircleElement")):this.hover?(this.setColor("checkedHoverBorderColor","borderColor"),this.setColor("checkedHoverBackgroundColor","backgroundColor","_containerElement"),this.setColor("checkedHoverForegroundColor","foregroundColor","_labelElement"),this.setColor("checkedHoverOuterCircleBackgroundColor","backgroundColor","_outerCircleElement"),this.setColor("checkedHoverOuterCircleBorderColor","borderColor","_outerCircleElement"),this.setColor("checkedHoverInnerCircleBackgroundColor","backgroundColor","_innerCircleElement"),this.setColor("checkedHoverInnerCircleBorderColor","borderColor","_innerCircleElement")):(this.setColor("checkedBorderColor","borderColor"),this._containerElement.style.backgroundColor="",this.setColor("checkedForegroundColor","foregroundColor","_labelElement"),this.setColor("checkedOuterCircleBackgroundColor","backgroundColor","_outerCircleElement"),this.setColor("checkedOuterCircleBorderColor","borderColor","_outerCircleElement"),this.setColor("checkedInnerCircleBackgroundColor","backgroundColor","_innerCircleElement"),this.setColor("checkedInnerCircleBorderColor","borderColor","_innerCircleElement"))):(this._labelElement&&this._labelElement.winControl&&this.setColor("foregroundColor","foregroundColor",null,"_labelElement"),this.setColor("backgroundColor"),this.pressed?(this._labelElement&&this._labelElement.winControl&&this.setColor("pressedForegroundColor","foregroundColor",null,"_labelElement"),this.setColor("pressedBackgroundColor","backgroundColor","_containerElement"),this.setColor("pressedOuterCircleBackgroundColor","backgroundColor","_outerCircleElement"),this.setColor("pressedOuterCircleBorderColor","borderColor","_outerCircleElement"),this.setColor("pressedInnerCircleBackgroundColor","backgroundColor","_innerCircleElement"),this.setColor("pressedInnerCircleBorderColor","borderColor","_innerCircleElement")):this.hover?(this.setColor("hoverBorderColor","borderColor"),this.setColor("hoverBackgroundColor","backgroundColor","_containerElement"),this.setColor("hoverForegroundColor","foregroundColor","_labelElement"),this.setColor("hoverOuterCircleBackgroundColor","backgroundColor","_outerCircleElement"),this.setColor("hoverOuterCircleBorderColor","borderColor","_outerCircleElement"),this.setColor("hoverInnerCircleBackgroundColor","backgroundColor","_innerCircleElement"),this.setColor("hoverInnerCircleBorderColor","borderColor","_innerCircleElement")):(this.setColor("borderColor","borderColor"),this._containerElement.style.backgroundColor="",this.setColor("foregroundColor","foregroundColor","_labelElement"),this.setColor("outerCircleBackgroundColor","backgroundColor","_outerCircleElement"),this.setColor("outerCircleBorderColor","borderColor","_outerCircleElement"),this.setColor("innerCircleBackgroundColor","backgroundColor","_innerCircleElement"),this.setColor("innerCircleBorderColor","borderColor","_innerCircleElement")))}_updateLayout(x){if("updateLayout"!=x.changeName&&"text"!=x.changeName||this._labelElement&&this._labelElement.winControl&&(this.checked?this.textOn?this._labelElement.winControl.text=this.textOn:this._labelElement.winControl.text=this.text:this.checked?this._labelElement.winControl.text=this.text:this.textOff?this._labelElement.winControl.text=this.textOff:this._labelElement.winControl.text=this.text),"updateLayout"==x.changeName||"labelPosition"==x.changeName)switch(this.labelPosition){case"Left":this._containerElement.style.flexDirection="row-reverse";break;case"Right":this._containerElement.style.flexDirection="row"}}dispose(){return super.dispose()}}RadioButton.namespace="VisiWin.UI",RadioButton.controlName="RadioButton",RadioButton.className="vw-radiobutton",RadioButton.propertyList={designerType:{propertyType:"base",type:"string",defaultValue_DM:"Control"},rippleTarget:{propertyType:"base",type:"string",defaultValue:"_outerCircleElement"},outerCircleBorderWidth:{propertyType:"style",type:"string",element:"_outerCircleElement",style:"borderWidth"},outerCircleBorderStyle:{propertyType:"style",type:"enum",element:"_outerCircleElement",style:"borderStyle"},outerCircleBorderRadius:{propertyType:"style",type:"string",element:"_outerCircleElement",style:"borderRadius"},outerCircleWidth:{propertyType:"style",type:"string",element:"_outerCircleElement",style:"width"},outerCircleHeight:{propertyType:"style",type:"string",element:"_outerCircleElement",style:"height"},outerCircleMargin:{propertyType:"style",type:"string",element:"_outerCircleElement",style:"margin"},outerCirclePadding:{propertyType:"style",type:"string",element:"_outerCircleElement",style:"padding"},innerCircleBorderWidth:{propertyType:"style",type:"string",element:"_innerCircleElement",style:"borderWidth"},innerCircleBorderStyle:{propertyType:"style",type:"enum",element:"_innerCircleElement",style:"borderStyle"},innerCircleBorderRadius:{propertyType:"style",type:"string",element:"_innerCircleElement",style:"borderRadius"},innerCircleWidth:{propertyType:"style",type:"string",element:"_innerCircleElement",style:"width"},innerCircleHeight:{propertyType:"style",type:"string",element:"_innerCircleElement",style:"height"},innerCircleMargin:{propertyType:"style",type:"string",element:"_innerCircleElement",style:"margin"},innerCirclePadding:{propertyType:"style",type:"string",element:"_innerCircleElement",style:"padding"},showLabel:{propertyType:"child",type:"boolean",child:"_labelElement",childProperty:"show",defaultValue:!0},labelWidth:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"width"},labelHeight:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"height"},labelMargin:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"margin"},labelPadding:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"padding"},useVariableText:{propertyType:"base",type:"boolean"},labelText:{propertyType:"clone",type:"string",forceOverwrite:!0,cloneProperty:"text",defaultValue:"RadioButton"},localizableLabelText:{propertyType:"clone",type:"string",forceOverwrite:!0,cloneProperty:"localizableText"},labelTextOn:{propertyType:"clone",type:"string",cloneProperty:"textOn"},localizableLabelTextOn:{propertyType:"clone",type:"string",cloneProperty:"localizableTextOn"},labelTextOff:{propertyType:"clone",type:"string",cloneProperty:"textOff"},localizableLabelTextOff:{propertyType:"clone",type:"string",cloneProperty:"localizableTextOff"},labelTextAlignment:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"textAlignment"},labelLineClamp:{propertyType:"child",type:"number",child:"_labelElement",childProperty:"lineClamp"},labelTextWrapping:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"textWrapping"},labelTextTrimming:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"textTrimming"},labelFontClass:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"fontClass"},labelFontSize:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"fontSize"},labelFontWeight:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"fontWeight"},labelLineHeight:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"lineHeight"},labelTextContrast:{propertyType:"child",type:"number",child:"_labelElement",childProperty:"textContrast"},labelUppercase:{propertyType:"child",type:"boolean",child:"_labelElement",childProperty:"uppercase"},labelPosition:{propertyType:"member",type:"string",defaultValue:"Right"},backgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},hoverBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},pressedBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},checkedBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BackgroundColor"},checkedHoverBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},checkedPressedBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},disabledBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledBackgroundColor"},foregroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},hoverForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},pressedForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},checkedForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},checkedHoverForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},checkedPressedForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},disabledForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledForegroundColor"},borderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"},hoverBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@HoverBorderColor"},checkedBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@CheckedBorderColor"},checkedHoverBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@CheckedHoverBorderColor"},disabledBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledBorderColor"},outerCircleBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},hoverOuterCircleBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},pressedOuterCircleBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},checkedOuterCircleBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},checkedHoverOuterCircleBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},checkedPressedOuterCircleBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},disabledOuterCircleBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},disabledCheckedOuterCircleBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},outerCircleBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},hoverOuterCircleBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},pressedOuterCircleBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},checkedOuterCircleBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},checkedHoverOuterCircleBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},checkedPressedOuterCircleBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},disabledOuterCircleBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledForegroundColor"},disabledCheckedOuterCircleBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledForegroundColor"},innerCircleBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},hoverInnerCircleBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},pressedInnerCircleBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},checkedInnerCircleBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@CheckedBackgroundColor"},checkedHoverInnerCircleBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@CheckedBackgroundColor"},checkedPressedInnerCircleBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@CheckedBackgroundColor"},disabledInnerCircleBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},disabledCheckedInnerCircleBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledForegroundColor"},innerCircleBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},hoverInnerCircleBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},pressedInnerCircleBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},checkedInnerCircleBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},checkedHoverInnerCircleBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},checkedPressedInnerCircleBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},disabledInnerCircleBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledForegroundColor"},disabledCheckedInnerCircleBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledForegroundColor"}},A.RadioButton=RadioButton}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class Group extends x.UI.ControlBase{constructor(A,V){super(A,V),this._containerElement=null,this._titleElement=null,this._subtitleElement=null,this.addPropertyList(Group,Group.propertyList),this.defaultConstructor(A,this.inlineOptions,x.UI.Group.controlName,x.UI.Group.className)}createTemplate(){if(x.Utilities.isInDesignMode())return this._containerElement=document.createElement("div"),x.Utilities.addClass(this._containerElement,"vw-group__container"),x.Utilities.reparentChildren(this.element,this._containerElement),this.element.innerHTML=['<div class="vw-group__title" data-win-control="VisiWin.UI.TextBlock"></div>','<div class="vw-group__subtitle" data-win-control="VisiWin.UI.TextBlock"></div>'].join("\n"),this._titleElement=this.element.firstElementChild,this._subtitleElement=this._titleElement.nextElementSibling,this.element.appendChild(this._containerElement),this.processElements([this._titleElement,this._subtitleElement]);var A=null!=this.inlineOptions.showTitle?this.inlineOptions.showTitle:this.getStyleProperty("showTitle")?this.getStyleProperty("showTitle"):x.UI.Group.propertyList.showTitle.defaultValue,V=null!=this.inlineOptions.showSubtitle?this.inlineOptions.showSubtitle:this.getStyleProperty("showSubtitle")?this.getStyleProperty("showSubtitle"):x.UI.Group.propertyList.showSubtitle.defaultValue,R="";return this._containerElement=document.createElement("div"),x.Utilities.addClass(this._containerElement,"vw-group__container"),x.Utilities.reparentChildren(this.element,this._containerElement),A&&(R+='<div class="vw-group__title" data-win-control="VisiWin.UI.TextBlock"></div>'),V&&(R+='<div class="vw-group__subtitle" data-win-control="VisiWin.UI.TextBlock"></div>'),this.element.innerHTML=R,A?(this._titleElement=this.element.firstElementChild,V&&(this._subtitleElement=this._titleElement.nextElementSibling)):V&&(this._subtitleElement=this.element.firstElementChild),this.element.appendChild(this._containerElement),this.processElements([this._titleElement,this._subtitleElement])}_updateColors(x){this.disabled?(this.setColor("disabledBackgroundColor","backgroundColor"),this.setColor("disabledBorderColor","borderColor"),this._titleElement&&this._titleElement.winControl&&this.setColor("disabledTitleForegroundColor","foregroundColor",null,"_titleElement"),this._subtitleElement&&this._subtitleElement.winControl&&this.setColor("disabledSubtitleForegroundColor","foregroundColor",null,"_subtitleElement")):(this.setColor("backgroundColor"),this.setColor("borderColor"),this._titleElement&&this._titleElement.winControl&&this.setColor("titleForegroundColor","foregroundColor",null,"_titleElement"),this._subtitleElement&&this._subtitleElement.winControl&&this.setColor("subtitleForegroundColor","foregroundColor",null,"_subtitleElement"))}_updateLayout(x){if("updateLayout"==x.changeName||"orientation"==x.changeName)switch(this.orientation){case"Vertical":this._containerElement.style.flexDirection="column";break;case"VerticalReverse":this._containerElement.style.flexDirection="column-reverse";break;case"HorizontalReverse":this._containerElement.style.flexDirection="row-reverse";break;default:this._containerElement.style.flexDirection="row"}if("updateLayout"==x.changeName||"alignItems"==x.changeName)switch(this.alignItems){case"Center":this._containerElement.style.alignItems="center";break;case"Start":this._containerElement.style.alignItems="flex-start";break;case"End":this._containerElement.style.alignItems="flex-end";break;case"Baseline":this._containerElement.style.alignItems="baseline";break;default:this._containerElement.style.alignItems="stretch"}if("updateLayout"==x.changeName||"justifyContent"==x.changeName)switch(this.justifyContent){case"End":this._containerElement.style.justifyContent="flex-end";break;case"Center":this._containerElement.style.justifyContent="center";break;case"Space-between":this._containerElement.style.justifyContent="space-between";break;case"Space-around":this._containerElement.style.justifyContent="space-around";break;case"Space-evenly":this._containerElement.style.justifyContent="space-evenly";break;default:this._containerElement.style.justifyContent="flex-start"}if("updateLayout"==x.changeName||"alignContent"==x.changeName)switch(this.alignContent){case"Center":this._containerElement.style.alignContent="center";break;case"Start":this._containerElement.style.alignContent="flex-start";break;case"End":this._containerElement.style.alignContent="flex-end";break;case"Space-between":this._containerElement.style.alignContent="space-between";break;case"Space-around":this._containerElement.style.alignContent="space-around";break;default:this._containerElement.style.alignContent="stretch"}"updateLayout"!=x.changeName&&"wrap"!=x.changeName||(this._containerElement.style.flexWrap=this.wrap?"wrap":"nowrap")}dispose(){return super.dispose()}}Group.namespace="VisiWin.UI",Group.controlName="Group",Group.className="vw-group",Group.propertyList={designerType:{propertyType:"base",type:"string",defaultValue:"ContentControl"},orientation:{propertyType:"member",type:"string",defaultValue:"Vertical"},alignItems:{propertyType:"member",type:"string",defaultValue:"Start"},justifyContent:{propertyType:"member",type:"string",defaultValue:"Start"},alignContent:{propertyType:"member",type:"string",defaultValue:"Start"},wrap:{propertyType:"member",type:"boolean",defaultValue:!1},showTitle:{propertyType:"child",type:"boolean",child:"_titleElement",childProperty:"show",defaultValue:!0},titleWidth:{propertyType:"child",type:"string",child:"_titleElement",childProperty:"width"},titleHeight:{propertyType:"child",type:"string",child:"_titleElement",childProperty:"height"},titleMargin:{propertyType:"child",type:"string",child:"_titleElement",childProperty:"margin"},titlePadding:{propertyType:"child",type:"string",child:"_titleElement",childProperty:"padding"},titleText:{propertyType:"child",type:"string",child:"_titleElement",childProperty:"text",defaultValue:"Title"},localizableTitleText:{propertyType:"child",type:"string",child:"_titleElement",childProperty:"localizableText"},titleTextAlignment:{propertyType:"child",type:"string",child:"_titleElement",childProperty:"textAlignment"},titleLineClamp:{propertyType:"child",type:"number",child:"_titleElement",childProperty:"lineClamp"},titleTextWrapping:{propertyType:"child",type:"string",child:"_titleElement",childProperty:"textWrapping"},titleTextTrimming:{propertyType:"child",type:"string",child:"_titleElement",childProperty:"textTrimming"},titleFontClass:{propertyType:"child",type:"string",child:"_titleElement",childProperty:"fontClass",defaultValue:"Title"},titleFontSize:{propertyType:"child",type:"string",child:"_titleElement",childProperty:"fontSize"},titleFontWeight:{propertyType:"child",type:"string",child:"_titleElement",childProperty:"fontWeight"},titleLineHeight:{propertyType:"child",type:"string",child:"_titleElement",childProperty:"lineHeight"},titleTextContrast:{propertyType:"child",type:"number",child:"_titleElement",childProperty:"textContrast"},titleUppercase:{propertyType:"child",type:"boolean",child:"_titleElement",childProperty:"uppercase"},showSubtitle:{propertyType:"child",type:"boolean",child:"_subtitleElement",childProperty:"show",defaultValue:!1},subtitleWidth:{propertyType:"child",type:"string",child:"_subtitleElement",childProperty:"width"},subtitleHeight:{propertyType:"child",type:"string",child:"_subtitleElement",childProperty:"height"},subtitleMargin:{propertyType:"child",type:"string",child:"_subtitleElement",childProperty:"margin"},subtitlePadding:{propertyType:"child",type:"string",child:"_subtitleElement",childProperty:"padding"},subtitleText:{propertyType:"child",type:"string",child:"_subtitleElement",childProperty:"text",defaultValue:"Subtitle"},localizableSubtitleText:{propertyType:"child",type:"string",child:"_subtitleElement",childProperty:"localizableText"},subtitleTextAlignment:{propertyType:"child",type:"string",child:"_subtitleElement",childProperty:"textAlignment"},subtitleLineClamp:{propertyType:"child",type:"number",child:"_subtitleElement",childProperty:"lineClamp"},subtitleTextWrapping:{propertyType:"child",type:"string",child:"_subtitleElement",childProperty:"textWrapping"},subtitleTextTrimming:{propertyType:"child",type:"string",child:"_subtitleElement",childProperty:"textTrimming"},subtitleFontClass:{propertyType:"child",type:"string",child:"_subtitleElement",childProperty:"fontClass",defaultValue:"Subtitle2"},subtitleFontSize:{propertyType:"child",type:"string",child:"_subtitleElement",childProperty:"fontSize"},subtitleFontWeight:{propertyType:"child",type:"string",child:"_subtitleElement",childProperty:"fontWeight"},subtitleLineHeight:{propertyType:"child",type:"string",child:"_subtitleElement",childProperty:"lineHeight"},subtitleTextContrast:{propertyType:"child",type:"number",child:"_subtitleElement",childProperty:"textContrast"},subtitleUppercase:{propertyType:"child",type:"boolean",child:"_subtitleElement",childProperty:"uppercase"},backgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BackgroundColor"},borderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"},titleForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},subtitleForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},disabledBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledBackgroundColor"},disabledBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledBorderColor"},disabledTitleForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledForegroundColor"},disabledSubtitleForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledForegroundColor"}},A.Group=Group}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class Slider extends x.UI.ControlBase{constructor(A,V){super(A,V),this._valueLabelElement=null,this._containerElement=null,this._minMaxContainerElement=null,this._minLabelElement=null,this._minMaxSpacerElement=null,this._maxLabelElement=null,this._sliderCoreContainerElement=null,this._sliderCoreElement=null,this._minMaxDividerElement=null,this._boundThumbPositionChangedHandler=this._thumbPositionChangedHandler.bind(this),this.observe={"_sliderCoreElement.winControl.varLimitMin":function(x){this._updateLayoutBase("property","varLimitMin",x.newValue,x.oldValue)},"_sliderCoreElement.winControl.varLimitMax":function(x){this._updateLayoutBase("property","varLimitMax",x.newValue,x.oldValue)},"_sliderCoreElement.winControl.pressed":function(x){this._updateLayoutBase("property","pressed",x.newValue,x.oldValue)},"_sliderCoreElement.winControl.unitText":function(x){this._valueLabelElement&&this._valueLabelElement.winControl&&(this._valueLabelElement.winControl.unitText=x.newValue)},disabled:function(x){this._sliderCoreElement&&this._sliderCoreElement.winControl&&(this._sliderCoreElement.winControl.disabled=x.newValue)}},this.addPropertyList(Slider,Slider.propertyList),this.defaultConstructor(A,this.inlineOptions,x.UI.Slider.controlName,x.UI.Slider.className)}createTemplate(){return this.element.innerHTML=['<div class="vw-slider__valuelabel" data-win-control="VisiWin.UI.ValuePresenter"></div>','<div class="vw-slider__container">','<div class="vw-slider__minmaxcontainer">','<div class="vw-slider__minlabel" data-win-control="VisiWin.UI.TextBlock"></div>','<div class="vw-slider__minmaxspacer" data-win-control="VisiWin.UI.Spacer"></div>','<div class="vw-slider__maxlabel" data-win-control="VisiWin.UI.TextBlock"></div>',"</div>",'<div class="vw-slider__corecontainer">','<div class="vw-slider__core" data-win-control="VisiWin.UI.SliderCore"></div>',"</div>",'<div class="vw-slider__minmaxdivider"></div>',"</div>"].join("\n"),this._valueLabelElement=this.element.firstElementChild,this._containerElement=this._valueLabelElement.nextElementSibling,this._minMaxContainerElement=this._containerElement.firstElementChild,this._minLabelElement=this._minMaxContainerElement.firstElementChild,this._minMaxSpacerElement=this._minLabelElement.nextElementSibling,this._maxLabelElement=this._minMaxSpacerElement.nextElementSibling,this._sliderCoreContainerElement=this._minMaxContainerElement.nextElementSibling,this._sliderCoreElement=this._sliderCoreContainerElement.firstElementChild,this._minMaxDividerElement=this._sliderCoreContainerElement.nextElementSibling,this.processElements([this._valueLabelElement,this._minLabelElement,this._minMaxSpacerElement,this._maxLabelElement,this._sliderCoreElement])}createHandler(){this._sliderCoreElement&&this._sliderCoreElement.winControl&&this._sliderCoreElement.winControl.addEventListener("thumbPositionChanged",this._boundThumbPositionChangedHandler,!1)}removeHandler(){this._sliderCoreElement&&this._sliderCoreElement.winControl&&this._sliderCoreElement.winControl.removeEventListener("thumbPositionChanged",this._boundThumbPositionChangedHandler,!1)}onLanguageChanged(x){this._updateLayoutBase("event","onLanguageChanged",x.newValue,x.oldValue)}afterInit(){this._sliderCoreElement.winControl.touchElement=this._containerElement}_updateColors(x){this.disabled?(this.setColor("disabledBackgroundColor","backgroundColor"),this.setColor("disabledBorderColor","borderColor"),this._minLabelElement&&this._minLabelElement.winControl&&this.setColor("disabledForegroundColor","foregroundColor",null,"_minLabelElement"),this._maxLabelElement&&this._maxLabelElement.winControl&&this.setColor("disabledForegroundColor","foregroundColor",null,"_maxLabelElement"),this._valueLabelElement&&this._valueLabelElement.winControl&&(this.setColor("disabledBackgroundColor","backgroundColor",null,"_valueLabelElement"),this.setColor("disabledBackgroundColor","valueBackgroundColor",null,"_valueLabelElement"),this.setColor("disabledBackgroundColor","unitBackgroundColor",null,"_valueLabelElement"),this.setColor("disabledForegroundColor","valueForegroundColor",null,"_valueLabelElement"),this.setColor("disabledForegroundColor","unitForegroundColor",null,"_valueLabelElement"),this.setColor("disabledBorderColor","borderColor",null,"_valueLabelElement"))):(this.setColor("backgroundColor","backgroundColor"),this.setColor("borderColor","borderColor"),this._minLabelElement&&this._minLabelElement.winControl&&this.setColor("minLabelForegroundColor","foregroundColor",null,"_minLabelElement"),this._maxLabelElement&&this._maxLabelElement.winControl&&this.setColor("maxLabelForegroundColor","foregroundColor",null,"_maxLabelElement"),this._valueLabelElement&&this._valueLabelElement.winControl&&(this.setColor("valueLabelBackgroundColor","backgroundColor",null,"_valueLabelElement"),this.setColor("valueBackgroundColor","valueBackgroundColor",null,"_valueLabelElement"),this.setColor("unitBackgroundColor","unitBackgroundColor",null,"_valueLabelElement"),this.setColor("valueForegroundColor","valueForegroundColor",null,"_valueLabelElement"),this.setColor("unitForegroundColor","unitForegroundColor",null,"_valueLabelElement"),this.setColor("valueLabelBorderColor","borderColor",null,"_valueLabelElement")))}_updateLayout(A){var V;"varRawLimitMin"!=A.changeName&&"varRawLimitMax"!=A.changeName&&"updateLayout"!=A.changeName&&"onLanguageChanged"!=A.changeName&&"variableName"!=A.changeName&&"useRawValue"!=A.changeName&&"rawLimitMin"!=A.changeName&&"rawLimitMax"!=A.changeName&&"useVariableLimits"!=A.changeName&&"varLimitMin"!=A.changeName&&"varLimitMax"!=A.changeName||this._sliderCoreElement&&this._sliderCoreElement.winControl&&((V=this._sliderCoreElement.winControl).thumbShadow=this.thumbShadow,this._minLabelElement&&this._minLabelElement.winControl&&(this._minLabelElement.winControl.text=V.useVariableLimits&&V.varRawLimitMin?V.useRawValue?V.varRawLimitMin:V.rawValue2value(V.varRawLimitMin):V.useRawValue?V.rawLimitMin:V.rawValue2value(V.rawLimitMin)),this._maxLabelElement&&this._minLabelElement.winControl&&(this._maxLabelElement.winControl.text=V.useVariableLimits&&V.varRawLimitMax?V.useRawValue?V.varRawLimitMax:V.rawValue2value(V.varRawLimitMax):V.useRawValue?V.rawLimitMax:V.rawValue2value(V.rawLimitMax)),(x.isNullOrEmpty(V.varRawLimitMin)||x.isNullOrEmpty(V.varRawLimitMax))&&V.useVariableLimits&&(this._minLabelElement&&this._minLabelElement.winControl&&(this._minLabelElement.winControl.text=V.varLimitMin),this._maxLabelElement&&this._minLabelElement.winControl&&(this._maxLabelElement.winControl.text=V.varLimitMax)));"updateLayout"!=A.changeName&&"thumbShadow"!=A.changeName||this._sliderCoreElement&&this._sliderCoreElement.winControl&&((V=this._sliderCoreElement.winControl).thumbShadow=this.thumbShadow);if("updateLayout"!=A.changeName&&"trackThickness"!=A.changeName&&"orientation"!=A.changeName||(this._sliderCoreContainerElement.style.width="Horizontal"==this.orientation?"100%":"auto",this._sliderCoreContainerElement.style.height="Horizontal"==this.orientation?"auto":"100%",this._sliderCoreElement.winControl.trackThickness=this.trackThickness,this._sliderCoreElement.winControl.width="Vertical"==this.orientation?this.trackThickness:"100%",this._sliderCoreElement.winControl.height="Vertical"==this.orientation?"100%":this.trackThickness),"updateLayout"!=A.changeName&&"minMaxLabelThickness"!=A.changeName&&"orientation"!=A.changeName&&"orientationReversed"!=A.changeName||(this._minMaxContainerElement.style.width=this._minMaxDividerElement.style.width="Horizontal"==this.orientation?"100%":this.minMaxLabelThickness,this._minMaxContainerElement.style.height=this._minMaxDividerElement.style.height="Horizontal"==this.orientation?this.minMaxLabelThickness:"100%",this._minMaxContainerElement.style.flexDirection="Horizontal"==this.orientation?this.orientationReversed?"row-reverse":"row":this.orientationReversed?"column":"column-reverse"),"updateLayout"!=A.changeName&&"minMaxLabelPosition"!=A.changeName&&"orientation"!=A.changeName||(this._containerElement.style.width="Horizontal"==this.orientation?"100%":"auto",this._containerElement.style.height="Horizontal"==this.orientation?"auto":"100%",this._containerElement.style.flexDirection="Horizontal"==this.orientation?"Left"==this.minMaxLabelPosition||"Top"==this.minMaxLabelPosition?"column":"column-reverse":"Left"==this.minMaxLabelPosition||"Top"==this.minMaxLabelPosition?"row":"row-reverse"),"updateLayout"==A.changeName||"minMaxLabelAlignItems"==A.changeName)switch(this.minMaxLabelAlignItems){case"End":this._minMaxContainerElement.style.alignItems="flex-end";break;case"Center":this._minMaxContainerElement.style.alignItems="center";break;case"Baseline":this._minMaxContainerElement.style.alignItems="baseline";break;case"Stretch":this._minMaxContainerElement.style.alignItems="stretch";break;default:this._minMaxContainerElement.style.alignItems="flex-start"}if("updateLayout"==A.changeName||"minMaxLabelJustifyContent"==A.changeName)switch(this.minMaxLabelJustifyContent){case"End":this._minMaxContainerElement.style.justifyContent="flex-end";break;case"Center":this._minMaxContainerElement.style.justifyContent="center";break;case"Space-between":this._minMaxContainerElement.style.justifyContent="space-between";break;case"Space-around":this._minMaxContainerElement.style.justifyContent="space-around";break;case"Space-evenly":this._minMaxContainerElement.style.justifyContent="space-evenly";break;default:this._minMaxContainerElement.style.justifyContent="flex-start"}if("updateLayout"!=A.changeName&&"showValueLabel"!=A.changeName||(this._valueLabelElement.style.display=this.showValueLabel?"flex":"none"),"updateLayout"!==A.changeName&&"valueLabelPosition"!==A.changeName&&"orientation"!==A.changeName||"Horizontal"!==this.orientation&&"Vertical"!==this.orientation||("Left"===this.valueLabelPosition?this.element.style.flexDirection="row":"Right"===this.valueLabelPosition?this.element.style.flexDirection="row-reverse":"Top"===this.valueLabelPosition?this.element.style.flexDirection="column":"Bottom"===this.valueLabelPosition&&(this.element.style.flexDirection="column-reverse")),"updateLayout"!=A.changeName&&"valueLabelPosition"!=A.changeName&&"pressed"!=A.changeName||("Thumb"==this.valueLabelPosition?(this._valueLabelElement.style.position="absolute",this._valueLabelElement&&this._valueLabelElement.winControl&&this._sliderCoreElement&&this._sliderCoreElement.winControl&&(this._sliderCoreElement.winControl.pressed?this._valueLabelElement.winControl.opacity=1:this._valueLabelElement.winControl.opacity=0)):(this._valueLabelElement.style.position="relative",this._valueLabelElement.winControl.opacity="",this._valueLabelElement.winControl.left="",this._valueLabelElement.winControl.top="")),"updateLayout"==A.changeName||"alignItems"==A.changeName)switch(this.alignItems){case"Center":this.element.style.alignItems="center";break;case"Start":this.element.style.alignItems="flex-start";break;case"End":this.element.style.alignItems="flex-end";break;case"Baseline":this.element.style.alignItems="baseline";break;default:this.element.style.alignItems="stretch"}if("updateLayout"==A.changeName||"justifyContent"==A.changeName)switch(this.justifyContent){case"End":this.element.style.justifyContent="flex-end";break;case"Center":this.element.style.justifyContent="center";break;case"Space-between":this.element.style.justifyContent="space-between";break;case"Space-around":this.element.style.justifyContent="space-around";break;case"Space-evenly":this.element.style.justifyContent="space-evenly";break;default:this.element.style.justifyContent="flex-start"}}_thumbPositionChangedHandler(x){if(this._valueLabelElement&&this._valueLabelElement.winControl&&this._sliderCoreElement&&this._sliderCoreElement.winControl){if("Thumb"==this.valueLabelPosition){var A=window.getComputedStyle(this._valueLabelElement,null),V=(parseFloat(A.getPropertyValue("margin-left")),parseFloat(A.getPropertyValue("margin-top")),parseFloat(A.getPropertyValue("margin-right")),parseFloat(A.getPropertyValue("margin-bottom"))),R=this.element.getBoundingClientRect(),D=this._sliderCoreElement.getBoundingClientRect(),N="Horizontal"==this.orientation?D.left-R.left+x.detail.posX-this._valueLabelElement.offsetWidth/2:(R.width-this._valueLabelElement.offsetWidth)/2-this._valueLabelElement.offsetWidth,U="Horizontal"==this.orientation?(R.height-this._valueLabelElement.offsetHeight)/2-this._valueLabelElement.offsetHeight-V:D.top-R.top+x.detail.posY-this._valueLabelElement.offsetHeight/2-V;this._valueLabelElement.winControl.left=N+"px",this._valueLabelElement.winControl.top=U+"px"}this._valueLabelElement.winControl.value=x.detail.value}this.dispatchEvent("thumbPositionChanged",x)}dispose(){return super.dispose()}}Slider.namespace="VisiWin.UI",Slider.controlName="Slider",Slider.className="vw-slider",Slider.propertyList={designerType:{propertyType:"base",type:"string",defaultValue:"Control"},thumbPositionChanged:{propertyType:"event",group:"Event"},pressed:{propertyType:"child",type:"boolean",child:"_sliderCoreElement"},variableName:{propertyType:"child",type:"string",child:"_sliderCoreElement"},decimalPlaces:{propertyType:"child",type:"number",child:"_sliderCoreElement"},useRawValue:{propertyType:"child",type:"boolean",child:"_sliderCoreElement"},rawLimitMin:{propertyType:"child",type:"number",child:"_sliderCoreElement"},rawLimitMax:{propertyType:"child",type:"number",child:"_sliderCoreElement"},useVariableLimits:{propertyType:"child",type:"boolean",child:"_sliderCoreElement"},alignItems:{propertyType:"member",type:"string",defaultValue:"Center"},justifyContent:{propertyType:"member",type:"string",defaultValue:"Center"},step:{propertyType:"child",type:"number",child:"_sliderCoreElement"},immediate:{propertyType:"child",type:"boolean",child:"_sliderCoreElement"},orientation:{propertyType:"child",type:"string",child:"_sliderCoreElement"},orientationReversed:{propertyType:"child",type:"boolean",child:"_sliderCoreElement"},trackThickness:{propertyType:"member",type:"string",defaultValue:"6px"},trackBorderRadius:{propertyType:"child",type:"string",child:"_sliderCoreElement"},sliderContainerWidth:{propertyType:"style",type:"string",element:"_sliderCoreContainerElement",style:"width"},sliderContainerHeight:{propertyType:"style",type:"string",element:"_sliderCoreContainerElement",style:"height"},sliderContainerMargin:{propertyType:"style",type:"string",element:"_sliderCoreContainerElement",style:"margin"},sliderContainerPadding:{propertyType:"style",type:"string",element:"_sliderCoreContainerElement",style:"padding"},minValue:{propertyType:"child",type:"number",child:"_sliderCoreElement"},maxValue:{propertyType:"child",type:"number",child:"_sliderCoreElement"},thumbBorderWidth:{propertyType:"child",type:"string",child:"_sliderCoreElement"},thumbBorderStyle:{propertyType:"child",type:"string",child:"_sliderCoreElement"},thumbBorderRadius:{propertyType:"child",type:"string",child:"_sliderCoreElement"},thumbWidth:{propertyType:"child",type:"string",child:"_sliderCoreElement"},thumbHeight:{propertyType:"child",type:"string",child:"_sliderCoreElement"},thumbMargin:{propertyType:"child",type:"string",child:"_sliderCoreElement"},thumbPadding:{propertyType:"child",type:"string",child:"_sliderCoreElement"},thumbShadow:{propertyType:"member",type:"string"},minMaxLabelThickness:{propertyType:"member",type:"string",defaultValue:"24px"},minMaxLabelPosition:{propertyType:"member",type:"string",defaultValue:"Top"},minMaxLabelAlignItems:{propertyType:"member",type:"string",defaultValue:"Center"},minMaxLabelJustifyContent:{propertyType:"member",type:"string",defaultValue:"Center"},showMinLabel:{propertyType:"child",type:"boolean",child:"_minLabelElement",childProperty:"show",defaultValue:!0},minLabelWidth:{propertyType:"child",type:"string",child:"_minLabelElement",childProperty:"width"},minLabelHeight:{propertyType:"child",type:"string",child:"_minLabelElement",childProperty:"height"},minLabelMargin:{propertyType:"child",type:"string",child:"_minLabelElement",childProperty:"margin"},minLabelPadding:{propertyType:"child",type:"string",child:"_minLabelElement",childProperty:"padding"},minLabelTextAlignment:{propertyType:"child",type:"string",child:"_minLabelElement",childProperty:"textAlignment"},minLabelLineClamp:{propertyType:"child",type:"number",child:"_minLabelElement",childProperty:"lineClamp"},minLabelTextWrapping:{propertyType:"child",type:"string",child:"_minLabelElement",childProperty:"textWrapping"},minLabelTextTrimming:{propertyType:"child",type:"string",child:"_minLabelElement",childProperty:"textTrimming"},minLabelFontClass:{propertyType:"child",type:"string",child:"_minLabelElement",childProperty:"fontClass",defaultValue:"Label2"},minLabelFontSize:{propertyType:"child",type:"string",child:"_minLabelElement",childProperty:"fontSize"},minLabelFontWeight:{propertyType:"child",type:"string",child:"_minLabelElement",childProperty:"fontWeight"},minLabelLineHeight:{propertyType:"child",type:"string",child:"_minLabelElement",childProperty:"lineHeight"},minLabelTextContrast:{propertyType:"child",type:"number",child:"_minLabelElement",childProperty:"textContrast"},showMaxLabel:{propertyType:"child",type:"boolean",child:"_maxLabelElement",childProperty:"show",defaultValue:!0},maxLabelWidth:{propertyType:"child",type:"string",child:"_maxLabelElement",childProperty:"width"},maxLabelHeight:{propertyType:"child",type:"string",child:"_maxLabelElement",childProperty:"height"},maxLabelMargin:{propertyType:"child",type:"string",child:"_maxLabelElement",childProperty:"margin"},maxLabelPadding:{propertyType:"child",type:"string",child:"_maxLabelElement",childProperty:"padding"},maxLabelTextAlignment:{propertyType:"child",type:"string",child:"_maxLabelElement",childProperty:"textAlignment"},maxLabelLineClamp:{propertyType:"child",type:"number",child:"_maxLabelElement",childProperty:"lineClamp"},maxLabelTextWrapping:{propertyType:"child",type:"string",child:"_maxLabelElement",childProperty:"textWrapping"},maxLabelTextTrimming:{propertyType:"child",type:"string",child:"_maxLabelElement",childProperty:"textTrimming"},maxLabelFontClass:{propertyType:"child",type:"string",child:"_maxLabelElement",childProperty:"fontClass",defaultValue:"Label2"},maxLabelFontSize:{propertyType:"child",type:"string",child:"_maxLabelElement",childProperty:"fontSize"},maxLabelFontWeight:{propertyType:"child",type:"string",child:"_maxLabelElement",childProperty:"fontWeight"},maxLabelLineHeight:{propertyType:"child",type:"string",child:"_maxLabelElement",childProperty:"lineHeight"},maxLabelTextContrast:{propertyType:"child",type:"number",child:"_maxLabelElement",childProperty:"textContrast"},showValueLabel:{propertyType:"member",type:"boolean",defaultValue:!0},valueLabelBorderWidth:{propertyType:"child",type:"string",child:"_valueLabelElement",childProperty:"borderWidth"},valueLabelBorderStyle:{propertyType:"child",type:"string",child:"_valueLabelElement",childProperty:"borderStyle"},valueLabelBorderRadius:{propertyType:"child",type:"string",child:"_valueLabelElement",childProperty:"borderRadius",defaultValue:"4px"},valueLabelWidth:{propertyType:"child",type:"string",child:"_valueLabelElement",childProperty:"width"},valueLabelHeight:{propertyType:"child",type:"string",child:"_valueLabelElement",childProperty:"height"},valueLabelMargin:{propertyType:"child",type:"string",child:"_valueLabelElement",childProperty:"margin"},valueLabelPadding:{propertyType:"child",type:"string",child:"_valueLabelElement",childProperty:"padding"},valueLabelPosition:{propertyType:"member",type:"string",defaultValue:"Thumb"},showValue:{propertyType:"child",type:"boolean",child:"_valueLabelElement",defaultValue:!0},valueWidth:{propertyType:"child",type:"string",child:"_valueLabelElement"},valueHeight:{propertyType:"child",type:"string",child:"_valueLabelElement"},valueMargin:{propertyType:"child",type:"string",child:"_valueLabelElement"},valuePadding:{propertyType:"child",type:"string",child:"_valueLabelElement"},value:{propertyType:"child",type:"number",child:"_sliderCoreElement"},valueTextAlignment:{propertyType:"child",type:"string",child:"_valueLabelElement",defaultValue:"Center"},valueLineClamp:{propertyType:"child",type:"number",child:"_valueLabelElement"},valueTextWrapping:{propertyType:"child",type:"string",child:"_valueLabelElement"},valueTextTrimming:{propertyType:"child",type:"string",child:"_valueLabelElement"},valueFontClass:{propertyType:"child",type:"string",child:"_valueLabelElement",defaultValue:"None"},valueFontSize:{propertyType:"child",type:"string",child:"_valueLabelElement",defaultValue:"12px"},valueFontWeight:{propertyType:"child",type:"string",child:"_valueLabelElement",defaultValue:"400"},valueLineHeight:{propertyType:"child",type:"string",child:"_valueLabelElement",defaultValue:"12px"},valueTextContrast:{propertyType:"child",type:"number",child:"_valueLabelElement"},showUnit:{propertyType:"child",type:"boolean",child:"_valueLabelElement",defaultValue:!1},unitWidth:{propertyType:"child",type:"string",child:"_valueLabelElement"},unitHeight:{propertyType:"child",type:"string",child:"_valueLabelElement"},unitMargin:{propertyType:"child",type:"string",child:"_valueLabelElement"},unitPadding:{propertyType:"child",type:"string",child:"_valueLabelElement"},useVariableUnitText:{propertyType:"child",type:"boolean",child:"_sliderCoreElement"},unitText:{propertyType:"child",type:"string",child:"_sliderCoreElement"},localizableUnitText:{propertyType:"child",type:"string",child:"_sliderCoreElement"},unitTextAlignment:{propertyType:"child",type:"string",child:"_valueLabelElement"},unitLineClamp:{propertyType:"child",type:"number",child:"_valueLabelElement"},unitTextWrapping:{propertyType:"child",type:"string",child:"_valueLabelElement"},unitTextTrimming:{propertyType:"child",type:"string",child:"_valueLabelElement"},unitFontClass:{propertyType:"child",type:"string",child:"_valueLabelElement"},unitFontSize:{propertyType:"child",type:"string",child:"_valueLabelElement"},unitFontWeight:{propertyType:"child",type:"string",child:"_valueLabelElement"},unitLineHeight:{propertyType:"child",type:"string",child:"_valueLabelElement"},unitTextContrast:{propertyType:"child",type:"number",child:"_valueLabelElement"},unitPosition:{propertyType:"child",type:"string",child:"_valueLabelElement"},backgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BackgroundColor"},valueLabelBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@CheckedBackgroundColor"},valueBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},unitBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},disabledBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledBackgroundColor"},valueForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@AltForegroundColor"},unitForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@AltForegroundColor"},minLabelForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},maxLabelForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},disabledForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledForegroundColor"},borderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"},valueLabelBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"},disabledBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledBorderColor"},activeTrackColor:{propertyType:"child",type:"string",child:"_sliderCoreElement"},hoverActiveTrackColor:{propertyType:"child",type:"string",child:"_sliderCoreElement"},pressedActiveTrackColor:{propertyType:"child",type:"string",child:"_sliderCoreElement"},disabledActiveTrackColor:{propertyType:"child",type:"string",child:"_sliderCoreElement"},trackColor:{propertyType:"child",type:"string",child:"_sliderCoreElement"},hoverTrackColor:{propertyType:"child",type:"string",child:"_sliderCoreElement"},pressedTrackColor:{propertyType:"child",type:"string",child:"_sliderCoreElement"},disabledTrackColor:{propertyType:"child",type:"string",child:"_sliderCoreElement"},thumbBackgroundColor:{propertyType:"child",type:"string",child:"_sliderCoreElement"},hoverThumbBackgroundColor:{propertyType:"child",type:"string",child:"_sliderCoreElement"},pressedThumbBackgroundColor:{propertyType:"child",type:"string",child:"_sliderCoreElement"},disabledThumbBackgroundColor:{propertyType:"child",type:"string",child:"_sliderCoreElement"},thumbBorderColor:{propertyType:"child",type:"string",child:"_sliderCoreElement"},hoverThumbBorderColor:{propertyType:"child",type:"string",child:"_sliderCoreElement"},pressedThumbBorderColor:{propertyType:"child",type:"string",child:"_sliderCoreElement"},disabledThumbBorderColor:{propertyType:"child",type:"string",child:"_sliderCoreElement"}},A.Slider=Slider}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class Switch extends x.UI.ControlBase{constructor(V,R){super(V,R),this._containerElement=null,this._switchCoreElement=null,this._labelTextContainerElement=null,this._labelElement=null,this._textElement=null,this.observe={"_switchCoreElement.winControl.textOnOff":function(x){this._textElement&&this._textElement.winControl&&(this._textElement.winControl.text=x.newValue)},"_switchCoreElement.winControl.labelText":function(x){this._labelElement&&this._labelElement.winControl&&(this._labelElement.winControl.text=x.newValue)},hover:function(x){this._switchCoreElement&&this._switchCoreElement.winControl&&(this._switchCoreElement.winControl.hover=x.newValue)},"_switchCoreElement.winControl.pressed":function(x){this._updateColorsBase("property","pressed",x.newValue,x.oldValue),this.dispatchEvent("pressedChanged",x)},"_switchCoreElement.winControl.dragging":function(x){this.dispatchEvent("draggingChanged",x)},"_switchCoreElement.winControl.checked":function(x){this._updateColorsBase("property","checked",x.newValue,x.oldValue),this.dispatchEvent("checkedChanged",x),this.dispatchEvent(A.ControlEvent.onButtonClick,x),!0===x.newValue&&this.dispatchEvent(A.ControlEvent.onButtonClickTrue,x),!1===x.newValue&&this.dispatchEvent(A.ControlEvent.onButtonClickFalse,x)},disabled:function(x){this._switchCoreElement&&this._switchCoreElement.winControl&&(this._switchCoreElement.winControl.disabled=x.newValue)}},this.inputEventsEnable=!0,this.addPropertyList(Switch,Switch.propertyList),this.defaultConstructor(V,this.inlineOptions,x.UI.Switch.controlName,x.UI.Switch.className)}createTemplate(){if(x.Utilities.isInDesignMode()){var A=null!=this.inlineOptions.showThumbText?this.inlineOptions.showThumbText:this.getStyleProperty("showThumbText")?this.getStyleProperty("showThumbText"):x.UI.Switch.propertyList.showThumbText.defaultValue;return this.element.innerHTML=['<div class="vw-switch__container">','<div class="vw-switch__core" data-win-control="VisiWin.UI.SwitchCore" data-win-options="{showThumbText:'+A+'}"></div>','<div class="vw-switch__labeltextcontainer">','<div class="vw-switch__label" data-win-control="VisiWin.UI.TextBlock"></div>','<div class="vw-switch__text" data-win-control="VisiWin.UI.TextBlock"></div>',"</div>","</div>"].join("\n"),this._containerElement=this.element.firstElementChild,this._switchCoreElement=this._containerElement.firstElementChild,this._labelTextContainerElement=this._switchCoreElement.nextElementSibling,this._labelElement=this._labelTextContainerElement.firstElementChild,this._textElement=this._labelElement.nextElementSibling,this.processElements([this._switchCoreElement,this._labelElement,this._textElement])}var V=null!=this.inlineOptions.showLabel?this.inlineOptions.showLabel:this.getStyleProperty("showLabel")?this.getStyleProperty("showLabel"):x.UI.Switch.propertyList.showLabel.defaultValue,R=null!=this.inlineOptions.showText?this.inlineOptions.showText:this.getStyleProperty("showText")?this.getStyleProperty("showText"):x.UI.Switch.propertyList.showText.defaultValue,D='<div class="vw-switch__container">';return D+='<div class="vw-switch__core" data-win-control="VisiWin.UI.SwitchCore" data-win-options="{showThumbText:'+(A=null!=this.inlineOptions.showThumbText?this.inlineOptions.showThumbText:this.getStyleProperty("showThumbText")?this.getStyleProperty("showThumbText"):x.UI.Switch.propertyList.showThumbText.defaultValue)+'}"></div>',(V||R)&&(D+='<div class="vw-switch__labeltextcontainer">',V&&(D+='<div class="vw-switch__label" data-win-control="VisiWin.UI.TextBlock"></div>'),R&&(D+='<div class="vw-switch__text" data-win-control="VisiWin.UI.TextBlock"></div>'),D+="</div>"),D+="</div>",this.element.innerHTML=D,this._containerElement=this.element.firstElementChild,this._switchCoreElement=this._containerElement.firstElementChild,(V||R)&&(this._labelTextContainerElement=this._switchCoreElement.nextElementSibling,V?(this._labelElement=this._labelTextContainerElement.firstElementChild,R&&(this._textElement=this._labelElement.nextElementSibling)):R&&(this._textElement=this._labelTextContainerElement.firstElementChild)),this.processElements([this._switchCoreElement,this._labelElement,this._textElement])}afterInit(){this._switchCoreElement.winControl.touchElement=this.element}_updateColors(x){this.disabled?(this._switchCoreElement.winControl.disabledForegroundColor=this.disabledForegroundColor,this._labelElement&&this._labelElement.winControl&&this.setColor("disabledForegroundColor","foregroundColor",null,"_labelElement"),this._textElement&&this._textElement.winControl&&this.setColor("disabledForegroundColor","foregroundColor",null,"_textElement"),this.setColor("disabledBackgroundColor","backgroundColor"),this.setColor("disabledBorderColor","borderColor"),this._containerElement.style.backgroundColor=""):this.checked?(this._labelElement&&this._labelElement.winControl&&this.setColor("checkedLabelForegroundColor","foregroundColor",null,"_labelElement"),this._textElement&&this._textElement.winControl&&this.setColor("checkedTextForegroundColor","foregroundColor",null,"_textElement"),this.setColor("checkedBackgroundColor","backgroundColor"),this.pressed?(this._labelElement&&this._labelElement.winControl&&this.setColor("checkedPressedLabelForegroundColor","foregroundColor",null,"_labelElement"),this._textElement&&this._textElement.winControl&&this.setColor("checkedPressedTextForegroundColor","foregroundColor",null,"_textElement"),this.setColor("checkedPressedBackgroundColor","backgroundColor","_containerElement")):this.hover?(this._labelElement&&this._labelElement.winControl&&(this.setColor("checkedHoverLabelForegroundColor","foregroundColor","_labelElement"),this.setColor("checkedHoverForegroundColor","foregroundColor","_labelElement")),this.setColor("checkedHoverBorderColor","borderColor"),this.setColor("checkedHoverBackgroundColor","backgroundColor","_containerElement")):(this._labelElement&&this._labelElement.winControl&&this.setColor("foregroundColor","foregroundColor","_labelElement"),this.setColor("checkedBorderColor","borderColor"),this._containerElement.style.backgroundColor="")):(this._labelElement&&this._labelElement.winControl&&this.setColor("labelForegroundColor","foregroundColor",null,"_labelElement"),this._textElement&&this._textElement.winControl&&this.setColor("textForegroundColor","foregroundColor",null,"_textElement"),this.setColor("backgroundColor"),this.pressed?(this._labelElement&&this._labelElement.winControl&&this.setColor("pressedLabelForegroundColor","foregroundColor",null,"_labelElement"),this._textElement&&this._textElement.winControl&&this.setColor("pressedTextForegroundColor","foregroundColor",null,"_textElement"),this.setColor("pressedBackgroundColor","backgroundColor","_containerElement")):this.hover?(this._labelElement&&this._labelElement.winControl&&this.setColor("hoverLabelForegroundColor","foregroundColor","_labelElement"),this.setColor("hoverBorderColor","borderColor"),this.setColor("hoverBackgroundColor","backgroundColor","_containerElement")):(this._labelElement&&this._labelElement.winControl&&this.setColor("foregroundColor","foregroundColor","_labelElement"),this.setColor("borderColor","borderColor"),this._containerElement.style.backgroundColor=""))}_updateLayout(x){if("updateLayout"==x.changeName||"labelPosition"==x.changeName)switch(this.labelPosition){case"Top":this._containerElement.style.flexDirection="column-reverse";break;case"Right":this._containerElement.style.flexDirection="row";break;case"Bottom":this._containerElement.style.flexDirection="column";break;default:this._containerElement.style.flexDirection="row-reverse"}if(("updateLayout"==x.changeName||"textPosition"==x.changeName)&&this._labelTextContainerElement)switch(this.textPosition){case"Left":this._labelTextContainerElement.style.flexDirection="row-reverse";break;case"Top":this._labelTextContainerElement.style.flexDirection="column-reverse";break;case"Right":this._labelTextContainerElement.style.flexDirection="row";break;default:this._labelTextContainerElement.style.flexDirection="column"}"visibility"!=x.changeName&&"disabled"!=x.changeName&&"authorized"!=x.changeName||this._switchCoreElement&&this._switchCoreElement.winControl&&this._switchCoreElement.winControl._updateLayout(x)}dispose(){return super.dispose()}}Switch.namespace="VisiWin.UI",Switch.controlName="Switch",Switch.className="vw-switch",Switch.propertyList={designerType:{propertyType:"base",type:"string",defaultValue_DM:"Control"},pressedChanged:{propertyType:"event",group:"Event",triggerDataName:"pressed"},draggingChanged:{propertyType:"event",group:"Event",triggerDataName:"dragging"},checkedChanged:{propertyType:"event",group:"Event",triggerDataName:"checked"},pressed:{propertyType:"child",type:"boolean",child:"_switchCoreElement"},dragging:{propertyType:"child",type:"boolean",child:"_switchCoreElement"},checked:{propertyType:"child",type:"boolean",child:"_switchCoreElement"},variableName:{propertyType:"child",type:"string",child:"_switchCoreElement"},value:{propertyType:"child",type:"number",child:"_switchCoreElement"},bitNumber:{propertyType:"child",type:"number",child:"_switchCoreElement"},canRecipeEdit:{propertyType:"child",type:"boolean",child:"_switchCoreElement"},touchRippleEnabled:{propertyType:"child",type:"boolean",child:"_switchCoreElement"},rippleElement:{propertyType:"child",type:"string",child:"_switchCoreElement"},rippleTarget:{propertyType:"child",type:"string",child:"_switchCoreElement"},rippleTargetAsParent:{propertyType:"child",type:"boolean",child:"_switchCoreElement"},rippleRadius:{propertyType:"child",type:"number",child:"_switchCoreElement"},rippleSpeedAmount:{propertyType:"child",type:"number",child:"_switchCoreElement"},rippleCentered:{propertyType:"child",type:"boolean",child:"_switchCoreElement"},rippleUnbounded:{propertyType:"child",type:"boolean",child:"_switchCoreElement"},ripplePersistent:{propertyType:"child",type:"boolean",child:"_switchCoreElement"},rippleFadeInDuration:{propertyType:"child",type:"number",child:"_switchCoreElement"},rippleFadeOutDuration:{propertyType:"child",type:"number",child:"_switchCoreElement"},trackBorderWidth:{propertyType:"child",type:"string",child:"_switchCoreElement"},trackBorderStyle:{propertyType:"child",type:"enum",child:"_switchCoreElement"},trackBorderRadius:{propertyType:"child",type:"string",child:"_switchCoreElement"},trackWidth:{propertyType:"child",type:"string",child:"_switchCoreElement"},trackHeight:{propertyType:"child",type:"string",child:"_switchCoreElement"},trackMargin:{propertyType:"child",type:"string",child:"_switchCoreElement"},trackPadding:{propertyType:"child",type:"string",child:"_switchCoreElement"},trackTransition:{propertyType:"child",type:"string",child:"_switchCoreElement"},trackShadow:{propertyType:"child",type:"string",child:"_switchCoreElement"},thumbBorderWidth:{propertyType:"child",type:"string",child:"_switchCoreElement"},thumbBorderStyle:{propertyType:"child",type:"enum",child:"_switchCoreElement"},thumbBorderRadius:{propertyType:"child",type:"string",child:"_switchCoreElement"},thumbWidth:{propertyType:"child",type:"string",child:"_switchCoreElement"},thumbHeight:{propertyType:"child",type:"string",child:"_switchCoreElement"},thumbMargin:{propertyType:"child",type:"string",child:"_switchCoreElement"},thumbPadding:{propertyType:"child",type:"string",child:"_switchCoreElement"},thumbTransition:{propertyType:"child",type:"string",child:"_switchCoreElement"},thumbShadow:{propertyType:"child",type:"string",child:"_switchCoreElement"},showThumbText:{propertyType:"child",type:"boolean",child:"_switchCoreElement",defaultValue:!1},thumbTextWidth:{propertyType:"child",type:"string",child:"_switchCoreElement"},thumbTextHeight:{propertyType:"child",type:"string",child:"_switchCoreElement"},thumbTextMargin:{propertyType:"child",type:"string",child:"_switchCoreElement"},thumbTextPadding:{propertyType:"child",type:"string",child:"_switchCoreElement"},thumbText:{propertyType:"child",type:"string",child:"_switchCoreElement"},localizableThumbText:{propertyType:"child",type:"string",child:"_switchCoreElement"},thumbTextOn:{propertyType:"child",type:"string",child:"_switchCoreElement"},localizableThumbTextOn:{propertyType:"child",type:"string",child:"_switchCoreElement"},thumbTextOff:{propertyType:"child",type:"string",child:"_switchCoreElement"},localizableThumbTextOff:{propertyType:"child",type:"string",child:"_switchCoreElement"},thumbTextAlignment:{propertyType:"child",type:"string",child:"_switchCoreElement"},thumbTextLineClamp:{propertyType:"child",type:"number",child:"_switchCoreElement"},thumbTextWrapping:{propertyType:"child",type:"string",child:"_switchCoreElement"},thumbTextTrimming:{propertyType:"child",type:"string",child:"_switchCoreElement"},thumbTextFontClass:{propertyType:"child",type:"string",child:"_switchCoreElement"},thumbTextFontSize:{propertyType:"child",type:"string",child:"_switchCoreElement"},thumbTextFontWeight:{propertyType:"child",type:"string",child:"_switchCoreElement"},thumbTextLineHeight:{propertyType:"child",type:"string",child:"_switchCoreElement"},thumbTextContrast:{propertyType:"child",type:"number",child:"_switchCoreElement"},thumbTextUppercase:{propertyType:"child",type:"boolean",child:"_switchCoreElement"},showLabel:{propertyType:"child",type:"boolean",child:"_labelElement",childProperty:"show",defaultValue:!0},labelWidth:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"width"},labelHeight:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"height"},labelMargin:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"margin"},labelPadding:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"padding"},useVariableText:{propertyType:"child",type:"boolean",child:"_switchCoreElement"},labelText:{propertyType:"child",type:"string",child:"_switchCoreElement",defaultValue:"Switch"},localizableLabelText:{propertyType:"child",type:"string",child:"_switchCoreElement"},labelTextAlignment:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"textAlignment"},labelLineClamp:{propertyType:"child",type:"number",child:"_labelElement",childProperty:"lineClamp"},labelTextWrapping:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"textWrapping"},labelTextTrimming:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"textTrimming"},labelFontClass:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"fontClass"},labelFontSize:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"fontSize"},labelFontWeight:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"fontWeight"},labelLineHeight:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"lineHeight"},labelTextContrast:{propertyType:"child",type:"number",child:"_labelElement",childProperty:"textContrast"},labelUppercase:{propertyType:"child",type:"boolean",child:"_labelElement",childProperty:"uppercase"},labelPosition:{propertyType:"member",type:"string",defaultValue:"Right"},showText:{propertyType:"child",type:"boolean",child:"_textElement",childProperty:"show",defaultValue:!1},textWidth:{propertyType:"child",type:"string",child:"_textElement",childProperty:"width"},textHeight:{propertyType:"child",type:"string",child:"_textElement",childProperty:"height"},textMargin:{propertyType:"child",type:"string",child:"_textElement",childProperty:"margin"},textPadding:{propertyType:"child",type:"string",child:"_textElement",childProperty:"padding"},textOnOff:{propertyType:"child",type:"string",child:"_switchCoreElement"},localizableTextOnOff:{propertyType:"child",type:"string",child:"_switchCoreElement"},textOn:{propertyType:"child",type:"string",child:"_switchCoreElement",defaultValue:"On"},localizableTextOn:{propertyType:"child",type:"string",child:"_switchCoreElement"},textOff:{propertyType:"child",type:"string",child:"_switchCoreElement",defaultValue:"Off"},localizableTextOff:{propertyType:"child",type:"string",child:"_switchCoreElement"},textAlignment:{propertyType:"child",type:"string",child:"_textElement"},lineClamp:{propertyType:"child",type:"number",child:"_textElement"},textWrapping:{propertyType:"child",type:"string",child:"_textElement"},textTrimming:{propertyType:"child",type:"string",child:"_textElement"},fontClass:{propertyType:"child",type:"string",child:"_textElement"},fontSize:{propertyType:"child",type:"string",child:"_textElement"},fontWeight:{propertyType:"child",type:"string",child:"_textElement"},lineHeight:{propertyType:"child",type:"string",child:"_textElement"},textContrast:{propertyType:"child",type:"number",child:"_textElement"},uppercase:{propertyType:"child",type:"boolean",child:"_textElement"},textPosition:{propertyType:"member",type:"string",defaultValue:"Bottom"},backgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BackgroundColor"},hoverBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},pressedBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},checkedBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BackgroundColor"},checkedHoverBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},checkedPressedBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},disabledBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledBackgroundColor"},labelForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},hoverLabelForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},pressedLabelForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},checkedLabelForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},checkedHoverLabelForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},checkedPressedLabelForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},textForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},pressedTextForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},checkedTextForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},checkedPressedTextForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},thumbTextForegroundColor:{propertyType:"child",type:"string",child:"_switchCoreElement"},hoverThumbTextForegroundColor:{propertyType:"child",type:"string",child:"_switchCoreElement"},pressedThumbTextForegroundColor:{propertyType:"child",type:"string",child:"_switchCoreElement"},checkedThumbTextForegroundColor:{propertyType:"child",type:"string",child:"_switchCoreElement"},checkedHoverThumbTextForegroundColor:{propertyType:"child",type:"string",child:"_switchCoreElement"},checkedPressedThumbTextForegroundColor:{propertyType:"child",type:"string",child:"_switchCoreElement"},disabledForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledForegroundColor"},borderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"},hoverBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@HoverBorderColor"},checkedBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@CheckedBorderColor"},checkedHoverBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@CheckedHoverBorderColor"},disabledBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledBorderColor"},rippleColor:{propertyType:"child",type:"string",child:"_switchCoreElement"},trackBackgroundColor:{propertyType:"child",type:"string",child:"_switchCoreElement"},hoverTrackBackgroundColor:{propertyType:"child",type:"string",child:"_switchCoreElement"},pressedTrackBackgroundColor:{propertyType:"child",type:"string",child:"_switchCoreElement"},checkedTrackBackgroundColor:{propertyType:"child",type:"string",child:"_switchCoreElement"},checkedHoverTrackBackgroundColor:{propertyType:"child",type:"string",child:"_switchCoreElement"},checkedPressedTrackBackgroundColor:{propertyType:"child",type:"string",child:"_switchCoreElement"},disabledTrackBackgroundColor:{propertyType:"child",type:"string",child:"_switchCoreElement"},disabledCheckedTrackBackgroundColor:{propertyType:"child",type:"string",child:"_switchCoreElement"},trackBorderColor:{propertyType:"child",type:"string",child:"_switchCoreElement"},hoverTrackBorderColor:{propertyType:"child",type:"string",child:"_switchCoreElement"},pressedTrackBorderColor:{propertyType:"child",type:"string",child:"_switchCoreElement"},checkedTrackBorderColor:{propertyType:"child",type:"string",child:"_switchCoreElement"},checkedHoverTrackBorderColor:{propertyType:"child",type:"string",child:"_switchCoreElement"},checkedPressedTrackBorderColor:{propertyType:"child",type:"string",child:"_switchCoreElement"},disabledTrackBorderColor:{propertyType:"child",type:"string",child:"_switchCoreElement"},disabledCheckedTrackBorderColor:{propertyType:"child",type:"string",child:"_switchCoreElement"},thumbBackgroundColor:{propertyType:"child",type:"string",child:"_switchCoreElement"},hoverThumbBackgroundColor:{propertyType:"child",type:"string",child:"_switchCoreElement"},pressedThumbBackgroundColor:{propertyType:"child",type:"string",child:"_switchCoreElement"},checkedThumbBackgroundColor:{propertyType:"child",type:"string",child:"_switchCoreElement"},checkedHoverThumbBackgroundColor:{propertyType:"child",type:"string",child:"_switchCoreElement"},checkedPressedThumbBackgroundColor:{propertyType:"child",type:"string",child:"_switchCoreElement"},disabledThumbBackgroundColor:{propertyType:"child",type:"string",child:"_switchCoreElement"},disabledCheckedThumbBackgroundColor:{propertyType:"child",type:"string",child:"_switchCoreElement"},thumbBorderColor:{propertyType:"child",type:"string",child:"_switchCoreElement"},hoverThumbBorderColor:{propertyType:"child",type:"string",child:"_switchCoreElement"},pressedThumbBorderColor:{propertyType:"child",type:"string",child:"_switchCoreElement"},checkedThumbBorderColor:{propertyType:"child",type:"string",child:"_switchCoreElement"},checkedHoverThumbBorderColor:{propertyType:"child",type:"string",child:"_switchCoreElement"},checkedPressedThumbBorderColor:{propertyType:"child",type:"string",child:"_switchCoreElement"},disabledThumbBorderColor:{propertyType:"child",type:"string",child:"_switchCoreElement"},disabledCheckedThumbBorderColor:{propertyType:"child",type:"string",child:"_switchCoreElement"}},A.Switch=Switch}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class TabButton extends x.UI.TabButtonBase{constructor(A,V){super(A,V),this._containerElement=null,this._contentElement=null,this._symbolElement=null,this._textElement=null,this.inputEventsEnable=!0,this.addPropertyList(TabButton,TabButton.propertyList),this.defaultConstructor(A,this.inlineOptions,x.UI.TabButton.controlName,x.UI.TabButton.className)}createTemplate(){if(x.Utilities.isInDesignMode())return this.element.innerHTML=['<div class="vw-tabbutton__container">','<div class="vw-tabbutton__content">','<div class="vw-tabbutton__symbol" data-win-control="VisiWin.UI.Symbol"></div>','<div class="vw-tabbutton__text" data-win-control="VisiWin.UI.TextBlock"></div>',"</div>","</div>"].join("\n"),this._containerElement=this.element.firstElementChild,this._contentElement=this._containerElement.firstElementChild,this._symbolElement=this._contentElement.firstElementChild,this._textElement=this._symbolElement.nextElementSibling,this.processElements([this._symbolElement,this._textElement]);var A=null!=this.inlineOptions.showSymbol?this.inlineOptions.showSymbol:this.getStyleProperty("showSymbol")?this.getStyleProperty("showSymbol"):x.UI.ToggleButton.propertyList.showSymbol.defaultValue,V=null!=this.inlineOptions.showText?this.inlineOptions.showText:this.getStyleProperty("showText")?this.getStyleProperty("showText"):x.UI.ToggleButton.propertyList.showText.defaultValue,R='<div class="vw-tabbutton__container">';return(A||V)&&(R+='<div class="vw-tabbutton__content">',A&&(R+='<div class="vw-tabbutton__symbol" data-win-control="VisiWin.UI.Symbol"></div>'),V&&(R+='<div class="vw-tabbutton__text" data-win-control="VisiWin.UI.TextBlock"></div>'),R+="</div>"),R+="</div>",this.element.innerHTML=R,this._containerElement=this.element.firstElementChild,(A||V)&&(this._contentElement=this._containerElement.firstElementChild,A?(this._symbolElement=this._contentElement.firstElementChild,V&&(this._textElement=this._symbolElement.nextElementSibling)):V&&(this._textElement=this._contentElement.firstElementChild)),this.processElements([this._symbolElement,this._textElement])}_updateColors(x){this.disabled?(this._textElement&&this._textElement.winControl&&this.setColor("disabledForegroundColor","foregroundColor",null,"_textElement"),this._symbolElement&&this._symbolElement.winControl&&this.setColor("disabledForegroundColor","foregroundColor",null,"_symbolElement"),this.setColor("disabledBackgroundColor","backgroundColor"),this.setColor("disabledBorderColor","borderColor"),this._containerElement.style.backgroundColor=""):this.checked?(this._textElement&&this._textElement.winControl&&this.setColor("checkedForegroundColor","foregroundColor",null,"_textElement"),this._symbolElement&&this._symbolElement.winControl&&this.setColor("checkedForegroundColor","foregroundColor",null,"_symbolElement"),this.setColor("checkedBackgroundColor","backgroundColor"),this.pressed?(this._textElement&&this._textElement.winControl&&this.setColor("checkedPressedForegroundColor","foregroundColor",null,"_textElement"),this._symbolElement&&this._symbolElement.winControl&&this.setColor("checkedPressedForegroundColor","foregroundColor",null,"_symbolElement"),this.setColor("checkedPressedBackgroundColor","backgroundColor","_containerElement")):this.hover?(this.setColor("checkedHoverBorderColor","borderColor"),this.setColor("checkedHoverBackgroundColor","backgroundColor","_containerElement"),this.setColor("checkedHoverForegroundColor","foregroundColor","_textElement")):(this.setColor("checkedBorderColor","borderColor"),this._containerElement.style.backgroundColor="",this.setColor("checkedForegroundColor","foregroundColor","_textElement"))):(this._textElement&&this._textElement.winControl&&this.setColor("foregroundColor","foregroundColor",null,"_textElement"),this._symbolElement&&this._symbolElement.winControl&&this.setColor("foregroundColor","foregroundColor",null,"_symbolElement"),this.setColor("backgroundColor"),this.pressed?(this._textElement&&this._textElement.winControl&&this.setColor("pressedForegroundColor","foregroundColor",null,"_textElement"),this._symbolElement&&this._symbolElement.winControl&&this.setColor("pressedForegroundColor","foregroundColor",null,"_symbolElement"),this.setColor("pressedBackgroundColor","backgroundColor","_containerElement")):this.hover?(this.setColor("hoverBorderColor","borderColor"),this.setColor("hoverBackgroundColor","backgroundColor","_containerElement"),this.setColor("hoverForegroundColor","foregroundColor","_textElement")):(this.setColor("borderColor","borderColor"),this._containerElement.style.backgroundColor="",this.setColor("foregroundColor","foregroundColor","_textElement")))}_updateLayout(x){if("updateLayout"!=x.changeName&&"text"!=x.changeName||this._textElement&&this._textElement.winControl&&(this._textElement.winControl.text=this.text),"updateLayout"!=x.changeName&&"checked"!=x.changeName&&"symbolOn"!=x.changeName&&"symbolOff"!=x.changeName||(this.symbolOn||this.symbolOff)&&(this.checked?this.symbol=this.symbolOn:this.symbol=this.symbolOff),"updateLayout"==x.changeName||"showSymbol"==x.changeName||"showText"==x.changeName||"symbolPosition"==x.changeName||"textPosition"==x.changeName)if(!this.showSymbol&&this.showText)this._contentElement.style.flexDirection="",this._contentElement.style.alignItems="",this._contentElement.style.justifyContent="",this._containerElement.style.alignItems="Top"==this.textPosition?"flex-start":"Bottom"==this.textPosition?"flex-end":"center",this._containerElement.style.justifyContent="Left"==this.textPosition?"flex-start":"Right"==this.textPosition?"flex-end":"center";else if(this.showSymbol&&!this.showText)this._contentElement.style.flexDirection="",this._contentElement.style.alignItems="",this._contentElement.style.justifyContent="",this._containerElement.style.alignItems="Top"==this.symbolPosition?"flex-start":"Bottom"==this.symbolPosition?"flex-end":"center",this._containerElement.style.justifyContent="Left"==this.symbolPosition?"flex-start":"Right"==this.symbolPosition?"flex-end":"center";else if(this.showSymbol&&this.showText)switch(this._containerElement.style.alignItems="Top"==this.textPosition?"flex-start":"Bottom"==this.textPosition?"flex-end":"center",this._containerElement.style.justifyContent="Left"==this.textPosition?"flex-start":"Right"==this.textPosition?"flex-end":"center",this._contentElement.style.flexDirection="Left"==this.symbolPosition?"row":"Top"==this.symbolPosition?"column":"Right"==this.symbolPosition?"row-reverse":"Bottom"==this.symbolPosition?"column-reverse":"row",this.textPosition){case"Left":this._contentElement.style.alignItems="Left"==this.symbolPosition||"Right"==this.symbolPosition||"Center"==this.symbolPosition?("Left"==this.symbolPosition||this.symbolPosition,"center"):(this.symbolPosition,"flex-start"),this._contentElement.style.justifyContent="Left"==this.symbolPosition||"Right"==this.symbolPosition||"Center"==this.symbolPosition?"Left"==this.symbolPosition||"Center"==this.symbolPosition?"flex-start":"flex-end":(this.symbolPosition,"center");break;case"Top":this._contentElement.style.alignItems="Left"==this.symbolPosition||"Right"==this.symbolPosition||"Center"==this.symbolPosition?("Left"==this.symbolPosition||this.symbolPosition,"flex-start"):(this.symbolPosition,"center"),this._contentElement.style.justifyContent="Left"==this.symbolPosition||"Right"==this.symbolPosition||"Center"==this.symbolPosition?("Left"==this.symbolPosition||this.symbolPosition,"center"):"Top"==this.symbolPosition?"flex-start":"flex-end";break;case"Right":this._contentElement.style.alignItems="Left"==this.symbolPosition||"Right"==this.symbolPosition||"Center"==this.symbolPosition?("Left"==this.symbolPosition||this.symbolPosition,"center"):(this.symbolPosition,"flex-end"),this._contentElement.style.justifyContent="Left"==this.symbolPosition||"Right"==this.symbolPosition||"Center"==this.symbolPosition?"Left"==this.symbolPosition||"Center"==this.symbolPosition?"flex-end":"flex-start":(this.symbolPosition,"center");break;case"Bottom":this._contentElement.style.alignItems="Left"==this.symbolPosition||"Right"==this.symbolPosition||"Center"==this.symbolPosition?("Left"==this.symbolPosition||this.symbolPosition,"flex-end"):(this.symbolPosition,"center"),this._contentElement.style.justifyContent="Left"==this.symbolPosition||"Right"==this.symbolPosition||"Center"==this.symbolPosition?("Left"==this.symbolPosition||this.symbolPosition,"center"):"Top"==this.symbolPosition?"flex-end":"flex-start";break;default:this._contentElement.style.alignItems="center",this._contentElement.style.justifyContent="center"}}dispose(){return super.dispose()}}TabButton.namespace="VisiWin.UI",TabButton.controlName="TabButton",TabButton.className="vw-tabbutton",TabButton.propertyList={designerType:{propertyType:"base",type:"string",defaultValue:"Control"},registerSourceId:{propertyType:"base",type:"string",defaultValue:"TabBar"},padding:{propertyType:"style",type:"string",element:"_containerElement",forceOverwrite:!0},transition:{propertyType:"style",type:"string"},containerBorderWidth:{propertyType:"style",type:"string",element:"_containerElement",style:"borderWidth"},containerBorderStyle:{propertyType:"style",type:"string",element:"_containerElement",style:"borderStyle"},containerBorderRadius:{propertyType:"style",type:"string",element:"_containerElement",style:"borderRadius"},containerTransition:{propertyType:"style",type:"string",element:"_containerElement",style:"transition"},showSymbol:{propertyType:"child",type:"boolean",child:"_symbolElement",childProperty:"show",defaultValue:!1},iconFont:{propertyType:"child",type:"string",child:"_symbolElement"},symbol:{propertyType:"child",type:"string",child:"_symbolElement"},symbolOn:{propertyType:"member",type:"string"},symbolOff:{propertyType:"member",type:"string"},symbolType:{propertyType:"child",type:"string",child:"_symbolElement"},symbolSize:{propertyType:"child",type:"string",child:"_symbolElement"},symbolMargin:{propertyType:"child",type:"string",child:"_symbolElement",childProperty:"margin"},symbolPosition:{propertyType:"member",type:"string",defaultValue:"Center"},showText:{propertyType:"child",type:"boolean",child:"_textElement",childProperty:"show",defaultValue:!0},textWidth:{propertyType:"child",type:"string",child:"_textElement",childProperty:"width"},textHeight:{propertyType:"child",type:"string",child:"_textElement",childProperty:"height"},textMargin:{propertyType:"child",type:"string",child:"_textElement",childProperty:"margin"},textPadding:{propertyType:"child",type:"string",child:"_textElement",childProperty:"padding"},useVariableText:{propertyType:"base",type:"boolean"},text:{propertyType:"base",type:"string",defaultValue:"TabButton"},localizableText:{propertyType:"base",type:"string"},textOn:{propertyType:"base",type:"string"},localizableTextOn:{propertyType:"base",type:"string"},textOff:{propertyType:"base",type:"string"},localizableTextOff:{propertyType:"base",type:"string"},textAlignment:{propertyType:"child",type:"string",child:"_textElement"},lineClamp:{propertyType:"child",type:"number",child:"_textElement"},textWrapping:{propertyType:"child",type:"string",child:"_textElement"},textTrimming:{propertyType:"child",type:"string",child:"_textElement"},fontClass:{propertyType:"child",type:"string",child:"_textElement",forceOverwrite:!0,defaultValue:"Button"},fontSize:{propertyType:"child",type:"string",child:"_textElement",forceOverwrite:!0},fontWeight:{propertyType:"child",type:"string",child:"_textElement",forceOverwrite:!0},lineHeight:{propertyType:"child",type:"string",child:"_textElement",forceOverwrite:!0},textContrast:{propertyType:"child",type:"number",child:"_textElement"},uppercase:{propertyType:"child",type:"boolean",child:"_textElement",defaultValue:!0},textPosition:{propertyType:"member",type:"string",defaultValue:"Center"},backgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BackgroundColor"},hoverBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@HoverBackgroundColor"},pressedBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@PressedBackgroundColor"},checkedBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@CheckedBackgroundColor"},checkedHoverBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@CheckedHoverBackgroundColor"},checkedPressedBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@CheckedPressedBackgroundColor"},disabledBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledBackgroundColor"},foregroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},hoverForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},pressedForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},checkedForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@AltForegroundColor"},checkedHoverForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},checkedPressedForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@AltForegroundColor"},disabledForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledForegroundColor"},borderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"},hoverBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@HoverBorderColor"},checkedBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@CheckedBorderColor"},checkedHoverBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@CheckedHoverBorderColor"},disabledBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledBorderColor"}},A.TabButton=TabButton}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class TabMenuButton extends x.UI.ButtonBase{constructor(A,V){super(A,V),this._containerElement=null,this._symbolTextContainerElement=null,this._symbolElement=null,this._textElement=null,this._expandingSymbolElement=null,this._menuElement=null,this._popoverElement=null,this._boundPopoverHandler=this._popoverHandler.bind(this),this._boundBlurHandler=this._blurHandler.bind(this),this.inputEventsEnable=!0,this.addPropertyList(TabMenuButton,TabMenuButton.propertyList),this.defaultConstructor(A,this.inlineOptions,x.UI.TabMenuButton.controlName,x.UI.TabMenuButton.className)}createTemplate(){if(x.Utilities.isInDesignMode()){var A=document.createElement("div");return x.Utilities.reparentChildren(this.element,A),this.element.innerHTML=['<div class="vw-tabmenubutton__container">','<div class="vw-tabmenubutton__symboltextcontainer">','<div class="vw-tabmenubutton__symbol" data-win-control="VisiWin.UI.Symbol"></div>','<div class="vw-tabmenubutton__text" data-win-control="VisiWin.UI.TextBlock"></div>',"</div>",'<div class="vw-tabmenubutton__expandsymbol" data-win-control="VisiWin.UI.Symbol"></div>',"</div>",'<div class="vw-tabmenubutton__menu" data-win-control="VisiWin.UI.Menu" data-win-options="{registerItems:false}"></div>'].join("\n"),this._containerElement=this.element.firstElementChild,this._symbolTextContainerElement=this._containerElement.firstElementChild,this._symbolElement=this._symbolTextContainerElement.firstElementChild,this._textElement=this._symbolElement.nextElementSibling,this._expandingSymbolElement=this._symbolTextContainerElement.nextElementSibling,this._menuElement=this._containerElement.nextElementSibling,x.Utilities.reparentChildren(A,this._menuElement),this.processElements([this._symbolElement,this._textElement,this._expandingSymbolElement,this._menuElement])}var V=null!=this.inlineOptions.showSymbol?this.inlineOptions.showSymbol:this.getStyleProperty("showSymbol")?this.getStyleProperty("showSymbol"):x.UI.TabMenuButton.propertyList.showSymbol.defaultValue,R=null!=this.inlineOptions.showText?this.inlineOptions.showText:this.getStyleProperty("showText")?this.getStyleProperty("showText"):x.UI.TabMenuButton.propertyList.showText.defaultValue,D=null!=this.inlineOptions.showExpandingSymbol?this.inlineOptions.showExpandingSymbol:this.getStyleProperty("showExpandingSymbol")?this.getStyleProperty("showExpandingSymbol"):x.UI.TabMenuButton.propertyList.showExpandingSymbol.defaultValue,N='<div class="vw-tabmenubutton__container">';A=null;if((V||R)&&(N+='<div class="vw-tabmenubutton__symboltextcontainer">',V&&(N+='<div class="vw-tabmenubutton__symbol" data-win-control="VisiWin.UI.Symbol"></div>'),R&&(N+='<div class="vw-tabmenubutton__text" data-win-control="VisiWin.UI.TextBlock"></div>'),N+="</div>"),D&&(N+='<div class="vw-tabmenubutton__expandsymbol" data-win-control="VisiWin.UI.Symbol"></div>'),N+="</div>",this.element.children&&this.element.children.length>0&&(N+='<div class="vw-tabmenubutton__menu" data-win-control="VisiWin.UI.Menu" data-win-options="{registerItems:false}"></div>',A=document.createElement("div"),x.Utilities.reparentChildren(this.element,A)),this.element.innerHTML=N,this._containerElement=this.element.firstElementChild,(V||R)&&(this._symbolTextContainerElement=this._containerElement.firstElementChild,V?(this._symbolElement=this._symbolTextContainerElement.firstElementChild,R&&(this._textElement=this._symbolElement.nextElementSibling)):R&&(this._textElement=this._symbolTextContainerElement.firstElementChild)),D&&(this._expandingSymbolElement=V||R?this._symbolTextContainerElement.nextElementSibling:this._containerElement.firstElementChild),A){this._menuElement=this._containerElement.nextElementSibling,x.Utilities.reparentChildren(A,this._menuElement);var U=null!=this.inlineOptions.popoverId?this.inlineOptions.popoverId:this.getStyleProperty("popoverId")?this.getStyleProperty("popoverId"):x.UI.TabMenuButton.propertyList.popoverId.defaultValue,B=U?document.getElementById(x.Utilities.removeHashFromId(U)):null;B&&B.winControl?this._popoverElement=B.winControl:this._popoverElement=new x.UI.Popover(null,{})}return this.processElements([this._symbolElement,this._textElement,this._expandingSymbolElement,this._menuElement])}createHandler(){this.addEventListener("buttonclick",this._boundPopoverHandler,!1),this.isInDesignMode||document.getElementsByClassName("vw-popover__flyout win-overlay win-flyout")[0].addEventListener(A.FocusEventType.blur,this._boundBlurHandler,!1)}removeHandler(){this.removeEventListener("buttonclick",this._boundPopoverHandler,!1),this.isInDesignMode||document.getElementsByClassName("vw-popover__flyout win-overlay win-flyout")[0].removeEventListener(A.FocusEventType.blur,this._boundBlurHandler,!1)}afterInit(){this._popoverElement&&(this._popoverElement.menuElement=this._menuElement)}_updateColors(x){this.disabled?(this._textElement&&this._textElement.winControl&&this.setColor("disabledForegroundColor","foregroundColor",null,"_textElement"),this._symbolElement&&this._symbolElement.winControl&&this.setColor("disabledForegroundColor","foregroundColor",null,"_symbolElement"),this._expandingSymbolElement&&this._expandingSymbolElement.winControl&&this.setColor("disabledForegroundColor","foregroundColor",null,"_expandingSymbolElement"),this._menuElement&&this._menuElement.winControl&&this.setColor("disabledBackgroundColor","backgroundColor","_menuElement"),this._menuElement&&this._menuElement.winControl&&this.setColor("disabledBorderColor","borderColor","_menuElement"),this.setColor("disabledBackgroundColor","backgroundColor"),this.setColor("disabledBorderColor","borderColor"),this._containerElement.style.backgroundColor=""):(this._menuElement&&this._menuElement.winControl&&this.setColor("menuBackgroundColor","backgroundColor","_menuElement"),this._menuElement&&this._menuElement.winControl&&this.setColor("menuBorderColor","borderColor","_menuElement"),this.checked?(this._textElement&&this._textElement.winControl&&this.setColor("checkedForegroundColor","foregroundColor",null,"_textElement"),this._symbolElement&&this._symbolElement.winControl&&this.setColor("checkedForegroundColor","foregroundColor",null,"_symbolElement"),this._expandingSymbolElement&&this._expandingSymbolElement.winControl&&this.setColor("checkedForegroundColor","foregroundColor",null,"_expandingSymbolElement"),this.setColor("checkedBackgroundColor","backgroundColor"),this.pressed?(this._textElement&&this._textElement.winControl&&this.setColor("checkedPressedForegroundColor","foregroundColor",null,"_textElement"),this._symbolElement&&this._symbolElement.winControl&&this.setColor("checkedPressedForegroundColor","foregroundColor",null,"_symbolElement"),this._expandingSymbolElement&&this._expandingSymbolElement.winControl&&this.setColor("checkedPressedForegroundColor","foregroundColor",null,"_expandingSymbolElement"),this.setColor("checkedPressedBackgroundColor","backgroundColor","_containerElement")):this.hover?(this.setColor("checkedHoverBorderColor","borderColor"),this.setColor("checkedHoverBackgroundColor","backgroundColor","_containerElement"),this.setColor("checkedHoverForegroundColor","foregroundColor","_textElement")):(this.setColor("checkedBorderColor","borderColor"),this._containerElement.style.backgroundColor="",this.setColor("checkedForegroundColor","foregroundColor","_textElement"))):(this._textElement&&this._textElement.winControl&&this.setColor("foregroundColor","foregroundColor",null,"_textElement"),this._symbolElement&&this._symbolElement.winControl&&this.setColor("foregroundColor","foregroundColor",null,"_symbolElement"),this._expandingSymbolElement&&this._expandingSymbolElement.winControl&&this.setColor("foregroundColor","foregroundColor",null,"_expandingSymbolElement"),this.setColor("backgroundColor"),this.pressed?(this._textElement&&this._textElement.winControl&&this.setColor("pressedForegroundColor","foregroundColor",null,"_textElement"),this._symbolElement&&this._symbolElement.winControl&&this.setColor("pressedForegroundColor","foregroundColor",null,"_symbolElement"),this._expandingSymbolElement&&this._expandingSymbolElement.winControl&&this.setColor("pressedForegroundColor","foregroundColor",null,"_expandingSymbolElement"),this.setColor("pressedBackgroundColor","backgroundColor","_containerElement")):this.hover?(this.setColor("hoverBorderColor","borderColor"),this.setColor("hoverBackgroundColor","backgroundColor","_containerElement"),this.setColor("hoverForegroundColor","foregroundColor","_textElement")):(this.setColor("borderColor","borderColor"),this._containerElement.style.backgroundColor="",this.setColor("foregroundColor","foregroundColor","_textElement"))))}_updateLayout(A){if("updateLayout"!=A.changeName&&"text"!=A.changeName||this._textElement&&this._textElement.winControl&&(this._textElement.winControl.text=this.text),"updateLayout"!=A.changeName&&"checked"!=A.changeName&&"symbolOn"!=A.changeName&&"symbolOff"!=A.changeName||(this.symbolOn||this.symbolOff)&&(this.checked?this.symbol=this.symbolOn:this.symbol=this.symbolOff),"updateLayout"!=A.changeName&&"checked"!=A.changeName&&"expandedSymbol"!=A.changeName&&"collapsedSymbol"!=A.changeName||this._expandingSymbolElement&&this._expandingSymbolElement.winControl&&(this.checked?this._expandingSymbolElement.winControl.symbol=this.expandedSymbol:this._expandingSymbolElement.winControl.symbol=this.collapsedSymbol),"updateLayout"==A.changeName||"showSymbol"==A.changeName||"showText"==A.changeName||"symbolPosition"==A.changeName||"textPosition"==A.changeName)if(!this.showSymbol&&this.showText)this._symbolTextContainerElement.style.flexDirection="row",this._symbolTextContainerElement.style.alignItems="Top"==this.textPosition?"flex-start":"Bottom"==this.textPosition?"flex-end":"center",this._symbolTextContainerElement.style.justifyContent="Left"==this.textPosition?"flex-start":"Right"==this.textPosition?"flex-end":"center";else if(this.showSymbol&&!this.showText)this._symbolTextContainerElement.style.flexDirection="row",this._symbolTextContainerElement.style.alignItems="Top"==this.symbolPosition?"flex-start":"Bottom"==this.symbolPosition?"flex-end":"center",this._symbolTextContainerElement.style.justifyContent="Left"==this.symbolPosition?"flex-start":"Right"==this.symbolPosition?"flex-end":"center";else if(this.showSymbol&&this.showText)switch(this._symbolTextContainerElement.style.flexDirection="Left"==this.symbolPosition?"row":"Top"==this.symbolPosition?"column":"Right"==this.symbolPosition?"row-reverse":"Bottom"==this.symbolPosition?"column-reverse":"row",this.textPosition){case"Left":this._symbolTextContainerElement.style.alignItems="Left"==this.symbolPosition||"Right"==this.symbolPosition||"Center"==this.symbolPosition?("Left"==this.symbolPosition||this.symbolPosition,"center"):(this.symbolPosition,"flex-start"),this._symbolTextContainerElement.style.justifyContent="Left"==this.symbolPosition||"Right"==this.symbolPosition||"Center"==this.symbolPosition?"Left"==this.symbolPosition||"Center"==this.symbolPosition?"flex-start":"flex-end":(this.symbolPosition,"center");break;case"Top":this._symbolTextContainerElement.style.alignItems="Left"==this.symbolPosition||"Right"==this.symbolPosition||"Center"==this.symbolPosition?("Left"==this.symbolPosition||this.symbolPosition,"flex-start"):(this.symbolPosition,"center"),this._symbolTextContainerElement.style.justifyContent="Left"==this.symbolPosition||"Right"==this.symbolPosition||"Center"==this.symbolPosition?("Left"==this.symbolPosition||this.symbolPosition,"center"):"Top"==this.symbolPosition?"flex-start":"flex-end";break;case"Right":this._symbolTextContainerElement.style.alignItems="Left"==this.symbolPosition||"Right"==this.symbolPosition||"Center"==this.symbolPosition?("Left"==this.symbolPosition||this.symbolPosition,"center"):(this.symbolPosition,"flex-end"),this._symbolTextContainerElement.style.justifyContent="Left"==this.symbolPosition||"Right"==this.symbolPosition||"Center"==this.symbolPosition?"Left"==this.symbolPosition||"Center"==this.symbolPosition?"flex-end":"flex-start":(this.symbolPosition,"center");break;case"Bottom":this._symbolTextContainerElement.style.alignItems="Left"==this.symbolPosition||"Right"==this.symbolPosition||"Center"==this.symbolPosition?("Left"==this.symbolPosition||this.symbolPosition,"flex-end"):(this.symbolPosition,"center"),this._symbolTextContainerElement.style.justifyContent="Left"==this.symbolPosition||"Right"==this.symbolPosition||"Center"==this.symbolPosition?("Left"==this.symbolPosition||this.symbolPosition,"center"):"Top"==this.symbolPosition?"flex-end":"flex-start";break;default:this._symbolTextContainerElement.style.alignItems="center",this._symbolTextContainerElement.style.justifyContent="center"}"updateLayout"!=A.changeName&&"checked"!=A.changeName||x.Utilities.isInDesignMode()&&this._menuElement&&this._menuElement.winControl&&(this._menuElement.style.position=this.checked?"fixed":"absolute",this._menuElement.style.width="inherit"),"updateLayout"!=A.changeName&&"menuMargin"!=A.changeName||x.Utilities.isInDesignMode()&&this._menuElement&&this._menuElement.winControl&&(this._menuElement.winControl.margin=this.menuMargin),"updateLayout"!=A.changeName&&"menuBorderRadius"!=A.changeName||this._menuElement&&this._menuElement.winControl&&(this._menuElement.winControl.borderRadius=this.menuBorderRadius),"updateLayout"!=A.changeName&&"menuShadow"!=A.changeName||x.Utilities.isInDesignMode()&&this._menuElement&&this._menuElement.winControl&&(this._menuElement.winControl.shadow=this.menuShadow)}_popoverHandler(x){this._popoverElement&&(this._popoverElement.menuElement=this._menuElement,this._popoverElement.anchor=this.element,this._popoverElement.placement=this.menuPlacement,this._popoverElement.margin=this.menuMargin,this._popoverElement.borderRadius=this.menuBorderRadius,this._popoverElement.shadow=this.menuShadow,this._popoverElement.show(),null!==this._expandingSymbolElement&&(this._expandingSymbolElement.winControl.symbol=this.expandedSymbol))}_blurHandler(x){null!==this._expandingSymbolElement&&(this._expandingSymbolElement.winControl.symbol=this.collapsedSymbol)}hide(){this._popoverElement&&this._popoverElement.hide()}dispose(){return super.dispose()}}TabMenuButton.namespace="VisiWin.UI",TabMenuButton.controlName="TabMenuButton",TabMenuButton.className="vw-tabmenubutton",TabMenuButton.propertyList={designerType:{propertyType:"base",type:"string",defaultValue:"Control"},registerSourceId:{propertyType:"base",type:"string",defaultValue:"TabBar"},toggle:{propertyType:"base",defaultValue:!0},radio:{propertyType:"base",defaultValue:!0},padding:{propertyType:"style",type:"string",element:"_containerElement",forceOverwrite:!0},transition:{propertyType:"style",type:"string"},containerBorderWidth:{propertyType:"style",type:"string",element:"_containerElement",style:"borderWidth"},containerBorderStyle:{propertyType:"style",type:"string",element:"_containerElement",style:"borderStyle"},containerBorderRadius:{propertyType:"style",type:"string",element:"_containerElement",style:"borderRadius"},containerTransition:{propertyType:"style",type:"string",element:"_containerElement",style:"transition"},showSymbol:{propertyType:"child",type:"boolean",child:"_symbolElement",childProperty:"show",defaultValue:!1},iconFont:{propertyType:"child",type:"string",child:"_symbolElement"},symbol:{propertyType:"child",type:"string",child:"_symbolElement"},symbolOn:{propertyType:"member",type:"string"},symbolOff:{propertyType:"member",type:"string"},symbolType:{propertyType:"child",type:"string",child:"_symbolElement"},symbolSize:{propertyType:"child",type:"string",child:"_symbolElement"},symbolMargin:{propertyType:"child",type:"string",child:"_symbolElement",childProperty:"margin"},symbolPosition:{propertyType:"member",type:"string",defaultValue:"Center"},showText:{propertyType:"child",type:"boolean",child:"_textElement",childProperty:"show",defaultValue:!0},textWidth:{propertyType:"child",type:"string",child:"_textElement",childProperty:"width"},textHeight:{propertyType:"child",type:"string",child:"_textElement",childProperty:"height"},textMargin:{propertyType:"child",type:"string",child:"_textElement",childProperty:"margin"},textPadding:{propertyType:"child",type:"string",child:"_textElement",childProperty:"padding"},useVariableText:{propertyType:"base",type:"boolean"},text:{propertyType:"base",type:"string",defaultValue:"TabMenuButton"},localizableText:{propertyType:"base",type:"string"},textOn:{propertyType:"base",type:"string"},localizableTextOn:{propertyType:"base",type:"string"},textOff:{propertyType:"base",type:"string"},localizableTextOff:{propertyType:"base",type:"string"},textAlignment:{propertyType:"child",type:"string",child:"_textElement"},lineClamp:{propertyType:"child",type:"number",child:"_textElement"},textWrapping:{propertyType:"child",type:"string",child:"_textElement"},textTrimming:{propertyType:"child",type:"string",child:"_textElement"},fontClass:{propertyType:"child",type:"string",child:"_textElement",forceOverwrite:!0,defaultValue:"Button"},fontSize:{propertyType:"child",type:"string",child:"_textElement",forceOverwrite:!0},fontWeight:{propertyType:"child",type:"string",child:"_textElement",forceOverwrite:!0},lineHeight:{propertyType:"child",type:"string",child:"_textElement",forceOverwrite:!0},textContrast:{propertyType:"child",type:"number",child:"_textElement"},uppercase:{propertyType:"child",type:"boolean",child:"_textElement",defaultValue:!0},textPosition:{propertyType:"member",type:"string",defaultValue:"Center"},showExpandingSymbol:{propertyType:"child",type:"boolean",child:"_expandingSymbolElement",childProperty:"show",defaultValue:!0},expandingSymbolIconFont:{propertyType:"child",type:"string",child:"_expandingSymbolElement",defaultValue:"material-icons"},collapsedSymbol:{propertyType:"member",type:"string",defaultValue:"expand_more"},expandedSymbol:{propertyType:"member",type:"string",defaultValue:"expand_less"},expandingSymbolType:{propertyType:"child",type:"string",child:"_expandingSymbolElement",childProperty:"symbolType"},expandingSymbolSize:{propertyType:"child",type:"string",child:"_expandingSymbolElement",childProperty:"symbolSize"},expandingSymbolMargin:{propertyType:"child",type:"string",child:"_expandingSymbolElement",childProperty:"margin"},menuItems:{propertyType:"child",type:"string",child:"_menuElement"},menuWidth:{propertyType:"child",type:"string",child:"_menuElement",childProperty:"width"},menuHeight:{propertyType:"child",type:"string",child:"_menuElement",childProperty:"height"},menuMargin:{propertyType:"member",type:"string",defaultValue:"0px"},menuPadding:{propertyType:"child",type:"string",child:"_menuElement",childProperty:"padding"},menuBorderWidth:{propertyType:"child",type:"string",child:"_menuElement",childProperty:"borderWidth"},menuBorderStyle:{propertyType:"child",type:"string",child:"_menuElement",childProperty:"borderStyle"},menuBorderRadius:{propertyType:"member",type:"string",defaultValue:"0px"},menuShadow:{propertyType:"member",type:"string"},menuPlacement:{propertyType:"member",type:"string",defaultValue:"Bottom"},popoverId:{propertyType:"member",type:"string",defaultValue:"Popover"},menuBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BackgroundColor"},menuBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"},backgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BackgroundColor"},hoverBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@HoverBackgroundColor"},pressedBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@PressedBackgroundColor"},checkedBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@CheckedBackgroundColor"},checkedHoverBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@CheckedHoverBackgroundColor"},checkedPressedBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@CheckedPressedBackgroundColor"},disabledBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledBackgroundColor"},foregroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},hoverForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},pressedForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},checkedForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@AltForegroundColor"},checkedHoverForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},checkedPressedForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@AltForegroundColor"},disabledForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledForegroundColor"},borderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"},hoverBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@HoverBorderColor"},checkedBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@CheckedBorderColor"},checkedHoverBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@CheckedHoverBorderColor"},disabledBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledBorderColor"}},A.TabMenuButton=TabMenuButton}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class ToggleButton extends x.UI.ToggleButtonBase{constructor(A,V){super(A,V),this._containerElement=null,this._symbolElement=null,this._textElement=null,this.inputEventsEnable=!0,this.addPropertyList(ToggleButton,ToggleButton.propertyList),this.defaultConstructor(A,this.inlineOptions,x.UI.ToggleButton.controlName,x.UI.ToggleButton.className)}createTemplate(){if(x.Utilities.isInDesignMode())return this.element.innerHTML=['<div class="vw-togglebutton__container">','<div class="vw-togglebutton__symbol" data-win-control="VisiWin.UI.Symbol"></div>','<div class="vw-togglebutton__text" data-win-control="VisiWin.UI.TextBlock"></div>',"</div>"].join("\n"),this._containerElement=this.element.firstElementChild,this._symbolElement=this._containerElement.firstElementChild,this._textElement=this._symbolElement.nextElementSibling,this.processElements([this._symbolElement,this._textElement]);var A=null!=this.inlineOptions.showSymbol?this.inlineOptions.showSymbol:this.getStyleProperty("showSymbol")?this.getStyleProperty("showSymbol"):x.UI.ToggleButton.propertyList.showSymbol.defaultValue,V=null!=this.inlineOptions.showText?this.inlineOptions.showText:this.getStyleProperty("showText")?this.getStyleProperty("showText"):x.UI.ToggleButton.propertyList.showText.defaultValue,R='<div class="vw-togglebutton__container">';return A&&(R+='<div class="vw-togglebutton__symbol" data-win-control="VisiWin.UI.Symbol"></div>'),V&&(R+='<div class="vw-togglebutton__text" data-win-control="VisiWin.UI.TextBlock"></div>'),R+="</div>",this.element.innerHTML=R,this._containerElement=this.element.firstElementChild,A?(this._symbolElement=this._containerElement.firstElementChild,V&&(this._textElement=this._symbolElement.nextElementSibling)):V&&(this._textElement=this._containerElement.firstElementChild),this.processElements([this._symbolElement,this._textElement])}_updateColors(x){this.disabled?(this._textElement&&this._textElement.winControl&&this.setColor("disabledForegroundColor","foregroundColor",null,"_textElement"),this._symbolElement&&this._symbolElement.winControl&&this.setColor("disabledForegroundColor","foregroundColor",null,"_symbolElement"),this.setColor("disabledBackgroundColor","backgroundColor"),this.setColor("disabledBorderColor","borderColor"),this._containerElement.style.backgroundColor=""):this.checked?(this._textElement&&this._textElement.winControl&&this.setColor("checkedForegroundColor","foregroundColor",null,"_textElement"),this._symbolElement&&this._symbolElement.winControl&&this.setColor("checkedForegroundColor","foregroundColor",null,"_symbolElement"),this.setColor("checkedBackgroundColor","backgroundColor"),this.pressed?(this._textElement&&this._textElement.winControl&&this.setColor("checkedPressedForegroundColor","foregroundColor",null,"_textElement"),this._symbolElement&&this._symbolElement.winControl&&this.setColor("checkedPressedForegroundColor","foregroundColor",null,"_symbolElement"),this.setColor("checkedPressedBackgroundColor","backgroundColor","_containerElement")):this.hover?(this.setColor("checkedHoverBorderColor","borderColor"),this.setColor("checkedHoverBackgroundColor","backgroundColor","_containerElement"),this.setColor("checkedHoverForegroundColor","foregroundColor","_textElement")):(this.setColor("checkedBorderColor","borderColor"),this._containerElement.style.backgroundColor="",this.setColor("checkedForegroundColor","foregroundColor","_textElement"))):(this._textElement&&this._textElement.winControl&&this.setColor("foregroundColor","foregroundColor",null,"_textElement"),this._symbolElement&&this._symbolElement.winControl&&this.setColor("foregroundColor","foregroundColor",null,"_symbolElement"),this.setColor("backgroundColor"),this.pressed?(this._textElement&&this._textElement.winControl&&this.setColor("pressedForegroundColor","foregroundColor",null,"_textElement"),this._symbolElement&&this._symbolElement.winControl&&this.setColor("pressedForegroundColor","foregroundColor",null,"_symbolElement"),this.setColor("pressedBackgroundColor","backgroundColor","_containerElement")):this.hover?(this.setColor("hoverBorderColor","borderColor"),this.setColor("hoverBackgroundColor","backgroundColor","_containerElement"),this.setColor("hoverForegroundColor","foregroundColor","_textElement")):(this.setColor("borderColor","borderColor"),this._containerElement.style.backgroundColor="",this.setColor("foregroundColor","foregroundColor","_textElement")))}ready(){this.onNavToggleAction(null)}_updateLayout(x){if("updateLayout"!=x.changeName&&"disabled"!=x.changeName&&"pressed"!=x.changeName&&"checked"!=x.changeName&&"shadow"!=x.changeName&&"pressedShadow"!=x.changeName&&"checkedShadow"!=x.changeName&&"checkedPressedShadow"!=x.changeName||(this.disabled?this.element.style.boxShadow="":this.checked?(this.element.style.boxShadow=this.getColor("checkedShadow"),this.pressed&&(this.element.style.boxShadow=this.getColor("checkedPressedShadow"))):(this.element.style.boxShadow=this.getColor("shadow"),this.pressed&&(this.element.style.boxShadow=this.getColor("pressedShadow")))),"updateLayout"!=x.changeName&&"text"!=x.changeName||this._textElement&&this._textElement.winControl&&(this._textElement.winControl.text=this.text,this.checked?this.textOn?this._textElement.winControl.text=this.textOn:this._textElement.winControl.text=this.text:this.checked?this._textElement.winControl.text=this.text:this.textOff?this._textElement.winControl.text=this.textOff:this._textElement.winControl.text=this.text),"updateLayout"!=x.changeName&&"checked"!=x.changeName&&"symbolOn"!=x.changeName&&"symbolOff"!=x.changeName||(this.symbolOn||this.symbolOff)&&(this.checked?this.symbol=this.symbolOn:this.symbol=this.symbolOff),"updateLayout"==x.changeName||"showSymbol"==x.changeName||"showText"==x.changeName||"symbolPosition"==x.changeName||"textPosition"==x.changeName)if(!this.showSymbol&&this.showText)this._containerElement.style.flexDirection="row",this._containerElement.style.alignItems="Top"==this.textPosition?"flex-start":"Bottom"==this.textPosition?"flex-end":"center",this._containerElement.style.justifyContent="Left"==this.textPosition?"flex-start":"Right"==this.textPosition?"flex-end":"center";else if(this.showSymbol&&!this.showText)this._containerElement.style.flexDirection="row",this._containerElement.style.alignItems="Top"==this.symbolPosition?"flex-start":"Bottom"==this.symbolPosition?"flex-end":"center",this._containerElement.style.justifyContent="Left"==this.symbolPosition?"flex-start":"Right"==this.symbolPosition?"flex-end":"center";else if(this.showSymbol&&this.showText)switch(this._containerElement.style.flexDirection="Left"==this.symbolPosition?"row":"Top"==this.symbolPosition?"column":"Right"==this.symbolPosition?"row-reverse":"Bottom"==this.symbolPosition?"column-reverse":"row",this.textPosition){case"Left":this._containerElement.style.alignItems="Left"==this.symbolPosition||"Right"==this.symbolPosition||"Center"==this.symbolPosition?("Left"==this.symbolPosition||this.symbolPosition,"center"):(this.symbolPosition,"flex-start"),this._containerElement.style.justifyContent="Left"==this.symbolPosition||"Right"==this.symbolPosition||"Center"==this.symbolPosition?"Left"==this.symbolPosition||"Center"==this.symbolPosition?"flex-start":"flex-end":(this.symbolPosition,"center");break;case"Top":this._containerElement.style.alignItems="Left"==this.symbolPosition||"Right"==this.symbolPosition||"Center"==this.symbolPosition?("Left"==this.symbolPosition||this.symbolPosition,"flex-start"):(this.symbolPosition,"center"),this._containerElement.style.justifyContent="Left"==this.symbolPosition||"Right"==this.symbolPosition||"Center"==this.symbolPosition?("Left"==this.symbolPosition||this.symbolPosition,"center"):"Top"==this.symbolPosition?"flex-start":"flex-end";break;case"Right":this._containerElement.style.alignItems="Left"==this.symbolPosition||"Right"==this.symbolPosition||"Center"==this.symbolPosition?("Left"==this.symbolPosition||this.symbolPosition,"center"):(this.symbolPosition,"flex-end"),this._containerElement.style.justifyContent="Left"==this.symbolPosition||"Right"==this.symbolPosition||"Center"==this.symbolPosition?"Left"==this.symbolPosition||"Center"==this.symbolPosition?"flex-end":"flex-start":(this.symbolPosition,"center");break;case"Bottom":this._containerElement.style.alignItems="Left"==this.symbolPosition||"Right"==this.symbolPosition||"Center"==this.symbolPosition?("Left"==this.symbolPosition||this.symbolPosition,"flex-end"):(this.symbolPosition,"center"),this._containerElement.style.justifyContent="Left"==this.symbolPosition||"Right"==this.symbolPosition||"Center"==this.symbolPosition?("Left"==this.symbolPosition||this.symbolPosition,"center"):"Top"==this.symbolPosition?"flex-end":"flex-start";break;default:this._containerElement.style.alignItems="center",this._containerElement.style.justifyContent="center"}}dispose(){return super.dispose()}}ToggleButton.namespace="VisiWin.UI",ToggleButton.controlName="ToggleButton",ToggleButton.className="vw-togglebutton",ToggleButton.propertyList={designerType:{propertyType:"base",type:"string",defaultValue_DM:"Control"},registerSourceId:{propertyType:"base",defaultValue:"ToggleGroup"},padding:{propertyType:"style",type:"string",element:"_containerElement",forceOverwrite:!0},transition:{propertyType:"style",type:"string"},shadow:{propertyType:"member",type:"string",resourceValue:["getShadow"],forceOverwrite:!0},pressedShadow:{propertyType:"member",type:"string",resourceValue:["getShadow"]},checkedShadow:{propertyType:"member",type:"string",resourceValue:["getShadow"]},checkedPressedShadow:{propertyType:"member",type:"string",resourceValue:["getShadow"]},containerBorderWidth:{propertyType:"style",type:"string",element:"_containerElement",style:"borderWidth"},containerBorderStyle:{propertyType:"style",type:"string",element:"_containerElement",style:"borderStyle"},containerBorderRadius:{propertyType:"style",type:"string",element:"_containerElement",style:"borderRadius"},containerTransition:{propertyType:"style",type:"string",element:"_containerElement",style:"transition"},showSymbol:{propertyType:"child",type:"boolean",child:"_symbolElement",childProperty:"show",defaultValue:!1},iconFont:{propertyType:"child",type:"string",child:"_symbolElement"},symbol:{propertyType:"child",type:"string",child:"_symbolElement"},symbolOn:{propertyType:"member",type:"string"},symbolOff:{propertyType:"member",type:"string"},symbolType:{propertyType:"child",type:"string",child:"_symbolElement"},symbolSize:{propertyType:"child",type:"string",child:"_symbolElement"},symbolMargin:{propertyType:"child",type:"string",child:"_symbolElement",childProperty:"margin"},symbolPosition:{propertyType:"member",type:"string",defaultValue:"Center"},showText:{propertyType:"child",type:"boolean",child:"_textElement",childProperty:"show",defaultValue:!0},textWidth:{propertyType:"child",type:"string",child:"_textElement",childProperty:"width"},textHeight:{propertyType:"child",type:"string",child:"_textElement",childProperty:"height"},textMargin:{propertyType:"child",type:"string",child:"_textElement",childProperty:"margin"},textPadding:{propertyType:"child",type:"string",child:"_textElement",childProperty:"padding"},useVariableText:{propertyType:"base",type:"boolean"},text:{propertyType:"base",type:"string",defaultValue:"ToggleButton"},localizableText:{propertyType:"base",type:"string"},textOn:{propertyType:"base",type:"string"},localizableTextOn:{propertyType:"base",type:"string"},textOff:{propertyType:"base",type:"string"},localizableTextOff:{propertyType:"base",type:"string"},textAlignment:{propertyType:"child",type:"string",child:"_textElement"},lineClamp:{propertyType:"child",type:"number",child:"_textElement"},textWrapping:{propertyType:"child",type:"string",child:"_textElement"},textTrimming:{propertyType:"child",type:"string",child:"_textElement"},fontClass:{propertyType:"child",type:"string",child:"_textElement",forceOverwrite:!0,defaultValue:"Button"},fontSize:{propertyType:"child",type:"string",child:"_textElement",forceOverwrite:!0},fontWeight:{propertyType:"child",type:"string",child:"_textElement",forceOverwrite:!0},lineHeight:{propertyType:"child",type:"string",child:"_textElement",forceOverwrite:!0},textContrast:{propertyType:"child",type:"number",child:"_textElement"},uppercase:{propertyType:"child",type:"boolean",child:"_textElement"},textPosition:{propertyType:"member",type:"string",defaultValue:"Center"},backgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ChromeMedium"},hoverBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@HoverBackgroundColor"},pressedBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@PressedBackgroundColor"},checkedBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@CheckedBackgroundColor"},checkedHoverBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@CheckedHoverBackgroundColor"},checkedPressedBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@CheckedPressedBackgroundColor"},disabledBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledBackgroundColor"},foregroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},hoverForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},pressedForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},checkedForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@AltForegroundColor"},checkedHoverForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},checkedPressedForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@AltForegroundColor"},disabledForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledForegroundColor"},borderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"},hoverBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@HoverBorderColor"},checkedBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@CheckedBorderColor"},checkedHoverBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@CheckedHoverBorderColor"},disabledBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledBorderColor"}},A.ToggleButton=ToggleButton}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class DropDownBox extends x.UI.VariableBase{constructor(A,V){super(A,V),this._labelElement=null,this._inputContainerElement=null,this._inputFieldContainerElement=null,this._inputElement=null,this._inputTextElement=null,this._leadingSymbolElement=null,this._inputFieldElement=null,this._floatingLabelElement=null,this._trailingSymbolElement=null,this._underlineElement=null,this._menuElement=null,this._popoverElement=null,this._boundPopoverHandler=this._popoverHandler.bind(this),this._boundHoverInHandler=this._hoverInHandler.bind(this),this._boundHoverOutHandler=this._hoverOutHandler.bind(this),this._boundBeforeShowChangedHandler=this._beforeShowChangedHandler.bind(this),this._boundBeforeHideChangedHandler=this._beforeHideChangedHandler.bind(this),this.observe={"_floatingLabelElement.winControl.show":function(x){this._updateLayoutBase("property","showFloatingLabel",x.newValue,x.oldValue)},"_leadingSymbolElement.winControl.show":function(x){this._updateLayoutBase("property","showLeadingSymbol",x.newValue,x.oldValue)},"_trailingSymbolElement.winControl.show":function(x){this._updateLayoutBase("property","showTrailingSymbol",x.newValue,x.oldValue)},"_leadingSymbolElement.winControl.symbolSize":function(x){this._updateLayoutBase("property","leadingSymbolSize",x.newValue,x.oldValue)},"_trailingSymbolElement.winControl.symbolSize":function(x){this._updateLayoutBase("property","trailingSymbolSize",x.newValue,x.oldValue)},"_leadingSymbolElement.winControl.margin":function(x){this._updateLayoutBase("property","leadingSymbolMargin",x.newValue,x.oldValue)},"_trailingSymbolElement.winControl.margin":function(x){this._updateLayoutBase("property","trailingSymbolMargin",x.newValue,x.oldValue)},"_menuElement.winControl.selectedIndex":function(A){var V=null,R=null,D=this.inputText,N=this.localizableInputText,U=this.iconFont,B=this.symbol,F=this.symbolType,W=this.leadingIconFont,H=this.leadingSymbol,z=this.leadingSymbolType;this._menuElement&&this._menuElement.winControl&&this._menuElement.winControl._items&&this._menuElement.winControl._items[this._menuElement.winControl.selectedIndex]&&(V=this._menuElement.winControl._items[this._menuElement.winControl.selectedIndex]),V&&(null!=V.value&&(R=V.value),null!=V.text&&(D=V.text),null!=V.localizableText&&(N=V.localizableText),null!=V.iconFont&&(U=W=V.iconFont),null!=V.symbol&&(B=H=V.symbol),null!=V.symbolType&&(F=z=V.symbolType)),null!=R&&this.variableName&&this._vwVariable&&R!=this._vwVariable.Value&&x.AppServices.VariableService.setValueAsync(this.variableName,R),this.value=R,this._labelElement&&this._labelElement.winControl&&this.showSymbol&&(this._labelElement.winControl.iconFont=U,this._labelElement.winControl.symbol=B,this._labelElement.winControl.symbolType=F),this._leadingSymbolElement&&this._leadingSymbolElement.winControl&&this.showLeadingSymbol&&(this._leadingSymbolElement.winControl.iconFont=W,this._leadingSymbolElement.winControl.symbol=H,this._leadingSymbolElement.winControl.symbolType=z),this._inputTextElement&&this._inputTextElement.winControl&&(this._inputTextElement.winControl.text=D,this._inputTextElement.winControl.localizableText=N),this.dispatchEvent("selectedIndexChanged",A)}},this._checked=!1,this.addPropertyList(DropDownBox,DropDownBox.propertyList),this.defaultConstructor(A,this.inlineOptions,x.UI.DropDownBox.controlName,x.UI.DropDownBox.className)}createTemplate(){var A=null!=this.inlineOptions.showSymbol?this.inlineOptions.showSymbol:this.getStyleProperty("showSymbol")?this.getStyleProperty("showSymbol"):x.UI.DropDownBox.propertyList.showSymbol.defaultValue,V=document.createElement("div");if(x.Utilities.reparentChildren(this.element,V),this.element.innerHTML=['<div class="vw-dropdownbox__label" data-win-control="VisiWin.UI.Label" data-win-options="{showSymbol:'+A+'}"></div>','<div class="vw-dropdownbox__inputcontainer">','<div class="vw-dropdownbox__inputfieldcontainer">','<div class="vw-dropdownbox__input">','<div class="vw-dropdownbox__inputtext" data-win-control="VisiWin.UI.TextBlock"></div>',"</div>",'<div class="vw-dropdownbox__leadingsymbol" data-win-control="VisiWin.UI.Symbol"></div>','<div class="vw-dropdownbox__inputfield">','<div class="vw-dropdownbox__floatinglabel" data-win-control="VisiWin.UI.TextBlock"></div>',"</div>",'<div class="vw-dropdownbox__trailingsymbol" data-win-control="VisiWin.UI.Symbol"></div>','<div class="vw-dropdownbox__underline" data-win-control="VisiWin.UI.Divider"></div>',"</div>",'<div class="vw-dropdownbox__menu" data-win-control="VisiWin.UI.Menu"></div>',"</div>"].join("\n"),this._labelElement=this.element.firstElementChild,this._inputContainerElement=this._labelElement.nextElementSibling,this._inputFieldContainerElement=this._inputContainerElement.firstElementChild,this._inputElement=this._inputFieldContainerElement.firstElementChild,this._inputTextElement=this._inputElement.firstElementChild,this._leadingSymbolElement=this._inputElement.nextElementSibling,this._inputFieldElement=this._leadingSymbolElement.nextElementSibling,this._floatingLabelElement=this._inputFieldElement.firstElementChild,this._trailingSymbolElement=this._inputFieldElement.nextElementSibling,this._underlineElement=this._trailingSymbolElement.nextElementSibling,this._menuElement=this._inputFieldContainerElement.nextElementSibling,x.Utilities.reparentChildren(V,this._menuElement),!x.Utilities.isInDesignMode()){var R=null!=this.inlineOptions.popoverId?this.inlineOptions.popoverId:this.getStyleProperty("popoverId")?this.getStyleProperty("popoverId"):x.UI.DropDownBox.propertyList.popoverId.defaultValue,D=document.getElementById(R);D&&D.winControl?this._popoverElement=D.winControl:this._popoverElement=new x.UI.Popover(null,{})}return this.processElements([this._labelElement,this._inputTextElement,this._leadingSymbolElement,this._floatingLabelElement,this._trailingSymbolElement,this._underlineElement,this._menuElement])}createHandler(){this._inputElement.addEventListener(A.PointerEventType.pointerup,this._boundPopoverHandler,!1),this._inputElement.addEventListener(A.PointerEventType.pointerenter,this._boundHoverInHandler,!1),this._inputElement.addEventListener(A.PointerEventType.pointerleave,this._boundHoverOutHandler,!1)}removeHandler(){this._inputElement.removeEventListener(A.PointerEventType.pointerup,this._boundPopoverHandler,!1),this._inputElement.removeEventListener(A.PointerEventType.pointerenter,this._boundHoverInHandler,!1),this._inputElement.removeEventListener(A.PointerEventType.pointerleave,this._boundHoverOutHandler,!1)}afterInit(){this._popoverElement&&(this._popoverElement.menuElement=this._menuElement)}get checked(){return this._checked}set checked(A){if(this._checked!=A){var V=this._checked;this._checked=A,this._checked?(x.Utilities.addClass(this.element,"checked"),x.Utilities.removeClass(this.element,"unchecked")):(x.Utilities.removeClass(this.element,"checked"),x.Utilities.addClass(this.element,"unchecked")),this._updateColorsBase("state","checked",A,V),this._updateLayoutBase("state","checked",A,V),this.dispatchNotifyPropertyChanged("state","checked",A,V,"checkedChanged")}}set open(A){x.Utilities.isInDesignMode()&&(this.checked=A)}_updateColors(x){this.disabled?(this.setColor("disabledBackgroundColor","backgroundColor"),this.setColor("disabledBackgroundColor","backgroundColor","_inputFieldContainerElement"),this.setColor("disabledBackgroundColor","backgroundColor","_inputElement"),this.setColor("backgroundColor","backgroundColor",null,"_floatingLabelElement"),this.setColor("disabledForegroundColor","backgroundColor",null,"_underlineElement"),this.setColor("disabledForegroundColor","symbolForegroundColor",null,"_labelElement"),this.setColor("disabledForegroundColor","labelForegroundColor",null,"_labelElement"),this.setColor("disabledForegroundColor","foregroundColor",null,"_inputTextElement"),this.setColor("disabledForegroundColor","foregroundColor",null,"_leadingSymbolElement"),this.setColor("disabledForegroundColor","foregroundColor",null,"_floatingLabelElement"),this.setColor("disabledForegroundColor","foregroundColor",null,"_trailingSymbolElement"),this.setColor("disabledBorderColor","borderColor"),this.setColor("disabledBorderColor","borderColor","_inputElement"),this._floatingLabelElement.style.outlineColor=this.getColor("disabledFloatingLabelOutlineColor"),this.setColor("disabledBackgroundColor","backgroundColor",null,"_menuElement"),this.setColor("disabledBorderColor","borderColor",null,"_menuElement")):(this.setColor("backgroundColor"),this.setColor("inputBackgroundColor","backgroundColor","_inputFieldContainerElement"),this.setColor("floatingLabelBackgroundColor","backgroundColor",null,"_floatingLabelElement"),this.setColor("symbolForegroundColor","symbolForegroundColor",null,"_labelElement"),this.setColor("labelForegroundColor","labelForegroundColor",null,"_labelElement"),this.setColor("inputForegroundColor","foregroundColor",null,"_inputTextElement"),this.setColor("leadingSymbolForegroundColor","foregroundColor",null,"_leadingSymbolElement"),this.setColor("trailingSymbolForegroundColor","foregroundColor",null,"_trailingSymbolElement"),this.setColor("borderColor","borderColor"),this._floatingLabelElement.style.outlineColor=this.getColor("floatingLabelOutlineColor"),this.checked?(this.setColor("checkedInputBackgroundColor","backgroundColor","_inputElement"),this.setColor("checkedUnderlineColor","backgroundColor",null,"_underlineElement"),this.setColor("checkedFloatingLabelForegroundColor","foregroundColor",null,"_floatingLabelElement"),this.setColor("checkedInputBorderColor","borderColor","_inputElement")):this.hover?(this.setColor("hoverInputBackgroundColor","backgroundColor","_inputElement"),this.setColor("underlineColor","backgroundColor",null,"_underlineElement"),this.setColor("floatingLabelForegroundColor","foregroundColor",null,"_floatingLabelElement"),this.setColor("hoverInputBorderColor","borderColor","_inputElement"),this.setColor("hoverInputForegroundColor","foregroundColor","_inputTextElement")):(this.setColor("inputBackgroundColor","backgroundColor","_inputElement"),this.setColor("underlineColor","backgroundColor",null,"_underlineElement"),this.setColor("floatingLabelForegroundColor","foregroundColor",null,"_floatingLabelElement"),this.setColor("inputBorderColor","borderColor","_inputElement"),this.setColor("inputForegroundColor","foregroundColor","_inputTextElement")),this.setColor("menuBackgroundColor","backgroundColor",null,"_menuElement"),this.setColor("menuBorderColor","borderColor",null,"_menuElement"))}_updateLayout(A){if("value"==A.changeName&&this._menuElement&&this._menuElement.winControl&&this._menuElement.winControl._items&&this._menuElement.winControl._items.length>0){let x=!1;for(var V=0;V<this._menuElement.winControl._items.length;V++)this._menuElement.winControl._items[V].value==this.value&&(this._menuElement.winControl.selectedIndex=V,x=!0);x||(this._menuElement.winControl.selectedIndex=-1)}if("updateLayout"==A.changeName||"inputText"==A.changeName||"localizableInputText"==A.changeName||"iconFont"==A.changeName||"symbol"==A.changeName||"symbolType"==A.changeName||"leadingIconFont"==A.changeName||"leadingSymbol"==A.changeName||"leadingSymbolType"==A.changeName){var R=null,D=this.inputText,N=this.localizableInputText,U=this.iconFont,B=this.symbol,F=this.symbolType,W=this.leadingIconFont,H=this.leadingSymbol,z=this.leadingSymbolType;this._menuElement&&this._menuElement.winControl&&this._menuElement.winControl._items&&this._menuElement.winControl._items[this._menuElement.winControl.selectedIndex]&&(R=this._menuElement.winControl._items[this._menuElement.winControl.selectedIndex]),R&&(null!=R.text&&(D=R.text),null!=R.localizableText&&(N=R.localizableText),null!=R.iconFont&&(U=W=R.iconFont),null!=R.symbol&&(B=H=R.symbol),null!=R.symbolType&&(F=z=R.symbolType)),this._labelElement&&this._labelElement.winControl&&this.showSymbol&&(this._labelElement.winControl.iconFont=U,this._labelElement.winControl.symbol=B,this._labelElement.winControl.symbolType=F),this._leadingSymbolElement&&this._leadingSymbolElement.winControl&&this.showLeadingSymbol&&(this._leadingSymbolElement.winControl.iconFont=W,this._leadingSymbolElement.winControl.symbol=H,this._leadingSymbolElement.winControl.symbolType=z),this._inputTextElement&&this._inputTextElement.winControl&&(this._inputTextElement.winControl.text=D,this._inputTextElement.winControl.localizableText=N)}if("updateLayout"==A.changeName||"alignItems"==A.changeName)switch(this.alignItems){case"Center":this.element.style.alignItems="center";break;case"Start":this.element.style.alignItems="flex-start";break;case"End":this.element.style.alignItems="flex-end";break;case"Baseline":this.element.style.alignItems="baseline";break;default:this.element.style.alignItems="stretch"}if("updateLayout"==A.changeName||"justifyContent"==A.changeName)switch(this.justifyContent){case"End":this.element.style.justifyContent="flex-end";break;case"Center":this.element.style.justifyContent="center";break;case"Space-between":this.element.style.justifyContent="space-between";break;case"Space-around":this.element.style.justifyContent="space-around";break;case"Space-evenly":this.element.style.justifyContent="space-evenly";break;default:this.element.style.justifyContent="flex-start"}if("updateLayout"!=A.changeName&&"checked"!=A.changeName||x.Utilities.isInDesignMode()&&this._menuElement&&this._menuElement.winControl&&(this._menuElement.style.display=this.checked?"inherit":"none",this._menuElement.style.position=this.checked?"absolute":"relative"),"updateLayout"!=A.changeName&&"menuMargin"!=A.changeName||x.Utilities.isInDesignMode()&&this._menuElement&&this._menuElement.winControl&&(this._menuElement.winControl.margin=this.menuMargin),"updateLayout"!=A.changeName&&"menuBorderRadius"!=A.changeName||this._menuElement&&this._menuElement.winControl&&(this._menuElement.winControl.borderRadius=this.menuBorderRadius),"updateLayout"!=A.changeName&&"menuShadow"!=A.changeName||x.Utilities.isInDesignMode()&&this._menuElement&&this._menuElement.winControl&&(this._menuElement.winControl.shadow=this.menuShadow),"updateLayout"!=A.changeName&&"inputBorderRadius"!=A.changeName||(this._inputFieldContainerElement.style.borderRadius=this.inputBorderRadius,this._inputElement.style.borderRadius=this.inputBorderRadius),"updateLayout"!=A.changeName&&"inputHeight"!=A.changeName||(this._inputFieldContainerElement.style.height=this.inputHeight,this._inputElement.style.height=this.inputHeight),"updateLayout"!=A.changeName&&"checked"!=A.changeName&&"floatingLabelTransition"!=A.changeName||this._floatingLabelElement&&this.showFloatingLabel&&(x.Utilities.isInDesignMode()?this._floatingLabelElement.style.transition="":this._floatingLabelElement.style.transition=this.floatingLabelTransition),"updateLayout"!=A.changeName&&"checked"!=A.changeName&&"underlineOpacity"!=A.changeName&&"checkedUnderlineOpacity"!=A.changeName||this._underlineElement&&this._underlineElement.winControl&&this.showUnderline&&(this.checked?this._underlineElement.winControl.opacity=this.checkedUnderlineOpacity:this._underlineElement.winControl.opacity=this.underlineOpacity),"updateLayout"!=A.changeName&&"checked"!=A.changeName&&"showUnderline"!=A.changeName&&"underlineTransition"!=A.changeName||(this._underlineElement&&this.showUnderline?(this._underlineElement.style.display="block",x.Utilities.isInDesignMode()?this._underlineElement.style.transition="":this._underlineElement.style.transition=this.underlineTransition):this._underlineElement.style.display="none"),"updateLayout"!=A.changeName&&"checked"!=A.changeName&&"underlineTransform"!=A.changeName&&"checkedUnderlineTransform"!=A.changeName||this._underlineElement&&this.showUnderline&&(this.checked?this._underlineElement.style.transform=this.checkedUnderlineTransform:this._underlineElement.style.transform=this.underlineTransform),"updateLayout"==A.changeName||"outlined"==A.changeName||"inputFieldMargin"==A.changeName||"showFloatingLabel"==A.changeName||"showLeadingSymbol"==A.changeName||"showTrailingSymbol"==A.changeName||"leadingSymbolSize"==A.changeName||"trailingSymbolSize"==A.changeName||"leadingSymbolMargin"==A.changeName||"trailingSymbolMargin"==A.changeName){var G=window.getComputedStyle(this._inputFieldElement),j=parseFloat(G.getPropertyValue("margin-left",null)),q=parseFloat(G.getPropertyValue("margin-right",null)),Q=j,K=q,J=this.outlined?0:this.showFloatingLabel?20:0,X=this.outlined?0:this.showFloatingLabel?6:0,Y=0,$=0;if(this.showLeadingSymbol&&this._leadingSymbolElement){var Z=window.getComputedStyle(this._leadingSymbolElement),ee=parseFloat(Z.getPropertyValue("width",null));Q=(Y=parseFloat(Z.getPropertyValue("margin-left",null))+ee+(se=parseFloat(Z.getPropertyValue("margin-right",null)))+j)>Q?Y:Q}if(this.showTrailingSymbol&&this._trailingSymbolElement){var te=window.getComputedStyle(this._trailingSymbolElement),ie=parseFloat(te.getPropertyValue("width",null));K=($=q+parseFloat(te.getPropertyValue("margin-left",null))+ie+parseFloat(te.getPropertyValue("margin-right",null)))>K?$:K}this._inputElement.style.padding=J+"px "+K+"px "+X+"px "+Q+"px"}if(("updateLayout"==A.changeName||"checked"==A.changeName||"inputText"==A.changeName||"outlined"==A.changeName||"inputFieldMargin"==A.changeName||"showFloatingLabel"==A.changeName||"floatingLabelFixed"==A.changeName||"showLeadingSymbol"==A.changeName||"leadingSymbolSize"==A.changeName||"leadingSymbolMargin"==A.changeName)&&this.showFloatingLabel&&this._floatingLabelElement)if(this.outlined)if(this.checked||this._inputTextElement.winControl.text||this.floatingLabelFixed){var ne=0,re=this._floatingLabelElement.clientHeight||24;if(this.showLeadingSymbol&&this._leadingSymbolElement){Z=window.getComputedStyle(this._leadingSymbolElement),ee=parseFloat(Z.getPropertyValue("width",null));var se=parseFloat(Z.getPropertyValue("margin-right",null));G=window.getComputedStyle(this._inputFieldElement);ne=ee+se+(j=parseFloat(G.getPropertyValue("margin-left",null)))}this._floatingLabelElement.style.alignSelf="flex-start",this._floatingLabelElement.style.transform="translateX("+-ne+"px) translateY("+-re/2+"px) scale(0.75)"}else this._floatingLabelElement.style.alignSelf="center",this._floatingLabelElement.style.transform="translateX(0px) translateY(0px) scale(1)";else this._floatingLabelElement.style.alignSelf="center",this.checked||this._inputTextElement.winControl.text||this.floatingLabelFixed?this._floatingLabelElement.style.transform="translateX(0px) translateY(-60%) scale(0.75)":this._floatingLabelElement.style.transform="translateX(0px) translateY(0px) scale(1)";if("updateLayout"==A.changeName||"labelPosition"==A.changeName)switch(this.labelPosition){case"Top":this.element.style.flexDirection="column";break;case"Right":this.element.style.flexDirection="row-reverse";break;case"Bottom":this.element.style.flexDirection="column-reverse";break;default:this.element.style.flexDirection="row"}}_popoverHandler(x){if(this._menuElement&&this._menuElement.winControl)for(var A=this._menuElement.winControl._items,V=0;V<A.length;V++)A[V].attach();this._popoverElement&&(this._popoverElement.addEventListener("beforeShowChanged",this._boundBeforeShowChangedHandler,!1),this._popoverElement.addEventListener("beforeHideChanged",this._boundBeforeHideChangedHandler,!1),this._popoverElement.menuElement=this._menuElement,this._popoverElement.anchor=this.element,this._popoverElement.placement=this.menuPlacement,this._popoverElement.margin=this.menuMargin,this._popoverElement.borderRadius=this.menuBorderRadius,this._popoverElement.shadow=this.menuShadow,this._popoverElement.show())}_hoverInHandler(x){this.hover=!0}_hoverOutHandler(x){this.hover=!1}_beforeShowChangedHandler(x){this.checked=!0}_beforeHideChangedHandler(x){if(this._menuElement&&this._menuElement.winControl)for(var A=this._menuElement.winControl._items,V=0;V<A.length;V++)A[V].detach();this._popoverElement&&(this._popoverElement.removeEventListener("beforeShowChanged",this._boundBeforeShowChangedHandler,!1),this._popoverElement.removeEventListener("beforeHideChanged",this._boundBeforeHideChangedHandler,!1)),this.checked=!1}dispose(){var x=super.dispose();if(this._menuElement&&this._menuElement.winControl)for(var A=this._menuElement.winControl._items,V=0;V<A.length;V++)A[V].detach();return this._popoverElement&&(this._popoverElement.removeEventListener("beforeShowChanged",this._boundBeforeShowChangedHandler,!1),this._popoverElement.removeEventListener("beforeHideChanged",this._boundBeforeHideChangedHandler,!1)),x}}DropDownBox.namespace="VisiWin.UI",DropDownBox.controlName="DropDownBox",DropDownBox.className="vw-dropdownbox",DropDownBox.propertyList={designerType:{propertyType:"base",type:"string",defaultValue_DM:"Control"},selectedIndexChanged:{propertyType:"event",triggerDataName:"value"},checkedChanged:{propertyType:"event",triggerDataName:"checked"},checked:{propertyType:"custom",type:"boolean",defaultValue:!1},open:{propertyType:"custom",type:"boolean",defaultValue:!1},alignItems:{propertyType:"member",type:"string",defaultValue:"Start"},justifyContent:{propertyType:"member",type:"string",defaultValue:"Center"},menuItems:{propertyType:"child",type:"string",child:"_menuElement"},menuWidth:{propertyType:"child",type:"string",child:"_menuElement",childProperty:"width"},menuHeight:{propertyType:"child",type:"string",child:"_menuElement",childProperty:"height"},menuMargin:{propertyType:"member",type:"string",defaultValue:"0px"},menuPadding:{propertyType:"child",type:"string",child:"_menuElement",childProperty:"padding"},menuBorderWidth:{propertyType:"child",type:"string",child:"_menuElement",childProperty:"borderWidth"},menuBorderStyle:{propertyType:"child",type:"string",child:"_menuElement",childProperty:"borderStyle"},menuBorderRadius:{propertyType:"member",type:"string",defaultValue:"0px"},menuShadow:{propertyType:"member",type:"string"},menuPlacement:{propertyType:"member",type:"string",defaultValue:"Bottom"},selectedIndex:{propertyType:"child",type:"number",child:"_menuElement",defaultValue:-1},popoverId:{propertyType:"member",type:"string",defaultValue:"Popover"},inputContainerWidth:{propertyType:"style",type:"string",element:"_inputContainerElement",style:"width"},inputContainerHeight:{propertyType:"style",type:"string",element:"_inputContainerElement",style:"height"},inputContainerMargin:{propertyType:"style",type:"string",element:"_inputContainerElement",style:"margin"},inputContainerPadding:{propertyType:"style",type:"string",element:"_inputContainerElement",style:"padding"},inputBorderWidth:{propertyType:"style",type:"string",element:"_inputElement",style:"borderWidth"},inputBorderStyle:{propertyType:"style",type:"string",element:"_inputElement",style:"borderStyle"},inputBorderRadius:{propertyType:"member",type:"string"},inputWidth:{propertyType:"style",type:"string",element:"_inputElement",style:"width"},inputHeight:{propertyType:"member",type:"string",defaultValue:"40px"},inputMargin:{propertyType:"style",type:"string",element:"_inputElement",style:"margin"},inputPadding:{propertyType:"style",type:"string",element:"_inputElement",style:"padding"},inputText:{propertyType:"member",type:"string",defaultValue:"DropDownBox"},localizableInputText:{propertyType:"member",type:"string"},inputTextAlignment:{propertyType:"child",type:"string",child:"_inputTextElement",childProperty:"textAlignment"},inputLineClamp:{propertyType:"child",type:"number",child:"_inputTextElement",childProperty:"lineClamp"},inputTextWrapping:{propertyType:"child",type:"string",child:"_inputTextElement",childProperty:"textWrapping"},inputTextTrimming:{propertyType:"child",type:"string",child:"_inputTextElement",childProperty:"textTrimming"},inputFontClass:{propertyType:"child",type:"string",child:"_inputTextElement",childProperty:"fontClass"},inputFontSize:{propertyType:"child",type:"string",child:"_inputTextElement",childProperty:"fontSize"},inputFontWeight:{propertyType:"child",type:"string",child:"_inputTextElement",childProperty:"fontWeight"},inputLineHeight:{propertyType:"child",type:"string",child:"_inputTextElement",childProperty:"lineHeight"},inputTextContrast:{propertyType:"child",type:"number",child:"_inputTextElement",childProperty:"textContrast"},inputUppercase:{propertyType:"child",type:"boolean",child:"_inputTextElement",childProperty:"uppercase"},outlined:{propertyType:"member",type:"boolean",defaultValue:!1},inputFieldMargin:{propertyType:"style",type:"string",element:"_inputFieldElement",style:"margin"},showSymbol:{propertyType:"child",type:"boolean",child:"_labelElement",defaultValue:!1},iconFont:{propertyType:"member",type:"string",defaultValue:"material-icons"},symbol:{propertyType:"member",type:"string"},symbolType:{propertyType:"member",type:"string",defaultValue:"Icon"},symbolSize:{propertyType:"child",type:"string",child:"_labelElement"},symbolMargin:{propertyType:"child",type:"string",child:"_labelElement"},symbolPosition:{propertyType:"child",type:"string",child:"_labelElement"},labelContainerWidth:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"width"},labelContainerHeight:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"height"},labelContainerMargin:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"margin"},labelContainerPadding:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"padding"},showLabel:{propertyType:"child",type:"boolean",child:"_labelElement",childProperty:"showText",defaultValue:!0},labelWidth:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"textWidth"},labelHeight:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"textHeight"},labelMargin:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"textMargin"},labelPadding:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"textPadding"},labelText:{propertyType:"child",type:"string",child:"_labelElement",forceOverwrite:!0,childProperty:"text",defaultValue:"DropDownBox"},localizableLabelText:{propertyType:"child",type:"string",child:"_labelElement",forceOverwrite:!0,childProperty:"localizableText"},labelTextAlignment:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"textAlignment"},labelLineClamp:{propertyType:"child",type:"number",child:"_labelElement",childProperty:"lineClamp"},labelTextWrapping:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"textWrapping"},labelTextTrimming:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"textTrimming"},labelFontClass:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"fontClass",defaultValue:"Label2"},labelFontSize:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"fontSize"},labelFontWeight:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"fontWeight"},labelLineHeight:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"lineHeight"},labelTextContrast:{propertyType:"child",type:"number",child:"_labelElement",childProperty:"textContrast"},labelUppercase:{propertyType:"child",type:"boolean",child:"_labelElement",childProperty:"uppercase"},labelPosition:{propertyType:"member",type:"string",defaultValue:"Top"},showLeadingSymbol:{propertyType:"child",type:"boolean",child:"_leadingSymbolElement",childProperty:"show",defaultValue:!1},leadingIconFont:{propertyType:"member",type:"string",defaultValue:"material-icons"},leadingSymbol:{propertyType:"member",type:"string"},leadingSymbolType:{propertyType:"member",type:"string",defaultValue:"Icon"},leadingSymbolSize:{propertyType:"child",type:"string",child:"_leadingSymbolElement",childProperty:"symbolSize"},leadingSymbolMargin:{propertyType:"child",type:"string",child:"_leadingSymbolElement",childProperty:"margin"},showFloatingLabel:{propertyType:"child",type:"boolean",child:"_floatingLabelElement",childProperty:"show",defaultValue:!1},floatingLabelWidth:{propertyType:"child",type:"string",child:"_floatingLabelElement",childProperty:"width"},floatingLabelHeight:{propertyType:"child",type:"string",child:"_floatingLabelElement",childProperty:"height"},floatingLabelMargin:{propertyType:"child",type:"string",child:"_floatingLabelElement",childProperty:"margin"},floatingLabelPadding:{propertyType:"child",type:"string",child:"_floatingLabelElement",childProperty:"padding"},floatingLabelText:{propertyType:"child",type:"string",child:"_floatingLabelElement",childProperty:"text",defaultValue:"DropDownBox"},localizableFloatingLabelText:{propertyType:"child",type:"string",child:"_floatingLabelElement",childProperty:"localizableText"},floatingLabelTextAlignment:{propertyType:"child",type:"string",child:"_floatingLabelElement",childProperty:"textAlignment"},floatingLabelLineClamp:{propertyType:"child",type:"number",child:"_floatingLabelElement",childProperty:"lineClamp"},floatingLabelTextWrapping:{propertyType:"child",type:"string",child:"_floatingLabelElement",childProperty:"textWrapping"},floatingLabelTextTrimming:{propertyType:"child",type:"string",child:"_floatingLabelElement",childProperty:"textTrimming"},floatingLabelFontClass:{propertyType:"child",type:"string",child:"_floatingLabelElement",childProperty:"fontClass"},floatingLabelFontSize:{propertyType:"child",type:"string",child:"_floatingLabelElement",childProperty:"fontSize"},floatingLabelFontWeight:{propertyType:"child",type:"string",child:"_floatingLabelElement",childProperty:"fontWeight"},floatingLabelLineHeight:{propertyType:"child",type:"string",child:"_floatingLabelElement",childProperty:"lineHeight"},floatingLabelTextContrast:{propertyType:"child",type:"number",child:"_floatingLabelElement",childProperty:"textContrast"},floatingLabelUppercase:{propertyType:"child",type:"boolean",child:"_floatingLabelElement",childProperty:"uppercase"},floatingLabelFixed:{propertyType:"member",type:"boolean",defaultValue:!1},floatingLabelTransition:{propertyType:"member",type:"string"},floatingLabelOutlineWidth:{propertyType:"style",type:"string",element:"_floatingLabelElement",style:"outlineWidth"},floatingLabelOutlineStyle:{propertyType:"style",type:"string",element:"_floatingLabelElement",style:"outlineStyle"},showTrailingSymbol:{propertyType:"child",type:"boolean",child:"_trailingSymbolElement",childProperty:"show",defaultValue:!0},trailingIconFont:{propertyType:"child",type:"string",child:"_trailingSymbolElement",childProperty:"iconFont"},trailingSymbol:{propertyType:"child",type:"string",child:"_trailingSymbolElement",childProperty:"symbol",defaultValue:"arrow_drop_down"},trailingSymbolType:{propertyType:"child",type:"string",child:"_trailingSymbolElement",childProperty:"symbolType"},trailingSymbolSize:{propertyType:"child",type:"string",child:"_trailingSymbolElement",childProperty:"symbolSize"},trailingSymbolMargin:{propertyType:"child",type:"string",child:"_trailingSymbolElement",childProperty:"margin"},showUnderline:{propertyType:"member",type:"boolean",defaultValue:!1},underlineHeight:{propertyType:"child",type:"string",child:"_underlineElement",childProperty:"height"},underlineOpacity:{propertyType:"member",type:"number"},checkedUnderlineOpacity:{propertyType:"member",type:"number"},underlineTransition:{propertyType:"member",type:"string",defaultValue:""},underlineTransform:{propertyType:"member",type:"string",defaultValue:""},checkedUnderlineTransform:{propertyType:"member",type:"string",defaultValue:""},menuBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BackgroundColor"},menuBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"},backgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BackgroundColor"},inputBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},hoverInputBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},checkedInputBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},floatingLabelBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},underlineColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"},checkedUnderlineColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@CheckedBorderColor"},symbolForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},labelForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},inputForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},hoverInputForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},leadingSymbolForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},floatingLabelForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},checkedFloatingLabelForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},trailingSymbolForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},borderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"},inputBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"},hoverInputBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@HoverBorderColor"},checkedInputBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@CheckedBorderColor"},floatingLabelOutlineColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},disabledBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledBackgroundColor"},disabledForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledForegroundColor"},disabledBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledBorderColor"},disabledFloatingLabelOutlineColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"}},A.DropDownBox=DropDownBox}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class DropDownBoxItem extends x.UI.ToggleButtonBase{constructor(A,V){super(A,V),this._containerElement=null,this._symbolElement=null,this._textElement=null,this.inputEventsEnable=!0,this.addPropertyList(DropDownBoxItem,DropDownBoxItem.propertyList),this.defaultConstructor(A,this.inlineOptions,x.UI.DropDownBoxItem.controlName,x.UI.DropDownBoxItem.className)}createTemplate(){if(x.Utilities.isInDesignMode())return this.element.innerHTML=['<div class="vw-dropdownboxitem__container">','<div class="vw-dropdownboxitem__symbol" data-win-control="VisiWin.UI.Symbol"></div>','<div class="vw-dropdownboxitem__text" data-win-control="VisiWin.UI.TextBlock"></div>',"</div>"].join("\n"),this._containerElement=this.element.firstElementChild,this._symbolElement=this._containerElement.firstElementChild,this._textElement=this._symbolElement.nextElementSibling,this.processElements([this._symbolElement,this._textElement]);var A=null!=this.inlineOptions.showSymbol?this.inlineOptions.showSymbol:this.getStyleProperty("showSymbol")?this.getStyleProperty("showSymbol"):x.UI.DropDownBoxItem.propertyList.showSymbol.defaultValue,V=null!=this.inlineOptions.showText?this.inlineOptions.showText:this.getStyleProperty("showText")?this.getStyleProperty("showText"):x.UI.DropDownBoxItem.propertyList.showText.defaultValue,R='<div class="vw-dropdownboxitem__container">';return A&&(R+='<div class="vw-dropdownboxitem__symbol" data-win-control="VisiWin.UI.Symbol"></div>'),V&&(R+='<div class="vw-dropdownboxitem__text" data-win-control="VisiWin.UI.TextBlock"></div>'),R+="</div>",this.element.innerHTML=R,this._containerElement=this.element.firstElementChild,A?(this._symbolElement=this._containerElement.firstElementChild,V&&(this._textElement=this._symbolElement.nextElementSibling)):V&&(this._textElement=this._containerElement.firstElementChild),this.processElements([this._symbolElement,this._textElement])}_updateColors(x){this.disabled?(this._textElement&&this._textElement.winControl&&this.setColor("disabledForegroundColor","foregroundColor",null,"_textElement"),this._symbolElement&&this._symbolElement.winControl&&this.setColor("disabledForegroundColor","foregroundColor",null,"_symbolElement"),this.setColor("disabledBackgroundColor","backgroundColor"),this.setColor("disabledBorderColor","borderColor"),this._containerElement.style.backgroundColor=""):this.checked?(this._textElement&&this._textElement.winControl&&this.setColor("checkedForegroundColor","foregroundColor",null,"_textElement"),this._symbolElement&&this._symbolElement.winControl&&this.setColor("checkedForegroundColor","foregroundColor",null,"_symbolElement"),this.setColor("checkedBackgroundColor","backgroundColor"),this.pressed?(this._textElement&&this._textElement.winControl&&this.setColor("checkedPressedForegroundColor","foregroundColor",null,"_textElement"),this._symbolElement&&this._symbolElement.winControl&&this.setColor("checkedPressedForegroundColor","foregroundColor",null,"_symbolElement"),this.setColor("checkedPressedBackgroundColor","backgroundColor","_containerElement")):this.hover?(this.setColor("checkedHoverBorderColor","borderColor"),this.setColor("checkedHoverBackgroundColor","backgroundColor","_containerElement"),this.setColor("checkedHoverForegroundColor","foregroundColor","_textElement")):(this.setColor("checkedBorderColor","borderColor"),this._containerElement.style.backgroundColor="",this.setColor("checkedForegroundColor","foregroundColor","_textElement"))):(this._textElement&&this._textElement.winControl&&this.setColor("foregroundColor","foregroundColor",null,"_textElement"),this._symbolElement&&this._symbolElement.winControl&&this.setColor("foregroundColor","foregroundColor",null,"_symbolElement"),this.setColor("backgroundColor"),this.pressed?(this._textElement&&this._textElement.winControl&&this.setColor("pressedForegroundColor","foregroundColor",null,"_textElement"),this._symbolElement&&this._symbolElement.winControl&&this.setColor("pressedForegroundColor","foregroundColor",null,"_symbolElement"),this.setColor("pressedBackgroundColor","backgroundColor","_containerElement")):this.hover?(this.setColor("hoverBorderColor","borderColor"),this.setColor("hoverBackgroundColor","backgroundColor","_containerElement"),this.setColor("hoverForegroundColor","foregroundColor","_textElement")):(this.setColor("borderColor","borderColor"),this._containerElement.style.backgroundColor="",this.setColor("foregroundColor","foregroundColor","_textElement")))}_updateLayout(x){if("updateLayout"==x.changeName||"showSymbol"==x.changeName||"showText"==x.changeName||"symbolPosition"==x.changeName)if(this.showSymbol&&this.showText)switch(this.symbolPosition){case"Top":this._containerElement.style.flexDirection="column";break;case"Right":this._containerElement.style.flexDirection="row-reverse";break;case"Bottom":this._containerElement.style.flexDirection="column-reverse";break;default:this._containerElement.style.flexDirection="row"}else if(this.showSymbol&&!this.showText)switch(this.symbolPosition){case"Top":this._containerElement.style.justifyContent="center",this._containerElement.style.alignItems="flex-start";break;case"Right":this._containerElement.style.justifyContent="flex-end",this._containerElement.style.alignItems="center";break;case"Bottom":this._containerElement.style.justifyContent="center",this._containerElement.style.alignItems="flex-end";break;case"Center":this._containerElement.style.justifyContent="center",this._containerElement.style.alignItems="center";break;default:this._containerElement.style.justifyContent="flex-start",this._containerElement.style.alignItems="center"}}attach(){var x=[];return this.isAttached||(x.push(super.attach()),this._textElement&&this._textElement.winControl&&x.push(this._textElement.winControl.attach())),WinJS.Promise.join(x)}detach(){var x=[];return this.isAttached&&(x.push(super.detach()),this._textElement&&this._textElement.winControl&&x.push(this._textElement.winControl.detach())),WinJS.Promise.join(x)}dispose(){return super.dispose()}}DropDownBoxItem.namespace="VisiWin.UI",DropDownBoxItem.controlName="DropDownBoxItem",DropDownBoxItem.className="vw-dropdownboxitem",DropDownBoxItem.propertyList={designerType:{propertyType:"base",type:"string",defaultValue_DM:"Control"},registerSourceId:{propertyType:"base",type:"string",defaultValue:"Group"},padding:{propertyType:"style",type:"string",element:"_containerElement",forceOverwrite:!0},transition:{propertyType:"style",type:"string"},containerBorderWidth:{propertyType:"style",type:"string",element:"_containerElement",style:"borderWidth"},containerBorderStyle:{propertyType:"style",type:"string",element:"_containerElement",style:"borderStyle"},containerBorderRadius:{propertyType:"style",type:"string",element:"_containerElement",style:"borderRadius"},containerTransition:{propertyType:"style",type:"string",element:"_containerElement",style:"transition"},showSymbol:{propertyType:"child",type:"boolean",child:"_symbolElement",childProperty:"show",defaultValue:!1},iconFont:{propertyType:"child",type:"string",child:"_symbolElement"},symbol:{propertyType:"child",type:"string",child:"_symbolElement"},symbolType:{propertyType:"child",type:"string",child:"_symbolElement"},symbolSize:{propertyType:"child",type:"string",child:"_symbolElement"},symbolMargin:{propertyType:"child",type:"string",child:"_symbolElement",childProperty:"margin"},symbolPosition:{propertyType:"member",type:"string",defaultValue:"Left"},showText:{propertyType:"child",type:"boolean",child:"_textElement",childProperty:"show",defaultValue:!0},textWidth:{propertyType:"child",type:"string",child:"_textElement",childProperty:"width"},textHeight:{propertyType:"child",type:"string",child:"_textElement",childProperty:"height"},textMargin:{propertyType:"child",type:"string",child:"_textElement",childProperty:"margin"},textPadding:{propertyType:"child",type:"string",child:"_textElement",childProperty:"padding"},text:{propertyType:"child",type:"string",child:"_textElement",forceOverwrite:!0,defaultValue:"DropDownBoxItem"},localizableText:{propertyType:"child",type:"string",child:"_textElement",forceOverwrite:!0},textAlignment:{propertyType:"child",type:"string",child:"_textElement"},lineClamp:{propertyType:"child",type:"number",child:"_textElement"},textWrapping:{propertyType:"child",type:"string",child:"_textElement"},textTrimming:{propertyType:"child",type:"string",child:"_textElement"},fontClass:{propertyType:"child",type:"string",child:"_textElement",forceOverwrite:!0},fontSize:{propertyType:"child",type:"string",child:"_textElement",forceOverwrite:!0},fontWeight:{propertyType:"child",type:"string",child:"_textElement",forceOverwrite:!0},lineHeight:{propertyType:"child",type:"string",child:"_textElement",forceOverwrite:!0},textContrast:{propertyType:"child",type:"number",child:"_textElement"},uppercase:{propertyType:"child",type:"boolean",child:"_textElement"},backgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BackgroundColor"},hoverBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@HoverBackgroundColor"},pressedBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@PressedBackgroundColor"},checkedBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@CheckedBackgroundColor"},checkedHoverBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@CheckedHoverBackgroundColor"},checkedPressedBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@CheckedPressedBackgroundColor"},disabledBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledBackgroundColor"},foregroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},hoverForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},pressedForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},checkedForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@AltForegroundColor"},checkedHoverForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},checkedPressedForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@AltForegroundColor"},disabledForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledForegroundColor"},borderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"},hoverBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@HoverBorderColor"},checkedBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@CheckedBorderColor"},checkedHoverBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@CheckedHoverBorderColor"},disabledBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledBorderColor"}},A.DropDownBoxItem=DropDownBoxItem}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class AlarmItem extends x.UI.ControlBase{constructor(A,V){super(A,V),x.Utilities.addClass(A,"vw-templateready"),this.addPropertyList(AlarmItem,AlarmItem.propertyList),this.defaultConstructor(A,this.inlineOptions,x.UI.AlarmItem.controlName,x.UI.AlarmItem.className)}ready(A){x.Utilities.removeClass(A,"vw-templateready"),x.Utilities.hasClass(this.parentElement,"win-template")&&this._setWinInteractiveClass(A)}_setWinInteractiveClass(A){for(var V=A.firstChild;V;)this._setWinInteractiveClass(V),V.winControl&&("function"==typeof V.winControl.readyBase&&V.winControl.readyBase(V),V.winControl.inputEventsEnable&&x.Utilities.addClass(V,"win-interactive"),V.winControl.designerType="TemplateChild"),V=V.nextSibling}dispose(){return super.dispose()}}AlarmItem.namespace="VisiWin.UI",AlarmItem.controlName="AlarmItem",AlarmItem.className="vw-alarmitem",AlarmItem.propertyList={designerType:{propertyType:"base",defaultValue:""},backgroundColor:{propertyType:"memberStyle",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},borderColor:{propertyType:"memberStyle",type:"string",resourceValue:["getTheme"],defaultValue:"@DividerColor"}},A.AlarmItem=AlarmItem}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class HistoricalAlarmItem extends x.UI.ControlBase{constructor(A,V){super(A,V),x.Utilities.addClass(A,"vw-historicalalarmitemready"),this.addPropertyList(HistoricalAlarmItem,HistoricalAlarmItem.propertyList),this.defaultConstructor(A,this.inlineOptions,x.UI.HistoricalAlarmItem.controlName,x.UI.HistoricalAlarmItem.className)}ready(A){x.Utilities.removeClass(A,"vw-templateready"),x.Utilities.hasClass(this.parentElement,"win-template")&&this._setWinInteractiveClass(A)}_setWinInteractiveClass(A){for(var V=A.firstChild;V;)this._setWinInteractiveClass(V),V.winControl&&(V.winControl.readyBase(V),V.winControl.inputEventsEnable&&x.Utilities.addClass(V,"win-interactive"),V.winControl.designerType="TemplateChild"),V=V.nextSibling}dispose(){return super.dispose()}}HistoricalAlarmItem.namespace="VisiWin.UI",HistoricalAlarmItem.controlName="HistoricalAlarmItem",HistoricalAlarmItem.className="vw-historicalalarmitem",HistoricalAlarmItem.propertyList={designerType:{propertyType:"base",defaultValue:""},backgroundColor:{propertyType:"memberStyle",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},borderColor:{propertyType:"memberStyle",type:"string",resourceValue:["getTheme"],defaultValue:"@DividerColor"}},A.HistoricalAlarmItem=HistoricalAlarmItem}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class AlarmLine extends x.UI.ControlBase{constructor(A,V){super(A,V),this.properties={designerType:{propertyType:"base",type:"string",defaultValue:"Control"},width:{propertyType:"member",type:"string",defaultValue:"auto"},height:{propertyType:"member",type:"string",defaultValue:"50px"},background:{propertyType:"member",type:"string"},borderWidth:{propertyType:"member",type:"string",defaultValue:"1px"},borderStyle:{propertyType:"member",type:"string",defaultValue:"none"},borderRadius:{propertyType:"member",type:"string",defaultValue:"0px"},opacity:{propertyType:"member",type:"string",defaultValue:"1"},visibility:{propertyType:"member",type:"string",defaultValue:"visible"},symbolWidth:{propertyType:"child",child:"alarmSymbolElement",type:"string",defaultValue:"30px",childOption:"width"},symbolHeight:{propertyType:"child",child:"alarmSymbolElement",type:"string",defaultValue:"30px",childOption:"height"},symbolSize:{propertyType:"child",child:"alarmSymbolElement",type:"string",defaultValue:"100%",childOption:"imageSize"},defaultAlarmSymbolIconFont:{propertyType:"child",child:"alarmSymbolElement",type:"string",childOption:"iconFont"},defaultAlarmSymbol:{propertyType:"member",type:"string",defaultValue:"warning"},defaultAlarmSymbolType:{propertyType:"child",child:"alarmSymbolElement",type:"string",childOption:"imageType"},symbolMargin:{propertyType:"child",child:"alarmSymbolElement",type:"string",defaultValue:"0px 8px 0px 8px",childOption:"margin"},showAlarmSymbol:{propertyType:"child",child:"alarmSymbolElement",type:"boolean",defaultValue:!0},showDefaultAlarmSymbol:{propertyType:"child",child:"alarmSymbolElement",type:"boolean",defaultValue:!1},alignItems:{propertyType:"child",child:"alarmTimeElement",type:"string",defaultValue:"Center"},justifyContent:{propertyType:"child",child:"alarmTimeElement",type:"string",defaultValue:"Start"},dateTimeWidth:{propertyType:"child",child:"alarmTimeElement",type:"string",defaultValue:"auto",childOption:"width"},dateTimeHeight:{propertyType:"child",child:"alarmTimeElement",type:"string",defaultValue:"auto",childOption:"height"},alarmDateTimeMargin:{propertyType:"child",child:"alarmTimeElement",type:"string",defaultValue:"0px 8px 0px 0px",childOption:"margin"},alarmDateTimePadding:{propertyType:"child",child:"alarmTimeElement",type:"string",defaultValue:"0px 0px 0px 0px",childOption:"padding"},dateFontClass:{propertyType:"child",child:"alarmTimeElement",type:"string"},dateFontSize:{propertyType:"child",child:"alarmTimeElement",type:"string"},dateFontWeight:{propertyType:"child",child:"alarmTimeElement",type:"string"},timeFontClass:{propertyType:"child",child:"alarmTimeElement",type:"string"},timeFontSize:{propertyType:"child",child:"alarmTimeElement",type:"string"},timeFontWeight:{propertyType:"child",child:"alarmTimeElement",type:"string"},showAlarmDateTime:{propertyType:"child",child:"alarmTimeElement",type:"boolean",defaultValue:!0},dateTextContrast:{propertyType:"child",child:"alarmTimeElement",type:"number",defaultValue:1},dateUppercase:{propertyType:"child",child:"alarmTimeElement",type:"boolean",defaultValue:!1},timeTextContrast:{propertyType:"child",child:"alarmTimeElement",type:"number",defaultValue:1},timeUppercase:{propertyType:"child",child:"alarmTimeElement",type:"boolean",defaultValue:!1},dateTimeMode:{propertyType:"child",child:"alarmTimeElement",type:"string",defaultValue:"DateTime"},formatDate:{propertyType:"child",child:"alarmTimeElement",type:"string",defaultValue:"LongDate"},formatTime:{propertyType:"child",child:"alarmTimeElement",type:"string",defaultValue:"LongTime"},alarmGroupWidth:{propertyType:"child",child:"alarmGroupElement",type:"string",defaultValue:"auto",childOption:"width"},alarmGroupAlignment:{propertyType:"child",child:"alarmGroupElement",type:"string",defaultValue:"Left",childOption:"textAlignment"},alarmGroupFontClass:{propertyType:"child",child:"alarmGroupElement",type:"string",childOption:"fontClass"},alarmGroupFontSize:{propertyType:"child",child:"alarmGroupElement",type:"string",childOption:"fontSize"},alarmGroupFontWeight:{propertyType:"child",child:"alarmGroupElement",type:"string",childOption:"fontWeight"},alarmGroupMargin:{propertyType:"child",child:"alarmGroupElement",type:"string",defaultValue:"0px 8px 0px 0px",childOption:"margin"},showAlarmGroup:{propertyType:"child",child:"alarmGroupElement",type:"boolean",defaultValue:!0},alarmTextWidth:{propertyType:"child",child:"alarmTextElement",type:"string",defaultValue:"auto",childOption:"width"},alarmTextHeight:{propertyType:"child",child:"alarmTextElement",type:"string",defaultValue:"auto",childOption:"height"},alarmTextAlignment:{propertyType:"child",child:"alarmTextElement",type:"string",defaultValue:"Left",childOption:"textAlignment"},alarmTextLineClamp:{propertyType:"child",child:"alarmTextElement",type:"number",defaultValue:"2",childOption:"lineClamp"},alarmTextWrapping:{propertyType:"child",child:"alarmTextElement",type:"string",defaultValue:"WrapWithLineClamp",childOption:"textWrapping"},alarmTextFontClass:{propertyType:"child",child:"alarmTextElement",type:"string",childOption:"fontClass"},alarmTextFontSize:{propertyType:"child",child:"alarmTextElement",type:"string",childOption:"fontSize"},alarmTextFontWeight:{propertyType:"child",child:"alarmTextElement",type:"string",childOption:"fontWeight"},alarmTextMargin:{propertyType:"child",child:"alarmTextElement",type:"string",defaultValue:"0px 0px 0px 0px",childOption:"margin"},defaultAlarmLocalizableText:{propertyType:"member",type:"string"},defaultAlarmText:{propertyType:"child",child:"noAlarmTextElement",type:"string",defaultValue:"No active alarms",childOption:"text"},showAlarmText:{propertyType:"child",child:"alarmTextElement",type:"boolean",defaultValue:!0},showDefaultAlarmText:{propertyType:"child",child:"alarmTextElement",type:"boolean",defaultValue:!0},acknowledgeButtonWidth:{propertyType:"child",child:"alarmAcknowledgeButtonElement",type:"string",defaultValue:"auto",childOption:"width"},acknowledgeButtonSymbolSize:{propertyType:"child",child:"alarmAcknowledgeButtonElement",type:"string",defaultValue:"24px",childOption:"symbolSize"},acknowledgeButtonSymbol:{propertyType:"child",child:"alarmAcknowledgeButtonElement",type:"string",defaultValue:"done",childOption:"symbol"},acknowledgeButtonIconFont:{propertyType:"child",child:"alarmAcknowledgeButtonElement",type:"string",defaultValue:"material-icons",childOption:"iconFont"},acknowledgeButtonSymbolType:{propertyType:"child",child:"alarmAcknowledgeButtonElement",type:"string",defaultValue:"Icon",childOption:"symbolType"},acknowledgeButtonMargin:{propertyType:"child",child:"alarmAcknowledgeButtonElement",type:"string",defaultValue:"0px 0px 0px 8px",childOption:"margin"},acknowledgeButtonPadding:{propertyType:"child",child:"alarmAcknowledgeButtonElement",type:"string",defaultValue:"0px 10px 0px 0px",childOption:"padding"},showAcknowledgeButton:{propertyType:"child",child:"alarmAcknowledgeButtonElement",type:"boolean",defaultValue:!0},desiredClasses:{propertyType:"member",type:"string"},desiredGroups:{propertyType:"member",type:"string"},desiredStates:{propertyType:"member",type:"string"},maxPriority:{propertyType:"member",type:"number"},minPriority:{propertyType:"member",type:"number"},alarmSortMode:{type:String,defaultValue:"NewestFaultOnTop"},acknowledgeButtonDisabledForegroundColor:{propertyType:"child",child:"alarmAcknowledgeButtonElement",type:"string",defaultValue:"@DisabledForegroundColor",childOption:"disabledForegroundColor"},foregroundColor:{propertyType:"memberStyle",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},backgroundColor:{propertyType:"memberStyle",type:"string",resourceValue:["getTheme"],defaultValue:"@Transparent"},borderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"},defaultSymbolForegroundColor:{propertyType:"memberStyle",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},toggleAlarms:{propertyType:"member",type:"boolean"},toggleTime:{propertyType:"member",type:"number",defaultValue:1e3}},this.cssStyles={css:"\n                .vw-alarmline {\n                     border-style: none !important;\n                } \n            "},this._alarmSortModeEnum=x.System.Alarm.AlarmSortMode.NewestFaultOnTop,this.highestPrioElement=null,this.highestPrioAlarms=[],this.prioAlarms=null,this.currentAlarms=[],this.intervalId=null,this._buttonClickHandler=this._clickHandler.bind(this),this._alarmStateChange=this._alarmItemStateChanged.bind(this),this.alarmChangeHandler=this._alarmChangeHandler.bind(this),this.alarmNewHandler=this._alarmNewHandler.bind(this),this.alarmClearHandler=this._alarmClearHandler.bind(this),this.myUserManagementService=x.System.UserManagement.UserManagementService.getService(),this.initialize(AlarmLine)}createTemplate(){return this.element.innerHTML='\n            <div data-win-control="VisiWin.UI.FlexLayout" data-ref-element="mainContainerElement"\n                data-win-options=\'{"alignItems":"Center","justifyContent":"Center","orientation":"Horizontal"}\'>\n                <div data-win-control="VisiWin.UI.Image" data-ref-element="alarmSymbolElement"\n                    data-win-options=\'{"width":"50px","height":"50px","margin":"0px 8px 0px 8px","foregroundColor":"@White"}\'>\n                </div>\n                <div data-win-control="VisiWin.UI.DateTimeVarOut" data-ref-element="alarmTimeElement"\n                    data-win-options=\'{"margin":"0px 8px 0px 0px","timeForegroundColor":"@White","dateForegroundColor":"@White"}\'>\n                </div>\n                <div data-win-control="VisiWin.UI.Label" data-ref-element="alarmGroupElement"\n                    data-win-options=\'{"labelForegroundColor":"@White","margin":"0px 8px 0px 0px","text":"Alarm group"}\'>\n                </div>\n                <div data-win-control="VisiWin.UI.Label" data-ref-element="alarmGroupAndTextSeparator"\n                    data-win-options=\'{"margin":"0px 0px 0px 0px","text":"-","symbolForegroundColor":"@White","labelForegroundColor":"@White"}\'>\n                </div>\n                <div data-win-control="VisiWin.UI.Label" data-ref-element="alarmTextElement"\n                    data-win-options=\'{"text":"Alarm Text","margin":"0px 8px 0px 0px","labelForegroundColor":"@White","textWrapping":"WrapWithLineClamp","lineClamp":2.0}\'>\n                </div>\n                <div data-win-control="VisiWin.UI.Label" data-ref-element="noAlarmTextElement"\n                    data-win-options=\'{"margin":"0px 8px 0px 0px","labelForegroundColor":"@White"}\'>\n                </div>\n                <div data-win-control="VisiWin.UI.Spacer" data-ref-element="spacerElement"></div>\n                <div data-win-control="VisiWin.UI.Button" data-ref-element="alarmAcknowledgeButtonElement"\n                     data-win-options=\'{"margin":"0px 0px 0px 0px","padding":"0px 10px 0px 0px","width":"auto","height":"auto","showText":false,"backgroundColor":"@Transparent","showSymbol":true,\n                                        "foregroundColor":"@White","borderColor":"@Transparent","hoverBackgroundColor":"@Transparent","hoverBorderColor":"@None","pressedBackgroundColor":"@Transparent",\n                                        "pressedForegroundColor":"@White"}\'>\n                </div>\n            </div>        \n        ',this.initializeChilds()}createHandler(){this.alarmAcknowledgeButtonElement.winControl.addEventListener("click",this._buttonClickHandler,!0),this.isInDesignMode||this._initAlarmService()}removeHandler(){this.alarmAcknowledgeButtonElement.winControl.removeEventListener("click",this._buttonClickHandler,!0)}_updateLayout(A){if(("firstUpdate"===A.changeName||"width"===A.changeName||"height"===A.changeName||"text"===A.changeName||"defaultAlarmSymbol"===A.changeName||"defaultAlarmSymbolType"===A.changeName||"defaultAlarmSymbolIconFont"===A.changeName||"symbolWidth"===A.changeName||"symbolHeight"===A.changeName||"symbolSize"===A.changeName||"value"===A.changeName||"dateFontClass"===A.changeName||"dateFontSize"===A.changeName||"dateFontWeight"===A.changeName||"timeFontClass"===A.changeName||"timeFontSize"===A.changeName||"timeFontWeight"===A.changeName||"alarmGroupFontClass"===A.changeName||"alarmGroupFontSize"===A.changeName||"alarmGroupFontWeight"===A.changeName||"alarmGroupMargin"===A.changeName||"alarmTextFontClass"===A.changeName||"alarmTextFontSize"===A.changeName||"alarmTextFontWeight"===A.changeName||"alarmTextMargin"===A.changeName||"showAlarmSymbol"===A.changeName||"showAlarmGroup"===A.changeName||"showAlarmDateTime"===A.changeName||"showAlarmText"===A.changeName||"showAcknowledgeButton"===A.changeName||"showDefaultAlarmSymbol"===A.changeName||"authorizationMode"===A.changeName||"authorizationRight"===A.changeName||"borderWidth"===A.changeName||"borderStyle"===A.changeName||"borderRadius"===A.changeName||"opacity"===A.changeName||"visibility"===A.changeName||"background"===A.changeName||"defaultAlarmLocalizableText"===A.changeName||"showDefaultAlarmText"===A.changeName||"defaultAlarmText"===A.changeName||"iconFont"===A.changeName||"iconType"===A.changeName)&&(this._updateAlarms(),this._toggleAlarmState(),this.authorizationRight&&(this.alarmAcknowledgeButtonElement.winControl.authorizationMode=this.authorizationMode,this.alarmAcknowledgeButtonElement.winControl.authorizationRight=this.authorizationRight,this.rights=this.myUserManagementService.GetAuthorization(this.authorizationRight),this.rights.Changed.add(this.myAuthorizationRightChanged.bind(this))),this._handlesMainContainerElement(this.mainContainerElement.winControl,this.width,this.height,this.borderRadius,this.borderStyle,this.borderWidth,this.opacity,this.visibility,this.background),this._handlesSymbol(this.alarmSymbolElement.winControl,this.defaultAlarmSymbol,this.symbolWidth,this.symbolHeight,this.symbolSize,this.defaultAlarmSymbolIconFont,this.defaultAlarmSymbolType,this.symbolMargin),this._handlesAlarmDateAndTimeElement(this.alarmTimeElement.winControl,this.dateFontClass,this.dateFontSize,this.dateFontWeight,this.timeFontClass,this.timeFontSize,this.timeFontWeight,this.dateTimeMode,this.formatDate,this.formatTime,this.alarmDateTimeMargin,this.alarmDateTimePadding),this._handlesAlarmGroupAndTextElementFonts(this.alarmGroupElement.winControl,this.alarmGroupFontClass,this.alarmGroupFontSize,this.alarmGroupFontWeight,this.alarmGroupMargin),this._handlesAlarmGroupAndTextElementFonts(this.alarmTextElement.winControl,this.alarmTextFontClass,this.alarmTextFontSize,this.alarmTextFontWeight,this.alarmTextMargin),this._handlesAckBtnSymbol(this.alarmAcknowledgeButtonElement.winControl,this.acknowledgeButtonSymbol,this.acknowledgeButtonSymbolSize,this.acknowledgeButtonSymbolType,this.acknowledgeButtonIconFont,this.acknowledgeButtonMargin,this.acknowledgeButtonPadding),this.isInDesignMode&&(this._ifAlarmsSetsVisibility(),this.showDefaultAlarmText&&(x.isNullOrUndefined(this.defaultAlarmLocalizableText)?this.noAlarmTextElement.winControl.text=this.defaultAlarmText:this.noAlarmTextElement.winControl.text=this.defaultAlarmLocalizableText),this.showAlarmText&&!this.showDefaultAlarmText&&(this.alarmTextElement.winControl.text="Alarm Text")),!this.isInDesignMode)){if(null==this.desiredClasses&&null==this.desiredClasses||(this.myCurrentAlarmsFilter.DesiredClasses=x.Utilities.csvToArray(this.desiredClasses)),null==this.desiredGroups&&null==this.desiredGroups||(this.myCurrentAlarmsFilter.DesiredGroups=x.Utilities.csvToArray(this.desiredGroups)),null!=this.desiredStates||null!=this.desiredStates){const A=x.Utilities.csvToArray(this.desiredStates);if(x.isString(A[0])){const V=[];for(let R=0;R<A.length;R++){const D=x.Internal.EnumHelper.convertToNumber(x.System.Alarm.AlarmState,A[R]);V.push(D)}this.myCurrentAlarmsFilter.DesiredStates=V}else x.isNumber(A[0])?x.isNumber(A[0])?this.myCurrentAlarmsFilter.DesiredStates=A:this.myCurrentAlarmsFilter.DesiredStates=[]:x.Application.WarnLog.log(`Alarm State type error State${A[0]} must be typ of number`)}null==this.maxPriority&&null==this.maxPriority||(this.myCurrentAlarmsFilter.MaxPriority=this.maxPriority),null==this.minPriority&&null==this.minPriority||(this.myCurrentAlarmsFilter.MinPriority=this.minPriority)}"initialized"===A.changeName&&this.myAlarmService&&(this.myCurrentAlarms=this.myAlarmService.GetCurrentAlarms(this.myCurrentAlarmsFilter),this.alarmHandlers()),this._alarmSortModeEnum=x.Internal.EnumHelper.convertToNumber(x.System.Alarm.AlarmSortMode,this.alarmSortMode)}alarmHandlers(){this.myCurrentAlarms.InitAlarm.add(this.alarmChangeHandler),this.myCurrentAlarms.NewAlarm.add(this.alarmNewHandler),this.myCurrentAlarms.ChangeAlarm.add(this.alarmChangeHandler),this.myCurrentAlarms.ClearAlarm.add(this.alarmClearHandler)}attach(){return this.myCurrentAlarms||(this.myCurrentAlarms=this.myAlarmService.GetCurrentAlarms(this.myCurrentAlarmsFilter)),this.myCurrentAlarms&&(this._toggleAlarmState(),this.myCurrentAlarms=this.myAlarmService.GetCurrentAlarms(this.myCurrentAlarmsFilter),this.alarmHandlers()),this.myCurrentAlarms&&this.myCurrentAlarms.Alarms&&0===this.myCurrentAlarms.Alarms.length&&this._noAlarms(),super.attach(),null}detach(){return clearInterval(this.intervalId),this.intervalId=null,this.myCurrentAlarms&&(this.myCurrentAlarms.InitAlarm.remove(this.alarmChangeHandler),this.myCurrentAlarms.NewAlarm.remove(this.alarmNewHandler),this.myCurrentAlarms.ChangeAlarm.remove(this.alarmChangeHandler),this.myCurrentAlarms.ClearAlarm.remove(this.alarmClearHandler),this.myCurrentAlarms.ReleaseCurrentAlarms()),super.detach(),null}_setElementsColor(){this.mainContainerElement.winControl.backgroundColor=this.backgroundColor,this.alarmSymbolElement.winControl.foregroundColor=this.defaultSymbolForegroundColor,this.mainContainerElement.winControl.borderColor=this.borderColor,this.alarmTimeElement.winControl.dateForegroundColor=this.foregroundColor,this.alarmTimeElement.winControl.timeForegroundColor=this.foregroundColor,this.alarmGroupElement.winControl.labelForegroundColor=this.foregroundColor,this.noAlarmTextElement.winControl.labelForegroundColor=this.foregroundColor,this.alarmTextElement.winControl.labelForegroundColor=this.foregroundColor,this.alarmGroupAndTextSeparator.winControl.labelForegroundColor=this.foregroundColor,this.alarmAcknowledgeButtonElement.winControl.foregroundColor=this.foregroundColor}_updateColors(x){"firstUpdate"!==x.changeName&&"backgroundColor"!==x.changeName&&"foregroundColor"!==x.changeName&&"borderColor"!==x.changeName&&"defaultSymbolForegroundColor"!==x.changeName||this._setElementsColor()}_handlesMainContainerElement(x,A,V,R,D,N,U,B,F){x&&(A&&(x.width=A),V&&(x.height=V),R&&(x.borderRadius=R),D&&(x.borderStyle=D),N&&(x.borderWidth=N),U&&(x.opacity=U),B&&(x.visibility=B),F&&(x.background=F))}_handlesAlarmDateAndTimeElement(x,A,V,R,D,N,U,B,F,W,H,z){x&&(A&&(x.dateFontClass=A),V&&(x.dateFontSize=V),A&&(x.dateFontClass=A),R&&(x.dateFontWeight=R),D&&(x.timeFontClass=D),N&&(x.timeFontSize=N),U&&(x.timeFontWeight=U),B&&(x.dateTimeMode=B),F&&(x.formatDate=F),W&&(x.formatTime=W),H&&(x.margin=H),z&&(x.padding=z))}_handlesAlarmGroupAndTextElementFonts(x,A,V,R,D){x&&(A&&(x.fontClass=A),V&&(x.fontSize=V),R&&(x.fontWeight=R),D&&(x.margin=D))}_handlesSymbol(x,A,V,R,D,N,U,B){x&&(A&&(x.image=A),V&&(x.width=V),R&&(x.height=R),D&&(x.imageSize=D),N&&(x.iconFont=N),U&&(x.imageType=U),B&&(x.margin=B))}_handlesAckBtnSymbol(x,A,V,R,D,N,U){x&&(A&&(x.symbol=A),V&&(x.symbolSize=V),R&&(x.iconFont=R),D&&(x.iconFont=D),N&&(x.margin=N),U&&(x.padding=U))}myAuthorizationRightChanged(x){this._updateAlarms()}_noAlarms(){this.showDefaultAlarmSymbol?this.authorized||"Hidden"!==this.authorizationMode?(this._handlesSymbol(this.alarmSymbolElement.winControl,this.defaultAlarmSymbol,this.symbolWidth,this.symbolHeight,this.symbolSize,this.defaultAlarmSymbolIconFont,this.defaultAlarmSymbolType,this.symbolMargin),this.alarmSymbolElement.winControl.foregroundColor=this.defaultSymbolForegroundColor,this.alarmSymbolElement.winControl.visibility="Visible"):this.alarmSymbolElement.winControl.visibility="Hidden":this.alarmSymbolElement.winControl.visibility="Collapse",this.showDefaultAlarmText&&!this.authorized&&"Hidden"===this.authorizationMode?this.alarmTextElement.winControl.visibility="Hidden":this.showDefaultAlarmText?(x.isNullOrUndefined(this.defaultAlarmLocalizableText)?this.noAlarmTextElement.winControl.text=this.defaultAlarmText:this.noAlarmTextElement.winControl.text=this.defaultAlarmLocalizableText,this.noAlarmTextElement.winControl.visibility="Visible",this.noAlarmTextElement.winControl.labelForegroundColor=this.foregroundColor):this.noAlarmTextElement.winControl.visibility="Collapse",this.showDefaultAlarmText||this.showDefaultAlarmSymbol?(this.showDefaultAlarmText||this.showAlarmSymbol)&&(this.mainContainerElement.winControl.background=this.background,this.mainContainerElement.winControl.backgroundColor=this.backgroundColor):(this.mainContainerElement.winControl.visibility="Hidden",this.mainContainerElement.winControl.borderStyle="none"),this.alarmGroupElement.winControl.visibility="Collapse",this.alarmTimeElement.winControl.visibility="Collapse",this.alarmGroupAndTextSeparator.winControl.visibility="Collapse",this.alarmTextElement.winControl.visibility="Collapse",this.alarmAcknowledgeButtonElement.winControl.visibility="Collapse"}_ifAlarmsSetsVisibility(){this.noAlarmTextElement.winControl.visibility="Collapse",this.authorized||"Hidden"!==this.authorizationMode?this.mainContainerElement.winControl.visibility="Visible":this.mainContainerElement.winControl.visibility="Hidden",this.showAlarmSymbol?this.authorized||"Hidden"!==this.authorizationMode?this.alarmSymbolElement.winControl.visibility="Visible":this.alarmSymbolElement.winControl.visibility="Hidden":this.alarmSymbolElement.winControl.visibility="Collapse",this.showAlarmDateTime?this.alarmTimeElement.winControl.visibility="Visible":this.alarmTimeElement.winControl.visibility="Collapse",this.showAlarmGroup?this.alarmGroupElement.winControl.visibility="Visible":this.alarmGroupElement.winControl.visibility="Collapse",this.showAlarmText?(this.alarmTextElement.winControl.visibility="Visible",this.alarmGroupAndTextSeparator.winControl.visibility="Visible"):(this.alarmTextElement.winControl.visibility="Collapse",this.alarmGroupAndTextSeparator.winControl.visibility="Collapse"),this.showAcknowledgeButton?this.alarmAcknowledgeButtonElement.winControl.visibility="Visible":this.alarmAcknowledgeButtonElement.winControl.visibility="Collapse",!this.showAlarmGroup&&this.showAlarmText?this.alarmGroupAndTextSeparator.winControl.visibility="Collapse":this.showAlarmGroup&&this.showAlarmText&&(this.alarmGroupAndTextSeparator.winControl.visibility="Visible")}elementColorsWhenAuthorized(){this.mainContainerElement.winControl.background=this.highestPrioElement.StateInfo.BackColor,this.mainContainerElement.winControl.backgroundColor=this.highestPrioElement.StateInfo.BackColor,this.alarmTimeElement.winControl.timeForegroundColor=this.highestPrioElement.StateInfo.ForeColor,this.alarmTimeElement.winControl.dateForegroundColor=this.highestPrioElement.StateInfo.ForeColor,this.alarmGroupElement.winControl.labelForegroundColor=this.highestPrioElement.StateInfo.ForeColor,this.alarmGroupAndTextSeparator.winControl.labelForegroundColor=this.highestPrioElement.StateInfo.ForeColor,this.alarmTextElement.winControl.labelForegroundColor=this.highestPrioElement.StateInfo.ForeColor,this.alarmAcknowledgeButtonElement.winControl.foregroundColor=this.highestPrioElement.StateInfo.ForeColor}elementColorsWhenNotAuthorized(){this.mainContainerElement.winControl.background="@Transparent",this.mainContainerElement.winControl.backgroundColor="@Transparent",this.alarmTimeElement.winControl.timeForegroundColor="@Transparent",this.alarmTimeElement.winControl.dateForegroundColor="@Transparent",this.alarmGroupElement.winControl.labelForegroundColor="@Transparent",this.alarmGroupAndTextSeparator.winControl.labelForegroundColor="@Transparent",this.alarmTextElement.winControl.labelForegroundColor="@Transparent",this.alarmAcknowledgeButtonElement.winControl.foregroundColor="@Transparent"}_updateElementColors(){this.authorized||"Hidden"!==this.authorizationMode?this.elementColorsWhenAuthorized():this.elementColorsWhenNotAuthorized()}_updateSymbol(){x.Resources.styles.stateinfo.currentAlarmProvider&&(this.currentAlarmProvider=x.Resources.styles.stateinfo.currentAlarmProvider.classes);let A=null;if(this.currentAlarmProvider)try{A=this.currentAlarmProvider[this.highestPrioElement.Class.Name]}catch(x){console.log(x)}if(A){if(A[x.System.Alarm.AlarmState[this.highestPrioElement.AlarmState]]){const V=A[x.System.Alarm.AlarmState[this.highestPrioElement.AlarmState]].stateSymbol,R=this.highestPrioElement.StateInfo.ForeColor;this._handlesSymbol(this.alarmSymbolElement.winControl,V,null,null,null,null,null,null),this.alarmSymbolElement.winControl.foregroundColor=R}}else if(A=this.currentAlarmProvider.Alarm,A&&A[x.System.Alarm.AlarmState[this.highestPrioElement.AlarmState]]){const V=A[x.System.Alarm.AlarmState[this.highestPrioElement.AlarmState]].stateSymbol,R=A[x.System.Alarm.AlarmState[this.highestPrioElement.AlarmState]].stateForegroundColor;this._handlesSymbol(this.alarmSymbolElement.winControl,V,null,null,null,null,null,null),this.alarmSymbolElement.winControl.foregroundColor=R}}_initAlarmService(){this.myAlarmService=x.System.Alarm.AlarmService.getService(),this.myCurrentAlarmsFilter=this.myAlarmService.CreateAlarmFilter()}_toggleAlarmState(){this.highestPrioAlarms=[];for(let x=0;x<this.currentAlarms.length;x++)this.currentAlarms[x].Priority===this.hightestPrio&&(this.prioAlarms=this.currentAlarms[x],this.highestPrioAlarms.push(this.prioAlarms));if(!0===this.toggleAlarms)if(this.highestPrioAlarms.length>1){let A=0;this._alarmSortModeEnum===x.System.Alarm.AlarmSortMode.NewestFaultOnTop&&(this.toggleAlarmGroup=this.highestPrioAlarms[this.highestPrioAlarms.length-1].Group.GroupTree,this.toggleAlarmName=this.highestPrioAlarms[this.highestPrioAlarms.length-1].Name,A=this.highestPrioAlarms.length-1),this._alarmSortModeEnum===x.System.Alarm.AlarmSortMode.FirstUpFaultOnTop&&(this.toggleAlarmGroup=this.highestPrioAlarms[0].Group.GroupTree,this.toggleAlarmName=this.highestPrioAlarms[0].Name),clearInterval(this.intervalId),this.intervalId=null,null===this.intervalId&&(this.intervalId=setInterval(()=>{if(this.highestPrioAlarms[A]){this.alarmTimeElement.winControl.value=this.highestPrioAlarms[A].ActivationTime,this.alarmGroupElement.winControl.text=this.highestPrioAlarms[A].Group.GroupTree,this.alarmTextElement.winControl.text=this.highestPrioAlarms[A].Text,this.authorized||"Hidden"!==this.authorizationMode?(this.mainContainerElement.winControl.background=this.highestPrioAlarms[A].StateInfo.BackColor,this.mainContainerElement.winControl.backgroundColor=this.highestPrioAlarms[A].StateInfo.BackColor,this.alarmTimeElement.winControl.timeForegroundColor=this.highestPrioAlarms[A].StateInfo.ForeColor,this.alarmTimeElement.winControl.dateForegroundColor=this.highestPrioAlarms[A].StateInfo.ForeColor,this.alarmGroupElement.winControl.labelForegroundColor=this.highestPrioAlarms[A].StateInfo.ForeColor,this.alarmGroupAndTextSeparator.winControl.labelForegroundColor=this.highestPrioAlarms[A].StateInfo.ForeColor,this.alarmTextElement.winControl.labelForegroundColor=this.highestPrioAlarms[A].StateInfo.ForeColor,this.alarmAcknowledgeButtonElement.winControl.foregroundColor=this.highestPrioAlarms[A].StateInfo.ForeColor):this.elementColorsWhenNotAuthorized(),x.Resources.styles.stateinfo.currentAlarmProvider&&(this.currentAlarmProvider=x.Resources.styles.stateinfo.currentAlarmProvider.classes);let V=null;if(this.currentAlarmProvider)try{V=this.currentAlarmProvider[this.highestPrioAlarms[A].Class.Name]}catch(x){console.log(x)}if(V){if(V[x.System.Alarm.AlarmState[this.highestPrioAlarms[A].AlarmState]]){const R=V[x.System.Alarm.AlarmState[this.highestPrioAlarms[A].AlarmState]].stateSymbol,D=this.highestPrioAlarms[A].StateInfo.ForeColor;this._handlesSymbol(this.alarmSymbolElement.winControl,R,null,null,null,null,null,null),this.alarmSymbolElement.winControl.foregroundColor=D}}else if(V=this.currentAlarmProvider.Alarm,V&&V[x.System.Alarm.AlarmState[this.highestPrioAlarms[A].AlarmState]]){const R=V[x.System.Alarm.AlarmState[this.highestPrioAlarms[A].AlarmState]].stateSymbol,D=V[x.System.Alarm.AlarmState[this.highestPrioAlarms[A].AlarmState]].stateForegroundColor;this._handlesSymbol(this.alarmSymbolElement.winControl,R,null,null,null,null,null,null),this.alarmSymbolElement.winControl.foregroundColor=D}this.toggleAlarmGroup=this.highestPrioAlarms[A].Group.GroupTree,this.toggleAlarmName=this.highestPrioAlarms[A].Name}this._alarmSortModeEnum===x.System.Alarm.AlarmSortMode.NewestFaultOnTop&&(A--,A<0&&(A=this.highestPrioAlarms.length-1)),this._alarmSortModeEnum===x.System.Alarm.AlarmSortMode.FirstUpFaultOnTop&&(A++,A>this.highestPrioAlarms.length-1&&(A=0))},this.toggleTime))}else clearInterval(this.intervalId),this.intervalId=null}_highestPriorityAlarm(){if(this.hightestPrio=-1,this._alarmSortModeEnum===x.System.Alarm.AlarmSortMode.NewestFaultOnTop)for(let x=0;x<this.currentAlarms.length;x++){const A=this.currentAlarms[x];this.hightestPrio<=A.Priority&&(this.hightestPrio=A.Priority,this.highestPrioElement=A)}if(this._alarmSortModeEnum===x.System.Alarm.AlarmSortMode.FirstUpFaultOnTop)for(let x=this.currentAlarms.length-1;x>=0;x--){const A=this.currentAlarms[x];this.hightestPrio<=A.Priority&&(this.hightestPrio=A.Priority,this.highestPrioElement=A)}this._toggleAlarmState()}_updateAlarms(){this.currentAlarms.length>0?(this._ifAlarmsSetsVisibility(),this._highestPriorityAlarm(),this._updateSymbol(),this._updateElementColors(),this.alarmTimeElement.winControl.value=this.highestPrioElement.ActivationTime,this.alarmGroupElement.winControl.text=this.highestPrioElement.Group.GroupTree,this.alarmTextElement.winControl.text=this.highestPrioElement.Text):this._noAlarms()}_alarmItemStateChanged(A){0===x.Internal.Domain.Alarm.filterAlarms([A],this.myCurrentAlarms.Filter).length&&-1!==this.currentAlarms.indexOf(A)&&(this.currentAlarms[this.currentAlarms.indexOf(A)].AlarmStateChanged.remove(this._alarmStateChange),this.currentAlarms.splice(this.currentAlarms.indexOf(A),1)),this._updateAlarms()}_alarmNewHandler(x){-1===this.currentAlarms.indexOf(x)&&(this.currentAlarms.push(x),x.AlarmStateChanged.add(this._alarmStateChange),this._updateAlarms())}_alarmClearHandler(x){-1!==this.currentAlarms.indexOf(x)&&(this.currentAlarms[this.currentAlarms.indexOf(x)].AlarmStateChanged.remove(this._alarmStateChange),this.currentAlarms.splice(this.currentAlarms.indexOf(x),1),this._updateAlarms()),this._updateAlarms()}_alarmChangeHandler(A){if(-1===this.currentAlarms.indexOf(A)){x.Internal.Domain.Alarm.filterAlarms([A],this.myCurrentAlarms.Filter).length>0&&(this.currentAlarms.push(A),A.AlarmStateChanged.add(this._alarmStateChange)),this._updateAlarms()}}_clickHandler(x){(this.authorizationRight&&!0===this.rights.IsAuthorized||null===this.authorizationRight)&&(this.toggleAlarms&&this.highestPrioAlarms.length<2||!this.toggleAlarms?this.highestPrioElement&&this.highestPrioElement.Name?this.myAlarmService.AcknowledgeAlarm(this.highestPrioElement.Group.GroupTree+"."+this.highestPrioElement.Name):this._noAlarms():this.toggleAlarms&&this.highestPrioAlarms.length>1&&this.myAlarmService.AcknowledgeAlarm(this.toggleAlarmGroup+"."+this.toggleAlarmName))}}A.AlarmLine=AlarmLine}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class HistoricalAlarmList extends x.UI.ControlBase{constructor(A,V){super(A,V),this._listViewControl=null,this._isListViewLoaded=!1,this._isSampleDataLoaded=!1,this.addPropertyList(HistoricalAlarmList,HistoricalAlarmList.propertyList),this.defaultConstructor(A,this.inlineOptions,x.UI.HistoricalAlarmList.controlName,x.UI.HistoricalAlarmList.className)}createTemplate(){return this._historicalAlarmsProvider=new x.UI.HistoricalAlarmProvider(null,{}),null}createHandler(){x.Utilities.isInDesignMode()&&this._historicalAlarmsProvider.addEventListener("designModeDataLoaded",this._onSampleDataLoaded.bind(this))}removeHandler(){x.Utilities.isInDesignMode()&&this._historicalAlarmsProvider.removeEventListener("designModeDataLoaded",this._onSampleDataLoaded.bind(this))}afterInit(){this._alarmItemTemplateElement=document.getElementById(this.template)}attach(){let A=null;if(!this.isAttached){for(A=super.attach();this.element.firstChild;)this.element.removeChild(this.element.firstChild);if(this._listViewElement=document.createElement("div"),this._listViewControl=new WinJS.UI.ListView(this._listViewElement,{}),this.element.appendChild(this._listViewElement),this._listViewElement.setAttribute("id","HistoricalAlarmListViewId"),x.Utilities.addClass(this._listViewElement,"vw-historicalalarms__listview"),this._initListView(),this._isListViewLoaded=!0,x.Utilities.isInDesignMode()&&this._isSampleDataLoaded&&this._historicalAlarmsProvider.insertSampleData(),this._historicalAlarmsProvider)return this._historicalAlarmsProvider.attach()}return A}detach(){let x=null;if(this.isAttached){if(x=super.detach(),this._historicalAlarmsProvider.historicalAlarmList)for(;this._historicalAlarmsProvider.historicalAlarmList.length>0;)this._historicalAlarmsProvider.historicalAlarmList.pop();for(this._listViewElement&&this._listViewElement.winControl&&this._listViewElement.winControl.dispose(),this._historicalAlarmsProvider.historicalAlarmList&&(this._historicalAlarmsProvider.historicalAlarmList=null),this._historicalAlarmsProvider&&this._historicalAlarmsProvider.detach();this.element&&this.element.firstChild;)this.element.removeChild(this.element.firstChild)}return x}_initListView(){this._listViewElement&&this._historicalAlarmsProvider&&this._alarmItemTemplateElement&&(this._historicalAlarmsProvider.historicalAlarmList=new WinJS.Binding.List([],{proxy:!0}),this._listViewElement.winControl.itemDataSource=this._historicalAlarmsProvider.historicalAlarmList.dataSource,this._listViewElement.winControl.itemTemplate=this._alarmItemTemplateElement,this._listViewElement.winControl.layout=new WinJS.UI.ListLayout,this._listViewElement.winControl.selectionMode="single",this._listViewElement.addEventListener("loadingstatechanged",this._listViewChangeHandler))}_onSampleDataLoaded(){x.Utilities.isInDesignMode()&&this._isListViewLoaded&&this._historicalAlarmsProvider.insertSampleData(),this._isSampleDataLoaded=!0}_listViewChangeHandler(x,A){var V=x;window.setImmediate((function(){for(var x=V.srcElement.getElementsByClassName("vw-historicalalarmitemready"),A=0;A<x.length;A++)x[A].winControl.readyBase.call(x[A].winControl,x[A])}))}updateAlarmList(x){this.detach(),this.attach(),this._historicalAlarmsProvider.updateAlarmList(x)}dispose(){return this.detach(),this._historicalAlarmsProvider?this._historicalAlarmsProvider.dispose():super.dispose()}}HistoricalAlarmList.namespace="VisiWin.UI",HistoricalAlarmList.controlName="HistoricalAlarmList",HistoricalAlarmList.className="vw-historicalalarmlist",HistoricalAlarmList.propertyList={designerType:{propertyType:"base",type:"string",defaultValue:"Control"},desiredClasses:{propertyType:"provider",type:"string",child:"_historicalAlarmsProvider"},desiredGroups:{propertyType:"provider",type:"string",child:"_historicalAlarmsProvider"},desiredStates:{propertyType:"provider",type:"string",child:"_historicalAlarmsProvider"},maxPriority:{propertyType:"provider",type:"number",child:"_historicalAlarmsProvider"},minPriority:{propertyType:"provider",type:"number",child:"_historicalAlarmsProvider"},minDate:{propertyType:"provider",type:"any",child:"_historicalAlarmsProvider"},maxDate:{propertyType:"provider",type:"any",child:"_historicalAlarmsProvider"},period:{propertyType:"provider",type:"string",child:"_historicalAlarmsProvider"},sampleData:{propertyType:"provider",type:"string",child:"_historicalAlarmsProvider",defaultValue:"historicalalarmlistsampledata.json"},template:{propertyType:"member",type:"string",defaultValue:"VisiWin.UI.HistoricalAlarmListItemTemplate"},backgroundColor:{propertyType:"memberStyle",type:"string",resourceValue:["getTheme"],defaultValue:"@None"}},A.HistoricalAlarmList=HistoricalAlarmList}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class Label extends x.UI.VariableBase{constructor(x,A){super(x,A),this.properties={designerType:{propertyType:"base",defaultValue:"Control"},show:{propertyType:"member",defaultValue:!0},showSymbol:{propertyType:"controlChild",child:"_symbolControl",childProperty:"show",defaultValue:!1,type:"boolean"},iconFont:{propertyType:"controlChild",child:"_symbolControl"},symbol:{propertyType:"controlChild",child:"_symbolControl"},symbolType:{propertyType:"controlChild",child:"_symbolControl"},symbolSize:{propertyType:"controlChild",child:"_symbolControl"},symbolMargin:{propertyType:"controlChild",child:"_symbolControl",childProperty:"margin"},symbolPosition:{defaultValue:"Left"},showText:{propertyType:"controlChild",child:"_textControl",childProperty:"show",defaultValue:!0,type:"boolean"},textWidth:{propertyType:"controlChild",child:"_textControl",childProperty:"width"},textHeight:{propertyType:"controlChild",child:"_textControl",childProperty:"height"},textMargin:{propertyType:"controlChild",child:"_textControl",childProperty:"margin"},textPadding:{propertyType:"controlChild",child:"_textControl",childProperty:"padding"},textAlignment:{propertyType:"controlChild",child:"_textControl"},lineClamp:{propertyType:"controlChild",child:"_textControl",type:"number"},textWrapping:{propertyType:"controlChild",child:"_textControl"},textTrimming:{propertyType:"controlChild",child:"_textControl"},fontClass:{propertyType:"controlChild",child:"_textControl",forceOverwrite:!0,defaultValue:"Label1"},fontSize:{propertyType:"controlChild",child:"_textControl",forceOverwrite:!0},fontWeight:{propertyType:"controlChild",child:"_textControl",forceOverwrite:!0},lineHeight:{propertyType:"controlChild",child:"_textControl",forceOverwrite:!0},textContrast:{propertyType:"controlChild",child:"_textControl",type:"number"},uppercase:{propertyType:"controlChild",child:"_textControl"},text:{propertyType:"controlChild",child:"_textControl",defaultValue:"Label"},localizableText:{propertyType:"controlChild",child:"_textControl"},backgroundColor:{defaultValue:"@None"},symbolForegroundColor:{defaultValue:"@ForegroundColor"},labelForegroundColor:{defaultValue:"@ForegroundColor"},borderColor:{defaultValue:"@None"},disabledBackgroundColor:{defaultValue:"@None"},disabledForegroundColor:{defaultValue:"@DisabledForegroundColor"},disabledBorderColor:{defaultValue:"@None"}},this.cssStyles={coreStyle:!0,css:"\n            .vw-label {\n                position: relative;\n                width: auto;\n                height: auto;\n                margin: 8px;\n                border-width: 1px;\n                overflow: hidden;\n                display: flex;\n                flex-direction: row;\n                align-items: center;\n                flex-shrink: 0;\n            }\n            .vw-label__symbol {\n                margin: 0 8px;\n            }\n            .vw-label__text {\n                width: 100%;\n                max-height: 100%;\n                margin: 0 8px;\n                flex: 1;\n            }\n        "},this.show=!0,this._symbolControl=null,this._textControl=null,this.initialize(Label)}createTemplate(){let x="";return x='<div data-ref="_symbolControl" class="vw-label__symbol" data-win-control="VisiWin.UI.Symbol"></div>',x+='<div data-ref="_textControl" class="vw-label__text" data-win-control="VisiWin.UI.TextBlock"></div>',this.element.innerHTML='<div data-ref="_symbolControl" class="vw-label__symbol" data-win-control="VisiWin.UI.Symbol"></div><div data-ref="_textControl" class="vw-label__text" data-win-control="VisiWin.UI.TextBlock"></div>',this.initializeChilds()}_updateColors(x){"theme"!=x.changeType&&"property"!=x.changeType&&"status"!=x.changeType&&"firstUpdate"!=x.changeName||(this.disabled?(this.setColor("disabledBackgroundColor","backgroundColor"),this.setColor("disabledBorderColor","borderColor"),this._textControl&&(this._textControl.foregroundColor=this.disabledForegroundColor),this._symbolControl&&(this._symbolControl.foregroundColor=this.disabledForegroundColor)):(this.setColor("backgroundColor","backgroundColor"),this.setColor("borderColor","borderColor"),this._textControl&&(this._textControl.foregroundColor=this.labelForegroundColor),this._symbolControl&&(this._symbolControl.foregroundColor=this.symbolForegroundColor)))}_updateLayout(x){if("firstUpdate"!=x.changeName&&"text"!=x.changeName||this._textControl&&(this._textControl.text=this.text),"firstUpdate"==x.changeName||"symbolPosition"==x.changeName)switch(this.symbolPosition){case"Left":this.element.style.flexDirection="row";break;case"Right":this.element.style.flexDirection="row-reverse"}"firstUpdate"!=x.changeName&&"show"!=x.changeName||(this.element.style.display=this.show?"flex":"none"),"initialized"===x.changeName&&this.isInDesignMode&&"Control"===this.designerType&&(this.text||this.localizableText||(this.text="Label"))}}A.Label=Label}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class Spacer extends x.UI.ControlBase{constructor(A,V){super(A,V),this.addPropertyList(Spacer,Spacer.propertyList),this.defaultConstructor(A,this.inlineOptions,x.UI.Spacer.controlName,x.UI.Spacer.className)}dispose(){return super.dispose()}}Spacer.namespace="VisiWin.UI",Spacer.controlName="Spacer",Spacer.className="vw-spacer",Spacer.propertyList={designerType:{propertyType:"base",type:"string",defaultValue:"Control"},backgroundColor:{propertyType:"memberStyle",type:"string",resourceValue:["getTheme"],defaultValue:"@None"}},A.Spacer=Spacer}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class Card extends x.UI.ControlBase{constructor(A,V){super(A,V),this.addPropertyList(Card,Card.propertyList),this.defaultConstructor(A,this.inlineOptions,x.UI.Card.controlName,x.UI.Card.className)}_updateLayout(A){if("updateLayout"==A.changeName||"deviceType"==A.changeName)if("isPhone"==this.deviceType)switch(this.alignPhone){case"Start":this.element.style.alignSelf="flex-start",this.element.style.webkitAlignSelf="flex-start";break;case"End":this.element.style.alignSelf="flex-end",this.element.style.webkitAlignSelf="flex-end";break;case"Center":this.element.style.alignSelf="center",this.element.style.webkitAlignSelf="center";break;case"Baseline":this.element.style.alignSelf="baseline",this.element.style.webkitAlignSelf="baseline";break;case"Stretch":this.element.style.alignSelf="stretch",this.element.style.webkitAlignSelf="stretch"}else if("isTablet"==this.deviceType)switch(this.alignTablet){case"Start":this.element.style.alignSelf="flex-start",this.element.style.webkitAlignSelf="flex-start";break;case"End":this.element.style.alignSelf="flex-end",this.element.style.webkitAlignSelf="flex-end";break;case"Center":this.element.style.alignSelf="center",this.element.style.webkitAlignSelf="center";break;case"Stretch":this.element.style.alignSelf="stretch",this.element.style.webkitAlignSelf="stretch"}else if("isDesktop"==this.deviceType)switch(this.alignDesktop){case"Start":this.element.style.alignSelf="flex-start",this.element.style.webkitAlignSelf="flex-start";break;case"End":this.element.style.alignSelf="flex-end",this.element.style.webkitAlignSelf="flex-end";break;case"Center":this.element.style.alignSelf="center",this.element.style.webkitAlignSelf="center";break;case"Stretch":this.element.style.alignSelf="stretch",this.element.style.webkitAlignSelf="stretch"}else if("isLargeDesktop"==this.deviceType)switch(this.alignLargeDesktop){case"Start":this.element.style.alignSelf="flex-start",this.element.style.webkitAlignSelf="flex-start";break;case"End":this.element.style.alignSelf="flex-end",this.element.style.webkitAlignSelf="flex-end";break;case"Center":this.element.style.alignSelf="center",this.element.style.webkitAlignSelf="center";break;case"Stretch":this.element.style.alignSelf="stretch",this.element.style.webkitAlignSelf="stretch"}"isPhone"==this.deviceType?this.element.style.order=this.orderPhone.toString():"isTablet"==this.deviceType?this.element.style.order=this.orderTablet.toString():"isDesktop"==this.deviceType?this.element.style.order=this.orderDesktop.toString():"isLargeDesktop"==this.deviceType&&(this.element.style.order=this.orderLargeDesktop.toString()),x.Utilities.isInDesignMode()&&this.element.parentElement.winControl&&this.element.parentElement.winControl.updateLayout()}dispose(){return super.dispose()}}Card.namespace="VisiWin.UI",Card.controlName="Card",Card.className="vw-card",Card.propertyList={designerType:{propertyType:"base",type:"string",defaultValue:"ContentControl"},registerSourceId:{propertyType:"base",type:"string",defaultValue:"Card"},shadow:{propertyType:"base",type:"string",defaultValue:"@Elevation_z2"},deviceType:{propertyType:"member",type:"string"},columnsPhone:{propertyType:"member",type:"number",defaultValue:4},columnsTablet:{propertyType:"member",type:"number",defaultValue:4},columnsDesktop:{propertyType:"member",type:"number",defaultValue:4},columnsLargeDesktop:{propertyType:"member",type:"number",defaultValue:4},orderPhone:{propertyType:"member",type:"number",defaultValue:0},orderTablet:{propertyType:"member",type:"number",defaultValue:0},orderDesktop:{propertyType:"member",type:"number",defaultValue:0},orderLargeDesktop:{propertyType:"member",type:"number",defaultValue:0},alignPhone:{propertyType:"member",type:"string",defaultValue:"Stretch"},alignTablet:{propertyType:"member",type:"string",defaultValue:"Stretch"},alignDesktop:{propertyType:"member",type:"string",defaultValue:"Stretch"},alignLargeDesktop:{propertyType:"member",type:"string",defaultValue:"Stretch"},backgroundColor:{propertyType:"memberStyle",type:"string",resourceValue:["getTheme"],defaultValue:"@BackgroundColor"},borderColor:{propertyType:"memberStyle",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"}},A.Card=Card}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class CardHeader extends x.UI.ControlBase{constructor(A,V){super(A,V),this._titleElement=null,this._subtitleElement=null,this.addPropertyList(CardHeader,CardHeader.propertyList),this.defaultConstructor(A,this.inlineOptions,x.UI.CardHeader.controlName,x.UI.CardHeader.className)}createTemplate(){return this.element.innerHTML=['<div class="vw-cardheader__title" data-win-control="VisiWin.UI.TextBlock"></div>','<div class="vw-cardheader__subtitle" data-win-control="VisiWin.UI.TextBlock" ></div>'].join("\n"),this._titleElement=this.element.firstElementChild,this._subtitleElement=this._titleElement.nextElementSibling,this.processElements([this._titleElement,this._subtitleElement])}dispose(){return super.dispose()}}CardHeader.namespace="VisiWin.UI",CardHeader.controlName="CardHeader",CardHeader.className="vw-cardheader",CardHeader.propertyList={designerType:{propertyType:"base",type:"string",defaultValue:"Control"},showTitle:{propertyType:"child",type:"boolean",child:"_titleElement",childProperty:"show",defaultValue:!0},titleWidth:{propertyType:"child",type:"string",child:"_titleElement",childProperty:"width"},titleHeight:{propertyType:"child",type:"string",child:"_titleElement",childProperty:"height"},titleMargin:{propertyType:"child",type:"string",child:"_titleElement",childProperty:"margin"},titlePadding:{propertyType:"child",type:"string",child:"_titleElement",childProperty:"padding"},titleText:{propertyType:"child",type:"string",child:"_titleElement",childProperty:"text",defaultValue:"Title"},localizableTitleText:{propertyType:"child",type:"string",child:"_titleElement",childProperty:"localizableText"},titleTextAlignment:{propertyType:"child",type:"string",child:"_titleElement",childProperty:"textAlignment"},titleLineClamp:{propertyType:"child",type:"number",child:"_titleElement",childProperty:"lineClamp"},titleTextWrapping:{propertyType:"child",type:"string",child:"_titleElement",childProperty:"textWrapping"},titleTextTrimming:{propertyType:"child",type:"string",child:"_titleElement",childProperty:"textTrimming"},titleFontClass:{propertyType:"child",type:"string",child:"_titleElement",childProperty:"fontClass",defaultValue:"Title"},titleFontSize:{propertyType:"child",type:"string",child:"_titleElement",childProperty:"fontSize"},titleFontWeight:{propertyType:"child",type:"string",child:"_titleElement",childProperty:"fontWeight"},titleLineHeight:{propertyType:"child",type:"string",child:"_titleElement",childProperty:"lineHeight"},titleTextContrast:{propertyType:"child",type:"number",child:"_titleElement",childProperty:"textContrast"},titleUppercase:{propertyType:"child",type:"boolean",child:"_titleElement",childProperty:"uppercase"},showSubtitle:{propertyType:"child",type:"boolean",child:"_subtitleElement",childProperty:"show",defaultValue:!1},subtitleWidth:{propertyType:"child",type:"string",child:"_subtitleElement",childProperty:"width"},subtitleHeight:{propertyType:"child",type:"string",child:"_subtitleElement",childProperty:"height"},subtitleMargin:{propertyType:"child",type:"string",child:"_subtitleElement",childProperty:"margin"},subtitlePadding:{propertyType:"child",type:"string",child:"_subtitleElement",childProperty:"padding"},subtitleText:{propertyType:"child",type:"string",child:"_subtitleElement",childProperty:"text",defaultValue:"Subtitle"},localizableSubtitleText:{propertyType:"child",type:"string",child:"_subtitleElement",childProperty:"localizableText"},subtitleTextAlignment:{propertyType:"child",type:"string",child:"_subtitleElement",childProperty:"textAlignment"},subtitleLineClamp:{propertyType:"child",type:"number",child:"_subtitleElement",childProperty:"lineClamp"},subtitleTextWrapping:{propertyType:"child",type:"string",child:"_subtitleElement",childProperty:"textWrapping"},subtitleTextTrimming:{propertyType:"child",type:"string",child:"_subtitleElement",childProperty:"textTrimming"},subtitleFontClass:{propertyType:"child",type:"string",child:"_subtitleElement",childProperty:"fontClass",defaultValue:"Subtitle2"},subtitleFontSize:{propertyType:"child",type:"string",child:"_subtitleElement",childProperty:"fontSize"},subtitleFontWeight:{propertyType:"child",type:"string",child:"_subtitleElement",childProperty:"fontWeight"},subtitleLineHeight:{propertyType:"child",type:"string",child:"_subtitleElement",childProperty:"lineHeight"},subtitleTextContrast:{propertyType:"child",type:"number",child:"_subtitleElement",childProperty:"textContrast"},subtitleUppercase:{propertyType:"child",type:"boolean",child:"_subtitleElement",childProperty:"uppercase"},backgroundColor:{propertyType:"memberStyle",type:"string",resourceValue:["getTheme"],defaultValue:"@PrimaryColor"},borderColor:{propertyType:"memberStyle",type:"string",resourceValue:["getTheme"],defaultValue:"@DividerColor"},titleForegroundColor:{propertyType:"child",type:"string",child:"_titleElement",childProperty:"foregroundColor",defaultValue:"@AltForegroundColor"},subtitleForegroundColor:{propertyType:"child",type:"string",child:"_subtitleElement",childProperty:"foregroundColor",defaultValue:"@AltForegroundColor"}},A.CardHeader=CardHeader}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class CardContent extends x.UI.ControlBase{constructor(A,V){super(A,V),this.addPropertyList(CardContent,CardContent.propertyList),this.defaultConstructor(A,this.inlineOptions,x.UI.CardContent.controlName,x.UI.CardContent.className)}_updateLayout(x){if("updateLayout"==x.changeName||"orientation"==x.changeName)switch(this.orientation){case"Vertical":this.element.style.flexDirection="column";break;case"VerticalReverse":this.element.style.flexDirection="column-reverse";break;case"HorizontalReverse":this.element.style.flexDirection="row-reverse";break;default:this.element.style.flexDirection="row"}if("updateLayout"==x.changeName||"alignItems"==x.changeName)switch(this.alignItems){case"Center":this.element.style.alignItems="center";break;case"Start":this.element.style.alignItems="flex-start";break;case"End":this.element.style.alignItems="flex-end";break;case"Baseline":this.element.style.alignItems="baseline";break;default:this.element.style.alignItems="stretch"}if("updateLayout"==x.changeName||"justifyContent"==x.changeName)switch(this.justifyContent){case"End":this.element.style.justifyContent="flex-end";break;case"Center":this.element.style.justifyContent="center";break;case"Space-between":this.element.style.justifyContent="space-between";break;case"Space-around":this.element.style.justifyContent="space-around";break;case"Space-evenly":this.element.style.justifyContent="space-evenly";break;default:this.element.style.justifyContent="flex-start"}if("updateLayout"==x.changeName||"alignContent"==x.changeName)switch(this.alignContent){case"Center":this.element.style.alignContent="center";break;case"Start":this.element.style.alignContent="flex-start";break;case"End":this.element.style.alignContent="flex-end";break;case"Space-between":this.element.style.alignContent="space-between";break;case"Space-around":this.element.style.alignContent="space-around";break;default:this.element.style.alignContent="stretch"}"updateLayout"!=x.changeName&&"wrap"!=x.changeName||(this.element.style.flexWrap=this.wrap?"wrap":"nowrap")}dispose(){return super.dispose()}}CardContent.namespace="VisiWin.UI",CardContent.controlName="CardContent",CardContent.className="vw-cardcontent",CardContent.propertyList={designerType:{propertyType:"base",type:"string",defaultValue:"ContentControl"},overflow:{propertyType:"style",type:"string"},orientation:{propertyType:"member",type:"string",defaultValue:"Vertical"},alignItems:{propertyType:"member",type:"string",defaultValue:"Start"},justifyContent:{propertyType:"member",type:"string",defaultValue:"Start"},alignContent:{propertyType:"member",type:"string",defaultValue:"Start"},wrap:{propertyType:"member",type:"boolean",defaultValue:!1},backgroundColor:{propertyType:"memberStyle",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},borderColor:{propertyType:"memberStyle",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"}},A.CardContent=CardContent}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){x.UI||(x.UI={})}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";A.YAxisPosition={Left:"left"};class Series extends x.UI.ProviderBase{constructor(A,V){super(A,V),this.addPropertyList(x.UI.Series,x.UI.Series.propertyList),this.defaultConstructor(A,this.inlineOptions,Series.controlName,null)}}Series.namespace="VisiWin.UI",Series.controlName="Series",Series.propertyList={registerSourceId:{propertyType:"base",defaultValue:"Series"},designTimeData:{},archiveName:{},trendName:{},yaxisNumber:{type:"number",defaultValue:0},showLine:{type:"boolean",defaultValue:!0},lineWidth:{type:"number",defaultValue:1},lineFill:{type:"boolean",defaultValue:!1},lineColor:{type:"string",defaultValue:"@Black"},lineFillColor:{type:"string",defaultValue:"@ForegroundColor"},lineSteps:{type:"boolean",defaultValue:!1},lineZero:{type:"boolean",defaultValue:!1},showAxis:{type:"boolean",defaultValue:!0},position:{type:"string",defaultValue:"left"},rawLimitMin:{type:"number",defaultValue:0},rawLimitMax:{type:"number",defaultValue:100},ticks:{type:"number",defaultValue:4},labelWidth:{type:"number",defaultValue:30},tickLength:{type:"number",defaultValue:4},tickDecimals:{type:"number",defaultValue:0},yaxisColor:{type:"string",defaultValue:"@ForegroundColor"}},A.Series=Series}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){x.UI||(x.UI={})}(VisiWin||(VisiWin={}));var __awaiter=this&&this.__awaiter||function(x,A,V,R){return new(V||(V=Promise))((function(D,N){function fulfilled(x){try{step(R.next(x))}catch(x){N(x)}}function rejected(x){try{step(R.throw(x))}catch(x){N(x)}}function step(x){x.done?D(x.value):function adopt(x){return x instanceof V?x:new V((function(A){A(x)}))}(x.value).then(fulfilled,rejected)}step((R=R.apply(x,A||[])).next())}))},VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin,VisiWin;!function(x){!function(A){"use strict";class TrendChartController extends x.UI.ControlBase{constructor(A,V){super(A,V),this.cssStyles={css:'\n                .vw-trendchartcontroller {\n                    position: relative;\n                }\n                .before::before {\n                  content: "Please set the name of the corresponding TrendChart in the Trend Chart ID property.";\n                }\n                .no-before::before{\n                    content:"";\n                    display:none;\n                  }\n            '},this._containerElement=document.createElement("div"),this.disableControlsOnDataRequest=!0,this.designTimeWarning=!0,this.template=null,this._hasTriggerIds=!1,this._trendChart=null,this._toggleButton=null,this._trendDataRequestStartedHandler=this._trendDataRequestStarted.bind(this),this._trendDataRequestCompletedHandler=this._trendDataRequestCompleted.bind(this),this._boundDataTemplateReady=this.dataTemplateReady.bind(this),this.addPropertyList(TrendChartController,TrendChartController.propertyList),this.defaultConstructor(A,this.inlineOptions,x.UI.TrendChartController.controlName,x.UI.TrendChartController.className),this.template&&(this.addEventListener("templateReady",this._boundDataTemplateReady),x.AppServices.DataTemplateService.getDataTemplate(this,this.template,"templateReady"))}_trendDataRequestStarted(x){if(this.disableControlsOnDataRequest){this._containerElement.querySelectorAll("[data-win-control]").forEach(x=>{x.winControl._triggerCollection&&(x.winControl.disabled=!0)})}}_trendDataRequestCompleted(x){if(this.disableControlsOnDataRequest){this._containerElement.querySelectorAll("[data-win-control]").forEach(x=>{x.winControl._triggerCollection&&(x.winControl.disabled=!1)})}this._toggleButton&&this._tryUpdateToggleState(x)}createTemplate(){return this.template||this.inlineOptions.template||(this._containerElement.innerHTML=`\n                    <div data-win-control="VisiWin.UI.FlexLayout" data-win-options='{"width":"100%","height":"55px","orientation":"Horizontal","justifyContent":"End","alignItems":"End"}'>\n                    ${x.UI.Trend.Controller.fastBackwardButton}\n                    ${x.UI.Trend.Controller.backwardButton}\n                    ${x.UI.Trend.Controller.toggledButton}\n                    ${x.UI.Trend.Controller.forwardButton}\n                    ${x.UI.Trend.Controller.fastForwarddButton}\n                    ${x.UI.Trend.Controller.refreshButton}\n                    ${x.UI.Trend.Controller.timespanDropDown}\n                    </div>`),this.element.appendChild(this._containerElement),this.initializeChilds()}dataTemplateReady(x){return __awaiter(this,void 0,void 0,(function*(){x.detail&&x.detail[this.template]&&x.detail[this.template].templateFragment&&(this._containerElement.innerHTML=x.detail[this.template].templateFragment,this._containerElement.classList.add("vw-trendchartcontroller"),this.initializeChilds(),this._updateIdForTriggers())}))}_updateIdForTriggers(){if(!this.isInDesignMode&&!this._hasTriggerIds&&this.isAttached){this._containerElement.querySelectorAll("[data-win-control]").forEach(x=>{x.winControl.readyBase&&x.winControl.readyBase(),"ToggleButton"==x.winControl.__VWCONTROL__&&(this._toggleButton=x.winControl),x.winControl._triggerCollection&&x.winControl._triggerCollection.forEach((x,A,V)=>{x.triggeredActions&&x.triggeredActions.length&&x.triggeredActions.forEach((x,A,V)=>{""!==x.targetSelector&&"self"!==x.targetSelector||(x.targetSelector="#"+this.trendChartId,this._hasTriggerIds=!0)})})}),this._tryFindTrendChart()}}_tryUpdateToggleState(A){if(this._toggleButton)for(let V=0;V<this._toggleButton.triggerCollection.length;V++)if(this._toggleButton.triggerCollection[V].triggeredActions){let R=this._toggleButton.triggerCollection[V].triggeredActions;for(let V=0;V<R.length;V++)if("SetPropertyAction"===R[V].constructor.name&&"symbol"===R[V].propertyName)if(A[0].TrendOnline?R[V].propertyValueIfFalse&&this._toggleButton.symbol!==R[V].propertyValueIfFalse&&(this._toggleButton.symbol=R[V].propertyValueIfFalse):R[V].propertyValueIfTrue&&this._toggleButton.symbol!==R[V].propertyValueIfTrue&&(this._toggleButton.symbol=R[V].propertyValueIfTrue),A[0].TrendOnline){if(!1!==this._toggleButton.checked&&(this._toggleButton._checked=!1,x.Utilities.removeClass(this._toggleButton.element,"checked"),x.Utilities.addClass(this._toggleButton.element,"unchecked"),this._toggleButton._symbolElement&&this._toggleButton._symbolElement.winControl)){let x=this._toggleButton.foregroundColor;x=this._toggleButton.__t(x,"foregroundColor"),this._toggleButton._symbolElement.style.color=x;let A=this._toggleButton.backgroundColor;A=this._toggleButton.__t(A,"backgroundColor"),this._toggleButton.element.style.backgroundColor=A}}else if(!0!==this._toggleButton.checked&&(this._toggleButton._checked=!0,x.Utilities.addClass(this._toggleButton.element,"checked"),x.Utilities.removeClass(this._toggleButton.element,"unchecked"),this._toggleButton._symbolElement&&this._toggleButton._symbolElement.winControl)){let x=this._toggleButton.checkedPressedForegroundColor;x=this._toggleButton.__t(x,"foregroundColor"),this._toggleButton._foregroundColor=x;let A=this._toggleButton.pressedBackgroundColor;A=this._toggleButton.__t(A,"backgroundColor"),this._toggleButton._backgroundColor=A}}}_tryGetOrCreateId(){return __awaiter(this,void 0,void 0,(function*(){const A=x.Utilities.findParentElementByClassName(this.element,"vw-page");if(A){const V=A.querySelector(".vw-trendchart");if(V&&V.winControl){if(V.winControl.trendChartID&&"Required"!==V.winControl.trendChartID)this.trendChartId=V.winControl.trendChartID;else try{this.trendChartId="ID_"+V.winControl.controlId,V.setAttribute("id",this.trendChartId),V.winControl.trendChartID=this.trendChartId,x.Application.InfoLog.log("TrendChartController requires TrendChart ID, it assigns an automatic ID and tries to connect to the TrenChart with the ID:"+this.trendChartId)}catch(A){x.Application.WarnLog.log("TrendChartController requires TrendChart ID")}this._hasTriggerIds||(this.template||(yield x.UI.processAll(this._containerElement)),this._updateIdForTriggers())}}}))}_tryFindTrendChart(){return __awaiter(this,void 0,void 0,(function*(){if(this.trendChartId){const x=document.getElementById(this.trendChartId);x&&x&&x.winControl&&x.winControl.trendChartID&&x.winControl.trendChartID===this.trendChartId&&(this._trendChart=x.winControl,this._trendChart&&(this._trendChart.ChartDataRequestStarted.remove(this._trendDataRequestStartedHandler),this._trendChart.ChartDataRequestCompleted.remove(this._trendDataRequestCompletedHandler),this._trendChart.ChartDataRequestStarted.add(this._trendDataRequestStartedHandler),this._trendChart.ChartDataRequestCompleted.add(this._trendDataRequestCompletedHandler)))}}))}ready(){return __awaiter(this,void 0,void 0,(function*(){try{if(!this.isInDesignMode){if(""===this.trendChartId){if(yield this._tryGetOrCreateId(),""===this.trendChartId)return void x.Application.WarnLog.log("TrendChartController requires TrendChart ID")}else this._hasTriggerIds||(yield x.UI.processAll(this._containerElement));this._tryFindTrendChart()}}catch(x){}return null}))}attach(){return this.isAttached||super.attach(),this._tryFindTrendChart(),this._updateIdForTriggers(),null}detach(){let x=null;return this.isAttached&&(x=super.detach()),x}_updateLayout(A){"authorized"===A.changeName&&A.newValue,"isAuthorized"===A.changeName||"authorized"===A.changeName&&A.newValue,"designTimeWarning"!==A.changeName&&"initialized"!==A.changeName||this.isInDesignMode&&(this.designTimeWarning&&(this.element.classList.remove("no-before"),this.element.classList.add("before")),this.designTimeWarning&&""===this.trendChartId||(this.element.classList.add("no-before"),this.element.classList.remove("before"))),"trendChartId"!==A.changeName&&this.isInDesignMode||(this.trendChartId=x.Utilities.removeHashFromId(this.trendChartId),this.element.classList.remove("no-before"),this.element.classList.remove("before"))}dispose(){return this.detach(),super.dispose()}}TrendChartController.namespace="VisiWin.UI",TrendChartController.controlName="TrendChartController",TrendChartController.className="vw-trendchartcontroller",TrendChartController.propertyList={designerType:{propertyType:"base",type:"string",defaultValue:"Control"},designTimeWarning:{propertyType:"member",type:"boolean",defaultValue:!0},trendChartId:{propertyType:"member",type:"string",defaultValue:""},template:{propertyType:"member",type:"string",defaultValue:""},disableControlsDuringRequest:{propertyType:"member",type:"boolean",defaultValue:!0},backgroundColor:{propertyType:"memberStyle",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},disableControlsOnDataRequest:{propertyType:"member",type:"boolean",defaultValue:!0}},A.TrendChartController=TrendChartController}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){!function(x){"use strict";x.fastBackwardButton='<div data-win-control="VisiWin.UI.Button" data-win-options=\'{"style":"Plain.Icon","margin":"0px","symbol":"fast_rewind","symbolSize":"32px"}\'\ndata-win-actions=\'{"triggers":[{"type":"VisiWin.Triggers.ControlEventTrigger","eventName":"onButtonclick","triggeredActions":[{"type":"VisiWin.Actions.TrendChartFastBackwardAction"}]}]}\'>\n</div>',x.backwardButton='<div data-win-control="VisiWin.UI.Button" data-win-options=\'{"style":"Plain.Icon","margin":"0px","symbol":"skip_previous","symbolSize":"32px"}\'\ndata-win-actions=\'{"triggers":[{"type":"VisiWin.Triggers.ControlEventTrigger","eventName":"onButtonclick","triggeredActions":[{"type":"VisiWin.Actions.TrendChartBackwardAction"}]}]}\'>\n</div>\n',x.toggledButton='<div data-win-control="VisiWin.UI.ToggleButton" data-win-options=\'{"style":"Plain.Icon","margin": "0px","padding": "0px","symbolSize": "40px","symbolOn": "play_arrow","symbolOff": "pause"}\'\ndata-win-actions=\'{"triggers":[{"type":"VisiWin.Triggers.ControlEventTrigger","eventName":"onCheckedChanged","sourcePropertyValueName":"checked","triggeredActions":[\n{"type":"VisiWin.Actions.SetPropertyAction","propertyName":"symbol","propertyValueIfTrue":"play_arrow","propertyValueIfFalse":"pause","operand1":"value","operator":"==","operand2":"true"},\n{"type":"VisiWin.Actions.TrendChartToggleOnlineAction"}]}]}\'>\n</div>\n',x.forwardButton='<div data-win-control="VisiWin.UI.Button"\ndata-win-options=\'{"style":"Plain.Icon","margin":"0px","symbol":"skip_next","symbolSize":"32px"}\'\ndata-win-actions=\'{"triggers":[{"type":"VisiWin.Triggers.ControlEventTrigger","eventName":"onButtonclick","triggeredActions":[{"type":"VisiWin.Actions.TrendChartForwardAction"}]}]}\'>\n</div>\n',x.fastForwarddButton='<div data-win-control="VisiWin.UI.Button"\ndata-win-options=\'{"style":"Plain.Icon","margin":"0px","symbol":"fast_forward","symbolSize":"32px"}\'\ndata-win-actions=\'{"triggers":[{"type":"VisiWin.Triggers.ControlEventTrigger","eventName":"onButtonclick","triggeredActions":[{"type":"VisiWin.Actions.TrendChartFastForwardAction"}]}]}\'>\n</div>',x.refreshButton='<div data-win-control="VisiWin.UI.Button"\ndata-win-options=\'{"style":"Plain.Icon","margin":"0px","symbol":"refresh","symbolSize":"32px"}\'\ndata-win-actions=\'{"triggers":[{"type":"VisiWin.Triggers.ControlEventTrigger","eventName":"onButtonclick","triggeredActions":[{"type":"VisiWin.Actions.TrendChartRefreshAction"}]}]}\'>\n</div>\n',x.timespanDropDown='<div data-win-control="VisiWin.UI.DropDownBox"\ndata-win-options=\'{"style":"Plain.Default","width":"112px","margin":"0px","menuPlacement":"Top","showFloatingLabel":false,"selectedIndex":0}\'\ndata-win-actions=\'{"triggers":[{"type":"VisiWin.Triggers.ControlEventTrigger","eventName":"onSelectedIndexChanged","triggeredActions":[{"type":"VisiWin.Actions.TrendChartTimeSpanAction","timeSpanIfTrue":"value"}]}]}\'>\n<div data-win-control="VisiWin.UI.DropDownBoxItem" data-win-options=\'{"style":"Plain.Default","value":"2",  "text":"00:02:00","textAlignment":"Center"}\'></div>\n<div data-win-control="VisiWin.UI.DropDownBoxItem" data-win-options=\'{"style":"Plain.Default","value":"10", "text":"00:10:00","textAlignment":"Center"}\'></div>\n<div data-win-control="VisiWin.UI.DropDownBoxItem" data-win-options=\'{"style":"Plain.Default","value":"15", "text":"00:15:00","textAlignment":"Center"}\'></div>\n<div data-win-control="VisiWin.UI.DropDownBoxItem" data-win-options=\'{"style":"Plain.Default","value":"30", "text":"00:30:00","textAlignment":"Center"}\'></div>\n<div data-win-control="VisiWin.UI.DropDownBoxItem" data-win-options=\'{"style":"Plain.Default","value":"60", "text":"01:00:00","textAlignment":"Center"}\'></div>\n<div data-win-control="VisiWin.UI.DropDownBoxItem" data-win-options=\'{"style":"Plain.Default","value":"300","text":"05:00:00","textAlignment":"Center"}\'></div>\n</div>'}(x.Controller||(x.Controller={}))}(x.Trend||(x.Trend={}))}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){x.UI||(x.UI={})}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){"use strict";x.XAxisPosition={Bottom:"bottom",Top:"top"}}(x.Trend||(x.Trend={}))}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class TrendChart extends x.UI.ControlBase{constructor(V,R){super(V,R),this.properties={designerType:{propertyType:"base",defaultValue:"Control"},width:{propertyType:"base",defaultValue:"70%"},height:{propertyType:"base",defaultValue:"40%"},trendChartID:{propertyType:"member",type:"string",defaultValue:"Required"},maxSamples:{type:"number",defaultValue:500},timeSpan:{type:"number",defaultValue:2},trendOnline:{propertyType:"member",type:"boolean",defaultValue:!0},refreshRate:{type:"number",defaultValue:1e3},showXAxis:{type:"boolean",defaultValue:!0},xaxisPosition:{type:"string",defaultValue:A.Trend.XAxisPosition.Bottom},xaxisFontSize:{defaultValue:"12px"},xaxisFontWeight:{defaultValue:"400"},xaxisAutoscaleMargin:{type:"number",defaultValue:null},xaxisTicks:{type:"number",defaultValue:4},xaxisLabelWidth:{type:"number",defaultValue:80},xaxisLabelHeight:{type:"number",defaultValue:null},xaxisTickLength:{type:"number",defaultValue:4},showXAxisMinMax:{type:"boolean",defaultValue:!0},xaxisTimeFormat:{defaultValue:""},showGrid:{type:"boolean",defaultValue:!0},gridAboveData:{type:"boolean",defaultValue:!1},gridMargin:{type:"string",defaultValue:"10px 10px 20px 10px "},axisValueMargin:{type:"number",defaultValue:20},yAxisMargin:{type:"number",defaultValue:10},gridBorderWidth:{type:"any",defaultValue:2},gridMinBorderMargin:{type:"number",defaultValue:null},gridMinorTicks:{type:"number",defaultValue:2},gridMinorTicksWidth:{type:"number",defaultValue:1},showMinorTicks:{type:"boolean",defaultValue:!1},zoomInteractive:{type:"boolean",defaultValue:!0},zoomMouseAmount:{type:"number",defaultValue:1.2},zoomTouchAmount:{type:"number",defaultValue:1.2},panInteractive:{type:"boolean",defaultValue:!0},panCursor:{type:"string",defaultValue:"move"},panFrameRate:{type:"number",defaultValue:50},pinchAmount:{type:"number",defaultValue:4},backgroundColor:{propertyType:"member",type:"string",defaultValue:"@None"},xaxisFontColor:{defaultValue:"@ForegroundColor"},xaxisTickColor:{type:"string",defaultValue:"@Black"},gridColor:{defaultValue:"@None"},gridBackgroundColor:{defaultValue:"@None"},gridBorderColor:{defaultValue:"@Black"},gridMarkingsColor:{defaultValue:"@ChromeMedium"},gridMinorTicksColor:{defaultValue:"@ChromeMedium"},dateTimeMode:{propertyType:"member",type:"string",defaultValue:A.DateTimeModeNames.TimeCRDate},formatDate:{propertyType:"member",type:"string",defaultValue:A.DateTimeFormatNames.ShortDate},formatTime:{propertyType:"member",type:"string",defaultValue:A.DateTimeFormatNames.LongTime},zoomTimeOnly:{propertyType:"member",type:"boolean",defaultValue:!1},stopTrendOnPan:{propertyType:"member",type:"boolean",defaultValue:!0},stopTrendOnZoom:{propertyType:"member",type:"boolean",defaultValue:!0},borderColor:{defaultValue:"@None"},disableControlsOnDataRequest:{propertyType:"member",type:"boolean",defaultValue:!0},showLoadingSymbolOnDataRequest:{propertyType:"member",type:"boolean",defaultValue:!1},loadingOverlaySymbol:{propertyType:"member",type:"string",defaultValue:"spinner1"},loadingOverlayBackgroundColor:{propertyType:"member",type:"string",defaultValue:"@Transparent"},loadingOverlayForegroundColor:{propertyType:"member",type:"string",defaultValue:"@ForegroundColor"}},this.cssStyles={css:"\n            .vw-trendchart {\n                position: relative;\n                width: 500px;\n                height: 300px;\n            }                \n        "},this.series=[],this.stopTrendOnPan=!0,this.stopTrendOnZoom=!0,this.zoomTimeOnly=!1,this.showLoadingSymbolDuringRequest=!0,this.maxSamples=null,this.timeSpan=null,this._trendOnline=!1,this._requestCounter=0,this._trendDataRequestStartedHandler=this._trendDataRequestStarted.bind(this),this._trendDataRequestCompletedHandler=this._trendDataRequestCompleted.bind(this),this.xaxisPosition=A.Trend.XAxisPosition.Bottom,this.dateTimeMode="TimeCRDate",this.formatDate="ShortDate",this.formatTime="LongTime",this._trendChart=null,this._trendChartOptions={},this._trendChartDataset=[],this._dateMax=null,this._trendProviders=[],this._trendProviderTimeout=null,this._refreshRate=null,this._yaxes=[],this._grid={},this.refreshRate=1e3,this._intervalID=null,this._refreshRateTimeout=!0,this._showOnlineOnce=!0,this._showOfflineOnce=!0,this.coreElement=null,this._boundSeriesChanged=this._onSeriesChanged.bind(this),this.TrendChartPlugins=x.UI.TrendHelper.PlotPlugIns,this.disableControlsOnDataRequest=!1,this.showLoadingSymbolOnDataRequest=!1,this.loadingOverlaySymbol="spinner8",this.loadingOverlayBackgroundColor="@Transparent",this.loadingOverlayForegroundColor="@ForegroundColor",this._areSeriesValid=!1,this._pandragEvent=function(x){!0===this.stopTrendOnPan&&(this.trendOnline=!1),this._handleTimeOnlyZoom()}.bind(this),this._pinchdragEvent=function(x){!0===this.stopTrendOnZoom&&(this._handleTimeOnlyZoom(),this.trendOnline=!1)}.bind(this),this._doubletapEvent=function(x){this.trendOnline=!0,this.refresh()}.bind(this),this._dblclickEvent=function(x){this.trendOnline=!0,this.refresh()}.bind(this),this._wheelEvent=function(x){!0===this.stopTrendOnZoom&&(this._handleTimeOnlyZoom(),this.trendOnline=!1)}.bind(this),this._dragstartEvent=function(x){!0===this.stopTrendOnPan&&(this._handleTimeOnlyZoom(),this.trendOnline=!1)}.bind(this),this._gridMinorTicksMarkings=A=>{const V=[];if(!0===A.xaxis.showMinorTicks&&"x"===A.xaxis.direction)for(let R=0;R<A.xaxis.ticks.length;++R)if(V.push({color:A.xaxis.options.tickColor,lineWidth:this.gridMinorTicksWidth,xaxis:{from:A.xaxis.ticks[R].v,to:A.xaxis.ticks[R].v}}),R<A.xaxis.ticks.length-1){const D=A.xaxis.ticks[R].v,N=A.xaxis.ticks[R+1].v,U=x.UI.TrendHelper.Plot.uiConstants.MINOR_TICKS_COUNT_CONSTANT,B=(N-D)/(U+1);for(let x=1;x<=U;x++){const A=D+x*B;V.push({color:this._grid.minorTicksColor,lineWidth:this.gridMinorTicksWidth,xaxis:{from:A,to:A}})}}return V},this._boundDataSamplesAllproviders=this._onDataSamplesAllproviders.bind(this),this.initialize(TrendChart,this.properties),this.element.id?this.trendChartID=this.element.id:this.element.setAttribute("id",this.trendChartID),this.ChartDataRequestStarted=new x.Internal.System.Events.TypedEvent,this.ChartDataRequestCompleted=new x.Internal.System.Events.TypedEvent}get trendOnline(){return this._trendOnline}set trendOnline(x){this._trendOnline!==x&&(this._trendOnline=x,this._trendProviders.length>0&&this._refreshTrendProvider(this._trendOnline),this._setTrendProviderOptions(),this._trendChart&&this._trendChart.setupGrid(),this._trendChart&&this._trendChart.draw())}_createProviderOptionsEventArgs(x){return{ArchiveName:x.ArchiveName,TrendNames:x.TrendNames,DateMax:x.MaxDate,MaxSamples:x.MaxSamples,TimeSpan:x.TimeSpan,TrendOnline:x.TrendOnline}}_trendDataRequestStarted(x){if(this._requestCounter=this._requestCounter+1,this._trendProviders.length===this._requestCounter){const x=[];for(let A=0;A<this._trendProviders.length;A++){const V=this._createProviderOptionsEventArgs(this._trendProviders[A]);x.push(V)}this.disableControlsOnDataRequest&&this._trendChart&&(this._trendChart.getPlaceholder().style.pointerEvents="none"),this.TrendChartPlugins.find(x=>{"loadingOverlay"===x.name&&x.show(this._trendChart)}),this.ChartDataRequestStarted.trigger(x)}}_trendDataRequestCompleted(A){return __awaiter(this,void 0,void 0,(function*(){if(this._requestCounter=this._requestCounter-1,0===this._requestCounter){const x=[];for(let A=0;A<this._trendProviders.length;A++){const V=this._createProviderOptionsEventArgs(this._trendProviders[A]);x.push(V)}this.TrendChartPlugins.find(x=>{"loadingOverlay"===x.name&&x.hide(this._trendChart)}),this.disableControlsOnDataRequest&&this._trendChart&&this.authorized&&(this._trendChart.getPlaceholder().style.pointerEvents="auto"),this.ChartDataRequestCompleted.trigger(x)}if(this._requestCounter<0){x.Application.InfoLog.log("TrendChart: Request for chart data unclear.");const A=[];for(let x=0;x<this._trendProviders.length;x++)A.push(this._createProviderOptionsEventArgs(this._trendProviders[x]));this.TrendChartPlugins.find(x=>{"loadingOverlay"===x.name&&x.hide(this._trendChart)}),this.disableControlsOnDataRequest&&this._trendChart&&this.authorized&&(this._trendChart.getPlaceholder().style.pointerEvents="auto"),this.ChartDataRequestCompleted.trigger(A)}}))}get xaxisTimeFormat(){return this._xaxisTimeFormat}set xaxisTimeFormat(A){this.findDateFormat(),x.isNullOrUndefined(this._xaxisTimeFormat)&&(this._xaxisTimeFormat="longtimeformatercrnamedshortdateformater")}createTemplate(){const x=document.createElement("div");return this.reparentChildren(this.element,x),this.element.innerHTML='<div data-ref-element="coreElement" class="dev-trendchart__core" data-win-control="VisiWin.UI.TrendHelper.TrendChartCore"></div>',this.reparentChildren(x,this.element),this.initializeChilds()}_onSeriesChanged(){this._validateSeries(),this._drawTrendChart()}_validateSeries(){if(!this.isInDesignMode&&!0!==this._areSeriesValid){for(let A=0;A<this.series.length;A++){const V=x.System.Trend.TrendService.getService().GetArchive(this.series[A].archiveName);if(V||(x.Internal.Domain.Logger.WarnLog.log(`Warning the archive='${this.series[A].archiveName}' does not exist.`),this.series.splice(A,1),A--),V){x.System.Trend.TrendService.getService().GetTrend(this.series[A].archiveName,this.series[A].trendName)||(x.Internal.Domain.Logger.WarnLog.log(`Warning the trend='${this.series[A].trendName}' in the archive='${this.series[A].archiveName}' does not exist.`),this.series.splice(A,1),A--)}}this._areSeriesValid=!0}}_createChartCoreElement(){this._setChartOptions(),null!==this._trendChart&&null!==this.coreElement&&this._removePlugInEventHandler(),this._trendChart=this.coreElement.winControl.init(this.coreElement,this._trendChartDataset,this._trendChartOptions,this.TrendChartPlugins),this._addPlugInEventHandler()}_handleTimeOnlyZoom(){if(this.zoomTimeOnly){const x=this.coreElement.plot.getAxes();x.yaxis.options.axisPan=!1,x.yaxis.options.axisZoom=!1}}_addPlugInEventHandler(){if(this.coreElement){const x=this.coreElement.plot.getEventHolder();x&&(x.addEventListener("dragstart",this._dragstartEvent),x.addEventListener("wheel",this._wheelEvent),x.addEventListener("dblclick",this._dblclickEvent),x.addEventListener("pandrag",this._pandragEvent),x.addEventListener("pinchdrag",this._pinchdragEvent),x.addEventListener("doubletap",this._doubletapEvent))}}_removePlugInEventHandler(){if(this.coreElement){const x=this.coreElement.plot.getEventHolder();x&&(x.removeEventListener("dragstart",this._dragstartEvent),x.removeEventListener("wheel",this._wheelEvent),x.removeEventListener("dblclick",this._dblclickEvent),x.removeEventListener("pandrag",this._pandragEvent),x.removeEventListener("pinchdrag",this._pinchdragEvent),x.removeEventListener("doubletap",this._doubletapEvent))}}findDateFormat(){let V="";switch(this.dateTimeMode){case A.DateTimeModeNames[A.DateTimeModeNames.TimeOnly]:this.formatTime===x.UI.DateTimeFormatNames.LongTime&&(this._xaxisTimeFormat="longtimeformater"),this.formatTime===x.UI.DateTimeFormatNames.ShortTime&&(this._xaxisTimeFormat="shorttimeformater");break;case A.DateTimeModeNames[A.DateTimeModeNames.DateOnly]:this.formatDate===x.UI.DateTimeFormatNames.LongDate&&(this._xaxisTimeFormat="longdateformater"),this.formatDate===x.UI.DateTimeFormatNames.ShortDate&&(this._xaxisTimeFormat="shortdateformater"),this.formatDate===x.UI.DateTimeFormatNames.NamedShortDate&&(this._xaxisTimeFormat="namedshortdateformater"),this.formatDate===x.UI.DateTimeFormatNames.NamedLongDate&&(this._xaxisTimeFormat="namedlongdateformater");break;case A.DateTimeModeNames[A.DateTimeModeNames.DateTime]:this.formatTime===x.UI.DateTimeFormatNames.LongTime&&(V="longtimeformater"),this.formatTime===x.UI.DateTimeFormatNames.ShortTime&&(V="shorttimeformater"),this.formatDate===x.UI.DateTimeFormatNames.LongDate&&(this._xaxisTimeFormat="longdateformater_"+V),this.formatDate===x.UI.DateTimeFormatNames.ShortDate&&(this._xaxisTimeFormat="shortdateformater_"+V),this.formatDate===x.UI.DateTimeFormatNames.NamedShortDate&&(this._xaxisTimeFormat="namedshortdateformater_"+V),this.formatDate===x.UI.DateTimeFormatNames.NamedLongDate&&(this._xaxisTimeFormat="namedlongdateformater_"+V);break;case A.DateTimeModeNames[A.DateTimeModeNames.TimeDate]:this.formatTime===x.UI.DateTimeFormatNames.LongTime&&(V="longtimeformater"),this.formatTime===x.UI.DateTimeFormatNames.ShortTime&&(V="shorttimeformater"),this.formatDate===x.UI.DateTimeFormatNames.LongDate&&(this._xaxisTimeFormat=V+"_longdateformater"),this.formatDate===x.UI.DateTimeFormatNames.ShortDate&&(this._xaxisTimeFormat=V+"_shortdateformater"),this.formatDate===x.UI.DateTimeFormatNames.NamedShortDate&&(this._xaxisTimeFormat=V+"_namedshortdateformater"),this.formatDate===x.UI.DateTimeFormatNames.NamedLongDate&&(this._xaxisTimeFormat=V+"_namedlongdateformater");break;case A.DateTimeModeNames[A.DateTimeModeNames.DateCRTime]:this.formatTime===x.UI.DateTimeFormatNames.LongTime&&(V="longtimeformater"),this.formatTime===x.UI.DateTimeFormatNames.ShortTime&&(V="shorttimeformater"),this.formatDate===x.UI.DateTimeFormatNames.LongDate&&(this._xaxisTimeFormat="longdateformatercr"+V),this.formatDate===x.UI.DateTimeFormatNames.ShortDate&&(this._xaxisTimeFormat="shortdateformatercr"+V),this.formatDate===x.UI.DateTimeFormatNames.NamedShortDate&&(this._xaxisTimeFormat="namedshortdateformatercr"+V),this.formatDate===x.UI.DateTimeFormatNames.NamedLongDate&&(this._xaxisTimeFormat="namedlongdateformatercr"+V);break;case A.DateTimeModeNames[A.DateTimeModeNames.TimeCRDate]:this.formatTime===x.UI.DateTimeFormatNames.LongTime&&(V="longtimeformater"),this.formatTime===x.UI.DateTimeFormatNames.ShortTime&&(V="shorttimeformater"),this.formatDate===x.UI.DateTimeFormatNames.LongDate&&(this._xaxisTimeFormat=V+"crlongdateformater"),this.formatDate===x.UI.DateTimeFormatNames.ShortDate&&(this._xaxisTimeFormat=V+"crshortdateformater"),this.formatDate===x.UI.DateTimeFormatNames.NamedShortDate&&(this._xaxisTimeFormat=V+"crnamedshortdateformater"),this.formatDate===x.UI.DateTimeFormatNames.NamedLongDate&&(this._xaxisTimeFormat=V+"crnamedlongdateformater")}}_setChartOptions(){this._setXAxisOptions(),this._setYAxesOptions(),this._setGridOptions(),this._trendChartOptions={},this._trendChartOptions={xaxis:this._xaxis,yaxes:this._yaxes,grid:this._grid,pinch:{amount:this.pinchAmount},series:{points:{show:!1,radius:2,lineWidth:1}}},this.TrendChartPlugins.find(x=>{"touchNavigate"===x.name&&(x.options.pan.enableTouch=this.panInteractive,x.options.zoom.enableTouch=this.zoomInteractive),"navigate"===x.name&&(x.options.pan.interactive=this.panInteractive,x.options.pan.active=this.panInteractive,x.options.zoom.interactive=this.zoomInteractive,x.options.zoom.active=this.zoomInteractive,x.options.pan.cursor=this.panCursor),"loadingOverlay"===x.name&&x.options.loadingOverlay&&(x.options.loadingOverlay.show=this.showLoadingSymbolOnDataRequest,x.options.loadingOverlay.backgroundColor=this.loadingOverlayBackgroundColor,x.options.loadingOverlay.foregroundColor=this.loadingOverlayForegroundColor,x.options.loadingOverlay.loadingSpinner=this.loadingOverlaySymbol)})}_setXAxisOptions(){this._xaxis={},this._xaxis.show=this.showXAxis,this._xaxis.mode="time",this._validateStringProperty(this._xaxis,"timeformat",this.xaxisTimeFormat,null),this._validateStringProperty(this._xaxis,"position",this.xaxisPosition,null),this._validateColorProperty(this._xaxis,"tickColor",this.xaxisTickColor,null),this._validateProperty(this._xaxis,"ticks",this.xaxisTicks,null),this._validateProperty(this._xaxis,"labelWidth",this.xaxisLabelWidth,null),this._validateProperty(this._xaxis,"labelHeight",this.xaxisLabelHeight,null),this._validateProperty(this._xaxis,"tickLength",this.xaxisTickLength,null),this._validateProperty(this._xaxis,"showMinMax",this.showXAxisMinMax,null);const x={fontSize:this.xaxisFontSize,fontWeight:this.xaxisFontWeight,fontColor:this.xaxisFontColor,lineHeight:12};this._validateFontProperty(this._xaxis,"font",x),this._validateProperty(this._xaxis,"showMinorTicks",this.showMinorTicks,null)}_setYAxesOptions(){this._yaxes=[];let x={};for(let A=0;A<this.series.length;A++)"Series"===this.series[A].__VWCONTROL__&&(x={},this._validateProperty(x,"show",this.series[A].showAxis,null),this._validateProperty(x,"min",this.series[A].rawLimitMin,null),this._validateProperty(x,"max",this.series[A].rawLimitMax,null),this._validateStringProperty(x,"position",this.series[A].position,null),this._validateProperty(x,"ticks",this.series[A].ticks,null),this._validateProperty(x,"labelWidth",this.series[A].labelWidth,null),this._validateProperty(x,"tickLength",this.series[A].tickLength,null),this._validateProperty(x,"tickDecimals",this.series[A].tickDecimals,null),this._validateFontProperty(x,"font",this.series[A]),this._validateColorProperty(x,"color",this.series[A].yaxisColor,null),0===A?(this._validateColorProperty(this._grid,"tickColor",this.series[A].yaxisColor,null),this._validateColorProperty(x,"tickColor",this.series[A].yaxisColor,null)):this._validateColorProperty(x,"tickColor",this.series[A].yaxisColor,null),this._validateProperty(x,"zoomTimeOnly",this.zoomTimeOnly,null),x.zoomRange=!0,x.panRange=!0,this._yaxes.push(x))}_setLineOptions(x){const A={};return this._validateProperty(A,"show",x.showLine,null),this._validateProperty(A,"lineWidth",x.lineWidth,null),this._validateProperty(A,"fill",x.lineFill,null),this._validateProperty(A,"zero",x.lineZero,null),this._validateProperty(A,"steps",x.lineSteps,null),this._validateColorProperty(A,"color",x.lineColor,null),this._validateColorProperty(A,"fillColor",x.lineFillColor,null),A}_setGridOptions(){!x.isNullOrUndefined(this.gridLabelMargin)&&x.isNullOrUndefined(this.axisValueMargin)&&(this.axisValueMargin=this.gridLabelMargin),!x.isNullOrUndefined(this.gridAxisMargin)&&x.isNullOrUndefined(this.yAxisMargin)&&(this.yAxisMargin=this.gridAxisMargin),this._validateProperty(this._grid,"show",this.showGrid,null),this._validateProperty(this._grid,"aboveData",this.gridAboveData,null),this._validateColorProperty(this._grid,"tickColor",this.yaxisTickColor,null),this._validateColorProperty(this._grid,"backgroundColor",this.gridBackgroundColor,null),this._validateColorProperty(this._grid,"borderColor",this.gridBorderColor,null),this._validateMarginProperty(this._grid,"margin",this.gridMargin,0),this._validateProperty(this._grid,"labelMargin",this.axisValueMargin,20),this._validateProperty(this._grid,"axisMargin",this.yAxisMargin,8),this._validateProperty(this._grid,"borderWidth",this.gridBorderWidth,2),this._validateProperty(this._grid,"markings",this._gridMinorTicksMarkings,null),this._validateProperty(this._grid,"markingsLineWidth",this.gridMinorTicksWidth,null),"@None"!==this.gridColor?this._validateColorProperty(this._grid,"minorTicksColor",this.gridColor,null):this._validateColorProperty(this._grid,"minorTicksColor",this.gridMinorTicksColor,null),this._validateProperty(this._grid,"minorTicks",this.gridMinorTicks,null)}_validateProperty(x,A,V,R){if(V!==R)return x[A]=V}_validateColorProperty(x,A,V,R){if(V!==R)return x[A]=this.getThemeColor(V)}_validateStringProperty(x,A,V,R){if(V!==R)return x[A]=V.toLowerCase()}_validateMarginProperty(x,A,V,R){if(V!==R){const R={top:0,left:0,bottom:0,right:0};if("string"==typeof V){const x=V.split(" ");R.top=parseInt(x[0]),R.right=parseInt(x[1]),R.bottom=parseInt(x[2]),R.left=parseInt(x[3])}return x[A]=R}}_validateFontProperty(x,A,V){if(null!==V){const R={size:12,lineHeight:12,style:"normal",weight:"400",family:"sans-serif",variant:"normal",color:"Black"};return R.size=parseInt(V.fontSize),R.lineHeight=parseInt(V.lineHeight),R.weight=V.fontWeight,R.color=this.getThemeColor(V.fontColor),R.family=window.getComputedStyle(this.element,null).getPropertyValue("font-family"),x[A]=R}}_drawTrendChart(){if(this._trendChartDataset=[],this.isInDesignMode){for(let x=0;x<this.series.length;x++)if("Series"===this.series[x].controlName){this._trendChartDataset[x]={data:this._getDesignTimeData(this.series[x].designTimeData),color:this.getThemeColor(this.series[x].lineColor),yaxis:this.series[x].yaxisNumber<1?1:this.series[x].yaxisNumber,label:"TrendChart",lines:this._setLineOptions(this.series[x]),archiveName:this.series[x].archiveName,trendName:this.series[x].trendName};this._trendChartDataset[x].label,this._trendChartDataset[x].color}this._createChartCoreElement()}else{this._createChartCoreElement();for(let x=0;x<this.series.length;x++)if("Series"===this.series[x].controlName){this._trendChartDataset[x]={color:this.getThemeColor(this.series[x].lineColor),yaxis:this.series[x].yaxisNumber<1?1:this.series[x].yaxisNumber,label:"TrendChart",lines:this._setLineOptions(this.series[x]),archiveName:this.series[x].archiveName,trendName:this.series[x].trendName};this._trendChartDataset[x].label,this._trendChartDataset[x].color}}}_getDesignTimeData(x){let A=[];const V=this.coreElement.clientWidth||this.maxSamples;switch(x){case"Sine":A=(()=>{const x=[];let A;const R=360/V*4,D=V/4,N=Date.now();for(let V=0;V<=D;V++)A=Math.sin(R*V*Math.PI/180),x.push([N-1e3*V,A]);return x})();break;case"Random":A=((x,A)=>{const R=[];let D;const N=V/4,U=Date.now();for(let V=0;V<N;V++)D=Math.floor(Math.random()*(A-x+1))+x,R.push([U-1e3*V,D]);return R})(1,100)}return A}_onDataSamplesAllproviders(x){for(let A=0;A<this._trendProviders.length;A++)for(let V=0;V<this._trendProviders[A].TrendNames.length;V++)for(let R=0;R<this._trendChartDataset.length;R++)this._trendChartDataset[R].archiveName===x.ArchiveName&&this._trendChartDataset[R].trendName===this._trendProviders[A].TrendNames[V]&&x[this._trendProviders[A].TrendNames[V]]&&x[this._trendProviders[A].TrendNames[V]].length&&(this._trendChartDataset[R].data=x[this._trendProviders[A].TrendNames[V]]);this._updateTrendChart()}_updateTrendChart(){let x,A;const V=60*this.timeSpan*1e3;if(this._trendChartDataset[0]&&this._trendChartDataset[0].data&&this._trendChartDataset[0].data.length>1&&(x=this._trendChartDataset[0].data[this._trendChartDataset[0].data.length-1][0],A=this._trendChartDataset[0].data[0][0]),this._trendChartDataset.length>0)for(let V=1;V<this._trendChartDataset.length;V++)this._trendChartDataset[V].data&&this._trendChartDataset[V].data.length>1&&(this._trendChartDataset[V].data[this._trendChartDataset[V].data.length-1][0]>x&&(x=this._trendChartDataset[V].data[this._trendChartDataset[V].data.length-1][0]),this._trendChartDataset[V].data[0][0]<A&&(A=this._trendChartDataset[V].data[0][0]));if((A<x-V||A>x-V)&&(A=x-V),!0===this.trendOnline){if(this._trendChart.getOptions().xaxes[0].min=A,this._trendChart.getOptions().xaxes[0].max=x,this._trendChart.setData(this._trendChartDataset),this._refreshRate>0){if(!this._refreshRateTimeout)return;this._showOnlineOnce&&(this._showOnlineOnce=!1,this._trendChart.setupGrid(),this._trendChart.draw()),this._refreshRateTimeout=!1,setTimeout(()=>{this._refreshRateTimeout=!0,this._trendChart.setupGrid(),this._trendChart.draw()},parseInt(this._refreshRate))}else this._drawWithUpdateInterval();this._showOfflineOnce=!0,this._dateMax=new Date(x)}else!0===this._showOfflineOnce?(this._showOfflineOnce=!1,this._trendChart.getOptions().xaxes[0].min=A,this._trendChart.getOptions().xaxes[0].max=x,this._trendChart.setData(this._trendChartDataset)):this._trendChart.setData(this._trendChartDataset),this._trendChart.setupGrid(),this._trendChart.draw()}_drawWithUpdateInterval(){null===this._intervalID&&(0===this.refreshRate?(this.refreshRate=1e3,this._calculateRefreshRate(),clearInterval(this._intervalID),window.requestAnimationFrame(()=>{this._trendChart.setupGrid(),this._trendChart.draw()})):this._intervalID=setInterval(()=>{this._trendChart&&this._trendChart.setupGrid?window.requestAnimationFrame(()=>{this._trendChart.setupGrid(),this._trendChart.draw()}):clearInterval(this._intervalID)},this.refreshRate))}_calculateRefreshRate(){try{for(let x=0;x<this._trendChartDataset.length;x++)if(this._trendChartDataset[x].data){const A=this._trendChartDataset[x].data[this._trendChartDataset[x].data.length-2][0],V=this._trendChartDataset[x].data[this._trendChartDataset[x].data.length-1][0]-A;this.refreshRate>V&&(this.refreshRate=V)}}catch(x){}}_setTrendProviderOptions(){const A=[];if(0===this.series.length)return;-1===this.series.map(x=>x.yaxisNumber).indexOf(1)&&(this.series[0].yaxisNumber=1),this._requestCounter=0;for(let x=0;x<this.series.length;x++)"Series"===this.series[x].controlName&&-1===A.indexOf(this.series[x].archiveName)&&A.push(this.series[x].archiveName);for(let V=0;V<A.length;V++){const R={TrendNames:[],ArchiveName:"",DateMax:null,TimeSpan:null,TrendOnline:null,MaxSamples:null};R.ArchiveName=A[V];for(let x=0;x<this.series.length;x++)"Series"===this.series[V].controlName&&A[V]===this.series[x].archiveName&&R.TrendNames.push(this.series[x].trendName);if(R.TimeSpan=null!==this.timeSpan?60*this.timeSpan*1e3:12e4,R.MaxSamples=null!==this.maxSamples?this.maxSamples:this._trendChart.width(),R.TrendOnline=this.trendOnline,this.trendOnline?R.DateMax=new Date:R.DateMax=null!==this._dateMax?new Date(this._dateMax):new Date,this._trendProviderOptions=R,x.isNullOrUndefined(R.ArchiveName))return;if(x.isNullOrUndefined(R.TrendNames[0]))return;if(-1===this._trendProviders.map(x=>x.ArchiveName).indexOf(R.ArchiveName)){const A=new x.Internal.System.Trend.TrendProvider(R);A.DataSamplesUpdate.add(this._boundDataSamplesAllproviders),this._trendProviders.push(A)}}for(let x=0;x<this._trendProviders.length;x++)this._trendProviders[x].SetMaxTime(this._trendProviderOptions.DateMax),this._trendProviders[x].SetTimeSpan(this._trendProviderOptions.TimeSpan),this._trendProviders[x].MaxSamples=this._trendProviderOptions.MaxSamples,this._trendProviders[x].TrendOnline=this._trendProviderOptions.TrendOnline,this.isInDesignMode||(this._trendProviders[x].TrendDataRequestCompleted.remove(this._trendDataRequestCompletedHandler),this._trendProviders[x].TrendDataRequestStarted.remove(this._trendDataRequestStartedHandler),this._trendProviders[x].TrendDataRequestCompleted.add(this._trendDataRequestCompletedHandler),this._trendProviders[x].TrendDataRequestStarted.add(this._trendDataRequestStartedHandler),this._trendProviders[x].init())}_updateTrendProvider(x,A){this.timeSpan=(A-x)/1e3/60,this._dateMax=new Date(A);for(let x=0;x<this._trendProviders.length;x++);this._trendProviderOptions.DateMax=new Date(A),this._trendProviderOptions.TimeSpan=A-x,this._trendProviderOptions.MaxSamples=this.maxSamples,this._trendProviderOptions.TrendOnline=this.trendOnline,clearTimeout(this._trendProviderTimeout),this._trendProviderTimeout=setTimeout(()=>{this._trendProviderTimeout=null,this._requestCounter=0;for(let x=0;x<this._trendProviders.length;x++)this._trendProviders[x].SetMaxTime(this._trendProviderOptions.DateMax),this._trendProviders[x].SetTimeSpan(this._trendProviderOptions.TimeSpan),this._trendProviders[x].MaxSamples=this._trendProviderOptions.MaxSamples,this._trendProviders[x].TrendOnline=this._trendProviderOptions.TrendOnline,this.isInDesignMode||(this._trendProviders[x].TrendDataRequestCompleted.remove(this._trendDataRequestCompletedHandler),this._trendProviders[x].TrendDataRequestStarted.remove(this._trendDataRequestStartedHandler),this._trendProviders[x].TrendDataRequestCompleted.add(this._trendDataRequestCompletedHandler),this._trendProviders[x].TrendDataRequestStarted.add(this._trendDataRequestStartedHandler),this._trendProviders[x].init())},200)}_refreshTrendProvider(A=!0){for(let x=0;x<this._trendProviders.length;x++);if(A){this._trendOnline=!0,this._trendProviderOptions.TrendOnline=this.trendOnline,this._requestCounter=0;for(let x=0;x<this._trendProviders.length;x++)this.isInDesignMode||(this._trendProviders[x].TrendDataRequestCompleted.remove(this._trendDataRequestCompletedHandler),this._trendProviders[x].TrendDataRequestStarted.remove(this._trendDataRequestStartedHandler),this._trendProviders[x].TrendDataRequestCompleted.add(this._trendDataRequestCompletedHandler),this._trendProviders[x].TrendDataRequestStarted.add(this._trendDataRequestStartedHandler),this._trendProviders[x].init())}else{this._trendOnline=!1,this._trendProviderOptions.TrendOnline=this.trendOnline,this._requestCounter=0;for(let A=0;A<this._trendProviders.length;A++)this._trendProviders[A].TrendOnline=this._trendProviderOptions.TrendOnline,this.isInDesignMode||(x.isDate(this._trendProviders[A].MaxDate)||(this._trendProviders[A].MaxDate=new Date),x.isDate(this._trendProviders[A].MinDate)||this._trendProviders[A].SetMaxTime(this._trendProviders[A].MaxDate),this._trendProviders[A].TrendDataRequestCompleted.remove(this._trendDataRequestCompletedHandler),this._trendProviders[A].TrendDataRequestStarted.remove(this._trendDataRequestStartedHandler),this._trendProviders[A].TrendDataRequestCompleted.add(this._trendDataRequestCompletedHandler),this._trendProviders[A].TrendDataRequestStarted.add(this._trendDataRequestStartedHandler),this._trendProviders[A].init())}}_setTouchHandler(){}_removeTouchHandler(){}_moveFromAction(x){!0===this.trendOnline&&(this.stopTrendOnZoom||"moveBackward"===x.type)&&(this._trendProviderOptions.TrendOnline=!1,this._trendOnline=this._trendProviderOptions.TrendOnline);const A=x.type,V={x:+x.left,y:+x.top};isNaN(V.x)&&(V.x=0),isNaN(V.y)&&(V.y=0);const R=this._trendChart.getAxes();Object.keys(R).forEach(x=>{const D=R[x],N=D.options;if(!0===this.zoomTimeOnly&&"time"!==N.mode)return;let U=V[D.direction],B=D.c2p(D.p2c(D.min)+U),F=D.c2p(D.p2c(D.max)+U);const W=N.panRange;W&&(null!==W[0]&&W[0]>B&&(U=W[0]-B,B+=U,F+=U),null!==W[1]&&W[1]<F&&(U=W[1]-F,B+=U,F+=U)),N.min=B,N.max=F,"panend"!==A&&"moveForward"!==A&&"moveBackward"!==A||"time"===D.options.mode&&"x"===D.direction&&this._updateTrendProvider(B,F)}),this._trendChart.setupGrid(),this._trendChart.draw()}moveForward(){const x=this._trendChart.getXAxes(),A=60*this.timeSpan*1e3/4,V=x[0].p2c(x[0].min+A);this._moveFromAction({left:V,top:0,type:"moveForward",pointerType:""})}moveFastForward(){const x=this._trendChart.getXAxes(),A=60*this.timeSpan*1e3,V=x[0].p2c(x[0].min+A);this._moveFromAction({left:V,top:0,type:"moveForward",pointerType:""})}moveBackward(){const x=this._trendChart.getXAxes(),A=60*this.timeSpan*1e3/4,V=x[0].p2c(x[0].min-A);this._moveFromAction({left:V,top:0,type:"moveBackward",pointerType:""})}moveFastBackward(){const x=this._trendChart.getXAxes(),A=60*this.timeSpan*1e3,V=x[0].p2c(x[0].min-A);this._moveFromAction({left:V,top:0,type:"moveBackward",pointerType:""})}refresh(){this._trendProviderOptions.TrendOnline=!0,this.trendOnline=this._trendProviderOptions.TrendOnline,this._setTrendProviderOptions(),this.coreElement.plot&&this.coreElement.plot.recenter&&this.coreElement.plot.recenter({axes:null}),this._trendChart.setupGrid(),this._trendChart.draw()}setTimespan(x){"string"==typeof x&&(x=parseInt(x));const A=60*x*1e3;this.timeSpan=x,this._trendProviderOptions.TimeSpan=A,this.refresh()}registerChild(x,A,V){return A&&(this.series.push(V.winControl),V.style.display="none",V.winControl.addEventListener("notifyPropertyChanged",this._boundSeriesChanged)),this.isInRunMode&&V.remove(),!1}createHandler(){new ResizeObserver(x=>{x?this._trendChart&&0!==x[0].contentRect.width&&0!==x[0].contentRect.height&&this._trendChart.onSizeChanged(x[0].contentRect.width+"px",x[0].contentRect.height+"px"):this._trendChart&&0!==x[0].contentRect.width&&0!==x[0].contentRect.height&&this._trendChart.onSizeChanged(this.element.clientWidth+"px",this.element.clientHeight+"px")}).observe(this.element)}removeHandler(){this.series.forEach(x=>x.removeEventListener("notifyPropertyChanged",this._boundSeriesChanged)),this._removePlugInEventHandler()}_updateColors(x){"afterInit"!==x.changeName&&"backgroundColor"!==x.changeName||this.setColor("backgroundColor"),x.changeType,"theme"===x.changeType&&this._drawTrendChart(),this.disabled?(this.setColor("disabledBackgroundColor","backgroundColor"),this.setColor("disabledBorderColor","borderColor")):(this.setColor("backgroundColor","backgroundColor"),this.setColor("borderColor","borderColor"))}_updateLayout(x){if("authorized"===x.changeName&&(!0===x.newValue&&(this._trendChart.getPlaceholder().style.pointerEvents="auto"),!1===x.newValue&&(this._trendChart.getPlaceholder().style.pointerEvents="")),0!==this.element.clientWidth&&0!==this.element.clientHeight&&(this.coreElement.style.width=this.element.clientWidth+"px",this.coreElement.style.height=this.element.clientHeight+"px"),x.changeName,"initialized"===x.changeName||"property"===x.changeType&&"margin"!==x.changeName){this.element.id&&this.element.id===this.trendChartID?this.trendChartID=this.element.id:this.element.setAttribute("id",this.trendChartID),this.xaxisTimeFormat="";for(let x=0;x<this.series.length;x++)this.series[x].yaxisNumber=x+1}this.isInDesignMode&&this._drawTrendChart(),"formatDate"!==x.changeName&&"dateTimeMode"!==x.changeName&&"formatTime"!==x.changeName||(this.xaxisTimeFormat="")}onLanguageChanged(x){this._drawTrendChart()}attach(){return this._setTrendProviderOptions(),null}detach(){clearInterval(this._intervalID),this._intervalID=null,null!==this._trendProviderTimeout&&clearTimeout(this._trendProviderTimeout),this._removeTouchHandler();for(let x=0;x<this._trendProviders.length;x++)this._trendProviders[x].DataSamplesUpdate.remove(this._boundDataSamplesAllproviders),this._trendProviders[x].dispose();return this._trendProviders=[],null}dispose(){null!==this._trendProviderTimeout&&clearTimeout(this._trendProviderTimeout),this._trendChart.destroy(),this._trendChart=null;for(let x=0;x<this._trendProviders.length;x++)this._trendProviders[x].DataSamplesUpdate.remove(this._boundDataSamplesAllproviders),this._trendProviders[x].dispose(),this._trendProviders[x]=null;return super.dispose()}}A.TrendChart=TrendChart}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(x){x.Trend||(x.Trend={})}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){class TrendChartCore extends x.UI.ControlBase{constructor(x,A){super(x,A),this.properties={designerType:{propertyType:"base",defaultValue:"Control"}},this.cssStyles={coreStyle:!0,css:"\n                    .vw-trendchartcore2 {\n                        position: relative;\n                        width: 100%;\n                        height: 100%;\n                    }               \n                "},this.initialize(TrendChartCore)}init(A,V,R,D){return new x.UI.TrendHelper.Flot(A,V,R,D)}}A.TrendChartCore=TrendChartCore}(A.TrendHelper||(A.TrendHelper={}))}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){class Flot{constructor(x,A,V,R){this.Plot(x,A,V,R)}static defaultTickGenerator(A){var V,R=[],D=x.UI.TrendHelper.Plot.saturated.saturate(x.UI.TrendHelper.Plot.saturated.floorInBase(A.min,A.tickSize)),N=0,U=Number.NaN;D===-Number.MAX_VALUE&&(R.push(D),D=x.UI.TrendHelper.Plot.saturated.floorInBase(A.min+A.tickSize,A.tickSize));do{V=U,U=x.UI.TrendHelper.Plot.saturated.multiplyAdd(A.tickSize,N,D),R.push(U),++N}while(U<A.max&&U!==V);return R}static defaultTickFormatter(x,A,V){var R=A.tickDecimals;if(-1!==(""+x).indexOf("e"))return Flot.expRepTickFormatter(x,A,V);V>0&&(A.tickDecimals=V);var D=A.tickDecimals?parseFloat("1e"+A.tickDecimals):1,N=""+Math.round(x*D)/D;if(null!=A.tickDecimals){var U=N.indexOf("."),B=-1===U?0:N.length-U-1;if(B<A.tickDecimals)N=(B?N:N+".")+(""+D).substr(1,A.tickDecimals-B)}return A.tickDecimals=R,N}static expRepTickFormatter(x,A,V){var R=(""+x).indexOf("e"),D=parseInt((""+x).substr(R+1)),N=-1!==R?D:x>0?Math.floor(Math.log(x)/Math.LN10):0,U=parseFloat("1e"+N),B=x/U;if(V){var F=Flot.recomputePrecision(x,V);return(x/U).toFixed(F)+"e"+N}return A.tickDecimals>0?B.toFixed(Flot.recomputePrecision(x,A.tickDecimals))+"e"+N:B.toFixed()+"e"+N}static recomputePrecision(x,A){var V=Math.log(Math.abs(x))*Math.LOG10E,R=Math.abs(V+A);return R<=20?Math.floor(R):20}Plot(A,V,R,D){const executeHooks=(x,A)=>{A=[X].concat(A);for(var V=0;V<x.length;++V)x[V].apply(this,A)};function setData(A){var V=N;N=function parseData(A){for(var V=[],R=0;R<A.length;++R){var D=x.UI.TrendHelper.extend(!0,{},U.series);null!=A[R].data?(D.data=A[R].data,delete A[R].data,x.UI.TrendHelper.extend(!0,D,A[R]),A[R].data=D.data):D.data=A[R],V.push(D)}return V}(A),function fillInSeriesOptions(){var A,V=N.length,R=-1;for(A=0;A<N.length;++A){var D=N[A].color;null!=D&&(V--,"number"==typeof D&&D>R&&(R=D))}V<=R&&(V=R+1);var B,F=[],W=U.colors,H=W.length,z=0,q=Math.max(0,N.length-V);for(A=0;A<V;A++)B=x.UI.TrendHelper.ColorHelper.color.parse(W[(q+A)%H]||"#666"),A%H==0&&A&&(z=z>=0?z<.5?-z-.2:0:-z),F[A]=B.scale("rgb",1+z);var Q,K=0;for(A=0;A<N.length;++A){if(null==(Q=N[A]).color?(Q.color=F[K].toString(),++K):"number"==typeof Q.color&&(Q.color=F[Q.color].toString()),null==Q.lines.show){var J,X=!0;for(J in Q)if(Q[J]&&Q[J].show){X=!1;break}X&&(Q.lines.show=!0)}null==Q.lines.zero&&(Q.lines.zero=!!Q.lines.fill),Q.xaxis=getOrCreateAxis(G,axisNumber(Q,"x")),Q.yaxis=getOrCreateAxis(j,axisNumber(Q,"y"))}}(),function processData(A){var V,R,D,U,B,F,W,H,z,G,j,q,Q=Number.POSITIVE_INFINITY,K=Number.NEGATIVE_INFINITY;function updateAxis(x,A,V){A<x.datamin&&A!==-1/0&&(x.datamin=A),V>x.datamax&&V!==1/0&&(x.datamax=V)}function reusePoints(x,A){return x&&x[A]&&x[A].datapoints&&x[A].datapoints.points?x[A].datapoints.points:[]}for(x.UI.TrendHelper.each(allAxes(),(function(x,A){!0!==A.options.growOnly?(A.datamin=Q,A.datamax=K):(void 0===A.datamin&&(A.datamin=Q),void 0===A.datamax&&(A.datamax=K)),A.used=!1})),V=0;V<N.length;++V)(B=N[V]).datapoints={points:[]},0===B.datapoints.points.length&&(B.datapoints.points=reusePoints(A,V)),executeHooks(J.processRawData,[B,B.data,B.datapoints]);for(V=0;V<N.length;++V){if(B=N[V],j=B.data,!(q=B.datapoints.format)){if((q=[]).push({x:!0,y:!1,number:!0,required:!0,computeRange:"none"!==B.xaxis.options.autoScale,defaultValue:null}),q.push({x:!1,y:!0,number:!0,required:!0,computeRange:"none"!==B.yaxis.options.autoScale,defaultValue:null}),B.stack||B.bars.show||B.lines.show&&B.lines.fill)(null!=B.datapoints.pointsize?B.datapoints.pointsize:B.data&&B.data[0]&&B.data[0].length?B.data[0].length:3)>2&&q.push({x:B.bars.horizontal,y:!B.bars.horizontal,number:!0,required:!1,computeRange:"none"!==B.yaxis.options.autoScale,defaultValue:0});B.datapoints.format=q}if(B.xaxis.used=B.yaxis.used=!0,null==B.datapoints.pointsize){for(B.datapoints.pointsize=q.length,W=B.datapoints.pointsize,F=B.datapoints.points,R=D=0;R<j.length;++R,D+=W){var Y=null==(G=j[R]);if(!Y)for(U=0;U<W;++U)H=G[U],(z=q[U])&&(z.number&&null!=H&&(H=+H,isNaN(H)&&(H=null)),null==H&&(z.required&&(Y=!0),null!=z.defaultValue&&(H=z.defaultValue))),F[D+U]=H;if(Y)for(U=0;U<W;++U)null!=(H=F[D+U])&&(z=q[U]).computeRange&&(z.x&&updateAxis(B.xaxis,H,H),z.y&&updateAxis(B.yaxis,H,H)),F[D+U]=null}F.length=D}}for(V=0;V<N.length;++V)B=N[V],executeHooks(J.processDatapoints,[B,B.datapoints]);for(V=0;V<N.length;++V)if(B=N[V],!(q=B.datapoints.format).every((function(x){return!x.computeRange}))){var $=X.adjustSeriesDataRange(B,X.computeRangeForDataSeries(B));executeHooks(J.adjustSeriesDataRange,[B,$]),updateAxis(B.xaxis,$.xmin,$.xmax),updateAxis(B.yaxis,$.ymin,$.ymax)}x.UI.TrendHelper.each(allAxes(),(function(x,A){A.datamin===Q&&(A.datamin=null),A.datamax===K&&(A.datamax=null)}))}(V)}function axisNumber(x,A){var V=x[A+"axis"];return"object"==typeof V&&(V=V.n),"number"!=typeof V&&(V=1),V}function allAxes(){return G.concat(j).filter((function(x){return x}))}function getOrCreateAxis(A,V){return A[V-1]||(A[V-1]={n:V,direction:A===G?"x":"y",options:x.UI.TrendHelper.extend(!0,{},A===G?U.xaxis:U.yaxis)}),A[V-1]}function shutdown(){$&&clearTimeout($),executeHooks(J.shutdown,[W])}function setTransformationHelpers(A){function identity(x){return x}var V,R,D=A.options.transform||identity,N=A.options.inverseTransform;"x"===A.direction?(V=isFinite(D(A.max)-D(A.min))?A.scale=Q/Math.abs(D(A.max)-D(A.min)):A.scale=1/Math.abs(x.UI.TrendHelper.Plot.saturated.delta(D(A.min),D(A.max),Q)),R=Math.min(D(A.max),D(A.min))):(V=-(V=isFinite(D(A.max)-D(A.min))?A.scale=K/Math.abs(D(A.max)-D(A.min)):A.scale=1/Math.abs(x.UI.TrendHelper.Plot.saturated.delta(D(A.min),D(A.max),K))),R=Math.max(D(A.max),D(A.min))),A.p2c=D===identity?function(x){return isFinite(x-R)?(x-R)*V:(x/4-R/4)*V*4}:function(x){var A=D(x);return isFinite(A-R)?(A-R)*V:(A/4-R/4)*V*4},A.c2p=N?function(x){return N(R+x/V)}:function(x){return R+x/V}}function allocateAxisBoxFirstPhase(A){executeHooks(J.axisReserveSpace,[A]);var V=A.labelWidth,R=A.labelHeight,D=A.options.position,N="x"===A.direction,F=A.options.tickLength,W=A.options.showTicks,H=A.options.showMinorTicks,z=A.options.gridLines,Q=U.grid.axisMargin,K=U.grid.labelMargin,X=!0,Y=!0,$=!1;x.UI.TrendHelper.each(N?G:j,(function(x,V){V&&(V.show||V.reserveSpace)&&(V===A?$=!0:V.options.position===D&&($?Y=!1:X=!1))})),Y&&(Q=0),null==F&&(F=ee),null==W&&(W=!0),null==H&&(H=!0),null==z&&(z=!!X),isNaN(+F)||(K+=W?+F:0),N?(R+=K,"bottom"===D?(q.bottom+=R+Q,A.box={top:B.height-q.bottom,height:R}):(A.box={top:q.top+Q,height:R},q.top+=R+Q)):(V+=K,"left"===D?(A.box={left:q.left+Q,width:V},q.left+=V+Q):(q.right+=V+Q,A.box={left:B.width-q.right,width:V})),A.position=D,A.tickLength=F,A.showMinorTicks=H,A.showTicks=W,A.gridLines=z,A.box.padding=K,A.innermost=X}function alignAxisWithGrid(x,A,V){"x"===x.direction?("bottom"===x.position&&V(A.bottom)&&(x.box.top-=Math.ceil(A.bottom)),"top"===x.position&&V(A.top)&&(x.box.top+=Math.ceil(A.top))):("left"===x.position&&V(A.left)&&(x.box.left+=Math.ceil(A.left)),"right"===x.position&&V(A.right)&&(x.box.left-=Math.ceil(A.right)))}function setupGrid(A){var V,R,D=allAxes(),F=U.grid.show;for(R in q)q[R]=0;for(R in executeHooks(J.processOffset,[q]),q)"object"==typeof U.grid.borderWidth?q[R]+=F?U.grid.borderWidth[R]:0:q[R]+=F?U.grid.borderWidth:0;if(x.UI.TrendHelper.each(D,(function(V,R){var D=R.options;R.show=null==D.show?R.used:D.show,R.reserveSpace=null==D.reserveSpace?R.show:D.reserveSpace,function setupTickFormatter(x){var A=x.options;x.tickFormatter||("function"==typeof A.tickFormatter?x.tickFormatter=function(){var x=Array.prototype.slice.call(arguments);return""+A.tickFormatter.apply(null,x)}:x.tickFormatter=Flot.defaultTickFormatter)}(R),executeHooks(J.setRange,[R,A]),function setRange(A,V){var R="number"==typeof A.options.min?A.options.min:A.min,D="number"==typeof A.options.max?A.options.max:A.max,N=A.options.offset;V&&(autoScaleAxis(A),R=A.autoScaledMin,D=A.autoScaledMax);if(R=(null!=R?R:-1)+(N.below||0),D=(null!=D?D:1)+(N.above||0),R>D){var U=R;R=D,D=U,A.options.offset={above:0,below:0}}A.min=x.UI.TrendHelper.Plot.saturated.saturate(R),A.max=x.UI.TrendHelper.Plot.saturated.saturate(D)}(R,A)})),F){Q=B.width-q.left-q.right,K=B.height-q.bottom-q.top;var W=x.UI.TrendHelper.grep(D,(function(x){return x.show||x.reserveSpace}));for(x.UI.TrendHelper.each(W,(function(A,V){!function setupTickGeneration(A){var V,R=A.options;V=fixupNumberOfTicks(A.direction,B,R.ticks),A.delta=x.UI.TrendHelper.Plot.saturated.delta(A.min,A.max,V);var D=X.computeValuePrecision(A.min,A.max,A.direction,V,R.tickDecimals);A.tickDecimals=Math.max(0,null!=R.tickDecimals?R.tickDecimals:D),A.tickSize=function getAxisTickSize(x,A,V,R,D){var N;N="number"==typeof R.ticks&&R.ticks>0?R.ticks:.3*Math.sqrt("x"===V?B.width:B.height);var U=computeTickSize(x,A,N,D);null!=R.minTickSize&&U<R.minTickSize&&(U=R.minTickSize);return R.tickSize||U}(A.min,A.max,A.direction,R,R.tickDecimals),A.tickGenerator||("function"==typeof R.tickGenerator?A.tickGenerator=R.tickGenerator:A.tickGenerator=Flot.defaultTickGenerator);if(null!=R.alignTicksWithAxis){var N=("x"===A.direction?G:j)[R.alignTicksWithAxis-1];if(N&&N.used&&N!==A){var U=A.tickGenerator(A,X);if(U.length>0&&(null==R.min&&(A.min=Math.min(A.min,U[0])),null==R.max&&U.length>1&&(A.max=Math.max(A.max,U[U.length-1]))),A.tickGenerator=function(x){var A,V,R=[];for(V=0;V<N.ticks.length;++V)A=(N.ticks[V].v-N.min)/(N.max-N.min),A=x.min+A*(x.max-x.min),R.push(A);return R},!A.mode&&null==R.tickDecimals){var F=Math.max(0,1-Math.floor(Math.log(A.delta)/Math.LN10)),W=A.tickGenerator(A,X);W.length>1&&/\..*0$/.test((W[1]-W[0]).toFixed(F))||(A.tickDecimals=F)}}}}(V),function setMajorTicks(x){var A,V,R=x.options.ticks,D=[];null==R||"number"==typeof R&&R>0?D=x.tickGenerator(x,X):R&&(D="function"==typeof R?R(x):R);for(x.ticks=[],A=0;A<D.length;++A){var N=null,U=D[A];"object"==typeof U?(V=+U[0],U.length>1&&(N=U[1])):V=+U,isNaN(V)||x.ticks.push(newTick(V,N,x,"major"))}}(V),function snapRangeToTicks(x,A,V){"loose"===x.options.autoScale&&A.length>0&&function(x){return x.some(x=>x.datapoints.points.length>0)}(V)&&(x.min=Math.min(x.min,A[0].v),x.max=Math.max(x.max,A[A.length-1].v))}(V,V.ticks,N),setTransformationHelpers(V),function setEndpointTicks(x,A){(function isValidEndpointTick(x,A){if("endpoints"===x.options.showTickLabels)return!0;if("all"===x.options.showTickLabels){var V=A.filter((function(A){return A.bars.horizontal?A.yaxis===x:A.xaxis===x})),R=V.some((function(x){return!x.bars.show}));return 0===V.length||R}if("major"===x.options.showTickLabels||"none"===x.options.showTickLabels)return!1})(x,A)&&(x.ticks.unshift(newTick(x.min,null,x,"min")),x.ticks.push(newTick(x.max,null,x,"max")))}(V,N),function measureTickLabels(x){for(var A=x.options,V="none"!==A.showTickLabels&&x.ticks?x.ticks:[],R="major"===A.showTickLabels||"all"===A.showTickLabels,D="endpoints"===A.showTickLabels||"all"===A.showTickLabels,N=A.labelWidth||0,U=A.labelHeight||0,F=x.direction+"Axis "+x.direction+x.n+"Axis",W="chart-"+x.direction+"-axis chart-"+x.direction+x.n+"-axis "+F,H=A.font||"chart-tick-label tickLabel",z=0;z<V.length;++z){var G=V[z],j=G.label;if(G.label&&!(!1===R&&z>0&&z<V.length-1)&&(!1!==D||0!==z&&z!==V.length-1)){"object"==typeof G.label&&(j=G.label.name);var q=B.getTextInfo(W,j,H,null,A.labelWidth);N=Math.max(N,q.width),U=Math.max(U,q.height)}}x.labelWidth=A.labelWidth||N,x.labelHeight=A.labelHeight||U}(V)})),V=W.length-1;V>=0;--V)allocateAxisBoxFirstPhase(W[V]);!function adjustLayoutForThingsStickingOut(){var A,V=U.grid.minBorderMargin;if(null==V)for(V=0,A=0;A<N.length;++A)V=Math.max(V,2*(N[A].points.radius+N[A].points.lineWidth/2));var R,D={},B={left:V,right:V,top:V,bottom:V};for(R in x.UI.TrendHelper.each(allAxes(),(function(x,A){A.reserveSpace&&A.ticks&&A.ticks.length&&("x"===A.direction?(B.left=Math.max(B.left,A.labelWidth/2),B.right=Math.max(B.right,A.labelWidth/2)):(B.bottom=Math.max(B.bottom,A.labelHeight/2),B.top=Math.max(B.top,A.labelHeight/2)))})),B)D[R]=B[R]-q[R];x.UI.TrendHelper.each(G.concat(j),(function(x,A){alignAxisWithGrid(A,D,(function(x){return x>0}))})),q.left=Math.ceil(Math.max(B.left,q.left)),q.right=Math.ceil(Math.max(B.right,q.right)),q.top=Math.ceil(Math.max(B.top,q.top)),q.bottom=Math.ceil(Math.max(B.bottom,q.bottom))}(),x.UI.TrendHelper.each(W,(function(x,A){!function allocateAxisBoxSecondPhase(x){"x"===x.direction?(x.box.left=q.left-x.labelWidth/2,x.box.width=B.width-q.left-q.right+x.labelWidth):(x.box.top=q.top-x.labelHeight/2,x.box.height=B.height-q.bottom-q.top+x.labelHeight)}(A)}))}if(U.grid.margin){for(R in q){var H=U.grid.margin||0;q[R]+="number"==typeof H?H:H[R]||0}x.UI.TrendHelper.each(G.concat(j),(function(x,A){alignAxisWithGrid(A,U.grid.margin,(function(x){return null!=x}))}))}Q=B.width-q.left-q.right,K=B.height-q.bottom-q.top,x.UI.TrendHelper.each(D,(function(x,A){setTransformationHelpers(A)})),F&&function drawAxisLabels(){x.UI.TrendHelper.each(allAxes(),(function(x,A){var V,R,D,N,U,F,W,H=A.box,z=A.direction+"Axis "+A.direction+A.n+"Axis",G="chart-"+A.direction+"-axis chart-"+A.direction+A.n+"-axis "+z,j=A.options.font||"chart-tick-label tickLabel",Q={x:NaN,y:NaN,width:NaN,height:NaN},K=[],drawAxisLabel=function(x,V){return!x||!x.label||x.v<A.min||x.v>A.max?Q:(F=B.getTextInfo(G,x.label,j),"x"===A.direction?(N="center",R=q.left+A.p2c(x.v),"bottom"===A.position?D=H.top+H.padding-A.boxPosition.centerY:(D=H.top+H.height-H.padding+A.boxPosition.centerY,U="bottom"),W={x:R-F.width/2-3,y:D-3,width:F.width+6,height:F.height+6}):(U="middle",D=q.top+A.p2c(x.v),"left"===A.position?(R=H.left+H.width-H.padding-A.boxPosition.centerX,N="right"):R=H.left+H.padding+A.boxPosition.centerX,W={x:R-F.width/2-3,y:D-3,width:F.width+6,height:F.height+6}),function(x,A){return A.some((function(A){return V=x.x,R=x.y,D=x.x+x.width,N=x.y+x.height,U=A.x,B=A.y,F=A.x+A.width,W=A.y+A.height,(V<=U&&U<=D||U<=V&&V<=F)&&(R<=B&&B<=N||B<=R&&R<=W);var V,R,D,N,U,B,F,W}))}(W,V)?Q:(B.addText(G,R,D,x.label,j,null,null,N,U),W))};if(B.removeText(G),executeHooks(J.drawAxis,[A,B]),A.show)switch(A.options.showTickLabels){case"none":break;case"endpoints":K.push(drawAxisLabel(A.ticks[0],K)),K.push(drawAxisLabel(A.ticks[A.ticks.length-1],K));break;case"major":for(K.push(drawAxisLabel(A.ticks[0],K)),K.push(drawAxisLabel(A.ticks[A.ticks.length-1],K)),V=1;V<A.ticks.length-1;++V)K.push(drawAxisLabel(A.ticks[V],K));break;case"all":for(K.push(drawAxisLabel(A.ticks[0],[])),K.push(drawAxisLabel(A.ticks[A.ticks.length-1],K)),V=1;V<A.ticks.length-1;++V)K.push(drawAxisLabel(A.ticks[V],K))}}))}(),executeHooks(J.setupGrid,[])}function autoScaleAxis(A){var V,R=A.options,D=R.min,N=R.max,U=A.datamin,B=A.datamax;switch(R.autoScale){case"none":D=+(null!=R.min?R.min:U),N=+(null!=R.max?R.max:B);break;case"loose":if(null!=U&&null!=B){D=U,N=B,V=x.UI.TrendHelper.Plot.saturated.saturate(N-D);var F="number"==typeof R.autoScaleMargin?R.autoScaleMargin:.02;D=x.UI.TrendHelper.Plot.saturated.saturate(D-V*F),N=x.UI.TrendHelper.Plot.saturated.saturate(N+V*F),D<0&&U>=0&&(D=0)}else D=R.min,N=R.max;break;case"exact":D=null!=U?U:R.min,N=null!=B?B:R.max;break;case"sliding-window":B>N&&(N=B,D=Math.max(B-(R.windowSize||100),D))}var W=function widenMinMax(x,A){var V=void 0===x?null:x,R=void 0===A?null:A;if(0===R-V){var D=0===R?1:.01,N=null;null==V&&(N-=D),null!=R&&null==V||(R+=D),null!=N&&(V=N)}return{min:V,max:R}}(D,N);D=W.min,N=W.max,!0===R.growOnly&&"none"!==R.autoScale&&"sliding-window"!==R.autoScale&&(D=D<U?D:null!==U?U:D,N=N>B?N:null!==B?B:N),A.autoScaledMin=D,A.autoScaledMax=N}function computeTickSize(A,V,R,D){var N=x.UI.TrendHelper.Plot.saturated.delta(A,V,R),U=-Math.floor(Math.log(N)/Math.LN10);D&&U>D&&(U=D);var B,F=parseFloat("1e"+-U),W=N/F;return W<1.5?B=1:W<3?(B=2,W>2.25&&(null==D||U+1<=D)&&(B=2.5)):B=W<7.5?5:10,B*=F}function fixupNumberOfTicks(x,A,V){return"number"==typeof V&&V>0?V:.3*Math.sqrt("x"===x?A.width:A.height)}function newTick(x,A,V,R){if(null===A)switch(R){case"min":case"max":var D=getEndpointPrecision(x,V);isFinite(D),A=V.tickFormatter(x,V,D,X);break;case"major":A=V.tickFormatter(x,V,void 0,X)}return{v:x,label:A}}const getEndpointPrecision=(x,A)=>{var V=Math.floor(A.p2c(x)),R="x"===A.direction?V+1:V-1,D=A.c2p(V),N=A.c2p(R);return X.computeValuePrecision(D,N,A.direction,1)};function draw(){B.clear(),executeHooks(J.drawBackground,[H]);var x=U.grid;x.show&&x.backgroundColor&&function drawBackground(){H.save(),H.translate(q.left,q.top),H.fillStyle=getColorOrGradient(U.grid.backgroundColor,K,0,"rgba(255, 255, 255, 0)"),H.fillRect(0,0,Q,K),H.restore()}(),x.show&&!x.aboveData&&drawGrid();for(var A=0;A<N.length;++A)executeHooks(J.drawSeries,[H,N[A],A,getColorOrGradient]),drawSeries(N[A]);executeHooks(J.draw,[H]),x.show&&x.aboveData&&drawGrid(),B.render(),triggerRedrawOverlay()}function extractRange(x,A){for(var V,R,D,N,U=allAxes(),B=0;B<U.length;++B)if((V=U[B]).direction===A&&(x[N=A+V.n+"axis"]||1!==V.n||(N=A+"axis"),x[N])){R=x[N].from,D=x[N].to;break}if(x[N]||(V="x"===A?G[0]:j[0],R=x[A+"1"],D=x[A+"2"]),null!=R&&null!=D&&R>D){var F=R;R=D,D=F}return{from:R,to:D,axis:V}}function findEdges(x){var A=x.box,V=0,R=0;return"x"===x.direction?(V=0,R=A.top-q.top+("top"===x.position?A.height:0)):(R=0,V=A.left-q.left+("left"===x.position?A.width:0)+x.boxPosition.centerX),{x:V,y:R}}function alignPosition(x,A){return x%2!=0?Math.floor(A)+.5:A}function drawTickBar(x){H.lineWidth=1;var A=findEdges(x),V=A.x,R=A.y;if(x.show){var D=0,N=0;H.strokeStyle=x.options.color,H.beginPath(),"x"===x.direction?D=Q+1:N=K+1,"x"===x.direction?R=alignPosition(H.lineWidth,R):V=alignPosition(H.lineWidth,V),H.moveTo(V,R),H.lineTo(V+D,R+N),H.stroke()}}function drawTickMarks(x){var A=x.tickLength,V=x.showMinorTicks,R=Z,D=findEdges(x),N=D.x,B=D.y,F=0;for(H.strokeStyle=x.options.color,H.beginPath(),F=0;F<x.ticks.length;++F){var W,z=x.ticks[F].v,G=0,j=0,q=0,J=0;if(!isNaN(z)&&z>=x.min&&z<=x.max&&("x"===x.direction?(H.strokeStyle=x.options.tickColor||U.grid.tickColor,N=x.p2c(z),j=A,"top"===x.position&&(j=-j)):(B=x.p2c(z),G=A,"left"===x.position&&(G=-G)),"x"===x.direction?N=alignPosition(H.lineWidth,N):B=alignPosition(H.lineWidth,B),H.moveTo(N,B),H.lineTo(N+G,B+j)),!0===V&&F<x.ticks.length-1){var X=x.ticks[F].v,Y=(x.ticks[F+1].v-X)/(R+1);for(W=1;W<=R;W++){if("x"===x.direction){if(J=A/2,N=alignPosition(H.lineWidth,x.p2c(X+W*Y)),"top"===x.position&&(J=-J),N<0||N>Q)continue}else if(q=A/2,B=alignPosition(H.lineWidth,x.p2c(X+W*Y)),"left"===x.position&&(q=-q),B<0||B>K)continue;H.moveTo(N,B),H.lineTo(N+q,B+J)}}}H.stroke()}function drawGridLines(x){var A,V,R;for(H.strokeStyle=x.options.tickColor||U.grid.tickColor,H.beginPath(),A=0;A<x.ticks.length;++A){var D=x.ticks[A].v,N=0,B=0,F=0,W=0;isNaN(D)||D<x.min||D>x.max||(V=D,R=void 0,(!("object"==typeof(R=U.grid.borderWidth)&&R[x.position]>0||R>0)||V!==x.min&&V!==x.max)&&("x"===x.direction?(F=x.p2c(D),W=K,B=-K):(F=0,W=x.p2c(D),N=Q),"x"===x.direction?F=alignPosition(H.lineWidth,F):W=alignPosition(H.lineWidth,W),H.moveTo(F,W),H.lineTo(F+N,W+B)))}H.stroke()}function drawGrid(){var A,V;H.save(),H.translate(q.left,q.top),function drawMarkings(){var A,V,R=U.grid.markings;if(R)for(x.isFunction(R)&&((A=X.getAxes()).xmin=A.xaxis.min,A.xmax=A.xaxis.max,A.ymin=A.yaxis.min,A.ymax=A.yaxis.max,R=R(A)),V=0;V<R.length;++V){var D=R[V],N=extractRange(D,"x"),B=extractRange(D,"y");if(null==N.from&&(N.from=N.axis.min),null==N.to&&(N.to=N.axis.max),null==B.from&&(B.from=B.axis.min),null==B.to&&(B.to=B.axis.max),!(N.to<N.axis.min||N.from>N.axis.max||B.to<B.axis.min||B.from>B.axis.max)){N.from=Math.max(N.from,N.axis.min),N.to=Math.min(N.to,N.axis.max),B.from=Math.max(B.from,B.axis.min),B.to=Math.min(B.to,B.axis.max);var F=N.from===N.to,W=B.from===B.to;if(!F||!W)if(N.from=Math.floor(N.axis.p2c(N.from)),N.to=Math.floor(N.axis.p2c(N.to)),B.from=Math.floor(B.axis.p2c(B.from)),B.to=Math.floor(B.axis.p2c(B.to)),F||W){var z=D.lineWidth||U.grid.markingsLineWidth,G=z%2?.5:0;H.beginPath(),H.strokeStyle=D.color||U.grid.markingsColor,H.lineWidth=z,F?(H.moveTo(N.to+G,B.from),H.lineTo(N.to+G,B.to)):(H.moveTo(N.from,B.to+G),H.lineTo(N.to,B.to+G)),H.stroke()}else H.fillStyle=D.color||U.grid.markingsColor,H.fillRect(N.from,B.to,N.to-N.from,B.from-B.to)}}}(),A=allAxes(),V=U.grid.borderWidth;for(var R=0;R<A.length;++R){var D=A[R];D.show&&(drawTickBar(D),!0===D.showTicks&&drawTickMarks(D),!0===D.gridLines&&drawGridLines(D))}V&&function drawBorder(){var x=U.grid.borderWidth,A=U.grid.borderColor;"object"==typeof x||"object"==typeof A?("object"!=typeof x&&(x={top:x,right:x,bottom:x,left:x}),"object"!=typeof A&&(A={top:A,right:A,bottom:A,left:A}),x.top>0&&(H.strokeStyle=A.top,H.lineWidth=x.top,H.beginPath(),H.moveTo(0-x.left,0-x.top/2),H.lineTo(Q,0-x.top/2),H.stroke()),x.right>0&&(H.strokeStyle=A.right,H.lineWidth=x.right,H.beginPath(),H.moveTo(Q+x.right/2,0-x.top),H.lineTo(Q+x.right/2,K),H.stroke()),x.bottom>0&&(H.strokeStyle=A.bottom,H.lineWidth=x.bottom,H.beginPath(),H.moveTo(Q+x.right,K+x.bottom/2),H.lineTo(0,K+x.bottom/2),H.stroke()),x.left>0&&(H.strokeStyle=A.left,H.lineWidth=x.left,H.beginPath(),H.moveTo(0-x.left/2,K+x.bottom),H.lineTo(0-x.left/2,0),H.stroke())):(H.lineWidth=x,H.strokeStyle=U.grid.borderColor,H.strokeRect(-x/2,-x/2,Q+x,K+x))}(),H.restore()}function drawSeries(A){A.lines.show&&x.UI.TrendHelper.Plot.drawSeries.drawSeriesLines(A,H,q,Q,K,X.drawSymbol,getColorOrGradient),A.bars.show&&x.UI.TrendHelper.Plot.drawSeries.drawSeriesBars(A,H,q,Q,K,X.drawSymbol,getColorOrGradient),A.points.show&&x.UI.TrendHelper.Plot.drawSeries.drawSeriesPoints(A,H,q,Q,K,X.drawSymbol,getColorOrGradient)}function findNearbyItems(x,A,V,R,D){for(var U=function findItems(x,A,V,R,D){var U,B=[],F=[],W=R*R+1;for(U=N.length-1;U>=0;--U)if(V(U)){var H=N[U];if(!H.datapoints)return;var z=!1;if(H.lines.show||H.points.show){var G=findNearbyPoint(H,x,A,R,D);G&&(F.push({seriesIndex:U,dataIndex:G.dataIndex,distance:G.distance}),z=!0)}if(H.bars.show&&!z){var j=findNearbyBar(H,x,A);j>=0&&F.push({seriesIndex:U,dataIndex:j,distance:W})}}for(U=0;U<F.length;U++){var q=F[U].seriesIndex,Q=F[U].dataIndex,K=F[U].distance,J=N[q].datapoints.pointsize;B.push({datapoint:N[q].datapoints.points.slice(Q*J,(Q+1)*J),dataIndex:Q,series:N[q],seriesIndex:q,distance:Math.sqrt(K)})}return B}(x,A,V,R,D),B=0;B<N.length;++B)V(B)&&executeHooks(J.findNearbyItems,[x,A,N,B,R,D,U]);return U.sort((x,A)=>void 0===A.distance?-1:void 0===x.distance&&void 0!==A.distance?1:x.distance-A.distance)}function findNearbyPoint(x,A,V,R,D){var N=x.xaxis.c2p(A),U=x.yaxis.c2p(V),B=R/x.xaxis.scale,F=R/x.yaxis.scale,W=x.datapoints.points,H=x.datapoints.pointsize,z=Number.POSITIVE_INFINITY;x.xaxis.options.inverseTransform&&(B=Number.MAX_VALUE),x.yaxis.options.inverseTransform&&(F=Number.MAX_VALUE);for(var G=null,j=0;j<W.length;j+=H){var q=W[j],Q=W[j+1];if(null!=q&&!(q-N>B||q-N<-B||Q-U>F||Q-U<-F)){var K=Math.abs(x.xaxis.p2c(q)-A),J=Math.abs(x.yaxis.p2c(Q)-V),X=D?D(K,J):K*K+J*J;X<z&&(z=X,G={dataIndex:j/H,distance:X})}}return G}function findNearbyBar(x,A,V){var R,D,N=x.bars.barWidth[0]||x.bars.barWidth,U=x.xaxis.c2p(A),B=x.yaxis.c2p(V),F=x.datapoints.points,W=x.datapoints.pointsize;switch(x.bars.align){case"left":R=0;break;case"right":R=-N;break;default:R=-N/2}D=R+N;for(var H=x.bars.fillTowards||0,z=H>x.yaxis.min?Math.min(x.yaxis.max,H):x.yaxis.min,G=-1,j=0;j<F.length;j+=W){var q=F[j],Q=F[j+1];if(null!=q){var K=3===W?F[j+2]:z;(x.bars.horizontal?U<=Math.max(K,q)&&U>=Math.min(K,q)&&B>=Q+R&&B<=Q+D:U>=q+R&&U<=q+D&&B>=Math.min(K,Q)&&B<=Math.max(K,Q))&&(G=j/W)}}return G}function drawOverlay(x){if($=null,z){F.clear(),executeHooks(J.drawOverlay,[z,F]);var A=new CustomEvent("onDrawingDone");x.getEventHolder().dispatchEvent(A);A=new CustomEvent("drawingdone");x.getPlaceholder().dispatchEvent(A)}}const triggerRedrawOverlay=()=>{var x=U.interaction.redrawOverlayInterval;-1!==x?$||($=setTimeout((function(){drawOverlay(X)}),x)):drawOverlay(X)};function getColorOrGradient(A,V,R,D){if("string"==typeof A)return A;for(var N=H.createLinearGradient(0,R,0,V),U=0,B=A.colors.length;U<B;++U){var F=A.colors[U];if("string"!=typeof F){var W=x.UI.TrendHelper.ColorHelper.color.parse(D);null!=F.brightness&&(W=W.scale("rgb",F.brightness)),null!=F.opacity&&(W.a*=F.opacity),F=W.toString()}N.addColorStop(U/(B-1),F)}return N}var N=[],U={colors:["#edc240","#afd8f8","#cb4b4b","#4da74d","#9440ed"],xaxis:{show:null,position:"bottom",mode:null,font:null,color:null,tickColor:null,transform:null,inverseTransform:null,min:null,max:null,autoScaleMargin:null,autoScale:"exact",windowSize:null,growOnly:null,ticks:null,tickFormatter:null,showTickLabels:"major",labelWidth:null,labelHeight:null,reserveSpace:null,tickLength:null,showMinorTicks:null,showTicks:null,gridLines:null,alignTicksWithAxis:null,tickDecimals:null,tickSize:null,minTickSize:null,offset:{below:0,above:0},boxPosition:{centerX:0,centerY:0}},yaxis:{autoScaleMargin:.02,autoScale:"loose",growOnly:null,position:"left",showTickLabels:"major",offset:{below:0,above:0},boxPosition:{centerX:0,centerY:0},color:null,tickColor:null},xaxes:[],yaxes:[],series:{points:{show:!1,radius:3,lineWidth:2,fill:!0,fillColor:"#ffffff",symbol:"circle"},lines:{lineWidth:1,fill:!1,fillColor:null,steps:!1},bars:{show:!1,lineWidth:2,horizontal:!1,barWidth:.8,fill:!0,fillColor:null,align:"left",zero:!0},shadowSize:3,highlightColor:null},grid:{show:!0,aboveData:!1,color:"#545454",backgroundColor:null,borderColor:null,tickColor:null,margin:0,labelMargin:20,axisMargin:8,borderWidth:1,minBorderMargin:null,markings:null,markingsColor:"#f4f4f4",markingsLineWidth:2,clickable:!1,hoverable:!1,autoHighlight:!0,mouseActiveRadius:15},interaction:{redrawOverlayInterval:1e3/60},hooks:{}},B=null,F=null,W=null,H=null,z=null,G=[],j=[],q={left:0,right:0,top:0,bottom:0},Q=0,K=0,J={processOptions:[],processRawData:[],processDatapoints:[],processOffset:[],setupGrid:[],adjustSeriesDataRange:[],setRange:[],drawBackground:[],drawSeries:[],drawAxis:[],draw:[],findNearbyItems:[],axisReserveSpace:[],bindEvents:[],drawOverlay:[],resize:[],shutdown:[]},X=this,Y={},$=null;X.setData=setData,X.setupGrid=setupGrid,X.draw=draw,X.getPlaceholder=function(){return A},X.getCanvas=function(){return B.element},X.getSurface=function(){return B},X.getEventHolder=function(){return F.element},X.getPlotOffset=function(){return q},X.width=function(){return Q},X.height=function(){return K},X.offset=function(){let A=x.UI.TrendHelper.offset(W);return A.left+=q.left,A.top+=q.top,A},X.getData=function(){return N},X.getAxes=function(){var A={};return x.UI.TrendHelper.each(G.concat(j),(function(x,V){V&&(A[V.direction+(1!==V.n?V.n:"")+"axis"]=V)})),A},X.getXAxes=function(){return G},X.getYAxes=function(){return j},X.c2p=function canvasToCartesianAxisCoords(x){var A,V,R={};for(A=0;A<G.length;++A)(V=G[A])&&V.used&&(R["x"+V.n]=V.c2p(x.left));for(A=0;A<j.length;++A)(V=j[A])&&V.used&&(R["y"+V.n]=V.c2p(x.top));return void 0!==R.x1&&(R.x=R.x1),void 0!==R.y1&&(R.y=R.y1),R},X.p2c=function cartesianAxisToCanvasCoords(x){var A,V,R,D={};for(A=0;A<G.length;++A)if((V=G[A])&&V.used&&(null==x[R="x"+V.n]&&1===V.n&&(R="x"),null!=x[R])){D.left=V.p2c(x[R]);break}for(A=0;A<j.length;++A)if((V=j[A])&&V.used&&(null==x[R="y"+V.n]&&1===V.n&&(R="y"),null!=x[R])){D.top=V.p2c(x[R]);break}return D},X.getOptions=function(){return U},X.triggerRedrawOverlay=triggerRedrawOverlay,X.pointOffset=function(x){return{left:parseInt(G[axisNumber(x,"x")-1].p2c(+x.x)+q.left,10),top:parseInt(j[axisNumber(x,"y")-1].p2c(+x.y)+q.top,10)}},X.shutdown=shutdown,X.destroy=function(){shutdown(),A.removeData("plot").empty(),N=[],U=null,B=null,F=null,W=null,H=null,z=null,G=[],j=[],J=null,X=this},X.resize=function(){var x=A.clientWidth,V=A.clientHeight;B.resize(x,V),F.resize(x,V),executeHooks(J.resize,[x,V])},X.onSizeChanged=function(x,A){x=parseFloat(x).toString(),A=parseFloat(A).toString(),B.resize(x,A),F.resize(x,A),setupGrid(!0),draw()},X.clearTextCache=function(){B.clearCache(),F.clearCache()},X.autoScaleAxis=autoScaleAxis,X.computeRangeForDataSeries=function computeRangeForDataSeries(x,A,V){for(var R=x.datapoints.points,D=x.datapoints.pointsize,N=x.datapoints.format,U=Number.POSITIVE_INFINITY,B=Number.NEGATIVE_INFINITY,F={xmin:U,ymin:U,xmax:B,ymax:B},W=0;W<R.length;W+=D)if(null!==R[W]&&("function"!=typeof V||V(R[W])))for(var H=0;H<D;++H){var z=R[W+H],G=N[H];null!=G&&(("function"!=typeof V||V(z))&&(A||G.computeRange)&&z!==1/0&&z!==-1/0&&(!0===G.x&&(z<F.xmin&&(F.xmin=z),z>F.xmax&&(F.xmax=z)),!0===G.y&&(z<F.ymin&&(F.ymin=z),z>F.ymax&&(F.ymax=z))))}return F},X.adjustSeriesDataRange=function adjustSeriesDataRange(x,A){if(x.bars.show){var V,R=x.bars.barWidth[1];x.datapoints&&x.datapoints.points&&!R&&function computeBarWidth(x){var A=[],V=x.datapoints.pointsize,R=Number.MAX_VALUE;x.datapoints.points.length<=V&&(R=1);for(let R=x.bars.horizontal?1:0;R<x.datapoints.points.length;R+=V)isFinite(x.datapoints.points[R])&&null!==x.datapoints.points[R]&&A.push(x.datapoints.points[R]);(A=A.filter((function onlyUnique(x,A,V){return V.indexOf(x)===A}))).sort((function(x,A){return x-A}));for(let x=1;x<A.length;x++){var D=Math.abs(A[x]-A[x-1]);D<R&&isFinite(D)&&(R=D)}"number"==typeof x.bars.barWidth?x.bars.barWidth=x.bars.barWidth*R:x.bars.barWidth[0]=x.bars.barWidth[0]*R}(x);var D=x.bars.barWidth[0]||x.bars.barWidth;switch(x.bars.align){case"left":V=0;break;case"right":V=-D;break;default:V=-D/2}x.bars.horizontal?(A.ymin+=V,A.ymax+=V+D):(A.xmin+=V,A.xmax+=V+D)}return(x.bars.show&&x.bars.zero||x.lines.show&&x.lines.zero)&&x.datapoints.pointsize<=2&&(A.ymin=Math.min(0,A.ymin),A.ymax=Math.max(0,A.ymax)),A},X.findNearbyItem=function findNearbyItem(x,A,V,R,D){var N=findNearbyItems(x,A,V,R,D);return void 0!==N[0]?N[0]:null},X.findNearbyItems=findNearbyItems,X.findNearbyInterpolationPoint=function findNearbyInterpolationPoint(x,A,V){var R,D,U,B,F,W,H,z=Number.MAX_VALUE;for(R=0;R<N.length;++R){if(!V(R))continue;var G=N[R].datapoints.points;W=N[R].datapoints.pointsize;const J=G[G.length-W]<G[0]?function(x,A){return x>A}:function(x,A){return A>x};if(!J(x,G[0])){for(D=W;D<G.length&&!J(x,G[D]);D+=W);var j=G[D-W],q=G[D-W+1],Q=G[D],K=G[D+1];void 0!==j&&void 0!==Q&&void 0!==q&&void 0!==K&&(A=j===Q?K:q+(K-q)*(x-j)/(Q-j),(U=(B=Math.abs(N[R].xaxis.p2c(Q)-x))*B+(F=Math.abs(N[R].yaxis.p2c(K)-A))*F)<z&&(z=U,H=[x,A,R,D]))}}return H?(R=H[2],D=H[3],W=N[R].datapoints.pointsize,j=(G=N[R].datapoints.points)[D-W],q=G[D-W+1],Q=G[D],K=G[D+1],{datapoint:[H[0],H[1]],leftPoint:[j,q],rightPoint:[Q,K],seriesIndex:R}):null},X.computeValuePrecision=function computeValuePrecision(A,V,R,D,N){var U=fixupNumberOfTicks(R,B,D),F=x.UI.TrendHelper.Plot.saturated.delta(A,V,U),W=-Math.floor(Math.log(F)/Math.LN10);N&&W>N&&(W=N);var H=F/parseFloat("1e"+-W);return H>2.25&&H<3&&(null==N||W+1<=N)&&++W,isFinite(W)?W:0},X.computeTickSize=computeTickSize,X.addEventHandler=function addEventHandler(x,A,V,R){var D=V+x,N=Y[D]||[];N.push({event:x,handler:A,eventHolder:V,priority:R}),N.sort((x,A)=>A.priority-x.priority),N.forEach(x=>{x.eventHolder&&(x.eventHolder.removeEventListener(x.event,x.handler),x.eventHolder.addEventListener(x.event,x.handler))}),Y[D]=N},X.hooks=J;var Z=x.UI.TrendHelper.Plot.uiConstants.MINOR_TICKS_COUNT_CONSTANT,ee=x.UI.TrendHelper.Plot.uiConstants.TICK_LENGTH_CONSTANT;!function initPlugins(A){for(var V={Canvas:x.UI.TrendHelper.Canvas},R=0;R<D.length;++R){var N=D[R];N.init(X,V),N.options&&x.UI.TrendHelper.extend(!0,U,N.options)}}(),function setupCanvases(){A.style.padding=0,A.children.length>0&&(A.innerHTML=""),"static"!==A.style.position&&""!==A.style.position||(A.style.position="relative"),B=new x.UI.TrendHelper.Canvas("chart-base",A),(F=new x.UI.TrendHelper.Canvas("chart-overlay",A)).element.setAttribute("draggable","true"),H=B.context,z=F.context,W=F.element;var V=A.plot;V&&(V.shutdown(),F.clear()),A.plot=X}(),function parseOptions(V){x.UI.TrendHelper.extend(!0,U,V),V&&V.colors&&(U.colors=V.colors),null==U.xaxis.color&&(U.xaxis.color=x.UI.TrendHelper.ColorHelper.color.parse(U.grid.color).scale("a",.22).toString()),null==U.yaxis.color&&(U.yaxis.color=x.UI.TrendHelper.ColorHelper.color.parse(U.grid.color).scale("a",.22).toString()),null==U.xaxis.tickColor&&(U.xaxis.tickColor=U.grid.tickColor||U.xaxis.color),null==U.yaxis.tickColor&&(U.yaxis.tickColor=U.grid.tickColor||U.yaxis.color),null==U.grid.borderColor&&(U.grid.borderColor=U.grid.color),null==U.grid.tickColor&&(U.grid.tickColor=x.UI.TrendHelper.ColorHelper.color.parse(U.grid.color).scale("a",.22).toString());var R,D,N,B=A.style.fontSize,F=B?+B.replace("px",""):13,W={style:A.style.fontStyle,size:Math.round(.8*F),variant:A.style.fontVariant,weight:A.style.fontWeight,family:A.style.fontFamily};for(N=U.xaxes.length||1,R=0;R<N;++R)(D=U.xaxes[R])&&!D.tickColor&&(D.tickColor=D.color),D=x.UI.TrendHelper.extend(!0,{},U.xaxis,D),U.xaxes[R]=D,D.font&&(D.font=x.UI.TrendHelper.extend({},W,D.font),D.font.color||(D.font.color=D.color),D.font.lineHeight||(D.font.lineHeight=Math.round(1.15*D.font.size)));for(N=U.yaxes.length||1,R=0;R<N;++R)(D=U.yaxes[R])&&!D.tickColor&&(D.tickColor=D.color),D=x.UI.TrendHelper.extend(!0,{},U.yaxis,D),U.yaxes[R]=D,D.font&&(D.font=x.UI.TrendHelper.extend({},W,D.font),D.font.color||(D.font.color=D.color),D.font.lineHeight||(D.font.lineHeight=Math.round(1.15*D.font.size)));for(R=0;R<U.xaxes.length;++R)getOrCreateAxis(G,R+1).options=U.xaxes[R];for(R=0;R<U.yaxes.length;++R)getOrCreateAxis(j,R+1).options=U.yaxes[R];for(var H in x.UI.TrendHelper.each(allAxes(),(function(x,A){A.boxPosition=A.options.boxPosition||{centerX:0,centerY:0}})),J)U.hooks[H]&&U.hooks[H].length&&(J[H]=J[H].concat(U.hooks[H]));executeHooks(J.processOptions,[U])}(R),setData(V),setupGrid(!0),draw(),function bindEvents(){executeHooks(J.bindEvents,[W])}()}}Flot.Canvas=x.UI.TrendHelper.Canvas,A.Flot=Flot,x.UI.TrendHelper.Plot?(x.UI.TrendHelper.Plot.version="3.0.0",x.UI.TrendHelper.Plot.plugins=[],x.UI.TrendHelper.Plot.linearTickGenerator=x.UI.TrendHelper.Flot.defaultTickGenerator,x.UI.TrendHelper.Plot.defaultTickFormatter=x.UI.TrendHelper.Flot.defaultTickFormatter,x.UI.TrendHelper.Plot.expRepTickFormatter=x.UI.TrendHelper.Flot.expRepTickFormatter,x.UI.TrendHelper.Plot.uiConstants={SNAPPING_CONSTANT:20,PANHINT_LENGTH_CONSTANT:10,MINOR_TICKS_COUNT_CONSTANT:4,TICK_LENGTH_CONSTANT:10,ZOOM_DISTANCE_MARGIN:25}):x.UI.TrendHelper.Plot={version:"3.0.0",plugins:[],linearTickGenerator:x.UI.TrendHelper.Flot.defaultTickGenerator,defaultTickFormatter:x.UI.TrendHelper.Flot.defaultTickFormatter,expRepTickFormatter:x.UI.TrendHelper.Flot.expRepTickFormatter,uiConstants:{SNAPPING_CONSTANT:20,PANHINT_LENGTH_CONSTANT:10,MINOR_TICKS_COUNT_CONSTANT:4,TICK_LENGTH_CONSTANT:10,ZOOM_DISTANCE_MARGIN:25}}}(A.TrendHelper||(A.TrendHelper={}))}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){var V=Object.prototype.hasOwnProperty;function Canvas(A,V){var R=V.getElementsByClassName(A)[0];if(!R&&((R=document.createElement("canvas")).className=A,R.style.direction="ltr",R.style.position="absolute",R.style.left="0px",R.style.top="0px",V.appendChild(R),!R.getContext))throw new Error("Canvas is not available.");this.element=R;var D=this.context=R.getContext("2d");this.pixelRatio=x.UI.TrendHelper.Plot.browser.getPixelRatio(D);var N=V.getBoundingClientRect().width,U=V.getBoundingClientRect().height;this.resize(N,U),this.SVGContainer=null,this.SVG={},this._textCache={}}function updateTransforms(x,A){x.transform.baseVal.clear(),A&&A.forEach((function(A){x.transform.baseVal.appendItem(A)}))}A.Canvas=Canvas,Canvas.prototype.resize=function(x,A){x=x<10?10:x,A=A<10?10:A;var V=this.element,R=this.context,D=this.pixelRatio;this.width!==x&&(V.width=x*D,V.style.width=x+"px",this.width=x),this.height!==A&&(V.height=A*D,V.style.height=A+"px",this.height=A),this.SVGContainer&&(this.SVGContainer.style.height=A+"px",this.SVGContainer.style.width=x+"px"),R.restore(),R.save(),R.scale(D,D)},Canvas.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)},Canvas.prototype.render=function(){var x=this._textCache;for(var A in x)if(V.call(x,A)){var R=this.getSVGLayer(A),D=x[A],N=R.style.display;for(var U in R.style.display="none",D)if(V.call(D,U)){var B=D[U];for(var F in B)if(V.call(B,F)){for(var W,H=B[F],z=H.positions,G=0;z[G];G++)if((W=z[G]).active)W.rendered||(R.appendChild(W.element),W.rendered=!0);else if(z.splice(G--,1),W.rendered){for(;W.element.firstChild;)W.element.removeChild(W.element.firstChild);W.element.parentNode.removeChild(W.element)}0===z.length&&(H.measured?H.measured=!1:delete B[F])}}R.style.display=N}},Canvas.prototype.getSVGLayer=function(x){var A,V=this.SVG[x];V||(this.SVGContainer?A=this.SVGContainer.firstChild:(this.SVGContainer=document.createElement("div"),this.SVGContainer.className="chart-svg",this.SVGContainer.style.position="absolute",this.SVGContainer.style.top="0px",this.SVGContainer.style.left="0px",this.SVGContainer.style.height="100%",this.SVGContainer.style.width="100%",this.SVGContainer.style.pointerEvents="none",this.element.parentNode.appendChild(this.SVGContainer),(A=document.createElementNS("http://www.w3.org/2000/svg","svg")).style.width="100%",A.style.height="100%",this.SVGContainer.appendChild(A)),(V=document.createElementNS("http://www.w3.org/2000/svg","g")).setAttribute("class",x),V.style.position="absolute",V.style.top="0px",V.style.left="0px",V.style.bottom="0px",V.style.right="0px",A.appendChild(V),this.SVG[x]=V);return V},Canvas.prototype.getTextInfo=function(x,A,V,R,D){var N,U,B,F,W;A=""+A,U="object"==typeof V?V.style+" "+V.variant+" "+V.weight+" "+V.size+"px/"+V.lineHeight+"px "+V.family:V,null==(B=this._textCache[x])&&(B=this._textCache[x]={}),null==(F=B[U])&&(F=B[U]={});var H=function generateKey(x){return x.replace(/0|1|2|3|4|5|6|7|8|9/g,"0")}(A);if(!(W=F[H])){var z=document.createElementNS("http://www.w3.org/2000/svg","text");if(-1!==A.indexOf("<br>"))addTspanElements(A,z,-9999);else{var G=document.createTextNode(A);z.appendChild(G)}z.style.position="absolute",z.style.maxWidth=D,z.setAttributeNS(null,"x","-9999"),z.setAttributeNS(null,"y","-9999"),"object"==typeof V?(z.style.font=U,z.style.fill=V.fill||V.color):"string"==typeof V&&z.setAttribute("class",V),this.getSVGLayer(x).appendChild(z);var j=z.getBBox();for(W=F[H]={width:j.width,height:j.height,measured:!0,element:z,positions:[]};z.firstChild;)z.removeChild(z.firstChild);null===(N=null==z?void 0:z.parentNode)||void 0===N||N.removeChild(z)}return W.measured=!0,W},Canvas.prototype.addText=function(x,A,V,R,D,N,U,B,F,W){var H=this.getTextInfo(x,R,D,N,U),z=H.positions;"center"===B?A-=H.width/2:"right"===B&&(A-=H.width),"middle"===F?V-=H.height/2:"bottom"===F&&(V-=H.height),V+=.75*H.height;for(var G,j=0;z[j];j++){if((G=z[j]).x===A&&G.y===V&&G.text===R)return G.active=!0,void updateTransforms(G.element,W);if(!1===G.active)return G.active=!0,G.text=R,-1!==R.indexOf("<br>")?(V-=.25*H.height,addTspanElements(R,G.element,A)):G.element.textContent=R,G.element.setAttributeNS(null,"x",A),G.element.setAttributeNS(null,"y",V),G.x=A,G.y=V,void updateTransforms(G.element,W)}G={active:!0,rendered:!1,element:z.length?H.element.cloneNode():H.element,text:R,x:A,y:V},z.push(G),-1!==R.indexOf("<br>")?(V-=.25*H.height,addTspanElements(R,G.element,A)):G.element.textContent=R,G.element.setAttributeNS(null,"x",A),G.element.setAttributeNS(null,"y",V),G.element.style.textAlign=B,updateTransforms(G.element,W)};var addTspanElements=function(x,A,V){var R,D,N,U=x.split("<br>");for(D=0;D<U.length;D++)A.childNodes[D]?R=A.childNodes[D]:(R=document.createElementNS("http://www.w3.org/2000/svg","tspan"),A.appendChild(R)),R.textContent=U[D],R.setAttributeNS(null,"text-anchor","middle"),N=(0===D?0:1)+"em",R.setAttributeNS(null,"dy",N),R.setAttributeNS(null,"x",V)};Canvas.prototype.removeText=function(x,A,R,D,N,U){var B,F;if(null==D){var W=this._textCache[x];if(null!=W)for(var H in W)if(V.call(W,H)){var z=W[H];for(var G in z)if(V.call(z,G)){var j=z[G].positions;j.forEach((function(x){x.active=!1}))}}}else(j=(B=this.getTextInfo(x,D,N,U)).positions).forEach((function(x){F=R+.75*B.height,x.x===A&&x.y===F&&x.text===D&&(x.active=!1)}))},Canvas.prototype.clearCache=function(){var x=this._textCache;for(var A in x)if(V.call(x,A))for(var R=this.getSVGLayer(A);R.firstChild;)R.removeChild(R.firstChild);this._textCache={}},window.Flot||(window.Flot={})}(A.TrendHelper||(A.TrendHelper={}))}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),VisiWin.UI.TrendHelper.Plot||(VisiWin.UI.TrendHelper.Plot={}),VisiWin.UI.TrendHelper.Plot.Canvas=VisiWin.UI.TrendHelper.Canvas,function(x){!function(A){!function(A){function isPlainObject(x){"use strict";return!("object"!=typeof x||x.nodeType||null!=x&&x===x.window)&&!(x.constructor&&!Object.hasOwnProperty.call(x.constructor.prototype,"isPrototypeOf"))}A.PlotPlugIns=[],A.deepExtend=function deepExtend(x,...A){if(!x)return{};for(const V of A)if(V)for(const[A,R]of Object.entries(V))switch(Object.prototype.toString.call(R)){case"[object Object]":x[A]=x[A]||{},x[A]=deepExtend(x[A],R);break;case"[object Array]":let V=R;V&&(x[A]=deepExtend(new Array(V.length),R));break;default:x[A]=R}return x},A.addEventListener=function addEventListener(x,A,V,R){if(R){const wrappedHandler=x=>{if(!x.target)return;const A=x.target.closest(R);A&&V.call(A,x)};return x.addEventListener(A,wrappedHandler),wrappedHandler}{const wrappedHandler=A=>{V.call(x,A)};return x.addEventListener(A,wrappedHandler),wrappedHandler}},A.extend=function extend(A,V,R,D){let N,U,B,F,W,H,z=arguments[0]||{},G=1,j=!1;const q=arguments.length;for("boolean"==typeof z&&(j=z,z=arguments[1]||{},G=2),"object"!=typeof z&&"function"!=typeof z&&(z={}),q===G&&(z=this,--G);G<q;G++)if(null!=(N=arguments[G]))for(U in N)B=z[U],F=N[U],z!==F&&(j&&F&&(isPlainObject(F)||(W="[object Array]"===Object.prototype.toString.call(F)))?(W?(W=!1,H=B&&"[object Array]"===Object.prototype.toString.call(B)?B:[]):H=B&&isPlainObject(B)?B:{},z[U]=x.UI.TrendHelper.extend(j,H,F)):void 0!==F&&(z[U]=F));return z},A.each=function each(x,A,V){let R;const D=x.length,N=function isArraylikeObject(x){"use strict";const A=x.length,V=typeof x;return!x.window&&(!(1!==x.nodeType||!A)||("array"===V||"function"!==V&&(0===A||"number"==typeof A&&A>0&&A-1 in x)))}(x);let U=0;if(V){if(N)for(;U<D&&(R=A.apply(x[U],V),!1!==R);U++);else for(U in x)if(R=A.apply(x[U],V),!1===R)break}else if(N)for(;U<D&&(R=A.call(x[U],U,x[U]),!1!==R);U++);else for(U in x)if(R=A.call(x[U],U,x[U]),!1===R)break;return x},A.grep=function grep(x,A,V){let R,D=0;const N=x.length,U=[];for(V=!!V;D<N;D++)R=!!A(x[D],D),V!==R&&U.push(x[D]);return U},A.bodyOffset=function bodyOffset(x){let A=x.offsetTop,V=x.offsetLeft;return A+=parseFloat(x.style.marginTop)||0,V+=parseFloat(x.style.marginLeft)||0,{top:A,left:V}},A.offset=function offset(x){let A,V,R,D,N={top:0,left:0},U=document.documentElement,B=window,F=document.body;return N=x.getBoundingClientRect(),A=U.clientTop||F.clientTop||0,V=U.clientLeft||F.clientLeft||0,R=B.pageYOffset||U.scrollTop,D=B.pageXOffset||U.scrollLeft,{top:N.top+R-A,left:N.left+D-V}}}(A.TrendHelper||(A.TrendHelper={}))}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){!function(x){const A={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]};x.color={},x.color.make=function(A,V,R,D){const N={};return N.r=A||0,N.g=V||0,N.b=R||0,N.a=null!=D?D:1,N.add=function(x,A){for(let V=0;V<x.length;++V)N[x.charAt(V)]+=A;return N.normalize()},N.scale=function(x,A){for(let V=0;V<x.length;++V)N[x.charAt(V)]*=A;return N.normalize()},N.toString=function(){return N.a>=1?"rgb("+[N.r,N.g,N.b].join(",")+")":"rgba("+[N.r,N.g,N.b,N.a].join(",")+")"},N.normalize=function(){function clamp(x,A,V){return A<x?x:A>V?V:A}return N.r=clamp(0,parseInt(N.r),255),N.g=clamp(0,parseInt(N.g),255),N.b=clamp(0,parseInt(N.b),255),N.a=clamp(0,N.a,1),N},N.clone=function(){return x.color.make(N.r,N.b,N.g,N.a)},N.normalize()},x.color.extract=function(A,V){let R;do{if(R=A.style.backgroundColor.toLowerCase(),""!==R&&"transparent"!==R)break;A=A.parentNode}while(A.length&&"BODY"!==A.nodeName);return"rgba(0, 0, 0, 0)"===R&&(R="transparent"),x.color.parse(R)},x.color.parse=function(V){let R;const D=x.color.make;if(R=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(V))return D(parseInt(R[1],10),parseInt(R[2],10),parseInt(R[3],10));if(R=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(V))return D(parseInt(R[1],10),parseInt(R[2],10),parseInt(R[3],10),parseFloat(R[4]));if(R=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(V))return D(2.55*parseFloat(R[1]),2.55*parseFloat(R[2]),2.55*parseFloat(R[3]));if(R=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(V))return D(2.55*parseFloat(R[1]),2.55*parseFloat(R[2]),2.55*parseFloat(R[3]),parseFloat(R[4]));if(R=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(V))return D(parseInt(R[1],16),parseInt(R[2],16),parseInt(R[3],16));if(R=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(V))return D(parseInt(R[1]+R[1],16),parseInt(R[2]+R[2],16),parseInt(R[3]+R[3],16));const N=V.trim().toLowerCase();return"transparent"===N?D(255,255,255,0):(R=A[N]||[0,0,0],D(R[0],R[1],R[2]))}}(x.ColorHelper||(x.ColorHelper={}))}(x.TrendHelper||(x.TrendHelper={}))}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){class Saturated{constructor(){}}Saturated.saturated={saturate:function(x){return x===1/0?Number.MAX_VALUE:x===-1/0?-Number.MAX_VALUE:x},delta:function(x,A,V){return(A-x)/V==1/0?A/V-x/V:(A-x)/V},multiply:function(x,A){return this.saturate(x*A)},multiplyAdd:function(x,A,V){if(isFinite(x*A))return this.saturate(x*A+V);for(var R=V,D=0;D<A;D++)R+=x;return this.saturate(R)},floorInBase:function(x,A){return A*Math.floor(x/A)}},x.Saturated=Saturated}(x.TrendHelper||(x.TrendHelper={}))}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),VisiWin.UI.TrendHelper.Plot.saturated=VisiWin.UI.TrendHelper.Saturated.saturated,function(x){!function(A){A.TrendHelper||(A.TrendHelper={}),x.UI.TrendHelper.Plot.uiConstants={SNAPPING_CONSTANT:20,PANHINT_LENGTH_CONSTANT:10,MINOR_TICKS_COUNT_CONSTANT:4,TICK_LENGTH_CONSTANT:10,ZOOM_DISTANCE_MARGIN:25}}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){!function(x){x.browser={getPageXY:function(x){var A=document.documentElement;return{X:x.clientX+(window.pageXOffset||A.scrollLeft)-(A.clientLeft||0),Y:x.clientY+(window.pageYOffset||A.scrollTop)-(A.clientTop||0)}},getPixelRatio:function(x){return(window.devicePixelRatio||1)/(x.webkitBackingStorePixelRatio||x.mozBackingStorePixelRatio||x.msBackingStorePixelRatio||x.oBackingStorePixelRatio||x.backingStorePixelRatio||1)}}}(x.Browser||(x.Browser={}))}(x.TrendHelper||(x.TrendHelper={}))}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),VisiWin.UI.TrendHelper.Plot.browser=VisiWin.UI.TrendHelper.Browser.browser,function(x){!function(A){!function(A){A.DrawSeries=class DrawSeries{constructor(){}plotLine(x,A,V,R,D,N,U){var B=x.points,F=x.pointsize,W=null,H=null,z=0,G=0,j=0,q=0,Q=null,K=null,J=0,initPoints=function(x){z=B[x-F],G=B[x-F+1],j=B[x],q=B[x+1]},handleSteps=function(){return null!==Q&&null!==K?(j=z,q=G,z=Q,G=K,Q=null,K=null,!0):(G!==q&&z!==j&&(q=G,Q=j,K=G),!1)},handleYMinClipping=function(){if(G<=q&&G<D.min){if(q<D.min)return!0;z=(D.min-G)/(q-G)*(j-z)+z,G=D.min}else if(q<=G&&q<D.min){if(G<D.min)return!0;j=(D.min-G)/(q-G)*(j-z)+z,q=D.min}},handleYMaxClipping=function(){if(G>=q&&G>D.max){if(q>D.max)return!0;z=(D.max-G)/(q-G)*(j-z)+z,G=D.max}else if(q>=G&&q>D.max){if(G>D.max)return!0;j=(D.max-G)/(q-G)*(j-z)+z,q=D.max}},handleXMinClipping=function(){if(z<=j&&z<R.min){if(j<R.min)return!0;G=(R.min-z)/(j-z)*(q-G)+G,z=R.min}else if(j<=z&&j<R.min){if(z<R.min)return!0;q=(R.min-z)/(j-z)*(q-G)+G,j=R.min}},handleXMaxClipping=function(){if(z>=j&&z>R.max){if(j>R.max)return!0;G=(R.max-z)/(j-z)*(q-G)+G,z=R.max}else if(j>=z&&j>R.max){if(z>R.max)return!0;q=(R.max-z)/(j-z)*(q-G)+G,j=R.max}},drawLine=function(){z===W&&G===H||N.moveTo(R.p2c(z)+A,D.p2c(G)+V),W=j,H=q,N.lineTo(R.p2c(j)+A,D.p2c(q)+V)};for(N.beginPath(),J=F;J<B.length;J+=F)if(initPoints(J),null!==z&&null!==j)if(isNaN(z)||isNaN(j)||isNaN(G)||isNaN(q))W=null,H=null;else{if(U)handleSteps()&&(J-=F);handleYMinClipping()||handleYMaxClipping()||handleXMinClipping()||handleXMaxClipping()||drawLine()}else Q=null,K=null;null!==Q&&null!==K&&(initPoints(J),handleSteps(),handleYMinClipping()||handleYMaxClipping()||handleXMinClipping()||handleXMaxClipping()||drawLine()),N.stroke()}plotLineArea(x,A,V,R,D,N){for(var U=x.points,B=x.pointsize,F=R>V.min?Math.min(V.max,R):V.min,W=0,H=1,z=!1,G=0,j=0,q=null,Q=null;!(B>0&&W>U.length+B);){var K=U[(W+=B)-B],J=U[W-B+H],X=U[W],Y=U[W+H];if(-2===B&&(J=Y=F),z){if(B>0&&null!=K&&null==X){j=W,B=-B,H=2;continue}if(B<0&&W===G+B){D.fill(),z=!1,H=1,W=G=j+(B=-B);continue}}if(null!=K&&null!=X){if(N&&(null!==q&&null!==Q?(X=K,Y=J,K=q,J=Q,q=null,Q=null,W-=B):J!==Y&&K!==X&&(Y=J,q=X,Q=J)),K<=X&&K<A.min){if(X<A.min)continue;J=(A.min-K)/(X-K)*(Y-J)+J,K=A.min}else if(X<=K&&X<A.min){if(K<A.min)continue;Y=(A.min-K)/(X-K)*(Y-J)+J,X=A.min}if(K>=X&&K>A.max){if(X>A.max)continue;J=(A.max-K)/(X-K)*(Y-J)+J,K=A.max}else if(X>=K&&X>A.max){if(K>A.max)continue;Y=(A.max-K)/(X-K)*(Y-J)+J,X=A.max}if(z||(D.beginPath(),D.moveTo(A.p2c(K),V.p2c(F)),z=!0),J>=V.max&&Y>=V.max)D.lineTo(A.p2c(K),V.p2c(V.max)),D.lineTo(A.p2c(X),V.p2c(V.max));else if(J<=V.min&&Y<=V.min)D.lineTo(A.p2c(K),V.p2c(V.min)),D.lineTo(A.p2c(X),V.p2c(V.min));else{var $=K,Z=X;J<=Y&&J<V.min&&Y>=V.min?(K=(V.min-J)/(Y-J)*(X-K)+K,J=V.min):Y<=J&&Y<V.min&&J>=V.min&&(X=(V.min-J)/(Y-J)*(X-K)+K,Y=V.min),J>=Y&&J>V.max&&Y<=V.max?(K=(V.max-J)/(Y-J)*(X-K)+K,J=V.max):Y>=J&&Y>V.max&&J<=V.max&&(X=(V.max-J)/(Y-J)*(X-K)+K,Y=V.max),K!==$&&D.lineTo(A.p2c($),V.p2c(J)),D.lineTo(A.p2c(K),V.p2c(J)),D.lineTo(A.p2c(X),V.p2c(Y)),X!==Z&&(D.lineTo(A.p2c(X),V.p2c(Y)),D.lineTo(A.p2c(Z),V.p2c(Y)))}}else q=null,Q=null}}drawSeriesLines(x,A,V,R,D,N,U){A.save(),A.translate(V.left,V.top),A.lineJoin="round",x.lines.dashes&&A.setLineDash&&A.setLineDash(x.lines.dashes);var B={format:x.datapoints.format,points:x.datapoints.points,pointsize:x.datapoints.pointsize};x.decimate&&(B.points=x.decimate(x,x.xaxis.min,x.xaxis.max,R,x.yaxis.min,x.yaxis.max,D));var F=x.lines.lineWidth;A.lineWidth=F,A.strokeStyle=x.color;var W=this.getFillStyle(x.lines,x.color,0,D,U);W&&(A.fillStyle=W,this.plotLineArea(B,x.xaxis,x.yaxis,x.lines.fillTowards||0,A,x.lines.steps)),F>0&&this.plotLine(B,0,0,x.xaxis,x.yaxis,A,x.lines.steps),A.restore()}drawSeriesPoints(x,A,V,R,D,N,U){function drawCircle(x,A,V,R,D,N){x.moveTo(A+R,V),x.arc(A,V,R,0,D?Math.PI:2*Math.PI,!1)}drawCircle.fill=!0,A.save(),A.translate(V.left,V.top);var B={format:x.datapoints.format,points:x.datapoints.points,pointsize:x.datapoints.pointsize};x.decimatePoints&&(B.points=x.decimatePoints(x,x.xaxis.min,x.xaxis.max,R,x.yaxis.min,x.yaxis.max,D));var F,W=x.points.lineWidth,H=x.points.radius,z=x.points.symbol;"circle"===z?F=drawCircle:"string"==typeof z&&N&&N[z]?F=N[z]:"function"==typeof N&&(F=N),0===W&&(W=1e-4),A.lineWidth=W,A.fillStyle=this.getFillStyle(x.points,x.color,null,null,U),A.strokeStyle=x.color,function plotPoints(x,V,R,D,N,U,B,F){var W=x.points,H=x.pointsize;A.beginPath();for(var z=0;z<W.length;z+=H){var G=W[z],j=W[z+1];null==G||G<U.min||G>U.max||j<B.min||j>B.max||(G=U.p2c(G),j=B.p2c(j)+D,F(A,G,j,V,N,R))}F.fill&&!N&&A.fill(),A.stroke()}(B,H,!0,0,!1,x.xaxis,x.yaxis,F),A.restore()}drawBar(x,A,V,R,D,N,U,B,F,W,H){var z,G,j,q,Q=x+R,K=x+D,J=V,X=A,Y=!1;z=G=j=!0,W?(Y=G=j=!0,z=!1,X=A+R,J=A+D,(K=x)<(Q=V)&&(q=K,K=Q,Q=q,z=!0,G=!1)):(z=G=j=!0,Y=!1,Q=x+R,K=x+D,(X=A)<(J=V)&&(q=X,X=J,J=q,Y=!0,j=!1)),K<U.min||Q>U.max||X<B.min||J>B.max||(Q<U.min&&(Q=U.min,z=!1),K>U.max&&(K=U.max,G=!1),J<B.min&&(J=B.min,Y=!1),X>B.max&&(X=B.max,j=!1),Q=U.p2c(Q),J=B.p2c(J),K=U.p2c(K),X=B.p2c(X),N&&(F.fillStyle=N(J,X),F.fillRect(Q,X,K-Q,J-X)),H>0&&(z||G||j||Y)&&(F.beginPath(),F.moveTo(Q,J),z?F.lineTo(Q,X):F.moveTo(Q,X),j?F.lineTo(K,X):F.moveTo(K,X),G?F.lineTo(K,J):F.moveTo(K,J),Y?F.lineTo(Q,J):F.moveTo(Q,J),F.stroke()))}drawSeriesBars(x,A,V,R,D,N,U){A.save(),A.translate(V.left,V.top);var B,F={format:x.datapoints.format,points:x.datapoints.points,pointsize:x.datapoints.pointsize};x.decimate&&(F.points=x.decimate(x,x.xaxis.min,x.xaxis.max,R)),A.lineWidth=x.bars.lineWidth,A.strokeStyle=x.color;var W=x.bars.barWidth[0]||x.bars.barWidth;switch(x.bars.align){case"left":B=0;break;case"right":B=-W;break;default:B=-W/2}((V,R,D,N,U,B)=>{for(var F=V.points,W=V.pointsize,H=x.bars.fillTowards||0,z=H>B.min?Math.min(B.max,H):B.min,G=0;G<F.length;G+=W)if(null!=F[G]){var j=3===W?F[G+2]:z;this.drawBar(F[G],F[G+1],j,R,D,N,U,B,A,x.bars.horizontal,x.bars.lineWidth)}})(F,B,B+W,x.bars.fill?(A,V)=>this.getFillStyle(x.bars,x.color,A,V,U):null,x.xaxis,x.yaxis),A.restore()}getFillStyle(A,V,R,D,N){var U=A.fill;if(!U)return null;if(A.fillColor)return N(A.fillColor,R,D,V);var B=x.UI.TrendHelper.ColorHelper.color.parse(V);return B.a="number"==typeof U?U:.4,B.normalize(),B.toString()}},x.UI.TrendHelper.Plot.drawSeries=new x.UI.TrendHelper.DrawSeries}(A.TrendHelper||(A.TrendHelper={}))}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(V){V.options={zoom:{interactive:!0,active:!0,amount:1.5},pan:{interactive:!0,active:!0,cursor:"move",frameRate:60,mode:"manual"},recenter:{interactive:!0},xaxis:{axisZoom:!0,plotZoom:!0,axisPan:!0,plotPan:!0,panRange:[void 0,void 0],zoomRange:[void 0,void 0]},yaxis:{axisZoom:!0,plotZoom:!0,axisPan:!0,plotPan:!0,panRange:[void 0,void 0],zoomRange:[void 0,void 0]}};x.UI.TrendHelper.Plot.saturated,x.UI.TrendHelper.Plot.browser;var R=x.UI.TrendHelper.Plot.uiConstants.SNAPPING_CONSTANT,D=x.UI.TrendHelper.Plot.uiConstants.PANHINT_LENGTH_CONSTANT;function initNevigation(V,N){var U=null,B=!1,F="manual"===N.pan.mode,W="smartLock"===N.pan.mode,H=W||"smart"===N.pan.mode;var z,G="default",j=null,q=null,Q={x:0,y:0},K=!1;function onWheel(R,D){var N=Math.abs(R.deltaY)<=1?1+Math.abs(R.deltaY)/50:null;if(K&&onDragEnd(R),V.getOptions().zoom.active)return R.preventDefault(),function onZoomClick(R,D,N){var U=A.Browser.browser.getPageXY(R),B=V.offset();B.left=U.X-B.left,B.top=U.Y-B.top;var F=x.UI.TrendHelper.offset(V.getPlaceholder());F.left=U.X-F.left,F.top=U.Y-F.top;var W=V.getXAxes().concat(V.getYAxes()).filter((function(x){var A=x.box;if(void 0!==A)return F.left>A.left&&F.left<A.left+A.width&&F.top>A.top&&F.top<A.top+A.height}));0===W.length&&(W=void 0),D?V.zoomOut({center:B,axes:W,amount:N}):V.zoom({center:B,axes:W,amount:N})}(R,R.wheelDelta<0,N),!1}function onMouseDown(x){B=!0}function onMouseUp(x){B=!1}function onDragStart(x){if(x.preventDefault(),!B||!function isLeftMouseButtonPressed(x){return 0===x.button}(x))return!1;K=!0;var R=A.Browser.browser.getPageXY(x),D=V.getPlaceholder().getBoundingClientRect();D.left=R.X-D.left,D.top=R.Y-D.top,0===(U=V.getXAxes().concat(V.getYAxes()).filter((function(x){var A=x.box;if(void 0!==A)return D.left>A.left&&D.left<A.left+A.width&&D.top>A.top&&D.top<A.top+A.height}))).length&&(U=void 0);var N=V.getPlaceholder().style.cursor;N&&(G=N),V.getPlaceholder().style.cursor=V.getOptions().pan.cursor,H?z=V.navigationState(R.X,R.Y):F&&(Q.x=R.X,Q.y=R.Y)}function onDrag(x){if(K){var R=A.Browser.browser.getPageXY(x),D=V.getOptions().pan.frameRate;-1!==D?!q&&D&&(q=setTimeout((function(){H?V.smartPan({x:z.startPageX-R.X,y:z.startPageY-R.Y},z,U,!1,W):F&&(V.pan({left:Q.x-R.X,top:Q.y-R.Y,axes:U}),Q.x=R.X,Q.y=R.Y),q=null}),1/D*1e3)):H?V.smartPan({x:z.startPageX-R.X,y:z.startPageY-R.Y},z,U,!1,W):F&&(V.pan({left:Q.x-R.X,top:Q.y-R.Y,axes:U}),Q.x=R.X,Q.y=R.Y)}}function onDragEnd(x){if(K){q&&(clearTimeout(q),q=null),K=!1;var R=A.Browser.browser.getPageXY(x);V.getPlaceholder().style.cursor=G,H?(V.smartPan({x:z.startPageX-R.X,y:z.startPageY-R.Y},z,U,!1,W),V.smartPan.end()):F&&(V.pan({left:Q.x-R.X,top:Q.y-R.Y,axes:U}),Q.x=0,Q.y=0)}}function onDblClick(x){if(V.activate(),V.getOptions().recenter.interactive){var A,R=V.getTouchedAxis(x.clientX,x.clientY);V.recenter({axes:R[0]?R:null}),A=R[0]?new CustomEvent("re-center",{detail:{axisTouched:R[0]}}):new CustomEvent("re-center",{detail:x}),V.getPlaceholder().dispatchEvent(A)}}function onClick(x){return V.activate(),K&&onDragEnd(x),!1}V.navigationState=function(x,A){var V=this.getAxes(),R={};return Object.keys(V).forEach((function(x){var A=V[x];R[x]={navigationOffset:{below:A.options.offset.below||0,above:A.options.offset.above||0},axisMin:A.min,axisMax:A.max,diagMode:!1}})),R.startPageX=x||0,R.startPageY=A||0,R},V.activate=function(){var x=V.getOptions();if(!x.pan.active||!x.zoom.active){x.pan.active=!0,x.zoom.active=!0;var A=new CustomEvent("plotactivated",{detail:[V]});V.getPlaceholder().dispatchEvent(A)}},V.zoomOut=function(x){x||(x={}),x.amount||(x.amount=V.getOptions().zoom.amount),x.amount=1/x.amount,V.zoom(x)},V.zoom=function(A){A||(A={});var R=A.center,D=A.amount||V.getOptions().zoom.amount,N=V.width(),U=V.height(),B=A.axes||V.getAxes();R||(R={left:N/2,top:U/2});var F=R.left/N,W=R.top/U,H={x:{min:R.left-F*N/D,max:R.left+(1-F)*N/D},y:{min:R.top-W*U/D,max:R.top+(1-W)*U/D}};for(var z in B)if(B.hasOwnProperty(z)){var G=B[z],j=G.options,q=H[G.direction].min,Q=H[G.direction].max,K=G.options.offset;if(j.axisZoom&&j.plotZoom&&("y"!==G.direction||!0!==G.options.zoomTimeOnly)){if((q=x.UI.TrendHelper.Plot.saturated.saturate(G.c2p(q)))>(Q=x.UI.TrendHelper.Plot.saturated.saturate(G.c2p(Q)))){var J=q;q=Q,Q=J}if(j.zoomRange){if(Q-q<j.zoomRange[0])continue;if(Q-q>j.zoomRange[1])continue}var X=x.UI.TrendHelper.Plot.saturated.saturate(K.below-(G.min-q)),Y=x.UI.TrendHelper.Plot.saturated.saturate(K.above-(G.max-Q));j.offset={below:X,above:Y}}}if(V.setupGrid(!0),V.draw(),!A.preventEvent){const x=new CustomEvent("plotzoom",{detail:[V,A]});V.getPlaceholder().dispatchEvent(x)}},V.pan=function(R){var D={x:+R.left,y:+R.top};if(isNaN(D.x)&&(D.x=0),isNaN(D.y)&&(D.y=0),x.UI.TrendHelper.each(R.axes||V.getAxes(),(function(x,V){var N=V.options,U=D[V.direction];if((N.axisPan||!R.axes)&&(N.plotPan||R.axes)){var B=V.p2c(N.panRange[0])-V.p2c(V.min),F=V.p2c(N.panRange[1])-V.p2c(V.max);if(void 0!==N.panRange[0]&&U>=F&&(U=F),void 0!==N.panRange[1]&&U<=B&&(U=B),0!==U){var W=A.Saturated.saturated.saturate(V.c2p(V.p2c(V.min)+U)-V.c2p(V.p2c(V.min))),H=A.Saturated.saturated.saturate(V.c2p(V.p2c(V.max)+U)-V.c2p(V.p2c(V.max)));isFinite(W)||(W=0),isFinite(H)||(H=0),N.offset={below:A.Saturated.saturated.saturate(W+(N.offset.below||0)),above:A.Saturated.saturated.saturate(H+(N.offset.above||0))}}}})),V.setupGrid(!0),V.draw(),!R.preventEvent){const x=new CustomEvent("plotpan",{detail:[V,R]});V.getPlaceholder().dispatchEvent(x)}},V.recenter=function(A){x.UI.TrendHelper.each(A.axes||V.getAxes(),(x,V)=>{A.axes?"x"===this.direction?V.options.offset={below:0}:"y"===this.direction&&(V.options.offset={above:0}):V.options.offset={below:0,above:0}}),V.setupGrid(!0),V.draw()};var J=null,X={x:0,y:0};V.smartPan=function(x,D,N,U,B){var F,W,H,z,G,q,Q=!!B||(x=>Math.abs(x.y)<R&&Math.abs(x.x)>=R||Math.abs(x.x)<R&&Math.abs(x.y)>=R)(x),K=V.getAxes();if(function(x){return Math.abs(x.x)>0&&Math.abs(x.y)>0}(x=B?(x=>{switch(!J&&Math.max(Math.abs(x.x),Math.abs(x.y))>=R&&(J=Math.abs(x.x)<Math.abs(x.y)?"y":"x"),J){case"x":return{x:x.x,y:0};case"y":return{x:0,y:x.y};default:return{x:0,y:0}}})(x):(x=>Math.abs(x.x)<R&&Math.abs(x.y)>=R?{x:0,y:x.y}:Math.abs(x.y)<R&&Math.abs(x.x)>=R?{x:x.x,y:0}:x)(x))&&(D.diagMode=!0),Q&&!0===D.diagMode&&(D.diagMode=!1,function(x,A,V){var R;Object.keys(x).forEach((function(D){R=x[D],0===V[R.direction]&&(R.options.offset.below=A[D].navigationOffset.below,R.options.offset.above=A[D].navigationOffset.above)}))}(K,D,x)),j=null,isNaN(x.x)&&(x.x=0),isNaN(x.y)&&(x.y=0),N&&(K=N),Object.keys(K).forEach((function(V){if(W=K[V],H=W.min,z=W.max,F=W.options,q=x[W.direction],G=X[W.direction],(F.axisPan||!N)&&(N||F.plotPan)){var R=G+W.p2c(F.panRange[0])-W.p2c(H),D=G+W.p2c(F.panRange[1])-W.p2c(z);if(void 0!==F.panRange[0]&&q>=D&&(q=D),void 0!==F.panRange[1]&&q<=R&&(q=R),0!==q){var U=A.Saturated.saturated.saturate(W.c2p(W.p2c(H)-(G-q))-W.c2p(W.p2c(H))),B=A.Saturated.saturated.saturate(W.c2p(W.p2c(z)-(G-q))-W.c2p(W.p2c(z)));isFinite(U)||(U=0),isFinite(B)||(B=0),W.options.offset.below=A.Saturated.saturated.saturate(U+(W.options.offset.below||0)),W.options.offset.above=A.Saturated.saturated.saturate(B+(W.options.offset.above||0))}}})),X=x,V.setupGrid(!0),V.draw(),!U){const A=new CustomEvent("plotpan",{detail:[V,x,N,D]});V.getPlaceholder().dispatchEvent(A)}},V.smartPan.end=function(){j=null,J=null,X={x:0,y:0},V.triggerRedrawOverlay()};V.getTouchedAxis=function(x,A){var R=V.getPlaceholder().getBoundingClientRect();return R.left=x-R.left,R.top=A-R.top,V.getXAxes().concat(V.getYAxes()).filter((function(x){var A=x.box;if(void 0!==A)return R.left>A.left&&R.left<A.left+A.width&&R.top>A.top&&R.top<A.top+A.height}))},V.hooks.drawOverlay.push((x,A)=>{if(j){A.strokeStyle="rgba(96, 160, 208, 0.7)",A.lineWidth=2,A.lineJoin="round";var V,R,N=Math.round(j.start.x),B=Math.round(j.start.y);if(U?"x"===U[0].direction?(R=Math.round(j.start.y),V=Math.round(j.end.x)):"y"===U[0].direction&&(V=Math.round(j.start.x),R=Math.round(j.end.y)):(V=Math.round(j.end.x),R=Math.round(j.end.y)),A.beginPath(),!1===j.end)A.moveTo(N,B-D),A.lineTo(N,B+D),A.moveTo(N+D,B),A.lineTo(N-D,B);else{var F=B===R;A.moveTo(N-(F?0:D),B-(F?D:0)),A.lineTo(N+(F?0:D),B+(F?D:0)),A.moveTo(N,B),A.lineTo(V,R),A.moveTo(V-(F?0:D),R-(F?D:0)),A.lineTo(V+(F?0:D),R+(F?D:0))}A.stroke()}}),V.hooks.bindEvents.push((function bindEvents(x,A){var V=x.getOptions();V.zoom.interactive&&A.addEventListener("wheel",onWheel),V.pan.interactive&&(A.addEventListener("dragstart",onDragStart),A.addEventListener("drag",onDrag),A.addEventListener("dragend",onDragEnd),A.addEventListener("mousedown",onMouseDown),A.addEventListener("mouseup",onMouseUp)),A.addEventListener("dblclick",onDblClick),A.addEventListener("doubletap",onDblClick),A.addEventListener("click",onClick)})),V.hooks.shutdown.push((function shutdown(x,A){A.removeEventListener("wheel",onWheel),A.removeEventListener("mousedown",onMouseDown),A.removeEventListener("mouseup",onMouseUp),A.removeEventListener("dragstart",onDragStart),A.removeEventListener("drag",onDrag),A.removeEventListener("dragend",onDragEnd),A.removeEventListener("dblclick",onDblClick),A.removeEventListener("doubletap",onDblClick),A.removeEventListener("click",onClick),q&&clearTimeout(q)}))}V.init=function init(x){x.hooks.processOptions.push(initNevigation)},x.UI.TrendHelper.PlotPlugIns.push({init:x.UI.TrendHelper.navigate.init,options:x.UI.TrendHelper.navigate.options,name:"navigate",version:"1.3"})}(A.navigate||(A.navigate={}))}(A.TrendHelper||(A.TrendHelper={}))}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){!function(A){!function(A){A.options={xaxis:{timezone:null,timeformat:null,twelveHourClock:!1,monthNames:null,timeBase:"milliseconds"},yaxis:{timeBase:"milliseconds"}};var V=x.UI.TrendHelper.Plot.saturated.floorInBase,CreateMicroSecondDate=function(x,A){var V=new x(A),R=V.setTime.bind(V);V.update=function(x){x=Math.round(1e3*x)/1e3,R(x),this.microseconds=1e3*(x-Math.floor(x))};var D=V.getTime.bind(V);return V.getTime=function(){return D()+this.microseconds/1e3},V.setTime=function(x){this.update(x)},V.getMicroseconds=function(){return this.microseconds},V.setMicroseconds=function(x){var A=D()+x/1e3;this.update(A)},V.setUTCMicroseconds=function(x){this.setMicroseconds(x)},V.getUTCMicroseconds=function(){return this.getMicroseconds()},V.microseconds=null,V.microEpoch=null,V.update(A),V};function formatDate(x,A,V,R){if("function"==typeof x.strftime)return x.strftime(A);var D,leftPad=function(x,A){return A=""+(null==A?"0":A),1===(x=""+x).length?A+x:x},formatSubSeconds=function(x,A,V){var R,D=1e3*x+A;if(V<6&&V>0){var N=parseFloat("1e"+(V-6));R=("00000"+(D=Math.round(Math.round(D*N)/N))).slice(-6,-(6-V))}else R=("00000"+(D=Math.round(D))).slice(-6);return R},N=[],U=!1,B=x.getHours(),F=B<12;V||(V=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]),R||(R=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]),D=B>12?B-12:0===B?12:B;for(var W=-1,H=0;H<A.length;++H){var z=A.charAt(H);if(!isNaN(Number(z))&&Number(z)>0)W=Number(z);else if(U){switch(z){case"a":z=""+R[x.getDay()];break;case"b":z=""+V[x.getMonth()];break;case"d":z=leftPad(x.getDate());break;case"e":z=leftPad(x.getDate()," ");break;case"h":case"H":z=leftPad(B);break;case"I":z=leftPad(D);break;case"l":z=leftPad(D," ");break;case"m":z=leftPad(x.getMonth()+1);break;case"M":z=leftPad(x.getMinutes());break;case"q":z=""+(Math.floor(x.getMonth()/3)+1);break;case"S":z=leftPad(x.getSeconds());break;case"s":z=""+formatSubSeconds(x.getMilliseconds(),x.getMicroseconds(),W);break;case"y":z=leftPad(x.getFullYear()%100);break;case"Y":z=""+x.getFullYear();break;case"p":z=F?"am":"pm";break;case"P":z=F?"AM":"PM";break;case"w":z=""+x.getDay()}N.push(z),U=!1}else"%"===z?U=!0:N.push(z)}return N.join("")}function makeUtcWrapper(x){function addProxyMethod(x,A,V,R){x[A]=function(){return V[R].apply(V,arguments)}}var A={date:x};void 0!==x.strftime&&addProxyMethod(A,"strftime",x,"strftime"),addProxyMethod(A,"getTime",x,"getTime"),addProxyMethod(A,"setTime",x,"setTime");for(var V=["Date","Day","FullYear","Hours","Minutes","Month","Seconds","Milliseconds","Microseconds"],R=0;R<V.length;R++)addProxyMethod(A,"get"+V[R],x,"getUTC"+V[R]),addProxyMethod(A,"set"+V[R],x,"setUTC"+V[R]);return A}function dateGenerator(x,A){return A&&"seconds"===A.timeBase?x*=1e3:"microseconds"===A.timeBase&&(x/=1e3),x>864e13?x=864e13:x<-864e13&&(x=-864e13),"browser"===A.timezone?CreateMicroSecondDate(Date,x):(A.timezone&&A.timezone,makeUtcWrapper(CreateMicroSecondDate(Date,x)))}A.formatDate=formatDate,A.makeUtcWrapper=makeUtcWrapper,A.dateGenerator=dateGenerator;var R={microsecond:1e-6,millisecond:.001,second:1,minute:60,hour:3600,day:86400,month:2592e3,quarter:7776e3,year:525949.2*60},D={microsecond:.001,millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,month:2592e6,quarter:7776e6,year:525949.2*60*1e3},N={microsecond:1,millisecond:1e3,second:1e6,minute:6e7,hour:36e8,day:864e8,month:2592e9,quarter:7776e9,year:31556951999999.996},U=[[1,"microsecond"],[2,"microsecond"],[5,"microsecond"],[10,"microsecond"],[25,"microsecond"],[50,"microsecond"],[100,"microsecond"],[250,"microsecond"],[500,"microsecond"],[1,"millisecond"],[2,"millisecond"],[5,"millisecond"],[10,"millisecond"],[25,"millisecond"],[50,"millisecond"],[100,"millisecond"],[250,"millisecond"],[500,"millisecond"],[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[.25,"month"],[.5,"month"],[1,"month"],[2,"month"]],B=U.concat([[3,"month"],[6,"month"],[1,"year"]]),F=U.concat([[1,"quarter"],[2,"quarter"],[1,"year"]]);function dateTickGenerator(x){var A,U=x.options,W=[],H=dateGenerator(x.min,U),z=0,G=U.tickSize&&"quarter"===U.tickSize[1]||U.minTickSize&&"quarter"===U.minTickSize[1]?F:B;A="seconds"===U.timeBase?R:"microseconds"===U.timeBase?N:D,null!==U.minTickSize&&void 0!==U.minTickSize&&(z="number"==typeof U.tickSize?U.tickSize:U.minTickSize[0]*A[U.minTickSize[1]]);for(var j=0;j<G.length-1&&!(x.delta<(G[j][0]*A[G[j][1]]+G[j+1][0]*A[G[j+1][1]])/2&&G[j][0]*A[G[j][1]]>=z);++j);var q=G[j][0],Q=G[j][1];if("year"===Q){if(null!==U.minTickSize&&void 0!==U.minTickSize&&"year"===U.minTickSize[1])q=Math.floor(U.minTickSize[0]);else{var K=parseFloat("1e"+Math.floor(Math.log(x.delta/A.year)/Math.LN10)),J=x.delta/A.year/K;q=J<1.5?1:J<3?2:J<7.5?5:10,q*=K}q<1&&(q=1)}x.tickSize=U.tickSize||[q,Q];var X=x.tickSize[0],Y=X*A[Q=x.tickSize[1]];"microsecond"===Q?H.setMicroseconds(V(H.getMicroseconds(),X)):"millisecond"===Q?H.setMilliseconds(V(H.getMilliseconds(),X)):"second"===Q?H.setSeconds(V(H.getSeconds(),X)):"minute"===Q?H.setMinutes(V(H.getMinutes(),X)):"hour"===Q?H.setHours(V(H.getHours(),X)):"month"===Q?H.setMonth(V(H.getMonth(),X)):"quarter"===Q?H.setMonth(3*V(H.getMonth()/3,X)):"year"===Q&&H.setFullYear(V(H.getFullYear(),X)),Y>=A.millisecond&&H.setMicroseconds(0),Y>=A.second&&H.setMilliseconds(0),Y>=A.minute&&H.setSeconds(0),Y>=A.hour&&H.setMinutes(0),Y>=A.day&&H.setHours(0),Y>=4*A.day&&H.setDate(1),Y>=2*A.month&&H.setMonth(V(H.getMonth(),3)),Y>=2*A.quarter&&H.setMonth(V(H.getMonth(),6)),Y>=A.year&&H.setMonth(0);var $,Z,ee=0,te=Number.NaN;do{if(Z=te,$=H.getTime(),te=U&&"seconds"===U.timeBase?$/1e3:U&&"microseconds"===U.timeBase?1e3*$:$,W.push(te),"month"===Q||"quarter"===Q)if(X<1){H.setDate(1);var ie=H.getTime();H.setMonth(H.getMonth()+("quarter"===Q?3:1));var ne=H.getTime();H.setTime(te+ee*A.hour+(ne-ie)*X),ee=H.getHours(),H.setHours(0)}else H.setMonth(H.getMonth()+X*("quarter"===Q?3:1));else"year"===Q?H.setFullYear(H.getFullYear()+X):"seconds"===U.timeBase?H.setTime(1e3*(te+Y)):"microseconds"===U.timeBase?H.setTime((te+Y)/1e3):H.setTime(te+Y)}while(te<x.max&&te!==Z);return W}A.dateTickGenerator=dateTickGenerator,A.init=function init(A){const V=x.AppServices.LanguageService.currentLanguage,U=new Intl.DateTimeFormat(V,x.Application.Settings.UI.DateTimeFormats.LongTime),B=new Intl.DateTimeFormat(V,x.Application.Settings.UI.DateTimeFormats.ShortDate),F=new Intl.DateTimeFormat(V,x.Application.Settings.UI.DateTimeFormats.LongDate),W=new Intl.DateTimeFormat(V,x.Application.Settings.UI.DateTimeFormats.ShortTime),H=new Intl.DateTimeFormat(V,x.Application.Settings.UI.DateTimeFormats.NamedShortDate),z=new Intl.DateTimeFormat(V,x.Application.Settings.UI.DateTimeFormats.NamedLongDate);A.hooks.processOptions.push((function(A){x.UI.TrendHelper.each(A.getAxes(),(function(x,A){var V=A.options;if("time"===V.mode){if(A.tickGenerator=dateTickGenerator,"tickFormatter"in V&&"function"==typeof V.tickFormatter)return;A.tickFormatter=(x,A)=>{let G,j;if(!A.options.timeformat){return U.format(x)+"<br>"+F.format(x)}switch(A.options.timeformat){case"longtimeformater":return U.format(x);case"shorttimeformater":return W.format(x);case"longdateformater":return F.format(x);case"shortdateformater":return B.format(x);case"namedshortdateformater":return H.format(x);case"namedlongdateformater":return z.format(x);case"longtimeformater_longdateformater":return G=U.format(x),j=F.format(x),G+" "+j;case"longtimeformater_shortdateformater":return G=U.format(x),j=B.format(x),G+" "+j;case"longtimeformater_namedshortdateformater":return G=U.format(x),j=H.format(x),G+" "+j;case"longtimeformater_namedlongdateformater":return G=U.format(x),j=z.format(x),G+" "+j;case"shorttimeformater_longdateformater":return G=W.format(x),j=F.format(x),G+" "+j;case"shorttimeformater_shortdateformater":return G=W.format(x),j=B.format(x),G+" "+j;case"shorttimeformater_namedshortdateformater":return G=U.format(x),j=H.format(x),G+" "+j;case"shorttimeformater_namedlongdateformater":return G=U.format(x),j=z.format(x),G+" "+j;case"longdateformater_longtimeformater":return G=U.format(x),j=F.format(x),j+" "+G;case"shortdateformater_longtimeformater":return G=U.format(x),j=B.format(x),j+" "+G;case"namedshortdateformater_longtimeformater":return G=U.format(x),j=H.format(x),j+" "+G;case"namedlongdateformater_longtimeformater":return G=U.format(x),j=z.format(x),j+" "+G;case"longdateformater_shorttimeformater":return G=W.format(x),j=F.format(x),j+" "+G;case"shortdateformater_shorttimeformater":return G=W.format(x),j=B.format(x),j+" "+G;case"namedshortdateformater_shorttimeformater":return G=U.format(x),j=H.format(x),j+" "+G;case"namedlongdateformater_shorttimeformater":return G=U.format(x),j=z.format(x),j+" "+G;case"longtimeformatercrlongdateformater":return G=U.format(x),j=F.format(x),G+"<br>"+j;case"longtimeformatercrshortdateformater":return G=U.format(x),j=B.format(x),G+"<br>"+j;case"longtimeformatercrnamedshortdateformater":return G=U.format(x),j=H.format(x),G+"<br>"+j;case"longtimeformatercrnamedlongdateformater":return G=U.format(x),j=z.format(x),G+"<br>"+j;case"shorttimeformatercrlongdateformater":return G=W.format(x),j=F.format(x),G+"<br>"+j;case"shorttimeformatercrshortdateformater":return G=W.format(x),j=B.format(x),G+"<br>"+j;case"shorttimeformatercrnamedshortdateformater":return G=U.format(x),j=H.format(x),G+"<br>"+j;case"shorttimeformatercrnamedlongdateformater":return G=U.format(x),j=z.format(x),G+"<br>"+j;case"longdateformatercrlongtimeformater":return G=U.format(x),j=F.format(x),j+"<br>"+G;case"shortdateformatercrlongtimeformater":return G=U.format(x),j=B.format(x),j+"<br>"+G;case"namedshortdateformatercrlongtimeformater":return G=U.format(x),j=H.format(x),j+"<br>"+G;case"namedlongdateformatercrlongtimeformater":return G=U.format(x),j=z.format(x),j+"<br>"+G;case"longdateformatercrshorttimeformater":return G=W.format(x),j=F.format(x),j+"<br>"+G;case"shortdateformatercrshorttimeformater":return G=W.format(x),j=B.format(x),j+"<br>"+G;case"namedshortdateformatercrshorttimeformater":return G=U.format(x),j=H.format(x),j+"<br>"+G;case"namedlongdateformatercrshorttimeformater":return G=W.format(x),j=z.format(x),j+"<br>"+G}var q=dateGenerator(x,A.options);if(null!=V.timeformat)return formatDate(q,V.timeformat,V.monthNames,V.dayNames);var Q,K=A.options.tickSize&&"quarter"===A.options.tickSize[1]||A.options.minTickSize&&"quarter"===A.options.minTickSize[1];Q="seconds"===V.timeBase?R:"microseconds"===V.timeBase?N:D;var J,X,Y=A.tickSize[0]*Q[A.tickSize[1]],$=A.max-A.min,Z=V.twelveHourClock?" %p":"",ee=V.twelveHourClock?"%I":"%H";if(J="seconds"===V.timeBase?1:"microseconds"===V.timeBase?1e6:1e3,Y<Q.second){var te=-Math.floor(Math.log10(Y/J));String(Y).indexOf("25")>-1&&te++,X="%S.%"+te+"s"}else X=Y<Q.minute?ee+":%M:%S"+Z:Y<Q.day?$<2*Q.day?ee+":%M"+Z:"%b %d "+ee+":%M"+Z:Y<Q.month?"%b %d":K&&Y<Q.quarter||!K&&Y<Q.year?$<Q.year?"%b":"%b %Y":K&&Y<Q.year?$<Q.year?"Q%q":"Q%q %Y":"%Y";return formatDate(q,X,V.monthNames,V.dayNames)}}}))}))}}(A.Time||(A.Time={}))}(A.TrendHelper||(A.TrendHelper={}))}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),VisiWin.UI.TrendHelper.PlotPlugIns.push({init:VisiWin.UI.TrendHelper.Time.init,options:VisiWin.UI.TrendHelper.Time.options}),VisiWin.UI.TrendHelper.Plot.formatDate=VisiWin.UI.TrendHelper.Time.formatDate,VisiWin.UI.TrendHelper.Plot.dateGenerator=VisiWin.UI.TrendHelper.Time.dateGenerator,VisiWin.UI.TrendHelper.Plot.dateTickGenerator=VisiWin.UI.TrendHelper.Time.dateTickGenerator,VisiWin.UI.TrendHelper.Plot.makeUtcWrapper=VisiWin.UI.TrendHelper.Time.makeUtcWrapper,function(x){!function(x){!function(x){!function(x){function initTouchNavigation(x,A){var V,R={twoTouches:!1,currentTapStart:{x:0,y:0},currentTapEnd:{x:0,y:0},prevTap:{x:0,y:0},currentTap:{x:0,y:0},interceptedLongTap:!1,isUnsupportedGesture:!1,prevTapTime:null,tapStartTime:null,longTapTriggerId:null};function interpretGestures(A){var D=x.getOptions();(D.pan.active||D.zoom.active)&&(!function updateOnMultipleTouches(x){x.touches.length>=3?R.isUnsupportedGesture=!0:R.isUnsupportedGesture=!1}(A),V.dispatchEvent(new CustomEvent("touchevent",{detail:A})),isPinchEvent(A)?executeAction(A,"pinch"):(executeAction(A,"pan"),wasPinchEvent(A)||(function isDoubleTap(x){var A=(new Date).getTime(),V=A-R.prevTapTime;if(V>=0&&V<500&&distance(R.prevTap.x,R.prevTap.y,R.currentTap.x,R.currentTap.y)<20)return x.firstTouch=R.prevTap,x.secondTouch=R.currentTap,!0;return R.prevTapTime=A,!1}(A)&&executeAction(A,"doubleTap"),executeAction(A,"tap"),executeAction(A,"longTap"))))}function executeAction(x,A){switch(A){case"pan":D[x.type](x);break;case"pinch":N[x.type](x);break;case"doubleTap":U.onDoubleTap(x);break;case"longTap":B[x.type](x);break;case"tap":F[x.type](x)}}var D={touchstart:function(x){!function updatePrevForDoubleTap(){R.prevTap={x:R.currentTap.x,y:R.currentTap.y}}(),updateCurrentForDoubleTap(x),function updateStateForLongTapStart(x){R.tapStartTime=(new Date).getTime(),R.interceptedLongTap=!1,R.currentTapStart={x:x.touches[0].pageX,y:x.touches[0].pageY},R.currentTapEnd={x:x.touches[0].pageX,y:x.touches[0].pageY}}(x),V.dispatchEvent(new CustomEvent("panstart",{detail:x}))},touchmove:function(x){preventEventBehaviors(x),updateCurrentForDoubleTap(x),function updateStateForLongTapEnd(x){R.currentTapEnd={x:x.touches[0].pageX,y:x.touches[0].pageY}}(x),R.isUnsupportedGesture||V.dispatchEvent(new CustomEvent("pandrag",{detail:x}))},touchend:function(x){preventEventBehaviors(x),wasPinchEvent(x)?(V.dispatchEvent(new CustomEvent("pinchend",{detail:x})),V.dispatchEvent(new CustomEvent("panstart",{detail:x}))):function noTouchActive(x){return x.touches&&0===x.touches.length}(x)&&V.dispatchEvent(new CustomEvent("panend",{detail:x}))}},N={touchstart:function(x){V.dispatchEvent(new CustomEvent("pinchstart",{detail:x}))},touchmove:function(x){preventEventBehaviors(x),R.twoTouches=isPinchEvent(x),R.isUnsupportedGesture||V.dispatchEvent(new CustomEvent("pinchdrag",{detail:x}))},touchend:function(x){preventEventBehaviors(x)}},U={onDoubleTap:function(x){preventEventBehaviors(x),V.dispatchEvent(new CustomEvent("doubletap",{detail:x}))}},B={touchstart:function(x){B.waitForLongTap(x)},touchmove:function(x){},touchend:function(x){R.longTapTriggerId&&(clearTimeout(R.longTapTriggerId),R.longTapTriggerId=null)},isLongTap:function(x){return(new Date).getTime()-R.tapStartTime>=1500&&!R.interceptedLongTap&&distance(R.currentTapStart.x,R.currentTapStart.y,R.currentTapEnd.x,R.currentTapEnd.y)<20&&(R.interceptedLongTap=!0,!0)},waitForLongTap:function(x){R.longTapTriggerId||(R.longTapTriggerId=setTimeout((function(){B.isLongTap(x)&&V.dispatchEvent(new CustomEvent("longtap",{detail:x})),R.longTapTriggerId=null}),1500))}},F={touchstart:function(x){R.tapStartTime=(new Date).getTime()},touchmove:function(x){},touchend:function(x){F.isTap(x)&&(V.dispatchEvent(new CustomEvent("tap",{detail:x})),preventEventBehaviors(x))},isTap:function(x){return(new Date).getTime()-R.tapStartTime<=125&&distance(R.currentTapStart.x,R.currentTapStart.y,R.currentTapEnd.x,R.currentTapEnd.y)<20}};function updateCurrentForDoubleTap(x){R.currentTap={x:x.touches[0].pageX,y:x.touches[0].pageY}}function preventEventBehaviors(A){R.isUnsupportedGesture||(A.preventDefault(),x.getOptions().propagateSupportedGesture||A.stopPropagation())}function distance(x,A,V,R){return Math.sqrt((x-V)*(x-V)+(A-R)*(A-R))}function wasPinchEvent(x){return R.twoTouches&&1===x.touches.length}function isPinchEvent(A){return!!(A.touches&&A.touches.length>=2&&A.touches[0].target===x.getEventHolder()&&A.touches[1].target===x.getEventHolder())}(!0===A.pan.enableTouch||A.zoom.enableTouch)&&(x.hooks.bindEvents.push((function bindEvents(x,A){V=A,A.addEventListener("touchstart",interpretGestures,!1),A.addEventListener("touchmove",interpretGestures,!1),A.addEventListener("touchend",interpretGestures,!1)})),x.hooks.shutdown.push((function shutdown(x,A){A.removeEventListener("touchstart",interpretGestures),A.removeEventListener("touchmove",interpretGestures),A.removeEventListener("touchend",interpretGestures),R.longTapTriggerId&&(clearTimeout(R.longTapTriggerId),R.longTapTriggerId=null)})))}x.options={propagateSupportedGesture:!0},x.init=function init(x){x.hooks.processOptions.push(initTouchNavigation)}}(x.navigateTouch||(x.navigateTouch={}))}(x.TrendHelper||(x.TrendHelper={}))}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),VisiWin.UI.TrendHelper.PlotPlugIns.push({init:VisiWin.UI.TrendHelper.navigateTouch.init,options:VisiWin.UI.TrendHelper.navigateTouch.options,name:"touch",version:"0.3"}),function(x){!function(A){!function(A){!function(A){A.options={zoom:{enableTouch:!0},pan:{enableTouch:!0,touchMode:"manual"},recenter:{enableTouch:!0}};var V=x.UI.TrendHelper.Plot.uiConstants.ZOOM_DISTANCE_MARGIN;function initTouchNavigation(x,A){var R,D,N,U,B={zoomEnable:!1,prevDistance:null,prevTapTime:0,prevPanPosition:{x:0,y:0},prevTapPosition:{x:0,y:0}},F={prevTouchedAxis:"none",currentTouchedAxis:"none",touchedAxis:null,navigationConstraint:"unconstrained",initialState:null},W=A.pan.interactive&&"manual"===A.pan.touchMode,H="smartLock"===A.pan.touchMode,z=A.pan.interactive&&(H||"smart"===A.pan.touchMode);R={start:function(A){if(presetNavigationState(A,"pan",B),updateData(A,"pan",B,F),z){var V=getPoint(A,"pan");F.initialState=x.navigationState(V.x,V.y)}},drag:function(A){if(presetNavigationState(A,"pan",B),z){var V=getPoint(A,"pan");x.smartPan({x:F.initialState.startPageX-V.x,y:F.initialState.startPageY-V.y},F.initialState,F.touchedAxis,!1,H)}else W&&(x.pan({left:-delta(A,"pan",B).x,top:-delta(A,"pan",B).y,axes:F.touchedAxis}),updatePrevPanPosition(A,"pan",B,F))},end:function(A){presetNavigationState(A,"pan",B),z&&x.smartPan.end(),function wasPinchEvent(x,A){return A.zoomEnable&&1===x.detail.touches.length}(A,B)&&updatePrevPanPosition(A,"pan",B,F)}},D={start:function(x){U&&(clearTimeout(U),U=null),presetNavigationState(x,"pinch",B),function setPrevDistance(x,A){A.prevDistance=pinchDistance(x)}(x,B),updateData(x,"pinch",B,F)},drag:function(A){U||(U=setTimeout(()=>{presetNavigationState(A,"pinch",B),x.pan({left:-delta(A,"pinch",B).x,top:-delta(A,"pinch",B).y,axes:F.touchedAxis}),updatePrevPanPosition(A,"pinch",B,F);var R=pinchDistance(A);(B.zoomEnable||Math.abs(R-B.prevDistance)>V)&&(!function zoomPlot(x,A,V,R){var D=x.offset(),N={left:0,top:0},U=pinchDistance(A)/V.prevDistance,B=pinchDistance(A);N.left=getPoint(A,"pinch").x-D.left,N.top=getPoint(A,"pinch").y-D.top,x.zoom({center:N,amount:U,axes:R.touchedAxis}),V.prevDistance=B}(x,A,B,F),B.zoomEnable=!0),U=null},1e3/60))},end:function(x){U&&(clearTimeout(U),U=null),presetNavigationState(x,"pinch",B),B.prevDistance=null}},N={recenterPlot:function(A){A&&A.detail&&"touchstart"===A.detail.type&&function recenterPlotOnDoubleTap(x,A,V,R){if(function checkAxesForDoubleTap(x,A,V){var R=x.getTouchedAxis(A.detail.firstTouch.x,A.detail.firstTouch.y);void 0!==R[0]&&(V.prevTouchedAxis=R[0].direction);void 0!==(R=x.getTouchedAxis(A.detail.secondTouch.x,A.detail.secondTouch.y))[0]&&(V.touchedAxis=R,V.currentTouchedAxis=R[0].direction);noAxisTouched(V)&&(V.touchedAxis=null,V.prevTouchedAxis="none",V.currentTouchedAxis="none")}(x,A,R),"x"===R.currentTouchedAxis&&"x"===R.prevTouchedAxis||"y"===R.currentTouchedAxis&&"y"===R.prevTouchedAxis||"none"===R.currentTouchedAxis&&"none"===R.prevTouchedAxis){var D;x.recenter({axes:R.touchedAxis}),D=R.touchedAxis?new CustomEvent("re-center",{detail:{axisTouched:R.touchedAxis}}):new CustomEvent("re-center",{detail:A}),x.getPlaceholder().dispatchEvent(D)}}(x,A,0,F)}},!0!==A.pan.enableTouch&&!0!==A.zoom.enableTouch||(x.hooks.bindEvents.push((function bindEvents(x,A){var V=x.getOptions();V.zoom.interactive&&V.zoom.enableTouch&&(A.addEventListener("pinchstart",D.start,!1),A.addEventListener("pinchdrag",D.drag,!1),A.addEventListener("pinchend",D.end,!1)),V.pan.interactive&&V.pan.enableTouch&&(A.addEventListener("panstart",R.start,!1),A.addEventListener("pandrag",R.drag,!1),A.addEventListener("panend",R.end,!1)),V.recenter.interactive&&V.recenter.enableTouch&&A.addEventListener("doubletap",N.recenterPlot,!1)})),x.hooks.shutdown.push((function shutdown(x,A){A.removeEventListener("panstart",R.start),A.removeEventListener("pandrag",R.drag),A.removeEventListener("panend",R.end),A.removeEventListener("pinchstart",D.start),A.removeEventListener("pinchdrag",D.drag),A.removeEventListener("pinchend",D.end),A.removeEventListener("doubletap",N.recenterPlot)})));const presetNavigationState=(A,V,R)=>{F.touchedAxis=function getAxis(x,A,V,R){if("pinchstart"!==A.type)return"panstart"===A.type||"pinchend"===A.type?x.getTouchedAxis(A.detail.touches[0].pageX,A.detail.touches[0].pageY):R.touchedAxis;var D=x.getTouchedAxis(A.detail.touches[0].pageX,A.detail.touches[0].pageY),N=x.getTouchedAxis(A.detail.touches[1].pageX,A.detail.touches[1].pageY);if(D.length===N.length&&D.toString()===N.toString())return D}(x,A,0,F),noAxisTouched(F)||F.touchedAxis[0]&&"y"==F.touchedAxis[0].direction?F.navigationConstraint="unconstrained":F.navigationConstraint="axisConstrained"}}function noAxisTouched(x){return!x.touchedAxis||0===x.touchedAxis.length}function updateData(x,A,V,R){var D,N=getPoint(x,A);switch(R.navigationConstraint){case"unconstrained":R.touchedAxis=null,V.prevTapPosition={x:V.prevPanPosition.x,y:V.prevPanPosition.y},V.prevPanPosition={x:N.x,y:N.y};break;case"axisConstrained":D=R.touchedAxis[0].direction,R.currentTouchedAxis=D,V.prevTapPosition[D]=V.prevPanPosition[D],V.prevPanPosition[D]=N[D]}}function pinchDistance(x){var A=x.detail.touches[0],V=x.detail.touches[1];return function distance(x,A,V,R){return Math.sqrt((x-V)*(x-V)+(A-R)*(A-R))}(A.pageX,A.pageY,V.pageX,V.pageY)}function updatePrevPanPosition(x,A,V,R){var D=getPoint(x,A);switch(R.navigationConstraint){case"unconstrained":V.prevPanPosition.x=D.x,V.prevPanPosition.y=D.y;break;case"axisConstrained":V.prevPanPosition[R.currentTouchedAxis]=D[R.currentTouchedAxis]}}function delta(x,A,V){var R=getPoint(x,A);return{x:R.x-V.prevPanPosition.x,y:R.y-V.prevPanPosition.y}}function getPoint(x,A){return"pinch"===A?{x:(x.detail.touches[0].pageX+x.detail.touches[1].pageX)/2,y:(x.detail.touches[0].pageY+x.detail.touches[1].pageY)/2}:{x:x.detail.touches[0].pageX,y:x.detail.touches[0].pageY}}A.init=function init(x){x.hooks.processOptions.push(initTouchNavigation)}}(A.navigateTouch2||(A.navigateTouch2={}))}(A.TrendHelper||(A.TrendHelper={}))}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),VisiWin.UI.TrendHelper.PlotPlugIns.push({init:VisiWin.UI.TrendHelper.navigateTouch2.init,options:VisiWin.UI.TrendHelper.navigateTouch2.options,name:"touchNavigate",version:"0.3"}),function(x){!function(A){!function(A){!function(A){A.options={loadingOverlay:{show:!0,backgroundColor:"",foregroundColor:"",loadingSpinner:""}},A.show=function show(A){!function _initLoadingSymbol(A){const V=A.getOptions().loadingOverlay;if(!V.show)return;if(0===A.width()||0===A.height())return;let R=A.getPlaceholder().querySelector(".loadingOverlay");if(!R&&!0===V.show){let D=null;if(V.foregroundColor)if("@"===V.foregroundColor.substring(0,1)){let A={themeChangeProperties:{},appService:{aktTheme:x.AppServices.AppService.aktTheme}};D=x.UI.Internal.___t(A,V.foregroundColor,"foregroundColor")}else D=V.backgroundColor;let N=null;if(V.backgroundColor)if("@"===V.backgroundColor.substring(0,1)){let A={themeChangeProperties:{},appService:{aktTheme:x.AppServices.AppService.aktTheme}};N=x.UI.Internal.___t(A,V.backgroundColor,"background")}else N=V.backgroundColor;let U=A.getEventHolder().width+"px",B=A.getEventHolder().height+"px",F=.5*A.getEventHolder().height,W=`\n                    <div data-win-control="VisiWin.UI.FlexLayout" data-win-options='{"backgroundColor":"${N}","width":"100%","height":"${B}","minHeight":"${B}","justifyContent":"Center","alignItems":"Center"}'>\n                        <div data-win-control="VisiWin.UI.LoadingSpinner" data-win-options='{"width":"100%","height":"100%","spinnerHeight":"${F}px","spinnerWidth":"${F}px","loadingSpinner":"${V.loadingSpinner}","spinnerForegroundColor":"${D}"}'></div>\n                    </div>`,H=document.createElement("div");H.style.width=U,H.style.height=B,H.className="loadingOverlay",H.innerHTML=W,A.getPlaceholder().appendChild(H),x.UI.processAll(H),R=H,H.style.display="none",H.style.transition="opacity 0.5s ease-in-out",H.style.opacity="0"}}(A);let V=A.getPlaceholder().querySelector(".loadingOverlay");V&&(!function _resizeLoadingSymbol(x,A){let V=x.getEventHolder().width+"px",R=x.getEventHolder().height+"px",D=.5*x.getEventHolder().height;A.style.whiteSpace="normal",A.style.width=V,A.style.height=R,A.children[0]&&A.children[0].winControl&&"FlexLayout"===A.children[0].winControl.__VWCONTROL__&&(A.children[0].winControl.height=R,A.children[0].winControl.minHeight=R,A.children[0].winControl.width=V,A.children[0].winControl.minWidth=V,A.children[0].children[0]&&A.children[0].children[0].winControl&&(A.children[0].children[0].winControl.width=R,A.children[0].children[0].winControl.height=R,A.children[0].children[0].winControl.spinnerHeight=D+"px",A.children[0].children[0].winControl.spinnerWidth=D+"px",A.children[0].children[0].winControl.minHeight=R,A.children[0].children[0].winControl.minWidth=R))}(A,V),V.style.display="block",V.style.opacity="1")},A.hide=function hide(x){let A=x.getPlaceholder().querySelector(".loadingOverlay");A&&(A.style.opacity="0",setTimeout(()=>{A.style.display="none"},500))},A.init=function init(x){}}(A.loadingOverlay||(A.loadingOverlay={}))}(A.TrendHelper||(A.TrendHelper={}))}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),VisiWin.UI.TrendHelper.PlotPlugIns.push({init:VisiWin.UI.TrendHelper.loadingOverlay.init,show:VisiWin.UI.TrendHelper.loadingOverlay.show,hide:VisiWin.UI.TrendHelper.loadingOverlay.hide,options:VisiWin.UI.TrendHelper.loadingOverlay.options,name:"loadingOverlay",version:"1.0"}),function(x){!function(A){"use strict";class List extends x.UI.ControlBase{constructor(A,V){super(A,V),this.properties={designerType:{propertyType:"base",defaultValue:"Control"},dataSource:{},template:{},selectedIndex:{type:"number",defaultValue:-1},selectedValue:{},selectionMode:{defaultValue:"Single"},selectedIndexChanged:{propertyType:"event"},backgroundColor:{propertyType:"memberStyle",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},borderColor:{propertyType:"memberStyle",type:"string",resourceValue:["getTheme"],defaultValue:"@None"}},this.cssStyles={css:"\n            .vw-list {\n                position: relative;\n                width:  200px;\n                height: 300px;                \n                overflow-y: auto;\n            }\n        "},this._inlineItems=!1,this._itemsLoaded=!1,this._isInDesignMode=x.Utilities.isInDesignMode(),this._boundItemsLoaded=this._onItemsLoaded.bind(this),this.observe={"_itemsContainer.selectedIndex":x=>{this.selectedIndex=this._itemsContainer.selectedIndex,this.selectedValue=this._itemsContainer.selectedValue;let A={oldIndex:x.oldValue,selectedIndex:this._itemsContainer.selectedIndex,selectedValue:this._itemsContainer.selectedValue,selectedListItem:this._itemsContainer.selectedItem};this.dispatchEvent("selectedIndexChanged",A)}};this.initialize(List,{namespace:"VisiWin.UI"})}createTemplate(){let x=null;return this.element.children.length>0&&this._isInDesignMode?(this._inlineItems=!0,null):(this.element.children.length>0&&(x=document.createElement("div"),this.reparentChildren(this.element,x),this._inlineItems=!0),this.element.innerHTML='\n                    <div data-ref="_itemsContainer" data-win-control="VisiWin.UI.ItemsContainer"></div>\n                ',this._inlineItems&&this.reparentChildren(x,this.element.firstElementChild),this.initializeChilds())}createHandler(){this._itemsContainer&&this._itemsContainer.addEventListener("itemsLoaded",this._boundItemsLoaded)}removeHandler(){this._itemsContainer&&this._itemsContainer.removeEventListener("itemsLoaded",this._boundItemsLoaded)}_onItemsLoaded(){this._itemsLoaded=!0,this._updateLayoutBase("event","itemsLoaded",null,null)}_updateLayout(A){if("itemsLoaded"!=A.changeName&&"selectedIndex"!=A.changeName||this._itemsContainer&&this._itemsLoaded&&"None"!=this.selectionMode&&(this._itemsContainer.selectedIndex=this.selectedIndex),("initialized"==A.changeName||"selectedIndex"==A.changeName)&&this._inlineItems&&this._isInDesignMode&&"Single"===this.selectionMode)for(let x=0;x<this.element.children.length;x++)this.element.children[x].winControl.selectionMode=this.selectionMode,x==A.oldValue&&(this.element.children[x].winControl.checked=!1),x==this.selectedIndex&&(this.element.children[x].winControl.checked=!0,this.selectedValue=this.element.children[x].winControl.value);if("itemsLoaded"!=A.changeName&&"selectedValue"!=A.changeName||this._itemsContainer&&this._itemsLoaded&&"None"!=this.selectionMode&&(this._itemsContainer.selectedValue=this.selectedValue),"firstUpdate"!=A.changeName&&"selectionMode"!=A.changeName||this._itemsContainer&&(this._itemsContainer.selectionMode=this.selectionMode),("initialized"==A.changeName||"selectionMode"==A.changeName)&&this._isInDesignMode&&this._inlineItems)for(let x=0;x<this.element.children.length;x++)this.element.children[x].winControl.selectionMode=this.selectionMode;"firstUpdate"!=A.changeName&&"dataSource"!=A.changeName||this.dataSource&&!this._inlineItems&&(this._itemsContainer.dataSource=x.DataSources[this.dataSource]),"firstUpdate"!=A.changeName&&"template"!=A.changeName||this.template&&!this._inlineItems&&(this._itemsContainer.template=this.template)}getListItemFromIndex(x){if(this._itemsContainer)return this._itemsContainer.itemFromIndex(x)}}A.List=List}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class MenuItem extends x.UI.ButtonBase{constructor(A,V){super(A,V),this._containerElement=null,this._symbolElement=null,this._textElement=null,this.inputEventsEnable=!0,this.addPropertyList(MenuItem,MenuItem.propertyList),this.defaultConstructor(A,this.inlineOptions,x.UI.MenuItem.controlName,x.UI.MenuItem.className)}createTemplate(){if(x.Utilities.isInDesignMode())return this.element.innerHTML=['<div class="vw-menuitem__container">','<div class="vw-menuitem__symbol" data-win-control="VisiWin.UI.Symbol"></div>','<div class="vw-menuitem__text" data-win-control="VisiWin.UI.TextBlock"></div>',"</div>"].join("\n"),this._containerElement=this.element.firstElementChild,this._symbolElement=this._containerElement.firstElementChild,this._textElement=this._symbolElement.nextElementSibling,this.processElements([this._symbolElement,this._textElement]);var A=null!=this.inlineOptions.showSymbol?this.inlineOptions.showSymbol:this.getStyleProperty("showSymbol")?this.getStyleProperty("showSymbol"):x.UI.MenuItem.propertyList.showSymbol.defaultValue,V=null!=this.inlineOptions.showText?this.inlineOptions.showText:this.getStyleProperty("showText")?this.getStyleProperty("showText"):x.UI.MenuItem.propertyList.showText.defaultValue,R='<div class="vw-menuitem__container">';return A&&(R+='<div class="vw-menuitem__symbol" data-win-control="VisiWin.UI.Symbol"></div>'),V&&(R+='<div class="vw-menuitem__text" data-win-control="VisiWin.UI.TextBlock"></div>'),R+="</div>",this.element.innerHTML=R,this._containerElement=this.element.firstElementChild,A?(this._symbolElement=this._containerElement.firstElementChild,V&&(this._textElement=this._symbolElement.nextElementSibling)):V&&(this._textElement=this._containerElement.firstElementChild),this.processElements([this._symbolElement,this._textElement])}_updateColors(x){this.disabled?(this._textElement&&this._textElement.winControl&&this.setColor("disabledForegroundColor","foregroundColor",null,"_textElement"),this._symbolElement&&this._symbolElement.winControl&&this.setColor("disabledForegroundColor","foregroundColor",null,"_symbolElement"),this.setColor("disabledBackgroundColor","backgroundColor"),this.setColor("disabledBorderColor","borderColor"),this._containerElement.style.backgroundColor=""):this.checked?(this._textElement&&this._textElement.winControl&&this.setColor("checkedForegroundColor","foregroundColor",null,"_textElement"),this._symbolElement&&this._symbolElement.winControl&&this.setColor("checkedForegroundColor","foregroundColor",null,"_symbolElement"),this.setColor("checkedBackgroundColor","backgroundColor"),this.pressed?(this._textElement&&this._textElement.winControl&&this.setColor("checkedPressedForegroundColor","foregroundColor",null,"_textElement"),this._symbolElement&&this._symbolElement.winControl&&this.setColor("checkedPressedForegroundColor","foregroundColor",null,"_symbolElement"),this.setColor("checkedPressedBackgroundColor","backgroundColor","_containerElement")):this.hover?(this.setColor("checkedHoverBorderColor","borderColor"),this.setColor("checkedHoverBackgroundColor","backgroundColor","_containerElement"),this.setColor("checkedHoverForegroundColor","foregroundColor","_textElement")):(this.setColor("checkedBorderColor","borderColor"),this._containerElement.style.backgroundColor="",this.setColor("checkedForegroundColor","foregroundColor","_textElement"))):(this._textElement&&this._textElement.winControl&&this.setColor("foregroundColor","foregroundColor",null,"_textElement"),this._symbolElement&&this._symbolElement.winControl&&this.setColor("foregroundColor","foregroundColor",null,"_symbolElement"),this.setColor("backgroundColor"),this.pressed?(this._textElement&&this._textElement.winControl&&this.setColor("pressedForegroundColor","foregroundColor",null,"_textElement"),this._symbolElement&&this._symbolElement.winControl&&this.setColor("pressedForegroundColor","foregroundColor",null,"_symbolElement"),this.setColor("pressedBackgroundColor","backgroundColor","_containerElement")):this.hover?(this.setColor("hoverBorderColor","borderColor"),this.setColor("hoverBackgroundColor","backgroundColor","_containerElement"),this.setColor("hoverForegroundColor","foregroundColor","_textElement")):(this.setColor("borderColor","borderColor"),this._containerElement.style.backgroundColor="",this.setColor("foregroundColor","foregroundColor","_textElement")))}_updateLayout(x){if("updateLayout"==x.changeName||"showSymbol"==x.changeName||"showText"==x.changeName||"symbolPosition"==x.changeName||"textPosition"==x.changeName)if(!this.showSymbol&&this.showText)this._containerElement.style.flexDirection="row",this._containerElement.style.alignItems="Top"==this.textPosition?"flex-start":"Bottom"==this.textPosition?"flex-end":"center",this._containerElement.style.justifyContent="Left"==this.textPosition?"flex-start":"Right"==this.textPosition?"flex-end":"center";else if(this.showSymbol&&!this.showText)this._containerElement.style.flexDirection="row",this._containerElement.style.alignItems="Top"==this.symbolPosition?"flex-start":"Bottom"==this.symbolPosition?"flex-end":"center",this._containerElement.style.justifyContent="Left"==this.symbolPosition?"flex-start":"Right"==this.symbolPosition?"flex-end":"center";else if(this.showSymbol&&this.showText)switch(this._containerElement.style.flexDirection="Left"==this.symbolPosition?"row":"Top"==this.symbolPosition?"column":"Right"==this.symbolPosition?"row-reverse":"Bottom"==this.symbolPosition?"column-reverse":"row",this.textPosition){case"Left":this._containerElement.style.alignItems="Left"==this.symbolPosition||"Right"==this.symbolPosition||"Center"==this.symbolPosition?("Left"==this.symbolPosition||this.symbolPosition,"center"):(this.symbolPosition,"flex-start"),this._containerElement.style.justifyContent="Left"==this.symbolPosition||"Right"==this.symbolPosition||"Center"==this.symbolPosition?"Left"==this.symbolPosition||"Center"==this.symbolPosition?"flex-start":"flex-end":(this.symbolPosition,"center");break;case"Top":this._containerElement.style.alignItems="Left"==this.symbolPosition||"Right"==this.symbolPosition||"Center"==this.symbolPosition?("Left"==this.symbolPosition||this.symbolPosition,"flex-start"):(this.symbolPosition,"center"),this._containerElement.style.justifyContent="Left"==this.symbolPosition||"Right"==this.symbolPosition||"Center"==this.symbolPosition?("Left"==this.symbolPosition||this.symbolPosition,"center"):"Top"==this.symbolPosition?"flex-start":"flex-end";break;case"Right":this._containerElement.style.alignItems="Left"==this.symbolPosition||"Right"==this.symbolPosition||"Center"==this.symbolPosition?("Left"==this.symbolPosition||this.symbolPosition,"center"):(this.symbolPosition,"flex-end"),this._containerElement.style.justifyContent="Left"==this.symbolPosition||"Right"==this.symbolPosition||"Center"==this.symbolPosition?"Left"==this.symbolPosition||"Center"==this.symbolPosition?"flex-end":"flex-start":(this.symbolPosition,"center");break;case"Bottom":this._containerElement.style.alignItems="Left"==this.symbolPosition||"Right"==this.symbolPosition||"Center"==this.symbolPosition?("Left"==this.symbolPosition||this.symbolPosition,"flex-end"):(this.symbolPosition,"center"),this._containerElement.style.justifyContent="Left"==this.symbolPosition||"Right"==this.symbolPosition||"Center"==this.symbolPosition?("Left"==this.symbolPosition||this.symbolPosition,"center"):"Top"==this.symbolPosition?"flex-end":"flex-start";break;default:this._containerElement.style.alignItems="center",this._containerElement.style.justifyContent="center"}}dispose(){return super.dispose()}}MenuItem.namespace="VisiWin.UI",MenuItem.controlName="MenuItem",MenuItem.className="vw-menuitem",MenuItem.propertyList={designerType:{propertyType:"base",type:"string",defaultValue_DM:"Control"},registerSourceId:{propertyType:"base",type:"string",defaultValue:"Group"},toggle:{propertyType:"base",defaultValue:!0},radio:{propertyType:"base",defaultValue:!0},padding:{propertyType:"style",type:"string",element:"_containerElement",forceOverwrite:!0},transition:{propertyType:"style",type:"string"},containerBorderWidth:{propertyType:"style",type:"string",element:"_containerElement",style:"borderWidth"},containerBorderStyle:{propertyType:"style",type:"string",element:"_containerElement",style:"borderStyle"},containerBorderRadius:{propertyType:"style",type:"string",element:"_containerElement",style:"borderRadius"},containerTransition:{propertyType:"style",type:"string",element:"_containerElement",style:"transition"},showSymbol:{propertyType:"child",type:"boolean",child:"_symbolElement",childProperty:"show",defaultValue:!1},iconFont:{propertyType:"child",type:"string",child:"_symbolElement"},symbol:{propertyType:"child",type:"string",child:"_symbolElement"},symbolType:{propertyType:"child",type:"string",child:"_symbolElement"},symbolSize:{propertyType:"child",type:"string",child:"_symbolElement"},symbolMargin:{propertyType:"child",type:"string",child:"_symbolElement",childProperty:"margin"},symbolPosition:{propertyType:"member",type:"string",defaultValue:"Center"},showText:{propertyType:"child",type:"boolean",child:"_textElement",childProperty:"show",defaultValue:!0},textWidth:{propertyType:"child",type:"string",child:"_textElement",childProperty:"width"},textHeight:{propertyType:"child",type:"string",child:"_textElement",childProperty:"height"},textMargin:{propertyType:"child",type:"string",child:"_textElement",childProperty:"margin"},textPadding:{propertyType:"child",type:"string",child:"_textElement",childProperty:"padding"},text:{propertyType:"child",type:"string",child:"_textElement",forceOverwrite:!0,defaultValue:"MenuItem"},localizableText:{propertyType:"child",type:"string",child:"_textElement",forceOverwrite:!0},textAlignment:{propertyType:"child",type:"string",child:"_textElement"},lineClamp:{propertyType:"child",type:"number",child:"_textElement"},textWrapping:{propertyType:"child",type:"string",child:"_textElement"},textTrimming:{propertyType:"child",type:"string",child:"_textElement"},fontClass:{propertyType:"child",type:"string",child:"_textElement",forceOverwrite:!0},fontSize:{propertyType:"child",type:"string",child:"_textElement",forceOverwrite:!0},fontWeight:{propertyType:"child",type:"string",child:"_textElement",forceOverwrite:!0},lineHeight:{propertyType:"child",type:"string",child:"_textElement",forceOverwrite:!0},textContrast:{propertyType:"child",type:"number",child:"_textElement"},uppercase:{propertyType:"child",type:"boolean",child:"_textElement"},textPosition:{propertyType:"member",type:"string",defaultValue:"Left"},backgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BackgroundColor"},hoverBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@HoverBackgroundColor"},pressedBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@PressedBackgroundColor"},checkedBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@CheckedBackgroundColor"},checkedHoverBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@CheckedHoverBackgroundColor"},checkedPressedBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@CheckedPressedBackgroundColor"},disabledBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledBackgroundColor"},foregroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},hoverForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},pressedForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},checkedForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@AltForegroundColor"},checkedHoverForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},checkedPressedForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@AltForegroundColor"},disabledForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledForegroundColor"},borderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"},hoverBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@HoverBorderColor"},checkedBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@CheckedBorderColor"},checkedHoverBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@CheckedHoverBorderColor"},disabledBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledBorderColor"}},A.MenuItem=MenuItem}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class ColorIndicator extends x.UI.VariableBase{constructor(A,V){super(A,V),this.limitsCollection=[],this.boundLimitsChangedHandler=this._limitsChangedHandler.bind(this),this._backgroundColor=null,this._disabledBackgroundColor=null,this.inlineOptions.debug,this.inputEventsEnable=!1,this.addPropertyList(ColorIndicator,ColorIndicator.ColorIndicatorPropertyList),this.defaultConstructor(A,this.inlineOptions,x.UI.ColorIndicator.controlName,x.UI.ColorIndicator.classColorIndicator)}registerChild(x,A,V,R){return A!==this.registerTargetId||(V&&V.winControl&&(V.style.display="none",this.limitsCollection.push(V.winControl),V.winControl.addEventListener("notifyPropertyChanged",this.boundLimitsChangedHandler)),!1)}ready(){"Control"==this.designerType&&this._limitsChangedHandler(null)}get backgroundColor(){return this._backgroundColor}set backgroundColor(x){if(this._backgroundColor!=x){var A=this._backgroundColor;this._backgroundColor=x,this._updateLayoutBase("property","backgroundColor",x,A),this.dispatchNotifyPropertyChanged("property","backgroundColor",x,A)}}get disabledBackgroundColor(){return this._disabledBackgroundColor}set disabledBackgroundColor(x){if(this._disabledBackgroundColor!=x){var A=this._disabledBackgroundColor;this._disabledBackgroundColor=x,this._updateLayoutBase("property","disabledBackgroundColor",x,A),this.dispatchNotifyPropertyChanged("property","disabledBackgroundColor",x,A)}}_limitsChangedHandler(x){this._updateLayoutBase("property","limitsCollection",null,null),this.dispatchNotifyPropertyChanged("property","limitsCollection",null,null)}_updateColors(x){this.disabled?this.element.style.borderColor=this.getColor("disabledBorderColor"):this.element.style.borderColor=this.getColor("borderColor")}_updateLayout(A){if(this.disabled)this.element.style.backgroundColor=this.getColor("disabledBackgroundColor");else if(this.element.style.backgroundColor=this.getColor("backgroundColor"),this.limitsCollection&&this.limitsCollection.length>0)if(null!=this.bitNumber){if(this.bitNumber>=0&&null!=this.bitValue)for(var V=0;V<this.limitsCollection.length;V++)null!=this.limitsCollection[V].value&&null!=this.limitsCollection[V].fillColor&&(!0!==this.bitValue||!0!==this.limitsCollection[V].value&&"true"!==this.limitsCollection[V].value||(this.element.style.backgroundColor=this.getThemeColor(this.limitsCollection[V].fillColor)),!1!==this.bitValue||!1!==this.limitsCollection[V].value&&"false"!==this.limitsCollection[V].value||(this.element.style.backgroundColor=this.getThemeColor(this.limitsCollection[V].fillColor)))}else for(V=0;V<this.limitsCollection.length;V++)null!=this.limitsCollection[V].fillColor&&(null!=this.limitsCollection[V].value&&this.validateValue(this.limitsCollection[V].value+"")&&(this.element.style.backgroundColor=this.getThemeColor(this.limitsCollection[V].fillColor)),null!=this.limitsCollection[V].startValue&&null!=this.limitsCollection[V].endValue&&this.validateValue(this.limitsCollection[V].startValue+".."+this.limitsCollection[V].endValue)&&(this.element.style.backgroundColor=this.getThemeColor(this.limitsCollection[V].fillColor)));else if(void 0!==A.newValue&&null!=A.newValue&&this.colorStateCollection){let V=`@StateCollection(${this.colorStateCollection}, ${A.newValue})`;x.Utilities.parseProperty(V).then(function(x){this.element.style.backgroundColor=x}.bind(this),function(x){this.element.style.backgroundColor=x}.bind(this))}}dispose(){if(this.limitsCollection&&this.limitsCollection.length>0)for(var x=0;x<this.limitsCollection.length;x++)this.limitsCollection[x].removeEventListener("notifyPropertyChanged",this.boundLimitsChangedHandler);return this.limitsCollection=[],super.dispose()}}ColorIndicator.namespace="VisiWin.UI",ColorIndicator.controlName="ColorIndicator",ColorIndicator.classColorIndicator="vw-colorindicator",ColorIndicator.ColorIndicatorPropertyList={designerType:{propertyType:"base",type:"string",defaultValue:"Control"},registerTargetId:{propertyType:"base",defaultValue:"ColorIndicatorLimit"},limits:{propertyType:"member",type:"string"},colorStateCollection:{propertyType:"member",type:"string"},backgroundColor:{propertyType:"custom",type:"string",resourceValue:["getTheme"],defaultValue:"@ChromeMediumHigh"},disabledBackgroundColor:{propertyType:"custom",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledBackgroundColor"},borderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"},disabledBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledBorderColor"}},A.ColorIndicator=ColorIndicator}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class ColorIndicatorLimit extends x.UI.ProviderBase{constructor(A,V){super(A,V),this.addPropertyList(ColorIndicatorLimit,ColorIndicatorLimit.propertyList),this.defaultConstructor(A,this.inlineOptions,x.UI.ColorIndicatorLimit.controlName,null)}dispose(){return super.dispose()}}ColorIndicatorLimit.namespace="VisiWin.UI",ColorIndicatorLimit.controlName="ColorIndicatorLimit ",ColorIndicatorLimit.propertyList={designerType:{propertyType:"base",type:"string",defaultValue_DM:"Control"},registerSourceId:{propertyType:"base",type:"string",defaultValue:"ColorIndicatorLimit"},value:{propertyType:"member",type:"string"},fillColor:{propertyType:"member",type:"string"}},A.ColorIndicatorLimit=ColorIndicatorLimit}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class BarCore extends x.UI.VariableBase{constructor(x,A){super(x,A),this.properties={designerType:{propertyType:"base",defaultValue:"Control"},registerTargetId:{propertyType:"base",defaultValue:"BarLimit"},barIndicatorChanged:{propertyType:"event"},rawLimitMin:{defaultValue:0,type:"number"},rawLimitMax:{defaultValue:100,type:"number"},limits:{type:"any"},direction:{defaultValue:"Up"},rawReferenceValue:{defaultValue:0,type:"number"},backgroundColor:{defaultValue:"@ChromeMedium"},borderColor:{defaultValue:"@None"},disabledBackgroundColor:{defaultValue:"@None"},disabledBorderColor:{defaultValue:"@None"},indicatorColor:{defaultValue:"@PrimaryLightColor"},disabledIndicatorColor:{defaultValue:"@None"}},this.cssStyles={coreStyle:!0,css:"\n            .vw-barcore {\n                position: relative;\n                width: 100px;\n                height: 150px;\n            }\n            .vw-barcore__indicator {\n                position: relative;\n                width: 100%;\n                height: 100%;\n            }\n        "},this._limitsCollection=[],this.initialize(BarCore)}createTemplate(){let x=document.createElement("div");return this.reparentChildren(this.element,x),this.element.innerHTML='<div class="vw-barcore__indicator"></div>',this._indicatorElement=this.element.firstElementChild,this.reparentChildren(x,this.element),null}createHandler(){new ResizeObserver(x=>{x?(this._clientWidth=x[0].contentRect.width,this._clientHeight=x[0].contentRect.height):(this._clientWidth=this.element.clientWidth,this._clientHeight=this.element.clientHeight),this._drawBar()}).observe(this._indicatorElement)}registerChild(x,A,V,R){return A===this.registerTargetId&&V&&V.winControl&&(this._limitsCollection.push(V.winControl),this.isInDesignMode?(V.style.display="none",V.winControl.addEventListener("notifyPropertyChanged",this._limitsChangedHandler.bind(this))):V.remove()),!1}_updateColors(x){"property"!=x.changeType&&"status"!=x.changeType&&"firstUpdate"!=x.changeName||(this.disabled?(this.setColor("disabledBackgroundColor","backgroundColor"),this.setColor("disabledBorderColor","borderColor")):(this.setColor("backgroundColor","backgroundColor"),this.setColor("borderColor","borderColor"))),"property"!=x.changeType&&"status"!=x.changeType||this._drawBar()}_updateLayout(x){"value"!==x.changeName&&"rawValue"!==x.changeName&&"limits"!==x.changeName&&"rawLimitMin"!==x.changeName&&"rawLimitMax"!==x.changeName&&"rawReferenceValue"!==x.changeName&&"direction"!==x.changeName||this._drawBar(),"initialized"!=x.changeName&&"value"!=x.changeName||this.isInDesignMode&&"Control"===this.designerType&&null==this.value&&(this.value=40),"initialized"==x.changeName&&"Control"===this.designerType&&this._limitsChangedHandler(null)}_drawBar(){let x=this._clientWidth,A=this._clientHeight;if(!x||!A)return;let V=0,R=0,D=this.useRawValue?this.rawValue:this.value,N=this.useRawValue?this.rawReferenceValue:this.rawValue2value(this.rawReferenceValue),U=this.useVariableLimits&&this.varRawLimitMin?this.useRawValue?this.varRawLimitMin:this.rawValue2value(this.varRawLimitMin):this.useRawValue?this.rawLimitMin:this.rawValue2value(this.rawLimitMin),B=this.useVariableLimits&&this.varRawLimitMax?this.useRawValue?this.varRawLimitMax:this.rawValue2value(this.varRawLimitMax):this.useRawValue?this.rawLimitMax:this.rawValue2value(this.rawLimitMax),F="Left"==this.direction||"Right"==this.direction?x:A,W=F/(B-U);D<U&&(D=U),D>B&&(D=B),N<U&&(N=U),N>B&&(N=B);let H=W*((D-U-(N-U))/F),z=W*(N-U),G=this.getColor("indicatorColor"),j=this.getColor("disabledIndicatorColor");if(null!=this.limits&&this.limits.length>0)for(var q=0;q<this.limits.length;q++){var Q=parseFloat(this.limits[q].startValue),K=parseFloat(this.limits[q].endValue),J=this.limits[q].fillColor;if(!isNaN(Q)&&!isNaN(K)&&Q<K&&null!=J&&D>=Q&&D<=K){G=J;break}}switch(this.disabled?this._indicatorElement.style.backgroundColor=this.getThemeColor(j):this._indicatorElement.style.backgroundColor=this.getThemeColor(G),this.direction){case"Left":this._indicatorElement.style.transformOrigin=this._indicatorElement.style.webkitTransformOrigin="right",this._indicatorElement.style.transform=this._indicatorElement.style.webkitTransform=" translateX("+-z+"px) scaleX("+H+")",V=x-(z+W*(D-U-(N-U)));break;case"Right":this._indicatorElement.style.transformOrigin=this._indicatorElement.style.webkitTransformOrigin="left",this._indicatorElement.style.transform=this._indicatorElement.style.webkitTransform=" translateX("+z+"px) scaleX("+H+")",V=z+W*(D-U-(N-U));break;case"Down":this._indicatorElement.style.transformOrigin=this._indicatorElement.style.webkitTransformOrigin="top",this._indicatorElement.style.transform=this._indicatorElement.style.webkitTransform=" translateY("+z+"px) scaleY("+H+")",R=z+W*(D-U-(N-U));break;case"Up":this._indicatorElement.style.transformOrigin=this._indicatorElement.style.webkitTransformOrigin="bottom",this._indicatorElement.style.transform=this._indicatorElement.style.webkitTransform=" translateY("+-z+"px) scaleY("+H+")",R=A-(z+W*(D-U-(N-U)))}D=this.useRawValue?this.rawValue:this.value;let X={posX:V,posY:R,value:D};this.dispatchEvent("barIndicatorChanged",X)}_limitsChangedHandler(x){if(this._limitsCollection&&this._limitsCollection.length>0){let x=[];for(var A=0;A<this._limitsCollection.length;A++){let V=this._limitsCollection[A];x.push({startValue:V.startValue,endValue:V.endValue,fillColor:V.fillColor})}this.limits=x}else this.limits=[]}}A.BarCore=BarCore}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class Bar extends x.UI.VariableBase{constructor(x,A){super(x,A),this.properties={designerType:{propertyType:"base",defaultValue:"Control"},registerTargetId:{propertyType:"base",defaultValue:"BarLimit"},barIndicatorChanged:{propertyType:"event",group:"Event"},value:{propertyType:"base",type:"number"},useRawValue:{type:"boolean",defaultValue:!1},decimalPlaces:{propertyType:"child",type:"number",child:"_valueLabelControl",defaultValue:0},rawLimitMin:{type:"number",defaultValue:0},rawLimitMax:{type:"number",defaultValue:100},useVariableLimits:{type:"boolean",defaultValue:!1},limits:{type:"any"},rawReferenceValue:{type:"number",defaultValue:0},alignItems:{defaultValue:"Center"},justifyContent:{defaultValue:"Center"},direction:{defaultValue:"Up"},barWidth:{propertyType:"style",element:"_containerElement",style:"width"},barHeight:{propertyType:"style",element:"_containerElement",style:"height"},barMargin:{propertyType:"style",element:"_containerElement",style:"margin"},barPadding:{propertyType:"style",element:"_containerElement",style:"padding"},showRanges:{type:"boolean",defaultValue:!0},showAllRanges:{propertyType:"controlChild",type:"boolean",child:"_rangeControl",defaultValue:!1},showScale:{type:"boolean",defaultValue:!0},showScaleBaseLine:{propertyType:"controlChild",child:"_scaleControl",childProperty:"showBaseLine",type:"boolean"},scaleWidth:{propertyType:"controlChild",child:"_scaleControl",childProperty:"width"},scaleHeight:{propertyType:"controlChild",child:"_scaleControl",childProperty:"height"},scaleMargin:{propertyType:"controlChild",child:"_scaleControl",childProperty:"margin"},scalePadding:{propertyType:"controlChild",child:"_scaleControl",childProperty:"padding"},scaleMode:{propertyType:"controlChild",child:"_scaleControl",childProperty:"mode"},scaleLimitsVisibility:{propertyType:"controlChild",child:"_scaleControl",childProperty:"limitsVisibility"},scalePosition:{defaultValue:"Left"},scalePlacement:{defaultValue:"Outside"},showMajorTicks:{propertyType:"controlChild",type:"boolean",child:"_scaleControl"},majorStepSize:{propertyType:"controlChild",type:"number",child:"_scaleControl"},majorSteps:{propertyType:"controlChild",type:"number",child:"_scaleControl"},majorTicksLength:{propertyType:"controlChild",type:"number",child:"_scaleControl"},majorTicksWidth:{propertyType:"controlChild",type:"number",child:"_scaleControl"},showMiddleTicks:{propertyType:"controlChild",type:"boolean",child:"_scaleControl"},middleStepSize:{propertyType:"controlChild",type:"number",child:"_scaleControl"},middleSteps:{propertyType:"controlChild",type:"number",child:"_scaleControl"},middleTicksLength:{propertyType:"controlChild",type:"number",child:"_scaleControl"},middleTicksWidth:{propertyType:"controlChild",type:"number",child:"_scaleControl"},showMinorTicks:{propertyType:"controlChild",type:"boolean",child:"_scaleControl"},minorStepSize:{propertyType:"controlChild",type:"number",child:"_scaleControl"},minorSteps:{propertyType:"controlChild",type:"number",child:"_scaleControl"},minorTicksLength:{propertyType:"controlChild",type:"number",child:"_scaleControl"},minorTicksWidth:{propertyType:"controlChild",type:"number",child:"_scaleControl"},showMajorLabels:{propertyType:"controlChild",type:"boolean",child:"_scaleControl"},majorLabelsFontClass:{propertyType:"controlChild",type:"string",child:"_scaleControl"},majorLabelsFontSize:{propertyType:"controlChild",type:"string",child:"_scaleControl"},majorLabelsFontWeight:{propertyType:"controlChild",type:"string",child:"_scaleControl"},majorLabelsLineHeight:{propertyType:"controlChild",type:"string",child:"_scaleControl"},majorLabelsTextContrast:{propertyType:"controlChild",type:"number",child:"_scaleControl"},majorLabelsOffset:{propertyType:"controlChild",type:"number",child:"_scaleControl"},majorLabelsDecimalPlaces:{propertyType:"controlChild",type:"number",child:"_scaleControl"},showValueLabel:{type:"boolean",defaultValue:!0},valueLabelBorderWidth:{propertyType:"controlChild",child:"_valueLabelControl",childProperty:"borderWidth"},valueLabelBorderStyle:{propertyType:"controlChild",child:"_valueLabelControl",childProperty:"borderStyle"},valueLabelBorderRadius:{propertyType:"controlChild",child:"_valueLabelControl",childProperty:"borderRadius"},valueLabelWidth:{propertyType:"controlChild",child:"_valueLabelControl",childProperty:"width",defaultValue:"auto"},valueLabelHeight:{propertyType:"controlChild",child:"_valueLabelControl",childProperty:"height"},valueLabelMargin:{propertyType:"controlChild",child:"_valueLabelControl",childProperty:"margin"},valueLabelPadding:{propertyType:"controlChild",child:"_valueLabelControl",childProperty:"padding"},valueLabelPosition:{defaultValue:"Top"},valueLabelOffset:{type:"number"},showValue:{propertyType:"controlChild",child:"_valueLabelControl",type:"boolean",defaultValue:!0},valueWidth:{propertyType:"controlChild",child:"_valueLabelControl"},valueHeight:{propertyType:"controlChild",child:"_valueLabelControl"},valueMargin:{propertyType:"controlChild",child:"_valueLabelControl"},valuePadding:{propertyType:"controlChild",child:"_valueLabelControl"},valueTextAlignment:{propertyType:"controlChild",child:"_valueLabelControl"},valueLineClamp:{propertyType:"controlChild",child:"_valueLabelControl",type:"number"},valueTextWrapping:{propertyType:"controlChild",child:"_valueLabelControl"},valueTextTrimming:{propertyType:"controlChild",child:"_valueLabelControl"},valueFontClass:{propertyType:"controlChild",child:"_valueLabelControl",defaultValue:"Label1"},valueFontSize:{propertyType:"controlChild",child:"_valueLabelControl"},valueFontWeight:{propertyType:"controlChild",child:"_valueLabelControl"},valueLineHeight:{propertyType:"controlChild",child:"_valueLabelControl"},valueTextContrast:{propertyType:"controlChild",child:"_valueLabelControl",type:"number"},showUnit:{propertyType:"controlChild",child:"_valueLabelControl",type:"boolean",defaultValue:!0},unitWidth:{propertyType:"controlChild",child:"_valueLabelControl"},unitHeight:{propertyType:"controlChild",child:"_valueLabelControl"},unitMargin:{propertyType:"controlChild",child:"_valueLabelControl"},unitPadding:{propertyType:"controlChild",child:"_valueLabelControl"},useVariableUnitText:{propertyType:"controlChild",child:"_valueLabelControl",type:"boolean"},unitText:{propertyType:"controlChild",child:"_valueLabelControl"},localizableUnitText:{propertyType:"controlChild",child:"_valueLabelControl"},unitTextAlignment:{propertyType:"controlChild",child:"_valueLabelControl"},unitLineClamp:{propertyType:"controlChild",child:"_valueLabelControl",type:"number"},unitTextWrapping:{propertyType:"controlChild",child:"_valueLabelControl"},unitTextTrimming:{propertyType:"controlChild",child:"_valueLabelControl"},unitFontClass:{propertyType:"controlChild",child:"_valueLabelControl",defaultValue:"Label1"},unitFontSize:{propertyType:"controlChild",child:"_valueLabelControl"},unitFontWeight:{propertyType:"controlChild",child:"_valueLabelControl"},unitLineHeight:{propertyType:"controlChild",child:"_valueLabelControl"},unitTextContrast:{propertyType:"controlChild",child:"_valueLabelControl",type:"number"},unitPosition:{propertyType:"controlChild",child:"_valueLabelControl"},barBackgroundColor:{defaultValue:"@ChromeMedium"},valueLabelBackgroundColor:{defaultValue:"@None"},rangeBackgroundColor:{defaultValue:"@None"},scaleBackgroundColor:{defaultValue:"@None"},disabledBarBackgroundColor:{defaultValue:"@DisabledBackgroundColor"},disabledValueLabelBackgroundColor:{defaultValue:"@DisabledBackgroundColor"},disabledRangeBackgroundColor:{defaultValue:"@None"},disabledScaleBackgroundColor:{defaultValue:"@None"},valueForegroundColor:{defaultValue:"@ForegroundColor"},unitForegroundColor:{defaultValue:"@ForegroundColor"},scaleForegroundColor:{defaultValue:"@ForegroundColor"},majorTicksColor:{defaultValue:"@ForegroundColor"},middleTicksColor:{defaultValue:"@ForegroundColor"},minorTicksColor:{defaultValue:"@ForegroundColor"},disabledForegroundColor:{defaultValue:"@DisabledForegroundColor"},valueLabelBorderColor:{defaultValue:"@BorderColor"},disabledBorderColor:{defaultValue:"@DisabledBorderColor"},barIndicatorColor:{defaultValue:"@PrimaryColor"},disabledBarIndicatorColor:{defaultValue:"@DisabledForegroundColor"}},this.cssStyles={css:"\n            .vw-bar {\n                position: relative;\n                width: 100px;\n                height: 250px;\n                margin: 8px;\n                border-width: 1px;\n                flex-shrink: 0;\n                display: flex;\n            }\n            .vw-bar__container {\n                position: relative;\n                width: 100%;\n                height: 100%;\n                display: flex;\n            }            \n            .vw-bar__barrangecontainer {\n                position: relative;\n                width: 100%;\n                height: 100%;\n            }\n            .vw-bar__barcore {\n                position: absolute;\n                width: 100%;\n                height: 100%;\n            }\n            .vw-bar__range {\n                position: absolute;\n                width: 100%;\n                height: 100%;;\n            }           \n            .vw-bar__scale {\n                width: 100%;\n                height: 100%;\n                min-height: 0px;\n            }\n            .vw-bar__valuelabel {\n                width: 100%;\n                max-width: 100%;\n                margin:0;\n            }        \n        "},this._containerElement=null,this._scaleControl=null,this._barCoreControl=null,this._rangeControl=null,this._valueLabelControl=null,this._limitsCollection=[],this._valuePresenterUnit=null,this._boundBarIndicatorChangedHandler=this._barIndicatorChangedHandler.bind(this),this.initialize(Bar)}createTemplate(){const x=document.createElement("div");this.reparentChildren(this.element,x);let A='\n                        <div data-ref-element="_containerElement" class="vw-bar__container">\n                            <div data-ref-element="_barRangeContainerElement" class="vw-bar__barrangecontainer">\n                                <div data-ref="_barCoreControl" class="vw-bar__barcore" data-win-control="VisiWin.UI.BarCore"></div>';return this.verifyShowProperty("showRanges")&&(A+='<div data-ref="_rangeControl" class="vw-bar__range" data-win-control="VisiWin.UI.LinearRange"></div>'),A+="</div>",this.verifyShowProperty("showScale")&&(A+='<div data-ref="_scaleControl" class="vw-bar__scale" data-win-control="VisiWin.UI.LinearScale"></div>'),A+="</div>",this.verifyShowProperty("showValueLabel")&&(A+='<div data-ref="_valueLabelControl" class="vw-bar__valuelabel" data-win-control="VisiWin.UI.ValuePresenter"></div>'),this.element.innerHTML=A,this.reparentChildren(x,this.element),this.initializeChilds()}createHandler(){this._barCoreControl.addEventListener("barIndicatorChanged",this._boundBarIndicatorChangedHandler,!1)}removeHandler(){this._barCoreControl.removeEventListener("barIndicatorChanged",this._boundBarIndicatorChangedHandler,!1)}registerChild(x,A,V,R){return A===this.registerTargetId&&V&&V.winControl&&(this._limitsCollection.push(V.winControl),this.isInDesignMode?(V.style.display="none",V.winControl.addEventListener("notifyPropertyChanged",this._limitsChangedHandler.bind(this))):V.remove()),!1}_updateColors(x){"property"!==x.changeType&&"status"!==x.changeType&&"afterInit"!==x.changeName&&"theme"!==x.changeType||(this.disabled?(this._barCoreControl.backgroundColor=this.disabledBarBackgroundColor,this._barCoreControl.indicatorColor=this.disabledBarIndicatorColor,this._rangeControl&&(this._rangeControl.indicatorColor=this.disabledBarIndicatorColor,this._rangeControl.backgroundColor=this.disabledRangeBackgroundColor),this._scaleControl&&(this._scaleControl.backgroundColor=this.disabledScaleBackgroundColor,this._scaleControl.foregroundColor=this.disabledForegroundColor,this._scaleControl.majorTicksColor=this.disabledForegroundColor,this._scaleControl.middleTicksColor=this.disabledForegroundColor,this._scaleControl.minorTicksColor=this.disabledForegroundColor),this._valueLabelControl&&(this._valueLabelControl.backgroundColor=this.disabledValueLabelBackgroundColor,this._valueLabelControl.borderColor=this.disabledBorderColor,this._valueLabelControl.valueForegroundColor=this.disabledForegroundColor,this._valueLabelControl.unitForegroundColor=this.disabledForegroundColor)):(this._barCoreControl.backgroundColor=this.barBackgroundColor,this._barCoreControl.indicatorColor=this.barIndicatorColor,this._rangeControl&&(this._rangeControl.indicatorColor=this.barIndicatorColor,this._rangeControl.backgroundColor=this.rangeBackgroundColor),this._scaleControl&&(this._scaleControl.backgroundColor=this.scaleBackgroundColor,this._scaleControl.foregroundColor=this.scaleForegroundColor,this._scaleControl.majorTicksColor=this.majorTicksColor,this._scaleControl.middleTicksColor=this.middleTicksColor,this._scaleControl.minorTicksColor=this.minorTicksColor),this._valueLabelControl&&(this._valueLabelControl.backgroundColor=this.valueLabelBackgroundColor,this._valueLabelControl.borderColor=this.valueLabelBorderColor,this._valueLabelControl.valueForegroundColor=this.valueForegroundColor,this._valueLabelControl.unitForegroundColor=this.unitForegroundColor)))}_updateLayout(A){if("firstUpdate"===A.changeName||"formattedValue"===A.changeName||"value"===A.changeName){let x=this.value;0!==this.decimalPlaces&&(x=this.formattedValue),this._barCoreControl&&(this._barCoreControl.value=x),this._rangeControl&&(this._rangeControl.value=x),this._valueLabelControl&&(this._valueLabelControl.value=x,this.unitText&&(this._valueLabelControl.unitText=this.unitText))}if("afterInit"!==A.changeName&&"rawLimitMin"!==A.changeName||(this._barCoreControl.rawLimitMin=this.rawLimitMin,this._rangeControl&&(this._rangeControl.rawLimitMin=this.rawLimitMin),this._scaleControl&&(this._scaleControl.rawLimitMin=this.rawLimitMin)),"afterInit"!==A.changeName&&"rawLimitMax"!==A.changeName||(this._barCoreControl.rawLimitMax=this.rawLimitMax,this._rangeControl&&(this._rangeControl.rawLimitMax=this.rawLimitMax),this._scaleControl&&(this._scaleControl.rawLimitMax=this.rawLimitMax)),"afterInit"!==A.changeName&&"rawReferenceValue"!==A.changeName||(this._barCoreControl.rawReferenceValue=this.rawReferenceValue,this._rangeControl&&(this._rangeControl.rawReferenceValue=this.rawReferenceValue)),"afterInit"===A.changeName&&(this.variableName&&null===this._scaleControl.variableName&&(this._scaleControl.variableName=this.variableName,this._scaleControl.useVariableLimits=this.useVariableLimits,this._scaleControl.useRawValue=this.useRawValue),this.variableName&&null===this._barCoreControl.variableName&&(this._barCoreControl.variableName=this.variableName,this._barCoreControl.useRawValue=this.useRawValue,this._barCoreControl.useVariableLimits=this.useVariableLimits),this.variableName&&null===this._rangeControl.variableName&&(this._rangeControl.variableName=this.variableName,this._rangeControl.useVariableLimits=this.useVariableLimits,this._rangeControl.useRawValue=this.useRawValue)),"afterInit"===A.changeName||"direction"===A.changeName||"scalePosition"===A.changeName)switch(this._containerElement.style.flexDirection="Left"===this.direction||"Right"===this.direction?"Top"===this.scalePosition?"column-reverse":"column":"Right"===this.scalePosition?"row":"row-reverse",this._scaleControl.position="Left"===this.direction||"Right"===this.direction?"Top"===this.scalePosition?"Bottom":"Top":"Right"===this.scalePosition?"Left":"Right",this.direction){case"Right":this._barCoreControl.direction="Right",this._rangeControl&&(this._rangeControl.direction="Right"),this._scaleControl&&(this._scaleControl.reverse=!1);break;case"Down":this._barCoreControl.direction="Down",this._rangeControl&&(this._rangeControl.direction="Down"),this._scaleControl&&(this._scaleControl.reverse=!0);break;case"Left":this._barCoreControl.direction="Left",this._rangeControl&&(this._rangeControl.direction="Left"),this._scaleControl&&(this._scaleControl.reverse=!0);break;default:this._barCoreControl.direction="Up",this._rangeControl&&(this._rangeControl.direction="Up"),this._scaleControl&&(this._scaleControl.reverse=!1)}if("afterInit"===A.changeName||"scalePlacement"===A.changeName){if(!this._scaleControl)return;switch(this.scalePlacement){case"Inside":this._scaleControl.placement="Outside";break;default:this._scaleControl.placement="Inside"}}if("afterInit"===A.changeName||"valueLabelPosition"===A.changeName){if(!this._valueLabelControl)return;switch(this._valueLabelControl.element.style.position="relative",this._valueLabelControl.top="",this._valueLabelControl.left="",this.valueLabelPosition){case"Bar":this._valueLabelControl.element.style.position="absolute",this.element.style.flexDirection="row";break;case"Left":this.element.style.flexDirection="row-reverse";break;case"Right":this.element.style.flexDirection="row";break;case"Top":this.element.style.flexDirection="column-reverse";break;default:this.element.style.flexDirection="column"}}"firstUpdate"!==A.changeName&&"showScale"!==A.changeName&&"showValueLabel"!==A.changeName&&"showRanges"!==A.changeName||(this._scaleControl&&(this._scaleControl.element.style.display=this.showScale?"":"none"),this._valueLabelControl&&(this._valueLabelControl.element.style.display=this.showValueLabel?"flex":"none"),this._rangeControl&&(this._rangeControl.element.style.display=this.showRanges?"":"none")),"initialized"!==A.changeName&&"unitText"!==A.changeName||(this.isInDesignMode&&"Control"===this.designerType?(null===this.value&&(this.value=42,this.rawLimitMax<100&&(this.value=this.rawLimitMax/2)),this.unitText&&this._valueLabelControl&&(this._valueLabelControl.unitText=this.unitText)):(!this.variableName&&this._valueLabelControl&&(this._valueLabelControl.unitText=this.unitText),"unitText"===A.changeName&&this.useVariableUnitText&&(this._valueLabelControl.unitText=this.unitText)),this._limitsChangedHandler(null)),"afterInit"!==A.changeName&&"showUnit"!==A.changeName&&"unitText"!==A.changeName||(x.isNullOrUndefined(this._valuePresenterUnit)&&(this._valuePresenterUnit=this.element.getElementsByClassName("vw-valuepresenter__unit vw-textblock label1")[0]),x.isNullOrUndefined(this._valuePresenterUnit)||(!this.showUnit||x.isNullOrEmpty(this.unitText)?this._valuePresenterUnit.style.display="none":this.showUnit&&(this._valuePresenterUnit.style.display="flex")))}_showValueToBar(x,A,V){if(this._valueLabelControl){this._valueLabelControl.value=V,this._valueLabelControl.decimalPlaces=this.decimalPlaces;const R=this._valueLabelControl.element.offsetWidth,D=this._valueLabelControl.element.offsetHeight,N=this.element.getBoundingClientRect(),U=this._barCoreControl.element.getBoundingClientRect();let B=0,F=0;switch(this.direction){case"Left":F=x,this.value>=this.rawReferenceValue?F>=R&&(F-=R):U.width-F<=R&&(F-=R),B=U.top-N.top+U.height/2-D/2;break;case"Right":F=x,this.value>=this.rawReferenceValue?U.width-F<=R&&(F-=R):F>=R&&(F-=R),B=U.top-N.top+U.height/2-D/2;break;case"Down":B=A,this.value>=this.rawReferenceValue?U.height-B<=D&&(B-=D):B>=this._valueLabelControl.element.offsetHeight&&(B-=D),F=U.left-N.left+U.width/2-R/2;break;case"Up":B=A,this.value>=this.rawReferenceValue?B>=D&&(B-=D):U.height-B<=D&&(B-=D),F=U.left-N.left+U.width/2-R/2}this._valueLabelControl.left=F+"px",this._valueLabelControl.top=B+"px"}}_limitsChangedHandler(x){if(this._limitsCollection&&this._limitsCollection.length>0){const x=[];for(let A=0;A<this._limitsCollection.length;A++){const V=this._limitsCollection[A];x.push({startValue:V.startValue,endValue:V.endValue,fillColor:V.fillColor})}this._barCoreControl&&(this._barCoreControl.limits=x),this._rangeControl&&(this._rangeControl.limits=x)}else this._barCoreControl&&(this._barCoreControl.limits=[]),this._rangeControl&&(this._rangeControl.limits=[])}_barIndicatorChangedHandler(x){"Bar"===this.valueLabelPosition&&this._showValueToBar(x.detail.posX,x.detail.posY,x.detail.value),this.dispatchEvent("barIndicatorChanged",x.detail)}}A.Bar=Bar}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class BarLimit extends x.UI.ProviderBase{constructor(A,V){super(A,V),this.addPropertyList(BarLimit,BarLimit.propertyList),this.defaultConstructor(A,this.inlineOptions,x.UI.BarLimit.controlName,null)}}BarLimit.namespace="VisiWin.UI",BarLimit.controlName="BarLimit",BarLimit.propertyList={designerType:{propertyType:"base",type:"string",defaultValue_DM:"Control"},registerSourceId:{propertyType:"base",type:"string",defaultValue:"BarLimit"},startValue:{propertyType:"member",type:"number",defaultValue:0},endValue:{propertyType:"member",type:"number",defaultValue:0},fillColor:{propertyType:"member",type:"string"}},A.BarLimit=BarLimit}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class PieCore extends x.UI.ControlBase{constructor(A,V){super(A,V),this.inlineOptions.debug,this.addPropertyList(PieCore,PieCore.PieCorePropertyList),this.defaultConstructor(A,this.inlineOptions,x.UI.PieCore.controlName,x.UI.PieCore.classPieCore)}createTemplate(){return this.element.innerHTML=['<svg class="vw-piecore__svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"></svg>'].join("\n"),this._svgElement=this.element.firstElementChild,null}resizeHandler(){this._updateLayoutBase("event","sizeChanged",null,null)}beforeInit(){this._svgElement.setAttribute("width","100%"),this._svgElement.setAttribute("height","100%")}_updateColors(x){this.disabled?this.element.style.backgroundColor=this.getColor("disabledBackgroundColor"):this.element.style.backgroundColor=this.getColor("backgroundColor")}_updateLayout(x){if("updateLayout"!=x.changeName&&"ready"!=x.changeName){for(;this._svgElement.lastChild;)this._svgElement.removeChild(this._svgElement.lastChild);var A,V=window.getComputedStyle(this.element,null),R=parseFloat(V.getPropertyValue("width")),D=parseFloat(V.getPropertyValue("height")),N=R>D?D:R,U=this._getPixelValue(this.centerX,R),B=this._getPixelValue(this.centerY,D),F=this._getPixelValue(this.innerRadius,N/2),W=this._getPixelValue(this.outerRadius,N/2),H=[],z=0;if(!(0==R||0==D||isNaN(U)||isNaN(B)||isNaN(F)||isNaN(W)))if(null!=this.segments&&this.segments.length>0){for(var G=0;G<this.segments.length;G++){var j=Math.abs(parseFloat(this.segments[G].value));isNaN(j)||(z+=j)}if(0!==z){A=360/z;for(var q=0;q<this.segments.length;q++){var Q,K,J,X=this.segments[q],Y=this._getPixelValue(X.innerRadius,N/2),$=this._getPixelValue(X.outerRadius,N/2),Z=this.getThemeColor(X.color)||"black",ee=Math.abs(parseFloat(X.value)),te=!0;isNaN(Y)&&(Y=F),isNaN($)&&($=W),isNaN(ee)&&(ee=0,te=!1),0===q?(Q=0,K=ee,J=ee/z*100):(Q=H[q-1].max,K=H[q-1].max+ee,J=ee/z*100),H.push({min:Q,max:K,startAngle:Q*A,endAngle:K*A,innerRadius:Y,outerRadius:$,color:Z,show:te,percentage:J,vwVariable:X.vwVariable,vwArgs:X.vwArgs,value:ee})}for(var ie=0;ie<H.length;ie++)H[ie].show&&0!=H[ie].value&&this._svgElement.appendChild(this._drawPath(U,B,H[ie].startAngle,H[ie].endAngle,H[ie].endAngle-H[ie].startAngle,H[ie].innerRadius,H[ie].outerRadius,H[ie].color))}else this._svgElement.appendChild(this._drawPath(U,B,0,360,360,F,W,"#e6e6e6"))}else this._svgElement.appendChild(this._drawPath(U,B,0,360,360,F,W,"#e6e6e6"))}}_drawPath(x,A,V,R,D,N,U,B){var F,W,H,z,G,j,q,Q,K,J,X,Y,$,Z,ee,te;return D>180&&(F=1,W=1,H=1,z=0),D<=180&&(F=0,W=1,H=0,z=0),G=Math.PI/180*V-Math.PI/2,j=Math.PI/180*R-Math.PI/2,360===D&&(j-=2e-4),q=x+N*Math.cos(G),Q=A+N*Math.sin(G),K=x+U*Math.cos(G),J=A+U*Math.sin(G),X=x+U*Math.cos(j),Y=A+U*Math.sin(j),$=x+N*Math.cos(j),Z=A+N*Math.sin(j),(ee=document.createElementNS("http://www.w3.org/2000/svg","path")).setAttribute("fill",B),te="M"+q+","+Q+" L"+K+","+J+" A"+U+","+U+" 0 "+F+","+W+X+","+Y+" L"+$+","+Z+" A"+N+","+N+" 0 "+H+","+z+q+","+Q+"z",ee.setAttribute("d",te),ee}_getPixelValue(x,A){return!0===/%/.test(x)?Math.abs(A*(parseFloat(x)/100)):Math.abs(parseFloat(x))}dispose(){return super.dispose()}}PieCore.namespace="VisiWin.UI",PieCore.controlName="PieCore",PieCore.classPieCore="vw-piecore",PieCore.PieCorePropertyList={designerType:{propertyType:"base",type:"string",defaultValue_DM:"Control"},centerX:{propertyType:"member",type:"string",defaultValue:"50%"},centerY:{propertyType:"member",type:"string",defaultValue:"50%"},innerRadius:{propertyType:"member",type:"string",defaultValue:"70%"},outerRadius:{propertyType:"member",type:"string",defaultValue:"100%"},segments:{propertyType:"member",type:"any"},backgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"]},disabledBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"]}},A.PieCore=PieCore}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class PieSegment extends x.UI.VariableBase{constructor(A,V){super(A,V),this.addPropertyList(PieSegment,PieSegment.PieSegmentPropertyList),this.defaultConstructor(A,this.inlineOptions,x.UI.PieSegment.controlName,null)}dispose(){return super.dispose()}}PieSegment.namespace="VisiWin.UI",PieSegment.controlName="PieSegment",PieSegment.PieSegmentPropertyList={designerType:{propertyType:"base",type:"string",defaultValue_DM:"Control"},registerSourceId:{propertyType:"base",type:"string",defaultValue:"PieSegment"},innerRadius:{propertyType:"member",type:"string"},outerRadius:{propertyType:"member",type:"string"},fillColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@PrimaryColor"},decimalPlaces:{propertyType:"member",type:"number"}},A.PieSegment=PieSegment}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class PieChart extends x.UI.ControlBase{constructor(A,V){super(A,V),this.segmentsCollection=[],this.boundSegmentsChangedHandler=this._segmentsChangedHandler.bind(this),this.inlineOptions.debug,this.addPropertyList(PieChart,PieChart.PieChartPropertyList),this.defaultConstructor(A,this.inlineOptions,x.UI.PieChart.controlName,x.UI.PieChart.classPieChart)}createTemplate(){var x=document.createElement("div");return x.innerHTML=['<div class="vw-piechart__core" data-win-control="VisiWin.UI.PieCore"}"></div>','<div class="vw-piechart__legend" data-win-control="VisiWin.UI.PieLegend"}"></div>'].join("\n"),this._pieElement=x.firstElementChild,this._legendElement=this._pieElement.nextElementSibling,this.element.appendChild(this._pieElement),this.element.appendChild(this._legendElement),this.processElements([this._pieElement,this._legendElement])}registerChild(x,A,V,R){return A!==this.registerTargetId||(V&&V.winControl&&(V.style.display="none",this.segmentsCollection.push(V.winControl),V.winControl.addEventListener("notifyPropertyChanged",this.boundSegmentsChangedHandler)),!1)}ready(){"Control"==this.designerType&&this._segmentsChangedHandler("ready")}_segmentsChangedHandler(x){if("ready"==x||"value"==x.detail.changeName||"fillColor"==x.detail.changeName||"innerRadius"==x.detail.changeName||"outerRadius"==x.detail.changeName||"labelText"==x.detail.changeName||"unitText"==x.detail.changeName)if(this.segmentsCollection&&this.segmentsCollection.length>0){for(var A=[],V=[],R=0;R<this.segmentsCollection.length;R++)A.push({value:this.segmentsCollection[R].value,innerRadius:this.segmentsCollection[R].innerRadius,outerRadius:this.segmentsCollection[R].outerRadius,color:this.segmentsCollection[R].fillColor}),V.push({value:this.segmentsCollection[R].value,labelText:this.segmentsCollection[R].labelText,unitText:this.segmentsCollection[R].unitText,fillColor:this.segmentsCollection[R].fillColor,decimalPlaces:this.segmentsCollection[R].decimalPlaces});this._pieElement&&this._pieElement.winControl&&(this._pieElement.winControl.segments=A),this._legendElement&&this._legendElement.winControl&&(this._legendElement.winControl.segments=V)}else this._pieElement&&this._pieElement.winControl&&(this._pieElement.winControl.segments=[]),this._legendElement&&this._legendElement.winControl&&(this._legendElement.winControl.segments=[])}_updateColors(x){this.disabled?(this.element.style.color=this.getColor("disabledForegroundColor"),this.element.style.backgroundColor=this.getColor("disabledBackgroundColor"),this.element.style.borderColor=this.getColor("disabledBorderColor"),this._legendElement&&this._legendElement.winControl&&(this._legendElement.winControl.foregroundColor=this.getColor("disabledForegroundColor"),this._legendElement.winControl.borderColor=this.getColor("disabledLegendBorderColor"),this._legendElement.winControl.backgroundColor=this.getColor("disabledLegendBackgroundColor"))):(this.element.style.color=this.getColor("foregroundColor"),this.element.style.backgroundColor=this.getColor("backgroundColor"),this.element.style.borderColor=this.getColor("borderColor"),this._legendElement&&this._legendElement.winControl&&(this._legendElement.winControl.foregroundColor=this.getColor("foregroundColor"),this._legendElement.winControl.borderColor=this.getColor("legendBorderColor"),this._legendElement.winControl.backgroundColor=this.getColor("legendBackgroundColor")))}_updateLayout(x){if("updateLayout"!=x.changeName&&"showLegend"!=x.changeName||(this.showLegend?this._legendElement.style.display="flex":this._legendElement.style.display="none"),"updateLayout"==x.changeName||"legendPosition"==x.changeName||"legendAlignment"==x.changeName){switch(this.legendPosition){case"Top":this.element.style.flexDirection="column-reverse";break;case"Bottom":this.element.style.flexDirection="column";break;case"Right":this.element.style.flexDirection="row";break;default:this.element.style.flexDirection="row-reverse"}if("Top"==this.legendPosition||"Bottom"==this.legendPosition)switch(this.legendAlignment){case"Left":this.element.style.alignItems="flex-start";break;case"Right":this.element.style.alignItems="flex-end";break;case"Center":this.element.style.alignItems="center"}else switch(this.legendAlignment){case"Top":this.element.style.alignItems="flex-start";break;case"Bottom":this.element.style.alignItems="flex-end";break;case"Center":this.element.style.alignItems="center"}}}dispose(){if(this.segmentsCollection&&this.segmentsCollection.length>0)for(var x=0;x<this.segmentsCollection.length;x++)this.segmentsCollection[x].removeEventListener("notifyPropertyChanged",this.boundSegmentsChangedHandler);return this.segmentsCollection=[],super.dispose()}}PieChart.namespace="VisiWin.UI",PieChart.controlName="PieChart",PieChart.classPieChart="vw-piechart",PieChart.PieChartPropertyList={designerType:{propertyType:"base",type:"string",defaultValue_DM:"Control"},registerTargetId:{propertyType:"base",defaultValue:"PieSegment"},pieWidth:{propertyType:"child",type:"string",child:"_pieElement",childOption:"width"},pieHeight:{propertyType:"child",type:"string",child:"_pieElement",childOption:"height"},pieMargin:{propertyType:"child",type:"string",child:"_pieElement",childOption:"margin"},piePadding:{propertyType:"child",type:"string",child:"_pieElement",childOption:"padding"},innerRadius:{propertyType:"child",type:"string",child:"_pieElement"},outerRadius:{propertyType:"child",type:"string",child:"_pieElement"},segments:{propertyType:"member",type:"string"},showLegend:{propertyType:"member",type:"boolean",defaultValue:!0},legendBorderWidth:{propertyType:"child",type:"string",child:"_legendElement",childOption:"borderWidth"},legendBorderStyle:{propertyType:"child",type:"enum",child:"_legendElement",childOption:"borderStyle"},legendBorderRadius:{propertyType:"child",type:"string",child:"_legendElement",childOption:"borderRadius"},legendWidth:{propertyType:"child",type:"string",child:"_legendElement",childOption:"width"},legendHeight:{propertyType:"child",type:"string",child:"_legendElement",childOption:"height"},legendMargin:{propertyType:"child",type:"string",child:"_legendElement",childOption:"margin"},legendPadding:{propertyType:"child",type:"string",child:"_legendElement",childOption:"padding"},legendPosition:{propertyType:"member",type:"string",defaultValue:"Right"},legendAlignment:{propertyType:"member",type:"string",defaultValue:"Center"},template:{propertyType:"child",type:"string",child:"_legendElement",defaultValue:"VisiWin.UI.PieChartTemplate"},foregroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},backgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BackgroundColor"},borderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"},legendBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BackgroundColor"},legendBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"},disabledForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledForegroundColor"},disabledBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledBackgroundColor"},disabledBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledBorderColor"},disabledLegendBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledBorderColor"},disabledLegendBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledBackgroundColor"}},A.PieChart=PieChart}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class PieLegend extends x.UI.ControlBase{constructor(A,V){super(A,V),this.bindingList=new WinJS.Binding.List,this._template=null,V&&V.debug,this.addPropertyList(PieLegend,PieLegend.PieLegendPropertyList),this.defaultConstructor(A,this.inlineOptions,x.UI.PieLegend.controlName,x.UI.PieLegend.classPieLegend)}createTemplate(){return this.element.innerHTML=['<div class="vw-pielegend__repeater" data-win-control="WinJS.UI.Repeater"></div>'].join("\n"),this._repeaterElement=this.element.firstElementChild,this.processElements([this._repeaterElement])}beforeInit(){this._repeaterElement&&this._repeaterElement.winControl&&(this._repeaterElement.winControl.data=this.bindingList)}ready(x){this._repeaterElement&&this._setDesignerType(this._repeaterElement)}get template(){return this._template}set template(x){this._template=x,this._repeaterElement&&this._repeaterElement.winControl&&(this._repeaterElement.winControl.template=document.getElementById(x))}_updateColors(x){this.disabled?(this.element.style.color=this.getColor("disabledForegroundColor"),this.element.style.backgroundColor=this.getColor("disabledBackgroundColor"),this.element.style.borderColor=this.getColor("disabledBorderColor")):(this.element.style.color=this.getColor("foregroundColor"),this.element.style.backgroundColor=this.getColor("backgroundColor"),this.element.style.borderColor=this.getColor("borderColor"))}_updateLayout(x){if("segments"==x.changeName&&null!=this.segments&&this.segments.length>0){for(;this.bindingList.length>0;)this.bindingList.pop();for(var A=0;A<this.segments.length;A++){var V={value:"",labelText:"",unitText:"",fillColor:"",decimalPlaces:0};V.value=null!=this.segments[A].value?this.segments[A].value:0,V.labelText=null!=this.segments[A].labelText?this.segments[A].labelText:"",V.unitText=null!=this.segments[A].unitText?this.segments[A].unitText:"",V.fillColor=null!=this.segments[A].fillColor?this.segments[A].fillColor:"",V.decimalPlaces=void 0!==this.segments[A].decimalPlaces?this.segments[A].decimalPlaces:0,this.bindingList.push(V)}}}_setDesignerType(x){if(x&&x.firstChild)for(var A=x.firstChild;A;)A.winControl&&(A.winControl.designerType="Child"),this._setDesignerType(A),A=A.nextSibling}dispose(){return super.dispose()}}PieLegend.namespace="VisiWin.UI",PieLegend.controlName="PieLegend",PieLegend.classPieLegend="vw-pielegend",PieLegend.PieLegendPropertyList={designerType:{propertyType:"base",type:"string",defaultValue_DM:"Control"},template:{propertyType:"custom",type:"string"},segments:{propertyType:"member",type:"any"},foregroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},backgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},borderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"},disabledForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledForegroundColor"},disabledBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},disabledBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledBorderColor"}},A.PieLegend=PieLegend}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class Symbol extends x.UI.ControlBase{constructor(x,A){super(x,A),this.properties={designerType:{propertyType:"base",defaultValue:"Control"},show:{defaultValue:!0,type:"boolean"},iconFont:{defaultValue:"material-icons"},symbol:{},symbolType:{defaultValue:"Icon"},symbolSize:{defaultValue:"24px"},backgroundColor:{defaultValue:"@None"},foregroundColor:{defaultValue:"@ForegroundColor"},borderColor:{defaultValue:"@None"},disabledBackgroundColor:{defaultValue:"@None"},disabledForegroundColor:{defaultValue:"@DisabledForegroundColor"},disabledBorderColor:{defaultValue:"@None"}},this.cssStyles={baseStyle:!0,css:"\n            .vw-symbol {\n                position: relative;\n                display: flex;\n                border-width: 1px;\n                overflow: hidden;\n                align-items: center;\n                justify-content: center;\n                flex-shrink: 0;\n            }           \n            .vw-symbol > i {\n                width: auto;\n                height: auto;\n                -webkit-user-select: none;\n                -moz-user-select: none;\n                -ms-user-select: none;\n                user-select: none;\n            }            \n            .vw-symbol > img {\n                width: 100%;\n                height: 100%;\n            }           \n        "},this.initialize(Symbol)}beforeInit(){x.Application.Settings.DefaultIconFont&&(this.iconFont=x.Application.Settings.DefaultIconFont)}_updateColors(x){"property"!=x.changeType&&"status"!=x.changeType&&"firstUpdate"!=x.changeName||(this.disabled?(this.setColor("disabledBackgroundColor","backgroundColor"),this.setColor("disabledForegroundColor","foregroundColor"),this.setColor("disabledBorderColor","borderColor")):(this.setColor("backgroundColor","backgroundColor"),this.setColor("foregroundColor","foregroundColor"),this.setColor("borderColor","borderColor")))}_updateLayout(x){var A,V,R;if("firstUpdate"!=x.changeName&&"show"!=x.changeName||(this.element.style.display=this.show?"flex":"none"),"visibility"==x.changeName||"firstUpdate"==x.changeName||"iconFont"==x.changeName||"symbol"==x.changeName||"symbolType"==x.changeName||"symbolSize"==x.changeName){this.element.innerHTML="Icon"==this.symbolType?this.iconFont&&this.symbol?'<i class="'+this.iconFont+'">'+this.symbol+"</i>":"<i></i>":this.symbol?'<img src="'+this.symbol+'"/>':"<img />",this.element.style.boxSizing="Icon"==this.symbolType?"content-box":"";var D=this.element.firstElementChild,N=this._getSymbolSize(this.symbolSize);D.style.objectFit="Bitmap"==this.symbolType?"contain":"","auto"===this.symbolSize?(this.width="auto",this.height="auto",D.style.fontSize=""):N.error||(1==N.p.length?(this.width=N.p[0],this.height=N.p[0],N.p[0].indexOf("%")>-1?(D.style.fontSize="Icon"==this.symbolType?this.element.clientWidth>this.element.clientHeight?this.element.clientHeight+"px":this.element.clientWidth+"px":"",""!=D.style.fontSize&&"0px"!=D.style.fontSize||this.element.hidden||this.element.winControl.authorized&&"visible"===this.element.winControl.visibility.toLowerCase()&&(this.element.winControl.parentElement.winControl&&this.element.winControl.parentElement.winControl.inlineOptions.imageSize?D.style.fontSize=this.element.winControl.parentElement.winControl.inlineOptions.imageSize:D.style.fontSize=null===(R=null===(V=null===(A=this.element.winControl)||void 0===A?void 0:A.optionsList)||void 0===V?void 0:V.symbolSize)||void 0===R?void 0:R.defaultValue)):D.style.fontSize="Icon"==this.symbolType?N.p[0]:""):2==N.p.length&&(this.width=N.p[0],this.height=N.p[1],N.p[0].indexOf("%")>-1||N.p[1].indexOf("%")>-1?D.style.fontSize="Icon"==this.symbolType?this.element.clientWidth>this.element.clientHeight?this.element.clientHeight+"px":this.element.clientWidth+"px":"":D.style.fontSize="Icon"==this.symbolType?N.p[0]>N.p[1]?N.p[1]:N.p[0]:""))}}_getSymbolSize(x){var A={};A.error=null,A.p=[],"number"==typeof x&&(x=x.toString());x.replace(/^\s*(-?\d+\.?\d*)\s*(px|ex|em|ex|%|ch|rem|vw|vh|vmin|cm|mm|in|pt|pc)?\s*(-?\d*\.?\d*)\s*(px|ex|em|ex|%|ch|rem|vw|vh|vmin|cm|mm|in|pt|pc)?\s*(.*)$/gi,(function(V,R,D,N,U,B){return R?(D||(D="px"),N?(U||(U="px"),B?(A.p.push(R+D.toLocaleLowerCase()),A.p.push(N+U.toLocaleLowerCase()),A.match=A.p[0]+" "+A.p[1],A.error="More than two html parameter in ["+x+"].",A):(A.p.push(R+D.toLocaleLowerCase()),A.p.push(N+U.toLocaleLowerCase()),A.match=A.p[0]+" "+A.p[1],A)):(A.p.push(R+D.toLocaleLowerCase()),A.match=A.p[0],A)):(A.error="No valid html parameter in ["+x+"].",A)}));return A}}A.Symbol=Symbol}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class RadioButtonGroup extends x.UI.GroupBase{constructor(A,V){super(A,V),this._containerElement=null,this._titleElement=null,this._subtitleElement=null,this.addPropertyList(RadioButtonGroup,RadioButtonGroup.propertyList),this.defaultConstructor(A,this.inlineOptions,x.UI.RadioButtonGroup.controlName,x.UI.RadioButtonGroup.className)}createTemplate(){if(x.Utilities.isInDesignMode())return this._containerElement=document.createElement("div"),x.Utilities.addClass(this._containerElement,"vw-radiobuttongroup__container"),x.Utilities.reparentChildren(this.element,this._containerElement),this.element.innerHTML=['<div class="vw-radiobuttongroup__title" data-win-control="VisiWin.UI.TextBlock"></div>','<div class="vw-radiobuttongroup__subtitle" data-win-control="VisiWin.UI.TextBlock"></div>'].join("\n"),this._titleElement=this.element.firstElementChild,this._subtitleElement=this._titleElement.nextElementSibling,this.element.appendChild(this._containerElement),this.processElements([this._titleElement,this._subtitleElement]);var A=null!=this.inlineOptions.showTitle?this.inlineOptions.showTitle:this.getStyleProperty("showTitle")?this.getStyleProperty("showTitle"):x.UI.RadioButtonGroup.propertyList.showTitle.defaultValue,V=null!=this.inlineOptions.showSubtitle?this.inlineOptions.showSubtitle:this.getStyleProperty("showSubtitle")?this.getStyleProperty("showSubtitle"):x.UI.RadioButtonGroup.propertyList.showSubtitle.defaultValue,R="";return this._containerElement=document.createElement("div"),x.Utilities.addClass(this._containerElement,"vw-radiobuttongroup__container"),x.Utilities.reparentChildren(this.element,this._containerElement),A&&(R+='<div class="vw-radiobuttongroup__title" data-win-control="VisiWin.UI.TextBlock"></div>'),V&&(R+='<div class="vw-radiobuttongroup__subtitle" data-win-control="VisiWin.UI.TextBlock"></div>'),this.element.innerHTML=R,A?(this._titleElement=this.element.firstElementChild,V&&(this._subtitleElement=this._titleElement.nextElementSibling)):V&&(this._subtitleElement=this.element.firstElementChild),this.element.appendChild(this._containerElement),this.processElements([this._titleElement,this._subtitleElement])}_updateColors(x){this.disabled?(this.setColor("disabledBackgroundColor","backgroundColor"),this.setColor("disabledBorderColor","borderColor"),this._titleElement&&this._titleElement.winControl&&this.setColor("disabledTitleForegroundColor","foregroundColor",null,"_titleElement"),this._subtitleElement&&this._subtitleElement.winControl&&this.setColor("disabledSubtitleForegroundColor","foregroundColor",null,"_subtitleElement")):(this.setColor("backgroundColor"),this.setColor("borderColor"),this._titleElement&&this._titleElement.winControl&&this.setColor("titleForegroundColor","foregroundColor",null,"_titleElement"),this._subtitleElement&&this._subtitleElement.winControl&&this.setColor("subtitleForegroundColor","foregroundColor",null,"_subtitleElement"))}_updateLayout(x){if("updateLayout"==x.changeName||"orientation"==x.changeName)switch(this.orientation){case"Vertical":this._containerElement.style.flexDirection="column";break;case"VerticalReverse":this._containerElement.style.flexDirection="column-reverse";break;case"HorizontalReverse":this._containerElement.style.flexDirection="row-reverse";break;default:this._containerElement.style.flexDirection="row"}if("updateLayout"==x.changeName||"alignItems"==x.changeName)switch(this.alignItems){case"Center":this._containerElement.style.alignItems="center";break;case"Start":this._containerElement.style.alignItems="flex-start";break;case"End":this._containerElement.style.alignItems="flex-end";break;case"Baseline":this._containerElement.style.alignItems="baseline";break;default:this._containerElement.style.alignItems="stretch"}if("updateLayout"==x.changeName||"justifyContent"==x.changeName)switch(this.justifyContent){case"End":this._containerElement.style.justifyContent="flex-end";break;case"Center":this._containerElement.style.justifyContent="center";break;case"Space-between":this._containerElement.style.justifyContent="space-between";break;case"Space-around":this._containerElement.style.justifyContent="space-around";break;case"Space-evenly":this._containerElement.style.justifyContent="space-evenly";break;default:this._containerElement.style.justifyContent="flex-start"}if("updateLayout"==x.changeName||"alignContent"==x.changeName)switch(this.alignContent){case"Center":this._containerElement.style.alignContent="center";break;case"Start":this._containerElement.style.alignContent="flex-start";break;case"End":this._containerElement.style.alignContent="flex-end";break;case"Space-between":this._containerElement.style.alignContent="space-between";break;case"Space-around":this._containerElement.style.alignContent="space-around";break;default:this._containerElement.style.alignContent="stretch"}"updateLayout"!=x.changeName&&"wrap"!=x.changeName||(this._containerElement.style.flexWrap=this.wrap?"wrap":"nowrap")}dispose(){return super.dispose()}}RadioButtonGroup.namespace="VisiWin.UI",RadioButtonGroup.controlName="RadioButtonGroup",RadioButtonGroup.className="vw-radiobuttongroup",RadioButtonGroup.propertyList={designerType:{propertyType:"base",type:"string",defaultValue:"ContentControl"},registerSourceId:{propertyType:"base",defaultValue:"Group"},orientation:{propertyType:"member",type:"string",defaultValue:"Vertical"},alignItems:{propertyType:"member",type:"string",defaultValue:"Start"},justifyContent:{propertyType:"member",type:"string",defaultValue:"Start"},alignContent:{propertyType:"member",type:"string",defaultValue:"Start"},wrap:{propertyType:"member",type:"boolean",defaultValue:!1},showTitle:{propertyType:"child",type:"boolean",child:"_titleElement",childProperty:"show",defaultValue:!0},titleWidth:{propertyType:"child",type:"string",child:"_titleElement",childProperty:"width"},titleHeight:{propertyType:"child",type:"string",child:"_titleElement",childProperty:"height"},titleMargin:{propertyType:"child",type:"string",child:"_titleElement",childProperty:"margin"},titlePadding:{propertyType:"child",type:"string",child:"_titleElement",childProperty:"padding"},titleText:{propertyType:"child",type:"string",child:"_titleElement",childProperty:"text",defaultValue:"Title"},localizableTitleText:{propertyType:"child",type:"string",child:"_titleElement",childProperty:"localizableText"},titleTextAlignment:{propertyType:"child",type:"string",child:"_titleElement",childProperty:"textAlignment"},titleLineClamp:{propertyType:"child",type:"number",child:"_titleElement",childProperty:"lineClamp"},titleTextWrapping:{propertyType:"child",type:"string",child:"_titleElement",childProperty:"textWrapping"},titleTextTrimming:{propertyType:"child",type:"string",child:"_titleElement",childProperty:"textTrimming"},titleFontClass:{propertyType:"child",type:"string",child:"_titleElement",childProperty:"fontClass",defaultValue:"Title"},titleFontSize:{propertyType:"child",type:"string",child:"_titleElement",childProperty:"fontSize"},titleFontWeight:{propertyType:"child",type:"string",child:"_titleElement",childProperty:"fontWeight"},titleLineHeight:{propertyType:"child",type:"string",child:"_titleElement",childProperty:"lineHeight"},titleTextContrast:{propertyType:"child",type:"number",child:"_titleElement",childProperty:"textContrast"},titleUppercase:{propertyType:"child",type:"boolean",child:"_titleElement",childProperty:"uppercase"},showSubtitle:{propertyType:"child",type:"boolean",child:"_subtitleElement",childProperty:"show",defaultValue:!1},subtitleWidth:{propertyType:"child",type:"string",child:"_subtitleElement",childProperty:"width"},subtitleHeight:{propertyType:"child",type:"string",child:"_subtitleElement",childProperty:"height"},subtitleMargin:{propertyType:"child",type:"string",child:"_subtitleElement",childProperty:"margin"},subtitlePadding:{propertyType:"child",type:"string",child:"_subtitleElement",childProperty:"padding"},subtitleText:{propertyType:"child",type:"string",child:"_subtitleElement",childProperty:"text",defaultValue:"Subtitle"},localizableSubtitleText:{propertyType:"child",type:"string",child:"_subtitleElement",childProperty:"localizableText"},subtitleTextAlignment:{propertyType:"child",type:"string",child:"_subtitleElement",childProperty:"textAlignment"},subtitleLineClamp:{propertyType:"child",type:"number",child:"_subtitleElement",childProperty:"lineClamp"},subtitleTextWrapping:{propertyType:"child",type:"string",child:"_subtitleElement",childProperty:"textWrapping"},subtitleTextTrimming:{propertyType:"child",type:"string",child:"_subtitleElement",childProperty:"textTrimming"},subtitleFontClass:{propertyType:"child",type:"string",child:"_subtitleElement",childProperty:"fontClass",defaultValue:"Subtitle2"},subtitleFontSize:{propertyType:"child",type:"string",child:"_subtitleElement",childProperty:"fontSize"},subtitleFontWeight:{propertyType:"child",type:"string",child:"_subtitleElement",childProperty:"fontWeight"},subtitleLineHeight:{propertyType:"child",type:"string",child:"_subtitleElement",childProperty:"lineHeight"},subtitleTextContrast:{propertyType:"child",type:"number",child:"_subtitleElement",childProperty:"textContrast"},subtitleUppercase:{propertyType:"child",type:"boolean",child:"_subtitleElement",childProperty:"uppercase"},backgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BackgroundColor"},borderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"},titleForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},subtitleForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},disabledBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledBackgroundColor"},disabledBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledBorderColor"},disabledTitleForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledForegroundColor"},disabledSubtitleForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledForegroundColor"}},A.RadioButtonGroup=RadioButtonGroup}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class ToggleButtonGroup extends x.UI.GroupBase{constructor(A,V){super(A,V),this._containerElement=null,this._titleElement=null,this._subtitleElement=null,this.addPropertyList(ToggleButtonGroup,ToggleButtonGroup.propertyList),this.defaultConstructor(A,this.inlineOptions,x.UI.ToggleButtonGroup.controlName,x.UI.ToggleButtonGroup.className)}createTemplate(){if(x.Utilities.isInDesignMode())return this._containerElement=document.createElement("div"),x.Utilities.addClass(this._containerElement,"vw-togglebuttongroup__container"),x.Utilities.reparentChildren(this.element,this._containerElement),this.element.innerHTML=['<div class="vw-togglebuttongroup__title" data-win-control="VisiWin.UI.TextBlock"></div>','<div class="vw-togglebuttongroup__subtitle" data-win-control="VisiWin.UI.TextBlock"></div>'].join("\n"),this._titleElement=this.element.firstElementChild,this._subtitleElement=this._titleElement.nextElementSibling,this.element.appendChild(this._containerElement),this.processElements([this._titleElement,this._subtitleElement]);var A=null!=this.inlineOptions.showTitle?this.inlineOptions.showTitle:this.getStyleProperty("showTitle")?this.getStyleProperty("showTitle"):x.UI.ToggleButtonGroup.propertyList.showTitle.defaultValue,V=null!=this.inlineOptions.showSubtitle?this.inlineOptions.showSubtitle:this.getStyleProperty("showSubtitle")?this.getStyleProperty("showSubtitle"):x.UI.ToggleButtonGroup.propertyList.showSubtitle.defaultValue,R="";return this._containerElement=document.createElement("div"),x.Utilities.addClass(this._containerElement,"vw-togglebuttongroup__container"),x.Utilities.reparentChildren(this.element,this._containerElement),A&&(R+='<div class="vw-togglebuttongroup__title" data-win-control="VisiWin.UI.TextBlock"></div>'),V&&(R+='<div class="vw-togglebuttongroup__subtitle" data-win-control="VisiWin.UI.TextBlock"></div>'),this.element.innerHTML=R,A?(this._titleElement=this.element.firstElementChild,V&&(this._subtitleElement=this._titleElement.nextElementSibling)):V&&(this._subtitleElement=this.element.firstElementChild),this.element.appendChild(this._containerElement),this.processElements([this._titleElement,this._subtitleElement])}_updateColors(x){this.disabled?(this.setColor("disabledBackgroundColor","backgroundColor"),this.setColor("disabledBorderColor","borderColor"),this._titleElement&&this._titleElement.winControl&&this.setColor("disabledTitleForegroundColor","foregroundColor",null,"_titleElement"),this._subtitleElement&&this._subtitleElement.winControl&&this.setColor("disabledSubtitleForegroundColor","foregroundColor",null,"_subtitleElement")):(this.setColor("backgroundColor"),this.setColor("borderColor"),this._titleElement&&this._titleElement.winControl&&this.setColor("titleForegroundColor","foregroundColor",null,"_titleElement"),this._subtitleElement&&this._subtitleElement.winControl&&this.setColor("subtitleForegroundColor","foregroundColor",null,"_subtitleElement"))}_updateLayout(x){if("updateLayout"==x.changeName||"orientation"==x.changeName)switch(this.orientation){case"Vertical":this._containerElement.style.flexDirection="column";break;case"VerticalReverse":this._containerElement.style.flexDirection="column-reverse";break;case"HorizontalReverse":this._containerElement.style.flexDirection="row-reverse";break;default:this._containerElement.style.flexDirection="row"}if("updateLayout"==x.changeName||"alignItems"==x.changeName)switch(this.alignItems){case"Center":this._containerElement.style.alignItems="center";break;case"Start":this._containerElement.style.alignItems="flex-start";break;case"End":this._containerElement.style.alignItems="flex-end";break;case"Baseline":this._containerElement.style.alignItems="baseline";break;default:this._containerElement.style.alignItems="stretch"}if("updateLayout"==x.changeName||"justifyContent"==x.changeName)switch(this.justifyContent){case"End":this._containerElement.style.justifyContent="flex-end";break;case"Center":this._containerElement.style.justifyContent="center";break;case"Space-between":this._containerElement.style.justifyContent="space-between";break;case"Space-around":this._containerElement.style.justifyContent="space-around";break;case"Space-evenly":this._containerElement.style.justifyContent="space-evenly";break;default:this._containerElement.style.justifyContent="flex-start"}if("updateLayout"==x.changeName||"alignContent"==x.changeName)switch(this.alignContent){case"Center":this._containerElement.style.alignContent="center";break;case"Start":this._containerElement.style.alignContent="flex-start";break;case"End":this._containerElement.style.alignContent="flex-end";break;case"Space-between":this._containerElement.style.alignContent="space-between";break;case"Space-around":this._containerElement.style.alignContent="space-around";break;default:this._containerElement.style.alignContent="stretch"}"updateLayout"!=x.changeName&&"wrap"!=x.changeName||(this._containerElement.style.flexWrap=this.wrap?"wrap":"nowrap")}dispose(){return super.dispose()}}ToggleButtonGroup.namespace="VisiWin.UI",ToggleButtonGroup.controlName="ToggleButtonGroup",ToggleButtonGroup.className="vw-togglebuttongroup",ToggleButtonGroup.propertyList={designerType:{propertyType:"base",type:"string",defaultValue:"ContentControl"},registerTargetId:{propertyType:"base",defaultValue:"ToggleGroup"},pageOff:{propertyType:"member",type:"string"},viewOff:{propertyType:"member",type:"string"},pageOptions:{propertyType:"member",type:"any",invisible:!0,defaultValue:{}},regionId:{propertyType:"member",type:"string"},targetProperty:{propertyType:"member",type:"string"},orientation:{propertyType:"member",type:"string",defaultValue:"Horizontal"},alignItems:{propertyType:"member",type:"string",defaultValue:"Start"},justifyContent:{propertyType:"member",type:"string",defaultValue:"Start"},alignContent:{propertyType:"member",type:"string",defaultValue:"Start"},wrap:{propertyType:"member",type:"boolean",defaultValue:!1},showTitle:{propertyType:"child",type:"boolean",child:"_titleElement",childProperty:"show",defaultValue:!0},titleWidth:{propertyType:"child",type:"string",child:"_titleElement",childProperty:"width"},titleHeight:{propertyType:"child",type:"string",child:"_titleElement",childProperty:"height"},titleMargin:{propertyType:"child",type:"string",child:"_titleElement",childProperty:"margin"},titlePadding:{propertyType:"child",type:"string",child:"_titleElement",childProperty:"padding"},titleText:{propertyType:"child",type:"string",child:"_titleElement",childProperty:"text",defaultValue:"Title"},localizableTitleText:{propertyType:"child",type:"string",child:"_titleElement",childProperty:"localizableText"},titleTextAlignment:{propertyType:"child",type:"string",child:"_titleElement",childProperty:"textAlignment"},titleLineClamp:{propertyType:"child",type:"number",child:"_titleElement",childProperty:"lineClamp"},titleTextWrapping:{propertyType:"child",type:"string",child:"_titleElement",childProperty:"textWrapping"},titleTextTrimming:{propertyType:"child",type:"string",child:"_titleElement",childProperty:"textTrimming"},titleFontClass:{propertyType:"child",type:"string",child:"_titleElement",childProperty:"fontClass",defaultValue:"Title"},titleFontSize:{propertyType:"child",type:"string",child:"_titleElement",childProperty:"fontSize"},titleFontWeight:{propertyType:"child",type:"string",child:"_titleElement",childProperty:"fontWeight"},titleLineHeight:{propertyType:"child",type:"string",child:"_titleElement",childProperty:"lineHeight"},titleTextContrast:{propertyType:"child",type:"number",child:"_titleElement",childProperty:"textContrast"},titleUppercase:{propertyType:"child",type:"boolean",child:"_titleElement",childProperty:"uppercase"},showSubtitle:{propertyType:"child",type:"boolean",child:"_subtitleElement",childProperty:"show",defaultValue:!1},subtitleWidth:{propertyType:"child",type:"string",child:"_subtitleElement",childProperty:"width"},subtitleHeight:{propertyType:"child",type:"string",child:"_subtitleElement",childProperty:"height"},subtitleMargin:{propertyType:"child",type:"string",child:"_subtitleElement",childProperty:"margin"},subtitlePadding:{propertyType:"child",type:"string",child:"_subtitleElement",childProperty:"padding"},subtitleText:{propertyType:"child",type:"string",child:"_subtitleElement",childProperty:"text",defaultValue:"Subtitle"},localizableSubtitleText:{propertyType:"child",type:"string",child:"_subtitleElement",childProperty:"localizableText"},subtitleTextAlignment:{propertyType:"child",type:"string",child:"_subtitleElement",childProperty:"textAlignment"},subtitleLineClamp:{propertyType:"child",type:"number",child:"_subtitleElement",childProperty:"lineClamp"},subtitleTextWrapping:{propertyType:"child",type:"string",child:"_subtitleElement",childProperty:"textWrapping"},subtitleTextTrimming:{propertyType:"child",type:"string",child:"_subtitleElement",childProperty:"textTrimming"},subtitleFontClass:{propertyType:"child",type:"string",child:"_subtitleElement",childProperty:"fontClass",defaultValue:"Subtitle2"},subtitleFontSize:{propertyType:"child",type:"string",child:"_subtitleElement",childProperty:"fontSize"},subtitleFontWeight:{propertyType:"child",type:"string",child:"_subtitleElement",childProperty:"fontWeight"},subtitleLineHeight:{propertyType:"child",type:"string",child:"_subtitleElement",childProperty:"lineHeight"},subtitleTextContrast:{propertyType:"child",type:"number",child:"_subtitleElement",childProperty:"textContrast"},subtitleUppercase:{propertyType:"child",type:"boolean",child:"_subtitleElement",childProperty:"uppercase"},backgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BackgroundColor"},borderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"},titleForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},subtitleForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},disabledBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledBackgroundColor"},disabledBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledBorderColor"},disabledTitleForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledForegroundColor"},disabledSubtitleForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledForegroundColor"}},A.ToggleButtonGroup=ToggleButtonGroup}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class TabBar extends x.UI.ControlBase{constructor(A,V){super(A,V),this.showLoadingSymbol=!1,this._underlineElement=null,this._regionElement=null,this._pageNavigatorElement=null,this._itemsCollection=[],this._menusCollection=[],this._underlineCollection=[],this._selectedItem=null,this._itemIndex=0,this._minMenuItemIndex=null,this._maxMenuItemIndex=null,this._boundItemsNotifyPropertyChangedHandler=this._itemsNotifyPropertyChangedHandler.bind(this),this._boundItemsActionHandler=this._itemsActionHandler.bind(this),this._boundMenusActionHandler=this._menusActionHandler.bind(this),this._boundRegionNavigatedHandler=this._regionNavigatedHandler.bind(this),this._boundPageNavigatorNavigatedHandler=this._pageNavigatorNavigatedHandler.bind(this),this.addPropertyList(TabBar,TabBar.propertyList),this.defaultConstructor(A,this.inlineOptions,x.UI.TabBar.controlName,x.UI.TabBar.className)}createTemplate(){return this._underlineElement=document.createElement("span"),x.Utilities.addClass(this._underlineElement,"vw-tabbar__underline"),this.element.appendChild(this._underlineElement),null}resizeHandler(){this._updateLayoutBase("event","sizeChanged",null,null)}registerChild(x,A,V,R){return!this._checkIfListContains(this.registerTargetId,A)||(V&&V.winControl&&(this._registerItem(x,A,V,R),V.winControl.addEventListener("notifyPropertyChanged",this._boundItemsNotifyPropertyChangedHandler)),!1)}ready(){this._setNavigation()}_updateColors(){this.disabled?(this.setColor("disabledBackgroundColor","backgroundColor"),this.setColor("disabledBorderColor","borderColor"),this.setColor("disabledUnderlineColor","backgroundColor","_underlineElement")):(this.setColor("backgroundColor"),this.setColor("borderColor"),this.setColor("underlineColor","backgroundColor","_underlineElement"))}_updateLayout(A){if("updateLayout"===A.changeName||"alignItems"===A.changeName)switch(this.alignItems){case"Center":this.element.style.alignItems="center";break;case"Start":this.element.style.alignItems="flex-start";break;case"End":this.element.style.alignItems="flex-end";break;case"Baseline":this.element.style.alignItems="baseline";break;default:this.element.style.alignItems="stretch"}if("updateLayout"!==A.changeName&&"orientation"!==A.changeName||(this.orientation===x.UI.Enums.Orientation.Horizontal?this.element.style.flexDirection="row":this.orientation===x.UI.Enums.Orientation.Vertical&&(this.element.style.flexDirection="column")),"updateLayout"===A.changeName||"justifyContent"===A.changeName)switch(this.justifyContent){case"End":this.element.style.justifyContent="flex-end";break;case"Center":this.element.style.justifyContent="center";break;case"Space-between":this.element.style.justifyContent="space-between";break;case"Space-around":this.element.style.justifyContent="space-around";break;case"Space-evenly":this.element.style.justifyContent="space-evenly";break;default:this.element.style.justifyContent="flex-start"}if("updateLayout"===A.changeName||"alignContent"===A.changeName)switch(this.alignContent){case"Center":this.element.style.alignContent="center";break;case"Start":this.element.style.alignContent="flex-start";break;case"End":this.element.style.alignContent="flex-end";break;case"Space-between":this.element.style.alignContent="space-between";break;case"Space-around":this.element.style.alignContent="space-around";break;default:this.element.style.alignContent="stretch"}if("updateLayout"!==A.changeName&&"wrap"!==A.changeName||(this.element.style.flexWrap=this.wrap?"wrap":"nowrap"),"updateLayout"!==A.changeName&&"showUnderline"!==A.changeName||(this._underlineElement.style.display=this.showUnderline?"block":"none"),"updateLayout"!==A.changeName&&"underlineTransition"!==A.changeName||x.Utilities.isInDesignMode()&&(this._underlineElement.style.transition=""),"regionId"!==A.changeName&&"startViewName"!==A.changeName&&"startPageName"!==A.changeName||this._setNavigation(),("updateLayout"===A.changeName||"regionId"===A.changeName)&&this._itemsCollection&&this._itemsCollection.length>0)for(let x=0;x<this._itemsCollection.length;x++)this._itemsCollection[x]&&this._itemsCollection[x].winControl&&(this._itemsCollection[x].winControl.regionId=this.regionId);if("updateLayout"!==A.changeName&&this.showUnderline){let A=null;if(this._underlineCollection&&this._underlineCollection.length>0)for(let x=0;x<this._underlineCollection.length;x++)this._underlineCollection[x]&&this._underlineCollection[x].checked&&(A=this._underlineCollection[x]);A&&A.element?this.orientation===x.UI.Enums.Orientation.Horizontal?(this._underlineElement.style.width=A.width,this._underlineElement.style.left=A._element.offsetLeft+"px"):this.orientation===x.UI.Enums.Orientation.Vertical&&(this._underlineElement.style.width=this.element.clientWidth+"px",this._underlineElement.style.top=A._element.offsetTop+A._element.offsetHeight+"px"):(this._underlineElement.style.width="0px",this._underlineElement.style.left="0px")}}_registerItem(x,A,V,R){switch(x){case"TabButton":V.winControl.remoteActionHandler=V.winControl.actionHandler,V.winControl.actionHandler=this._boundItemsActionHandler,V.winControl.index=this._itemIndex++,this.regionId&&(V.winControl.regionId=this.regionId),this._itemsCollection.push(V.winControl),this._underlineCollection.push(V.winControl);break;case"MenuItem":V.winControl.remoteActionHandler=V.winControl.actionHandler,V.winControl.actionHandler=this._boundItemsActionHandler,V.winControl.index=this._itemIndex++,this.regionId&&(V.winControl.regionId=this.regionId),null===this._minMenuItemIndex&&(this._minMenuItemIndex=V.winControl.index),(null===this._maxMenuItemIndex||V.winControl.index>this._maxMenuItemIndex)&&(this._maxMenuItemIndex=V.winControl.index),this._itemsCollection.push(V.winControl),V.winControl._textElement&&V.winControl._textElement.winControl&&V.winControl._textElement.winControl.attach();break;case"TabMenuButton":V.winControl.remoteActionHandler=V.winControl.actionHandler,V.winControl.actionHandler=this._boundMenusActionHandler,V.winControl.minMenuItemIndex=this._minMenuItemIndex,V.winControl.maxMenuItemIndex=this._maxMenuItemIndex,this._minMenuItemIndex=null,this._maxMenuItemIndex=null,this._menusCollection.push(V.winControl),this._underlineCollection.push(V.winControl);break;default:return!0}return!1}_itemsNotifyPropertyChangedHandler(x){if(x){if("hover"===x.detail.changeName||"pressed"===x.detail.changeName)return;this._updateLayoutBase("property","itemPropertyChanged",x.detail.newValue,x.detail.oldValue)}}_itemsActionHandler(x){this._itemsCollection[this._selectedItem]&&(this._itemsCollection[this._selectedItem].checkedIntern=!1),this._selectedItem=x.index,x.remoteActionHandler(x),this._showHideMenu(),this._updateLayoutBase("event","itemsChanged",null,null)}_menusActionHandler(x){this._showHideMenu()}_regionNavigatedHandler(x){if(this._itemsCollection&&this._itemsCollection.length)for(let A=0;A<this._itemsCollection.length;A++){const V=this._itemsCollection[A];V.viewName&&V.viewName===x.detail.destination?V.checkedIntern=!0:V.checkedIntern=!1}}_pageNavigatorNavigatedHandler(x){if(this._itemsCollection&&this._itemsCollection.length)for(let A=0;A<this._itemsCollection.length;A++){const V=this._itemsCollection[A];V.pageName&&V.pageName===x.detail.destination?V.checkedIntern=!0:V.checkedIntern=!1}}_checkIfListContains(x,A){const V=x.split(",");for(let x=0;x<V.length;x++)if(V[x]===A)return!0;return!1}_setNavigation(){this._regionElement&&this._regionElement.winControl&&(this._regionElement.winControl.removeEventListener("navigated",this._boundRegionNavigatedHandler),this._regionElement=null),this._pageNavigatorElement&&this._pageNavigatorElement[0]&&this._pageNavigatorElement[0].winControl&&(this._pageNavigatorElement[0].winControl.removeEventListener("navigated",this._boundPageNavigatorNavigatedHandler),this._pageNavigatorElement=null),this._regionElement=document.getElementById(x.Utilities.removeHashFromId(this.regionId)),this._pageNavigatorElement=document.getElementsByClassName("vw-apppagenavigator"),this._regionElement&&this._regionElement.winControl?(this._regionElement.winControl.addEventListener("navigated",this._boundRegionNavigatedHandler),this.startViewName&&(this._regionElement.winControl.showLoadingSymbol=this.showLoadingSymbol,this._regionElement.winControl.viewName=this.startViewName)):this._pageNavigatorElement&&this._pageNavigatorElement[0]&&this._pageNavigatorElement[0].winControl&&(this._pageNavigatorElement[0].winControl.addEventListener("navigated",this._boundPageNavigatorNavigatedHandler),this.startPageName&&(x.AppServices.NavigationService.startPage=this.startPageName))}_unselectItems(){if(this._itemsCollection&&this._itemsCollection.length>0)for(let x=0;x<this._itemsCollection.length;x++)this._itemsCollection[x].checked=!1}_showHideMenu(){if(this._menusCollection&&this._menusCollection.length>0)for(let x=0;x<this._menusCollection.length;x++){const A=this._menusCollection[x];"TabMenuButton"===A.controlName&&(this._selectedItem>=A.minMenuItemIndex&&this._selectedItem<=A.maxMenuItemIndex?A.checkedIntern=!0:A.checkedIntern=!1),A.hide()}}dispose(){return this._regionElement&&this._regionElement.winControl&&(this._regionElement.winControl.removeEventListener("navigated",this._boundRegionNavigatedHandler),this._regionElement=null),this._pageNavigatorElement&&this._pageNavigatorElement[0]&&this._pageNavigatorElement[0].winControl&&(this._pageNavigatorElement[0].winControl.removeEventListener("navigated",this._boundPageNavigatorNavigatedHandler),this._pageNavigatorElement=null),super.dispose()}}TabBar.namespace="VisiWin.UI",TabBar.controlName="TabBar",TabBar.className="vw-tabbar",TabBar.propertyList={designerType:{propertyType:"base",type:"string",defaultValue:"ContentControl"},registerSourceId:{propertyType:"base",defaultValue:"Selector"},registerTargetId:{propertyType:"base",defaultValue:"TabBar,Group"},alignItems:{propertyType:"member",type:"string",defaultValue:"End"},justifyContent:{propertyType:"member",type:"string",defaultValue:"Start"},alignContent:{propertyType:"member",type:"string",defaultValue:"Center"},wrap:{propertyType:"member",type:"boolean",defaultValue:!1},orientation:{propertyType:"member",type:"string",defaultValue:"Horizontal"},showUnderline:{propertyType:"member",type:"boolean",defaultValue:!0},underlineHeight:{propertyType:"style",type:"string",element:"_underlineElement",style:"height"},underlineTransition:{propertyType:"member",type:"string"},underlineMode:{propertyType:"member",type:"string",defaultValue:"TabWidth"},startPageName:{propertyType:"member",type:"string"},startViewName:{propertyType:"member",type:"string"},regionId:{propertyType:"member",type:"string"},backgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BackgroundColor"},borderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"},underlineColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},disabledBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledBackgroundColor"},disabledBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledBorderColor"},disabledUnderlineColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledForegroundColor"},showLoadingSymbol:{propertyType:"member",type:"boolean",defaultValue:!1}},A.TabBar=TabBar}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class Divider extends x.UI.ControlBase{constructor(A,V){super(A,V),this.addPropertyList(Divider,Divider.propertyList),this.defaultConstructor(A,this.inlineOptions,x.UI.Divider.controlName,x.UI.Divider.className)}dispose(){return super.dispose()}}Divider.namespace="VisiWin.UI",Divider.controlName="Divider",Divider.className="vw-divider",Divider.propertyList={designerType:{propertyType:"base",type:"string",defaultValue:"Control"},backgroundColor:{propertyType:"memberStyle",type:"string",resourceValue:["getTheme"],defaultValue:"@DividerColor"}},A.Divider=Divider}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class Div extends x.UI.ControlBase{constructor(A,V){super(A,V),this.addPropertyList(Div,Div.propertyList),this.defaultConstructor(A,this.inlineOptions,x.UI.Div.controlName,x.UI.Div.className)}dispose(){return super.dispose()}}Div.namespace="VisiWin.UI",Div.controlName="Div",Div.className="vw-div",Div.propertyList={designerType:{propertyType:"base",type:"string",defaultValue:"Control"},backgroundColor:{propertyType:"memberStyle",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},borderColor:{propertyType:"memberStyle",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"}},A.Div=Div}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class Progress extends x.UI.VariableBase{constructor(x,A){super(x,A),this._secondaryProgressElement=null,this._activeProgressElement=null,A&&A.debug,this.addPropertyList(Progress,Progress.ProgressOptionsList),this.defaultConstructor(x,A,Progress.controlName,Progress.className)}createControl(x,A){return this.element.innerHTML=['<div class="vw-progress__secondary"></div>','<div class="vw-progress__active"></div>'].join("\n"),this._secondaryProgressElement=this.element.firstElementChild,this._activeProgressElement=this._secondaryProgressElement.nextElementSibling,null}_updateLayout(A){if(this.indeterminate)x.Utilities.addClass(this._activeProgressElement,"indeterminate");else if(null!=this.value&&void 0!==this.value){this._clampValue(this.value);var V=100*this._calcRatio(this.value);this._transformProgress(this._activeProgressElement,V),this._secondaryProgress=this._clampValue(this.secondaryProgressValue);var R=100*this._calcRatio(this.secondaryProgressValue);this._transformProgress(this._secondaryProgressElement,R)}}_calcRatio(x){return(this._clampValue(x)-this.min)/(this.max-this.min)}_clampValue(x){return Math.min(this.max,Math.max(this.min,this._calcStep(x)))}_calcStep(x){return this.step?Math.round(x/this.step)/(1/this.step):x}_transformProgress(x,A){var V="scaleX("+A/100+")";x.style.transform=x.style.webkitTransform=V}dispose(){return super.dispose()}}Progress.namespace="VisiWin.UI",Progress.controlName="Progress",Progress.className="vw-progress",Progress.ProgressOptionsList={min:{propertyType:"member",type:"number",defaultValue:0},max:{propertyType:"member",type:"number",defaultValue:100},step:{propertyType:"member",type:"number",defaultValue:1},indeterminate:{propertyType:"member",type:"boolean",defaultValue:!1},secondaryProgressValue:{propertyType:"member",type:"number",defaultValue:0},activeProgressColor:{propertyType:"memberStyle",type:"string",element:"_activeProgressElement",style:"background",resourceValue:["getTheme"]},secondaryProgressColor:{propertyType:"memberStyle",type:"string",element:"_secondaryProgressElement",style:"background",resourceValue:["getTheme"]}},A.Progress=Progress}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class Range extends x.UI.ControlBase{constructor(x,A){super(x,A),this._oldValue=0,A&&A.debug,this.inputEventsEnable=!0,this.addPropertyList(Range,Range.RangeOptionsList),this.defaultConstructor(x,A,Range.controlName,Range.className)}_calcRatio(x){return(this._clampValue(x)-this.min)/(this.max-this.min)}_clampValue(x){return Math.min(this.max,Math.max(this.min,this._calcStep(x)))}_calcStep(x){return this.step?Math.round(x/this.step)/(1/this.step):x}_validateValue(){var x=this._clampValue(this.value);return this.value=this._oldValue=isNaN(x)?this._oldValue:x,this.value!==x}_updateLayout(x){this._validateValue(),this.ratio=100*this._calcRatio(this.value)}dispose(){return super.dispose()}}Range.namespace="VisiWin.UI",Range.controlName="Range",Range.className="vw-range",Range.RangeOptionsList={value:{propertyType:"member",type:"number",defaultValue:0},min:{propertyType:"member",type:"number",defaultValue:0},max:{propertyType:"member",type:"number",defaultValue:100},step:{propertyType:"member",type:"number",defaultValue:1},ratio:{propertyType:"member",type:"number",defaultValue:0}},A.Range=Range}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class ExpansionPanel extends x.UI.ControlBase{constructor(A,V){super(A,V),this.addPropertyList(ExpansionPanel,ExpansionPanel.propertyList),this.defaultConstructor(A,this.inlineOptions,x.UI.ExpansionPanel.controlName,x.UI.ExpansionPanel.className)}dispose(){return super.dispose()}}ExpansionPanel.namespace="VisiWin.UI",ExpansionPanel.controlName="ExpansionPanel",ExpansionPanel.className="vw-expansionpanel",ExpansionPanel.propertyList={designerType:{propertyType:"base",type:"string",defaultValue:"ContentControl"},shadow:{propertyType:"base",type:"string",defaultValue:"@Elevation_z1"},backgroundColor:{propertyType:"memberStyle",type:"string",resourceValue:["getTheme"],defaultValue:"@BackgroundColor"},borderColor:{propertyType:"memberStyle",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"}},A.ExpansionPanel=ExpansionPanel}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class ExpansionPanelHeader extends x.UI.ToggleButtonBase{constructor(A,V){super(A,V),this._labelElement=null,this._descriptionTextElement=null,this._symbolElement=null,this.addPropertyList(ExpansionPanelHeader,ExpansionPanelHeader.propertyList),this.defaultConstructor(A,this.inlineOptions,x.UI.ExpansionPanelHeader.controlName,x.UI.ExpansionPanelHeader.className)}createTemplate(){return this.element.innerHTML=['<div class="vw-expansionpanelheader__label" data-win-control="VisiWin.UI.TextBlock"></div>','<div class="vw-expansionpanelheader__descriptiontext" data-win-control="VisiWin.UI.TextBlock"></div>','<div class="vw-expansionpanelheader__symbol" data-win-control="VisiWin.UI.Symbol"></div>'].join("\n"),this._labelElement=this.element.firstElementChild,this._descriptionTextElement=this._labelElement.nextElementSibling,this._symbolElement=this._descriptionTextElement.nextElementSibling,this.processElements([this._labelElement,this._descriptionTextElement,this._symbolElement])}ready(){"Control"==this.designerType&&this._updateLayoutBase("property","ready",null,null)}_updateColors(x){this.setColor("backgroundColor"),this._labelElement&&this._labelElement.winControl&&this.setColor("labelForegroundColor","foregroundColor",null,"_labelElement"),this._descriptionTextElement&&this._descriptionTextElement.winControl&&this.setColor("descriptionTextForegroundColor","foregroundColor",null,"_descriptionTextElement"),this._symbolElement&&this._symbolElement.winControl&&this.setColor("symbolForegroundColor","foregroundColor",null,"_symbolElement"),this.setColor("borderColor")}_updateLayout(A){"ready"!=A.changeName&&"checked"!=A.changeName&&"expandedSymbol"!=A.changeName&&"collapsedSymbol"!=A.changeName||(this._symbolElement&&this._symbolElement.winControl&&(this.checked?this._symbolElement.winControl.symbol=this.expandedSymbol:this._symbolElement.winControl.symbol=this.collapsedSymbol),this.element.nextElementSibling&&this.element.nextElementSibling.winControl&&"VisiWin.UI.ExpansionPanelContent"==this.element.nextElementSibling.winControl.controlType&&(this.checked?this.element.nextElementSibling.winControl.checked=!0:this.element.nextElementSibling.winControl.checked=!1),this.element.parentElement&&this.element.parentElement.winControl&&"VisiWin.UI.ExpansionPanel"==this.element.parentElement.winControl.controlType&&(this.checked?(x.Utilities.removeClass(this.element.parentElement.winControl.element,"unchecked"),x.Utilities.addClass(this.element.parentElement.winControl.element,"checked")):(x.Utilities.removeClass(this.element.parentElement.winControl.element,"checked"),x.Utilities.addClass(this.element.parentElement.winControl.element,"unchecked"))))}dispose(){return super.dispose()}}ExpansionPanelHeader.namespace="VisiWin.UI",ExpansionPanelHeader.controlName="ExpansionPanelHeader",ExpansionPanelHeader.className="vw-expansionpanelheader",ExpansionPanelHeader.propertyList={designerType:{propertyType:"base",type:"string",defaultValue:"Control"},registerSourceId:{propertyType:"base",defaultValue:"ExpansionPanelHeader"},checked:{propertyType:"base",type:"boolean",defaultValue:!1},showLabel:{propertyType:"child",type:"boolean",child:"_labelElement",childProperty:"show",defaultValue:!0},labelWidth:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"width"},labelHeight:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"height"},labelMargin:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"margin"},labelPadding:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"padding"},labelText:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"text",forceOverwrite:!0,defaultValue:"Label"},localizableLabelText:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"localizableText",forceOverwrite:!0},labelTextAlignment:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"textAlignment"},labelLineClamp:{propertyType:"child",type:"number",child:"_labelElement",childProperty:"lineClamp"},labelTextWrapping:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"textWrapping"},labelTextTrimming:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"textTrimming"},labelFontClass:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"fontClass"},labelFontSize:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"fontSize"},labelFontWeight:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"fontWeight"},labelLineHeight:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"lineHeight"},labelTextContrast:{propertyType:"child",type:"number",child:"_labelElement",childProperty:"textContrast"},labelUppercase:{propertyType:"child",type:"boolean",child:"_labelElement",childProperty:"uppercase"},showDescriptionText:{propertyType:"child",type:"boolean",child:"_descriptionTextElement",childProperty:"show",defaultValue:!0},descriptionTextWidth:{propertyType:"child",type:"string",child:"_descriptionTextElement",childProperty:"width"},descriptionTextHeight:{propertyType:"child",type:"string",child:"_descriptionTextElement",childProperty:"height"},descriptionTextMargin:{propertyType:"child",type:"string",child:"_descriptionTextElement",childProperty:"margin"},descriptionTextPadding:{propertyType:"child",type:"string",child:"_descriptionTextElement",childProperty:"padding"},descriptionText:{propertyType:"child",type:"string",child:"_descriptionTextElement",childProperty:"text",defaultValue:"DescriptionText"},localizableDescriptionText:{propertyType:"child",type:"string",child:"_descriptionTextElement",childProperty:"localizableText"},descriptionTextAlignment:{propertyType:"child",type:"string",child:"_descriptionTextElement",childProperty:"textAlignment"},descriptionTextLineClamp:{propertyType:"child",type:"number",child:"_descriptionTextElement",childProperty:"lineClamp"},descriptionTextWrapping:{propertyType:"child",type:"string",child:"_descriptionTextElement",childProperty:"textWrapping"},descriptionTextTrimming:{propertyType:"child",type:"string",child:"_descriptionTextElement",childProperty:"textTrimming"},descriptionTextFontClass:{propertyType:"child",type:"string",child:"_descriptionTextElement",childProperty:"fontClass"},descriptionTextFontSize:{propertyType:"child",type:"string",child:"_descriptionTextElement",childProperty:"fontSize"},descriptionTextFontWeight:{propertyType:"child",type:"string",child:"_descriptionTextElement",childProperty:"fontWeight"},descriptionTextLineHeight:{propertyType:"child",type:"string",child:"_descriptionTextElement",childProperty:"lineHeight"},descriptionTextContrast:{propertyType:"child",type:"number",child:"_descriptionTextElement",childProperty:"textContrast",defaultValue:.54},descriptionTextUppercase:{propertyType:"child",type:"boolean",child:"_descriptionTextElement",childProperty:"uppercase"},showSymbol:{propertyType:"child",type:"boolean",child:"_symbolElement",childProperty:"show",defaultValue:!0},iconFont:{propertyType:"child",type:"string",child:"_symbolElement"},collapsedSymbol:{propertyType:"member",type:"string",defaultValue:"expand_more"},expandedSymbol:{propertyType:"member",type:"string",defaultValue:"expand_less"},symbolType:{propertyType:"child",type:"string",child:"_symbolElement"},symbolSize:{propertyType:"child",type:"string",child:"_symbolElement"},symbolMargin:{propertyType:"child",type:"string",child:"_symbolElement",childProperty:"margin"},backgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},labelForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},descriptionTextForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},symbolForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},borderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"}},A.ExpansionPanelHeader=ExpansionPanelHeader}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class ExpansionPanelContent extends x.UI.ControlBase{constructor(A,V){super(A,V),this.addPropertyList(ExpansionPanelContent,ExpansionPanelContent.propertyList),this.defaultConstructor(A,this.inlineOptions,x.UI.ExpansionPanelContent.controlName,x.UI.ExpansionPanelContent.className)}_updateLayout(A){"checked"!=A.changeName&&"maxHeight"!=A.changeName||(x.Utilities.isInDesignMode()&&(this.element.style.transition=""),this.checked?this.element.style.maxHeight=this.maxHeight:this.element.style.maxHeight="0px")}dispose(){return super.dispose()}}ExpansionPanelContent.namespace="VisiWin.UI",ExpansionPanelContent.controlName="ExpansionPanelContent",ExpansionPanelContent.className="vw-expansionpanelcontent",ExpansionPanelContent.propertyList={designerType:{propertyType:"base",type:"string",defaultValue:"ContentControl"},checked:{propertyType:"member",type:"boolean"},maxHeight:{propertyType:"member",type:"string",defaultValue:"500px",forceOverwrite:!0},overflow:{propertyType:"style",type:"string"},backgroundColor:{propertyType:"memberStyle",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},borderColor:{propertyType:"memberStyle",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"}},A.ExpansionPanelContent=ExpansionPanelContent}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class ExpansionPanelGroup extends x.UI.ControlBase{constructor(A,V){super(A,V),this._itemsCollection=[],this._selectedItem=null,this._itemIndex=0,this._boundItemsActionHandler=this._itemsActionHandler.bind(this),this.addPropertyList(ExpansionPanelGroup,ExpansionPanelGroup.propertyList),this.defaultConstructor(A,this.inlineOptions,x.UI.ExpansionPanelGroup.controlName,x.UI.ExpansionPanelGroup.className)}ready(){this._updateLayoutBase("property","ready",null,null)}registerChild(x,A,V,R){return A!==this.registerTargetId||(V&&V.winControl&&(V.winControl.dragThreshold=10,this._itemsCollection.push(V.winControl),V.winControl.actionHandler&&(V.winControl.remoteActionHandler=V.winControl.actionHandler.bind(V.winControl),V.winControl.actionHandler=this._boundItemsActionHandler.bind(this),V.winControl.index=this._itemIndex),this._itemIndex++),!1)}_itemsActionHandler(x){if(this._selectedItem!==x.index&&(this._selectedItem=x.index,this._itemsCollection&&this._itemsCollection.length>0))for(var A=0;A<this._itemsCollection.length;A++)A!==this._selectedItem&&(this._itemsCollection[A].checkedIntern=!1);this._itemsCollection[this._selectedItem].remoteActionHandler.call(this._itemsCollection[this._selectedItem])}_updateLayout(x){if(("ready"==x.changeName||"selectedIndex"==x.changeName)&&this._itemsCollection&&this._itemsCollection.length>0)for(var A=0;A<this._itemsCollection.length;A++)this._itemsCollection[A].index==this.selectedIndex?this._itemsCollection[A].checkedIntern=!0:this._itemsCollection[A].checkedIntern=!1}dispose(){if(this._itemsCollection&&this._itemsCollection.length>0){for(var x=0;x<this._itemsCollection.length;x++)this._itemsCollection[x].element.winControl.remoteActionHandler=null,this._itemsCollection[x].element.winControl.actionHandler=null,this._itemsCollection[x]=null;this._itemsCollection=null}return this.selectedIndex=null,this._selectedItem=null,this._itemIndex=null,super.dispose()}}ExpansionPanelGroup.namespace="VisiWin.UI",ExpansionPanelGroup.controlName="ExpansionPanelGroup",ExpansionPanelGroup.className="vw-expansionpanelgroup",ExpansionPanelGroup.propertyList={designerType:{propertyType:"base",type:"string",defaultValue:"ContentControl"},registerTargetId:{propertyType:"base",type:"string",defaultValue:"ExpansionPanelHeader"},selectedIndex:{propertyType:"member",type:"number",defaultValue:-1},backgroundColor:{propertyType:"memberStyle",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},borderColor:{propertyType:"memberStyle",type:"string",resourceValue:["getTheme"],defaultValue:"@DividerColor"}},A.ExpansionPanelGroup=ExpansionPanelGroup}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class Limit extends x.UI.ProviderBase{constructor(A,V){super(A,V),this.addPropertyList(Limit,Limit.LimitPropertyList),this.defaultConstructor(A,this.inlineOptions,x.UI.Limit.controlName,null)}dispose(){return super.dispose()}}Limit.namespace="VisiWin.UI",Limit.controlName="Limit",Limit.LimitPropertyList={designerType:{propertyType:"base",type:"string",defaultValue_DM:"Control"},registerSourceId:{propertyType:"base",type:"string",defaultValue:"Limit"},value:{propertyType:"member",type:"string"},startValue:{propertyType:"member",type:"number"},endValue:{propertyType:"member",type:"number"},iconFont:{propertyType:"member",type:"string"},symbol:{propertyType:"member",type:"string"},symbolType:{propertyType:"member",type:"string"},fillColor:{propertyType:"member",type:"string"}},A.Limit=Limit}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class SymbolPresenter extends x.UI.VariableBase{constructor(x,A){super(x,A),this.limitsCollection=[],this.boundLimitsChangedHandler=this._limitsChangedHandler.bind(this),this.inlineOptions.debug,this.inputEventsEnable=!1,this.addPropertyList(SymbolPresenter,SymbolPresenter.SymbolPresenterPropertyList),this.defaultConstructor(x,this.inlineOptions,SymbolPresenter.controlName,SymbolPresenter.classSymbolPresenter)}createTemplate(){var x=document.createElement("div");return x.innerHTML=['<div class="vw-symbolpresenter__symbol" data-win-control="VisiWin.UI.Symbol"}"></div>'].join("\n"),this._symbolElement=x.firstElementChild,this.element.appendChild(this._symbolElement),this.processElements([this._symbolElement])}registerChild(x,A,V,R){return A!==this.registerTargetId||(V&&V.winControl&&(V.style.display="none",this.limitsCollection.push(V.winControl),V.winControl.addEventListener("notifyPropertyChanged",this.boundLimitsChangedHandler)),!1)}_limitsChangedHandler(x){this._updateLayoutBase("property","limitsCollection",null,null),this.dispatchNotifyPropertyChanged("property","limitsCollection",null,null)}_updateColors(x){this.disabled?(this.element.style.backgroundColor=this.getColor("disabledBackgroundColor"),this._symbolElement.winControl.foregroundColor=this.getColor("disabledForegroundColor"),this.element.style.borderColor=this.getColor("disabledBorderColor")):(this.element.style.backgroundColor=this.getColor("backgroundColor"),this._symbolElement.winControl.foregroundColor=this.getColor("foregroundColor"),this.element.style.borderColor=this.getColor("borderColor"))}_updateLayout(x){if(this._symbolElement.winControl.iconFont=this.iconFont,this._symbolElement.winControl.symbol=this.symbol,this._symbolElement.winControl.symbolType=this.symbolType,this.limitsCollection&&this.limitsCollection.length>0)if(this.bitCalculation)for(var A="MSB"==this.bitNumbering?this.bitNumberSetMSB:this.bitNumberSetLSB,V=0;V<this.limitsCollection.length;V++)null!=this.limitsCollection[V].bitNumber&&null!=A&&this.limitsCollection[V].bitNumber==A&&(null!=this.limitsCollection[V].iconFont&&(this._symbolElement.winControl.iconFont=this.limitsCollection[V].iconFont),null!=this.limitsCollection[V].symbol&&(this._symbolElement.winControl.symbol=this.limitsCollection[V].symbol),null!=this.limitsCollection[V].symbolType&&(this._symbolElement.winControl.symbolType=this.limitsCollection[V].symbolType));else for(V=0;V<this.limitsCollection.length;V++)null!=this.limitsCollection[V].value&&"string"==typeof this.limitsCollection[V].value&&this.validateValue(this.limitsCollection[V].value)&&(null!=this.limitsCollection[V].iconFont&&(this._symbolElement.winControl.iconFont=this.limitsCollection[V].iconFont),null!=this.limitsCollection[V].symbol&&(this._symbolElement.winControl.symbol=this.limitsCollection[V].symbol),null!=this.limitsCollection[V].symbolType&&(this._symbolElement.winControl.symbolType=this.limitsCollection[V].symbolType)),null!=this.limitsCollection[V].startValue&&"number"==typeof this.limitsCollection[V].startValue&&null!=this.limitsCollection[V].endValue&&"number"==typeof this.limitsCollection[V].endValue&&this.validateValue(this.limitsCollection[V].startValue+".."+this.limitsCollection[V].endValue)&&(null!=this.limitsCollection[V].iconFont&&(this._symbolElement.winControl.iconFont=this.limitsCollection[V].iconFont),null!=this.limitsCollection[V].symbol&&(this._symbolElement.winControl.symbol=this.limitsCollection[V].symbol),null!=this.limitsCollection[V].symbolType&&(this._symbolElement.winControl.symbolType=this.limitsCollection[V].symbolType))}dispose(){if(this.limitsCollection&&this.limitsCollection.length>0)for(var x=0;x<this.limitsCollection.length;x++)this.limitsCollection[x].removeEventListener("notifyPropertyChanged",this.boundLimitsChangedHandler);return this.limitsCollection=[],super.dispose()}}SymbolPresenter.namespace="VisiWin.UI",SymbolPresenter.controlName="SymbolPresenter",SymbolPresenter.classSymbolPresenter="vw-symbolpresenter",SymbolPresenter.SymbolPresenterPropertyList={designerType:{propertyType:"base",type:"string",defaultValue:"Control"},registerTargetId:{propertyType:"base",defaultValue:"Limit"},bitCalculation:{propertyType:"base",type:"boolean",defaultValue:!1},bitNumbering:{propertyType:"member",type:"string",defaultValue:"MSB"},limits:{propertyType:"member",type:"string"},iconFont:{propertyType:"member",type:"string",defaultValue:"material-icons"},symbol:{propertyType:"member",type:"string"},symbolType:{propertyType:"member",type:"string",defaultValue:"Icon"},symbolSize:{propertyType:"child",type:"string",child:"_symbolElement"},backgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BackgroundColor"},foregroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},borderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"},disabledBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledBackgroundColor"},disabledForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledForegroundColor"},disabledBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledBorderColor"}},A.SymbolPresenter=SymbolPresenter}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class TextVarOut extends x.UI.ControlBase{constructor(A,V){super(A,V),this._leadingSymbolElement=null,this._labelValueContainerElement=null,this._labelElement=null,this._valueElement=null,this.addPropertyList(TextVarOut,TextVarOut.propertyList),this.defaultConstructor(A,this.inlineOptions,x.UI.TextVarOut.controlName,x.UI.TextVarOut.className)}createTemplate(){if(x.Utilities.isInDesignMode())return this.element.innerHTML=['<div class="vw-textvarout__leadingsymbol" data-win-control="VisiWin.UI.Symbol"></div>','<div class="vw-textvarout__labelvaluecontainer">','<div class="vw-textvarout__label" data-win-control="VisiWin.UI.Label" data-win-options="{showSymbol:'+this.inlineOptions.showSymbol+'}"></div>','<div class="vw-textvarout__value" data-win-control="VisiWin.UI.ValuePresenter" data-win-options="{showUnit:false}"></div>',"</div>"].join("\n"),this._leadingSymbolElement=this.element.firstElementChild,this._labelValueContainerElement=this._leadingSymbolElement.nextElementSibling,this._labelElement=this._labelValueContainerElement.firstElementChild,this._valueElement=this._labelElement.nextElementSibling,this.processElements([this._leadingSymbolElement,this._labelElement,this._valueElement]);var A=null!=this.inlineOptions.showLeadingSymbol?this.inlineOptions.showLeadingSymbol:this.getStyleProperty("showLeadingSymbol")?this.getStyleProperty("showLeadingSymbol"):x.UI.TextVarOut.propertyList.showLeadingSymbol.defaultValue,V="";return A&&(V+='<div class="vw-textvarout__leadingsymbol" data-win-control="VisiWin.UI.Symbol"></div>'),V+=['<div class="vw-textvarout__labelvaluecontainer">','<div class="vw-textvarout__label" data-win-control="VisiWin.UI.Label" data-win-options="{showSymbol:'+this.inlineOptions.showSymbol+'}"></div>','<div class="vw-textvarout__value" data-win-control="VisiWin.UI.ValuePresenter" data-win-options="{showUnit:false}"></div>',"</div>"].join("\n"),this.element.innerHTML=V,A?(this._leadingSymbolElement=this.element.firstElementChild,this._labelValueContainerElement=this._leadingSymbolElement.nextElementSibling,this._labelElement=this._labelValueContainerElement.firstElementChild,this._valueElement=this._labelElement.nextElementSibling):(this._labelValueContainerElement=this.element.firstElementChild,this._labelElement=this._labelValueContainerElement.firstElementChild,this._valueElement=this._labelElement.nextElementSibling),this.processElements([this._leadingSymbolElement,this._labelElement,this._valueElement])}_updateColors(x){this.disabled?(this.setColor("disabledBackgroundColor","backgroundColor"),this.setColor("disabledBackgroundColor","backgroundColor",null,"_labelElement"),this.setColor("disabledBackgroundColor","backgroundColor",null,"_valueElement"),this.setColor("disabledForegroundColor","foregroundColor",null,"_leadingSymbolElement"),this.setColor("disabledForegroundColor","symbolForegroundColor",null,"_labelElement"),this.setColor("disabledForegroundColor","labelForegroundColor",null,"_labelElement"),this.setColor("disabledForegroundColor","valueForegroundColor",null,"_valueElement"),this.setColor("disabledForegroundColor","unitForegroundColor",null,"_valueElement"),this.setColor("disabledBorderColor","borderColor"),this.setColor("disabledBorderColor","borderColor",null,"_labelElement"),this.setColor("disabledBorderColor","borderColor",null,"_valueElement")):(this.setColor("backgroundColor","backgroundColor"),this.setColor("labelContainerBackgroundColor","backgroundColor",null,"_labelElement"),this.setColor("valueContainerBackgroundColor","backgroundColor",null,"_valueElement"),this.setColor("leadingSymbolForegroundColor","foregroundColor",null,"_leadingSymbolElement"),this.setColor("symbolForegroundColor","symbolForegroundColor",null,"_labelElement"),this.setColor("labelForegroundColor","labelForegroundColor",null,"_labelElement"),this.setColor("valueForegroundColor","valueForegroundColor",null,"_valueElement"),this.setColor("unitForegroundColor","unitForegroundColor",null,"_valueElement"),this.setColor("borderColor","borderColor"),this.setColor("labelContainerBorderColor","borderColor",null,"_labelElement"),this.setColor("valueContainerBorderColor","borderColor",null,"_valueElement"))}_updateLayout(x){if("updateLayout"!=x.changeName&&"variableName"!=x.changeName||(this._labelElement&&this._labelElement.winControl&&(this._labelElement.winControl.variableName=this.variableName),this._valueElement&&this._valueElement.winControl&&(this._valueElement.winControl.variableName=this.variableName)),"updateLayout"==x.changeName||"alignItems"==x.changeName)switch(this.alignItems){case"Center":this.element.style.alignItems="center",this._labelValueContainerElement.style.alignItems="center";break;case"Start":this.element.style.alignItems="flex-start",this._labelValueContainerElement.style.alignItems="flex-start";break;case"End":this.element.style.alignItems="flex-end",this._labelValueContainerElement.style.alignItems="flex-end";break;case"Baseline":this.element.style.alignItems="baseline",this._labelValueContainerElement.style.alignItems="baseline";break;default:this.element.style.alignItems="stretch",this._labelValueContainerElement.style.alignItems="stretch"}if("updateLayout"==x.changeName||"justifyContent"==x.changeName)switch(this.justifyContent){case"End":this.element.style.justifyContent="flex-end",this._labelValueContainerElement.style.justifyContent="flex-end";break;case"Center":this.element.style.justifyContent="center",this._labelValueContainerElement.style.justifyContent="center";break;case"Space-between":this.element.style.justifyContent="space-between",this._labelValueContainerElement.style.justifyContent="space-between";break;case"Space-around":this.element.style.justifyContent="space-around",this._labelValueContainerElement.style.justifyContent="space-around";break;case"Space-evenly":this.element.style.justifyContent="space-evenly",this._labelValueContainerElement.style.justifyContent="space-evenly";break;default:this.element.style.justifyContent="flex-start",this._labelValueContainerElement.style.justifyContent="flex-start"}if("updateLayout"==x.changeName||"leadingSymbolPosition"==x.changeName)switch(this.leadingSymbolPosition){case"Top":this.element.style.flexDirection="column";break;case"Right":this.element.style.flexDirection="row-reverse";break;case"Bottom":this.element.style.flexDirection="column-reverse";break;default:this.element.style.flexDirection="row"}if("updateLayout"==x.changeName||"labelPosition"==x.changeName)switch(this.labelPosition){case"Top":this._labelValueContainerElement.style.flexDirection="column";break;case"Right":this._labelValueContainerElement.style.flexDirection="row-reverse";break;case"Bottom":this._labelValueContainerElement.style.flexDirection="column-reverse";break;default:this._labelValueContainerElement.style.flexDirection="row"}}dispose(){return super.dispose()}}TextVarOut.namespace="VisiWin.UI",TextVarOut.controlName="TextVarOut",TextVarOut.className="vw-textvarout",TextVarOut.propertyList={designerType:{propertyType:"base",type:"string",defaultValue_DM:"Control"},variableName:{propertyType:"member",type:"string"},alignItems:{propertyType:"member",type:"string",defaultValue:"Center"},justifyContent:{propertyType:"member",type:"string",defaultValue:"Center"},showLeadingSymbol:{propertyType:"child",type:"boolean",child:"_leadingSymbolElement",childProperty:"show",defaultValue:!1},leadingIconFont:{propertyType:"child",type:"string",child:"_leadingSymbolElement",childProperty:"iconFont"},leadingSymbol:{propertyType:"child",type:"string",child:"_leadingSymbolElement",childProperty:"symbol"},leadingSymbolType:{propertyType:"child",type:"string",child:"_leadingSymbolElement",childProperty:"symbolType"},leadingSymbolSize:{propertyType:"child",type:"string",child:"_leadingSymbolElement",childProperty:"symbolSize"},leadingSymbolMargin:{propertyType:"child",type:"string",child:"_leadingSymbolElement",childProperty:"margin"},leadingSymbolPosition:{propertyType:"member",type:"string",defaultValue:"Left"},showSymbol:{propertyType:"child",type:"boolean",child:"_labelElement"},iconFont:{propertyType:"child",type:"string",child:"_labelElement"},symbol:{propertyType:"child",type:"string",child:"_labelElement"},symbolType:{propertyType:"child",type:"string",child:"_labelElement"},symbolSize:{propertyType:"child",type:"string",child:"_labelElement"},symbolMargin:{propertyType:"child",type:"string",child:"_labelElement"},symbolPosition:{propertyType:"child",type:"string",child:"_labelElement"},labelContainerWidth:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"width"},labelContainerHeight:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"height"},labelContainerMargin:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"margin"},labelContainerPadding:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"padding"},labelContainerBorderWidth:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"borderWidth"},labelContainerBorderStyle:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"borderStyle"},labelContainerBorderRadius:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"borderRadius"},showLabel:{propertyType:"child",type:"boolean",child:"_labelElement",childProperty:"showText"},labelWidth:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"textWidth"},labelHeight:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"textHeight"},labelMargin:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"textMargin"},labelPadding:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"textPadding"},useVariableText:{propertyType:"child",type:"boolean",child:"_labelElement"},labelText:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"text",defaultValue:"TextVarOut"},localizableLabelText:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"localizableText"},labelTextAlignment:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"textAlignment"},labelLineClamp:{propertyType:"child",type:"number",child:"_labelElement",childProperty:"lineClamp"},labelTextWrapping:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"textWrapping"},labelTextTrimming:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"textTrimming"},labelFontClass:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"fontClass"},labelFontSize:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"fontSize"},labelFontWeight:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"fontWeight"},labelLineHeight:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"lineHeight"},labelTextContrast:{propertyType:"child",type:"number",child:"_labelElement",childProperty:"textContrast"},labelUppercase:{propertyType:"child",type:"boolean",child:"_labelElement",childProperty:"uppercase"},labelPosition:{propertyType:"member",type:"string",defaultValue:"Left"},valueContainerWidth:{propertyType:"child",type:"string",child:"_valueElement",childProperty:"width"},valueContainerHeight:{propertyType:"child",type:"string",child:"_valueElement",childProperty:"height"},valueContainerMargin:{propertyType:"child",type:"string",child:"_valueElement",childProperty:"margin"},valueContainerPadding:{propertyType:"child",type:"string",child:"_valueElement",childProperty:"padding"},valueContainerBorderWidth:{propertyType:"child",type:"string",child:"_valueElement",childProperty:"borderWidth"},valueContainerBorderStyle:{propertyType:"child",type:"string",child:"_valueElement",childProperty:"borderStyle"},valueContainerBorderRadius:{propertyType:"child",type:"string",child:"_valueElement",childProperty:"borderRadius"},showValue:{propertyType:"child",type:"boolean",child:"_valueElement"},valueWidth:{propertyType:"child",type:"string",child:"_valueElement"},valueHeight:{propertyType:"child",type:"string",child:"_valueElement"},valueMargin:{propertyType:"child",type:"string",child:"_valueElement"},valuePadding:{propertyType:"child",type:"string",child:"_valueElement"},value:{propertyType:"child",type:"string",child:"_valueElement",defaultValue:"abcd"},valueTextAlignment:{propertyType:"child",type:"string",child:"_valueElement",defaultValue:"Left"},valueLineClamp:{propertyType:"child",type:"number",child:"_valueElement"},valueTextWrapping:{propertyType:"child",type:"string",child:"_valueElement"},valueTextTrimming:{propertyType:"child",type:"string",child:"_valueElement"},valueFontClass:{propertyType:"child",type:"string",child:"_valueElement"},valueFontSize:{propertyType:"child",type:"string",child:"_valueElement"},valueFontWeight:{propertyType:"child",type:"string",child:"_valueElement"},valueLineHeight:{propertyType:"child",type:"string",child:"_valueElement"},valueTextContrast:{propertyType:"child",type:"number",child:"_valueElement"},backgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},labelContainerBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},valueContainerBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ChromeMediumLow"},leadingSymbolForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},symbolForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},labelForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},valueForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},borderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"},labelContainerBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"},valueContainerBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"},disabledBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledBackgroundColor"},disabledForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledForegroundColor"},disabledBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledBorderColor"}},A.TextVarOut=TextVarOut}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class NumericVarOut extends x.UI.ControlBase{constructor(A,V){super(A,V),this._leadingSymbolElement=null,this._labelValueContainerElement=null,this._labelElement=null,this._valueElement=null,this.addPropertyList(NumericVarOut,NumericVarOut.propertyList),this.defaultConstructor(A,this.inlineOptions,x.UI.NumericVarOut.controlName,x.UI.NumericVarOut.className)}createTemplate(){if(x.Utilities.isInDesignMode())return this.element.innerHTML=['<div class="vw-numericvarout__leadingsymbol" data-win-control="VisiWin.UI.Symbol"></div>','<div class="vw-numericvarout__labelvaluecontainer">','<div class="vw-numericvarout__label" data-win-control="VisiWin.UI.Label" data-win-options="{showSymbol:'+this.inlineOptions.showSymbol+'}"></div>','<div class="vw-numericvarout__value" data-win-control="VisiWin.UI.ValuePresenter"></div>',"</div>"].join("\n"),this._leadingSymbolElement=this.element.firstElementChild,this._labelValueContainerElement=this._leadingSymbolElement.nextElementSibling,this._labelElement=this._labelValueContainerElement.firstElementChild,this._valueElement=this._labelElement.nextElementSibling,this.processElements([this._leadingSymbolElement,this._labelElement,this._valueElement]);var A=null!=this.inlineOptions.showLeadingSymbol?this.inlineOptions.showLeadingSymbol:this.getStyleProperty("showLeadingSymbol")?this.getStyleProperty("showLeadingSymbol"):x.UI.NumericVarOut.propertyList.showLeadingSymbol.defaultValue,V="";return A&&(V+='<div class="vw-numericvarout__leadingsymbol" data-win-control="VisiWin.UI.Symbol"></div>'),V+=['<div class="vw-numericvarout__labelvaluecontainer">','<div class="vw-numericvarout__label" data-win-control="VisiWin.UI.Label" data-win-options="{showSymbol:'+this.inlineOptions.showSymbol+'}"></div>','<div class="vw-numericvarout__value" data-win-control="VisiWin.UI.ValuePresenter"></div>',"</div>"].join("\n"),this.element.innerHTML=V,A?(this._leadingSymbolElement=this.element.firstElementChild,this._labelValueContainerElement=this._leadingSymbolElement.nextElementSibling,this._labelElement=this._labelValueContainerElement.firstElementChild,this._valueElement=this._labelElement.nextElementSibling):(this._labelValueContainerElement=this.element.firstElementChild,this._labelElement=this._labelValueContainerElement.firstElementChild,this._valueElement=this._labelElement.nextElementSibling),this.processElements([this._leadingSymbolElement,this._labelElement,this._valueElement])}_updateColors(x){this.disabled?(this.setColor("disabledBackgroundColor","backgroundColor"),this.setColor("disabledBackgroundColor","backgroundColor",null,"_labelElement"),this.setColor("disabledBackgroundColor","backgroundColor",null,"_valueElement"),this.setColor("disabledForegroundColor","foregroundColor",null,"_leadingSymbolElement"),this.setColor("disabledForegroundColor","symbolForegroundColor",null,"_labelElement"),this.setColor("disabledForegroundColor","labelForegroundColor",null,"_labelElement"),this.setColor("disabledForegroundColor","valueForegroundColor",null,"_valueElement"),this.setColor("disabledForegroundColor","unitForegroundColor",null,"_valueElement"),this.setColor("disabledBorderColor","borderColor"),this.setColor("disabledBorderColor","borderColor",null,"_labelElement"),this.setColor("disabledBorderColor","borderColor",null,"_valueElement")):(this.setColor("backgroundColor","backgroundColor"),this.setColor("labelContainerBackgroundColor","backgroundColor",null,"_labelElement"),this.setColor("valueContainerBackgroundColor","backgroundColor",null,"_valueElement"),this.setColor("leadingSymbolForegroundColor","foregroundColor",null,"_leadingSymbolElement"),this.setColor("symbolForegroundColor","symbolForegroundColor",null,"_labelElement"),this.setColor("labelForegroundColor","labelForegroundColor",null,"_labelElement"),this.setColor("valueForegroundColor","valueForegroundColor",null,"_valueElement"),this.setColor("unitForegroundColor","unitForegroundColor",null,"_valueElement"),this.setColor("borderColor","borderColor"),this.setColor("labelContainerBorderColor","borderColor",null,"_labelElement"),this.setColor("valueContainerBorderColor","borderColor",null,"_valueElement"))}_updateLayout(x){if("updateLayout"!=x.changeName&&"variableName"!=x.changeName||(this._labelElement&&this._labelElement.winControl&&(this._labelElement.winControl.variableName=this.variableName),this._valueElement&&this._valueElement.winControl&&(this._valueElement.winControl.variableName=this.variableName)),"updateLayout"==x.changeName||"alignItems"==x.changeName)switch(this.alignItems){case"Center":this.element.style.alignItems="center",this._labelValueContainerElement.style.alignItems="center";break;case"Start":this.element.style.alignItems="flex-start",this._labelValueContainerElement.style.alignItems="flex-start";break;case"End":this.element.style.alignItems="flex-end",this._labelValueContainerElement.style.alignItems="flex-end";break;case"Baseline":this.element.style.alignItems="baseline",this._labelValueContainerElement.style.alignItems="baseline";break;default:this.element.style.alignItems="stretch",this._labelValueContainerElement.style.alignItems="stretch"}if("updateLayout"==x.changeName||"justifyContent"==x.changeName)switch(this.justifyContent){case"End":this.element.style.justifyContent="flex-end",this._labelValueContainerElement.style.justifyContent="flex-end";break;case"Center":this.element.style.justifyContent="center",this._labelValueContainerElement.style.justifyContent="center";break;case"Space-between":this.element.style.justifyContent="space-between",this._labelValueContainerElement.style.justifyContent="space-between";break;case"Space-around":this.element.style.justifyContent="space-around",this._labelValueContainerElement.style.justifyContent="space-around";break;case"Space-evenly":this.element.style.justifyContent="space-evenly",this._labelValueContainerElement.style.justifyContent="space-evenly";break;default:this.element.style.justifyContent="flex-start",this._labelValueContainerElement.style.justifyContent="flex-start"}if("updateLayout"==x.changeName||"leadingSymbolPosition"==x.changeName)switch(this.leadingSymbolPosition){case"Top":this.element.style.flexDirection="column";break;case"Right":this.element.style.flexDirection="row-reverse";break;case"Bottom":this.element.style.flexDirection="column-reverse";break;default:this.element.style.flexDirection="row"}if("updateLayout"==x.changeName||"labelPosition"==x.changeName)switch(this.labelPosition){case"Top":this._labelValueContainerElement.style.flexDirection="column";break;case"Right":this._labelValueContainerElement.style.flexDirection="row-reverse";break;case"Bottom":this._labelValueContainerElement.style.flexDirection="column-reverse";break;default:this._labelValueContainerElement.style.flexDirection="row"}}dispose(){return super.dispose()}}NumericVarOut.namespace="VisiWin.UI",NumericVarOut.controlName="NumericVarOut",NumericVarOut.className="vw-numericvarout",NumericVarOut.propertyList={designerType:{propertyType:"base",type:"string",defaultValue_DM:"Control"},variableName:{propertyType:"member",type:"string"},decimalPlaces:{propertyType:"child",type:"number",child:"_valueElement"},useRawValue:{propertyType:"child",type:"boolean",child:"_valueElement"},alignItems:{propertyType:"member",type:"string",defaultValue:"Center"},justifyContent:{propertyType:"member",type:"string",defaultValue:"Center"},showLeadingSymbol:{propertyType:"child",type:"boolean",child:"_leadingSymbolElement",childProperty:"show",defaultValue:!1},leadingIconFont:{propertyType:"child",type:"string",child:"_leadingSymbolElement",childProperty:"iconFont"},leadingSymbol:{propertyType:"child",type:"string",child:"_leadingSymbolElement",childProperty:"symbol"},leadingSymbolType:{propertyType:"child",type:"string",child:"_leadingSymbolElement",childProperty:"symbolType"},leadingSymbolSize:{propertyType:"child",type:"string",child:"_leadingSymbolElement",childProperty:"symbolSize"},leadingSymbolMargin:{propertyType:"child",type:"string",child:"_leadingSymbolElement",childProperty:"margin"},leadingSymbolPosition:{propertyType:"member",type:"string",defaultValue:"Left"},showSymbol:{propertyType:"child",type:"boolean",child:"_labelElement"},iconFont:{propertyType:"child",type:"string",child:"_labelElement"},symbol:{propertyType:"child",type:"string",child:"_labelElement"},symbolType:{propertyType:"child",type:"string",child:"_labelElement"},symbolSize:{propertyType:"child",type:"string",child:"_labelElement"},symbolMargin:{propertyType:"child",type:"string",child:"_labelElement"},symbolPosition:{propertyType:"child",type:"string",child:"_labelElement"},labelContainerWidth:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"width"},labelContainerHeight:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"height"},labelContainerMargin:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"margin"},labelContainerPadding:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"padding"},labelContainerBorderWidth:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"borderWidth"},labelContainerBorderStyle:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"borderStyle"},labelContainerBorderRadius:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"borderRadius"},showLabel:{propertyType:"child",type:"boolean",child:"_labelElement",childProperty:"showText"},labelWidth:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"textWidth"},labelHeight:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"textHeight"},labelMargin:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"textMargin"},labelPadding:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"textPadding"},useVariableText:{propertyType:"child",type:"boolean",child:"_labelElement"},labelText:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"text",defaultValue:"NumericVarOut"},localizableLabelText:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"localizableText"},labelTextAlignment:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"textAlignment"},labelLineClamp:{propertyType:"child",type:"number",child:"_labelElement",childProperty:"lineClamp"},labelTextWrapping:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"textWrapping"},labelTextTrimming:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"textTrimming"},labelFontClass:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"fontClass"},labelFontSize:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"fontSize"},labelFontWeight:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"fontWeight"},labelLineHeight:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"lineHeight"},labelTextContrast:{propertyType:"child",type:"number",child:"_labelElement",childProperty:"textContrast"},labelUppercase:{propertyType:"child",type:"boolean",child:"_labelElement",childProperty:"uppercase"},labelPosition:{propertyType:"member",type:"string",defaultValue:"Left"},valueContainerWidth:{propertyType:"child",type:"string",child:"_valueElement",childProperty:"width"},valueContainerHeight:{propertyType:"child",type:"string",child:"_valueElement",childProperty:"height"},valueContainerMargin:{propertyType:"child",type:"string",child:"_valueElement",childProperty:"margin"},valueContainerPadding:{propertyType:"child",type:"string",child:"_valueElement",childProperty:"padding"},valueContainerBorderWidth:{propertyType:"child",type:"string",child:"_valueElement",childProperty:"borderWidth"},valueContainerBorderStyle:{propertyType:"child",type:"string",child:"_valueElement",childProperty:"borderStyle"},valueContainerBorderRadius:{propertyType:"child",type:"string",child:"_valueElement",childProperty:"borderRadius"},showValue:{propertyType:"child",type:"boolean",child:"_valueElement"},valueWidth:{propertyType:"child",type:"string",child:"_valueElement"},valueHeight:{propertyType:"child",type:"string",child:"_valueElement"},valueMargin:{propertyType:"child",type:"string",child:"_valueElement"},valuePadding:{propertyType:"child",type:"string",child:"_valueElement"},value:{propertyType:"child",type:"number",child:"_valueElement"},valueTextAlignment:{propertyType:"child",type:"string",child:"_valueElement",defaultValue:"Right"},valueLineClamp:{propertyType:"child",type:"number",child:"_valueElement"},valueTextWrapping:{propertyType:"child",type:"string",child:"_valueElement"},valueTextTrimming:{propertyType:"child",type:"string",child:"_valueElement"},valueFontClass:{propertyType:"child",type:"string",child:"_valueElement"},valueFontSize:{propertyType:"child",type:"string",child:"_valueElement"},valueFontWeight:{propertyType:"child",type:"string",child:"_valueElement"},valueLineHeight:{propertyType:"child",type:"string",child:"_valueElement"},valueTextContrast:{propertyType:"child",type:"number",child:"_valueElement"},showUnit:{propertyType:"child",type:"boolean",child:"_valueElement"},unitWidth:{propertyType:"child",type:"string",child:"_valueElement"},unitHeight:{propertyType:"child",type:"string",child:"_valueElement"},unitMargin:{propertyType:"child",type:"string",child:"_valueElement"},unitPadding:{propertyType:"child",type:"string",child:"_valueElement"},useVariableUnitText:{propertyType:"child",type:"boolean",child:"_valueElement"},unitText:{propertyType:"child",type:"string",child:"_valueElement"},localizableUnitText:{propertyType:"child",type:"string",child:"_valueElement"},unitTextAlignment:{propertyType:"child",type:"string",child:"_valueElement"},unitLineClamp:{propertyType:"child",type:"number",child:"_valueElement"},unitTextWrapping:{propertyType:"child",type:"string",child:"_valueElement"},unitTextTrimming:{propertyType:"child",type:"string",child:"_valueElement"},unitFontClass:{propertyType:"child",type:"string",child:"_valueElement"},unitFontSize:{propertyType:"child",type:"string",child:"_valueElement"},unitFontWeight:{propertyType:"child",type:"string",child:"_valueElement"},unitLineHeight:{propertyType:"child",type:"string",child:"_valueElement"},unitTextContrast:{propertyType:"child",type:"number",child:"_valueElement"},unitPosition:{propertyType:"child",type:"string",child:"_valueElement"},backgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},labelContainerBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},valueContainerBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ChromeMediumLow"},leadingSymbolForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},symbolForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},labelForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},valueForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},unitForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},borderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"},labelContainerBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"},valueContainerBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"},disabledBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledBackgroundColor"},disabledForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledForegroundColor"},disabledBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledBorderColor"}},A.NumericVarOut=NumericVarOut}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class Image extends x.UI.VariableBase{constructor(A,V){super(A,V),this._imageElement=null,this.imagesCollection=[],this.boundImagesChangedHandler=this._imagesChangedHandler.bind(this),this.addPropertyList(Image,Image.propertyList),this.defaultConstructor(A,this.inlineOptions,x.UI.Image.controlName,x.UI.Image.className)}createTemplate(){var x=document.createElement("div");return x.innerHTML=['<div class="vw-image__symbol" data-win-control="VisiWin.UI.Symbol"></div>'].join("\n"),this._imageElement=x.firstElementChild,this.element.appendChild(this._imageElement),this.processElements([this._imageElement])}registerChild(A,V,R,D){return V!==this.registerTargetId||(R&&R.winControl&&(R.style.display="none",this.imagesCollection.push(R.winControl),R.winControl.addEventListener("notifyPropertyChanged",this.boundImagesChangedHandler),x.Utilities.isInDesignMode()||this.element.removeChild(R)),!1)}_imagesChangedHandler(x){this._updateLayoutBase(x.detail)}_updateColors(x){this.disabled?(this.setColor("disabledBackgroundColor","backgroundColor"),this._imageElement&&this._imageElement.winControl&&this.setColor("disabledForegroundColor","foregroundColor",null,"_imageElement"),this.setColor("disabledBorderColor","borderColor")):(this.setColor("backgroundColor"),this._imageElement&&this._imageElement.winControl&&this.setColor("foregroundColor","foregroundColor",null,"_imageElement"),this.setColor("borderColor"))}_updateLayout(x){if("updateLayout"==x.changeName||"value"==x.changeName||"visibility"==x.changeName||"bitValue"==x.changeName||"iconFont"==x.changeName||"image"==x.changeName||"imageType"==x.changeName){var A=this.iconFont,V=this.image,R=this.imageType;if(this.imagesCollection&&this.imagesCollection.length>0)if(null!=this.bitNumber){if(this.bitNumber>=0&&null!=this.bitValue)for(var D=0;D<this.imagesCollection.length;D++)null!=this.imagesCollection[D].value&&((!0!==this.bitValue||!0!==this.imagesCollection[D].value&&"true"!==this.imagesCollection[D].value)&&(!1!==this.bitValue||!1!==this.imagesCollection[D].value&&"false"!==this.imagesCollection[D].value)||(null!=this.imagesCollection[D].iconFont&&(A=this.imagesCollection[D].iconFont),null!=this.imagesCollection[D].image&&(V=this.imagesCollection[D].image),null!=this.imagesCollection[D].imageType&&(R=this.imagesCollection[D].imageType)))}else for(D=0;D<this.imagesCollection.length;D++)null!=this.imagesCollection[D].value&&this.validateValue(this.imagesCollection[D].value)&&(null!=this.imagesCollection[D].iconFont&&(A=this.imagesCollection[D].iconFont),null!=this.imagesCollection[D].image&&(V=this.imagesCollection[D].image),null!=this.imagesCollection[D].imageType&&(R=this.imagesCollection[D].imageType));this._imageElement&&this._imageElement.winControl&&(this._imageElement.winControl.iconFont=A,this._imageElement.winControl.symbol=V,this._imageElement.winControl.symbolType=R,this._imageElement.winControl._updateLayout({changeName:"symbol"}))}"width"!=x.changeName&&"heigth"!=x.changeName||this._imageElement.winControl._updateLayout({changeName:"symbolSize"})}dispose(){if(this.imagesCollection&&this.imagesCollection.length>0)for(var x=0;x<this.imagesCollection.length;x++)this.imagesCollection[x].removeEventListener("notifyPropertyChanged",this.boundImagesChangedHandler);return this.imagesCollection=[],super.dispose()}}Image.namespace="VisiWin.UI",Image.controlName="Image",Image.className="vw-image",Image.propertyList={designerType:{propertyType:"base",type:"string",defaultValue:"Control"},registerTargetId:{propertyType:"base",type:"string",defaultValue:"ImageState"},overflow:{propertyType:"style",type:"string"},iconFont:{propertyType:"member",type:"string",defaultValue:"material-icons"},image:{propertyType:"member",type:"string"},imageType:{propertyType:"member",type:"string",defaultValue:"Icon"},imageSize:{propertyType:"child",type:"string",child:"_imageElement",childProperty:"symbolSize",defaultValue:"100%"},imageList:{propertyType:"member",type:"string"},backgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},foregroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},borderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},disabledBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledBackgroundColor"},disabledForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledForegroundColor"},disabledBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledBorderColor"}},A.Image=Image}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class ImageState extends x.UI.ProviderBase{constructor(A,V){super(A,V),this.addPropertyList(ImageState,ImageState.propertyList),this.defaultConstructor(A,this.inlineOptions,x.UI.ImageState.controlName,null)}dispose(){return super.dispose()}}ImageState.namespace="VisiWin.UI",ImageState.controlName="ImageState",ImageState.propertyList={designerType:{propertyType:"base",type:"string",defaultValue:"Control"},registerSourceId:{propertyType:"base",type:"string",defaultValue:"ImageState"},value:{propertyType:"member",type:"string"},iconFont:{propertyType:"member",type:"string",defaultValue:"material-icons"},image:{propertyType:"member",type:"string"},imageType:{propertyType:"member",type:"string",defaultValue:"Icon"}},A.ImageState=ImageState}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class AlarmList extends x.UI.ControlBase{constructor(A,V){super(A,V),this._isListViewLoaded=!1,this._isSampleDataLoaded=!1,this._boundListViewChangeHandler=this._listViewChangeHandler.bind(this),this.addPropertyList(AlarmList,AlarmList.propertyList),this.defaultConstructor(A,this.inlineOptions,x.UI.AlarmList.controlName,x.UI.AlarmList.className)}createTemplate(){return this._alarmsProvider=new x.UI.CurrentAlarmProvider(null,{}),null}createHandler(){x.Utilities.isInDesignMode()&&this._alarmsProvider.addEventListener("designModeDataLoaded",this._onSampleDataLoaded.bind(this))}removeHandler(){x.Utilities.isInDesignMode()&&this._alarmsProvider.removeEventListener("designModeDataLoaded",this._onSampleDataLoaded.bind(this))}afterInit(){this._alarmItemTemplateElement=document.getElementById(this.template)}attach(){let A=null;if(!this.isAttached){for(A=super.attach();this.element.firstChild;)this.element.removeChild(this.element.firstChild);this._listViewElement=document.createElement("div");new WinJS.UI.ListView(this._listViewElement,{});this.element.appendChild(this._listViewElement),this._listViewElement.setAttribute("id","CurrentAlarmListViewId"),x.Utilities.addClass(this._listViewElement,"vw-currentalarms__listview"),this._initListView(),this._isListViewLoaded=!0,x.Utilities.isInDesignMode()&&this._isSampleDataLoaded&&this._alarmsProvider.insertSampleData(),this._alarmsProvider&&this._alarmsProvider.attach()}return A}detach(){let x=null;if(this.isAttached)for(x=super.detach(),this._alarmsProvider&&this._alarmsProvider.detach(),this._listViewElement&&this._listViewElement.winControl&&(this._listViewElement.winControl.removeEventListener("loadingstatechanged",this._boundListViewChangeHandler),this._listViewElement.winControl.dispose());this.element&&this.element.firstChild;)this.element.removeChild(this.element.firstChild);return x}_initListView(){this._listViewElement&&this._alarmsProvider&&this._alarmItemTemplateElement&&(this._alarmsProvider.currentAlarmList=new WinJS.Binding.List([],{proxy:!0}),this._listViewElement.winControl.itemDataSource=this._alarmsProvider.currentAlarmList.dataSource,this._listViewElement.winControl.itemTemplate=this._alarmItemTemplateElement,this._listViewElement.winControl.layout=new WinJS.UI.ListLayout,this._listViewElement.winControl.selectionMode="single",this._listViewElement.winControl.addEventListener("loadingstatechanged",this._boundListViewChangeHandler))}_onSampleDataLoaded(){x.Utilities.isInDesignMode()&&this._isListViewLoaded&&this._alarmsProvider.insertSampleData(),this._isSampleDataLoaded=!0}_listViewChangeHandler(x){const A=x.srcElement.getElementsByClassName("vw-templateready");for(let x=0;x<A.length;x++)A[x].winControl.readyBase.call(A[x].winControl,A[x]);this._updateLayout({changeType:"custom",changeName:"isAuthorized",newValue:this.authorized,oldValue:null})}ready(x){}_updateLayout(x){if("authorized"===x.changeName&&1==x.newValue){const x=document.getElementsByClassName(""+AlarmList.className);for(let A=0;A<x.length;A++){const V=x[A].getElementsByClassName("win-interactive");for(let x=0;x<V.length;x++)V[x].winControl&&!0===V[x].winControl.disabled&&(V[x].winControl.disabled=!1)}}if("isAuthorized"===x.changeName||"authorized"===x.changeName&&0==x.newValue){const x=document.getElementsByClassName(AlarmList.className+" unauthorized");if(x.length>0)for(let A=0;A<x.length;A++){const V=x[A].getElementsByClassName("win-interactive");for(let x=0;x<V.length;x++)V[x].winControl&&(V[x].winControl.disabled=!0)}}}dispose(){return this.detach(),this._alarmsProvider&&this._alarmsProvider.dispose(),super.dispose()}}AlarmList.namespace="VisiWin.UI",AlarmList.controlName="AlarmList",AlarmList.className="vw-alarmlist",AlarmList.propertyList={designerType:{propertyType:"base",type:"string",defaultValue:"Control"},desiredClasses:{propertyType:"provider",type:"string",child:"_alarmsProvider"},desiredGroups:{propertyType:"provider",type:"string",child:"_alarmsProvider"},desiredStates:{propertyType:"provider",type:"string",child:"_alarmsProvider"},maxPriority:{propertyType:"provider",type:"number",child:"_alarmsProvider"},minPriority:{propertyType:"provider",type:"number",child:"_alarmsProvider"},sortMode:{propertyType:"provider",type:"string",child:"_alarmsProvider"},sampleData:{propertyType:"provider",type:"string",child:"_alarmsProvider",defaultValue:"alarmlistsampledata.json"},template:{propertyType:"member",type:"string",defaultValue:"VisiWin.UI.AlarmListItemTemplate"},backgroundColor:{propertyType:"memberStyle",type:"string",resourceValue:["getTheme"],defaultValue:"@None"}},A.AlarmList=AlarmList}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class GroupPanel extends x.UI.ControlBase{constructor(A,V){super(A,V),this.inlineOptions.debug,this.addPropertyList(GroupPanel,GroupPanel.GroupPanelPropertyList),this.defaultConstructor(A,this.inlineOptions,x.UI.GroupPanel.controlName,x.UI.GroupPanel.classGroupPanel)}_updateColors(x){this.disabled?(this.element.style.backgroundColor=this.getColor("disabledBackgroundColor"),this.element.style.borderColor=this.getColor("disabledBorderColor")):(this.element.style.backgroundColor=this.getColor("backgroundColor"),this.element.style.borderColor=this.getColor("borderColor"))}dispose(){return super.dispose()}}GroupPanel.namespace="VisiWin.UI",GroupPanel.controlName="GroupPanel",GroupPanel.classGroupPanel="vw-grouppanel",GroupPanel.GroupPanelPropertyList={designerType:{propertyType:"base",type:"string",defaultValue_DM:"ContentControl"},backgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BackgroundColor"},borderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"},disabledBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledBackgroundColor"},disabledBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledBorderColor"}},A.GroupPanel=GroupPanel}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class Select extends x.UI.ButtonBase{constructor(A,V){super(A,V),this._labelElement=null,this._containerElement=null,this._fieldContainerElement=null,this._textContainerElement=null,this._primaryTextElement=null,this._secondaryTextElement=null,this._symbolElement=null,this._floatingLabelFieldElement=null,this._floatingLabelElement=null,this._stateSymbolElement=null,this._underlineElement=null,this._menuElement=null,this._helperTextElement=null,this._errorTextElement=null,this._popoverElement=null,this._boundPopoverHandler=this._popoverHandler.bind(this),this._boundHoverInHandler=this._hoverInHandler.bind(this),this._boundHoverOutHandler=this._hoverOutHandler.bind(this),this._boundBeforeShowChangedHandler=this._beforeShowChangedHandler.bind(this),this._boundBeforeHideChangedHandler=this._beforeHideChangedHandler.bind(this),this.observe={"_menuElement.winControl.selectedIndex":function(x){this._menuElement&&this._menuElement.winControl&&this._menuElement.winControl._items&&this._menuElement.winControl._items[x.newValue]&&(null!=this._menuElement.winControl._items[x.newValue].value&&(this.selectedValue=this._menuElement.winControl._items[x.newValue].value),null!=this._menuElement.winControl._items[x.newValue].value&&(this.serviceValue=this._menuElement.winControl._items[x.newValue].value),this._setSelectOptions(),this._updateLayoutBase("property","selectedIndex",x.newValue,x.oldValue),this.dispatchNotifyPropertyChanged("state","selectedIndex",x.newValue,x.oldValue,"selectedIndex"))}},this._serviceValue=null,this.__checked=!1,this._errorMode=!1,this.addPropertyList(Select,Select.propertyList),this.defaultConstructor(A,this.inlineOptions,x.UI.Select.controlName,x.UI.Select.className)}createTemplate(){var A=null!=this.inlineOptions.showLabelSymbol?this.inlineOptions.showLabelSymbol:this.getStyleProperty("showLabelSymbol")?this.getStyleProperty("showLabelSymbol"):x.UI.Select.propertyList.showLabelSymbol.defaultValue,V=document.createElement("div");if(x.Utilities.reparentChildren(this.element,V),this.element.innerHTML=['<div class="vw-select__label" data-win-control="VisiWin.UI.Label" data-win-options="{showSymbol:'+A+'}"></div>','<div class="vw-select__container">','<div class="vw-select__fieldcontainer">','<div class="vw-select__textcontainer">','<div class="vw-select__primarytext" data-win-control="VisiWin.UI.TextBlock"></div>','<div class="vw-select__secondarytext" data-win-control="VisiWin.UI.TextBlock"></div>',"</div>",'<div class="vw-select__symbol" data-win-control="VisiWin.UI.Symbol"></div>','<div class="vw-select__floatinglabelfield">','<div class="vw-select__floatinglabel" data-win-control="VisiWin.UI.TextBlock"></div>',"</div>",'<div class="vw-select__statesymbol" data-win-control="VisiWin.UI.Symbol"></div>','<div class="vw-select__underline" data-win-control="VisiWin.UI.Divider"></div>',"</div>",'<div class="vw-select__menu" data-win-control="VisiWin.UI.Menu"></div>','<div class="vw-select__helpertext" data-win-control="VisiWin.UI.TextBlock"></div>','<div class="vw-select__errortext" data-win-control="VisiWin.UI.TextBlock"></div>',"</div>"].join("\n"),this._labelElement=this.element.firstElementChild,this._containerElement=this._labelElement.nextElementSibling,this._fieldContainerElement=this._containerElement.firstElementChild,this._textContainerElement=this._fieldContainerElement.firstElementChild,this._primaryTextElement=this._textContainerElement.firstElementChild,this._secondaryTextElement=this._primaryTextElement.nextElementSibling,this._symbolElement=this._textContainerElement.nextElementSibling,this._floatingLabelFieldElement=this._symbolElement.nextElementSibling,this._floatingLabelElement=this._floatingLabelFieldElement.firstElementChild,this._stateSymbolElement=this._floatingLabelFieldElement.nextElementSibling,this._underlineElement=this._stateSymbolElement.nextElementSibling,this._menuElement=this._fieldContainerElement.nextElementSibling,this._helperTextElement=this._menuElement.nextElementSibling,this._errorTextElement=this._helperTextElement.nextElementSibling,x.Utilities.reparentChildren(V,this._menuElement),!x.Utilities.isInDesignMode()){var R=null!=this.inlineOptions.popoverId?this.inlineOptions.popoverId:this.getStyleProperty("popoverId")?this.getStyleProperty("popoverId"):x.UI.Select.propertyList.popoverId.defaultValue,D=document.getElementById(R);D&&D.winControl?this._popoverElement=D.winControl:this._popoverElement=new x.UI.Popover(null,{})}return this.processElements([this._labelElement,this._primaryTextElement,this._secondaryTextElement,this._symbolElement,this._floatingLabelElement,this._stateSymbolElement,this._underlineElement,this._menuElement,this._helperTextElement,this._errorTextElement])}createHandler(){this._textContainerElement.addEventListener(A.PointerEventType.pointerup,this._boundPopoverHandler,!1),this._textContainerElement.addEventListener(A.PointerEventType.pointerenter,this._boundHoverInHandler,!1),this._textContainerElement.addEventListener(A.PointerEventType.pointerleave,this._boundHoverOutHandler,!1)}removeHandler(){this._textContainerElement.removeEventListener(A.PointerEventType.pointerup,this._boundPopoverHandler,!1),this._textContainerElement.removeEventListener(A.PointerEventType.pointerenter,this._boundHoverInHandler,!1),this._textContainerElement.removeEventListener(A.PointerEventType.pointerleave,this._boundHoverOutHandler,!1)}afterInit(){this._popoverElement&&(this._popoverElement.menuElement=this._menuElement),this._menuElement&&this._menuElement.winControl&&(this._menuElement.winControl.mode="DirectMode")}set serviceValue(A){switch(this.listType){case"Themes":x.AppServices.AppService.changeTheme(A).then((function(){}));break;case"Languages":x.AppServices.LanguageService.changeLanguageAsync(A).then((function(){}));break;case"AddUsers":case"ChangeUsers":x.AppServices.UserManagementService&&x.AppServices.UserManagementService.setSelectedUserIndex(this._menuElement&&this._menuElement.winControl&&this._menuElement.winControl.selectedIndex?this._menuElement.winControl.selectedIndex:0);break;case"RemoveUser":x.AppServices.UserManagementService&&x.AppServices.UserManagementService.setRemoveUserIndex(this._menuElement&&this._menuElement.winControl&&this._menuElement.winControl.selectedIndex?this._menuElement.winControl.selectedIndex:0);break;case"AddUserGroups":x.AppServices.UserManagementService&&(x.AppServices.UserManagementService.addUser.groupName=A);break;case"ChangeUserGroups":x.AppServices.UserManagementService&&(x.AppServices.UserManagementService.changeUser.groupName=A);break;case"AddUserStates":x.AppServices.UserManagementService&&(x.AppServices.UserManagementService.addUser.userState=A);break;case"ChangeUserStates":x.AppServices.UserManagementService&&(x.AppServices.UserManagementService.changeUser.userState=A)}this._serviceValue=A}get serviceValue(){var A=null;switch(this.listType){case"Themes":A=x.AppServices.AppService.aktTheme+".json";break;case"Languages":A=x.AppServices.LanguageService.currentLanguage;break;case"AddUsers":A=x.AppServices.UserManagementService.addUser.name;break;case"ChangeUsers":A=x.AppServices.UserManagementService.changeUser.name;break;case"RemoveUser":A=x.AppServices.UserManagementService.removeUser.name;break;case"AddUserGroups":A=x.AppServices.UserManagementService.addUser.groupName;break;case"ChangeUserGroups":A=x.AppServices.UserManagementService.changeUser.groupName;break;case"AddUserStates":A=x.AppServices.UserManagementService.addUser.userState;break;case"ChangeUserStates":A=x.AppServices.UserManagementService.changeUser.userState;break;case"RecipeClasses":break;default:A=this._serviceValue}return A}get checked(){return this.__checked}set checked(A){if(this.__checked!=A){var V=this.__checked;this.__checked=A,this.__checked?(x.Utilities.addClass(this.element,"checked"),x.Utilities.removeClass(this.element,"unchecked")):(x.Utilities.removeClass(this.element,"checked"),x.Utilities.addClass(this.element,"unchecked")),this._updateColorsBase("state","checked",A,V),this._updateLayoutBase("state","checked",A,V),this.dispatchNotifyPropertyChanged("state","checked",A,V,"checkedChanged")}}set open(A){x.Utilities.isInDesignMode()&&(this.checked=A)}get errorMode(){return this._errorMode}set errorMode(x){if(this._errorMode!=x){var A=this._errorMode;this._errorMode=x,this._updateColorsBase("state","errorMode",x,A),this._updateLayoutBase("state","errorMode",x,A),this.dispatchNotifyPropertyChanged("state","errorMode",x,A)}}_updateColors(x){this.disabled?(this.setColor("disabledBackgroundColor","backgroundColor"),this.setColor("disabledBackgroundColor","backgroundColor","_fieldContainerElement"),this.setColor("disabledBackgroundColor","backgroundColor","_textContainerElement"),this.setColor("backgroundColor","backgroundColor",null,"_floatingLabelElement"),this.setColor("disabledForegroundColor","backgroundColor",null,"_underlineElement"),this.setColor("disabledForegroundColor","labelForegroundColor",null,"_labelElement"),this.setColor("disabledForegroundColor","symbolForegroundColor",null,"_labelElement"),this.setColor("disabledForegroundColor","foregroundColor",null,"_primaryTextElement"),this.setColor("disabledForegroundColor","foregroundColor",null,"_secondaryTextElement"),this.setColor("disabledForegroundColor","foregroundColor",null,"_symbolElement"),this.setColor("disabledForegroundColor","foregroundColor",null,"_floatingLabelElement"),this.setColor("disabledForegroundColor","foregroundColor",null,"_stateSymbolElement"),this.setColor("disabledForegroundColor","foregroundColor",null,"_helperTextElement"),this.setColor("disabledForegroundColor","foregroundColor",null,"_errorTextElement"),this.setColor("disabledBorderColor","borderColor","_textContainerElement"),this.setColor("disabledBackgroundColor","backgroundColor",null,"_menuElement"),this.setColor("disabledBorderColor","borderColor",null,"_menuElement"),this._floatingLabelElement.style.outlineColor=this.getColor("disabledFloatingLabelOutlineColor")):(this.setColor("backgroundColor"),this.setColor("backgroundColor","backgroundColor","_fieldContainerElement"),this.checked?(this.setColor("checkedBackgroundColor","backgroundColor","_textContainerElement"),this.setColor("checkedFloatingLabelForegroundColor","foregroundColor",null,"_floatingLabelElement")):this.hover?this.setColor("hoverBackgroundColor","backgroundColor","_textContainerElement"):(this.setColor("backgroundColor","backgroundColor","_textContainerElement"),this.setColor("floatingLabelForegroundColor","foregroundColor",null,"_floatingLabelElement")),this.setColor("floatingLabelBackgroundColor","backgroundColor",null,"_floatingLabelElement"),this.setColor("labelForegroundColor","labelForegroundColor",null,"_labelElement"),this.setColor("labelSymbolForegroundColor","symbolForegroundColor",null,"_labelElement"),this.setColor("primaryTextForegroundColor","foregroundColor",null,"_primaryTextElement"),this.setColor("secondaryTextForegroundColor","foregroundColor",null,"_secondaryTextElement"),this.setColor("symbolForegroundColor","foregroundColor",null,"_symbolElement"),this.setColor("stateSymbolForegroundColor","foregroundColor",null,"_stateSymbolElement"),this.setColor("helperTextForegroundColor","foregroundColor",null,"_helperTextElement"),this.setColor("errorColor","foregroundColor",null,"_errorTextElement"),this.errorMode?(this.setColor("errorColor","backgroundColor",null,"_underlineElement"),this.setColor("errorColor","borderColor","_textContainerElement")):this.checked?(this.setColor("checkedUnderlineColor","backgroundColor",null,"_underlineElement"),this.setColor("checkedBorderColor","borderColor","_textContainerElement")):this.hover?(this.setColor("underlineColor","backgroundColor",null,"_underlineElement"),this.setColor("hoverBorderColor","borderColor","_textContainerElement")):(this.setColor("underlineColor","backgroundColor",null,"_underlineElement"),this.setColor("borderColor","borderColor","_textContainerElement")),this.setColor("menuBackgroundColor","backgroundColor",null,"_menuElement"),this.setColor("menuBorderColor","borderColor",null,"_menuElement"),this._floatingLabelElement.style.outlineColor=this.getColor("floatingLabelOutlineColor"))}_updateLayout(A){if("firstUpdate"==A.changeName||"listType"==A.changeName){var V=this._menuElement&&this._menuElement.firstElementChild?this._menuElement.firstElementChild:null,R=this._menuElement&&this._menuElement.winControl?this._menuElement.winControl:null,D=[],N=[],U=[];if(null!=V&&null!=R)if("Themes"==this.listType||"Languages"==this.listType||"AddUsers"==this.listType||"ChangeUsers"==this.listType||"RemoveUser"==this.listType||"AddUserGroups"==this.listType||"ChangeUserGroups"==this.listType||"AddUserStates"==this.listType||"ChangeUserStates"==this.listType||"RecipeClasses"==this.listType){for(;V.lastChild;)V.lastChild.winControl&&V.lastChild.winControl.detach(),V.removeChild(V.lastChild);switch(R._itemCount=0,R._items=[],this.listType){case"Themes":if(D=x.Application.Settings.UI.Themes,(N=this._getBindingList(D))&&N.length>0)for(var B=0;B<N.length;B++)N[B].primaryText&&(N[B].primaryText=D[B].substr(0,1).toUpperCase()+D[B].substr(1),N[B].primaryText.indexOf(".json")>0&&(N[B].primaryText=N[B].primaryText.substr(0,N[B].primaryText.indexOf(".json"))));break;case"Languages":let A=[];for(B=0;B<x.AppServices.LanguageService.availableProjectLanguages.length;B++)A.push(x.AppServices.LanguageService.availableProjectLanguages[B].Name);D=A,N=this._getBindingList(D);break;case"AddUsers":case"ChangeUsers":D=x.AppServices.UserManagementService.userList,N=this._getBindingList(D,"name","name");break;case"RemoveUser":D=x.AppServices.UserManagementService.removableUserList,N=this._getBindingList(D,"name","name");break;case"AddUserGroups":case"ChangeUserGroups":D=x.AppServices.UserManagementService.userGroupList,N=this._getBindingList(D,"name","name");break;case"AddUserStates":case"ChangeUserStates":D=x.AppServices.UserManagementService.userStateList,N=this._getBindingList(D,"userState","locUserState");break;case"RecipeClasses":D=x.AppServices.RecipeService.recipeClassList,N=this._getBindingList(D)}if(N&&N.length>0)for(var F=0;F<N.length;F++){var W=document.createElement("div"),H={registerSourceId:"SelectOption",value:N[F].value,primaryText:N[F].primaryText,localizablePrimaryText:N[F].localizablePrimaryText,secondaryText:N[F].secondaryText,localizableSecondaryText:N[F].localizableSecondaryText};V.appendChild(W),(W=new x.UI.Option(W,H)).attach(),U.push(W)}if(U.length>0)if(R.selectedIndex<0){for(B=0;B<U.length;B++)if(U[B].value==this.serviceValue){U[B].checkedIntern=!0,R.selectedIndex=B;break}}else U[R.selectedIndex]&&null!=U[R.selectedIndex].value&&U[R.selectedIndex].value!=this.serviceValue&&(this.serviceValue=U[R.selectedIndex].value)}else R._items&&R._items[R.selectedIndex]&&(R._items[R.selectedIndex].checkedIntern=!0)}if(("initialized"==A.changeName||"selectedValue"==A.changeName)&&this.selectedValue&&this._menuElement&&this._menuElement.winControl&&this._menuElement.winControl._items&&this._menuElement.winControl._items.length>0)for(B=0;B<this._menuElement.winControl._items.length;B++)this._menuElement.winControl._items[B]&&this._menuElement.winControl._items[B].value==this.selectedValue?(this._menuElement.winControl.selectedIndex=B,this._menuElement.winControl._items[B].checkedIntern=!0):this._menuElement.winControl._items[B].checkedIntern=!1;if("initialized"!=A.changeName&&"watermarkText"!=A.changeName&&"localizableWatermarkText"!=A.changeName||this._setSelectOptions(),"firstUpdate"!=A.changeName&&"borderRadius"!=A.changeName||(this._fieldContainerElement.style.borderRadius=this.borderRadius,this._textContainerElement.style.borderRadius=this.borderRadius),"firstUpdate"==A.changeName||"alignItems"==A.changeName)switch(this.alignItems){case"Center":this.element.style.alignItems="center";break;case"Start":this.element.style.alignItems="flex-start";break;case"End":this.element.style.alignItems="flex-end";break;case"Baseline":this.element.style.alignItems="baseline";break;default:this.element.style.alignItems="stretch"}if("firstUpdate"==A.changeName||"justifyContent"==A.changeName)switch(this.justifyContent){case"End":this.element.style.justifyContent="flex-end";break;case"Center":this.element.style.justifyContent="center";break;case"Space-between":this.element.style.justifyContent="space-between";break;case"Space-around":this.element.style.justifyContent="space-around";break;case"Space-evenly":this.element.style.justifyContent="space-evenly";break;default:this.element.style.justifyContent="flex-start"}if("firstUpdate"==A.changeName||"labelPosition"==A.changeName)switch(this.labelPosition){case"Top":this.element.style.flexDirection="column";break;case"Right":this.element.style.flexDirection="row-reverse";break;case"Bottom":this.element.style.flexDirection="column-reverse";break;default:this.element.style.flexDirection="row"}if("firstUpdate"!=A.changeName&&"textContainerHeight"!=A.changeName||(this._fieldContainerElement.style.height=this.textContainerHeight,this._textContainerElement.style.height=this.textContainerHeight),"firstUpdate"==A.changeName||"outlined"==A.changeName||"floatingLabelFieldMargin"==A.changeName||"showFloatingLabel"==A.changeName||"showSymbol"==A.changeName||"symbolSize"==A.changeName||"symbolMargin"==A.changeName||"showStateSymbol"==A.changeName||"stateSymbolSize"==A.changeName||"stateSymbolMargin"==A.changeName){var z=window.getComputedStyle(this._floatingLabelFieldElement),G=parseFloat(z.getPropertyValue("margin-left",null)),j=parseFloat(z.getPropertyValue("margin-right",null)),q=G,Q=j,K=this.outlined?0:this.showFloatingLabel?20:0,J=this.outlined?0:this.showFloatingLabel?6:0,X=0,Y=0;if(this.showSymbol&&this._symbolElement){var $=window.getComputedStyle(this._symbolElement),Z=parseFloat($.getPropertyValue("width",null));q=(X=parseFloat($.getPropertyValue("margin-left",null))+Z+(se=parseFloat($.getPropertyValue("margin-right",null)))+G)>q?X:q}if(this.showStateSymbol&&this._stateSymbolElement){var ee=window.getComputedStyle(this._stateSymbolElement),te=parseFloat(ee.getPropertyValue("width",null));Q=(Y=j+parseFloat(ee.getPropertyValue("margin-left",null))+te+parseFloat(ee.getPropertyValue("margin-right",null)))>Q?Y:Q}this._textContainerElement.style.padding=K+"px "+Q+"px "+J+"px "+q+"px"}if("firstUpdate"==A.changeName||"showSymbol"==A.changeName||"iconFont"==A.changeName||"symbolType"==A.changeName){var ie=this._menuElement&&this._menuElement.winControl&&this._menuElement.winControl._items&&this._menuElement.winControl._items.length>0?this._menuElement.winControl._items:null;if(null!=ie)for(B=0;B<ie.length;B++)ie[B]&&(ie[B].showSymbol=this.showSymbol,ie[B].iconFont=this.iconFont,ie[B].symbolType=this.symbolType)}if("firstUpdate"!=A.changeName&&"checked"!=A.changeName&&"floatingLabelTransition"!=A.changeName||this._floatingLabelElement&&this.showFloatingLabel&&(x.Utilities.isInDesignMode()?this._floatingLabelElement.style.transition="":this._floatingLabelElement.style.transition=this.floatingLabelTransition),("firstUpdate"==A.changeName||"checked"==A.changeName||"outlined"==A.changeName||"watermarkText"==A.changeName||"showPrimaryText"==A.changeName||"primaryText"==A.changeName||"showSecondaryText"==A.changeName||"secondaryText"==A.changeName||"showSymbol"==A.changeName||"symbolSize"==A.changeName||"symbolMargin"==A.changeName||"selectedIndex"==A.changeName||"floatingLabelFieldMargin"==A.changeName||"showFloatingLabel"==A.changeName||"floatingLabelFixed"==A.changeName||"selectedValue"==A.changeName)&&this.showFloatingLabel&&this._floatingLabelElement)if(this.outlined)if(this.checked||this.checkedIntern||this._primaryTextElement.winControl.show&&this._primaryTextElement.winControl.text||this._secondaryTextElement.winControl.show&&this._secondaryTextElement.winControl.text||this.floatingLabelFixed){var ne=0,re=this._floatingLabelElement.clientHeight||24;if(this.showSymbol&&this._symbolElement){$=window.getComputedStyle(this._symbolElement),Z=parseFloat($.getPropertyValue("width",null));var se=parseFloat($.getPropertyValue("margin-right",null));z=window.getComputedStyle(this._floatingLabelFieldElement);ne=Z+se+(G=parseFloat(z.getPropertyValue("margin-left",null)))}this._floatingLabelElement.style.alignSelf="flex-start",this._floatingLabelElement.style.transform="translateX("+-ne+"px) translateY("+-re/2+"px) scale(0.75)"}else this._floatingLabelElement.style.alignSelf="center",this._floatingLabelElement.style.transform="translateX(0px) translateY(0px) scale(1)";else this._floatingLabelElement.style.alignSelf="center",this.checked||this.checkedIntern||this._primaryTextElement.winControl.show&&this._primaryTextElement.winControl.text||this._secondaryTextElement.winControl.show&&this._secondaryTextElement.winControl.text||this.floatingLabelFixed?this._floatingLabelElement.style.transform=this._primaryTextElement.winControl.show&&this._primaryTextElement.winControl.text&&this._secondaryTextElement.winControl.show&&this._secondaryTextElement.winControl.text?"translateX(0px) translateY(-120%) scale(0.75)":"translateX(0px) translateY(-60%) scale(0.75)":this._floatingLabelElement.style.transform="translateX(0px) translateY(0px) scale(1)";"firstUpdate"!=A.changeName&&"checked"!=A.changeName&&"openedStateSymbol"!=A.changeName&&"closedStateSymbol"!=A.changeName||this._stateSymbolElement&&this._stateSymbolElement.winControl&&(this.checked?this._stateSymbolElement.winControl.symbol=this.openedStateSymbol:this._stateSymbolElement.winControl.symbol=this.closedStateSymbol),"updateLayout"!=A.changeName&&"checked"!=A.changeName&&"underlineOpacity"!=A.changeName&&"checkedUnderlineOpacity"!=A.changeName||this._underlineElement&&this._underlineElement.winControl&&this.showUnderline&&(this.checked?this._underlineElement.winControl.opacity=this.checkedUnderlineOpacity:this._underlineElement.winControl.opacity=this.underlineOpacity),"firstUpdate"!=A.changeName&&"checked"!=A.changeName&&"showUnderline"!=A.changeName&&"underlineTransition"!=A.changeName||(this._underlineElement&&this.showUnderline?(this._underlineElement.style.display="block",x.Utilities.isInDesignMode()?this._underlineElement.style.transition="":this._underlineElement.style.transition=this.underlineTransition):this._underlineElement.style.display="none"),"updateLayout"!=A.changeName&&"checked"!=A.changeName&&"underlineTransform"!=A.changeName&&"checkedUnderlineTransform"!=A.changeName||this._underlineElement&&this.showUnderline&&(this.checked?this._underlineElement.style.transform=this.checkedUnderlineTransform:this._underlineElement.style.transform=this.underlineTransform),"firstUpdate"!=A.changeName&&"checked"!=A.changeName||x.Utilities.isInDesignMode()&&this._menuElement&&this._menuElement.winControl&&(this._menuElement.style.display=this.checked?"inherit":"none",this._menuElement.style.position=this.checked?"absolute":"relative"),"firstUpdate"!=A.changeName&&"menuMargin"!=A.changeName||x.Utilities.isInDesignMode()&&this._menuElement&&this._menuElement.winControl&&(this._menuElement.winControl.margin=this.menuMargin),"firstUpdate"!=A.changeName&&"menuBorderRadius"!=A.changeName||this._menuElement&&this._menuElement.winControl&&(this._menuElement.winControl.borderRadius=this.menuBorderRadius),"firstUpdate"!=A.changeName&&"menuShadow"!=A.changeName||x.Utilities.isInDesignMode()&&this._menuElement&&this._menuElement.winControl&&(this._menuElement.winControl.shadow=this.menuShadow),"firstUpdate"!=A.changeName&&"errorMode"!=A.changeName&&"showHelperText"!=A.changeName&&"showErrorText"!=A.changeName||(this.errorMode?(this._helperTextElement&&this._helperTextElement.winControl&&(this._helperTextElement.winControl.show=!1),this._errorTextElement&&this._errorTextElement.winControl&&(this._errorTextElement.winControl.show=this.showErrorText)):(this._helperTextElement&&this._helperTextElement.winControl&&(this._helperTextElement.winControl.show=this.showHelperText),this._errorTextElement&&this._errorTextElement.winControl&&(this._errorTextElement.winControl.show=!1)))}_setSelectOptions(){var x,A=null,V=null,R=null,D=null,N=null;null!=(x=this._menuElement&&this._menuElement.winControl&&this._menuElement.winControl._items&&this._menuElement.winControl._items[this._menuElement.winControl.selectedIndex]?this._menuElement.winControl._items[this._menuElement.winControl.selectedIndex]:null)?(null!=x.symbol&&(A=x.symbol),null!=x.primaryText&&(V=x.primaryText),null!=x.localizablePrimaryText&&(R=x.localizablePrimaryText),null!=x.secondaryText&&(D=x.secondaryText),null!=x.localizableSecondaryText&&(N=x.localizableSecondaryText)):(V=this.watermarkText,R=this.localizableWatermarkText),this._symbolElement&&this._symbolElement.winControl&&this.showSymbol&&(this._symbolElement.winControl.symbol=A),this._primaryTextElement&&this._primaryTextElement.winControl&&(this._primaryTextElement.winControl.text=V,this._primaryTextElement.winControl.localizableText=R),this._secondaryTextElement&&this._secondaryTextElement.winControl&&(this._secondaryTextElement.winControl.text=D,this._secondaryTextElement.winControl.localizableText=N)}_getBindingList(x,A,V,R){var D=[];if(x&&x.length>0)for(var N=0;N<x.length;N++)D[N]={},D[N].value=A?"Index"==A?N:x[N][A]:x[N],D[N].primaryText=V?"Index"==V?N:x[N][V]:x[N],D[N].secondaryText=R?"Index"==R?N:x[N][R]:null;return D}_popoverHandler(x){this._popoverElement&&(this._popoverElement.addEventListener("beforeShowChanged",this._boundBeforeShowChangedHandler,!1),this._popoverElement.addEventListener("beforeHideChanged",this._boundBeforeHideChangedHandler,!1),this._popoverElement.menuElement=this._menuElement,this._popoverElement.anchor=this._fieldContainerElement,this._popoverElement.placement=this.menuPlacement,this._popoverElement.margin=this.menuMargin,this._popoverElement.borderRadius=this.menuBorderRadius,this._popoverElement.shadow=this.menuShadow,this._popoverElement.show())}_hoverInHandler(x){this.hover=!0}_hoverOutHandler(x){this.hover=!1}_beforeShowChangedHandler(x){this.checked=!0}_beforeHideChangedHandler(x){this._popoverElement&&(this._popoverElement.removeEventListener("beforeShowChanged",this._boundBeforeShowChangedHandler,!1),this._popoverElement.removeEventListener("beforeHideChanged",this._boundBeforeHideChangedHandler,!1)),this.checked=!1}attach(){let x=[];if(!this.isAttached&&(x.push(super.attach()),this._menuElement.winControl._items))for(var A=0;A<this._menuElement.winControl._items.length;A++)x.push(this._menuElement.winControl._items[A].attach());return WinJS.Promise.join(x)}detach(){let x=[];if(this.isAttached&&(x.push(super.detach()),this._menuElement.winControl._items))for(var A=0;A<this._menuElement.winControl._items.length;A++)x.push(this._menuElement.winControl._items[A].detach());return WinJS.Promise.join(x)}dispose(){return this._popoverElement&&(this._popoverElement.removeEventListener("beforeShowChanged",this._boundBeforeShowChangedHandler,!1),this._popoverElement.removeEventListener("beforeHideChanged",this._boundBeforeHideChangedHandler,!1),this._popoverElement.detach(),this._popoverElement.dispose()),super.dispose()}}Select.namespace="VisiWin.UI",Select.controlName="Select",Select.className="vw-select",Select.propertyList={designerType:{propertyType:"base",type:"string",defaultValue:"Control"},selectedIndexChanged:{propertyType:"event"},checkedChanged:{propertyType:"event"},checked:{propertyType:"custom",type:"boolean",defaultValue:!1},open:{propertyType:"custom",type:"boolean",defaultValue:!1},errorMode:{propertyType:"custom",type:"boolean",defaultValue:!1},borderWidth:{propertyType:"style",type:"string",element:"_textContainerElement",style:"borderWidth",forceOverwrite:!0},borderStyle:{propertyType:"style",type:"string",element:"_textContainerElement",style:"borderStyle",forceOverwrite:!0},borderRadius:{propertyType:"member",type:"string",forceOverwrite:!0},selectedValue:{propertyType:"member",type:"string"},alignItems:{propertyType:"member",type:"string",defaultValue:"Start"},justifyContent:{propertyType:"member",type:"string",defaultValue:"Center"},outlined:{propertyType:"member",type:"boolean",defaultValue:!1},listType:{propertyType:"member",type:"string"},watermarkText:{propertyType:"member",type:"string",defaultValue:""},localizableWatermarkText:{propertyType:"member",type:"string"},showLabelSymbol:{propertyType:"child",type:"boolean",child:"_labelElement",childProperty:"showSymbol",defaultValue:!1},labelIconFont:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"iconFont",defaultValue:"material-icons"},labelSymbol:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"symbol"},labelSymbolType:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"symbolType",defaultValue:"Icon"},labelSymbolSize:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"symbolSize"},labelSymbolMargin:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"symbolMargin"},labelSymbolPosition:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"symbolPosition"},labelContainerWidth:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"width"},labelContainerHeight:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"height"},labelContainerMargin:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"margin"},labelContainerPadding:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"padding"},showLabel:{propertyType:"child",type:"boolean",child:"_labelElement",childProperty:"showText",defaultValue:!0},labelWidth:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"textWidth"},labelHeight:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"textHeight"},labelMargin:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"textMargin"},labelPadding:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"textPadding"},labelText:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"text",forceOverwrite:!0,defaultValue:"Select"},localizableLabelText:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"localizableText",forceOverwrite:!0},labelTextAlignment:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"textAlignment"},labelLineClamp:{propertyType:"child",type:"number",child:"_labelElement",childProperty:"lineClamp"},labelTextWrapping:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"textWrapping"},labelTextTrimming:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"textTrimming"},labelFontClass:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"fontClass",defaultValue:"Label2"},labelFontSize:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"fontSize"},labelFontWeight:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"fontWeight"},labelLineHeight:{propertyType:"child",type:"string",child:"_labelElement",childProperty:"lineHeight"},labelTextContrast:{propertyType:"child",type:"number",child:"_labelElement",childProperty:"textContrast"},labelUppercase:{propertyType:"child",type:"boolean",child:"_labelElement",childProperty:"uppercase"},labelPosition:{propertyType:"member",type:"string",defaultValue:"Top"},containerWidth:{propertyType:"style",type:"string",element:"_containerElement",style:"width"},containerHeight:{propertyType:"style",type:"string",element:"_containerElement",style:"height"},containerMargin:{propertyType:"style",type:"string",element:"_containerElement",style:"margin"},containerPadding:{propertyType:"style",type:"string",element:"_containerElement",style:"padding"},textContainerWidth:{propertyType:"style",type:"string",element:"_textContainerElement",style:"width"},textContainerHeight:{propertyType:"member",type:"string",defaultValue:"40px"},textContainerMargin:{propertyType:"style",type:"string",element:"_textContainerElement",style:"margin"},textContainerPadding:{propertyType:"style",type:"string",element:"_textContainerElement",style:"padding"},showPrimaryText:{propertyType:"child",type:"boolean",child:"_primaryTextElement",childProperty:"show"},primaryTextWidth:{propertyType:"child",type:"string",child:"_primaryTextElement",childProperty:"width"},primaryTextHeight:{propertyType:"child",type:"string",child:"_primaryTextElement",childProperty:"height"},primaryTextMargin:{propertyType:"child",type:"string",child:"_primaryTextElement",childProperty:"margin"},primaryTextPadding:{propertyType:"child",type:"string",child:"_primaryTextElement",childProperty:"padding"},primaryText:{propertyType:"child",type:"string",child:"_primaryTextElement",childProperty:"text",defaultValue:""},localizablePrimaryText:{propertyType:"child",type:"string",child:"_primaryTextElement",childProperty:"localizableText"},primaryTextAlignment:{propertyType:"child",type:"string",child:"_primaryTextElement",childProperty:"textAlignment"},primaryTextLineClamp:{propertyType:"child",type:"number",child:"_primaryTextElement",childProperty:"lineClamp"},primaryTextWrapping:{propertyType:"child",type:"string",child:"_primaryTextElement",childProperty:"textWrapping"},primaryTextTrimming:{propertyType:"child",type:"string",child:"_primaryTextElement",childProperty:"textTrimming"},primaryTextFontClass:{propertyType:"child",type:"string",child:"_primaryTextElement",childProperty:"fontClass"},primaryTextFontSize:{propertyType:"child",type:"string",child:"_primaryTextElement",childProperty:"fontSize"},primaryTextFontWeight:{propertyType:"child",type:"string",child:"_primaryTextElement",childProperty:"fontWeight"},primaryTextLineHeight:{propertyType:"child",type:"string",child:"_primaryTextElement",childProperty:"lineHeight"},primaryTextContrast:{propertyType:"child",type:"number",child:"_primaryTextElement",childProperty:"textContrast"},primaryTextUppercase:{propertyType:"child",type:"boolean",child:"_primaryTextElement",childProperty:"uppercase"},showSecondaryText:{propertyType:"child",type:"boolean",child:"_secondaryTextElement",childProperty:"show",defaultValue:!1},secondaryTextWidth:{propertyType:"child",type:"string",child:"_secondaryTextElement",childProperty:"width"},secondaryTextHeight:{propertyType:"child",type:"string",child:"_secondaryTextElement",childProperty:"height"},secondaryTextMargin:{propertyType:"child",type:"string",child:"_secondaryTextElement",childProperty:"margin"},secondaryTextPadding:{propertyType:"child",type:"string",child:"_secondaryTextElement",childProperty:"padding"},secondaryText:{propertyType:"child",type:"string",child:"_secondaryTextElement",childProperty:"text",defaultValue:""},localizableSecondaryText:{propertyType:"child",type:"string",child:"_secondaryTextElement",childProperty:"localizableText"},secondaryTextAlignment:{propertyType:"child",type:"string",child:"_secondaryTextElement",childProperty:"textAlignment"},secondaryTextLineClamp:{propertyType:"child",type:"number",child:"_secondaryTextElement",childProperty:"lineClamp"},secondaryTextWrapping:{propertyType:"child",type:"string",child:"_secondaryTextElement",childProperty:"textWrapping"},secondaryTextTrimming:{propertyType:"child",type:"string",child:"_secondaryTextElement",childProperty:"textTrimming"},secondaryTextFontClass:{propertyType:"child",type:"string",child:"_secondaryTextElement",childProperty:"fontClass"},secondaryTextFontSize:{propertyType:"child",type:"string",child:"_secondaryTextElement",childProperty:"fontSize"},secondaryTextFontWeight:{propertyType:"child",type:"string",child:"_secondaryTextElement",childProperty:"fontWeight"},secondaryTextLineHeight:{propertyType:"child",type:"string",child:"_secondaryTextElement",childProperty:"lineHeight"},secondaryTextContrast:{propertyType:"child",type:"number",child:"_secondaryTextElement",childProperty:"textContrast"},secondaryTextUppercase:{propertyType:"child",type:"boolean",child:"_secondaryTextElement",childProperty:"uppercase"},showSymbol:{propertyType:"child",type:"boolean",child:"_symbolElement",childProperty:"show",defaultValue:!1},iconFont:{propertyType:"child",type:"string",child:"_symbolElement"},symbolType:{propertyType:"child",type:"string",child:"_symbolElement"},symbolSize:{propertyType:"child",type:"string",child:"_symbolElement"},symbolMargin:{propertyType:"child",type:"string",child:"_symbolElement",childProperty:"margin"},floatingLabelFieldMargin:{propertyType:"style",type:"string",element:"_floatingLabelFieldElement",style:"margin"},showFloatingLabel:{propertyType:"child",type:"boolean",child:"_floatingLabelElement",childProperty:"show",defaultValue:!1},floatingLabelWidth:{propertyType:"child",type:"string",child:"_floatingLabelElement",childProperty:"width"},floatingLabelHeight:{propertyType:"child",type:"string",child:"_floatingLabelElement",childProperty:"height"},floatingLabelMargin:{propertyType:"child",type:"string",child:"_floatingLabelElement",childProperty:"margin"},floatingLabelPadding:{propertyType:"child",type:"string",child:"_floatingLabelElement",childProperty:"padding"},floatingLabelText:{propertyType:"child",type:"string",child:"_floatingLabelElement",childProperty:"text",defaultValue:"Select"},localizableFloatingLabelText:{propertyType:"child",type:"string",child:"_floatingLabelElement",childProperty:"localizableText"},floatingLabelTextAlignment:{propertyType:"child",type:"string",child:"_floatingLabelElement",childProperty:"textAlignment"},floatingLabelLineClamp:{propertyType:"child",type:"number",child:"_floatingLabelElement",childProperty:"lineClamp"},floatingLabelTextWrapping:{propertyType:"child",type:"string",child:"_floatingLabelElement",childProperty:"textWrapping"},floatingLabelTextTrimming:{propertyType:"child",type:"string",child:"_floatingLabelElement",childProperty:"textTrimming"},floatingLabelFontClass:{propertyType:"child",type:"string",child:"_floatingLabelElement",childProperty:"fontClass"},floatingLabelFontSize:{propertyType:"child",type:"string",child:"_floatingLabelElement",childProperty:"fontSize"},floatingLabelFontWeight:{propertyType:"child",type:"string",child:"_floatingLabelElement",childProperty:"fontWeight"},floatingLabelLineHeight:{propertyType:"child",type:"string",child:"_floatingLabelElement",childProperty:"lineHeight"},floatingLabelTextContrast:{propertyType:"child",type:"number",child:"_floatingLabelElement",childProperty:"textContrast"},floatingLabelUppercase:{propertyType:"child",type:"boolean",child:"_floatingLabelElement",childProperty:"uppercase"},floatingLabelFixed:{propertyType:"member",type:"boolean",defaultValue:!1},floatingLabelTransition:{propertyType:"member",type:"string"},floatingLabelOutlineWidth:{propertyType:"style",type:"string",element:"_floatingLabelElement",style:"outlineWidth"},floatingLabelOutlineStyle:{propertyType:"style",type:"string",element:"_floatingLabelElement",style:"outlineStyle"},showStateSymbol:{propertyType:"child",type:"boolean",child:"_stateSymbolElement",childProperty:"show",defaultValue:!0},stateSymbolIconFont:{propertyType:"child",type:"string",child:"_stateSymbolElement",childProperty:"iconFont"},openedStateSymbol:{propertyType:"member",type:"string",defaultValue:"arrow_drop_up"},closedStateSymbol:{propertyType:"member",type:"string",defaultValue:"arrow_drop_down"},stateSymbolType:{propertyType:"child",type:"string",child:"_stateSymbolElement",childProperty:"symbolType"},stateSymbolSize:{propertyType:"child",type:"string",child:"_stateSymbolElement",childProperty:"symbolSize"},stateSymbolMargin:{propertyType:"child",type:"string",child:"_stateSymbolElement",childProperty:"margin"},showUnderline:{propertyType:"member",type:"boolean",defaultValue:!1},underlineHeight:{propertyType:"child",type:"string",child:"_underlineElement",childProperty:"height"},underlineOpacity:{propertyType:"member",type:"number"},checkedUnderlineOpacity:{propertyType:"member",type:"number"},underlineTransition:{propertyType:"member",type:"string",defaultValue:""},underlineTransform:{propertyType:"member",type:"string",defaultValue:""},checkedUnderlineTransform:{propertyType:"member",type:"string",defaultValue:""},registerTargetId:{propertyType:"child",type:"string",child:"_menuElement",forceOverwrite:!0,defaultValue:"SelectOption"},menuItems:{propertyType:"child",type:"string",child:"_menuElement"},menuWidth:{propertyType:"child",type:"string",child:"_menuElement",childProperty:"width"},menuHeight:{propertyType:"child",type:"string",child:"_menuElement",childProperty:"height"},menuMargin:{propertyType:"member",type:"string",defaultValue:"0px"},menuPadding:{propertyType:"child",type:"string",child:"_menuElement",childProperty:"padding"},menuBorderWidth:{propertyType:"child",type:"string",child:"_menuElement",childProperty:"borderWidth"},menuBorderStyle:{propertyType:"child",type:"string",child:"_menuElement",childProperty:"borderStyle"},menuBorderRadius:{propertyType:"member",type:"string",defaultValue:"0px"},menuShadow:{propertyType:"member",type:"string"},menuPlacement:{propertyType:"member",type:"string",defaultValue:"Bottom"},selectedIndex:{propertyType:"child",type:"number",child:"_menuElement",defaultValue:-1},popoverId:{propertyType:"member",type:"string",defaultValue:"Popover"},showHelperText:{propertyType:"member",type:"boolean",defaultValue:!1},helperTextWidth:{propertyType:"child",type:"string",child:"_helperTextElement",childProperty:"width"},helperTextHeight:{propertyType:"child",type:"string",child:"_helperTextElement",childProperty:"height"},helperTextMargin:{propertyType:"child",type:"string",child:"_helperTextElement",childProperty:"margin"},helperTextPadding:{propertyType:"child",type:"string",child:"_helperTextElement",childProperty:"padding"},helperText:{propertyType:"child",type:"string",child:"_helperTextElement",childProperty:"text",defaultValue:"HelperText"},localizableHelperText:{propertyType:"child",type:"string",child:"_helperTextElement",childProperty:"localizableText"},helperTextAlignment:{propertyType:"child",type:"string",child:"_helperTextElement",childProperty:"textAlignment"},helperTextLineClamp:{propertyType:"child",type:"number",child:"_helperTextElement",childProperty:"lineClamp"},helperTextWrapping:{propertyType:"child",type:"string",child:"_helperTextElement",childProperty:"textWrapping"},helperTextTrimming:{propertyType:"child",type:"string",child:"_helperTextElement",childProperty:"textTrimming"},helperTextFontClass:{propertyType:"child",type:"string",child:"_helperTextElement",childProperty:"fontClass",defaultValue:"Label2"},helperTextFontSize:{propertyType:"child",type:"string",child:"_helperTextElement",childProperty:"fontSize"},helperTextFontWeight:{propertyType:"child",type:"string",child:"_helperTextElement",childProperty:"fontWeight"},helperTextLineHeight:{propertyType:"child",type:"string",child:"_helperTextElement",childProperty:"lineHeight"},helperTextContrast:{propertyType:"child",type:"number",child:"_helperTextElement",childProperty:"textContrast"},helperTextUppercase:{propertyType:"child",type:"boolean",child:"_helperTextElement",childProperty:"uppercase"},showErrorText:{propertyType:"member",type:"boolean",defaultValue:!1},errorTextWidth:{propertyType:"child",type:"string",child:"_errorTextElement",childProperty:"width"},errorTextHeight:{propertyType:"child",type:"string",child:"_errorTextElement",childProperty:"height"},errorTextMargin:{propertyType:"child",type:"string",child:"_errorTextElement",childProperty:"margin"},errorTextPadding:{propertyType:"child",type:"string",child:"_errorTextElement",childProperty:"padding"},errorText:{propertyType:"child",type:"string",child:"_errorTextElement",childProperty:"text",defaultValue:"ErrorText"},localizableErrorText:{propertyType:"child",type:"string",child:"_errorTextElement",childProperty:"localizableText"},errorTextAlignment:{propertyType:"child",type:"string",child:"_errorTextElement",childProperty:"textAlignment"},errorTextLineClamp:{propertyType:"child",type:"number",child:"_errorTextElement",childProperty:"lineClamp"},errorTextWrapping:{propertyType:"child",type:"string",child:"_errorTextElement",childProperty:"textWrapping"},errorTextTrimming:{propertyType:"child",type:"string",child:"_errorTextElement",childProperty:"textTrimming"},errorTextFontClass:{propertyType:"child",type:"string",child:"_errorTextElement",childProperty:"fontClass",defaultValue:"Label2"},errorTextFontSize:{propertyType:"child",type:"string",child:"_errorTextElement",childProperty:"fontSize"},errorTextFontWeight:{propertyType:"child",type:"string",child:"_errorTextElement",childProperty:"fontWeight"},errorTextLineHeight:{propertyType:"child",type:"string",child:"_errorTextElement",childProperty:"lineHeight"},errorTextContrast:{propertyType:"child",type:"number",child:"_errorTextElement",childProperty:"textContrast"},errorTextUppercase:{propertyType:"child",type:"boolean",child:"_errorTextElement",childProperty:"uppercase"},backgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BackgroundColor"},hoverBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},checkedBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},floatingLabelBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},labelForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},labelSymbolForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},primaryTextForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},secondaryTextForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},symbolForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},floatingLabelForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},checkedFloatingLabelForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},stateSymbolForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},helperTextForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},errorColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ErrorColor"},borderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"},hoverBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@HoverBorderColor"},checkedBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@CheckedBorderColor"},underlineColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"},checkedUnderlineColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@CheckedBorderColor"},menuBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BackgroundColor"},menuBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"},floatingLabelOutlineColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},disabledBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledBackgroundColor"},disabledForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledForegroundColor"},disabledBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledBorderColor"},disabledFloatingLabelOutlineColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"}},A.Select=Select}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class Option extends x.UI.ToggleButtonBase{constructor(A,V){super(A,V),this._containerElement=null,this._symbolElement=null,this._textContainerElement=null,this._primaryTextElement=null,this._secondaryTextElement=null,this.inputEventsEnable=!0,this.addPropertyList(Option,Option.propertyList),this.defaultConstructor(A,this.inlineOptions,x.UI.Option.controlName,x.UI.Option.className)}createTemplate(){if(x.Utilities.isInDesignMode())return this.element.innerHTML=['<div class="vw-option__container">','<div class="vw-option__symbol" data-win-control="VisiWin.UI.Symbol"></div>','<div class="vw-option__textcontainer">','<div class="vw-option__primarytext" data-win-control="VisiWin.UI.TextBlock"></div>','<div class="vw-option__secondarytext" data-win-control="VisiWin.UI.TextBlock"></div>',"</div>","</div>"].join("\n"),this._containerElement=this.element.firstElementChild,this._symbolElement=this._containerElement.firstElementChild,this._textContainerElement=this._symbolElement.nextElementSibling,this._primaryTextElement=this._textContainerElement.firstElementChild,this._secondaryTextElement=this._primaryTextElement.nextElementSibling,this.processElements([this._symbolElement,this._primaryTextElement,this._secondaryTextElement]);var A=null!=this.inlineOptions.showSymbol?this.inlineOptions.showSymbol:this.getStyleProperty("showSymbol")?this.getStyleProperty("showSymbol"):x.UI.Option.propertyList.showSymbol.defaultValue,V=null!=this.inlineOptions.showPrimaryText?this.inlineOptions.showPrimaryText:this.getStyleProperty("showPrimaryText")?this.getStyleProperty("showPrimaryText"):x.UI.Option.propertyList.showPrimaryText.defaultValue,R=null!=this.inlineOptions.showSecondaryText?this.inlineOptions.showSecondaryText:this.getStyleProperty("showSecondaryText")?this.getStyleProperty("showSecondaryText"):x.UI.Option.propertyList.showSecondaryText.defaultValue,D='<div class="vw-option__container">';return A&&(D+='<div class="vw-option__symbol" data-win-control="VisiWin.UI.Symbol"></div>'),(V||R)&&(D+='<div class="vw-option__textcontainer">',V&&(D+='<div class="vw-option__primarytext" data-win-control="VisiWin.UI.TextBlock"></div>'),R&&(D+='<div class="vw-option__secondarytext" data-win-control="VisiWin.UI.TextBlock"></div>'),D+="</div>"),D+="</div>",this.element.innerHTML=D,this._containerElement=this.element.firstElementChild,A&&(this._symbolElement=this._containerElement.firstElementChild),(V||R)&&(this._textContainerElement=A?this._symbolElement.nextElementSibling:this._containerElement.firstElementChild,V?(this._primaryTextElement=this._textContainerElement.firstElementChild,R&&(this._secondaryTextElement=this._primaryTextElement.nextElementSibling)):R&&(this._secondaryTextElement=this._textContainerElement.firstElementChild)),this.processElements([this._symbolElement,this._primaryTextElement,this._secondaryTextElement])}_updateColors(x){this.disabled?(this._primaryTextElement&&this._primaryTextElement.winControl&&this.setColor("disabledForegroundColor","foregroundColor",null,"_primaryTextElement"),this._secondaryTextElement&&this._secondaryTextElement.winControl&&this.setColor("disabledForegroundColor","foregroundColor",null,"_secondaryTextElement"),this._symbolElement&&this._symbolElement.winControl&&this.setColor("disabledForegroundColor","foregroundColor",null,"_symbolElement"),this.setColor("disabledBackgroundColor","backgroundColor"),this.setColor("disabledBorderColor","borderColor"),this._containerElement.style.backgroundColor=""):this.checked?(this._primaryTextElement&&this._primaryTextElement.winControl&&this.setColor("checkedForegroundColor","foregroundColor",null,"_primaryTextElement"),this._secondaryTextElement&&this._secondaryTextElement.winControl&&this.setColor("checkedForegroundColor","foregroundColor",null,"_secondaryTextElement"),this._symbolElement&&this._symbolElement.winControl&&this.setColor("checkedForegroundColor","foregroundColor",null,"_symbolElement"),this.setColor("checkedBackgroundColor","backgroundColor"),this.pressed?(this._primaryTextElement&&this._primaryTextElement.winControl&&this.setColor("checkedPressedForegroundColor","foregroundColor",null,"_primaryTextElement"),this._secondaryTextElement&&this._secondaryTextElement.winControl&&this.setColor("checkedPressedForegroundColor","foregroundColor",null,"_secondaryTextElement"),this._symbolElement&&this._symbolElement.winControl&&this.setColor("checkedPressedForegroundColor","foregroundColor",null,"_symbolElement"),this.setColor("checkedPressedBackgroundColor","backgroundColor","_containerElement")):this.hover?(this.setColor("checkedHoverBorderColor","borderColor"),this.setColor("checkedHoverBackgroundColor","backgroundColor","_containerElement")):(this.setColor("checkedBorderColor","borderColor"),this._containerElement.style.backgroundColor="")):(this._primaryTextElement&&this._primaryTextElement.winControl&&this.setColor("foregroundColor","foregroundColor",null,"_primaryTextElement"),this._secondaryTextElement&&this._secondaryTextElement.winControl&&this.setColor("foregroundColor","foregroundColor",null,"_secondaryTextElement"),this._symbolElement&&this._symbolElement.winControl&&this.setColor("foregroundColor","foregroundColor",null,"_symbolElement"),this.setColor("backgroundColor"),this.pressed?(this._primaryTextElement&&this._primaryTextElement.winControl&&this.setColor("pressedForegroundColor","foregroundColor",null,"_primaryTextElement"),this._secondaryTextElement&&this._secondaryTextElement.winControl&&this.setColor("pressedForegroundColor","foregroundColor",null,"_secondaryTextElement"),this._symbolElement&&this._symbolElement.winControl&&this.setColor("pressedForegroundColor","foregroundColor",null,"_symbolElement"),this.setColor("pressedBackgroundColor","backgroundColor","_containerElement")):this.hover?(this.setColor("hoverBorderColor","borderColor"),this.setColor("hoverBackgroundColor","backgroundColor","_containerElement")):(this.setColor("borderColor","borderColor"),this._containerElement.style.backgroundColor=""))}_updateLayout(x){if("updateLayout"==x.changeName||"showSymbol"==x.changeName||"showPrimaryText"==x.changeName||"showSecondaryText"==x.changeName||"symbolPosition"==x.changeName)if(this.showSymbol&&(this.showPrimaryText||this.showSecondaryText))switch(this.symbolPosition){case"Top":this._containerElement.style.flexDirection="column";break;case"Right":this._containerElement.style.flexDirection="row-reverse";break;case"Bottom":this._containerElement.style.flexDirection="column-reverse";break;default:this._containerElement.style.flexDirection="row"}else if(this.showSymbol&&!this.showPrimaryText&&!this.showSecondaryText)switch(this.symbolPosition){case"Top":this._containerElement.style.justifyContent="center",this._containerElement.style.alignItems="flex-start";break;case"Right":this._containerElement.style.justifyContent="flex-end",this._containerElement.style.alignItems="center";break;case"Bottom":this._containerElement.style.justifyContent="center",this._containerElement.style.alignItems="flex-end";break;case"Center":this._containerElement.style.justifyContent="center",this._containerElement.style.alignItems="center";break;default:this._containerElement.style.justifyContent="flex-start",this._containerElement.style.alignItems="center"}}attach(){let x=[];return this.isAttached||(x.push(super.attach()),this._primaryTextElement&&this._primaryTextElement.winControl&&x.push(this._primaryTextElement.winControl.attach()),this._secondaryTextElement&&this._secondaryTextElement.winControl&&x.push(this._secondaryTextElement.winControl.attach())),WinJS.Promise.join(x)}detach(){let x=[];return this.isAttached&&(x.push(super.detach()),this._primaryTextElement&&this._primaryTextElement.winControl&&x.push(this._primaryTextElement.winControl.detach()),this._secondaryTextElement&&this._secondaryTextElement.winControl&&x.push(this._secondaryTextElement.winControl.detach())),WinJS.Promise.join(x)}dispose(){return super.dispose()}}Option.namespace="VisiWin.UI",Option.controlName="Option",Option.className="vw-option",Option.propertyList={designerType:{propertyType:"base",type:"string",defaultValue:"Control"},registerSourceId:{propertyType:"base",type:"string",defaultValue:"Group"},padding:{propertyType:"style",type:"string",element:"_containerElement",forceOverwrite:!0},transition:{propertyType:"style",type:"string"},value:{propertyType:"member",type:"string",forceOverwrite:!0},containerBorderWidth:{propertyType:"style",type:"string",element:"_containerElement",style:"borderWidth"},containerBorderStyle:{propertyType:"style",type:"string",element:"_containerElement",style:"borderStyle"},containerBorderRadius:{propertyType:"style",type:"string",element:"_containerElement",style:"borderRadius"},containerTransition:{propertyType:"style",type:"string",element:"_containerElement",style:"transition"},showSymbol:{propertyType:"child",type:"boolean",child:"_symbolElement",childProperty:"show",defaultValue:!1},iconFont:{propertyType:"child",type:"string",child:"_symbolElement"},symbol:{propertyType:"child",type:"string",child:"_symbolElement"},symbolType:{propertyType:"child",type:"string",child:"_symbolElement"},symbolSize:{propertyType:"child",type:"string",child:"_symbolElement"},symbolMargin:{propertyType:"child",type:"string",child:"_symbolElement",childProperty:"margin"},symbolPosition:{propertyType:"member",type:"string",defaultValue:"Left"},showPrimaryText:{propertyType:"child",type:"boolean",child:"_primaryTextElement",childProperty:"show",defaultValue:!0},primaryTextWidth:{propertyType:"child",type:"string",child:"_primaryTextElement",childProperty:"width"},primaryTextHeight:{propertyType:"child",type:"string",child:"_primaryTextElement",childProperty:"height"},primaryTextMargin:{propertyType:"child",type:"string",child:"_primaryTextElement",childProperty:"margin"},primaryTextPadding:{propertyType:"child",type:"string",child:"_primaryTextElement",childProperty:"padding"},primaryText:{propertyType:"child",type:"string",child:"_primaryTextElement",childProperty:"text",defaultValue:"PrimaryText"},localizablePrimaryText:{propertyType:"child",type:"string",child:"_primaryTextElement",childProperty:"localizableText"},primaryTextAlignment:{propertyType:"child",type:"string",child:"_primaryTextElement",childProperty:"textAlignment"},primaryTextLineClamp:{propertyType:"child",type:"number",child:"_primaryTextElement",childProperty:"lineClamp"},primaryTextWrapping:{propertyType:"child",type:"string",child:"_primaryTextElement",childProperty:"textWrapping"},primaryTextTrimming:{propertyType:"child",type:"string",child:"_primaryTextElement",childProperty:"textTrimming"},primaryTextFontClass:{propertyType:"child",type:"string",child:"_primaryTextElement",childProperty:"fontClass"},primaryTextFontSize:{propertyType:"child",type:"string",child:"_primaryTextElement",childProperty:"fontSize"},primaryTextFontWeight:{propertyType:"child",type:"string",child:"_primaryTextElement",childProperty:"fontWeight"},primaryTextLineHeight:{propertyType:"child",type:"string",child:"_primaryTextElement",childProperty:"lineHeight"},primaryTextContrast:{propertyType:"child",type:"number",child:"_primaryTextElement",childProperty:"textContrast"},primaryTextUppercase:{propertyType:"child",type:"boolean",child:"_primaryTextElement",childProperty:"uppercase"},showSecondaryText:{propertyType:"child",type:"boolean",child:"_secondaryTextElement",childProperty:"show",defaultValue:!1},secondaryTextWidth:{propertyType:"child",type:"string",child:"_secondaryTextElement",childProperty:"width"},secondaryTextHeight:{propertyType:"child",type:"string",child:"_secondaryTextElement",childProperty:"height"},secondaryTextMargin:{propertyType:"child",type:"string",child:"_secondaryTextElement",childProperty:"margin"},secondaryTextPadding:{propertyType:"child",type:"string",child:"_secondaryTextElement",childProperty:"padding"},secondaryText:{propertyType:"child",type:"string",child:"_secondaryTextElement",childProperty:"text",defaultValue:"SecondaryText"},localizableSecondaryText:{propertyType:"child",type:"string",child:"_secondaryTextElement",childProperty:"localizableText"},secondaryTextAlignment:{propertyType:"child",type:"string",child:"_secondaryTextElement",childProperty:"textAlignment"},secondaryTextLineClamp:{propertyType:"child",type:"number",child:"_secondaryTextElement",childProperty:"lineClamp"},secondaryTextWrapping:{propertyType:"child",type:"string",child:"_secondaryTextElement",childProperty:"textWrapping"},secondaryTextTrimming:{propertyType:"child",type:"string",child:"_secondaryTextElement",childProperty:"textTrimming"},secondaryTextFontClass:{propertyType:"child",type:"string",child:"_secondaryTextElement",childProperty:"fontClass"},secondaryTextFontSize:{propertyType:"child",type:"string",child:"_secondaryTextElement",childProperty:"fontSize"},secondaryTextFontWeight:{propertyType:"child",type:"string",child:"_secondaryTextElement",childProperty:"fontWeight"},secondaryTextLineHeight:{propertyType:"child",type:"string",child:"_secondaryTextElement",childProperty:"lineHeight"},secondaryTextContrast:{propertyType:"child",type:"number",child:"_secondaryTextElement",childProperty:"textContrast"},secondaryTextUppercase:{propertyType:"child",type:"boolean",child:"_secondaryTextElement",childProperty:"uppercase"},backgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BackgroundColor"},hoverBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@HoverBackgroundColor"},pressedBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@PressedBackgroundColor"},checkedBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@CheckedBackgroundColor"},checkedHoverBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@CheckedHoverBackgroundColor"},checkedPressedBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@CheckedPressedBackgroundColor"},disabledBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledBackgroundColor"},foregroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},pressedForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},checkedForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@AltForegroundColor"},checkedPressedForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@AltForegroundColor"},disabledForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledForegroundColor"},borderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"},hoverBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@HoverBorderColor"},checkedBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@CheckedBorderColor"},checkedHoverBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@CheckedHoverBorderColor"},disabledBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledBorderColor"}},A.Option=Option}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class Submenu extends x.UI.ControlBase{constructor(A,V){super(A,V),this._headerElement=null,this._containerElement=null,this.addPropertyList(Submenu,Submenu.propertyList),this.defaultConstructor(A,this.inlineOptions,x.UI.Submenu.controlName,x.UI.Submenu.className)}createTemplate(){var A=document.createElement("div"),V=null!=this.inlineOptions.showSymbol?this.inlineOptions.showSymbol:this.getStyleProperty("showSymbol")?this.getStyleProperty("showSymbol"):x.UI.Submenu.propertyList.showSymbol.defaultValue;return x.Utilities.reparentChildren(this.element,A),this.element.innerHTML=['<div data-win-control="VisiWin.UI.SubmenuHeader" data-win-options="{showSymbol:'+V+'}"></div>','<div data-win-control="VisiWin.UI.SubmenuContainer"></div>'].join("\n"),this._headerElement=this.element.firstElementChild,this._containerElement=this._headerElement.nextElementSibling,x.Utilities.reparentChildren(A,this._containerElement),this.processElements([this._headerElement,this._containerElement])}_updateColors(x){this.setColor("backgroundColor")}dispose(){return super.dispose()}}Submenu.namespace="VisiWin.UI",Submenu.controlName="Submenu",Submenu.className="vw-submenu",Submenu.propertyList={designerType:{propertyType:"base",type:"string",defaultValue_DM:"Control"},hover:{propertyType:"child",type:"boolean",child:"_headerElement",forceOverwrite:!0},pressed:{propertyType:"child",type:"boolean",child:"_headerElement"},checked:{propertyType:"child",type:"boolean",child:"_headerElement"},disabled:{propertyType:"child",type:"boolean",child:"_headerElement",forceOverwrite:!0},transition:{propertyType:"style",type:"string"},menuItems:{propertyType:"member",type:"string"},touchRippleEnabled:{propertyType:"child",type:"boolean",child:"_headerElement"},rippleElement:{propertyType:"child",type:"string",child:"_headerElement"},rippleTarget:{propertyType:"child",type:"string",child:"_headerElement"},rippleTargetAsParent:{propertyType:"child",type:"boolean",child:"_headerElement"},rippleRadius:{propertyType:"child",type:"number",child:"_headerElement"},rippleSpeedAmount:{propertyType:"child",type:"number",child:"_headerElement"},rippleCentered:{propertyType:"child",type:"boolean",child:"_headerElement"},rippleUnbounded:{propertyType:"child",type:"boolean",child:"_headerElement"},ripplePersistent:{propertyType:"child",type:"boolean",child:"_headerElement"},rippleFadeInDuration:{propertyType:"child",type:"number",child:"_headerElement"},rippleFadeOutDuration:{propertyType:"child",type:"number",child:"_headerElement"},rippleColor:{propertyType:"child",type:"string",child:"_headerElement"},headerWidth:{propertyType:"child",type:"string",child:"_headerElement",childProperty:"width"},headerHeight:{propertyType:"child",type:"string",child:"_headerElement",childProperty:"height"},headerMargin:{propertyType:"child",type:"string",child:"_headerElement",childProperty:"margin"},headerPadding:{propertyType:"child",type:"string",child:"_headerElement",childProperty:"padding"},headerTransition:{propertyType:"child",type:"string",child:"_headerElement",childProperty:"transition"},headerBorderWidth:{propertyType:"child",type:"string",child:"_headerElement",childProperty:"borderWidth"},headerBorderStyle:{propertyType:"child",type:"string",child:"_headerElement",childProperty:"borderStyle"},headerBorderRadius:{propertyType:"child",type:"string",child:"_headerElement",childProperty:"borderRadius"},containerBorderWidth:{propertyType:"child",type:"string",child:"_containerElement",childProperty:"borderWidth"},containerBorderStyle:{propertyType:"child",type:"string",child:"_containerElement",childProperty:"borderStyle"},containerBorderRadius:{propertyType:"child",type:"string",child:"_containerElement",childProperty:"borderRadius"},containerWidth:{propertyType:"child",type:"string",child:"_containerElement",childProperty:"width"},containerHeight:{propertyType:"child",type:"string",child:"_containerElement",childProperty:"height"},containerMaxHeight:{propertyType:"child",type:"string",child:"_containerElement",childProperty:"maxHeight"},containerMargin:{propertyType:"child",type:"string",child:"_containerElement",childProperty:"margin"},containerPadding:{propertyType:"child",type:"string",child:"_containerElement",childProperty:"padding"},containerTransition:{propertyType:"child",type:"string",child:"_containerElement",childProperty:"transition"},showSymbol:{propertyType:"child",type:"boolean",child:"_headerElement",defaultValue:!1},iconFont:{propertyType:"child",type:"string",child:"_headerElement"},symbol:{propertyType:"child",type:"string",child:"_headerElement"},symbolType:{propertyType:"child",type:"string",child:"_headerElement"},symbolSize:{propertyType:"child",type:"string",child:"_headerElement"},symbolMargin:{propertyType:"child",type:"string",child:"_headerElement"},showText:{propertyType:"child",type:"boolean",child:"_headerElement"},textWidth:{propertyType:"child",type:"string",child:"_headerElement"},textHeight:{propertyType:"child",type:"string",child:"_headerElement"},textMargin:{propertyType:"child",type:"string",child:"_headerElement"},textPadding:{propertyType:"child",type:"string",child:"_headerElement"},text:{propertyType:"child",type:"string",child:"_headerElement"},localizableText:{propertyType:"child",type:"string",child:"_headerElement"},textAlignment:{propertyType:"child",type:"string",child:"_headerElement"},lineClamp:{propertyType:"child",type:"number",child:"_headerElement"},textWrapping:{propertyType:"child",type:"string",child:"_headerElement"},textTrimming:{propertyType:"child",type:"string",child:"_headerElement"},fontClass:{propertyType:"child",type:"string",child:"_headerElement"},fontSize:{propertyType:"child",type:"string",child:"_headerElement"},fontWeight:{propertyType:"child",type:"string",child:"_headerElement"},lineHeight:{propertyType:"child",type:"string",child:"_headerElement"},textContrast:{propertyType:"child",type:"number",child:"_headerElement"},uppercase:{propertyType:"child",type:"boolean",child:"_headerElement"},showExpandingSymbol:{propertyType:"child",type:"boolean",child:"_headerElement"},expandingSymbolIconFont:{propertyType:"child",type:"string",child:"_headerElement"},collapsedSymbol:{propertyType:"child",type:"string",child:"_headerElement"},expandedSymbol:{propertyType:"child",type:"string",child:"_headerElement"},expandingSymbolType:{propertyType:"child",type:"string",child:"_headerElement"},expandingSymbolSize:{propertyType:"child",type:"string",child:"_headerElement"},expandingSymbolMargin:{propertyType:"child",type:"string",child:"_headerElement"},backgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},containerBackgroundColor:{propertyType:"child",type:"string",child:"_containerElement",childProperty:"backgroundColor"},headerBackgroundColor:{propertyType:"child",type:"string",child:"_headerElement",childProperty:"backgroundColor"},hoverHeaderBackgroundColor:{propertyType:"child",type:"string",child:"_headerElement",childProperty:"hoverBackgroundColor"},pressedHeaderBackgroundColor:{propertyType:"child",type:"string",child:"_headerElement",childProperty:"pressedBackgroundColor"},checkedHeaderBackgroundColor:{propertyType:"child",type:"string",child:"_headerElement",childProperty:"checkedBackgroundColor"},checkedHoverHeaderBackgroundColor:{propertyType:"child",type:"string",child:"_headerElement",childProperty:"checkedHoverBackgroundColor"},checkedPressedHeaderBackgroundColor:{propertyType:"child",type:"string",child:"_headerElement",childProperty:"checkedPressedBackgroundColor"},disabledHeaderBackgroundColor:{propertyType:"child",type:"string",child:"_headerElement",childProperty:"disabledBackgroundColor"},headerForegroundColor:{propertyType:"child",type:"string",child:"_headerElement",childProperty:"foregroundColor"},hoverHeaderForegroundColor:{propertyType:"child",type:"string",child:"_headerElement",childProperty:"hoverForegroundColor",defaultValue:"@ForegroundColor"},pressedHeaderForegroundColor:{propertyType:"child",type:"string",child:"_headerElement",childProperty:"pressedForegroundColor"},checkedHeaderForegroundColor:{propertyType:"child",type:"string",child:"_headerElement",childProperty:"checkedForegroundColor"},checkedHoverHeaderForegroundColor:{propertyType:"child",type:"string",child:"_headerElement",childProperty:"checkedHoverForegroundColor",defaultValue:"@ForegroundColor"},checkedPressedHeaderForegroundColor:{propertyType:"child",type:"string",child:"_headerElement",childProperty:"checkedPressedForegroundColor"},disabledHeaderForegroundColor:{propertyType:"child",type:"string",child:"_headerElement",childProperty:"disabledForegroundColor"},headerBorderColor:{propertyType:"child",type:"string",child:"_headerElement",childProperty:"borderColor"},hoverHeaderBorderColor:{propertyType:"child",type:"string",child:"_headerElement",childProperty:"hoverBorderColor"},checkedHeaderBorderColor:{propertyType:"child",type:"string",child:"_headerElement",childProperty:"checkedBorderColor"},checkedHoverHeaderBorderColor:{propertyType:"child",type:"string",child:"_headerElement",childProperty:"checkedHoverBorderColor"},disabledHeaderBorderColor:{propertyType:"child",type:"string",child:"_headerElement",childProperty:"disabledBorderColor"}},A.Submenu=Submenu}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class SubmenuHeader extends x.UI.ToggleButtonBase{constructor(A,V){super(A,V),this._containerElement=null,this._symbolElement=null,this._textElement=null,this._expandingSymbolElement=null,this.inputEventsEnable=!0,this.addPropertyList(SubmenuHeader,SubmenuHeader.propertyList),this.defaultConstructor(A,this.inlineOptions,x.UI.SubmenuHeader.controlName,x.UI.SubmenuHeader.className)}createTemplate(){if(x.Utilities.isInDesignMode())return this.element.innerHTML=['<div class="vw-submenuheader__container">','<div class="vw-submenuheader__symbol" data-win-control="VisiWin.UI.Symbol"></div>','<div class="vw-submenuheader__text" data-win-control="VisiWin.UI.TextBlock"></div>','<div class="vw-submenuheader__expandsymbol" data-win-control="VisiWin.UI.Symbol"></div>',"</div>"].join("\n"),this._containerElement=this.element.firstElementChild,this._symbolElement=this._containerElement.firstElementChild,this._textElement=this._symbolElement.nextElementSibling,this._expandingSymbolElement=this._textElement.nextElementSibling,this.processElements([this._symbolElement,this._textElement,this._expandingSymbolElement]);var A=null!=this.inlineOptions.showSymbol?this.inlineOptions.showSymbol:this.getStyleProperty("showSymbol")?this.getStyleProperty("showSymbol"):x.UI.SubmenuHeader.propertyList.showSymbol.defaultValue,V=null!=this.inlineOptions.showText?this.inlineOptions.showText:this.getStyleProperty("showText")?this.getStyleProperty("showText"):x.UI.SubmenuHeader.propertyList.showText.defaultValue,R=null!=this.inlineOptions.showExpandingSymbol?this.inlineOptions.showExpandingSymbol:this.getStyleProperty("showExpandingSymbol")?this.getStyleProperty("showExpandingSymbol"):x.UI.SubmenuHeader.propertyList.showExpandingSymbol.defaultValue,D='<div class="vw-submenuheader__container">';return A&&(D+='<div class="vw-submenuheader__symbol" data-win-control="VisiWin.UI.Symbol"></div>'),V&&(D+='<div class="vw-submenuheader__text" data-win-control="VisiWin.UI.TextBlock"></div>'),R&&(D+='<div class="vw-submenuheader__expandsymbol" data-win-control="VisiWin.UI.Symbol"></div>'),D+="</div>",this.element.innerHTML=D,this._containerElement=this.element.firstElementChild,A?(this._symbolElement=this._containerElement.firstElementChild,V?(this._textElement=this._symbolElement.nextElementSibling,R&&(this._expandingSymbolElement=this._textElement.nextElementSibling)):R&&(this._expandingSymbolElement=this._symbolElement.nextElementSibling)):V?(this._textElement=this._containerElement.firstElementChild,R&&(this._expandingSymbolElement=this._textElement.nextElementSibling)):R&&(this._expandingSymbolElement=this._containerElement.firstElementChild),this.processElements([this._symbolElement,this._textElement,this._expandingSymbolElement])}_updateColors(x){this.disabled?(this._textElement&&this._textElement.winControl&&this.setColor("disabledForegroundColor","foregroundColor",null,"_textElement"),this._symbolElement&&this._symbolElement.winControl&&this.setColor("disabledForegroundColor","foregroundColor",null,"_symbolElement"),this._expandingSymbolElement&&this._expandingSymbolElement.winControl&&this.setColor("disabledForegroundColor","foregroundColor",null,"_expandingSymbolElement"),this.setColor("disabledBackgroundColor","backgroundColor"),this.setColor("disabledBorderColor","borderColor"),this._containerElement.style.backgroundColor=""):this.checked?(this._textElement&&this._textElement.winControl&&this.setColor("checkedForegroundColor","foregroundColor",null,"_textElement"),this._symbolElement&&this._symbolElement.winControl&&this.setColor("checkedForegroundColor","foregroundColor",null,"_symbolElement"),this._expandingSymbolElement&&this._expandingSymbolElement.winControl&&this.setColor("checkedForegroundColor","foregroundColor",null,"_expandingSymbolElement"),this.setColor("checkedBackgroundColor","backgroundColor"),this.pressed?(this._textElement&&this._textElement.winControl&&this.setColor("checkedPressedForegroundColor","foregroundColor",null,"_textElement"),this._symbolElement&&this._symbolElement.winControl&&this.setColor("checkedPressedForegroundColor","foregroundColor",null,"_symbolElement"),this._expandingSymbolElement&&this._expandingSymbolElement.winControl&&this.setColor("checkedPressedForegroundColor","foregroundColor",null,"_expandingSymbolElement"),this.setColor("checkedPressedBackgroundColor","backgroundColor","_containerElement")):this.hover?(this.setColor("checkedHoverBorderColor","borderColor"),this.setColor("checkedHoverBackgroundColor","backgroundColor","_containerElement"),this.setColor("checkedHoverForegroundColor","foregroundColor","_textElement")):(this.setColor("checkedBorderColor","borderColor"),this._containerElement.style.backgroundColor="",this.setColor("checkedForegroundColor","foregroundColor","_textElement"))):(this._textElement&&this._textElement.winControl&&this.setColor("foregroundColor","foregroundColor",null,"_textElement"),this._symbolElement&&this._symbolElement.winControl&&this.setColor("foregroundColor","foregroundColor",null,"_symbolElement"),this._expandingSymbolElement&&this._expandingSymbolElement.winControl&&this.setColor("foregroundColor","foregroundColor",null,"_expandingSymbolElement"),this.setColor("backgroundColor"),this.pressed?(this._textElement&&this._textElement.winControl&&this.setColor("pressedForegroundColor","foregroundColor",null,"_textElement"),this._symbolElement&&this._symbolElement.winControl&&this.setColor("pressedForegroundColor","foregroundColor",null,"_symbolElement"),this._expandingSymbolElement&&this._expandingSymbolElement.winControl&&this.setColor("pressedForegroundColor","foregroundColor",null,"_expandingSymbolElement"),this.setColor("pressedBackgroundColor","backgroundColor","_containerElement")):this.hover?(this.setColor("hoverBorderColor","borderColor"),this.setColor("hoverBackgroundColor","backgroundColor","_containerElement"),this.setColor("hoverForegroundColor","foregroundColor","_textElement")):(this.setColor("borderColor","borderColor"),this._containerElement.style.backgroundColor="",this.setColor("foregroundColor","foregroundColor","_textElement")))}_updateLayout(x){"updateLayout"!=x.changeName&&"checked"!=x.changeName&&"expandedSymbol"!=x.changeName&&"collapsedSymbol"!=x.changeName||this._expandingSymbolElement&&this._expandingSymbolElement.winControl&&(this.checked?this._expandingSymbolElement.winControl.symbol=this.expandedSymbol:this._expandingSymbolElement.winControl.symbol=this.collapsedSymbol),"updateLayout"!=x.changeName&&"checked"!=x.changeName||this.element.nextElementSibling&&this.element.nextElementSibling.winControl&&"VisiWin.UI.SubmenuContainer"==this.element.nextElementSibling.winControl.controlType&&(this.element.nextElementSibling.winControl.checked=this.checked)}dispose(){return super.dispose()}}SubmenuHeader.namespace="VisiWin.UI",SubmenuHeader.controlName="SubmenuHeader",SubmenuHeader.className="vw-submenuheader",SubmenuHeader.propertyList={designerType:{propertyType:"base",type:"string",defaultValue_DM:"Control"},padding:{propertyType:"style",type:"string",element:"_containerElement",forceOverwrite:!0},transition:{propertyType:"style",type:"string"},showSymbol:{propertyType:"child",type:"boolean",child:"_symbolElement",childProperty:"show",defaultValue:!1},iconFont:{propertyType:"child",type:"string",child:"_symbolElement"},symbol:{propertyType:"child",type:"string",child:"_symbolElement"},symbolType:{propertyType:"child",type:"string",child:"_symbolElement"},symbolSize:{propertyType:"child",type:"string",child:"_symbolElement"},symbolMargin:{propertyType:"child",type:"string",child:"_symbolElement",childProperty:"margin"},showText:{propertyType:"child",type:"boolean",child:"_textElement",childProperty:"show",defaultValue:!0},textWidth:{propertyType:"child",type:"string",child:"_textElement",childProperty:"width"},textHeight:{propertyType:"child",type:"string",child:"_textElement",childProperty:"height"},textMargin:{propertyType:"child",type:"string",child:"_textElement",childProperty:"margin"},textPadding:{propertyType:"child",type:"string",child:"_textElement",childProperty:"padding"},text:{propertyType:"child",type:"string",child:"_textElement",forceOverwrite:!0,defaultValue:"Submenu"},localizableText:{propertyType:"child",type:"string",child:"_textElement",forceOverwrite:!0},textAlignment:{propertyType:"child",type:"string",child:"_textElement"},lineClamp:{propertyType:"child",type:"number",child:"_textElement"},textWrapping:{propertyType:"child",type:"string",child:"_textElement"},textTrimming:{propertyType:"child",type:"string",child:"_textElement"},textContrast:{propertyType:"child",type:"number",child:"_textElement"},fontClass:{propertyType:"child",type:"string",child:"_textElement",forceOverwrite:!0},fontSize:{propertyType:"child",type:"string",child:"_textElement",forceOverwrite:!0},fontWeight:{propertyType:"child",type:"string",child:"_textElement",forceOverwrite:!0},lineHeight:{propertyType:"child",type:"string",child:"_textElement",forceOverwrite:!0},uppercase:{propertyType:"child",type:"boolean",child:"_textElement"},showExpandingSymbol:{propertyType:"child",type:"boolean",child:"_expandingSymbolElement",childProperty:"show",defaultValue:!0},expandingSymbolIconFont:{propertyType:"child",type:"string",child:"_expandingSymbolElement",defaultValue:"material-icons"},collapsedSymbol:{propertyType:"member",type:"string",defaultValue:"expand_more"},expandedSymbol:{propertyType:"member",type:"string",defaultValue:"expand_less"},expandingSymbolType:{propertyType:"child",type:"string",child:"_expandingSymbolElement"},expandingSymbolSize:{propertyType:"child",type:"string",child:"_expandingSymbolElement",childProperty:"symbolSize"},expandingSymbolMargin:{propertyType:"child",type:"string",child:"_expandingSymbolElement",childProperty:"margin"},backgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BackgroundColor"},hoverBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@HoverBackgroundColor"},pressedBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@PressedBackgroundColor"},checkedBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BackgroundColor"},checkedHoverBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@HoverBackgroundColor"},checkedPressedBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@PressedBackgroundColor"},disabledBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledBackgroundColor"},foregroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},hoverForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},pressedForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},checkedForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},checkedHoverForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},checkedPressedForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},disabledForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledForegroundColor"},borderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"},hoverBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@HoverBorderColor"},checkedBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@CheckedBorderColor"},checkedHoverBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@CheckedHoverBorderColor"},disabledBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledBorderColor"}},A.SubmenuHeader=SubmenuHeader}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class SubmenuContainer extends x.UI.ControlBase{constructor(A,V){super(A,V),this.addPropertyList(SubmenuContainer,SubmenuContainer.propertyList),this.defaultConstructor(A,this.inlineOptions,x.UI.SubmenuContainer.controlName,x.UI.SubmenuContainer.className)}_updateColors(x){this.setColor("backgroundColor")}_updateLayout(A){"updateLayout"!=A.changeName&&"checked"!=A.changeName&&"maxHeight"!=A.changeName||(x.Utilities.isInDesignMode()&&(this.element.style.transition=""),this.checked?this.element.style.maxHeight=this.maxHeight:this.element.style.maxHeight="0px")}dispose(){return super.dispose()}}SubmenuContainer.namespace="VisiWin.UI",SubmenuContainer.controlName="SubmenuContainer",SubmenuContainer.className="vw-submenucontainer",SubmenuContainer.propertyList={designerType:{propertyType:"base",type:"string",defaultValue_DM:"Control"},transition:{propertyType:"style",type:"string"},maxHeight:{propertyType:"member",type:"string",defaultValue:"100%",forceOverwrite:!0},checked:{propertyType:"member",type:"boolean"},backgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"}},A.SubmenuContainer=SubmenuContainer}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class StateIndicator extends x.UI.VariableBase{constructor(A,V){super(A,V),this._symbolElement=null,this._textElement=null,this.itemsCollection=[],this.boundItemsChangedHandler=this._itemsChangedHandler.bind(this),this.addPropertyList(StateIndicator,StateIndicator.propertyList),this.defaultConstructor(A,this.inlineOptions,x.UI.StateIndicator.controlName,x.UI.StateIndicator.className)}createTemplate(){if(x.Utilities.isInDesignMode()){var A=document.createElement("div");return x.Utilities.reparentChildren(this.element,A),this.element.innerHTML=['<div class="vw-stateindicator__symbol" data-win-control="VisiWin.UI.Symbol"></div>','<div class="vw-stateindicator__text" data-win-control="VisiWin.UI.TextBlock"></div>'].join("\n"),this._symbolElement=this.element.firstElementChild,this._textElement=this._symbolElement.nextElementSibling,x.Utilities.reparentChildren(A,this.element),this.processElements([this._symbolElement,this._textElement])}var V=null!=this.inlineOptions.showSymbol?this.inlineOptions.showSymbol:this.getStyleProperty("showSymbol")?this.getStyleProperty("showSymbol"):x.UI.StateIndicator.propertyList.showSymbol.defaultValue,R=null!=this.inlineOptions.showText?this.inlineOptions.showText:this.getStyleProperty("showText")?this.getStyleProperty("showText"):x.UI.StateIndicator.propertyList.showText.defaultValue,D="";A=null;return V&&(D+='<div class="vw-stateindicator__symbol" data-win-control="VisiWin.UI.Symbol"></div>'),R&&(D+='<div class="vw-stateindicator__text" data-win-control="VisiWin.UI.TextBlock"></div>'),this.element.children&&this.element.children.length>0&&(A=document.createElement("div"),x.Utilities.reparentChildren(this.element,A)),this.element.innerHTML=D,V?(this._symbolElement=this.element.firstElementChild,R&&(this._textElement=this._symbolElement.nextElementSibling)):R&&(this._textElement=this.element.firstElementChild),A&&x.Utilities.reparentChildren(A,this.element),this.processElements([this._symbolElement,this._textElement])}registerChild(A,V,R,D){return V!==this.registerTargetId||(R&&R.winControl&&(R.style.display="none",this.itemsCollection.push(R.winControl),R.winControl.addEventListener("notifyPropertyChanged",this.boundItemsChangedHandler),x.Utilities.isInDesignMode()||this.element.removeChild(R)),!1)}_itemsChangedHandler(x){this._updateLayoutBase(x.detail)}attach(){let x=super.attach();return x&&"function"==typeof x.then?x.then(function(){this._updateLayoutBase({changeName:"attach"})}.bind(this)):(this._updateLayoutBase({changeName:"attach"}),null)}_updateColors(x){this.disabled?(this.setColor("disabledBackgroundColor","backgroundColor"),this.setColor("disabledBorderColor","borderColor"),this._symbolElement&&this._symbolElement.winControl&&this.setColor("disabledForegroundColor","foregroundColor",null,"_symbolElement"),this._textElement&&this._textElement.winControl&&this.setColor("disabledForegroundColor","foregroundColor",null,"_textElement")):this._updateLayoutBase(x)}_updateLayout(x){if("updateLayout"==x.changeName||"value"==x.changeName||"bitValue"==x.changeName||"disabled"==x.changeName||"backgroundColor"==x.changeName||"borderColor"==x.changeName||"foregroundColor"==x.changeName||"iconFont"==x.changeName||"symbol"==x.changeName||"symbolType"==x.changeName||"text"==x.changeName||"localizableText"==x.changeName||"attach"==x.changeName){var A=this.backgroundColor,V=this.borderColor,R=this.foregroundColor,D=this.iconFont,N=this.symbol,U=this.symbolType,B=this.text,F=this.localizableText;if(this.itemsCollection&&this.itemsCollection.length>0)if(null!=this.bitNumber){if(this.bitNumber>=0&&null!=this.bitValue)for(var W=0;W<this.itemsCollection.length;W++)null!=this.itemsCollection[W].value&&((!0!==this.bitValue||!0!==this.itemsCollection[W].value&&"true"!==this.itemsCollection[W].value)&&(!1!==this.bitValue||!1!==this.itemsCollection[W].value&&"false"!==this.itemsCollection[W].value)||(null!=this.itemsCollection[W].backgroundColor&&(A=this.itemsCollection[W].backgroundColor),null!=this.itemsCollection[W].borderColor&&(V=this.itemsCollection[W].borderColor),null!=this.itemsCollection[W].foregroundColor&&(R=this.itemsCollection[W].foregroundColor),null!=this.itemsCollection[W].iconFont&&(D=this.itemsCollection[W].iconFont),null!=this.itemsCollection[W].symbol&&(N=this.itemsCollection[W].symbol),null!=this.itemsCollection[W].symbolType&&(U=this.itemsCollection[W].symbolType),F=null,B=null,null!=this.itemsCollection[W].localizableText?F=this.itemsCollection[W].localizableText:null!=this.itemsCollection[W].text&&(B=this.itemsCollection[W].text)))}else for(W=0;W<this.itemsCollection.length;W++)null!=this.itemsCollection[W].value&&this.validateValue(this.itemsCollection[W].value)&&(null!=this.itemsCollection[W].backgroundColor&&(A=this.itemsCollection[W].backgroundColor),null!=this.itemsCollection[W].borderColor&&(V=this.itemsCollection[W].borderColor),null!=this.itemsCollection[W].foregroundColor&&(R=this.itemsCollection[W].foregroundColor),null!=this.itemsCollection[W].iconFont&&(D=this.itemsCollection[W].iconFont),null!=this.itemsCollection[W].symbol&&(N=this.itemsCollection[W].symbol),null!=this.itemsCollection[W].symbolType&&(U=this.itemsCollection[W].symbolType),F=null,B=null,null!=this.itemsCollection[W].localizableText?F=this.itemsCollection[W].localizableText:null!=this.itemsCollection[W].text&&(B=this.itemsCollection[W].text));this.disabled?(this.setColor("disabledBackgroundColor","backgroundColor"),this.setColor("disabledBorderColor","borderColor")):(this.element.style.backgroundColor=this.getThemeColor(A),this.element.style.borderColor=this.getThemeColor(V)),this._symbolElement&&this._symbolElement.winControl&&(this._symbolElement.winControl.iconFont=D,this._symbolElement.winControl.symbol=N,this._symbolElement.winControl.symbolType=U,this._symbolElement.winControl.foregroundColor=this.getThemeColor(R)),this._textElement&&this._textElement.winControl&&(F?this._textElement.winControl.localizableText=F:this._textElement.winControl.text=B,this._textElement.winControl.foregroundColor=this.getThemeColor(R))}if("updateLayout"==x.changeName||"showSymbol"==x.changeName||"showText"==x.changeName||"symbolPosition"==x.changeName)if(this.showSymbol&&this.showText)switch(this.symbolPosition){case"Top":this.element.style.flexDirection="column";break;case"Right":this.element.style.flexDirection="row-reverse";break;case"Bottom":this.element.style.flexDirection="column-reverse";break;default:this.element.style.flexDirection="row"}else if(this.showSymbol&&!this.showText)switch(this.symbolPosition){case"Top":this.element.style.justifyContent="center",this.element.style.alignItems="flex-start";break;case"Right":this.element.style.justifyContent="flex-end",this.element.style.alignItems="center";break;case"Bottom":this.element.style.justifyContent="center",this.element.style.alignItems="flex-end";break;case"Center":this.element.style.justifyContent="center",this.element.style.alignItems="center";break;default:this.element.style.justifyContent="flex-start",this.element.style.alignItems="center"}}dispose(){if(this.itemsCollection&&this.itemsCollection.length>0)for(var x=0;x<this.itemsCollection.length;x++)this.itemsCollection[x].removeEventListener("notifyPropertyChanged",this.boundItemsChangedHandler);return this.itemsCollection=[],super.dispose()}}StateIndicator.namespace="VisiWin.UI",StateIndicator.controlName="StateIndicator",StateIndicator.className="vw-stateindicator",StateIndicator.propertyList={designerType:{propertyType:"base",type:"string",defaultValue:"Control"},registerTargetId:{propertyType:"base",defaultValue:"StateIndicatorItem"},items:{propertyType:"member",type:"string"},showSymbol:{propertyType:"child",type:"boolean",child:"_symbolElement",childProperty:"show",defaultValue:!1},iconFont:{propertyType:"member",type:"string",defaultValue:"material-icons"},symbol:{propertyType:"member",type:"string"},symbolType:{propertyType:"member",type:"string",defaultValue:"Icon"},symbolSize:{propertyType:"child",type:"string",child:"_symbolElement"},symbolMargin:{propertyType:"child",type:"string",child:"_symbolElement",childProperty:"margin"},symbolPosition:{propertyType:"member",type:"string",defaultValue:"Left"},showText:{propertyType:"child",type:"boolean",child:"_textElement",childProperty:"show",defaultValue:!1},textWidth:{propertyType:"child",type:"string",child:"_textElement",childProperty:"width"},textHeight:{propertyType:"child",type:"string",child:"_textElement",childProperty:"height"},textMargin:{propertyType:"child",type:"string",child:"_textElement",childProperty:"margin"},textPadding:{propertyType:"child",type:"string",child:"_textElement",childProperty:"padding"},text:{propertyType:"member",type:"string",forceOverwrite:!0,defaultValue:"StateIndicator"},localizableText:{propertyType:"member",type:"string",forceOverwrite:!0},textAlignment:{propertyType:"child",type:"string",child:"_textElement"},lineClamp:{propertyType:"child",type:"number",child:"_textElement"},textWrapping:{propertyType:"child",type:"string",child:"_textElement"},textTrimming:{propertyType:"child",type:"string",child:"_textElement"},fontClass:{propertyType:"child",type:"string",child:"_textElement",forceOverwrite:!0},fontSize:{propertyType:"child",type:"string",child:"_textElement",forceOverwrite:!0},fontWeight:{propertyType:"child",type:"string",child:"_textElement",forceOverwrite:!0},lineHeight:{propertyType:"child",type:"string",child:"_textElement",forceOverwrite:!0},textContrast:{propertyType:"child",type:"number",child:"_textElement"},uppercase:{propertyType:"child",type:"boolean",child:"_textElement"},backgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ChromeMediumHigh"},borderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},foregroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},disabledBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledBackgroundColor"},disabledBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledBorderColor"},disabledForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledForegroundColor"}},A.StateIndicator=StateIndicator}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class StateIndicatorItem extends x.UI.ProviderBase{constructor(A,V){super(A,V),this.addPropertyList(StateIndicatorItem,StateIndicatorItem.propertyList),this.defaultConstructor(A,this.inlineOptions,x.UI.StateIndicatorItem.controlName,null)}dispose(){return super.dispose()}}StateIndicatorItem.namespace="VisiWin.UI",StateIndicatorItem.controlName="StateIndicatorItem",StateIndicatorItem.propertyList={designerType:{propertyType:"base",type:"string",defaultValue_DM:"Control"},registerSourceId:{propertyType:"base",type:"string",defaultValue:"StateIndicatorItem"},value:{propertyType:"member",type:"string"},iconFont:{propertyType:"member",type:"string",defaultValue:"material-icons"},symbol:{propertyType:"member",type:"string"},symbolType:{propertyType:"member",type:"string",defaultValue:"Icon"},text:{propertyType:"member",type:"string"},localizableText:{propertyType:"member",type:"string"},backgroundColor:{propertyType:"member",type:"string"},borderColor:{propertyType:"member",type:"string"},foregroundColor:{propertyType:"member",type:"string"}},A.StateIndicatorItem=StateIndicatorItem}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class Dialog extends x.UI.ControlBase{constructor(A,V){super(A,V),this.showAction1Button=null,this.showAction2Button=null,this._popupElement=null,this._popupControl=null,this._regionControl=null,this._boundResultHandler=this._resultHandler.bind(this),this._boundBeforeShowChangedHandler=this._beforeShowChangedHandler.bind(this),this._boundBeforeHideChangedHandler=this._beforeHideChangedHandler.bind(this),this._boundAfterShowChangedHandler=this._afterShowChangedHandler.bind(this),this._boundAfterHideChangedHandler=this._afterHideChangedHandler.bind(this),this._boundKeyDownHandler=this._keyDownHandler.bind(this),this.viewModel={},this.bindingData={style:this.style,titleText:this.titleText,localizableTitleText:this.localizableTitleText,titleVisibility:this.titleVisibility,contentText:this.contentText,localizableContentText:this.localizableContentText,action1ButtonText:this.action1ButtonText,localizableAction1ButtonText:this.localizableAction1ButtonText,action2ButtonText:this.action2ButtonText,localizableAction2ButtonText:this.localizableAction2ButtonText,action2ButtonVisibility:this.action2ButtonVisibility,showAction1Button:this.showAction1Button,showAction2Button:this.showAction2Button},this._dialogScrimColor=null,this.addPropertyList(Dialog,Dialog.propertyList),this.defaultConstructor(A,this.inlineOptions,x.UI.Dialog.controlName,x.UI.Dialog.className)}createTemplate(){return document.body?this.element.style.display="none":x.Application.ErrorLog.log("VisiWin.UI.Dialog.createTemplate: Dialog kann nicht erzeugt werden, kein body Element."),null}get dialogScrimColor(){return this._dialogScrimColor}set dialogScrimColor(A){if(this._dialogScrimColor=A,this._popupControl)this._popupControl.dialogScrimColor=A;else if(x.isNullOrEmpty(A))document.documentElement.style.setProperty("--popup-scrim-background-color","rgba(0,0,0,0.5)");else{const x=this.getThemeColor(A),V=x.length;document.documentElement.style.setProperty("--popup-scrim-background-color",[x.slice(0,V-1),",0.5",x.slice(V-1)].join(""))}}_createDialog(){this._popupElement=document.createElement("div"),document.body.insertBefore(this._popupElement,document.body.firstElementChild),this._popupControl=new WinJS.UI.Popup(this._popupElement,{viewName:this.dialogName,modal:"Modal"==this.mode}),this._popupControl&&(this._popupControl.contentControlElement=this.element,this._popupControl.addEventListener("result",this._boundResultHandler),this._popupControl.addEventListener("beforeshow",this._boundBeforeShowChangedHandler),this._popupControl.addEventListener("beforehide",this._boundBeforeHideChangedHandler),this._popupControl.addEventListener("aftershow",this._boundAfterShowChangedHandler),this._popupControl.addEventListener("afterhide",this._boundAfterHideChangedHandler)),this._popupElement&&this._popupElement.addEventListener(x.UI.KeyboardEventType.keydown,this._boundKeyDownHandler)}_resultHandler(x){"RESULT_NAVIGATED"==x.detail.result&&this._popupElement,"RESULT_OVERLAYCLICK"==x.detail.result&&this.hide(x)}_beforeShowChangedHandler(x){this.dispatchEvent("beforeShow",x)}_beforeHideChangedHandler(x){this.dispatchEvent("beforeHide",x)}_afterShowChangedHandler(x){this.dispatchEvent("afterShow",x)}_afterHideChangedHandler(x){this.dispatchEvent("afterHide",x),this._popupControl&&setTimeout(()=>{this._popupControl&&this.hide("cleanup")},100)}_keyDownHandler(x){const{key:A}=x;"Escape"===A&&this.hide("esc")}show(){this._createDialog(),this._popupControl&&(this.viewModel.style=this.style,this.viewModel.titleText=this.titleText,this.viewModel.localizableTitleText=this.localizableTitleText,this.viewModel.titleVisibility=this.titleText||this.localizableTitleText?"Visible":"Collapse",this.viewModel.contentText=this.contentText,this.viewModel.localizableContentText=this.localizableContentText,this.viewModel.action1ButtonText=this.action1ButtonText,this.viewModel.localizableAction1ButtonText=this.localizableAction1ButtonText,this.viewModel.action2ButtonText=this.action2ButtonText,this.viewModel.localizableAction2ButtonText=this.localizableAction2ButtonText,this.viewModel.action2ButtonVisibility=this.action2ButtonText||this.localizableAction2ButtonText?"Visible":"Collapse",this.viewModel.showAction1Button=this.showAction1Button,this.viewModel.showAction2Button=this.showAction2Button,this._dialogScrimColor&&(this._popupControl.dialogScrimColor=this._dialogScrimColor),this._popupControl.show(this.dialogName,this.anchor,this.placement,this.alignment),this._popupElement.focus())}hide(A){if(!x.isNullOrUndefined(this._popupControl)){var V=this._popupControl.element,R=V.parentElement;this._popupControl.hide(),this._popupControl.removeEventListener("result",this._boundResultHandler),this._popupControl.removeEventListener("beforeshow",this._boundBeforeShowChangedHandler),this._popupControl.removeEventListener("beforehide",this._boundBeforeHideChangedHandler),this._popupControl.removeEventListener("aftershow",this._boundAfterShowChangedHandler),this._popupControl.removeEventListener("afterhide",this._boundAfterHideChangedHandler),this._regionControl=this._popupElement.winControl._dom.region.winControl,this._regionControl.pageControl.detach(this._regionControl.pageControl.element),this._regionControl.detachSubTree&&this._regionControl.detachSubTree(this._regionControl.element,!1),this._regionControl.pageControl.unload(this._regionControl.pageControl.element,null),this._regionControl.pageControl.dispose(this._regionControl.pageControl.element),this._popupControl.dispose(),delete this._popupControl,R.removeChild(V)}this.element.focus(),this.dispatchEvent("result",A)}showAt(x,A){}result(x){this.dispatchEvent("result",x)}dispose(){return this._popupElement&&this._popupElement.removeEventListener(x.UI.KeyboardEventType.keydown,this._boundKeyDownHandler),super.dispose()}}Dialog.namespace="VisiWin.UI",Dialog.controlName="Dialog",Dialog.className="vw-dialog",Dialog.propertyList={designerType:{propertyType:"base",type:"string",defaultValue:"Control"},registerTargetId:{propertyType:"base",type:"string",defaultValue:"DialogEvents"},result:{propertyType:"event"},beforeShow:{propertyType:"event"},beforeHide:{propertyType:"event"},afterShow:{propertyType:"event"},afterHide:{propertyType:"event"},anchor:{propertyType:"member",type:"any"},placement:{propertyType:"member",type:"string"},alignment:{propertyType:"member",type:"string"},mode:{propertyType:"member",type:"string",defaultValue:"NonModal"},dialogName:{propertyType:"member",type:"string"},showAtX:{propertyType:"member",type:"string"},showAtY:{propertyType:"member",type:"string"},style:{propertyType:"member",type:"string"},titleText:{propertyType:"member",type:"string"},localizableTitleText:{propertyType:"member",type:"string"},titleVisibility:{propertyType:"member",type:"string"},contentText:{propertyType:"member",type:"string"},localizableContentText:{propertyType:"member",type:"string"},action1ButtonText:{propertyType:"member",type:"string"},localizableAction1ButtonText:{propertyType:"member",type:"string"},action2ButtonText:{propertyType:"member",type:"string"},localizableAction2ButtonText:{propertyType:"member",type:"string"},action2ButtonVisibility:{propertyType:"member",type:"string"},showAction1Button:{propertyType:"member",type:"boolean"},showAction2Button:{propertyType:"member",type:"boolean"},dialogScrimColor:{propertyType:"custom",type:"string",defaultValue:"transparent"}},A.Dialog=Dialog}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class AlertDialog extends x.UI.ControlBase{constructor(A,V){super(A,V),this._headerElement=null,this._titleElement=null,this._contentElement=null,this._contentTextElement=null,this._actionBarElement=null,this._action1ButtonElement=null,this._action2ButtonElement=null,this.addPropertyList(AlertDialog,AlertDialog.propertyList),this.defaultConstructor(A,this.inlineOptions,x.UI.AlertDialog.controlName,x.UI.AlertDialog.className)}createTemplate(){return this.element.innerHTML=['<div class="vw-alertdialog__header">','<div class="vw-alertdialog__title" data-win-control="VisiWin.UI.TextBlock"></div>',"</div>",'<div class="vw-alertdialog__content">','<div class="vw-alertdialog__contenttext" data-win-control="VisiWin.UI.TextBlock"></div>',"</div>",'<div class="vw-alertdialog__actionbar">','<div class="vw-alertdialog__action1button" data-win-control="VisiWin.UI.Button" data-win-options="{style:\'Plain.Flat\'}" data-win-actions=\'{"triggers":[{"type":"VisiWin.Triggers.ControlEventTrigger","eventName":"onButtonClick","triggeredActions":[{"type":"VisiWin.Actions.DialogResultAction", "dialogResult":"Action1Button"}]}]}\'></div>','<div class="vw-alertdialog__action2button" data-win-control="VisiWin.UI.Button" data-win-options="{style:\'Plain.Flat\'}" data-win-actions=\'{"triggers":[{"type":"VisiWin.Triggers.ControlEventTrigger","eventName":"onButtonClick","triggeredActions":[{"type":"VisiWin.Actions.DialogResultAction", "dialogResult":"Action2Button"}]}]}\'></div>',"</div>"].join("\n"),this._headerElement=this.element.firstElementChild,this._titleElement=this._headerElement.firstElementChild,this._contentElement=this._headerElement.nextElementSibling,this._contentTextElement=this._contentElement.firstElementChild,this._actionBarElement=this._contentElement.nextElementSibling,this._action1ButtonElement=this._actionBarElement.firstElementChild,this._action2ButtonElement=this._action1ButtonElement.nextElementSibling,this.processElements([this._titleElement,this._contentTextElement,this._action1ButtonElement,this._action2ButtonElement])}_updateColors(x){this.setColor("backgroundColor"),this.setColor("headerBackgroundColor","backgroundColor","_headerElement",null),this.setColor("contentBackgroundColor","backgroundColor","_contentElement",null),this.setColor("actionBarBackgroundColor","backgroundColor","_actionBarElement",null),this._titleElement&&this._titleElement.winControl&&this.setColor("titleForegroundColor","foregroundColor",null,"_titleElement"),this._contentTextElement&&this._contentTextElement.winControl&&this.setColor("contentTextForegroundColor","foregroundColor",null,"_contentTextElement"),this._action1ButtonElement&&this._action1ButtonElement.winControl&&(this.setColor("action1ButtonForegroundColor","foregroundColor",null,"_action1ButtonElement"),this.setColor("action1ButtonForegroundColor","pressedForegroundColor",null,"_action1ButtonElement")),this._action2ButtonElement&&this._action2ButtonElement.winControl&&(this.setColor("action2ButtonForegroundColor","foregroundColor",null,"_action2ButtonElement"),this.setColor("action2ButtonForegroundColor","pressedForegroundColor",null,"_action2ButtonElement")),this.setColor("borderColor")}_updateLayout(x){"updateLayout"!=x.changeName&&"showAction1Button"!=x.changeName||this._action1ButtonElement&&this._action1ButtonElement.winControl&&(this._action1ButtonElement.style.display=this.showAction1Button?"block":"none"),"updateLayout"!=x.changeName&&"showAction2Button"!=x.changeName||this._action2ButtonElement&&this._action2ButtonElement.winControl&&(this._action2ButtonElement.style.display=this.showAction2Button?"block":"none")}dispose(){return super.dispose()}}AlertDialog.namespace="VisiWin.UI",AlertDialog.controlName="AlertDialog",AlertDialog.className="vw-alertdialog",AlertDialog.propertyList={designerType:{propertyType:"base",type:"string",defaultValue:"Control"},shadow:{propertyType:"base",type:"string",defaultValue:"@Elevation_z12"},headerBorderWidth:{propertyType:"style",type:"string",element:"_headerElement",style:"borderWidth"},headerBorderStyle:{propertyType:"style",type:"enum",element:"_headerElement",style:"borderStyle"},headerBorderRadius:{propertyType:"style",type:"string",element:"_headerElement",style:"borderRadius"},headerWidth:{propertyType:"style",type:"string",element:"_headerElement",style:"width"},headerMinWidth:{propertyType:"style",type:"string",element:"_headerElement",style:"minWidth"},headerMaxWidth:{propertyType:"style",type:"string",element:"_headerElement",style:"maxWidth"},headerHeight:{propertyType:"style",type:"string",element:"_headerElement",style:"height"},headerMinHeight:{propertyType:"style",type:"string",element:"_headerElement",style:"minHeight"},headerMaxHeight:{propertyType:"style",type:"string",element:"_headerElement",style:"maxHeight"},headerMargin:{propertyType:"style",type:"string",element:"_headerElement",style:"margin"},headerPadding:{propertyType:"style",type:"string",element:"_headerElement",style:"padding"},showTitle:{propertyType:"child",type:"boolean",child:"_titleElement",childProperty:"show",defaultValue:!0},titleWidth:{propertyType:"child",type:"string",child:"_titleElement",childProperty:"width"},titleHeight:{propertyType:"child",type:"string",child:"_titleElement",childProperty:"height"},titleMargin:{propertyType:"child",type:"string",child:"_titleElement",childProperty:"margin"},titlePadding:{propertyType:"child",type:"string",child:"_titleElement",childProperty:"padding"},titleText:{propertyType:"child",type:"string",child:"_titleElement",childProperty:"text",defaultValue:"Title"},localizableTitleText:{propertyType:"child",type:"string",child:"_titleElement",childProperty:"localizableText"},titleTextAlignment:{propertyType:"child",type:"string",child:"_titleElement",childProperty:"textAlignment"},titleLineClamp:{propertyType:"child",type:"number",child:"_titleElement",childProperty:"lineClamp"},titleTextWrapping:{propertyType:"child",type:"string",child:"_titleElement",childProperty:"textWrapping",defaultValue:"Wrap"},titleTextTrimming:{propertyType:"child",type:"string",child:"_titleElement",childProperty:"textTrimming"},titleFontClass:{propertyType:"child",type:"string",child:"_titleElement",childProperty:"fontClass",defaultValue:"Title"},titleFontSize:{propertyType:"child",type:"string",child:"_titleElement",childProperty:"fontSize"},titleFontWeight:{propertyType:"child",type:"string",child:"_titleElement",childProperty:"fontWeight"},titleLineHeight:{propertyType:"child",type:"string",child:"_titleElement",childProperty:"lineHeight"},titleTextContrast:{propertyType:"child",type:"number",child:"_titleElement",childProperty:"textContrast"},titleUppercase:{propertyType:"child",type:"boolean",child:"_titleElement",childProperty:"uppercase"},contentBorderWidth:{propertyType:"style",type:"string",element:"_contentElement",style:"borderWidth"},contentBorderStyle:{propertyType:"style",type:"enum",element:"_contentElement",style:"borderStyle"},contentBorderRadius:{propertyType:"style",type:"string",element:"_contentElement",style:"borderRadius"},contentWidth:{propertyType:"style",type:"string",element:"_contentElement",style:"width"},contentMinWidth:{propertyType:"style",type:"string",element:"_contentElement",style:"minWidth"},contentMaxWidth:{propertyType:"style",type:"string",element:"_contentElement",style:"maxWidth"},contentHeight:{propertyType:"style",type:"string",element:"_contentElement",style:"height"},contentMinHeight:{propertyType:"style",type:"string",element:"_contentElement",style:"minHeight"},contentMaxHeight:{propertyType:"style",type:"string",element:"_contentElement",style:"maxHeight"},contentMargin:{propertyType:"style",type:"string",element:"_contentElement",style:"margin"},contentPadding:{propertyType:"style",type:"string",element:"_contentElement",style:"padding"},showContentText:{propertyType:"child",type:"boolean",child:"_contentTextElement",childProperty:"show",defaultValue:!0},contentTextWidth:{propertyType:"child",type:"string",child:"_contentTextElement",childProperty:"width"},contentTextHeight:{propertyType:"child",type:"string",child:"_contentTextElement",childProperty:"height"},contentTextMargin:{propertyType:"child",type:"string",child:"_contentTextElement",childProperty:"margin"},contentTextPadding:{propertyType:"child",type:"string",child:"_contentTextElement",childProperty:"padding"},contentText:{propertyType:"child",type:"string",child:"_contentTextElement",childProperty:"text",defaultValue:"Content Text"},localizableContentText:{propertyType:"child",type:"string",child:"_contentTextElement",childProperty:"localizableText"},contentTextAlignment:{propertyType:"child",type:"string",child:"_contentTextElement",childProperty:"textAlignment"},contentTextLineClamp:{propertyType:"child",type:"number",child:"_contentTextElement",childProperty:"lineClamp"},contentTextWrapping:{propertyType:"child",type:"string",child:"_contentTextElement",childProperty:"textWrapping",defaultValue:"Wrap"},contentTextTrimming:{propertyType:"child",type:"string",child:"_contentTextElement",childProperty:"textTrimming",defaultValue:"Overflow"},contentTextFontClass:{propertyType:"child",type:"string",child:"_contentTextElement",childProperty:"fontClass"},contentTextFontSize:{propertyType:"child",type:"string",child:"_contentTextElement",childProperty:"fontSize"},contentTextFontWeight:{propertyType:"child",type:"string",child:"_contentTextElement",childProperty:"fontWeight"},contentTextLineHeight:{propertyType:"child",type:"string",child:"_contentTextElement",childProperty:"lineHeight"},contentTextContrast:{propertyType:"child",type:"number",child:"_contentTextElement",childProperty:"textContrast"},contentTextUppercase:{propertyType:"child",type:"boolean",child:"_contentTextElement",childProperty:"uppercase"},actionBarBorderWidth:{propertyType:"style",type:"string",element:"_actionBarElement",style:"borderWidth"},actionBarBorderStyle:{propertyType:"style",type:"enum",element:"_actionBarElement",style:"borderStyle"},actionBarBorderRadius:{propertyType:"style",type:"string",element:"_actionBarElement",style:"borderRadius"},actionBarWidth:{propertyType:"style",type:"string",element:"_actionBarElement",style:"width"},actionBarMinWidth:{propertyType:"style",type:"string",element:"_actionBarElement",style:"minWidth"},actionBarMaxWidth:{propertyType:"style",type:"string",element:"_actionBarElement",style:"maxWidth"},actionBarHeight:{propertyType:"style",type:"string",element:"_actionBarElement",style:"height"},actionBarMinHeight:{propertyType:"style",type:"string",element:"_actionBarElement",style:"minHeight"},actionBarMaxHeight:{propertyType:"style",type:"string",element:"_actionBarElement",style:"maxHeight"},actionBarMargin:{propertyType:"style",type:"string",element:"_actionBarElement",style:"margin"},actionBarPadding:{propertyType:"style",type:"string",element:"_actionBarElement",style:"padding"},showAction1Button:{propertyType:"member",type:"boolean",defaultValue:!0},action1ButtonWidth:{propertyType:"child",type:"string",child:"_action1ButtonElement",childProperty:"width",defaultValue:"auto"},action1ButtonHeight:{propertyType:"child",type:"string",child:"_action1ButtonElement",childProperty:"height"},action1ButtonMargin:{propertyType:"child",type:"string",child:"_action1ButtonElement",childProperty:"margin"},action1ButtonPadding:{propertyType:"child",type:"string",child:"_action1ButtonElement",childProperty:"padding"},action1ButtonTextWidth:{propertyType:"child",type:"string",child:"_action1ButtonElement",childProperty:"textWidth"},action1ButtonTextHeight:{propertyType:"child",type:"string",child:"_action1ButtonElement",childProperty:"textHeight"},action1ButtonText:{propertyType:"child",type:"string",child:"_action1ButtonElement",childProperty:"text",defaultValue:"Action1"},localizableAction1ButtonText:{propertyType:"child",type:"string",child:"_action1ButtonElement",childProperty:"localizableText"},action1ButtonTextAlignment:{propertyType:"child",type:"string",child:"_action1ButtonElement",childProperty:"textAlignment"},action1ButtonLineClamp:{propertyType:"child",type:"number",child:"_action1ButtonElement",childProperty:"lineClamp"},action1ButtonTextWrapping:{propertyType:"child",type:"string",child:"_action1ButtonElement",childProperty:"textWrapping"},action1ButtonTextTrimming:{propertyType:"child",type:"string",child:"_action1ButtonElement",childProperty:"textTrimming"},action1ButtonFontClass:{propertyType:"child",type:"string",child:"_action1ButtonElement",childProperty:"fontClass"},action1ButtonFontSize:{propertyType:"child",type:"string",child:"_action1ButtonElement",childProperty:"fontSize"},action1ButtonFontWeight:{propertyType:"child",type:"string",child:"_action1ButtonElement",childProperty:"fontWeight"},action1ButtonLineHeight:{propertyType:"child",type:"string",child:"_action1ButtonElement",childProperty:"lineHeight"},action1ButtonTextContrast:{propertyType:"child",type:"number",child:"_action1ButtonElement",childProperty:"textContrast"},action1ButtonUppercase:{propertyType:"child",type:"boolean",child:"_action1ButtonElement",childProperty:"uppercase"},showAction2Button:{propertyType:"member",type:"boolean",defaultValue:!0},action2ButtonWidth:{propertyType:"child",type:"string",child:"_action2ButtonElement",childProperty:"width",defaultValue:"auto"},action2ButtonHeight:{propertyType:"child",type:"string",child:"_action2ButtonElement",childProperty:"height"},action2ButtonMargin:{propertyType:"child",type:"string",child:"_action2ButtonElement",childProperty:"margin"},action2ButtonPadding:{propertyType:"child",type:"string",child:"_action2ButtonElement",childProperty:"padding"},action2ButtonTextWidth:{propertyType:"child",type:"string",child:"_action2ButtonElement",childProperty:"textWidth"},action2ButtonTextHeight:{propertyType:"child",type:"string",child:"_action2ButtonElement",childProperty:"textHeight"},action2ButtonText:{propertyType:"child",type:"string",child:"_action2ButtonElement",childProperty:"text",defaultValue:"Action2"},localizableAction2ButtonText:{propertyType:"child",type:"string",child:"_action2ButtonElement",childProperty:"localizableText"},action2ButtonTextAlignment:{propertyType:"child",type:"string",child:"_action2ButtonElement",childProperty:"textAlignment"},action2ButtonLineClamp:{propertyType:"child",type:"number",child:"_action2ButtonElement",childProperty:"lineClamp"},action2ButtonTextWrapping:{propertyType:"child",type:"string",child:"_action2ButtonElement",childProperty:"textWrapping"},action2ButtonTextTrimming:{propertyType:"child",type:"string",child:"_action2ButtonElement",childProperty:"textTrimming"},action2ButtonFontClass:{propertyType:"child",type:"string",child:"_action2ButtonElement",childProperty:"fontClass"},action2ButtonFontSize:{propertyType:"child",type:"string",child:"_action2ButtonElement",childProperty:"fontSize"},action2ButtonFontWeight:{propertyType:"child",type:"string",child:"_action2ButtonElement",childProperty:"fontWeight"},action2ButtonLineHeight:{propertyType:"child",type:"string",child:"_action2ButtonElement",childProperty:"lineHeight"},action2ButtonTextContrast:{propertyType:"child",type:"number",child:"_action2ButtonElement",childProperty:"textContrast"},action2ButtonUppercase:{propertyType:"child",type:"boolean",child:"_action2ButtonElement",childProperty:"uppercase"},backgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BackgroundColor"},headerBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},contentBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},actionBarBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},titleForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},contentTextForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},action1ButtonForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@PrimaryColor"},action2ButtonForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@PrimaryColor"},borderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"}},A.AlertDialog=AlertDialog}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class ContentDialog extends x.UI.ControlBase{constructor(A,V){super(A,V),this.addPropertyList(ContentDialog,ContentDialog.propertyList),this.defaultConstructor(A,this.inlineOptions,x.UI.ContentDialog.controlName,x.UI.ContentDialog.className)}dispose(){return super.dispose()}}ContentDialog.namespace="VisiWin.UI",ContentDialog.controlName="ContentDialog",ContentDialog.className="vw-contentdialog",ContentDialog.propertyList={designerType:{propertyType:"base",type:"string",defaultValue:"ContentControl"},shadow:{propertyType:"base",type:"string",defaultValue:"@Elevation_z12"},backgroundColor:{propertyType:"memberStyle",type:"string",resourceValue:["getTheme"],defaultValue:"@BackgroundColor"},borderColor:{propertyType:"memberStyle",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"}},A.ContentDialog=ContentDialog}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class ContentDialogHeader extends x.UI.ControlBase{constructor(A,V){super(A,V),this.addPropertyList(ContentDialogHeader,ContentDialogHeader.propertyList),this.defaultConstructor(A,this.inlineOptions,x.UI.ContentDialogHeader.controlName,x.UI.ContentDialogHeader.className)}_updateLayout(x){if("updateLayout"==x.changeName||"alignItems"==x.changeName)switch(this.alignItems){case"Center":this.element.style.alignItems="center";break;case"Start":this.element.style.alignItems="flex-start";break;case"End":this.element.style.alignItems="flex-end";break;case"Baseline":this.element.style.alignItems="baseline";break;default:this.element.style.alignItems="stretch"}if("updateLayout"==x.changeName||"justifyContent"==x.changeName)switch(this.justifyContent){case"End":this.element.style.justifyContent="flex-end";break;case"Center":this.element.style.justifyContent="center";break;case"Space-between":this.element.style.justifyContent="space-between";break;case"Space-around":this.element.style.justifyContent="space-around";break;case"Space-evenly":this.element.style.justifyContent="space-evenly";break;default:this.element.style.justifyContent="flex-start"}}dispose(){return super.dispose()}}ContentDialogHeader.namespace="VisiWin.UI",ContentDialogHeader.controlName="ContentDialogHeader",ContentDialogHeader.className="vw-contentdialogheader",ContentDialogHeader.propertyList={designerType:{propertyType:"base",type:"string",defaultValue:"ContentControl"},alignItems:{propertyType:"member",type:"string",defaultValue:"Center"},justifyContent:{propertyType:"member",type:"string",defaultValue:"Start"},backgroundColor:{propertyType:"memberStyle",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},borderColor:{propertyType:"memberStyle",type:"string",resourceValue:["getTheme"],defaultValue:"@DividerColor"}},A.ContentDialogHeader=ContentDialogHeader}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class ContentDialogContent extends x.UI.ControlBase{constructor(A,V){super(A,V),this.addPropertyList(ContentDialogContent,ContentDialogContent.propertyList),this.defaultConstructor(A,this.inlineOptions,x.UI.ContentDialogContent.controlName,x.UI.ContentDialogContent.className)}_updateLayout(x){if("updateLayout"==x.changeName||"orientation"==x.changeName)switch(this.orientation){case"Vertical":this.element.style.flexDirection="column";break;case"VerticalReverse":this.element.style.flexDirection="column-reverse";break;case"HorizontalReverse":this.element.style.flexDirection="row-reverse";break;default:this.element.style.flexDirection="row"}if("updateLayout"==x.changeName||"alignItems"==x.changeName)switch(this.alignItems){case"Center":this.element.style.alignItems="center";break;case"Start":this.element.style.alignItems="flex-start";break;case"End":this.element.style.alignItems="flex-end";break;case"Baseline":this.element.style.alignItems="baseline";break;default:this.element.style.alignItems="stretch"}if("updateLayout"==x.changeName||"justifyContent"==x.changeName)switch(this.justifyContent){case"End":this.element.style.justifyContent="flex-end";break;case"Center":this.element.style.justifyContent="center";break;case"Space-between":this.element.style.justifyContent="space-between";break;case"Space-around":this.element.style.justifyContent="space-around";break;case"Space-evenly":this.element.style.justifyContent="space-evenly";break;default:this.element.style.justifyContent="flex-start"}if("updateLayout"==x.changeName||"alignContent"==x.changeName)switch(this.alignContent){case"Center":this.element.style.alignContent="center";break;case"Start":this.element.style.alignContent="flex-start";break;case"End":this.element.style.alignContent="flex-end";break;case"Space-between":this.element.style.alignContent="space-between";break;case"Space-around":this.element.style.alignContent="space-around";break;default:this.element.style.alignContent="stretch"}"updateLayout"!=x.changeName&&"wrap"!=x.changeName||(this.element.style.flexWrap=this.wrap?"wrap":"nowrap")}dispose(){return super.dispose()}}ContentDialogContent.namespace="VisiWin.UI",ContentDialogContent.controlName="ContentDialogContent",ContentDialogContent.className="vw-contentdialogcontent",ContentDialogContent.propertyList={designerType:{propertyType:"base",type:"string",defaultValue:"ContentControl"},overflow:{propertyType:"style",type:"string"},orientation:{propertyType:"member",type:"string",defaultValue:"Vertical"},alignItems:{propertyType:"member",type:"string",defaultValue:"Start"},justifyContent:{propertyType:"member",type:"string",defaultValue:"Start"},alignContent:{propertyType:"member",type:"string",defaultValue:"Start"},wrap:{propertyType:"member",type:"boolean",defaultValue:!1},backgroundColor:{propertyType:"memberStyle",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},borderColor:{propertyType:"memberStyle",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"}},A.ContentDialogContent=ContentDialogContent}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class ContentDialogActionBar extends x.UI.ControlBase{constructor(A,V){super(A,V),this.addPropertyList(ContentDialogActionBar,ContentDialogActionBar.propertyList),this.defaultConstructor(A,this.inlineOptions,x.UI.ContentDialogActionBar.controlName,x.UI.ContentDialogActionBar.className)}_updateLayout(x){if("updateLayout"==x.changeName||"alignItems"==x.changeName)switch(this.alignItems){case"Center":this.element.style.alignItems="center";break;case"Start":this.element.style.alignItems="flex-start";break;case"End":this.element.style.alignItems="flex-end";break;case"Baseline":this.element.style.alignItems="baseline";break;default:this.element.style.alignItems="stretch"}if("updateLayout"==x.changeName||"justifyContent"==x.changeName)switch(this.justifyContent){case"End":this.element.style.justifyContent="flex-end";break;case"Center":this.element.style.justifyContent="center";break;case"Space-between":this.element.style.justifyContent="space-between";break;case"Space-around":this.element.style.justifyContent="space-around";break;case"Space-evenly":this.element.style.justifyContent="space-evenly";break;default:this.element.style.justifyContent="flex-start"}}dispose(){return super.dispose()}}ContentDialogActionBar.namespace="VisiWin.UI",ContentDialogActionBar.controlName="ContentDialogActionBar",ContentDialogActionBar.className="vw-contentdialogactionbar",ContentDialogActionBar.propertyList={designerType:{propertyType:"base",type:"string",defaultValue:"ContentControl"},alignItems:{propertyType:"member",type:"string",defaultValue:"Center"},justifyContent:{propertyType:"member",type:"string",defaultValue:"End"},backgroundColor:{propertyType:"memberStyle",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},borderColor:{propertyType:"memberStyle",type:"string",resourceValue:["getTheme"],defaultValue:"@DividerColor"}},A.ContentDialogActionBar=ContentDialogActionBar}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class Unknown extends x.UI.ControlBase{constructor(A,V){super(A,V),this.addPropertyList(Unknown,Unknown.propertyList),this.defaultConstructor(A,this.inlineOptions,x.UI.Unknown.controlName,x.UI.Unknown.className)}dispose(){return super.dispose()}}Unknown.namespace="VisiWin.UI",Unknown.controlName="Unknown",Unknown.className="vw-unknown",Unknown.propertyList={designerType:{propertyType:"base",type:"string",defaultValue:"Control"},error:{propertyType:"member",type:"string"}},A.Unknown=Unknown}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class TemplateContainer extends x.UI.ControlBase{constructor(A,V){super(A,V),this.inlineOptions.debug,this.addPropertyList(TemplateContainer,TemplateContainer.TemplateContainerOptionsList),this.defaultConstructor(A,this.inlineOptions,x.UI.TemplateContainer.controlName,x.UI.TemplateContainer.classAbsoluteLayout)}createTemplate(){return this.element.style.display="none",null}dispose(){return super.dispose()}}TemplateContainer.namespace="VisiWin.UI",TemplateContainer.controlName="TemplateContainer",TemplateContainer.classAbsoluteLayout="vw-templateContainer",TemplateContainer.TemplateContainerOptionsList={designerType:{propertyType:"base",defaultValue_DM:"TemplateContainer"}},A.TemplateContainer=TemplateContainer}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class StackedDonutGauge extends x.UI.ControlBase{constructor(x,A){super(x,A),this.properties={designerType:{propertyType:"base",type:"string",defaultValue:"Control"},registerTargetId:{propertyType:"base",defaultValue:"StackedDonutGaugeSegment"},showText:{propertyType:"member",type:"boolean",defaultValue:!0},textWidth:{propertyType:"member",type:"string"},textHeight:{propertyType:"member",type:"string"},textMargin:{propertyType:"member",type:"string"},textPadding:{propertyType:"member",type:"string"},useVariableText:{propertyType:"member",type:"boolean",defaultValue:!0},text:{propertyType:"member",type:"string"},localizableText:{propertyType:"member",type:"string"},positionInDonut:{propertyType:"member",type:"boolean",defaultValue:!0},textAlignment:{propertyType:"member",type:"string"},lineClamp:{propertyType:"member",type:"number"},textWrapping:{propertyType:"member",type:"string"},textTrimming:{propertyType:"member",type:"string"},fontClass:{propertyType:"member",type:"string"},fontSize:{propertyType:"member",type:"string"},textContrast:{propertyType:"member",type:"number"},textColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@PrimaryColor"},uppercase:{propertyType:"member",type:"boolean",defaultValue:!0},backgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BackgroundColor"},foregroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},borderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BackgroundColor"},disabledBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BackgroundColor"},disabledForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BackgroundColor"},disabledBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BackgroundColor"},gaugeWidth:{propertyType:"child",type:"string",child:"_stackeddonutgaugecore",childOption:"width"},gaugeHeight:{propertyType:"child",type:"string",child:"_stackeddonutgaugecore",childOption:"height"},innerRadius:{propertyType:"child",type:"string",child:"_stackeddonutgaugecore",childOption:"innerRadius",defaultValue:"50px"},radialBarWidth:{propertyType:"child",type:"string",child:"_stackeddonutgaugecore",childOption:"radialBarWidth",defaultValue:"16px"},radialBarSpacing:{propertyType:"child",type:"string",child:"_stackeddonutgaugecore",childOption:"radialBarSpacing",defaultValue:"3px"},radialBarBackground:{propertyType:"child",type:"string",resourceValue:["getTheme"],defaultValue:"@BackgroundColor",child:"_stackeddonutgaugecore",childOption:"radialBarBackground"},radialBarFillColor:{propertyType:"child",type:"string",resourceValue:["getTheme"],defaultValue:"@BackgroundColor",child:"_stackeddonutgaugecore",childOption:"radialBarFillColor"},minValue:{propertyType:"child",type:"string",child:"_stackeddonutgaugecore",childOption:"minValue",defaultValue:"0"},maxValue:{propertyType:"child",type:"string",child:"_stackeddonutgaugecore",childOption:"maxValue",defaultValue:"100"},startAngle:{propertyType:"child",type:"string",child:"_stackeddonutgaugecore",childOption:"startAngle"},endAngle:{propertyType:"child",type:"string",child:"_stackeddonutgaugecore",childOption:"endAngle"},clockwise:{propertyType:"child",type:"boolean",defaultValue:!0,child:"_stackeddonutgaugecore",childOption:"clockwise"},localizableUnitText:{propertyType:"member",type:"string"},unitText:{propertyType:"member",type:"string"},animation:{propertyType:"child",type:"string",child:"_stackeddonutgaugecore",childOption:"animation"},autoAdjustment:{propertyType:"child",type:"boolean",defaultValue:!0,child:"_stackeddonutgaugecore",childOption:"autoAdjustment"},segments:{propertyType:"child",type:"string",child:"_stackeddonutgaugecore",childOption:"segments"},showLegend:{propertyType:"member",type:"boolean",defaultValue:!0},legendBorderWidth:{propertyType:"child",type:"string",child:"_legendElement",childOption:"borderWidth"},legendBorderStyle:{propertyType:"child",type:"enum",child:"_legendElement",childOption:"borderStyle"},legendBorderRadius:{propertyType:"child",type:"string",child:"_legendElement",childOption:"borderRadius"},legendWidth:{propertyType:"child",type:"string",child:"_legendElement",childOption:"width",defaultValue:"auto"},legendHeight:{propertyType:"child",type:"string",child:"_legendElement",childOption:"height",defaultValue:"auto"},legendMargin:{propertyType:"child",type:"string",child:"_legendElement",childOption:"margin"},legendPadding:{propertyType:"child",type:"string",child:"_legendElement",childOption:"padding"},legendPosition:{propertyType:"member",type:"string",defaultValue:"Right"},legendAlignment:{propertyType:"member",type:"string",defaultValue:"Center"},fontClassLegend:{propertyType:"child",type:"string",child:"_legendElement",childOption:"fontClassLegend"},fontSizeLegend:{propertyType:"child",type:"string",child:"_legendElement",childOption:"fontSizeLegend"},textColorLegend:{propertyType:"child",type:"string",resourceValue:["getTheme"],defaultValue:"@PrimaryColor",child:"_legendElement",childOption:"textColorLegend"},uppercaseLegend:{propertyType:"child",type:"boolean",child:"_legendElement",childOption:"uppercaseLegend"},showColorLegend:{propertyType:"child",type:"boolean",child:"_legendElement",childOption:"showColorLegend"},showTextLegend:{propertyType:"child",type:"boolean",child:"_legendElement",childOption:"showTextLegend"},showValueLegend:{propertyType:"child",type:"boolean",child:"_legendElement",childOption:"showValueLegend"},template:{propertyType:"child",type:"string",child:"_legendElement",defaultValue:"VisiWin.UI.StackedDonutGaugeLegendTemplate"}},this.cssStyles={css:"\n            .vw-stackeddonutgaugecore{\n              height: 100%;\n              width: 100%;\n            }\n\n            "},this.segmentsCollection=[],this.boundSegmentsChangedHandler=this._segmentsChangedHandler.bind(this),this.initialize(StackedDonutGauge)}createTemplate(){const x=document.createElement("div");return this.reparentChildren(this.element,x),this.element.innerHTML=['<div class="vw-stackeddonutgaugecore" data-ref-element="_stackeddonutgaugecore" data-win-control="VisiWin.UI.StackedDonutGaugeCore"}"></div>','<div class="vw-stackeddonutgaugelegend" data-ref-element="_legendElement" data-win-control="VisiWin.UI.StackedDonutGaugeLegend"}"></div>'].join("\n"),this.reparentChildren(x,this.element),this.initializeChilds()}ready(){"Control"===this.designerType&&this._segmentsChangedHandler("ready")}_updateLayout(A){if("radialBarWidth"===A.changeName||"initialized"===A.changeName){const V=this.radialBarWidth.replace("px","");isNaN(Number(V))?x.isNullOrEmpty(A.oldValue)?this.radialBarWidth="16px":this.radialBarWidth=A.oldValue:Number(V)<0?this.radialBarWidth=Math.abs(Number(V)).toString()+"px":this._stackeddonutgaugecore.winControl.radialBarWidth=this.radialBarWidth}if("radialBarSpacing"===A.changeName||"initialized"===A.changeName){const V=this.radialBarSpacing.replace("px","");isNaN(Number(V))?x.isNullOrEmpty(A.oldValue)?this.radialBarSpacing="3px":this.radialBarSpacing=A.oldValue:Number(V)<0?this.radialBarSpacing=Math.abs(Number(V)).toString()+"px":this._stackeddonutgaugecore.winControl.radialBarSpacing=this.radialBarSpacing}if("innerRadius"===A.changeName||"initialized"===A.changeName){const V=this.innerRadius.replace("px","");isNaN(Number(V))?x.isNullOrEmpty(A.oldValue)?this.innerRadius="50px":this.innerRadius=A.oldValue:Number(V)<0?this.innerRadius=Math.abs(Number(V)).toString()+"px":this._stackeddonutgaugecore.winControl.innerRadius=this.innerRadius}if("initialized"===A.changeName&&(this._stackeddonutgaugecore.winControl.autoAdjustment=this.autoAdjustment,this._stackeddonutgaugecore.winControl.minValue=this.minValue,this._stackeddonutgaugecore.winControl.maxValue=this.maxValue),this.showLegend?this._legendElement.style.display="flex":this._legendElement.style.display="none",this.element.style.display="flex","initialized"===A.changeName||"legendPosition"===A.changeName||"legendAlignment"===A.changeName){switch(this.legendPosition){case"Top":this.element.style.flexDirection="column-reverse";break;case"Bottom":this.element.style.flexDirection="column";break;case"Right":this.element.style.flexDirection="row";break;default:this.element.style.flexDirection="row-reverse"}if("Top"===this.legendPosition||"Bottom"===this.legendPosition)switch(this.legendAlignment){case"Left":this.element.style.alignItems="flex-start";break;case"Right":this.element.style.alignItems="flex-end";break;case"Center":this.element.style.alignItems="center"}else switch(this.legendAlignment){case"Top":this.element.style.alignItems="flex-start";break;case"Bottom":this.element.style.alignItems="flex-end";break;case"Center":this.element.style.alignItems="center"}}}_updateColors(x){"firstUpdate"!==x.changeName&&"backgroundColor"!==x.changeName&&"foregroundColor"!==x.changeName&&"borderColor"!==x.changeName&&"disabledBackgroundColor"!==x.changeName&&"disabledForegroundColor"!==x.changeName&&"disabledBorderColor"!==x.changeName&&"disabled"!==x.changeName||(this.disabled?(this.element.style.color=this.getColor("disabledForegroundColor"),this.element.style.backgroundColor=this.getColor("disabledBackgroundColor"),this.element.style.borderColor=this.getColor("disabledBorderColor"),this._legendElement&&this._legendElement.winControl&&(this._legendElement.winControl.foregroundColor=this.getColor("disabledForegroundColor"),this._legendElement.winControl.borderColor=this.getColor("disabledLegendBorderColor"))):(this.element.style.color=this.getColor("foregroundColor"),this.element.style.backgroundColor=this.getColor("backgroundColor"),this.element.style.borderColor=this.getColor("borderColor"),this._legendElement&&this._legendElement.winControl&&(this._legendElement.winControl.foregroundColor=this.getColor("foregroundColor"),this._legendElement.winControl.borderColor=this.getColor("legendBorderColor"))))}registerChild(x,A,V,R){return A!==this.registerTargetId||(V&&V.winControl&&(V.style.display="none",this.segmentsCollection.push(V.winControl),V.winControl.addEventListener("notifyPropertyChanged",this.boundSegmentsChangedHandler)),!1)}_segmentsChangedHandler(x){if("ready"===x||"fillColor"===x.detail.changeName||"labelText"===x.detail.changeName||"unitText"===x.detail.changeName)if(this.segmentsCollection&&this.segmentsCollection.length>0){const x=[],A=[];for(let V=0;V<this.segmentsCollection.length;V++)x.push({value:this.segmentsCollection[V].value,variableName:this.segmentsCollection[V].variableName,labelText:this.segmentsCollection[V].labelText,fillColor:this.segmentsCollection[V].fillColor}),A.push({value:this.segmentsCollection[V].value,variableName:this.segmentsCollection[V].variableName,labelText:this.segmentsCollection[V].labelText,fillColor:this.segmentsCollection[V].fillColor,unitText:this.segmentsCollection[V].unitText,decimalPlaces:this.segmentsCollection[V].decimalPlaces});this._stackeddonutgaugecore&&this._stackeddonutgaugecore.winControl&&(this._stackeddonutgaugecore.winControl.segments=x),this._legendElement&&this._legendElement.winControl&&(this._legendElement.winControl.segments=A)}else this._stackeddonutgaugecore&&this._stackeddonutgaugecore.winControl&&(this._stackeddonutgaugecore.winControl.segments=[]),this._legendElement&&this._legendElement.winControl&&(this._legendElement.winControl.segments=[])}dispose(){if(this.segmentsCollection&&this.segmentsCollection.length>0)for(let x=0;x<this.segmentsCollection.length;x++)this.segmentsCollection[x].removeEventListener("notifyPropertyChanged",this.boundSegmentsChangedHandler);return this.segmentsCollection=[],super.dispose()}}A.StackedDonutGauge=StackedDonutGauge}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class StackedDonutGaugeCore extends x.UI.ControlBase{constructor(A,V){super(A,V),this.properties={designerType:{propertyType:"base",type:"string",defaultValue:"Control"},radialBarWidth:{propertyType:"member",type:"string"},radialBarSpacing:{propertyType:"member",type:"string"},innerRadius:{propertyType:"member",type:"string"},radialBarBackground:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BackgroundColor"},radialBarFillColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BackgroundColor"},minValue:{propertyType:"member",type:"number"},maxValue:{propertyType:"member",type:"number"},startAngle:{propertyType:"member",type:"string"},endAngle:{propertyType:"member",type:"string"},clockwise:{propertyType:"member",type:"boolean",defaultValue:!0},animation:{propertyType:"member",type:"string"},autoAdjustment:{propertyType:"member",type:"boolean",defaultValue:!0},segments:{propertyType:"member",type:"any"}},this.cssStyles={css:""},this.segments=[],this.faktor=1,this.controlID=x.Guid().replace(/-/g,""),this.myVariableService=x.System.DataAccess.VariableService.getService(),this.svgns="http://www.w3.org/2000/svg",this.xlinkns="http://www.w3.org/1999/xlink",this.isInStylingMode=!1,this._changeHandlerVariable=this.mVariableChanged.bind(this),this.inlineOptions.debug,this.initialize(StackedDonutGaugeCore,V)}createTemplate(){return this.element.innerHTML=['<svg class="vw-stackeddonutgaugecore__svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"></svg>'].join("\n"),this.element.firstElementChild&&(this._svgElement=this.element.firstElementChild),null}resizeHandler(){this._updateLayoutBase("event","sizeChanged",null,null)}beforeInit(){this._svgElement.setAttribute("width","100%"),this._svgElement.setAttribute("height","100%")}ready(){this._updateLayoutBase("event","firstUpdate",null,null)}_updateColors(x){this.disabled?this.element.style.backgroundColor=this.getColor("disabledBackgroundColor"):this.element.style.backgroundColor=this.getColor("backgroundColor")}_updateLayout(x){const A=window.getComputedStyle(this.element,null),V=parseFloat(A.getPropertyValue("width")),R=parseFloat(A.getPropertyValue("height")),D=[];if(this.svgSize=V>R?R:V,this.centerX=this.getPixelValue("50%",V),this.centerY=this.getPixelValue("50%",R),this.isInDesignMode&&("innerRadius"===x.changeName||"radialBarWidth"===x.changeName||"radialBarSpacing"===x.changeName||"minValue"===x.changeName||"maxValue"===x.changeName)||"initialized"===x.changeName||"sizeChanged"===x.changeName||"firstUpdate"===x.changeName||"segments"===x.changeName){for(;this._svgElement.lastChild;)this._svgElement.removeChild(this._svgElement.lastChild);if("sizeChanged"!==x.changeName&&!this.isInStylingMode||null!=this.segments&&0!=this.segments.length||(D.push({fillColor:"#2894f4",show:!0,value:50,labelText:"MySegment",segmentID:0+this.controlID}),this.isInStylingMode=!0),null!==this.segments&&this.segments.length>0||D.length>0){for(let x=0;x<this.segments.length;x++){const A=this.segments[x],V=this.getThemeColor(A.fillColor)||"#2894f4",R=parseFloat(A.value),N=!0,U=A.labelText,B=x+this.controlID;D.push({fillColor:V,show:N,value:R,labelText:U,segmentID:B})}if(this.radialBarWidth){const x=this.radialBarWidth;this._radialBarWidthTemp=x.replace(/px$/,"")}else this._radialBarWidthTemp="16";if(this.innerRadius?this._innerRadiusTemp=(Number(this.innerRadius.replace(/px$/,""))+Number(this._radialBarWidthTemp)/2).toString():this._innerRadiusTemp="50",this.radialBarSpacing?this._radialBarSpacingTemp=this.radialBarSpacing.replace(/px$/,""):this._radialBarSpacingTemp="3",this.autoAdjustment){let x=0,A=0;x=x+Number(this._innerRadiusTemp)+Number(this._radialBarWidthTemp);for(let A=0;A<this.segments.length-1;A++)x+=Number(this._radialBarSpacingTemp)+Number(this._radialBarWidthTemp);A=V<=R?V/2:R/2,this.faktor=A/x}else this.faktor=1;this._radialBarWidthF=(Number(this._radialBarWidthTemp)*this.faktor).toString(),this._innerRadiusF=(Number(this._innerRadiusTemp)*this.faktor).toString(),this._radialBarSpacingF=(Number(this._radialBarSpacingTemp)*this.faktor).toString();for(let x=0;x<D.length;x++)D[x].show&&this.drawDonut(this.svgSize,D[x],x,this.faktor)}}}registerVariable(x){return __awaiter(this,void 0,void 0,(function*(){this.myVariable=this.myVariableService.GetVariable(x),this.myVariable.Change.add(this._changeHandlerVariable);yield this.myVariable.AttachAsync()}))}removeVariable(x){return __awaiter(this,void 0,void 0,(function*(){this.myVariable.Change.remove(this._changeHandlerVariable),this.myVariable.Detach()}))}mVariableChanged(x){if(null!==x){const A=x.Name;let V;for(let R=0;R<this.segments.length;R++){const D=this.segments[R].variableName;null!==D&&D===A&&(V=R,this.segments[R].value=x.Value,this.drawDonut(this.svgSize,this.segments[R],R,this.faktor))}}}drawDonut(x,A,V,R){let D=A.value;const N=A.fillColor,U=A.labelText;let B,F,W;isNaN(D)&&(D=0),this.maxValue?B=this.maxValue:(this.maxValue=100,B=100),this.minValue?F=this.minValue:(this.minValue=0,F=0),D>this.maxValue&&(D=this.maxValue),D<this.minValue&&(D=this.minValue),this.minValue>0||this.minValue<0?(B=Number(this.maxValue)-Number(this.minValue),F=0,W=Number(D)-Number(this.minValue)):0==this.minValue&&(B=this.maxValue,F=0,W=D);let H=W/(Number(B)-Number(F))*360;360===H&&(H=359.999);const z=Number(this._radialBarWidthF)/20+"em";let G=0;if(G=0===V?Number(this._innerRadiusF):Number(this._innerRadiusF)+V*Number(this._radialBarWidthF)+V*Number(this._radialBarSpacingF),isNaN(this.centerX))return;const j=document.createElementNS(this.svgns,"path");j.setAttribute("stroke",N),j.setAttribute("stroke-width",this._radialBarWidthF),j.setAttribute("fill","none"),j.setAttribute("d",this.describeArc(this.centerX,this.centerY,G,0,H)),j.setAttributeNS(null,"id","value"+String(V)+this.controlID);const q=document.createElementNS(this.svgns,"path");let Q;q.setAttribute("stroke","#D3D3D3"),q.setAttribute("stroke-width",this._radialBarWidthF),q.setAttribute("fill","none"),q.setAttribute("d",this.describeArc(this.centerX,this.centerY,G,0,359.999)),q.setAttributeNS(null,"id","background"+String(V)+this.controlID),null!==this._svgElement.getElementById("value"+String(V)+this.controlID)?this._svgElement.getElementById("value"+String(V)+this.controlID).setAttribute("d",j.getAttribute("d")):(this._svgElement.appendChild(q),this._svgElement.appendChild(j)),Q=Number(this._radialBarWidthTemp)>=15?"-1":"-0.5";const K=document.createElementNS(this.svgns,"text");K.setAttribute("x","10"),K.setAttribute("dy",Q),K.setAttribute("font-size",String(z)),K.setAttributeNS(null,"id","text"+String(V)+this.controlID),null===this._svgElement.getElementById("text"+String(V)+this.controlID)&&this._svgElement.appendChild(K);const J=document.createElementNS(this.svgns,"textPath");J.setAttributeNS(this.xlinkns,"xlink:href","#background"+String(V)+this.controlID),J.setAttributeNS(null,"id","textPath"+String(V)+this.controlID),J.setAttribute("fill","#ffffff"),J.textContent=String(U),J.setAttribute("alignment-baseline","central"),J.setAttribute("startOffset",String(-7)),null!==this._svgElement.getElementById("textPath"+String(V)+this.controlID)?this._svgElement.getElementById("textPath"+String(V)+this.controlID).textContent=String(U):K.appendChild(J)}drawLabel(x){if(null!==x&&x.length>0)for(let A=0;A<x.length;A++)if(x[A].labelText){const V=x[A],R=Number(this._radialBarWidthF)/15+"em",D=document.createElementNS(this.svgns,"text");D.setAttribute("x","10"),D.setAttribute("y","0"),D.setAttribute("font-size",R.toString()),D.setAttributeNS(null,"id","text"+A.toString()+this.controlID),null===this._svgElement.getElementById("text"+A.toString()+this.controlID)&&this._svgElement.appendChild(D);const N=document.createElementNS(this.svgns,"textPath");N.setAttributeNS(this.xlinkns,"xlink:href","#background"+A.toString()),N.setAttributeNS(null,"id","textPath"+A.toString()+this.controlID),N.setAttribute("fill","#ffffff"),N.textContent=V.labelText.toString(),N.setAttribute("alignment-baseline","central"),N.setAttribute("startOffset",(-7).toString()),null!==this._svgElement.getElementById("textPath"+A.toString()+this.controlID)?this._svgElement.getElementById("textPath"+A.toString()+this.controlID).textContent=V.labelText.toString():D.appendChild(N)}}polarToCartesian(x,A,V,R){const D=(R-90)*Math.PI/180;return{x:x+V*Math.cos(D),y:A+V*Math.sin(D)}}describeArc(x,A,V,R,D){const N=this.polarToCartesian(x,A,V,D),U=this.polarToCartesian(x,A,V,R),B=D-R<=180?"0":"1";return["M",U.x,U.y,"A",V,V,0,B,1,N.x,N.y].join(" ")}getPixelValue(x,A){return!0===/%/.test(x)?Math.abs(A*(parseFloat(x)/100)):Math.abs(parseFloat(x))}attach(){for(let x=0;x<this.segments.length;x++){const A=this.segments[x].variableName;null!==A&&this.registerVariable(A)}return null}detach(){for(let x=0;x<this.segments.length;x++){const A=this.segments[x].variableName;null!==A&&this.removeVariable(A)}return null}dispose(){return super.dispose()}removeHandler(){for(let x=0;x<this.segments.length;x++){const A=this.segments[x].variableName;null!==A&&this.removeVariable(A)}}}A.StackedDonutGaugeCore=StackedDonutGaugeCore}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class StackedDonutGaugeLegend extends x.UI.ControlBase{constructor(A,V){super(A,V),this.properties={designerType:{propertyType:"base",type:"string",defaultValue:"Control"},template:{propertyType:"custom",type:"string"},segments:{propertyType:"member",type:"any"},foregroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},backgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},borderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"},disabledForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledForegroundColor"},disabledBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},disabledBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledBorderColor"}},this.bindingList=new WinJS.Binding.List,this.myVariableService=x.System.DataAccess.VariableService.getService(),this._changeHandlerVariable=this.mVariableChanged.bind(this),this.initialize(StackedDonutGaugeLegend)}createTemplate(){return this.element.innerHTML=['<div class="vw-stackeddonutgaugelegend__repeater" data-ref-element="_repeaterElement" data-win-control="WinJS.UI.Repeater"></div>'].join("\n"),this.element.firstElementChild&&(this._repeaterElement=this.element.firstElementChild),this.initializeChilds([this._repeaterElement])}beforeInit(){this._repeaterElement&&this._repeaterElement.winControl&&(this._repeaterElement.winControl.data=this.bindingList)}ready(x){this._repeaterElement&&this._setDesignerType(this._repeaterElement)}get template(){return this._template}set template(x){this._template=x,this._repeaterElement&&this._repeaterElement.winControl&&(this._repeaterElement.winControl.template=document.getElementById(x))}_updateColors(x){this.disabled?(this.element.style.color=this.getColor("disabledForegroundColor"),this.element.style.backgroundColor=this.getColor("disabledBackgroundColor"),this.element.style.borderColor=this.getColor("disabledBorderColor")):(this.element.style.color=this.getColor("foregroundColor"),this.element.style.backgroundColor=this.getColor("backgroundColor"),this.element.style.borderColor=this.getColor("borderColor"))}_updateLayout(x){if("initialized"===x.changeName)for(let x=0;x<this.segments.length;x++){const A=this.segments[x].variableName;null!==A&&this.registerVariable(A)}if(null!==this.segments&&this.segments.length>0){for(;this.bindingList.length>0;)this.bindingList.pop();for(let x=0;x<this.segments.length;x++){const A={value:"",labelText:"",unitText:"",fillColor:"",decimalPlaces:0};A.value=void 0!==this.segments[x].value?this.segments[x].value:0,A.labelText=void 0!==this.segments[x].labelText?this.segments[x].labelText:"",A.unitText=void 0!==this.segments[x].unitText?this.segments[x].unitText:"",A.fillColor=void 0!==this.segments[x].fillColor?this.segments[x].fillColor:"",A.decimalPlaces=void 0!==this.segments[x].decimalPlaces?this.segments[x].decimalPlaces:0,this.bindingList.push(A)}this._repeaterElement&&this._setDesignerType(this._repeaterElement)}}_setDesignerType(x){if(x&&x.firstChild){let A=x.firstChild;for(;A;)A.winControl&&(A.winControl.designerType="Child"),this._setDesignerType(A),A=A.nextSibling}}registerVariable(x){return __awaiter(this,void 0,void 0,(function*(){this.myVariable=this.myVariableService.GetVariable(x),this.myVariable.Change.add(this._changeHandlerVariable);yield this.myVariable.AttachAsync()}))}removeVariable(x){return __awaiter(this,void 0,void 0,(function*(){this.myVariable.Change.remove(this._changeHandlerVariable),this.myVariable.Detach()}))}mVariableChanged(x){if(null!==x){const A=x.Name;let V="";for(let x=0;x<this.segments.length;x++){const R=this.segments[x].variableName;null!==R&&R===A&&(V=V+","+x)}for(let A=0;A<this.segments.length;A++){const R={value:"",labelText:"",unitText:"",fillColor:"",decimalPlaces:0};if(V.includes(String(A))){const V=this.segments[A];R.value=x.Value,R.labelText=void 0!==this.segments[A].labelText?this.segments[A].labelText:"",R.unitText=void 0!==this.segments[A].unitText?this.segments[A].unitText:"",R.fillColor=void 0!==this.segments[A].fillColor?this.segments[A].fillColor:"",R.decimalPlaces=void 0!==this.segments[A].decimalPlaces?this.segments[A].decimalPlaces:0,this.segments[A].value=x.Value;try{this.bindingList.setAt(A,R),this.bindingList.notify("data",V,R).done}catch(x){const A="StackedDonutGaugeLegend BindingList "+x;console.warn(A)}}}}}attach(){for(let x=0;x<this.segments.length;x++){const A=this.segments[x].variableName;null!==A&&this.registerVariable(A)}return null}detach(){for(let x=0;x<this.segments.length;x++){const A=this.segments[x].variableName;null!==A&&this.removeVariable(A)}return null}dispose(){return super.dispose()}}A.StackedDonutGaugeLegend=StackedDonutGaugeLegend}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class StackedDonutGaugeSegment extends x.UI.VariableBase{constructor(x,A){super(x,A),this.properties={designerType:{propertyType:"base",type:"string",defaultValue:"Control"},registerSourceId:{propertyType:"base",type:"string",defaultValue:"StackedDonutGaugeSegment"},labelText:{propertyType:"member",type:"string",defaultValue:"LabelText"},localizableLabelText:{propertyType:"member",type:"string"},textWidth:{propertyType:"member",type:"string"},textHeight:{propertyType:"member",type:"string"},textColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@PrimaryColor"},uppercase:{propertyType:"member",type:"boolean",defaultValue:!1},showLabel:{propertyType:"member",type:"boolean",defaultValue:!0},textAlignment:{propertyType:"member",type:"string"},textContrast:{propertyType:"member",type:"number"},radialBarWidth:{propertyType:"member",type:"number"},capForm:{propertyType:"member",type:"string"},fillColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@PrimaryColor"},startColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@PrimaryColor"},endColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@PrimaryColor"},decimalPlaces:{propertyType:"member",type:"number"}},this.initialize(StackedDonutGaugeSegment,A)}dispose(){return super.dispose()}}A.StackedDonutGaugeSegment=StackedDonutGaugeSegment}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){class VideoPlayer extends x.UI.ControlBase{constructor(x,A){super(x,A),this.properties={designerType:{propertyType:"base",type:"string",defaultValue:"Control"},registerTargetId:{propertyType:"base",defaultValue:"VideoItem"},source:{propertyType:"member",type:"string"},autoplay:{propertyType:"member",type:"boolean",defaultValue:!1},controls:{propertyType:"member",type:"boolean",defaultValue:!0},loop:{propertyType:"member",type:"boolean",defaultValue:!1},muted:{propertyType:"member",type:"boolean",defaultValue:!1},preload:{propertyType:"member",type:"string",defaultValue:"auto"},previewImage:{propertyType:"member",type:"string",defaultValue:""},altSource:{propertyType:"member",type:"string",defaultValue:""}},this.videoItemCollection=[],this.controls=!0,this.autoplay=!1,this.loop=!1,this.muted=!1,this._SOURCETAG="source",this.cssStyles={css:"\n              .vw-videoplayer__video {\n                  width: 100%;\n                  height:100%;\n              }"},this.initialize(VideoPlayer)}createTemplate(){const x=document.createElement("div");return this.reparentChildren(this.element,x),this.element.innerHTML=`\n              <video data-ref-element="_videoElement" class="${this.className}__video" controls>\n              </video>\n              `,this.reparentChildren(x,this.element),this.initializeChilds()}_updateLayout(x){const A=window.getComputedStyle(this.element,null);this.elementWidth=parseFloat(A.getPropertyValue("width")),this.elementHeight=parseFloat(A.getPropertyValue("height")),"initialized"===x.changeName&&(this._updateVideoElement(),this._videoElement.autoplay=this.autoplay,this._videoElement.controls=this.controls,this._videoElement.loop=this.loop,this._videoElement.muted=this.muted),"height"===x.changeName&&this._updateVideoElement(),"autoplay"===x.changeName&&(this._videoElement.autoplay=this.autoplay),"controls"===x.changeName&&(this._videoElement.controls=this.controls),"loop"===x.changeName&&(this._videoElement.loop=this.loop),"muted"===x.changeName&&(this._videoElement.muted=this.muted)}isValidSource(x){return!!x&&(!!(x.endsWith(A.Video.VIDEOTYPES.MP4)||x.endsWith(A.Video.VIDEOTYPES.WEBM)||x.endsWith(A.Video.VIDEOTYPES.OGG))||(console.warn("Wrong video format. Only mp4/webm/ogg allowed."),!1))}getSourceType(x){return this.isValidSource(x)?x.endsWith(A.Video.VIDEOTYPES.MP4)?A.Video.VIDEOTYPES.MP4:x.endsWith(A.Video.VIDEOTYPES.WEBM)?A.Video.VIDEOTYPES.WEBM:x.endsWith(A.Video.VIDEOTYPES.OGG)?A.Video.VIDEOTYPES.OGG:A.Video.VIDEOTYPES.UNKNOWN:A.Video.VIDEOTYPES.UNKNOWN}_updateVideoElement(){if(this.videoItemCollection&&this.videoItemCollection.length>0)for(let x=0;x<this.videoItemCollection.length;x++){const A=this.videoItemCollection[x].alternativeSource,V=this.videoItemCollection[x].minRes,R=this.videoItemCollection[x].maxRes;if(Number(V)<=this.elementHeight&&this.elementHeight<=Number(R)&&this.isValidSource(A)){const x=document.createElement(this._SOURCETAG);x.setAttribute("src",A),x.setAttribute("type","video/"+this.getSourceType(A)),this._videoElement.append(x)}}else if(this.isValidSource(this.source)){const x=document.createElement(this._SOURCETAG);x.setAttribute("src",this.source),x.setAttribute("type","video/"+this.getSourceType(this.source)),this._videoElement.append(x)}}registerChild(x,A,V,R){return A!==this.registerTargetId||(V&&V.winControl&&(V.style.display="none",this.videoItemCollection.push(V.winControl)),!1)}dispose(){return super.dispose()}}A.VideoPlayer=VideoPlayer}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class VideoItem extends x.UI.ControlBase{constructor(x,A){super(x,A),this.properties={designerType:{propertyType:"base",type:"string",defaultValue:"Control"},registerSourceId:{propertyType:"base",type:"string",defaultValue:"VideoItem"},alternativeSource:{propertyType:"member",type:"string"},minRes:{propertyType:"member",type:"string"},maxRes:{propertyType:"member",type:"string"},resolution:{propertyType:"member",type:"string"},type:{propertyType:"member",type:"string"}},this.initialize(VideoItem)}_updateLayout(x){}dispose(){return super.dispose()}}A.VideoItem=VideoItem}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(x){!function(x){"use strict";x.VIDEOTYPES={MP4:"mp4",WEBM:"webm",OGG:"ogg",UNKNOWN:"unknown"}}(x.Video||(x.Video={}))}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class PDFViewer extends x.UI.ControlBase{constructor(A,V){super(A,V),this.properties={designerType:{propertyType:"base",type:"string",defaultValue:"Control"},source:{propertyType:"member",type:"string",defaultValue:""},navpanes:{propertyType:"member",type:"boolean",defaultValue:!1},toolbar:{propertyType:"member",type:"boolean",defaultValue:!1},statusbar:{propertyType:"member",type:"boolean",defaultValue:!1},scrollbar:{propertyType:"member",type:"boolean",defaultValue:!0},zoom:{propertyType:"member",type:"number",defaultValue:0},startpage:{propertyType:"member",type:"number",defaultValue:1}},this.toolbar=!1,this.startpage=1,this.zoom=0,this.navpanes=!1,this.statusbar=!1,this.scrollbar=!0,this.cssStyles={css:"\n              .vw-pdfviewer {\n                  width: 100%;\n                  height:100%;\n              }"},this.initialize(x.UI.PDFViewer)}createTemplate(){return this.element.innerHTML=`\n        <object data-ref-element="_objectPdfElement" class="${this.className}" type="application/pdf">\n          <embed data-ref-element="_embedPdfElement" class="${this.className}" type="application/pdf"></embed>\n        </object>\n        `,this.initializeChilds()}_updateLayout(A){if("afterInit"===A.changeName||"navpanes"===A.changeName||"toolbar"===A.changeName||"statusbar"===A.changeName){if(!this.isValidSource(this.source))return;if(x.Utilities.isFirefox()){let x="none";x=this.toolbar?"thumbs":"none",this._embedPdfElement.src=`${this.source}#zoom=${+this.zoom}&page=${+this.startpage}&pagemode=${x}`,this._objectPdfElement.data=`${this.source}#zoom=${+this.zoom}&page=${+this.startpage}&pagemode=${x}`}else this._embedPdfElement.src=`${this.source}#zoom=${+this.zoom}&navpanes=${+this.navpanes}&toolbar=${+this.toolbar}&statusbar=${+this.statusbar}&scrollbar=${+this.scrollbar}&page=${+this.startpage}`,this._objectPdfElement.data=`${this.source}#zoom=${+this.zoom}&navpanes=${+this.navpanes}&toolbar=${+this.toolbar}&statusbar=${+this.statusbar}&scrollbar=${+this.scrollbar}&page=${+this.startpage}`}}isValidSource(x){return!!this.source&&".pdf"===this.source.slice(-4)}}A.PDFViewer=PDFViewer}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class AlarmIndicator extends x.UI.ControlBase{constructor(A,V){super(A,V),this.properties={designerType:{propertyType:"base",type:"string",defaultValue:"Control"},registerTargetId:{propertyType:"base",defaultValue:"AlarmIndicatorItem"},iconFont:{propertyType:"member",type:"string",defaultValue:"material-icons"},symbolSize:{propertyType:"member",type:"string",defaultValue:"50xp"},symbolType:{propertyType:"member",type:"string",defaultValue:"Icon"},autoScale:{propertyType:"member",type:"boolean",defaultValue:!0},showDefaultSymbol:{propertyType:"member",type:"Boolean",defaultValue:!0},defaultSymbol:{propertyType:"member",type:"string",defaultValue:"error"},badgeForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@White"},badgeBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@PrimaryColor"},defaultForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ChromeHigh"},defaultBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@Transparent"},badgeSize:{propertyType:"member",type:"String",defaultValue:"30px"},autoScaleBadge:{propertyType:"member",type:"boolean",defaultValue:!0},showBadge:{propertyType:"member",type:"boolean",defaultValue:!0},autoScaleBadgeTextSize:{propertyType:"member",type:"boolean",defaultValue:!0},badgeTextSize:{propertyType:"member",type:"string",defaultValue:"20px"},badgePosition:{propertyType:"member",type:"string",defaultValue:"Top-right"},circularBackground:{propertyType:"member",type:"boolean",defaultValue:!0},showBackground:{propertyType:"member",type:"boolean",defaultValue:!0},alarmIndicatorItems:{propertyType:"member",type:"string"},desiredGroups:{propertyType:"member",type:"string"}},this.cssStyles={css:"\n       "},this.alarmIndicatorItemsCollection=[],this.myAlarmService=x.System.Alarm.AlarmService.getService(),this.initHandler=this.InitAlarm.bind(this),this.changeHandler=this.ChangeAlarm.bind(this),this.newHandler=this.NewAlarm.bind(this),this.clearHandler=this.ClearAlarm.bind(this),this.initialize(AlarmIndicator)}createTemplate(){const x=document.createElement("div");return this.reparentChildren(this.element,x),this.element.innerHTML='\n        <div data-ref-element="tempdiv" style="position: relative;">\n          <div data-ref-element="_containerElement" class="vw-alarmindicator__indicator" >\n          </div>\n          <div data-ref-element="_counterElement" class="vw-alarmindicator__counter" >\n          </div>\n        </div>\n      ',this.reparentChildren(x,this.element),this.initializeChilds()}_updateLayout(A){"afterInit"!==A.changeName&&"initialized"!==A.changeName&&"height"!==A.changeName&&"width"!==A.changeName&&"defaultSymbol"!==A.changeName&&"showDefaultSymbol"!==A.changeName&&"symbolSize"!==A.changeName&&"autoScale"!==A.changeName&&"circularBackground"!==A.changeName&&"showBadge"!==A.changeName&&"autoScaleBadge"!==A.changeName&&"badgeSize"!==A.changeName&&"badgeTextSize"!==A.changeName&&"autoScaleBadgeTextSize"!==A.changeName&&"badgePosition"!==A.changeName&&"showBackground"!==A.changeName||this.isInDesignMode&&(x.isNullOrUndefined(this.alarmIndicatorItemsCollection)||this.updateAlarmIndicator())}_updateColors(x){"badgeBackgroundColor"!==x.changeName&&"badgeForegroundColor"!==x.changeName||(this.element.style.setProperty("--counterbackgroundcolor",this.getThemeColor(this.badgeBackgroundColor)),this.element.style.setProperty("--counterforegroundcolor",this.getThemeColor(this.badgeForegroundColor))),"defaultBackgroundColor"===x.changeName&&this.element.style.setProperty("--backgroundcolor",this.getThemeColor(this.defaultBackgroundColor)),"defaultForegroundColor"===x.changeName&&this.updateAlarmIndicator()}updateAlarmIndicator(){var x,A;const V=[],R=[],D=[],N=[];let U;for(let x=0;x<this.alarmIndicatorItemsCollection.length;++x)V.push(this.alarmIndicatorItemsCollection[x].alarmClassName);if(this.isInDesignMode){U={alarmClassName:"",count:0,countActive:0,countInactive:0,symbolActive:this.defaultSymbol,symbolInactive:this.defaultSymbol,foregroundColor:this.defaultForegroundColor,backgroundColor:this.defaultBackgroundColor,foregroundColorInactive:this.defaultForegroundColor,backgroundColorInactive:this.defaultBackgroundColor,priority:0,iconFont:this.iconFont,symbolType:this.symbolType}}else if(0!==this.myCurrentAlarms.Alarms.length){for(let x=0;x<this.myCurrentAlarms.Alarms.length;x++){const A={alarmClassName:this.myCurrentAlarms.Alarms[x].Class.Name,alarmState:this.myCurrentAlarms.Alarms[x].AlarmState,alarmPriority:this.myCurrentAlarms.Alarms[x].Priority,backColor:this.myCurrentAlarms.Alarms[x].StateInfo.BackColor,foreColor:this.myCurrentAlarms.Alarms[x].StateInfo.ForeColor};R.push(A)}for(let x=0;x<R.length;++x)if(1===R[x].alarmState)if(D.filter((function(A){return A.alarmClassName===R[x].alarmClassName})).length>0)for(let A=0;A<D.length;A++)D[A].alarmClassName===R[x].alarmClassName&&(D[A].count++,1===R[x].alarmState?D[A].countActive++:D[A].countInactive++);else{let A=0,V=0;1===R[x].alarmState?A=1:V=1;const N={alarmClassName:R[x].alarmClassName,count:1,countActive:A,countInactive:V,symbolActive:this.defaultSymbol,symbolInactive:this.defaultSymbol,foregroundColor:R[x].foreColor,backgroundColor:R[x].backColor,foregroundColorInactive:R[x].foreColor,backgroundColorInactive:R[x].backColor,priority:0,iconFont:this.iconFont,symbolType:this.symbolType};for(let A=0;A<this.alarmIndicatorItemsCollection.length;A++)this.alarmIndicatorItemsCollection[A].alarmClassName===R[x].alarmClassName&&(N.iconFont=this.alarmIndicatorItemsCollection[A].iconFont,N.symbolType=this.alarmIndicatorItemsCollection[A].symbolType,null!==this.alarmIndicatorItemsCollection[A].symbolActive?N.symbolActive=this.alarmIndicatorItemsCollection[A].symbolActive:N.symbolActive=this.defaultSymbol,null!==this.alarmIndicatorItemsCollection[A].symbolInactive?N.symbolInactive=this.alarmIndicatorItemsCollection[A].symbolInactive:N.symbolInactive=this.defaultSymbol,null!==this.alarmIndicatorItemsCollection[A].foregroundColor?N.foregroundColor=this.alarmIndicatorItemsCollection[A].foregroundColor:N.foregroundColor=R[x].foreColor,null!==this.alarmIndicatorItemsCollection[A].backgroundColor?N.backgroundColor=this.alarmIndicatorItemsCollection[A].backgroundColor:N.backgroundColor=R[x].backColor,null!==this.alarmIndicatorItemsCollection[A].foregroundColorInactive?N.foregroundColorInactive=this.alarmIndicatorItemsCollection[A].foregroundColorInactive:N.foregroundColorInactive=R[x].foreColor,null!==this.alarmIndicatorItemsCollection[A].backgroundColorInactive?N.backgroundColorInactive=this.alarmIndicatorItemsCollection[A].backgroundColorInactive:N.backgroundColorInactive=R[x].backColor,this.alarmIndicatorItemsCollection[A].useCustomPriority?N.priority=this.alarmIndicatorItemsCollection[A].priority:N.priority=R[x].alarmPriority);D.push(N)}else if(N.filter((function(A){return A.alarmClassName===R[x].alarmClassName})).length>0)for(let A=0;A<N.length;A++)N[A].alarmClassName===R[x].alarmClassName&&(N[A].count++,1===R[x].alarmState?N[A].countActive++:N[A].countInactive++);else{let A=0,V=0;1===R[x].alarmState?A=1:V=1;const D={alarmClassName:R[x].alarmClassName,count:1,countActive:A,countInactive:V,symbolActive:this.defaultSymbol,symbolInactive:this.defaultSymbol,foregroundColor:R[x].foreColor,backgroundColor:R[x].backColor,foregroundColorInactive:R[x].foreColor,backgroundColorInactive:R[x].backColor,priority:0,iconFont:this.iconFont,symbolType:this.symbolType};for(let A=0;A<this.alarmIndicatorItemsCollection.length;A++)this.alarmIndicatorItemsCollection[A].alarmClassName===R[x].alarmClassName&&(D.iconFont=this.alarmIndicatorItemsCollection[A].iconFont,D.symbolType=this.alarmIndicatorItemsCollection[A].symbolType,null!==this.alarmIndicatorItemsCollection[A].symbolActive?D.symbolActive=this.alarmIndicatorItemsCollection[A].symbolActive:D.symbolActive=this.defaultSymbol,null!==this.alarmIndicatorItemsCollection[A].symbolInactive?D.symbolInactive=this.alarmIndicatorItemsCollection[A].symbolInactive:D.symbolInactive=this.defaultSymbol,null!==this.alarmIndicatorItemsCollection[A].foregroundColor?D.foregroundColor=this.alarmIndicatorItemsCollection[A].foregroundColor:D.foregroundColor=R[x].foreColor,null!==this.alarmIndicatorItemsCollection[A].backgroundColor?D.backgroundColor=this.alarmIndicatorItemsCollection[A].backgroundColor:D.backgroundColor=R[x].backColor,null!==this.alarmIndicatorItemsCollection[A].foregroundColorInactive?D.foregroundColorInactive=this.alarmIndicatorItemsCollection[A].foregroundColorInactive:D.foregroundColorInactive=R[x].foreColor,null!==this.alarmIndicatorItemsCollection[A].backgroundColorInactive?D.backgroundColorInactive=this.alarmIndicatorItemsCollection[A].backgroundColorInactive:D.backgroundColorInactive=R[x].backColor,this.alarmIndicatorItemsCollection[A].useCustomPriority?D.priority=this.alarmIndicatorItemsCollection[A].priority:D.priority=R[x].alarmPriority);N.push(D)}void 0!==D&&D.length>0?U=D.reduce((function(x,A){return x.priority>A.priority?x:A})):void 0!==N&&N.length>0&&(U=N.reduce((function(x,A){return x.priority>A.priority?x:A})))}else{U={alarmClassName:"",count:0,countActive:0,countInactive:0,symbolActive:this.defaultSymbol,symbolInactive:this.defaultSymbol,foregroundColor:this.defaultForegroundColor,backgroundColor:this.defaultBackgroundColor,foregroundColorInactive:this.defaultForegroundColor,backgroundColorInactive:this.defaultBackgroundColor,priority:0,iconFont:this.iconFont,symbolType:this.symbolType}}this.isInDesignMode?(this.element.style.setProperty("--backgroundcolor",this.getThemeColor(U.backgroundColor)),this._counterElement.innerHTML="3"):0===U.countActive&&0!==U.countInactive?(this.element.style.setProperty("--backgroundcolor",this.getThemeColor(U.backgroundColorInactive)),this._counterElement.innerHTML=U.countInactive.toString()):(this.element.style.setProperty("--backgroundcolor",this.getThemeColor(U.backgroundColor)),this._counterElement.innerHTML=U.countActive.toString()),this.showBackground||this.element.style.setProperty("--backgroundcolor",this.getThemeColor("@Transparent")),this.element.style.setProperty("--counterbackgroundcolor",this.getThemeColor(this.badgeBackgroundColor)),this.element.style.setProperty("--counterforegroundcolor",this.getThemeColor(this.badgeForegroundColor)),this.element.style.setProperty("--controlwidth",this.width),this.element.style.setProperty("--controlheight",this.height),""===this.element.style.width&&""===this.element.style.height&&(this.element.style.width="70px",this.element.style.height="70px");let B="";B=this.autoScaleBadge?Number(this.height.replace("px",""))>Number(this.width.replace("px",""))?(.3*Number(this.width.replace("px",""))).toString()+"px":(.3*Number(this.height.replace("px",""))).toString()+"px":this.badgeSize;const F=(Number(B.replace("px",""))-.1*Number(B.replace("px",""))).toString()+"px";this.element.style.setProperty("--lineheight",F),this.showBadge||(B="0px"),this.element.style.setProperty("--countersize",B),this.isInDesignMode||0===U.countActive&&0===U.countInactive&&this.element.style.setProperty("--countersize","0px");let W;switch(this._counterElement.innerHTML.length){case 1:W=20;break;case 2:W=25;break;case 3:W=35;break;case 4:W=40;break;default:W=20}if(this.autoScaleBadgeTextSize){const x=Number(B.replace("px",""))/W+"em";this.element.style.setProperty("--counterTextSize",x)}else this.element.style.setProperty("--counterTextSize",this.badgeTextSize);if(this.circularBackground?this.element.style.setProperty("--backgroundcircle","circle()"):this.element.style.setProperty("--backgroundcircle","none"),Number(this.height.replace("px",""))>Number(this.width.replace("px",""))){const x=(Number(this.height.replace("px",""))-Number(this.width.replace("px","")))/2;this.element.style.setProperty("--counteroffsettop",x+"px")}if(Number(this.height.replace("px",""))<Number(this.width.replace("px",""))){const x=(Number(this.width.replace("px",""))-Number(this.height.replace("px","")))/2;this.element.style.setProperty("--counteroffsetright",x+"px")}Number(this.height.replace("px",""))===Number(this.width.replace("px",""))&&(this.element.style.setProperty("--counteroffsettop","0px"),this.element.style.setProperty("--counteroffsetright","0px"));const H=this.element.getElementsByTagName("i");for(let A=H.length-1;A>=0;A--)null===(x=H[A].parentNode)||void 0===x||x.removeChild(H[A]);const z=this.element.getElementsByTagName("img");for(let x=z.length-1;x>=0;x--)null===(A=z[x].parentNode)||void 0===A||A.removeChild(z[x]);const G=document.createElement("div");let j="";j=this.autoScale?Number(this.height.replace("px",""))>Number(this.width.replace("px",""))?(.6*Number(this.width.replace("px",""))).toString()+"px":(.6*Number(this.height.replace("px",""))).toString()+"px":this.symbolSize,0===U.count&&(this.showDefaultSymbol||(j="0px"));let q="",Q="";return this.isInDesignMode?(q=U.symbolActive,Q=U.foregroundColor):0===U.countActive&&0!==U.countInactive?(q=U.symbolInactive,Q=U.foregroundColorInactive):(q=U.symbolActive,Q=U.foregroundColor),"Icon"===this.symbolType?G.innerHTML='<i id="vw-alarmindicator__item" class="'+U.iconFont+'" style=" font-size: '+j+"; color:"+this.getThemeColor(Q)+';">'+q+"</i>":G.innerHTML='<img id="vw-alarmindicator__img" src="'+q+'" style=" width: '+j+"; height: "+j+"; color:"+this.getThemeColor(Q)+';"/>',this._newElement=G.firstElementChild,this._containerElement.appendChild(this._newElement),null}InitAlarm(x){this.updateAlarmIndicator()}NewAlarm(x){this.updateAlarmIndicator()}ChangeAlarm(x){this.updateAlarmIndicator()}ClearAlarm(x){this.updateAlarmIndicator()}attach(){if(super.attach(),!this.isInDesignMode){const A=[];for(let x=0;x<this.alarmIndicatorItemsCollection.length;++x)A.push(this.alarmIndicatorItemsCollection[x].alarmClassName);const V=this.myAlarmService.CreateAlarmFilter();V.DesiredClasses=A;const R=x.Utilities.csvToArray(this.desiredGroups);V.DesiredGroups=R,this.myCurrentAlarms=this.myAlarmService.GetCurrentAlarms(V),this.myCurrentAlarms.InitAlarm.add(this.initHandler),this.myCurrentAlarms.NewAlarm.add(this.newHandler),this.myCurrentAlarms.ChangeAlarm.add(this.changeHandler),this.myCurrentAlarms.ClearAlarm.add(this.clearHandler),this.updateAlarmIndicator()}return null}detach(){return super.detach(),this.isInDesignMode||(this.myCurrentAlarms.InitAlarm.remove(this.initHandler),this.myCurrentAlarms.NewAlarm.remove(this.newHandler),this.myCurrentAlarms.ChangeAlarm.remove(this.changeHandler),this.myCurrentAlarms.ClearAlarm.remove(this.clearHandler),this.myCurrentAlarms.ReleaseCurrentAlarms()),null}registerChild(x,A,V,R){return A!==this.registerTargetId||(V&&V.winControl&&this.alarmIndicatorItemsCollection.push(V.winControl),!1)}}A.AlarmIndicator=AlarmIndicator}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){x.UI||(x.UI={})}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class AlarmIndicatorItem extends x.UI.ControlBase{constructor(x,A){super(x,A),this.properties={designerType:{propertyType:"base",type:"string",defaultValue:"Control"},registerSourceId:{propertyType:"base",type:"string",defaultValue:"AlarmIndicatorItem"},className:{propertyType:"member",type:"string"},symbolActive:{propertyType:"member",type:"string"},symbolInactive:{propertyType:"member",type:"string"},foregroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"]},backgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"]},foregroundColorInactive:{propertyType:"member",type:"string",resourceValue:["getTheme"]},backgroundColorInactive:{propertyType:"member",type:"string",resourceValue:["getTheme"]},iconFont:{propertyType:"member",type:"string",defaultValue:"material-icons"},symbolType:{propertyType:"member",type:"string",defaultValue:"Icon"},priority:{propertyType:"member",type:"number"},useCustomPriority:{propertyType:"member",type:"boolean",defaultValue:!1},alarmClassName:{propertyType:"member",type:"string"}},this.initialize(AlarmIndicatorItem)}dispose(){return super.dispose()}}A.AlarmIndicatorItem=AlarmIndicatorItem}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){x.UI||(x.UI={})}(VisiWin||(VisiWin={})),function(x){!function(A){let V;!function(x){x.allowForms="allow-forms",x.allowModals="allow-modals",x.allowOrientationLock="allow-orientation-lock",x.allowPointerLock="allow-pointer-lock",x.allowPopups="allow-popups",x.allowPopupsToEscapeSandbox="allow-popups-to-escape-sandbox",x.allowPresentation="allow-presentation",x.allowSameOrigin="allow-same-origin",x.allowScripts="allow-scripts",x.allowTopNavigation="allow-top-navigation",x.allowTopNavigationByUserActivation="allow-top-navigation-by-user-activation"}(V=A.sandbox||(A.sandbox={}));class EmbeddedWebsite extends x.UI.ControlBase{constructor(A,V){super(A,V),this.properties={designerType:{propertyType:"base",type:"string",defaultValue:"Control"},src:{propertyType:"member",type:"string",defaultValue:""},srcdoc:{propertyType:"member",type:"string",defaultValue:""},referrerPolicy:{propertyType:"member",type:"string",defaultValue:"strict-origin-when-cross-origin"},useSandbox:{propertyType:"member",type:"booelan",defaultValue:!1},allowForms:{propertyType:"member",type:"boolean",defaultValue:!0},allowModals:{propertyType:"member",type:"boolean",defaultValue:!0},allowOrientationLock:{propertyType:"member",type:"boolean",defaultValue:!0},allowPointerLock:{propertyType:"member",type:"boolean",defaultValue:!0},allowPopups:{propertyType:"member",type:"boolean",defaultValue:!0},allowPopupsToEscapeSandbox:{propertyType:"member",type:"boolean",defaultValue:!0},allowPresentation:{propertyType:"member",type:"boolean",defaultValue:!0},allowSameOrigin:{propertyType:"member",type:"boolean",defaultValue:!0},allowScripts:{propertyType:"member",type:"boolean",defaultValue:!0},allowTopNavigation:{propertyType:"member",type:"boolean",defaultValue:!0},allowTopNavigationByUserActivation:{propertyType:"member",type:"boolean",defaultValue:!0},allow:{propertyType:"member",type:"string",defaultValue:""},allowfullscreen:{propertyType:"member",type:"boolean",defaultValue:!1},allowpaymentrequest:{propertyType:"member",type:"boolean",defaultValue:!1},loading:{propertyType:"member",type:"string",defaultValue:"eager"},name:{propertyType:"member",type:"string",defaultValue:""},variableName:{propertyType:"member",type:"string"},runtimeOnly:{propertyType:"member",type:"boolean",defaultValue:!0}},this.myVariableService=x.System.DataAccess.VariableService.getService(),this._changeHandlerVariable=this.mVariableChanged.bind(this),this.initialize(EmbeddedWebsite)}createTemplate(){const x=document.createElement("div");return this.reparentChildren(this.element,x),this.element.innerHTML=`\n              <iframe  data-ref-element="_iFrameElement" class="${this.className}__iFrame">\n              </iframe>\n              `,this.reparentChildren(x,this.element),this.initializeChilds()}_updateLayout(x){"width"!==x.changeName&&"updateLayout"!==x.changeName||(this._iFrameElement.width=this.width),"height"!==x.changeName&&"updateLayout"!==x.changeName||(this._iFrameElement.height=this.height),"referrerPolicy"!==x.changeName&&"allowfullscreen"!==x.changeName&&"allowpaymentrequest"!==x.changeName&&"loading"!==x.changeName&&"allow"!==x.changeName&&"name"!==x.changeName&&"updateLayout"!==x.changeName||this.updateIFrame(),"useSandbox"!==x.changeName&&"allowForms"!==x.changeName&&"allowModals"!==x.changeName&&"allowOrientationLock"!==x.changeName&&"allowPointerLock"!==x.changeName&&"allowPopups"!==x.changeName&&"allowPopupsToEscapeSandbox"!==x.changeName&&"allowPresentation"!==x.changeName&&"allowSameOrigin"!==x.changeName&&"allowScripts"!==x.changeName&&"allowTopNavigation"!==x.changeName&&"allowTopNavigationByUserActivation"!==x.changeName&&"updateLayout"!==x.changeName||this.setIFrameSandbox(),"src"!==x.changeName&&"updateLayout"!==x.changeName&&"runtimeOnly"!==x.changeName||this.setIFrameSource(),"srcdoc"!==x.changeName&&"updateLayout"!==x.changeName&&"runtimeOnly"!==x.changeName||this.setIFrameSrcDoc()}isValidSource(x){return!!x}updateIFrame(){this._iFrameElement.setAttribute("referrerpolicy",this.referrerPolicy),this._iFrameElement.setAttribute("allowfullscreen",this.allowfullscreen?"true":"false"),this._iFrameElement.setAttribute("allowpaymentrequest",this.allowpaymentrequest?"true":"false"),this._iFrameElement.setAttribute("loading",this.loading),""!==this.name?this._iFrameElement.setAttribute("name",this.name):this._iFrameElement.removeAttribute("name"),""!==this.allow?this._iFrameElement.setAttribute("allow",this.allow):this._iFrameElement.removeAttribute("allow")}setIFrameSource(){this.isInDesignMode&&this.runtimeOnly?this._iFrameElement.src="":this._iFrameElement.src=this.src}setIFrameSrcDoc(){""!==this.srcdoc&&(this.isInDesignMode&&this.runtimeOnly?this._iFrameElement.srcdoc="":(this.htmlDecode(this.srcdoc),this._iFrameElement.srcdoc=this.htmlDecode(this.srcdoc)))}setIFrameSandbox(){let x="";const A=[];this.useSandbox?(this.allowForms&&A.push(V.allowForms),this.allowModals&&A.push(V.allowModals),this.allowOrientationLock&&A.push(V.allowOrientationLock),this.allowPointerLock&&A.push(V.allowPointerLock),this.allowPopups&&A.push(V.allowPopups),this.allowPopupsToEscapeSandbox&&A.push(V.allowPopupsToEscapeSandbox),this.allowPresentation&&A.push(V.allowPresentation),this.allowSameOrigin&&A.push(V.allowSameOrigin),this.allowScripts&&A.push(V.allowScripts),this.allowTopNavigation&&A.push(V.allowTopNavigation),this.allowTopNavigationByUserActivation&&A.push(V.allowTopNavigationByUserActivation),x=A.join(" "),0===A.length?this._iFrameElement.setAttribute("sandbox",""):this._iFrameElement.setAttribute("sandbox",x)):this._iFrameElement.removeAttribute("sandbox")}htmlDecode(x){return(new DOMParser).parseFromString(x,"text/html").documentElement.textContent}registerVariable(x){return __awaiter(this,void 0,void 0,(function*(){this.myVariable=this.myVariableService.GetVariable(x),this.myVariable.Change.add(this._changeHandlerVariable);yield this.myVariable.AttachAsync()}))}removeVariable(x){return __awaiter(this,void 0,void 0,(function*(){this.myVariable.Change.remove(this._changeHandlerVariable),this.myVariable.Detach()}))}mVariableChanged(x){null!==x&&null!==x.Value&&""!==x.Value&&(this._iFrameElement.src=x.Value)}attach(){return this._iFrameElement.style.borderStyle="none",null!==this.variableName&&this.registerVariable(this.variableName),null}detach(){return null!==this.variableName&&this.removeVariable(this.variableName),null}removeHandler(){null!==this.variableName&&this.removeVariable(this.variableName)}dispose(){return super.dispose()}}A.EmbeddedWebsite=EmbeddedWebsite}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class TouchKeyboard extends x.UI.ControlBase{constructor(V,R){super(V,R),this.properties={designerType:{propertyType:"base",type:"string",defaultValue:"Control"},registerTargetId:{propertyType:"base",defaultValue:"KeyStyleItem"},touchKeyboardType:{propertyType:"member",type:"string",defaultValue:A.Enums.TouchKeyboardType.Numeric},backgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BackgroundColor"},borderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BackgroundColor"},keyBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BackgroundColor"},keyForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},keyBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"},keyActiveBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@PressedBackgroundColor"},keyActiveForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},keyActiveBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BackgroundColor"},keyBorderRadius:{propertyType:"member",type:"string",defaultValue:"0px 0px 0px 0px"},keyBorderStyle:{propertyType:"member",type:"string",defaultValue:"solid"},keyBorderWidth:{propertyType:"member",type:"string",defaultValue:"0px 0px 1px 0px"},fontClass:{propertyType:"member",defaultValue:"Headline4"},fontSize:{propertyType:"member",defaultValue:"32px"},fontWeight:{propertyType:"member",defaultValue:"Normal"},keyStyleItems:{propertyType:"member"}},this.cssStyles={css:"\n            "},this._boundInputHandler=this._inputHandler.bind(this),this._boundFocusHandler=this._focusHandler.bind(this),this._boundKeyDownHandler=this._keyDownHandler.bind(this),this._boundDocumentClickHandler=this._documentClickHandler.bind(this),this.limitmaxIdentifier="limitmax",this.limitminIdentifier="limitmin",this.numericVarInIdentifier="numericvarin",this.textVarInIdentifier="textvarin",this.dialogViewIdentifier="vw-dialogview",this.keyboardCaretPosition=null,this.keyStyleItemsCollection=[],this.initialize(x.UI.TouchKeyboard)}createTemplate(){const x=document.createElement("div");return this.reparentChildren(this.element,x),this.element.innerHTML='\n                <div data-ref-element="_touchKeyboard" class="simple-keyboard"></div>\n            ',this.reparentChildren(x,this.element),this.initializeChilds()}registerChild(x,A,V,R){return A!==this.registerTargetId||(V&&V.winControl&&(V.style.display="none",this.keyStyleItemsCollection.push(V.winControl)),!1)}_updateLayout(A){var V;"initialized"===A.changeName&&(this.keyboardresource=x.Resources.touchkeyboard,this.dataSource=x.AppServices.DataService.getBinding(this.getDataContext()),x.isNullOrUndefined(this.dataSource)&&(this.dataSource=x.AppServices.VariableService.touchkeyboardInfo),this.initKeyboard()),"keyboardType"===A.changeName&&this.initKeyboard(),"firstUpdate"!==A.changeName&&"keyBorderRadius"!==A.changeName&&"keyBorderStyle"!==A.changeName&&"keyBorderWidth"!==A.changeName&&"fontSize"!==A.changeName&&"fontWeight"!==A.changeName||(this.element.style.setProperty("--tkButtonBorderRadius",this.keyBorderRadius),this.element.style.setProperty("--tkButtonBorderStyle",this.keyBorderStyle),this.element.style.setProperty("--tkButtonBorderWidth",this.keyBorderWidth),this.element.style.setProperty("--tkButtonFontSize",this.fontSize),this.element.style.setProperty("--tkButtonFontWeight",this.getFontWeight(this.fontWeight))),"firstUpdate"!==A.changeName&&"fontClass"!==A.changeName||this.addClassToKeys(this.fontClass.toLowerCase(),null===(V=A.oldValue)||void 0===V?void 0:V.toLowerCase())}_updateColors(x){"firstUpdate"!==x.changeName&&"theme"!==x.changeName&&"backgroundColor"!==x.changeName&&"borderColor"!==x.changeName&&"keyBackgroundColor"!==x.changeName&&"keyForegroundColor"!==x.changeName&&"keyBorderColor"!==x.changeName&&"keyActiveBackgroundColor"!==x.changeName&&"keyActiveForegroundColor"!==x.changeName&&"keyActiveBorderColor"!==x.changeName||(this.element.style.setProperty("--tkBackgroundColor",this.getColor("backgroundColor")),this.element.style.setProperty("--tkButtonBackgroundColor",this.getColor("keyBackgroundColor")),this.element.style.setProperty("--tkButtonForegroundColor",this.getColor("keyForegroundColor")),this.element.style.setProperty("--tkButtonBorderColor",this.getColor("keyBorderColor")),this.element.style.setProperty("--tkButtonActiveBackgroundColor",this.getColor("keyActiveBackgroundColor")),this.element.style.setProperty("--tkButtonActiveForegroundColor",this.getColor("keyActiveForegroundColor")),this.element.style.setProperty("--tkButtonActiveBorderColor",this.getColor("keyActiveBorderColor")),this.setColor("borderColor","borderColor"),this.setColor("backgroundColor","backgroundColor"))}_documentClickHandler(x){x.target!==this._inputElement&&this._inputElement.focus()}_inputHandler(x){const A=x.currentTarget.value;this.inputPyhsicalChange(A)}_focusHandler(A){x.Utilities.isMobile()&&(this.hideSoftKeyboard(this._inputElement),this._inputElement.setAttribute("readonly","readonly"))}getDataContext(){if(x.isNullOrUndefined(this.dataContext)){return document.getElementsByClassName(this.dialogViewIdentifier)[0].winControl.dataContext}return this.dataContext}getFontWeight(x){switch(x){case"FW100":return"100";case"FW200":return"200";case"FW300":return"300";case"FW400":return"400";case"FW500":return"500";case"FW600":return"600";case"FW700":return"700";case"FW800":return"800";case"FW900":return"900";case"Bold":return"bold";case"Bolder":return"bolder";case"Lighter":return"lighter";case"Initial":return"initial";case"Inherit":return"inherit";default:return"normal"}}addClassToKeys(A,V){let R=this.findCssRule("."+A);const D=this.element.querySelectorAll("[data-skbtnuid]");for(let R=0;R<D.length;R++)null!=V&&x.Utilities.removeClass(D[R],V),x.Utilities.addClass(D[R],A);null!=this.inlineOptions.fonSize?this.element.style.setProperty("--tkButtonFontSize",this.fontSize):null!=R&&null!=R.style&&null!=R.style.fontSize&&this.element.style.setProperty("--tkButtonFontSize",R.style.fontSize),null!=this.inlineOptions.fontWeight?this.element.style.setProperty("--tkButtonFontWeight",this.getFontWeight(this.fontWeight)):null!=R&&null!=R.style&&null!=R.style.fontWeight&&this.element.style.setProperty("--tkButtonFontWeight",R.style.fontWeight)}findCssRule(x){for(const A of Array.from(document.styleSheets))if(A instanceof CSSStyleSheet)for(const V of Array.from(A.cssRules))if(V instanceof CSSStyleRule&&V.selectorText===x)return V;return null}initKeyboard(){let V,R,D;switch(this.touchKeyboardType){case A.Enums.TouchKeyboardType.Numeric:V={default:["7 8 9 {bksp}","4 5 6","1 2 3","{posneg} 0 {dec}"]},R={"{dec}":".","{posneg}":"","{bksp}":""},this.keyboardresource.numeric&&this.keyboardresource.numeric.display[0]&&(V=this.keyboardresource.numeric,R=this.keyboardresource.numeric.display[0],this.keyboardresource.numeric.layoutCandidates&&(D=this.keyboardresource.numeric.layoutCandidates[0]));break;case A.Enums.TouchKeyboardType.Alphanumeric:const N=x.AppServices.LanguageService.currentLanguage;V={default:["q w e r t y u i o p {bksp}","a s d f g h j k l","{shift} z x c v b n m {shift}","{123} , {space} . {#+=}"],shift:["Q W E R T Y U I O P {bksp}","A S D F G H J K L","{shift} Z X C V B N M {shift}","{123} < {space} > {#+=}"],123:["1 2 3 4 5 6 7 8 9 0 {bksp}","- / : ; ( ) $ & @","{shift} . , ? ! ' \"  {shift}","{123}  {space}  {#+=}"],"#+=":["[ ] { } # % ^ * + = {bksp}","_ \\ | ~ < >   ","{shift}  . , ? ! '  {shift}","{123}  {space}  {#+=}"]},R={"{shift}":"","{space}":" ","{bksp}":"","{123}":"123","{#+=}":"#+="},x.isNullOrUndefined(this.keyboardresource.languages)||this.keyboardresource.languages[N]&&this.keyboardresource.languages[N].display[0]&&(V=this.keyboardresource.languages[N],R=this.keyboardresource.languages[N].display[0],this.keyboardresource.languages[N].layoutCandidates&&(D=this.keyboardresource.languages[N].layoutCandidates[0]))}let N=document.defaultView.SimpleKeyboard.default;const U={onChange:x=>this.onChange(x),onKeyPress:x=>this.onKeyPress(x),onKeyReleased:x=>this.onKeyReleased(x),theme:"vw-tk-theme-default",physicalKeyboardHighlight:!1,physicalKeyboardHighlightPress:!1,syncInstanceInputs:!0,mergeDisplay:!0,debug:!1,preventMouseDownDefault:!0,disableButtonHold:!1};x.isNullOrUndefined(this.keyboard)||this.keyboard.destroy(),this.keyboard=new N(this._touchKeyboard,Object.assign(Object.assign({},U),{layout:V,display:R,layoutCandidates:D})),this.initializeButtonStylesJson(),this.addClassToKeys(this.fontClass.toLowerCase(),null),this.adoptButtonStyleItems(),this.touchKeyboardType!==A.Enums.TouchKeyboardType.Numeric||x.isNullOrUndefined(this.dataSource.varDecimalPlaces)||this.toggleDecPoint(),x.isNullOrUndefined(this.dataSource.varValue)||(this.keyboard.setInput(this.dataSource.varValue.toString()),this._inputElement.value=this.dataSource.varValue);let B=0;this.dataSource.varValue&&(B=this.dataSource.varValue.length),setTimeout(()=>{this._inputElement&&this._inputElement.setSelectionRange&&(this._inputElement.focus(),this._inputElement.setSelectionRange(0,B))},100),this.initMinMax()}adoptButtonStyleItems(){for(let x=0;x<this.keyStyleItemsCollection.length;x++){let A=this.element.querySelectorAll('[data-skbtn="'+this.keyStyleItemsCollection[x].keyIdentifier+'"]');for(let V=0;V<A.length;V++){let R=A[V];this.keyStyleItemsCollection[x].showSymbol&&(R.classList.add(this.keyStyleItemsCollection[x].iconFont),R.firstChild.innerHTML=this.keyStyleItemsCollection[x].symbol),R.classList.add(this.keyStyleItemsCollection[x].fontClass.toLowerCase());let D,N=this.keyStyleItemsCollection[x].keyIdentifier;D=N.includes("{")?N.replace(/[{}]/g,""):N,D=D.charCodeAt(0).toString();let U={css:`\n                    .tk-${D} {\n                        width: ${this.keyStyleItemsCollection[x].keyWidth}!important;\n                        height: ${this.keyStyleItemsCollection[x].keyHeight}!important;\n                        margin: ${this.keyStyleItemsCollection[x].keyMargin}!important;\n                        background-color: ${this.getThemeColor(this.keyStyleItemsCollection[x].keyBackgroundColor)}!important;\n                        color: ${this.getThemeColor(this.keyStyleItemsCollection[x].keyForegroundColor)}!important;\n                        border-color: ${this.getThemeColor(this.keyStyleItemsCollection[x].keyBorderColor)}!important;\n                        border-radius: ${this.keyStyleItemsCollection[x].keyBorderRadius}!important;\n                        border-style: ${this.keyStyleItemsCollection[x].keyBorderStyle}!important;\n                        border-width: ${this.keyStyleItemsCollection[x].keyBorderWidth}!important;\n                        font-size: ${this.keyStyleItemsCollection[x].fontSize}!important;\n                        font-weight: ${this.keyStyleItemsCollection[x].fontWeight}!important;\n                    }\n                    .tk-${D}:active {\n                        background-color: ${this.getThemeColor(this.keyStyleItemsCollection[x].keyActiveBackgroundColor)}!important;\n                        color: ${this.getThemeColor(this.keyStyleItemsCollection[x].keyActiveForegroundColor)}!important;\n                        border-color: ${this.getThemeColor(this.keyStyleItemsCollection[x].keyActiveBorderColor)}!important;\n                    }\n                    `};const B=[".tk-"+D,".tk-"+D+":active"];this.removeCSSRulesBySelectors(B),this.createStyles(R,U),R.classList.add("tk-"+D),R.classList.add("tk-"+D+":active")}}}removeCSSRulesBySelectors(x){let A=document.styleSheets;for(let V=0;V<A.length;V++){let A=document.styleSheets[V].cssRules;for(let R=A.length-1;R>=0;R--){const D=A[R].selectorText;x.includes(D)&&document.styleSheets[V].deleteRule(R)}}}initMinMax(){const x=document.getElementById(this.limitmaxIdentifier),A=document.getElementById(this.limitminIdentifier);""===this.dataSource.varMinValue&&""===this.dataSource.varMaxValue&&(x.winControl.value="",A.winControl.value="")}toggleDecPoint(){let A;if(A=this.element.querySelector('[data-skbtn*="{dec}"]'),0===this.dataSource.varDecimalPlaces){let V;if(!x.isNullOrUndefined(this.keyboardresource.numeric)){V=this.keyboardresource.numeric.styling.disabled[0]}for(let x in V)if("dec"===x){let A=V[x][0]["background-color"];this.element.style.setProperty("--tkDisabledButtonBackgroundColor",A);let R=V[x][0].color;this.element.style.setProperty("--tkButtonColor",R)}A.classList.add("key-disabled")}else A.classList.remove("key-disabled")}onChange(V){if(null==this.keyboard.caretPosition&&null!=this.keyboardCaretPosition&&(this.keyboard.caretPosition=this.keyboardCaretPosition+1),x.Utilities.isMobile()&&this.hideSoftKeyboard(this._inputElement),x.isNullOrUndefined(this.dataSource.varMinValue)||x.isNullOrUndefined(this.dataSource.varMaxValue)||this.checkLimits(V),this.touchKeyboardType===A.Enums.TouchKeyboardType.Alphanumeric||this.checkDecimalPlaces(V)){if(x.isNullOrEmpty(this.keyboard.caretPosition)){const x=this._inputElement.selectionStart;0===x?this.keyboard.setCaretPosition(1):this.keyboard.setCaretPosition(x)}this.dataSource.varValue=V,this._inputElement.value=V,this.keyboardCaretPosition=this.keyboard.caretPosition;const A=this.keyboard.caretPosition;null!==A&&this.setInputCaretPosition(this._inputElement,A),this._inputElement.removeAttribute("readonly")}else{let x=V.slice(0,-1);this.keyboard.replaceInput({default:x});const A=this._inputElement.selectionStart;this.keyboard.setCaretPosition(A)}}inputPyhsicalChange(A){x.isNullOrUndefined(this.dataSource.varMinValue)||x.isNullOrUndefined(this.dataSource.varMaxValue)||this.checkLimits(A),this.dataSource.varValue=A,this.keyboard.replaceInput({default:A});const V=this._inputElement.selectionStart;this.keyboard.setCaretPosition(V)}checkDecimalPlaces(x){if(0!=x.indexOf(".")){let A=x.split(".");return!(A.length>1)||!(A[1].length>this.dataSource.varDecimalPlaces)}}checkLimits(V){const R=this.dataSource.varMinValue,D=this.dataSource.varMaxValue,N=document.getElementById(this.limitmaxIdentifier),U=document.getElementById(this.limitminIdentifier);this.touchKeyboardType===A.Enums.TouchKeyboardType.Numeric?x.isNullOrUndefined(N)||x.isNullOrUndefined(U)||x.isNullOrUndefined(this._inputElement)||x.isNullOrUndefined(this._inputElement.winControl)||(this._inputElement.winControl.limitError=!1,""!==R&&Number(V)<R&&(this._inputElement.winControl.limitError=!0,this._inputElement.winControl.dispatchEvent("errorChanged",{error:"LimitMinError"})),""!==D&&Number(V)>D&&(this._inputElement.winControl.limitError=!0,this._inputElement.winControl.dispatchEvent("errorChanged",{error:"LimitMaxError"})),this._inputElement.winControl.limitError||(this._inputElement.winControl.dispatchEvent("errorChanged",{error:"NoError"}),this._inputElement.winControl.errorText="")):this.touchKeyboardType===A.Enums.TouchKeyboardType.Alphanumeric&&(x.isNullOrUndefined(this._inputElement)||x.isNullOrUndefined(this._inputElement.winControl)||(V.length<R?(this._inputElement.winControl.limitError=!0,this._inputElement.winControl.dispatchEvent("errorChanged",{error:"LimitMinError"})):V.length>D?(this._inputElement.winControl.limitError=!0,this._inputElement.winControl.dispatchEvent("errorChanged",{error:"LimitMaxError"})):(this._inputElement.winControl.limitError=!1,this._inputElement.winControl.dispatchEvent("errorChanged",{error:"NoError"}),this._inputElement.winControl.errorText="")))}setInputCaretPosition(x,A){x.setSelectionRange&&(x.focus(),x.setSelectionRange(A,A))}hideSoftKeyboard(x){x.setAttribute("readonly","readonly"),x.setAttribute("disabled","true"),setTimeout((function(){x.blur(),x.removeAttribute("readonly"),x.removeAttribute("disabled")}),100)}onKeyPress(A){if(!x.isNullOrUndefined(this.keyboard)){const x=this.keyboard.getInput(),V=this.keyboard.utilities.getDefaultDiplay();delete V["{shift}"],delete V["{shiftleft}"],delete V["{shiftright}"],delete V["{lock}"],delete V["{capslock}"],delete V["{enter}"],delete V["{dec}"],delete V["{posneg}"];switch(/{.*}/.test(A)&&!(A in V)&&this.isLayoutExistingInJson(A.substring(1,A.length-1)),this.handleLayoutSwitch(A.substring(1,A.length-1)),A){case"{enter}":break;case"{dec}":this.setDecimalPoint(x);break;case"{posneg}":this.setPosNeg(x)}}}onKeyReleased(x){let A=x;'"'===x&&(A="\\"+A),"\\"===x&&(A="\\"+A);switch(this.element.querySelector('[data-skbtn*="'+A+'"]').classList.remove("hover"),x){case"{enter}":this.closeAndWrite()}}setDecimalPoint(x){x.includes(".")&&(x=x.replace(".",""));const A=[x.slice(0,this._inputElement.selectionStart),".",x.slice(this._inputElement.selectionStart)].join("");this.keyboard.replaceInput({default:A}),this.keyboard.setCaretPosition(this.keyboard.getInput().length)}setPosNeg(x){x=this.replaceStringAt(x,x.indexOf("-"),""),this.keyboard.replaceInput({default:x})}isLayoutExistingInJson(V){if(!x.isNullOrUndefined(this.keyboardresource))switch(this.touchKeyboardType){case A.Enums.TouchKeyboardType.Numeric:return!x.isNullOrUndefined(this.keyboardresource.numeric)&&V in this.keyboardresource.numeric;case A.Enums.TouchKeyboardType.Alphanumeric:{const A=x.AppServices.LanguageService.currentLanguage;return!x.isNullOrUndefined(this.keyboardresource.languages)&&(!x.isNullOrUndefined(this.keyboardresource.languages[A])&&V in this.keyboardresource.languages[A])}}}handleLayoutSwitch(x){const A=this.keyboard.options.layoutName;if(x in this.keyboard.options.layout){let V;V="shift"===x?"default"===A?x:"default":A!==x?x:"default",this.keyboard.setOptions({layoutName:V}),this.initializeButtonStylesJson(),this.addClassToKeys(this.fontClass.toLowerCase(),null),this.adoptButtonStyleItems()}}replaceStringAt(x,A,V){const R=this._inputElement.selectionStart;return-1!==A?(this.setInputCaretPosition(this._inputElement,R-1),this.keyboard.setCaretPosition(R-1),x.substring(1)):(this.setInputCaretPosition(this._inputElement,R+1),this.keyboard.setCaretPosition(R+1),"-"+x)}initializeButtonStylesJson(){if(this.touchKeyboardType===A.Enums.TouchKeyboardType.Alphanumeric){const A=x.AppServices.LanguageService.currentLanguage;let V=[{rb:[{}],r1b0:[{"margin-left":"5%"}],r3b2:[{width:"536px"}]}];if(!x.isNullOrUndefined(this.keyboardresource.languages)){if(!x.isNullOrUndefined(this.keyboardresource.languages.styling)){V=this.keyboardresource.languages.styling.default}const R=this.keyboard.options.layoutName;if(!x.isNullOrUndefined(this.keyboardresource.languages[A])){const D=this.keyboardresource.languages[A].styling;x.isNullOrUndefined(D)||x.isNullOrUndefined(this.keyboardresource.languages[A].styling[R])||(V=this.keyboardresource.languages[A].styling[R])}}this.adoptStyleFromJson(V[0])}else if(this.touchKeyboardType===A.Enums.TouchKeyboardType.Numeric){let A=[{rb:[{}],r0b3:[{height:"226px","align-items":"flex-start"}]}];if(!x.isNullOrUndefined(this.keyboardresource.numeric)){A=this.keyboardresource.numeric.styling.default}this.adoptStyleFromJson(A[0])}}adoptStyleFromJson(A){const V=this.element.getElementsByClassName("hg-row");if(this.touchKeyboardType===x.UI.Enums.TouchKeyboardType.Alphanumeric){let x=0;Array.prototype.forEach.call(V,(function(A){const V=A;V.style.setProperty("display","flex"),1===x&&V.style.setProperty("margin-right","15%"),x++}));const A=this.element.getElementsByClassName("hg-row")[2].children,R=A[A.length-1];R.style.setProperty("margin-left","20%"),R.style.setProperty("width","75px")}for(const V in A){const R=A[V],D=V;if("rb"===D){const x=this.element.querySelectorAll("[data-skbtnuid]");for(let A=0;A<x.length;A++){const V=x[A],D=R[0];for(const x in D)x.includes("color")?("color"===x&&V.style.setProperty(x,this.getThemeColor(D[x])),"background-color"===x&&this.element.style.setProperty("--tkButtonBackgroundColor",this.getThemeColor(D[x]))):V.style.setProperty(x,D[x])}}if(/r\d+$/.test(D.toString())){const A=Number(D.replace("r","")),V=this.element.getElementsByClassName("hg-row"),N=R[0],U=V[A];if(!x.isNullOrUndefined(U))for(const x in N)x.includes("color")?U.style.setProperty(x,this.getThemeColor(N[x])):U.style.setProperty(x,N[x])}else for(let A=0;A<R.length;A++){const V=R[A],N=this.element.querySelector('[data-skbtnuid*="'+D+'"]');if(!x.isNullOrUndefined(N))for(const x in V)x.includes("color")?N.style.setProperty(x,this.getThemeColor(V[x])):N.style.setProperty(x,V[x])}}}onLanguageChanged(x){}_keyDownHandler(x){"Enter"!==x.key&&13!==x.keyCode||this.closeAndWrite()}closeAndWrite(){let x=this.getDialogControl(this),A={resultAction:{reason:this.dataSource.varValue}};x&&x.hide(A)}getDialogControl(x){let A=x.parentElement;for(;A;){if(A&&A.winControl&&"WinJS.UI.Popup"===A.winControl.controlType)return A.winControl.contentControlElement.winControl;A=A.parentElement?A.parentElement:null}}createHandler(){this._inputElement=document.getElementsByTagName("input")[0],this._inputElement&&(this._inputElement.addEventListener("input",this._boundInputHandler),this._inputElement.addEventListener("focus",this._boundFocusHandler),this._inputElement.addEventListener("keydown",this._boundKeyDownHandler),document.addEventListener("click",this._boundDocumentClickHandler))}removeHandler(){this._inputElement&&(this._inputElement.removeEventListener("input",this._boundInputHandler,!1),this._inputElement.removeEventListener("focus",this._boundFocusHandler,!1),this._inputElement.removeEventListener("keydown",this._boundKeyDownHandler,!1),document.removeEventListener("click",this._boundDocumentClickHandler,!1))}attach(){return null}detach(){return this.keyboard.destroy(),null}}A.TouchKeyboard=TouchKeyboard}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class KeyStyleItem extends x.UI.ControlBase{constructor(x,A){super(x,A),this.properties={designerType:{propertyType:"base",type:"string",defaultValue:"Control"},registerSourceId:{propertyType:"base",type:"string",defaultValue:"KeyStyleItem"},keyIdentifier:{propertyType:"member",type:"string"},keyWidth:{propertyType:"member",type:"string",defaultValue:"75px"},keyHeight:{propertyType:"member",type:"string",defaultValue:"55px"},keyMargin:{propertyType:"member",type:"string",defaultValue:"0px 2px 0px 0px"},keyBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BackgroundColor"},keyForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},keyBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"},keyActiveBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@PressedBackgroundColor"},keyActiveForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},keyActiveBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BackgroundColor"},keyBorderRadius:{propertyType:"member",type:"string",defaultValue:"0px 0px 0px 0px"},keyBorderStyle:{propertyType:"member",type:"string",defaultValue:"solid"},keyBorderWidth:{propertyType:"member",type:"string",defaultValue:"0px 0px 1px 0px"},fontClass:{propertyType:"member",defaultValue:"Headline4"},fontSize:{propertyType:"member",defaultValue:"32px"},fontWeight:{propertyType:"member",defaultValue:"Normal"},showSymbol:{propertyType:"member",type:"boolean",defaultValue:!1},iconFont:{propertyType:"member",type:"string",defaultValue:"material-icons"},symbol:{propertyType:"member",type:"string"},symbolType:{propertyType:"member",type:"string",defaultValue:"Icon"}},this.initialize(KeyStyleItem,A)}dispose(){return super.dispose()}}A.KeyStyleItem=KeyStyleItem}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class RowStyleItem extends x.UI.ControlBase{constructor(x,A){super(x,A),this.properties={designerType:{propertyType:"base",type:"string",defaultValue:"Control"},registerSourceId:{propertyType:"base",type:"string",defaultValue:"ButtonStyleItem"},rowIdentifier:{propertyType:"member",type:"string"},rowWidth:{propertyType:"member",type:"string",defaultValue:"75px"},rowHeight:{propertyType:"member",type:"string",defaultValue:"55px"},rowMargin:{propertyType:"member",type:"string",defaultValue:"0px"},additionalcss:{propertyType:"member",type:"string"},backgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BackgroundColor"},foregroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"}},this.initialize(RowStyleItem,A)}dispose(){return super.dispose()}}A.RowStyleItem=RowStyleItem}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class DataTemplateSelector extends x.UI.VariableBase{constructor(x,A){super(x,A),this.properties={designerType:{propertyType:"base",defaultValue:"Control"},dataTemplate:{},dataTemplateEditMode:{defaultValue:"DataTemplateString"},dataTemplateString:{defaultValue:"DataTemplateString"},dataTemplateNumber:{defaultValue:"DataTemplateNumber"},dataTemplateBoolean:{defaultValue:"DataTemplateBoolean"},dataTemplateDate:{defaultValue:"DataTemplateDate"}},this.cssStyles={css:"\n          \n        "},this.isInitalized=!1,this._boundDataTemplateReady=this.dataTemplateReady.bind(this);this.initialize(DataTemplateSelector,{namespace:"VisiWin.UI"})}createTemplate(){this.element.innerHTML=" "}_updateLayout(x){"firstUpdate"!==x.changeName&&"dataTemplateEditMode"!==x.changeName||this.isInDesignMode&&this.loadTemplate(null,null,null)}loadTemplate(A,V,R){if(null!=V&&(this.dataSource=V),null!=R&&(this.index=R),this.isInDesignMode)switch(this.dataTemplateEditMode){case"DataTemplateString":this.dataTemplate=this.dataTemplateString;break;case"DataTemplateNumber":this.dataTemplate=this.dataTemplateNumber;break;case"DataTemplateBoolean":this.dataTemplate=this.dataTemplateBoolean;break;case"DataTemplateDate":this.dataTemplate=this.dataTemplateDate;break;default:this.dataTemplate=this.dataTemplateString}else this.getDataTemplate(this.value);this.addEventListener("templateReady",this._boundDataTemplateReady),x.AppServices.DataTemplateService.getDataTemplate(this,this.dataTemplate,"templateReady")}dataTemplateReady(x){if(this.isInitalized)return;let A=x.detail[this.dataTemplate];try{let x=null,R=null;if(null!=this.dataSource&&null!=this.index)R=this.dataSource,x=this.index;else{let A=this.element.parentElement;if(A)for(;A.parentElement;)if(A=A.parentElement,A.winControl&&null!=A.winControl.index&&(x=A.winControl.index),A.winControl&&A.winControl.dataSource){R=A.winControl.dataSource;break}}let D,N=this.element.parentElement.querySelectorAll("[data-win-bind]");for(var V=0;V<N.length;V++)N[V].winControl.__VWCONTROL__&&"DataTemplateSelector"==N[V].winControl.__VWCONTROL__&&(D=V);if(null!==x&&R&&N[D]&&A.syncRenderer){let V=A.syncRenderer(R.getAt(x),N[D]);V.winControl.readySubTree(V,!0),V.winControl.initializeSubTree(V,!0),V.winControl.attachSubTree(V,!0),this.isInitalized=!0}}catch(x){}}getDataTemplate(A){if(this._jsType){switch(this._jsType){case"string":let V;V=new Date(A),x.isDate(V)?this.dataTemplate=this.dataTemplateDate:this.dataTemplate=this.dataTemplateString;break;case"number":this.dataTemplate=this.dataTemplateNumber;break;case"boolean":this.dataTemplate=this.dataTemplateBoolean;break;case"datetime":this.dataTemplate=this.dataTemplateDate;break;default:this.dataTemplate=this.dataTemplateString}}else switch(typeof A){case"string":let V;V=new Date(A),x.isDate(V)?this.dataTemplate=this.dataTemplateDate:this.dataTemplate=this.dataTemplateString;break;case"number":this.dataTemplate=this.dataTemplateNumber;break;case"boolean":this.dataTemplate=this.dataTemplateBoolean;break;default:x.isDate(A)?this.dataTemplate=this.dataTemplateDate:this.dataTemplate=this.dataTemplateString}}}A.DataTemplateSelector=DataTemplateSelector}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class Table extends x.UI.ControlBase{constructor(A,V){super(A,V),this.properties={designerType:{propertyType:"base",defaultValue:"ContentControl"},dataSource:{},dataTemplate:{},headerTemplate:{propertyType:"controlChild",child:"_tableHeaderControl"},selectedIndex:{type:"number",defaultValue:-1},selectedValue:{defaultValue:""},selectionMode:{propertyType:"controlChild",child:"_tableBodyControl",defaultValue:x.UI.Enums.SelectionMode.Single},stickyHeader:{type:"boolean",defaultValue:!0},headerHeight:{defaultValue:"50px"},headerCellStyle:{defaultValue:""},sortedModeChanged:{propertyType:"event"},selectedIndexChanged:{propertyType:"event",triggerDataName:"triggerData"},backgroundColor:{propertyType:"memberStyle",type:"color",defaultValue:"@BackgroundColor"},borderColor:{propertyType:"memberStyle",type:"color",defaultValue:"@BorderColor"},headerCellBackgroundColor:{defaultValue:"@BackgroundColor"},headerCellForegroundColor:{defaultValue:"@ForegroundColor"},headerCellHoverBackgroundColor:{defaultValue:"@HoverBackgroundColor"},headerCellHoverForegroundColor:{defaultValue:"@ForegroundColor"},headerCellPressedBackgroundColor:{defaultValue:"@BackgroundColor"},headerCellPressedForegroundColor:{defaultValue:"@ForegroundColor"},headerCellBorderWidth:{defaultValue:"0px 0px 1px 0px"},headerCellBorderStyle:{defaultValue:"solid"},headerCellBorderRadius:{defaultValue:"0px 0px 0px 0px"},headerCellBorderColor:{defaultValue:"@BorderColor"},itemInserted:{propertyType:"event",triggerDataName:"itemInsertedTriggerData"}},this.cssStyles={coreStyle:!0,css:"\n            .vw-table {\n                width: 100%;\n                height: auto;\n                margin: 8px;\n                overflow-x: auto;\n                overflow-y: auto;\n            }\n            .vw-table__table {\n                display: table;\n                width: 100%;\n                border-spacing: 0;\n                border-collapse: seperate;\n                table-layout: fixed;\n            }\n        "},this._tableElement=null,this._tableHeaderRowControl=null,this._tableHeaderControl=null,this._headerRowElement=null,this._tableBodyControl=null,this._boundSortedModeChanged=this._onSortedModeChanged.bind(this),this._boundSelectedIndexChangedHandler=this._onSelectedIndexChangedHandler.bind(this),this._headerCells=null,this._dataSource=null,this._itemsLoadedEventType="itemsLoaded",this._itemInsertedEventType="itemInserted",this._itemChangedEventType="itemChanged",this._itemMovedEventType="itemMoved",this._itemRemovedEventType="itemRemoved",this._itemsReloadedEventType="itemsReloaded",this._dataListeners={itemChanged:this._onItemChanged.bind(this),itemInserted:this._onItemInserted.bind(this),itemMoved:this._onItemMoved.bind(this),itemRemoved:this._onItemRemoved.bind(this),itemsReloaded:this._onItemsReloaded.bind(this)},this._boundItemsLoaded=this._onItemsLoaded.bind(this),this._itemsLoaded=!1;this.initialize(Table,{cssClassPrefix:"vw"})}createTemplate(){let x=document.createElement("div");this.reparentChildren(this.element,x);this.element.innerHTML='\n                <table data-ref-element="_tableElement" class="vw-table__table">\n                    <thead data-ref="_tableHeaderControl" data-win-control="VisiWin.UI.TableHeader" class="vw-table__tableheader">\n                        <tr data-ref="_tableHeaderRowControl" data-win-control="VisiWin.UI.TableHeaderRow" class="vw-table__tableheaderrow"></tr>\n                    </thead>\n                    <tbody data-ref="_tableBodyControl" data-win-control="VisiWin.UI.TableBody" class="vw-table__tablebody">\n                    </tbody>\n                </table>';let A=this.element.getElementsByClassName("vw-table__tableheaderrow");return this.reparentChildren(x,A[0]),this._headerCells=A[0].children,this.initializeChilds()}get dataSource(){return this._dataSource}set dataSource(x){this._tableBodyControl&&(this._tableBodyControl.dataSource=x),this._tableHeaderControl&&(this._tableHeaderControl.dataSource=x),"string"==typeof x&&(this.dataSourceName=x),this._dataSource=x}createHandler(){this._tableBodyControl&&(this._tableBodyControl.addEventListener("selectedIndexChanged",this._boundSelectedIndexChangedHandler),this._tableBodyControl.addEventListener(this._itemsLoadedEventType,this._boundItemsLoaded),this._addDataListeners())}removeHandler(){this._tableBodyControl&&(this._tableBodyControl.removeEventListener("selectedIndexChanged",this._boundSelectedIndexChangedHandler),this._tableBodyControl.removeEventListener(this._itemsLoadedEventType,this._boundItemsLoaded))}_onSelectedIndexChangedHandler(x){this.triggerData=x.detail,this.updateLayoutEnable(!1),x.detail&&(this.selectedIndex=x.detail.selectedIndex,this.selectedValue=x.detail.selectedValue,this.selectedItem=x.detail.selectedItem),this.updateLayoutEnable(!0),this.dispatchEvent("selectedIndexChanged",this.triggerData)}_onItemInserted(x){this.itemInsertedTriggerData=x.detail,this.dispatchEvent(this._itemInsertedEventType,this.itemInsertedTriggerData)}_onItemChanged(x){this.itemChangedTriggerData=x.detail,this.dispatchEvent(this._itemChangedEventType,this.itemChangedTriggerData)}_onItemMoved(x){this.itemMovedTriggerData=x.detail,this.dispatchEvent(this._itemMovedEventType,this.itemMovedTriggerData)}_onItemRemoved(x){this.itemRemovedTriggerData=x.detail,this.dispatchEvent(this._itemRemovedEventType,this.itemRemovedTriggerData)}_onItemsReloaded(x){this.itemsReloadedTriggerData=x.detail,this.dispatchEvent(this._itemsReloadedEventType,this.itemsReloadedTriggerData)}_onItemsLoaded(){this._itemsLoaded=!0,this.isInDesignMode||this._calculateTableHeaderCells(),this._updateLayoutBase("event",this._itemsLoadedEventType,null,null)}_addDataListeners(){Object.keys(this._dataListeners).forEach(x=>{this._tableBodyControl.addEventListener(x,this._dataListeners[x],!1)})}_removeDataListeners(){Object.keys(this._dataListeners).forEach(x=>{this._tableBodyControl.removeEventListener(x,this._dataListeners[x],!1)})}_updateColors(A){if(("firstUpdate"===A.changeName||"headerCellBackgroundColor"===A.changeName||"headerCellForegroundColor"===A.changeName||"headerCellHoverBackgroundColor"===A.changeName||"headerCellHoverForegroundColor"===A.changeName||"headerCellPressedBackgroundColor"===A.changeName||"headerCellPressedForegroundColor"===A.changeName||"theme"===A.changeType)&&this._headerCells)for(let A=0;A<this._headerCells.length;A++){const V=x.Resources.styles.controls[this._headerCells[A].winControl.controlType+"."+this._headerCells[A].winControl.style];(x.isNullOrUndefined(V)||V&&x.isNullOrUndefined(V.options.backgroundColor))&&x.isNullOrUndefined(this._headerCells[A].winControl.inlineOptions.backgroundColor)&&"@None"!=this.headerCellBackgroundColor&&(this._headerCells[A].winControl.backgroundColor=this.headerCellBackgroundColor),(x.isNullOrUndefined(V)||V&&x.isNullOrUndefined(V.options.foregroundColor))&&x.isNullOrUndefined(this._headerCells[A].winControl.inlineOptions.foregroundColor)&&"@None"!=this.headerCellForegroundColor&&(this._headerCells[A].winControl.foregroundColor=this.headerCellForegroundColor),(x.isNullOrUndefined(V)||V&&x.isNullOrUndefined(V.options.hoverBackgroundColor))&&x.isNullOrUndefined(this._headerCells[A].winControl.inlineOptions.hoverBackgroundColor)&&"@None"!=this.headerCellHoverBackgroundColor&&(this._headerCells[A].winControl.hoverBackgroundColor=this.headerCellHoverBackgroundColor),(x.isNullOrUndefined(V)||V&&x.isNullOrUndefined(V.options.hoverForegroundColor))&&x.isNullOrUndefined(this._headerCells[A].winControl.inlineOptions.hoverForegroundColor)&&"@None"!=this.headerCellHoverForegroundColor&&(this._headerCells[A].winControl.hoverForegroundColor=this.headerCellHoverForegroundColor),(x.isNullOrUndefined(V)||V&&x.isNullOrUndefined(V.options.pressedBackgroundColor))&&x.isNullOrUndefined(this._headerCells[A].winControl.inlineOptions.pressedBackgroundColor)&&"@None"!=this.headerCellPressedBackgroundColor&&(this._headerCells[A].winControl.pressedBackgroundColor=this.headerCellPressedBackgroundColor),(x.isNullOrUndefined(V)||V&&x.isNullOrUndefined(V.options.pressedForegroundColor))&&x.isNullOrUndefined(this._headerCells[A].winControl.inlineOptions.pressedForegroundColor)&&"@None"!=this.headerCellPressedForegroundColor&&(this._headerCells[A].winControl.pressedForegroundColor=this.headerCellPressedForegroundColor)}if(("firstUpdate"===A.changeName||"headerCellBorderColor"===A.changeName)&&this._headerCells)for(let A=0;A<this._headerCells.length;A++){const V=x.Resources.styles.controls[this._headerCells[A].winControl.controlType+"."+this._headerCells[A].winControl.style];(x.isNullOrUndefined(V)||V&&x.isNullOrUndefined(V.options.borderColor))&&x.isNullOrUndefined(this._headerCells[A].winControl.inlineOptions.borderColor)&&(this._headerCells[A].winControl.borderColor=this.headerCellBorderColor)}}_updateLayout(A){if(("firstUpdate"===A.changeName||"stickyHeader"===A.changeName)&&this._headerCells)for(let x=0;x<this._headerCells.length;x++)this.stickyHeader?this._headerCells[x].style.position="sticky":this._headerCells[x].style.position="relative",this._headerCells[x].winControl.addEventListener("sortedModeChanged",this._boundSortedModeChanged);if(("firstUpdate"===A.changeName||"headerHeight"===A.changeName)&&(this._tableHeaderControl.height=this.headerHeight,this._headerCells))for(let x=0;x<this._headerCells.length;x++)this._headerCells[x].winControl.height=this.headerHeight,this._headerCells[x].winControl.columnIndex=x,this._headerCells[x].winControl.element.style.zIndex=Number(this._headerCells.length)+Number(10)-Number(x);if("initialized"!==A.changeName&&"dataTemplate"!==A.changeName||(this._tableBodyControl&&(x.isNullOrUndefined(this.dataTemplate)||(this._tableBodyControl.dataTemplate=this.dataTemplate)),this._tableHeaderControl&&(x.isNullOrUndefined(this.dataTemplate)||(this._tableHeaderControl.dataTemplate=this.dataTemplate))),"initialized"!==A.changeName&&"selectedIndex"!==A.changeName||(this._tableBodyControl.selectedIndex=this.selectedIndex),"initialized"!==A.changeName&&"selectedValue"!==A.changeName||(this._tableBodyControl.selectedValue=this.selectedValue),("initialized"===A.changeName||"headerCellBorderWidth"===A.changeName||"headerCellBorderStyle"===A.changeName||"headerCellBorderRadius"===A.changeName||"headerCellBorderColor"===A.changeName)&&this._headerCells)for(let A=0;A<this._headerCells.length;A++){const V=x.Resources.styles.controls[this._headerCells[A].winControl.controlType+"."+this._headerCells[A].winControl.style];(x.isNullOrUndefined(V)||V&&x.isNullOrUndefined(V.options.borderWidth))&&x.isNullOrUndefined(this._headerCells[A].winControl.inlineOptions.borderWidth)&&(this._headerCells[A].winControl.borderWidth=this.headerCellBorderWidth),(x.isNullOrUndefined(V)||V&&x.isNullOrUndefined(V.options.borderStyle))&&x.isNullOrUndefined(this._headerCells[A].winControl.inlineOptions.borderStyle)&&(this._headerCells[A].winControl.borderStyle=this.headerCellBorderStyle),(x.isNullOrUndefined(V)||V&&x.isNullOrUndefined(V.options.borderRadius))&&x.isNullOrUndefined(this._headerCells[A].winControl.inlineOptions.borderRadius)&&(this._headerCells[A].winControl.borderRadius=this.headerCellBorderRadius)}}_calculateTableHeaderCells(){let x=this.element.getBoundingClientRect().width,A=0,V=x;for(let R=0;R<this._headerCells.length;R++)if(this._headerCells[R].winControl.width.includes("px")&&(V-=parseInt(this._headerCells[R].winControl.width,10),A++),this._headerCells[R].winControl.width.includes("%")){V=x-x*Number(this._headerCells[R].winControl.width.replace("%",""))/100,A++}let R=V/(this._headerCells.length-A);for(let A=0;A<this._headerCells.length;A++)"auto"!=this._headerCells[A].winControl.width&&""!=this._headerCells[A].winControl.width||(this._headerCells[A].winControl.width=R+"px"),this._headerCells[A].winControl.width.includes("%")&&(this._headerCells[A].winControl.width=x*Number(this._headerCells[A].winControl.width.replace("%",""))/100+"px")}_onSortedModeChanged(A){A.detail.sortMode;let V=A.detail.sortDirection,R=A.detail.dataSourceItemMember,D=A.detail;for(let V=0;V<this._headerCells.length;V++)V!=A.detail.columnIndex&&this._headerCells[V].winControl&&this._headerCells[V].winControl._symbolControlSort&&(this._headerCells[V].winControl._symbolControlSort.symbol="",this._headerCells[V].winControl._sortedMode=x.UI.Enums.SortDirection.Ascending,this._headerCells[V].winControl.sorted=!1);if(A.detail.sortMode===x.UI.Enums.SortMode.Internal){let D;const N=x.AppServices.DataService.getDataSource(this.dataSourceName);let U,B,F;if(N&&(D=N),D&&D._keyMap){F=D._keyMap;let x=this.firstElement(D._keyMap);x&&(B=x.data[R]),U=typeof B}else if(D&&D._sortedKeys){F=D._sortedKeys;this.firstElement(D._sortedKeys[0]);B=D._list._keyMap[D._sortedKeys[0]].data[R],U=typeof B}if("object"===U){const A=new Date(B);x.isDate(A)&&(U="date")}switch(this._headerCells[A.detail.columnIndex].winControl.sortType){case x.UI.Enums.SortType.Auto:switch(U){case"string":if(this.hasItemStartingWith(F,"@$",R))this.sortAlphabeticalWithLocalizableTexts(V,D,R);else{const A=new Date(B);x.isDate(A)?this.sortDate(V,D,R):this.sortAlphabetical(V,D,R)}break;case"number":this.sortNumeric(V,D,R);break;case"boolean":this.sortBoolean(V,D,R);break;case"date":this.sortDate(V,D,R)}break;case x.UI.Enums.SortType.Alphabetical:this.sortAlphabeticalWithLocalizableTexts(V,D,R);break;case x.UI.Enums.SortType.Numeric:this.sortNumeric(V,D,R);break;case x.UI.Enums.SortType.Date:this.sortDate(V,D,R);break;case x.UI.Enums.SortType.Boolean:this.sortBoolean(V,D,R)}this.dispatchEvent(this._itemInsertedEventType,this.itemInsertedTriggerData)}else A.detail.sortMode===x.UI.Enums.SortMode.External&&this.dispatchEvent("sortedModeChanged",D)}getLocalizableText(A){return __awaiter(this,void 0,void 0,(function*(){let V=x.System.Language.LanguageService.getService();return(yield V.GetLocalizedTextAsync(A)).DisplayText}))}sortAlphabeticalWithLocalizableTexts(A,V,R){return __awaiter(this,void 0,void 0,(function*(){if(V._keyMap)for(let A in V._keyMap){let D=V._keyMap[A];x.stringStartsWith(D.data[R],"@$")?V._keyMap[A].data.sortValue=yield this.getLocalizableText(D.data[R]):V._keyMap[A].data.sortValue=D.data[R]}else V._sortedKeys;this.sortAlphabetical(A,V,"sortValue")}))}hasItemStartingWith(x,A,V){for(let R in x)if(x[Number(R)].data[V]&&x[Number(R)].data[V].startsWith(A))return!0;return!1}firstElement(x){for(let A in x)return x[A]}removeSortValue(x){if(x._keyMap)for(let A in x._keyMap)delete x._keyMap[A].data.sortValue;return x}sortDataTypes(){}sortAlphabetical(A,V,R){if(A===x.UI.Enums.SortDirection.Ascending){let A=V.createSorted((function(A,V){try{return A[R].localeCompare(V[R],"de")}catch(A){x.Application.WarnLog.log("sortAlphabetical: Table - Invalid DataType for selected SortType.")}}));this.dataSource=this.removeSortValue(A)}else if(A==x.UI.Enums.SortDirection.Descending){let A=V.createSorted((function(A,V){try{return V[R].localeCompare(A[R],"de")}catch(A){x.Application.WarnLog.log("sortAlphabetical: Table - Invalid DataType for selected SortType.")}}));this.dataSource=this.removeSortValue(A)}else A==x.UI.Enums.SortDirection.None&&(A=x.UI.Enums.SortDirection.Ascending,this.dataSource=this.removeSortValue(V))}sortNumeric(A,V,R){A===x.UI.Enums.SortDirection.Ascending?this.dataSource=V.createSorted((function(A,V){try{return A[R]-V[R]}catch(A){x.Application.WarnLog.log("sortNumeric: Table - Invalid DataType for selected SortType.")}})):A==x.UI.Enums.SortDirection.Descending?this.dataSource=V.createSorted((function(A,V){try{return V[R]-A[R]}catch(A){x.Application.WarnLog.log("sortNumeric: Table - Invalid DataType for selected SortType.")}})):A==x.UI.Enums.SortDirection.None&&(A=x.UI.Enums.SortDirection.Ascending,this.dataSource=V)}sortDate(A,V,R){A===x.UI.Enums.SortDirection.Ascending?this.dataSource=V.createSorted((function(A,V){try{const x=new Date(A[R]),D=new Date(V[R]),N=new Date(x.toISOString()),U=new Date(D.toISOString());return N.getTime()-U.getTime()}catch(A){x.Application.WarnLog.log("sortDate: Table - Invalid DataType for selected SortType.")}})):A===x.UI.Enums.SortDirection.Descending?this.dataSource=V.createSorted((function(A,V){try{const x=new Date(A[R]),D=new Date(V[R]),N=new Date(x.toISOString());return new Date(D.toISOString()).getTime()-N.getTime()}catch(A){x.Application.WarnLog.log("sortDate: Table - Invalid DataType for selected SortType.")}})):A===x.UI.Enums.SortDirection.None&&(A=x.UI.Enums.SortDirection.Ascending,this.dataSource=V)}sortBoolean(A,V,R){A===x.UI.Enums.SortDirection.Ascending?this.dataSource=V.createSorted((function(A,V){try{return A[R]===V[R]?0:A[R]?-1:1}catch(A){x.Application.WarnLog.log("sortBoolean: Table - Invalid DataType for selected SortType.")}})):A===x.UI.Enums.SortDirection.Descending?this.dataSource=V.createSorted((function(A,V){try{return V[R]===A[R]?0:V[R]?-1:1}catch(A){x.Application.WarnLog.log("sortBoolean: Table - Invalid DataType for selected SortType.")}})):A===x.UI.Enums.SortDirection.None&&(A=x.UI.Enums.SortDirection.Ascending,this.dataSource=V)}createHeaderCellHandler(){let x=this.element.getElementsByClassName("vw-tableheadercell");if(x)for(let A=0;A<x.length;A++)x[A].winControl.addEventListener("sortedModeChanged",this._boundSortedModeChanged)}}A.Table=Table}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class TableHeader extends x.UI.ControlBase{constructor(x,A){super(x,A),this.properties={designerType:{propertyType:"base",defaultValue:"Control"},registerTargetId:{propertyType:"base",defaultValue:"TableHeaderCell"},height:{propertyType:"base",defaultValue:"16px"},headerCells:{},headerTemplate:{},backgroundColor:{propertyType:"memberStyle",resourceValue:["getTheme"],defaultValue:"@None"},borderColor:{propertyType:"memberStyle",resourceValue:["getTheme"],defaultValue:"@ChromeMedium"}},this.cssStyles={coreStyle:!0,css:"\n            .vw-tableheader {\n                display: table-header-group;\n                flex-shrink: 0;\n                flex-grow: 0;\n            }\n        "},this.headerCells=[],this.templateLoaded=!1,this.hasInlineHeaderCells=!1,this._boundDataTemplateReadyRow=this.dataTemplateReadyRow.bind(this),this._boundDataTemplateReadyHeader=this.dataTemplateReadyHeader.bind(this);this.initialize(TableHeader,{cssClassPrefix:"vw"})}registerChild(x,A,V,R){return A!==this.registerTargetId||(V&&V.winControl&&(this.headerCells.push(V.winControl),this.hasInlineHeaderCells=!0),!1)}_updateLayout(x){if(("initialized"===x.changeName||"height"===x.changeName)&&this.hasInlineHeaderCells&&this.headerCells&&this.headerCells.length)for(var A=0;A<this.headerCells.length;A++)this.headerCells[A]&&(this.headerCells[A].height=this.height)}dataTemplateReadyRow(A){return __awaiter(this,void 0,void 0,(function*(){this.dataTemplateRow=A.detail[this.dataTemplate],this.addEventListener("templateReadyHeader",this._boundDataTemplateReadyHeader),x.AppServices.DataTemplateService.getDataTemplate(this,this.headerTemplate,"templateReadyHeader")}))}dataTemplateReadyHeader(A){return __awaiter(this,void 0,void 0,(function*(){let V,R=x.DataSources[this.dataSource],D=A.detail[this.headerTemplate],N=this.dataTemplateRow.syncRenderer().children,U=[];for(let x=0;x<N.length;x++){let A=N[x];if(A.attributes["data-win-bind"]&&A.attributes["data-win-bind"].value){let V={cellNumber:x,bindingKey:A.attributes["data-win-bind"].value.split(":")[1]};U.push(V)}}D.syncRenderer&&(V=D.syncRenderer(R.getAt(0),this.element),V.winControl.readySubTree(V,!0),V.winControl.initializeSubTree(V,!0),V.winControl.attachSubTree(V,!0));let B=V.children[1].children;for(let x=0;x<B.length;x++){let A=B[x],V=U[x].bindingKey;A.winControl.dataSourceItemMember=V,A.winControl.columnIndex=x}this.element.parentElement.getElementsByClassName("vw-table__tablebody")[0].winControl.tempDataTemplate;this.parentElement.parentElement.winControl.createHeaderCellHandler()}))}getKeyAsString(x,A){const V=Object.keys(x);if(V.length>0)return V[A]}}A.TableHeader=TableHeader}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class TableBody extends x.UI.RepeaterBase{constructor(x,A){super(x,A),this.properties={designerType:{propertyType:"base",defaultValue:"Control"},backgroundColor:{propertyType:"memberStyle",type:"color",defaultValue:"@None"},borderColor:{propertyType:"memberStyle",type:"color",defaultValue:"@None"}},this.cssStyles={coreStyle:!0,css:"\n            .vw-table__tablebody {\n                display: table-row-group;\n            }\n        "},this._headerCells=null,this._columnCollapseList=[];this.initialize(TableBody,{namespace:"VisiWin.UI"})}_updateLayout(A){if("firstUpdate"===A.changeName&&(this._headerCells=this.element.parentElement.parentElement.winControl.headerCells,this._headerCells))for(let x=0;x<this._headerCells.length;x++){"Collapse"===this._headerCells[x].winControl.visibility&&this._columnCollapseList.push(x)}if("selectedIndex"===A.changeName&&this.selectionMode!==x.UI.Enums.SelectionMode.None&&this.itemList.length>0&&(this.selectedItem&&this._uncheckItem(this.selectedItem),this.itemList[this.selectedIndex]&&(this.selectedItem=this.itemList[this.selectedIndex].winControl,this._checkItem(this.selectedItem),this.updateLayoutEnable(!1),this.selectedValue=this.selectedItem.value,this.updateLayoutEnable(!0))),"selectedValue"===A.changeName&&this.selectionMode!==x.UI.Enums.SelectionMode.None&&this.itemList.length>0){this.selectedItem&&this._uncheckItem(this.selectedItem);for(let x=0;x<this.itemList.length;x++){const V=this.itemList[x].winControl;V.value===A.newValue&&(this._checkItem(V),this.selectedItem=V,this.updateLayoutEnable(!1),this.selectedIndex=x,this.updateLayoutEnable(!0))}}}}A.TableBody=TableBody}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class TableFooter extends x.UI.ToggleButtonBase{constructor(A,V){super(A,V),this.dataIndex=-1,this.dataMode=null,this.repeaterTemplate=null,this.selectMode=null,this.bindingData=null,this.dataSource=null,this._trElement=null,this._trControl=null,this._bindingList=null,this._dataSource=null,this._repeaterControl=null,this.inlineOptions.debug,this.addPropertyList(TableFooter,TableFooter.TableFooterPropertyList),this.defaultConstructor(A,this.inlineOptions,x.UI.TableFooter.controlName,x.UI.TableFooter.classTableFooter,"TFOOT")}createTemplate(x,A){return this.element.innerHTML="\n                <style>\n                p {\n                    text-align: center;\n                    font-weight: normal;\n                    padding: 1em;\n                    margin: 0 0 2em 0;\n                    background-color: #eee;\n                    border: 1px solid #666;\n                }\n                </style>\n",null}createHandler(){}removeHandler(){}_updateLayout(x){}_updateColors(x){this.disabled}dispose(){return super.dispose()}}TableFooter.namespace="VisiWin.UI",TableFooter.controlName="TableFooter",TableFooter.classTableFooter="vw-tablefooter",TableFooter.TableFooterPropertyList={designerType:{propertyType:"base",type:"string",defaultValue:"Control"},dataMode:{propertyType:"member",type:"string",defaultValue:"Users"},repeaterTemplate:{propertyType:"member",type:"string"},bindingData:{propertyType:"member",type:"any"},dataSource:{propertyType:"member",type:"any"}},A.TableFooter=TableFooter}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class TableHeaderRow extends x.UI.ControlBase{constructor(x,A){super(x,A),this.properties={designerType:{propertyType:"base",defaultValue:"Control"},backgroundColor:{propertyType:"memberStyle",resourceValue:["getTheme"],defaultValue:"@None"},borderColor:{propertyType:"memberStyle",resourceValue:["getTheme"],defaultValue:"@ChromeMedium"}},this.cssStyles={coreStyle:!0,css:"\n            .vw-tableheaderrow {\n                display: table-row;\n                outline: 0;\n                vertical-align: middle;\n            }\n        "},this.isInDesignMode&&x.parentElement&&x.parentElement.winControl&&"DataTemplateView"===x.parentElement.winControl.__VWCONTROL__?(this.element.style.display="flex",this.element.style.flexDirection="row",this.inlineOptions.designerType="ContentControl"):this.element.style.display="table-row";this.initialize(TableHeaderRow,{inputEventsEnable:!0,namespace:"VisiWin.UI",cssClassPrefix:"vw"})}}A.TableHeaderRow=TableHeaderRow}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class TableHeaderCell extends x.UI.ButtonBase{constructor(A,V){super(A,V),this.properties={designerType:{propertyType:"base",defaultValue:"Control"},registerSourceId:{propertyType:"base",defaultValue:"TableHeaderCell"},columnIndex:{type:"number"},dataSource:{},dataSourceItemMember:{},sortedModeChanged:{propertyType:"event"},containerBorderWidth:{},containerBorderStyle:{},containerBorderRadius:{},containerTransition:{},showSymbol:{type:"boolean",defaultValue:!1},iconFont:{defaultValue:"material-icons"},sortUpSymbol:{defaultValue:"arrow_upward"},sortDownSymbol:{defaultValue:"arrow_downward"},symbol:{},symbolType:{defaultValue:"Icon"},symbolSize:{defaultValue:"24px"},symbolMargin:{defaultValue:"0px 0px 0px 0px"},symbolPosition:{defaultValue:"Left"},showText:{type:"boolean",defaultValue:!0},text:{forceOverwrite:!0,defaultValue:"TableHeaderCell"},textWidth:{childProperty:"width",defaultValue:"auto"},textHeight:{childProperty:"height",defaultValue:"20px"},textMargin:{childProperty:"margin",defaultValue:"0px 0px 0px 0px"},textPadding:{childProperty:"padding",defaultValue:"0px 0px 0px 8px"},localizableText:{forceOverwrite:!0},textAlignment:{defaultValue:"Left"},lineClamp:{defaultValue:1,type:"number"},textWrapping:{},textTrimming:{},fontClass:{forceOverwrite:!0,defaultValue:"Button"},fontSize:{forceOverwrite:!0},fontWeight:{forceOverwrite:!0},lineHeight:{forceOverwrite:!0},textContrast:{type:"number"},uppercase:{type:"boolean"},textPosition:{defaultValue:"Center"},resizeContainerWidth:{defaultValue:"40px"},canUserResize:{defaultValue:!1},sortMode:{defaultValue:x.UI.Enums.SortMode.Internal},canUserSort:{defaultValue:!1},sortType:{defaultValue:x.UI.Enums.SortType.Auto},backgroundColor:{defaultValue:"@BackgroundColor"},foregroundColor:{defaultValue:"@ForegroundColor"},borderColor:{defaultValue:"@BorderColor"},disabledBackgroundColor:{defaultValue:"@DisabledBackgroundColor"},disabledForegroundColor:{defaultValue:"@DisabledForegroundColor"},disabledBorderColor:{defaultValue:"@DisabledBorderColor"},pressedBackgroundColor:{defaultValue:"@BackgroundColor"},pressedForegroundColor:{defaultValue:"@ForegroundColor"},hoverBackgroundColor:{defaultValue:"@BackgroundColor"},hoverForegroundColor:{defaultValue:"@ForegroundColor"}},this.cssStyles={css:"\n            .vw-tableheadercell {\n                display: table-cell;\n                width: auto;\n                height: 50px;\n                border-style: none;\n                border-width: 0px 0px 0px 0px;\n                overflow: hidden;\n                flex-shrink: 0;\n                -webkit-tap-highlight-color: transparent;\n                top: 0;\n                z-index: 2;\n                vertical-align: middle;\n                position: sticky;\n                overflow: inherit;\n            }\n\n            .vw-tableheadercell__container {\n                display: flex;\n                width: 100%;\n                height: 100%;\n                flex-direction: row;\n                align-items: center;\n                justify-content: space-between;\n            }\n            .vw-tableheadercell__containerleft {\n                display: flex;\n                align-items: center;\n            }\n            .vw-tableheadercell__containerright {\n                display: flex;\n                align-items: center;\n            }\n            \n            .vw-tableheadercell__symbol {\n                margin-right: 16px\n                margin-left: 16px\n                align-items: normal;\n            }\n            \n            .vw-tableheadercell__text {\n                max-width: 100%;\n            }            \n            .vw-tableheadercell__symbolsort {\n                margin-left: auto;\n                margin-right: 8px;\n            }\n            .vw-tableheadercell__dragContainer {\n                position: relative;\n                width: 40px;\n                height: 50px;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                flex-shrink: 0;\n                cursor: col-resize;\n                touch-action: none;\n            }\n            .vw-tableheadercell__symbolDrag {\n            }\n        "},this._sortedMode=x.UI.Enums.SortDirection.Ascending,this.sorted=!1,this._boundbuttonclick=this._onSortedModeChanged.bind(this),this.isInlineHeaderCell=!1,this._boundPointerDownHandlerResize=this._pointerDownHandlerResize.bind(this),this._boundPointerMoveHandlerResize=this._pointerMoveHandlerResize.bind(this),this._boundPointerUpHandlerResize=this._pointerUpHandlerResize.bind(this),this._boundPointerLeaveHandlerResize=this._pointerLeaveHandlerResize.bind(this),this._boundPointerCancelHandlerResize=this._pointerCancelHandlerResize.bind(this),!0===this.inlineOptions.dataTemplate&&(this.isInDesignMode&&A.parentElement&&A.parentElement.winControl&&A.parentElement.parentElement.winControl&&"DataTemplateView"===A.parentElement.parentElement.winControl.__VWCONTROL__?(this.element.style.display="block",this.inlineOptions.designerType="ContentControl"):this.element.style.display="table-cell");this.initialize(TableHeaderCell,{cssClassPrefix:"vw",inputEventsEnable:!0})}createTemplate(){if(!0!==this.inlineOptions.dataTemplate){let x="";return x+='<div data-ref-element="_containerElement" class="vw-tableheadercell__container">',x+='<div data-ref-element="_containerElementLeft" class="vw-tableheadercell__containerleft">',!0===this.inlineOptions.showSymbol&&(x+='<div data-ref="_symbolControl" class="vw-tableheadercell__symbol" data-win-control="VisiWin.UI.Symbol"></div>'),x+='<div data-ref="_textControl" class="vw-tableheadercell__text" data-win-control="VisiWin.UI.TextBlock"></div>',x+="</div>",x+='<div data-ref-element="_containerElementRight" class="vw-tableheadercell__containerright">',!0===this.inlineOptions.canUserSort&&(x+='<div data-ref="_symbolControlSort" class="vw-tableheadercell__symbolsort" data-win-control="VisiWin.UI.Symbol"></div>'),!0===this.inlineOptions.canUserResize&&(x+='<div id="dragContainer" data-ref-element="_dragContainer" class="vw-tableheadercell__dragContainer"></div> </div>'),x+="</div>",x+="</div>",this.element.innerHTML=x,this.initializeChilds()}}createHandler(){this.element.winControl.addEventListener("buttonClick",this._boundbuttonclick),!0!==this.inlineOptions.canUserResize&&!0!==this.canUserResize||this._dragContainer&&(this._dragContainer.addEventListener(A.PointerEventType.pointerdown,this._boundPointerDownHandlerResize),this._dragContainer.addEventListener(A.PointerEventType.pointerleave,this._boundPointerLeaveHandlerResize,!0),x.Utilities.addEventListener(this._dragContainer,A.PointerEventType.pointercancel,this._boundPointerCancelHandlerResize))}removeHandler(){this.element.winControl.removeEventListener("buttonClick",this._boundbuttonclick),x.Utilities.removeEventListener(this._dragContainer,A.PointerEventType.pointerdown,this._boundPointerDownHandlerResize),x.Utilities.removeEventListener(this._dragContainer,A.PointerEventType.pointerleave,this._boundPointerLeaveHandlerResize),x.Utilities.removeEventListener(this._dragContainer,A.PointerEventType.pointercancel,this._boundPointerCancelHandlerResize)}_pointerDownHandlerResize(x){this._dragContainer.setPointerCapture(x.pointerId),x.preventDefault(),x.stopImmediatePropagation(),this.isResizing=!0,this.lastX=x.clientX||x.touches[0].clientX,"mouse"!==x.pointerType&&"touch"!==x.pointerType||(this._dragContainer.addEventListener(A.PointerEventType.pointermove,this._boundPointerMoveHandlerResize),this._dragContainer.addEventListener(A.PointerEventType.pointerup,this._boundPointerUpHandlerResize))}_pointerUpHandlerResize(x){x.preventDefault(),x.stopImmediatePropagation(),this.isResizing&&(this.isResizing=!1),"mouse"!==x.pointerType&&"touch"!==x.pointerType||(this._dragContainer.removeEventListener(A.PointerEventType.pointermove,this._boundPointerMoveHandlerResize),this._dragContainer.removeEventListener(A.PointerEventType.pointerup,this._boundPointerUpHandlerResize)),this._dragContainer.releasePointerCapture(x.pointerId)}_pointerMoveHandlerResize(x){if(""===this.minWidth&&this.calculateMinWidth(),x.preventDefault(),x.stopImmediatePropagation(),!this.isResizing)return;const A=x.clientX-this.lastX;let V;if(""===this.element.style.width||"auto"===this.element.style.width||this.element.style.width.includes("%")){V=this.element.clientWidth+A}else V=parseInt(this.element.style.width)+A;(""===this.maxWidth||V<=parseInt(this.maxWidth))&&(""===this.minWidth||V>=parseInt(this.minWidth))&&(this.element.style.width=V+"px",this.lastX=x.clientX||x.touches[0].clientX)}calculateMinWidth(){let x=this._containerElementLeft.getBoundingClientRect().width+this._containerElementRight.getBoundingClientRect().width+"px";this.minWidth=x}_pointerLeaveHandlerResize(x){}_pointerCancelHandlerResize(x){}_updateColors(x){"firstUpdate"!==x.changeName&&"hoverForegroundColor"!==x.changeName&&"hoverBackgroundColor"!==x.changeName&&"pressedForegroundColor"!==x.changeName&&"pressedBackgroundColor"!==x.changeName&&"foregroundColor"!==x.changeName&&"backgroundColor"!==x.changeName&&"borderColor"!==x.changeName&&"hover"!==x.changeName&&"pressed"!==x.changeName||(this.element.style.backgroundColor=this.getColor("backgroundColor"),this.hover?(this._symbolControlSort&&this.setColor("hoverForegroundColor","foregroundColor",void 0,"_symbolControlSort"),this._symbolControl&&this.setColor("hoverForegroundColor","foregroundColor",void 0,"_symbolControl"),this._textControl&&this.setColor("hoverForegroundColor","foregroundColor",void 0,"_textControl"),this._containerElement.style.backgroundColor=this.getColor("hoverBackgroundColor")):this.pressed?(this._symbolControlSort&&this.setColor("pressedForegroundColor","foregroundColor",void 0,"_symbolControlSort"),this._symbolControl&&this.setColor("pressedForegroundColor","foregroundColor",void 0,"_symbolControl"),this._textControl&&this.setColor("pressedForegroundColor","foregroundColor",void 0,"_textControl"),this._containerElement.style.backgroundColor=this.getColor("pressedBackgroundColor")):(this._symbolControlSort&&this.setColor("foregroundColor","foregroundColor",void 0,"_symbolControlSort"),this._symbolControl&&this.setColor("foregroundColor","foregroundColor",void 0,"_symbolControl"),this._textControl&&this.setColor("foregroundColor","foregroundColor",void 0,"_textControl"),this._containerElement.style.backgroundColor=this.getColor("backgroundColor")),this.setColor("borderColor","borderColor"),this.hover&&!1===this.sorted?this._symbolControlSort&&(this._symbolControlSort.symbol=this.sortUpSymbol,this.setColor("hoverForegroundColor","foregroundColor",void 0,"_symbolControlSort")):!1===this.sorted&&this._symbolControlSort&&(this._symbolControlSort.symbol=""))}_updateLayout(x){if("designerType"===x.changeName&&(this.designerType="Control"),"firstUpdate"===x.changeName||"resizeContainerWidth"===x.changeName||"height"===x.changeName){if(this._dragContainer){this._dragContainer.style.width=this.resizeContainerWidth,this._dragContainer.style.height=this.height;let x=parseInt(this.resizeContainerWidth)/2+"px";this._dragContainer.style.transform=`translateX(${x})`}if(this.canUserResize&&this._symbolControlSort&&this._symbolControlSort.element.style){parseInt(this._symbolControlSort.element.style.marginRight);this._symbolControlSort.element.style.marginRight=-(parseInt(this.resizeContainerWidth)-10)+"px"}}!0!==this.inlineOptions.dataTemplate&&this.isInDesignMode&&this.element.parentElement&&this.element.parentElement.winControl&&this.element.parentElement.parentElement.winControl&&"DataTemplateView"===this.element.parentElement.parentElement.winControl.__VWCONTROL__&&"firstUpdate"===x.changeName&&(this._tableElement=document.getElementsByClassName("vw-table")[0].winControl),"firstUpdate"!==x.changeName&&"showText"!==x.changeName&&"textWidth"!==x.changeName&&"textHeight"!==x.changeName&&"textMargin"!==x.changeName&&"textPadding"!==x.changeName&&"textAlignment"!==x.changeName&&"lineClamp"!==x.changeName&&"textWrapping"!==x.changeName&&"textTrimming"!==x.changeName&&"fontClass"!==x.changeName&&"fontSize"!==x.changeName&&"fontWeight"!==x.changeName&&"lineHeight"!==x.changeName&&"textPosition"!==x.changeName||this._textControl&&(this._textControl.show=this.showText,this._textControl.width=this.textWidth,this._textControl.height=this.textHeight,this._textControl.margin=this.textMargin,this._textControl.padding=this.textPadding,this._textControl.textAlignment=this.textAlignment,this._textControl.lineClamp=this.lineClamp,this._textControl.textWrapping=this.textWrapping,this._textControl.textTrimming=this.textTrimming,this._textControl.fontClass=this.fontClass,this._textControl.fontSize=this.fontSize,this._textControl.fontWeight=this.fontWeight,this._textControl.lineHeight=this.lineHeight,this._textControl.textPosition=this.textPosition),"firstUpdate"!==x.changeName&&"text"!==x.changeName&&"localizableText"!==x.changeName||this._textControl&&(this._textControl.text=this.text,this._textControl.localizableText=this.localizableText),"firstUpdate"!==x.changeName&&"showSymbol"!==x.changeName&&"symbol"!==x.changeName&&"showSymbol"!==x.changeName&&"symbolSize"!==x.changeName&&"symbolMargin"!==x.changeName&&"symbolPosition"!==x.changeName||this._symbolControl&&(this._symbolControl.symbol=this.symbol,this._symbolControl.show=this.showSymbol,this._symbolControl.iconFont=this.iconFont,this._symbolControl.symbolType=this.symbolType,this._symbolControl.symbolSize=this.symbolSize,this._symbolControl.margin=this.symbolMargin,"Left"===this.symbolPosition?this._symbolControl.element.style.order=0:this._symbolControl.element.style.order=1),"firstUpdate"===x.changeName&&this._containerElement&&(this._containerElement.style.borderWidth=this.containerBorderWidth,this._containerElement.style.borderStyle=this.containerBorderStyle,this._containerElement.style.borderRadius=this.containerBorderRadius,this._containerElement.style.transition=this.containerTransition)}_onSortedModeChanged(A){if(this.canUserSort){this.dataSourceItemMember&&console.log(this.dataSourceItemMember.toString());let A={sortDirection:this._sortedMode,columnIndex:this.columnIndex,sortMode:this.sortMode,dataSourceItemMember:this.dataSourceItemMember};this._symbolControlSort&&(this._sortedMode===x.UI.Enums.SortDirection.Ascending?(this._sortedMode=x.UI.Enums.SortDirection.Descending,this.sorted=!0,this._symbolControlSort.foregroundColor=this.foregroundColor,this._symbolControlSort.symbol=this.sortUpSymbol):this._sortedMode===x.UI.Enums.SortDirection.Descending?(this._sortedMode=x.UI.Enums.SortDirection.None,this.sorted=!0,this._symbolControlSort.foregroundColor=this.foregroundColor,this._symbolControlSort.symbol=this.sortDownSymbol):this._sortedMode===x.UI.Enums.SortDirection.None&&(this.sorted=!1,this._sortedMode=x.UI.Enums.SortDirection.Ascending,this._symbolControlSort.symbol="")),this.dispatchEvent("sortedModeChanged",A)}}}A.TableHeaderCell=TableHeaderCell}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class TableCell extends x.UI.ControlBase{constructor(x,A){super(x,A),this.properties={designerType:{propertyType:"base",defaultValue:"Control"},alignItems:{propertyType:"custom",type:"string",defaultValue:"Center"},justifyContent:{propertyType:"custom",type:"string",defaultValue:"Center"},backgroundColor:{defaultValue:"@None"},foregroundColor:{defaultValue:"@None"},borderColor:{defaultValue:"@BorderColor"},disabledBackgroundColor:{defaultValue:"@DisabledBackgroundColor"},disabledForegroundColor:{defaultValue:"@DisabledForegroundColor"},disabledBorderColor:{defaultValue:"@DisabledBorderColor"}},this.cssStyles={coreStyle:!0,css:"\n            .vw-tablecell {\n                vertical-align: middle;\n                min-width: 5%;\n                padding: 0 16px;\n                cursor: pointer;\n            }\n            .vw-tablecell__flex {\n                width: 100%;\n                height: auto;\n                orientation: row;\n                justify-content: center;\n                align-items: center;\n            }\n        "},this.__alignItems="",this.__justifyContent="",this.isInDesignMode&&x.parentElement&&x.parentElement.winControl&&x.parentElement.parentElement.winControl&&"DataTemplateView"===x.parentElement.parentElement.winControl.__VWCONTROL__?(this.element.style.display="block",this.inlineOptions.designerType="ContentControl"):this.element.style.display="table-cell",this.initialize(TableCell)}get alignItems(){return this.__alignItems}set alignItems(x){if(this.__alignItems!=x){let A=this.__alignItems;this.__alignItems=x,this._updateLayoutBase("property","alignItems",x,A),this.dispatchNotifyPropertyChanged("property","alignItems",x,A)}}get justifyContent(){return this.__justifyContent}set justifyContent(x){if(this.__justifyContent!=x){let A=this.__justifyContent;this.__justifyContent=x,this._updateLayoutBase("property","justifyContent",x,A),this.dispatchNotifyPropertyChanged("property","justifyContent",x,A)}}createTemplate(){let x=document.createElement("div");this.reparentChildren(this.element,x);this.element.innerHTML='\n                <div data-ref-element="_flexElement" class="vw-tablecell__flex"></div>';let A=this.element.querySelector(".vw-tablecell__flex");return this.reparentChildren(x,A),this.initializeChilds()}_updateColors(x){"property"!==x.changeType&&"state"!==x.changeType&&"status"!==x.changeType&&"firstUpdate"!==x.changeName||(this.disabled?(this.setColor("disabledBackgroundColor","backgroundColor"),this.setColor("disabledBorderColor","borderColor"),this.setColor("disabledForegroundColor","disabledForegroundColor")):(this.setColor("backgroundColor","backgroundColor"),this.setColor("borderColor","borderColor"),this.setColor("foregroundColor","foregroundColor")))}_updateLayout(x){if("afterInit"===x.changeName||"alignItems"===x.changeName)switch(this.alignItems){case"Center":this._flexElement.style.alignItems="center";break;case"Start":this._flexElement.style.alignItems="flex-start";break;case"End":this._flexElement.style.alignItems="flex-end";break;case"Baseline":this._flexElement.style.alignItems="baseline";break;default:this._flexElement.style.alignItems="stretch"}if("afterInit"===x.changeName||"justifyContent"===x.changeName)switch(this.justifyContent){case"Center":this._flexElement.style.justifyContent="center";break;case"Start":this._flexElement.style.justifyContent="flex-start";break;case"End":this._flexElement.style.justifyContent="flex-end";break;case"Space-between":this._flexElement.style.justifyContent="space-between";break;case"Space-around":this._flexElement.style.justifyContent="space-around";break;case"Space-evenly":this._flexElement.style.justifyContent="space-evenly";break;default:this._flexElement.style.justifyContent="flex-start"}}}A.TableCell=TableCell}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class TableRow extends x.UI.ItemBase{constructor(x,A){super(x,A),this.properties={designerType:{propertyType:"base",defaultValue:"Control"},backgroundColor:{defaultValue:"@BackgroundColor"},hoverBackgroundColor:{defaultValue:"@HoverBackgroundColor"},pressedBackgroundColor:{defaultValue:"@PressedBackgroundColor"},selectedBackgroundColor:{defaultValue:"@CheckedBackgroundColor"},selectedHoverBackgroundColor:{defaultValue:"@CheckedBackgroundColor"},selectedPressedBackgroundColor:{defaultValue:"@CheckedPressedBackgroundColor"},disabledBackgroundColor:{defaultValue:"@DisabledBackgroundColor"},borderColor:{defaultValue:"@BorderColor"},hoverBorderColor:{defaultValue:"@HoverBorderColor"},selectedBorderColor:{defaultValue:"@CheckedBorderColor"},selectedHoverBorderColor:{defaultValue:"@CheckedHoverBorderColor"},disabledBorderColor:{defaultValue:"@DisabledBorderColor"}},this.cssStyles={coreStyle:!0,css:"\n            .vw-tablerow {\n                width: 100%;\n            }\n        "},this.isInDesignMode&&x.parentElement&&x.parentElement.winControl&&"DataTemplateView"===x.parentElement.winControl.__VWCONTROL__?(this.element.style.display="flex",this.element.style.flexDirection="row",this.inlineOptions.designerType="ContentControl"):this.element.style.display="table-row";this.initialize(TableRow,{inputEventsEnable:!0,namespace:"VisiWin.UI",cssClassPrefix:"vw"})}_updateColors(A){this.disabled?(this.setColor("disabledBackgroundColor","backgroundColor"),this.setColor("disabledBorderColor","borderColor")):this.selectionMode!==x.UI.Enums.SelectionMode.None?this.checked?(this.setColor("selectedBackgroundColor","backgroundColor"),this.pressed?this.setColor("selectedPressedBackgroundColor","backgroundColor"):this.hover?(this.setColor("selectedHoverBorderColor","borderColor"),this.setColor("selectedHoverBackgroundColor","backgroundColor")):this.setColor("selectedBorderColor","borderColor")):(this.setColor("backgroundColor","backgroundColor"),this.pressed?this.setColor("pressedBackgroundColor","backgroundColor"):this.hover?(this.setColor("hoverBorderColor","borderColor"),this.setColor("hoverBackgroundColor","backgroundColor")):this.setColor("borderColor","borderColor")):(this.setColor("borderColor","borderColor"),this.setColor("backgroundColor","backgroundColor"))}_updateLayout(x){}}A.TableRow=TableRow}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class SelectBox extends x.UI.ControlBase{constructor(x,A){super(x,A),this.properties={designerType:{propertyType:"base",defaultValue:"Control"},variant:{},outlined:{defaultValue:!1},dataSource:{},dataTemplate:{},selectedIndex:{type:"number",defaultValue:-1},selectedValue:{},selectedIndexChanged:{propertyType:"event",triggerDataName:"triggerData"},checkedChanged:{propertyType:"event"},itemsLoaded:{propertyType:"event"},itemInserted:{propertyType:"event"},checked:{propertyType:"custom",type:"boolean",defaultValue:!1},open:{propertyType:"custom",type:"boolean",defaultValue:!1},error:{propertyType:"member",type:"boolean",defaultValue:!1},errorMode:{propertyType:"custom",type:"boolean",defaultValue:!1},height:{propertyType:"style",element:"_containerElement",style:"height",defaultValue:"40px",forceOverwrite:!0},borderWidth:{propertyType:"style",element:"_containerElement",style:"borderWidth",forceOverwrite:!0},borderStyle:{propertyType:"style",element:"_containerElement",style:"borderStyle",forceOverwrite:!0},borderRadius:{propertyType:"style",element:"_containerElement",style:"borderRadius",forceOverwrite:!0},fieldContainerPadding:{propertyType:"style",element:"_fieldContainerElement",style:"padding",defaultValue:"0px 0px 0px 16px"},itemStyle:{defaultValue:"Default"},watermarkText:{},localizableWatermarkText:{},showLabelSymbol:{propertyType:"controlChild",type:"boolean",child:"_labelControl",childProperty:"showSymbol",defaultValue:!1},labelIconFont:{propertyType:"controlChild",type:"string",child:"_labelControl",childProperty:"iconFont",defaultValue:"material-icons"},labelSymbol:{propertyType:"controlChild",type:"string",child:"_labelControl",childProperty:"symbol"},labelSymbolType:{propertyType:"controlChild",type:"string",child:"_labelControl",childProperty:"symbolType",defaultValue:"Icon"},labelSymbolSize:{propertyType:"controlChild",type:"string",child:"_labelControl",childProperty:"symbolSize"},labelSymbolMargin:{propertyType:"controlChild",type:"string",child:"_labelControl",childProperty:"symbolMargin"},labelSymbolPosition:{propertyType:"controlChild",type:"string",child:"_labelControl",childProperty:"symbolPosition"},labelContainerWidth:{propertyType:"controlChild",type:"string",child:"_labelControl",childProperty:"width"},labelContainerHeight:{propertyType:"controlChild",type:"string",child:"_labelControl",childProperty:"height"},labelContainerMargin:{propertyType:"controlChild",type:"string",child:"_labelControl",childProperty:"margin"},labelContainerPadding:{propertyType:"controlChild",type:"string",child:"_labelControl",childProperty:"padding"},showLabel:{propertyType:"controlChild",type:"boolean",child:"_labelControl",childProperty:"showText",defaultValue:!0},labelWidth:{propertyType:"controlChild",type:"string",child:"_labelControl",childProperty:"textWidth"},labelHeight:{propertyType:"controlChild",type:"string",child:"_labelControl",childProperty:"textHeight"},labelMargin:{propertyType:"controlChild",type:"string",child:"_labelControl",childProperty:"textMargin"},labelPadding:{propertyType:"controlChild",type:"string",child:"_labelControl",childProperty:"textPadding"},labelText:{propertyType:"controlChild",type:"string",child:"_labelControl",childProperty:"text",forceOverwrite:!0,defaultValue:"Select"},localizableLabelText:{propertyType:"controlChild",type:"string",child:"_labelControl",childProperty:"localizableText",forceOverwrite:!0},labelTextAlignment:{propertyType:"controlChild",type:"string",child:"_labelControl",childProperty:"textAlignment"},labelLineClamp:{propertyType:"controlChild",type:"number",child:"_labelControl",childProperty:"lineClamp"},labelTextWrapping:{propertyType:"controlChild",type:"string",child:"_labelControl",childProperty:"textWrapping"},labelTextTrimming:{propertyType:"controlChild",type:"string",child:"_labelControl",childProperty:"textTrimming"},labelFontClass:{propertyType:"controlChild",type:"string",child:"_labelControl",childProperty:"fontClass",defaultValue:"Label2"},labelFontSize:{propertyType:"controlChild",type:"string",child:"_labelControl",childProperty:"fontSize"},labelFontWeight:{propertyType:"controlChild",type:"string",child:"_labelControl",childProperty:"fontWeight"},labelLineHeight:{propertyType:"controlChild",type:"string",child:"_labelControl",childProperty:"lineHeight"},labelTextContrast:{propertyType:"controlChild",type:"number",child:"_labelControl",childProperty:"textContrast"},labelUppercase:{propertyType:"controlChild",type:"boolean",child:"_labelControl",childProperty:"uppercase"},labelPosition:{propertyType:"member",defaultValue:"Top"},textContainerWidth:{propertyType:"style",type:"string",element:"_textContainerElement",style:"width"},textContainerHeight:{propertyType:"style",type:"string",element:"_textContainerElement",style:"height"},textContainerMargin:{propertyType:"style",type:"string",element:"_textContainerElement",style:"margin"},textContainerPadding:{propertyType:"style",type:"string",element:"_textContainerElement",style:"padding"},showPrimaryText:{propertyType:"controlChild",type:"boolean",child:"_primaryTextControl",childProperty:"show",defaultValue:!0},primaryTextWidth:{propertyType:"controlChild",type:"string",child:"_primaryTextControl",childProperty:"width"},primaryTextHeight:{propertyType:"controlChild",type:"string",child:"_primaryTextControl",childProperty:"height"},primaryTextMargin:{propertyType:"controlChild",type:"string",child:"_primaryTextControl",childProperty:"margin"},primaryTextPadding:{propertyType:"controlChild",type:"string",child:"_primaryTextControl",childProperty:"padding"},primaryText:{propertyType:"controlChild",type:"string",child:"_primaryTextControl",childProperty:"text",defaultValue:""},localizablePrimaryText:{propertyType:"controlChild",type:"string",child:"_primaryTextControl",childProperty:"localizableText"},primaryTextAlignment:{propertyType:"controlChild",type:"string",child:"_primaryTextControl",childProperty:"textAlignment"},primaryTextLineClamp:{propertyType:"controlChild",type:"number",child:"_primaryTextControl",childProperty:"lineClamp"},primaryTextWrapping:{propertyType:"controlChild",type:"string",child:"_primaryTextControl",childProperty:"textWrapping"},primaryTextTrimming:{propertyType:"controlChild",type:"string",child:"_primaryTextControl",childProperty:"textTrimming"},primaryTextFontClass:{propertyType:"controlChild",type:"string",child:"_primaryTextControl",childProperty:"fontClass"},primaryTextFontSize:{propertyType:"controlChild",type:"string",child:"_primaryTextControl",childProperty:"fontSize"},primaryTextFontWeight:{propertyType:"controlChild",type:"string",child:"_primaryTextControl",childProperty:"fontWeight"},primaryTextLineHeight:{propertyType:"controlChild",type:"string",child:"_primaryTextControl",childProperty:"lineHeight"},primaryTextContrast:{propertyType:"controlChild",type:"number",child:"_primaryTextControl",childProperty:"textContrast"},primaryTextUppercase:{propertyType:"controlChild",type:"boolean",child:"_primaryTextControl",childProperty:"uppercase"},showSecondaryText:{propertyType:"controlChild",type:"boolean",child:"_secondaryTextControl",childProperty:"show",defaultValue:!1},secondaryTextWidth:{propertyType:"controlChild",type:"string",child:"_secondaryTextControl",childProperty:"width"},secondaryTextHeight:{propertyType:"controlChild",type:"string",child:"_secondaryTextControl",childProperty:"height"},secondaryTextMargin:{propertyType:"controlChild",type:"string",child:"_secondaryTextControl",childProperty:"margin"},secondaryTextPadding:{propertyType:"controlChild",type:"string",child:"_secondaryTextControl",childProperty:"padding"},secondaryText:{propertyType:"controlChild",type:"string",child:"_secondaryTextControl",childProperty:"text",defaultValue:""},localizableSecondaryText:{propertyType:"controlChild",type:"string",child:"_secondaryTextControl",childProperty:"localizableText"},secondaryTextAlignment:{propertyType:"controlChild",type:"string",child:"_secondaryTextControl",childProperty:"textAlignment"},secondaryTextLineClamp:{propertyType:"controlChild",type:"number",child:"_secondaryTextControl",childProperty:"lineClamp"},secondaryTextWrapping:{propertyType:"controlChild",type:"string",child:"_secondaryTextControl",childProperty:"textWrapping"},secondaryTextTrimming:{propertyType:"controlChild",type:"string",child:"_secondaryTextControl",childProperty:"textTrimming"},secondaryTextFontClass:{propertyType:"controlChild",type:"string",child:"_secondaryTextControl",childProperty:"fontClass"},secondaryTextFontSize:{propertyType:"controlChild",type:"string",child:"_secondaryTextControl",childProperty:"fontSize"},secondaryTextFontWeight:{propertyType:"controlChild",type:"string",child:"_secondaryTextControl",childProperty:"fontWeight"},secondaryTextLineHeight:{propertyType:"controlChild",type:"string",child:"_secondaryTextControl",childProperty:"lineHeight"},secondaryTextContrast:{propertyType:"controlChild",type:"number",child:"_secondaryTextControl",childProperty:"textContrast"},secondaryTextUppercase:{propertyType:"controlChild",type:"boolean",child:"_secondaryTextControl",childProperty:"uppercase"},showSymbol:{propertyType:"controlChild",type:"boolean",child:"_symbolControl",childProperty:"show",defaultValue:!1},iconFont:{propertyType:"controlChild",type:"string",child:"_symbolControl"},symbolType:{propertyType:"controlChild",type:"string",child:"_symbolControl"},symbolSize:{propertyType:"controlChild",type:"string",child:"_symbolControl"},symbolMargin:{propertyType:"controlChild",type:"string",child:"_symbolControl",childProperty:"margin"},floatingLabelFieldMargin:{propertyType:"style",element:"_floatingLabelFieldElement",style:"margin"},showFloatingLabel:{propertyType:"controlChild",type:"boolean",child:"_floatingLabelControl",childProperty:"show",defaultValue:!1},floatingLabelWidth:{propertyType:"controlChild",type:"string",child:"_floatingLabelControl",childProperty:"width"},floatingLabelHeight:{propertyType:"controlChild",type:"string",child:"_floatingLabelControl",childProperty:"height"},floatingLabelMargin:{propertyType:"controlChild",type:"string",child:"_floatingLabelControl",childProperty:"margin"},floatingLabelPadding:{propertyType:"controlChild",type:"string",child:"_floatingLabelControl",childProperty:"padding"},floatingLabelText:{propertyType:"controlChild",type:"string",child:"_floatingLabelControl",childProperty:"text",defaultValue:"Select"},localizableFloatingLabelText:{propertyType:"controlChild",type:"string",child:"_floatingLabelControl",childProperty:"localizableText"},floatingLabelTextAlignment:{propertyType:"controlChild",type:"string",child:"_floatingLabelControl",childProperty:"textAlignment"},floatingLabelLineClamp:{propertyType:"controlChild",type:"number",child:"_floatingLabelControl",childProperty:"lineClamp"},floatingLabelTextWrapping:{propertyType:"controlChild",type:"string",child:"_floatingLabelControl",childProperty:"textWrapping"},floatingLabelTextTrimming:{propertyType:"controlChild",type:"string",child:"_floatingLabelControl",childProperty:"textTrimming"},floatingLabelFontClass:{propertyType:"controlChild",type:"string",child:"_floatingLabelControl",childProperty:"fontClass"},floatingLabelFontSize:{propertyType:"controlChild",type:"string",child:"_floatingLabelControl",childProperty:"fontSize"},floatingLabelFontWeight:{propertyType:"controlChild",type:"string",child:"_floatingLabelControl",childProperty:"fontWeight"},floatingLabelLineHeight:{propertyType:"controlChild",type:"string",child:"_floatingLabelControl",childProperty:"lineHeight"},floatingLabelTextContrast:{propertyType:"controlChild",type:"number",child:"_floatingLabelControl",childProperty:"textContrast"},floatingLabelUppercase:{propertyType:"controlChild",type:"boolean",child:"_floatingLabelControl",childProperty:"uppercase"},floatingLabelFixed:{propertyType:"member",type:"boolean",defaultValue:!1},floatingLabelTransform:{},checkedFloatingLabelTransform:{defaultValue:"scale(0.75)"},uncheckedFloatingLabelTransform:{defaultValue:"scale(1)"},floatingLabelTransition:{},floatingLabelOutlineWidth:{},floatingLabelOutlineStyle:{},showStateSymbol:{propertyType:"controlChild",child:"_stateSymbolControl",childProperty:"show",type:"boolean",defaultValue:!0},stateSymbolIconFont:{propertyType:"controlChild",child:"_stateSymbolControl",childProperty:"iconFont"},stateSymbolType:{propertyType:"controlChild",child:"_stateSymbolControl",childProperty:"symbolType"},stateSymbolSize:{propertyType:"controlChild",child:"_stateSymbolControl",childProperty:"symbolSize"},stateSymbolMargin:{propertyType:"controlChild",child:"_stateSymbolControl",childProperty:"margin"},openedStateSymbol:{defaultValue:"arrow_drop_up"},closedStateSymbol:{defaultValue:"arrow_drop_down"},showUnderline:{type:"boolean",defaultValue:!1},underlineHeight:{propertyType:"style",defaultValue:"2px"},underlineTransition:{defaultValue:""},underlineOpacity:{type:"number",defaultValue:0},checkedUnderlineOpacity:{type:"number",defaultValue:1},underlineTransform:{defaultValue:""},checkedUnderlineTransform:{defaultValue:""},menuWidth:{propertyType:"child",child:"_menuElement",childProperty:"width",defaultValue:"100%"},menuHeight:{propertyType:"child",child:"_menuElement",childProperty:"height",defaultValue:"auto"},menuMargin:{propertyType:"child",child:"_menuElement",childProperty:"margin",defaultValue:"0px"},menuPadding:{propertyType:"child",child:"_menuElement",childProperty:"padding"},menuBorderWidth:{propertyType:"child",child:"_menuElement",childProperty:"borderWidth",defaultValue:"1px"},menuBorderStyle:{propertyType:"child",child:"_menuElement",childProperty:"borderStyle",defaultValue:"solid"},menuBorderRadius:{propertyType:"child",child:"_menuElement",childProperty:"borderRadius",defaultValue:"0px"},menuShadow:{propertyType:"child",child:"_menuElement",childProperty:"shadow"},menuPlacement:{defaultValue:"Bottom"},showHelperText:{type:"boolean",defaultValue:!1},helperTextWidth:{propertyType:"controlChild",type:"string",child:"_helperTextControl",childProperty:"width"},helperTextHeight:{propertyType:"controlChild",type:"string",child:"_helperTextControl",childProperty:"height"},helperTextMargin:{propertyType:"controlChild",type:"string",child:"_helperTextControl",childProperty:"margin"},helperTextPadding:{propertyType:"controlChild",type:"string",child:"_helperTextControl",childProperty:"padding"},helperText:{propertyType:"controlChild",type:"string",child:"_helperTextControl",childProperty:"text",defaultValue:"HelperText"},localizableHelperText:{propertyType:"controlChild",type:"string",child:"_helperTextControl",childProperty:"localizableText"},helperTextAlignment:{propertyType:"controlChild",type:"string",child:"_helperTextControl",childProperty:"textAlignment"},helperTextLineClamp:{propertyType:"controlChild",type:"number",child:"_helperTextControl",childProperty:"lineClamp"},helperTextWrapping:{propertyType:"controlChild",type:"string",child:"_helperTextControl",childProperty:"textWrapping"},helperTextTrimming:{propertyType:"controlChild",type:"string",child:"_helperTextControl",childProperty:"textTrimming"},helperTextFontClass:{propertyType:"controlChild",type:"string",child:"_helperTextControl",childProperty:"fontClass",defaultValue:"Label2"},helperTextFontSize:{propertyType:"controlChild",type:"string",child:"_helperTextControl",childProperty:"fontSize"},helperTextFontWeight:{propertyType:"controlChild",type:"string",child:"_helperTextControl",childProperty:"fontWeight"},helperTextLineHeight:{propertyType:"controlChild",type:"string",child:"_helperTextControl",childProperty:"lineHeight"},helperTextContrast:{propertyType:"controlChild",type:"number",child:"_helperTextControl",childProperty:"textContrast"},helperTextUppercase:{propertyType:"controlChild",type:"boolean",child:"_helperTextControl",childProperty:"uppercase"},showErrorText:{type:"boolean",defaultValue:!1},errorTextWidth:{propertyType:"controlChild",type:"string",child:"_errorTextControl",childProperty:"width"},errorTextHeight:{propertyType:"controlChild",type:"string",child:"_errorTextControl",childProperty:"height"},errorTextMargin:{propertyType:"controlChild",type:"string",child:"_errorTextControl",childProperty:"margin"},errorTextPadding:{propertyType:"controlChild",type:"string",child:"_errorTextControl",childProperty:"padding"},errorText:{propertyType:"controlChild",type:"string",child:"_errorTextControl",childProperty:"text",defaultValue:"ErrorText"},localizableErrorText:{propertyType:"controlChild",type:"string",child:"_errorTextControl",childProperty:"localizableText"},errorTextAlignment:{propertyType:"controlChild",type:"string",child:"_errorTextControl",childProperty:"textAlignment"},errorTextLineClamp:{propertyType:"controlChild",type:"number",child:"_errorTextControl",childProperty:"lineClamp"},errorTextWrapping:{propertyType:"controlChild",type:"string",child:"_errorTextControl",childProperty:"textWrapping"},errorTextTrimming:{propertyType:"controlChild",type:"string",child:"_errorTextControl",childProperty:"textTrimming"},errorTextFontClass:{propertyType:"controlChild",type:"string",child:"_errorTextControl",childProperty:"fontClass",defaultValue:"Label2"},errorTextFontSize:{propertyType:"controlChild",type:"string",child:"_errorTextControl",childProperty:"fontSize"},errorTextFontWeight:{propertyType:"controlChild",type:"string",child:"_errorTextControl",childProperty:"fontWeight"},errorTextLineHeight:{propertyType:"controlChild",type:"string",child:"_errorTextControl",childProperty:"lineHeight"},errorTextContrast:{propertyType:"controlChild",type:"number",child:"_errorTextControl",childProperty:"textContrast"},errorTextUppercase:{propertyType:"controlChild",type:"boolean",child:"_errorTextControl",childProperty:"uppercase"},overflowErrorText:{type:"boolean",defaultValue:!1},backgroundColor:{defaultValue:"@BackgroundColor"},hoverBackgroundColor:{defaultValue:"@BackgroundColor"},checkedBackgroundColor:{defaultValue:"@None"},floatingLabelBackgroundColor:{defaultValue:"@None"},labelForegroundColor:{defaultValue:"@ForegroundColor"},labelSymbolForegroundColor:{defaultValue:"@ForegroundColor"},primaryTextForegroundColor:{defaultValue:"@ForegroundColor"},secondaryTextForegroundColor:{defaultValue:"@ForegroundColor"},symbolForegroundColor:{defaultValue:"@ForegroundColor"},floatingLabelForegroundColor:{defaultValue:"@ForegroundColor"},checkedFloatingLabelForegroundColor:{defaultValue:"@ForegroundColor"},stateSymbolForegroundColor:{defaultValue:"@ForegroundColor"},helperTextForegroundColor:{defaultValue:"@ForegroundColor"},errorColor:{defaultValue:"@ErrorColor"},borderColor:{defaultValue:"@BorderColor"},hoverBorderColor:{defaultValue:"@HoverBorderColor"},checkedBorderColor:{defaultValue:"@CheckedBorderColor"},underlineColor:{defaultValue:"@BorderColor"},checkedUnderlineColor:{defaultValue:"@CheckedBorderColor"},menuBackgroundColor:{defaultValue:"@BackgroundColor"},menuBorderColor:{defaultValue:"@BorderColor"},floatingLabelOutlineColor:{defaultValue:"@None"},containerBackgroundColor:{defaultValue:"@BackgroundColor"},disabledBackgroundColor:{defaultValue:"@DisabledBackgroundColor"},disabledForegroundColor:{defaultValue:"@DisabledForegroundColor"},disabledBorderColor:{defaultValue:"@DisabledBorderColor"},disabledFloatingLabelOutlineColor:{defaultValue:"@None"}},this.cssStyles={css:"\n        .vw-selectbox {\n            position: relative;\n            width: 250px;\n            height: auto;\n            margin: 8px;\n            display: flex;\n            flex-direction: column;\n            align-items: flex-start;\n            justify-content: center;\n            flex-shrink: 0;\n        }\n\n        .vw-selectbox[disabled] {\n            cursor: default;\n            pointer-events: none;\n        }\n        \n        .vw-selectbox__label {\n            max-width: 100%;\n            margin: 0px;\n        }\n        \n        .vw-selectbox__label .vw-label__symbol {\n            margin: 0 8px 4px 0;\n        }\n        \n        .vw-selectbox__label .vw-label__text {\n            margin: 0 0 4px 0;\n        }\n        \n        .vw-selectbox__container {\n            display: flex;\n            flex-direction: row;\n            align-items: center;\n            position: relative;\n            width: 100%;\n            height: 56px;\n            border-style: solid;\n            border-width: 1px;\n        }\n\n        .vw-selectbox__fieldcontainer {\n            position: relative;\n            width: 100%;\n            height: 100%;\n            display: flex;\n            flex-direction: row;\n            padding: 0 0 0 8px;\n            align-items: center;\n        }\n        \n        .vw-selectbox__textcontainer {\n            position: relative;\n            height: auto;\n            display: flex;\n            flex-direction: column;\n            justify-content: center;\n            align-items: flex-start;\n            flex: 1;\n            cursor: pointer;\n        }\n\n        .vw-selectbox__primarytext {\n            width: 100%;\n        }\n        \n        .vw-selectbox__secondarytext {\n            width: 100%;\n        }\n        \n        .vw-selectbox__symbol {\n            margin: 0 8px 0 0;\n            pointer-events: none;\n        }\n        \n        .vw-selectbox__floatinglabelfield {\n            display: none;\n            position: absolute;\n            width: 100%;\n            height: 100%;\n            align-items: center;\n            alignSelf = center;\n            pointer-events: none;\n            will-change: transform;\n        }\n\n        .vw-selectbox__floatinglabel {\n            width: auto;\n            height: auto;\n            max-width: 100%;\n            flex-shrink: 1;\n            pointer-events: none;\n            transform-origin: left center;\n        }\n        \n        .vw-selectbox__statesymbol {\n            margin: 0 8px 0 0;\n            pointer-events: none;\n            transform: rotate(0deg);\n            -webkit-transform: rotate(0deg);\n        }\n        \n        .vw-selectbox__underline {\n            position: absolute;\n            width: 100%;\n            height: 1px;\n            left: 0;\n            bottom: 0;\n            opacity: 0;\n            pointer-events: none;\n            transform: scaleX(0);\n        }\n        \n        .vw-selectbox__menu {\n            display: none;\n            position: relative;\n            z-index: 10;\n        }\n        \n        .vw-selectbox__helpertextcontainer {\n            width: 100%;\n            height: auto;\n        }\n\n        .vw-selectbox__helpertext {\n            width: 100%;\n            height: auto;\n            margin: 4px 0 0 0;\n        }\n        \n        .vw-selectbox__errortext {\n            display: block;\n            position: relative;\n            z-index: 2;\n            width: 100%;\n            height: auto;\n            margin: 4px 0 0 0;\n        }\n\n        .vw-selectbox__notch {\n            display: none;\n            position: absolute;\n            top: -1px;\n            left: -3px;\n            border-color: white;\n            border-style: solid;\n            border-width: 1px 0 0 0;\n        }                  \n        "},this._itemsLoaded=!1,this._labelControl=null,this._containerElement=null,this._fieldContainerElement=null,this._textContainerElement=null,this._primaryTextControl=null,this._secondaryTextControl=null,this._symbolControl=null,this._floatingLabelFieldElement=null,this._floatingLabelControl=null,this._stateSymbolControl=null,this._underlineElement=null,this._menuElement=null,this._helperTextControl=null,this._errorTextControl=null,this._popoverElement=null,this._renderItem=null,this._notchElement=null,this.selectedItem=null,this._inlineItems=!1,this._clone=null,this._itemsCache=null,this._boundPopoverHandler=this._popoverHandler.bind(this),this._boundHoverInHandler=this._hoverInHandler.bind(this),this._boundHoverOutHandler=this._hoverOutHandler.bind(this),this._boundBeforeShowChangedHandler=this._beforeShowChangedHandler.bind(this),this._boundBeforeHideChangedHandler=this._beforeHideChangedHandler.bind(this),this._boundItemsLoaded=this._onItemsLoaded.bind(this),this._boundSelectedIndexChangedHandler=this._onSelectedIndexChangedHandler.bind(this),this._dataListeners={itemChanged:this._onItemChanged.bind(this),itemInserted:this._onItemInserted.bind(this),itemMoved:this._onItemMoved.bind(this),itemRemoved:this._onItemRemoved.bind(this),itemsReloaded:this._onItemsReloaded.bind(this)},this._itemsLoadedEventType="itemsLoaded",this._itemInsertedEventType="itemInserted",this._itemChangedEventType="itemChanged",this._itemMovedEventType="itemMoved",this._itemRemovedEventType="itemRemoved",this._itemsReloadedEventType="itemsReloaded",this.__checked=!1,this._errorMode=!1;this.initialize(SelectBox,{namespace:"VisiWin.UI"})}createTemplate(){let x=null,A="",V=this.inlineOptions.itemStyle||"default";if(this.element.children.length>0&&(this._inlineItems=!0),x=document.createElement("div"),this.reparentChildren(this.element,x),this.verifyShowProperty("showLabel")&&(A+='<div data-ref="_labelControl" class="vw-selectbox__label" data-win-control="VisiWin.UI.Label" data-win-options="{showSymbol:\' + showLabelSymbol + \'}"></div>'),A+='\n                <div data-ref-element="_containerElement" tabindex="1" class="vw-selectbox__container">\n                    <div data-ref-element="_fieldContainerElement" class="vw-selectbox__fieldcontainer">',this.verifyShowProperty("showSymbol")&&(A+='<div data-ref="_symbolControl" class="vw-selectbox__symbol" data-win-control="VisiWin.UI.Symbol"></div>'),A+='<div data-ref-element="_textContainerElement" class="vw-selectbox__textcontainer">',this.verifyShowProperty("showFloatingLabel")&&(A+='<div data-ref="_floatingLabelControl" class="vw-selectbox__floatinglabel" data-win-control="VisiWin.UI.TextBlock"></div>'),A+='<div data-ref="_primaryTextControl" class="vw-selectbox__primarytext" data-win-control="VisiWin.UI.TextBlock"></div>\n                                      <div data-ref="_secondaryTextControl" class="vw-selectbox__secondarytext" data-win-control="VisiWin.UI.TextBlock"></div>\n                                    </div>',A+='<div data-ref-element="_floatingLabelFieldElement" class="vw-selectbox__floatinglabelfield">\n                                            <div data-ref-element="_notchElement" class="vw-selectbox__notch" ></div>    \n                                      </div>',A+="</div>",this.verifyShowProperty("showStateSymbol")&&(A+='<div data-ref="_stateSymbolControl" class="vw-selectbox__statesymbol" data-win-control="VisiWin.UI.Symbol"></div>'),this.verifyShowProperty("showUnderline")&&(A+='<div data-ref-element="_underlineElement" class="vw-selectbox__underline"></div>'),A+="</div>",A+='<div class="vw-selectbox__helpertextcontainer">',this.verifyShowProperty("showErrorText")&&(A+='<div data-ref="_errorTextControl" class="vw-selectbox__errortext" data-win-control="VisiWin.UI.TextBlock"></div>'),this.verifyShowProperty("showHelperText")&&(A+='<div data-ref="_helperTextControl" class="vw-selectbox__helpertext" data-win-control="VisiWin.UI.TextBlock"></div>'),A+="</div>",A+=`<div data-ref-element="_menuElement" class="vw-selectbox__menu" data-win-control="VisiWin.UI.PopoverMenu" data-win-options='{"menuItemStyle":"${V}"}'></div>`,this.element.innerHTML=A,this._inlineItems){let A=this.element.querySelector('[data-win-control="VisiWin.UI.PopoverMenu"]');this.reparentChildren(x,A)}return this.initializeChilds()}createHandler(){this._containerElement.addEventListener("pointerup",this._boundPopoverHandler,!1),this._containerElement.addEventListener("pointerenter",this._boundHoverInHandler,!1),this._containerElement.addEventListener("pointerleave",this._boundHoverOutHandler,!1),this._menuElement.winControl.addEventListener("itemsLoaded",this._boundItemsLoaded),this._menuElement.winControl.addEventListener("selectedIndexChanged",this._boundSelectedIndexChangedHandler),this._addDataListeners()}removeHandler(){this._containerElement.removeEventListener("pointerup",this._boundPopoverHandler,!1),this._containerElement.removeEventListener("pointerenter",this._boundHoverInHandler,!1),this._containerElement.removeEventListener("pointerleave",this._boundHoverOutHandler,!1),this._menuElement.winControl.removeEventListener("itemsLoaded",this._boundItemsLoaded),this._menuElement.winControl.removeEventListener("selectedIndexChanged",this._boundSelectedIndexChangedHandler),this.observe=null,this._removeDataListeners()}_addDataListeners(){Object.keys(this._dataListeners).forEach(x=>{this._menuElement.winControl.addEventListener(x,this._dataListeners[x],!1)})}_removeDataListeners(){Object.keys(this._dataListeners).forEach(x=>{this._menuElement.winControl.removeEventListener(x,this._dataListeners[x],!1)})}_onSelectedIndexChangedHandler(x){this.triggerData=x.detail,this.updateLayoutEnable(!1),x.detail&&(this.selectedIndex=this._menuElement.winControl.selectedIndex,this.selectedValue=this._menuElement.winControl.selectedValue,this.selectedItem=this._menuElement.winControl.selectedItem),this.updateLayoutEnable(!0),this._setSelectOptions(this.selectedItem),this.dispatchEvent("selectedIndexChanged",this.triggerData)}_onItemInserted(x){this.itemInsertedTriggerData=x.detail,this.dispatchEvent(this._itemInsertedEventType,this.itemInsertedTriggerData)}_onItemChanged(x){this.itemChangedTriggerData=x.detail,this.dispatchEvent(this._itemChangedEventType,this.itemChangedTriggerData)}_onItemMoved(x){this.itemMovedTriggerData=x.detail,this.dispatchEvent(this._itemMovedEventType,this.itemMovedTriggerData)}_onItemRemoved(x){this.itemRemovedTriggerData=x.detail,this.dispatchEvent(this._itemRemovedEventType,this.itemRemovedTriggerData)}_onItemsReloaded(x){this.itemsReloadedTriggerData=x.detail,this.dispatchEvent(this._itemsReloadedEventType,this.itemsReloadedTriggerData)}getSelectedItemData(){let x=this.selectedIndex,A="";return this._popoverElement._itemsContainer&&this._popoverElement._itemsContainer.dataSource&&x>=0&&x in this._popoverElement._itemsContainer.dataSource._keys&&(A=this._popoverElement._itemsContainer.dataSource._keyMap[this._popoverElement._itemsContainer.dataSource._keys[x]].data),A}_onItemsLoaded(){this._itemsLoaded=!0,this.isInRunMode&&this._menuElement.remove(),this._menuElement.style.display="flex",this._showSymbolSelectBox=this.showSymbol,this._updateLayoutBase("event","itemsLoaded",null,null),this.dispatchEvent("itemsLoaded",!0)}get checked(){return this.__checked}set checked(A){if(this.__checked!=A){this._menuElement.winControl&&this._menuElement.winControl._itemsContainer&&this._menuElement.winControl._itemsContainer.selectedIndex!==this.selectedIndex&&(this._menuElement.winControl._itemsContainer.selectedIndex=this.selectedIndex);var V=this.__checked;this.__checked=A,this.__checked?(x.Utilities.addClass(this.element,"checked"),x.Utilities.removeClass(this.element,"unchecked")):(x.Utilities.removeClass(this.element,"checked"),x.Utilities.addClass(this.element,"unchecked")),this._updateColorsBase("state","checked",A,V),this._updateLayoutBase("state","checked",A,V),this.dispatchNotifyPropertyChanged("state","checked",A,V,"checkedChanged")}}set open(x){this.isInDesignMode&&(this.checked=x)}get errorMode(){return this._errorMode}set errorMode(x){if(this._errorMode!=x){var A=this._errorMode;this._errorMode=x,this._updateColorsBase("state","errorMode",x,A),this._updateLayoutBase("state","errorMode",x,A),this.dispatchNotifyPropertyChanged("state","errorMode",x,A)}}_updateColors(x){"firstUpdate"!=x.changeName&&"status"!=x.changeType&&"state"!=x.changeType&&"property"!=x.changeType&&"theme"!=x.changeType||(this.disabled?(this.setColor("disabledBackgroundColor","backgroundColor","_containerElement"),this.setColor("disabledForegroundColor","backgroundColor","_underlineElement"),this.setColor("disabledForegroundColor","labelForegroundColor",null,"_labelControl"),this.setColor("disabledForegroundColor","symbolForegroundColor",null,"_labelControl"),this.setColor("disabledForegroundColor","foregroundColor",null,"_primaryTextControl"),this.setColor("disabledForegroundColor","foregroundColor",null,"_secondaryTextControl"),this.setColor("disabledForegroundColor","foregroundColor",null,"_symbolControl"),this.setColor("disabledForegroundColor","foregroundColor",null,"_stateSymbolControl"),this.setColor("disabledForegroundColor","foregroundColor",null,"_helperTextControl"),this.setColor("disabledForegroundColor","foregroundColor",null,"_errorTextControl"),this.setColor("disabledForegroundColor","foregroundColor",null,"_floatingLabelControl")):(this.setColor("backgroundColor","backgroundColor","_containerElement"),this.setColor("labelForegroundColor","labelForegroundColor",null,"_labelControl"),this.setColor("labelSymbolForegroundColor","symbolForegroundColor",null,"_labelControl"),this.setColor("primaryTextForegroundColor","foregroundColor",null,"_primaryTextControl"),this.setColor("secondaryTextForegroundColor","foregroundColor",null,"_secondaryTextControl"),this.setColor("symbolForegroundColor","foregroundColor",null,"_symbolControl"),this.setColor("stateSymbolForegroundColor","foregroundColor",null,"_stateSymbolControl"),this.setColor("helperTextForegroundColor","foregroundColor",null,"_helperTextControl"),this.setColor("menuBackgroundColor","backgroundColor","_menuElement"),this.setColor("menuBorderColor","borderColor","_menuElement"),this.checked?(this.setColor("checkedBackgroundColor","backgroundColor","_containerElement"),this.setColor("checkedFloatingLabelForegroundColor","foregroundColor",null,"_floatingLabelControl")):this.hover?this.setColor("hoverBackgroundColor","backgroundColor","_containerElement"):(this.setColor("backgroundColor","backgroundColor","_containerElement"),this.setColor("floatingLabelForegroundColor","foregroundColor",null,"_floatingLabelControl")),this.errorMode?(this.setColor("errorColor","backgroundColor","_underlineElement"),this.setColor("errorColor","borderColor","_containerElement"),this.setColor("errorColor","foregroundColor",null,"_errorTextControl"),this.setColor("errorColor","labelForegroundColor",null,"_labelControl"),this.setColor("errorColor","symbolForegroundColor",null,"_labelControl"),this.setColor("errorColor","foregroundColor",null,"_floatingLabelControl")):this.checked?(this.setColor("checkedUnderlineColor","backgroundColor","_underlineElement"),this.setColor("checkedBorderColor","borderColor","_containerElement")):this.hover?(this.setColor("underlineColor","backgroundColor","_underlineElement"),this.setColor("hoverBorderColor","borderColor","_containerElement")):(this.setColor("underlineColor","backgroundColor","_underlineElement"),this.setColor("borderColor","borderColor","_containerElement"))))}_updateLayout(x){if("afterInit"==x.changeName&&this._setVariant(this.style),"afterInit"==x.changeName&&this.showFloatingLabel&&this._floatingLabelControl&&(this._floatingLabelControl.element.style.transition=this.floatingLabelTransition,"Outlined"===this.variant&&(this._floatingLabelFieldElement.style.display="flex",this._floatingLabelFieldElement.appendChild(this._textContainerElement.removeChild(this._floatingLabelControl.element))),""==this.primaryText?this._primaryTextControl.element.style.display="none":this._primaryTextControl.element.style.display="flex"),"afterInit"!=x.changeName&&"borderWidth"!=x.changeName&&"showFloatingLabel"!=x.changeName&&"floatingLabelText"!=x.changeName&&"localizebleFloatingLabelText"!=x.changeName||this.showFloatingLabel&&this._floatingLabelControl&&"Outlined"===this.variant&&(this._notchElement.style.borderColor=this.getThemeColor(this.backgroundColor),this._notchElement.style.width=.75*this._floatingLabelControl.element.clientWidth+8+"px",this._notchElement.style.borderWidth=this.borderWidth,this._notchElement.style.top=-parseFloat(this.borderWidth)+"px"),"error"==x.changeName&&this._updateColorsBase("state","error",x.newValue,x.oldValue),"initialized"!=x.changeName&&"dataSource"!=x.changeName||this.dataSource&&!this._inlineItems&&(this._menuElement.winControl.dataSource=this.dataSource),"initialized"!=x.changeName&&"dataTemplate"!=x.changeName||this.dataTemplate&&!this._inlineItems&&(this._menuElement.winControl.dataTemplate=this.dataTemplate),"firstUpdate"!=x.changeName&&"borderRadius"!=x.changeName||(this._fieldContainerElement.style.borderRadius=this.borderRadius),"firstUpdate"!=x.changeName&&"selectedIndex"!=x.changeName||(this.isInDesignMode?this.selectedIndex>=0&&this.selectedIndex<this._menuElement.children.length&&this._inlineItems?this._setSelectOptions(this._menuElement.children[this.selectedIndex].winControl):this._setSelectOptions(null):this._inlineItems?this.selectedIndex>=0&&this.selectedIndex<this._menuElement.children.length&&this._setSelectOptions(this._menuElement.children[this.selectedIndex].winControl):this.selectedIndex>=0&&this.selectedIndex<this._menuElement.children[0].children.length&&this._setSelectOptions(this._menuElement.children[0].children[this.selectedIndex].winControl)),"itemsLoaded"!=x.changeName&&"selectedIndex"!=x.changeName||this._itemsLoaded&&(this._menuElement.winControl.selectedIndex=this.selectedIndex,-1==this.selectedIndex&&this._setSelectOptions(null)),"itemsLoaded"==x.changeName||"selectedValue"==x.changeName)if(this.isInDesignMode)for(let x=0;x<this._menuElement.children.length;x++)this._menuElement.children[x].winControl.value==this.selectedValue&&(this.selectedIndex=x);else this._itemsLoaded&&(this._menuElement.winControl.selectedValue=this.selectedValue);if("firstUpdate"==x.changeName||"labelPosition"==x.changeName)switch(this.labelPosition){case"Top":this.element.style.flexDirection="column";break;case"Right":this.element.style.flexDirection="row-reverse";break;case"Bottom":this.element.style.flexDirection="column-reverse";break;default:this.element.style.flexDirection="row"}"firstUpdate"!=x.changeName&&"checked"!=x.changeName&&"openedStateSymbol"!=x.changeName&&"closedStateSymbol"!=x.changeName||this._stateSymbolControl&&(this.checked?this._stateSymbolControl.symbol=this.openedStateSymbol:this._stateSymbolControl.symbol=this.closedStateSymbol),"firstUpdate"!=x.changeName&&"checked"!=x.changeName&&"showUnderline"!=x.changeName&&"underlineTransition"!=x.changeName&&"underlineOpacity"!=x.changeName&&"checkedUnderlineOpacity"!=x.changeName&&"underlineTransform"!=x.changeName&&"checkedUnderlineTransform"!=x.changeName||this._underlineElement&&this.showUnderline&&(this._underlineElement.style.transition=this.underlineTransition,this.checked?(this._underlineElement.style.opacity=this.checkedUnderlineOpacity,this._underlineElement.style.transform=this.checkedUnderlineTransform):(this._underlineElement.style.opacity=this.underlineOpacity,this._underlineElement.style.transform=this.underlineTransform)),"firstUpdate"!=x.changeName&&"checked"!=x.changeName||this.isInDesignMode&&this._menuElement&&this._menuElement.winControl&&(this._menuElement.style.display=this.checked?"block":"none",this._menuElement.style.position="absolute",this._menuElement.style.top=this.element.clientHeight+1+"px"),"firstUpdate"!=x.changeName&&"errorMode"!=x.changeName&&"error"!=x.changeName&&"showHelperText"!=x.changeName&&"showErrorText"!=x.changeName||(this.errorMode||this.error?(this._helperTextControl&&(this._helperTextControl.show=!1),this._errorTextControl&&(this._errorTextControl.show=this.showErrorText)):(this._helperTextControl&&(this._helperTextControl.show=this.showHelperText),this._errorTextControl&&(this._errorTextControl.show=!1))),"firstUpdate"!=x.changeName&&"overflowErrorText"!=x.changeName&&"showHelperText"!=x.changeName&&"showErrorText"!=x.changeName||(this.isInDesignMode?this.showErrorText&&(this._errorTextControl.element.style.position=this.overflowErrorText?"absolute":""):this._errorTextControl&&this.showErrorText&&!this._helperTextControl&&(this._errorTextControl.element.style.position=this.overflowErrorText?"absolute":""))}_setVariant(x){"Material.Outlined"===x?this.variant="Outlined":"Material.Default"===x?this.variant="Filled":"Plain.Default"===x?this.variant="Plain":"Default"===x&&(this.variant="Default")}_setSelectOptions(x){let A=null,V=null,R=null,D=null,N=null,U=null,B=null,F=null;if(x&&(null!=x.symbol&&x.showSymbol&&(A=x.symbol,V=x.symbolType,R=x.symbolSize),null!=x._primaryText&&x._showPrimaryText&&(D=x._primaryText),null!=x._localizablePrimaryText&&x._showPrimaryText&&(N=x._localizablePrimaryText),null!=x._secondaryText&&x._showSecondaryText&&(U=x._secondaryText),null!=x._localizableSecondaryText&&x._showSecondaryText&&(B=x._localizableSecondaryText),x.value&&"string"==typeof x.value&&"none"===x.value.toLowerCase()&&(F="none",this.selectedIndex=-1)),this._primaryTextControl)switch(this._showSymbolSelectBox&&(this._symbolControl&&A?(this._symbolControl.symbol=A,this._symbolControl.symbolType=V,this._symbolControl.symbolSize=R):this._symbolControl.symbol=null),this.variant){case"Default":"none"===F||-1===this.selectedIndex?(this.showSymbol=!1,this.showSecondaryText=!1,this.primaryText="",this.localizablePrimaryText=null,(this.watermarkText||this.localizableWatermarkText)&&(this.primaryText=this.watermarkText,this.localizablePrimaryText=this.localizableWatermarkText)):(this.primaryText=D,this.localizablePrimaryText=N);break;case"Outlined":-1===this.selectedIndex||"none"===F?(this.primaryText="",this.localizablePrimaryText=null,this.showSecondaryText=!1,this._setFloatingLabelPosition("center")):(this.primaryText=D,this.localizablePrimaryText=N,this._setFloatingLabelPosition("notch"));break;case"Filled":case"Plain":-1===this.selectedIndex||"none"===F?(this.showPrimaryText=!1,this._floatingLabelControl.element.style.transform=this.uncheckedFloatingLabelTransform):(this.showPrimaryText=!0,this._primaryTextControl.element.style.display=""==D?"none":"flex",this.primaryText=D,this.localizablePrimaryText=N,this._floatingLabelControl.element.style.transform=this.checkedFloatingLabelTransform)}U||B?(this.showSecondaryText=!0,this.secondaryText=U,this.localizableSecondaryText=B):this.showSecondaryText=!1,x&&this._textContainerElement&&this.showFloatingLabel&&(this.textContainerPadding="0px 0px 6px 0px",this._textContainerElement.style.padding=this.textContainerPadding)}_popoverHandler(A){if(!this.disabled&&this.isInRunMode){if(!this._popoverElement){let A=document.querySelector(".vw-popover");if(A)this._popoverElement=A.winControl;else{this._popoverElement=new x.UI.Popover(null,{});let A=document.querySelector(".vw-app");A.parentNode.insertBefore(this._popoverElement.element,A.nextSibling)}}"Outlined"===this.variant&&this._setFloatingLabelPosition("notch"),this._popoverElement&&(this._popoverElement.addEventListener("beforeShowChanged",this._boundBeforeShowChangedHandler,!1),this._popoverElement.addEventListener("beforeHideChanged",this._boundBeforeHideChangedHandler,!1),this._popoverElement.menuElement=this._menuElement,this._popoverElement.anchor=this._containerElement,this._popoverElement.placement=this.menuPlacement,this._popoverElement.margin=this.menuMargin,this._popoverElement.borderRadius=this.menuBorderRadius,this._popoverElement.shadow=this.menuShadow,this._popoverElement.show())}}_setFloatingLabelPosition(x){this._floatingLabelControl&&("notch"===x?(this._notchElement.style.display="block",this._floatingLabelControl.element.style.alignSelf="flex-start",this._floatingLabelControl.element.style.transform="translateX(0px) translateY(-14px) scale(0.75)"):"center"===x&&(this._notchElement.style.display="",this._floatingLabelControl.element.style.alignSelf="center",this._floatingLabelControl.element.style.transform="translateX(0px) translateY(0px) scale(1)"))}_hoverInHandler(x){this.hover=!0}_hoverOutHandler(x){this.hover=!1}_beforeShowChangedHandler(x){this.checked=!0}_beforeHideChangedHandler(x){this._popoverElement&&(this._popoverElement.removeEventListener("beforeShowChanged",this._boundBeforeShowChangedHandler,!1),this._popoverElement.removeEventListener("beforeHideChanged",this._boundBeforeHideChangedHandler,!1)),this.checked=!1}_setitemStyle(x){if(this._inlineItems&&"Default"!==this.itemStyle){let A=x.querySelectorAll("[data-win-control]"),V=Array.from(A);for(let x=0;x<V.length;x++){let A=V[x];if(this.inlineOptions.itemStyle){let x=A.getAttribute("data-win-options");if(x){let V=x.indexOf("{");x=x.substring(V+1),x='{"style":"'+this.inlineOptions.itemStyle+'",'+x,A.setAttribute("data-win-options",x)}else x='{"style":"'+this.inlineOptions.itemStyle+'"}',A.setAttribute("data-win-options",x)}}}}getItemFromIndex(x){return this._menuElement.winControl.getItemFromIndex(x)}getItemCloneFromIndex(x){return this._menuElement.winControl.getItemCloneFromIndex(x)}dispose(){return this._popoverElement&&(this._popoverElement.removeEventListener("beforeShowChanged",this._boundBeforeShowChangedHandler,!1),this._popoverElement.removeEventListener("beforeHideChanged",this._boundBeforeHideChangedHandler,!1)),super.dispose()}}A.SelectBox=SelectBox}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class SelectBoxItem extends x.UI.ItemBase{constructor(A,V){super(A,V),this.properties={designerType:{propertyType:"base",defaultValue:"Control"},selectionMode:{defaultValue:x.UI.Enums.SelectionMode.Single},symbol:{propertyType:"controlChild",child:"_symbolControl"},showSymbol:{propertyType:"controlChild",child:"_symbolControl",childProperty:"show",type:"boolean",defaultValue:!1},symbolMargin:{propertyType:"controlChild",child:"_symbolControl",childProperty:"margin"},symbolType:{propertyType:"controlChild",child:"_symbolControl"},symbolSize:{propertyType:"controlChild",child:"_symbolControl"},iconFont:{propertyType:"controlChild",child:"_symbolControl"},bitmapFit:{defaultValue:"Fill"},showPrimaryText:{propertyType:"controlChild",child:"_primaryTextControl",childProperty:"show",type:"boolean",defaultValue:!0},primaryTextWidth:{propertyType:"controlChild",child:"_primaryTextControl",childProperty:"width"},primaryTextHeight:{propertyType:"controlChild",child:"_primaryTextControl",childProperty:"height"},primaryTextMargin:{propertyType:"controlChild",child:"_primaryTextControl",childProperty:"margin"},primaryTextPadding:{propertyType:"controlChild",child:"_primaryTextControl",childProperty:"padding"},primaryText:{propertyType:"controlChild",child:"_primaryTextControl",childProperty:"text",defaultValue:"PrimaryText"},localizablePrimaryText:{propertyType:"controlChild",child:"_primaryTextControl",childProperty:"localizableText"},primaryTextAlignment:{propertyType:"controlChild",child:"_primaryTextControl",childProperty:"textAlignment"},primaryTextLineClamp:{propertyType:"controlChild",child:"_primaryTextControl",childProperty:"lineClamp",type:"number"},primaryTextWrapping:{propertyType:"controlChild",child:"_primaryTextControl",childProperty:"textWrapping"},primaryTextTrimming:{propertyType:"controlChild",child:"_primaryTextControl",childProperty:"textTrimming"},primaryTextFontClass:{propertyType:"controlChild",child:"_primaryTextControl",childProperty:"fontClass",defaultValue:"Body1"},primaryTextFontSize:{propertyType:"controlChild",child:"_primaryTextControl",childProperty:"fontSize"},primaryTextFontWeight:{propertyType:"controlChild",child:"_primaryTextControl",childProperty:"fontWeight"},primaryTextLineHeight:{propertyType:"controlChild",child:"_primaryTextControl",childProperty:"lineHeight"},primaryTextContrast:{propertyType:"controlChild",child:"_primaryTextControl",childProperty:"textContrast",type:"number"},showSecondaryText:{propertyType:"controlChild",child:"_secondaryTextControl",childProperty:"show",type:"boolean",defaultValue:!1},secondaryTextWidth:{propertyType:"controlChild",child:"_secondaryTextControl",childProperty:"width"},secondaryTextHeight:{propertyType:"controlChild",child:"_secondaryTextControl",childProperty:"height"},secondaryTextMargin:{propertyType:"controlChild",child:"_secondaryTextControl",childProperty:"margin"},secondaryTextPadding:{propertyType:"controlChild",child:"_secondaryTextControl",childProperty:"padding"},secondaryText:{propertyType:"controlChild",child:"_secondaryTextControl",childProperty:"text",defaultValue:"SecondaryText"},localizableSecondaryText:{propertyType:"controlChild",child:"_secondaryTextControl",childProperty:"localizableText"},secondaryTextAlignment:{propertyType:"controlChild",child:"_secondaryTextControl",childProperty:"textAlignment"},secondaryTextLineClamp:{propertyType:"controlChild",child:"_secondaryTextControl",childProperty:"lineClamp"},secondaryTextWrapping:{propertyType:"controlChild",child:"_secondaryTextControl",childProperty:"textWrapping"},secondaryTextTrimming:{propertyType:"controlChild",child:"_secondaryTextControl",childProperty:"textTrimming"},secondaryTextFontClass:{propertyType:"controlChild",child:"_secondaryTextControl",childProperty:"fontClass",defaultValue:"Body2"},secondaryTextFontSize:{propertyType:"controlChild",child:"_secondaryTextControl",childProperty:"fontSize"},secondaryTextFontWeight:{propertyType:"controlChild",child:"_secondaryTextControl",childProperty:"fontWeight"},secondaryTextLineHeight:{propertyType:"controlChild",child:"_secondaryTextControl",childProperty:"lineHeight"},secondaryTextContrast:{propertyType:"controlChild",child:"_secondaryTextControl",childProperty:"textContrast",type:"number"},backgroundColor:{defaultValue:"@BackgroundColor"},hoverBackgroundColor:{defaultValue:"@HoverBackgroundColor"},checkedBackgroundColor:{defaultValue:"@HoverBackgroundColor"},checkedHoverBackgroundColor:{defaultValue:"@HoverBackgroundColor"},disabledBackgroundColor:{defaultValue:"@DisabledBackgroundColor"},foregroundColor:{defaultValue:"@ForegroundColor"},checkedForegroundColor:{defaultValue:"@ForegroundColor"},disabledForegroundColor:{defaultValue:"@DisabledForegroundColor"},borderColor:{defaultValue:"@BorderColor"},hoverBorderColor:{defaultValue:"@HoverBorderColor"},checkedBorderColor:{defaultValue:"@HoverBorderColor"},checkedHoverBorderColor:{defaultValue:"@HoverBorderColor"},disabledBorderColor:{defaultValue:"@DisabledBorderColor"},rippleColor:{defaultValue:"@ButtonRippleColor"}},this.cssStyles={css:"\n            .vw-selectboxitem {\n                display: flex;\n                position: relative;\n                padding: 8px 16px;\n                cursor: pointer;\n                width: 100%;\n                height: 48px;\n                border-width: 1px;\n                overflow: hidden;\n                flex-shrink: 0;\n            }           \n\n            .vw-selectboxitem[disabled] {\n                cursor: default;\n                pointer-events: none;\n            }    \n\n            .vw-selectboxitem__textcontainer {\n                position: relative;\n                height: auto;\n                flex: 1;\n                min-width: 1px;\n                display: flex;\n                flex-direction: column;\n            } \n\n            .vw-sselectboxitem__symbol {\n                margin: 0 16px 0 0;\n            }\n\n            .vw-selectboxitem__primarytext {\n                margin: 0;\n                border-width: 10px;\n            } \n            .vw-selectboxitem__secondarytext {\n                margin: 0;\n            }\n        "},this._symbolControl=null,this._primaryTextControl=null,this._secondaryTextControl=null,this.isInDesignMode&&(!0===this.inlineOptions.dataTemplate?this.properties.designerType.defaultValue="ContentControl":this.properties.designerType.defaultValue="Control");this.initialize(SelectBoxItem,{inputEventsEnable:!0,namespace:"VisiWin.UI",cssClassPrefix:"vw"})}createTemplate(){if(!0===this.inlineOptions.dataTemplate)return;let x="";return this.verifyShowProperty("showSymbol")&&(x+='<div data-ref="_symbolControl" class="vw-selectboxitem__symbol" data-win-control="VisiWin.UI.Symbol"></div>'),x+='<div data-ref-element="_textContainer" class="vw-selectboxitem__textcontainer">',this.verifyShowProperty("showPrimaryText")&&(x+='<div data-ref="_primaryTextControl" class="vw-selectboxitem__primarytext" data-win-control="VisiWin.UI.TextBlock"></div>'),this.verifyShowProperty("showSecondaryText")&&(x+='<div data-ref="_secondaryTextControl" class="vw-selectboxitem__secondarytext" data-win-control="VisiWin.UI.TextBlock"></div>'),x+="</div>",this.element.innerHTML=x,this.initializeChilds()}_updateColors(A){"firstUpdate"!=A.changeName&&"status"!=A.changeType&&"state"!=A.changeType&&"property"!=A.changeType&&"theme"!=A.changeType||(this.disabled?(this._symbolControl&&(this._symbolControl.foregroundColor=this.disabledForegroundColor),this._primaryTextControl&&(this._primaryTextControl.foregroundColor=this.disabledForegroundColor),this._secondaryTextControl&&(this._secondaryTextControl.foregroundColor=this.disabledForegroundColor),this.setColor("disabledBackgroundColor","backgroundColor"),this.setColor("disabledBorderColor","borderColor")):this.selectionMode!=x.UI.Enums.SelectionMode.None?this.checked?(this._symbolControl&&(this._symbolControl.foregroundColor=this.checkedForegroundColor),this._primaryTextControl&&(this._primaryTextControl.foregroundColor=this.checkedForegroundColor),this._secondaryTextControl&&(this._secondaryTextControl.foregroundColor=this.checkedForegroundColor),this.setColor("checkedBackgroundColor","backgroundColor"),this.hover=!1,this.hover?(this.setColor("checkedHoverBorderColor","borderColor"),this.setColor("checkedHoverBackgroundColor","backgroundColor")):(this.setColor("checkedBorderColor","borderColor"),this.setColor("checkedBackgroundColor","backgroundColor"))):(this._symbolControl&&(this._symbolControl.foregroundColor=this.foregroundColor),this._primaryTextControl&&(this._primaryTextControl.foregroundColor=this.foregroundColor),this._secondaryTextControl&&(this._secondaryTextControl.foregroundColor=this.foregroundColor),this.hover?(this.setColor("hoverBorderColor","borderColor"),this.setColor("hoverBackgroundColor","backgroundColor")):(this.setColor("borderColor","borderColor"),this.setColor("backgroundColor","backgroundColor"))):(this._symbolControl&&(this._symbolControl.foregroundColor=this.foregroundColor),this._primaryTextControl&&(this._primaryTextControl.foregroundColor=this.foregroundColor),this._secondaryTextControl&&(this._secondaryTextControl.foregroundColor=this.foregroundColor),this.setColor("borderColor","borderColor"),this.setColor("backgroundColor","backgroundColor")))}_updateLayout(x){if("afterInit"!=x.changeName&&"orientation"!=x.changeName&&"alignItems"!=x.changeName&&"justifyContent"!=x.changeName||this.setFlexProperties(x.changeName),("afterInit"==x.changeName||"bitmapFit"==x.changeName)&&"Bitmap"===this.symbolType){let x=this.element.querySelector(".vw-symbol");if(x&&"IMG"===x.children[0].nodeName){let A=x.children[0];A&&("ScaleDown"===this.bitmapFit?A.style.objectFit="scale-down":A.style.objectFit=this.bitmapFit.charAt(0).toLowerCase()+this.bitmapFit.slice(1))}}}}A.SelectBoxItem=SelectBoxItem}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class PopoverMenu extends x.UI.ControlBase{constructor(A,V){super(A,V),this.properties={designerType:{propertyType:"base",defaultValue:"Control"},dataSource:{},dataTemplate:{},selectedIndex:{type:"number",defaultValue:-1},selectedValue:{},selectionMode:{propertyType:"controlChild",child:"_itemsContainer",defaultValue:x.UI.Enums.SelectionMode.Single},menuItemStyle:{defaultValue:"Default"},selectedIndexChanged:{propertyType:"event",triggerDataName:"selectedValue"},itemsLoaded:{propertyType:"event"},backgroundColor:{propertyType:"memberStyle",type:"color",defaultValue:"@None"},borderColor:{propertyType:"memberStyle",type:"color",defaultValue:"@None"}},this.cssStyles={css:"\n            .vw-popovermenu {\n                position: relative;\n                width:  200px;\n                height: auto;                \n                overflow-y: auto;\n            }\n        "},this._inlineItems=!1,this._itemsLoaded=!1,this._boundItemsLoaded=this._onItemsLoaded.bind(this),this._boundSelectedIndexChanged=this._onSelectedIndexChanged.bind(this),this._dataListeners={itemChanged:this._onItemChanged.bind(this),itemInserted:this._onItemInserted.bind(this),itemMoved:this._onItemMoved.bind(this),itemRemoved:this._onItemRemoved.bind(this),itemsReloaded:this._onItemsReloaded.bind(this)},this._itemsLoadedEventType="itemsLoaded",this._itemInsertedEventType="itemInserted",this._itemChangedEventType="itemChanged",this._itemMovedEventType="itemMoved",this._itemRemovedEventType="itemRemoved",this._itemsReloadedEventType="itemsReloaded";this.initialize(PopoverMenu,{namespace:"VisWin.UI"})}createTemplate(){let x=null;return this.element.children.length>0&&this.isInDesignMode?(this._inlineItems=!0,this._setMenuItemStyle(),null):(this.element.children.length>0&&(this._inlineItems=!0,this._setMenuItemStyle(),x=document.createElement("div"),this.reparentChildren(this.element,x)),this.element.innerHTML='\n                    <div data-ref="_itemsContainer" data-win-control="VisiWin.UI.ItemsContainer"></div>\n                ',this._inlineItems&&this.reparentChildren(x,this.element.firstElementChild),this.initializeChilds())}createHandler(){this._itemsContainer&&(this._itemsContainer.addEventListener("itemsLoaded",this._boundItemsLoaded),this._itemsContainer.addEventListener("selectedIndexChanged",this._boundSelectedIndexChanged)),this._addDataListeners()}removeHandler(){this._itemsContainer&&(this._itemsContainer.removeEventListener("itemsLoaded",this._boundItemsLoaded),this._itemsContainer.removeEventListener("selectedIndexChanged",this._boundSelectedIndexChanged)),this._removeDataListeners()}_addDataListeners(){Object.keys(this._dataListeners).forEach(x=>{this._itemsContainer&&this._itemsContainer.addEventListener(x,this._dataListeners[x],!1)})}_removeDataListeners(){Object.keys(this._dataListeners).forEach(x=>{this._itemsContainer.removeEventListener(x,this._dataListeners[x],!1)})}_onSelectedIndexChanged(x){this.selectedValue=x.detail.selectedValue,this.selectedItem=x.detail.selectedItem,this.selectedIndex=x.detail.selectedIndex,this.dispatchEvent("selectedIndexChanged",x.detail)}_onItemInserted(x){this.itemInsertedTriggerData=x.detail,this.dispatchEvent(this._itemInsertedEventType,this.itemInsertedTriggerData)}_onItemChanged(x){this.itemChangedTriggerData=x.detail,this.dispatchEvent(this._itemChangedEventType,this.itemChangedTriggerData)}_onItemMoved(x){this.itemMovedTriggerData=x.detail,this.dispatchEvent(this._itemMovedEventType,this.itemMovedTriggerData)}_onItemRemoved(x){this.itemRemovedTriggerData=x.detail,this.dispatchEvent(this._itemRemovedEventType,this.itemRemovedTriggerData)}_onItemsReloaded(x){this.itemsReloadedTriggerData=x.detail,this.dispatchEvent(this._itemsReloadedEventType,this.itemsReloadedTriggerData)}getSelectedItemData(){let x=this.selectedIndex,A="";return this._itemsContainer&&this._itemsContainer.dataSource&&x>=0&&x in this._itemsContainer.dataSource._keys&&(A=this._itemsContainer.dataSource._keyMap[this._itemsContainer.dataSource._keys[x]].data),A}_onItemsLoaded(){this._itemsLoaded=!0,this.isInRunMode&&this.dispatchEvent("itemsLoaded",{}),this._updateLayoutBase("event","itemsLoaded",null,null)}_updateLayout(A){if("itemsLoaded"!=A.changeName&&"selectedIndex"!=A.changeName||this._itemsContainer&&this._itemsLoaded&&"None"!=this.selectionMode&&(this._itemsContainer.selectedIndex=this.selectedIndex),"itemsLoaded"!=A.changeName&&"selectedValue"!=A.changeName||this._itemsContainer&&this._itemsLoaded&&"None"!=this.selectionMode&&(x.isNullOrUndefined(this.selectedValue)||(this._itemsContainer.selectedValue=this.selectedValue)),("initialized"==A.changeName||"selectedIndex"==A.changeName)&&this._inlineItems&&this.isInDesignMode&&"Single"===this.selectionMode)for(let x=0;x<this.element.children.length;x++)this.element.children[x].winControl.selectionMode=this.selectionMode,x==A.oldValue&&(this.element.children[x].winControl.checked=!1),x==this.selectedIndex&&(this.element.children[x].winControl.checked=!0,this.selectedValue=this.element.children[x].winControl.value);if(("initialized"==A.changeName||"selectionMode"==A.changeName)&&this.isInDesignMode&&this._inlineItems)for(let x=0;x<this.element.children.length;x++)this.element.children[x].winControl.selectionMode=this.selectionMode;"firstUpdate"!=A.changeName&&"dataSource"!=A.changeName||this.dataSource&&!this._inlineItems&&(this._itemsContainer.dataSource=this.dataSource),"firstUpdate"!=A.changeName&&"dataTemplate"!=A.changeName||this.dataTemplate&&!this._inlineItems&&(this._itemsContainer.dataTemplate=this.dataTemplate)}_setMenuItemStyle(){if(this._inlineItems&&"Default"!==this.menuItemStyle){let x=this.element.querySelectorAll("[data-win-control]"),A=Array.from(x);for(let x=0;x<A.length;x++){let V=A[x];if(this.inlineOptions.menuItemStyle){let x=V.getAttribute("data-win-options");if(x){let A=x.indexOf("{");x=x.substring(A+1),x='{"style":"'+this.inlineOptions.menuItemStyle+'",'+x,V.setAttribute("data-win-options",x)}else x='{"style":"'+this.inlineOptions.menuItemStyle+'"}',V.setAttribute("data-win-options",x)}}}}getMenuItemFromIndex(x){if(this._itemsContainer)return this._itemsContainer.itemFromIndex(x)}getMenuItemFromKey(x){if(this._itemsContainer){let A=this._itemsContainer.itemFromKey(x);return A?A.winControl:null}}getMenuItemCloneFromIndex(x){if(this._itemsContainer){let A,V=this._itemsContainer.itemFromIndex(x);if(V)return A=V.element.cloneNode(!0),A.classList.remove("checked"),WinJS.UI.processAll(A),A}}}A.PopoverMenu=PopoverMenu}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class ListBox extends x.UI.ControlBase{constructor(A,V){super(A,V),this.properties={designerType:{propertyType:"base",defaultValue:"Control"},dataSource:{},dataTemplate:{},selectedIndex:{type:"number",defaultValue:-1},selectedValue:{type:"string",defaultValue:""},selectionMode:{type:"string",defaultValue:x.UI.Enums.SelectionMode.Single},renderMode:{propertyType:"controlChild",child:"_itemsContainer",defaultValue:x.UI.Enums.RenderMode.Asynchronous},listItemStyle:{defaultValue:"Default"},selectedIndexChanged:{propertyType:"event",triggerDataName:"triggerData"},itemInserted:{propertyType:"event",triggerDataName:"itemInsertedTriggerData"},backgroundColor:{propertyType:"memberStyle",type:"color",defaultValue:"@None"},borderColor:{propertyType:"memberStyle",type:"color",defaultValue:"@None"},orientation:{propertyType:"controlChild",child:"_itemsContainer",childProperty:"orientation",defaultValue:x.UI.Enums.Orientation.Vertical},alignItems:{propertyType:"controlChild",child:"_itemsContainer",childProperty:"alignItems",defaultValue:"Start"},justifyContent:{propertyType:"controlChild",child:"_itemsContainer",childProperty:"justifyContent",defaultValue:"Start"}},this.cssStyles={css:"\n            .vw-listbox {\n                position: relative;\n                width:  200px;\n                height: 300px;                \n                overflow-y: auto; \n            }\n        "},this._inlineItems=!1,this._itemsLoaded=!1,this._boundItemsLoaded=this._onItemsLoaded.bind(this),this._boundItemInserted=this._onItemInserted.bind(this),this._boundSelectedIndexChangedHandler=this._onSelectedIndexChangedHandler.bind(this),this._dataListeners={itemChanged:this._onItemChanged.bind(this),itemInserted:this._onItemInserted.bind(this),itemMoved:this._onItemMoved.bind(this),itemRemoved:this._onItemRemoved.bind(this),itemsReloaded:this._onItemsReloaded.bind(this)},this._itemsLoadedEventType="itemsLoaded",this._itemInsertedEventType="itemInserted",this._itemChangedEventType="itemChanged",this._itemMovedEventType="itemMoved",this._itemRemovedEventType="itemRemoved",this._itemsReloadedEventType="itemsReloaded";this.initialize(ListBox,{namespace:"VisiWin.UI"})}createTemplate(){let x=null;return this.element.children.length>0&&this.isInDesignMode?(this._inlineItems=!0,this._setListItemStyle(),null):(this.element.children.length>0&&(this._inlineItems=!0,this._setListItemStyle(),x=document.createElement("div"),this.reparentChildren(this.element,x)),this.element.innerHTML='\n                    <div data-ref="_itemsContainer" data-win-control="VisiWin.UI.ItemsContainer"></div>\n                ',this._inlineItems&&this.reparentChildren(x,this.element.firstElementChild),this.initializeChilds())}createHandler(){this._itemsContainer&&(this._itemsContainer.addEventListener(this._itemsLoadedEventType,this._boundItemsLoaded),this._itemsContainer.addEventListener("selectedIndexChanged",this._boundSelectedIndexChangedHandler),this._addDataListeners()),this.createObserver(),this.inlineOptions.compiledDataTemplate&&this._itemsContainer&&(this._itemsContainer.compiledDataTemplate=this.inlineOptions.compiledDataTemplate)}removeHandler(){this._itemsContainer&&(this._itemsContainer.removeEventListener(this._itemsLoadedEventType,this._boundItemsLoaded),this._itemsContainer.removeEventListener("selectedIndexChanged",this._boundSelectedIndexChangedHandler)),this.observe=null}_addDataListeners(){Object.keys(this._dataListeners).forEach(x=>{this._itemsContainer.addEventListener(x,this._dataListeners[x],!1)})}_removeDataListeners(){Object.keys(this._dataListeners).forEach(x=>{this._itemsContainer.removeEventListener(x,this._dataListeners[x],!1)})}createObserver(){this.observe={disabled:A=>{x.Utilities.togglePointerEvents(this.element,A.newValue)}}}_onSelectedIndexChangedHandler(x){this.triggerData=x.detail,this.updateLayoutEnable(!1),x.detail&&(this.selectedIndex=x.detail.selectedIndex,this.selectedValue=x.detail.selectedValue,this.selectedItem=x.detail.selectedItem),this.updateLayoutEnable(!0),this.dispatchEvent("selectedIndexChanged",this.triggerData)}_onItemsLoaded(){this._itemsLoaded=!0,this._updateLayoutBase("event",this._itemsLoadedEventType,null,null)}_onItemInserted(x){this.itemInsertedTriggerData=x.detail,this.dispatchEvent(this._itemInsertedEventType,this.itemInsertedTriggerData)}_onItemChanged(x){this.itemChangedTriggerData=x.detail,this.dispatchEvent(this._itemChangedEventType,this.itemChangedTriggerData)}_onItemMoved(x){this.itemMovedTriggerData=x.detail,this.dispatchEvent(this._itemMovedEventType,this.itemMovedTriggerData)}_onItemRemoved(x){this.itemRemovedTriggerData=x.detail,this.dispatchEvent(this._itemRemovedEventType,this.itemRemovedTriggerData)}_onItemsReloaded(x){this.itemsReloadedTriggerData=x.detail,this.dispatchEvent(this._itemsReloadedEventType,this.itemsReloadedTriggerData)}_updateLayout(x){"selectedValue"===x.changeName&&this.setItemsContainerSelectedValue(this.selectedValue,x.oldValue),"itemsLoaded"!==x.changeName&&"initialized"!==x.changeName&&"selectedIndex"!==x.changeName||this.setItemsContainerSelectedIndex(this.selectedIndex,x.oldValue),"initialized"!==x.changeName&&"selectionMode"!==x.changeName||this.setSelectionMode(this.selectionMode),"initialized"!==x.changeName&&"dataSource"!==x.changeName||this.setItemsContainerDataSource(this.dataSource),"initialized"!==x.changeName&&"dataTemplate"!==x.changeName||this.setItemsContainerDataTemplate(this.dataTemplate),"firstUpdate"!==x.changeName&&"authorizationRight"!==x.changeName||this.setAuthorization(this.disabled,this.authorizationMode,this.authorizationRight)}_setListItemStyle(){if(this._inlineItems&&"Default"!==this.listItemStyle){const x=this.element.querySelectorAll("[data-win-control]"),A=Array.from(x);for(let x=0;x<A.length;x++){const V=A[x];if(this.inlineOptions.listItemStyle){let x=V.getAttribute("data-win-options");if(x){const A=x.indexOf("{");x=x.substring(A+1),x='{"style":"'+this.inlineOptions.listItemStyle+'",'+x,V.setAttribute("data-win-options",x)}else x='{"style":"'+this.inlineOptions.listItemStyle+'"}',V.setAttribute("data-win-options",x)}}}}getSelectedItemData(){let x=this.selectedIndex,A="";return this._itemsContainer&&this._itemsContainer.dataSource&&x>=0&&x in this._itemsContainer.dataSource._keys&&(A=this._itemsContainer.dataSource._keyMap[this._itemsContainer.dataSource._keys[x]].data),A}getListItemFromIndex(x){if(this._itemsContainer)return this._itemsContainer.itemFromIndex(x)}setAuthorization(x,A,V){this._itemsContainer&&(this._itemsContainer.authorizationMode=A,this._itemsContainer.authorizationRight=V,this._itemsContainer.disabled=x)}getListItemFromKey(x){if(this._itemsContainer){const A=this._itemsContainer.itemFromKey(x);return A?A.winControl:null}}getListItemCloneFromIndex(x){if(this._itemsContainer){let A;const V=this._itemsContainer.itemFromIndex(x);if(V)return A=V.element.cloneNode(!0),A.classList.remove("checked"),WinJS.UI.processAll(A),A}}setItemsContainerSelectedIndex(A,V){if(this._itemsContainer&&this._itemsLoaded&&this.selectionMode!==x.UI.Enums.SelectionMode.None&&(this._itemsContainer.selectedIndex=this.selectedIndex),this._inlineItems&&this.isInDesignMode&&this.selectionMode===x.UI.Enums.SelectionMode.Single)for(let x=0;x<this.element.children.length;x++)this.element.children[x].winControl.selectionMode=this.selectionMode,x===V&&(this.element.children[x].winControl.checked=!1),x===this.selectedIndex&&(this.element.children[x].winControl.checked=!0,this.selectedValue=this.element.children[x].winControl.value)}setItemsContainerDataSource(x){this.dataSource&&!this._inlineItems&&(this._itemsContainer.dataSource=x)}setItemsContainerDataTemplate(x){this.dataTemplate&&!this._inlineItems&&(this._itemsContainer.dataTemplate=x)}setSelectionMode(x){if(this.isInDesignMode&&this._inlineItems)for(let A=0;A<this.element.children.length;A++)this.element.children[A].winControl.selectionMode=x;this._itemsContainer&&(this._itemsContainer.selectionMode=x)}setItemsContainerSelectedValue(A,V){if(this._itemsContainer&&this._itemsLoaded&&this.selectionMode===x.UI.Enums.SelectionMode.Single&&(this._itemsContainer.selectedValue=A),this._inlineItems&&this.isInDesignMode&&this.selectionMode===x.UI.Enums.SelectionMode.Single)for(let x=0;x<this.element.children.length;x++)this.element.children[x].winControl.selectionMode=this.selectionMode,this.element.children[x].winControl.value===V&&(this.element.children[x].winControl.checked=!1),this.element.children[x].winControl.value===this.selectedValue&&(this.element.children[x].winControl.checked=!0)}}A.ListBox=ListBox}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class ListItem extends x.UI.ItemBase{constructor(x,A){super(x,A),this.properties={designerType:{propertyType:"base",defaultValue:"Control"},symbol:{propertyType:"controlChild",child:"_symbolControl"},showSymbol:{propertyType:"controlChild",child:"_symbolControl",childProperty:"show",type:"boolean",defaultValue:!1},symbolMargin:{propertyType:"controlChild",child:"_symbolControl",childProperty:"margin"},symbolType:{propertyType:"controlChild",child:"_symbolControl"},symbolSize:{propertyType:"controlChild",child:"_symbolControl"},iconFont:{propertyType:"controlChild",child:"_symbolControl"},showPrimaryText:{propertyType:"controlChild",child:"_primaryTextControl",childProperty:"show",type:"boolean",defaultValue:!0},primaryTextWidth:{propertyType:"controlChild",child:"_primaryTextControl",childProperty:"width"},primaryTextHeight:{propertyType:"controlChild",child:"_primaryTextControl",childProperty:"height"},primaryTextMargin:{propertyType:"controlChild",child:"_primaryTextControl",childProperty:"margin"},primaryTextPadding:{propertyType:"controlChild",child:"_primaryTextControl",childProperty:"padding"},primaryText:{propertyType:"controlChild",child:"_primaryTextControl",childProperty:"text",defaultValue:"PrimaryText"},localizablePrimaryText:{propertyType:"controlChild",child:"_primaryTextControl",childProperty:"localizableText"},primaryTextAlignment:{propertyType:"controlChild",child:"_primaryTextControl",childProperty:"textAlignment"},primaryTextLineClamp:{propertyType:"controlChild",child:"_primaryTextControl",childProperty:"lineClamp",type:"number"},primaryTextWrapping:{propertyType:"controlChild",child:"_primaryTextControl",childProperty:"textWrapping"},primaryTextTrimming:{propertyType:"controlChild",child:"_primaryTextControl",childProperty:"textTrimming"},primaryTextFontClass:{propertyType:"controlChild",child:"_primaryTextControl",childProperty:"fontClass",defaultValue:"Body1"},primaryTextFontSize:{propertyType:"controlChild",child:"_primaryTextControl",childProperty:"fontSize"},primaryTextFontWeight:{propertyType:"controlChild",child:"_primaryTextControl",childProperty:"fontWeight"},primaryTextLineHeight:{propertyType:"controlChild",child:"_primaryTextControl",childProperty:"lineHeight"},primaryTextContrast:{propertyType:"controlChild",child:"_primaryTextControl",childProperty:"textContrast",type:"number"},showSecondaryText:{propertyType:"controlChild",child:"_secondaryTextControl",childProperty:"show",type:"boolean",defaultValue:!1},secondaryTextWidth:{propertyType:"controlChild",child:"_secondaryTextControl",childProperty:"width"},secondaryTextHeight:{propertyType:"controlChild",child:"_secondaryTextControl",childProperty:"height"},secondaryTextMargin:{propertyType:"controlChild",child:"_secondaryTextControl",childProperty:"margin"},secondaryTextPadding:{propertyType:"controlChild",child:"_secondaryTextControl",childProperty:"padding"},secondaryText:{propertyType:"controlChild",child:"_secondaryTextControl",childProperty:"text",defaultValue:"SecondaryText"},localizableSecondaryText:{propertyType:"controlChild",child:"_secondaryTextControl",childProperty:"localizableText"},secondaryTextAlignment:{propertyType:"controlChild",child:"_secondaryTextControl",childProperty:"textAlignment"},secondaryTextLineClamp:{propertyType:"controlChild",child:"_secondaryTextControl",childProperty:"lineClamp"},secondaryTextWrapping:{propertyType:"controlChild",child:"_secondaryTextControl",childProperty:"textWrapping"},secondaryTextTrimming:{propertyType:"controlChild",child:"_secondaryTextControl",childProperty:"textTrimming"},secondaryTextFontClass:{propertyType:"controlChild",child:"_secondaryTextControl",childProperty:"fontClass",defaultValue:"Body2"},secondaryTextFontSize:{propertyType:"controlChild",child:"_secondaryTextControl",childProperty:"fontSize"},secondaryTextFontWeight:{propertyType:"controlChild",child:"_secondaryTextControl",childProperty:"fontWeight"},secondaryTextLineHeight:{propertyType:"controlChild",child:"_secondaryTextControl",childProperty:"lineHeight"},secondaryTextContrast:{propertyType:"controlChild",child:"_secondaryTextControl",childProperty:"textContrast",type:"number"},backgroundColor:{defaultValue:"@BackgroundColor"},hoverBackgroundColor:{defaultValue:"@HoverBackgroundColor"},pressedBackgroundColor:{defaultValue:"@PressedBackgroundColor"},disabledBackgroundColor:{defaultValue:"@DisabledBackgroundColor"},selectedBackgroundColor:{defaultValue:"@CheckedBackgroundColor"},selectedHoverBackgroundColor:{defaultValue:"@CheckedBackgroundColor"},selectedPressedBackgroundColor:{defaultValue:"@CheckedPressedBackgroundColor"},foregroundColor:{defaultValue:"@ForegroundColor"},hoverForegroundColor:{defaultValue:"@ForegroundColor"},pressedForegroundColor:{defaultValue:"@ForegroundColor"},selectedForegroundColor:{defaultValue:"@AltForegroundColor"},selectedPressedForegroundColor:{defaultValue:"@AltForegroundColor"},authSymbolForegroundColor:{defaultValue:"@DisabledForegroundColor"},disabledForegroundColor:{defaultValue:"@DisabledForegroundColor"},borderColor:{defaultValue:"@BorderColor"},hoverBorderColor:{defaultValue:"@HoverBorderColor"},selectedBorderColor:{defaultValue:"@CheckedBorderColor"},selectedHoverBorderColor:{defaultValue:"@CheckedHoverBorderColor"},disabledBorderColor:{defaultValue:"@DisabledBorderColor"}},this.cssStyles={css:"\n            .vw-listitem {\n                display: flex;\n                position: relative;\n                padding: 8px 16px;\n                cursor: pointer;\n                width: 100%;\n                height: auto;\n                border-width: 1px;\n                overflow: hidden;\n                flex-shrink: 0;\n            }           \n\n            .vw-listitem[disabled] {\n                cursor: default;\n                pointer-events: none;\n            }    \n\n            .vw-listitem__textcontainer {\n                position: relative;\n                height: auto;\n                flex: 1;\n                min-width: 1px;\n                display: flex;\n                flex-direction: column;\n            } \n\n            .vw-listitem__symbol {\n                margin: 0 16px 0 0;\n            }\n\n            .vw-listitem__primarytext {\n                margin: 0;\n                border-width: 10px;\n            } \n            .vw-listitem__secondarytext {\n                margin: 0;\n            }\n        "},this._symbolControl=null,this._primaryTextControl=null,this._secondaryTextControl=null,this.isInDesignMode&&(!0===this.inlineOptions.dataTemplate?this.properties.designerType.defaultValue="ContentControl":this.properties.designerType.defaultValue="Control");this.initialize(ListItem,{inputEventsEnable:!0,namespace:"VisiWin.UI",cssClassPrefix:"vw"})}createTemplate(){if(!0===this.inlineOptions.dataTemplate)return;let x="";return this.verifyShowProperty("showSymbol")&&(x+='<div data-ref="_symbolControl" class="vw-listitem__symbol" data-win-control="VisiWin.UI.Symbol"></div>'),x+='<div data-ref-element="_textContainer" class="vw-listitem__textcontainer">',this.verifyShowProperty("showPrimaryText")&&(x+='<div data-ref="_primaryTextControl" class="vw-listitem__primarytext" data-win-control="VisiWin.UI.TextBlock"></div>'),this.verifyShowProperty("showSecondaryText")&&(x+='<div data-ref="_secondaryTextControl" class="vw-listitem__secondarytext" data-win-control="VisiWin.UI.TextBlock"></div>'),this.element.innerHTML=x,this.initializeChilds()}_updateColors(A){this.disabled?(this._symbolControl&&this.setColor("disabledForegroundColor","foregroundColor",void 0,"_symbolControl"),this._primaryTextControl&&this.setColor("disabledForegroundColor","foregroundColor",void 0,"_primaryTextControl"),this._secondaryTextControl&&this.setColor("disabledForegroundColor","foregroundColor",void 0,"_secondaryTextControl"),this.setColor("disabledBackgroundColor","backgroundColor"),this.setColor("disabledBorderColor","borderColor")):this.selectionMode!==x.UI.Enums.SelectionMode.None?this.checked?(this._symbolControl&&this.setColor("selectedForegroundColor","foregroundColor",void 0,"_symbolControl"),this._primaryTextControl&&this.setColor("selectedForegroundColor","foregroundColor",void 0,"_primaryTextControl"),this._secondaryTextControl&&this.setColor("selectedForegroundColor","foregroundColor",void 0,"_secondaryTextControl"),this.setColor("selectedBackgroundColor","backgroundColor"),this.pressed?(this._symbolControl&&this.setColor("selectedPressedForegroundColor","foregroundColor",void 0,"_symbolControl"),this._primaryTextControl&&this.setColor("selectedPressedForegroundColor","foregroundColor",void 0,"_primaryTextControl"),this._secondaryTextControl&&this.setColor("selectedPressedForegroundColor","foregroundColor",void 0,"_secondaryTextControl"),this.setColor("selectedPressedBackgroundColor","backgroundColor")):this.hover?(this.setColor("selectedHoverBorderColor","borderColor"),this.setColor("selectedHoverBackgroundColor","backgroundColor")):this.setColor("selectedBorderColor","borderColor")):(this._symbolControl&&this.setColor("foregroundColor","foregroundColor",void 0,"_symbolControl"),this._primaryTextControl&&this.setColor("foregroundColor","foregroundColor",void 0,"_primaryTextControl"),this._secondaryTextControl&&this.setColor("foregroundColor","foregroundColor",void 0,"_secondaryTextControl"),this.setColor("backgroundColor","backgroundColor"),this.pressed?(this._symbolControl&&this.setColor("pressedForegroundColor","foregroundColor",void 0,"_symbolControl"),this._primaryTextControl&&this.setColor("pressedForegroundColor","foregroundColor",void 0,"_primaryTextControl"),this._secondaryTextControl&&this.setColor("pressedForegroundColor","foregroundColor",void 0,"_secondaryTextControl"),this.setColor("pressedBackgroundColor","backgroundColor")):this.hover?(this.setColor("hoverBorderColor","borderColor"),this.setColor("hoverBackgroundColor","backgroundColor"),this._symbolControl&&this.setColor("hoverForegroundColor","foregroundColor",void 0,"_symbolControl"),this._primaryTextControl&&this.setColor("hoverForegroundColor","foregroundColor",void 0,"_primaryTextControl"),this._secondaryTextControl&&this.setColor("hoverForegroundColor","foregroundColor",void 0,"_secondaryTextControl")):this.setColor("borderColor","borderColor")):(this._symbolControl&&this.setColor("foregroundColor","foregroundColor",void 0,"_symbolControl"),this._primaryTextControl&&this.setColor("foregroundColor","foregroundColor",void 0,"_primaryTextControl"),this._secondaryTextControl&&this.setColor("foregroundColor","foregroundColor",void 0,"_secondaryTextControl"),this.setColor("borderColor","borderColor"),this.setColor("backgroundColor","backgroundColor"))}_updateLayout(x){"afterInit"!==x.changeName&&"orientation"!==x.changeName&&"alignItems"!==x.changeName&&"justifyContent"!==x.changeName||this.setFlexProperties(x.changeName),"initialized"!==x.changeName&&"authorizationRight"!==x.changeName||this.authorizeChilds(this.element,this.authorizationRight,this.authorizationMode)}}A.ListItem=ListItem}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class ItemsContainer extends x.UI.RepeaterBase{constructor(x,A){super(x,A),this.properties={designerType:{propertyType:"base",defaultValue:"Child"},orientation:{defaultValue:"Vertical"},alignItems:{defaultValue:"Start"},justifyContent:{defaultValue:"Start"}},this.cssStyles={baseStyle:!0,css:"\n            .vw-itemscontainer {\n                display: flex;\n                position: relative;\n                width:  100%;\n                height: auto;\n            }\n        "},this._itemCount=0,this._itemsCollection=[],this._checkedChangedEventType="checkedChanged",this.indexUpdated=!1,this.initialize(ItemsContainer)}get orientation(){return this._orientation}set orientation(x){this._orientation=x,this.setOrientation(this._orientation)}get alignItems(){return this._alignItems}set alignItems(x){this._alignItems=x,this.setAlignItems(this._alignItems)}get justifyContent(){return this._justifyContent}set justifyContent(x){this._justifyContent=x,this.setJustifyContent(this._justifyContent)}registerItem(A,V,R,D){if(this._inlineItems&&"RegisterItem"===V){const A=R.winControl;this._itemsCollection.push(A),A.selectionMode=this.selectionMode,A.index=this._itemCount,A.disabled=this.disabled,this.isInDesignMode&&this._setDesignerType(R),this.selectionMode!==x.UI.Enums.SelectionMode.None&&R.winControl.addEventListener(this._checkedChangedEventType,this._boundItemCheckedChanged),this._itemCount===this.element.children.length-1?(this._inlineItems=!0,this.dispatchEvent("itemsLoaded",{})):this._itemCount++}}_updateLayout(A){if("afterInit"===A.changeName&&this.element.children.length>0&&(this._inlineItems=!0),"disabled"===A.changeName||"authorizationRight"===A.changeName)if(this._inlineItems)for(let x=0;x<this._itemsCollection.length;x++)this._itemsCollection[x].disabled=this.disabled,this._itemsCollection[x].authorizationMode=this.authorizationMode,this._itemsCollection[x].authorizationRight=this.authorizationRight;else for(let x=0;x<this.element.children.length;x++)this.element.children[x].winControl.disabled=this.disabled,this.element.children[x].winControl.authorizationMode=this.authorizationMode,this.element.children[x].winControl.authorizationRight=this.authorizationRight;if("selectedIndex"===A.changeName&&(A.oldValue>=0&&this.selectionMode!==x.UI.Enums.SelectionMode.None&&this._uncheckItem(this.selectedItem),this._inlineItems||this.itemList.length>0&&this.itemList[this.selectedIndex]&&(this.selectedItem=this.itemList[this.selectedIndex].winControl,this._checkItem(this.selectedItem),this.updateLayoutEnable(!1),this.selectedValue=this.selectedItem.value,this.updateLayoutEnable(!0)),this._inlineItems&&this._itemsCollection.length>0&&this._itemsCollection[this.selectedIndex]&&(this.selectedItem=this._itemsCollection[this.selectedIndex],this._checkItem(this.selectedItem),this.updateLayoutEnable(!1),this.selectedValue=this.selectedItem.value,this.updateLayoutEnable(!0))),"selectedValue"===A.changeName&&this.selectionMode!==x.UI.Enums.SelectionMode.None){if(!this._inlineItems&&this.itemList.length>0)for(let x=0;x<this.itemList.length;x++){const V=this.itemList[x];V.winControl.value===A.newValue?(this._uncheckItem(this.selectedItem),this._checkItem(V),this.selectedItem=V,this.selectedIndex=x):V.winControl.value===A.oldValue&&this._uncheckItem(V)}if(this._inlineItems&&this._itemsCollection.length>0)for(let x=0;x<this._itemsCollection.length;x++){const V=this._itemsCollection[x];V.value===A.newValue?(this._checkItem(V),this.selectedItem=V,this.selectedIndex=x):V.value===A.oldValue&&this._uncheckItem(V)}}}_setDesignerType(x){const A=x.querySelectorAll("[data-win-control]"),V=Array.from(A);for(let x=0;x<V.length;x++){const A=V[x].winControl;"Child"!==A.designerType&&(A.designerType="child")}x.winControl.designerType="child"}itemFromIndex(x){if(x>=0)if(this._itemsCollection.length>0){if(x<this._itemsCollection.length)return this._itemsCollection[x]}else{let A=this.itemFromIndexBase(x);if(A)return A.winControl}}dispose(){if(this.selectionMode!==x.UI.Enums.SelectionMode.None)for(let x=0;x<this.itemList.length;x++)this.itemList[x].removeEventListener(this._checkedChangedEventType,this._boundItemCheckedChanged);return super.dispose()}setSelectedValue(x){if(!this._inlineItems&&this.itemList.length>0)for(let A=0;A<this.itemList.length;A++){const V=this.itemList[A];V.winControl.value===x?(this._uncheckItem(this.selectedItem),this._checkItem(V),this.selectedItem=V,this.selectedIndex=A):this._uncheckItem(V)}if(this._inlineItems&&this._itemsCollection.length>0)for(let A=0;A<this._itemsCollection.length;A++){const V=this._itemsCollection[A];this.indexUpdated||(V.value===x?(this._checkItem(V),this.selectedItem=V,this.selectedIndex=A):this._uncheckItem(V))}}setSelectedIndex(A){this.selectionMode!==x.UI.Enums.SelectionMode.None&&this._uncheckItem(this.selectedItem),this._inlineItems||this.itemList.length>0&&this.itemList[this.selectedIndex]&&(this.selectedItem=this.itemList[this.selectedIndex].winControl,this._checkItem(this.selectedItem),this.updateLayoutEnable(!1),this.selectedValue=this.selectedItem.value,this.updateLayoutEnable(!0)),this._inlineItems&&this._itemsCollection.length>0&&this._itemsCollection[this.selectedIndex]&&(this.selectedItem=this._itemsCollection[this.selectedIndex],this._checkItem(this.selectedItem),this.updateLayoutEnable(!1),this.indexUpdated=!0,this.selectedValue=this.selectedItem.value,this.indexUpdated=!1,this.updateLayoutEnable(!0))}setOrientation(A){switch(A){case x.UI.Enums.Orientation.Vertical:this.element.style.flexDirection="column";break;case x.UI.Enums.Orientation.Horizontal:this.element.style.flexDirection="row"}}setAlignItems(A){switch(A){case"Center":this.element.style.alignItems=x.UI.Enums.AlignItems.Center;break;case"Start":this.element.style.alignItems=x.UI.Enums.AlignItems.FlexStart;break;case"End":this.element.style.alignItems=x.UI.Enums.AlignItems.FlexEnd;break;case"Baseline":this.element.style.alignItems=x.UI.Enums.AlignItems.Baseline;break;default:this.element.style.alignItems=x.UI.Enums.AlignItems.Stretch}}setJustifyContent(A){switch(A){case"End":this.element.style.justifyContent=x.UI.Enums.JustifyContent.FlexEnd;break;case"Center":this.element.style.justifyContent=x.UI.Enums.JustifyContent.Center;break;case"Space-between":this.element.style.justifyContent=x.UI.Enums.JustifyContent.SpaceBetween;break;case"Space-around":this.element.style.justifyContent=x.UI.Enums.JustifyContent.SpaceAround;break;case"Space-evenly":this.element.style.justifyContent=x.UI.Enums.JustifyContent.SpaceEvenly;break;default:this.element.style.justifyContent=x.UI.Enums.JustifyContent.FlexStart}}}A.ItemsContainer=ItemsContainer}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),function(x){!function(A){"use strict";class LoadingSpinner extends x.UI.ControlBase{constructor(x,A){super(x,A),this.properties={designerType:{propertyType:"base",type:"string",defaultValue:"Control"},width:{propertyType:"member",type:"string",defaultValue:"250px"},height:{propertyType:"member",type:"string",defaultValue:"100px"},orientation:{propertyType:"member",type:"string",defaultValue:"Vertical"},alignItems:{propertyType:"member",type:"string",defaultValue:"Center"},justifyContent:{propertyType:"member",type:"string",defaultValue:"Center"},background:{propertyType:"member",type:"string"},borderWidth:{propertyType:"member",type:"string",defaultValue:"0px"},borderStyle:{propertyType:"member",type:"string",defaultValue:"none"},borderRadius:{propertyType:"member",type:"string",defaultValue:"0px"},opacity:{propertyType:"member",type:"number",defaultValue:1},visibility:{propertyType:"member",type:"string",defaultValue:"visible"},shadow:{propertyType:"member",type:"string"},spinnerWidth:{propertyType:"member",type:"string",defaultValue:"60px"},spinnerHeight:{propertyType:"member",type:"string",defaultValue:"60px"},backgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@Transparent"},spinnerBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@Transparent"},spinnerForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},borderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"},loadingSpinner:{type:"string",defaultValue:"spinner1"},playAnimation:{propertyType:"member",type:"boolean",defaultValue:!0}},this.initialize(LoadingSpinner)}createTemplate(){return this.element.innerHTML='\n            <div data-win-control="VisiWin.UI.FlexLayout" data-ref-element="mainContainerElement">\n                <span data-ref-element="spinnerElement"></span>                \n            </div>     \n        ',this.initializeChilds()}_updateLayout(x){"afterInit"!==x.changeName&&"loadingSpinner"!==x.changeName||(this.spinnerElement.className=this.loadingSpinner),"firstUpdate"!==x.changeName&&"width"!==x.changeName&&"height"!==x.changeName&&"spinnerWidth"!==x.changeName&&"spinnerHeight"!==x.changeName&&"loadingSpinner"!==x.changeName&&"borderWidth"!==x.changeName&&"borderStyle"!==x.changeName&&"borderRadius"!==x.changeName&&"opacity"!==x.changeName&&"visibility"!==x.changeName&&"playAnimation"!==x.changeName&&"orientation"!==x.changeName&&"alignItems"!==x.changeName&&"justifyContent"!==x.changeName&&"background"!==x.changeName&&"shadow"!==x.changeName||(this.mainContainerElement.winControl.width=this.width,this.mainContainerElement.winControl.height=this.height,this.mainContainerElement.winControl.alignItems=this.alignItems,this.mainContainerElement.winControl.justifyContent=this.justifyContent,this.mainContainerElement.winControl.orientation=this.orientation,this.mainContainerElement.winControl.borderWidth=this.borderWidth,this.mainContainerElement.winControl.borderStyle=this.borderStyle,this.mainContainerElement.winControl.borderRadius=this.borderRadius,this.mainContainerElement.winControl.opacity=this.opacity,this.mainContainerElement.winControl.visibility=this.visibility,this.mainContainerElement.winControl.background=this.background,this.mainContainerElement.winControl.shadow=this.shadow,this.playAnimation?(this.spinnerElement.style.setProperty("--animationDuration1s","1s"),this.spinnerElement.style.setProperty("--animationDuration2s","2s"),this.spinnerElement.style.setProperty("--animationDuration6s","6s")):(this.spinnerElement.style.setProperty("--animationDuration1s","0s"),this.spinnerElement.style.setProperty("--animationDuration2s","0s"),this.spinnerElement.style.setProperty("--animationDuration6s","0s")),this._setsSpinnerElementWidthHeight())}_updateColors(x){document.querySelector(":root");"firstUpdate"!==x.changeName&&"backgroundColor"!==x.changeName&&"spinnerBackgroundColor"!==x.changeName&&"spinnerForegroundColor"!==x.changeName&&"borderColor"!==x.changeName&&"hoverBorderColor"!==x.changeName||(this.mainContainerElement.winControl.backgroundColor=this.backgroundColor,this.mainContainerElement.winControl.borderColor=this.borderColor,this.spinnerElement.style.setProperty("--spinnerBackgroundColor",this.getThemeColor(this.spinnerBackgroundColor)),this.spinnerElement.style.setProperty("--spinnerForegroundColor",this.getThemeColor(this.spinnerForegroundColor)))}_setsSpinnerElementWidthHeight(){this.spinnerElement.style.setProperty("--spinnerWidth",this.spinnerWidth),this.spinnerElement.style.setProperty("--spinnerHeight",this.spinnerHeight)}}A.LoadingSpinner=LoadingSpinner}(x.UI||(x.UI={}))}(VisiWin||(VisiWin={})),VisiWin.Application.modulEnd("VisiWinJS.js");