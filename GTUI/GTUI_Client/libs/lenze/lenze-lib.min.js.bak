/* Lenze library version: '1.3.19' */
(function(global,factory){typeof exports==="object"&&typeof module!=="undefined"?factory(exports):typeof define==="function"&&define.amd?define(["exports"],factory):(global=typeof globalThis!=="undefined"?globalThis:global||self,factory(global.d3=global.d3||{}))})(this,function(exports){"use strict";var version="6.5.0";function ascending(a,b){return a<b?-1:a>b?1:a>=b?0:NaN}function bisector(f){let delta=f;let compare=f;if(f.length===1){delta=((d,x)=>f(d)-x);compare=ascendingComparator(f)}function left(a,x,lo,hi){if(lo==null)lo=0;if(hi==null)hi=a.length;while(lo<hi){const mid=lo+hi>>>1;if(compare(a[mid],x)<0)lo=mid+1;else hi=mid}return lo}function right(a,x,lo,hi){if(lo==null)lo=0;if(hi==null)hi=a.length;while(lo<hi){const mid=lo+hi>>>1;if(compare(a[mid],x)>0)hi=mid;else lo=mid+1}return lo}function center(a,x,lo,hi){if(lo==null)lo=0;if(hi==null)hi=a.length;const i=left(a,x,lo,hi-1);return i>lo&&delta(a[i-1],x)>-delta(a[i],x)?i-1:i}return{left:left,center:center,right:right}}function ascendingComparator(f){return(d,x)=>ascending(f(d),x)}function number(x){return x===null?NaN:+x}function*numbers(values,valueof){if(valueof===undefined){for(let value of values){if(value!=null&&(value=+value)>=value){yield value}}}else{let index=-1;for(let value of values){if((value=valueof(value,++index,values))!=null&&(value=+value)>=value){yield value}}}}const ascendingBisect=bisector(ascending);const bisectRight=ascendingBisect.right;const bisectLeft=ascendingBisect.left;const bisectCenter=bisector(number).center;function count(values,valueof){let count=0;if(valueof===undefined){for(let value of values){if(value!=null&&(value=+value)>=value){++count}}}else{let index=-1;for(let value of values){if((value=valueof(value,++index,values))!=null&&(value=+value)>=value){++count}}}return count}function length(array){return array.length|0}function empty(length){return!(length>0)}function arrayify(values){return typeof values!=="object"||"length"in values?values:Array.from(values)}function reducer(reduce){return values=>reduce(...values)}function cross(...values){const reduce=typeof values[values.length-1]==="function"&&reducer(values.pop());values=values.map(arrayify);const lengths=values.map(length);const j=values.length-1;const index=new Array(j+1).fill(0);const product=[];if(j<0||lengths.some(empty))return product;while(true){product.push(index.map((j,i)=>values[i][j]));let i=j;while(++index[i]===lengths[i]){if(i===0)return reduce?product.map(reduce):product;index[i--]=0}}}function cumsum(values,valueof){var sum=0,index=0;return Float64Array.from(values,valueof===undefined?v=>sum+=+v||0:v=>sum+=+valueof(v,index++,values)||0)}function descending(a,b){return b<a?-1:b>a?1:b>=a?0:NaN}function variance(values,valueof){let count=0;let delta;let mean=0;let sum=0;if(valueof===undefined){for(let value of values){if(value!=null&&(value=+value)>=value){delta=value-mean;mean+=delta/++count;sum+=delta*(value-mean)}}}else{let index=-1;for(let value of values){if((value=valueof(value,++index,values))!=null&&(value=+value)>=value){delta=value-mean;mean+=delta/++count;sum+=delta*(value-mean)}}}if(count>1)return sum/(count-1)}function deviation(values,valueof){const v=variance(values,valueof);return v?Math.sqrt(v):v}function extent(values,valueof){let min;let max;if(valueof===undefined){for(const value of values){if(value!=null){if(min===undefined){if(value>=value)min=max=value}else{if(min>value)min=value;if(max<value)max=value}}}}else{let index=-1;for(let value of values){if((value=valueof(value,++index,values))!=null){if(min===undefined){if(value>=value)min=max=value}else{if(min>value)min=value;if(max<value)max=value}}}}return[min,max]}class Adder{constructor(){this._partials=new Float64Array(32);this._n=0}add(x){const p=this._partials;let i=0;for(let j=0;j<this._n&&j<32;j++){const y=p[j],hi=x+y,lo=Math.abs(x)<Math.abs(y)?x-(hi-y):y-(hi-x);if(lo)p[i++]=lo;x=hi}p[i]=x;this._n=i+1;return this}valueOf(){const p=this._partials;let n=this._n,x,y,lo,hi=0;if(n>0){hi=p[--n];while(n>0){x=hi;y=p[--n];hi=x+y;lo=y-(hi-x);if(lo)break}if(n>0&&(lo<0&&p[n-1]<0||lo>0&&p[n-1]>0)){y=lo*2;x=hi+y;if(y==x-hi)hi=x}}return hi}}function fsum(values,valueof){const adder=new Adder;if(valueof===undefined){for(let value of values){if(value=+value){adder.add(value)}}}else{let index=-1;for(let value of values){if(value=+valueof(value,++index,values)){adder.add(value)}}}return+adder}class InternMap extends Map{constructor(entries=[],key=keyof){super();Object.defineProperties(this,{_intern:{value:new Map},_key:{value:key}});for(const[key,value]of entries)this.set(key,value)}get(key){return super.get(intern_get(this,key))}has(key){return super.has(intern_get(this,key))}set(key,value){return super.set(intern_set(this,key),value)}delete(key){return super.delete(intern_delete(this,key))}}class InternSet extends Set{constructor(values=[],key=keyof){super();Object.defineProperties(this,{_intern:{value:new Map},_key:{value:key}});for(const value of values)this.add(value)}has(value){return super.has(intern_get(this,value))}add(value){return super.add(intern_set(this,value))}delete(value){return super.delete(intern_delete(this,value))}}function intern_get({_intern:_intern,_key:_key},value){const key=_key(value);return _intern.has(key)?_intern.get(key):value}function intern_set({_intern:_intern,_key:_key},value){const key=_key(value);if(_intern.has(key))return _intern.get(key);_intern.set(key,value);return value}function intern_delete({_intern:_intern,_key:_key},value){const key=_key(value);if(_intern.has(key)){value=_intern.get(value);_intern.delete(key)}return value}function keyof(value){return value!==null&&typeof value==="object"?value.valueOf():value}function identity(x){return x}function group(values,...keys){return nest(values,identity,identity,keys)}function groups(values,...keys){return nest(values,Array.from,identity,keys)}function rollup(values,reduce,...keys){return nest(values,identity,reduce,keys)}function rollups(values,reduce,...keys){return nest(values,Array.from,reduce,keys)}function index(values,...keys){return nest(values,identity,unique,keys)}function indexes(values,...keys){return nest(values,Array.from,unique,keys)}function unique(values){if(values.length!==1)throw new Error("duplicate key");return values[0]}function nest(values,map,reduce,keys){return function regroup(values,i){if(i>=keys.length)return reduce(values);const groups=new InternMap;const keyof=keys[i++];let index=-1;for(const value of values){const key=keyof(value,++index,values);const group=groups.get(key);if(group)group.push(value);else groups.set(key,[value])}for(const[key,values]of groups){groups.set(key,regroup(values,i))}return map(groups)}(values,0)}function permute(source,keys){return Array.from(keys,key=>source[key])}function sort(values,...F){if(typeof values[Symbol.iterator]!=="function")throw new TypeError("values is not iterable");values=Array.from(values);let[f=ascending]=F;if(f.length===1||F.length>1){const index=Uint32Array.from(values,(d,i)=>i);if(F.length>1){F=F.map(f=>values.map(f));index.sort((i,j)=>{for(const f of F){const c=ascending(f[i],f[j]);if(c)return c}})}else{f=values.map(f);index.sort((i,j)=>ascending(f[i],f[j]))}return permute(values,index)}return values.sort(f)}function groupSort(values,reduce,key){return(reduce.length===1?sort(rollup(values,reduce,key),([ak,av],[bk,bv])=>ascending(av,bv)||ascending(ak,bk)):sort(group(values,key),([ak,av],[bk,bv])=>reduce(av,bv)||ascending(ak,bk))).map(([key])=>key)}var array=Array.prototype;var slice=array.slice;function constant(x){return function(){return x}}var e10=Math.sqrt(50),e5=Math.sqrt(10),e2=Math.sqrt(2);function ticks(start,stop,count){var reverse,i=-1,n,ticks,step;stop=+stop,start=+start,count=+count;if(start===stop&&count>0)return[start];if(reverse=stop<start)n=start,start=stop,stop=n;if((step=tickIncrement(start,stop,count))===0||!isFinite(step))return[];if(step>0){start=Math.ceil(start/step);stop=Math.floor(stop/step);ticks=new Array(n=Math.ceil(stop-start+1));while(++i<n)ticks[i]=(start+i)*step}else{step=-step;start=Math.ceil(start*step);stop=Math.floor(stop*step);ticks=new Array(n=Math.ceil(stop-start+1));while(++i<n)ticks[i]=(start+i)/step}if(reverse)ticks.reverse();return ticks}function tickIncrement(start,stop,count){var step=(stop-start)/Math.max(0,count),power=Math.floor(Math.log(step)/Math.LN10),error=step/Math.pow(10,power);return power>=0?(error>=e10?10:error>=e5?5:error>=e2?2:1)*Math.pow(10,power):-Math.pow(10,-power)/(error>=e10?10:error>=e5?5:error>=e2?2:1)}function tickStep(start,stop,count){var step0=Math.abs(stop-start)/Math.max(0,count),step1=Math.pow(10,Math.floor(Math.log(step0)/Math.LN10)),error=step0/step1;if(error>=e10)step1*=10;else if(error>=e5)step1*=5;else if(error>=e2)step1*=2;return stop<start?-step1:step1}function nice(start,stop,count){let prestep;while(true){const step=tickIncrement(start,stop,count);if(step===prestep||step===0||!isFinite(step)){return[start,stop]}else if(step>0){start=Math.floor(start/step)*step;stop=Math.ceil(stop/step)*step}else if(step<0){start=Math.ceil(start*step)/step;stop=Math.floor(stop*step)/step}prestep=step}}function thresholdSturges(values){return Math.ceil(Math.log(count(values))/Math.LN2)+1}function bin(){var value=identity,domain=extent,threshold=thresholdSturges;function histogram(data){if(!Array.isArray(data))data=Array.from(data);var i,n=data.length,x,values=new Array(n);for(i=0;i<n;++i){values[i]=value(data[i],i,data)}var xz=domain(values),x0=xz[0],x1=xz[1],tz=threshold(values,x0,x1);if(!Array.isArray(tz)){const max=x1,tn=+tz;if(domain===extent)[x0,x1]=nice(x0,x1,tn);tz=ticks(x0,x1,tn);if(tz[tz.length-1]>=x1){if(max>=x1&&domain===extent){const step=tickIncrement(x0,x1,tn);if(isFinite(step)){if(step>0){x1=(Math.floor(x1/step)+1)*step}else if(step<0){x1=(Math.ceil(x1*-step)+1)/-step}}}else{tz.pop()}}}var m=tz.length;while(tz[0]<=x0)tz.shift(),--m;while(tz[m-1]>x1)tz.pop(),--m;var bins=new Array(m+1),bin;for(i=0;i<=m;++i){bin=bins[i]=[];bin.x0=i>0?tz[i-1]:x0;bin.x1=i<m?tz[i]:x1}for(i=0;i<n;++i){x=values[i];if(x0<=x&&x<=x1){bins[bisectRight(tz,x,0,m)].push(data[i])}}return bins}histogram.value=function(_){return arguments.length?(value=typeof _==="function"?_:constant(_),histogram):value};histogram.domain=function(_){return arguments.length?(domain=typeof _==="function"?_:constant([_[0],_[1]]),histogram):domain};histogram.thresholds=function(_){return arguments.length?(threshold=typeof _==="function"?_:Array.isArray(_)?constant(slice.call(_)):constant(_),histogram):threshold};return histogram}function max(values,valueof){let max;if(valueof===undefined){for(const value of values){if(value!=null&&(max<value||max===undefined&&value>=value)){max=value}}}else{let index=-1;for(let value of values){if((value=valueof(value,++index,values))!=null&&(max<value||max===undefined&&value>=value)){max=value}}}return max}function min(values,valueof){let min;if(valueof===undefined){for(const value of values){if(value!=null&&(min>value||min===undefined&&value>=value)){min=value}}}else{let index=-1;for(let value of values){if((value=valueof(value,++index,values))!=null&&(min>value||min===undefined&&value>=value)){min=value}}}return min}function quickselect(array,k,left=0,right=array.length-1,compare=ascending){while(right>left){if(right-left>600){const n=right-left+1;const m=k-left+1;const z=Math.log(n);const s=.5*Math.exp(2*z/3);const sd=.5*Math.sqrt(z*s*(n-s)/n)*(m-n/2<0?-1:1);const newLeft=Math.max(left,Math.floor(k-m*s/n+sd));const newRight=Math.min(right,Math.floor(k+(n-m)*s/n+sd));quickselect(array,k,newLeft,newRight,compare)}const t=array[k];let i=left;let j=right;swap(array,left,k);if(compare(array[right],t)>0)swap(array,left,right);while(i<j){swap(array,i,j),++i,--j;while(compare(array[i],t)<0)++i;while(compare(array[j],t)>0)--j}if(compare(array[left],t)===0)swap(array,left,j);else++j,swap(array,j,right);if(j<=k)left=j+1;if(k<=j)right=j-1}return array}function swap(array,i,j){const t=array[i];array[i]=array[j];array[j]=t}function quantile(values,p,valueof){values=Float64Array.from(numbers(values,valueof));if(!(n=values.length))return;if((p=+p)<=0||n<2)return min(values);if(p>=1)return max(values);var n,i=(n-1)*p,i0=Math.floor(i),value0=max(quickselect(values,i0).subarray(0,i0+1)),value1=min(values.subarray(i0+1));return value0+(value1-value0)*(i-i0)}function quantileSorted(values,p,valueof=number){if(!(n=values.length))return;if((p=+p)<=0||n<2)return+valueof(values[0],0,values);if(p>=1)return+valueof(values[n-1],n-1,values);var n,i=(n-1)*p,i0=Math.floor(i),value0=+valueof(values[i0],i0,values),value1=+valueof(values[i0+1],i0+1,values);return value0+(value1-value0)*(i-i0)}function freedmanDiaconis(values,min,max){return Math.ceil((max-min)/(2*(quantile(values,.75)-quantile(values,.25))*Math.pow(count(values),-1/3)))}function scott(values,min,max){return Math.ceil((max-min)/(3.5*deviation(values)*Math.pow(count(values),-1/3)))}function maxIndex(values,valueof){let max;let maxIndex=-1;let index=-1;if(valueof===undefined){for(const value of values){++index;if(value!=null&&(max<value||max===undefined&&value>=value)){max=value,maxIndex=index}}}else{for(let value of values){if((value=valueof(value,++index,values))!=null&&(max<value||max===undefined&&value>=value)){max=value,maxIndex=index}}}return maxIndex}function mean(values,valueof){let count=0;let sum=0;if(valueof===undefined){for(let value of values){if(value!=null&&(value=+value)>=value){++count,sum+=value}}}else{let index=-1;for(let value of values){if((value=valueof(value,++index,values))!=null&&(value=+value)>=value){++count,sum+=value}}}if(count)return sum/count}function median(values,valueof){return quantile(values,.5,valueof)}function*flatten(arrays){for(const array of arrays){yield*array}}function merge(arrays){return Array.from(flatten(arrays))}function minIndex(values,valueof){let min;let minIndex=-1;let index=-1;if(valueof===undefined){for(const value of values){++index;if(value!=null&&(min>value||min===undefined&&value>=value)){min=value,minIndex=index}}}else{for(let value of values){if((value=valueof(value,++index,values))!=null&&(min>value||min===undefined&&value>=value)){min=value,minIndex=index}}}return minIndex}function pairs(values,pairof=pair){const pairs=[];let previous;let first=false;for(const value of values){if(first)pairs.push(pairof(previous,value));previous=value;first=true}return pairs}function pair(a,b){return[a,b]}function sequence(start,stop,step){start=+start,stop=+stop,step=(n=arguments.length)<2?(stop=start,start=0,1):n<3?1:+step;var i=-1,n=Math.max(0,Math.ceil((stop-start)/step))|0,range=new Array(n);while(++i<n){range[i]=start+i*step}return range}function least(values,compare=ascending){let min;let defined=false;if(compare.length===1){let minValue;for(const element of values){const value=compare(element);if(defined?ascending(value,minValue)<0:ascending(value,value)===0){min=element;minValue=value;defined=true}}}else{for(const value of values){if(defined?compare(value,min)<0:compare(value,value)===0){min=value;defined=true}}}return min}function leastIndex(values,compare=ascending){if(compare.length===1)return minIndex(values,compare);let minValue;let min=-1;let index=-1;for(const value of values){++index;if(min<0?compare(value,value)===0:compare(value,minValue)<0){minValue=value;min=index}}return min}function greatest(values,compare=ascending){let max;let defined=false;if(compare.length===1){let maxValue;for(const element of values){const value=compare(element);if(defined?ascending(value,maxValue)>0:ascending(value,value)===0){max=element;maxValue=value;defined=true}}}else{for(const value of values){if(defined?compare(value,max)>0:compare(value,value)===0){max=value;defined=true}}}return max}function greatestIndex(values,compare=ascending){if(compare.length===1)return maxIndex(values,compare);let maxValue;let max=-1;let index=-1;for(const value of values){++index;if(max<0?compare(value,value)===0:compare(value,maxValue)>0){maxValue=value;max=index}}return max}function scan(values,compare){const index=leastIndex(values,compare);return index<0?undefined:index}var shuffle=shuffler(Math.random);function shuffler(random){return function shuffle(array,i0=0,i1=array.length){let m=i1-(i0=+i0);while(m){const i=random()*m--|0,t=array[m+i0];array[m+i0]=array[i+i0];array[i+i0]=t}return array}}function sum(values,valueof){let sum=0;if(valueof===undefined){for(let value of values){if(value=+value){sum+=value}}}else{let index=-1;for(let value of values){if(value=+valueof(value,++index,values)){sum+=value}}}return sum}function transpose(matrix){if(!(n=matrix.length))return[];for(var i=-1,m=min(matrix,length$1),transpose=new Array(m);++i<m;){for(var j=-1,n,row=transpose[i]=new Array(n);++j<n;){row[j]=matrix[j][i]}}return transpose}function length$1(d){return d.length}function zip(){return transpose(arguments)}function every(values,test){if(typeof test!=="function")throw new TypeError("test is not a function");let index=-1;for(const value of values){if(!test(value,++index,values)){return false}}return true}function some(values,test){if(typeof test!=="function")throw new TypeError("test is not a function");let index=-1;for(const value of values){if(test(value,++index,values)){return true}}return false}function filter(values,test){if(typeof test!=="function")throw new TypeError("test is not a function");const array=[];let index=-1;for(const value of values){if(test(value,++index,values)){array.push(value)}}return array}function map(values,mapper){if(typeof values[Symbol.iterator]!=="function")throw new TypeError("values is not iterable");if(typeof mapper!=="function")throw new TypeError("mapper is not a function");return Array.from(values,(value,index)=>mapper(value,index,values))}function reduce(values,reducer,value){if(typeof reducer!=="function")throw new TypeError("reducer is not a function");const iterator=values[Symbol.iterator]();let done,next,index=-1;if(arguments.length<3){({done:done,value:value}=iterator.next());if(done)return;++index}while(({done:done,value:next}=iterator.next()),!done){value=reducer(value,next,++index,values)}return value}function reverse(values){if(typeof values[Symbol.iterator]!=="function")throw new TypeError("values is not iterable");return Array.from(values).reverse()}function difference(values,...others){values=new Set(values);for(const other of others){for(const value of other){values.delete(value)}}return values}function disjoint(values,other){const iterator=other[Symbol.iterator](),set=new Set;for(const v of values){if(set.has(v))return false;let value,done;while(({value:value,done:done}=iterator.next())){if(done)break;if(Object.is(v,value))return false;set.add(value)}}return true}function set(values){return values instanceof Set?values:new Set(values)}function intersection(values,...others){values=new Set(values);others=others.map(set);out:for(const value of values){for(const other of others){if(!other.has(value)){values.delete(value);continue out}}}return values}function superset(values,other){const iterator=values[Symbol.iterator](),set=new Set;for(const o of other){if(set.has(o))continue;let value,done;while(({value:value,done:done}=iterator.next())){if(done)return false;set.add(value);if(Object.is(o,value))break}}return true}function subset(values,other){return superset(other,values)}function union(...others){const set=new Set;for(const other of others){for(const o of other){set.add(o)}}return set}var slice$1=Array.prototype.slice;function identity$1(x){return x}var top=1,right=2,bottom=3,left=4,epsilon=1e-6;function translateX(x){return"translate("+(x+.5)+",0)"}function translateY(y){return"translate(0,"+(y+.5)+")"}function number$1(scale){return d=>+scale(d)}function center(scale){var offset=Math.max(0,scale.bandwidth()-1)/2;if(scale.round())offset=Math.round(offset);return function(d){return+scale(d)+offset}}function entering(){return!this.__axis}function axis(orient,scale){var tickArguments=[],tickValues=null,tickFormat=null,tickSizeInner=6,tickSizeOuter=6,tickPadding=3,k=orient===top||orient===left?-1:1,x=orient===left||orient===right?"x":"y",transform=orient===top||orient===bottom?translateX:translateY;function axis(context){var values=tickValues==null?scale.ticks?scale.ticks.apply(scale,tickArguments):scale.domain():tickValues,format=tickFormat==null?scale.tickFormat?scale.tickFormat.apply(scale,tickArguments):identity$1:tickFormat,spacing=Math.max(tickSizeInner,0)+tickPadding,range=scale.range(),range0=+range[0]+.5,range1=+range[range.length-1]+.5,position=(scale.bandwidth?center:number$1)(scale.copy()),selection=context.selection?context.selection():context,path=selection.selectAll(".domain").data([null]),tick=selection.selectAll(".tick").data(values,scale).order(),tickExit=tick.exit(),tickEnter=tick.enter().append("g").attr("class","tick"),line=tick.select("line"),text=tick.select("text");path=path.merge(path.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor"));tick=tick.merge(tickEnter);line=line.merge(tickEnter.append("line").attr("stroke","currentColor").attr(x+"2",k*tickSizeInner));text=text.merge(tickEnter.append("text").attr("fill","currentColor").attr(x,k*spacing).attr("dy",orient===top?"0em":orient===bottom?"0.71em":"0.32em"));if(context!==selection){path=path.transition(context);tick=tick.transition(context);line=line.transition(context);text=text.transition(context);tickExit=tickExit.transition(context).attr("opacity",epsilon).attr("transform",function(d){return isFinite(d=position(d))?transform(d):this.getAttribute("transform")});tickEnter.attr("opacity",epsilon).attr("transform",function(d){var p=this.parentNode.__axis;return transform(p&&isFinite(p=p(d))?p:position(d))})}tickExit.remove();path.attr("d",orient===left||orient==right?tickSizeOuter?"M"+k*tickSizeOuter+","+range0+"H0.5V"+range1+"H"+k*tickSizeOuter:"M0.5,"+range0+"V"+range1:tickSizeOuter?"M"+range0+","+k*tickSizeOuter+"V0.5H"+range1+"V"+k*tickSizeOuter:"M"+range0+",0.5H"+range1);tick.attr("opacity",1).attr("transform",function(d){return transform(position(d))});line.attr(x+"2",k*tickSizeInner);text.attr(x,k*spacing).text(format);selection.filter(entering).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",orient===right?"start":orient===left?"end":"middle");selection.each(function(){this.__axis=position})}axis.scale=function(_){return arguments.length?(scale=_,axis):scale};axis.ticks=function(){return tickArguments=slice$1.call(arguments),axis};axis.tickArguments=function(_){return arguments.length?(tickArguments=_==null?[]:slice$1.call(_),axis):tickArguments.slice()};axis.tickValues=function(_){return arguments.length?(tickValues=_==null?null:slice$1.call(_),axis):tickValues&&tickValues.slice()};axis.tickFormat=function(_){return arguments.length?(tickFormat=_,axis):tickFormat};axis.tickSize=function(_){return arguments.length?(tickSizeInner=tickSizeOuter=+_,axis):tickSizeInner};axis.tickSizeInner=function(_){return arguments.length?(tickSizeInner=+_,axis):tickSizeInner};axis.tickSizeOuter=function(_){return arguments.length?(tickSizeOuter=+_,axis):tickSizeOuter};axis.tickPadding=function(_){return arguments.length?(tickPadding=+_,axis):tickPadding};return axis}function axisTop(scale){return axis(top,scale)}function axisRight(scale){return axis(right,scale)}function axisBottom(scale){return axis(bottom,scale)}function axisLeft(scale){return axis(left,scale)}var noop={value:()=>{}};function dispatch(){for(var i=0,n=arguments.length,_={},t;i<n;++i){if(!(t=arguments[i]+"")||t in _||/[\s.]/.test(t))throw new Error("illegal type: "+t);_[t]=[]}return new Dispatch(_)}function Dispatch(_){this._=_}function parseTypenames(typenames,types){return typenames.trim().split(/^|\s+/).map(function(t){var name="",i=t.indexOf(".");if(i>=0)name=t.slice(i+1),t=t.slice(0,i);if(t&&!types.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:name}})}Dispatch.prototype=dispatch.prototype={constructor:Dispatch,on:function(typename,callback){var _=this._,T=parseTypenames(typename+"",_),t,i=-1,n=T.length;if(arguments.length<2){while(++i<n)if((t=(typename=T[i]).type)&&(t=get(_[t],typename.name)))return t;return}if(callback!=null&&typeof callback!=="function")throw new Error("invalid callback: "+callback);while(++i<n){if(t=(typename=T[i]).type)_[t]=set$1(_[t],typename.name,callback);else if(callback==null)for(t in _)_[t]=set$1(_[t],typename.name,null)}return this},copy:function(){var copy={},_=this._;for(var t in _)copy[t]=_[t].slice();return new Dispatch(copy)},call:function(type,that){if((n=arguments.length-2)>0)for(var args=new Array(n),i=0,n,t;i<n;++i)args[i]=arguments[i+2];if(!this._.hasOwnProperty(type))throw new Error("unknown type: "+type);for(t=this._[type],i=0,n=t.length;i<n;++i)t[i].value.apply(that,args)},apply:function(type,that,args){if(!this._.hasOwnProperty(type))throw new Error("unknown type: "+type);for(var t=this._[type],i=0,n=t.length;i<n;++i)t[i].value.apply(that,args)}};function get(type,name){for(var i=0,n=type.length,c;i<n;++i){if((c=type[i]).name===name){return c.value}}}function set$1(type,name,callback){for(var i=0,n=type.length;i<n;++i){if(type[i].name===name){type[i]=noop,type=type.slice(0,i).concat(type.slice(i+1));break}}if(callback!=null)type.push({name:name,value:callback});return type}var xhtml="http://www.w3.org/1999/xhtml";var namespaces={svg:"http://www.w3.org/2000/svg",xhtml:xhtml,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function namespace(name){var prefix=name+="",i=prefix.indexOf(":");if(i>=0&&(prefix=name.slice(0,i))!=="xmlns")name=name.slice(i+1);return namespaces.hasOwnProperty(prefix)?{space:namespaces[prefix],local:name}:name}function creatorInherit(name){return function(){var document=this.ownerDocument,uri=this.namespaceURI;return uri===xhtml&&document.documentElement.namespaceURI===xhtml?document.createElement(name):document.createElementNS(uri,name)}}function creatorFixed(fullname){return function(){return this.ownerDocument.createElementNS(fullname.space,fullname.local)}}function creator(name){var fullname=namespace(name);return(fullname.local?creatorFixed:creatorInherit)(fullname)}function none(){}function selector(selector){return selector==null?none:function(){return this.querySelector(selector)}}function selection_select(select){if(typeof select!=="function")select=selector(select);for(var groups=this._groups,m=groups.length,subgroups=new Array(m),j=0;j<m;++j){for(var group=groups[j],n=group.length,subgroup=subgroups[j]=new Array(n),node,subnode,i=0;i<n;++i){if((node=group[i])&&(subnode=select.call(node,node.__data__,i,group))){if("__data__"in node)subnode.__data__=node.__data__;subgroup[i]=subnode}}}return new Selection(subgroups,this._parents)}function array$1(x){return typeof x==="object"&&"length"in x?x:Array.from(x)}function empty$1(){return[]}function selectorAll(selector){return selector==null?empty$1:function(){return this.querySelectorAll(selector)}}function arrayAll(select){return function(){var group=select.apply(this,arguments);return group==null?[]:array$1(group)}}function selection_selectAll(select){if(typeof select==="function")select=arrayAll(select);else select=selectorAll(select);for(var groups=this._groups,m=groups.length,subgroups=[],parents=[],j=0;j<m;++j){for(var group=groups[j],n=group.length,node,i=0;i<n;++i){if(node=group[i]){subgroups.push(select.call(node,node.__data__,i,group));parents.push(node)}}}return new Selection(subgroups,parents)}function matcher(selector){return function(){return this.matches(selector)}}function childMatcher(selector){return function(node){return node.matches(selector)}}var find=Array.prototype.find;function childFind(match){return function(){return find.call(this.children,match)}}function childFirst(){return this.firstElementChild}function selection_selectChild(match){return this.select(match==null?childFirst:childFind(typeof match==="function"?match:childMatcher(match)))}var filter$1=Array.prototype.filter;function children(){return this.children}function childrenFilter(match){return function(){return filter$1.call(this.children,match)}}function selection_selectChildren(match){return this.selectAll(match==null?children:childrenFilter(typeof match==="function"?match:childMatcher(match)))}function selection_filter(match){if(typeof match!=="function")match=matcher(match);for(var groups=this._groups,m=groups.length,subgroups=new Array(m),j=0;j<m;++j){for(var group=groups[j],n=group.length,subgroup=subgroups[j]=[],node,i=0;i<n;++i){if((node=group[i])&&match.call(node,node.__data__,i,group)){subgroup.push(node)}}}return new Selection(subgroups,this._parents)}function sparse(update){return new Array(update.length)}function selection_enter(){return new Selection(this._enter||this._groups.map(sparse),this._parents)}function EnterNode(parent,datum){this.ownerDocument=parent.ownerDocument;this.namespaceURI=parent.namespaceURI;this._next=null;this._parent=parent;this.__data__=datum}EnterNode.prototype={constructor:EnterNode,appendChild:function(child){return this._parent.insertBefore(child,this._next)},insertBefore:function(child,next){return this._parent.insertBefore(child,next)},querySelector:function(selector){return this._parent.querySelector(selector)},querySelectorAll:function(selector){return this._parent.querySelectorAll(selector)}};function constant$1(x){return function(){return x}}function bindIndex(parent,group,enter,update,exit,data){var i=0,node,groupLength=group.length,dataLength=data.length;for(;i<dataLength;++i){if(node=group[i]){node.__data__=data[i];update[i]=node}else{enter[i]=new EnterNode(parent,data[i])}}for(;i<groupLength;++i){if(node=group[i]){exit[i]=node}}}function bindKey(parent,group,enter,update,exit,data,key){var i,node,nodeByKeyValue=new Map,groupLength=group.length,dataLength=data.length,keyValues=new Array(groupLength),keyValue;for(i=0;i<groupLength;++i){if(node=group[i]){keyValues[i]=keyValue=key.call(node,node.__data__,i,group)+"";if(nodeByKeyValue.has(keyValue)){exit[i]=node}else{nodeByKeyValue.set(keyValue,node)}}}for(i=0;i<dataLength;++i){keyValue=key.call(parent,data[i],i,data)+"";if(node=nodeByKeyValue.get(keyValue)){update[i]=node;node.__data__=data[i];nodeByKeyValue.delete(keyValue)}else{enter[i]=new EnterNode(parent,data[i])}}for(i=0;i<groupLength;++i){if((node=group[i])&&nodeByKeyValue.get(keyValues[i])===node){exit[i]=node}}}function datum(node){return node.__data__}function selection_data(value,key){if(!arguments.length)return Array.from(this,datum);var bind=key?bindKey:bindIndex,parents=this._parents,groups=this._groups;if(typeof value!=="function")value=constant$1(value);for(var m=groups.length,update=new Array(m),enter=new Array(m),exit=new Array(m),j=0;j<m;++j){var parent=parents[j],group=groups[j],groupLength=group.length,data=array$1(value.call(parent,parent&&parent.__data__,j,parents)),dataLength=data.length,enterGroup=enter[j]=new Array(dataLength),updateGroup=update[j]=new Array(dataLength),exitGroup=exit[j]=new Array(groupLength);bind(parent,group,enterGroup,updateGroup,exitGroup,data,key);for(var i0=0,i1=0,previous,next;i0<dataLength;++i0){if(previous=enterGroup[i0]){if(i0>=i1)i1=i0+1;while(!(next=updateGroup[i1])&&++i1<dataLength);previous._next=next||null}}}update=new Selection(update,parents);update._enter=enter;update._exit=exit;return update}function selection_exit(){return new Selection(this._exit||this._groups.map(sparse),this._parents)}function selection_join(onenter,onupdate,onexit){var enter=this.enter(),update=this,exit=this.exit();enter=typeof onenter==="function"?onenter(enter):enter.append(onenter+"");if(onupdate!=null)update=onupdate(update);if(onexit==null)exit.remove();else onexit(exit);return enter&&update?enter.merge(update).order():update}function selection_merge(selection){if(!(selection instanceof Selection))throw new Error("invalid merge");for(var groups0=this._groups,groups1=selection._groups,m0=groups0.length,m1=groups1.length,m=Math.min(m0,m1),merges=new Array(m0),j=0;j<m;++j){for(var group0=groups0[j],group1=groups1[j],n=group0.length,merge=merges[j]=new Array(n),node,i=0;i<n;++i){if(node=group0[i]||group1[i]){merge[i]=node}}}for(;j<m0;++j){merges[j]=groups0[j]}return new Selection(merges,this._parents)}function selection_order(){for(var groups=this._groups,j=-1,m=groups.length;++j<m;){for(var group=groups[j],i=group.length-1,next=group[i],node;--i>=0;){if(node=group[i]){if(next&&node.compareDocumentPosition(next)^4)next.parentNode.insertBefore(node,next);next=node}}}return this}function selection_sort(compare){if(!compare)compare=ascending$1;function compareNode(a,b){return a&&b?compare(a.__data__,b.__data__):!a-!b}for(var groups=this._groups,m=groups.length,sortgroups=new Array(m),j=0;j<m;++j){for(var group=groups[j],n=group.length,sortgroup=sortgroups[j]=new Array(n),node,i=0;i<n;++i){if(node=group[i]){sortgroup[i]=node}}sortgroup.sort(compareNode)}return new Selection(sortgroups,this._parents).order()}function ascending$1(a,b){return a<b?-1:a>b?1:a>=b?0:NaN}function selection_call(){var callback=arguments[0];arguments[0]=this;callback.apply(null,arguments);return this}function selection_nodes(){return Array.from(this)}function selection_node(){for(var groups=this._groups,j=0,m=groups.length;j<m;++j){for(var group=groups[j],i=0,n=group.length;i<n;++i){var node=group[i];if(node)return node}}return null}function selection_size(){let size=0;for(const node of this)++size;return size}function selection_empty(){return!this.node()}function selection_each(callback){for(var groups=this._groups,j=0,m=groups.length;j<m;++j){for(var group=groups[j],i=0,n=group.length,node;i<n;++i){if(node=group[i])callback.call(node,node.__data__,i,group)}}return this}function attrRemove(name){return function(){this.removeAttribute(name)}}function attrRemoveNS(fullname){return function(){this.removeAttributeNS(fullname.space,fullname.local)}}function attrConstant(name,value){return function(){this.setAttribute(name,value)}}function attrConstantNS(fullname,value){return function(){this.setAttributeNS(fullname.space,fullname.local,value)}}function attrFunction(name,value){return function(){var v=value.apply(this,arguments);if(v==null)this.removeAttribute(name);else this.setAttribute(name,v)}}function attrFunctionNS(fullname,value){return function(){var v=value.apply(this,arguments);if(v==null)this.removeAttributeNS(fullname.space,fullname.local);else this.setAttributeNS(fullname.space,fullname.local,v)}}function selection_attr(name,value){var fullname=namespace(name);if(arguments.length<2){var node=this.node();return fullname.local?node.getAttributeNS(fullname.space,fullname.local):node.getAttribute(fullname)}return this.each((value==null?fullname.local?attrRemoveNS:attrRemove:typeof value==="function"?fullname.local?attrFunctionNS:attrFunction:fullname.local?attrConstantNS:attrConstant)(fullname,value))}function defaultView(node){return node.ownerDocument&&node.ownerDocument.defaultView||node.document&&node||node.defaultView}function styleRemove(name){return function(){this.style.removeProperty(name)}}function styleConstant(name,value,priority){return function(){this.style.setProperty(name,value,priority)}}function styleFunction(name,value,priority){return function(){var v=value.apply(this,arguments);if(v==null)this.style.removeProperty(name);else this.style.setProperty(name,v,priority)}}function selection_style(name,value,priority){return arguments.length>1?this.each((value==null?styleRemove:typeof value==="function"?styleFunction:styleConstant)(name,value,priority==null?"":priority)):styleValue(this.node(),name)}function styleValue(node,name){return node.style.getPropertyValue(name)||defaultView(node).getComputedStyle(node,null).getPropertyValue(name)}function propertyRemove(name){return function(){delete this[name]}}function propertyConstant(name,value){return function(){this[name]=value}}function propertyFunction(name,value){return function(){var v=value.apply(this,arguments);if(v==null)delete this[name];else this[name]=v}}function selection_property(name,value){return arguments.length>1?this.each((value==null?propertyRemove:typeof value==="function"?propertyFunction:propertyConstant)(name,value)):this.node()[name]}function classArray(string){return string.trim().split(/^|\s+/)}function classList(node){return node.classList||new ClassList(node)}function ClassList(node){this._node=node;this._names=classArray(node.getAttribute("class")||"")}ClassList.prototype={add:function(name){var i=this._names.indexOf(name);if(i<0){this._names.push(name);this._node.setAttribute("class",this._names.join(" "))}},remove:function(name){var i=this._names.indexOf(name);if(i>=0){this._names.splice(i,1);this._node.setAttribute("class",this._names.join(" "))}},contains:function(name){return this._names.indexOf(name)>=0}};function classedAdd(node,names){var list=classList(node),i=-1,n=names.length;while(++i<n)list.add(names[i])}function classedRemove(node,names){var list=classList(node),i=-1,n=names.length;while(++i<n)list.remove(names[i])}function classedTrue(names){return function(){classedAdd(this,names)}}function classedFalse(names){return function(){classedRemove(this,names)}}function classedFunction(names,value){return function(){(value.apply(this,arguments)?classedAdd:classedRemove)(this,names)}}function selection_classed(name,value){var names=classArray(name+"");if(arguments.length<2){var list=classList(this.node()),i=-1,n=names.length;while(++i<n)if(!list.contains(names[i]))return false;return true}return this.each((typeof value==="function"?classedFunction:value?classedTrue:classedFalse)(names,value))}function textRemove(){this.textContent=""}function textConstant(value){return function(){this.textContent=value}}function textFunction(value){return function(){var v=value.apply(this,arguments);this.textContent=v==null?"":v}}function selection_text(value){return arguments.length?this.each(value==null?textRemove:(typeof value==="function"?textFunction:textConstant)(value)):this.node().textContent}function htmlRemove(){this.innerHTML=""}function htmlConstant(value){return function(){this.innerHTML=value}}function htmlFunction(value){return function(){var v=value.apply(this,arguments);this.innerHTML=v==null?"":v}}function selection_html(value){return arguments.length?this.each(value==null?htmlRemove:(typeof value==="function"?htmlFunction:htmlConstant)(value)):this.node().innerHTML}function raise(){if(this.nextSibling)this.parentNode.appendChild(this)}function selection_raise(){return this.each(raise)}function lower(){if(this.previousSibling)this.parentNode.insertBefore(this,this.parentNode.firstChild)}function selection_lower(){return this.each(lower)}function selection_append(name){var create=typeof name==="function"?name:creator(name);return this.select(function(){return this.appendChild(create.apply(this,arguments))})}function constantNull(){return null}function selection_insert(name,before){var create=typeof name==="function"?name:creator(name),select=before==null?constantNull:typeof before==="function"?before:selector(before);return this.select(function(){return this.insertBefore(create.apply(this,arguments),select.apply(this,arguments)||null)})}function remove(){var parent=this.parentNode;if(parent)parent.removeChild(this)}function selection_remove(){return this.each(remove)}function selection_cloneShallow(){var clone=this.cloneNode(false),parent=this.parentNode;return parent?parent.insertBefore(clone,this.nextSibling):clone}function selection_cloneDeep(){var clone=this.cloneNode(true),parent=this.parentNode;return parent?parent.insertBefore(clone,this.nextSibling):clone}function selection_clone(deep){return this.select(deep?selection_cloneDeep:selection_cloneShallow)}function selection_datum(value){return arguments.length?this.property("__data__",value):this.node().__data__}function contextListener(listener){return function(event){listener.call(this,event,this.__data__)}}function parseTypenames$1(typenames){return typenames.trim().split(/^|\s+/).map(function(t){var name="",i=t.indexOf(".");if(i>=0)name=t.slice(i+1),t=t.slice(0,i);return{type:t,name:name}})}function onRemove(typename){return function(){var on=this.__on;if(!on)return;for(var j=0,i=-1,m=on.length,o;j<m;++j){if(o=on[j],(!typename.type||o.type===typename.type)&&o.name===typename.name){this.removeEventListener(o.type,o.listener,o.options)}else{on[++i]=o}}if(++i)on.length=i;else delete this.__on}}function onAdd(typename,value,options){return function(){var on=this.__on,o,listener=contextListener(value);if(on)for(var j=0,m=on.length;j<m;++j){if((o=on[j]).type===typename.type&&o.name===typename.name){this.removeEventListener(o.type,o.listener,o.options);this.addEventListener(o.type,o.listener=listener,o.options=options);o.value=value;return}}this.addEventListener(typename.type,listener,options);o={type:typename.type,name:typename.name,value:value,listener:listener,options:options};if(!on)this.__on=[o];else on.push(o)}}function selection_on(typename,value,options){var typenames=parseTypenames$1(typename+""),i,n=typenames.length,t;if(arguments.length<2){var on=this.node().__on;if(on)for(var j=0,m=on.length,o;j<m;++j){for(i=0,o=on[j];i<n;++i){if((t=typenames[i]).type===o.type&&t.name===o.name){return o.value}}}return}on=value?onAdd:onRemove;for(i=0;i<n;++i)this.each(on(typenames[i],value,options));return this}function dispatchEvent(node,type,params){var window=defaultView(node),event=window.CustomEvent;if(typeof event==="function"){event=new event(type,params)}else{event=window.document.createEvent("Event");if(params)event.initEvent(type,params.bubbles,params.cancelable),event.detail=params.detail;else event.initEvent(type,false,false)}node.dispatchEvent(event)}function dispatchConstant(type,params){return function(){return dispatchEvent(this,type,params)}}function dispatchFunction(type,params){return function(){return dispatchEvent(this,type,params.apply(this,arguments))}}function selection_dispatch(type,params){return this.each((typeof params==="function"?dispatchFunction:dispatchConstant)(type,params))}function*selection_iterator(){for(var groups=this._groups,j=0,m=groups.length;j<m;++j){for(var group=groups[j],i=0,n=group.length,node;i<n;++i){if(node=group[i])yield node}}}var root=[null];function Selection(groups,parents){this._groups=groups;this._parents=parents}function selection(){return new Selection([[document.documentElement]],root)}function selection_selection(){return this}Selection.prototype=selection.prototype={constructor:Selection,select:selection_select,selectAll:selection_selectAll,selectChild:selection_selectChild,selectChildren:selection_selectChildren,filter:selection_filter,data:selection_data,enter:selection_enter,exit:selection_exit,join:selection_join,merge:selection_merge,selection:selection_selection,order:selection_order,sort:selection_sort,call:selection_call,nodes:selection_nodes,node:selection_node,size:selection_size,empty:selection_empty,each:selection_each,attr:selection_attr,style:selection_style,property:selection_property,classed:selection_classed,text:selection_text,html:selection_html,raise:selection_raise,lower:selection_lower,append:selection_append,insert:selection_insert,remove:selection_remove,clone:selection_clone,datum:selection_datum,on:selection_on,dispatch:selection_dispatch,[Symbol.iterator]:selection_iterator};function select(selector){return typeof selector==="string"?new Selection([[document.querySelector(selector)]],[document.documentElement]):new Selection([[selector]],root)}function create(name){return select(creator(name).call(document.documentElement))}var nextId=0;function local(){return new Local}function Local(){this._="@"+(++nextId).toString(36)}Local.prototype=local.prototype={constructor:Local,get:function(node){var id=this._;while(!(id in node))if(!(node=node.parentNode))return;return node[id]},set:function(node,value){return node[this._]=value},remove:function(node){return this._ in node&&delete node[this._]},toString:function(){return this._}};function sourceEvent(event){let sourceEvent;while(sourceEvent=event.sourceEvent)event=sourceEvent;return event}function pointer(event,node){event=sourceEvent(event);if(node===undefined)node=event.currentTarget;if(node){var svg=node.ownerSVGElement||node;if(svg.createSVGPoint){var point=svg.createSVGPoint();point.x=event.clientX,point.y=event.clientY;point=point.matrixTransform(node.getScreenCTM().inverse());return[point.x,point.y]}if(node.getBoundingClientRect){var rect=node.getBoundingClientRect();return[event.clientX-rect.left-node.clientLeft,event.clientY-rect.top-node.clientTop]}}return[event.pageX,event.pageY]}function pointers(events,node){if(events.target){events=sourceEvent(events);if(node===undefined)node=events.currentTarget;events=events.touches||[events]}return Array.from(events,event=>pointer(event,node))}function selectAll(selector){return typeof selector==="string"?new Selection([document.querySelectorAll(selector)],[document.documentElement]):new Selection([selector==null?[]:array$1(selector)],root)}function nopropagation(event){event.stopImmediatePropagation()}function noevent(event){event.preventDefault();event.stopImmediatePropagation()}function dragDisable(view){var root=view.document.documentElement,selection=select(view).on("dragstart.drag",noevent,true);if("onselectstart"in root){selection.on("selectstart.drag",noevent,true)}else{root.__noselect=root.style.MozUserSelect;root.style.MozUserSelect="none"}}function yesdrag(view,noclick){var root=view.document.documentElement,selection=select(view).on("dragstart.drag",null);if(noclick){selection.on("click.drag",noevent,true);setTimeout(function(){selection.on("click.drag",null)},0)}if("onselectstart"in root){selection.on("selectstart.drag",null)}else{root.style.MozUserSelect=root.__noselect;delete root.__noselect}}var constant$2=x=>()=>x;function DragEvent(type,{sourceEvent:sourceEvent,subject:subject,target:target,identifier:identifier,active:active,x:x,y:y,dx:dx,dy:dy,dispatch:dispatch}){Object.defineProperties(this,{type:{value:type,enumerable:true,configurable:true},sourceEvent:{value:sourceEvent,enumerable:true,configurable:true},subject:{value:subject,enumerable:true,configurable:true},target:{value:target,enumerable:true,configurable:true},identifier:{value:identifier,enumerable:true,configurable:true},active:{value:active,enumerable:true,configurable:true},x:{value:x,enumerable:true,configurable:true},y:{value:y,enumerable:true,configurable:true},dx:{value:dx,enumerable:true,configurable:true},dy:{value:dy,enumerable:true,configurable:true},_:{value:dispatch}})}DragEvent.prototype.on=function(){var value=this._.on.apply(this._,arguments);return value===this._?this:value};function defaultFilter(event){return!event.ctrlKey&&!event.button}function defaultContainer(){return this.parentNode}function defaultSubject(event,d){return d==null?{x:event.x,y:event.y}:d}function defaultTouchable(){return navigator.maxTouchPoints||"ontouchstart"in this}function drag(){var filter=defaultFilter,container=defaultContainer,subject=defaultSubject,touchable=defaultTouchable,gestures={},listeners=dispatch("start","drag","end"),active=0,mousedownx,mousedowny,mousemoving,touchending,clickDistance2=0;function drag(selection){selection.on("mousedown.drag",mousedowned).filter(touchable).on("touchstart.drag",touchstarted).on("touchmove.drag",touchmoved).on("touchend.drag touchcancel.drag",touchended).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function mousedowned(event,d){if(touchending||!filter.call(this,event,d))return;var gesture=beforestart(this,container.call(this,event,d),event,d,"mouse");if(!gesture)return;select(event.view).on("mousemove.drag",mousemoved,true).on("mouseup.drag",mouseupped,true);dragDisable(event.view);nopropagation(event);mousemoving=false;mousedownx=event.clientX;mousedowny=event.clientY;gesture("start",event)}function mousemoved(event){noevent(event);if(!mousemoving){var dx=event.clientX-mousedownx,dy=event.clientY-mousedowny;mousemoving=dx*dx+dy*dy>clickDistance2}gestures.mouse("drag",event)}function mouseupped(event){select(event.view).on("mousemove.drag mouseup.drag",null);yesdrag(event.view,mousemoving);noevent(event);gestures.mouse("end",event)}function touchstarted(event,d){if(!filter.call(this,event,d))return;var touches=event.changedTouches,c=container.call(this,event,d),n=touches.length,i,gesture;for(i=0;i<n;++i){if(gesture=beforestart(this,c,event,d,touches[i].identifier,touches[i])){nopropagation(event);gesture("start",event,touches[i])}}}function touchmoved(event){var touches=event.changedTouches,n=touches.length,i,gesture;for(i=0;i<n;++i){if(gesture=gestures[touches[i].identifier]){noevent(event);gesture("drag",event,touches[i])}}}function touchended(event){var touches=event.changedTouches,n=touches.length,i,gesture;if(touchending)clearTimeout(touchending);touchending=setTimeout(function(){touchending=null},500);for(i=0;i<n;++i){if(gesture=gestures[touches[i].identifier]){nopropagation(event);gesture("end",event,touches[i])}}}function beforestart(that,container,event,d,identifier,touch){var dispatch=listeners.copy(),p=pointer(touch||event,container),dx,dy,s;if((s=subject.call(that,new DragEvent("beforestart",{sourceEvent:event,target:drag,identifier:identifier,active:active,x:p[0],y:p[1],dx:0,dy:0,dispatch:dispatch}),d))==null)return;dx=s.x-p[0]||0;dy=s.y-p[1]||0;return function gesture(type,event,touch){var p0=p,n;switch(type){case"start":gestures[identifier]=gesture,n=active++;break;case"end":delete gestures[identifier],--active;case"drag":p=pointer(touch||event,container),n=active;break}dispatch.call(type,that,new DragEvent(type,{sourceEvent:event,subject:s,target:drag,identifier:identifier,active:n,x:p[0]+dx,y:p[1]+dy,dx:p[0]-p0[0],dy:p[1]-p0[1],dispatch:dispatch}),d)}}drag.filter=function(_){return arguments.length?(filter=typeof _==="function"?_:constant$2(!!_),drag):filter};drag.container=function(_){return arguments.length?(container=typeof _==="function"?_:constant$2(_),drag):container};drag.subject=function(_){return arguments.length?(subject=typeof _==="function"?_:constant$2(_),drag):subject};drag.touchable=function(_){return arguments.length?(touchable=typeof _==="function"?_:constant$2(!!_),drag):touchable};drag.on=function(){var value=listeners.on.apply(listeners,arguments);return value===listeners?drag:value};drag.clickDistance=function(_){return arguments.length?(clickDistance2=(_=+_)*_,drag):Math.sqrt(clickDistance2)};return drag}function define(constructor,factory,prototype){constructor.prototype=factory.prototype=prototype;prototype.constructor=constructor}function extend(parent,definition){var prototype=Object.create(parent.prototype);for(var key in definition)prototype[key]=definition[key];return prototype}function Color(){}var darker=.7;var brighter=1/darker;var reI="\\s*([+-]?\\d+)\\s*",reN="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",reP="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",reHex=/^#([0-9a-f]{3,8})$/,reRgbInteger=new RegExp("^rgb\\("+[reI,reI,reI]+"\\)$"),reRgbPercent=new RegExp("^rgb\\("+[reP,reP,reP]+"\\)$"),reRgbaInteger=new RegExp("^rgba\\("+[reI,reI,reI,reN]+"\\)$"),reRgbaPercent=new RegExp("^rgba\\("+[reP,reP,reP,reN]+"\\)$"),reHslPercent=new RegExp("^hsl\\("+[reN,reP,reP]+"\\)$"),reHslaPercent=new RegExp("^hsla\\("+[reN,reP,reP,reN]+"\\)$");var named={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};define(Color,color,{copy:function(channels){return Object.assign(new this.constructor,this,channels)},displayable:function(){return this.rgb().displayable()},hex:color_formatHex,formatHex:color_formatHex,formatHsl:color_formatHsl,formatRgb:color_formatRgb,toString:color_formatRgb});function color_formatHex(){return this.rgb().formatHex()}function color_formatHsl(){return hslConvert(this).formatHsl()}function color_formatRgb(){return this.rgb().formatRgb()}function color(format){var m,l;format=(format+"").trim().toLowerCase();return(m=reHex.exec(format))?(l=m[1].length,m=parseInt(m[1],16),l===6?rgbn(m):l===3?new Rgb(m>>8&15|m>>4&240,m>>4&15|m&240,(m&15)<<4|m&15,1):l===8?rgba(m>>24&255,m>>16&255,m>>8&255,(m&255)/255):l===4?rgba(m>>12&15|m>>8&240,m>>8&15|m>>4&240,m>>4&15|m&240,((m&15)<<4|m&15)/255):null):(m=reRgbInteger.exec(format))?new Rgb(m[1],m[2],m[3],1):(m=reRgbPercent.exec(format))?new Rgb(m[1]*255/100,m[2]*255/100,m[3]*255/100,1):(m=reRgbaInteger.exec(format))?rgba(m[1],m[2],m[3],m[4]):(m=reRgbaPercent.exec(format))?rgba(m[1]*255/100,m[2]*255/100,m[3]*255/100,m[4]):(m=reHslPercent.exec(format))?hsla(m[1],m[2]/100,m[3]/100,1):(m=reHslaPercent.exec(format))?hsla(m[1],m[2]/100,m[3]/100,m[4]):named.hasOwnProperty(format)?rgbn(named[format]):format==="transparent"?new Rgb(NaN,NaN,NaN,0):null}function rgbn(n){return new Rgb(n>>16&255,n>>8&255,n&255,1)}function rgba(r,g,b,a){if(a<=0)r=g=b=NaN;return new Rgb(r,g,b,a)}function rgbConvert(o){if(!(o instanceof Color))o=color(o);if(!o)return new Rgb;o=o.rgb();return new Rgb(o.r,o.g,o.b,o.opacity)}function rgb(r,g,b,opacity){return arguments.length===1?rgbConvert(r):new Rgb(r,g,b,opacity==null?1:opacity)}function Rgb(r,g,b,opacity){this.r=+r;this.g=+g;this.b=+b;this.opacity=+opacity}define(Rgb,rgb,extend(Color,{brighter:function(k){k=k==null?brighter:Math.pow(brighter,k);return new Rgb(this.r*k,this.g*k,this.b*k,this.opacity)},darker:function(k){k=k==null?darker:Math.pow(darker,k);return new Rgb(this.r*k,this.g*k,this.b*k,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&(-.5<=this.g&&this.g<255.5)&&(-.5<=this.b&&this.b<255.5)&&(0<=this.opacity&&this.opacity<=1)},hex:rgb_formatHex,formatHex:rgb_formatHex,formatRgb:rgb_formatRgb,toString:rgb_formatRgb}));function rgb_formatHex(){return"#"+hex(this.r)+hex(this.g)+hex(this.b)}function rgb_formatRgb(){var a=this.opacity;a=isNaN(a)?1:Math.max(0,Math.min(1,a));return(a===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(a===1?")":", "+a+")")}function hex(value){value=Math.max(0,Math.min(255,Math.round(value)||0));return(value<16?"0":"")+value.toString(16)}function hsla(h,s,l,a){if(a<=0)h=s=l=NaN;else if(l<=0||l>=1)h=s=NaN;else if(s<=0)h=NaN;return new Hsl(h,s,l,a)}function hslConvert(o){if(o instanceof Hsl)return new Hsl(o.h,o.s,o.l,o.opacity);if(!(o instanceof Color))o=color(o);if(!o)return new Hsl;if(o instanceof Hsl)return o;o=o.rgb();var r=o.r/255,g=o.g/255,b=o.b/255,min=Math.min(r,g,b),max=Math.max(r,g,b),h=NaN,s=max-min,l=(max+min)/2;if(s){if(r===max)h=(g-b)/s+(g<b)*6;else if(g===max)h=(b-r)/s+2;else h=(r-g)/s+4;s/=l<.5?max+min:2-max-min;h*=60}else{s=l>0&&l<1?0:h}return new Hsl(h,s,l,o.opacity)}function hsl(h,s,l,opacity){return arguments.length===1?hslConvert(h):new Hsl(h,s,l,opacity==null?1:opacity)}function Hsl(h,s,l,opacity){this.h=+h;this.s=+s;this.l=+l;this.opacity=+opacity}define(Hsl,hsl,extend(Color,{brighter:function(k){k=k==null?brighter:Math.pow(brighter,k);return new Hsl(this.h,this.s,this.l*k,this.opacity)},darker:function(k){k=k==null?darker:Math.pow(darker,k);return new Hsl(this.h,this.s,this.l*k,this.opacity)},rgb:function(){var h=this.h%360+(this.h<0)*360,s=isNaN(h)||isNaN(this.s)?0:this.s,l=this.l,m2=l+(l<.5?l:1-l)*s,m1=2*l-m2;return new Rgb(hsl2rgb(h>=240?h-240:h+120,m1,m2),hsl2rgb(h,m1,m2),hsl2rgb(h<120?h+240:h-120,m1,m2),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&(0<=this.l&&this.l<=1)&&(0<=this.opacity&&this.opacity<=1)},formatHsl:function(){var a=this.opacity;a=isNaN(a)?1:Math.max(0,Math.min(1,a));return(a===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(a===1?")":", "+a+")")}}));function hsl2rgb(h,m1,m2){return(h<60?m1+(m2-m1)*h/60:h<180?m2:h<240?m1+(m2-m1)*(240-h)/60:m1)*255}const radians=Math.PI/180;const degrees=180/Math.PI;const K=18,Xn=.96422,Yn=1,Zn=.82521,t0=4/29,t1=6/29,t2=3*t1*t1,t3=t1*t1*t1;function labConvert(o){if(o instanceof Lab)return new Lab(o.l,o.a,o.b,o.opacity);if(o instanceof Hcl)return hcl2lab(o);if(!(o instanceof Rgb))o=rgbConvert(o);var r=rgb2lrgb(o.r),g=rgb2lrgb(o.g),b=rgb2lrgb(o.b),y=xyz2lab((.2225045*r+.7168786*g+.0606169*b)/Yn),x,z;if(r===g&&g===b)x=z=y;else{x=xyz2lab((.4360747*r+.3850649*g+.1430804*b)/Xn);z=xyz2lab((.0139322*r+.0971045*g+.7141733*b)/Zn)}return new Lab(116*y-16,500*(x-y),200*(y-z),o.opacity)}function gray(l,opacity){return new Lab(l,0,0,opacity==null?1:opacity)}function lab(l,a,b,opacity){return arguments.length===1?labConvert(l):new Lab(l,a,b,opacity==null?1:opacity)}function Lab(l,a,b,opacity){this.l=+l;this.a=+a;this.b=+b;this.opacity=+opacity}define(Lab,lab,extend(Color,{brighter:function(k){return new Lab(this.l+K*(k==null?1:k),this.a,this.b,this.opacity)},darker:function(k){return new Lab(this.l-K*(k==null?1:k),this.a,this.b,this.opacity)},rgb:function(){var y=(this.l+16)/116,x=isNaN(this.a)?y:y+this.a/500,z=isNaN(this.b)?y:y-this.b/200;x=Xn*lab2xyz(x);y=Yn*lab2xyz(y);z=Zn*lab2xyz(z);return new Rgb(lrgb2rgb(3.1338561*x-1.6168667*y-.4906146*z),lrgb2rgb(-.9787684*x+1.9161415*y+.033454*z),lrgb2rgb(.0719453*x-.2289914*y+1.4052427*z),this.opacity)}}));function xyz2lab(t){return t>t3?Math.pow(t,1/3):t/t2+t0}function lab2xyz(t){return t>t1?t*t*t:t2*(t-t0)}function lrgb2rgb(x){return 255*(x<=.0031308?12.92*x:1.055*Math.pow(x,1/2.4)-.055)}function rgb2lrgb(x){return(x/=255)<=.04045?x/12.92:Math.pow((x+.055)/1.055,2.4)}function hclConvert(o){if(o instanceof Hcl)return new Hcl(o.h,o.c,o.l,o.opacity);if(!(o instanceof Lab))o=labConvert(o);if(o.a===0&&o.b===0)return new Hcl(NaN,0<o.l&&o.l<100?0:NaN,o.l,o.opacity);var h=Math.atan2(o.b,o.a)*degrees;return new Hcl(h<0?h+360:h,Math.sqrt(o.a*o.a+o.b*o.b),o.l,o.opacity)}function lch(l,c,h,opacity){return arguments.length===1?hclConvert(l):new Hcl(h,c,l,opacity==null?1:opacity)}function hcl(h,c,l,opacity){return arguments.length===1?hclConvert(h):new Hcl(h,c,l,opacity==null?1:opacity)}function Hcl(h,c,l,opacity){this.h=+h;this.c=+c;this.l=+l;this.opacity=+opacity}function hcl2lab(o){if(isNaN(o.h))return new Lab(o.l,0,0,o.opacity);var h=o.h*radians;return new Lab(o.l,Math.cos(h)*o.c,Math.sin(h)*o.c,o.opacity)}define(Hcl,hcl,extend(Color,{brighter:function(k){return new Hcl(this.h,this.c,this.l+K*(k==null?1:k),this.opacity)},darker:function(k){return new Hcl(this.h,this.c,this.l-K*(k==null?1:k),this.opacity)},rgb:function(){return hcl2lab(this).rgb()}}));var A=-.14861,B=+1.78277,C=-.29227,D=-.90649,E=+1.97294,ED=E*D,EB=E*B,BC_DA=B*C-D*A;function cubehelixConvert(o){if(o instanceof Cubehelix)return new Cubehelix(o.h,o.s,o.l,o.opacity);if(!(o instanceof Rgb))o=rgbConvert(o);var r=o.r/255,g=o.g/255,b=o.b/255,l=(BC_DA*b+ED*r-EB*g)/(BC_DA+ED-EB),bl=b-l,k=(E*(g-l)-C*bl)/D,s=Math.sqrt(k*k+bl*bl)/(E*l*(1-l)),h=s?Math.atan2(k,bl)*degrees-120:NaN;return new Cubehelix(h<0?h+360:h,s,l,o.opacity)}function cubehelix(h,s,l,opacity){return arguments.length===1?cubehelixConvert(h):new Cubehelix(h,s,l,opacity==null?1:opacity)}function Cubehelix(h,s,l,opacity){this.h=+h;this.s=+s;this.l=+l;this.opacity=+opacity}define(Cubehelix,cubehelix,extend(Color,{brighter:function(k){k=k==null?brighter:Math.pow(brighter,k);return new Cubehelix(this.h,this.s,this.l*k,this.opacity)},darker:function(k){k=k==null?darker:Math.pow(darker,k);return new Cubehelix(this.h,this.s,this.l*k,this.opacity)},rgb:function(){var h=isNaN(this.h)?0:(this.h+120)*radians,l=+this.l,a=isNaN(this.s)?0:this.s*l*(1-l),cosh=Math.cos(h),sinh=Math.sin(h);return new Rgb(255*(l+a*(A*cosh+B*sinh)),255*(l+a*(C*cosh+D*sinh)),255*(l+a*(E*cosh)),this.opacity)}}));function basis(t1,v0,v1,v2,v3){var t2=t1*t1,t3=t2*t1;return((1-3*t1+3*t2-t3)*v0+(4-6*t2+3*t3)*v1+(1+3*t1+3*t2-3*t3)*v2+t3*v3)/6}function basis$1(values){var n=values.length-1;return function(t){var i=t<=0?t=0:t>=1?(t=1,n-1):Math.floor(t*n),v1=values[i],v2=values[i+1],v0=i>0?values[i-1]:2*v1-v2,v3=i<n-1?values[i+2]:2*v2-v1;return basis((t-i/n)*n,v0,v1,v2,v3)}}function basisClosed(values){var n=values.length;return function(t){var i=Math.floor(((t%=1)<0?++t:t)*n),v0=values[(i+n-1)%n],v1=values[i%n],v2=values[(i+1)%n],v3=values[(i+2)%n];return basis((t-i/n)*n,v0,v1,v2,v3)}}var constant$3=x=>()=>x;function linear(a,d){return function(t){return a+t*d}}function exponential(a,b,y){return a=Math.pow(a,y),b=Math.pow(b,y)-a,y=1/y,function(t){return Math.pow(a+t*b,y)}}function hue(a,b){var d=b-a;return d?linear(a,d>180||d<-180?d-360*Math.round(d/360):d):constant$3(isNaN(a)?b:a)}function gamma(y){return(y=+y)===1?nogamma:function(a,b){return b-a?exponential(a,b,y):constant$3(isNaN(a)?b:a)}}function nogamma(a,b){var d=b-a;return d?linear(a,d):constant$3(isNaN(a)?b:a)}var interpolateRgb=function rgbGamma(y){var color=gamma(y);function rgb$1(start,end){var r=color((start=rgb(start)).r,(end=rgb(end)).r),g=color(start.g,end.g),b=color(start.b,end.b),opacity=nogamma(start.opacity,end.opacity);return function(t){start.r=r(t);start.g=g(t);start.b=b(t);start.opacity=opacity(t);return start+""}}rgb$1.gamma=rgbGamma;return rgb$1}(1);function rgbSpline(spline){return function(colors){var n=colors.length,r=new Array(n),g=new Array(n),b=new Array(n),i,color;for(i=0;i<n;++i){color=rgb(colors[i]);r[i]=color.r||0;g[i]=color.g||0;b[i]=color.b||0}r=spline(r);g=spline(g);b=spline(b);color.opacity=1;return function(t){color.r=r(t);color.g=g(t);color.b=b(t);return color+""}}}var rgbBasis=rgbSpline(basis$1);var rgbBasisClosed=rgbSpline(basisClosed);function numberArray(a,b){if(!b)b=[];var n=a?Math.min(b.length,a.length):0,c=b.slice(),i;return function(t){for(i=0;i<n;++i)c[i]=a[i]*(1-t)+b[i]*t;return c}}function isNumberArray(x){return ArrayBuffer.isView(x)&&!(x instanceof DataView)}function array$2(a,b){return(isNumberArray(b)?numberArray:genericArray)(a,b)}function genericArray(a,b){var nb=b?b.length:0,na=a?Math.min(nb,a.length):0,x=new Array(na),c=new Array(nb),i;for(i=0;i<na;++i)x[i]=interpolate(a[i],b[i]);for(;i<nb;++i)c[i]=b[i];return function(t){for(i=0;i<na;++i)c[i]=x[i](t);return c}}function date(a,b){var d=new Date;return a=+a,b=+b,function(t){return d.setTime(a*(1-t)+b*t),d}}function interpolateNumber(a,b){return a=+a,b=+b,function(t){return a*(1-t)+b*t}}function object(a,b){var i={},c={},k;if(a===null||typeof a!=="object")a={};if(b===null||typeof b!=="object")b={};for(k in b){if(k in a){i[k]=interpolate(a[k],b[k])}else{c[k]=b[k]}}return function(t){for(k in i)c[k]=i[k](t);return c}}var reA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,reB=new RegExp(reA.source,"g");function zero(b){return function(){return b}}function one(b){return function(t){return b(t)+""}}function interpolateString(a,b){var bi=reA.lastIndex=reB.lastIndex=0,am,bm,bs,i=-1,s=[],q=[];a=a+"",b=b+"";while((am=reA.exec(a))&&(bm=reB.exec(b))){if((bs=bm.index)>bi){bs=b.slice(bi,bs);if(s[i])s[i]+=bs;else s[++i]=bs}if((am=am[0])===(bm=bm[0])){if(s[i])s[i]+=bm;else s[++i]=bm}else{s[++i]=null;q.push({i:i,x:interpolateNumber(am,bm)})}bi=reB.lastIndex}if(bi<b.length){bs=b.slice(bi);if(s[i])s[i]+=bs;else s[++i]=bs}return s.length<2?q[0]?one(q[0].x):zero(b):(b=q.length,function(t){for(var i=0,o;i<b;++i)s[(o=q[i]).i]=o.x(t);return s.join("")})}function interpolate(a,b){var t=typeof b,c;return b==null||t==="boolean"?constant$3(b):(t==="number"?interpolateNumber:t==="string"?(c=color(b))?(b=c,interpolateRgb):interpolateString:b instanceof color?interpolateRgb:b instanceof Date?date:isNumberArray(b)?numberArray:Array.isArray(b)?genericArray:typeof b.valueOf!=="function"&&typeof b.toString!=="function"||isNaN(b)?object:interpolateNumber)(a,b)}function discrete(range){var n=range.length;return function(t){return range[Math.max(0,Math.min(n-1,Math.floor(t*n)))]}}function hue$1(a,b){var i=hue(+a,+b);return function(t){var x=i(t);return x-360*Math.floor(x/360)}}function interpolateRound(a,b){return a=+a,b=+b,function(t){return Math.round(a*(1-t)+b*t)}}var degrees$1=180/Math.PI;var identity$2={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function decompose(a,b,c,d,e,f){var scaleX,scaleY,skewX;if(scaleX=Math.sqrt(a*a+b*b))a/=scaleX,b/=scaleX;if(skewX=a*c+b*d)c-=a*skewX,d-=b*skewX;if(scaleY=Math.sqrt(c*c+d*d))c/=scaleY,d/=scaleY,skewX/=scaleY;if(a*d<b*c)a=-a,b=-b,skewX=-skewX,scaleX=-scaleX;return{translateX:e,translateY:f,rotate:Math.atan2(b,a)*degrees$1,skewX:Math.atan(skewX)*degrees$1,scaleX:scaleX,scaleY:scaleY}}var svgNode;function parseCss(value){const m=new(typeof DOMMatrix==="function"?DOMMatrix:WebKitCSSMatrix)(value+"");return m.isIdentity?identity$2:decompose(m.a,m.b,m.c,m.d,m.e,m.f)}function parseSvg(value){if(value==null)return identity$2;if(!svgNode)svgNode=document.createElementNS("http://www.w3.org/2000/svg","g");svgNode.setAttribute("transform",value);if(!(value=svgNode.transform.baseVal.consolidate()))return identity$2;value=value.matrix;return decompose(value.a,value.b,value.c,value.d,value.e,value.f)}function interpolateTransform(parse,pxComma,pxParen,degParen){function pop(s){return s.length?s.pop()+" ":""}function translate(xa,ya,xb,yb,s,q){if(xa!==xb||ya!==yb){var i=s.push("translate(",null,pxComma,null,pxParen);q.push({i:i-4,x:interpolateNumber(xa,xb)},{i:i-2,x:interpolateNumber(ya,yb)})}else if(xb||yb){s.push("translate("+xb+pxComma+yb+pxParen)}}function rotate(a,b,s,q){if(a!==b){if(a-b>180)b+=360;else if(b-a>180)a+=360;q.push({i:s.push(pop(s)+"rotate(",null,degParen)-2,x:interpolateNumber(a,b)})}else if(b){s.push(pop(s)+"rotate("+b+degParen)}}function skewX(a,b,s,q){if(a!==b){q.push({i:s.push(pop(s)+"skewX(",null,degParen)-2,x:interpolateNumber(a,b)})}else if(b){s.push(pop(s)+"skewX("+b+degParen)}}function scale(xa,ya,xb,yb,s,q){if(xa!==xb||ya!==yb){var i=s.push(pop(s)+"scale(",null,",",null,")");q.push({i:i-4,x:interpolateNumber(xa,xb)},{i:i-2,x:interpolateNumber(ya,yb)})}else if(xb!==1||yb!==1){s.push(pop(s)+"scale("+xb+","+yb+")")}}return function(a,b){var s=[],q=[];a=parse(a),b=parse(b);translate(a.translateX,a.translateY,b.translateX,b.translateY,s,q);rotate(a.rotate,b.rotate,s,q);skewX(a.skewX,b.skewX,s,q);scale(a.scaleX,a.scaleY,b.scaleX,b.scaleY,s,q);a=b=null;return function(t){var i=-1,n=q.length,o;while(++i<n)s[(o=q[i]).i]=o.x(t);return s.join("")}}}var interpolateTransformCss=interpolateTransform(parseCss,"px, ","px)","deg)");var interpolateTransformSvg=interpolateTransform(parseSvg,", ",")",")");var epsilon2=1e-12;function cosh(x){return((x=Math.exp(x))+1/x)/2}function sinh(x){return((x=Math.exp(x))-1/x)/2}function tanh(x){return((x=Math.exp(2*x))-1)/(x+1)}var interpolateZoom=function zoomRho(rho,rho2,rho4){function zoom(p0,p1){var ux0=p0[0],uy0=p0[1],w0=p0[2],ux1=p1[0],uy1=p1[1],w1=p1[2],dx=ux1-ux0,dy=uy1-uy0,d2=dx*dx+dy*dy,i,S;if(d2<epsilon2){S=Math.log(w1/w0)/rho;i=function(t){return[ux0+t*dx,uy0+t*dy,w0*Math.exp(rho*t*S)]}}else{var d1=Math.sqrt(d2),b0=(w1*w1-w0*w0+rho4*d2)/(2*w0*rho2*d1),b1=(w1*w1-w0*w0-rho4*d2)/(2*w1*rho2*d1),r0=Math.log(Math.sqrt(b0*b0+1)-b0),r1=Math.log(Math.sqrt(b1*b1+1)-b1);S=(r1-r0)/rho;i=function(t){var s=t*S,coshr0=cosh(r0),u=w0/(rho2*d1)*(coshr0*tanh(rho*s+r0)-sinh(r0));return[ux0+u*dx,uy0+u*dy,w0*coshr0/cosh(rho*s+r0)]}}i.duration=S*1e3*rho/Math.SQRT2;return i}zoom.rho=function(_){var _1=Math.max(.001,+_),_2=_1*_1,_4=_2*_2;return zoomRho(_1,_2,_4)};return zoom}(Math.SQRT2,2,4);function hsl$1(hue){return function(start,end){var h=hue((start=hsl(start)).h,(end=hsl(end)).h),s=nogamma(start.s,end.s),l=nogamma(start.l,end.l),opacity=nogamma(start.opacity,end.opacity);return function(t){start.h=h(t);start.s=s(t);start.l=l(t);start.opacity=opacity(t);return start+""}}}var hsl$2=hsl$1(hue);var hslLong=hsl$1(nogamma);function lab$1(start,end){var l=nogamma((start=lab(start)).l,(end=lab(end)).l),a=nogamma(start.a,end.a),b=nogamma(start.b,end.b),opacity=nogamma(start.opacity,end.opacity);return function(t){start.l=l(t);start.a=a(t);start.b=b(t);start.opacity=opacity(t);return start+""}}function hcl$1(hue){return function(start,end){var h=hue((start=hcl(start)).h,(end=hcl(end)).h),c=nogamma(start.c,end.c),l=nogamma(start.l,end.l),opacity=nogamma(start.opacity,end.opacity);return function(t){start.h=h(t);start.c=c(t);start.l=l(t);start.opacity=opacity(t);return start+""}}}var hcl$2=hcl$1(hue);var hclLong=hcl$1(nogamma);function cubehelix$1(hue){return function cubehelixGamma(y){y=+y;function cubehelix$1(start,end){var h=hue((start=cubehelix(start)).h,(end=cubehelix(end)).h),s=nogamma(start.s,end.s),l=nogamma(start.l,end.l),opacity=nogamma(start.opacity,end.opacity);return function(t){start.h=h(t);start.s=s(t);start.l=l(Math.pow(t,y));start.opacity=opacity(t);return start+""}}cubehelix$1.gamma=cubehelixGamma;return cubehelix$1}(1)}var cubehelix$2=cubehelix$1(hue);var cubehelixLong=cubehelix$1(nogamma);function piecewise(interpolate$1,values){if(values===undefined)values=interpolate$1,interpolate$1=interpolate;var i=0,n=values.length-1,v=values[0],I=new Array(n<0?0:n);while(i<n)I[i]=interpolate$1(v,v=values[++i]);return function(t){var i=Math.max(0,Math.min(n-1,Math.floor(t*=n)));return I[i](t-i)}}function quantize(interpolator,n){var samples=new Array(n);for(var i=0;i<n;++i)samples[i]=interpolator(i/(n-1));return samples}var frame=0,timeout=0,interval=0,pokeDelay=1e3,taskHead,taskTail,clockLast=0,clockNow=0,clockSkew=0,clock=typeof performance==="object"&&performance.now?performance:Date,setFrame=typeof window==="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(f){setTimeout(f,17)};function now(){return clockNow||(setFrame(clearNow),clockNow=clock.now()+clockSkew)}function clearNow(){clockNow=0}function Timer(){this._call=this._time=this._next=null}Timer.prototype=timer.prototype={constructor:Timer,restart:function(callback,delay,time){if(typeof callback!=="function")throw new TypeError("callback is not a function");time=(time==null?now():+time)+(delay==null?0:+delay);if(!this._next&&taskTail!==this){if(taskTail)taskTail._next=this;else taskHead=this;taskTail=this}this._call=callback;this._time=time;sleep()},stop:function(){if(this._call){this._call=null;this._time=Infinity;sleep()}}};function timer(callback,delay,time){var t=new Timer;t.restart(callback,delay,time);return t}function timerFlush(){now();++frame;var t=taskHead,e;while(t){if((e=clockNow-t._time)>=0)t._call.call(null,e);t=t._next}--frame}function wake(){clockNow=(clockLast=clock.now())+clockSkew;frame=timeout=0;try{timerFlush()}finally{frame=0;nap();clockNow=0}}function poke(){var now=clock.now(),delay=now-clockLast;if(delay>pokeDelay)clockSkew-=delay,clockLast=now}function nap(){var t0,t1=taskHead,t2,time=Infinity;while(t1){if(t1._call){if(time>t1._time)time=t1._time;t0=t1,t1=t1._next}else{t2=t1._next,t1._next=null;t1=t0?t0._next=t2:taskHead=t2}}taskTail=t0;sleep(time)}function sleep(time){if(frame)return;if(timeout)timeout=clearTimeout(timeout);var delay=time-clockNow;if(delay>24){if(time<Infinity)timeout=setTimeout(wake,time-clock.now()-clockSkew);if(interval)interval=clearInterval(interval)}else{if(!interval)clockLast=clock.now(),interval=setInterval(poke,pokeDelay);frame=1,setFrame(wake)}}function timeout$1(callback,delay,time){var t=new Timer;delay=delay==null?0:+delay;t.restart(elapsed=>{t.stop();callback(elapsed+delay)},delay,time);return t}function interval$1(callback,delay,time){var t=new Timer,total=delay;if(delay==null)return t.restart(callback,delay,time),t;t._restart=t.restart;t.restart=function(callback,delay,time){delay=+delay,time=time==null?now():+time;t._restart(function tick(elapsed){elapsed+=total;t._restart(tick,total+=delay,time);callback(elapsed)},delay,time)};t.restart(callback,delay,time);return t}var emptyOn=dispatch("start","end","cancel","interrupt");var emptyTween=[];var CREATED=0;var SCHEDULED=1;var STARTING=2;var STARTED=3;var RUNNING=4;var ENDING=5;var ENDED=6;function schedule(node,name,id,index,group,timing){var schedules=node.__transition;if(!schedules)node.__transition={};else if(id in schedules)return;create$1(node,id,{name:name,index:index,group:group,on:emptyOn,tween:emptyTween,time:timing.time,delay:timing.delay,duration:timing.duration,ease:timing.ease,timer:null,state:CREATED})}function init(node,id){var schedule=get$1(node,id);if(schedule.state>CREATED)throw new Error("too late; already scheduled");return schedule}function set$2(node,id){var schedule=get$1(node,id);if(schedule.state>STARTED)throw new Error("too late; already running");return schedule}function get$1(node,id){var schedule=node.__transition;if(!schedule||!(schedule=schedule[id]))throw new Error("transition not found");return schedule}function create$1(node,id,self){var schedules=node.__transition,tween;schedules[id]=self;self.timer=timer(schedule,0,self.time);function schedule(elapsed){self.state=SCHEDULED;self.timer.restart(start,self.delay,self.time);if(self.delay<=elapsed)start(elapsed-self.delay)}function start(elapsed){var i,j,n,o;if(self.state!==SCHEDULED)return stop();for(i in schedules){o=schedules[i];if(o.name!==self.name)continue;if(o.state===STARTED)return timeout$1(start);if(o.state===RUNNING){o.state=ENDED;o.timer.stop();o.on.call("interrupt",node,node.__data__,o.index,o.group);delete schedules[i]}else if(+i<id){o.state=ENDED;o.timer.stop();o.on.call("cancel",node,node.__data__,o.index,o.group);delete schedules[i]}}timeout$1(function(){if(self.state===STARTED){self.state=RUNNING;self.timer.restart(tick,self.delay,self.time);tick(elapsed)}});self.state=STARTING;self.on.call("start",node,node.__data__,self.index,self.group);if(self.state!==STARTING)return;self.state=STARTED;tween=new Array(n=self.tween.length);for(i=0,j=-1;i<n;++i){if(o=self.tween[i].value.call(node,node.__data__,self.index,self.group)){tween[++j]=o}}tween.length=j+1}function tick(elapsed){var t=elapsed<self.duration?self.ease.call(null,elapsed/self.duration):(self.timer.restart(stop),self.state=ENDING,1),i=-1,n=tween.length;while(++i<n){tween[i].call(node,t)}if(self.state===ENDING){self.on.call("end",node,node.__data__,self.index,self.group);stop()}}function stop(){self.state=ENDED;self.timer.stop();delete schedules[id];for(var i in schedules)return;delete node.__transition}}function interrupt(node,name){var schedules=node.__transition,schedule,active,empty=true,i;if(!schedules)return;name=name==null?null:name+"";for(i in schedules){if((schedule=schedules[i]).name!==name){empty=false;continue}active=schedule.state>STARTING&&schedule.state<ENDING;schedule.state=ENDED;schedule.timer.stop();schedule.on.call(active?"interrupt":"cancel",node,node.__data__,schedule.index,schedule.group);delete schedules[i]}if(empty)delete node.__transition}function selection_interrupt(name){return this.each(function(){interrupt(this,name)})}function tweenRemove(id,name){var tween0,tween1;return function(){var schedule=set$2(this,id),tween=schedule.tween;if(tween!==tween0){tween1=tween0=tween;for(var i=0,n=tween1.length;i<n;++i){if(tween1[i].name===name){tween1=tween1.slice();tween1.splice(i,1);break}}}schedule.tween=tween1}}function tweenFunction(id,name,value){var tween0,tween1;if(typeof value!=="function")throw new Error;return function(){var schedule=set$2(this,id),tween=schedule.tween;if(tween!==tween0){tween1=(tween0=tween).slice();for(var t={name:name,value:value},i=0,n=tween1.length;i<n;++i){if(tween1[i].name===name){tween1[i]=t;break}}if(i===n)tween1.push(t)}schedule.tween=tween1}}function transition_tween(name,value){var id=this._id;name+="";if(arguments.length<2){var tween=get$1(this.node(),id).tween;for(var i=0,n=tween.length,t;i<n;++i){if((t=tween[i]).name===name){return t.value}}return null}return this.each((value==null?tweenRemove:tweenFunction)(id,name,value))}function tweenValue(transition,name,value){var id=transition._id;transition.each(function(){var schedule=set$2(this,id);(schedule.value||(schedule.value={}))[name]=value.apply(this,arguments)});return function(node){return get$1(node,id).value[name]}}function interpolate$1(a,b){var c;return(typeof b==="number"?interpolateNumber:b instanceof color?interpolateRgb:(c=color(b))?(b=c,interpolateRgb):interpolateString)(a,b)}function attrRemove$1(name){return function(){this.removeAttribute(name)}}function attrRemoveNS$1(fullname){return function(){this.removeAttributeNS(fullname.space,fullname.local)}}function attrConstant$1(name,interpolate,value1){var string00,string1=value1+"",interpolate0;return function(){var string0=this.getAttribute(name);return string0===string1?null:string0===string00?interpolate0:interpolate0=interpolate(string00=string0,value1)}}function attrConstantNS$1(fullname,interpolate,value1){var string00,string1=value1+"",interpolate0;return function(){var string0=this.getAttributeNS(fullname.space,fullname.local);return string0===string1?null:string0===string00?interpolate0:interpolate0=interpolate(string00=string0,value1)}}function attrFunction$1(name,interpolate,value){var string00,string10,interpolate0;return function(){var string0,value1=value(this),string1;if(value1==null)return void this.removeAttribute(name);string0=this.getAttribute(name);string1=value1+"";return string0===string1?null:string0===string00&&string1===string10?interpolate0:(string10=string1,interpolate0=interpolate(string00=string0,value1))}}function attrFunctionNS$1(fullname,interpolate,value){var string00,string10,interpolate0;return function(){var string0,value1=value(this),string1;if(value1==null)return void this.removeAttributeNS(fullname.space,fullname.local);string0=this.getAttributeNS(fullname.space,fullname.local);string1=value1+"";return string0===string1?null:string0===string00&&string1===string10?interpolate0:(string10=string1,interpolate0=interpolate(string00=string0,value1))}}function transition_attr(name,value){var fullname=namespace(name),i=fullname==="transform"?interpolateTransformSvg:interpolate$1;return this.attrTween(name,typeof value==="function"?(fullname.local?attrFunctionNS$1:attrFunction$1)(fullname,i,tweenValue(this,"attr."+name,value)):value==null?(fullname.local?attrRemoveNS$1:attrRemove$1)(fullname):(fullname.local?attrConstantNS$1:attrConstant$1)(fullname,i,value))}function attrInterpolate(name,i){return function(t){this.setAttribute(name,i.call(this,t))}}function attrInterpolateNS(fullname,i){return function(t){this.setAttributeNS(fullname.space,fullname.local,i.call(this,t))}}function attrTweenNS(fullname,value){var t0,i0;function tween(){var i=value.apply(this,arguments);if(i!==i0)t0=(i0=i)&&attrInterpolateNS(fullname,i);return t0}tween._value=value;return tween}function attrTween(name,value){var t0,i0;function tween(){var i=value.apply(this,arguments);if(i!==i0)t0=(i0=i)&&attrInterpolate(name,i);return t0}tween._value=value;return tween}function transition_attrTween(name,value){var key="attr."+name;if(arguments.length<2)return(key=this.tween(key))&&key._value;if(value==null)return this.tween(key,null);if(typeof value!=="function")throw new Error;var fullname=namespace(name);return this.tween(key,(fullname.local?attrTweenNS:attrTween)(fullname,value))}function delayFunction(id,value){return function(){init(this,id).delay=+value.apply(this,arguments)}}function delayConstant(id,value){return value=+value,function(){init(this,id).delay=value}}function transition_delay(value){var id=this._id;return arguments.length?this.each((typeof value==="function"?delayFunction:delayConstant)(id,value)):get$1(this.node(),id).delay}function durationFunction(id,value){return function(){set$2(this,id).duration=+value.apply(this,arguments)}}function durationConstant(id,value){return value=+value,function(){set$2(this,id).duration=value}}function transition_duration(value){var id=this._id;return arguments.length?this.each((typeof value==="function"?durationFunction:durationConstant)(id,value)):get$1(this.node(),id).duration}function easeConstant(id,value){if(typeof value!=="function")throw new Error;return function(){set$2(this,id).ease=value}}function transition_ease(value){var id=this._id;return arguments.length?this.each(easeConstant(id,value)):get$1(this.node(),id).ease}function easeVarying(id,value){return function(){var v=value.apply(this,arguments);if(typeof v!=="function")throw new Error;set$2(this,id).ease=v}}function transition_easeVarying(value){if(typeof value!=="function")throw new Error;return this.each(easeVarying(this._id,value))}function transition_filter(match){if(typeof match!=="function")match=matcher(match);for(var groups=this._groups,m=groups.length,subgroups=new Array(m),j=0;j<m;++j){for(var group=groups[j],n=group.length,subgroup=subgroups[j]=[],node,i=0;i<n;++i){if((node=group[i])&&match.call(node,node.__data__,i,group)){subgroup.push(node)}}}return new Transition(subgroups,this._parents,this._name,this._id)}function transition_merge(transition){if(transition._id!==this._id)throw new Error;for(var groups0=this._groups,groups1=transition._groups,m0=groups0.length,m1=groups1.length,m=Math.min(m0,m1),merges=new Array(m0),j=0;j<m;++j){for(var group0=groups0[j],group1=groups1[j],n=group0.length,merge=merges[j]=new Array(n),node,i=0;i<n;++i){if(node=group0[i]||group1[i]){merge[i]=node}}}for(;j<m0;++j){merges[j]=groups0[j]}return new Transition(merges,this._parents,this._name,this._id)}function start(name){return(name+"").trim().split(/^|\s+/).every(function(t){var i=t.indexOf(".");if(i>=0)t=t.slice(0,i);return!t||t==="start"})}function onFunction(id,name,listener){var on0,on1,sit=start(name)?init:set$2;return function(){var schedule=sit(this,id),on=schedule.on;if(on!==on0)(on1=(on0=on).copy()).on(name,listener);schedule.on=on1}}function transition_on(name,listener){var id=this._id;return arguments.length<2?get$1(this.node(),id).on.on(name):this.each(onFunction(id,name,listener))}function removeFunction(id){return function(){var parent=this.parentNode;for(var i in this.__transition)if(+i!==id)return;if(parent)parent.removeChild(this)}}function transition_remove(){return this.on("end.remove",removeFunction(this._id))}function transition_select(select){var name=this._name,id=this._id;if(typeof select!=="function")select=selector(select);for(var groups=this._groups,m=groups.length,subgroups=new Array(m),j=0;j<m;++j){for(var group=groups[j],n=group.length,subgroup=subgroups[j]=new Array(n),node,subnode,i=0;i<n;++i){if((node=group[i])&&(subnode=select.call(node,node.__data__,i,group))){if("__data__"in node)subnode.__data__=node.__data__;subgroup[i]=subnode;schedule(subgroup[i],name,id,i,subgroup,get$1(node,id))}}}return new Transition(subgroups,this._parents,name,id)}function transition_selectAll(select){var name=this._name,id=this._id;if(typeof select!=="function")select=selectorAll(select);for(var groups=this._groups,m=groups.length,subgroups=[],parents=[],j=0;j<m;++j){for(var group=groups[j],n=group.length,node,i=0;i<n;++i){if(node=group[i]){for(var children=select.call(node,node.__data__,i,group),child,inherit=get$1(node,id),k=0,l=children.length;k<l;++k){if(child=children[k]){schedule(child,name,id,k,children,inherit)}}subgroups.push(children);parents.push(node)}}}return new Transition(subgroups,parents,name,id)}var Selection$1=selection.prototype.constructor;function transition_selection(){return new Selection$1(this._groups,this._parents)}function styleNull(name,interpolate){var string00,string10,interpolate0;return function(){var string0=styleValue(this,name),string1=(this.style.removeProperty(name),styleValue(this,name));return string0===string1?null:string0===string00&&string1===string10?interpolate0:interpolate0=interpolate(string00=string0,string10=string1)}}function styleRemove$1(name){return function(){this.style.removeProperty(name)}}function styleConstant$1(name,interpolate,value1){var string00,string1=value1+"",interpolate0;return function(){var string0=styleValue(this,name);return string0===string1?null:string0===string00?interpolate0:interpolate0=interpolate(string00=string0,value1)}}function styleFunction$1(name,interpolate,value){var string00,string10,interpolate0;return function(){var string0=styleValue(this,name),value1=value(this),string1=value1+"";if(value1==null)string1=value1=(this.style.removeProperty(name),styleValue(this,name));return string0===string1?null:string0===string00&&string1===string10?interpolate0:(string10=string1,interpolate0=interpolate(string00=string0,value1))}}function styleMaybeRemove(id,name){var on0,on1,listener0,key="style."+name,event="end."+key,remove;return function(){var schedule=set$2(this,id),on=schedule.on,listener=schedule.value[key]==null?remove||(remove=styleRemove$1(name)):undefined;if(on!==on0||listener0!==listener)(on1=(on0=on).copy()).on(event,listener0=listener);schedule.on=on1}}function transition_style(name,value,priority){var i=(name+="")==="transform"?interpolateTransformCss:interpolate$1;return value==null?this.styleTween(name,styleNull(name,i)).on("end.style."+name,styleRemove$1(name)):typeof value==="function"?this.styleTween(name,styleFunction$1(name,i,tweenValue(this,"style."+name,value))).each(styleMaybeRemove(this._id,name)):this.styleTween(name,styleConstant$1(name,i,value),priority).on("end.style."+name,null)}function styleInterpolate(name,i,priority){return function(t){this.style.setProperty(name,i.call(this,t),priority)}}function styleTween(name,value,priority){var t,i0;function tween(){var i=value.apply(this,arguments);if(i!==i0)t=(i0=i)&&styleInterpolate(name,i,priority);return t}tween._value=value;return tween}function transition_styleTween(name,value,priority){var key="style."+(name+="");if(arguments.length<2)return(key=this.tween(key))&&key._value;if(value==null)return this.tween(key,null);if(typeof value!=="function")throw new Error;return this.tween(key,styleTween(name,value,priority==null?"":priority))}function textConstant$1(value){return function(){this.textContent=value}}function textFunction$1(value){return function(){var value1=value(this);this.textContent=value1==null?"":value1}}function transition_text(value){return this.tween("text",typeof value==="function"?textFunction$1(tweenValue(this,"text",value)):textConstant$1(value==null?"":value+""))}function textInterpolate(i){return function(t){this.textContent=i.call(this,t)}}function textTween(value){var t0,i0;function tween(){var i=value.apply(this,arguments);if(i!==i0)t0=(i0=i)&&textInterpolate(i);return t0}tween._value=value;return tween}function transition_textTween(value){var key="text";if(arguments.length<1)return(key=this.tween(key))&&key._value;if(value==null)return this.tween(key,null);if(typeof value!=="function")throw new Error;return this.tween(key,textTween(value))}function transition_transition(){var name=this._name,id0=this._id,id1=newId();for(var groups=this._groups,m=groups.length,j=0;j<m;++j){for(var group=groups[j],n=group.length,node,i=0;i<n;++i){if(node=group[i]){var inherit=get$1(node,id0);schedule(node,name,id1,i,group,{time:inherit.time+inherit.delay+inherit.duration,delay:0,duration:inherit.duration,ease:inherit.ease})}}}return new Transition(groups,this._parents,name,id1)}function transition_end(){var on0,on1,that=this,id=that._id,size=that.size();return new Promise(function(resolve,reject){var cancel={value:reject},end={value:function(){if(--size===0)resolve()}};that.each(function(){var schedule=set$2(this,id),on=schedule.on;if(on!==on0){on1=(on0=on).copy();on1._.cancel.push(cancel);on1._.interrupt.push(cancel);on1._.end.push(end)}schedule.on=on1});if(size===0)resolve()})}var id=0;function Transition(groups,parents,name,id){this._groups=groups;this._parents=parents;this._name=name;this._id=id}function transition(name){return selection().transition(name)}function newId(){return++id}var selection_prototype=selection.prototype;Transition.prototype=transition.prototype={constructor:Transition,select:transition_select,selectAll:transition_selectAll,filter:transition_filter,merge:transition_merge,selection:transition_selection,transition:transition_transition,call:selection_prototype.call,nodes:selection_prototype.nodes,node:selection_prototype.node,size:selection_prototype.size,empty:selection_prototype.empty,each:selection_prototype.each,on:transition_on,attr:transition_attr,attrTween:transition_attrTween,style:transition_style,styleTween:transition_styleTween,text:transition_text,textTween:transition_textTween,remove:transition_remove,tween:transition_tween,delay:transition_delay,duration:transition_duration,ease:transition_ease,easeVarying:transition_easeVarying,end:transition_end,[Symbol.iterator]:selection_prototype[Symbol.iterator]};const linear$1=t=>+t;function quadIn(t){return t*t}function quadOut(t){return t*(2-t)}function quadInOut(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}function cubicIn(t){return t*t*t}function cubicOut(t){return--t*t*t+1}function cubicInOut(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var exponent=3;var polyIn=function custom(e){e=+e;function polyIn(t){return Math.pow(t,e)}polyIn.exponent=custom;return polyIn}(exponent);var polyOut=function custom(e){e=+e;function polyOut(t){return 1-Math.pow(1-t,e)}polyOut.exponent=custom;return polyOut}(exponent);var polyInOut=function custom(e){e=+e;function polyInOut(t){return((t*=2)<=1?Math.pow(t,e):2-Math.pow(2-t,e))/2}polyInOut.exponent=custom;return polyInOut}(exponent);var pi=Math.PI,halfPi=pi/2;function sinIn(t){return+t===1?1:1-Math.cos(t*halfPi)}function sinOut(t){return Math.sin(t*halfPi)}function sinInOut(t){return(1-Math.cos(pi*t))/2}function tpmt(x){return(Math.pow(2,-10*x)-.0009765625)*1.0009775171065494}function expIn(t){return tpmt(1-+t)}function expOut(t){return 1-tpmt(t)}function expInOut(t){return((t*=2)<=1?tpmt(1-t):2-tpmt(t-1))/2}function circleIn(t){return 1-Math.sqrt(1-t*t)}function circleOut(t){return Math.sqrt(1- --t*t)}function circleInOut(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}var b1=4/11,b2=6/11,b3=8/11,b4=3/4,b5=9/11,b6=10/11,b7=15/16,b8=21/22,b9=63/64,b0=1/b1/b1;function bounceIn(t){return 1-bounceOut(1-t)}function bounceOut(t){return(t=+t)<b1?b0*t*t:t<b3?b0*(t-=b2)*t+b4:t<b6?b0*(t-=b5)*t+b7:b0*(t-=b8)*t+b9}function bounceInOut(t){return((t*=2)<=1?1-bounceOut(1-t):bounceOut(t-1)+1)/2}var overshoot=1.70158;var backIn=function custom(s){s=+s;function backIn(t){return(t=+t)*t*(s*(t-1)+t)}backIn.overshoot=custom;return backIn}(overshoot);var backOut=function custom(s){s=+s;function backOut(t){return--t*t*((t+1)*s+t)+1}backOut.overshoot=custom;return backOut}(overshoot);var backInOut=function custom(s){s=+s;function backInOut(t){return((t*=2)<1?t*t*((s+1)*t-s):(t-=2)*t*((s+1)*t+s)+2)/2}backInOut.overshoot=custom;return backInOut}(overshoot);var tau=2*Math.PI,amplitude=1,period=.3;var elasticIn=function custom(a,p){var s=Math.asin(1/(a=Math.max(1,a)))*(p/=tau);function elasticIn(t){return a*tpmt(- --t)*Math.sin((s-t)/p)}elasticIn.amplitude=function(a){return custom(a,p*tau)};elasticIn.period=function(p){return custom(a,p)};return elasticIn}(amplitude,period);var elasticOut=function custom(a,p){var s=Math.asin(1/(a=Math.max(1,a)))*(p/=tau);function elasticOut(t){return 1-a*tpmt(t=+t)*Math.sin((t+s)/p)}elasticOut.amplitude=function(a){return custom(a,p*tau)};elasticOut.period=function(p){return custom(a,p)};return elasticOut}(amplitude,period);var elasticInOut=function custom(a,p){var s=Math.asin(1/(a=Math.max(1,a)))*(p/=tau);function elasticInOut(t){return((t=t*2-1)<0?a*tpmt(-t)*Math.sin((s-t)/p):2-a*tpmt(t)*Math.sin((s+t)/p))/2}elasticInOut.amplitude=function(a){return custom(a,p*tau)};elasticInOut.period=function(p){return custom(a,p)};return elasticInOut}(amplitude,period);var defaultTiming={time:null,delay:0,duration:250,ease:cubicInOut};function inherit(node,id){var timing;while(!(timing=node.__transition)||!(timing=timing[id])){if(!(node=node.parentNode)){throw new Error(`transition ${id} not found`)}}return timing}function selection_transition(name){var id,timing;if(name instanceof Transition){id=name._id,name=name._name}else{id=newId(),(timing=defaultTiming).time=now(),name=name==null?null:name+""}for(var groups=this._groups,m=groups.length,j=0;j<m;++j){for(var group=groups[j],n=group.length,node,i=0;i<n;++i){if(node=group[i]){schedule(node,name,id,i,group,timing||inherit(node,id))}}}return new Transition(groups,this._parents,name,id)}selection.prototype.interrupt=selection_interrupt;selection.prototype.transition=selection_transition;var root$1=[null];function active(node,name){var schedules=node.__transition,schedule,i;if(schedules){name=name==null?null:name+"";for(i in schedules){if((schedule=schedules[i]).state>SCHEDULED&&schedule.name===name){return new Transition([[node]],root$1,name,+i)}}}return null}var constant$4=x=>()=>x;function BrushEvent(type,{sourceEvent:sourceEvent,target:target,selection:selection,mode:mode,dispatch:dispatch}){Object.defineProperties(this,{type:{value:type,enumerable:true,configurable:true},sourceEvent:{value:sourceEvent,enumerable:true,configurable:true},target:{value:target,enumerable:true,configurable:true},selection:{value:selection,enumerable:true,configurable:true},mode:{value:mode,enumerable:true,configurable:true},_:{value:dispatch}})}function nopropagation$1(event){event.stopImmediatePropagation()}function noevent$1(event){event.preventDefault();event.stopImmediatePropagation()}var MODE_DRAG={name:"drag"},MODE_SPACE={name:"space"},MODE_HANDLE={name:"handle"},MODE_CENTER={name:"center"};const{abs:abs,max:max$1,min:min$1}=Math;function number1(e){return[+e[0],+e[1]]}function number2(e){return[number1(e[0]),number1(e[1])]}var X={name:"x",handles:["w","e"].map(type),input:function(x,e){return x==null?null:[[+x[0],e[0][1]],[+x[1],e[1][1]]]},output:function(xy){return xy&&[xy[0][0],xy[1][0]]}};var Y={name:"y",handles:["n","s"].map(type),input:function(y,e){return y==null?null:[[e[0][0],+y[0]],[e[1][0],+y[1]]]},output:function(xy){return xy&&[xy[0][1],xy[1][1]]}};var XY={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(type),input:function(xy){return xy==null?null:number2(xy)},output:function(xy){return xy}};var cursors={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"};var flipX={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"};var flipY={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"};var signsX={overlay:+1,selection:+1,n:null,e:+1,s:null,w:-1,nw:-1,ne:+1,se:+1,sw:-1};var signsY={overlay:+1,selection:+1,n:-1,e:null,s:+1,w:null,nw:-1,ne:-1,se:+1,sw:+1};function type(t){return{type:t}}function defaultFilter$1(event){return!event.ctrlKey&&!event.button}function defaultExtent(){var svg=this.ownerSVGElement||this;if(svg.hasAttribute("viewBox")){svg=svg.viewBox.baseVal;return[[svg.x,svg.y],[svg.x+svg.width,svg.y+svg.height]]}return[[0,0],[svg.width.baseVal.value,svg.height.baseVal.value]]}function defaultTouchable$1(){return navigator.maxTouchPoints||"ontouchstart"in this}function local$1(node){while(!node.__brush)if(!(node=node.parentNode))return;return node.__brush}function empty$2(extent){return extent[0][0]===extent[1][0]||extent[0][1]===extent[1][1]}function brushSelection(node){var state=node.__brush;return state?state.dim.output(state.selection):null}function brushX(){return brush$1(X)}function brushY(){return brush$1(Y)}function brush(){return brush$1(XY)}function brush$1(dim){var extent=defaultExtent,filter=defaultFilter$1,touchable=defaultTouchable$1,keys=true,listeners=dispatch("start","brush","end"),handleSize=6,touchending;function brush(group){var overlay=group.property("__brush",initialize).selectAll(".overlay").data([type("overlay")]);overlay.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",cursors.overlay).merge(overlay).each(function(){var extent=local$1(this).extent;select(this).attr("x",extent[0][0]).attr("y",extent[0][1]).attr("width",extent[1][0]-extent[0][0]).attr("height",extent[1][1]-extent[0][1])});group.selectAll(".selection").data([type("selection")]).enter().append("rect").attr("class","selection").attr("cursor",cursors.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var handle=group.selectAll(".handle").data(dim.handles,function(d){return d.type});handle.exit().remove();handle.enter().append("rect").attr("class",function(d){return"handle handle--"+d.type}).attr("cursor",function(d){return cursors[d.type]});group.each(redraw).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",started).filter(touchable).on("touchstart.brush",started).on("touchmove.brush",touchmoved).on("touchend.brush touchcancel.brush",touchended).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}brush.move=function(group,selection,event){if(group.tween){group.on("start.brush",function(event){emitter(this,arguments).beforestart().start(event)}).on("interrupt.brush end.brush",function(event){emitter(this,arguments).end(event)}).tween("brush",function(){var that=this,state=that.__brush,emit=emitter(that,arguments),selection0=state.selection,selection1=dim.input(typeof selection==="function"?selection.apply(this,arguments):selection,state.extent),i=interpolate(selection0,selection1);function tween(t){state.selection=t===1&&selection1===null?null:i(t);redraw.call(that);emit.brush(event)}return selection0!==null&&selection1!==null?tween:tween(1)})}else{group.each(function(){var that=this,args=arguments,state=that.__brush,selection1=dim.input(typeof selection==="function"?selection.apply(that,args):selection,state.extent),emit=emitter(that,args).beforestart();interrupt(that);state.selection=selection1===null?null:selection1;redraw.call(that);emit.start(event).brush(event).end(event)})}};brush.clear=function(group){brush.move(group,null)};function redraw(){var group=select(this),selection=local$1(this).selection;if(selection){group.selectAll(".selection").style("display",null).attr("x",selection[0][0]).attr("y",selection[0][1]).attr("width",selection[1][0]-selection[0][0]).attr("height",selection[1][1]-selection[0][1]);group.selectAll(".handle").style("display",null).attr("x",function(d){return d.type[d.type.length-1]==="e"?selection[1][0]-handleSize/2:selection[0][0]-handleSize/2}).attr("y",function(d){return d.type[0]==="s"?selection[1][1]-handleSize/2:selection[0][1]-handleSize/2}).attr("width",function(d){return d.type==="n"||d.type==="s"?selection[1][0]-selection[0][0]+handleSize:handleSize}).attr("height",function(d){return d.type==="e"||d.type==="w"?selection[1][1]-selection[0][1]+handleSize:handleSize})}else{group.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}}function emitter(that,args,clean){var emit=that.__brush.emitter;return emit&&(!clean||!emit.clean)?emit:new Emitter(that,args,clean)}function Emitter(that,args,clean){this.that=that;this.args=args;this.state=that.__brush;this.active=0;this.clean=clean}Emitter.prototype={beforestart:function(){if(++this.active===1)this.state.emitter=this,this.starting=true;return this},start:function(event,mode){if(this.starting)this.starting=false,this.emit("start",event,mode);else this.emit("brush",event);return this},brush:function(event,mode){this.emit("brush",event,mode);return this},end:function(event,mode){if(--this.active===0)delete this.state.emitter,this.emit("end",event,mode);return this},emit:function(type,event,mode){var d=select(this.that).datum();listeners.call(type,this.that,new BrushEvent(type,{sourceEvent:event,target:brush,selection:dim.output(this.state.selection),mode:mode,dispatch:listeners}),d)}};function started(event){if(touchending&&!event.touches)return;if(!filter.apply(this,arguments))return;var that=this,type=event.target.__data__.type,mode=(keys&&event.metaKey?type="overlay":type)==="selection"?MODE_DRAG:keys&&event.altKey?MODE_CENTER:MODE_HANDLE,signX=dim===Y?null:signsX[type],signY=dim===X?null:signsY[type],state=local$1(that),extent=state.extent,selection=state.selection,W=extent[0][0],w0,w1,N=extent[0][1],n0,n1,E=extent[1][0],e0,e1,S=extent[1][1],s0,s1,dx=0,dy=0,moving,shifting=signX&&signY&&keys&&event.shiftKey,lockX,lockY,points=Array.from(event.touches||[event],t=>{const i=t.identifier;t=pointer(t,that);t.point0=t.slice();t.identifier=i;return t});interrupt(that);var emit=emitter(that,arguments,true).beforestart();if(type==="overlay"){if(selection)moving=true;const pts=[points[0],points[1]||points[0]];state.selection=selection=[[w0=dim===Y?W:min$1(pts[0][0],pts[1][0]),n0=dim===X?N:min$1(pts[0][1],pts[1][1])],[e0=dim===Y?E:max$1(pts[0][0],pts[1][0]),s0=dim===X?S:max$1(pts[0][1],pts[1][1])]];if(points.length>1)move(event)}else{w0=selection[0][0];n0=selection[0][1];e0=selection[1][0];s0=selection[1][1]}w1=w0;n1=n0;e1=e0;s1=s0;var group=select(that).attr("pointer-events","none");var overlay=group.selectAll(".overlay").attr("cursor",cursors[type]);if(event.touches){emit.moved=moved;emit.ended=ended}else{var view=select(event.view).on("mousemove.brush",moved,true).on("mouseup.brush",ended,true);if(keys)view.on("keydown.brush",keydowned,true).on("keyup.brush",keyupped,true);dragDisable(event.view)}redraw.call(that);emit.start(event,mode.name);function moved(event){for(const p of event.changedTouches||[event]){for(const d of points)if(d.identifier===p.identifier)d.cur=pointer(p,that)}if(shifting&&!lockX&&!lockY&&points.length===1){const point=points[0];if(abs(point.cur[0]-point[0])>abs(point.cur[1]-point[1]))lockY=true;else lockX=true}for(const point of points)if(point.cur)point[0]=point.cur[0],point[1]=point.cur[1];moving=true;noevent$1(event);move(event)}function move(event){const point=points[0],point0=point.point0;var t;dx=point[0]-point0[0];dy=point[1]-point0[1];switch(mode){case MODE_SPACE:case MODE_DRAG:{if(signX)dx=max$1(W-w0,min$1(E-e0,dx)),w1=w0+dx,e1=e0+dx;if(signY)dy=max$1(N-n0,min$1(S-s0,dy)),n1=n0+dy,s1=s0+dy;break}case MODE_HANDLE:{if(points[1]){if(signX)w1=max$1(W,min$1(E,points[0][0])),e1=max$1(W,min$1(E,points[1][0])),signX=1;if(signY)n1=max$1(N,min$1(S,points[0][1])),s1=max$1(N,min$1(S,points[1][1])),signY=1}else{if(signX<0)dx=max$1(W-w0,min$1(E-w0,dx)),w1=w0+dx,e1=e0;else if(signX>0)dx=max$1(W-e0,min$1(E-e0,dx)),w1=w0,e1=e0+dx;if(signY<0)dy=max$1(N-n0,min$1(S-n0,dy)),n1=n0+dy,s1=s0;else if(signY>0)dy=max$1(N-s0,min$1(S-s0,dy)),n1=n0,s1=s0+dy}break}case MODE_CENTER:{if(signX)w1=max$1(W,min$1(E,w0-dx*signX)),e1=max$1(W,min$1(E,e0+dx*signX));if(signY)n1=max$1(N,min$1(S,n0-dy*signY)),s1=max$1(N,min$1(S,s0+dy*signY));break}}if(e1<w1){signX*=-1;t=w0,w0=e0,e0=t;t=w1,w1=e1,e1=t;if(type in flipX)overlay.attr("cursor",cursors[type=flipX[type]])}if(s1<n1){signY*=-1;t=n0,n0=s0,s0=t;t=n1,n1=s1,s1=t;if(type in flipY)overlay.attr("cursor",cursors[type=flipY[type]])}if(state.selection)selection=state.selection;if(lockX)w1=selection[0][0],e1=selection[1][0];if(lockY)n1=selection[0][1],s1=selection[1][1];if(selection[0][0]!==w1||selection[0][1]!==n1||selection[1][0]!==e1||selection[1][1]!==s1){state.selection=[[w1,n1],[e1,s1]];redraw.call(that);emit.brush(event,mode.name)}}function ended(event){nopropagation$1(event);if(event.touches){if(event.touches.length)return;if(touchending)clearTimeout(touchending);touchending=setTimeout(function(){touchending=null},500)}else{yesdrag(event.view,moving);view.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null)}group.attr("pointer-events","all");overlay.attr("cursor",cursors.overlay);if(state.selection)selection=state.selection;if(empty$2(selection))state.selection=null,redraw.call(that);emit.end(event,mode.name)}function keydowned(event){switch(event.keyCode){case 16:{shifting=signX&&signY;break}case 18:{if(mode===MODE_HANDLE){if(signX)e0=e1-dx*signX,w0=w1+dx*signX;if(signY)s0=s1-dy*signY,n0=n1+dy*signY;mode=MODE_CENTER;move(event)}break}case 32:{if(mode===MODE_HANDLE||mode===MODE_CENTER){if(signX<0)e0=e1-dx;else if(signX>0)w0=w1-dx;if(signY<0)s0=s1-dy;else if(signY>0)n0=n1-dy;mode=MODE_SPACE;overlay.attr("cursor",cursors.selection);move(event)}break}default:return}noevent$1(event)}function keyupped(event){switch(event.keyCode){case 16:{if(shifting){lockX=lockY=shifting=false;move(event)}break}case 18:{if(mode===MODE_CENTER){if(signX<0)e0=e1;else if(signX>0)w0=w1;if(signY<0)s0=s1;else if(signY>0)n0=n1;mode=MODE_HANDLE;move(event)}break}case 32:{if(mode===MODE_SPACE){if(event.altKey){if(signX)e0=e1-dx*signX,w0=w1+dx*signX;if(signY)s0=s1-dy*signY,n0=n1+dy*signY;mode=MODE_CENTER}else{if(signX<0)e0=e1;else if(signX>0)w0=w1;if(signY<0)s0=s1;else if(signY>0)n0=n1;mode=MODE_HANDLE}overlay.attr("cursor",cursors[type]);move(event)}break}default:return}noevent$1(event)}}function touchmoved(event){emitter(this,arguments).moved(event)}function touchended(event){emitter(this,arguments).ended(event)}function initialize(){var state=this.__brush||{selection:null};state.extent=number2(extent.apply(this,arguments));state.dim=dim;return state}brush.extent=function(_){return arguments.length?(extent=typeof _==="function"?_:constant$4(number2(_)),brush):extent};brush.filter=function(_){return arguments.length?(filter=typeof _==="function"?_:constant$4(!!_),brush):filter};brush.touchable=function(_){return arguments.length?(touchable=typeof _==="function"?_:constant$4(!!_),brush):touchable};brush.handleSize=function(_){return arguments.length?(handleSize=+_,brush):handleSize};brush.keyModifiers=function(_){return arguments.length?(keys=!!_,brush):keys};brush.on=function(){var value=listeners.on.apply(listeners,arguments);return value===listeners?brush:value};return brush}var abs$1=Math.abs;var cos=Math.cos;var sin=Math.sin;var pi$1=Math.PI;var halfPi$1=pi$1/2;var tau$1=pi$1*2;var max$2=Math.max;var epsilon$1=1e-12;function range(i,j){return Array.from({length:j-i},(_,k)=>i+k)}function compareValue(compare){return function(a,b){return compare(a.source.value+a.target.value,b.source.value+b.target.value)}}function chord(){return chord$1(false,false)}function chordTranspose(){return chord$1(false,true)}function chordDirected(){return chord$1(true,false)}function chord$1(directed,transpose){var padAngle=0,sortGroups=null,sortSubgroups=null,sortChords=null;function chord(matrix){var n=matrix.length,groupSums=new Array(n),groupIndex=range(0,n),chords=new Array(n*n),groups=new Array(n),k=0,dx;matrix=Float64Array.from({length:n*n},transpose?(_,i)=>matrix[i%n][i/n|0]:(_,i)=>matrix[i/n|0][i%n]);for(let i=0;i<n;++i){let x=0;for(let j=0;j<n;++j)x+=matrix[i*n+j]+directed*matrix[j*n+i];k+=groupSums[i]=x}k=max$2(0,tau$1-padAngle*n)/k;dx=k?padAngle:tau$1/n;{let x=0;if(sortGroups)groupIndex.sort((a,b)=>sortGroups(groupSums[a],groupSums[b]));for(const i of groupIndex){const x0=x;if(directed){const subgroupIndex=range(~n+1,n).filter(j=>j<0?matrix[~j*n+i]:matrix[i*n+j]);if(sortSubgroups)subgroupIndex.sort((a,b)=>sortSubgroups(a<0?-matrix[~a*n+i]:matrix[i*n+a],b<0?-matrix[~b*n+i]:matrix[i*n+b]));for(const j of subgroupIndex){if(j<0){const chord=chords[~j*n+i]||(chords[~j*n+i]={source:null,target:null});chord.target={index:i,startAngle:x,endAngle:x+=matrix[~j*n+i]*k,value:matrix[~j*n+i]}}else{const chord=chords[i*n+j]||(chords[i*n+j]={source:null,target:null});chord.source={index:i,startAngle:x,endAngle:x+=matrix[i*n+j]*k,value:matrix[i*n+j]}}}groups[i]={index:i,startAngle:x0,endAngle:x,value:groupSums[i]}}else{const subgroupIndex=range(0,n).filter(j=>matrix[i*n+j]||matrix[j*n+i]);if(sortSubgroups)subgroupIndex.sort((a,b)=>sortSubgroups(matrix[i*n+a],matrix[i*n+b]));for(const j of subgroupIndex){let chord;if(i<j){chord=chords[i*n+j]||(chords[i*n+j]={source:null,target:null});chord.source={index:i,startAngle:x,endAngle:x+=matrix[i*n+j]*k,value:matrix[i*n+j]}}else{chord=chords[j*n+i]||(chords[j*n+i]={source:null,target:null});chord.target={index:i,startAngle:x,endAngle:x+=matrix[i*n+j]*k,value:matrix[i*n+j]};if(i===j)chord.source=chord.target}if(chord.source&&chord.target&&chord.source.value<chord.target.value){const source=chord.source;chord.source=chord.target;chord.target=source}}groups[i]={index:i,startAngle:x0,endAngle:x,value:groupSums[i]}}x+=dx}}chords=Object.values(chords);chords.groups=groups;return sortChords?chords.sort(sortChords):chords}chord.padAngle=function(_){return arguments.length?(padAngle=max$2(0,_),chord):padAngle};chord.sortGroups=function(_){return arguments.length?(sortGroups=_,chord):sortGroups};chord.sortSubgroups=function(_){return arguments.length?(sortSubgroups=_,chord):sortSubgroups};chord.sortChords=function(_){return arguments.length?(_==null?sortChords=null:(sortChords=compareValue(_))._=_,chord):sortChords&&sortChords._};return chord}const pi$2=Math.PI,tau$2=2*pi$2,epsilon$2=1e-6,tauEpsilon=tau$2-epsilon$2;function Path(){this._x0=this._y0=this._x1=this._y1=null;this._=""}function path(){return new Path}Path.prototype=path.prototype={constructor:Path,moveTo:function(x,y){this._+="M"+(this._x0=this._x1=+x)+","+(this._y0=this._y1=+y)},closePath:function(){if(this._x1!==null){this._x1=this._x0,this._y1=this._y0;this._+="Z"}},lineTo:function(x,y){this._+="L"+(this._x1=+x)+","+(this._y1=+y)},quadraticCurveTo:function(x1,y1,x,y){this._+="Q"+ +x1+","+ +y1+","+(this._x1=+x)+","+(this._y1=+y)},bezierCurveTo:function(x1,y1,x2,y2,x,y){this._+="C"+ +x1+","+ +y1+","+ +x2+","+ +y2+","+(this._x1=+x)+","+(this._y1=+y)},arcTo:function(x1,y1,x2,y2,r){x1=+x1,y1=+y1,x2=+x2,y2=+y2,r=+r;var x0=this._x1,y0=this._y1,x21=x2-x1,y21=y2-y1,x01=x0-x1,y01=y0-y1,l01_2=x01*x01+y01*y01;if(r<0)throw new Error("negative radius: "+r);if(this._x1===null){this._+="M"+(this._x1=x1)+","+(this._y1=y1)}else if(!(l01_2>epsilon$2));else if(!(Math.abs(y01*x21-y21*x01)>epsilon$2)||!r){this._+="L"+(this._x1=x1)+","+(this._y1=y1)}else{var x20=x2-x0,y20=y2-y0,l21_2=x21*x21+y21*y21,l20_2=x20*x20+y20*y20,l21=Math.sqrt(l21_2),l01=Math.sqrt(l01_2),l=r*Math.tan((pi$2-Math.acos((l21_2+l01_2-l20_2)/(2*l21*l01)))/2),t01=l/l01,t21=l/l21;if(Math.abs(t01-1)>epsilon$2){this._+="L"+(x1+t01*x01)+","+(y1+t01*y01)}this._+="A"+r+","+r+",0,0,"+ +(y01*x20>x01*y20)+","+(this._x1=x1+t21*x21)+","+(this._y1=y1+t21*y21)}},arc:function(x,y,r,a0,a1,ccw){x=+x,y=+y,r=+r,ccw=!!ccw;var dx=r*Math.cos(a0),dy=r*Math.sin(a0),x0=x+dx,y0=y+dy,cw=1^ccw,da=ccw?a0-a1:a1-a0;if(r<0)throw new Error("negative radius: "+r);if(this._x1===null){this._+="M"+x0+","+y0}else if(Math.abs(this._x1-x0)>epsilon$2||Math.abs(this._y1-y0)>epsilon$2){this._+="L"+x0+","+y0}if(!r)return;if(da<0)da=da%tau$2+tau$2;if(da>tauEpsilon){this._+="A"+r+","+r+",0,1,"+cw+","+(x-dx)+","+(y-dy)+"A"+r+","+r+",0,1,"+cw+","+(this._x1=x0)+","+(this._y1=y0)}else if(da>epsilon$2){this._+="A"+r+","+r+",0,"+ +(da>=pi$2)+","+cw+","+(this._x1=x+r*Math.cos(a1))+","+(this._y1=y+r*Math.sin(a1))}},rect:function(x,y,w,h){this._+="M"+(this._x0=this._x1=+x)+","+(this._y0=this._y1=+y)+"h"+ +w+"v"+ +h+"h"+-w+"Z"},toString:function(){return this._}};var slice$2=Array.prototype.slice;function constant$5(x){return function(){return x}}function defaultSource(d){return d.source}function defaultTarget(d){return d.target}function defaultRadius(d){return d.radius}function defaultStartAngle(d){return d.startAngle}function defaultEndAngle(d){return d.endAngle}function defaultPadAngle(){return 0}function defaultArrowheadRadius(){return 10}function ribbon(headRadius){var source=defaultSource,target=defaultTarget,sourceRadius=defaultRadius,targetRadius=defaultRadius,startAngle=defaultStartAngle,endAngle=defaultEndAngle,padAngle=defaultPadAngle,context=null;function ribbon(){var buffer,s=source.apply(this,arguments),t=target.apply(this,arguments),ap=padAngle.apply(this,arguments)/2,argv=slice$2.call(arguments),sr=+sourceRadius.apply(this,(argv[0]=s,argv)),sa0=startAngle.apply(this,argv)-halfPi$1,sa1=endAngle.apply(this,argv)-halfPi$1,tr=+targetRadius.apply(this,(argv[0]=t,argv)),ta0=startAngle.apply(this,argv)-halfPi$1,ta1=endAngle.apply(this,argv)-halfPi$1;if(!context)context=buffer=path();if(ap>epsilon$1){if(abs$1(sa1-sa0)>ap*2+epsilon$1)sa1>sa0?(sa0+=ap,sa1-=ap):(sa0-=ap,sa1+=ap);else sa0=sa1=(sa0+sa1)/2;if(abs$1(ta1-ta0)>ap*2+epsilon$1)ta1>ta0?(ta0+=ap,ta1-=ap):(ta0-=ap,ta1+=ap);else ta0=ta1=(ta0+ta1)/2}context.moveTo(sr*cos(sa0),sr*sin(sa0));context.arc(0,0,sr,sa0,sa1);if(sa0!==ta0||sa1!==ta1){if(headRadius){var hr=+headRadius.apply(this,arguments),tr2=tr-hr,ta2=(ta0+ta1)/2;context.quadraticCurveTo(0,0,tr2*cos(ta0),tr2*sin(ta0));context.lineTo(tr*cos(ta2),tr*sin(ta2));context.lineTo(tr2*cos(ta1),tr2*sin(ta1))}else{context.quadraticCurveTo(0,0,tr*cos(ta0),tr*sin(ta0));context.arc(0,0,tr,ta0,ta1)}}context.quadraticCurveTo(0,0,sr*cos(sa0),sr*sin(sa0));context.closePath();if(buffer)return context=null,buffer+""||null}if(headRadius)ribbon.headRadius=function(_){return arguments.length?(headRadius=typeof _==="function"?_:constant$5(+_),ribbon):headRadius};ribbon.radius=function(_){return arguments.length?(sourceRadius=targetRadius=typeof _==="function"?_:constant$5(+_),ribbon):sourceRadius};ribbon.sourceRadius=function(_){return arguments.length?(sourceRadius=typeof _==="function"?_:constant$5(+_),ribbon):sourceRadius};ribbon.targetRadius=function(_){return arguments.length?(targetRadius=typeof _==="function"?_:constant$5(+_),ribbon):targetRadius};ribbon.startAngle=function(_){return arguments.length?(startAngle=typeof _==="function"?_:constant$5(+_),ribbon):startAngle};ribbon.endAngle=function(_){return arguments.length?(endAngle=typeof _==="function"?_:constant$5(+_),ribbon):endAngle};ribbon.padAngle=function(_){return arguments.length?(padAngle=typeof _==="function"?_:constant$5(+_),ribbon):padAngle};ribbon.source=function(_){return arguments.length?(source=_,ribbon):source};ribbon.target=function(_){return arguments.length?(target=_,ribbon):target};ribbon.context=function(_){return arguments.length?(context=_==null?null:_,ribbon):context};return ribbon}function ribbon$1(){return ribbon()}function ribbonArrow(){return ribbon(defaultArrowheadRadius)}var array$3=Array.prototype;var slice$3=array$3.slice;function ascending$2(a,b){return a-b}function area(ring){var i=0,n=ring.length,area=ring[n-1][1]*ring[0][0]-ring[n-1][0]*ring[0][1];while(++i<n)area+=ring[i-1][1]*ring[i][0]-ring[i-1][0]*ring[i][1];return area}var constant$6=x=>()=>x;function contains(ring,hole){var i=-1,n=hole.length,c;while(++i<n)if(c=ringContains(ring,hole[i]))return c;return 0}function ringContains(ring,point){var x=point[0],y=point[1],contains=-1;for(var i=0,n=ring.length,j=n-1;i<n;j=i++){var pi=ring[i],xi=pi[0],yi=pi[1],pj=ring[j],xj=pj[0],yj=pj[1];if(segmentContains(pi,pj,point))return 0;if(yi>y!==yj>y&&x<(xj-xi)*(y-yi)/(yj-yi)+xi)contains=-contains}return contains}function segmentContains(a,b,c){var i;return collinear(a,b,c)&&within(a[i=+(a[0]===b[0])],c[i],b[i])}function collinear(a,b,c){return(b[0]-a[0])*(c[1]-a[1])===(c[0]-a[0])*(b[1]-a[1])}function within(p,q,r){return p<=q&&q<=r||r<=q&&q<=p}function noop$1(){}var cases=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function contours(){var dx=1,dy=1,threshold=thresholdSturges,smooth=smoothLinear;function contours(values){var tz=threshold(values);if(!Array.isArray(tz)){var domain=extent(values),start=domain[0],stop=domain[1];tz=tickStep(start,stop,tz);tz=sequence(Math.floor(start/tz)*tz,Math.floor(stop/tz)*tz,tz)}else{tz=tz.slice().sort(ascending$2)}return tz.map(function(value){return contour(values,value)})}function contour(values,value){var polygons=[],holes=[];isorings(values,value,function(ring){smooth(ring,values,value);if(area(ring)>0)polygons.push([ring]);else holes.push(ring)});holes.forEach(function(hole){for(var i=0,n=polygons.length,polygon;i<n;++i){if(contains((polygon=polygons[i])[0],hole)!==-1){polygon.push(hole);return}}});return{type:"MultiPolygon",value:value,coordinates:polygons}}function isorings(values,value,callback){var fragmentByStart=new Array,fragmentByEnd=new Array,x,y,t0,t1,t2,t3;x=y=-1;t1=values[0]>=value;cases[t1<<1].forEach(stitch);while(++x<dx-1){t0=t1,t1=values[x+1]>=value;cases[t0|t1<<1].forEach(stitch)}cases[t1<<0].forEach(stitch);while(++y<dy-1){x=-1;t1=values[y*dx+dx]>=value;t2=values[y*dx]>=value;cases[t1<<1|t2<<2].forEach(stitch);while(++x<dx-1){t0=t1,t1=values[y*dx+dx+x+1]>=value;t3=t2,t2=values[y*dx+x+1]>=value;cases[t0|t1<<1|t2<<2|t3<<3].forEach(stitch)}cases[t1|t2<<3].forEach(stitch)}x=-1;t2=values[y*dx]>=value;cases[t2<<2].forEach(stitch);while(++x<dx-1){t3=t2,t2=values[y*dx+x+1]>=value;cases[t2<<2|t3<<3].forEach(stitch)}cases[t2<<3].forEach(stitch);function stitch(line){var start=[line[0][0]+x,line[0][1]+y],end=[line[1][0]+x,line[1][1]+y],startIndex=index(start),endIndex=index(end),f,g;if(f=fragmentByEnd[startIndex]){if(g=fragmentByStart[endIndex]){delete fragmentByEnd[f.end];delete fragmentByStart[g.start];if(f===g){f.ring.push(end);callback(f.ring)}else{fragmentByStart[f.start]=fragmentByEnd[g.end]={start:f.start,end:g.end,ring:f.ring.concat(g.ring)}}}else{delete fragmentByEnd[f.end];f.ring.push(end);fragmentByEnd[f.end=endIndex]=f}}else if(f=fragmentByStart[endIndex]){if(g=fragmentByEnd[startIndex]){delete fragmentByStart[f.start];delete fragmentByEnd[g.end];if(f===g){f.ring.push(end);callback(f.ring)}else{fragmentByStart[g.start]=fragmentByEnd[f.end]={start:g.start,end:f.end,ring:g.ring.concat(f.ring)}}}else{delete fragmentByStart[f.start];f.ring.unshift(start);fragmentByStart[f.start=startIndex]=f}}else{fragmentByStart[startIndex]=fragmentByEnd[endIndex]={start:startIndex,end:endIndex,ring:[start,end]}}}}function index(point){return point[0]*2+point[1]*(dx+1)*4}function smoothLinear(ring,values,value){ring.forEach(function(point){var x=point[0],y=point[1],xt=x|0,yt=y|0,v0,v1=values[yt*dx+xt];if(x>0&&x<dx&&xt===x){v0=values[yt*dx+xt-1];point[0]=x+(value-v0)/(v1-v0)-.5}if(y>0&&y<dy&&yt===y){v0=values[(yt-1)*dx+xt];point[1]=y+(value-v0)/(v1-v0)-.5}})}contours.contour=contour;contours.size=function(_){if(!arguments.length)return[dx,dy];var _0=Math.floor(_[0]),_1=Math.floor(_[1]);if(!(_0>=0&&_1>=0))throw new Error("invalid size");return dx=_0,dy=_1,contours};contours.thresholds=function(_){return arguments.length?(threshold=typeof _==="function"?_:Array.isArray(_)?constant$6(slice$3.call(_)):constant$6(_),contours):threshold};contours.smooth=function(_){return arguments.length?(smooth=_?smoothLinear:noop$1,contours):smooth===smoothLinear};return contours}function blurX(source,target,r){var n=source.width,m=source.height,w=(r<<1)+1;for(var j=0;j<m;++j){for(var i=0,sr=0;i<n+r;++i){if(i<n){sr+=source.data[i+j*n]}if(i>=r){if(i>=w){sr-=source.data[i-w+j*n]}target.data[i-r+j*n]=sr/Math.min(i+1,n-1+w-i,w)}}}}function blurY(source,target,r){var n=source.width,m=source.height,w=(r<<1)+1;for(var i=0;i<n;++i){for(var j=0,sr=0;j<m+r;++j){if(j<m){sr+=source.data[i+j*n]}if(j>=r){if(j>=w){sr-=source.data[i+(j-w)*n]}target.data[i+(j-r)*n]=sr/Math.min(j+1,m-1+w-j,w)}}}}function defaultX(d){return d[0]}function defaultY(d){return d[1]}function defaultWeight(){return 1}function density(){var x=defaultX,y=defaultY,weight=defaultWeight,dx=960,dy=500,r=20,k=2,o=r*3,n=dx+o*2>>k,m=dy+o*2>>k,threshold=constant$6(20);function density(data){var values0=new Float32Array(n*m),values1=new Float32Array(n*m);data.forEach(function(d,i,data){var xi=+x(d,i,data)+o>>k,yi=+y(d,i,data)+o>>k,wi=+weight(d,i,data);if(xi>=0&&xi<n&&yi>=0&&yi<m){values0[xi+yi*n]+=wi}});blurX({width:n,height:m,data:values0},{width:n,height:m,data:values1},r>>k);blurY({width:n,height:m,data:values1},{width:n,height:m,data:values0},r>>k);blurX({width:n,height:m,data:values0},{width:n,height:m,data:values1},r>>k);blurY({width:n,height:m,data:values1},{width:n,height:m,data:values0},r>>k);blurX({width:n,height:m,data:values0},{width:n,height:m,data:values1},r>>k);blurY({width:n,height:m,data:values1},{width:n,height:m,data:values0},r>>k);var tz=threshold(values0);if(!Array.isArray(tz)){var stop=max(values0);tz=tickStep(0,stop,tz);tz=sequence(0,Math.floor(stop/tz)*tz,tz);tz.shift()}return contours().thresholds(tz).size([n,m])(values0).map(transform)}function transform(geometry){geometry.value*=Math.pow(2,-2*k);geometry.coordinates.forEach(transformPolygon);return geometry}function transformPolygon(coordinates){coordinates.forEach(transformRing)}function transformRing(coordinates){coordinates.forEach(transformPoint)}function transformPoint(coordinates){coordinates[0]=coordinates[0]*Math.pow(2,k)-o;coordinates[1]=coordinates[1]*Math.pow(2,k)-o}function resize(){o=r*3;n=dx+o*2>>k;m=dy+o*2>>k;return density}density.x=function(_){return arguments.length?(x=typeof _==="function"?_:constant$6(+_),density):x};density.y=function(_){return arguments.length?(y=typeof _==="function"?_:constant$6(+_),density):y};density.weight=function(_){return arguments.length?(weight=typeof _==="function"?_:constant$6(+_),density):weight};density.size=function(_){if(!arguments.length)return[dx,dy];var _0=+_[0],_1=+_[1];if(!(_0>=0&&_1>=0))throw new Error("invalid size");return dx=_0,dy=_1,resize()};density.cellSize=function(_){if(!arguments.length)return 1<<k;if(!((_=+_)>=1))throw new Error("invalid cell size");return k=Math.floor(Math.log(_)/Math.LN2),resize()};density.thresholds=function(_){return arguments.length?(threshold=typeof _==="function"?_:Array.isArray(_)?constant$6(slice$3.call(_)):constant$6(_),density):threshold};density.bandwidth=function(_){if(!arguments.length)return Math.sqrt(r*(r+1));if(!((_=+_)>=0))throw new Error("invalid bandwidth");return r=Math.round((Math.sqrt(4*_*_+1)-1)/2),resize()};return density}const EPSILON=Math.pow(2,-52);const EDGE_STACK=new Uint32Array(512);class Delaunator{static from(points,getX=defaultGetX,getY=defaultGetY){const n=points.length;const coords=new Float64Array(n*2);for(let i=0;i<n;i++){const p=points[i];coords[2*i]=getX(p);coords[2*i+1]=getY(p)}return new Delaunator(coords)}constructor(coords){const n=coords.length>>1;if(n>0&&typeof coords[0]!=="number")throw new Error("Expected coords to contain numbers.");this.coords=coords;const maxTriangles=Math.max(2*n-5,0);this._triangles=new Uint32Array(maxTriangles*3);this._halfedges=new Int32Array(maxTriangles*3);this._hashSize=Math.ceil(Math.sqrt(n));this._hullPrev=new Uint32Array(n);this._hullNext=new Uint32Array(n);this._hullTri=new Uint32Array(n);this._hullHash=new Int32Array(this._hashSize).fill(-1);this._ids=new Uint32Array(n);this._dists=new Float64Array(n);this.update()}update(){const{coords:coords,_hullPrev:hullPrev,_hullNext:hullNext,_hullTri:hullTri,_hullHash:hullHash}=this;const n=coords.length>>1;let minX=Infinity;let minY=Infinity;let maxX=-Infinity;let maxY=-Infinity;for(let i=0;i<n;i++){const x=coords[2*i];const y=coords[2*i+1];if(x<minX)minX=x;if(y<minY)minY=y;if(x>maxX)maxX=x;if(y>maxY)maxY=y;this._ids[i]=i}const cx=(minX+maxX)/2;const cy=(minY+maxY)/2;let minDist=Infinity;let i0,i1,i2;for(let i=0;i<n;i++){const d=dist(cx,cy,coords[2*i],coords[2*i+1]);if(d<minDist){i0=i;minDist=d}}const i0x=coords[2*i0];const i0y=coords[2*i0+1];minDist=Infinity;for(let i=0;i<n;i++){if(i===i0)continue;const d=dist(i0x,i0y,coords[2*i],coords[2*i+1]);if(d<minDist&&d>0){i1=i;minDist=d}}let i1x=coords[2*i1];let i1y=coords[2*i1+1];let minRadius=Infinity;for(let i=0;i<n;i++){if(i===i0||i===i1)continue;const r=circumradius(i0x,i0y,i1x,i1y,coords[2*i],coords[2*i+1]);if(r<minRadius){i2=i;minRadius=r}}let i2x=coords[2*i2];let i2y=coords[2*i2+1];if(minRadius===Infinity){for(let i=0;i<n;i++){this._dists[i]=coords[2*i]-coords[0]||coords[2*i+1]-coords[1]}quicksort(this._ids,this._dists,0,n-1);const hull=new Uint32Array(n);let j=0;for(let i=0,d0=-Infinity;i<n;i++){const id=this._ids[i];if(this._dists[id]>d0){hull[j++]=id;d0=this._dists[id]}}this.hull=hull.subarray(0,j);this.triangles=new Uint32Array(0);this.halfedges=new Uint32Array(0);return}if(orient(i0x,i0y,i1x,i1y,i2x,i2y)){const i=i1;const x=i1x;const y=i1y;i1=i2;i1x=i2x;i1y=i2y;i2=i;i2x=x;i2y=y}const center=circumcenter(i0x,i0y,i1x,i1y,i2x,i2y);this._cx=center.x;this._cy=center.y;for(let i=0;i<n;i++){this._dists[i]=dist(coords[2*i],coords[2*i+1],center.x,center.y)}quicksort(this._ids,this._dists,0,n-1);this._hullStart=i0;let hullSize=3;hullNext[i0]=hullPrev[i2]=i1;hullNext[i1]=hullPrev[i0]=i2;hullNext[i2]=hullPrev[i1]=i0;hullTri[i0]=0;hullTri[i1]=1;hullTri[i2]=2;hullHash.fill(-1);hullHash[this._hashKey(i0x,i0y)]=i0;hullHash[this._hashKey(i1x,i1y)]=i1;hullHash[this._hashKey(i2x,i2y)]=i2;this.trianglesLen=0;this._addTriangle(i0,i1,i2,-1,-1,-1);for(let k=0,xp,yp;k<this._ids.length;k++){const i=this._ids[k];const x=coords[2*i];const y=coords[2*i+1];if(k>0&&Math.abs(x-xp)<=EPSILON&&Math.abs(y-yp)<=EPSILON)continue;xp=x;yp=y;if(i===i0||i===i1||i===i2)continue;let start=0;for(let j=0,key=this._hashKey(x,y);j<this._hashSize;j++){start=hullHash[(key+j)%this._hashSize];if(start!==-1&&start!==hullNext[start])break}start=hullPrev[start];let e=start,q;while(q=hullNext[e],!orient(x,y,coords[2*e],coords[2*e+1],coords[2*q],coords[2*q+1])){e=q;if(e===start){e=-1;break}}if(e===-1)continue;let t=this._addTriangle(e,i,hullNext[e],-1,-1,hullTri[e]);hullTri[i]=this._legalize(t+2);hullTri[e]=t;hullSize++;let n=hullNext[e];while(q=hullNext[n],orient(x,y,coords[2*n],coords[2*n+1],coords[2*q],coords[2*q+1])){t=this._addTriangle(n,i,q,hullTri[i],-1,hullTri[n]);hullTri[i]=this._legalize(t+2);hullNext[n]=n;hullSize--;n=q}if(e===start){while(q=hullPrev[e],orient(x,y,coords[2*q],coords[2*q+1],coords[2*e],coords[2*e+1])){t=this._addTriangle(q,i,e,-1,hullTri[e],hullTri[q]);this._legalize(t+2);hullTri[q]=t;hullNext[e]=e;hullSize--;e=q}}this._hullStart=hullPrev[i]=e;hullNext[e]=hullPrev[n]=i;hullNext[i]=n;hullHash[this._hashKey(x,y)]=i;hullHash[this._hashKey(coords[2*e],coords[2*e+1])]=e}this.hull=new Uint32Array(hullSize);for(let i=0,e=this._hullStart;i<hullSize;i++){this.hull[i]=e;e=hullNext[e]}this.triangles=this._triangles.subarray(0,this.trianglesLen);this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(x,y){return Math.floor(pseudoAngle(x-this._cx,y-this._cy)*this._hashSize)%this._hashSize}_legalize(a){const{_triangles:triangles,_halfedges:halfedges,coords:coords}=this;let i=0;let ar=0;while(true){const b=halfedges[a];const a0=a-a%3;ar=a0+(a+2)%3;if(b===-1){if(i===0)break;a=EDGE_STACK[--i];continue}const b0=b-b%3;const al=a0+(a+1)%3;const bl=b0+(b+2)%3;const p0=triangles[ar];const pr=triangles[a];const pl=triangles[al];const p1=triangles[bl];const illegal=inCircle(coords[2*p0],coords[2*p0+1],coords[2*pr],coords[2*pr+1],coords[2*pl],coords[2*pl+1],coords[2*p1],coords[2*p1+1]);if(illegal){triangles[a]=p1;triangles[b]=p0;const hbl=halfedges[bl];if(hbl===-1){let e=this._hullStart;do{if(this._hullTri[e]===bl){this._hullTri[e]=a;break}e=this._hullPrev[e]}while(e!==this._hullStart)}this._link(a,hbl);this._link(b,halfedges[ar]);this._link(ar,bl);const br=b0+(b+1)%3;if(i<EDGE_STACK.length){EDGE_STACK[i++]=br}}else{if(i===0)break;a=EDGE_STACK[--i]}}return ar}_link(a,b){this._halfedges[a]=b;if(b!==-1)this._halfedges[b]=a}_addTriangle(i0,i1,i2,a,b,c){const t=this.trianglesLen;this._triangles[t]=i0;this._triangles[t+1]=i1;this._triangles[t+2]=i2;this._link(t,a);this._link(t+1,b);this._link(t+2,c);this.trianglesLen+=3;return t}}function pseudoAngle(dx,dy){const p=dx/(Math.abs(dx)+Math.abs(dy));return(dy>0?3-p:1+p)/4}function dist(ax,ay,bx,by){const dx=ax-bx;const dy=ay-by;return dx*dx+dy*dy}function orientIfSure(px,py,rx,ry,qx,qy){const l=(ry-py)*(qx-px);const r=(rx-px)*(qy-py);return Math.abs(l-r)>=3.3306690738754716e-16*Math.abs(l+r)?l-r:0}function orient(rx,ry,qx,qy,px,py){const sign=orientIfSure(px,py,rx,ry,qx,qy)||orientIfSure(rx,ry,qx,qy,px,py)||orientIfSure(qx,qy,px,py,rx,ry);return sign<0}function inCircle(ax,ay,bx,by,cx,cy,px,py){const dx=ax-px;const dy=ay-py;const ex=bx-px;const ey=by-py;const fx=cx-px;const fy=cy-py;const ap=dx*dx+dy*dy;const bp=ex*ex+ey*ey;const cp=fx*fx+fy*fy;return dx*(ey*cp-bp*fy)-dy*(ex*cp-bp*fx)+ap*(ex*fy-ey*fx)<0}function circumradius(ax,ay,bx,by,cx,cy){const dx=bx-ax;const dy=by-ay;const ex=cx-ax;const ey=cy-ay;const bl=dx*dx+dy*dy;const cl=ex*ex+ey*ey;const d=.5/(dx*ey-dy*ex);const x=(ey*bl-dy*cl)*d;const y=(dx*cl-ex*bl)*d;return x*x+y*y}function circumcenter(ax,ay,bx,by,cx,cy){const dx=bx-ax;const dy=by-ay;const ex=cx-ax;const ey=cy-ay;const bl=dx*dx+dy*dy;const cl=ex*ex+ey*ey;const d=.5/(dx*ey-dy*ex);const x=ax+(ey*bl-dy*cl)*d;const y=ay+(dx*cl-ex*bl)*d;return{x:x,y:y}}function quicksort(ids,dists,left,right){if(right-left<=20){for(let i=left+1;i<=right;i++){const temp=ids[i];const tempDist=dists[temp];let j=i-1;while(j>=left&&dists[ids[j]]>tempDist)ids[j+1]=ids[j--];ids[j+1]=temp}}else{const median=left+right>>1;let i=left+1;let j=right;swap$1(ids,median,i);if(dists[ids[left]]>dists[ids[right]])swap$1(ids,left,right);if(dists[ids[i]]>dists[ids[right]])swap$1(ids,i,right);if(dists[ids[left]]>dists[ids[i]])swap$1(ids,left,i);const temp=ids[i];const tempDist=dists[temp];while(true){do{i++}while(dists[ids[i]]<tempDist);do{j--}while(dists[ids[j]]>tempDist);if(j<i)break;swap$1(ids,i,j)}ids[left+1]=ids[j];ids[j]=temp;if(right-i+1>=j-left){quicksort(ids,dists,i,right);quicksort(ids,dists,left,j-1)}else{quicksort(ids,dists,left,j-1);quicksort(ids,dists,i,right)}}}function swap$1(arr,i,j){const tmp=arr[i];arr[i]=arr[j];arr[j]=tmp}function defaultGetX(p){return p[0]}function defaultGetY(p){return p[1]}const epsilon$3=1e-6;class Path$1{constructor(){this._x0=this._y0=this._x1=this._y1=null;this._=""}moveTo(x,y){this._+=`M${this._x0=this._x1=+x},${this._y0=this._y1=+y}`}closePath(){if(this._x1!==null){this._x1=this._x0,this._y1=this._y0;this._+="Z"}}lineTo(x,y){this._+=`L${this._x1=+x},${this._y1=+y}`}arc(x,y,r){x=+x,y=+y,r=+r;const x0=x+r;const y0=y;if(r<0)throw new Error("negative radius");if(this._x1===null)this._+=`M${x0},${y0}`;else if(Math.abs(this._x1-x0)>epsilon$3||Math.abs(this._y1-y0)>epsilon$3)this._+="L"+x0+","+y0;if(!r)return;this._+=`A${r},${r},0,1,1,${x-r},${y}A${r},${r},0,1,1,${this._x1=x0},${this._y1=y0}`}rect(x,y,w,h){this._+=`M${this._x0=this._x1=+x},${this._y0=this._y1=+y}h${+w}v${+h}h${-w}Z`}value(){return this._||null}}class Polygon{constructor(){this._=[]}moveTo(x,y){this._.push([x,y])}closePath(){this._.push(this._[0].slice())}lineTo(x,y){this._.push([x,y])}value(){return this._.length?this._:null}}class Voronoi{constructor(delaunay,[xmin,ymin,xmax,ymax]=[0,0,960,500]){if(!((xmax=+xmax)>=(xmin=+xmin))||!((ymax=+ymax)>=(ymin=+ymin)))throw new Error("invalid bounds");this.delaunay=delaunay;this._circumcenters=new Float64Array(delaunay.points.length*2);this.vectors=new Float64Array(delaunay.points.length*2);this.xmax=xmax,this.xmin=xmin;this.ymax=ymax,this.ymin=ymin;this._init()}update(){this.delaunay.update();this._init();return this}_init(){const{delaunay:{points:points,hull:hull,triangles:triangles},vectors:vectors}=this;const circumcenters=this.circumcenters=this._circumcenters.subarray(0,triangles.length/3*2);for(let i=0,j=0,n=triangles.length,x,y;i<n;i+=3,j+=2){const t1=triangles[i]*2;const t2=triangles[i+1]*2;const t3=triangles[i+2]*2;const x1=points[t1];const y1=points[t1+1];const x2=points[t2];const y2=points[t2+1];const x3=points[t3];const y3=points[t3+1];const dx=x2-x1;const dy=y2-y1;const ex=x3-x1;const ey=y3-y1;const bl=dx*dx+dy*dy;const cl=ex*ex+ey*ey;const ab=(dx*ey-dy*ex)*2;if(!ab){x=(x1+x3)/2-1e8*ey;y=(y1+y3)/2+1e8*ex}else if(Math.abs(ab)<1e-8){x=(x1+x3)/2;y=(y1+y3)/2}else{const d=1/ab;x=x1+(ey*bl-dy*cl)*d;y=y1+(dx*cl-ex*bl)*d}circumcenters[j]=x;circumcenters[j+1]=y}let h=hull[hull.length-1];let p0,p1=h*4;let x0,x1=points[2*h];let y0,y1=points[2*h+1];vectors.fill(0);for(let i=0;i<hull.length;++i){h=hull[i];p0=p1,x0=x1,y0=y1;p1=h*4,x1=points[2*h],y1=points[2*h+1];vectors[p0+2]=vectors[p1]=y0-y1;vectors[p0+3]=vectors[p1+1]=x1-x0}}render(context){const buffer=context==null?context=new Path$1:undefined;const{delaunay:{halfedges:halfedges,inedges:inedges,hull:hull},circumcenters:circumcenters,vectors:vectors}=this;if(hull.length<=1)return null;for(let i=0,n=halfedges.length;i<n;++i){const j=halfedges[i];if(j<i)continue;const ti=Math.floor(i/3)*2;const tj=Math.floor(j/3)*2;const xi=circumcenters[ti];const yi=circumcenters[ti+1];const xj=circumcenters[tj];const yj=circumcenters[tj+1];this._renderSegment(xi,yi,xj,yj,context)}let h0,h1=hull[hull.length-1];for(let i=0;i<hull.length;++i){h0=h1,h1=hull[i];const t=Math.floor(inedges[h1]/3)*2;const x=circumcenters[t];const y=circumcenters[t+1];const v=h0*4;const p=this._project(x,y,vectors[v+2],vectors[v+3]);if(p)this._renderSegment(x,y,p[0],p[1],context)}return buffer&&buffer.value()}renderBounds(context){const buffer=context==null?context=new Path$1:undefined;context.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin);return buffer&&buffer.value()}renderCell(i,context){const buffer=context==null?context=new Path$1:undefined;const points=this._clip(i);if(points===null||!points.length)return;context.moveTo(points[0],points[1]);let n=points.length;while(points[0]===points[n-2]&&points[1]===points[n-1]&&n>1)n-=2;for(let i=2;i<n;i+=2){if(points[i]!==points[i-2]||points[i+1]!==points[i-1])context.lineTo(points[i],points[i+1])}context.closePath();return buffer&&buffer.value()}*cellPolygons(){const{delaunay:{points:points}}=this;for(let i=0,n=points.length/2;i<n;++i){const cell=this.cellPolygon(i);if(cell)cell.index=i,yield cell}}cellPolygon(i){const polygon=new Polygon;this.renderCell(i,polygon);return polygon.value()}_renderSegment(x0,y0,x1,y1,context){let S;const c0=this._regioncode(x0,y0);const c1=this._regioncode(x1,y1);if(c0===0&&c1===0){context.moveTo(x0,y0);context.lineTo(x1,y1)}else if(S=this._clipSegment(x0,y0,x1,y1,c0,c1)){context.moveTo(S[0],S[1]);context.lineTo(S[2],S[3])}}contains(i,x,y){if((x=+x,x!==x)||(y=+y,y!==y))return false;return this.delaunay._step(i,x,y)===i}*neighbors(i){const ci=this._clip(i);if(ci)for(const j of this.delaunay.neighbors(i)){const cj=this._clip(j);if(cj)loop:for(let ai=0,li=ci.length;ai<li;ai+=2){for(let aj=0,lj=cj.length;aj<lj;aj+=2){if(ci[ai]==cj[aj]&&ci[ai+1]==cj[aj+1]&&ci[(ai+2)%li]==cj[(aj+lj-2)%lj]&&ci[(ai+3)%li]==cj[(aj+lj-1)%lj]){yield j;break loop}}}}}_cell(i){const{circumcenters:circumcenters,delaunay:{inedges:inedges,halfedges:halfedges,triangles:triangles}}=this;const e0=inedges[i];if(e0===-1)return null;const points=[];let e=e0;do{const t=Math.floor(e/3);points.push(circumcenters[t*2],circumcenters[t*2+1]);e=e%3===2?e-2:e+1;if(triangles[e]!==i)break;e=halfedges[e]}while(e!==e0&&e!==-1);return points}_clip(i){if(i===0&&this.delaunay.hull.length===1){return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin]}const points=this._cell(i);if(points===null)return null;const{vectors:V}=this;const v=i*4;return V[v]||V[v+1]?this._clipInfinite(i,points,V[v],V[v+1],V[v+2],V[v+3]):this._clipFinite(i,points)}_clipFinite(i,points){const n=points.length;let P=null;let x0,y0,x1=points[n-2],y1=points[n-1];let c0,c1=this._regioncode(x1,y1);let e0,e1;for(let j=0;j<n;j+=2){x0=x1,y0=y1,x1=points[j],y1=points[j+1];c0=c1,c1=this._regioncode(x1,y1);if(c0===0&&c1===0){e0=e1,e1=0;if(P)P.push(x1,y1);else P=[x1,y1]}else{let S,sx0,sy0,sx1,sy1;if(c0===0){if((S=this._clipSegment(x0,y0,x1,y1,c0,c1))===null)continue;[sx0,sy0,sx1,sy1]=S}else{if((S=this._clipSegment(x1,y1,x0,y0,c1,c0))===null)continue;[sx1,sy1,sx0,sy0]=S;e0=e1,e1=this._edgecode(sx0,sy0);if(e0&&e1)this._edge(i,e0,e1,P,P.length);if(P)P.push(sx0,sy0);else P=[sx0,sy0]}e0=e1,e1=this._edgecode(sx1,sy1);if(e0&&e1)this._edge(i,e0,e1,P,P.length);if(P)P.push(sx1,sy1);else P=[sx1,sy1]}}if(P){e0=e1,e1=this._edgecode(P[0],P[1]);if(e0&&e1)this._edge(i,e0,e1,P,P.length)}else if(this.contains(i,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)){return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin]}return P}_clipSegment(x0,y0,x1,y1,c0,c1){while(true){if(c0===0&&c1===0)return[x0,y0,x1,y1];if(c0&c1)return null;let x,y,c=c0||c1;if(c&8)x=x0+(x1-x0)*(this.ymax-y0)/(y1-y0),y=this.ymax;else if(c&4)x=x0+(x1-x0)*(this.ymin-y0)/(y1-y0),y=this.ymin;else if(c&2)y=y0+(y1-y0)*(this.xmax-x0)/(x1-x0),x=this.xmax;else y=y0+(y1-y0)*(this.xmin-x0)/(x1-x0),x=this.xmin;if(c0)x0=x,y0=y,c0=this._regioncode(x0,y0);else x1=x,y1=y,c1=this._regioncode(x1,y1)}}_clipInfinite(i,points,vx0,vy0,vxn,vyn){let P=Array.from(points),p;if(p=this._project(P[0],P[1],vx0,vy0))P.unshift(p[0],p[1]);if(p=this._project(P[P.length-2],P[P.length-1],vxn,vyn))P.push(p[0],p[1]);if(P=this._clipFinite(i,P)){for(let j=0,n=P.length,c0,c1=this._edgecode(P[n-2],P[n-1]);j<n;j+=2){c0=c1,c1=this._edgecode(P[j],P[j+1]);if(c0&&c1)j=this._edge(i,c0,c1,P,j),n=P.length}}else if(this.contains(i,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)){P=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]}return P}_edge(i,e0,e1,P,j){while(e0!==e1){let x,y;switch(e0){case 5:e0=4;continue;case 4:e0=6,x=this.xmax,y=this.ymin;break;case 6:e0=2;continue;case 2:e0=10,x=this.xmax,y=this.ymax;break;case 10:e0=8;continue;case 8:e0=9,x=this.xmin,y=this.ymax;break;case 9:e0=1;continue;case 1:e0=5,x=this.xmin,y=this.ymin;break}if((P[j]!==x||P[j+1]!==y)&&this.contains(i,x,y)){P.splice(j,0,x,y),j+=2}}if(P.length>4){for(let i=0;i<P.length;i+=2){const j=(i+2)%P.length,k=(i+4)%P.length;if(P[i]===P[j]&&P[j]===P[k]||P[i+1]===P[j+1]&&P[j+1]===P[k+1])P.splice(j,2),i-=2}}return j}_project(x0,y0,vx,vy){let t=Infinity,c,x,y;if(vy<0){if(y0<=this.ymin)return null;if((c=(this.ymin-y0)/vy)<t)y=this.ymin,x=x0+(t=c)*vx}else if(vy>0){if(y0>=this.ymax)return null;if((c=(this.ymax-y0)/vy)<t)y=this.ymax,x=x0+(t=c)*vx}if(vx>0){if(x0>=this.xmax)return null;if((c=(this.xmax-x0)/vx)<t)x=this.xmax,y=y0+(t=c)*vy}else if(vx<0){if(x0<=this.xmin)return null;if((c=(this.xmin-x0)/vx)<t)x=this.xmin,y=y0+(t=c)*vy}return[x,y]}_edgecode(x,y){return(x===this.xmin?1:x===this.xmax?2:0)|(y===this.ymin?4:y===this.ymax?8:0)}_regioncode(x,y){return(x<this.xmin?1:x>this.xmax?2:0)|(y<this.ymin?4:y>this.ymax?8:0)}}const tau$3=2*Math.PI,pow=Math.pow;function pointX(p){return p[0]}function pointY(p){return p[1]}function collinear$1(d){const{triangles:triangles,coords:coords}=d;for(let i=0;i<triangles.length;i+=3){const a=2*triangles[i],b=2*triangles[i+1],c=2*triangles[i+2],cross=(coords[c]-coords[a])*(coords[b+1]-coords[a+1])-(coords[b]-coords[a])*(coords[c+1]-coords[a+1]);if(cross>1e-10)return false}return true}function jitter(x,y,r){return[x+Math.sin(x+y)*r,y+Math.cos(x-y)*r]}class Delaunay{static from(points,fx=pointX,fy=pointY,that){return new Delaunay("length"in points?flatArray(points,fx,fy,that):Float64Array.from(flatIterable(points,fx,fy,that)))}constructor(points){this._delaunator=new Delaunator(points);this.inedges=new Int32Array(points.length/2);this._hullIndex=new Int32Array(points.length/2);this.points=this._delaunator.coords;this._init()}update(){this._delaunator.update();this._init();return this}_init(){const d=this._delaunator,points=this.points;if(d.hull&&d.hull.length>2&&collinear$1(d)){this.collinear=Int32Array.from({length:points.length/2},(_,i)=>i).sort((i,j)=>points[2*i]-points[2*j]||points[2*i+1]-points[2*j+1]);const e=this.collinear[0],f=this.collinear[this.collinear.length-1],bounds=[points[2*e],points[2*e+1],points[2*f],points[2*f+1]],r=1e-8*Math.hypot(bounds[3]-bounds[1],bounds[2]-bounds[0]);for(let i=0,n=points.length/2;i<n;++i){const p=jitter(points[2*i],points[2*i+1],r);points[2*i]=p[0];points[2*i+1]=p[1]}this._delaunator=new Delaunator(points)}else{delete this.collinear}const halfedges=this.halfedges=this._delaunator.halfedges;const hull=this.hull=this._delaunator.hull;const triangles=this.triangles=this._delaunator.triangles;const inedges=this.inedges.fill(-1);const hullIndex=this._hullIndex.fill(-1);for(let e=0,n=halfedges.length;e<n;++e){const p=triangles[e%3===2?e-2:e+1];if(halfedges[e]===-1||inedges[p]===-1)inedges[p]=e}for(let i=0,n=hull.length;i<n;++i){hullIndex[hull[i]]=i}if(hull.length<=2&&hull.length>0){this.triangles=new Int32Array(3).fill(-1);this.halfedges=new Int32Array(3).fill(-1);this.triangles[0]=hull[0];this.triangles[1]=hull[1];this.triangles[2]=hull[1];inedges[hull[0]]=1;if(hull.length===2)inedges[hull[1]]=0}}voronoi(bounds){return new Voronoi(this,bounds)}*neighbors(i){const{inedges:inedges,hull:hull,_hullIndex:_hullIndex,halfedges:halfedges,triangles:triangles,collinear:collinear}=this;if(collinear){const l=collinear.indexOf(i);if(l>0)yield collinear[l-1];if(l<collinear.length-1)yield collinear[l+1];return}const e0=inedges[i];if(e0===-1)return;let e=e0,p0=-1;do{yield p0=triangles[e];e=e%3===2?e-2:e+1;if(triangles[e]!==i)return;e=halfedges[e];if(e===-1){const p=hull[(_hullIndex[i]+1)%hull.length];if(p!==p0)yield p;return}}while(e!==e0)}find(x,y,i=0){if((x=+x,x!==x)||(y=+y,y!==y))return-1;const i0=i;let c;while((c=this._step(i,x,y))>=0&&c!==i&&c!==i0)i=c;return c}_step(i,x,y){const{inedges:inedges,hull:hull,_hullIndex:_hullIndex,halfedges:halfedges,triangles:triangles,points:points}=this;if(inedges[i]===-1||!points.length)return(i+1)%(points.length>>1);let c=i;let dc=pow(x-points[i*2],2)+pow(y-points[i*2+1],2);const e0=inedges[i];let e=e0;do{let t=triangles[e];const dt=pow(x-points[t*2],2)+pow(y-points[t*2+1],2);if(dt<dc)dc=dt,c=t;e=e%3===2?e-2:e+1;if(triangles[e]!==i)break;e=halfedges[e];if(e===-1){e=hull[(_hullIndex[i]+1)%hull.length];if(e!==t){if(pow(x-points[e*2],2)+pow(y-points[e*2+1],2)<dc)return e}break}}while(e!==e0);return c}render(context){const buffer=context==null?context=new Path$1:undefined;const{points:points,halfedges:halfedges,triangles:triangles}=this;for(let i=0,n=halfedges.length;i<n;++i){const j=halfedges[i];if(j<i)continue;const ti=triangles[i]*2;const tj=triangles[j]*2;context.moveTo(points[ti],points[ti+1]);context.lineTo(points[tj],points[tj+1])}this.renderHull(context);return buffer&&buffer.value()}renderPoints(context,r=2){const buffer=context==null?context=new Path$1:undefined;const{points:points}=this;for(let i=0,n=points.length;i<n;i+=2){const x=points[i],y=points[i+1];context.moveTo(x+r,y);context.arc(x,y,r,0,tau$3)}return buffer&&buffer.value()}renderHull(context){const buffer=context==null?context=new Path$1:undefined;const{hull:hull,points:points}=this;const h=hull[0]*2,n=hull.length;context.moveTo(points[h],points[h+1]);for(let i=1;i<n;++i){const h=2*hull[i];context.lineTo(points[h],points[h+1])}context.closePath();return buffer&&buffer.value()}hullPolygon(){const polygon=new Polygon;this.renderHull(polygon);return polygon.value()}renderTriangle(i,context){const buffer=context==null?context=new Path$1:undefined;const{points:points,triangles:triangles}=this;const t0=triangles[i*=3]*2;const t1=triangles[i+1]*2;const t2=triangles[i+2]*2;context.moveTo(points[t0],points[t0+1]);context.lineTo(points[t1],points[t1+1]);context.lineTo(points[t2],points[t2+1]);context.closePath();return buffer&&buffer.value()}*trianglePolygons(){const{triangles:triangles}=this;for(let i=0,n=triangles.length/3;i<n;++i){yield this.trianglePolygon(i)}}trianglePolygon(i){const polygon=new Polygon;this.renderTriangle(i,polygon);return polygon.value()}}function flatArray(points,fx,fy,that){const n=points.length;const array=new Float64Array(n*2);for(let i=0;i<n;++i){const p=points[i];array[i*2]=fx.call(that,p,i,points);array[i*2+1]=fy.call(that,p,i,points)}return array}function*flatIterable(points,fx,fy,that){let i=0;for(const p of points){yield fx.call(that,p,i,points);yield fy.call(that,p,i,points);++i}}var EOL={},EOF={},QUOTE=34,NEWLINE=10,RETURN=13;function objectConverter(columns){return new Function("d","return {"+columns.map(function(name,i){return JSON.stringify(name)+": d["+i+'] || ""'}).join(",")+"}")}function customConverter(columns,f){var object=objectConverter(columns);return function(row,i){return f(object(row),i,columns)}}function inferColumns(rows){var columnSet=Object.create(null),columns=[];rows.forEach(function(row){for(var column in row){if(!(column in columnSet)){columns.push(columnSet[column]=column)}}});return columns}function pad(value,width){var s=value+"",length=s.length;return length<width?new Array(width-length+1).join(0)+s:s}function formatYear(year){return year<0?"-"+pad(-year,6):year>9999?"+"+pad(year,6):pad(year,4)}function formatDate(date){var hours=date.getUTCHours(),minutes=date.getUTCMinutes(),seconds=date.getUTCSeconds(),milliseconds=date.getUTCMilliseconds();return isNaN(date)?"Invalid Date":formatYear(date.getUTCFullYear())+"-"+pad(date.getUTCMonth()+1,2)+"-"+pad(date.getUTCDate(),2)+(milliseconds?"T"+pad(hours,2)+":"+pad(minutes,2)+":"+pad(seconds,2)+"."+pad(milliseconds,3)+"Z":seconds?"T"+pad(hours,2)+":"+pad(minutes,2)+":"+pad(seconds,2)+"Z":minutes||hours?"T"+pad(hours,2)+":"+pad(minutes,2)+"Z":"")}function dsvFormat(delimiter){var reFormat=new RegExp('["'+delimiter+"\n\r]"),DELIMITER=delimiter.charCodeAt(0);function parse(text,f){var convert,columns,rows=parseRows(text,function(row,i){if(convert)return convert(row,i-1);columns=row,convert=f?customConverter(row,f):objectConverter(row)});rows.columns=columns||[];return rows}function parseRows(text,f){var rows=[],N=text.length,I=0,n=0,t,eof=N<=0,eol=false;if(text.charCodeAt(N-1)===NEWLINE)--N;if(text.charCodeAt(N-1)===RETURN)--N;function token(){if(eof)return EOF;if(eol)return eol=false,EOL;var i,j=I,c;if(text.charCodeAt(j)===QUOTE){while(I++<N&&text.charCodeAt(I)!==QUOTE||text.charCodeAt(++I)===QUOTE);if((i=I)>=N)eof=true;else if((c=text.charCodeAt(I++))===NEWLINE)eol=true;else if(c===RETURN){eol=true;if(text.charCodeAt(I)===NEWLINE)++I}return text.slice(j+1,i-1).replace(/""/g,'"')}while(I<N){if((c=text.charCodeAt(i=I++))===NEWLINE)eol=true;else if(c===RETURN){eol=true;if(text.charCodeAt(I)===NEWLINE)++I}else if(c!==DELIMITER)continue;return text.slice(j,i)}return eof=true,text.slice(j,N)}while((t=token())!==EOF){var row=[];while(t!==EOL&&t!==EOF)row.push(t),t=token();if(f&&(row=f(row,n++))==null)continue;rows.push(row)}return rows}function preformatBody(rows,columns){return rows.map(function(row){return columns.map(function(column){return formatValue(row[column])}).join(delimiter)})}function format(rows,columns){if(columns==null)columns=inferColumns(rows);return[columns.map(formatValue).join(delimiter)].concat(preformatBody(rows,columns)).join("\n")}function formatBody(rows,columns){if(columns==null)columns=inferColumns(rows);return preformatBody(rows,columns).join("\n")}function formatRows(rows){return rows.map(formatRow).join("\n")}function formatRow(row){return row.map(formatValue).join(delimiter)}function formatValue(value){return value==null?"":value instanceof Date?formatDate(value):reFormat.test(value+="")?'"'+value.replace(/"/g,'""')+'"':value}return{parse:parse,parseRows:parseRows,format:format,formatBody:formatBody,formatRows:formatRows,formatRow:formatRow,formatValue:formatValue}}var csv=dsvFormat(",");var csvParse=csv.parse;var csvParseRows=csv.parseRows;var csvFormat=csv.format;var csvFormatBody=csv.formatBody;var csvFormatRows=csv.formatRows;var csvFormatRow=csv.formatRow;var csvFormatValue=csv.formatValue;var tsv=dsvFormat("\t");var tsvParse=tsv.parse;var tsvParseRows=tsv.parseRows;var tsvFormat=tsv.format;var tsvFormatBody=tsv.formatBody;var tsvFormatRows=tsv.formatRows;var tsvFormatRow=tsv.formatRow;var tsvFormatValue=tsv.formatValue;function autoType(object){for(var key in object){var value=object[key].trim(),number,m;if(!value)value=null;else if(value==="true")value=true;else if(value==="false")value=false;else if(value==="NaN")value=NaN;else if(!isNaN(number=+value))value=number;else if(m=value.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/)){if(fixtz&&!!m[4]&&!m[7])value=value.replace(/-/g,"/").replace(/T/," ");value=new Date(value)}else continue;object[key]=value}return object}const fixtz=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();function responseBlob(response){if(!response.ok)throw new Error(response.status+" "+response.statusText);return response.blob()}function blob(input,init){return fetch(input,init).then(responseBlob)}function responseArrayBuffer(response){if(!response.ok)throw new Error(response.status+" "+response.statusText);return response.arrayBuffer()}function buffer(input,init){return fetch(input,init).then(responseArrayBuffer)}function responseText(response){if(!response.ok)throw new Error(response.status+" "+response.statusText);return response.text()}function text(input,init){return fetch(input,init).then(responseText)}function dsvParse(parse){return function(input,init,row){if(arguments.length===2&&typeof init==="function")row=init,init=undefined;return text(input,init).then(function(response){return parse(response,row)})}}function dsv(delimiter,input,init,row){if(arguments.length===3&&typeof init==="function")row=init,init=undefined;var format=dsvFormat(delimiter);return text(input,init).then(function(response){return format.parse(response,row)})}var csv$1=dsvParse(csvParse);var tsv$1=dsvParse(tsvParse);function image(input,init){return new Promise(function(resolve,reject){var image=new Image;for(var key in init)image[key]=init[key];image.onerror=reject;image.onload=function(){resolve(image)};image.src=input})}function responseJson(response){if(!response.ok)throw new Error(response.status+" "+response.statusText);if(response.status===204||response.status===205)return;return response.json()}function json(input,init){return fetch(input,init).then(responseJson)}function parser(type){return(input,init)=>text(input,init).then(text=>(new DOMParser).parseFromString(text,type))}var xml=parser("application/xml");var html=parser("text/html");var svg=parser("image/svg+xml");function center$1(x,y){var nodes,strength=1;if(x==null)x=0;if(y==null)y=0;function force(){var i,n=nodes.length,node,sx=0,sy=0;for(i=0;i<n;++i){node=nodes[i],sx+=node.x,sy+=node.y}for(sx=(sx/n-x)*strength,sy=(sy/n-y)*strength,i=0;i<n;++i){node=nodes[i],node.x-=sx,node.y-=sy}}force.initialize=function(_){nodes=_};force.x=function(_){return arguments.length?(x=+_,force):x};force.y=function(_){return arguments.length?(y=+_,force):y};force.strength=function(_){return arguments.length?(strength=+_,force):strength};return force}function tree_add(d){const x=+this._x.call(null,d),y=+this._y.call(null,d);return add(this.cover(x,y),x,y,d)}function add(tree,x,y,d){if(isNaN(x)||isNaN(y))return tree;var parent,node=tree._root,leaf={data:d},x0=tree._x0,y0=tree._y0,x1=tree._x1,y1=tree._y1,xm,ym,xp,yp,right,bottom,i,j;if(!node)return tree._root=leaf,tree;while(node.length){if(right=x>=(xm=(x0+x1)/2))x0=xm;else x1=xm;if(bottom=y>=(ym=(y0+y1)/2))y0=ym;else y1=ym;if(parent=node,!(node=node[i=bottom<<1|right]))return parent[i]=leaf,tree}xp=+tree._x.call(null,node.data);yp=+tree._y.call(null,node.data);if(x===xp&&y===yp)return leaf.next=node,parent?parent[i]=leaf:tree._root=leaf,tree;do{parent=parent?parent[i]=new Array(4):tree._root=new Array(4);if(right=x>=(xm=(x0+x1)/2))x0=xm;else x1=xm;if(bottom=y>=(ym=(y0+y1)/2))y0=ym;else y1=ym}while((i=bottom<<1|right)===(j=(yp>=ym)<<1|xp>=xm));return parent[j]=node,parent[i]=leaf,tree}function addAll(data){var d,i,n=data.length,x,y,xz=new Array(n),yz=new Array(n),x0=Infinity,y0=Infinity,x1=-Infinity,y1=-Infinity;for(i=0;i<n;++i){if(isNaN(x=+this._x.call(null,d=data[i]))||isNaN(y=+this._y.call(null,d)))continue;xz[i]=x;yz[i]=y;if(x<x0)x0=x;if(x>x1)x1=x;if(y<y0)y0=y;if(y>y1)y1=y}if(x0>x1||y0>y1)return this;this.cover(x0,y0).cover(x1,y1);for(i=0;i<n;++i){add(this,xz[i],yz[i],data[i])}return this}function tree_cover(x,y){if(isNaN(x=+x)||isNaN(y=+y))return this;var x0=this._x0,y0=this._y0,x1=this._x1,y1=this._y1;if(isNaN(x0)){x1=(x0=Math.floor(x))+1;y1=(y0=Math.floor(y))+1}else{var z=x1-x0||1,node=this._root,parent,i;while(x0>x||x>=x1||y0>y||y>=y1){i=(y<y0)<<1|x<x0;parent=new Array(4),parent[i]=node,node=parent,z*=2;switch(i){case 0:x1=x0+z,y1=y0+z;break;case 1:x0=x1-z,y1=y0+z;break;case 2:x1=x0+z,y0=y1-z;break;case 3:x0=x1-z,y0=y1-z;break}}if(this._root&&this._root.length)this._root=node}this._x0=x0;this._y0=y0;this._x1=x1;this._y1=y1;return this}function tree_data(){var data=[];this.visit(function(node){if(!node.length)do{data.push(node.data)}while(node=node.next)});return data}function tree_extent(_){return arguments.length?this.cover(+_[0][0],+_[0][1]).cover(+_[1][0],+_[1][1]):isNaN(this._x0)?undefined:[[this._x0,this._y0],[this._x1,this._y1]]}function Quad(node,x0,y0,x1,y1){this.node=node;this.x0=x0;this.y0=y0;this.x1=x1;this.y1=y1}function tree_find(x,y,radius){var data,x0=this._x0,y0=this._y0,x1,y1,x2,y2,x3=this._x1,y3=this._y1,quads=[],node=this._root,q,i;if(node)quads.push(new Quad(node,x0,y0,x3,y3));if(radius==null)radius=Infinity;else{x0=x-radius,y0=y-radius;x3=x+radius,y3=y+radius;radius*=radius}while(q=quads.pop()){if(!(node=q.node)||(x1=q.x0)>x3||(y1=q.y0)>y3||(x2=q.x1)<x0||(y2=q.y1)<y0)continue;if(node.length){var xm=(x1+x2)/2,ym=(y1+y2)/2;quads.push(new Quad(node[3],xm,ym,x2,y2),new Quad(node[2],x1,ym,xm,y2),new Quad(node[1],xm,y1,x2,ym),new Quad(node[0],x1,y1,xm,ym));if(i=(y>=ym)<<1|x>=xm){q=quads[quads.length-1];quads[quads.length-1]=quads[quads.length-1-i];quads[quads.length-1-i]=q}}else{var dx=x-+this._x.call(null,node.data),dy=y-+this._y.call(null,node.data),d2=dx*dx+dy*dy;if(d2<radius){var d=Math.sqrt(radius=d2);x0=x-d,y0=y-d;x3=x+d,y3=y+d;data=node.data}}}return data}function tree_remove(d){if(isNaN(x=+this._x.call(null,d))||isNaN(y=+this._y.call(null,d)))return this;var parent,node=this._root,retainer,previous,next,x0=this._x0,y0=this._y0,x1=this._x1,y1=this._y1,x,y,xm,ym,right,bottom,i,j;if(!node)return this;if(node.length)while(true){if(right=x>=(xm=(x0+x1)/2))x0=xm;else x1=xm;if(bottom=y>=(ym=(y0+y1)/2))y0=ym;else y1=ym;if(!(parent=node,node=node[i=bottom<<1|right]))return this;if(!node.length)break;if(parent[i+1&3]||parent[i+2&3]||parent[i+3&3])retainer=parent,j=i}while(node.data!==d)if(!(previous=node,node=node.next))return this;if(next=node.next)delete node.next;if(previous)return next?previous.next=next:delete previous.next,this;if(!parent)return this._root=next,this;next?parent[i]=next:delete parent[i];if((node=parent[0]||parent[1]||parent[2]||parent[3])&&node===(parent[3]||parent[2]||parent[1]||parent[0])&&!node.length){if(retainer)retainer[j]=node;else this._root=node}return this}function removeAll(data){for(var i=0,n=data.length;i<n;++i)this.remove(data[i]);return this}function tree_root(){return this._root}function tree_size(){var size=0;this.visit(function(node){if(!node.length)do{++size}while(node=node.next)});return size}function tree_visit(callback){var quads=[],q,node=this._root,child,x0,y0,x1,y1;if(node)quads.push(new Quad(node,this._x0,this._y0,this._x1,this._y1));while(q=quads.pop()){if(!callback(node=q.node,x0=q.x0,y0=q.y0,x1=q.x1,y1=q.y1)&&node.length){var xm=(x0+x1)/2,ym=(y0+y1)/2;if(child=node[3])quads.push(new Quad(child,xm,ym,x1,y1));if(child=node[2])quads.push(new Quad(child,x0,ym,xm,y1));if(child=node[1])quads.push(new Quad(child,xm,y0,x1,ym));if(child=node[0])quads.push(new Quad(child,x0,y0,xm,ym))}}return this}function tree_visitAfter(callback){var quads=[],next=[],q;if(this._root)quads.push(new Quad(this._root,this._x0,this._y0,this._x1,this._y1));while(q=quads.pop()){var node=q.node;if(node.length){var child,x0=q.x0,y0=q.y0,x1=q.x1,y1=q.y1,xm=(x0+x1)/2,ym=(y0+y1)/2;if(child=node[0])quads.push(new Quad(child,x0,y0,xm,ym));if(child=node[1])quads.push(new Quad(child,xm,y0,x1,ym));if(child=node[2])quads.push(new Quad(child,x0,ym,xm,y1));if(child=node[3])quads.push(new Quad(child,xm,ym,x1,y1))}next.push(q)}while(q=next.pop()){callback(q.node,q.x0,q.y0,q.x1,q.y1)}return this}function defaultX$1(d){return d[0]}function tree_x(_){return arguments.length?(this._x=_,this):this._x}function defaultY$1(d){return d[1]}function tree_y(_){return arguments.length?(this._y=_,this):this._y}function quadtree(nodes,x,y){var tree=new Quadtree(x==null?defaultX$1:x,y==null?defaultY$1:y,NaN,NaN,NaN,NaN);return nodes==null?tree:tree.addAll(nodes)}function Quadtree(x,y,x0,y0,x1,y1){this._x=x;this._y=y;this._x0=x0;this._y0=y0;this._x1=x1;this._y1=y1;this._root=undefined}function leaf_copy(leaf){var copy={data:leaf.data},next=copy;while(leaf=leaf.next)next=next.next={data:leaf.data};return copy}var treeProto=quadtree.prototype=Quadtree.prototype;treeProto.copy=function(){var copy=new Quadtree(this._x,this._y,this._x0,this._y0,this._x1,this._y1),node=this._root,nodes,child;if(!node)return copy;if(!node.length)return copy._root=leaf_copy(node),copy;nodes=[{source:node,target:copy._root=new Array(4)}];while(node=nodes.pop()){for(var i=0;i<4;++i){if(child=node.source[i]){if(child.length)nodes.push({source:child,target:node.target[i]=new Array(4)});else node.target[i]=leaf_copy(child)}}}return copy};treeProto.add=tree_add;treeProto.addAll=addAll;treeProto.cover=tree_cover;treeProto.data=tree_data;treeProto.extent=tree_extent;treeProto.find=tree_find;treeProto.remove=tree_remove;treeProto.removeAll=removeAll;treeProto.root=tree_root;treeProto.size=tree_size;treeProto.visit=tree_visit;treeProto.visitAfter=tree_visitAfter;treeProto.x=tree_x;treeProto.y=tree_y;function constant$7(x){return function(){return x}}function jiggle(random){return(random()-.5)*1e-6}function x(d){return d.x+d.vx}function y(d){return d.y+d.vy}function collide(radius){var nodes,radii,random,strength=1,iterations=1;if(typeof radius!=="function")radius=constant$7(radius==null?1:+radius);function force(){var i,n=nodes.length,tree,node,xi,yi,ri,ri2;for(var k=0;k<iterations;++k){tree=quadtree(nodes,x,y).visitAfter(prepare);for(i=0;i<n;++i){node=nodes[i];ri=radii[node.index],ri2=ri*ri;xi=node.x+node.vx;yi=node.y+node.vy;tree.visit(apply)}}function apply(quad,x0,y0,x1,y1){var data=quad.data,rj=quad.r,r=ri+rj;if(data){if(data.index>node.index){var x=xi-data.x-data.vx,y=yi-data.y-data.vy,l=x*x+y*y;if(l<r*r){if(x===0)x=jiggle(random),l+=x*x;if(y===0)y=jiggle(random),l+=y*y;l=(r-(l=Math.sqrt(l)))/l*strength;node.vx+=(x*=l)*(r=(rj*=rj)/(ri2+rj));node.vy+=(y*=l)*r;data.vx-=x*(r=1-r);data.vy-=y*r}}return}return x0>xi+r||x1<xi-r||y0>yi+r||y1<yi-r}}function prepare(quad){if(quad.data)return quad.r=radii[quad.data.index];for(var i=quad.r=0;i<4;++i){if(quad[i]&&quad[i].r>quad.r){quad.r=quad[i].r}}}function initialize(){if(!nodes)return;var i,n=nodes.length,node;radii=new Array(n);for(i=0;i<n;++i)node=nodes[i],radii[node.index]=+radius(node,i,nodes)}force.initialize=function(_nodes,_random){nodes=_nodes;random=_random;initialize()};force.iterations=function(_){return arguments.length?(iterations=+_,force):iterations};force.strength=function(_){return arguments.length?(strength=+_,force):strength};force.radius=function(_){return arguments.length?(radius=typeof _==="function"?_:constant$7(+_),initialize(),force):radius};return force}function index$1(d){return d.index}function find$1(nodeById,nodeId){var node=nodeById.get(nodeId);if(!node)throw new Error("node not found: "+nodeId);return node}function link(links){var id=index$1,strength=defaultStrength,strengths,distance=constant$7(30),distances,nodes,count,bias,random,iterations=1;if(links==null)links=[];function defaultStrength(link){return 1/Math.min(count[link.source.index],count[link.target.index])}function force(alpha){for(var k=0,n=links.length;k<iterations;++k){for(var i=0,link,source,target,x,y,l,b;i<n;++i){link=links[i],source=link.source,target=link.target;x=target.x+target.vx-source.x-source.vx||jiggle(random);y=target.y+target.vy-source.y-source.vy||jiggle(random);l=Math.sqrt(x*x+y*y);l=(l-distances[i])/l*alpha*strengths[i];x*=l,y*=l;target.vx-=x*(b=bias[i]);target.vy-=y*b;source.vx+=x*(b=1-b);source.vy+=y*b}}}function initialize(){if(!nodes)return;var i,n=nodes.length,m=links.length,nodeById=new Map(nodes.map((d,i)=>[id(d,i,nodes),d])),link;for(i=0,count=new Array(n);i<m;++i){link=links[i],link.index=i;if(typeof link.source!=="object")link.source=find$1(nodeById,link.source);if(typeof link.target!=="object")link.target=find$1(nodeById,link.target);count[link.source.index]=(count[link.source.index]||0)+1;count[link.target.index]=(count[link.target.index]||0)+1}for(i=0,bias=new Array(m);i<m;++i){link=links[i],bias[i]=count[link.source.index]/(count[link.source.index]+count[link.target.index])}strengths=new Array(m),initializeStrength();distances=new Array(m),initializeDistance()}function initializeStrength(){if(!nodes)return;for(var i=0,n=links.length;i<n;++i){strengths[i]=+strength(links[i],i,links)}}function initializeDistance(){if(!nodes)return;for(var i=0,n=links.length;i<n;++i){distances[i]=+distance(links[i],i,links)}}force.initialize=function(_nodes,_random){nodes=_nodes;random=_random;initialize()};force.links=function(_){return arguments.length?(links=_,initialize(),force):links};force.id=function(_){return arguments.length?(id=_,force):id};force.iterations=function(_){return arguments.length?(iterations=+_,force):iterations};force.strength=function(_){return arguments.length?(strength=typeof _==="function"?_:constant$7(+_),initializeStrength(),force):strength};force.distance=function(_){return arguments.length?(distance=typeof _==="function"?_:constant$7(+_),initializeDistance(),force):distance};return force}const a=1664525;const c=1013904223;const m=4294967296;function lcg(){let s=1;return()=>(s=(a*s+c)%m)/m}function x$1(d){return d.x}function y$1(d){return d.y}var initialRadius=10,initialAngle=Math.PI*(3-Math.sqrt(5));function simulation(nodes){var simulation,alpha=1,alphaMin=.001,alphaDecay=1-Math.pow(alphaMin,1/300),alphaTarget=0,velocityDecay=.6,forces=new Map,stepper=timer(step),event=dispatch("tick","end"),random=lcg();if(nodes==null)nodes=[];function step(){tick();event.call("tick",simulation);if(alpha<alphaMin){stepper.stop();event.call("end",simulation)}}function tick(iterations){var i,n=nodes.length,node;if(iterations===undefined)iterations=1;for(var k=0;k<iterations;++k){alpha+=(alphaTarget-alpha)*alphaDecay;forces.forEach(function(force){force(alpha)});for(i=0;i<n;++i){node=nodes[i];if(node.fx==null)node.x+=node.vx*=velocityDecay;else node.x=node.fx,node.vx=0;if(node.fy==null)node.y+=node.vy*=velocityDecay;else node.y=node.fy,node.vy=0}}return simulation}function initializeNodes(){for(var i=0,n=nodes.length,node;i<n;++i){node=nodes[i],node.index=i;if(node.fx!=null)node.x=node.fx;if(node.fy!=null)node.y=node.fy;if(isNaN(node.x)||isNaN(node.y)){var radius=initialRadius*Math.sqrt(.5+i),angle=i*initialAngle;node.x=radius*Math.cos(angle);node.y=radius*Math.sin(angle)}if(isNaN(node.vx)||isNaN(node.vy)){node.vx=node.vy=0}}}function initializeForce(force){if(force.initialize)force.initialize(nodes,random);return force}initializeNodes();return simulation={tick:tick,restart:function(){return stepper.restart(step),simulation},stop:function(){return stepper.stop(),simulation},nodes:function(_){return arguments.length?(nodes=_,initializeNodes(),forces.forEach(initializeForce),simulation):nodes},alpha:function(_){return arguments.length?(alpha=+_,simulation):alpha},alphaMin:function(_){return arguments.length?(alphaMin=+_,simulation):alphaMin},alphaDecay:function(_){return arguments.length?(alphaDecay=+_,simulation):+alphaDecay},alphaTarget:function(_){return arguments.length?(alphaTarget=+_,simulation):alphaTarget},velocityDecay:function(_){return arguments.length?(velocityDecay=1-_,simulation):1-velocityDecay},randomSource:function(_){return arguments.length?(random=_,forces.forEach(initializeForce),simulation):random},force:function(name,_){return arguments.length>1?(_==null?forces.delete(name):forces.set(name,initializeForce(_)),simulation):forces.get(name)},find:function(x,y,radius){var i=0,n=nodes.length,dx,dy,d2,node,closest;if(radius==null)radius=Infinity;else radius*=radius;for(i=0;i<n;++i){node=nodes[i];dx=x-node.x;dy=y-node.y;d2=dx*dx+dy*dy;if(d2<radius)closest=node,radius=d2}return closest},on:function(name,_){return arguments.length>1?(event.on(name,_),simulation):event.on(name)}}}function manyBody(){var nodes,node,random,alpha,strength=constant$7(-30),strengths,distanceMin2=1,distanceMax2=Infinity,theta2=.81;function force(_){var i,n=nodes.length,tree=quadtree(nodes,x$1,y$1).visitAfter(accumulate);for(alpha=_,i=0;i<n;++i)node=nodes[i],tree.visit(apply)}function initialize(){if(!nodes)return;var i,n=nodes.length,node;strengths=new Array(n);for(i=0;i<n;++i)node=nodes[i],strengths[node.index]=+strength(node,i,nodes)}function accumulate(quad){var strength=0,q,c,weight=0,x,y,i;if(quad.length){for(x=y=i=0;i<4;++i){if((q=quad[i])&&(c=Math.abs(q.value))){strength+=q.value,weight+=c,x+=c*q.x,y+=c*q.y}}quad.x=x/weight;quad.y=y/weight}else{q=quad;q.x=q.data.x;q.y=q.data.y;do{strength+=strengths[q.data.index]}while(q=q.next)}quad.value=strength}function apply(quad,x1,_,x2){if(!quad.value)return true;var x=quad.x-node.x,y=quad.y-node.y,w=x2-x1,l=x*x+y*y;if(w*w/theta2<l){if(l<distanceMax2){if(x===0)x=jiggle(random),l+=x*x;if(y===0)y=jiggle(random),l+=y*y;if(l<distanceMin2)l=Math.sqrt(distanceMin2*l);node.vx+=x*quad.value*alpha/l;node.vy+=y*quad.value*alpha/l}return true}else if(quad.length||l>=distanceMax2)return;if(quad.data!==node||quad.next){if(x===0)x=jiggle(random),l+=x*x;if(y===0)y=jiggle(random),l+=y*y;if(l<distanceMin2)l=Math.sqrt(distanceMin2*l)}do{if(quad.data!==node){w=strengths[quad.data.index]*alpha/l;node.vx+=x*w;node.vy+=y*w}}while(quad=quad.next)}force.initialize=function(_nodes,_random){nodes=_nodes;random=_random;initialize()};force.strength=function(_){return arguments.length?(strength=typeof _==="function"?_:constant$7(+_),initialize(),force):strength};force.distanceMin=function(_){return arguments.length?(distanceMin2=_*_,force):Math.sqrt(distanceMin2)};force.distanceMax=function(_){return arguments.length?(distanceMax2=_*_,force):Math.sqrt(distanceMax2)};force.theta=function(_){return arguments.length?(theta2=_*_,force):Math.sqrt(theta2)};return force}function radial(radius,x,y){var nodes,strength=constant$7(.1),strengths,radiuses;if(typeof radius!=="function")radius=constant$7(+radius);if(x==null)x=0;if(y==null)y=0;function force(alpha){for(var i=0,n=nodes.length;i<n;++i){var node=nodes[i],dx=node.x-x||1e-6,dy=node.y-y||1e-6,r=Math.sqrt(dx*dx+dy*dy),k=(radiuses[i]-r)*strengths[i]*alpha/r;node.vx+=dx*k;node.vy+=dy*k}}function initialize(){if(!nodes)return;var i,n=nodes.length;strengths=new Array(n);radiuses=new Array(n);for(i=0;i<n;++i){radiuses[i]=+radius(nodes[i],i,nodes);strengths[i]=isNaN(radiuses[i])?0:+strength(nodes[i],i,nodes)}}force.initialize=function(_){nodes=_,initialize()};force.strength=function(_){return arguments.length?(strength=typeof _==="function"?_:constant$7(+_),initialize(),force):strength};force.radius=function(_){return arguments.length?(radius=typeof _==="function"?_:constant$7(+_),initialize(),force):radius};force.x=function(_){return arguments.length?(x=+_,force):x};force.y=function(_){return arguments.length?(y=+_,force):y};return force}function x$2(x){var strength=constant$7(.1),nodes,strengths,xz;if(typeof x!=="function")x=constant$7(x==null?0:+x);function force(alpha){for(var i=0,n=nodes.length,node;i<n;++i){node=nodes[i],node.vx+=(xz[i]-node.x)*strengths[i]*alpha}}function initialize(){if(!nodes)return;var i,n=nodes.length;strengths=new Array(n);xz=new Array(n);for(i=0;i<n;++i){strengths[i]=isNaN(xz[i]=+x(nodes[i],i,nodes))?0:+strength(nodes[i],i,nodes)}}force.initialize=function(_){nodes=_;initialize()};force.strength=function(_){return arguments.length?(strength=typeof _==="function"?_:constant$7(+_),initialize(),force):strength};force.x=function(_){return arguments.length?(x=typeof _==="function"?_:constant$7(+_),initialize(),force):x};return force}function y$2(y){var strength=constant$7(.1),nodes,strengths,yz;if(typeof y!=="function")y=constant$7(y==null?0:+y);function force(alpha){for(var i=0,n=nodes.length,node;i<n;++i){node=nodes[i],node.vy+=(yz[i]-node.y)*strengths[i]*alpha}}function initialize(){if(!nodes)return;var i,n=nodes.length;strengths=new Array(n);yz=new Array(n);for(i=0;i<n;++i){strengths[i]=isNaN(yz[i]=+y(nodes[i],i,nodes))?0:+strength(nodes[i],i,nodes)}}force.initialize=function(_){nodes=_;initialize()};force.strength=function(_){return arguments.length?(strength=typeof _==="function"?_:constant$7(+_),initialize(),force):strength};force.y=function(_){return arguments.length?(y=typeof _==="function"?_:constant$7(+_),initialize(),force):y};return force}function formatDecimal(x){return Math.abs(x=Math.round(x))>=1e21?x.toLocaleString("en").replace(/,/g,""):x.toString(10)}function formatDecimalParts(x,p){if((i=(x=p?x.toExponential(p-1):x.toExponential()).indexOf("e"))<0)return null;var i,coefficient=x.slice(0,i);return[coefficient.length>1?coefficient[0]+coefficient.slice(2):coefficient,+x.slice(i+1)]}function exponent$1(x){return x=formatDecimalParts(Math.abs(x)),x?x[1]:NaN}function formatGroup(grouping,thousands){return function(value,width){var i=value.length,t=[],j=0,g=grouping[0],length=0;while(i>0&&g>0){if(length+g+1>width)g=Math.max(1,width-length);t.push(value.substring(i-=g,i+g));if((length+=g+1)>width)break;g=grouping[j=(j+1)%grouping.length]}return t.reverse().join(thousands)}}function formatNumerals(numerals){return function(value){return value.replace(/[0-9]/g,function(i){return numerals[+i]})}}var re=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function formatSpecifier(specifier){if(!(match=re.exec(specifier)))throw new Error("invalid format: "+specifier);var match;return new FormatSpecifier({fill:match[1],align:match[2],sign:match[3],symbol:match[4],zero:match[5],width:match[6],comma:match[7],precision:match[8]&&match[8].slice(1),trim:match[9],type:match[10]})}formatSpecifier.prototype=FormatSpecifier.prototype;function FormatSpecifier(specifier){this.fill=specifier.fill===undefined?" ":specifier.fill+"";this.align=specifier.align===undefined?">":specifier.align+"";this.sign=specifier.sign===undefined?"-":specifier.sign+"";this.symbol=specifier.symbol===undefined?"":specifier.symbol+"";this.zero=!!specifier.zero;this.width=specifier.width===undefined?undefined:+specifier.width;this.comma=!!specifier.comma;this.precision=specifier.precision===undefined?undefined:+specifier.precision;this.trim=!!specifier.trim;this.type=specifier.type===undefined?"":specifier.type+""}FormatSpecifier.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===undefined?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===undefined?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function formatTrim(s){out:for(var n=s.length,i=1,i0=-1,i1;i<n;++i){switch(s[i]){case".":i0=i1=i;break;case"0":if(i0===0)i0=i;i1=i;break;default:if(!+s[i])break out;if(i0>0)i0=0;break}}return i0>0?s.slice(0,i0)+s.slice(i1+1):s}var prefixExponent;function formatPrefixAuto(x,p){var d=formatDecimalParts(x,p);if(!d)return x+"";var coefficient=d[0],exponent=d[1],i=exponent-(prefixExponent=Math.max(-8,Math.min(8,Math.floor(exponent/3)))*3)+1,n=coefficient.length;return i===n?coefficient:i>n?coefficient+new Array(i-n+1).join("0"):i>0?coefficient.slice(0,i)+"."+coefficient.slice(i):"0."+new Array(1-i).join("0")+formatDecimalParts(x,Math.max(0,p+i-1))[0]}function formatRounded(x,p){var d=formatDecimalParts(x,p);if(!d)return x+"";var coefficient=d[0],exponent=d[1];return exponent<0?"0."+new Array(-exponent).join("0")+coefficient:coefficient.length>exponent+1?coefficient.slice(0,exponent+1)+"."+coefficient.slice(exponent+1):coefficient+new Array(exponent-coefficient.length+2).join("0")}var formatTypes={"%":(x,p)=>(x*100).toFixed(p),b:x=>Math.round(x).toString(2),c:x=>x+"",d:formatDecimal,e:(x,p)=>x.toExponential(p),f:(x,p)=>x.toFixed(p),g:(x,p)=>x.toPrecision(p),o:x=>Math.round(x).toString(8),p:(x,p)=>formatRounded(x*100,p),r:formatRounded,s:formatPrefixAuto,X:x=>Math.round(x).toString(16).toUpperCase(),x:x=>Math.round(x).toString(16)};function identity$3(x){return x}var map$1=Array.prototype.map,prefixes=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function formatLocale(locale){var group=locale.grouping===undefined||locale.thousands===undefined?identity$3:formatGroup(map$1.call(locale.grouping,Number),locale.thousands+""),currencyPrefix=locale.currency===undefined?"":locale.currency[0]+"",currencySuffix=locale.currency===undefined?"":locale.currency[1]+"",decimal=locale.decimal===undefined?".":locale.decimal+"",numerals=locale.numerals===undefined?identity$3:formatNumerals(map$1.call(locale.numerals,String)),percent=locale.percent===undefined?"%":locale.percent+"",minus=locale.minus===undefined?"−":locale.minus+"",nan=locale.nan===undefined?"NaN":locale.nan+"";function newFormat(specifier){specifier=formatSpecifier(specifier);var fill=specifier.fill,align=specifier.align,sign=specifier.sign,symbol=specifier.symbol,zero=specifier.zero,width=specifier.width,comma=specifier.comma,precision=specifier.precision,trim=specifier.trim,type=specifier.type;if(type==="n")comma=true,type="g";else if(!formatTypes[type])precision===undefined&&(precision=12),trim=true,type="g";if(zero||fill==="0"&&align==="=")zero=true,fill="0",align="=";var prefix=symbol==="$"?currencyPrefix:symbol==="#"&&/[boxX]/.test(type)?"0"+type.toLowerCase():"",suffix=symbol==="$"?currencySuffix:/[%p]/.test(type)?percent:"";var formatType=formatTypes[type],maybeSuffix=/[defgprs%]/.test(type);precision=precision===undefined?6:/[gprs]/.test(type)?Math.max(1,Math.min(21,precision)):Math.max(0,Math.min(20,precision));function format(value){var valuePrefix=prefix,valueSuffix=suffix,i,n,c;if(type==="c"){valueSuffix=formatType(value)+valueSuffix;value=""}else{value=+value;var valueNegative=value<0||1/value<0;value=isNaN(value)?nan:formatType(Math.abs(value),precision);if(trim)value=formatTrim(value);if(valueNegative&&+value===0&&sign!=="+")valueNegative=false;valuePrefix=(valueNegative?sign==="("?sign:minus:sign==="-"||sign==="("?"":sign)+valuePrefix;valueSuffix=(type==="s"?prefixes[8+prefixExponent/3]:"")+valueSuffix+(valueNegative&&sign==="("?")":"");if(maybeSuffix){i=-1,n=value.length;while(++i<n){if(c=value.charCodeAt(i),48>c||c>57){valueSuffix=(c===46?decimal+value.slice(i+1):value.slice(i))+valueSuffix;value=value.slice(0,i);break}}}}if(comma&&!zero)value=group(value,Infinity);var length=valuePrefix.length+value.length+valueSuffix.length,padding=length<width?new Array(width-length+1).join(fill):"";if(comma&&zero)value=group(padding+value,padding.length?width-valueSuffix.length:Infinity),padding="";switch(align){case"<":value=valuePrefix+value+valueSuffix+padding;break;case"=":value=valuePrefix+padding+value+valueSuffix;break;case"^":value=padding.slice(0,length=padding.length>>1)+valuePrefix+value+valueSuffix+padding.slice(length);break;default:value=padding+valuePrefix+value+valueSuffix;break}return numerals(value)}format.toString=function(){return specifier+""};return format}function formatPrefix(specifier,value){var f=newFormat((specifier=formatSpecifier(specifier),specifier.type="f",specifier)),e=Math.max(-8,Math.min(8,Math.floor(exponent$1(value)/3)))*3,k=Math.pow(10,-e),prefix=prefixes[8+e/3];return function(value){return f(k*value)+prefix}}return{format:newFormat,formatPrefix:formatPrefix}}var locale;defaultLocale({thousands:",",grouping:[3],currency:["$",""]});function defaultLocale(definition){locale=formatLocale(definition);exports.format=locale.format;exports.formatPrefix=locale.formatPrefix;return locale}function precisionFixed(step){return Math.max(0,-exponent$1(Math.abs(step)))}function precisionPrefix(step,value){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(exponent$1(value)/3)))*3-exponent$1(Math.abs(step)))}function precisionRound(step,max){step=Math.abs(step),max=Math.abs(max)-step;return Math.max(0,exponent$1(max)-exponent$1(step))+1}var epsilon$4=1e-6;var epsilon2$1=1e-12;var pi$3=Math.PI;var halfPi$2=pi$3/2;var quarterPi=pi$3/4;var tau$4=pi$3*2;var degrees$2=180/pi$3;var radians$1=pi$3/180;var abs$2=Math.abs;var atan=Math.atan;var atan2=Math.atan2;var cos$1=Math.cos;var ceil=Math.ceil;var exp=Math.exp;var hypot=Math.hypot;var log=Math.log;var pow$1=Math.pow;var sin$1=Math.sin;var sign=Math.sign||function(x){return x>0?1:x<0?-1:0};var sqrt=Math.sqrt;var tan=Math.tan;function acos(x){return x>1?0:x<-1?pi$3:Math.acos(x)}function asin(x){return x>1?halfPi$2:x<-1?-halfPi$2:Math.asin(x)}function haversin(x){return(x=sin$1(x/2))*x}function noop$2(){}function streamGeometry(geometry,stream){if(geometry&&streamGeometryType.hasOwnProperty(geometry.type)){streamGeometryType[geometry.type](geometry,stream)}}var streamObjectType={Feature:function(object,stream){streamGeometry(object.geometry,stream)},FeatureCollection:function(object,stream){var features=object.features,i=-1,n=features.length;while(++i<n)streamGeometry(features[i].geometry,stream)}};var streamGeometryType={Sphere:function(object,stream){stream.sphere()},Point:function(object,stream){object=object.coordinates;stream.point(object[0],object[1],object[2])},MultiPoint:function(object,stream){var coordinates=object.coordinates,i=-1,n=coordinates.length;while(++i<n)object=coordinates[i],stream.point(object[0],object[1],object[2])},LineString:function(object,stream){streamLine(object.coordinates,stream,0)},MultiLineString:function(object,stream){var coordinates=object.coordinates,i=-1,n=coordinates.length;while(++i<n)streamLine(coordinates[i],stream,0)},Polygon:function(object,stream){streamPolygon(object.coordinates,stream)},MultiPolygon:function(object,stream){var coordinates=object.coordinates,i=-1,n=coordinates.length;while(++i<n)streamPolygon(coordinates[i],stream)},GeometryCollection:function(object,stream){var geometries=object.geometries,i=-1,n=geometries.length;while(++i<n)streamGeometry(geometries[i],stream)}};function streamLine(coordinates,stream,closed){var i=-1,n=coordinates.length-closed,coordinate;stream.lineStart();while(++i<n)coordinate=coordinates[i],stream.point(coordinate[0],coordinate[1],coordinate[2]);stream.lineEnd()}function streamPolygon(coordinates,stream){var i=-1,n=coordinates.length;stream.polygonStart();while(++i<n)streamLine(coordinates[i],stream,1);stream.polygonEnd()}function geoStream(object,stream){if(object&&streamObjectType.hasOwnProperty(object.type)){streamObjectType[object.type](object,stream)}else{streamGeometry(object,stream)}}var areaRingSum=new Adder;var areaSum=new Adder,lambda00,phi00,lambda0,cosPhi0,sinPhi0;var areaStream={point:noop$2,lineStart:noop$2,lineEnd:noop$2,polygonStart:function(){areaRingSum=new Adder;areaStream.lineStart=areaRingStart;areaStream.lineEnd=areaRingEnd},polygonEnd:function(){var areaRing=+areaRingSum;areaSum.add(areaRing<0?tau$4+areaRing:areaRing);this.lineStart=this.lineEnd=this.point=noop$2},sphere:function(){areaSum.add(tau$4)}};function areaRingStart(){areaStream.point=areaPointFirst}function areaRingEnd(){areaPoint(lambda00,phi00)}function areaPointFirst(lambda,phi){areaStream.point=areaPoint;lambda00=lambda,phi00=phi;lambda*=radians$1,phi*=radians$1;lambda0=lambda,cosPhi0=cos$1(phi=phi/2+quarterPi),sinPhi0=sin$1(phi)}function areaPoint(lambda,phi){lambda*=radians$1,phi*=radians$1;phi=phi/2+quarterPi;var dLambda=lambda-lambda0,sdLambda=dLambda>=0?1:-1,adLambda=sdLambda*dLambda,cosPhi=cos$1(phi),sinPhi=sin$1(phi),k=sinPhi0*sinPhi,u=cosPhi0*cosPhi+k*cos$1(adLambda),v=k*sdLambda*sin$1(adLambda);areaRingSum.add(atan2(v,u));lambda0=lambda,cosPhi0=cosPhi,sinPhi0=sinPhi}function area$1(object){areaSum=new Adder;geoStream(object,areaStream);return areaSum*2}function spherical(cartesian){return[atan2(cartesian[1],cartesian[0]),asin(cartesian[2])]}function cartesian(spherical){var lambda=spherical[0],phi=spherical[1],cosPhi=cos$1(phi);return[cosPhi*cos$1(lambda),cosPhi*sin$1(lambda),sin$1(phi)]}function cartesianDot(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]}function cartesianCross(a,b){return[a[1]*b[2]-a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]-a[1]*b[0]]}function cartesianAddInPlace(a,b){a[0]+=b[0],a[1]+=b[1],a[2]+=b[2]}function cartesianScale(vector,k){return[vector[0]*k,vector[1]*k,vector[2]*k]}function cartesianNormalizeInPlace(d){var l=sqrt(d[0]*d[0]+d[1]*d[1]+d[2]*d[2]);d[0]/=l,d[1]/=l,d[2]/=l}var lambda0$1,phi0,lambda1,phi1,lambda2,lambda00$1,phi00$1,p0,deltaSum,ranges,range$1;var boundsStream={point:boundsPoint,lineStart:boundsLineStart,lineEnd:boundsLineEnd,polygonStart:function(){boundsStream.point=boundsRingPoint;boundsStream.lineStart=boundsRingStart;boundsStream.lineEnd=boundsRingEnd;deltaSum=new Adder;areaStream.polygonStart()},polygonEnd:function(){areaStream.polygonEnd();boundsStream.point=boundsPoint;boundsStream.lineStart=boundsLineStart;boundsStream.lineEnd=boundsLineEnd;if(areaRingSum<0)lambda0$1=-(lambda1=180),phi0=-(phi1=90);else if(deltaSum>epsilon$4)phi1=90;else if(deltaSum<-epsilon$4)phi0=-90;range$1[0]=lambda0$1,range$1[1]=lambda1},sphere:function(){lambda0$1=-(lambda1=180),phi0=-(phi1=90)}};function boundsPoint(lambda,phi){ranges.push(range$1=[lambda0$1=lambda,lambda1=lambda]);if(phi<phi0)phi0=phi;if(phi>phi1)phi1=phi}function linePoint(lambda,phi){var p=cartesian([lambda*radians$1,phi*radians$1]);if(p0){var normal=cartesianCross(p0,p),equatorial=[normal[1],-normal[0],0],inflection=cartesianCross(equatorial,normal);cartesianNormalizeInPlace(inflection);inflection=spherical(inflection);var delta=lambda-lambda2,sign=delta>0?1:-1,lambdai=inflection[0]*degrees$2*sign,phii,antimeridian=abs$2(delta)>180;if(antimeridian^(sign*lambda2<lambdai&&lambdai<sign*lambda)){phii=inflection[1]*degrees$2;if(phii>phi1)phi1=phii}else if(lambdai=(lambdai+360)%360-180,antimeridian^(sign*lambda2<lambdai&&lambdai<sign*lambda)){phii=-inflection[1]*degrees$2;if(phii<phi0)phi0=phii}else{if(phi<phi0)phi0=phi;if(phi>phi1)phi1=phi}if(antimeridian){if(lambda<lambda2){if(angle(lambda0$1,lambda)>angle(lambda0$1,lambda1))lambda1=lambda}else{if(angle(lambda,lambda1)>angle(lambda0$1,lambda1))lambda0$1=lambda}}else{if(lambda1>=lambda0$1){if(lambda<lambda0$1)lambda0$1=lambda;if(lambda>lambda1)lambda1=lambda}else{if(lambda>lambda2){if(angle(lambda0$1,lambda)>angle(lambda0$1,lambda1))lambda1=lambda}else{if(angle(lambda,lambda1)>angle(lambda0$1,lambda1))lambda0$1=lambda}}}}else{ranges.push(range$1=[lambda0$1=lambda,lambda1=lambda])}if(phi<phi0)phi0=phi;if(phi>phi1)phi1=phi;p0=p,lambda2=lambda}function boundsLineStart(){boundsStream.point=linePoint}function boundsLineEnd(){range$1[0]=lambda0$1,range$1[1]=lambda1;boundsStream.point=boundsPoint;p0=null}function boundsRingPoint(lambda,phi){if(p0){var delta=lambda-lambda2;deltaSum.add(abs$2(delta)>180?delta+(delta>0?360:-360):delta)}else{lambda00$1=lambda,phi00$1=phi}areaStream.point(lambda,phi);linePoint(lambda,phi)}function boundsRingStart(){areaStream.lineStart()}function boundsRingEnd(){boundsRingPoint(lambda00$1,phi00$1);areaStream.lineEnd();if(abs$2(deltaSum)>epsilon$4)lambda0$1=-(lambda1=180);range$1[0]=lambda0$1,range$1[1]=lambda1;p0=null}function angle(lambda0,lambda1){return(lambda1-=lambda0)<0?lambda1+360:lambda1}function rangeCompare(a,b){return a[0]-b[0]}function rangeContains(range,x){return range[0]<=range[1]?range[0]<=x&&x<=range[1]:x<range[0]||range[1]<x}function bounds(feature){var i,n,a,b,merged,deltaMax,delta;phi1=lambda1=-(lambda0$1=phi0=Infinity);ranges=[];geoStream(feature,boundsStream);if(n=ranges.length){ranges.sort(rangeCompare);for(i=1,a=ranges[0],merged=[a];i<n;++i){b=ranges[i];if(rangeContains(a,b[0])||rangeContains(a,b[1])){if(angle(a[0],b[1])>angle(a[0],a[1]))a[1]=b[1];if(angle(b[0],a[1])>angle(a[0],a[1]))a[0]=b[0]}else{merged.push(a=b)}}for(deltaMax=-Infinity,n=merged.length-1,i=0,a=merged[n];i<=n;a=b,++i){b=merged[i];if((delta=angle(a[1],b[0]))>deltaMax)deltaMax=delta,lambda0$1=b[0],lambda1=a[1]}}ranges=range$1=null;return lambda0$1===Infinity||phi0===Infinity?[[NaN,NaN],[NaN,NaN]]:[[lambda0$1,phi0],[lambda1,phi1]]}var W0,W1,X0,Y0,Z0,X1,Y1,Z1,X2,Y2,Z2,lambda00$2,phi00$2,x0,y0,z0;var centroidStream={sphere:noop$2,point:centroidPoint,lineStart:centroidLineStart,lineEnd:centroidLineEnd,polygonStart:function(){centroidStream.lineStart=centroidRingStart;centroidStream.lineEnd=centroidRingEnd},polygonEnd:function(){centroidStream.lineStart=centroidLineStart;centroidStream.lineEnd=centroidLineEnd}};function centroidPoint(lambda,phi){lambda*=radians$1,phi*=radians$1;var cosPhi=cos$1(phi);centroidPointCartesian(cosPhi*cos$1(lambda),cosPhi*sin$1(lambda),sin$1(phi))}function centroidPointCartesian(x,y,z){++W0;X0+=(x-X0)/W0;Y0+=(y-Y0)/W0;Z0+=(z-Z0)/W0}function centroidLineStart(){centroidStream.point=centroidLinePointFirst}function centroidLinePointFirst(lambda,phi){lambda*=radians$1,phi*=radians$1;var cosPhi=cos$1(phi);x0=cosPhi*cos$1(lambda);y0=cosPhi*sin$1(lambda);z0=sin$1(phi);centroidStream.point=centroidLinePoint;centroidPointCartesian(x0,y0,z0)}function centroidLinePoint(lambda,phi){lambda*=radians$1,phi*=radians$1;var cosPhi=cos$1(phi),x=cosPhi*cos$1(lambda),y=cosPhi*sin$1(lambda),z=sin$1(phi),w=atan2(sqrt((w=y0*z-z0*y)*w+(w=z0*x-x0*z)*w+(w=x0*y-y0*x)*w),x0*x+y0*y+z0*z);W1+=w;X1+=w*(x0+(x0=x));Y1+=w*(y0+(y0=y));Z1+=w*(z0+(z0=z));centroidPointCartesian(x0,y0,z0)}function centroidLineEnd(){centroidStream.point=centroidPoint}function centroidRingStart(){centroidStream.point=centroidRingPointFirst}function centroidRingEnd(){centroidRingPoint(lambda00$2,phi00$2);centroidStream.point=centroidPoint}function centroidRingPointFirst(lambda,phi){lambda00$2=lambda,phi00$2=phi;lambda*=radians$1,phi*=radians$1;centroidStream.point=centroidRingPoint;var cosPhi=cos$1(phi);x0=cosPhi*cos$1(lambda);y0=cosPhi*sin$1(lambda);z0=sin$1(phi);centroidPointCartesian(x0,y0,z0)}function centroidRingPoint(lambda,phi){lambda*=radians$1,phi*=radians$1;var cosPhi=cos$1(phi),x=cosPhi*cos$1(lambda),y=cosPhi*sin$1(lambda),z=sin$1(phi),cx=y0*z-z0*y,cy=z0*x-x0*z,cz=x0*y-y0*x,m=hypot(cx,cy,cz),w=asin(m),v=m&&-w/m;X2.add(v*cx);Y2.add(v*cy);Z2.add(v*cz);W1+=w;X1+=w*(x0+(x0=x));Y1+=w*(y0+(y0=y));Z1+=w*(z0+(z0=z));centroidPointCartesian(x0,y0,z0)}function centroid(object){W0=W1=X0=Y0=Z0=X1=Y1=Z1=0;X2=new Adder;Y2=new Adder;Z2=new Adder;geoStream(object,centroidStream);var x=+X2,y=+Y2,z=+Z2,m=hypot(x,y,z);if(m<epsilon2$1){x=X1,y=Y1,z=Z1;if(W1<epsilon$4)x=X0,y=Y0,z=Z0;m=hypot(x,y,z);if(m<epsilon2$1)return[NaN,NaN]}return[atan2(y,x)*degrees$2,asin(z/m)*degrees$2]}function constant$8(x){return function(){return x}}function compose(a,b){function compose(x,y){return x=a(x,y),b(x[0],x[1])}if(a.invert&&b.invert)compose.invert=function(x,y){return x=b.invert(x,y),x&&a.invert(x[0],x[1])};return compose}function rotationIdentity(lambda,phi){return[abs$2(lambda)>pi$3?lambda+Math.round(-lambda/tau$4)*tau$4:lambda,phi]}rotationIdentity.invert=rotationIdentity;function rotateRadians(deltaLambda,deltaPhi,deltaGamma){return(deltaLambda%=tau$4)?deltaPhi||deltaGamma?compose(rotationLambda(deltaLambda),rotationPhiGamma(deltaPhi,deltaGamma)):rotationLambda(deltaLambda):deltaPhi||deltaGamma?rotationPhiGamma(deltaPhi,deltaGamma):rotationIdentity}function forwardRotationLambda(deltaLambda){return function(lambda,phi){return lambda+=deltaLambda,[lambda>pi$3?lambda-tau$4:lambda<-pi$3?lambda+tau$4:lambda,phi]}}function rotationLambda(deltaLambda){var rotation=forwardRotationLambda(deltaLambda);rotation.invert=forwardRotationLambda(-deltaLambda);return rotation}function rotationPhiGamma(deltaPhi,deltaGamma){var cosDeltaPhi=cos$1(deltaPhi),sinDeltaPhi=sin$1(deltaPhi),cosDeltaGamma=cos$1(deltaGamma),sinDeltaGamma=sin$1(deltaGamma);function rotation(lambda,phi){var cosPhi=cos$1(phi),x=cos$1(lambda)*cosPhi,y=sin$1(lambda)*cosPhi,z=sin$1(phi),k=z*cosDeltaPhi+x*sinDeltaPhi;return[atan2(y*cosDeltaGamma-k*sinDeltaGamma,x*cosDeltaPhi-z*sinDeltaPhi),asin(k*cosDeltaGamma+y*sinDeltaGamma)]}rotation.invert=function(lambda,phi){var cosPhi=cos$1(phi),x=cos$1(lambda)*cosPhi,y=sin$1(lambda)*cosPhi,z=sin$1(phi),k=z*cosDeltaGamma-y*sinDeltaGamma;return[atan2(y*cosDeltaGamma+z*sinDeltaGamma,x*cosDeltaPhi+k*sinDeltaPhi),asin(k*cosDeltaPhi-x*sinDeltaPhi)]};return rotation}function rotation(rotate){rotate=rotateRadians(rotate[0]*radians$1,rotate[1]*radians$1,rotate.length>2?rotate[2]*radians$1:0);function forward(coordinates){coordinates=rotate(coordinates[0]*radians$1,coordinates[1]*radians$1);return coordinates[0]*=degrees$2,coordinates[1]*=degrees$2,coordinates}forward.invert=function(coordinates){coordinates=rotate.invert(coordinates[0]*radians$1,coordinates[1]*radians$1);return coordinates[0]*=degrees$2,coordinates[1]*=degrees$2,coordinates};return forward}function circleStream(stream,radius,delta,direction,t0,t1){if(!delta)return;var cosRadius=cos$1(radius),sinRadius=sin$1(radius),step=direction*delta;if(t0==null){t0=radius+direction*tau$4;t1=radius-step/2}else{t0=circleRadius(cosRadius,t0);t1=circleRadius(cosRadius,t1);if(direction>0?t0<t1:t0>t1)t0+=direction*tau$4}for(var point,t=t0;direction>0?t>t1:t<t1;t-=step){point=spherical([cosRadius,-sinRadius*cos$1(t),-sinRadius*sin$1(t)]);stream.point(point[0],point[1])}}function circleRadius(cosRadius,point){point=cartesian(point),point[0]-=cosRadius;cartesianNormalizeInPlace(point);var radius=acos(-point[1]);return((-point[2]<0?-radius:radius)+tau$4-epsilon$4)%tau$4}function circle(){var center=constant$8([0,0]),radius=constant$8(90),precision=constant$8(6),ring,rotate,stream={point:point};function point(x,y){ring.push(x=rotate(x,y));x[0]*=degrees$2,x[1]*=degrees$2}function circle(){var c=center.apply(this,arguments),r=radius.apply(this,arguments)*radians$1,p=precision.apply(this,arguments)*radians$1;ring=[];rotate=rotateRadians(-c[0]*radians$1,-c[1]*radians$1,0).invert;circleStream(stream,r,p,1);c={type:"Polygon",coordinates:[ring]};ring=rotate=null;return c}circle.center=function(_){return arguments.length?(center=typeof _==="function"?_:constant$8([+_[0],+_[1]]),circle):center};circle.radius=function(_){return arguments.length?(radius=typeof _==="function"?_:constant$8(+_),circle):radius};circle.precision=function(_){return arguments.length?(precision=typeof _==="function"?_:constant$8(+_),circle):precision};return circle}function clipBuffer(){var lines=[],line;return{point:function(x,y,m){line.push([x,y,m])},lineStart:function(){lines.push(line=[])},lineEnd:noop$2,rejoin:function(){if(lines.length>1)lines.push(lines.pop().concat(lines.shift()))},result:function(){var result=lines;lines=[];line=null;return result}}}function pointEqual(a,b){return abs$2(a[0]-b[0])<epsilon$4&&abs$2(a[1]-b[1])<epsilon$4}function Intersection(point,points,other,entry){this.x=point;this.z=points;this.o=other;this.e=entry;this.v=false;this.n=this.p=null}function clipRejoin(segments,compareIntersection,startInside,interpolate,stream){var subject=[],clip=[],i,n;segments.forEach(function(segment){if((n=segment.length-1)<=0)return;var n,p0=segment[0],p1=segment[n],x;if(pointEqual(p0,p1)){if(!p0[2]&&!p1[2]){stream.lineStart();for(i=0;i<n;++i)stream.point((p0=segment[i])[0],p0[1]);stream.lineEnd();return}p1[0]+=2*epsilon$4}subject.push(x=new Intersection(p0,segment,null,true));clip.push(x.o=new Intersection(p0,null,x,false));subject.push(x=new Intersection(p1,segment,null,false));clip.push(x.o=new Intersection(p1,null,x,true))});if(!subject.length)return;clip.sort(compareIntersection);link$1(subject);link$1(clip);for(i=0,n=clip.length;i<n;++i){clip[i].e=startInside=!startInside}var start=subject[0],points,point;while(1){var current=start,isSubject=true;while(current.v)if((current=current.n)===start)return;points=current.z;stream.lineStart();do{current.v=current.o.v=true;if(current.e){if(isSubject){for(i=0,n=points.length;i<n;++i)stream.point((point=points[i])[0],point[1])}else{interpolate(current.x,current.n.x,1,stream)}current=current.n}else{if(isSubject){points=current.p.z;for(i=points.length-1;i>=0;--i)stream.point((point=points[i])[0],point[1])}else{interpolate(current.x,current.p.x,-1,stream)}current=current.p}current=current.o;points=current.z;isSubject=!isSubject}while(!current.v);stream.lineEnd()}}function link$1(array){if(!(n=array.length))return;var n,i=0,a=array[0],b;while(++i<n){a.n=b=array[i];b.p=a;a=b}a.n=b=array[0];b.p=a}function longitude(point){if(abs$2(point[0])<=pi$3)return point[0];else return sign(point[0])*((abs$2(point[0])+pi$3)%tau$4-pi$3)}function polygonContains(polygon,point){var lambda=longitude(point),phi=point[1],sinPhi=sin$1(phi),normal=[sin$1(lambda),-cos$1(lambda),0],angle=0,winding=0;var sum=new Adder;if(sinPhi===1)phi=halfPi$2+epsilon$4;else if(sinPhi===-1)phi=-halfPi$2-epsilon$4;for(var i=0,n=polygon.length;i<n;++i){if(!(m=(ring=polygon[i]).length))continue;var ring,m,point0=ring[m-1],lambda0=longitude(point0),phi0=point0[1]/2+quarterPi,sinPhi0=sin$1(phi0),cosPhi0=cos$1(phi0);for(var j=0;j<m;++j,lambda0=lambda1,sinPhi0=sinPhi1,cosPhi0=cosPhi1,point0=point1){var point1=ring[j],lambda1=longitude(point1),phi1=point1[1]/2+quarterPi,sinPhi1=sin$1(phi1),cosPhi1=cos$1(phi1),delta=lambda1-lambda0,sign=delta>=0?1:-1,absDelta=sign*delta,antimeridian=absDelta>pi$3,k=sinPhi0*sinPhi1;sum.add(atan2(k*sign*sin$1(absDelta),cosPhi0*cosPhi1+k*cos$1(absDelta)));angle+=antimeridian?delta+sign*tau$4:delta;if(antimeridian^lambda0>=lambda^lambda1>=lambda){var arc=cartesianCross(cartesian(point0),cartesian(point1));cartesianNormalizeInPlace(arc);var intersection=cartesianCross(normal,arc);cartesianNormalizeInPlace(intersection);var phiArc=(antimeridian^delta>=0?-1:1)*asin(intersection[2]);if(phi>phiArc||phi===phiArc&&(arc[0]||arc[1])){winding+=antimeridian^delta>=0?1:-1}}}}return(angle<-epsilon$4||angle<epsilon$4&&sum<-epsilon2$1)^winding&1}function clip(pointVisible,clipLine,interpolate,start){return function(sink){var line=clipLine(sink),ringBuffer=clipBuffer(),ringSink=clipLine(ringBuffer),polygonStarted=false,polygon,segments,ring;var clip={point:point,lineStart:lineStart,lineEnd:lineEnd,polygonStart:function(){clip.point=pointRing;clip.lineStart=ringStart;clip.lineEnd=ringEnd;segments=[];polygon=[]},polygonEnd:function(){clip.point=point;clip.lineStart=lineStart;clip.lineEnd=lineEnd;segments=merge(segments);var startInside=polygonContains(polygon,start);if(segments.length){if(!polygonStarted)sink.polygonStart(),polygonStarted=true;clipRejoin(segments,compareIntersection,startInside,interpolate,sink)}else if(startInside){if(!polygonStarted)sink.polygonStart(),polygonStarted=true;sink.lineStart();interpolate(null,null,1,sink);sink.lineEnd()}if(polygonStarted)sink.polygonEnd(),polygonStarted=false;segments=polygon=null},sphere:function(){sink.polygonStart();sink.lineStart();interpolate(null,null,1,sink);sink.lineEnd();sink.polygonEnd()}};function point(lambda,phi){if(pointVisible(lambda,phi))sink.point(lambda,phi)}function pointLine(lambda,phi){line.point(lambda,phi)}function lineStart(){clip.point=pointLine;line.lineStart()}function lineEnd(){clip.point=point;line.lineEnd()}function pointRing(lambda,phi){ring.push([lambda,phi]);ringSink.point(lambda,phi)}function ringStart(){ringSink.lineStart();ring=[]}function ringEnd(){pointRing(ring[0][0],ring[0][1]);ringSink.lineEnd();var clean=ringSink.clean(),ringSegments=ringBuffer.result(),i,n=ringSegments.length,m,segment,point;ring.pop();polygon.push(ring);ring=null;if(!n)return;if(clean&1){segment=ringSegments[0];if((m=segment.length-1)>0){if(!polygonStarted)sink.polygonStart(),polygonStarted=true;sink.lineStart();for(i=0;i<m;++i)sink.point((point=segment[i])[0],point[1]);sink.lineEnd()}return}if(n>1&&clean&2)ringSegments.push(ringSegments.pop().concat(ringSegments.shift()));segments.push(ringSegments.filter(validSegment))}return clip}}function validSegment(segment){return segment.length>1}function compareIntersection(a,b){return((a=a.x)[0]<0?a[1]-halfPi$2-epsilon$4:halfPi$2-a[1])-((b=b.x)[0]<0?b[1]-halfPi$2-epsilon$4:halfPi$2-b[1])}var clipAntimeridian=clip(function(){return true},clipAntimeridianLine,clipAntimeridianInterpolate,[-pi$3,-halfPi$2]);function clipAntimeridianLine(stream){var lambda0=NaN,phi0=NaN,sign0=NaN,clean;return{lineStart:function(){stream.lineStart();clean=1},point:function(lambda1,phi1){var sign1=lambda1>0?pi$3:-pi$3,delta=abs$2(lambda1-lambda0);if(abs$2(delta-pi$3)<epsilon$4){stream.point(lambda0,phi0=(phi0+phi1)/2>0?halfPi$2:-halfPi$2);stream.point(sign0,phi0);stream.lineEnd();stream.lineStart();stream.point(sign1,phi0);stream.point(lambda1,phi0);clean=0}else if(sign0!==sign1&&delta>=pi$3){if(abs$2(lambda0-sign0)<epsilon$4)lambda0-=sign0*epsilon$4;if(abs$2(lambda1-sign1)<epsilon$4)lambda1-=sign1*epsilon$4;phi0=clipAntimeridianIntersect(lambda0,phi0,lambda1,phi1);stream.point(sign0,phi0);stream.lineEnd();stream.lineStart();stream.point(sign1,phi0);clean=0}stream.point(lambda0=lambda1,phi0=phi1);sign0=sign1},lineEnd:function(){stream.lineEnd();lambda0=phi0=NaN},clean:function(){return 2-clean}}}function clipAntimeridianIntersect(lambda0,phi0,lambda1,phi1){var cosPhi0,cosPhi1,sinLambda0Lambda1=sin$1(lambda0-lambda1);return abs$2(sinLambda0Lambda1)>epsilon$4?atan((sin$1(phi0)*(cosPhi1=cos$1(phi1))*sin$1(lambda1)-sin$1(phi1)*(cosPhi0=cos$1(phi0))*sin$1(lambda0))/(cosPhi0*cosPhi1*sinLambda0Lambda1)):(phi0+phi1)/2}function clipAntimeridianInterpolate(from,to,direction,stream){var phi;if(from==null){phi=direction*halfPi$2;stream.point(-pi$3,phi);stream.point(0,phi);stream.point(pi$3,phi);stream.point(pi$3,0);stream.point(pi$3,-phi);stream.point(0,-phi);stream.point(-pi$3,-phi);stream.point(-pi$3,0);stream.point(-pi$3,phi)}else if(abs$2(from[0]-to[0])>epsilon$4){var lambda=from[0]<to[0]?pi$3:-pi$3;phi=direction*lambda/2;stream.point(-lambda,phi);stream.point(0,phi);stream.point(lambda,phi)}else{stream.point(to[0],to[1])}}function clipCircle(radius){var cr=cos$1(radius),delta=6*radians$1,smallRadius=cr>0,notHemisphere=abs$2(cr)>epsilon$4;function interpolate(from,to,direction,stream){circleStream(stream,radius,delta,direction,from,to)}function visible(lambda,phi){return cos$1(lambda)*cos$1(phi)>cr}function clipLine(stream){var point0,c0,v0,v00,clean;return{lineStart:function(){v00=v0=false;clean=1},point:function(lambda,phi){var point1=[lambda,phi],point2,v=visible(lambda,phi),c=smallRadius?v?0:code(lambda,phi):v?code(lambda+(lambda<0?pi$3:-pi$3),phi):0;if(!point0&&(v00=v0=v))stream.lineStart();if(v!==v0){point2=intersect(point0,point1);if(!point2||pointEqual(point0,point2)||pointEqual(point1,point2))point1[2]=1}if(v!==v0){clean=0;if(v){stream.lineStart();point2=intersect(point1,point0);stream.point(point2[0],point2[1])}else{point2=intersect(point0,point1);stream.point(point2[0],point2[1],2);stream.lineEnd()}point0=point2}else if(notHemisphere&&point0&&smallRadius^v){var t;if(!(c&c0)&&(t=intersect(point1,point0,true))){clean=0;if(smallRadius){stream.lineStart();stream.point(t[0][0],t[0][1]);stream.point(t[1][0],t[1][1]);stream.lineEnd()}else{stream.point(t[1][0],t[1][1]);stream.lineEnd();stream.lineStart();stream.point(t[0][0],t[0][1],3)}}}if(v&&(!point0||!pointEqual(point0,point1))){stream.point(point1[0],point1[1])}point0=point1,v0=v,c0=c},lineEnd:function(){if(v0)stream.lineEnd();point0=null},clean:function(){return clean|(v00&&v0)<<1}}}function intersect(a,b,two){var pa=cartesian(a),pb=cartesian(b);var n1=[1,0,0],n2=cartesianCross(pa,pb),n2n2=cartesianDot(n2,n2),n1n2=n2[0],determinant=n2n2-n1n2*n1n2;if(!determinant)return!two&&a;var c1=cr*n2n2/determinant,c2=-cr*n1n2/determinant,n1xn2=cartesianCross(n1,n2),A=cartesianScale(n1,c1),B=cartesianScale(n2,c2);cartesianAddInPlace(A,B);var u=n1xn2,w=cartesianDot(A,u),uu=cartesianDot(u,u),t2=w*w-uu*(cartesianDot(A,A)-1);if(t2<0)return;var t=sqrt(t2),q=cartesianScale(u,(-w-t)/uu);cartesianAddInPlace(q,A);q=spherical(q);if(!two)return q;var lambda0=a[0],lambda1=b[0],phi0=a[1],phi1=b[1],z;if(lambda1<lambda0)z=lambda0,lambda0=lambda1,lambda1=z;var delta=lambda1-lambda0,polar=abs$2(delta-pi$3)<epsilon$4,meridian=polar||delta<epsilon$4;if(!polar&&phi1<phi0)z=phi0,phi0=phi1,phi1=z;if(meridian?polar?phi0+phi1>0^q[1]<(abs$2(q[0]-lambda0)<epsilon$4?phi0:phi1):phi0<=q[1]&&q[1]<=phi1:delta>pi$3^(lambda0<=q[0]&&q[0]<=lambda1)){var q1=cartesianScale(u,(-w+t)/uu);cartesianAddInPlace(q1,A);return[q,spherical(q1)]}}function code(lambda,phi){var r=smallRadius?radius:pi$3-radius,code=0;if(lambda<-r)code|=1;else if(lambda>r)code|=2;if(phi<-r)code|=4;else if(phi>r)code|=8;return code}return clip(visible,clipLine,interpolate,smallRadius?[0,-radius]:[-pi$3,radius-pi$3])}function clipLine(a,b,x0,y0,x1,y1){var ax=a[0],ay=a[1],bx=b[0],by=b[1],t0=0,t1=1,dx=bx-ax,dy=by-ay,r;r=x0-ax;if(!dx&&r>0)return;r/=dx;if(dx<0){if(r<t0)return;if(r<t1)t1=r}else if(dx>0){if(r>t1)return;if(r>t0)t0=r}r=x1-ax;if(!dx&&r<0)return;r/=dx;if(dx<0){if(r>t1)return;if(r>t0)t0=r}else if(dx>0){if(r<t0)return;if(r<t1)t1=r}r=y0-ay;if(!dy&&r>0)return;r/=dy;if(dy<0){if(r<t0)return;if(r<t1)t1=r}else if(dy>0){if(r>t1)return;if(r>t0)t0=r}r=y1-ay;if(!dy&&r<0)return;r/=dy;if(dy<0){if(r>t1)return;if(r>t0)t0=r}else if(dy>0){if(r<t0)return;if(r<t1)t1=r}if(t0>0)a[0]=ax+t0*dx,a[1]=ay+t0*dy;if(t1<1)b[0]=ax+t1*dx,b[1]=ay+t1*dy;return true}var clipMax=1e9,clipMin=-clipMax;function clipRectangle(x0,y0,x1,y1){function visible(x,y){return x0<=x&&x<=x1&&y0<=y&&y<=y1}function interpolate(from,to,direction,stream){var a=0,a1=0;if(from==null||(a=corner(from,direction))!==(a1=corner(to,direction))||comparePoint(from,to)<0^direction>0){do{stream.point(a===0||a===3?x0:x1,a>1?y1:y0)}while((a=(a+direction+4)%4)!==a1)}else{stream.point(to[0],to[1])}}function corner(p,direction){return abs$2(p[0]-x0)<epsilon$4?direction>0?0:3:abs$2(p[0]-x1)<epsilon$4?direction>0?2:1:abs$2(p[1]-y0)<epsilon$4?direction>0?1:0:direction>0?3:2}function compareIntersection(a,b){return comparePoint(a.x,b.x)}function comparePoint(a,b){var ca=corner(a,1),cb=corner(b,1);return ca!==cb?ca-cb:ca===0?b[1]-a[1]:ca===1?a[0]-b[0]:ca===2?a[1]-b[1]:b[0]-a[0]}return function(stream){var activeStream=stream,bufferStream=clipBuffer(),segments,polygon,ring,x__,y__,v__,x_,y_,v_,first,clean;var clipStream={point:point,lineStart:lineStart,lineEnd:lineEnd,polygonStart:polygonStart,polygonEnd:polygonEnd};function point(x,y){if(visible(x,y))activeStream.point(x,y)}function polygonInside(){var winding=0;for(var i=0,n=polygon.length;i<n;++i){for(var ring=polygon[i],j=1,m=ring.length,point=ring[0],a0,a1,b0=point[0],b1=point[1];j<m;++j){a0=b0,a1=b1,point=ring[j],b0=point[0],b1=point[1];if(a1<=y1){if(b1>y1&&(b0-a0)*(y1-a1)>(b1-a1)*(x0-a0))++winding}else{if(b1<=y1&&(b0-a0)*(y1-a1)<(b1-a1)*(x0-a0))--winding}}}return winding}function polygonStart(){activeStream=bufferStream,segments=[],polygon=[],clean=true}function polygonEnd(){var startInside=polygonInside(),cleanInside=clean&&startInside,visible=(segments=merge(segments)).length;if(cleanInside||visible){stream.polygonStart();if(cleanInside){stream.lineStart();interpolate(null,null,1,stream);stream.lineEnd()}if(visible){clipRejoin(segments,compareIntersection,startInside,interpolate,stream)}stream.polygonEnd()}activeStream=stream,segments=polygon=ring=null}function lineStart(){clipStream.point=linePoint;if(polygon)polygon.push(ring=[]);first=true;v_=false;x_=y_=NaN}function lineEnd(){if(segments){linePoint(x__,y__);if(v__&&v_)bufferStream.rejoin();segments.push(bufferStream.result())}clipStream.point=point;if(v_)activeStream.lineEnd()}function linePoint(x,y){var v=visible(x,y);if(polygon)ring.push([x,y]);if(first){x__=x,y__=y,v__=v;first=false;if(v){activeStream.lineStart();activeStream.point(x,y)}}else{if(v&&v_)activeStream.point(x,y);else{var a=[x_=Math.max(clipMin,Math.min(clipMax,x_)),y_=Math.max(clipMin,Math.min(clipMax,y_))],b=[x=Math.max(clipMin,Math.min(clipMax,x)),y=Math.max(clipMin,Math.min(clipMax,y))];if(clipLine(a,b,x0,y0,x1,y1)){if(!v_){activeStream.lineStart();activeStream.point(a[0],a[1])}activeStream.point(b[0],b[1]);if(!v)activeStream.lineEnd();clean=false}else if(v){activeStream.lineStart();activeStream.point(x,y);clean=false}}}x_=x,y_=y,v_=v}return clipStream}}function extent$1(){var x0=0,y0=0,x1=960,y1=500,cache,cacheStream,clip;return clip={stream:function(stream){return cache&&cacheStream===stream?cache:cache=clipRectangle(x0,y0,x1,y1)(cacheStream=stream)},extent:function(_){return arguments.length?(x0=+_[0][0],y0=+_[0][1],x1=+_[1][0],y1=+_[1][1],cache=cacheStream=null,clip):[[x0,y0],[x1,y1]]}}}var lengthSum,lambda0$2,sinPhi0$1,cosPhi0$1;var lengthStream={sphere:noop$2,point:noop$2,lineStart:lengthLineStart,lineEnd:noop$2,polygonStart:noop$2,polygonEnd:noop$2};function lengthLineStart(){lengthStream.point=lengthPointFirst;lengthStream.lineEnd=lengthLineEnd}function lengthLineEnd(){lengthStream.point=lengthStream.lineEnd=noop$2}function lengthPointFirst(lambda,phi){lambda*=radians$1,phi*=radians$1;lambda0$2=lambda,sinPhi0$1=sin$1(phi),cosPhi0$1=cos$1(phi);lengthStream.point=lengthPoint}function lengthPoint(lambda,phi){lambda*=radians$1,phi*=radians$1;var sinPhi=sin$1(phi),cosPhi=cos$1(phi),delta=abs$2(lambda-lambda0$2),cosDelta=cos$1(delta),sinDelta=sin$1(delta),x=cosPhi*sinDelta,y=cosPhi0$1*sinPhi-sinPhi0$1*cosPhi*cosDelta,z=sinPhi0$1*sinPhi+cosPhi0$1*cosPhi*cosDelta;lengthSum.add(atan2(sqrt(x*x+y*y),z));lambda0$2=lambda,sinPhi0$1=sinPhi,cosPhi0$1=cosPhi}function length$2(object){lengthSum=new Adder;geoStream(object,lengthStream);return+lengthSum}var coordinates=[null,null],object$1={type:"LineString",coordinates:coordinates};function distance(a,b){coordinates[0]=a;coordinates[1]=b;return length$2(object$1)}var containsObjectType={Feature:function(object,point){return containsGeometry(object.geometry,point)},FeatureCollection:function(object,point){var features=object.features,i=-1,n=features.length;while(++i<n)if(containsGeometry(features[i].geometry,point))return true;return false}};var containsGeometryType={Sphere:function(){return true},Point:function(object,point){return containsPoint(object.coordinates,point)},MultiPoint:function(object,point){var coordinates=object.coordinates,i=-1,n=coordinates.length;while(++i<n)if(containsPoint(coordinates[i],point))return true;return false},LineString:function(object,point){return containsLine(object.coordinates,point)},MultiLineString:function(object,point){var coordinates=object.coordinates,i=-1,n=coordinates.length;while(++i<n)if(containsLine(coordinates[i],point))return true;return false},Polygon:function(object,point){return containsPolygon(object.coordinates,point)},MultiPolygon:function(object,point){var coordinates=object.coordinates,i=-1,n=coordinates.length;while(++i<n)if(containsPolygon(coordinates[i],point))return true;return false},GeometryCollection:function(object,point){var geometries=object.geometries,i=-1,n=geometries.length;while(++i<n)if(containsGeometry(geometries[i],point))return true;return false}};function containsGeometry(geometry,point){return geometry&&containsGeometryType.hasOwnProperty(geometry.type)?containsGeometryType[geometry.type](geometry,point):false}function containsPoint(coordinates,point){return distance(coordinates,point)===0}function containsLine(coordinates,point){var ao,bo,ab;for(var i=0,n=coordinates.length;i<n;i++){bo=distance(coordinates[i],point);if(bo===0)return true;if(i>0){ab=distance(coordinates[i],coordinates[i-1]);if(ab>0&&ao<=ab&&bo<=ab&&(ao+bo-ab)*(1-Math.pow((ao-bo)/ab,2))<epsilon2$1*ab)return true}ao=bo}return false}function containsPolygon(coordinates,point){return!!polygonContains(coordinates.map(ringRadians),pointRadians(point))}function ringRadians(ring){return ring=ring.map(pointRadians),ring.pop(),ring}function pointRadians(point){return[point[0]*radians$1,point[1]*radians$1]}function contains$1(object,point){return(object&&containsObjectType.hasOwnProperty(object.type)?containsObjectType[object.type]:containsGeometry)(object,point)}function graticuleX(y0,y1,dy){var y=sequence(y0,y1-epsilon$4,dy).concat(y1);return function(x){return y.map(function(y){return[x,y]})}}function graticuleY(x0,x1,dx){var x=sequence(x0,x1-epsilon$4,dx).concat(x1);return function(y){return x.map(function(x){return[x,y]})}}function graticule(){var x1,x0,X1,X0,y1,y0,Y1,Y0,dx=10,dy=dx,DX=90,DY=360,x,y,X,Y,precision=2.5;function graticule(){return{type:"MultiLineString",coordinates:lines()}}function lines(){return sequence(ceil(X0/DX)*DX,X1,DX).map(X).concat(sequence(ceil(Y0/DY)*DY,Y1,DY).map(Y)).concat(sequence(ceil(x0/dx)*dx,x1,dx).filter(function(x){return abs$2(x%DX)>epsilon$4}).map(x)).concat(sequence(ceil(y0/dy)*dy,y1,dy).filter(function(y){return abs$2(y%DY)>epsilon$4}).map(y))}graticule.lines=function(){return lines().map(function(coordinates){return{type:"LineString",coordinates:coordinates}})};graticule.outline=function(){return{type:"Polygon",coordinates:[X(X0).concat(Y(Y1).slice(1),X(X1).reverse().slice(1),Y(Y0).reverse().slice(1))]}};graticule.extent=function(_){if(!arguments.length)return graticule.extentMinor();return graticule.extentMajor(_).extentMinor(_)};graticule.extentMajor=function(_){if(!arguments.length)return[[X0,Y0],[X1,Y1]];X0=+_[0][0],X1=+_[1][0];Y0=+_[0][1],Y1=+_[1][1];if(X0>X1)_=X0,X0=X1,X1=_;if(Y0>Y1)_=Y0,Y0=Y1,Y1=_;return graticule.precision(precision)};graticule.extentMinor=function(_){if(!arguments.length)return[[x0,y0],[x1,y1]];x0=+_[0][0],x1=+_[1][0];y0=+_[0][1],y1=+_[1][1];if(x0>x1)_=x0,x0=x1,x1=_;if(y0>y1)_=y0,y0=y1,y1=_;return graticule.precision(precision)};graticule.step=function(_){if(!arguments.length)return graticule.stepMinor();return graticule.stepMajor(_).stepMinor(_)};graticule.stepMajor=function(_){if(!arguments.length)return[DX,DY];DX=+_[0],DY=+_[1];return graticule};graticule.stepMinor=function(_){if(!arguments.length)return[dx,dy];dx=+_[0],dy=+_[1];return graticule};graticule.precision=function(_){if(!arguments.length)return precision;precision=+_;x=graticuleX(y0,y1,90);y=graticuleY(x0,x1,precision);X=graticuleX(Y0,Y1,90);Y=graticuleY(X0,X1,precision);return graticule};return graticule.extentMajor([[-180,-90+epsilon$4],[180,90-epsilon$4]]).extentMinor([[-180,-80-epsilon$4],[180,80+epsilon$4]])}function graticule10(){return graticule()()}function interpolate$2(a,b){var x0=a[0]*radians$1,y0=a[1]*radians$1,x1=b[0]*radians$1,y1=b[1]*radians$1,cy0=cos$1(y0),sy0=sin$1(y0),cy1=cos$1(y1),sy1=sin$1(y1),kx0=cy0*cos$1(x0),ky0=cy0*sin$1(x0),kx1=cy1*cos$1(x1),ky1=cy1*sin$1(x1),d=2*asin(sqrt(haversin(y1-y0)+cy0*cy1*haversin(x1-x0))),k=sin$1(d);var interpolate=d?function(t){var B=sin$1(t*=d)/k,A=sin$1(d-t)/k,x=A*kx0+B*kx1,y=A*ky0+B*ky1,z=A*sy0+B*sy1;return[atan2(y,x)*degrees$2,atan2(z,sqrt(x*x+y*y))*degrees$2]}:function(){return[x0*degrees$2,y0*degrees$2]};interpolate.distance=d;return interpolate}var identity$4=x=>x;var areaSum$1=new Adder,areaRingSum$1=new Adder,x00,y00,x0$1,y0$1;var areaStream$1={point:noop$2,lineStart:noop$2,lineEnd:noop$2,polygonStart:function(){areaStream$1.lineStart=areaRingStart$1;areaStream$1.lineEnd=areaRingEnd$1},polygonEnd:function(){areaStream$1.lineStart=areaStream$1.lineEnd=areaStream$1.point=noop$2;areaSum$1.add(abs$2(areaRingSum$1));areaRingSum$1=new Adder},result:function(){var area=areaSum$1/2;areaSum$1=new Adder;return area}};function areaRingStart$1(){areaStream$1.point=areaPointFirst$1}function areaPointFirst$1(x,y){areaStream$1.point=areaPoint$1;x00=x0$1=x,y00=y0$1=y}function areaPoint$1(x,y){areaRingSum$1.add(y0$1*x-x0$1*y);x0$1=x,y0$1=y}function areaRingEnd$1(){areaPoint$1(x00,y00)}var x0$2=Infinity,y0$2=x0$2,x1=-x0$2,y1=x1;var boundsStream$1={point:boundsPoint$1,lineStart:noop$2,lineEnd:noop$2,polygonStart:noop$2,polygonEnd:noop$2,result:function(){var bounds=[[x0$2,y0$2],[x1,y1]];x1=y1=-(y0$2=x0$2=Infinity);return bounds}};function boundsPoint$1(x,y){if(x<x0$2)x0$2=x;if(x>x1)x1=x;if(y<y0$2)y0$2=y;if(y>y1)y1=y}var X0$1=0,Y0$1=0,Z0$1=0,X1$1=0,Y1$1=0,Z1$1=0,X2$1=0,Y2$1=0,Z2$1=0,x00$1,y00$1,x0$3,y0$3;var centroidStream$1={point:centroidPoint$1,lineStart:centroidLineStart$1,lineEnd:centroidLineEnd$1,polygonStart:function(){centroidStream$1.lineStart=centroidRingStart$1;centroidStream$1.lineEnd=centroidRingEnd$1},polygonEnd:function(){centroidStream$1.point=centroidPoint$1;centroidStream$1.lineStart=centroidLineStart$1;centroidStream$1.lineEnd=centroidLineEnd$1},result:function(){var centroid=Z2$1?[X2$1/Z2$1,Y2$1/Z2$1]:Z1$1?[X1$1/Z1$1,Y1$1/Z1$1]:Z0$1?[X0$1/Z0$1,Y0$1/Z0$1]:[NaN,NaN];X0$1=Y0$1=Z0$1=X1$1=Y1$1=Z1$1=X2$1=Y2$1=Z2$1=0;return centroid}};function centroidPoint$1(x,y){X0$1+=x;Y0$1+=y;++Z0$1}function centroidLineStart$1(){centroidStream$1.point=centroidPointFirstLine}function centroidPointFirstLine(x,y){centroidStream$1.point=centroidPointLine;centroidPoint$1(x0$3=x,y0$3=y)}function centroidPointLine(x,y){var dx=x-x0$3,dy=y-y0$3,z=sqrt(dx*dx+dy*dy);X1$1+=z*(x0$3+x)/2;Y1$1+=z*(y0$3+y)/2;Z1$1+=z;centroidPoint$1(x0$3=x,y0$3=y)}function centroidLineEnd$1(){centroidStream$1.point=centroidPoint$1}function centroidRingStart$1(){centroidStream$1.point=centroidPointFirstRing}function centroidRingEnd$1(){centroidPointRing(x00$1,y00$1)}function centroidPointFirstRing(x,y){centroidStream$1.point=centroidPointRing;centroidPoint$1(x00$1=x0$3=x,y00$1=y0$3=y)}function centroidPointRing(x,y){var dx=x-x0$3,dy=y-y0$3,z=sqrt(dx*dx+dy*dy);X1$1+=z*(x0$3+x)/2;Y1$1+=z*(y0$3+y)/2;Z1$1+=z;z=y0$3*x-x0$3*y;X2$1+=z*(x0$3+x);Y2$1+=z*(y0$3+y);Z2$1+=z*3;centroidPoint$1(x0$3=x,y0$3=y)}function PathContext(context){this._context=context}PathContext.prototype={_radius:4.5,pointRadius:function(_){return this._radius=_,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){if(this._line===0)this._context.closePath();this._point=NaN},point:function(x,y){switch(this._point){case 0:{this._context.moveTo(x,y);this._point=1;break}case 1:{this._context.lineTo(x,y);break}default:{this._context.moveTo(x+this._radius,y);this._context.arc(x,y,this._radius,0,tau$4);break}}},result:noop$2};var lengthSum$1=new Adder,lengthRing,x00$2,y00$2,x0$4,y0$4;var lengthStream$1={point:noop$2,lineStart:function(){lengthStream$1.point=lengthPointFirst$1},lineEnd:function(){if(lengthRing)lengthPoint$1(x00$2,y00$2);lengthStream$1.point=noop$2},polygonStart:function(){lengthRing=true},polygonEnd:function(){lengthRing=null},result:function(){var length=+lengthSum$1;lengthSum$1=new Adder;return length}};function lengthPointFirst$1(x,y){lengthStream$1.point=lengthPoint$1;x00$2=x0$4=x,y00$2=y0$4=y}function lengthPoint$1(x,y){x0$4-=x,y0$4-=y;lengthSum$1.add(sqrt(x0$4*x0$4+y0$4*y0$4));x0$4=x,y0$4=y}function PathString(){this._string=[]}PathString.prototype={_radius:4.5,_circle:circle$1(4.5),pointRadius:function(_){if((_=+_)!==this._radius)this._radius=_,this._circle=null;return this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){if(this._line===0)this._string.push("Z");this._point=NaN},point:function(x,y){switch(this._point){case 0:{this._string.push("M",x,",",y);this._point=1;break}case 1:{this._string.push("L",x,",",y);break}default:{if(this._circle==null)this._circle=circle$1(this._radius);this._string.push("M",x,",",y,this._circle);break}}},result:function(){if(this._string.length){var result=this._string.join("");this._string=[];return result}else{return null}}};function circle$1(radius){return"m0,"+radius+"a"+radius+","+radius+" 0 1,1 0,"+-2*radius+"a"+radius+","+radius+" 0 1,1 0,"+2*radius+"z"}function index$2(projection,context){var pointRadius=4.5,projectionStream,contextStream;function path(object){if(object){if(typeof pointRadius==="function")contextStream.pointRadius(+pointRadius.apply(this,arguments));geoStream(object,projectionStream(contextStream))}return contextStream.result()}path.area=function(object){geoStream(object,projectionStream(areaStream$1));return areaStream$1.result()};path.measure=function(object){geoStream(object,projectionStream(lengthStream$1));return lengthStream$1.result()};path.bounds=function(object){geoStream(object,projectionStream(boundsStream$1));return boundsStream$1.result()};path.centroid=function(object){geoStream(object,projectionStream(centroidStream$1));return centroidStream$1.result()};path.projection=function(_){return arguments.length?(projectionStream=_==null?(projection=null,identity$4):(projection=_).stream,path):projection};path.context=function(_){if(!arguments.length)return context;contextStream=_==null?(context=null,new PathString):new PathContext(context=_);if(typeof pointRadius!=="function")contextStream.pointRadius(pointRadius);return path};path.pointRadius=function(_){if(!arguments.length)return pointRadius;pointRadius=typeof _==="function"?_:(contextStream.pointRadius(+_),+_);return path};return path.projection(projection).context(context)}function transform(methods){return{stream:transformer(methods)}}function transformer(methods){return function(stream){var s=new TransformStream;for(var key in methods)s[key]=methods[key];s.stream=stream;return s}}function TransformStream(){}TransformStream.prototype={constructor:TransformStream,point:function(x,y){this.stream.point(x,y)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function fit(projection,fitBounds,object){var clip=projection.clipExtent&&projection.clipExtent();projection.scale(150).translate([0,0]);if(clip!=null)projection.clipExtent(null);geoStream(object,projection.stream(boundsStream$1));fitBounds(boundsStream$1.result());if(clip!=null)projection.clipExtent(clip);return projection}function fitExtent(projection,extent,object){return fit(projection,function(b){var w=extent[1][0]-extent[0][0],h=extent[1][1]-extent[0][1],k=Math.min(w/(b[1][0]-b[0][0]),h/(b[1][1]-b[0][1])),x=+extent[0][0]+(w-k*(b[1][0]+b[0][0]))/2,y=+extent[0][1]+(h-k*(b[1][1]+b[0][1]))/2;projection.scale(150*k).translate([x,y])},object)}function fitSize(projection,size,object){return fitExtent(projection,[[0,0],size],object)}function fitWidth(projection,width,object){return fit(projection,function(b){var w=+width,k=w/(b[1][0]-b[0][0]),x=(w-k*(b[1][0]+b[0][0]))/2,y=-k*b[0][1];projection.scale(150*k).translate([x,y])},object)}function fitHeight(projection,height,object){return fit(projection,function(b){var h=+height,k=h/(b[1][1]-b[0][1]),x=-k*b[0][0],y=(h-k*(b[1][1]+b[0][1]))/2;projection.scale(150*k).translate([x,y])},object)}var maxDepth=16,cosMinDistance=cos$1(30*radians$1);function resample(project,delta2){return+delta2?resample$1(project,delta2):resampleNone(project)}function resampleNone(project){return transformer({point:function(x,y){x=project(x,y);this.stream.point(x[0],x[1])}})}function resample$1(project,delta2){function resampleLineTo(x0,y0,lambda0,a0,b0,c0,x1,y1,lambda1,a1,b1,c1,depth,stream){var dx=x1-x0,dy=y1-y0,d2=dx*dx+dy*dy;if(d2>4*delta2&&depth--){var a=a0+a1,b=b0+b1,c=c0+c1,m=sqrt(a*a+b*b+c*c),phi2=asin(c/=m),lambda2=abs$2(abs$2(c)-1)<epsilon$4||abs$2(lambda0-lambda1)<epsilon$4?(lambda0+lambda1)/2:atan2(b,a),p=project(lambda2,phi2),x2=p[0],y2=p[1],dx2=x2-x0,dy2=y2-y0,dz=dy*dx2-dx*dy2;if(dz*dz/d2>delta2||abs$2((dx*dx2+dy*dy2)/d2-.5)>.3||a0*a1+b0*b1+c0*c1<cosMinDistance){resampleLineTo(x0,y0,lambda0,a0,b0,c0,x2,y2,lambda2,a/=m,b/=m,c,depth,stream);stream.point(x2,y2);resampleLineTo(x2,y2,lambda2,a,b,c,x1,y1,lambda1,a1,b1,c1,depth,stream)}}}return function(stream){var lambda00,x00,y00,a00,b00,c00,lambda0,x0,y0,a0,b0,c0;var resampleStream={point:point,lineStart:lineStart,lineEnd:lineEnd,polygonStart:function(){stream.polygonStart();resampleStream.lineStart=ringStart},polygonEnd:function(){stream.polygonEnd();resampleStream.lineStart=lineStart}};function point(x,y){x=project(x,y);stream.point(x[0],x[1])}function lineStart(){x0=NaN;resampleStream.point=linePoint;stream.lineStart()}function linePoint(lambda,phi){var c=cartesian([lambda,phi]),p=project(lambda,phi);resampleLineTo(x0,y0,lambda0,a0,b0,c0,x0=p[0],y0=p[1],lambda0=lambda,a0=c[0],b0=c[1],c0=c[2],maxDepth,stream);stream.point(x0,y0)}function lineEnd(){resampleStream.point=point;stream.lineEnd()}function ringStart(){lineStart();resampleStream.point=ringPoint;resampleStream.lineEnd=ringEnd}function ringPoint(lambda,phi){linePoint(lambda00=lambda,phi),x00=x0,y00=y0,a00=a0,b00=b0,c00=c0;resampleStream.point=linePoint}function ringEnd(){resampleLineTo(x0,y0,lambda0,a0,b0,c0,x00,y00,lambda00,a00,b00,c00,maxDepth,stream);resampleStream.lineEnd=lineEnd;lineEnd()}return resampleStream}}var transformRadians=transformer({point:function(x,y){this.stream.point(x*radians$1,y*radians$1)}});function transformRotate(rotate){return transformer({point:function(x,y){var r=rotate(x,y);return this.stream.point(r[0],r[1])}})}function scaleTranslate(k,dx,dy,sx,sy){function transform(x,y){x*=sx;y*=sy;return[dx+k*x,dy-k*y]}transform.invert=function(x,y){return[(x-dx)/k*sx,(dy-y)/k*sy]};return transform}function scaleTranslateRotate(k,dx,dy,sx,sy,alpha){if(!alpha)return scaleTranslate(k,dx,dy,sx,sy);var cosAlpha=cos$1(alpha),sinAlpha=sin$1(alpha),a=cosAlpha*k,b=sinAlpha*k,ai=cosAlpha/k,bi=sinAlpha/k,ci=(sinAlpha*dy-cosAlpha*dx)/k,fi=(sinAlpha*dx+cosAlpha*dy)/k;function transform(x,y){x*=sx;y*=sy;return[a*x-b*y+dx,dy-b*x-a*y]}transform.invert=function(x,y){return[sx*(ai*x-bi*y+ci),sy*(fi-bi*x-ai*y)]};return transform}function projection(project){return projectionMutator(function(){return project})()}function projectionMutator(projectAt){var project,k=150,x=480,y=250,lambda=0,phi=0,deltaLambda=0,deltaPhi=0,deltaGamma=0,rotate,alpha=0,sx=1,sy=1,theta=null,preclip=clipAntimeridian,x0=null,y0,x1,y1,postclip=identity$4,delta2=.5,projectResample,projectTransform,projectRotateTransform,cache,cacheStream;function projection(point){return projectRotateTransform(point[0]*radians$1,point[1]*radians$1)}function invert(point){point=projectRotateTransform.invert(point[0],point[1]);return point&&[point[0]*degrees$2,point[1]*degrees$2]}projection.stream=function(stream){return cache&&cacheStream===stream?cache:cache=transformRadians(transformRotate(rotate)(preclip(projectResample(postclip(cacheStream=stream)))))};projection.preclip=function(_){return arguments.length?(preclip=_,theta=undefined,reset()):preclip};projection.postclip=function(_){return arguments.length?(postclip=_,x0=y0=x1=y1=null,reset()):postclip};projection.clipAngle=function(_){return arguments.length?(preclip=+_?clipCircle(theta=_*radians$1):(theta=null,clipAntimeridian),reset()):theta*degrees$2};projection.clipExtent=function(_){return arguments.length?(postclip=_==null?(x0=y0=x1=y1=null,identity$4):clipRectangle(x0=+_[0][0],y0=+_[0][1],x1=+_[1][0],y1=+_[1][1]),reset()):x0==null?null:[[x0,y0],[x1,y1]]};projection.scale=function(_){return arguments.length?(k=+_,recenter()):k};projection.translate=function(_){return arguments.length?(x=+_[0],y=+_[1],recenter()):[x,y]};projection.center=function(_){return arguments.length?(lambda=_[0]%360*radians$1,phi=_[1]%360*radians$1,recenter()):[lambda*degrees$2,phi*degrees$2]};projection.rotate=function(_){return arguments.length?(deltaLambda=_[0]%360*radians$1,deltaPhi=_[1]%360*radians$1,deltaGamma=_.length>2?_[2]%360*radians$1:0,recenter()):[deltaLambda*degrees$2,deltaPhi*degrees$2,deltaGamma*degrees$2]};projection.angle=function(_){return arguments.length?(alpha=_%360*radians$1,recenter()):alpha*degrees$2};projection.reflectX=function(_){return arguments.length?(sx=_?-1:1,recenter()):sx<0};projection.reflectY=function(_){return arguments.length?(sy=_?-1:1,recenter()):sy<0};projection.precision=function(_){return arguments.length?(projectResample=resample(projectTransform,delta2=_*_),reset()):sqrt(delta2)};projection.fitExtent=function(extent,object){return fitExtent(projection,extent,object)};projection.fitSize=function(size,object){return fitSize(projection,size,object)};projection.fitWidth=function(width,object){return fitWidth(projection,width,object)};projection.fitHeight=function(height,object){return fitHeight(projection,height,object)};function recenter(){var center=scaleTranslateRotate(k,0,0,sx,sy,alpha).apply(null,project(lambda,phi)),transform=scaleTranslateRotate(k,x-center[0],y-center[1],sx,sy,alpha);rotate=rotateRadians(deltaLambda,deltaPhi,deltaGamma);projectTransform=compose(project,transform);projectRotateTransform=compose(rotate,projectTransform);projectResample=resample(projectTransform,delta2);return reset()}function reset(){cache=cacheStream=null;return projection}return function(){project=projectAt.apply(this,arguments);projection.invert=project.invert&&invert;return recenter()}}function conicProjection(projectAt){var phi0=0,phi1=pi$3/3,m=projectionMutator(projectAt),p=m(phi0,phi1);p.parallels=function(_){return arguments.length?m(phi0=_[0]*radians$1,phi1=_[1]*radians$1):[phi0*degrees$2,phi1*degrees$2]};return p}function cylindricalEqualAreaRaw(phi0){var cosPhi0=cos$1(phi0);function forward(lambda,phi){return[lambda*cosPhi0,sin$1(phi)/cosPhi0]}forward.invert=function(x,y){return[x/cosPhi0,asin(y*cosPhi0)]};return forward}function conicEqualAreaRaw(y0,y1){var sy0=sin$1(y0),n=(sy0+sin$1(y1))/2;if(abs$2(n)<epsilon$4)return cylindricalEqualAreaRaw(y0);var c=1+sy0*(2*n-sy0),r0=sqrt(c)/n;function project(x,y){var r=sqrt(c-2*n*sin$1(y))/n;return[r*sin$1(x*=n),r0-r*cos$1(x)]}project.invert=function(x,y){var r0y=r0-y,l=atan2(x,abs$2(r0y))*sign(r0y);if(r0y*n<0)l-=pi$3*sign(x)*sign(r0y);return[l/n,asin((c-(x*x+r0y*r0y)*n*n)/(2*n))]};return project}function conicEqualArea(){return conicProjection(conicEqualAreaRaw).scale(155.424).center([0,33.6442])}function albers(){return conicEqualArea().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function multiplex(streams){var n=streams.length;return{point:function(x,y){var i=-1;while(++i<n)streams[i].point(x,y)},sphere:function(){var i=-1;while(++i<n)streams[i].sphere()},lineStart:function(){var i=-1;while(++i<n)streams[i].lineStart()},lineEnd:function(){var i=-1;while(++i<n)streams[i].lineEnd()},polygonStart:function(){var i=-1;while(++i<n)streams[i].polygonStart()},polygonEnd:function(){var i=-1;while(++i<n)streams[i].polygonEnd()}}}function albersUsa(){var cache,cacheStream,lower48=albers(),lower48Point,alaska=conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),alaskaPoint,hawaii=conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),hawaiiPoint,point,pointStream={point:function(x,y){point=[x,y]}};function albersUsa(coordinates){var x=coordinates[0],y=coordinates[1];return point=null,(lower48Point.point(x,y),point)||(alaskaPoint.point(x,y),point)||(hawaiiPoint.point(x,y),point)}albersUsa.invert=function(coordinates){var k=lower48.scale(),t=lower48.translate(),x=(coordinates[0]-t[0])/k,y=(coordinates[1]-t[1])/k;return(y>=.12&&y<.234&&x>=-.425&&x<-.214?alaska:y>=.166&&y<.234&&x>=-.214&&x<-.115?hawaii:lower48).invert(coordinates)};albersUsa.stream=function(stream){return cache&&cacheStream===stream?cache:cache=multiplex([lower48.stream(cacheStream=stream),alaska.stream(stream),hawaii.stream(stream)])};albersUsa.precision=function(_){if(!arguments.length)return lower48.precision();lower48.precision(_),alaska.precision(_),hawaii.precision(_);return reset()};albersUsa.scale=function(_){if(!arguments.length)return lower48.scale();lower48.scale(_),alaska.scale(_*.35),hawaii.scale(_);return albersUsa.translate(lower48.translate())};albersUsa.translate=function(_){if(!arguments.length)return lower48.translate();var k=lower48.scale(),x=+_[0],y=+_[1];lower48Point=lower48.translate(_).clipExtent([[x-.455*k,y-.238*k],[x+.455*k,y+.238*k]]).stream(pointStream);alaskaPoint=alaska.translate([x-.307*k,y+.201*k]).clipExtent([[x-.425*k+epsilon$4,y+.12*k+epsilon$4],[x-.214*k-epsilon$4,y+.234*k-epsilon$4]]).stream(pointStream);hawaiiPoint=hawaii.translate([x-.205*k,y+.212*k]).clipExtent([[x-.214*k+epsilon$4,y+.166*k+epsilon$4],[x-.115*k-epsilon$4,y+.234*k-epsilon$4]]).stream(pointStream);return reset()};albersUsa.fitExtent=function(extent,object){return fitExtent(albersUsa,extent,object)};albersUsa.fitSize=function(size,object){return fitSize(albersUsa,size,object)};albersUsa.fitWidth=function(width,object){return fitWidth(albersUsa,width,object)};albersUsa.fitHeight=function(height,object){return fitHeight(albersUsa,height,object)};function reset(){cache=cacheStream=null;return albersUsa}return albersUsa.scale(1070)}function azimuthalRaw(scale){return function(x,y){var cx=cos$1(x),cy=cos$1(y),k=scale(cx*cy);if(k===Infinity)return[2,0];return[k*cy*sin$1(x),k*sin$1(y)]}}function azimuthalInvert(angle){return function(x,y){var z=sqrt(x*x+y*y),c=angle(z),sc=sin$1(c),cc=cos$1(c);return[atan2(x*sc,z*cc),asin(z&&y*sc/z)]}}var azimuthalEqualAreaRaw=azimuthalRaw(function(cxcy){return sqrt(2/(1+cxcy))});azimuthalEqualAreaRaw.invert=azimuthalInvert(function(z){return 2*asin(z/2)});function azimuthalEqualArea(){return projection(azimuthalEqualAreaRaw).scale(124.75).clipAngle(180-.001)}var azimuthalEquidistantRaw=azimuthalRaw(function(c){return(c=acos(c))&&c/sin$1(c)});azimuthalEquidistantRaw.invert=azimuthalInvert(function(z){return z});function azimuthalEquidistant(){return projection(azimuthalEquidistantRaw).scale(79.4188).clipAngle(180-.001)}function mercatorRaw(lambda,phi){return[lambda,log(tan((halfPi$2+phi)/2))]}mercatorRaw.invert=function(x,y){return[x,2*atan(exp(y))-halfPi$2]};function mercator(){return mercatorProjection(mercatorRaw).scale(961/tau$4)}function mercatorProjection(project){var m=projection(project),center=m.center,scale=m.scale,translate=m.translate,clipExtent=m.clipExtent,x0=null,y0,x1,y1;m.scale=function(_){return arguments.length?(scale(_),reclip()):scale()};m.translate=function(_){return arguments.length?(translate(_),reclip()):translate()};m.center=function(_){return arguments.length?(center(_),reclip()):center()};m.clipExtent=function(_){return arguments.length?(_==null?x0=y0=x1=y1=null:(x0=+_[0][0],y0=+_[0][1],x1=+_[1][0],y1=+_[1][1]),reclip()):x0==null?null:[[x0,y0],[x1,y1]]};function reclip(){var k=pi$3*scale(),t=m(rotation(m.rotate()).invert([0,0]));return clipExtent(x0==null?[[t[0]-k,t[1]-k],[t[0]+k,t[1]+k]]:project===mercatorRaw?[[Math.max(t[0]-k,x0),y0],[Math.min(t[0]+k,x1),y1]]:[[x0,Math.max(t[1]-k,y0)],[x1,Math.min(t[1]+k,y1)]])}return reclip()}function tany(y){return tan((halfPi$2+y)/2)}function conicConformalRaw(y0,y1){var cy0=cos$1(y0),n=y0===y1?sin$1(y0):log(cy0/cos$1(y1))/log(tany(y1)/tany(y0)),f=cy0*pow$1(tany(y0),n)/n;if(!n)return mercatorRaw;function project(x,y){if(f>0){if(y<-halfPi$2+epsilon$4)y=-halfPi$2+epsilon$4}else{if(y>halfPi$2-epsilon$4)y=halfPi$2-epsilon$4}var r=f/pow$1(tany(y),n);return[r*sin$1(n*x),f-r*cos$1(n*x)]}project.invert=function(x,y){var fy=f-y,r=sign(n)*sqrt(x*x+fy*fy),l=atan2(x,abs$2(fy))*sign(fy);if(fy*n<0)l-=pi$3*sign(x)*sign(fy);return[l/n,2*atan(pow$1(f/r,1/n))-halfPi$2]};return project}function conicConformal(){return conicProjection(conicConformalRaw).scale(109.5).parallels([30,30])}function equirectangularRaw(lambda,phi){return[lambda,phi]}equirectangularRaw.invert=equirectangularRaw;function equirectangular(){return projection(equirectangularRaw).scale(152.63)}function conicEquidistantRaw(y0,y1){var cy0=cos$1(y0),n=y0===y1?sin$1(y0):(cy0-cos$1(y1))/(y1-y0),g=cy0/n+y0;if(abs$2(n)<epsilon$4)return equirectangularRaw;function project(x,y){var gy=g-y,nx=n*x;return[gy*sin$1(nx),g-gy*cos$1(nx)]}project.invert=function(x,y){var gy=g-y,l=atan2(x,abs$2(gy))*sign(gy);if(gy*n<0)l-=pi$3*sign(x)*sign(gy);return[l/n,g-sign(n)*sqrt(x*x+gy*gy)]};return project}function conicEquidistant(){return conicProjection(conicEquidistantRaw).scale(131.154).center([0,13.9389])}var A1=1.340264,A2=-.081106,A3=893e-6,A4=.003796,M=sqrt(3)/2,iterations=12;function equalEarthRaw(lambda,phi){var l=asin(M*sin$1(phi)),l2=l*l,l6=l2*l2*l2;return[lambda*cos$1(l)/(M*(A1+3*A2*l2+l6*(7*A3+9*A4*l2))),l*(A1+A2*l2+l6*(A3+A4*l2))]}equalEarthRaw.invert=function(x,y){var l=y,l2=l*l,l6=l2*l2*l2;for(var i=0,delta,fy,fpy;i<iterations;++i){fy=l*(A1+A2*l2+l6*(A3+A4*l2))-y;fpy=A1+3*A2*l2+l6*(7*A3+9*A4*l2);l-=delta=fy/fpy,l2=l*l,l6=l2*l2*l2;if(abs$2(delta)<epsilon2$1)break}return[M*x*(A1+3*A2*l2+l6*(7*A3+9*A4*l2))/cos$1(l),asin(sin$1(l)/M)]};function equalEarth(){return projection(equalEarthRaw).scale(177.158)}function gnomonicRaw(x,y){var cy=cos$1(y),k=cos$1(x)*cy;return[cy*sin$1(x)/k,sin$1(y)/k]}gnomonicRaw.invert=azimuthalInvert(atan);function gnomonic(){return projection(gnomonicRaw).scale(144.049).clipAngle(60)}function identity$5(){var k=1,tx=0,ty=0,sx=1,sy=1,alpha=0,ca,sa,x0=null,y0,x1,y1,kx=1,ky=1,transform=transformer({point:function(x,y){var p=projection([x,y]);this.stream.point(p[0],p[1])}}),postclip=identity$4,cache,cacheStream;function reset(){kx=k*sx;ky=k*sy;cache=cacheStream=null;return projection}function projection(p){var x=p[0]*kx,y=p[1]*ky;if(alpha){var t=y*ca-x*sa;x=x*ca+y*sa;y=t}return[x+tx,y+ty]}projection.invert=function(p){var x=p[0]-tx,y=p[1]-ty;if(alpha){var t=y*ca+x*sa;x=x*ca-y*sa;y=t}return[x/kx,y/ky]};projection.stream=function(stream){return cache&&cacheStream===stream?cache:cache=transform(postclip(cacheStream=stream))};projection.postclip=function(_){return arguments.length?(postclip=_,x0=y0=x1=y1=null,reset()):postclip};projection.clipExtent=function(_){return arguments.length?(postclip=_==null?(x0=y0=x1=y1=null,identity$4):clipRectangle(x0=+_[0][0],y0=+_[0][1],x1=+_[1][0],y1=+_[1][1]),reset()):x0==null?null:[[x0,y0],[x1,y1]]};projection.scale=function(_){return arguments.length?(k=+_,reset()):k};projection.translate=function(_){return arguments.length?(tx=+_[0],ty=+_[1],reset()):[tx,ty]};projection.angle=function(_){return arguments.length?(alpha=_%360*radians$1,sa=sin$1(alpha),ca=cos$1(alpha),reset()):alpha*degrees$2};projection.reflectX=function(_){return arguments.length?(sx=_?-1:1,reset()):sx<0};projection.reflectY=function(_){return arguments.length?(sy=_?-1:1,reset()):sy<0};projection.fitExtent=function(extent,object){return fitExtent(projection,extent,object)};projection.fitSize=function(size,object){return fitSize(projection,size,object)};projection.fitWidth=function(width,object){return fitWidth(projection,width,object)};projection.fitHeight=function(height,object){return fitHeight(projection,height,object)};return projection}function naturalEarth1Raw(lambda,phi){var phi2=phi*phi,phi4=phi2*phi2;return[lambda*(.8707-.131979*phi2+phi4*(-.013791+phi4*(.003971*phi2-.001529*phi4))),phi*(1.007226+phi2*(.015085+phi4*(-.044475+.028874*phi2-.005916*phi4)))]}naturalEarth1Raw.invert=function(x,y){var phi=y,i=25,delta;do{var phi2=phi*phi,phi4=phi2*phi2;phi-=delta=(phi*(1.007226+phi2*(.015085+phi4*(-.044475+.028874*phi2-.005916*phi4)))-y)/(1.007226+phi2*(.015085*3+phi4*(-.044475*7+.028874*9*phi2-.005916*11*phi4)))}while(abs$2(delta)>epsilon$4&&--i>0);return[x/(.8707+(phi2=phi*phi)*(-.131979+phi2*(-.013791+phi2*phi2*phi2*(.003971-.001529*phi2)))),phi]};function naturalEarth1(){return projection(naturalEarth1Raw).scale(175.295)}function orthographicRaw(x,y){return[cos$1(y)*sin$1(x),sin$1(y)]}orthographicRaw.invert=azimuthalInvert(asin);function orthographic(){return projection(orthographicRaw).scale(249.5).clipAngle(90+epsilon$4)}function stereographicRaw(x,y){var cy=cos$1(y),k=1+cos$1(x)*cy;return[cy*sin$1(x)/k,sin$1(y)/k]}stereographicRaw.invert=azimuthalInvert(function(z){return 2*atan(z)});function stereographic(){return projection(stereographicRaw).scale(250).clipAngle(142)}function transverseMercatorRaw(lambda,phi){return[log(tan((halfPi$2+phi)/2)),-lambda]}transverseMercatorRaw.invert=function(x,y){return[-y,2*atan(exp(x))-halfPi$2]};function transverseMercator(){var m=mercatorProjection(transverseMercatorRaw),center=m.center,rotate=m.rotate;m.center=function(_){return arguments.length?center([-_[1],_[0]]):(_=center(),[_[1],-_[0]])};m.rotate=function(_){return arguments.length?rotate([_[0],_[1],_.length>2?_[2]+90:90]):(_=rotate(),[_[0],_[1],_[2]-90])};return rotate([0,0,90]).scale(159.155)}function defaultSeparation(a,b){return a.parent===b.parent?1:2}function meanX(children){return children.reduce(meanXReduce,0)/children.length}function meanXReduce(x,c){return x+c.x}function maxY(children){return 1+children.reduce(maxYReduce,0)}function maxYReduce(y,c){return Math.max(y,c.y)}function leafLeft(node){var children;while(children=node.children)node=children[0];return node}function leafRight(node){var children;while(children=node.children)node=children[children.length-1];return node}function cluster(){var separation=defaultSeparation,dx=1,dy=1,nodeSize=false;function cluster(root){var previousNode,x=0;root.eachAfter(function(node){var children=node.children;if(children){node.x=meanX(children);node.y=maxY(children)}else{node.x=previousNode?x+=separation(node,previousNode):0;node.y=0;previousNode=node}});var left=leafLeft(root),right=leafRight(root),x0=left.x-separation(left,right)/2,x1=right.x+separation(right,left)/2;return root.eachAfter(nodeSize?function(node){node.x=(node.x-root.x)*dx;node.y=(root.y-node.y)*dy}:function(node){node.x=(node.x-x0)/(x1-x0)*dx;node.y=(1-(root.y?node.y/root.y:1))*dy})}cluster.separation=function(x){return arguments.length?(separation=x,cluster):separation};cluster.size=function(x){return arguments.length?(nodeSize=false,dx=+x[0],dy=+x[1],cluster):nodeSize?null:[dx,dy]};cluster.nodeSize=function(x){return arguments.length?(nodeSize=true,dx=+x[0],dy=+x[1],cluster):nodeSize?[dx,dy]:null};return cluster}function count$1(node){var sum=0,children=node.children,i=children&&children.length;if(!i)sum=1;else while(--i>=0)sum+=children[i].value;node.value=sum}function node_count(){return this.eachAfter(count$1)}function node_each(callback,that){let index=-1;for(const node of this){callback.call(that,node,++index,this)}return this}function node_eachBefore(callback,that){var node=this,nodes=[node],children,i,index=-1;while(node=nodes.pop()){callback.call(that,node,++index,this);if(children=node.children){for(i=children.length-1;i>=0;--i){nodes.push(children[i])}}}return this}function node_eachAfter(callback,that){var node=this,nodes=[node],next=[],children,i,n,index=-1;while(node=nodes.pop()){next.push(node);if(children=node.children){for(i=0,n=children.length;i<n;++i){nodes.push(children[i])}}}while(node=next.pop()){callback.call(that,node,++index,this)}return this}function node_find(callback,that){let index=-1;for(const node of this){if(callback.call(that,node,++index,this)){return node}}}function node_sum(value){return this.eachAfter(function(node){var sum=+value(node.data)||0,children=node.children,i=children&&children.length;while(--i>=0)sum+=children[i].value;node.value=sum})}function node_sort(compare){return this.eachBefore(function(node){if(node.children){node.children.sort(compare)}})}function node_path(end){var start=this,ancestor=leastCommonAncestor(start,end),nodes=[start];while(start!==ancestor){start=start.parent;nodes.push(start)}var k=nodes.length;while(end!==ancestor){nodes.splice(k,0,end);end=end.parent}return nodes}function leastCommonAncestor(a,b){if(a===b)return a;var aNodes=a.ancestors(),bNodes=b.ancestors(),c=null;a=aNodes.pop();b=bNodes.pop();while(a===b){c=a;a=aNodes.pop();b=bNodes.pop()}return c}function node_ancestors(){var node=this,nodes=[node];while(node=node.parent){nodes.push(node)}return nodes}function node_descendants(){return Array.from(this)}function node_leaves(){var leaves=[];this.eachBefore(function(node){if(!node.children){leaves.push(node)}});return leaves}function node_links(){var root=this,links=[];root.each(function(node){if(node!==root){links.push({source:node.parent,target:node})}});return links}function*node_iterator(){var node=this,current,next=[node],children,i,n;do{current=next.reverse(),next=[];while(node=current.pop()){yield node;if(children=node.children){for(i=0,n=children.length;i<n;++i){next.push(children[i])}}}}while(next.length)}function hierarchy(data,children){if(data instanceof Map){data=[undefined,data];if(children===undefined)children=mapChildren}else if(children===undefined){children=objectChildren}var root=new Node(data),node,nodes=[root],child,childs,i,n;while(node=nodes.pop()){if((childs=children(node.data))&&(n=(childs=Array.from(childs)).length)){node.children=childs;for(i=n-1;i>=0;--i){nodes.push(child=childs[i]=new Node(childs[i]));child.parent=node;child.depth=node.depth+1}}}return root.eachBefore(computeHeight)}function node_copy(){return hierarchy(this).eachBefore(copyData)}function objectChildren(d){return d.children}function mapChildren(d){return Array.isArray(d)?d[1]:null}function copyData(node){if(node.data.value!==undefined)node.value=node.data.value;node.data=node.data.data}function computeHeight(node){var height=0;do{node.height=height}while((node=node.parent)&&node.height<++height)}function Node(data){this.data=data;this.depth=this.height=0;this.parent=null}Node.prototype=hierarchy.prototype={constructor:Node,count:node_count,each:node_each,eachAfter:node_eachAfter,eachBefore:node_eachBefore,find:node_find,sum:node_sum,sort:node_sort,path:node_path,ancestors:node_ancestors,descendants:node_descendants,leaves:node_leaves,links:node_links,copy:node_copy,[Symbol.iterator]:node_iterator};function array$4(x){return typeof x==="object"&&"length"in x?x:Array.from(x)}function shuffle$1(array){var m=array.length,t,i;while(m){i=Math.random()*m--|0;t=array[m];array[m]=array[i];array[i]=t}return array}function enclose(circles){var i=0,n=(circles=shuffle$1(Array.from(circles))).length,B=[],p,e;while(i<n){p=circles[i];if(e&&enclosesWeak(e,p))++i;else e=encloseBasis(B=extendBasis(B,p)),i=0}return e}function extendBasis(B,p){var i,j;if(enclosesWeakAll(p,B))return[p];for(i=0;i<B.length;++i){if(enclosesNot(p,B[i])&&enclosesWeakAll(encloseBasis2(B[i],p),B)){return[B[i],p]}}for(i=0;i<B.length-1;++i){for(j=i+1;j<B.length;++j){if(enclosesNot(encloseBasis2(B[i],B[j]),p)&&enclosesNot(encloseBasis2(B[i],p),B[j])&&enclosesNot(encloseBasis2(B[j],p),B[i])&&enclosesWeakAll(encloseBasis3(B[i],B[j],p),B)){return[B[i],B[j],p]}}}throw new Error}function enclosesNot(a,b){var dr=a.r-b.r,dx=b.x-a.x,dy=b.y-a.y;return dr<0||dr*dr<dx*dx+dy*dy}function enclosesWeak(a,b){var dr=a.r-b.r+Math.max(a.r,b.r,1)*1e-9,dx=b.x-a.x,dy=b.y-a.y;return dr>0&&dr*dr>dx*dx+dy*dy}function enclosesWeakAll(a,B){for(var i=0;i<B.length;++i){if(!enclosesWeak(a,B[i])){return false}}return true}function encloseBasis(B){switch(B.length){case 1:return encloseBasis1(B[0]);case 2:return encloseBasis2(B[0],B[1]);case 3:return encloseBasis3(B[0],B[1],B[2])}}function encloseBasis1(a){return{x:a.x,y:a.y,r:a.r}}function encloseBasis2(a,b){var x1=a.x,y1=a.y,r1=a.r,x2=b.x,y2=b.y,r2=b.r,x21=x2-x1,y21=y2-y1,r21=r2-r1,l=Math.sqrt(x21*x21+y21*y21);return{x:(x1+x2+x21/l*r21)/2,y:(y1+y2+y21/l*r21)/2,r:(l+r1+r2)/2}}function encloseBasis3(a,b,c){var x1=a.x,y1=a.y,r1=a.r,x2=b.x,y2=b.y,r2=b.r,x3=c.x,y3=c.y,r3=c.r,a2=x1-x2,a3=x1-x3,b2=y1-y2,b3=y1-y3,c2=r2-r1,c3=r3-r1,d1=x1*x1+y1*y1-r1*r1,d2=d1-x2*x2-y2*y2+r2*r2,d3=d1-x3*x3-y3*y3+r3*r3,ab=a3*b2-a2*b3,xa=(b2*d3-b3*d2)/(ab*2)-x1,xb=(b3*c2-b2*c3)/ab,ya=(a3*d2-a2*d3)/(ab*2)-y1,yb=(a2*c3-a3*c2)/ab,A=xb*xb+yb*yb-1,B=2*(r1+xa*xb+ya*yb),C=xa*xa+ya*ya-r1*r1,r=-(A?(B+Math.sqrt(B*B-4*A*C))/(2*A):C/B);return{x:x1+xa+xb*r,y:y1+ya+yb*r,r:r}}function place(b,a,c){var dx=b.x-a.x,x,a2,dy=b.y-a.y,y,b2,d2=dx*dx+dy*dy;if(d2){a2=a.r+c.r,a2*=a2;b2=b.r+c.r,b2*=b2;if(a2>b2){x=(d2+b2-a2)/(2*d2);y=Math.sqrt(Math.max(0,b2/d2-x*x));c.x=b.x-x*dx-y*dy;c.y=b.y-x*dy+y*dx}else{x=(d2+a2-b2)/(2*d2);y=Math.sqrt(Math.max(0,a2/d2-x*x));c.x=a.x+x*dx-y*dy;c.y=a.y+x*dy+y*dx}}else{c.x=a.x+c.r;c.y=a.y}}function intersects(a,b){var dr=a.r+b.r-1e-6,dx=b.x-a.x,dy=b.y-a.y;return dr>0&&dr*dr>dx*dx+dy*dy}function score(node){var a=node._,b=node.next._,ab=a.r+b.r,dx=(a.x*b.r+b.x*a.r)/ab,dy=(a.y*b.r+b.y*a.r)/ab;return dx*dx+dy*dy}function Node$1(circle){this._=circle;this.next=null;this.previous=null}function packEnclose(circles){if(!(n=(circles=array$4(circles)).length))return 0;var a,b,c,n,aa,ca,i,j,k,sj,sk;a=circles[0],a.x=0,a.y=0;if(!(n>1))return a.r;b=circles[1],a.x=-b.r,b.x=a.r,b.y=0;if(!(n>2))return a.r+b.r;place(b,a,c=circles[2]);a=new Node$1(a),b=new Node$1(b),c=new Node$1(c);a.next=c.previous=b;b.next=a.previous=c;c.next=b.previous=a;pack:for(i=3;i<n;++i){place(a._,b._,c=circles[i]),c=new Node$1(c);j=b.next,k=a.previous,sj=b._.r,sk=a._.r;do{if(sj<=sk){if(intersects(j._,c._)){b=j,a.next=b,b.previous=a,--i;continue pack}sj+=j._.r,j=j.next}else{if(intersects(k._,c._)){a=k,a.next=b,b.previous=a,--i;continue pack}sk+=k._.r,k=k.previous}}while(j!==k.next);c.previous=a,c.next=b,a.next=b.previous=b=c;aa=score(a);while((c=c.next)!==b){if((ca=score(c))<aa){a=c,aa=ca}}b=a.next}a=[b._],c=b;while((c=c.next)!==b)a.push(c._);c=enclose(a);for(i=0;i<n;++i)a=circles[i],a.x-=c.x,a.y-=c.y;return c.r}function siblings(circles){packEnclose(circles);return circles}function optional(f){return f==null?null:required(f)}function required(f){if(typeof f!=="function")throw new Error;return f}function constantZero(){return 0}function constant$9(x){return function(){return x}}function defaultRadius$1(d){return Math.sqrt(d.value)}function index$3(){var radius=null,dx=1,dy=1,padding=constantZero;function pack(root){root.x=dx/2,root.y=dy/2;if(radius){root.eachBefore(radiusLeaf(radius)).eachAfter(packChildren(padding,.5)).eachBefore(translateChild(1))}else{root.eachBefore(radiusLeaf(defaultRadius$1)).eachAfter(packChildren(constantZero,1)).eachAfter(packChildren(padding,root.r/Math.min(dx,dy))).eachBefore(translateChild(Math.min(dx,dy)/(2*root.r)))}return root}pack.radius=function(x){return arguments.length?(radius=optional(x),pack):radius};pack.size=function(x){return arguments.length?(dx=+x[0],dy=+x[1],pack):[dx,dy]};pack.padding=function(x){return arguments.length?(padding=typeof x==="function"?x:constant$9(+x),pack):padding};return pack}function radiusLeaf(radius){return function(node){if(!node.children){node.r=Math.max(0,+radius(node)||0)}}}function packChildren(padding,k){return function(node){if(children=node.children){var children,i,n=children.length,r=padding(node)*k||0,e;if(r)for(i=0;i<n;++i)children[i].r+=r;e=packEnclose(children);if(r)for(i=0;i<n;++i)children[i].r-=r;node.r=e+r}}}function translateChild(k){return function(node){var parent=node.parent;node.r*=k;if(parent){node.x=parent.x+k*node.x;node.y=parent.y+k*node.y}}}function roundNode(node){node.x0=Math.round(node.x0);node.y0=Math.round(node.y0);node.x1=Math.round(node.x1);node.y1=Math.round(node.y1)}function treemapDice(parent,x0,y0,x1,y1){var nodes=parent.children,node,i=-1,n=nodes.length,k=parent.value&&(x1-x0)/parent.value;while(++i<n){node=nodes[i],node.y0=y0,node.y1=y1;node.x0=x0,node.x1=x0+=node.value*k}}function partition(){var dx=1,dy=1,padding=0,round=false;function partition(root){var n=root.height+1;root.x0=root.y0=padding;root.x1=dx;root.y1=dy/n;root.eachBefore(positionNode(dy,n));if(round)root.eachBefore(roundNode);return root}function positionNode(dy,n){return function(node){if(node.children){treemapDice(node,node.x0,dy*(node.depth+1)/n,node.x1,dy*(node.depth+2)/n)}var x0=node.x0,y0=node.y0,x1=node.x1-padding,y1=node.y1-padding;if(x1<x0)x0=x1=(x0+x1)/2;if(y1<y0)y0=y1=(y0+y1)/2;node.x0=x0;node.y0=y0;node.x1=x1;node.y1=y1}}partition.round=function(x){return arguments.length?(round=!!x,partition):round};partition.size=function(x){return arguments.length?(dx=+x[0],dy=+x[1],partition):[dx,dy]};partition.padding=function(x){return arguments.length?(padding=+x,partition):padding};return partition}var preroot={depth:-1},ambiguous={};function defaultId(d){return d.id}function defaultParentId(d){return d.parentId}function stratify(){var id=defaultId,parentId=defaultParentId;function stratify(data){var nodes=Array.from(data),n=nodes.length,d,i,root,parent,node,nodeId,nodeKey,nodeByKey=new Map;for(i=0;i<n;++i){d=nodes[i],node=nodes[i]=new Node(d);if((nodeId=id(d,i,data))!=null&&(nodeId+="")){nodeKey=node.id=nodeId;nodeByKey.set(nodeKey,nodeByKey.has(nodeKey)?ambiguous:node)}if((nodeId=parentId(d,i,data))!=null&&(nodeId+="")){node.parent=nodeId}}for(i=0;i<n;++i){node=nodes[i];if(nodeId=node.parent){parent=nodeByKey.get(nodeId);if(!parent)throw new Error("missing: "+nodeId);if(parent===ambiguous)throw new Error("ambiguous: "+nodeId);if(parent.children)parent.children.push(node);else parent.children=[node];node.parent=parent}else{if(root)throw new Error("multiple roots");root=node}}if(!root)throw new Error("no root");root.parent=preroot;root.eachBefore(function(node){node.depth=node.parent.depth+1;--n}).eachBefore(computeHeight);root.parent=null;if(n>0)throw new Error("cycle");return root}stratify.id=function(x){return arguments.length?(id=required(x),stratify):id};stratify.parentId=function(x){return arguments.length?(parentId=required(x),stratify):parentId};return stratify}function defaultSeparation$1(a,b){return a.parent===b.parent?1:2}function nextLeft(v){var children=v.children;return children?children[0]:v.t}function nextRight(v){var children=v.children;return children?children[children.length-1]:v.t}function moveSubtree(wm,wp,shift){var change=shift/(wp.i-wm.i);wp.c-=change;wp.s+=shift;wm.c+=change;wp.z+=shift;wp.m+=shift}function executeShifts(v){var shift=0,change=0,children=v.children,i=children.length,w;while(--i>=0){w=children[i];w.z+=shift;w.m+=shift;shift+=w.s+(change+=w.c)}}function nextAncestor(vim,v,ancestor){return vim.a.parent===v.parent?vim.a:ancestor}function TreeNode(node,i){this._=node;this.parent=null;this.children=null;this.A=null;this.a=this;this.z=0;this.m=0;this.c=0;this.s=0;this.t=null;this.i=i}TreeNode.prototype=Object.create(Node.prototype);function treeRoot(root){var tree=new TreeNode(root,0),node,nodes=[tree],child,children,i,n;while(node=nodes.pop()){if(children=node._.children){node.children=new Array(n=children.length);for(i=n-1;i>=0;--i){nodes.push(child=node.children[i]=new TreeNode(children[i],i));child.parent=node}}}(tree.parent=new TreeNode(null,0)).children=[tree];return tree}function tree(){var separation=defaultSeparation$1,dx=1,dy=1,nodeSize=null;function tree(root){var t=treeRoot(root);t.eachAfter(firstWalk),t.parent.m=-t.z;t.eachBefore(secondWalk);if(nodeSize)root.eachBefore(sizeNode);else{var left=root,right=root,bottom=root;root.eachBefore(function(node){if(node.x<left.x)left=node;if(node.x>right.x)right=node;if(node.depth>bottom.depth)bottom=node});var s=left===right?1:separation(left,right)/2,tx=s-left.x,kx=dx/(right.x+s+tx),ky=dy/(bottom.depth||1);root.eachBefore(function(node){node.x=(node.x+tx)*kx;node.y=node.depth*ky})}return root}function firstWalk(v){var children=v.children,siblings=v.parent.children,w=v.i?siblings[v.i-1]:null;if(children){executeShifts(v);var midpoint=(children[0].z+children[children.length-1].z)/2;if(w){v.z=w.z+separation(v._,w._);v.m=v.z-midpoint}else{v.z=midpoint}}else if(w){v.z=w.z+separation(v._,w._)}v.parent.A=apportion(v,w,v.parent.A||siblings[0])}function secondWalk(v){v._.x=v.z+v.parent.m;v.m+=v.parent.m}function apportion(v,w,ancestor){if(w){var vip=v,vop=v,vim=w,vom=vip.parent.children[0],sip=vip.m,sop=vop.m,sim=vim.m,som=vom.m,shift;while(vim=nextRight(vim),vip=nextLeft(vip),vim&&vip){vom=nextLeft(vom);vop=nextRight(vop);vop.a=v;shift=vim.z+sim-vip.z-sip+separation(vim._,vip._);if(shift>0){moveSubtree(nextAncestor(vim,v,ancestor),v,shift);sip+=shift;sop+=shift}sim+=vim.m;sip+=vip.m;som+=vom.m;sop+=vop.m}if(vim&&!nextRight(vop)){vop.t=vim;vop.m+=sim-sop}if(vip&&!nextLeft(vom)){vom.t=vip;vom.m+=sip-som;ancestor=v}}return ancestor}function sizeNode(node){node.x*=dx;node.y=node.depth*dy}tree.separation=function(x){return arguments.length?(separation=x,tree):separation};tree.size=function(x){return arguments.length?(nodeSize=false,dx=+x[0],dy=+x[1],tree):nodeSize?null:[dx,dy]};tree.nodeSize=function(x){return arguments.length?(nodeSize=true,dx=+x[0],dy=+x[1],tree):nodeSize?[dx,dy]:null};return tree}function treemapSlice(parent,x0,y0,x1,y1){var nodes=parent.children,node,i=-1,n=nodes.length,k=parent.value&&(y1-y0)/parent.value;while(++i<n){node=nodes[i],node.x0=x0,node.x1=x1;node.y0=y0,node.y1=y0+=node.value*k}}var phi=(1+Math.sqrt(5))/2;function squarifyRatio(ratio,parent,x0,y0,x1,y1){var rows=[],nodes=parent.children,row,nodeValue,i0=0,i1=0,n=nodes.length,dx,dy,value=parent.value,sumValue,minValue,maxValue,newRatio,minRatio,alpha,beta;while(i0<n){dx=x1-x0,dy=y1-y0;do{sumValue=nodes[i1++].value}while(!sumValue&&i1<n);minValue=maxValue=sumValue;alpha=Math.max(dy/dx,dx/dy)/(value*ratio);beta=sumValue*sumValue*alpha;minRatio=Math.max(maxValue/beta,beta/minValue);for(;i1<n;++i1){sumValue+=nodeValue=nodes[i1].value;if(nodeValue<minValue)minValue=nodeValue;if(nodeValue>maxValue)maxValue=nodeValue;beta=sumValue*sumValue*alpha;newRatio=Math.max(maxValue/beta,beta/minValue);if(newRatio>minRatio){sumValue-=nodeValue;break}minRatio=newRatio}rows.push(row={value:sumValue,dice:dx<dy,children:nodes.slice(i0,i1)});if(row.dice)treemapDice(row,x0,y0,x1,value?y0+=dy*sumValue/value:y1);else treemapSlice(row,x0,y0,value?x0+=dx*sumValue/value:x1,y1);value-=sumValue,i0=i1}return rows}var squarify=function custom(ratio){function squarify(parent,x0,y0,x1,y1){squarifyRatio(ratio,parent,x0,y0,x1,y1)}squarify.ratio=function(x){return custom((x=+x)>1?x:1)};return squarify}(phi);function index$4(){var tile=squarify,round=false,dx=1,dy=1,paddingStack=[0],paddingInner=constantZero,paddingTop=constantZero,paddingRight=constantZero,paddingBottom=constantZero,paddingLeft=constantZero;function treemap(root){root.x0=root.y0=0;root.x1=dx;root.y1=dy;root.eachBefore(positionNode);paddingStack=[0];if(round)root.eachBefore(roundNode);return root}function positionNode(node){var p=paddingStack[node.depth],x0=node.x0+p,y0=node.y0+p,x1=node.x1-p,y1=node.y1-p;if(x1<x0)x0=x1=(x0+x1)/2;if(y1<y0)y0=y1=(y0+y1)/2;node.x0=x0;node.y0=y0;node.x1=x1;node.y1=y1;if(node.children){p=paddingStack[node.depth+1]=paddingInner(node)/2;x0+=paddingLeft(node)-p;y0+=paddingTop(node)-p;x1-=paddingRight(node)-p;y1-=paddingBottom(node)-p;if(x1<x0)x0=x1=(x0+x1)/2;if(y1<y0)y0=y1=(y0+y1)/2;tile(node,x0,y0,x1,y1)}}treemap.round=function(x){return arguments.length?(round=!!x,treemap):round};treemap.size=function(x){return arguments.length?(dx=+x[0],dy=+x[1],treemap):[dx,dy]};treemap.tile=function(x){return arguments.length?(tile=required(x),treemap):tile};treemap.padding=function(x){return arguments.length?treemap.paddingInner(x).paddingOuter(x):treemap.paddingInner()};treemap.paddingInner=function(x){return arguments.length?(paddingInner=typeof x==="function"?x:constant$9(+x),treemap):paddingInner};treemap.paddingOuter=function(x){return arguments.length?treemap.paddingTop(x).paddingRight(x).paddingBottom(x).paddingLeft(x):treemap.paddingTop()};treemap.paddingTop=function(x){return arguments.length?(paddingTop=typeof x==="function"?x:constant$9(+x),treemap):paddingTop};treemap.paddingRight=function(x){return arguments.length?(paddingRight=typeof x==="function"?x:constant$9(+x),treemap):paddingRight};treemap.paddingBottom=function(x){return arguments.length?(paddingBottom=typeof x==="function"?x:constant$9(+x),treemap):paddingBottom};treemap.paddingLeft=function(x){return arguments.length?(paddingLeft=typeof x==="function"?x:constant$9(+x),treemap):paddingLeft};return treemap}function binary(parent,x0,y0,x1,y1){var nodes=parent.children,i,n=nodes.length,sum,sums=new Array(n+1);for(sums[0]=sum=i=0;i<n;++i){sums[i+1]=sum+=nodes[i].value}partition(0,n,parent.value,x0,y0,x1,y1);function partition(i,j,value,x0,y0,x1,y1){if(i>=j-1){var node=nodes[i];node.x0=x0,node.y0=y0;node.x1=x1,node.y1=y1;return}var valueOffset=sums[i],valueTarget=value/2+valueOffset,k=i+1,hi=j-1;while(k<hi){var mid=k+hi>>>1;if(sums[mid]<valueTarget)k=mid+1;else hi=mid}if(valueTarget-sums[k-1]<sums[k]-valueTarget&&i+1<k)--k;var valueLeft=sums[k]-valueOffset,valueRight=value-valueLeft;if(x1-x0>y1-y0){var xk=value?(x0*valueRight+x1*valueLeft)/value:x1;partition(i,k,valueLeft,x0,y0,xk,y1);partition(k,j,valueRight,xk,y0,x1,y1)}else{var yk=value?(y0*valueRight+y1*valueLeft)/value:y1;partition(i,k,valueLeft,x0,y0,x1,yk);partition(k,j,valueRight,x0,yk,x1,y1)}}}function sliceDice(parent,x0,y0,x1,y1){(parent.depth&1?treemapSlice:treemapDice)(parent,x0,y0,x1,y1)}var resquarify=function custom(ratio){function resquarify(parent,x0,y0,x1,y1){if((rows=parent._squarify)&&rows.ratio===ratio){var rows,row,nodes,i,j=-1,n,m=rows.length,value=parent.value;while(++j<m){row=rows[j],nodes=row.children;for(i=row.value=0,n=nodes.length;i<n;++i)row.value+=nodes[i].value;if(row.dice)treemapDice(row,x0,y0,x1,value?y0+=(y1-y0)*row.value/value:y1);else treemapSlice(row,x0,y0,value?x0+=(x1-x0)*row.value/value:x1,y1);value-=row.value}}else{parent._squarify=rows=squarifyRatio(ratio,parent,x0,y0,x1,y1);rows.ratio=ratio}}resquarify.ratio=function(x){return custom((x=+x)>1?x:1)};return resquarify}(phi);function area$2(polygon){var i=-1,n=polygon.length,a,b=polygon[n-1],area=0;while(++i<n){a=b;b=polygon[i];area+=a[1]*b[0]-a[0]*b[1]}return area/2}function centroid$1(polygon){var i=-1,n=polygon.length,x=0,y=0,a,b=polygon[n-1],c,k=0;while(++i<n){a=b;b=polygon[i];k+=c=a[0]*b[1]-b[0]*a[1];x+=(a[0]+b[0])*c;y+=(a[1]+b[1])*c}return k*=3,[x/k,y/k]}function cross$1(a,b,c){return(b[0]-a[0])*(c[1]-a[1])-(b[1]-a[1])*(c[0]-a[0])}function lexicographicOrder(a,b){return a[0]-b[0]||a[1]-b[1]}function computeUpperHullIndexes(points){const n=points.length,indexes=[0,1];let size=2,i;for(i=2;i<n;++i){while(size>1&&cross$1(points[indexes[size-2]],points[indexes[size-1]],points[i])<=0)--size;indexes[size++]=i}return indexes.slice(0,size)}function hull(points){if((n=points.length)<3)return null;var i,n,sortedPoints=new Array(n),flippedPoints=new Array(n);for(i=0;i<n;++i)sortedPoints[i]=[+points[i][0],+points[i][1],i];sortedPoints.sort(lexicographicOrder);for(i=0;i<n;++i)flippedPoints[i]=[sortedPoints[i][0],-sortedPoints[i][1]];var upperIndexes=computeUpperHullIndexes(sortedPoints),lowerIndexes=computeUpperHullIndexes(flippedPoints);var skipLeft=lowerIndexes[0]===upperIndexes[0],skipRight=lowerIndexes[lowerIndexes.length-1]===upperIndexes[upperIndexes.length-1],hull=[];for(i=upperIndexes.length-1;i>=0;--i)hull.push(points[sortedPoints[upperIndexes[i]][2]]);for(i=+skipLeft;i<lowerIndexes.length-skipRight;++i)hull.push(points[sortedPoints[lowerIndexes[i]][2]]);return hull}function contains$2(polygon,point){var n=polygon.length,p=polygon[n-1],x=point[0],y=point[1],x0=p[0],y0=p[1],x1,y1,inside=false;for(var i=0;i<n;++i){p=polygon[i],x1=p[0],y1=p[1];if(y1>y!==y0>y&&x<(x0-x1)*(y-y1)/(y0-y1)+x1)inside=!inside;x0=x1,y0=y1}return inside}function length$3(polygon){var i=-1,n=polygon.length,b=polygon[n-1],xa,ya,xb=b[0],yb=b[1],perimeter=0;while(++i<n){xa=xb;ya=yb;b=polygon[i];xb=b[0];yb=b[1];xa-=xb;ya-=yb;perimeter+=Math.hypot(xa,ya)}return perimeter}var defaultSource$1=Math.random;var uniform=function sourceRandomUniform(source){function randomUniform(min,max){min=min==null?0:+min;max=max==null?1:+max;if(arguments.length===1)max=min,min=0;else max-=min;return function(){return source()*max+min}}randomUniform.source=sourceRandomUniform;return randomUniform}(defaultSource$1);var int=function sourceRandomInt(source){function randomInt(min,max){if(arguments.length<2)max=min,min=0;min=Math.floor(min);max=Math.floor(max)-min;return function(){return Math.floor(source()*max+min)}}randomInt.source=sourceRandomInt;return randomInt}(defaultSource$1);var normal=function sourceRandomNormal(source){function randomNormal(mu,sigma){var x,r;mu=mu==null?0:+mu;sigma=sigma==null?1:+sigma;return function(){var y;if(x!=null)y=x,x=null;else do{x=source()*2-1;y=source()*2-1;r=x*x+y*y}while(!r||r>1);return mu+sigma*y*Math.sqrt(-2*Math.log(r)/r)}}randomNormal.source=sourceRandomNormal;return randomNormal}(defaultSource$1);var logNormal=function sourceRandomLogNormal(source){var N=normal.source(source);function randomLogNormal(){var randomNormal=N.apply(this,arguments);return function(){return Math.exp(randomNormal())}}randomLogNormal.source=sourceRandomLogNormal;return randomLogNormal}(defaultSource$1);var irwinHall=function sourceRandomIrwinHall(source){function randomIrwinHall(n){if((n=+n)<=0)return()=>0;return function(){for(var sum=0,i=n;i>1;--i)sum+=source();return sum+i*source()}}randomIrwinHall.source=sourceRandomIrwinHall;return randomIrwinHall}(defaultSource$1);var bates=function sourceRandomBates(source){var I=irwinHall.source(source);function randomBates(n){if((n=+n)===0)return source;var randomIrwinHall=I(n);return function(){return randomIrwinHall()/n}}randomBates.source=sourceRandomBates;return randomBates}(defaultSource$1);var exponential$1=function sourceRandomExponential(source){function randomExponential(lambda){return function(){return-Math.log1p(-source())/lambda}}randomExponential.source=sourceRandomExponential;return randomExponential}(defaultSource$1);var pareto=function sourceRandomPareto(source){function randomPareto(alpha){if((alpha=+alpha)<0)throw new RangeError("invalid alpha");alpha=1/-alpha;return function(){return Math.pow(1-source(),alpha)}}randomPareto.source=sourceRandomPareto;return randomPareto}(defaultSource$1);var bernoulli=function sourceRandomBernoulli(source){function randomBernoulli(p){if((p=+p)<0||p>1)throw new RangeError("invalid p");return function(){return Math.floor(source()+p)}}randomBernoulli.source=sourceRandomBernoulli;return randomBernoulli}(defaultSource$1);var geometric=function sourceRandomGeometric(source){function randomGeometric(p){if((p=+p)<0||p>1)throw new RangeError("invalid p");if(p===0)return()=>Infinity;if(p===1)return()=>1;p=Math.log1p(-p);return function(){return 1+Math.floor(Math.log1p(-source())/p)}}randomGeometric.source=sourceRandomGeometric;return randomGeometric}(defaultSource$1);var gamma$1=function sourceRandomGamma(source){var randomNormal=normal.source(source)();function randomGamma(k,theta){if((k=+k)<0)throw new RangeError("invalid k");if(k===0)return()=>0;theta=theta==null?1:+theta;if(k===1)return()=>-Math.log1p(-source())*theta;var d=(k<1?k+1:k)-1/3,c=1/(3*Math.sqrt(d)),multiplier=k<1?()=>Math.pow(source(),1/k):()=>1;return function(){do{do{var x=randomNormal(),v=1+c*x}while(v<=0);v*=v*v;var u=1-source()}while(u>=1-.0331*x*x*x*x&&Math.log(u)>=.5*x*x+d*(1-v+Math.log(v)));return d*v*multiplier()*theta}}randomGamma.source=sourceRandomGamma;return randomGamma}(defaultSource$1);var beta=function sourceRandomBeta(source){var G=gamma$1.source(source);function randomBeta(alpha,beta){var X=G(alpha),Y=G(beta);return function(){var x=X();return x===0?0:x/(x+Y())}}randomBeta.source=sourceRandomBeta;return randomBeta}(defaultSource$1);var binomial=function sourceRandomBinomial(source){var G=geometric.source(source),B=beta.source(source);function randomBinomial(n,p){n=+n;if((p=+p)>=1)return()=>n;if(p<=0)return()=>0;return function(){var acc=0,nn=n,pp=p;while(nn*pp>16&&nn*(1-pp)>16){var i=Math.floor((nn+1)*pp),y=B(i,nn-i+1)();if(y<=pp){acc+=i;nn-=i;pp=(pp-y)/(1-y)}else{nn=i-1;pp/=y}}var sign=pp<.5,pFinal=sign?pp:1-pp,g=G(pFinal);for(var s=g(),k=0;s<=nn;++k)s+=g();return acc+(sign?k:nn-k)}}randomBinomial.source=sourceRandomBinomial;return randomBinomial}(defaultSource$1);var weibull=function sourceRandomWeibull(source){function randomWeibull(k,a,b){var outerFunc;if((k=+k)===0){outerFunc=(x=>-Math.log(x))}else{k=1/k;outerFunc=(x=>Math.pow(x,k))}a=a==null?0:+a;b=b==null?1:+b;return function(){return a+b*outerFunc(-Math.log1p(-source()))}}randomWeibull.source=sourceRandomWeibull;return randomWeibull}(defaultSource$1);var cauchy=function sourceRandomCauchy(source){function randomCauchy(a,b){a=a==null?0:+a;b=b==null?1:+b;return function(){return a+b*Math.tan(Math.PI*source())}}randomCauchy.source=sourceRandomCauchy;return randomCauchy}(defaultSource$1);var logistic=function sourceRandomLogistic(source){function randomLogistic(a,b){a=a==null?0:+a;b=b==null?1:+b;return function(){var u=source();return a+b*Math.log(u/(1-u))}}randomLogistic.source=sourceRandomLogistic;return randomLogistic}(defaultSource$1);var poisson=function sourceRandomPoisson(source){var G=gamma$1.source(source),B=binomial.source(source);function randomPoisson(lambda){return function(){var acc=0,l=lambda;while(l>16){var n=Math.floor(.875*l),t=G(n)();if(t>l)return acc+B(n-1,l/t)();acc+=n;l-=t}for(var s=-Math.log1p(-source()),k=0;s<=l;++k)s-=Math.log1p(-source());return acc+k}}randomPoisson.source=sourceRandomPoisson;return randomPoisson}(defaultSource$1);const mul=1664525;const inc=1013904223;const eps=1/4294967296;function lcg$1(seed=Math.random()){let state=(0<=seed&&seed<1?seed/eps:Math.abs(seed))|0;return()=>(state=mul*state+inc|0,eps*(state>>>0))}function initRange(domain,range){switch(arguments.length){case 0:break;case 1:this.range(domain);break;default:this.range(range).domain(domain);break}return this}function initInterpolator(domain,interpolator){switch(arguments.length){case 0:break;case 1:{if(typeof domain==="function")this.interpolator(domain);else this.range(domain);break}default:{this.domain(domain);if(typeof interpolator==="function")this.interpolator(interpolator);else this.range(interpolator);break}}return this}const implicit=Symbol("implicit");function ordinal(){var index=new Map,domain=[],range=[],unknown=implicit;function scale(d){var key=d+"",i=index.get(key);if(!i){if(unknown!==implicit)return unknown;index.set(key,i=domain.push(d))}return range[(i-1)%range.length]}scale.domain=function(_){if(!arguments.length)return domain.slice();domain=[],index=new Map;for(const value of _){const key=value+"";if(index.has(key))continue;index.set(key,domain.push(value))}return scale};scale.range=function(_){return arguments.length?(range=Array.from(_),scale):range.slice()};scale.unknown=function(_){return arguments.length?(unknown=_,scale):unknown};scale.copy=function(){return ordinal(domain,range).unknown(unknown)};initRange.apply(scale,arguments);return scale}function band(){var scale=ordinal().unknown(undefined),domain=scale.domain,ordinalRange=scale.range,r0=0,r1=1,step,bandwidth,round=false,paddingInner=0,paddingOuter=0,align=.5;delete scale.unknown;function rescale(){var n=domain().length,reverse=r1<r0,start=reverse?r1:r0,stop=reverse?r0:r1;step=(stop-start)/Math.max(1,n-paddingInner+paddingOuter*2);if(round)step=Math.floor(step);start+=(stop-start-step*(n-paddingInner))*align;bandwidth=step*(1-paddingInner);if(round)start=Math.round(start),bandwidth=Math.round(bandwidth);var values=sequence(n).map(function(i){return start+step*i});return ordinalRange(reverse?values.reverse():values)}scale.domain=function(_){return arguments.length?(domain(_),rescale()):domain()};scale.range=function(_){return arguments.length?([r0,r1]=_,r0=+r0,r1=+r1,rescale()):[r0,r1]};scale.rangeRound=function(_){return[r0,r1]=_,r0=+r0,r1=+r1,round=true,rescale()};scale.bandwidth=function(){return bandwidth};scale.step=function(){return step};scale.round=function(_){return arguments.length?(round=!!_,rescale()):round};scale.padding=function(_){return arguments.length?(paddingInner=Math.min(1,paddingOuter=+_),rescale()):paddingInner};scale.paddingInner=function(_){return arguments.length?(paddingInner=Math.min(1,_),rescale()):paddingInner};scale.paddingOuter=function(_){return arguments.length?(paddingOuter=+_,rescale()):paddingOuter};scale.align=function(_){return arguments.length?(align=Math.max(0,Math.min(1,_)),rescale()):align};scale.copy=function(){return band(domain(),[r0,r1]).round(round).paddingInner(paddingInner).paddingOuter(paddingOuter).align(align)};return initRange.apply(rescale(),arguments)}function pointish(scale){var copy=scale.copy;scale.padding=scale.paddingOuter;delete scale.paddingInner;delete scale.paddingOuter;scale.copy=function(){return pointish(copy())};return scale}function point(){return pointish(band.apply(null,arguments).paddingInner(1))}function constants(x){return function(){return x}}function number$2(x){return+x}var unit=[0,1];function identity$6(x){return x}function normalize(a,b){return(b-=a=+a)?function(x){return(x-a)/b}:constants(isNaN(b)?NaN:.5)}function clamper(a,b){var t;if(a>b)t=a,a=b,b=t;return function(x){return Math.max(a,Math.min(b,x))}}function bimap(domain,range,interpolate){var d0=domain[0],d1=domain[1],r0=range[0],r1=range[1];if(d1<d0)d0=normalize(d1,d0),r0=interpolate(r1,r0);else d0=normalize(d0,d1),r0=interpolate(r0,r1);return function(x){return r0(d0(x))}}function polymap(domain,range,interpolate){var j=Math.min(domain.length,range.length)-1,d=new Array(j),r=new Array(j),i=-1;if(domain[j]<domain[0]){domain=domain.slice().reverse();range=range.slice().reverse()}while(++i<j){d[i]=normalize(domain[i],domain[i+1]);r[i]=interpolate(range[i],range[i+1])}return function(x){var i=bisectRight(domain,x,1,j)-1;return r[i](d[i](x))}}function copy(source,target){return target.domain(source.domain()).range(source.range()).interpolate(source.interpolate()).clamp(source.clamp()).unknown(source.unknown())}function transformer$1(){var domain=unit,range=unit,interpolate$1=interpolate,transform,untransform,unknown,clamp=identity$6,piecewise,output,input;function rescale(){var n=Math.min(domain.length,range.length);if(clamp!==identity$6)clamp=clamper(domain[0],domain[n-1]);piecewise=n>2?polymap:bimap;output=input=null;return scale}function scale(x){return isNaN(x=+x)?unknown:(output||(output=piecewise(domain.map(transform),range,interpolate$1)))(transform(clamp(x)))}scale.invert=function(y){return clamp(untransform((input||(input=piecewise(range,domain.map(transform),interpolateNumber)))(y)))};scale.domain=function(_){return arguments.length?(domain=Array.from(_,number$2),rescale()):domain.slice()};scale.range=function(_){return arguments.length?(range=Array.from(_),rescale()):range.slice()};scale.rangeRound=function(_){return range=Array.from(_),interpolate$1=interpolateRound,rescale()};scale.clamp=function(_){return arguments.length?(clamp=_?true:identity$6,rescale()):clamp!==identity$6};scale.interpolate=function(_){return arguments.length?(interpolate$1=_,rescale()):interpolate$1};scale.unknown=function(_){return arguments.length?(unknown=_,scale):unknown};return function(t,u){transform=t,untransform=u;return rescale()}}function continuous(){return transformer$1()(identity$6,identity$6)}function tickFormat(start,stop,count,specifier){var step=tickStep(start,stop,count),precision;specifier=formatSpecifier(specifier==null?",f":specifier);switch(specifier.type){case"s":{var value=Math.max(Math.abs(start),Math.abs(stop));if(specifier.precision==null&&!isNaN(precision=precisionPrefix(step,value)))specifier.precision=precision;return exports.formatPrefix(specifier,value)}case"":case"e":case"g":case"p":case"r":{if(specifier.precision==null&&!isNaN(precision=precisionRound(step,Math.max(Math.abs(start),Math.abs(stop)))))specifier.precision=precision-(specifier.type==="e");break}case"f":case"%":{if(specifier.precision==null&&!isNaN(precision=precisionFixed(step)))specifier.precision=precision-(specifier.type==="%")*2;break}}return exports.format(specifier)}function linearish(scale){var domain=scale.domain;scale.ticks=function(count){var d=domain();return ticks(d[0],d[d.length-1],count==null?10:count)};scale.tickFormat=function(count,specifier){var d=domain();return tickFormat(d[0],d[d.length-1],count==null?10:count,specifier)};scale.nice=function(count){if(count==null)count=10;var d=domain();var i0=0;var i1=d.length-1;var start=d[i0];var stop=d[i1];var prestep;var step;var maxIter=10;if(stop<start){step=start,start=stop,stop=step;step=i0,i0=i1,i1=step}while(maxIter-- >0){step=tickIncrement(start,stop,count);if(step===prestep){d[i0]=start;d[i1]=stop;return domain(d)}else if(step>0){start=Math.floor(start/step)*step;stop=Math.ceil(stop/step)*step}else if(step<0){start=Math.ceil(start*step)/step;stop=Math.floor(stop*step)/step}else{break}prestep=step}return scale};return scale}function linear$2(){var scale=continuous();scale.copy=function(){return copy(scale,linear$2())};initRange.apply(scale,arguments);return linearish(scale)}function identity$7(domain){var unknown;function scale(x){return isNaN(x=+x)?unknown:x}scale.invert=scale;scale.domain=scale.range=function(_){return arguments.length?(domain=Array.from(_,number$2),scale):domain.slice()};scale.unknown=function(_){return arguments.length?(unknown=_,scale):unknown};scale.copy=function(){return identity$7(domain).unknown(unknown)};domain=arguments.length?Array.from(domain,number$2):[0,1];return linearish(scale)}function nice$1(domain,interval){domain=domain.slice();var i0=0,i1=domain.length-1,x0=domain[i0],x1=domain[i1],t;if(x1<x0){t=i0,i0=i1,i1=t;t=x0,x0=x1,x1=t}domain[i0]=interval.floor(x0);domain[i1]=interval.ceil(x1);return domain}function transformLog(x){return Math.log(x)}function transformExp(x){return Math.exp(x)}function transformLogn(x){return-Math.log(-x)}function transformExpn(x){return-Math.exp(-x)}function pow10(x){return isFinite(x)?+("1e"+x):x<0?0:x}function powp(base){return base===10?pow10:base===Math.E?Math.exp:function(x){return Math.pow(base,x)}}function logp(base){return base===Math.E?Math.log:base===10&&Math.log10||base===2&&Math.log2||(base=Math.log(base),function(x){return Math.log(x)/base})}function reflect(f){return function(x){return-f(-x)}}function loggish(transform){var scale=transform(transformLog,transformExp),domain=scale.domain,base=10,logs,pows;function rescale(){logs=logp(base),pows=powp(base);if(domain()[0]<0){logs=reflect(logs),pows=reflect(pows);transform(transformLogn,transformExpn)}else{transform(transformLog,transformExp)}return scale}scale.base=function(_){return arguments.length?(base=+_,rescale()):base};scale.domain=function(_){return arguments.length?(domain(_),rescale()):domain()};scale.ticks=function(count){var d=domain(),u=d[0],v=d[d.length-1],r;if(r=v<u)i=u,u=v,v=i;var i=logs(u),j=logs(v),p,k,t,n=count==null?10:+count,z=[];if(!(base%1)&&j-i<n){i=Math.floor(i),j=Math.ceil(j);if(u>0)for(;i<=j;++i){for(k=1,p=pows(i);k<base;++k){t=p*k;if(t<u)continue;if(t>v)break;z.push(t)}}else for(;i<=j;++i){for(k=base-1,p=pows(i);k>=1;--k){t=p*k;if(t<u)continue;if(t>v)break;z.push(t)}}if(z.length*2<n)z=ticks(u,v,n)}else{z=ticks(i,j,Math.min(j-i,n)).map(pows)}return r?z.reverse():z};scale.tickFormat=function(count,specifier){if(specifier==null)specifier=base===10?".0e":",";if(typeof specifier!=="function")specifier=exports.format(specifier);if(count===Infinity)return specifier;if(count==null)count=10;var k=Math.max(1,base*count/scale.ticks().length);return function(d){var i=d/pows(Math.round(logs(d)));if(i*base<base-.5)i*=base;return i<=k?specifier(d):""}};scale.nice=function(){return domain(nice$1(domain(),{floor:function(x){return pows(Math.floor(logs(x)))},ceil:function(x){return pows(Math.ceil(logs(x)))}}))};return scale}function log$1(){var scale=loggish(transformer$1()).domain([1,10]);scale.copy=function(){return copy(scale,log$1()).base(scale.base())};initRange.apply(scale,arguments);return scale}function transformSymlog(c){return function(x){return Math.sign(x)*Math.log1p(Math.abs(x/c))}}function transformSymexp(c){return function(x){return Math.sign(x)*Math.expm1(Math.abs(x))*c}}function symlogish(transform){var c=1,scale=transform(transformSymlog(c),transformSymexp(c));scale.constant=function(_){return arguments.length?transform(transformSymlog(c=+_),transformSymexp(c)):c};return linearish(scale)}function symlog(){var scale=symlogish(transformer$1());scale.copy=function(){return copy(scale,symlog()).constant(scale.constant())};return initRange.apply(scale,arguments)}function transformPow(exponent){return function(x){return x<0?-Math.pow(-x,exponent):Math.pow(x,exponent)}}function transformSqrt(x){return x<0?-Math.sqrt(-x):Math.sqrt(x)}function transformSquare(x){return x<0?-x*x:x*x}function powish(transform){var scale=transform(identity$6,identity$6),exponent=1;function rescale(){return exponent===1?transform(identity$6,identity$6):exponent===.5?transform(transformSqrt,transformSquare):transform(transformPow(exponent),transformPow(1/exponent))}scale.exponent=function(_){return arguments.length?(exponent=+_,rescale()):exponent};return linearish(scale)}function pow$2(){var scale=powish(transformer$1());scale.copy=function(){return copy(scale,pow$2()).exponent(scale.exponent())};initRange.apply(scale,arguments);return scale}function sqrt$1(){return pow$2.apply(null,arguments).exponent(.5)}function square(x){return Math.sign(x)*x*x}function unsquare(x){return Math.sign(x)*Math.sqrt(Math.abs(x))}function radial$1(){var squared=continuous(),range=[0,1],round=false,unknown;function scale(x){var y=unsquare(squared(x));return isNaN(y)?unknown:round?Math.round(y):y}scale.invert=function(y){return squared.invert(square(y))};scale.domain=function(_){return arguments.length?(squared.domain(_),scale):squared.domain()};scale.range=function(_){return arguments.length?(squared.range((range=Array.from(_,number$2)).map(square)),scale):range.slice()};scale.rangeRound=function(_){return scale.range(_).round(true)};scale.round=function(_){return arguments.length?(round=!!_,scale):round};scale.clamp=function(_){return arguments.length?(squared.clamp(_),scale):squared.clamp()};scale.unknown=function(_){return arguments.length?(unknown=_,scale):unknown};scale.copy=function(){return radial$1(squared.domain(),range).round(round).clamp(squared.clamp()).unknown(unknown)};initRange.apply(scale,arguments);return linearish(scale)}function quantile$1(){var domain=[],range=[],thresholds=[],unknown;function rescale(){var i=0,n=Math.max(1,range.length);thresholds=new Array(n-1);while(++i<n)thresholds[i-1]=quantileSorted(domain,i/n);return scale}function scale(x){return isNaN(x=+x)?unknown:range[bisectRight(thresholds,x)]}scale.invertExtent=function(y){var i=range.indexOf(y);return i<0?[NaN,NaN]:[i>0?thresholds[i-1]:domain[0],i<thresholds.length?thresholds[i]:domain[domain.length-1]]};scale.domain=function(_){if(!arguments.length)return domain.slice();domain=[];for(let d of _)if(d!=null&&!isNaN(d=+d))domain.push(d);domain.sort(ascending);return rescale()};scale.range=function(_){return arguments.length?(range=Array.from(_),rescale()):range.slice()};scale.unknown=function(_){return arguments.length?(unknown=_,scale):unknown};scale.quantiles=function(){return thresholds.slice()};scale.copy=function(){return quantile$1().domain(domain).range(range).unknown(unknown)};return initRange.apply(scale,arguments)}function quantize$1(){var x0=0,x1=1,n=1,domain=[.5],range=[0,1],unknown;function scale(x){return x<=x?range[bisectRight(domain,x,0,n)]:unknown}function rescale(){var i=-1;domain=new Array(n);while(++i<n)domain[i]=((i+1)*x1-(i-n)*x0)/(n+1);return scale}scale.domain=function(_){return arguments.length?([x0,x1]=_,x0=+x0,x1=+x1,rescale()):[x0,x1]};scale.range=function(_){return arguments.length?(n=(range=Array.from(_)).length-1,rescale()):range.slice()};scale.invertExtent=function(y){var i=range.indexOf(y);return i<0?[NaN,NaN]:i<1?[x0,domain[0]]:i>=n?[domain[n-1],x1]:[domain[i-1],domain[i]]};scale.unknown=function(_){return arguments.length?(unknown=_,scale):scale};scale.thresholds=function(){return domain.slice()};scale.copy=function(){return quantize$1().domain([x0,x1]).range(range).unknown(unknown)};return initRange.apply(linearish(scale),arguments)}function threshold(){var domain=[.5],range=[0,1],unknown,n=1;function scale(x){return x<=x?range[bisectRight(domain,x,0,n)]:unknown}scale.domain=function(_){return arguments.length?(domain=Array.from(_),n=Math.min(domain.length,range.length-1),scale):domain.slice()};scale.range=function(_){return arguments.length?(range=Array.from(_),n=Math.min(domain.length,range.length-1),scale):range.slice()};scale.invertExtent=function(y){var i=range.indexOf(y);return[domain[i-1],domain[i]]};scale.unknown=function(_){return arguments.length?(unknown=_,scale):unknown};scale.copy=function(){return threshold().domain(domain).range(range).unknown(unknown)};return initRange.apply(scale,arguments)}var t0$1=new Date,t1$1=new Date;function newInterval(floori,offseti,count,field){function interval(date){return floori(date=arguments.length===0?new Date:new Date(+date)),date}interval.floor=function(date){return floori(date=new Date(+date)),date};interval.ceil=function(date){return floori(date=new Date(date-1)),offseti(date,1),floori(date),date};interval.round=function(date){var d0=interval(date),d1=interval.ceil(date);return date-d0<d1-date?d0:d1};interval.offset=function(date,step){return offseti(date=new Date(+date),step==null?1:Math.floor(step)),date};interval.range=function(start,stop,step){var range=[],previous;start=interval.ceil(start);step=step==null?1:Math.floor(step);if(!(start<stop)||!(step>0))return range;do{range.push(previous=new Date(+start)),offseti(start,step),floori(start)}while(previous<start&&start<stop);return range};interval.filter=function(test){return newInterval(function(date){if(date>=date)while(floori(date),!test(date))date.setTime(date-1)},function(date,step){if(date>=date){if(step<0)while(++step<=0){while(offseti(date,-1),!test(date)){}}else while(--step>=0){while(offseti(date,+1),!test(date)){}}}})};if(count){interval.count=function(start,end){t0$1.setTime(+start),t1$1.setTime(+end);floori(t0$1),floori(t1$1);return Math.floor(count(t0$1,t1$1))};interval.every=function(step){step=Math.floor(step);return!isFinite(step)||!(step>0)?null:!(step>1)?interval:interval.filter(field?function(d){return field(d)%step===0}:function(d){return interval.count(0,d)%step===0})}}return interval}var millisecond=newInterval(function(){},function(date,step){date.setTime(+date+step)},function(start,end){return end-start});millisecond.every=function(k){k=Math.floor(k);if(!isFinite(k)||!(k>0))return null;if(!(k>1))return millisecond;return newInterval(function(date){date.setTime(Math.floor(date/k)*k)},function(date,step){date.setTime(+date+step*k)},function(start,end){return(end-start)/k})};var milliseconds=millisecond.range;var durationSecond=1e3;var durationMinute=6e4;var durationHour=36e5;var durationDay=864e5;var durationWeek=6048e5;var second=newInterval(function(date){date.setTime(date-date.getMilliseconds())},function(date,step){date.setTime(+date+step*durationSecond)},function(start,end){return(end-start)/durationSecond},function(date){return date.getUTCSeconds()});var seconds=second.range;var minute=newInterval(function(date){date.setTime(date-date.getMilliseconds()-date.getSeconds()*durationSecond)},function(date,step){date.setTime(+date+step*durationMinute)},function(start,end){return(end-start)/durationMinute},function(date){return date.getMinutes()});var minutes=minute.range;var hour=newInterval(function(date){date.setTime(date-date.getMilliseconds()-date.getSeconds()*durationSecond-date.getMinutes()*durationMinute)},function(date,step){date.setTime(+date+step*durationHour)},function(start,end){return(end-start)/durationHour},function(date){return date.getHours()});var hours=hour.range;var day=newInterval(date=>date.setHours(0,0,0,0),(date,step)=>date.setDate(date.getDate()+step),(start,end)=>(end-start-(end.getTimezoneOffset()-start.getTimezoneOffset())*durationMinute)/durationDay,date=>date.getDate()-1);var days=day.range;function weekday(i){return newInterval(function(date){date.setDate(date.getDate()-(date.getDay()+7-i)%7);date.setHours(0,0,0,0)},function(date,step){date.setDate(date.getDate()+step*7)},function(start,end){return(end-start-(end.getTimezoneOffset()-start.getTimezoneOffset())*durationMinute)/durationWeek})}var sunday=weekday(0);var monday=weekday(1);var tuesday=weekday(2);var wednesday=weekday(3);var thursday=weekday(4);var friday=weekday(5);var saturday=weekday(6);var sundays=sunday.range;var mondays=monday.range;var tuesdays=tuesday.range;var wednesdays=wednesday.range;var thursdays=thursday.range;var fridays=friday.range;var saturdays=saturday.range;var month=newInterval(function(date){date.setDate(1);date.setHours(0,0,0,0)},function(date,step){date.setMonth(date.getMonth()+step)},function(start,end){return end.getMonth()-start.getMonth()+(end.getFullYear()-start.getFullYear())*12},function(date){return date.getMonth()});var months=month.range;var year=newInterval(function(date){date.setMonth(0,1);date.setHours(0,0,0,0)},function(date,step){date.setFullYear(date.getFullYear()+step)},function(start,end){return end.getFullYear()-start.getFullYear()},function(date){return date.getFullYear()});year.every=function(k){return!isFinite(k=Math.floor(k))||!(k>0)?null:newInterval(function(date){date.setFullYear(Math.floor(date.getFullYear()/k)*k);date.setMonth(0,1);date.setHours(0,0,0,0)},function(date,step){date.setFullYear(date.getFullYear()+step*k)})};var years=year.range;var utcMinute=newInterval(function(date){date.setUTCSeconds(0,0)},function(date,step){date.setTime(+date+step*durationMinute)},function(start,end){return(end-start)/durationMinute},function(date){return date.getUTCMinutes()});var utcMinutes=utcMinute.range;var utcHour=newInterval(function(date){date.setUTCMinutes(0,0,0)},function(date,step){date.setTime(+date+step*durationHour)},function(start,end){return(end-start)/durationHour},function(date){return date.getUTCHours()});var utcHours=utcHour.range;var utcDay=newInterval(function(date){date.setUTCHours(0,0,0,0)},function(date,step){date.setUTCDate(date.getUTCDate()+step)},function(start,end){return(end-start)/durationDay},function(date){return date.getUTCDate()-1});var utcDays=utcDay.range;function utcWeekday(i){return newInterval(function(date){date.setUTCDate(date.getUTCDate()-(date.getUTCDay()+7-i)%7);date.setUTCHours(0,0,0,0)},function(date,step){date.setUTCDate(date.getUTCDate()+step*7)},function(start,end){return(end-start)/durationWeek})}var utcSunday=utcWeekday(0);var utcMonday=utcWeekday(1);var utcTuesday=utcWeekday(2);var utcWednesday=utcWeekday(3);var utcThursday=utcWeekday(4);var utcFriday=utcWeekday(5);var utcSaturday=utcWeekday(6);var utcSundays=utcSunday.range;var utcMondays=utcMonday.range;var utcTuesdays=utcTuesday.range;var utcWednesdays=utcWednesday.range;var utcThursdays=utcThursday.range;var utcFridays=utcFriday.range;var utcSaturdays=utcSaturday.range;var utcMonth=newInterval(function(date){date.setUTCDate(1);date.setUTCHours(0,0,0,0)},function(date,step){date.setUTCMonth(date.getUTCMonth()+step)},function(start,end){return end.getUTCMonth()-start.getUTCMonth()+(end.getUTCFullYear()-start.getUTCFullYear())*12},function(date){return date.getUTCMonth()});var utcMonths=utcMonth.range;var utcYear=newInterval(function(date){date.setUTCMonth(0,1);date.setUTCHours(0,0,0,0)},function(date,step){date.setUTCFullYear(date.getUTCFullYear()+step)},function(start,end){return end.getUTCFullYear()-start.getUTCFullYear()},function(date){return date.getUTCFullYear()});utcYear.every=function(k){return!isFinite(k=Math.floor(k))||!(k>0)?null:newInterval(function(date){date.setUTCFullYear(Math.floor(date.getUTCFullYear()/k)*k);date.setUTCMonth(0,1);date.setUTCHours(0,0,0,0)},function(date,step){date.setUTCFullYear(date.getUTCFullYear()+step*k)})};var utcYears=utcYear.range;function localDate(d){if(0<=d.y&&d.y<100){var date=new Date(-1,d.m,d.d,d.H,d.M,d.S,d.L);date.setFullYear(d.y);return date}return new Date(d.y,d.m,d.d,d.H,d.M,d.S,d.L)}function utcDate(d){if(0<=d.y&&d.y<100){var date=new Date(Date.UTC(-1,d.m,d.d,d.H,d.M,d.S,d.L));date.setUTCFullYear(d.y);return date}return new Date(Date.UTC(d.y,d.m,d.d,d.H,d.M,d.S,d.L))}function newDate(y,m,d){return{y:y,m:m,d:d,H:0,M:0,S:0,L:0}}function formatLocale$1(locale){var locale_dateTime=locale.dateTime,locale_date=locale.date,locale_time=locale.time,locale_periods=locale.periods,locale_weekdays=locale.days,locale_shortWeekdays=locale.shortDays,locale_months=locale.months,locale_shortMonths=locale.shortMonths;var periodRe=formatRe(locale_periods),periodLookup=formatLookup(locale_periods),weekdayRe=formatRe(locale_weekdays),weekdayLookup=formatLookup(locale_weekdays),shortWeekdayRe=formatRe(locale_shortWeekdays),shortWeekdayLookup=formatLookup(locale_shortWeekdays),monthRe=formatRe(locale_months),monthLookup=formatLookup(locale_months),shortMonthRe=formatRe(locale_shortMonths),shortMonthLookup=formatLookup(locale_shortMonths);var formats={a:formatShortWeekday,A:formatWeekday,b:formatShortMonth,B:formatMonth,c:null,d:formatDayOfMonth,e:formatDayOfMonth,f:formatMicroseconds,g:formatYearISO,G:formatFullYearISO,H:formatHour24,I:formatHour12,j:formatDayOfYear,L:formatMilliseconds,m:formatMonthNumber,M:formatMinutes,p:formatPeriod,q:formatQuarter,Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatSeconds,u:formatWeekdayNumberMonday,U:formatWeekNumberSunday,V:formatWeekNumberISO,w:formatWeekdayNumberSunday,W:formatWeekNumberMonday,x:null,X:null,y:formatYear$1,Y:formatFullYear,Z:formatZone,"%":formatLiteralPercent};var utcFormats={a:formatUTCShortWeekday,A:formatUTCWeekday,b:formatUTCShortMonth,B:formatUTCMonth,c:null,d:formatUTCDayOfMonth,e:formatUTCDayOfMonth,f:formatUTCMicroseconds,g:formatUTCYearISO,G:formatUTCFullYearISO,H:formatUTCHour24,I:formatUTCHour12,j:formatUTCDayOfYear,L:formatUTCMilliseconds,m:formatUTCMonthNumber,M:formatUTCMinutes,p:formatUTCPeriod,q:formatUTCQuarter,Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatUTCSeconds,u:formatUTCWeekdayNumberMonday,U:formatUTCWeekNumberSunday,V:formatUTCWeekNumberISO,w:formatUTCWeekdayNumberSunday,W:formatUTCWeekNumberMonday,x:null,X:null,y:formatUTCYear,Y:formatUTCFullYear,Z:formatUTCZone,"%":formatLiteralPercent};var parses={a:parseShortWeekday,A:parseWeekday,b:parseShortMonth,B:parseMonth,c:parseLocaleDateTime,d:parseDayOfMonth,e:parseDayOfMonth,f:parseMicroseconds,g:parseYear,G:parseFullYear,H:parseHour24,I:parseHour24,j:parseDayOfYear,L:parseMilliseconds,m:parseMonthNumber,M:parseMinutes,p:parsePeriod,q:parseQuarter,Q:parseUnixTimestamp,s:parseUnixTimestampSeconds,S:parseSeconds,u:parseWeekdayNumberMonday,U:parseWeekNumberSunday,V:parseWeekNumberISO,w:parseWeekdayNumberSunday,W:parseWeekNumberMonday,x:parseLocaleDate,X:parseLocaleTime,y:parseYear,Y:parseFullYear,Z:parseZone,"%":parseLiteralPercent};formats.x=newFormat(locale_date,formats);formats.X=newFormat(locale_time,formats);formats.c=newFormat(locale_dateTime,formats);utcFormats.x=newFormat(locale_date,utcFormats);utcFormats.X=newFormat(locale_time,utcFormats);utcFormats.c=newFormat(locale_dateTime,utcFormats);function newFormat(specifier,formats){return function(date){var string=[],i=-1,j=0,n=specifier.length,c,pad,format;if(!(date instanceof Date))date=new Date(+date);while(++i<n){if(specifier.charCodeAt(i)===37){string.push(specifier.slice(j,i));if((pad=pads[c=specifier.charAt(++i)])!=null)c=specifier.charAt(++i);else pad=c==="e"?" ":"0";if(format=formats[c])c=format(date,pad);string.push(c);j=i+1}}string.push(specifier.slice(j,i));return string.join("")}}function newParse(specifier,Z){return function(string){var d=newDate(1900,undefined,1),i=parseSpecifier(d,specifier,string+="",0),week,day$1;if(i!=string.length)return null;if("Q"in d)return new Date(d.Q);if("s"in d)return new Date(d.s*1e3+("L"in d?d.L:0));if(Z&&!("Z"in d))d.Z=0;if("p"in d)d.H=d.H%12+d.p*12;if(d.m===undefined)d.m="q"in d?d.q:0;if("V"in d){if(d.V<1||d.V>53)return null;if(!("w"in d))d.w=1;if("Z"in d){week=utcDate(newDate(d.y,0,1)),day$1=week.getUTCDay();week=day$1>4||day$1===0?utcMonday.ceil(week):utcMonday(week);week=utcDay.offset(week,(d.V-1)*7);d.y=week.getUTCFullYear();d.m=week.getUTCMonth();d.d=week.getUTCDate()+(d.w+6)%7}else{week=localDate(newDate(d.y,0,1)),day$1=week.getDay();week=day$1>4||day$1===0?monday.ceil(week):monday(week);week=day.offset(week,(d.V-1)*7);d.y=week.getFullYear();d.m=week.getMonth();d.d=week.getDate()+(d.w+6)%7}}else if("W"in d||"U"in d){if(!("w"in d))d.w="u"in d?d.u%7:"W"in d?1:0;day$1="Z"in d?utcDate(newDate(d.y,0,1)).getUTCDay():localDate(newDate(d.y,0,1)).getDay();d.m=0;d.d="W"in d?(d.w+6)%7+d.W*7-(day$1+5)%7:d.w+d.U*7-(day$1+6)%7}if("Z"in d){d.H+=d.Z/100|0;d.M+=d.Z%100;return utcDate(d)}return localDate(d)}}function parseSpecifier(d,specifier,string,j){var i=0,n=specifier.length,m=string.length,c,parse;while(i<n){if(j>=m)return-1;c=specifier.charCodeAt(i++);if(c===37){c=specifier.charAt(i++);parse=parses[c in pads?specifier.charAt(i++):c];if(!parse||(j=parse(d,string,j))<0)return-1}else if(c!=string.charCodeAt(j++)){return-1}}return j}function parsePeriod(d,string,i){var n=periodRe.exec(string.slice(i));return n?(d.p=periodLookup.get(n[0].toLowerCase()),i+n[0].length):-1}function parseShortWeekday(d,string,i){var n=shortWeekdayRe.exec(string.slice(i));return n?(d.w=shortWeekdayLookup.get(n[0].toLowerCase()),i+n[0].length):-1}function parseWeekday(d,string,i){var n=weekdayRe.exec(string.slice(i));return n?(d.w=weekdayLookup.get(n[0].toLowerCase()),i+n[0].length):-1}function parseShortMonth(d,string,i){var n=shortMonthRe.exec(string.slice(i));return n?(d.m=shortMonthLookup.get(n[0].toLowerCase()),i+n[0].length):-1}function parseMonth(d,string,i){var n=monthRe.exec(string.slice(i));return n?(d.m=monthLookup.get(n[0].toLowerCase()),i+n[0].length):-1}function parseLocaleDateTime(d,string,i){return parseSpecifier(d,locale_dateTime,string,i)}function parseLocaleDate(d,string,i){return parseSpecifier(d,locale_date,string,i)}function parseLocaleTime(d,string,i){return parseSpecifier(d,locale_time,string,i)}function formatShortWeekday(d){return locale_shortWeekdays[d.getDay()]}function formatWeekday(d){return locale_weekdays[d.getDay()]}function formatShortMonth(d){return locale_shortMonths[d.getMonth()]}function formatMonth(d){return locale_months[d.getMonth()]}function formatPeriod(d){return locale_periods[+(d.getHours()>=12)]}function formatQuarter(d){return 1+~~(d.getMonth()/3)}function formatUTCShortWeekday(d){return locale_shortWeekdays[d.getUTCDay()]}function formatUTCWeekday(d){return locale_weekdays[d.getUTCDay()]}function formatUTCShortMonth(d){return locale_shortMonths[d.getUTCMonth()]}function formatUTCMonth(d){return locale_months[d.getUTCMonth()]}function formatUTCPeriod(d){return locale_periods[+(d.getUTCHours()>=12)]}function formatUTCQuarter(d){return 1+~~(d.getUTCMonth()/3)}return{format:function(specifier){var f=newFormat(specifier+="",formats);f.toString=function(){return specifier};return f},parse:function(specifier){var p=newParse(specifier+="",false);p.toString=function(){return specifier};return p},utcFormat:function(specifier){var f=newFormat(specifier+="",utcFormats);f.toString=function(){return specifier};return f},utcParse:function(specifier){var p=newParse(specifier+="",true);p.toString=function(){return specifier};return p}}}var pads={"-":"",_:" ",0:"0"},numberRe=/^\s*\d+/,percentRe=/^%/,requoteRe=/[\\^$*+?|[\]().{}]/g;function pad$1(value,fill,width){var sign=value<0?"-":"",string=(sign?-value:value)+"",length=string.length;return sign+(length<width?new Array(width-length+1).join(fill)+string:string)}function requote(s){return s.replace(requoteRe,"\\$&")}function formatRe(names){return new RegExp("^(?:"+names.map(requote).join("|")+")","i")}function formatLookup(names){return new Map(names.map((name,i)=>[name.toLowerCase(),i]))}function parseWeekdayNumberSunday(d,string,i){var n=numberRe.exec(string.slice(i,i+1));return n?(d.w=+n[0],i+n[0].length):-1}function parseWeekdayNumberMonday(d,string,i){var n=numberRe.exec(string.slice(i,i+1));return n?(d.u=+n[0],i+n[0].length):-1}function parseWeekNumberSunday(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.U=+n[0],i+n[0].length):-1}function parseWeekNumberISO(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.V=+n[0],i+n[0].length):-1}function parseWeekNumberMonday(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.W=+n[0],i+n[0].length):-1}function parseFullYear(d,string,i){var n=numberRe.exec(string.slice(i,i+4));return n?(d.y=+n[0],i+n[0].length):-1}function parseYear(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.y=+n[0]+(+n[0]>68?1900:2e3),i+n[0].length):-1}function parseZone(d,string,i){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(string.slice(i,i+6));return n?(d.Z=n[1]?0:-(n[2]+(n[3]||"00")),i+n[0].length):-1}function parseQuarter(d,string,i){var n=numberRe.exec(string.slice(i,i+1));return n?(d.q=n[0]*3-3,i+n[0].length):-1}function parseMonthNumber(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.m=n[0]-1,i+n[0].length):-1}function parseDayOfMonth(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.d=+n[0],i+n[0].length):-1}function parseDayOfYear(d,string,i){var n=numberRe.exec(string.slice(i,i+3));return n?(d.m=0,d.d=+n[0],i+n[0].length):-1}function parseHour24(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.H=+n[0],i+n[0].length):-1}function parseMinutes(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.M=+n[0],i+n[0].length):-1}function parseSeconds(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.S=+n[0],i+n[0].length):-1}function parseMilliseconds(d,string,i){var n=numberRe.exec(string.slice(i,i+3));return n?(d.L=+n[0],i+n[0].length):-1}function parseMicroseconds(d,string,i){var n=numberRe.exec(string.slice(i,i+6));return n?(d.L=Math.floor(n[0]/1e3),i+n[0].length):-1}function parseLiteralPercent(d,string,i){var n=percentRe.exec(string.slice(i,i+1));return n?i+n[0].length:-1}function parseUnixTimestamp(d,string,i){var n=numberRe.exec(string.slice(i));return n?(d.Q=+n[0],i+n[0].length):-1}function parseUnixTimestampSeconds(d,string,i){var n=numberRe.exec(string.slice(i));return n?(d.s=+n[0],i+n[0].length):-1}function formatDayOfMonth(d,p){return pad$1(d.getDate(),p,2)}function formatHour24(d,p){return pad$1(d.getHours(),p,2)}function formatHour12(d,p){return pad$1(d.getHours()%12||12,p,2)}function formatDayOfYear(d,p){return pad$1(1+day.count(year(d),d),p,3)}function formatMilliseconds(d,p){return pad$1(d.getMilliseconds(),p,3)}function formatMicroseconds(d,p){return formatMilliseconds(d,p)+"000"}function formatMonthNumber(d,p){return pad$1(d.getMonth()+1,p,2)}function formatMinutes(d,p){return pad$1(d.getMinutes(),p,2)}function formatSeconds(d,p){return pad$1(d.getSeconds(),p,2)}function formatWeekdayNumberMonday(d){var day=d.getDay();return day===0?7:day}function formatWeekNumberSunday(d,p){return pad$1(sunday.count(year(d)-1,d),p,2)}function dISO(d){var day=d.getDay();return day>=4||day===0?thursday(d):thursday.ceil(d)}function formatWeekNumberISO(d,p){d=dISO(d);return pad$1(thursday.count(year(d),d)+(year(d).getDay()===4),p,2)}function formatWeekdayNumberSunday(d){return d.getDay()}function formatWeekNumberMonday(d,p){return pad$1(monday.count(year(d)-1,d),p,2)}function formatYear$1(d,p){return pad$1(d.getFullYear()%100,p,2)}function formatYearISO(d,p){d=dISO(d);return pad$1(d.getFullYear()%100,p,2)}function formatFullYear(d,p){return pad$1(d.getFullYear()%1e4,p,4)}function formatFullYearISO(d,p){var day=d.getDay();d=day>=4||day===0?thursday(d):thursday.ceil(d);return pad$1(d.getFullYear()%1e4,p,4)}function formatZone(d){var z=d.getTimezoneOffset();return(z>0?"-":(z*=-1,"+"))+pad$1(z/60|0,"0",2)+pad$1(z%60,"0",2)}function formatUTCDayOfMonth(d,p){return pad$1(d.getUTCDate(),p,2)}function formatUTCHour24(d,p){return pad$1(d.getUTCHours(),p,2)}function formatUTCHour12(d,p){return pad$1(d.getUTCHours()%12||12,p,2)}function formatUTCDayOfYear(d,p){return pad$1(1+utcDay.count(utcYear(d),d),p,3)}function formatUTCMilliseconds(d,p){return pad$1(d.getUTCMilliseconds(),p,3)}function formatUTCMicroseconds(d,p){return formatUTCMilliseconds(d,p)+"000"}function formatUTCMonthNumber(d,p){return pad$1(d.getUTCMonth()+1,p,2)}function formatUTCMinutes(d,p){return pad$1(d.getUTCMinutes(),p,2)}function formatUTCSeconds(d,p){return pad$1(d.getUTCSeconds(),p,2)}function formatUTCWeekdayNumberMonday(d){var dow=d.getUTCDay();return dow===0?7:dow}function formatUTCWeekNumberSunday(d,p){return pad$1(utcSunday.count(utcYear(d)-1,d),p,2)}function UTCdISO(d){var day=d.getUTCDay();return day>=4||day===0?utcThursday(d):utcThursday.ceil(d)}function formatUTCWeekNumberISO(d,p){d=UTCdISO(d);return pad$1(utcThursday.count(utcYear(d),d)+(utcYear(d).getUTCDay()===4),p,2)}function formatUTCWeekdayNumberSunday(d){return d.getUTCDay()}function formatUTCWeekNumberMonday(d,p){return pad$1(utcMonday.count(utcYear(d)-1,d),p,2)}function formatUTCYear(d,p){return pad$1(d.getUTCFullYear()%100,p,2)}function formatUTCYearISO(d,p){d=UTCdISO(d);return pad$1(d.getUTCFullYear()%100,p,2)}function formatUTCFullYear(d,p){return pad$1(d.getUTCFullYear()%1e4,p,4)}function formatUTCFullYearISO(d,p){var day=d.getUTCDay();d=day>=4||day===0?utcThursday(d):utcThursday.ceil(d);return pad$1(d.getUTCFullYear()%1e4,p,4)}function formatUTCZone(){return"+0000"}function formatLiteralPercent(){return"%"}function formatUnixTimestamp(d){return+d}function formatUnixTimestampSeconds(d){return Math.floor(+d/1e3)}var locale$1;defaultLocale$1({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function defaultLocale$1(definition){locale$1=formatLocale$1(definition);exports.timeFormat=locale$1.format;exports.timeParse=locale$1.parse;exports.utcFormat=locale$1.utcFormat;exports.utcParse=locale$1.utcParse;return locale$1}var isoSpecifier="%Y-%m-%dT%H:%M:%S.%LZ";function formatIsoNative(date){return date.toISOString()}var formatIso=Date.prototype.toISOString?formatIsoNative:exports.utcFormat(isoSpecifier);function parseIsoNative(string){var date=new Date(string);return isNaN(date)?null:date}var parseIso=+new Date("2000-01-01T00:00:00.000Z")?parseIsoNative:exports.utcParse(isoSpecifier);var durationSecond$1=1e3,durationMinute$1=durationSecond$1*60,durationHour$1=durationMinute$1*60,durationDay$1=durationHour$1*24,durationWeek$1=durationDay$1*7,durationMonth=durationDay$1*30,durationYear=durationDay$1*365;function date$1(t){return new Date(t)}function number$3(t){return t instanceof Date?+t:+new Date(+t)}function calendar(year,month,week,day,hour,minute,second,millisecond,format){var scale=continuous(),invert=scale.invert,domain=scale.domain;var formatMillisecond=format(".%L"),formatSecond=format(":%S"),formatMinute=format("%I:%M"),formatHour=format("%I %p"),formatDay=format("%a %d"),formatWeek=format("%b %d"),formatMonth=format("%B"),formatYear=format("%Y");var tickIntervals=[[second,1,durationSecond$1],[second,5,5*durationSecond$1],[second,15,15*durationSecond$1],[second,30,30*durationSecond$1],[minute,1,durationMinute$1],[minute,5,5*durationMinute$1],[minute,15,15*durationMinute$1],[minute,30,30*durationMinute$1],[hour,1,durationHour$1],[hour,3,3*durationHour$1],[hour,6,6*durationHour$1],[hour,12,12*durationHour$1],[day,1,durationDay$1],[day,2,2*durationDay$1],[week,1,durationWeek$1],[month,1,durationMonth],[month,3,3*durationMonth],[year,1,durationYear]];function tickFormat(date){return(second(date)<date?formatMillisecond:minute(date)<date?formatSecond:hour(date)<date?formatMinute:day(date)<date?formatHour:month(date)<date?week(date)<date?formatDay:formatWeek:year(date)<date?formatMonth:formatYear)(date)}function tickInterval(interval,start,stop){if(interval==null)interval=10;if(typeof interval==="number"){var target=Math.abs(stop-start)/interval,i=bisector(function(i){return i[2]}).right(tickIntervals,target),step;if(i===tickIntervals.length){step=tickStep(start/durationYear,stop/durationYear,interval);interval=year}else if(i){i=tickIntervals[target/tickIntervals[i-1][2]<tickIntervals[i][2]/target?i-1:i];step=i[1];interval=i[0]}else{step=Math.max(tickStep(start,stop,interval),1);interval=millisecond}return interval.every(step)}return interval}scale.invert=function(y){return new Date(invert(y))};scale.domain=function(_){return arguments.length?domain(Array.from(_,number$3)):domain().map(date$1)};scale.ticks=function(interval){var d=domain(),t0=d[0],t1=d[d.length-1],r=t1<t0,t;if(r)t=t0,t0=t1,t1=t;t=tickInterval(interval,t0,t1);t=t?t.range(t0,t1+1):[];return r?t.reverse():t};scale.tickFormat=function(count,specifier){return specifier==null?tickFormat:format(specifier)};scale.nice=function(interval){var d=domain();return(interval=tickInterval(interval,d[0],d[d.length-1]))?domain(nice$1(d,interval)):scale};scale.copy=function(){return copy(scale,calendar(year,month,week,day,hour,minute,second,millisecond,format))};return scale}function time(){return initRange.apply(calendar(year,month,sunday,day,hour,minute,second,millisecond,exports.timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function utcTime(){return initRange.apply(calendar(utcYear,utcMonth,utcSunday,utcDay,utcHour,utcMinute,second,millisecond,exports.utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function transformer$2(){var x0=0,x1=1,t0,t1,k10,transform,interpolator=identity$6,clamp=false,unknown;function scale(x){return isNaN(x=+x)?unknown:interpolator(k10===0?.5:(x=(transform(x)-t0)*k10,clamp?Math.max(0,Math.min(1,x)):x))}scale.domain=function(_){return arguments.length?([x0,x1]=_,t0=transform(x0=+x0),t1=transform(x1=+x1),k10=t0===t1?0:1/(t1-t0),scale):[x0,x1]};scale.clamp=function(_){return arguments.length?(clamp=!!_,scale):clamp};scale.interpolator=function(_){return arguments.length?(interpolator=_,scale):interpolator};function range(interpolate){return function(_){var r0,r1;return arguments.length?([r0,r1]=_,interpolator=interpolate(r0,r1),scale):[interpolator(0),interpolator(1)]}}scale.range=range(interpolate);scale.rangeRound=range(interpolateRound);scale.unknown=function(_){return arguments.length?(unknown=_,scale):unknown};return function(t){transform=t,t0=t(x0),t1=t(x1),k10=t0===t1?0:1/(t1-t0);return scale}}function copy$1(source,target){return target.domain(source.domain()).interpolator(source.interpolator()).clamp(source.clamp()).unknown(source.unknown())}function sequential(){var scale=linearish(transformer$2()(identity$6));scale.copy=function(){return copy$1(scale,sequential())};return initInterpolator.apply(scale,arguments)}function sequentialLog(){var scale=loggish(transformer$2()).domain([1,10]);scale.copy=function(){return copy$1(scale,sequentialLog()).base(scale.base())};return initInterpolator.apply(scale,arguments)}function sequentialSymlog(){var scale=symlogish(transformer$2());scale.copy=function(){return copy$1(scale,sequentialSymlog()).constant(scale.constant())};return initInterpolator.apply(scale,arguments)}function sequentialPow(){var scale=powish(transformer$2());scale.copy=function(){return copy$1(scale,sequentialPow()).exponent(scale.exponent())};return initInterpolator.apply(scale,arguments)}function sequentialSqrt(){return sequentialPow.apply(null,arguments).exponent(.5)}function sequentialQuantile(){var domain=[],interpolator=identity$6;function scale(x){if(!isNaN(x=+x))return interpolator((bisectRight(domain,x,1)-1)/(domain.length-1))}scale.domain=function(_){if(!arguments.length)return domain.slice();domain=[];for(let d of _)if(d!=null&&!isNaN(d=+d))domain.push(d);domain.sort(ascending);return scale};scale.interpolator=function(_){return arguments.length?(interpolator=_,scale):interpolator};scale.range=function(){return domain.map((d,i)=>interpolator(i/(domain.length-1)))};scale.quantiles=function(n){return Array.from({length:n+1},(_,i)=>quantile(domain,i/n))};scale.copy=function(){return sequentialQuantile(interpolator).domain(domain)};return initInterpolator.apply(scale,arguments)}function transformer$3(){var x0=0,x1=.5,x2=1,s=1,t0,t1,t2,k10,k21,interpolator=identity$6,transform,clamp=false,unknown;function scale(x){return isNaN(x=+x)?unknown:(x=.5+((x=+transform(x))-t1)*(s*x<s*t1?k10:k21),interpolator(clamp?Math.max(0,Math.min(1,x)):x))}scale.domain=function(_){return arguments.length?([x0,x1,x2]=_,t0=transform(x0=+x0),t1=transform(x1=+x1),t2=transform(x2=+x2),k10=t0===t1?0:.5/(t1-t0),k21=t1===t2?0:.5/(t2-t1),s=t1<t0?-1:1,scale):[x0,x1,x2]};scale.clamp=function(_){return arguments.length?(clamp=!!_,scale):clamp};scale.interpolator=function(_){return arguments.length?(interpolator=_,scale):interpolator};function range(interpolate){return function(_){var r0,r1,r2;return arguments.length?([r0,r1,r2]=_,interpolator=piecewise(interpolate,[r0,r1,r2]),scale):[interpolator(0),interpolator(.5),interpolator(1)]}}scale.range=range(interpolate);scale.rangeRound=range(interpolateRound);scale.unknown=function(_){return arguments.length?(unknown=_,scale):unknown};return function(t){transform=t,t0=t(x0),t1=t(x1),t2=t(x2),k10=t0===t1?0:.5/(t1-t0),k21=t1===t2?0:.5/(t2-t1),s=t1<t0?-1:1;return scale}}function diverging(){var scale=linearish(transformer$3()(identity$6));scale.copy=function(){return copy$1(scale,diverging())};return initInterpolator.apply(scale,arguments)}function divergingLog(){var scale=loggish(transformer$3()).domain([.1,1,10]);scale.copy=function(){return copy$1(scale,divergingLog()).base(scale.base())};return initInterpolator.apply(scale,arguments)}function divergingSymlog(){var scale=symlogish(transformer$3());scale.copy=function(){return copy$1(scale,divergingSymlog()).constant(scale.constant())};return initInterpolator.apply(scale,arguments)}function divergingPow(){var scale=powish(transformer$3());scale.copy=function(){return copy$1(scale,divergingPow()).exponent(scale.exponent())};return initInterpolator.apply(scale,arguments)}function divergingSqrt(){return divergingPow.apply(null,arguments).exponent(.5)}function colors(specifier){var n=specifier.length/6|0,colors=new Array(n),i=0;while(i<n)colors[i]="#"+specifier.slice(i*6,++i*6);return colors}var category10=colors("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf");var Accent=colors("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666");var Dark2=colors("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666");var Paired=colors("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928");var Pastel1=colors("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2");var Pastel2=colors("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc");var Set1=colors("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999");var Set2=colors("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3");var Set3=colors("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f");var Tableau10=colors("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");var ramp=scheme=>rgbBasis(scheme[scheme.length-1]);var scheme=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(colors);var BrBG=ramp(scheme);var scheme$1=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(colors);var PRGn=ramp(scheme$1);var scheme$2=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(colors);var PiYG=ramp(scheme$2);var scheme$3=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(colors);var PuOr=ramp(scheme$3);var scheme$4=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(colors);var RdBu=ramp(scheme$4);var scheme$5=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(colors);var RdGy=ramp(scheme$5);var scheme$6=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(colors);var RdYlBu=ramp(scheme$6);var scheme$7=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(colors);var RdYlGn=ramp(scheme$7);var scheme$8=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(colors);var Spectral=ramp(scheme$8);var scheme$9=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(colors);var BuGn=ramp(scheme$9);var scheme$a=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(colors);var BuPu=ramp(scheme$a);var scheme$b=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(colors);var GnBu=ramp(scheme$b);var scheme$c=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(colors);var OrRd=ramp(scheme$c);var scheme$d=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(colors);var PuBuGn=ramp(scheme$d);var scheme$e=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(colors);var PuBu=ramp(scheme$e);var scheme$f=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(colors);var PuRd=ramp(scheme$f);var scheme$g=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(colors);var RdPu=ramp(scheme$g);var scheme$h=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(colors);var YlGnBu=ramp(scheme$h);var scheme$i=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(colors);var YlGn=ramp(scheme$i);var scheme$j=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(colors);var YlOrBr=ramp(scheme$j);var scheme$k=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(colors);var YlOrRd=ramp(scheme$k);var scheme$l=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(colors);var Blues=ramp(scheme$l);var scheme$m=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(colors);var Greens=ramp(scheme$m);var scheme$n=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(colors);var Greys=ramp(scheme$n);var scheme$o=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(colors);var Purples=ramp(scheme$o);var scheme$p=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(colors);var Reds=ramp(scheme$p);var scheme$q=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(colors);var Oranges=ramp(scheme$q);function cividis(t){t=Math.max(0,Math.min(1,t));return"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-t*(35.34-t*(2381.73-t*(6402.7-t*(7024.72-t*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+t*(170.73+t*(52.82-t*(131.46-t*(176.58-t*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+t*(442.36-t*(2482.43-t*(6167.24-t*(6614.94-t*2475.67)))))))+")"}var cubehelix$3=cubehelixLong(cubehelix(300,.5,0),cubehelix(-240,.5,1));var warm=cubehelixLong(cubehelix(-100,.75,.35),cubehelix(80,1.5,.8));var cool=cubehelixLong(cubehelix(260,.75,.35),cubehelix(80,1.5,.8));var c$1=cubehelix();function rainbow(t){if(t<0||t>1)t-=Math.floor(t);var ts=Math.abs(t-.5);c$1.h=360*t-100;c$1.s=1.5-1.5*ts;c$1.l=.8-.9*ts;return c$1+""}var c$2=rgb(),pi_1_3=Math.PI/3,pi_2_3=Math.PI*2/3;function sinebow(t){var x;t=(.5-t)*Math.PI;c$2.r=255*(x=Math.sin(t))*x;c$2.g=255*(x=Math.sin(t+pi_1_3))*x;c$2.b=255*(x=Math.sin(t+pi_2_3))*x;return c$2+""}function turbo(t){t=Math.max(0,Math.min(1,t));return"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-t*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+t*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-t*6838.66)))))))+")"}function ramp$1(range){var n=range.length;return function(t){return range[Math.max(0,Math.min(n-1,Math.floor(t*n)))]}}var viridis=ramp$1(colors("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var magma=ramp$1(colors("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf"));var inferno=ramp$1(colors("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4"));var plasma=ramp$1(colors("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function constant$a(x){return function constant(){return x}}var abs$3=Math.abs;var atan2$1=Math.atan2;var cos$2=Math.cos;var max$3=Math.max;var min$2=Math.min;var sin$2=Math.sin;var sqrt$2=Math.sqrt;var epsilon$5=1e-12;var pi$4=Math.PI;var halfPi$3=pi$4/2;var tau$5=2*pi$4;function acos$1(x){return x>1?0:x<-1?pi$4:Math.acos(x)}function asin$1(x){return x>=1?halfPi$3:x<=-1?-halfPi$3:Math.asin(x)}function arcInnerRadius(d){return d.innerRadius}function arcOuterRadius(d){return d.outerRadius}function arcStartAngle(d){return d.startAngle}function arcEndAngle(d){return d.endAngle}function arcPadAngle(d){return d&&d.padAngle}function intersect(x0,y0,x1,y1,x2,y2,x3,y3){var x10=x1-x0,y10=y1-y0,x32=x3-x2,y32=y3-y2,t=y32*x10-x32*y10;if(t*t<epsilon$5)return;t=(x32*(y0-y2)-y32*(x0-x2))/t;return[x0+t*x10,y0+t*y10]}function cornerTangents(x0,y0,x1,y1,r1,rc,cw){var x01=x0-x1,y01=y0-y1,lo=(cw?rc:-rc)/sqrt$2(x01*x01+y01*y01),ox=lo*y01,oy=-lo*x01,x11=x0+ox,y11=y0+oy,x10=x1+ox,y10=y1+oy,x00=(x11+x10)/2,y00=(y11+y10)/2,dx=x10-x11,dy=y10-y11,d2=dx*dx+dy*dy,r=r1-rc,D=x11*y10-x10*y11,d=(dy<0?-1:1)*sqrt$2(max$3(0,r*r*d2-D*D)),cx0=(D*dy-dx*d)/d2,cy0=(-D*dx-dy*d)/d2,cx1=(D*dy+dx*d)/d2,cy1=(-D*dx+dy*d)/d2,dx0=cx0-x00,dy0=cy0-y00,dx1=cx1-x00,dy1=cy1-y00;if(dx0*dx0+dy0*dy0>dx1*dx1+dy1*dy1)cx0=cx1,cy0=cy1;return{cx:cx0,cy:cy0,x01:-ox,y01:-oy,x11:cx0*(r1/r-1),y11:cy0*(r1/r-1)}}function arc(){var innerRadius=arcInnerRadius,outerRadius=arcOuterRadius,cornerRadius=constant$a(0),padRadius=null,startAngle=arcStartAngle,endAngle=arcEndAngle,padAngle=arcPadAngle,context=null;function arc(){var buffer,r,r0=+innerRadius.apply(this,arguments),r1=+outerRadius.apply(this,arguments),a0=startAngle.apply(this,arguments)-halfPi$3,a1=endAngle.apply(this,arguments)-halfPi$3,da=abs$3(a1-a0),cw=a1>a0;if(!context)context=buffer=path();if(r1<r0)r=r1,r1=r0,r0=r;if(!(r1>epsilon$5))context.moveTo(0,0);else if(da>tau$5-epsilon$5){context.moveTo(r1*cos$2(a0),r1*sin$2(a0));context.arc(0,0,r1,a0,a1,!cw);if(r0>epsilon$5){context.moveTo(r0*cos$2(a1),r0*sin$2(a1));context.arc(0,0,r0,a1,a0,cw)}}else{var a01=a0,a11=a1,a00=a0,a10=a1,da0=da,da1=da,ap=padAngle.apply(this,arguments)/2,rp=ap>epsilon$5&&(padRadius?+padRadius.apply(this,arguments):sqrt$2(r0*r0+r1*r1)),rc=min$2(abs$3(r1-r0)/2,+cornerRadius.apply(this,arguments)),rc0=rc,rc1=rc,t0,t1;if(rp>epsilon$5){var p0=asin$1(rp/r0*sin$2(ap)),p1=asin$1(rp/r1*sin$2(ap));if((da0-=p0*2)>epsilon$5)p0*=cw?1:-1,a00+=p0,a10-=p0;else da0=0,a00=a10=(a0+a1)/2;if((da1-=p1*2)>epsilon$5)p1*=cw?1:-1,a01+=p1,a11-=p1;else da1=0,a01=a11=(a0+a1)/2}var x01=r1*cos$2(a01),y01=r1*sin$2(a01),x10=r0*cos$2(a10),y10=r0*sin$2(a10);if(rc>epsilon$5){var x11=r1*cos$2(a11),y11=r1*sin$2(a11),x00=r0*cos$2(a00),y00=r0*sin$2(a00),oc;if(da<pi$4&&(oc=intersect(x01,y01,x00,y00,x11,y11,x10,y10))){var ax=x01-oc[0],ay=y01-oc[1],bx=x11-oc[0],by=y11-oc[1],kc=1/sin$2(acos$1((ax*bx+ay*by)/(sqrt$2(ax*ax+ay*ay)*sqrt$2(bx*bx+by*by)))/2),lc=sqrt$2(oc[0]*oc[0]+oc[1]*oc[1]);rc0=min$2(rc,(r0-lc)/(kc-1));rc1=min$2(rc,(r1-lc)/(kc+1))}}if(!(da1>epsilon$5))context.moveTo(x01,y01);else if(rc1>epsilon$5){t0=cornerTangents(x00,y00,x01,y01,r1,rc1,cw);t1=cornerTangents(x11,y11,x10,y10,r1,rc1,cw);context.moveTo(t0.cx+t0.x01,t0.cy+t0.y01);if(rc1<rc)context.arc(t0.cx,t0.cy,rc1,atan2$1(t0.y01,t0.x01),atan2$1(t1.y01,t1.x01),!cw);else{context.arc(t0.cx,t0.cy,rc1,atan2$1(t0.y01,t0.x01),atan2$1(t0.y11,t0.x11),!cw);context.arc(0,0,r1,atan2$1(t0.cy+t0.y11,t0.cx+t0.x11),atan2$1(t1.cy+t1.y11,t1.cx+t1.x11),!cw);context.arc(t1.cx,t1.cy,rc1,atan2$1(t1.y11,t1.x11),atan2$1(t1.y01,t1.x01),!cw)}}else context.moveTo(x01,y01),context.arc(0,0,r1,a01,a11,!cw);if(!(r0>epsilon$5)||!(da0>epsilon$5))context.lineTo(x10,y10);else if(rc0>epsilon$5){t0=cornerTangents(x10,y10,x11,y11,r0,-rc0,cw);t1=cornerTangents(x01,y01,x00,y00,r0,-rc0,cw);context.lineTo(t0.cx+t0.x01,t0.cy+t0.y01);if(rc0<rc)context.arc(t0.cx,t0.cy,rc0,atan2$1(t0.y01,t0.x01),atan2$1(t1.y01,t1.x01),!cw);else{context.arc(t0.cx,t0.cy,rc0,atan2$1(t0.y01,t0.x01),atan2$1(t0.y11,t0.x11),!cw);context.arc(0,0,r0,atan2$1(t0.cy+t0.y11,t0.cx+t0.x11),atan2$1(t1.cy+t1.y11,t1.cx+t1.x11),cw);context.arc(t1.cx,t1.cy,rc0,atan2$1(t1.y11,t1.x11),atan2$1(t1.y01,t1.x01),!cw)}}else context.arc(0,0,r0,a10,a00,cw)}context.closePath();if(buffer)return context=null,buffer+""||null}arc.centroid=function(){var r=(+innerRadius.apply(this,arguments)+ +outerRadius.apply(this,arguments))/2,a=(+startAngle.apply(this,arguments)+ +endAngle.apply(this,arguments))/2-pi$4/2;return[cos$2(a)*r,sin$2(a)*r]};arc.innerRadius=function(_){return arguments.length?(innerRadius=typeof _==="function"?_:constant$a(+_),arc):innerRadius};arc.outerRadius=function(_){return arguments.length?(outerRadius=typeof _==="function"?_:constant$a(+_),arc):outerRadius};arc.cornerRadius=function(_){return arguments.length?(cornerRadius=typeof _==="function"?_:constant$a(+_),arc):cornerRadius};arc.padRadius=function(_){return arguments.length?(padRadius=_==null?null:typeof _==="function"?_:constant$a(+_),arc):padRadius};arc.startAngle=function(_){return arguments.length?(startAngle=typeof _==="function"?_:constant$a(+_),arc):startAngle};arc.endAngle=function(_){return arguments.length?(endAngle=typeof _==="function"?_:constant$a(+_),arc):endAngle};arc.padAngle=function(_){return arguments.length?(padAngle=typeof _==="function"?_:constant$a(+_),arc):padAngle};arc.context=function(_){return arguments.length?(context=_==null?null:_,arc):context};return arc}var slice$4=Array.prototype.slice;function array$5(x){return typeof x==="object"&&"length"in x?x:Array.from(x)}function Linear(context){this._context=context}Linear.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){if(this._line||this._line!==0&&this._point===1)this._context.closePath();this._line=1-this._line},point:function(x,y){x=+x,y=+y;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(x,y):this._context.moveTo(x,y);break;case 1:this._point=2;default:this._context.lineTo(x,y);break}}};function curveLinear(context){return new Linear(context)}function x$3(p){return p[0]}function y$3(p){return p[1]}function line(x,y){var defined=constant$a(true),context=null,curve=curveLinear,output=null;x=typeof x==="function"?x:x===undefined?x$3:constant$a(x);y=typeof y==="function"?y:y===undefined?y$3:constant$a(y);function line(data){var i,n=(data=array$5(data)).length,d,defined0=false,buffer;if(context==null)output=curve(buffer=path());for(i=0;i<=n;++i){if(!(i<n&&defined(d=data[i],i,data))===defined0){if(defined0=!defined0)output.lineStart();else output.lineEnd()}if(defined0)output.point(+x(d,i,data),+y(d,i,data))}if(buffer)return output=null,buffer+""||null}line.x=function(_){return arguments.length?(x=typeof _==="function"?_:constant$a(+_),line):x};line.y=function(_){return arguments.length?(y=typeof _==="function"?_:constant$a(+_),line):y};line.defined=function(_){return arguments.length?(defined=typeof _==="function"?_:constant$a(!!_),line):defined};line.curve=function(_){return arguments.length?(curve=_,context!=null&&(output=curve(context)),line):curve};line.context=function(_){return arguments.length?(_==null?context=output=null:output=curve(context=_),line):context};return line}function area$3(x0,y0,y1){var x1=null,defined=constant$a(true),context=null,curve=curveLinear,output=null;x0=typeof x0==="function"?x0:x0===undefined?x$3:constant$a(+x0);y0=typeof y0==="function"?y0:y0===undefined?constant$a(0):constant$a(+y0);y1=typeof y1==="function"?y1:y1===undefined?y$3:constant$a(+y1);function area(data){var i,j,k,n=(data=array$5(data)).length,d,defined0=false,buffer,x0z=new Array(n),y0z=new Array(n);if(context==null)output=curve(buffer=path());for(i=0;i<=n;++i){if(!(i<n&&defined(d=data[i],i,data))===defined0){if(defined0=!defined0){j=i;output.areaStart();output.lineStart()}else{output.lineEnd();output.lineStart();for(k=i-1;k>=j;--k){output.point(x0z[k],y0z[k])}output.lineEnd();output.areaEnd()}}if(defined0){x0z[i]=+x0(d,i,data),y0z[i]=+y0(d,i,data);output.point(x1?+x1(d,i,data):x0z[i],y1?+y1(d,i,data):y0z[i])}}if(buffer)return output=null,buffer+""||null}function arealine(){return line().defined(defined).curve(curve).context(context)}area.x=function(_){return arguments.length?(x0=typeof _==="function"?_:constant$a(+_),x1=null,area):x0};area.x0=function(_){return arguments.length?(x0=typeof _==="function"?_:constant$a(+_),area):x0};area.x1=function(_){return arguments.length?(x1=_==null?null:typeof _==="function"?_:constant$a(+_),area):x1};area.y=function(_){return arguments.length?(y0=typeof _==="function"?_:constant$a(+_),y1=null,area):y0};area.y0=function(_){return arguments.length?(y0=typeof _==="function"?_:constant$a(+_),area):y0};area.y1=function(_){return arguments.length?(y1=_==null?null:typeof _==="function"?_:constant$a(+_),area):y1};area.lineX0=area.lineY0=function(){return arealine().x(x0).y(y0)};area.lineY1=function(){return arealine().x(x0).y(y1)};area.lineX1=function(){return arealine().x(x1).y(y0)};area.defined=function(_){return arguments.length?(defined=typeof _==="function"?_:constant$a(!!_),area):defined};area.curve=function(_){return arguments.length?(curve=_,context!=null&&(output=curve(context)),area):curve};area.context=function(_){return arguments.length?(_==null?context=output=null:output=curve(context=_),area):context};return area}function descending$1(a,b){return b<a?-1:b>a?1:b>=a?0:NaN}function identity$8(d){return d}function pie(){var value=identity$8,sortValues=descending$1,sort=null,startAngle=constant$a(0),endAngle=constant$a(tau$5),padAngle=constant$a(0);function pie(data){var i,n=(data=array$5(data)).length,j,k,sum=0,index=new Array(n),arcs=new Array(n),a0=+startAngle.apply(this,arguments),da=Math.min(tau$5,Math.max(-tau$5,endAngle.apply(this,arguments)-a0)),a1,p=Math.min(Math.abs(da)/n,padAngle.apply(this,arguments)),pa=p*(da<0?-1:1),v;for(i=0;i<n;++i){if((v=arcs[index[i]=i]=+value(data[i],i,data))>0){sum+=v}}if(sortValues!=null)index.sort(function(i,j){return sortValues(arcs[i],arcs[j])});else if(sort!=null)index.sort(function(i,j){return sort(data[i],data[j])});for(i=0,k=sum?(da-n*pa)/sum:0;i<n;++i,a0=a1){j=index[i],v=arcs[j],a1=a0+(v>0?v*k:0)+pa,arcs[j]={data:data[j],index:i,value:v,startAngle:a0,endAngle:a1,padAngle:p}}return arcs}pie.value=function(_){return arguments.length?(value=typeof _==="function"?_:constant$a(+_),pie):value};pie.sortValues=function(_){return arguments.length?(sortValues=_,sort=null,pie):sortValues};pie.sort=function(_){return arguments.length?(sort=_,sortValues=null,pie):sort};pie.startAngle=function(_){return arguments.length?(startAngle=typeof _==="function"?_:constant$a(+_),pie):startAngle};pie.endAngle=function(_){return arguments.length?(endAngle=typeof _==="function"?_:constant$a(+_),pie):endAngle};pie.padAngle=function(_){return arguments.length?(padAngle=typeof _==="function"?_:constant$a(+_),pie):padAngle};return pie}var curveRadialLinear=curveRadial(curveLinear);function Radial(curve){this._curve=curve}Radial.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(a,r){this._curve.point(r*Math.sin(a),r*-Math.cos(a))}};function curveRadial(curve){function radial(context){return new Radial(curve(context))}radial._curve=curve;return radial}function lineRadial(l){var c=l.curve;l.angle=l.x,delete l.x;l.radius=l.y,delete l.y;l.curve=function(_){return arguments.length?c(curveRadial(_)):c()._curve};return l}function lineRadial$1(){return lineRadial(line().curve(curveRadialLinear))}function areaRadial(){var a=area$3().curve(curveRadialLinear),c=a.curve,x0=a.lineX0,x1=a.lineX1,y0=a.lineY0,y1=a.lineY1;a.angle=a.x,delete a.x;a.startAngle=a.x0,delete a.x0;a.endAngle=a.x1,delete a.x1;a.radius=a.y,delete a.y;a.innerRadius=a.y0,delete a.y0;a.outerRadius=a.y1,delete a.y1;a.lineStartAngle=function(){return lineRadial(x0())},delete a.lineX0;a.lineEndAngle=function(){return lineRadial(x1())},delete a.lineX1;a.lineInnerRadius=function(){return lineRadial(y0())},delete a.lineY0;a.lineOuterRadius=function(){return lineRadial(y1())},delete a.lineY1;a.curve=function(_){return arguments.length?c(curveRadial(_)):c()._curve};return a}function pointRadial(x,y){return[(y=+y)*Math.cos(x-=Math.PI/2),y*Math.sin(x)]}function linkSource(d){return d.source}function linkTarget(d){return d.target}function link$2(curve){var source=linkSource,target=linkTarget,x=x$3,y=y$3,context=null;function link(){var buffer,argv=slice$4.call(arguments),s=source.apply(this,argv),t=target.apply(this,argv);if(!context)context=buffer=path();curve(context,+x.apply(this,(argv[0]=s,argv)),+y.apply(this,argv),+x.apply(this,(argv[0]=t,argv)),+y.apply(this,argv));if(buffer)return context=null,buffer+""||null}link.source=function(_){return arguments.length?(source=_,link):source};link.target=function(_){return arguments.length?(target=_,link):target};link.x=function(_){return arguments.length?(x=typeof _==="function"?_:constant$a(+_),link):x};link.y=function(_){return arguments.length?(y=typeof _==="function"?_:constant$a(+_),link):y};link.context=function(_){return arguments.length?(context=_==null?null:_,link):context};return link}function curveHorizontal(context,x0,y0,x1,y1){context.moveTo(x0,y0);context.bezierCurveTo(x0=(x0+x1)/2,y0,x0,y1,x1,y1)}function curveVertical(context,x0,y0,x1,y1){context.moveTo(x0,y0);context.bezierCurveTo(x0,y0=(y0+y1)/2,x1,y0,x1,y1)}function curveRadial$1(context,x0,y0,x1,y1){var p0=pointRadial(x0,y0),p1=pointRadial(x0,y0=(y0+y1)/2),p2=pointRadial(x1,y0),p3=pointRadial(x1,y1);context.moveTo(p0[0],p0[1]);context.bezierCurveTo(p1[0],p1[1],p2[0],p2[1],p3[0],p3[1])}function linkHorizontal(){return link$2(curveHorizontal)}function linkVertical(){return link$2(curveVertical)}function linkRadial(){var l=link$2(curveRadial$1);l.angle=l.x,delete l.x;l.radius=l.y,delete l.y;return l}var circle$2={draw:function(context,size){var r=Math.sqrt(size/pi$4);context.moveTo(r,0);context.arc(0,0,r,0,tau$5)}};var cross$2={draw:function(context,size){var r=Math.sqrt(size/5)/2;context.moveTo(-3*r,-r);context.lineTo(-r,-r);context.lineTo(-r,-3*r);context.lineTo(r,-3*r);context.lineTo(r,-r);context.lineTo(3*r,-r);context.lineTo(3*r,r);context.lineTo(r,r);context.lineTo(r,3*r);context.lineTo(-r,3*r);context.lineTo(-r,r);context.lineTo(-3*r,r);context.closePath()}};var tan30=Math.sqrt(1/3),tan30_2=tan30*2;var diamond={draw:function(context,size){var y=Math.sqrt(size/tan30_2),x=y*tan30;context.moveTo(0,-y);context.lineTo(x,0);context.lineTo(0,y);context.lineTo(-x,0);context.closePath()}};var ka=.8908130915292852,kr=Math.sin(pi$4/10)/Math.sin(7*pi$4/10),kx=Math.sin(tau$5/10)*kr,ky=-Math.cos(tau$5/10)*kr;var star={draw:function(context,size){var r=Math.sqrt(size*ka),x=kx*r,y=ky*r;context.moveTo(0,-r);context.lineTo(x,y);for(var i=1;i<5;++i){var a=tau$5*i/5,c=Math.cos(a),s=Math.sin(a);context.lineTo(s*r,-c*r);context.lineTo(c*x-s*y,s*x+c*y)}context.closePath()}};var square$1={draw:function(context,size){var w=Math.sqrt(size),x=-w/2;context.rect(x,x,w,w)}};var sqrt3=Math.sqrt(3);var triangle={draw:function(context,size){var y=-Math.sqrt(size/(sqrt3*3));context.moveTo(0,y*2);context.lineTo(-sqrt3*y,-y);context.lineTo(sqrt3*y,-y);context.closePath()}};var c$3=-.5,s=Math.sqrt(3)/2,k=1/Math.sqrt(12),a$1=(k/2+1)*3;var wye={draw:function(context,size){var r=Math.sqrt(size/a$1),x0=r/2,y0=r*k,x1=x0,y1=r*k+r,x2=-x1,y2=y1;context.moveTo(x0,y0);context.lineTo(x1,y1);context.lineTo(x2,y2);context.lineTo(c$3*x0-s*y0,s*x0+c$3*y0);context.lineTo(c$3*x1-s*y1,s*x1+c$3*y1);context.lineTo(c$3*x2-s*y2,s*x2+c$3*y2);context.lineTo(c$3*x0+s*y0,c$3*y0-s*x0);context.lineTo(c$3*x1+s*y1,c$3*y1-s*x1);context.lineTo(c$3*x2+s*y2,c$3*y2-s*x2);context.closePath()}};var symbols=[circle$2,cross$2,diamond,square$1,star,triangle,wye];function symbol(type,size){var context=null;type=typeof type==="function"?type:constant$a(type||circle$2);size=typeof size==="function"?size:constant$a(size===undefined?64:+size);function symbol(){var buffer;if(!context)context=buffer=path();type.apply(this,arguments).draw(context,+size.apply(this,arguments));if(buffer)return context=null,buffer+""||null}symbol.type=function(_){return arguments.length?(type=typeof _==="function"?_:constant$a(_),symbol):type};symbol.size=function(_){return arguments.length?(size=typeof _==="function"?_:constant$a(+_),symbol):size};symbol.context=function(_){return arguments.length?(context=_==null?null:_,symbol):context};return symbol}function noop$3(){}function point$1(that,x,y){that._context.bezierCurveTo((2*that._x0+that._x1)/3,(2*that._y0+that._y1)/3,(that._x0+2*that._x1)/3,(that._y0+2*that._y1)/3,(that._x0+4*that._x1+x)/6,(that._y0+4*that._y1+y)/6)}function Basis(context){this._context=context}Basis.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN;this._point=0},lineEnd:function(){switch(this._point){case 3:point$1(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}if(this._line||this._line!==0&&this._point===1)this._context.closePath();this._line=1-this._line},point:function(x,y){x=+x,y=+y;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(x,y):this._context.moveTo(x,y);break;case 1:this._point=2;break;case 2:this._point=3;this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:point$1(this,x,y);break}this._x0=this._x1,this._x1=x;this._y0=this._y1,this._y1=y}};function basis$2(context){return new Basis(context)}function BasisClosed(context){this._context=context}BasisClosed.prototype={areaStart:noop$3,areaEnd:noop$3,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN;this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2);this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3);this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3);this._context.closePath();break}case 3:{this.point(this._x2,this._y2);this.point(this._x3,this._y3);this.point(this._x4,this._y4);break}}},point:function(x,y){x=+x,y=+y;switch(this._point){case 0:this._point=1;this._x2=x,this._y2=y;break;case 1:this._point=2;this._x3=x,this._y3=y;break;case 2:this._point=3;this._x4=x,this._y4=y;this._context.moveTo((this._x0+4*this._x1+x)/6,(this._y0+4*this._y1+y)/6);break;default:point$1(this,x,y);break}this._x0=this._x1,this._x1=x;this._y0=this._y1,this._y1=y}};function basisClosed$1(context){return new BasisClosed(context)}function BasisOpen(context){this._context=context}BasisOpen.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN;this._point=0},lineEnd:function(){if(this._line||this._line!==0&&this._point===3)this._context.closePath();this._line=1-this._line},point:function(x,y){x=+x,y=+y;switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var x0=(this._x0+4*this._x1+x)/6,y0=(this._y0+4*this._y1+y)/6;this._line?this._context.lineTo(x0,y0):this._context.moveTo(x0,y0);break;case 3:this._point=4;default:point$1(this,x,y);break}this._x0=this._x1,this._x1=x;this._y0=this._y1,this._y1=y}};function basisOpen(context){return new BasisOpen(context)}function Bundle(context,beta){this._basis=new Basis(context);this._beta=beta}Bundle.prototype={lineStart:function(){this._x=[];this._y=[];this._basis.lineStart()},lineEnd:function(){var x=this._x,y=this._y,j=x.length-1;if(j>0){var x0=x[0],y0=y[0],dx=x[j]-x0,dy=y[j]-y0,i=-1,t;while(++i<=j){t=i/j;this._basis.point(this._beta*x[i]+(1-this._beta)*(x0+t*dx),this._beta*y[i]+(1-this._beta)*(y0+t*dy))}}this._x=this._y=null;this._basis.lineEnd()},point:function(x,y){this._x.push(+x);this._y.push(+y)}};var bundle=function custom(beta){function bundle(context){return beta===1?new Basis(context):new Bundle(context,beta)}bundle.beta=function(beta){return custom(+beta)};return bundle}(.85);function point$2(that,x,y){that._context.bezierCurveTo(that._x1+that._k*(that._x2-that._x0),that._y1+that._k*(that._y2-that._y0),that._x2+that._k*(that._x1-x),that._y2+that._k*(that._y1-y),that._x2,that._y2)}function Cardinal(context,tension){this._context=context;this._k=(1-tension)/6}Cardinal.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:point$2(this,this._x1,this._y1);break}if(this._line||this._line!==0&&this._point===1)this._context.closePath();this._line=1-this._line},point:function(x,y){x=+x,y=+y;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(x,y):this._context.moveTo(x,y);break;case 1:this._point=2;this._x1=x,this._y1=y;break;case 2:this._point=3;default:point$2(this,x,y);break}this._x0=this._x1,this._x1=this._x2,this._x2=x;this._y0=this._y1,this._y1=this._y2,this._y2=y}};var cardinal=function custom(tension){function cardinal(context){return new Cardinal(context,tension)}cardinal.tension=function(tension){return custom(+tension)};return cardinal}(0);function CardinalClosed(context,tension){this._context=context;this._k=(1-tension)/6}CardinalClosed.prototype={areaStart:noop$3,areaEnd:noop$3,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN;this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3);this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3);this._context.closePath();break}case 3:{this.point(this._x3,this._y3);this.point(this._x4,this._y4);this.point(this._x5,this._y5);break}}},point:function(x,y){x=+x,y=+y;switch(this._point){case 0:this._point=1;this._x3=x,this._y3=y;break;case 1:this._point=2;this._context.moveTo(this._x4=x,this._y4=y);break;case 2:this._point=3;this._x5=x,this._y5=y;break;default:point$2(this,x,y);break}this._x0=this._x1,this._x1=this._x2,this._x2=x;this._y0=this._y1,this._y1=this._y2,this._y2=y}};var cardinalClosed=function custom(tension){function cardinal(context){return new CardinalClosed(context,tension)}cardinal.tension=function(tension){return custom(+tension)};return cardinal}(0);function CardinalOpen(context,tension){this._context=context;this._k=(1-tension)/6}CardinalOpen.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._point=0},lineEnd:function(){if(this._line||this._line!==0&&this._point===3)this._context.closePath();this._line=1-this._line},point:function(x,y){x=+x,y=+y;switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:point$2(this,x,y);break}this._x0=this._x1,this._x1=this._x2,this._x2=x;this._y0=this._y1,this._y1=this._y2,this._y2=y}};var cardinalOpen=function custom(tension){function cardinal(context){return new CardinalOpen(context,tension)}cardinal.tension=function(tension){return custom(+tension)};return cardinal}(0);function point$3(that,x,y){var x1=that._x1,y1=that._y1,x2=that._x2,y2=that._y2;if(that._l01_a>epsilon$5){var a=2*that._l01_2a+3*that._l01_a*that._l12_a+that._l12_2a,n=3*that._l01_a*(that._l01_a+that._l12_a);x1=(x1*a-that._x0*that._l12_2a+that._x2*that._l01_2a)/n;y1=(y1*a-that._y0*that._l12_2a+that._y2*that._l01_2a)/n}if(that._l23_a>epsilon$5){var b=2*that._l23_2a+3*that._l23_a*that._l12_a+that._l12_2a,m=3*that._l23_a*(that._l23_a+that._l12_a);x2=(x2*b+that._x1*that._l23_2a-x*that._l12_2a)/m;y2=(y2*b+that._y1*that._l23_2a-y*that._l12_2a)/m}that._context.bezierCurveTo(x1,y1,x2,y2,that._x2,that._y2)}function CatmullRom(context,alpha){this._context=context;this._alpha=alpha}CatmullRom.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}if(this._line||this._line!==0&&this._point===1)this._context.closePath();this._line=1-this._line},point:function(x,y){x=+x,y=+y;if(this._point){var x23=this._x2-x,y23=this._y2-y;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(x23*x23+y23*y23,this._alpha))}switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(x,y):this._context.moveTo(x,y);break;case 1:this._point=2;break;case 2:this._point=3;default:point$3(this,x,y);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a;this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a;this._x0=this._x1,this._x1=this._x2,this._x2=x;this._y0=this._y1,this._y1=this._y2,this._y2=y}};var catmullRom=function custom(alpha){function catmullRom(context){return alpha?new CatmullRom(context,alpha):new Cardinal(context,0)}catmullRom.alpha=function(alpha){return custom(+alpha)};return catmullRom}(.5);function CatmullRomClosed(context,alpha){this._context=context;this._alpha=alpha}CatmullRomClosed.prototype={areaStart:noop$3,areaEnd:noop$3,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN;this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3);this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3);this._context.closePath();break}case 3:{this.point(this._x3,this._y3);this.point(this._x4,this._y4);this.point(this._x5,this._y5);break}}},point:function(x,y){x=+x,y=+y;if(this._point){var x23=this._x2-x,y23=this._y2-y;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(x23*x23+y23*y23,this._alpha))}switch(this._point){case 0:this._point=1;this._x3=x,this._y3=y;break;case 1:this._point=2;this._context.moveTo(this._x4=x,this._y4=y);break;case 2:this._point=3;this._x5=x,this._y5=y;break;default:point$3(this,x,y);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a;this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a;this._x0=this._x1,this._x1=this._x2,this._x2=x;this._y0=this._y1,this._y1=this._y2,this._y2=y}};var catmullRomClosed=function custom(alpha){function catmullRom(context){return alpha?new CatmullRomClosed(context,alpha):new CardinalClosed(context,0)}catmullRom.alpha=function(alpha){return custom(+alpha)};return catmullRom}(.5);function CatmullRomOpen(context,alpha){this._context=context;this._alpha=alpha}CatmullRomOpen.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){if(this._line||this._line!==0&&this._point===3)this._context.closePath();this._line=1-this._line},point:function(x,y){x=+x,y=+y;if(this._point){var x23=this._x2-x,y23=this._y2-y;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(x23*x23+y23*y23,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:point$3(this,x,y);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a;this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a;this._x0=this._x1,this._x1=this._x2,this._x2=x;this._y0=this._y1,this._y1=this._y2,this._y2=y}};var catmullRomOpen=function custom(alpha){function catmullRom(context){return alpha?new CatmullRomOpen(context,alpha):new CardinalOpen(context,0)}catmullRom.alpha=function(alpha){return custom(+alpha)};return catmullRom}(.5);function LinearClosed(context){this._context=context}LinearClosed.prototype={areaStart:noop$3,areaEnd:noop$3,lineStart:function(){this._point=0},lineEnd:function(){if(this._point)this._context.closePath()},point:function(x,y){x=+x,y=+y;if(this._point)this._context.lineTo(x,y);else this._point=1,this._context.moveTo(x,y)}};function linearClosed(context){return new LinearClosed(context)}function sign$1(x){return x<0?-1:1}function slope3(that,x2,y2){var h0=that._x1-that._x0,h1=x2-that._x1,s0=(that._y1-that._y0)/(h0||h1<0&&-0),s1=(y2-that._y1)/(h1||h0<0&&-0),p=(s0*h1+s1*h0)/(h0+h1);return(sign$1(s0)+sign$1(s1))*Math.min(Math.abs(s0),Math.abs(s1),.5*Math.abs(p))||0}function slope2(that,t){var h=that._x1-that._x0;return h?(3*(that._y1-that._y0)/h-t)/2:t}function point$4(that,t0,t1){var x0=that._x0,y0=that._y0,x1=that._x1,y1=that._y1,dx=(x1-x0)/3;that._context.bezierCurveTo(x0+dx,y0+dx*t0,x1-dx,y1-dx*t1,x1,y1)}function MonotoneX(context){this._context=context}MonotoneX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN;this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:point$4(this,this._t0,slope2(this,this._t0));break}if(this._line||this._line!==0&&this._point===1)this._context.closePath();this._line=1-this._line},point:function(x,y){var t1=NaN;x=+x,y=+y;if(x===this._x1&&y===this._y1)return;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(x,y):this._context.moveTo(x,y);break;case 1:this._point=2;break;case 2:this._point=3;point$4(this,slope2(this,t1=slope3(this,x,y)),t1);break;default:point$4(this,this._t0,t1=slope3(this,x,y));break}this._x0=this._x1,this._x1=x;this._y0=this._y1,this._y1=y;this._t0=t1}};function MonotoneY(context){this._context=new ReflectContext(context)}(MonotoneY.prototype=Object.create(MonotoneX.prototype)).point=function(x,y){MonotoneX.prototype.point.call(this,y,x)};function ReflectContext(context){this._context=context}ReflectContext.prototype={moveTo:function(x,y){this._context.moveTo(y,x)},closePath:function(){this._context.closePath()},lineTo:function(x,y){this._context.lineTo(y,x)},bezierCurveTo:function(x1,y1,x2,y2,x,y){this._context.bezierCurveTo(y1,x1,y2,x2,y,x)}};function monotoneX(context){return new MonotoneX(context)}function monotoneY(context){return new MonotoneY(context)}function Natural(context){this._context=context}Natural.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[];this._y=[]},lineEnd:function(){var x=this._x,y=this._y,n=x.length;if(n){this._line?this._context.lineTo(x[0],y[0]):this._context.moveTo(x[0],y[0]);if(n===2){this._context.lineTo(x[1],y[1])}else{var px=controlPoints(x),py=controlPoints(y);for(var i0=0,i1=1;i1<n;++i0,++i1){this._context.bezierCurveTo(px[0][i0],py[0][i0],px[1][i0],py[1][i0],x[i1],y[i1])}}}if(this._line||this._line!==0&&n===1)this._context.closePath();this._line=1-this._line;this._x=this._y=null},point:function(x,y){this._x.push(+x);this._y.push(+y)}};function controlPoints(x){var i,n=x.length-1,m,a=new Array(n),b=new Array(n),r=new Array(n);a[0]=0,b[0]=2,r[0]=x[0]+2*x[1];for(i=1;i<n-1;++i)a[i]=1,b[i]=4,r[i]=4*x[i]+2*x[i+1];a[n-1]=2,b[n-1]=7,r[n-1]=8*x[n-1]+x[n];for(i=1;i<n;++i)m=a[i]/b[i-1],b[i]-=m,r[i]-=m*r[i-1];a[n-1]=r[n-1]/b[n-1];for(i=n-2;i>=0;--i)a[i]=(r[i]-a[i+1])/b[i];b[n-1]=(x[n]+a[n-1])/2;for(i=0;i<n-1;++i)b[i]=2*x[i+1]-a[i+1];return[a,b]}function natural(context){return new Natural(context)}function Step(context,t){this._context=context;this._t=t}Step.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN;this._point=0},lineEnd:function(){if(0<this._t&&this._t<1&&this._point===2)this._context.lineTo(this._x,this._y);if(this._line||this._line!==0&&this._point===1)this._context.closePath();if(this._line>=0)this._t=1-this._t,this._line=1-this._line},point:function(x,y){x=+x,y=+y;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(x,y):this._context.moveTo(x,y);break;case 1:this._point=2;default:{if(this._t<=0){this._context.lineTo(this._x,y);this._context.lineTo(x,y)}else{var x1=this._x*(1-this._t)+x*this._t;this._context.lineTo(x1,this._y);this._context.lineTo(x1,y)}break}}this._x=x,this._y=y}};function step(context){return new Step(context,.5)}function stepBefore(context){return new Step(context,0)}function stepAfter(context){return new Step(context,1)}function none$1(series,order){if(!((n=series.length)>1))return;for(var i=1,j,s0,s1=series[order[0]],n,m=s1.length;i<n;++i){s0=s1,s1=series[order[i]];for(j=0;j<m;++j){s1[j][1]+=s1[j][0]=isNaN(s0[j][1])?s0[j][0]:s0[j][1]}}}function none$2(series){var n=series.length,o=new Array(n);while(--n>=0)o[n]=n;return o}function stackValue(d,key){return d[key]}function stackSeries(key){const series=[];series.key=key;return series}function stack(){var keys=constant$a([]),order=none$2,offset=none$1,value=stackValue;function stack(data){var sz=Array.from(keys.apply(this,arguments),stackSeries),i,n=sz.length,j=-1,oz;for(const d of data){for(i=0,++j;i<n;++i){(sz[i][j]=[0,+value(d,sz[i].key,j,data)]).data=d}}for(i=0,oz=array$5(order(sz));i<n;++i){sz[oz[i]].index=i}offset(sz,oz);return sz}stack.keys=function(_){return arguments.length?(keys=typeof _==="function"?_:constant$a(Array.from(_)),stack):keys};stack.value=function(_){return arguments.length?(value=typeof _==="function"?_:constant$a(+_),stack):value};stack.order=function(_){return arguments.length?(order=_==null?none$2:typeof _==="function"?_:constant$a(Array.from(_)),stack):order};stack.offset=function(_){return arguments.length?(offset=_==null?none$1:_,stack):offset};return stack}function expand(series,order){if(!((n=series.length)>0))return;for(var i,n,j=0,m=series[0].length,y;j<m;++j){for(y=i=0;i<n;++i)y+=series[i][j][1]||0;if(y)for(i=0;i<n;++i)series[i][j][1]/=y}none$1(series,order)}function diverging$1(series,order){if(!((n=series.length)>0))return;for(var i,j=0,d,dy,yp,yn,n,m=series[order[0]].length;j<m;++j){for(yp=yn=0,i=0;i<n;++i){if((dy=(d=series[order[i]][j])[1]-d[0])>0){d[0]=yp,d[1]=yp+=dy}else if(dy<0){d[1]=yn,d[0]=yn+=dy}else{d[0]=0,d[1]=dy}}}}function silhouette(series,order){if(!((n=series.length)>0))return;for(var j=0,s0=series[order[0]],n,m=s0.length;j<m;++j){for(var i=0,y=0;i<n;++i)y+=series[i][j][1]||0;s0[j][1]+=s0[j][0]=-y/2}none$1(series,order)}function wiggle(series,order){if(!((n=series.length)>0)||!((m=(s0=series[order[0]]).length)>0))return;for(var y=0,j=1,s0,m,n;j<m;++j){for(var i=0,s1=0,s2=0;i<n;++i){var si=series[order[i]],sij0=si[j][1]||0,sij1=si[j-1][1]||0,s3=(sij0-sij1)/2;for(var k=0;k<i;++k){var sk=series[order[k]],skj0=sk[j][1]||0,skj1=sk[j-1][1]||0;s3+=skj0-skj1}s1+=sij0,s2+=s3*sij0}s0[j-1][1]+=s0[j-1][0]=y;if(s1)y-=s2/s1}s0[j-1][1]+=s0[j-1][0]=y;none$1(series,order)}function appearance(series){var peaks=series.map(peak);return none$2(series).sort(function(a,b){return peaks[a]-peaks[b]})}function peak(series){var i=-1,j=0,n=series.length,vi,vj=-Infinity;while(++i<n)if((vi=+series[i][1])>vj)vj=vi,j=i;return j}function ascending$3(series){var sums=series.map(sum$1);return none$2(series).sort(function(a,b){return sums[a]-sums[b]})}function sum$1(series){var s=0,i=-1,n=series.length,v;while(++i<n)if(v=+series[i][1])s+=v;return s}function descending$2(series){return ascending$3(series).reverse()}function insideOut(series){var n=series.length,i,j,sums=series.map(sum$1),order=appearance(series),top=0,bottom=0,tops=[],bottoms=[];for(i=0;i<n;++i){j=order[i];if(top<bottom){top+=sums[j];tops.push(j)}else{bottom+=sums[j];bottoms.push(j)}}return bottoms.reverse().concat(tops)}function reverse$1(series){return none$2(series).reverse()}var constant$b=x=>()=>x;function ZoomEvent(type,{sourceEvent:sourceEvent,target:target,transform:transform,dispatch:dispatch}){Object.defineProperties(this,{type:{value:type,enumerable:true,configurable:true},sourceEvent:{value:sourceEvent,enumerable:true,configurable:true},target:{value:target,enumerable:true,configurable:true},transform:{value:transform,enumerable:true,configurable:true},_:{value:dispatch}})}function Transform(k,x,y){this.k=k;this.x=x;this.y=y}Transform.prototype={constructor:Transform,scale:function(k){return k===1?this:new Transform(this.k*k,this.x,this.y)},translate:function(x,y){return x===0&y===0?this:new Transform(this.k,this.x+this.k*x,this.y+this.k*y)},apply:function(point){return[point[0]*this.k+this.x,point[1]*this.k+this.y]},applyX:function(x){return x*this.k+this.x},applyY:function(y){return y*this.k+this.y},invert:function(location){return[(location[0]-this.x)/this.k,(location[1]-this.y)/this.k]},invertX:function(x){return(x-this.x)/this.k},invertY:function(y){return(y-this.y)/this.k},rescaleX:function(x){return x.copy().domain(x.range().map(this.invertX,this).map(x.invert,x))},rescaleY:function(y){return y.copy().domain(y.range().map(this.invertY,this).map(y.invert,y))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var identity$9=new Transform(1,0,0);transform$1.prototype=Transform.prototype;function transform$1(node){while(!node.__zoom)if(!(node=node.parentNode))return identity$9;return node.__zoom}function nopropagation$2(event){event.stopImmediatePropagation()}function noevent$2(event){event.preventDefault();event.stopImmediatePropagation()}function defaultFilter$2(event){return(!event.ctrlKey||event.type==="wheel")&&!event.button}function defaultExtent$1(){var e=this;if(e instanceof SVGElement){e=e.ownerSVGElement||e;if(e.hasAttribute("viewBox")){e=e.viewBox.baseVal;return[[e.x,e.y],[e.x+e.width,e.y+e.height]]}return[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}return[[0,0],[e.clientWidth,e.clientHeight]]}function defaultTransform(){return this.__zoom||identity$9}function defaultWheelDelta(event){return-event.deltaY*(event.deltaMode===1?.05:event.deltaMode?1:.002)*(event.ctrlKey?10:1)}function defaultTouchable$2(){return navigator.maxTouchPoints||"ontouchstart"in this}function defaultConstrain(transform,extent,translateExtent){var dx0=transform.invertX(extent[0][0])-translateExtent[0][0],dx1=transform.invertX(extent[1][0])-translateExtent[1][0],dy0=transform.invertY(extent[0][1])-translateExtent[0][1],dy1=transform.invertY(extent[1][1])-translateExtent[1][1];return transform.translate(dx1>dx0?(dx0+dx1)/2:Math.min(0,dx0)||Math.max(0,dx1),dy1>dy0?(dy0+dy1)/2:Math.min(0,dy0)||Math.max(0,dy1))}function zoom(){var filter=defaultFilter$2,extent=defaultExtent$1,constrain=defaultConstrain,wheelDelta=defaultWheelDelta,touchable=defaultTouchable$2,scaleExtent=[0,Infinity],translateExtent=[[-Infinity,-Infinity],[Infinity,Infinity]],duration=250,interpolate=interpolateZoom,listeners=dispatch("start","zoom","end"),touchstarting,touchfirst,touchending,touchDelay=500,wheelDelay=150,clickDistance2=0,tapDistance=10;function zoom(selection){selection.property("__zoom",defaultTransform).on("wheel.zoom",wheeled).on("mousedown.zoom",mousedowned).on("dblclick.zoom",dblclicked).filter(touchable).on("touchstart.zoom",touchstarted).on("touchmove.zoom",touchmoved).on("touchend.zoom touchcancel.zoom",touchended).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}zoom.transform=function(collection,transform,point,event){var selection=collection.selection?collection.selection():collection;selection.property("__zoom",defaultTransform);if(collection!==selection){schedule(collection,transform,point,event)}else{selection.interrupt().each(function(){gesture(this,arguments).event(event).start().zoom(null,typeof transform==="function"?transform.apply(this,arguments):transform).end()})}};zoom.scaleBy=function(selection,k,p,event){zoom.scaleTo(selection,function(){var k0=this.__zoom.k,k1=typeof k==="function"?k.apply(this,arguments):k;return k0*k1},p,event)};zoom.scaleTo=function(selection,k,p,event){zoom.transform(selection,function(){var e=extent.apply(this,arguments),t0=this.__zoom,p0=p==null?centroid(e):typeof p==="function"?p.apply(this,arguments):p,p1=t0.invert(p0),k1=typeof k==="function"?k.apply(this,arguments):k;return constrain(translate(scale(t0,k1),p0,p1),e,translateExtent)},p,event)};zoom.translateBy=function(selection,x,y,event){zoom.transform(selection,function(){return constrain(this.__zoom.translate(typeof x==="function"?x.apply(this,arguments):x,typeof y==="function"?y.apply(this,arguments):y),extent.apply(this,arguments),translateExtent)},null,event)};zoom.translateTo=function(selection,x,y,p,event){zoom.transform(selection,function(){var e=extent.apply(this,arguments),t=this.__zoom,p0=p==null?centroid(e):typeof p==="function"?p.apply(this,arguments):p;return constrain(identity$9.translate(p0[0],p0[1]).scale(t.k).translate(typeof x==="function"?-x.apply(this,arguments):-x,typeof y==="function"?-y.apply(this,arguments):-y),e,translateExtent)},p,event)};function scale(transform,k){k=Math.max(scaleExtent[0],Math.min(scaleExtent[1],k));return k===transform.k?transform:new Transform(k,transform.x,transform.y)}function translate(transform,p0,p1){var x=p0[0]-p1[0]*transform.k,y=p0[1]-p1[1]*transform.k;return x===transform.x&&y===transform.y?transform:new Transform(transform.k,x,y)}function centroid(extent){return[(+extent[0][0]+ +extent[1][0])/2,(+extent[0][1]+ +extent[1][1])/2]}function schedule(transition,transform,point,event){transition.on("start.zoom",function(){gesture(this,arguments).event(event).start()}).on("interrupt.zoom end.zoom",function(){gesture(this,arguments).event(event).end()}).tween("zoom",function(){var that=this,args=arguments,g=gesture(that,args).event(event),e=extent.apply(that,args),p=point==null?centroid(e):typeof point==="function"?point.apply(that,args):point,w=Math.max(e[1][0]-e[0][0],e[1][1]-e[0][1]),a=that.__zoom,b=typeof transform==="function"?transform.apply(that,args):transform,i=interpolate(a.invert(p).concat(w/a.k),b.invert(p).concat(w/b.k));return function(t){if(t===1)t=b;else{var l=i(t),k=w/l[2];t=new Transform(k,p[0]-l[0]*k,p[1]-l[1]*k)}g.zoom(null,t)}})}function gesture(that,args,clean){return!clean&&that.__zooming||new Gesture(that,args)}function Gesture(that,args){this.that=that;this.args=args;this.active=0;this.sourceEvent=null;this.extent=extent.apply(that,args);this.taps=0}Gesture.prototype={event:function(event){if(event)this.sourceEvent=event;return this},start:function(){if(++this.active===1){this.that.__zooming=this;this.emit("start")}return this},zoom:function(key,transform){if(this.mouse&&key!=="mouse")this.mouse[1]=transform.invert(this.mouse[0]);if(this.touch0&&key!=="touch")this.touch0[1]=transform.invert(this.touch0[0]);if(this.touch1&&key!=="touch")this.touch1[1]=transform.invert(this.touch1[0]);this.that.__zoom=transform;this.emit("zoom");return this},end:function(){if(--this.active===0){delete this.that.__zooming;this.emit("end")}return this},emit:function(type){var d=select(this.that).datum();listeners.call(type,this.that,new ZoomEvent(type,{sourceEvent:this.sourceEvent,target:zoom,type:type,transform:this.that.__zoom,dispatch:listeners}),d)}};function wheeled(event,...args){if(!filter.apply(this,arguments))return;var g=gesture(this,args).event(event),t=this.__zoom,k=Math.max(scaleExtent[0],Math.min(scaleExtent[1],t.k*Math.pow(2,wheelDelta.apply(this,arguments)))),p=pointer(event);if(g.wheel){if(g.mouse[0][0]!==p[0]||g.mouse[0][1]!==p[1]){g.mouse[1]=t.invert(g.mouse[0]=p)}clearTimeout(g.wheel)}else if(t.k===k)return;else{g.mouse=[p,t.invert(p)];interrupt(this);g.start()}noevent$2(event);g.wheel=setTimeout(wheelidled,wheelDelay);g.zoom("mouse",constrain(translate(scale(t,k),g.mouse[0],g.mouse[1]),g.extent,translateExtent));function wheelidled(){g.wheel=null;g.end()}}function mousedowned(event,...args){if(touchending||!filter.apply(this,arguments))return;var g=gesture(this,args,true).event(event),v=select(event.view).on("mousemove.zoom",mousemoved,true).on("mouseup.zoom",mouseupped,true),p=pointer(event,currentTarget),currentTarget=event.currentTarget,x0=event.clientX,y0=event.clientY;dragDisable(event.view);nopropagation$2(event);g.mouse=[p,this.__zoom.invert(p)];interrupt(this);g.start();function mousemoved(event){noevent$2(event);if(!g.moved){var dx=event.clientX-x0,dy=event.clientY-y0;g.moved=dx*dx+dy*dy>clickDistance2}g.event(event).zoom("mouse",constrain(translate(g.that.__zoom,g.mouse[0]=pointer(event,currentTarget),g.mouse[1]),g.extent,translateExtent))}function mouseupped(event){v.on("mousemove.zoom mouseup.zoom",null);yesdrag(event.view,g.moved);noevent$2(event);g.event(event).end()}}function dblclicked(event,...args){if(!filter.apply(this,arguments))return;var t0=this.__zoom,p0=pointer(event.changedTouches?event.changedTouches[0]:event,this),p1=t0.invert(p0),k1=t0.k*(event.shiftKey?.5:2),t1=constrain(translate(scale(t0,k1),p0,p1),extent.apply(this,args),translateExtent);noevent$2(event);if(duration>0)select(this).transition().duration(duration).call(schedule,t1,p0,event);else select(this).call(zoom.transform,t1,p0,event)}function touchstarted(event,...args){if(!filter.apply(this,arguments))return;var touches=event.touches,n=touches.length,g=gesture(this,args,event.changedTouches.length===n).event(event),started,i,t,p;nopropagation$2(event);for(i=0;i<n;++i){t=touches[i],p=pointer(t,this);p=[p,this.__zoom.invert(p),t.identifier];if(!g.touch0)g.touch0=p,started=true,g.taps=1+!!touchstarting;else if(!g.touch1&&g.touch0[2]!==p[2])g.touch1=p,g.taps=0}if(touchstarting)touchstarting=clearTimeout(touchstarting);if(started){if(g.taps<2)touchfirst=p[0],touchstarting=setTimeout(function(){touchstarting=null},touchDelay);interrupt(this);g.start()}}function touchmoved(event,...args){if(!this.__zooming)return;var g=gesture(this,args).event(event),touches=event.changedTouches,n=touches.length,i,t,p,l;noevent$2(event);for(i=0;i<n;++i){t=touches[i],p=pointer(t,this);if(g.touch0&&g.touch0[2]===t.identifier)g.touch0[0]=p;else if(g.touch1&&g.touch1[2]===t.identifier)g.touch1[0]=p}t=g.that.__zoom;if(g.touch1){var p0=g.touch0[0],l0=g.touch0[1],p1=g.touch1[0],l1=g.touch1[1],dp=(dp=p1[0]-p0[0])*dp+(dp=p1[1]-p0[1])*dp,dl=(dl=l1[0]-l0[0])*dl+(dl=l1[1]-l0[1])*dl;t=scale(t,Math.sqrt(dp/dl));p=[(p0[0]+p1[0])/2,(p0[1]+p1[1])/2];l=[(l0[0]+l1[0])/2,(l0[1]+l1[1])/2]}else if(g.touch0)p=g.touch0[0],l=g.touch0[1];else return;g.zoom("touch",constrain(translate(t,p,l),g.extent,translateExtent))}function touchended(event,...args){if(!this.__zooming)return;var g=gesture(this,args).event(event),touches=event.changedTouches,n=touches.length,i,t;nopropagation$2(event);if(touchending)clearTimeout(touchending);touchending=setTimeout(function(){touchending=null},touchDelay);for(i=0;i<n;++i){t=touches[i];if(g.touch0&&g.touch0[2]===t.identifier)delete g.touch0;else if(g.touch1&&g.touch1[2]===t.identifier)delete g.touch1}if(g.touch1&&!g.touch0)g.touch0=g.touch1,delete g.touch1;if(g.touch0)g.touch0[1]=this.__zoom.invert(g.touch0[0]);else{g.end();if(g.taps===2){t=pointer(t,this);if(Math.hypot(touchfirst[0]-t[0],touchfirst[1]-t[1])<tapDistance){var p=select(this).on("dblclick.zoom");if(p)p.apply(this,arguments)}}}}zoom.wheelDelta=function(_){return arguments.length?(wheelDelta=typeof _==="function"?_:constant$b(+_),zoom):wheelDelta};zoom.filter=function(_){return arguments.length?(filter=typeof _==="function"?_:constant$b(!!_),zoom):filter};zoom.touchable=function(_){return arguments.length?(touchable=typeof _==="function"?_:constant$b(!!_),zoom):touchable};zoom.extent=function(_){return arguments.length?(extent=typeof _==="function"?_:constant$b([[+_[0][0],+_[0][1]],[+_[1][0],+_[1][1]]]),zoom):extent};zoom.scaleExtent=function(_){return arguments.length?(scaleExtent[0]=+_[0],scaleExtent[1]=+_[1],zoom):[scaleExtent[0],scaleExtent[1]]};zoom.translateExtent=function(_){return arguments.length?(translateExtent[0][0]=+_[0][0],translateExtent[1][0]=+_[1][0],translateExtent[0][1]=+_[0][1],translateExtent[1][1]=+_[1][1],zoom):[[translateExtent[0][0],translateExtent[0][1]],[translateExtent[1][0],translateExtent[1][1]]]};zoom.constrain=function(_){return arguments.length?(constrain=_,zoom):constrain};zoom.duration=function(_){return arguments.length?(duration=+_,zoom):duration};zoom.interpolate=function(_){return arguments.length?(interpolate=_,zoom):interpolate};zoom.on=function(){var value=listeners.on.apply(listeners,arguments);return value===listeners?zoom:value};zoom.clickDistance=function(_){return arguments.length?(clickDistance2=(_=+_)*_,zoom):Math.sqrt(clickDistance2)};zoom.tapDistance=function(_){return arguments.length?(tapDistance=+_,zoom):tapDistance};return zoom}exports.Adder=Adder;exports.Delaunay=Delaunay;exports.FormatSpecifier=FormatSpecifier;exports.InternMap=InternMap;exports.InternSet=InternSet;exports.Voronoi=Voronoi;exports.active=active;exports.arc=arc;exports.area=area$3;exports.areaRadial=areaRadial;exports.ascending=ascending;exports.autoType=autoType;exports.axisBottom=axisBottom;exports.axisLeft=axisLeft;exports.axisRight=axisRight;exports.axisTop=axisTop;exports.bin=bin;exports.bisect=bisectRight;exports.bisectCenter=bisectCenter;exports.bisectLeft=bisectLeft;exports.bisectRight=bisectRight;exports.bisector=bisector;exports.blob=blob;exports.brush=brush;exports.brushSelection=brushSelection;exports.brushX=brushX;exports.brushY=brushY;exports.buffer=buffer;exports.chord=chord;exports.chordDirected=chordDirected;exports.chordTranspose=chordTranspose;exports.cluster=cluster;exports.color=color;exports.contourDensity=density;exports.contours=contours;exports.count=count;exports.create=create;exports.creator=creator;exports.cross=cross;exports.csv=csv$1;exports.csvFormat=csvFormat;exports.csvFormatBody=csvFormatBody;exports.csvFormatRow=csvFormatRow;exports.csvFormatRows=csvFormatRows;exports.csvFormatValue=csvFormatValue;exports.csvParse=csvParse;exports.csvParseRows=csvParseRows;exports.cubehelix=cubehelix;exports.cumsum=cumsum;exports.curveBasis=basis$2;exports.curveBasisClosed=basisClosed$1;exports.curveBasisOpen=basisOpen;exports.curveBundle=bundle;exports.curveCardinal=cardinal;exports.curveCardinalClosed=cardinalClosed;exports.curveCardinalOpen=cardinalOpen;exports.curveCatmullRom=catmullRom;exports.curveCatmullRomClosed=catmullRomClosed;exports.curveCatmullRomOpen=catmullRomOpen;exports.curveLinear=curveLinear;exports.curveLinearClosed=linearClosed;exports.curveMonotoneX=monotoneX;exports.curveMonotoneY=monotoneY;exports.curveNatural=natural;exports.curveStep=step;exports.curveStepAfter=stepAfter;exports.curveStepBefore=stepBefore;exports.descending=descending;exports.deviation=deviation;exports.difference=difference;exports.disjoint=disjoint;exports.dispatch=dispatch;exports.drag=drag;exports.dragDisable=dragDisable;exports.dragEnable=yesdrag;exports.dsv=dsv;exports.dsvFormat=dsvFormat;exports.easeBack=backInOut;exports.easeBackIn=backIn;exports.easeBackInOut=backInOut;exports.easeBackOut=backOut;exports.easeBounce=bounceOut;exports.easeBounceIn=bounceIn;exports.easeBounceInOut=bounceInOut;exports.easeBounceOut=bounceOut;exports.easeCircle=circleInOut;exports.easeCircleIn=circleIn;exports.easeCircleInOut=circleInOut;exports.easeCircleOut=circleOut;exports.easeCubic=cubicInOut;exports.easeCubicIn=cubicIn;exports.easeCubicInOut=cubicInOut;exports.easeCubicOut=cubicOut;exports.easeElastic=elasticOut;exports.easeElasticIn=elasticIn;exports.easeElasticInOut=elasticInOut;exports.easeElasticOut=elasticOut;exports.easeExp=expInOut;exports.easeExpIn=expIn;exports.easeExpInOut=expInOut;exports.easeExpOut=expOut;exports.easeLinear=linear$1;exports.easePoly=polyInOut;exports.easePolyIn=polyIn;exports.easePolyInOut=polyInOut;exports.easePolyOut=polyOut;exports.easeQuad=quadInOut;exports.easeQuadIn=quadIn;exports.easeQuadInOut=quadInOut;exports.easeQuadOut=quadOut;exports.easeSin=sinInOut;exports.easeSinIn=sinIn;exports.easeSinInOut=sinInOut;exports.easeSinOut=sinOut;exports.every=every;exports.extent=extent;exports.filter=filter;exports.forceCenter=center$1;exports.forceCollide=collide;exports.forceLink=link;exports.forceManyBody=manyBody;exports.forceRadial=radial;exports.forceSimulation=simulation;exports.forceX=x$2;exports.forceY=y$2;exports.formatDefaultLocale=defaultLocale;exports.formatLocale=formatLocale;exports.formatSpecifier=formatSpecifier;exports.fsum=fsum;exports.geoAlbers=albers;exports.geoAlbersUsa=albersUsa;exports.geoArea=area$1;exports.geoAzimuthalEqualArea=azimuthalEqualArea;exports.geoAzimuthalEqualAreaRaw=azimuthalEqualAreaRaw;exports.geoAzimuthalEquidistant=azimuthalEquidistant;exports.geoAzimuthalEquidistantRaw=azimuthalEquidistantRaw;exports.geoBounds=bounds;exports.geoCentroid=centroid;exports.geoCircle=circle;exports.geoClipAntimeridian=clipAntimeridian;exports.geoClipCircle=clipCircle;exports.geoClipExtent=extent$1;exports.geoClipRectangle=clipRectangle;exports.geoConicConformal=conicConformal;exports.geoConicConformalRaw=conicConformalRaw;exports.geoConicEqualArea=conicEqualArea;exports.geoConicEqualAreaRaw=conicEqualAreaRaw;exports.geoConicEquidistant=conicEquidistant;exports.geoConicEquidistantRaw=conicEquidistantRaw;exports.geoContains=contains$1;exports.geoDistance=distance;exports.geoEqualEarth=equalEarth;exports.geoEqualEarthRaw=equalEarthRaw;exports.geoEquirectangular=equirectangular;exports.geoEquirectangularRaw=equirectangularRaw;exports.geoGnomonic=gnomonic;exports.geoGnomonicRaw=gnomonicRaw;exports.geoGraticule=graticule;exports.geoGraticule10=graticule10;exports.geoIdentity=identity$5;exports.geoInterpolate=interpolate$2;exports.geoLength=length$2;exports.geoMercator=mercator;exports.geoMercatorRaw=mercatorRaw;exports.geoNaturalEarth1=naturalEarth1;exports.geoNaturalEarth1Raw=naturalEarth1Raw;exports.geoOrthographic=orthographic;exports.geoOrthographicRaw=orthographicRaw;exports.geoPath=index$2;exports.geoProjection=projection;exports.geoProjectionMutator=projectionMutator;exports.geoRotation=rotation;exports.geoStereographic=stereographic;exports.geoStereographicRaw=stereographicRaw;exports.geoStream=geoStream;exports.geoTransform=transform;exports.geoTransverseMercator=transverseMercator;exports.geoTransverseMercatorRaw=transverseMercatorRaw;exports.gray=gray;exports.greatest=greatest;exports.greatestIndex=greatestIndex;exports.group=group;exports.groupSort=groupSort;exports.groups=groups;exports.hcl=hcl;exports.hierarchy=hierarchy;exports.histogram=bin;exports.hsl=hsl;exports.html=html;exports.image=image;exports.index=index;exports.indexes=indexes;exports.interpolate=interpolate;exports.interpolateArray=array$2;exports.interpolateBasis=basis$1;exports.interpolateBasisClosed=basisClosed;exports.interpolateBlues=Blues;exports.interpolateBrBG=BrBG;exports.interpolateBuGn=BuGn;exports.interpolateBuPu=BuPu;exports.interpolateCividis=cividis;exports.interpolateCool=cool;exports.interpolateCubehelix=cubehelix$2;exports.interpolateCubehelixDefault=cubehelix$3;exports.interpolateCubehelixLong=cubehelixLong;exports.interpolateDate=date;exports.interpolateDiscrete=discrete;exports.interpolateGnBu=GnBu;exports.interpolateGreens=Greens;exports.interpolateGreys=Greys;exports.interpolateHcl=hcl$2;exports.interpolateHclLong=hclLong;exports.interpolateHsl=hsl$2;exports.interpolateHslLong=hslLong;exports.interpolateHue=hue$1;exports.interpolateInferno=inferno;exports.interpolateLab=lab$1;exports.interpolateMagma=magma;exports.interpolateNumber=interpolateNumber;exports.interpolateNumberArray=numberArray;exports.interpolateObject=object;exports.interpolateOrRd=OrRd;exports.interpolateOranges=Oranges;exports.interpolatePRGn=PRGn;exports.interpolatePiYG=PiYG;exports.interpolatePlasma=plasma;exports.interpolatePuBu=PuBu;exports.interpolatePuBuGn=PuBuGn;exports.interpolatePuOr=PuOr;exports.interpolatePuRd=PuRd;exports.interpolatePurples=Purples;exports.interpolateRainbow=rainbow;exports.interpolateRdBu=RdBu;exports.interpolateRdGy=RdGy;exports.interpolateRdPu=RdPu;exports.interpolateRdYlBu=RdYlBu;exports.interpolateRdYlGn=RdYlGn;exports.interpolateReds=Reds;exports.interpolateRgb=interpolateRgb;exports.interpolateRgbBasis=rgbBasis;exports.interpolateRgbBasisClosed=rgbBasisClosed;exports.interpolateRound=interpolateRound;exports.interpolateSinebow=sinebow;exports.interpolateSpectral=Spectral;exports.interpolateString=interpolateString;exports.interpolateTransformCss=interpolateTransformCss;exports.interpolateTransformSvg=interpolateTransformSvg;exports.interpolateTurbo=turbo;exports.interpolateViridis=viridis;exports.interpolateWarm=warm;exports.interpolateYlGn=YlGn;exports.interpolateYlGnBu=YlGnBu;exports.interpolateYlOrBr=YlOrBr;exports.interpolateYlOrRd=YlOrRd;exports.interpolateZoom=interpolateZoom;exports.interrupt=interrupt;exports.intersection=intersection;exports.interval=interval$1;exports.isoFormat=formatIso;exports.isoParse=parseIso;exports.json=json;exports.lab=lab;exports.lch=lch;exports.least=least;exports.leastIndex=leastIndex;exports.line=line;exports.lineRadial=lineRadial$1;exports.linkHorizontal=linkHorizontal;exports.linkRadial=linkRadial;exports.linkVertical=linkVertical;exports.local=local;exports.map=map;exports.matcher=matcher;exports.max=max;exports.maxIndex=maxIndex;exports.mean=mean;exports.median=median;exports.merge=merge;exports.min=min;exports.minIndex=minIndex;exports.namespace=namespace;exports.namespaces=namespaces;exports.nice=nice;exports.now=now;exports.pack=index$3;exports.packEnclose=enclose;exports.packSiblings=siblings;exports.pairs=pairs;exports.partition=partition;exports.path=path;exports.permute=permute;exports.pie=pie;exports.piecewise=piecewise;exports.pointRadial=pointRadial;exports.pointer=pointer;exports.pointers=pointers;exports.polygonArea=area$2;exports.polygonCentroid=centroid$1;exports.polygonContains=contains$2;exports.polygonHull=hull;exports.polygonLength=length$3;exports.precisionFixed=precisionFixed;exports.precisionPrefix=precisionPrefix;exports.precisionRound=precisionRound;exports.quadtree=quadtree;exports.quantile=quantile;exports.quantileSorted=quantileSorted;exports.quantize=quantize;exports.quickselect=quickselect;exports.radialArea=areaRadial;exports.radialLine=lineRadial$1;exports.randomBates=bates;exports.randomBernoulli=bernoulli;exports.randomBeta=beta;exports.randomBinomial=binomial;exports.randomCauchy=cauchy;exports.randomExponential=exponential$1;exports.randomGamma=gamma$1;exports.randomGeometric=geometric;exports.randomInt=int;exports.randomIrwinHall=irwinHall;exports.randomLcg=lcg$1;exports.randomLogNormal=logNormal;exports.randomLogistic=logistic;exports.randomNormal=normal;exports.randomPareto=pareto;exports.randomPoisson=poisson;exports.randomUniform=uniform;exports.randomWeibull=weibull;exports.range=sequence;exports.reduce=reduce;exports.reverse=reverse;exports.rgb=rgb;exports.ribbon=ribbon$1;exports.ribbonArrow=ribbonArrow;exports.rollup=rollup;exports.rollups=rollups;exports.scaleBand=band;exports.scaleDiverging=diverging;exports.scaleDivergingLog=divergingLog;exports.scaleDivergingPow=divergingPow;exports.scaleDivergingSqrt=divergingSqrt;exports.scaleDivergingSymlog=divergingSymlog;exports.scaleIdentity=identity$7;exports.scaleImplicit=implicit;exports.scaleLinear=linear$2;exports.scaleLog=log$1;exports.scaleOrdinal=ordinal;exports.scalePoint=point;exports.scalePow=pow$2;exports.scaleQuantile=quantile$1;exports.scaleQuantize=quantize$1;exports.scaleRadial=radial$1;exports.scaleSequential=sequential;exports.scaleSequentialLog=sequentialLog;exports.scaleSequentialPow=sequentialPow;exports.scaleSequentialQuantile=sequentialQuantile;exports.scaleSequentialSqrt=sequentialSqrt;exports.scaleSequentialSymlog=sequentialSymlog;exports.scaleSqrt=sqrt$1;exports.scaleSymlog=symlog;exports.scaleThreshold=threshold;exports.scaleTime=time;exports.scaleUtc=utcTime;exports.scan=scan;exports.schemeAccent=Accent;exports.schemeBlues=scheme$l;exports.schemeBrBG=scheme;exports.schemeBuGn=scheme$9;exports.schemeBuPu=scheme$a;exports.schemeCategory10=category10;exports.schemeDark2=Dark2;exports.schemeGnBu=scheme$b;exports.schemeGreens=scheme$m;exports.schemeGreys=scheme$n;exports.schemeOrRd=scheme$c;exports.schemeOranges=scheme$q;exports.schemePRGn=scheme$1;exports.schemePaired=Paired;exports.schemePastel1=Pastel1;exports.schemePastel2=Pastel2;exports.schemePiYG=scheme$2;exports.schemePuBu=scheme$e;exports.schemePuBuGn=scheme$d;exports.schemePuOr=scheme$3;exports.schemePuRd=scheme$f;exports.schemePurples=scheme$o;exports.schemeRdBu=scheme$4;exports.schemeRdGy=scheme$5;exports.schemeRdPu=scheme$g;exports.schemeRdYlBu=scheme$6;exports.schemeRdYlGn=scheme$7;exports.schemeReds=scheme$p;exports.schemeSet1=Set1;exports.schemeSet2=Set2;exports.schemeSet3=Set3;exports.schemeSpectral=scheme$8;exports.schemeTableau10=Tableau10;exports.schemeYlGn=scheme$i;exports.schemeYlGnBu=scheme$h;exports.schemeYlOrBr=scheme$j;exports.schemeYlOrRd=scheme$k;exports.select=select;exports.selectAll=selectAll;exports.selection=selection;exports.selector=selector;exports.selectorAll=selectorAll;exports.shuffle=shuffle;exports.shuffler=shuffler;exports.some=some;exports.sort=sort;exports.stack=stack;exports.stackOffsetDiverging=diverging$1;exports.stackOffsetExpand=expand;exports.stackOffsetNone=none$1;exports.stackOffsetSilhouette=silhouette;exports.stackOffsetWiggle=wiggle;exports.stackOrderAppearance=appearance;exports.stackOrderAscending=ascending$3;exports.stackOrderDescending=descending$2;exports.stackOrderInsideOut=insideOut;exports.stackOrderNone=none$2;exports.stackOrderReverse=reverse$1;exports.stratify=stratify;exports.style=styleValue;exports.subset=subset;exports.sum=sum;exports.superset=superset;exports.svg=svg;exports.symbol=symbol;exports.symbolCircle=circle$2;exports.symbolCross=cross$2;exports.symbolDiamond=diamond;exports.symbolSquare=square$1;exports.symbolStar=star;exports.symbolTriangle=triangle;exports.symbolWye=wye;exports.symbols=symbols;exports.text=text;exports.thresholdFreedmanDiaconis=freedmanDiaconis;exports.thresholdScott=scott;exports.thresholdSturges=thresholdSturges;exports.tickFormat=tickFormat;exports.tickIncrement=tickIncrement;exports.tickStep=tickStep;exports.ticks=ticks;exports.timeDay=day;exports.timeDays=days;exports.timeFormatDefaultLocale=defaultLocale$1;exports.timeFormatLocale=formatLocale$1;exports.timeFriday=friday;exports.timeFridays=fridays;exports.timeHour=hour;exports.timeHours=hours;exports.timeInterval=newInterval;exports.timeMillisecond=millisecond;exports.timeMilliseconds=milliseconds;exports.timeMinute=minute;exports.timeMinutes=minutes;exports.timeMonday=monday;exports.timeMondays=mondays;exports.timeMonth=month;exports.timeMonths=months;exports.timeSaturday=saturday;exports.timeSaturdays=saturdays;exports.timeSecond=second;exports.timeSeconds=seconds;exports.timeSunday=sunday;exports.timeSundays=sundays;exports.timeThursday=thursday;exports.timeThursdays=thursdays;exports.timeTuesday=tuesday;exports.timeTuesdays=tuesdays;exports.timeWednesday=wednesday;exports.timeWednesdays=wednesdays;exports.timeWeek=sunday;exports.timeWeeks=sundays;exports.timeYear=year;exports.timeYears=years;exports.timeout=timeout$1;exports.timer=timer;exports.timerFlush=timerFlush;exports.transition=transition;exports.transpose=transpose;exports.tree=tree;exports.treemap=index$4;exports.treemapBinary=binary;exports.treemapDice=treemapDice;exports.treemapResquarify=resquarify;exports.treemapSlice=treemapSlice;exports.treemapSliceDice=sliceDice;exports.treemapSquarify=squarify;exports.tsv=tsv$1;exports.tsvFormat=tsvFormat;exports.tsvFormatBody=tsvFormatBody;exports.tsvFormatRow=tsvFormatRow;exports.tsvFormatRows=tsvFormatRows;exports.tsvFormatValue=tsvFormatValue;exports.tsvParse=tsvParse;exports.tsvParseRows=tsvParseRows;exports.union=union;exports.utcDay=utcDay;exports.utcDays=utcDays;exports.utcFriday=utcFriday;exports.utcFridays=utcFridays;exports.utcHour=utcHour;exports.utcHours=utcHours;exports.utcMillisecond=millisecond;exports.utcMilliseconds=milliseconds;exports.utcMinute=utcMinute;exports.utcMinutes=utcMinutes;exports.utcMonday=utcMonday;exports.utcMondays=utcMondays;exports.utcMonth=utcMonth;exports.utcMonths=utcMonths;exports.utcSaturday=utcSaturday;exports.utcSaturdays=utcSaturdays;exports.utcSecond=second;exports.utcSeconds=seconds;exports.utcSunday=utcSunday;exports.utcSundays=utcSundays;exports.utcThursday=utcThursday;exports.utcThursdays=utcThursdays;exports.utcTuesday=utcTuesday;exports.utcTuesdays=utcTuesdays;exports.utcWednesday=utcWednesday;exports.utcWednesdays=utcWednesdays;exports.utcWeek=utcSunday;exports.utcWeeks=utcSundays;exports.utcYear=utcYear;exports.utcYears=utcYears;exports.variance=variance;exports.version=version;exports.window=defaultView;exports.xml=xml;exports.zip=zip;exports.zoom=zoom;exports.zoomIdentity=identity$9;exports.zoomTransform=transform$1;Object.defineProperty(exports,"__esModule",{value:true})});!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.SimpleKeyboard=e():t.SimpleKeyboard=e()}(this,function(){return function(){var t={9662:function(t,e,n){var r=n(614),o=n(6330),i=TypeError;t.exports=function(t){if(r(t))return t;throw i(o(t)+" is not a function")}},9483:function(t,e,n){var r=n(4411),o=n(6330),i=TypeError;t.exports=function(t){if(r(t))return t;throw i(o(t)+" is not a constructor")}},6077:function(t,e,n){var r=n(614),o=String,i=TypeError;t.exports=function(t){if("object"==typeof t||r(t))return t;throw i("Can't set "+o(t)+" as a prototype")}},1223:function(t,e,n){var r=n(5112),o=n(30),i=n(3070).f,a=r("unscopables"),s=Array.prototype;null==s[a]&&i(s,a,{configurable:!0,value:o(null)}),t.exports=function(t){s[a][t]=!0}},1530:function(t,e,n){"use strict";var r=n(8710).charAt;t.exports=function(t,e,n){return e+(n?r(t,e).length:1)}},9670:function(t,e,n){var r=n(111),o=String,i=TypeError;t.exports=function(t){if(r(t))return t;throw i(o(t)+" is not an object")}},8533:function(t,e,n){"use strict";var r=n(2092).forEach,o=n(9341)("forEach");t.exports=o?[].forEach:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}},8457:function(t,e,n){"use strict";var r=n(9974),o=n(6916),i=n(7908),a=n(3411),s=n(7659),u=n(4411),c=n(6244),l=n(6135),f=n(4121),d=n(1246),p=Array;t.exports=function(t){var e=i(t),n=u(this),h=arguments.length,v=h>1?arguments[1]:void 0,y=void 0!==v;y&&(v=r(v,h>2?arguments[2]:void 0));var g,m,b,x,w,E,S=d(e),O=0;if(!S||this===p&&s(S))for(g=c(e),m=n?new this(g):p(g);g>O;O++)E=y?v(e[O],O):e[O],l(m,O,E);else for(w=(x=f(e,S)).next,m=n?new this:[];!(b=o(w,x)).done;O++)E=y?a(x,v,[b.value,O],!0):b.value,l(m,O,E);return m.length=O,m}},1318:function(t,e,n){var r=n(5656),o=n(1400),i=n(6244),a=function(t){return function(e,n,a){var s,u=r(e),c=i(u),l=o(a,c);if(t&&n!=n){for(;c>l;)if((s=u[l++])!=s)return!0}else for(;c>l;l++)if((t||l in u)&&u[l]===n)return t||l||0;return!t&&-1}};t.exports={includes:a(!0),indexOf:a(!1)}},2092:function(t,e,n){var r=n(9974),o=n(1702),i=n(8361),a=n(7908),s=n(6244),u=n(5417),c=o([].push),l=function(t){var e=1==t,n=2==t,o=3==t,l=4==t,f=6==t,d=7==t,p=5==t||f;return function(h,v,y,g){for(var m,b,x=a(h),w=i(x),E=r(v,y),S=s(w),O=0,k=g||u,I=e?k(h,S):n||d?k(h,0):void 0;S>O;O++)if((p||O in w)&&(b=E(m=w[O],O,x),t))if(e)I[O]=b;else if(b)switch(t){case 3:return!0;case 5:return m;case 6:return O;case 2:c(I,m)}else switch(t){case 4:return!1;case 7:c(I,m)}return f?-1:o||l?l:I}};t.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6),filterReject:l(7)}},1194:function(t,e,n){var r=n(7293),o=n(5112),i=n(7392),a=o("species");t.exports=function(t){return i>=51||!r(function(){var e=[];return(e.constructor={})[a]=function(){return{foo:1}},1!==e[t](Boolean).foo})}},9341:function(t,e,n){"use strict";var r=n(7293);t.exports=function(t,e){var n=[][t];return!!n&&r(function(){n.call(null,e||function(){return 1},1)})}},3671:function(t,e,n){var r=n(9662),o=n(7908),i=n(8361),a=n(6244),s=TypeError,u=function(t){return function(e,n,u,c){r(n);var l=o(e),f=i(l),d=a(l),p=t?d-1:0,h=t?-1:1;if(u<2)for(;;){if(p in f){c=f[p],p+=h;break}if(p+=h,t?p<0:d<=p)throw s("Reduce of empty array with no initial value")}for(;t?p>=0:d>p;p+=h)p in f&&(c=n(c,f[p],p,l));return c}};t.exports={left:u(!1),right:u(!0)}},3658:function(t,e,n){"use strict";var r=n(9781),o=n(3157),i=TypeError,a=Object.getOwnPropertyDescriptor,s=r&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(t){return t instanceof TypeError}}();t.exports=s?function(t,e){if(o(t)&&!a(t,"length").writable)throw i("Cannot set read only .length");return t.length=e}:function(t,e){return t.length=e}},1589:function(t,e,n){var r=n(1400),o=n(6244),i=n(6135),a=Array,s=Math.max;t.exports=function(t,e,n){for(var u=o(t),c=r(e,u),l=r(void 0===n?u:n,u),f=a(s(l-c,0)),d=0;c<l;c++,d++)i(f,d,t[c]);return f.length=d,f}},206:function(t,e,n){var r=n(1702);t.exports=r([].slice)},4362:function(t,e,n){var r=n(1589),o=Math.floor,i=function(t,e){var n=t.length,u=o(n/2);return n<8?a(t,e):s(t,i(r(t,0,u),e),i(r(t,u),e),e)},a=function(t,e){for(var n,r,o=t.length,i=1;i<o;){for(r=i,n=t[i];r&&e(t[r-1],n)>0;)t[r]=t[--r];r!==i++&&(t[r]=n)}return t},s=function(t,e,n,r){for(var o=e.length,i=n.length,a=0,s=0;a<o||s<i;)t[a+s]=a<o&&s<i?r(e[a],n[s])<=0?e[a++]:n[s++]:a<o?e[a++]:n[s++];return t};t.exports=i},7475:function(t,e,n){var r=n(3157),o=n(4411),i=n(111),a=n(5112)("species"),s=Array;t.exports=function(t){var e;return r(t)&&(e=t.constructor,(o(e)&&(e===s||r(e.prototype))||i(e)&&null===(e=e[a]))&&(e=void 0)),void 0===e?s:e}},5417:function(t,e,n){var r=n(7475);t.exports=function(t,e){return new(r(t))(0===e?0:e)}},3411:function(t,e,n){var r=n(9670),o=n(9212);t.exports=function(t,e,n,i){try{return i?e(r(n)[0],n[1]):e(n)}catch(e){o(t,"throw",e)}}},7072:function(t,e,n){var r=n(5112)("iterator"),o=!1;try{var i=0,a={next:function(){return{done:!!i++}},return:function(){o=!0}};a[r]=function(){return this},Array.from(a,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!o)return!1;var n=!1;try{var i={};i[r]=function(){return{next:function(){return{done:n=!0}}}},t(i)}catch(t){}return n}},4326:function(t,e,n){var r=n(1702),o=r({}.toString),i=r("".slice);t.exports=function(t){return i(o(t),8,-1)}},648:function(t,e,n){var r=n(1694),o=n(614),i=n(4326),a=n(5112)("toStringTag"),s=Object,u="Arguments"==i(function(){return arguments}());t.exports=r?i:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=s(t),a))?n:u?i(e):"Object"==(r=i(e))&&o(e.callee)?"Arguments":r}},9920:function(t,e,n){var r=n(2597),o=n(3887),i=n(1236),a=n(3070);t.exports=function(t,e,n){for(var s=o(e),u=a.f,c=i.f,l=0;l<s.length;l++){var f=s[l];r(t,f)||n&&r(n,f)||u(t,f,c(e,f))}}},4964:function(t,e,n){var r=n(5112)("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[r]=!1,"/./"[t](e)}catch(t){}}return!1}},8544:function(t,e,n){var r=n(7293);t.exports=!r(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})},6178:function(t){t.exports=function(t,e){return{value:t,done:e}}},8880:function(t,e,n){var r=n(9781),o=n(3070),i=n(9114);t.exports=r?function(t,e,n){return o.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},9114:function(t){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},6135:function(t,e,n){"use strict";var r=n(4948),o=n(3070),i=n(9114);t.exports=function(t,e,n){var a=r(e);a in t?o.f(t,a,i(0,n)):t[a]=n}},8709:function(t,e,n){"use strict";var r=n(9670),o=n(2140),i=TypeError;t.exports=function(t){if(r(this),"string"===t||"default"===t)t="string";else if("number"!==t)throw i("Incorrect hint");return o(this,t)}},8052:function(t,e,n){var r=n(614),o=n(3070),i=n(6339),a=n(3072);t.exports=function(t,e,n,s){s||(s={});var u=s.enumerable,c=void 0!==s.name?s.name:e;if(r(n)&&i(n,c,s),s.global)u?t[e]=n:a(e,n);else{try{s.unsafe?t[e]&&(u=!0):delete t[e]}catch(t){}u?t[e]=n:o.f(t,e,{value:n,enumerable:!1,configurable:!s.nonConfigurable,writable:!s.nonWritable})}return t}},3072:function(t,e,n){var r=n(7854),o=Object.defineProperty;t.exports=function(t,e){try{o(r,t,{value:e,configurable:!0,writable:!0})}catch(n){r[t]=e}return e}},5117:function(t,e,n){"use strict";var r=n(6330),o=TypeError;t.exports=function(t,e){if(!delete t[e])throw o("Cannot delete property "+r(e)+" of "+r(t))}},9781:function(t,e,n){var r=n(7293);t.exports=!r(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})},4154:function(t){var e="object"==typeof document&&document.all,n=void 0===e&&void 0!==e;t.exports={all:e,IS_HTMLDDA:n}},317:function(t,e,n){var r=n(7854),o=n(111),i=r.document,a=o(i)&&o(i.createElement);t.exports=function(t){return a?i.createElement(t):{}}},7207:function(t){var e=TypeError;t.exports=function(t){if(t>9007199254740991)throw e("Maximum allowed index exceeded");return t}},8324:function(t){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},8509:function(t,e,n){var r=n(317)("span").classList,o=r&&r.constructor&&r.constructor.prototype;t.exports=o===Object.prototype?void 0:o},8886:function(t,e,n){var r=n(8113).match(/firefox\/(\d+)/i);t.exports=!!r&&+r[1]},256:function(t,e,n){var r=n(8113);t.exports=/MSIE|Trident/.test(r)},5268:function(t,e,n){var r=n(4326),o=n(7854);t.exports="process"==r(o.process)},8113:function(t,e,n){var r=n(5005);t.exports=r("navigator","userAgent")||""},7392:function(t,e,n){var r,o,i=n(7854),a=n(8113),s=i.process,u=i.Deno,c=s&&s.versions||u&&u.version,l=c&&c.v8;l&&(o=(r=l.split("."))[0]>0&&r[0]<4?1:+(r[0]+r[1])),!o&&a&&(!(r=a.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=a.match(/Chrome\/(\d+)/))&&(o=+r[1]),t.exports=o},8008:function(t,e,n){var r=n(8113).match(/AppleWebKit\/(\d+)\./);t.exports=!!r&&+r[1]},748:function(t){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},2109:function(t,e,n){var r=n(7854),o=n(1236).f,i=n(8880),a=n(8052),s=n(3072),u=n(9920),c=n(4705);t.exports=function(t,e){var n,l,f,d,p,h=t.target,v=t.global,y=t.stat;if(n=v?r:y?r[h]||s(h,{}):(r[h]||{}).prototype)for(l in e){if(d=e[l],f=t.dontCallGetSet?(p=o(n,l))&&p.value:n[l],!c(v?l:h+(y?".":"#")+l,t.forced)&&void 0!==f){if(typeof d==typeof f)continue;u(d,f)}(t.sham||f&&f.sham)&&i(d,"sham",!0),a(n,l,d,t)}}},7293:function(t){t.exports=function(t){try{return!!t()}catch(t){return!0}}},7007:function(t,e,n){"use strict";n(4916);var r=n(1470),o=n(8052),i=n(2261),a=n(7293),s=n(5112),u=n(8880),c=s("species"),l=RegExp.prototype;t.exports=function(t,e,n,f){var d=s(t),p=!a(function(){var e={};return e[d]=function(){return 7},7!=""[t](e)}),h=p&&!a(function(){var e=!1,n=/a/;return"split"===t&&((n={}).constructor={},n.constructor[c]=function(){return n},n.flags="",n[d]=/./[d]),n.exec=function(){return e=!0,null},n[d](""),!e});if(!p||!h||n){var v=r(/./[d]),y=e(d,""[t],function(t,e,n,o,a){var s=r(t),u=e.exec;return u===i||u===l.exec?p&&!a?{done:!0,value:v(e,n,o)}:{done:!0,value:s(n,e,o)}:{done:!1}});o(String.prototype,t,y[0]),o(l,d,y[1])}f&&u(l[d],"sham",!0)}},2104:function(t,e,n){var r=n(4374),o=Function.prototype,i=o.apply,a=o.call;t.exports="object"==typeof Reflect&&Reflect.apply||(r?a.bind(i):function(){return a.apply(i,arguments)})},9974:function(t,e,n){var r=n(1470),o=n(9662),i=n(4374),a=r(r.bind);t.exports=function(t,e){return o(t),void 0===e?t:i?a(t,e):function(){return t.apply(e,arguments)}}},4374:function(t,e,n){var r=n(7293);t.exports=!r(function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")})},6916:function(t,e,n){var r=n(4374),o=Function.prototype.call;t.exports=r?o.bind(o):function(){return o.apply(o,arguments)}},6530:function(t,e,n){var r=n(9781),o=n(2597),i=Function.prototype,a=r&&Object.getOwnPropertyDescriptor,s=o(i,"name"),u=s&&"something"===function(){}.name,c=s&&(!r||r&&a(i,"name").configurable);t.exports={EXISTS:s,PROPER:u,CONFIGURABLE:c}},1470:function(t,e,n){var r=n(4326),o=n(1702);t.exports=function(t){if("Function"===r(t))return o(t)}},1702:function(t,e,n){var r=n(4374),o=Function.prototype,i=o.call,a=r&&o.bind.bind(i,i);t.exports=r?a:function(t){return function(){return i.apply(t,arguments)}}},5005:function(t,e,n){var r=n(7854),o=n(614),i=function(t){return o(t)?t:void 0};t.exports=function(t,e){return arguments.length<2?i(r[t]):r[t]&&r[t][e]}},1246:function(t,e,n){var r=n(648),o=n(8173),i=n(8554),a=n(7497),s=n(5112)("iterator");t.exports=function(t){if(!i(t))return o(t,s)||o(t,"@@iterator")||a[r(t)]}},4121:function(t,e,n){var r=n(6916),o=n(9662),i=n(9670),a=n(6330),s=n(1246),u=TypeError;t.exports=function(t,e){var n=arguments.length<2?s(t):e;if(o(n))return i(r(n,t));throw u(a(t)+" is not iterable")}},8173:function(t,e,n){var r=n(9662),o=n(8554);t.exports=function(t,e){var n=t[e];return o(n)?void 0:r(n)}},647:function(t,e,n){var r=n(1702),o=n(7908),i=Math.floor,a=r("".charAt),s=r("".replace),u=r("".slice),c=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,l=/\$([$&'`]|\d{1,2})/g;t.exports=function(t,e,n,r,f,d){var p=n+t.length,h=r.length,v=l;return void 0!==f&&(f=o(f),v=c),s(d,v,function(o,s){var c;switch(a(s,0)){case"$":return"$";case"&":return t;case"`":return u(e,0,n);case"'":return u(e,p);case"<":c=f[u(s,1,-1)];break;default:var l=+s;if(0===l)return o;if(l>h){var d=i(l/10);return 0===d?o:d<=h?void 0===r[d-1]?a(s,1):r[d-1]+a(s,1):o}c=r[l-1]}return void 0===c?"":c})}},7854:function(t,e,n){var r=function(t){return t&&t.Math==Math&&t};t.exports=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof n.g&&n.g)||function(){return this}()||Function("return this")()},2597:function(t,e,n){var r=n(1702),o=n(7908),i=r({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,e){return i(o(t),e)}},3501:function(t){t.exports={}},490:function(t,e,n){var r=n(5005);t.exports=r("document","documentElement")},4664:function(t,e,n){var r=n(9781),o=n(7293),i=n(317);t.exports=!r&&!o(function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a})},8361:function(t,e,n){var r=n(1702),o=n(7293),i=n(4326),a=Object,s=r("".split);t.exports=o(function(){return!a("z").propertyIsEnumerable(0)})?function(t){return"String"==i(t)?s(t,""):a(t)}:a},9587:function(t,e,n){var r=n(614),o=n(111),i=n(7674);t.exports=function(t,e,n){var a,s;return i&&r(a=e.constructor)&&a!==n&&o(s=a.prototype)&&s!==n.prototype&&i(t,s),t}},2788:function(t,e,n){var r=n(1702),o=n(614),i=n(5465),a=r(Function.toString);o(i.inspectSource)||(i.inspectSource=function(t){return a(t)}),t.exports=i.inspectSource},9909:function(t,e,n){var r,o,i,a=n(4811),s=n(7854),u=n(111),c=n(8880),l=n(2597),f=n(5465),d=n(6200),p=n(3501),h="Object already initialized",v=s.TypeError,y=s.WeakMap;if(a||f.state){var g=f.state||(f.state=new y);g.get=g.get,g.has=g.has,g.set=g.set,r=function(t,e){if(g.has(t))throw v(h);return e.facade=t,g.set(t,e),e},o=function(t){return g.get(t)||{}},i=function(t){return g.has(t)}}else{var m=d("state");p[m]=!0,r=function(t,e){if(l(t,m))throw v(h);return e.facade=t,c(t,m,e),e},o=function(t){return l(t,m)?t[m]:{}},i=function(t){return l(t,m)}}t.exports={set:r,get:o,has:i,enforce:function(t){return i(t)?o(t):r(t,{})},getterFor:function(t){return function(e){var n;if(!u(e)||(n=o(e)).type!==t)throw v("Incompatible receiver, "+t+" required");return n}}}},7659:function(t,e,n){var r=n(5112),o=n(7497),i=r("iterator"),a=Array.prototype;t.exports=function(t){return void 0!==t&&(o.Array===t||a[i]===t)}},3157:function(t,e,n){var r=n(4326);t.exports=Array.isArray||function(t){return"Array"==r(t)}},614:function(t,e,n){var r=n(4154),o=r.all;t.exports=r.IS_HTMLDDA?function(t){return"function"==typeof t||t===o}:function(t){return"function"==typeof t}},4411:function(t,e,n){var r=n(1702),o=n(7293),i=n(614),a=n(648),s=n(5005),u=n(2788),c=function(){},l=[],f=s("Reflect","construct"),d=/^\s*(?:class|function)\b/,p=r(d.exec),h=!d.exec(c),v=function(t){if(!i(t))return!1;try{return f(c,l,t),!0}catch(t){return!1}},y=function(t){if(!i(t))return!1;switch(a(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return h||!!p(d,u(t))}catch(t){return!0}};y.sham=!0,t.exports=!f||o(function(){var t;return v(v.call)||!v(Object)||!v(function(){t=!0})||t})?y:v},4705:function(t,e,n){var r=n(7293),o=n(614),i=/#|\.prototype\./,a=function(t,e){var n=u[s(t)];return n==l||n!=c&&(o(e)?r(e):!!e)},s=a.normalize=function(t){return String(t).replace(i,".").toLowerCase()},u=a.data={},c=a.NATIVE="N",l=a.POLYFILL="P";t.exports=a},5988:function(t,e,n){var r=n(111),o=Math.floor;t.exports=Number.isInteger||function(t){return!r(t)&&isFinite(t)&&o(t)===t}},8554:function(t){t.exports=function(t){return null==t}},111:function(t,e,n){var r=n(614),o=n(4154),i=o.all;t.exports=o.IS_HTMLDDA?function(t){return"object"==typeof t?null!==t:r(t)||t===i}:function(t){return"object"==typeof t?null!==t:r(t)}},1913:function(t){t.exports=!1},7850:function(t,e,n){var r=n(111),o=n(4326),i=n(5112)("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[i])?!!e:"RegExp"==o(t))}},2190:function(t,e,n){var r=n(5005),o=n(614),i=n(7976),a=n(3307),s=Object;t.exports=a?function(t){return"symbol"==typeof t}:function(t){var e=r("Symbol");return o(e)&&i(e.prototype,s(t))}},9212:function(t,e,n){var r=n(6916),o=n(9670),i=n(8173);t.exports=function(t,e,n){var a,s;o(t);try{if(!(a=i(t,"return"))){if("throw"===e)throw n;return n}a=r(a,t)}catch(t){s=!0,a=t}if("throw"===e)throw n;if(s)throw a;return o(a),n}},3061:function(t,e,n){"use strict";var r=n(3383).IteratorPrototype,o=n(30),i=n(9114),a=n(8003),s=n(7497),u=function(){return this};t.exports=function(t,e,n,c){var l=e+" Iterator";return t.prototype=o(r,{next:i(+!c,n)}),a(t,l,!1,!0),s[l]=u,t}},1656:function(t,e,n){"use strict";var r=n(2109),o=n(6916),i=n(1913),a=n(6530),s=n(614),u=n(3061),c=n(9518),l=n(7674),f=n(8003),d=n(8880),p=n(8052),h=n(5112),v=n(7497),y=n(3383),g=a.PROPER,m=a.CONFIGURABLE,b=y.IteratorPrototype,x=y.BUGGY_SAFARI_ITERATORS,w=h("iterator"),E="keys",S="values",O="entries",k=function(){return this};t.exports=function(t,e,n,a,h,y,I){u(n,e,a);var P,C,A,M=function(t){if(t===h&&R)return R;if(!x&&t in j)return j[t];switch(t){case E:case S:case O:return function(){return new n(this,t)}}return function(){return new n(this)}},T=e+" Iterator",D=!1,j=t.prototype,N=j[w]||j["@@iterator"]||h&&j[h],R=!x&&N||M(h),L="Array"==e&&j.entries||N;if(L&&(P=c(L.call(new t)))!==Object.prototype&&P.next&&(i||c(P)===b||(l?l(P,b):s(P[w])||p(P,w,k)),f(P,T,!0,!0),i&&(v[T]=k)),g&&h==S&&N&&N.name!==S&&(!i&&m?d(j,"name",S):(D=!0,R=function(){return o(N,this)})),h)if(C={values:M(S),keys:y?R:M(E),entries:M(O)},I)for(A in C)(x||D||!(A in j))&&p(j,A,C[A]);else r({target:e,proto:!0,forced:x||D},C);return i&&!I||j[w]===R||p(j,w,R,{name:h}),v[e]=R,C}},3383:function(t,e,n){"use strict";var r,o,i,a=n(7293),s=n(614),u=n(111),c=n(30),l=n(9518),f=n(8052),d=n(5112),p=n(1913),h=d("iterator"),v=!1;[].keys&&("next"in(i=[].keys())?(o=l(l(i)))!==Object.prototype&&(r=o):v=!0),!u(r)||a(function(){var t={};return r[h].call(t)!==t})?r={}:p&&(r=c(r)),s(r[h])||f(r,h,function(){return this}),t.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:v}},7497:function(t){t.exports={}},6244:function(t,e,n){var r=n(7466);t.exports=function(t){return r(t.length)}},6339:function(t,e,n){var r=n(7293),o=n(614),i=n(2597),a=n(9781),s=n(6530).CONFIGURABLE,u=n(2788),c=n(9909),l=c.enforce,f=c.get,d=Object.defineProperty,p=a&&!r(function(){return 8!==d(function(){},"length",{value:8}).length}),h=String(String).split("String"),v=t.exports=function(t,e,n){"Symbol("===String(e).slice(0,7)&&(e="["+String(e).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),n&&n.getter&&(e="get "+e),n&&n.setter&&(e="set "+e),(!i(t,"name")||s&&t.name!==e)&&(a?d(t,"name",{value:e,configurable:!0}):t.name=e),p&&n&&i(n,"arity")&&t.length!==n.arity&&d(t,"length",{value:n.arity});try{n&&i(n,"constructor")&&n.constructor?a&&d(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}var r=l(t);return i(r,"source")||(r.source=h.join("string"==typeof e?e:"")),t};Function.prototype.toString=v(function(){return o(this)&&f(this).source||u(this)},"toString")},4758:function(t){var e=Math.ceil,n=Math.floor;t.exports=Math.trunc||function(t){var r=+t;return(r>0?n:e)(r)}},3929:function(t,e,n){var r=n(7850),o=TypeError;t.exports=function(t){if(r(t))throw o("The method doesn't accept regular expressions");return t}},1574:function(t,e,n){"use strict";var r=n(9781),o=n(1702),i=n(6916),a=n(7293),s=n(1956),u=n(5181),c=n(5296),l=n(7908),f=n(8361),d=Object.assign,p=Object.defineProperty,h=o([].concat);t.exports=!d||a(function(){if(r&&1!==d({b:1},d(p({},"a",{enumerable:!0,get:function(){p(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},n=Symbol(),o="abcdefghijklmnopqrst";return t[n]=7,o.split("").forEach(function(t){e[t]=t}),7!=d({},t)[n]||s(d({},e)).join("")!=o})?function(t,e){for(var n=l(t),o=arguments.length,a=1,d=u.f,p=c.f;o>a;)for(var v,y=f(arguments[a++]),g=d?h(s(y),d(y)):s(y),m=g.length,b=0;m>b;)v=g[b++],r&&!i(p,y,v)||(n[v]=y[v]);return n}:d},30:function(t,e,n){var r,o=n(9670),i=n(6048),a=n(748),s=n(3501),u=n(490),c=n(317),l=n(6200),f=l("IE_PROTO"),d=function(){},p=function(t){return"<script>"+t+"</"+"script>"},h=function(t){t.write(p("")),t.close();var e=t.parentWindow.Object;return t=null,e},v=function(){try{r=new ActiveXObject("htmlfile")}catch(t){}var t,e;v="undefined"!=typeof document?document.domain&&r?h(r):((e=c("iframe")).style.display="none",u.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(p("document.F=Object")),t.close(),t.F):h(r);for(var n=a.length;n--;)delete v.prototype[a[n]];return v()};s[f]=!0,t.exports=Object.create||function(t,e){var n;return null!==t?(d.prototype=o(t),n=new d,d.prototype=null,n[f]=t):n=v(),void 0===e?n:i.f(n,e)}},6048:function(t,e,n){var r=n(9781),o=n(3353),i=n(3070),a=n(9670),s=n(5656),u=n(1956);e.f=r&&!o?Object.defineProperties:function(t,e){a(t);for(var n,r=s(e),o=u(e),c=o.length,l=0;c>l;)i.f(t,n=o[l++],r[n]);return t}},3070:function(t,e,n){var r=n(9781),o=n(4664),i=n(3353),a=n(9670),s=n(4948),u=TypeError,c=Object.defineProperty,l=Object.getOwnPropertyDescriptor,f="enumerable",d="configurable",p="writable";e.f=r?i?function(t,e,n){if(a(t),e=s(e),a(n),"function"==typeof t&&"prototype"===e&&"value"in n&&p in n&&!n.writable){var r=l(t,e);r&&r.writable&&(t[e]=n.value,n={configurable:d in n?n.configurable:r.configurable,enumerable:f in n?n.enumerable:r.enumerable,writable:!1})}return c(t,e,n)}:c:function(t,e,n){if(a(t),e=s(e),a(n),o)try{return c(t,e,n)}catch(t){}if("get"in n||"set"in n)throw u("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},1236:function(t,e,n){var r=n(9781),o=n(6916),i=n(5296),a=n(9114),s=n(5656),u=n(4948),c=n(2597),l=n(4664),f=Object.getOwnPropertyDescriptor;e.f=r?f:function(t,e){if(t=s(t),e=u(e),l)try{return f(t,e)}catch(t){}if(c(t,e))return a(!o(i.f,t,e),t[e])}},1156:function(t,e,n){var r=n(4326),o=n(5656),i=n(8006).f,a=n(1589),s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return s&&"Window"==r(t)?function(t){try{return i(t)}catch(t){return a(s)}}(t):i(o(t))}},8006:function(t,e,n){var r=n(6324),o=n(748).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,o)}},5181:function(t,e){e.f=Object.getOwnPropertySymbols},9518:function(t,e,n){var r=n(2597),o=n(614),i=n(7908),a=n(6200),s=n(8544),u=a("IE_PROTO"),c=Object,l=c.prototype;t.exports=s?c.getPrototypeOf:function(t){var e=i(t);if(r(e,u))return e[u];var n=e.constructor;return o(n)&&e instanceof n?n.prototype:e instanceof c?l:null}},7976:function(t,e,n){var r=n(1702);t.exports=r({}.isPrototypeOf)},6324:function(t,e,n){var r=n(1702),o=n(2597),i=n(5656),a=n(1318).indexOf,s=n(3501),u=r([].push);t.exports=function(t,e){var n,r=i(t),c=0,l=[];for(n in r)!o(s,n)&&o(r,n)&&u(l,n);for(;e.length>c;)o(r,n=e[c++])&&(~a(l,n)||u(l,n));return l}},1956:function(t,e,n){var r=n(6324),o=n(748);t.exports=Object.keys||function(t){return r(t,o)}},5296:function(t,e){"use strict";var n={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,o=r&&!n.call({1:2},1);e.f=o?function(t){var e=r(this,t);return!!e&&e.enumerable}:n},9026:function(t,e,n){"use strict";var r=n(1913),o=n(7854),i=n(7293),a=n(8008);t.exports=r||!i(function(){if(!(a&&a<535)){var t=Math.random();__defineSetter__.call(null,t,function(){}),delete o[t]}})},7674:function(t,e,n){var r=n(1702),o=n(9670),i=n(6077);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=r(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(n,[]),e=n instanceof Array}catch(t){}return function(n,r){return o(n),i(r),e?t(n,r):n.__proto__=r,n}}():void 0)},288:function(t,e,n){"use strict";var r=n(1694),o=n(648);t.exports=r?{}.toString:function(){return"[object "+o(this)+"]"}},2140:function(t,e,n){var r=n(6916),o=n(614),i=n(111),a=TypeError;t.exports=function(t,e){var n,s;if("string"===e&&o(n=t.toString)&&!i(s=r(n,t)))return s;if(o(n=t.valueOf)&&!i(s=r(n,t)))return s;if("string"!==e&&o(n=t.toString)&&!i(s=r(n,t)))return s;throw a("Can't convert object to primitive value")}},3887:function(t,e,n){var r=n(5005),o=n(1702),i=n(8006),a=n(5181),s=n(9670),u=o([].concat);t.exports=r("Reflect","ownKeys")||function(t){var e=i.f(s(t)),n=a.f;return n?u(e,n(t)):e}},857:function(t,e,n){var r=n(7854);t.exports=r},2626:function(t,e,n){var r=n(3070).f;t.exports=function(t,e,n){n in t||r(t,n,{configurable:!0,get:function(){return e[n]},set:function(t){e[n]=t}})}},7651:function(t,e,n){var r=n(6916),o=n(9670),i=n(614),a=n(4326),s=n(2261),u=TypeError;t.exports=function(t,e){var n=t.exec;if(i(n)){var c=r(n,t,e);return null!==c&&o(c),c}if("RegExp"===a(t))return r(s,t,e);throw u("RegExp#exec called on incompatible receiver")}},2261:function(t,e,n){"use strict";var r,o,i=n(6916),a=n(1702),s=n(1340),u=n(7066),c=n(2999),l=n(2309),f=n(30),d=n(9909).get,p=n(9441),h=n(7168),v=l("native-string-replace",String.prototype.replace),y=RegExp.prototype.exec,g=y,m=a("".charAt),b=a("".indexOf),x=a("".replace),w=a("".slice),E=(o=/b*/g,i(y,r=/a/,"a"),i(y,o,"a"),0!==r.lastIndex||0!==o.lastIndex),S=c.BROKEN_CARET,O=void 0!==/()??/.exec("")[1];(E||O||S||p||h)&&(g=function(t){var e,n,r,o,a,c,l,p=this,h=d(p),k=s(t),I=h.raw;if(I)return I.lastIndex=p.lastIndex,e=i(g,I,k),p.lastIndex=I.lastIndex,e;var P=h.groups,C=S&&p.sticky,A=i(u,p),M=p.source,T=0,D=k;if(C&&(A=x(A,"y",""),-1===b(A,"g")&&(A+="g"),D=w(k,p.lastIndex),p.lastIndex>0&&(!p.multiline||p.multiline&&"\n"!==m(k,p.lastIndex-1))&&(M="(?: "+M+")",D=" "+D,T++),n=new RegExp("^(?:"+M+")",A)),O&&(n=new RegExp("^"+M+"$(?!\\s)",A)),E&&(r=p.lastIndex),o=i(y,C?n:p,D),C?o?(o.input=w(o.input,T),o[0]=w(o[0],T),o.index=p.lastIndex,p.lastIndex+=o[0].length):p.lastIndex=0:E&&o&&(p.lastIndex=p.global?o.index+o[0].length:r),O&&o&&o.length>1&&i(v,o[0],n,function(){for(a=1;a<arguments.length-2;a++)void 0===arguments[a]&&(o[a]=void 0)}),o&&P)for(o.groups=c=f(null),a=0;a<P.length;a++)c[(l=P[a])[0]]=o[l[1]];return o}),t.exports=g},7066:function(t,e,n){"use strict";var r=n(9670);t.exports=function(){var t=r(this),e="";return t.hasIndices&&(e+="d"),t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.unicodeSets&&(e+="v"),t.sticky&&(e+="y"),e}},4706:function(t,e,n){var r=n(6916),o=n(2597),i=n(7976),a=n(7066),s=RegExp.prototype;t.exports=function(t){var e=t.flags;return void 0!==e||"flags"in s||o(t,"flags")||!i(s,t)?e:r(a,t)}},2999:function(t,e,n){var r=n(7293),o=n(7854).RegExp,i=r(function(){var t=o("a","y");return t.lastIndex=2,null!=t.exec("abcd")}),a=i||r(function(){return!o("a","y").sticky}),s=i||r(function(){var t=o("^r","gy");return t.lastIndex=2,null!=t.exec("str")});t.exports={BROKEN_CARET:s,MISSED_STICKY:a,UNSUPPORTED_Y:i}},9441:function(t,e,n){var r=n(7293),o=n(7854).RegExp;t.exports=r(function(){var t=o(".","s");return!(t.dotAll&&t.exec("\n")&&"s"===t.flags)})},7168:function(t,e,n){var r=n(7293),o=n(7854).RegExp;t.exports=r(function(){var t=o("(?<a>b)","g");return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")})},4488:function(t,e,n){var r=n(8554),o=TypeError;t.exports=function(t){if(r(t))throw o("Can't call method on "+t);return t}},6340:function(t,e,n){"use strict";var r=n(5005),o=n(3070),i=n(5112),a=n(9781),s=i("species");t.exports=function(t){var e=r(t),n=o.f;a&&e&&!e[s]&&n(e,s,{configurable:!0,get:function(){return this}})}},8003:function(t,e,n){var r=n(3070).f,o=n(2597),i=n(5112)("toStringTag");t.exports=function(t,e,n){t&&!n&&(t=t.prototype),t&&!o(t,i)&&r(t,i,{configurable:!0,value:e})}},6200:function(t,e,n){var r=n(2309),o=n(9711),i=r("keys");t.exports=function(t){return i[t]||(i[t]=o(t))}},5465:function(t,e,n){var r=n(7854),o=n(3072),i="__core-js_shared__",a=r[i]||o(i,{});t.exports=a},2309:function(t,e,n){var r=n(1913),o=n(5465);(t.exports=function(t,e){return o[t]||(o[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.27.1",mode:r?"pure":"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.27.1/LICENSE",source:"https://github.com/zloirock/core-js"})},6707:function(t,e,n){var r=n(9670),o=n(9483),i=n(8554),a=n(5112)("species");t.exports=function(t,e){var n,s=r(t).constructor;return void 0===s||i(n=r(s)[a])?e:o(n)}},8710:function(t,e,n){var r=n(1702),o=n(9303),i=n(1340),a=n(4488),s=r("".charAt),u=r("".charCodeAt),c=r("".slice),l=function(t){return function(e,n){var r,l,f=i(a(e)),d=o(n),p=f.length;return d<0||d>=p?t?"":void 0:(r=u(f,d))<55296||r>56319||d+1===p||(l=u(f,d+1))<56320||l>57343?t?s(f,d):r:t?c(f,d,d+2):l-56320+(r-55296<<10)+65536}};t.exports={codeAt:l(!1),charAt:l(!0)}},6091:function(t,e,n){var r=n(6530).PROPER,o=n(7293),i=n(1361);t.exports=function(t){return o(function(){return!!i[t]()||"​᠎"!=="​᠎"[t]()||r&&i[t].name!==t})}},3111:function(t,e,n){var r=n(1702),o=n(4488),i=n(1340),a=n(1361),s=r("".replace),u="["+a+"]",c=RegExp("^"+u+u+"*"),l=RegExp(u+u+"*$"),f=function(t){return function(e){var n=i(o(e));return 1&t&&(n=s(n,c,"")),2&t&&(n=s(n,l,"")),n}};t.exports={start:f(1),end:f(2),trim:f(3)}},6293:function(t,e,n){var r=n(7392),o=n(7293);t.exports=!!Object.getOwnPropertySymbols&&!o(function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&r&&r<41})},6532:function(t,e,n){var r=n(6916),o=n(5005),i=n(5112),a=n(8052);t.exports=function(){var t=o("Symbol"),e=t&&t.prototype,n=e&&e.valueOf,s=i("toPrimitive");e&&!e[s]&&a(e,s,function(t){return r(n,this)},{arity:1})}},2015:function(t,e,n){var r=n(6293);t.exports=r&&!!Symbol.for&&!!Symbol.keyFor},863:function(t,e,n){var r=n(1702);t.exports=r(1..valueOf)},1400:function(t,e,n){var r=n(9303),o=Math.max,i=Math.min;t.exports=function(t,e){var n=r(t);return n<0?o(n+e,0):i(n,e)}},5656:function(t,e,n){var r=n(8361),o=n(4488);t.exports=function(t){return r(o(t))}},9303:function(t,e,n){var r=n(4758);t.exports=function(t){var e=+t;return e!=e||0===e?0:r(e)}},7466:function(t,e,n){var r=n(9303),o=Math.min;t.exports=function(t){return t>0?o(r(t),9007199254740991):0}},7908:function(t,e,n){var r=n(4488),o=Object;t.exports=function(t){return o(r(t))}},7593:function(t,e,n){var r=n(6916),o=n(111),i=n(2190),a=n(8173),s=n(2140),u=n(5112),c=TypeError,l=u("toPrimitive");t.exports=function(t,e){if(!o(t)||i(t))return t;var n,u=a(t,l);if(u){if(void 0===e&&(e="default"),n=r(u,t,e),!o(n)||i(n))return n;throw c("Can't convert object to primitive value")}return void 0===e&&(e="number"),s(t,e)}},4948:function(t,e,n){var r=n(7593),o=n(2190);t.exports=function(t){var e=r(t,"string");return o(e)?e:e+""}},1694:function(t,e,n){var r={};r[n(5112)("toStringTag")]="z",t.exports="[object z]"===String(r)},1340:function(t,e,n){var r=n(648),o=String;t.exports=function(t){if("Symbol"===r(t))throw TypeError("Cannot convert a Symbol value to a string");return o(t)}},6330:function(t){var e=String;t.exports=function(t){try{return e(t)}catch(t){return"Object"}}},9711:function(t,e,n){var r=n(1702),o=0,i=Math.random(),a=r(1..toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+a(++o+i,36)}},3307:function(t,e,n){var r=n(6293);t.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},3353:function(t,e,n){var r=n(9781),o=n(7293);t.exports=r&&o(function(){return 42!=Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype})},4811:function(t,e,n){var r=n(7854),o=n(614),i=r.WeakMap;t.exports=o(i)&&/native code/.test(String(i))},6800:function(t,e,n){var r=n(857),o=n(2597),i=n(6061),a=n(3070).f;t.exports=function(t){var e=r.Symbol||(r.Symbol={});o(e,t)||a(e,t,{value:i.f(t)})}},6061:function(t,e,n){var r=n(5112);e.f=r},5112:function(t,e,n){var r=n(7854),o=n(2309),i=n(2597),a=n(9711),s=n(6293),u=n(3307),c=o("wks"),l=r.Symbol,f=l&&l.for,d=u?l:l&&l.withoutSetter||a;t.exports=function(t){if(!i(c,t)||!s&&"string"!=typeof c[t]){var e="Symbol."+t;s&&i(l,t)?c[t]=l[t]:c[t]=u&&f?f(e):d(e)}return c[t]}},1361:function(t){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},2222:function(t,e,n){"use strict";var r=n(2109),o=n(7293),i=n(3157),a=n(111),s=n(7908),u=n(6244),c=n(7207),l=n(6135),f=n(5417),d=n(1194),p=n(5112),h=n(7392),v=p("isConcatSpreadable"),y=h>=51||!o(function(){var t=[];return t[v]=!1,t.concat()[0]!==t}),g=d("concat"),m=function(t){if(!a(t))return!1;var e=t[v];return void 0!==e?!!e:i(t)};r({target:"Array",proto:!0,arity:1,forced:!y||!g},{concat:function(t){var e,n,r,o,i,a=s(this),d=f(a,0),p=0;for(e=-1,r=arguments.length;e<r;e++)if(m(i=-1===e?a:arguments[e]))for(o=u(i),c(p+o),n=0;n<o;n++,p++)n in i&&l(d,p,i[n]);else c(p+1),l(d,p++,i);return d.length=p,d}})},7327:function(t,e,n){"use strict";var r=n(2109),o=n(2092).filter;r({target:"Array",proto:!0,forced:!n(1194)("filter")},{filter:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})},1038:function(t,e,n){var r=n(2109),o=n(8457);r({target:"Array",stat:!0,forced:!n(7072)(function(t){Array.from(t)})},{from:o})},6699:function(t,e,n){"use strict";var r=n(2109),o=n(1318).includes,i=n(7293),a=n(1223);r({target:"Array",proto:!0,forced:i(function(){return!Array(1).includes()})},{includes:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),a("includes")},2772:function(t,e,n){"use strict";var r=n(2109),o=n(1470),i=n(1318).indexOf,a=n(9341),s=o([].indexOf),u=!!s&&1/s([1],1,-0)<0,c=a("indexOf");r({target:"Array",proto:!0,forced:u||!c},{indexOf:function(t){var e=arguments.length>1?arguments[1]:void 0;return u?s(this,t,e)||0:i(this,t,e)}})},6992:function(t,e,n){"use strict";var r=n(5656),o=n(1223),i=n(7497),a=n(9909),s=n(3070).f,u=n(1656),c=n(6178),l=n(1913),f=n(9781),d="Array Iterator",p=a.set,h=a.getterFor(d);t.exports=u(Array,"Array",function(t,e){p(this,{type:d,target:r(t),index:0,kind:e})},function(){var t=h(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,c(void 0,!0)):c("keys"==n?r:"values"==n?e[r]:[r,e[r]],!1)},"values");var v=i.Arguments=i.Array;if(o("keys"),o("values"),o("entries"),!l&&f&&"values"!==v.name)try{s(v,"name",{value:"values"})}catch(t){}},9600:function(t,e,n){"use strict";var r=n(2109),o=n(1702),i=n(8361),a=n(5656),s=n(9341),u=o([].join),c=i!=Object,l=s("join",",");r({target:"Array",proto:!0,forced:c||!l},{join:function(t){return u(a(this),void 0===t?",":t)}})},1249:function(t,e,n){"use strict";var r=n(2109),o=n(2092).map;r({target:"Array",proto:!0,forced:!n(1194)("map")},{map:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})},5827:function(t,e,n){"use strict";var r=n(2109),o=n(3671).left,i=n(9341),a=n(7392),s=n(5268);r({target:"Array",proto:!0,forced:!i("reduce")||!s&&a>79&&a<83},{reduce:function(t){var e=arguments.length;return o(this,t,e,e>1?arguments[1]:void 0)}})},7042:function(t,e,n){"use strict";var r=n(2109),o=n(3157),i=n(4411),a=n(111),s=n(1400),u=n(6244),c=n(5656),l=n(6135),f=n(5112),d=n(1194),p=n(206),h=d("slice"),v=f("species"),y=Array,g=Math.max;r({target:"Array",proto:!0,forced:!h},{slice:function(t,e){var n,r,f,d=c(this),h=u(d),m=s(t,h),b=s(void 0===e?h:e,h);if(o(d)&&(n=d.constructor,(i(n)&&(n===y||o(n.prototype))||a(n)&&null===(n=n[v]))&&(n=void 0),n===y||void 0===n))return p(d,m,b);for(r=new(void 0===n?y:n)(g(b-m,0)),f=0;m<b;m++,f++)m in d&&l(r,f,d[m]);return r.length=f,r}})},2707:function(t,e,n){"use strict";var r=n(2109),o=n(1702),i=n(9662),a=n(7908),s=n(6244),u=n(5117),c=n(1340),l=n(7293),f=n(4362),d=n(9341),p=n(8886),h=n(256),v=n(7392),y=n(8008),g=[],m=o(g.sort),b=o(g.push),x=l(function(){g.sort(void 0)}),w=l(function(){g.sort(null)}),E=d("sort"),S=!l(function(){if(v)return v<70;if(!(p&&p>3)){if(h)return!0;if(y)return y<603;var t,e,n,r,o="";for(t=65;t<76;t++){switch(e=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(r=0;r<47;r++)g.push({k:e+r,v:n})}for(g.sort(function(t,e){return e.v-t.v}),r=0;r<g.length;r++)e=g[r].k.charAt(0),o.charAt(o.length-1)!==e&&(o+=e);return"DGBEFHACIJK"!==o}});r({target:"Array",proto:!0,forced:x||!w||!E||!S},{sort:function(t){void 0!==t&&i(t);var e=a(this);if(S)return void 0===t?m(e):m(e,t);var n,r,o=[],l=s(e);for(r=0;r<l;r++)r in e&&b(o,e[r]);for(f(o,function(t){return function(e,n){return void 0===n?-1:void 0===e?1:void 0!==t?+t(e,n)||0:c(e)>c(n)?1:-1}}(t)),n=s(o),r=0;r<n;)e[r]=o[r++];for(;r<l;)u(e,r++);return e}})},561:function(t,e,n){"use strict";var r=n(2109),o=n(7908),i=n(1400),a=n(9303),s=n(6244),u=n(3658),c=n(7207),l=n(5417),f=n(6135),d=n(5117),p=n(1194)("splice"),h=Math.max,v=Math.min;r({target:"Array",proto:!0,forced:!p},{splice:function(t,e){var n,r,p,y,g,m,b=o(this),x=s(b),w=i(t,x),E=arguments.length;for(0===E?n=r=0:1===E?(n=0,r=x-w):(n=E-2,r=v(h(a(e),0),x-w)),c(x+n-r),p=l(b,r),y=0;y<r;y++)(g=w+y)in b&&f(p,y,b[g]);if(p.length=r,n<r){for(y=w;y<x-r;y++)m=y+n,(g=y+r)in b?b[m]=b[g]:d(b,m);for(y=x;y>x-r+n;y--)d(b,y-1)}else if(n>r)for(y=x-r;y>w;y--)m=y+n-1,(g=y+r-1)in b?b[m]=b[g]:d(b,m);for(y=0;y<n;y++)b[y+w]=arguments[y+2];return u(b,x-r+n),p}})},6078:function(t,e,n){var r=n(2597),o=n(8052),i=n(8709),a=n(5112)("toPrimitive"),s=Date.prototype;r(s,a)||o(s,a,i)},8309:function(t,e,n){var r=n(9781),o=n(6530).EXISTS,i=n(1702),a=n(3070).f,s=Function.prototype,u=i(s.toString),c=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,l=i(c.exec);r&&!o&&a(s,"name",{configurable:!0,get:function(){try{return l(c,u(this))[1]}catch(t){return""}}})},8862:function(t,e,n){var r=n(2109),o=n(5005),i=n(2104),a=n(6916),s=n(1702),u=n(7293),c=n(3157),l=n(614),f=n(111),d=n(2190),p=n(206),h=n(6293),v=o("JSON","stringify"),y=s(/./.exec),g=s("".charAt),m=s("".charCodeAt),b=s("".replace),x=s(1..toString),w=/[\uD800-\uDFFF]/g,E=/^[\uD800-\uDBFF]$/,S=/^[\uDC00-\uDFFF]$/,O=!h||u(function(){var t=o("Symbol")();return"[null]"!=v([t])||"{}"!=v({a:t})||"{}"!=v(Object(t))}),k=u(function(){return'"\\udf06\\ud834"'!==v("\udf06\ud834")||'"\\udead"'!==v("\udead")}),I=function(t,e){var n=p(arguments),r=e;if((f(e)||void 0!==t)&&!d(t))return c(e)||(e=function(t,e){if(l(r)&&(e=a(r,this,t,e)),!d(e))return e}),n[1]=e,i(v,null,n)},P=function(t,e,n){var r=g(n,e-1),o=g(n,e+1);return y(E,t)&&!y(S,o)||y(S,t)&&!y(E,r)?"\\u"+x(m(t,0),16):t};v&&r({target:"JSON",stat:!0,arity:3,forced:O||k},{stringify:function(t,e,n){var r=p(arguments),o=i(O?I:v,null,r);return k&&"string"==typeof o?b(o,w,P):o}})},9653:function(t,e,n){"use strict";var r=n(2109),o=n(1913),i=n(9781),a=n(7854),s=n(857),u=n(1702),c=n(4705),l=n(2597),f=n(9587),d=n(7976),p=n(2190),h=n(7593),v=n(7293),y=n(8006).f,g=n(1236).f,m=n(3070).f,b=n(863),x=n(3111).trim,w="Number",E=a.Number,S=s.Number,O=E.prototype,k=a.TypeError,I=u("".slice),P=u("".charCodeAt),C=function(t){var e=h(t,"number");return"bigint"==typeof e?e:A(e)},A=function(t){var e,n,r,o,i,a,s,u,c=h(t,"number");if(p(c))throw k("Cannot convert a Symbol value to a number");if("string"==typeof c&&c.length>2)if(c=x(c),43===(e=P(c,0))||45===e){if(88===(n=P(c,2))||120===n)return NaN}else if(48===e){switch(P(c,1)){case 66:case 98:r=2,o=49;break;case 79:case 111:r=8,o=55;break;default:return+c}for(a=(i=I(c,2)).length,s=0;s<a;s++)if((u=P(i,s))<48||u>o)return NaN;return parseInt(i,r)}return+c},M=c(w,!E(" 0o1")||!E("0b1")||E("+0x1")),T=function(t){return d(O,t)&&v(function(){b(t)})},D=function(t){var e=arguments.length<1?0:E(C(t));return T(this)?f(Object(e),this,D):e};D.prototype=O,M&&!o&&(O.constructor=D),r({global:!0,constructor:!0,wrap:!0,forced:M},{Number:D});var j=function(t,e){for(var n,r=i?y(e):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),o=0;r.length>o;o++)l(e,n=r[o])&&!l(t,n)&&m(t,n,g(e,n))};o&&S&&j(s.Number,S),(M||o)&&j(s.Number,E)},3161:function(t,e,n){n(2109)({target:"Number",stat:!0},{isInteger:n(5988)})},9601:function(t,e,n){var r=n(2109),o=n(1574);r({target:"Object",stat:!0,arity:2,forced:Object.assign!==o},{assign:o})},9595:function(t,e,n){"use strict";var r=n(2109),o=n(9781),i=n(9026),a=n(9662),s=n(7908),u=n(3070);o&&r({target:"Object",proto:!0,forced:i},{__defineGetter__:function(t,e){u.f(s(this),t,{get:a(e),enumerable:!0,configurable:!0})}})},5003:function(t,e,n){var r=n(2109),o=n(7293),i=n(5656),a=n(1236).f,s=n(9781),u=o(function(){a(1)});r({target:"Object",stat:!0,forced:!s||u,sham:!s},{getOwnPropertyDescriptor:function(t,e){return a(i(t),e)}})},9337:function(t,e,n){var r=n(2109),o=n(9781),i=n(3887),a=n(5656),s=n(1236),u=n(6135);r({target:"Object",stat:!0,sham:!o},{getOwnPropertyDescriptors:function(t){for(var e,n,r=a(t),o=s.f,c=i(r),l={},f=0;c.length>f;)void 0!==(n=o(r,e=c[f++]))&&u(l,e,n);return l}})},6210:function(t,e,n){var r=n(2109),o=n(7293),i=n(1156).f;r({target:"Object",stat:!0,forced:o(function(){return!Object.getOwnPropertyNames(1)})},{getOwnPropertyNames:i})},9660:function(t,e,n){var r=n(2109),o=n(6293),i=n(7293),a=n(5181),s=n(7908);r({target:"Object",stat:!0,forced:!o||i(function(){a.f(1)})},{getOwnPropertySymbols:function(t){var e=a.f;return e?e(s(t)):[]}})},7941:function(t,e,n){var r=n(2109),o=n(7908),i=n(1956);r({target:"Object",stat:!0,forced:n(7293)(function(){i(1)})},{keys:function(t){return i(o(t))}})},1539:function(t,e,n){var r=n(1694),o=n(8052),i=n(288);r||o(Object.prototype,"toString",i,{unsafe:!0})},4603:function(t,e,n){var r=n(9781),o=n(7854),i=n(1702),a=n(4705),s=n(9587),u=n(8880),c=n(8006).f,l=n(7976),f=n(7850),d=n(1340),p=n(4706),h=n(2999),v=n(2626),y=n(8052),g=n(7293),m=n(2597),b=n(9909).enforce,x=n(6340),w=n(5112),E=n(9441),S=n(7168),O=w("match"),k=o.RegExp,I=k.prototype,P=o.SyntaxError,C=i(I.exec),A=i("".charAt),M=i("".replace),T=i("".indexOf),D=i("".slice),j=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,N=/a/g,R=/a/g,L=new k(N)!==N,B=h.MISSED_STICKY,F=h.UNSUPPORTED_Y,K=r&&(!L||B||E||S||g(function(){return R[O]=!1,k(N)!=N||k(R)==R||"/a/i"!=k(N,"i")}));if(a("RegExp",K)){for(var _=function(t,e){var n,r,o,i,a,c,h=l(I,this),v=f(t),y=void 0===e,g=[],x=t;if(!h&&v&&y&&t.constructor===_)return t;if((v||l(I,t))&&(t=t.source,y&&(e=p(x))),t=void 0===t?"":d(t),e=void 0===e?"":d(e),x=t,E&&"dotAll"in N&&(r=!!e&&T(e,"s")>-1)&&(e=M(e,/s/g,"")),n=e,B&&"sticky"in N&&(o=!!e&&T(e,"y")>-1)&&F&&(e=M(e,/y/g,"")),S&&(i=function(t){for(var e,n=t.length,r=0,o="",i=[],a={},s=!1,u=!1,c=0,l="";r<=n;r++){if("\\"===(e=A(t,r)))e+=A(t,++r);else if("]"===e)s=!1;else if(!s)switch(!0){case"["===e:s=!0;break;case"("===e:C(j,D(t,r+1))&&(r+=2,u=!0),o+=e,c++;continue;case">"===e&&u:if(""===l||m(a,l))throw new P("Invalid capture group name");a[l]=!0,i[i.length]=[l,c],u=!1,l="";continue}u?l+=e:o+=e}return[o,i]}(t),t=i[0],g=i[1]),a=s(k(t,e),h?this:I,_),(r||o||g.length)&&(c=b(a),r&&(c.dotAll=!0,c.raw=_(function(t){for(var e,n=t.length,r=0,o="",i=!1;r<=n;r++)"\\"!==(e=A(t,r))?i||"."!==e?("["===e?i=!0:"]"===e&&(i=!1),o+=e):o+="[\\s\\S]":o+=e+A(t,++r);return o}(t),n)),o&&(c.sticky=!0),g.length&&(c.groups=g)),t!==x)try{u(a,"source",""===x?"(?:)":x)}catch(t){}return a},U=c(k),H=0;U.length>H;)v(_,k,U[H++]);I.constructor=_,_.prototype=I,y(o,"RegExp",_,{constructor:!0})}x("RegExp")},4916:function(t,e,n){"use strict";var r=n(2109),o=n(2261);r({target:"RegExp",proto:!0,forced:/./.exec!==o},{exec:o})},9714:function(t,e,n){"use strict";var r=n(6530).PROPER,o=n(8052),i=n(9670),a=n(1340),s=n(7293),u=n(4706),c="toString",l=RegExp.prototype.toString,f=s(function(){return"/a/b"!=l.call({source:"a",flags:"b"})}),d=r&&l.name!=c;(f||d)&&o(RegExp.prototype,c,function(){var t=i(this);return"/"+a(t.source)+"/"+a(u(t))},{unsafe:!0})},2023:function(t,e,n){"use strict";var r=n(2109),o=n(1702),i=n(3929),a=n(4488),s=n(1340),u=n(4964),c=o("".indexOf);r({target:"String",proto:!0,forced:!u("includes")},{includes:function(t){return!!~c(s(a(this)),s(i(t)),arguments.length>1?arguments[1]:void 0)}})},8783:function(t,e,n){"use strict";var r=n(8710).charAt,o=n(1340),i=n(9909),a=n(1656),s=n(6178),u="String Iterator",c=i.set,l=i.getterFor(u);a(String,"String",function(t){c(this,{type:u,string:o(t),index:0})},function(){var t,e=l(this),n=e.string,o=e.index;return o>=n.length?s(void 0,!0):(t=r(n,o),e.index+=t.length,s(t,!1))})},6373:function(t,e,n){"use strict";var r=n(2109),o=n(6916),i=n(1470),a=n(3061),s=n(6178),u=n(4488),c=n(7466),l=n(1340),f=n(9670),d=n(8554),p=n(4326),h=n(7850),v=n(4706),y=n(8173),g=n(8052),m=n(7293),b=n(5112),x=n(6707),w=n(1530),E=n(7651),S=n(9909),O=n(1913),k=b("matchAll"),I="RegExp String",P="RegExp String Iterator",C=S.set,A=S.getterFor(P),M=RegExp.prototype,T=TypeError,D=i("".indexOf),j=i("".matchAll),N=!!j&&!m(function(){j("a",/./)}),R=a(function(t,e,n,r){C(this,{type:P,regexp:t,string:e,global:n,unicode:r,done:!1})},I,function(){var t=A(this);if(t.done)return s(void 0,!0);var e=t.regexp,n=t.string,r=E(e,n);return null===r?(t.done=!0,s(void 0,!0)):t.global?(""===l(r[0])&&(e.lastIndex=w(n,c(e.lastIndex),t.unicode)),s(r,!1)):(t.done=!0,s(r,!1))}),L=function(t){var e,n,r,o=f(this),i=l(t),a=x(o,RegExp),s=l(v(o));return e=new a(a===RegExp?o.source:o,s),n=!!~D(s,"g"),r=!!~D(s,"u"),e.lastIndex=c(o.lastIndex),new R(e,i,n,r)};r({target:"String",proto:!0,forced:N},{matchAll:function(t){var e,n,r,i,a=u(this);if(d(t)){if(N)return j(a,t)}else{if(h(t)&&(e=l(u(v(t))),!~D(e,"g")))throw T("`.matchAll` does not allow non-global regexes");if(N)return j(a,t);if(void 0===(r=y(t,k))&&O&&"RegExp"==p(t)&&(r=L),r)return o(r,t,a)}return n=l(a),i=new RegExp(t,"g"),O?o(L,i,n):i[k](n)}}),O||k in M||g(M,k,L)},4723:function(t,e,n){"use strict";var r=n(6916),o=n(7007),i=n(9670),a=n(8554),s=n(7466),u=n(1340),c=n(4488),l=n(8173),f=n(1530),d=n(7651);o("match",function(t,e,n){return[function(e){var n=c(this),o=a(e)?void 0:l(e,t);return o?r(o,e,n):new RegExp(e)[t](u(n))},function(t){var r=i(this),o=u(t),a=n(e,r,o);if(a.done)return a.value;if(!r.global)return d(r,o);var c=r.unicode;r.lastIndex=0;for(var l,p=[],h=0;null!==(l=d(r,o));){var v=u(l[0]);p[h]=v,""===v&&(r.lastIndex=f(o,s(r.lastIndex),c)),h++}return 0===h?null:p}]})},5306:function(t,e,n){"use strict";var r=n(2104),o=n(6916),i=n(1702),a=n(7007),s=n(7293),u=n(9670),c=n(614),l=n(8554),f=n(9303),d=n(7466),p=n(1340),h=n(4488),v=n(1530),y=n(8173),g=n(647),m=n(7651),b=n(5112)("replace"),x=Math.max,w=Math.min,E=i([].concat),S=i([].push),O=i("".indexOf),k=i("".slice),I="$0"==="a".replace(/./,"$0"),P=!!/./[b]&&""===/./[b]("a","$0");a("replace",function(t,e,n){var i=P?"$":"$0";return[function(t,n){var r=h(this),i=l(t)?void 0:y(t,b);return i?o(i,t,r,n):o(e,p(r),t,n)},function(t,o){var a=u(this),s=p(t);if("string"==typeof o&&-1===O(o,i)&&-1===O(o,"$<")){var l=n(e,a,s,o);if(l.done)return l.value}var h=c(o);h||(o=p(o));var y=a.global;if(y){var b=a.unicode;a.lastIndex=0}for(var I=[];;){var P=m(a,s);if(null===P)break;if(S(I,P),!y)break;""===p(P[0])&&(a.lastIndex=v(s,d(a.lastIndex),b))}for(var C,A="",M=0,T=0;T<I.length;T++){for(var D=p((P=I[T])[0]),j=x(w(f(P.index),s.length),0),N=[],R=1;R<P.length;R++)S(N,void 0===(C=P[R])?C:String(C));var L=P.groups;if(h){var B=E([D],N,j,s);void 0!==L&&S(B,L);var F=p(r(o,void 0,B))}else F=g(D,s,j,N,L,o);j>=M&&(A+=k(s,M,j)+F,M=j+D.length)}return A+k(s,M)}]},!!s(function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})||!I||P)},3123:function(t,e,n){"use strict";var r=n(2104),o=n(6916),i=n(1702),a=n(7007),s=n(9670),u=n(8554),c=n(7850),l=n(4488),f=n(6707),d=n(1530),p=n(7466),h=n(1340),v=n(8173),y=n(1589),g=n(7651),m=n(2261),b=n(2999),x=n(7293),w=b.UNSUPPORTED_Y,E=4294967295,S=Math.min,O=[].push,k=i(/./.exec),I=i(O),P=i("".slice),C=!x(function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]});a("split",function(t,e,n){var i;return i="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,n){var i=h(l(this)),a=void 0===n?E:n>>>0;if(0===a)return[];if(void 0===t)return[i];if(!c(t))return o(e,i,t,a);for(var s,u,f,d=[],p=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),v=0,g=new RegExp(t.source,p+"g");(s=o(m,g,i))&&!((u=g.lastIndex)>v&&(I(d,P(i,v,s.index)),s.length>1&&s.index<i.length&&r(O,d,y(s,1)),f=s[0].length,v=u,d.length>=a));)g.lastIndex===s.index&&g.lastIndex++;return v===i.length?!f&&k(g,"")||I(d,""):I(d,P(i,v)),d.length>a?y(d,0,a):d}:"0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:o(e,this,t,n)}:e,[function(e,n){var r=l(this),a=u(e)?void 0:v(e,t);return a?o(a,e,r,n):o(i,h(r),e,n)},function(t,r){var o=s(this),a=h(t),u=n(i,o,a,r,i!==e);if(u.done)return u.value;var c=f(o,RegExp),l=o.unicode,v=(o.ignoreCase?"i":"")+(o.multiline?"m":"")+(o.unicode?"u":"")+(w?"g":"y"),y=new c(w?"^(?:"+o.source+")":o,v),m=void 0===r?E:r>>>0;if(0===m)return[];if(0===a.length)return null===g(y,a)?[a]:[];for(var b=0,x=0,O=[];x<a.length;){y.lastIndex=w?0:x;var k,C=g(y,w?P(a,x):a);if(null===C||(k=S(p(y.lastIndex+(w?x:0)),a.length))===b)x=d(a,x,l);else{if(I(O,P(a,b,x)),O.length===m)return O;for(var A=1;A<=C.length-1;A++)if(I(O,C[A]),O.length===m)return O;x=b=k}}return I(O,P(a,b)),O}]},!C,w)},3210:function(t,e,n){"use strict";var r=n(2109),o=n(3111).trim;r({target:"String",proto:!0,forced:n(6091)("trim")},{trim:function(){return o(this)}})},4032:function(t,e,n){"use strict";var r=n(2109),o=n(7854),i=n(6916),a=n(1702),s=n(1913),u=n(9781),c=n(6293),l=n(7293),f=n(2597),d=n(7976),p=n(9670),h=n(5656),v=n(4948),y=n(1340),g=n(9114),m=n(30),b=n(1956),x=n(8006),w=n(1156),E=n(5181),S=n(1236),O=n(3070),k=n(6048),I=n(5296),P=n(8052),C=n(2309),A=n(6200),M=n(3501),T=n(9711),D=n(5112),j=n(6061),N=n(6800),R=n(6532),L=n(8003),B=n(9909),F=n(2092).forEach,K=A("hidden"),_="Symbol",U=B.set,H=B.getterFor(_),$=Object.prototype,G=o.Symbol,V=G&&G.prototype,z=o.TypeError,Y=o.QObject,W=S.f,X=O.f,J=w.f,q=I.f,Q=a([].push),Z=C("symbols"),tt=C("op-symbols"),et=C("wks"),nt=!Y||!Y.prototype||!Y.prototype.findChild,rt=u&&l(function(){return 7!=m(X({},"a",{get:function(){return X(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=W($,e);r&&delete $[e],X(t,e,n),r&&t!==$&&X($,e,r)}:X,ot=function(t,e){var n=Z[t]=m(V);return U(n,{type:_,tag:t,description:e}),u||(n.description=e),n},it=function(t,e,n){t===$&&it(tt,e,n),p(t);var r=v(e);return p(n),f(Z,r)?(n.enumerable?(f(t,K)&&t[K][r]&&(t[K][r]=!1),n=m(n,{enumerable:g(0,!1)})):(f(t,K)||X(t,K,g(1,{})),t[K][r]=!0),rt(t,r,n)):X(t,r,n)},at=function(t,e){p(t);var n=h(e),r=b(n).concat(lt(n));return F(r,function(e){u&&!i(st,n,e)||it(t,e,n[e])}),t},st=function(t){var e=v(t),n=i(q,this,e);return!(this===$&&f(Z,e)&&!f(tt,e))&&(!(n||!f(this,e)||!f(Z,e)||f(this,K)&&this[K][e])||n)},ut=function(t,e){var n=h(t),r=v(e);if(n!==$||!f(Z,r)||f(tt,r)){var o=W(n,r);return!o||!f(Z,r)||f(n,K)&&n[K][r]||(o.enumerable=!0),o}},ct=function(t){var e=J(h(t)),n=[];return F(e,function(t){f(Z,t)||f(M,t)||Q(n,t)}),n},lt=function(t){var e=t===$,n=J(e?tt:h(t)),r=[];return F(n,function(t){!f(Z,t)||e&&!f($,t)||Q(r,Z[t])}),r};c||(G=function(){if(d(V,this))throw z("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?y(arguments[0]):void 0,e=T(t),n=function(t){this===$&&i(n,tt,t),f(this,K)&&f(this[K],e)&&(this[K][e]=!1),rt(this,e,g(1,t))};return u&&nt&&rt($,e,{configurable:!0,set:n}),ot(e,t)},P(V=G.prototype,"toString",function(){return H(this).tag}),P(G,"withoutSetter",function(t){return ot(T(t),t)}),I.f=st,O.f=it,k.f=at,S.f=ut,x.f=w.f=ct,E.f=lt,j.f=function(t){return ot(D(t),t)},u&&(X(V,"description",{configurable:!0,get:function(){return H(this).description}}),s||P($,"propertyIsEnumerable",st,{unsafe:!0}))),r({global:!0,constructor:!0,wrap:!0,forced:!c,sham:!c},{Symbol:G}),F(b(et),function(t){N(t)}),r({target:_,stat:!0,forced:!c},{useSetter:function(){nt=!0},useSimple:function(){nt=!1}}),r({target:"Object",stat:!0,forced:!c,sham:!u},{create:function(t,e){return void 0===e?m(t):at(m(t),e)},defineProperty:it,defineProperties:at,getOwnPropertyDescriptor:ut}),r({target:"Object",stat:!0,forced:!c},{getOwnPropertyNames:ct}),R(),L(G,_),M[K]=!0},1817:function(t,e,n){"use strict";var r=n(2109),o=n(9781),i=n(7854),a=n(1702),s=n(2597),u=n(614),c=n(7976),l=n(1340),f=n(3070).f,d=n(9920),p=i.Symbol,h=p&&p.prototype;if(o&&u(p)&&(!("description"in h)||void 0!==p().description)){var v={},y=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:l(arguments[0]),e=c(h,this)?new p(t):void 0===t?p():p(t);return""===t&&(v[e]=!0),e};d(y,p),y.prototype=h,h.constructor=y;var g="Symbol(test)"==String(p("test")),m=a(h.valueOf),b=a(h.toString),x=/^Symbol\((.*)\)[^)]+$/,w=a("".replace),E=a("".slice);f(h,"description",{configurable:!0,get:function(){var t=m(this);if(s(v,t))return"";var e=b(t),n=g?E(e,7,-1):w(e,x,"$1");return""===n?void 0:n}}),r({global:!0,constructor:!0,forced:!0},{Symbol:y})}},763:function(t,e,n){var r=n(2109),o=n(5005),i=n(2597),a=n(1340),s=n(2309),u=n(2015),c=s("string-to-symbol-registry"),l=s("symbol-to-string-registry");r({target:"Symbol",stat:!0,forced:!u},{for:function(t){var e=a(t);if(i(c,e))return c[e];var n=o("Symbol")(e);return c[e]=n,l[n]=e,n}})},2165:function(t,e,n){n(6800)("iterator")},2526:function(t,e,n){n(4032),n(763),n(6620),n(8862),n(9660)},6620:function(t,e,n){var r=n(2109),o=n(2597),i=n(2190),a=n(6330),s=n(2309),u=n(2015),c=s("symbol-to-string-registry");r({target:"Symbol",stat:!0,forced:!u},{keyFor:function(t){if(!i(t))throw TypeError(a(t)+" is not a symbol");if(o(c,t))return c[t]}})},6649:function(t,e,n){var r=n(6800),o=n(6532);r("toPrimitive"),o()},3728:function(t,e,n){n(6373)},4747:function(t,e,n){var r=n(7854),o=n(8324),i=n(8509),a=n(8533),s=n(8880),u=function(t){if(t&&t.forEach!==a)try{s(t,"forEach",a)}catch(e){t.forEach=a}};for(var c in o)o[c]&&u(r[c]&&r[c].prototype);u(i)},3948:function(t,e,n){var r=n(7854),o=n(8324),i=n(8509),a=n(6992),s=n(8880),u=n(5112),c=u("iterator"),l=u("toStringTag"),f=a.values,d=function(t,e){if(t){if(t[c]!==f)try{s(t,c,f)}catch(e){t[c]=f}if(t[l]||s(t,l,e),o[e])for(var n in a)if(t[n]!==a[n])try{s(t,n,a[n])}catch(e){t[n]=a[n]}}};for(var p in o)d(r[p]&&r[p].prototype,p);d(i,"DOMTokenList")}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={exports:{}};return t[r](i,i.exports,n),i.exports}n.d=function(t,e){for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var r={};return function(){"use strict";n.r(r),n.d(r,{SimpleKeyboard:function(){return M},default:function(){return T}});n(3210),n(4916),n(5306),n(2772),n(8309),n(3123),n(1539),n(9714),n(561),n(9600),n(9595),n(7042);"undefined"==typeof Element||"remove"in Element.prototype||(Element.prototype.remove=function(){this.parentNode&&this.parentNode.removeChild(this)}),"undefined"!=typeof self&&"document"in self&&((!("classList"in document.createElement("_"))||document.createElementNS&&!("classList"in document.createElementNS("http://www.w3.org/2000/svg","g")))&&function(t){if("Element"in t){var e="classList",n=t.Element.prototype,r=Object,o=String.prototype.trim||function(){return this.replace(/^\s+|\s+$/g,"")},i=Array.prototype.indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1},a=function(t,e){this.name=t,this.code=DOMException[t],this.message=e},s=function(t,e){if(""===e)throw new a("SYNTAX_ERR","The token must not be empty.");if(/\s/.test(e))throw new a("INVALID_CHARACTER_ERR","The token must not contain space characters.");return i.call(t,e)},u=function(t){for(var e=o.call(t.getAttribute("class")||""),n=e?e.split(/\s+/):[],r=0,i=n.length;r<i;r++)this.push(n[r]);this._updateClassName=function(){t.setAttribute("class",this.toString())}},c=u.prototype=[],l=function(){return new u(this)};if(a.prototype=Error.prototype,c.item=function(t){return this[t]||null},c.contains=function(t){return~s(this,t+"")},c.add=function(){var t,e=arguments,n=0,r=e.length,o=!1;do{t=e[n]+"",~s(this,t)||(this.push(t),o=!0)}while(++n<r);o&&this._updateClassName()},c.remove=function(){var t,e,n=arguments,r=0,o=n.length,i=!1;do{for(t=n[r]+"",e=s(this,t);~e;)this.splice(e,1),i=!0,e=s(this,t)}while(++r<o);i&&this._updateClassName()},c.toggle=function(t,e){var n=this.contains(t),r=n?!0!==e&&"remove":!1!==e&&"add";return r&&this[r](t),!0===e||!1===e?e:!n},c.replace=function(t,e){var n=s(t+"");~n&&(this.splice(n,1,e),this._updateClassName())},c.toString=function(){return this.join(" ")},r.defineProperty){var f={get:l,enumerable:!0,configurable:!0};try{r.defineProperty(n,e,f)}catch(t){void 0!==t.number&&-2146823252!==t.number||(f.enumerable=!1,r.defineProperty(n,e,f))}}else r.prototype.__defineGetter__&&n.__defineGetter__(e,l)}}(self),function(){var t=document.createElement("_");if(t.classList.add("c1","c2"),!t.classList.contains("c2")){var e=function(t){var e=DOMTokenList.prototype[t];DOMTokenList.prototype[t]=function(t){var n,r=arguments.length;for(n=0;n<r;n++)t=arguments[n],e.call(this,t)}};e("add"),e("remove")}if(t.classList.toggle("c3",!1),t.classList.contains("c3")){var n=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(t,e){return 1 in arguments&&!this.contains(t)==!e?e:n.call(this,t)}}"replace"in document.createElement("_").classList||(DOMTokenList.prototype.replace=function(t,e){var n=this.toString().split(" "),r=n.indexOf(t+"");~r&&(n=n.slice(r),this.remove.apply(this,n),this.add(e),this.add.apply(this,n.slice(1)))}),t=null}());n(7327),n(2222),n(7941),n(4603),n(3728),n(2707),n(6699),n(2023),n(4747),n(9601),n(1249),n(1038),n(8783),n(6649),n(6078),n(2526),n(1817),n(9653),n(5003),n(9337),n(2165),n(6992),n(3948),n(3161),n(4723),n(5827),n(6210);function t(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||e(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,e){if(t){if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,u(r.key),r)}}function s(t,e,n){return(e=u(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function u(t){var e=function(t,e){if("object"!==i(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===i(e)?e:String(e)}var c=function(){function n(t){var e=t.getOptions,r=t.getCaretPosition,o=t.getCaretPositionEnd,i=t.dispatch;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),s(this,"getOptions",void 0),s(this,"getCaretPosition",void 0),s(this,"getCaretPositionEnd",void 0),s(this,"dispatch",void 0),s(this,"maxLengthReached",void 0),s(this,"isStandardButton",function(t){return t&&!("{"===t[0]&&"}"===t[t.length-1])}),this.getOptions=e,this.getCaretPosition=r,this.getCaretPositionEnd=o,this.dispatch=i,n.bindMethods(n,this)}var r,o,u;return r=n,o=[{key:"getButtonType",value:function(t){return t.includes("{")&&t.includes("}")&&"{//}"!==t?"functionBtn":"standardBtn"}},{key:"getButtonClass",value:function(t){var e=this.getButtonType(t),n=t.replace("{","").replace("}",""),r="";return"standardBtn"!==e&&(r=" hg-button-".concat(n)),"hg-".concat(e).concat(r)}},{key:"getDefaultDiplay",value:function(){return{"{bksp}":"backspace","{backspace}":"backspace","{enter}":"< enter","{shift}":"shift","{shiftleft}":"shift","{shiftright}":"shift","{alt}":"alt","{s}":"shift","{tab}":"tab","{lock}":"caps","{capslock}":"caps","{accept}":"Submit","{space}":" ","{//}":" ","{esc}":"esc","{escape}":"esc","{f1}":"f1","{f2}":"f2","{f3}":"f3","{f4}":"f4","{f5}":"f5","{f6}":"f6","{f7}":"f7","{f8}":"f8","{f9}":"f9","{f10}":"f10","{f11}":"f11","{f12}":"f12","{numpaddivide}":"/","{numlock}":"lock","{arrowup}":"↑","{arrowleft}":"←","{arrowdown}":"↓","{arrowright}":"→","{prtscr}":"print","{scrolllock}":"scroll","{pause}":"pause","{insert}":"ins","{home}":"home","{pageup}":"up","{delete}":"del","{forwarddelete}":"del","{end}":"end","{pagedown}":"down","{numpadmultiply}":"*","{numpadsubtract}":"-","{numpadadd}":"+","{numpadenter}":"enter","{period}":".","{numpaddecimal}":".","{numpad0}":"0","{numpad1}":"1","{numpad2}":"2","{numpad3}":"3","{numpad4}":"4","{numpad5}":"5","{numpad6}":"6","{numpad7}":"7","{numpad8}":"8","{numpad9}":"9"}}},{key:"getButtonDisplayName",value:function(t,e,n){return(e=n?Object.assign({},this.getDefaultDiplay(),e):e||this.getDefaultDiplay())[t]||t}},{key:"getUpdatedInput",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=this.getOptions(),a=[n,r,o],s=e;return("{bksp}"===t||"{backspace}"===t)&&s.length>0?s=this.removeAt.apply(this,[s].concat(a)):("{delete}"===t||"{forwarddelete}"===t)&&s.length>0?s=this.removeForwardsAt.apply(this,[s].concat(a)):"{space}"===t?s=this.addStringAt.apply(this,[s," "].concat(a)):"{tab}"!==t||"boolean"==typeof i.tabCharOnTab&&!1===i.tabCharOnTab?"{enter}"!==t&&"{numpadenter}"!==t||!i.newLineOnEnter?t.includes("numpad")&&Number.isInteger(Number(t[t.length-2]))?s=this.addStringAt.apply(this,[s,t[t.length-2]].concat(a)):"{numpaddivide}"===t?s=this.addStringAt.apply(this,[s,"/"].concat(a)):"{numpadmultiply}"===t?s=this.addStringAt.apply(this,[s,"*"].concat(a)):"{numpadsubtract}"===t?s=this.addStringAt.apply(this,[s,"-"].concat(a)):"{numpadadd}"===t?s=this.addStringAt.apply(this,[s,"+"].concat(a)):"{numpaddecimal}"===t?s=this.addStringAt.apply(this,[s,"."].concat(a)):"{"===t||"}"===t?s=this.addStringAt.apply(this,[s,t].concat(a)):t.includes("{")||t.includes("}")||(s=this.addStringAt.apply(this,[s,t].concat(a))):s=this.addStringAt.apply(this,[s,"\n"].concat(a)):s=this.addStringAt.apply(this,[s,"\t"].concat(a)),s}},{key:"updateCaretPos",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.updateCaretPosAction(t,e);this.dispatch(function(t){t.setCaretPosition(n)})}},{key:"updateCaretPosAction",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.getOptions(),r=this.getCaretPosition();return null!=r&&(e?r>0&&(r-=t):r+=t),n.debug&&console.log("Caret at:",r),r}},{key:"addStringAt",value:function(t,e){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.length,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return r||0===r?(n=[t.slice(0,r),e,t.slice(o)].join(""),this.isMaxLengthReached()||i&&this.updateCaretPos(e.length)):n=t+e,n}},{key:"removeAt",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.length,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(0===n&&0===r)return t;if(n===r){var i=/([\uD800-\uDBFF][\uDC00-\uDFFF])/g;n&&n>=0?t.substring(n-2,n).match(i)?(e=t.substr(0,n-2)+t.substr(n),o&&this.updateCaretPos(2,!0)):(e=t.substr(0,n-1)+t.substr(n),o&&this.updateCaretPos(1,!0)):t.slice(-2).match(i)?(e=t.slice(0,-2),o&&this.updateCaretPos(2,!0)):(e=t.slice(0,-1),o&&this.updateCaretPos(1,!0))}else e=t.slice(0,n)+t.slice(r),o&&this.dispatch(function(t){t.setCaretPosition(n)});return e}},{key:"removeForwardsAt",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.length,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(null==t||!t.length||null===n)return t;if(n===r){var i=/([\uD800-\uDBFF][\uDC00-\uDFFF])/g,a=t.substring(n,n+2),s=a.match(i);e=s?t.substr(0,n)+t.substr(n+2):t.substr(0,n)+t.substr(n+1)}else e=t.slice(0,n)+t.slice(r),o&&this.dispatch(function(t){t.setCaretPosition(n)});return e}},{key:"handleMaxLength",value:function(t,e){var n=this.getOptions(),r=n.maxLength,o=t[n.inputName||"default"],a=e.length-1>=r;if(e.length<=o.length)return!1;if(Number.isInteger(r))return n.debug&&console.log("maxLength (num) reached:",a),a?(this.maxLengthReached=!0,!0):(this.maxLengthReached=!1,!1);if("object"===i(r)){var s=e.length-1>=r[n.inputName||"default"];return n.debug&&console.log("maxLength (obj) reached:",s),s?(this.maxLengthReached=!0,!0):(this.maxLengthReached=!1,!1)}}},{key:"isMaxLengthReached",value:function(){return Boolean(this.maxLengthReached)}},{key:"isTouchDevice",value:function(){return"ontouchstart"in window||navigator.maxTouchPoints}},{key:"pointerEventsSupported",value:function(){return!!window.PointerEvent}},{key:"camelCase",value:function(t){return t?t.toLowerCase().trim().split(/[.\-_\s]/g).reduce(function(t,e){return e.length?t+e[0].toUpperCase()+e.slice(1):t}):""}},{key:"chunkArray",value:function(e,n){return t(Array(Math.ceil(e.length/n))).map(function(t,r){return e.slice(n*r,n+n*r)})}},{key:"escapeRegex",value:function(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}},{key:"getRtlOffset",value:function(t,e){var n=t,r=e.indexOf("‫");return r<t&&-1!=r&&n--,e.indexOf("‬")<t&&-1!=r&&n--,n<0?0:n}}],u=[{key:"bindMethods",value:function(t,n){var r,o=function(t,n){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=e(t))||n&&t&&"number"==typeof t.length){r&&(t=r);var o=0,i=function(){};return{s:i,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return s=t.done,t},e:function(t){u=!0,a=t},f:function(){try{s||null==r.return||r.return()}finally{if(u)throw a}}}}(Object.getOwnPropertyNames(t.prototype));try{for(o.s();!(r=o.n()).done;){var i=r.value;"constructor"===i||"bindMethods"===i||(n[i]=n[i].bind(n))}}catch(t){o.e(t)}finally{o.f()}}}],o&&a(r.prototype,o),u&&a(r,u),Object.defineProperty(r,"prototype",{writable:!1}),n}();s(c,"noop",function(){});var l=c;function f(t){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f(t)}function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,h(r.key),r)}}function p(t,e,n){return(e=h(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function h(t){var e=function(t,e){if("object"!==f(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===f(e)?e:String(e)}var v=function(){function t(e){var n=e.dispatch,r=e.getOptions;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),p(this,"getOptions",void 0),p(this,"dispatch",void 0),this.dispatch=n,this.getOptions=r,l.bindMethods(t,this)}var e,n,r;return e=t,(n=[{key:"handleHighlightKeyDown",value:function(t){var e=this.getOptions(),n=this.getSimpleKeyboardLayoutKey(t);this.dispatch(function(r){var o,i,a=r.getButtonElement(n),s=r.getButtonElement("{".concat(n,"}"));if(a)o=a,i=n;else{if(!s)return;o=s,i="{".concat(n,"}")}o&&(o.style.background=e.physicalKeyboardHighlightBgColor||"#dadce4",o.style.color=e.physicalKeyboardHighlightTextColor||"black",e.physicalKeyboardHighlightPress&&(e.physicalKeyboardHighlightPressUsePointerEvents?o.onpointerdown():e.physicalKeyboardHighlightPressUseClick?o.click():r.handleButtonClicked(i,t)))})}},{key:"handleHighlightKeyUp",value:function(t){var e=this.getOptions(),n=this.getSimpleKeyboardLayoutKey(t);this.dispatch(function(t){var r=t.getButtonElement(n)||t.getButtonElement("{".concat(n,"}"));r&&r.removeAttribute&&(r.removeAttribute("style"),e.physicalKeyboardHighlightPressUsePointerEvents&&r.onpointerup())})}},{key:"getSimpleKeyboardLayoutKey",value:function(t){var e,n="",r=t.code||t.key||this.keyCodeToKey(null==t?void 0:t.keyCode);return(n=null!=r&&r.includes("Numpad")||null!=r&&r.includes("Shift")||null!=r&&r.includes("Space")||null!=r&&r.includes("Backspace")||null!=r&&r.includes("Control")||null!=r&&r.includes("Alt")||null!=r&&r.includes("Meta")?t.code||"":t.key||this.keyCodeToKey(null==t?void 0:t.keyCode)||"").length>1?null===(e=n)||void 0===e?void 0:e.toLowerCase():n}},{key:"keyCodeToKey",value:function(t){return{8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",91:"Meta",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9",106:"NumpadMultiply",107:"NumpadAdd",109:"NumpadSubtract",110:"NumpadDecimal",111:"NumpadDivide",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"}[t]}}])&&d(e.prototype,n),r&&d(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function y(t){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y(t)}function g(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,b(r.key),r)}}function m(t,e,n){return(e=b(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function b(t){var e=function(t,e){if("object"!==y(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==y(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===y(e)?e:String(e)}var x=function(){function t(e){var n=e.utilities;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),m(this,"utilities",void 0),m(this,"candidateBoxElement",void 0),m(this,"pageIndex",0),m(this,"pageSize",void 0),this.utilities=n,l.bindMethods(t,this),this.pageSize=this.utilities.getOptions().layoutCandidatesPageSize||5}var e,n,r;return e=t,n=[{key:"destroy",value:function(){this.candidateBoxElement&&(this.candidateBoxElement.remove(),this.pageIndex=0)}},{key:"show",value:function(t){var e=this,n=t.candidateValue,r=t.targetElement,o=t.onSelect;if(n&&n.length){var i=this.utilities.chunkArray(n.split(" "),this.pageSize);this.renderPage({candidateListPages:i,targetElement:r,pageIndex:this.pageIndex,nbPages:i.length,onItemSelected:function(t,n){o(t,n),e.destroy()}})}}},{key:"renderPage",value:function(t){var e,n=this,r=t.candidateListPages,o=t.targetElement,i=t.pageIndex,a=t.nbPages,s=t.onItemSelected;null===(e=this.candidateBoxElement)||void 0===e||e.remove(),this.candidateBoxElement=document.createElement("div"),this.candidateBoxElement.className="hg-candidate-box";var u=document.createElement("ul");u.className="hg-candidate-box-list",r[i].forEach(function(t){var e=document.createElement("li"),n=function(){var t=new MouseEvent("click");return Object.defineProperty(t,"target",{value:e}),t};e.className="hg-candidate-box-list-item",e.textContent=t,e.onclick=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n();return s(t,e)},u.appendChild(e)});var c=i>0,l=document.createElement("div");l.classList.add("hg-candidate-box-prev"),c&&l.classList.add("hg-candidate-box-btn-active"),l.onclick=function(){c&&n.renderPage({candidateListPages:r,targetElement:o,pageIndex:i-1,nbPages:a,onItemSelected:s})},this.candidateBoxElement.appendChild(l),this.candidateBoxElement.appendChild(u);var f=i<a-1,d=document.createElement("div");d.classList.add("hg-candidate-box-next"),f&&d.classList.add("hg-candidate-box-btn-active"),d.onclick=function(){f&&n.renderPage({candidateListPages:r,targetElement:o,pageIndex:i+1,nbPages:a,onItemSelected:s})},this.candidateBoxElement.appendChild(d),o.prepend(this.candidateBoxElement)}}],n&&g(e.prototype,n),r&&g(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}(),w=x;function E(t){return function(t){if(Array.isArray(t))return S(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return S(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return S(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function O(t){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},O(t)}function k(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function I(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,C(r.key),r)}}function P(t,e,n){return(e=C(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function C(t){var e=function(t,e){if("object"!==O(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==O(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===O(e)?e:String(e)}var A=function(){function t(e,n){var r=this;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),P(this,"input",void 0),P(this,"options",void 0),P(this,"utilities",void 0),P(this,"caretPosition",void 0),P(this,"caretPositionEnd",void 0),P(this,"keyboardDOM",void 0),P(this,"keyboardPluginClasses",void 0),P(this,"keyboardDOMClass",void 0),P(this,"buttonElements",void 0),P(this,"currentInstanceName",void 0),P(this,"allKeyboardInstances",void 0),P(this,"keyboardInstanceNames",void 0),P(this,"isFirstKeyboardInstance",void 0),P(this,"physicalKeyboard",void 0),P(this,"modules",void 0),P(this,"activeButtonClass",void 0),P(this,"holdInteractionTimeout",void 0),P(this,"holdTimeout",void 0),P(this,"isMouseHold",void 0),P(this,"initialized",void 0),P(this,"candidateBox",void 0),P(this,"keyboardRowsDOM",void 0),P(this,"defaultName","default"),P(this,"activeInputElement",null),P(this,"handleParams",function(t,e){var n,r,o;if("string"==typeof t)n=t.split(".").join(""),r=document.querySelector(".".concat(n)),o=e;else if(t instanceof HTMLDivElement){if(!t.className)throw console.warn("Any DOM element passed as parameter must have a class."),new Error("KEYBOARD_DOM_CLASS_ERROR");n=t.className.split(" ")[0],r=t,o=e}else n="simple-keyboard",r=document.querySelector(".".concat(n)),o=t;return{keyboardDOMClass:n,keyboardDOM:r,options:o}}),P(this,"getOptions",function(){return r.options}),P(this,"getCaretPosition",function(){return r.caretPosition}),P(this,"getCaretPositionEnd",function(){return r.caretPositionEnd}),P(this,"registerModule",function(t,e){r.modules[t]||(r.modules[t]={}),e(r.modules[t])}),P(this,"getKeyboardClassString",function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var o=[r.keyboardDOMClass].concat(e).filter(function(t){return!!t});return o.join(" ")}),"undefined"!=typeof window){var o=this.handleParams(e,n),i=o.keyboardDOMClass,a=o.keyboardDOM,s=o.options,u=void 0===s?{}:s;this.utilities=new l({getOptions:this.getOptions,getCaretPosition:this.getCaretPosition,getCaretPositionEnd:this.getCaretPositionEnd,dispatch:this.dispatch}),this.caretPosition=null,this.caretPositionEnd=null,this.keyboardDOM=a,this.options=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?k(Object(n),!0).forEach(function(e){P(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({layoutName:"default",theme:"hg-theme-default",inputName:"default",preventMouseDownDefault:!1,enableLayoutCandidates:!0,excludeFromLayout:{}},u),this.keyboardPluginClasses="",l.bindMethods(t,this);var c=this.options.inputName,f=void 0===c?this.defaultName:c;if(this.input={},this.input[f]="",this.keyboardDOMClass=i,this.buttonElements={},window.SimpleKeyboardInstances||(window.SimpleKeyboardInstances={}),this.currentInstanceName=this.utilities.camelCase(this.keyboardDOMClass),window.SimpleKeyboardInstances[this.currentInstanceName]=this,this.allKeyboardInstances=window.SimpleKeyboardInstances,this.keyboardInstanceNames=Object.keys(window.SimpleKeyboardInstances),this.isFirstKeyboardInstance=this.keyboardInstanceNames[0]===this.currentInstanceName,this.physicalKeyboard=new v({dispatch:this.dispatch,getOptions:this.getOptions}),this.candidateBox=this.options.enableLayoutCandidates?new w({utilities:this.utilities}):null,!this.keyboardDOM)throw console.warn('".'.concat(i,'" was not found in the DOM.')),new Error("KEYBOARD_DOM_ERROR");this.render(),this.modules={},this.loadModules()}}var e,n,r;return e=t,n=[{key:"setCaretPosition",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;this.caretPosition=t,this.caretPositionEnd=e}},{key:"getInputCandidates",value:function(t){var e=this,n=this.options,r=n.layoutCandidates,o=n.layoutCandidatesCaseSensitiveMatch;if(!r||"object"!==O(r))return{};var i=Object.keys(r).filter(function(n){var r=t.substring(0,e.getCaretPositionEnd()||0)||t,i=new RegExp("".concat(e.utilities.escapeRegex(n),"$"),o?"g":"gi");return!!E(r.matchAll(i)).length});if(i.length>1){var a=i.sort(function(t,e){return e.length-t.length})[0];return{candidateKey:a,candidateValue:r[a]}}if(i.length){var s=i[0];return{candidateKey:s,candidateValue:r[s]}}return{}}},{key:"showCandidatesBox",value:function(t,e,n){var r=this;this.candidateBox&&this.candidateBox.show({candidateValue:e,targetElement:n,onSelect:function(e,n){var o=r.options,i=o.layoutCandidatesCaseSensitiveMatch,a=e;o.disableCandidateNormalization||(a=e.normalize("NFD"));var s=r.getInput(r.options.inputName,!0),u=r.getCaretPositionEnd()||0,c=s.substring(0,u||0)||s,l=new RegExp("".concat(r.utilities.escapeRegex(t),"$"),i?"g":"gi"),f=c.replace(l,a),d=s.replace(c,f),p=f.length-c.length,h=(u||s.length)+p;h<0&&(h=0),r.setInput(d,r.options.inputName,!0),r.setCaretPosition(h),"function"==typeof r.options.onChange&&r.options.onChange(r.getInput(r.options.inputName,!0),n),"function"==typeof r.options.onChangeAll&&r.options.onChangeAll(r.getAllInputs(),n)}})}},{key:"handleButtonClicked",value:function(t,e){var n=this.options,r=n.inputName,o=void 0===r?this.defaultName:r,i=n.debug;if("{//}"!==t){this.input[o]||(this.input[o]="");var a=this.utilities.getUpdatedInput(t,this.input[o],this.caretPosition,this.caretPositionEnd);if(this.utilities.isStandardButton(t)&&this.activeInputElement&&this.input[o]&&this.input[o]===a&&0===this.caretPosition&&this.caretPositionEnd===a.length)return this.setInput("",this.options.inputName,!0),this.setCaretPosition(0),this.activeInputElement.value="",this.activeInputElement.setSelectionRange(0,0),void this.handleButtonClicked(t,e);if("function"==typeof this.options.onKeyPress&&this.options.onKeyPress(t,e),this.input[o]!==a&&(!this.options.inputPattern||this.options.inputPattern&&this.inputPatternIsValid(a))){if(this.options.maxLength&&this.utilities.handleMaxLength(this.input,a))return;var s=this.utilities.getUpdatedInput(t,this.input[o],this.caretPosition,this.caretPositionEnd,!0);if(this.setInput(s,this.options.inputName,!0),i&&console.log("Input changed:",this.getAllInputs()),this.options.debug&&console.log("Caret at: ",this.getCaretPosition(),this.getCaretPositionEnd(),"(".concat(this.keyboardDOMClass,")")),this.options.syncInstanceInputs&&this.syncInstanceInputs(),"function"==typeof this.options.onChange&&this.options.onChange(this.getInput(this.options.inputName,!0),e),"function"==typeof this.options.onChangeAll&&this.options.onChangeAll(this.getAllInputs(),e),null!=e&&e.target&&this.options.enableLayoutCandidates){var u,c=this.getInputCandidates(a),l=c.candidateKey,f=c.candidateValue;l&&f?this.showCandidatesBox(l,f,this.keyboardDOM):null===(u=this.candidateBox)||void 0===u||u.destroy()}}i&&console.log("Key pressed:",t)}}},{key:"getMouseHold",value:function(){return this.isMouseHold}},{key:"setMouseHold",value:function(t){this.options.syncInstanceInputs?this.dispatch(function(e){e.isMouseHold=t}):this.isMouseHold=t}},{key:"handleButtonMouseDown",value:function(t,e){var n=this;e&&(this.options.preventMouseDownDefault&&e.preventDefault(),this.options.stopMouseDownPropagation&&e.stopPropagation(),e.target.classList.add(this.activeButtonClass)),this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),this.holdTimeout&&clearTimeout(this.holdTimeout),this.setMouseHold(!0),this.options.disableButtonHold||(this.holdTimeout=window.setTimeout(function(){(n.getMouseHold()&&(!t.includes("{")&&!t.includes("}")||"{delete}"===t||"{backspace}"===t||"{bksp}"===t||"{space}"===t||"{tab}"===t)||"{arrowright}"===t||"{arrowleft}"===t||"{arrowup}"===t||"{arrowdown}"===t)&&(n.options.debug&&console.log("Button held:",t),n.handleButtonHold(t)),clearTimeout(n.holdTimeout)},500))}},{key:"handleButtonMouseUp",value:function(t,e){var n=this;e&&(this.options.preventMouseUpDefault&&e.preventDefault&&e.preventDefault(),this.options.stopMouseUpPropagation&&e.stopPropagation&&e.stopPropagation(),!(e.target===this.keyboardDOM||e.target&&this.keyboardDOM.contains(e.target)||this.candidateBox&&this.candidateBox.candidateBoxElement&&(e.target===this.candidateBox.candidateBoxElement||e.target&&this.candidateBox.candidateBoxElement.contains(e.target)))&&this.candidateBox&&this.candidateBox.destroy()),this.recurseButtons(function(t){t.classList.remove(n.activeButtonClass)}),this.setMouseHold(!1),this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),t&&"function"==typeof this.options.onKeyReleased&&this.options.onKeyReleased(t)}},{key:"handleKeyboardContainerMouseDown",value:function(t){this.options.preventMouseDownDefault&&t.preventDefault()}},{key:"handleButtonHold",value:function(t){var e=this;this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),this.holdInteractionTimeout=window.setTimeout(function(){e.getMouseHold()?(e.handleButtonClicked(t),e.handleButtonHold(t)):clearTimeout(e.holdInteractionTimeout)},100)}},{key:"syncInstanceInputs",value:function(){var t=this;this.dispatch(function(e){e.replaceInput(t.input),e.setCaretPosition(t.caretPosition,t.caretPositionEnd)})}},{key:"clearInput",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.inputName||this.defaultName;this.input[t]="",this.setCaretPosition(0),this.options.syncInstanceInputs&&this.syncInstanceInputs()}},{key:"getInput",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.inputName||this.defaultName,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.options.syncInstanceInputs&&!e&&this.syncInstanceInputs(),this.options.rtl){var n=this.input[t].replace("‫","").replace("‬","");return"‫"+n+"‬"}return this.input[t]}},{key:"getAllInputs",value:function(){var t=this,e={};return Object.keys(this.input).forEach(function(n){e[n]=t.getInput(n,!0)}),e}},{key:"setInput",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.options.inputName||this.defaultName,n=arguments.length>2?arguments[2]:void 0;this.input[e]=t,!n&&this.options.syncInstanceInputs&&this.syncInstanceInputs()}},{key:"replaceInput",value:function(t){this.input=t}},{key:"setOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.changedOptions(t);this.options=Object.assign(this.options,t),e.length&&(this.options.debug&&console.log("changedOptions",e),this.onSetOptions(e),this.render())}},{key:"changedOptions",value:function(t){var e=this;return Object.keys(t).filter(function(n){return JSON.stringify(t[n])!==JSON.stringify(e.options[n])})}},{key:"onSetOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];t.includes("layoutName")&&this.candidateBox&&this.candidateBox.destroy(),(t.includes("layoutCandidatesPageSize")||t.includes("layoutCandidates"))&&this.candidateBox&&(this.candidateBox.destroy(),this.candidateBox=new w({utilities:this.utilities}))}},{key:"resetRows",value:function(){this.keyboardRowsDOM&&this.keyboardRowsDOM.remove(),this.keyboardDOM.className=this.keyboardDOMClass,this.keyboardDOM.setAttribute("data-skInstance",this.currentInstanceName),this.buttonElements={}}},{key:"dispatch",value:function(t){if(!window.SimpleKeyboardInstances)throw console.warn("SimpleKeyboardInstances is not defined. Dispatch cannot be called."),new Error("INSTANCES_VAR_ERROR");return Object.keys(window.SimpleKeyboardInstances).forEach(function(e){t(window.SimpleKeyboardInstances[e],e)})}},{key:"addButtonTheme",value:function(t,e){var n=this;e&&t&&(t.split(" ").forEach(function(r){e.split(" ").forEach(function(e){n.options.buttonTheme||(n.options.buttonTheme=[]);var o=!1;n.options.buttonTheme.map(function(t){if(null!=t&&t.class.split(" ").includes(e)){o=!0;var n=t.buttons.split(" ");n.includes(r)||(o=!0,n.push(r),t.buttons=n.join(" "))}return t}),o||n.options.buttonTheme.push({class:e,buttons:t})})}),this.render())}},{key:"removeButtonTheme",value:function(t,e){var n=this;if(!t&&!e)return this.options.buttonTheme=[],void this.render();t&&Array.isArray(this.options.buttonTheme)&&this.options.buttonTheme.length&&(t.split(" ").forEach(function(t){var r,o;null===(r=n.options)||void 0===r||null===(o=r.buttonTheme)||void 0===o||o.map(function(r,o){if(r&&e&&e.includes(r.class)||!e){var i,a,s=null===(i=r)||void 0===i?void 0:i.buttons.split(" ").filter(function(e){return e!==t});r&&null!=s&&s.length?r.buttons=s.join(" "):(null===(a=n.options.buttonTheme)||void 0===a||a.splice(o,1),r=null)}return r})}),this.render())}},{key:"getButtonElement",value:function(t){var e,n=this.buttonElements[t];return n&&(e=n.length>1?n:n[0]),e}},{key:"inputPatternIsValid",value:function(t){var e,n=this.options.inputPattern;if((e=n instanceof RegExp?n:n[this.options.inputName||this.defaultName])&&t){var r=e.test(t);return this.options.debug&&console.log('inputPattern ("'.concat(e,'"): ').concat(r?"passed":"did not pass!")),r}return!0}},{key:"setEventListeners",value:function(){!this.isFirstKeyboardInstance&&this.allKeyboardInstances||(this.options.debug&&console.log("Caret handling started (".concat(this.keyboardDOMClass,")")),document.addEventListener("keyup",this.handleKeyUp),document.addEventListener("keydown",this.handleKeyDown),document.addEventListener("mouseup",this.handleMouseUp),document.addEventListener("touchend",this.handleTouchEnd),document.addEventListener("select",this.handleSelect),document.addEventListener("selectionchange",this.handleSelectionChange))}},{key:"handleKeyUp",value:function(t){this.caretEventHandler(t),this.options.physicalKeyboardHighlight&&this.physicalKeyboard.handleHighlightKeyUp(t)}},{key:"handleKeyDown",value:function(t){this.options.physicalKeyboardHighlight&&this.physicalKeyboard.handleHighlightKeyDown(t)}},{key:"handleMouseUp",value:function(t){this.caretEventHandler(t)}},{key:"handleTouchEnd",value:function(t){this.caretEventHandler(t)}},{key:"handleSelect",value:function(t){this.caretEventHandler(t)}},{key:"handleSelectionChange",value:function(t){this.caretEventHandler(t)}},{key:"caretEventHandler",value:function(t){var e,n=this;t.target.tagName&&(e=t.target.tagName.toLowerCase()),this.dispatch(function(r){var o=t.target===r.keyboardDOM||t.target&&r.keyboardDOM.contains(t.target);if(n.options.syncInstanceInputs&&Array.isArray(t.path)&&(o=t.path.some(function(t){var e;return null==t||null===(e=t.hasAttribute)||void 0===e?void 0:e.call(t,"data-skInstance")})),("textarea"===e||"input"===e&&["text","search","url","tel","password"].includes(t.target.type))&&!r.options.disableCaretPositioning){var i=t.target.selectionStart,a=t.target.selectionEnd;r.options.rtl&&(i=r.utilities.getRtlOffset(i,r.getInput()),a=r.utilities.getRtlOffset(a,r.getInput())),r.setCaretPosition(i,a),n.activeInputElement=t.target,r.options.debug&&console.log("Caret at: ",r.getCaretPosition(),r.getCaretPositionEnd(),t&&t.target.tagName.toLowerCase(),"(".concat(r.keyboardDOMClass,")"))}else!r.options.disableCaretPositioning&&o||"selectionchange"===(null==t?void 0:t.type)||(r.setCaretPosition(null),n.activeInputElement=null,r.options.debug&&console.log('Caret position reset due to "'.concat(null==t?void 0:t.type,'" event'),t))})}},{key:"recurseButtons",value:function(t){var e=this;t&&Object.keys(this.buttonElements).forEach(function(n){return e.buttonElements[n].forEach(t)})}},{key:"destroy",value:function(){this.options.debug&&console.log("Destroying simple-keyboard instance: ".concat(this.currentInstanceName)),document.removeEventListener("keyup",this.handleKeyUp),document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("touchend",this.handleTouchEnd),document.removeEventListener("select",this.handleSelect),document.removeEventListener("selectionchange",this.handleSelectionChange),document.onpointerup=null,document.ontouchend=null,document.ontouchcancel=null,document.onmouseup=null,this.recurseButtons(function(t){t&&(t.onpointerdown=null,t.onpointerup=null,t.onpointercancel=null,t.ontouchstart=null,t.ontouchend=null,t.ontouchcancel=null,t.onclick=null,t.onmousedown=null,t.onmouseup=null,t.remove(),t=null)}),this.keyboardDOM.onpointerdown=null,this.keyboardDOM.ontouchstart=null,this.keyboardDOM.onmousedown=null,this.resetRows(),this.candidateBox&&(this.candidateBox.destroy(),this.candidateBox=null),this.activeInputElement=null,this.keyboardDOM.removeAttribute("data-skInstance"),this.keyboardDOM.innerHTML="",window.SimpleKeyboardInstances[this.currentInstanceName]=null,delete window.SimpleKeyboardInstances[this.currentInstanceName],this.initialized=!1}},{key:"getButtonThemeClasses",value:function(t){var e=this.options.buttonTheme,n=[];return Array.isArray(e)&&e.forEach(function(e){if(e&&e.class&&"string"==typeof e.class&&e.buttons&&"string"==typeof e.buttons){var r=e.class.split(" ");e.buttons.split(" ").includes(t)&&(n=[].concat(E(n),E(r)))}else console.warn('Incorrect "buttonTheme". Please check the documentation.',e)}),n}},{key:"setDOMButtonAttributes",value:function(t,e){var n=this.options.buttonAttributes;Array.isArray(n)&&n.forEach(function(n){n.attribute&&"string"==typeof n.attribute&&n.value&&"string"==typeof n.value&&n.buttons&&"string"==typeof n.buttons?n.buttons.split(" ").includes(t)&&e(n.attribute,n.value):console.warn('Incorrect "buttonAttributes". Please check the documentation.',n)})}},{key:"onTouchDeviceDetected",value:function(){this.processAutoTouchEvents(),this.disableContextualWindow()}},{key:"disableContextualWindow",value:function(){window.oncontextmenu=function(t){if(t.target.classList.contains("hg-button"))return t.preventDefault(),t.stopPropagation(),!1}}},{key:"processAutoTouchEvents",value:function(){this.options.autoUseTouchEvents&&(this.options.useTouchEvents=!0,this.options.debug&&console.log("autoUseTouchEvents: Touch device detected, useTouchEvents enabled."))}},{key:"onInit",value:function(){this.options.debug&&console.log("".concat(this.keyboardDOMClass," Initialized")),this.setEventListeners(),"function"==typeof this.options.onInit&&this.options.onInit(this)}},{key:"beforeFirstRender",value:function(){this.utilities.isTouchDevice()&&this.onTouchDeviceDetected(),"function"==typeof this.options.beforeFirstRender&&this.options.beforeFirstRender(this),this.isFirstKeyboardInstance&&this.utilities.pointerEventsSupported()&&!this.options.useTouchEvents&&!this.options.useMouseEvents&&this.options.debug&&console.log("Using PointerEvents as it is supported by this browser"),this.options.useTouchEvents&&this.options.debug&&console.log("useTouchEvents has been enabled. Only touch events will be used.")}},{key:"beforeRender",value:function(){"function"==typeof this.options.beforeRender&&this.options.beforeRender(this)}},{key:"onRender",value:function(){"function"==typeof this.options.onRender&&this.options.onRender(this)}},{key:"onModulesLoaded",value:function(){"function"==typeof this.options.onModulesLoaded&&this.options.onModulesLoaded(this)}},{key:"loadModules",value:function(){var t=this;Array.isArray(this.options.modules)&&(this.options.modules.forEach(function(e){var n=new e(t);n.init&&n.init(t)}),this.keyboardPluginClasses="modules-loaded",this.render(),this.onModulesLoaded())}},{key:"getModuleProp",value:function(t,e){return!!this.modules[t]&&this.modules[t][e]}},{key:"getModulesList",value:function(){return Object.keys(this.modules)}},{key:"parseRowDOMContainers",value:function(t,e,n,r){var o=this,i=Array.from(t.children),a=0;return i.length&&n.forEach(function(n,s){var u=r[s];if(!(u&&u>n))return!1;var c=n-a,l=u-a,f=document.createElement("div");f.className+="hg-button-container";var d="".concat(o.options.layoutName,"-r").concat(e,"c").concat(s);f.setAttribute("data-skUID",d);var p=i.splice(c,l-c+1);a=l-c,p.forEach(function(t){return f.appendChild(t)}),i.splice(c,0,f),t.innerHTML="",i.forEach(function(e){return t.appendChild(e)}),o.options.debug&&console.log("rowDOMContainer",p,c,l,a+1)}),t}},{key:"render",value:function(){var t=this;this.resetRows(),this.initialized||this.beforeFirstRender(),this.beforeRender();var e="hg-layout-".concat(this.options.layoutName),n=this.options.layout||{default:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w e r t y u i o p [ ] \\","{lock} a s d f g h j k l ; ' {enter}","{shift} z x c v b n m , . / {shift}",".com @ {space}"],shift:["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W E R T Y U I O P { } |",'{lock} A S D F G H J K L : " {enter}',"{shift} Z X C V B N M < > ? {shift}",".com @ {space}"]},r=this.options.useTouchEvents||!1,o=r?"hg-touch-events":"",i=this.options.useMouseEvents||!1,a=this.options.disableRowButtonContainers;this.keyboardDOM.className=this.getKeyboardClassString(this.options.theme,e,this.keyboardPluginClasses,o),this.keyboardDOM.setAttribute("data-skInstance",this.currentInstanceName),this.keyboardRowsDOM=document.createElement("div"),this.keyboardRowsDOM.className="hg-rows",n[this.options.layoutName||this.defaultName].forEach(function(e,n){var o=e.split(" ");t.options.excludeFromLayout&&t.options.excludeFromLayout[t.options.layoutName||t.defaultName]&&(o=o.filter(function(e){return t.options.excludeFromLayout&&!t.options.excludeFromLayout[t.options.layoutName||t.defaultName].includes(e)}));var s=document.createElement("div");s.className+="hg-row";var u=[],c=[];o.forEach(function(e,o){var l,f=!a&&"string"==typeof e&&e.length>1&&0===e.indexOf("["),d=!a&&"string"==typeof e&&e.length>1&&e.indexOf("]")===e.length-1;f&&(u.push(o),e=e.replace(/\[/g,"")),d&&(c.push(o),e=e.replace(/\]/g,""));var p=t.utilities.getButtonClass(e),h=t.utilities.getButtonDisplayName(e,t.options.display,t.options.mergeDisplay),v=t.options.useButtonTag?"button":"div",y=document.createElement(v);y.className+="hg-button ".concat(p),(l=y.classList).add.apply(l,E(t.getButtonThemeClasses(e))),t.setDOMButtonAttributes(e,function(t,e){y.setAttribute(t,e)}),t.activeButtonClass="hg-activeButton",!t.utilities.pointerEventsSupported()||r||i?r?(y.ontouchstart=function(n){t.handleButtonClicked(e,n),t.handleButtonMouseDown(e,n)},y.ontouchend=function(n){t.handleButtonMouseUp(e,n)},y.ontouchcancel=function(n){t.handleButtonMouseUp(e,n)}):(y.onclick=function(n){t.setMouseHold(!1),"function"!=typeof t.options.onKeyReleased&&t.handleButtonClicked(e,n)},y.onmousedown=function(n){"function"!=typeof t.options.onKeyReleased||t.isMouseHold||t.handleButtonClicked(e,n),t.handleButtonMouseDown(e,n)},y.onmouseup=function(n){t.handleButtonMouseUp(e,n)}):(y.onpointerdown=function(n){t.handleButtonClicked(e,n),t.handleButtonMouseDown(e,n)},y.onpointerup=function(n){t.handleButtonMouseUp(e,n)},y.onpointercancel=function(n){t.handleButtonMouseUp(e,n)}),y.setAttribute("data-skBtn",e);var g="".concat(t.options.layoutName,"-r").concat(n,"b").concat(o);y.setAttribute("data-skBtnUID",g);var m=document.createElement("span");m.innerHTML=h,y.appendChild(m),t.buttonElements[e]||(t.buttonElements[e]=[]),t.buttonElements[e].push(y),s.appendChild(y)}),s=t.parseRowDOMContainers(s,n,u,c),t.keyboardRowsDOM.appendChild(s)}),this.keyboardDOM.appendChild(this.keyboardRowsDOM),this.onRender(),this.initialized||(this.initialized=!0,!this.utilities.pointerEventsSupported()||r||i?r?(document.ontouchend=function(e){return t.handleButtonMouseUp(void 0,e)},document.ontouchcancel=function(e){return t.handleButtonMouseUp(void 0,e)},this.keyboardDOM.ontouchstart=function(e){return t.handleKeyboardContainerMouseDown(e)}):r||(document.onmouseup=function(e){return t.handleButtonMouseUp(void 0,e)},this.keyboardDOM.onmousedown=function(e){return t.handleKeyboardContainerMouseDown(e)}):(document.onpointerup=function(e){return t.handleButtonMouseUp(void 0,e)},this.keyboardDOM.onpointerdown=function(e){return t.handleKeyboardContainerMouseDown(e)}),this.onInit())}}],n&&I(e.prototype,n),r&&I(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}(),M=A,T=A}(),r}()});"use strict";var Lenze;(function(Lenze){var Models;(function(Models){let StrokeLineCapEnum;(function(StrokeLineCapEnum){StrokeLineCapEnum["Butt"]="butt";StrokeLineCapEnum["Round"]="round";StrokeLineCapEnum["Square"]="square"})(StrokeLineCapEnum=Models.StrokeLineCapEnum||(Models.StrokeLineCapEnum={}))})(Models=Lenze.Models||(Lenze.Models={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var Models;(function(Models){let StrokeLineJoinEnum;(function(StrokeLineJoinEnum){StrokeLineJoinEnum["Arcs"]="arcs";StrokeLineJoinEnum["Bevel"]="bevel";StrokeLineJoinEnum["Miter"]="miter";StrokeLineJoinEnum["MiterClip"]="miter-clip";StrokeLineJoinEnum["Round"]="round"})(StrokeLineJoinEnum=Models.StrokeLineJoinEnum||(Models.StrokeLineJoinEnum={}))})(Models=Lenze.Models||(Lenze.Models={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var Models;(function(Models){let StrokeStyleEnum;(function(StrokeStyleEnum){StrokeStyleEnum["Solid"]="solid";StrokeStyleEnum["Dashed"]="dashed"})(StrokeStyleEnum=Models.StrokeStyleEnum||(Models.StrokeStyleEnum={}))})(Models=Lenze.Models||(Lenze.Models={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var Models;(function(Models){let XYCurveEnum;(function(XYCurveEnum){XYCurveEnum["Basis"]="basis";XYCurveEnum["BasisClosed"]="basisClosed";XYCurveEnum["BasisOpen"]="basisOpen";XYCurveEnum["Bundle"]="bundle";XYCurveEnum["Cardinal"]="cardinal";XYCurveEnum["CardinalClosed"]="cardinalClosed";XYCurveEnum["CardinalOpen"]="cardinalOpen";XYCurveEnum["CatmullRom"]="catmullRom";XYCurveEnum["CatmullRomClosed"]="catmullRomClosed";XYCurveEnum["CatmullRomOpen"]="catmullRomOpen";XYCurveEnum["Linear"]="linear";XYCurveEnum["LinearClosed"]="linearClosed";XYCurveEnum["MonotoneX"]="monotoneX";XYCurveEnum["MonotoneY"]="monotoneY";XYCurveEnum["Natural"]="natural";XYCurveEnum["Step"]="step";XYCurveEnum["StepAfter"]="stepAfter";XYCurveEnum["StepBefore"]="stepBefore"})(XYCurveEnum=Models.XYCurveEnum||(Models.XYCurveEnum={}))})(Models=Lenze.Models||(Lenze.Models={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var Models;(function(Models){let KeyboardTypeEnum;(function(KeyboardTypeEnum){KeyboardTypeEnum[KeyboardTypeEnum["Alphabetical"]=0]="Alphabetical";KeyboardTypeEnum[KeyboardTypeEnum["Numeric"]=1]="Numeric"})(KeyboardTypeEnum=Models.KeyboardTypeEnum||(Models.KeyboardTypeEnum={}))})(Models=Lenze.Models||(Lenze.Models={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var Models;(function(Models){let ViewBoxStretchEnum;(function(ViewBoxStretchEnum){ViewBoxStretchEnum["None"]="None";ViewBoxStretchEnum["Uniform"]="Uniform";ViewBoxStretchEnum["UniformToFill"]="UniformToFill";ViewBoxStretchEnum["Fill"]="Fill"})(ViewBoxStretchEnum=Models.ViewBoxStretchEnum||(Models.ViewBoxStretchEnum={}))})(Models=Lenze.Models||(Lenze.Models={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var Models;(function(Models){let LicenseFieldNameEnum;(function(LicenseFieldNameEnum){LicenseFieldNameEnum["totalApplicationCredit"]="TAC";LicenseFieldNameEnum["components"]="C";LicenseFieldNameEnum["budgets"]="B";LicenseFieldNameEnum["fastToolboxInfo"]="FTBI";LicenseFieldNameEnum["totalAvailable"]="TA";LicenseFieldNameEnum["totalActiveNeeded"]="TAN";LicenseFieldNameEnum["totalMaxNeeded"]="TMN";LicenseFieldNameEnum["totalWorstCaseNeeded"]="TWCN";LicenseFieldNameEnum["totalConfigured"]="TC";LicenseFieldNameEnum["configMode"]="CM";LicenseFieldNameEnum["name"]="N";LicenseFieldNameEnum["instancePath"]="IP";LicenseFieldNameEnum["instanceID"]="IID";LicenseFieldNameEnum["lenzeLicenseClass"]="LLC";LicenseFieldNameEnum["activated"]="A";LicenseFieldNameEnum["activationTime"]="AT";LicenseFieldNameEnum["budgetName"]="BN";LicenseFieldNameEnum["applicationCredit"]="AC";LicenseFieldNameEnum["assigned"]="A";LicenseFieldNameEnum["activeNeeded"]="AN";LicenseFieldNameEnum["maxNeeded"]="MN";LicenseFieldNameEnum["worstCaseNeeded"]="WCN";LicenseFieldNameEnum["borrowed"]="B"})(LicenseFieldNameEnum=Models.LicenseFieldNameEnum||(Models.LicenseFieldNameEnum={}))})(Models=Lenze.Models||(Lenze.Models={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var Models;(function(Models){let LogbookFieldNameEnum;(function(LogbookFieldNameEnum){LogbookFieldNameEnum["time"]="T";LogbookFieldNameEnum["number"]="NR";LogbookFieldNameEnum["counter"]="C";LogbookFieldNameEnum["severity"]="S";LogbookFieldNameEnum["eventId"]="E";LogbookFieldNameEnum["instanceId"]="ID";LogbookFieldNameEnum["errorText"]="ET";LogbookFieldNameEnum["layer"]="L";LogbookFieldNameEnum["targetGroup"]="TG";LogbookFieldNameEnum["priority"]="P"})(LogbookFieldNameEnum=Models.LogbookFieldNameEnum||(Models.LogbookFieldNameEnum={}))})(Models=Lenze.Models||(Lenze.Models={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var Models;(function(Models){let LogbookFilterEnum;(function(LogbookFilterEnum){LogbookFilterEnum[LogbookFilterEnum["severity"]=0]="severity";LogbookFilterEnum[LogbookFilterEnum["layer"]=1]="layer";LogbookFilterEnum[LogbookFilterEnum["componentName"]=2]="componentName";LogbookFilterEnum[LogbookFilterEnum["componentType"]=3]="componentType";LogbookFilterEnum[LogbookFilterEnum["targetGroup"]=4]="targetGroup"})(LogbookFilterEnum=Models.LogbookFilterEnum||(Models.LogbookFilterEnum={}))})(Models=Lenze.Models||(Lenze.Models={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var Models;(function(Models){let AlarmIconsEnum;(function(AlarmIconsEnum){AlarmIconsEnum["errorParent"]="alert_active";AlarmIconsEnum["errorChild"]="alert_inactive";AlarmIconsEnum["warningParent"]="message_active";AlarmIconsEnum["warningChild"]="message_inactive";AlarmIconsEnum["infoParent"]="hint_active";AlarmIconsEnum["infoChild"]="hint_inactive"})(AlarmIconsEnum=Models.AlarmIconsEnum||(Models.AlarmIconsEnum={}))})(Models=Lenze.Models||(Lenze.Models={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var Models;(function(Models){let ApplicationViewFieldNameEnum;(function(ApplicationViewFieldNameEnum){ApplicationViewFieldNameEnum["name"]="N";ApplicationViewFieldNameEnum["instanceID"]="IID";ApplicationViewFieldNameEnum["components"]="C"})(ApplicationViewFieldNameEnum=Models.ApplicationViewFieldNameEnum||(Models.ApplicationViewFieldNameEnum={}))})(Models=Lenze.Models||(Lenze.Models={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var Models;(function(Models){let ApplicationViewOldFieldNameEnum;(function(ApplicationViewOldFieldNameEnum){ApplicationViewOldFieldNameEnum["name"]="Name";ApplicationViewOldFieldNameEnum["instanceID"]="InstanceID";ApplicationViewOldFieldNameEnum["components"]="Component"})(ApplicationViewOldFieldNameEnum=Models.ApplicationViewOldFieldNameEnum||(Models.ApplicationViewOldFieldNameEnum={}))})(Models=Lenze.Models||(Lenze.Models={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var Models;(function(Models){let ComponentElementFieldNameEnum;(function(ComponentElementFieldNameEnum){ComponentElementFieldNameEnum["name"]="N";ComponentElementFieldNameEnum["instancePath"]="IP";ComponentElementFieldNameEnum["componentType"]="CT";ComponentElementFieldNameEnum["componentSubType"]="CST";ComponentElementFieldNameEnum["layer"]="L";ComponentElementFieldNameEnum["instanceID"]="IID";ComponentElementFieldNameEnum["active"]="A";ComponentElementFieldNameEnum["registrationTime"]="RT";ComponentElementFieldNameEnum["parentProcessPID"]="PPID"})(ComponentElementFieldNameEnum=Models.ComponentElementFieldNameEnum||(Models.ComponentElementFieldNameEnum={}))})(Models=Lenze.Models||(Lenze.Models={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var Models;(function(Models){let ComponentElementOldFieldNameEnum;(function(ComponentElementOldFieldNameEnum){ComponentElementOldFieldNameEnum["name"]="Name";ComponentElementOldFieldNameEnum["instancePath"]="InstancePath";ComponentElementOldFieldNameEnum["componentType"]="ComponentType";ComponentElementOldFieldNameEnum["componentSubType"]="ComponentSubtype";ComponentElementOldFieldNameEnum["layer"]="Layer";ComponentElementOldFieldNameEnum["instanceID"]="InstanceID";ComponentElementOldFieldNameEnum["active"]="Active";ComponentElementOldFieldNameEnum["registrationTime"]="RegistrationTime";ComponentElementOldFieldNameEnum["parentProcessPID"]="ParentProcessPID"})(ComponentElementOldFieldNameEnum=Models.ComponentElementOldFieldNameEnum||(Models.ComponentElementOldFieldNameEnum={}))})(Models=Lenze.Models||(Lenze.Models={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var Models;(function(Models){let ModuleFieldNameEnum;(function(ModuleFieldNameEnum){ModuleFieldNameEnum["components"]="C";ModuleFieldNameEnum["applicationView"]="AV";ModuleFieldNameEnum["communicationView"]="CV"})(ModuleFieldNameEnum=Models.ModuleFieldNameEnum||(Models.ModuleFieldNameEnum={}))})(Models=Lenze.Models||(Lenze.Models={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var Models;(function(Models){let FunctionTreeValueType;(function(FunctionTreeValueType){FunctionTreeValueType[FunctionTreeValueType["component"]=0]="component";FunctionTreeValueType[FunctionTreeValueType["asset"]=1]="asset";FunctionTreeValueType[FunctionTreeValueType["currentAlarms"]=2]="currentAlarms";FunctionTreeValueType[FunctionTreeValueType["logbook"]=3]="logbook";FunctionTreeValueType[FunctionTreeValueType["license"]=4]="license"})(FunctionTreeValueType=Models.FunctionTreeValueType||(Models.FunctionTreeValueType={}))})(Models=Lenze.Models||(Lenze.Models={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var Models;(function(Models){let LayerEnum;(function(LayerEnum){LayerEnum[LayerEnum["BaseSettings"]=4]="BaseSettings";LayerEnum[LayerEnum["Communication"]=5]="Communication";LayerEnum[LayerEnum["Kinematics"]=6]="Kinematics";LayerEnum[LayerEnum["Motion"]=7]="Motion";LayerEnum[LayerEnum["TechApplication"]=8]="TechApplication";LayerEnum[LayerEnum["ProcessControl"]=9]="ProcessControl"})(LayerEnum=Models.LayerEnum||(Models.LayerEnum={}))})(Models=Lenze.Models||(Lenze.Models={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var Models;(function(Models){let OldModuleFieldNameEnum;(function(OldModuleFieldNameEnum){OldModuleFieldNameEnum["components"]="Components";OldModuleFieldNameEnum["applicationView"]="ApplicationView";OldModuleFieldNameEnum["communicationView"]="CommunicationView"})(OldModuleFieldNameEnum=Models.OldModuleFieldNameEnum||(Models.OldModuleFieldNameEnum={}))})(Models=Lenze.Models||(Lenze.Models={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var Models;(function(Models){let SeverityEnum;(function(SeverityEnum){SeverityEnum[SeverityEnum["FaultCiA402"]=1]="FaultCiA402";SeverityEnum[SeverityEnum["Warning"]=2]="Warning";SeverityEnum[SeverityEnum["Information"]=11]="Information";SeverityEnum[SeverityEnum["WarningLock"]=13]="WarningLock";SeverityEnum[SeverityEnum["TroubleLog"]=15]="TroubleLog";SeverityEnum[SeverityEnum["ToubleCinh"]=16]="ToubleCinh";SeverityEnum[SeverityEnum["FaultLog"]=18]="FaultLog";SeverityEnum[SeverityEnum["FaultQspAppl"]=19]="FaultQspAppl";SeverityEnum[SeverityEnum["FaultQsp"]=20]="FaultQsp";SeverityEnum[SeverityEnum["FaultQspCinh"]=21]="FaultQspCinh";SeverityEnum[SeverityEnum["FaultCinh"]=23]="FaultCinh";SeverityEnum[SeverityEnum["Fault"]=30]="Fault"})(SeverityEnum=Models.SeverityEnum||(Models.SeverityEnum={}))})(Models=Lenze.Models||(Lenze.Models={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var Models;(function(Models){let TargetGroupEnum;(function(TargetGroupEnum){TargetGroupEnum[TargetGroupEnum["Operator"]=1]="Operator";TargetGroupEnum[TargetGroupEnum["Setter"]=2]="Setter";TargetGroupEnum[TargetGroupEnum["ShiftLeader"]=3]="ShiftLeader";TargetGroupEnum[TargetGroupEnum["Maintainer"]=4]="Maintainer";TargetGroupEnum[TargetGroupEnum["Expert"]=5]="Expert"})(TargetGroupEnum=Models.TargetGroupEnum||(Models.TargetGroupEnum={}))})(Models=Lenze.Models||(Lenze.Models={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var Models;(function(Models){let TreeType;(function(TreeType){TreeType[TreeType["componentTree"]=0]="componentTree";TreeType[TreeType["communicationTree"]=1]="communicationTree";TreeType[TreeType["assetTree"]=2]="assetTree"})(TreeType=Models.TreeType||(Models.TreeType={}))})(Models=Lenze.Models||(Lenze.Models={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var Models;(function(Models){let TypeToGlyphEnum;(function(TypeToGlyphEnum){TypeToGlyphEnum["Default"]="&#xE077;";TypeToGlyphEnum["T0"]="&#xE077;";TypeToGlyphEnum["MachineAssetManager"]="&#xE187;";TypeToGlyphEnum["T1801"]="&#xE16E;";TypeToGlyphEnum["T1601"]="&#xE16D;";TypeToGlyphEnum["T1501"]="&#xE16B;";TypeToGlyphEnum["T1201"]="&#xE176;";TypeToGlyphEnum["T1101"]="&#xE0DE;";TypeToGlyphEnum["T603"]="&#xE093;";TypeToGlyphEnum["T602"]="&#xE099;";TypeToGlyphEnum["T601"]="&#xE09A;";TypeToGlyphEnum["T552"]="&#xE09F;";TypeToGlyphEnum["T551"]="&#xE0A0;";TypeToGlyphEnum["T506"]="";TypeToGlyphEnum["T505"]="";TypeToGlyphEnum["T504"]="&#xE0A2;";TypeToGlyphEnum["T503"]="&#xE0A5;";TypeToGlyphEnum["T501"]="&#xE0A6;";TypeToGlyphEnum["T500"]="&#xF000;";TypeToGlyphEnum["T405"]="&#xE0A7;";TypeToGlyphEnum["T404"]="&#xE090;";TypeToGlyphEnum["T403"]="&#xE097;";TypeToGlyphEnum["T402"]="&#xE094;";TypeToGlyphEnum["T401"]="&#xE095;";TypeToGlyphEnum["T302"]="&#xE098;";TypeToGlyphEnum["T301"]="&#xE077;";TypeToGlyphEnum["T209"]="";TypeToGlyphEnum["T208"]="&#xE077;";TypeToGlyphEnum["T207"]="";TypeToGlyphEnum["T206"]="&#xF001;";TypeToGlyphEnum["T205"]="&#xE09E;";TypeToGlyphEnum["T204"]="&#xE0A3;";TypeToGlyphEnum["T203"]="&#xE0A4;";TypeToGlyphEnum["T202"]="&#xE0A3;";TypeToGlyphEnum["T201"]="&#xE0A4;";TypeToGlyphEnum["T105"]="&#xE0E1;";TypeToGlyphEnum["T104"]="&#xE092;";TypeToGlyphEnum["T103"]="&#xE092;";TypeToGlyphEnum["T102"]="&#xE091;";TypeToGlyphEnum["T101"]="&#xE09C;"})(TypeToGlyphEnum=Models.TypeToGlyphEnum||(Models.TypeToGlyphEnum={}))})(Models=Lenze.Models||(Lenze.Models={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var Models;(function(Models){let CertificateStateEnum;(function(CertificateStateEnum){CertificateStateEnum["None"]="None";CertificateStateEnum["Trusted"]="Trusted";CertificateStateEnum["InQuarantine"]="InQuarantine"})(CertificateStateEnum=Models.CertificateStateEnum||(Models.CertificateStateEnum={}));let CertificateValidityStateEnum;(function(CertificateValidityStateEnum){CertificateValidityStateEnum["Unknown"]="Unknown";CertificateValidityStateEnum["Expired"]="Expired";CertificateValidityStateEnum["ExpiresSoon"]="ExpiresSoon";CertificateValidityStateEnum["Valid"]="Valid";CertificateValidityStateEnum["ValidInFuture"]="ValidInFuture"})(CertificateValidityStateEnum=Models.CertificateValidityStateEnum||(Models.CertificateValidityStateEnum={}))})(Models=Lenze.Models||(Lenze.Models={}))})(Lenze||(Lenze={}));"use strict";"use strict";"use strict";"use strict";var Lenze;(function(Lenze){var Models;(function(Models){class ConfirmationInput{get variable(){return this._variable}get variableName(){var _a,_b;return(_b=(_a=this._variable)===null||_a===void 0?void 0:_a.Name)!==null&&_b!==void 0?_b:""}get element(){return this._element}get control(){return this._element.winControl}get isValid(){return this._isValid}get isEdited(){return this._isEdited}constructor(variableService){this._variable=null;this._isValid=false;this._isEdited=false;this._variableService=variableService;this._variableValueChangedHandler=this._onVariableValueChangedAsync.bind(this);this._inputValueChangedHandler=this._onInputValueChangedAsync.bind(this);this._eventTarget=new EventTarget}getValue(){this._validateIfValid("getValue");return this.control.value}async clearValueAsync(){this._validateIfValid("clearValueAsync");this._isEdited=false;await this._writeValueToInputAsync(true)}async initAsync(element){try{if(element==null||element.winControl==null)throw new Error(`"element" cannot be empty and must be a control.`);const variableName=element.winControl.variableName;if(VisiWin.isNullOrEmpty(variableName))throw new Error(`"variableName" cannot be empty.`);this._variable=this._variableService.GetVariable(variableName);if(this._variable==null)throw new Error(`"variableName" resulted in an empty variable.`);this._element=element;this.control.variableName="";this._isValid=true}catch(error){throw error}}async attachAsync(){this._validateIfValid("attachAsync");const variable=this.variable;try{const attachResult=await variable.AttachAsync();if(!attachResult||!variable.IsValid||!variable.IsAttached)throw new Error(`Unable to attach variable '${this.variableName}'. The input value will not be updated when the variable value has changed and the variable value will not be updated when triggered.`);variable.Change.add(this._variableValueChangedHandler);await this._writeValueToInputAsync(false);this.control.addEventListener("notifyPropertyChanged",this._inputValueChangedHandler)}catch(error){this._isValid=false;throw error}}async detachAsync(){this._validateIfValid("detachAsync");const variable=this.variable;this.control.removeEventListener("notifyPropertyChanged",this._inputValueChangedHandler);variable.Change.remove(this._variableValueChangedHandler);variable.Detach()}addEventListener(type,listener,options){this._eventTarget.addEventListener(type,listener,options)}removeEventListener(type,callback,options){this._eventTarget.removeEventListener(type,callback,options)}async _onVariableValueChangedAsync(){await this._writeValueToInputAsync(true)}async _onInputValueChangedAsync(args){if(this._isEdited)return;if(args.detail.changeType==="property"&&args.detail.changeName==="value"||args.detail.changeType==="state"&&args.detail.changeName==="checked"){this._validateIfValid("_onInputValueChangedAsync");const variable=this.variable;this._isEdited=this.control.value!==variable.Value}}async _writeValueToInputAsync(raiseEvent){if(this._isEdited)return;this._validateIfValid("_writeValueToInputAsync");const variable=this.variable;if(this.control.value===variable.Value)return;this.control.value=variable.Value;if(raiseEvent)this._dispatchEvent(ConfirmationInput.valueChangedEventName,{value:variable.Value})}_dispatchEvent(eventName,eventDetails){this._eventTarget.dispatchEvent(new CustomEvent(eventName,{detail:eventDetails}))}_validateIfValid(functionName){if(!this._isValid)throw new Error(`"${functionName}" called when the input is not valid.`)}}ConfirmationInput.valueChangedEventName="onValueChanged";Models.ConfirmationInput=ConfirmationInput})(Models=Lenze.Models||(Lenze.Models={}))})(Lenze||(Lenze={}));"use strict";"use strict";"use strict";"use strict";"use strict";"use strict";var Lenze;(function(Lenze){var Models;(function(Models){class ListBodyItem{get text1(){return this._text1}set text1(value){this._text1=value}get text2(){return this._text2}set text2(value){this._text2=value}get text2DetailsAvailable(){return this._text2DetailsAvailable}set text2DetailsAvailable(value){this._text2DetailsAvailable=value}get text2DetailsHeader(){return this._text2DetailsHeader}set text2DetailsHeader(value){this._text2DetailsHeader=value}get text2DetailsBody(){return this._text2DetailsBody}set text2DetailsBody(value){this._text2DetailsBody=value}get text3(){return this._text3}set text3(value){this._text3=value}constructor(params){var _a,_b,_c,_d,_e,_f;this._text1=(_a=params===null||params===void 0?void 0:params.text1)!==null&&_a!==void 0?_a:new Models.ListText;this._text2=(_b=params===null||params===void 0?void 0:params.text2)!==null&&_b!==void 0?_b:new Models.ListText;this._text3=(_c=params===null||params===void 0?void 0:params.text3)!==null&&_c!==void 0?_c:new Models.ListText;this._text2DetailsAvailable=(_d=params===null||params===void 0?void 0:params.text2DetailsAvailable)!==null&&_d!==void 0?_d:false;this._text2DetailsHeader=(_e=params===null||params===void 0?void 0:params.text2DetailsHeader)!==null&&_e!==void 0?_e:new Models.ListText;this._text2DetailsBody=(_f=params===null||params===void 0?void 0:params.text2DetailsBody)!==null&&_f!==void 0?_f:new Models.ListText}}Models.ListBodyItem=ListBodyItem})(Models=Lenze.Models||(Lenze.Models={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var Models;(function(Models){class ListHeader{get text1(){return this._text1}get text2(){return this._text2}get text3(){return this._text3}get symbol(){return this._symbol}get symbolIconFont(){return this._symbolIconFont}get contentSymbol(){return this._contentSymbol}get contentSymbolIconFont(){return this._contentSymbolIconFont}constructor(params){var _a,_b,_c,_d,_e,_f,_g;this._text1=(_a=params===null||params===void 0?void 0:params.text1)!==null&&_a!==void 0?_a:new Models.ListText;this._text2=(_b=params===null||params===void 0?void 0:params.text2)!==null&&_b!==void 0?_b:new Models.ListText;this._text3=(_c=params===null||params===void 0?void 0:params.text3)!==null&&_c!==void 0?_c:new Models.ListText;this._symbol=(_d=params===null||params===void 0?void 0:params.symbol)!==null&&_d!==void 0?_d:"";this._symbolIconFont=(_e=params===null||params===void 0?void 0:params.symbolIconFont)!==null&&_e!==void 0?_e:"material-icons";this._contentSymbol=(_f=params===null||params===void 0?void 0:params.contentSymbol)!==null&&_f!==void 0?_f:"";this._contentSymbolIconFont=(_g=params===null||params===void 0?void 0:params.contentSymbolIconFont)!==null&&_g!==void 0?_g:"material-icons"}}Models.ListHeader=ListHeader})(Models=Lenze.Models||(Lenze.Models={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var Models;(function(Models){class ListItem{get header(){return this._header}get bodyItems(){return this._bodyItems}constructor(params){var _a,_b;this._header=(_a=params===null||params===void 0?void 0:params.header)!==null&&_a!==void 0?_a:new Models.ListHeader;this._bodyItems=(_b=params===null||params===void 0?void 0:params.bodyItems)!==null&&_b!==void 0?_b:[]}}Models.ListItem=ListItem})(Models=Lenze.Models||(Lenze.Models={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var Models;(function(Models){class ListText{get text(){return this._text}set text(value){this._text=value}get isLocalizable(){return this._isLocalizable}set isLocalizable(value){this._isLocalizable=value}get fontWeight(){return this._fontWeight}set fontWeight(value){this._fontWeight=value}get textList(){return this._textList}set textList(value){this._textList=value}get suffix(){return this._suffix}set suffix(value){this._suffix=value}get designTimeText(){return this._designTimeText}set designTimeText(value){this._designTimeText=value}constructor(params){var _a,_b,_c,_d,_e,_f;this._text=(_a=params===null||params===void 0?void 0:params.text)!==null&&_a!==void 0?_a:"";this._isLocalizable=(_b=params===null||params===void 0?void 0:params.isLocalizable)!==null&&_b!==void 0?_b:false;this._fontWeight=(_c=params===null||params===void 0?void 0:params.fontWeight)!==null&&_c!==void 0?_c:"normal";this._textList=(_d=params===null||params===void 0?void 0:params.textList)!==null&&_d!==void 0?_d:"";this._suffix=(_e=params===null||params===void 0?void 0:params.suffix)!==null&&_e!==void 0?_e:"";this._designTimeText=(_f=params===null||params===void 0?void 0:params.designTimeText)!==null&&_f!==void 0?_f:"Text"}}Models.ListText=ListText})(Models=Lenze.Models||(Lenze.Models={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var Models;(function(Models){class MachineDrawingItem{get isActive(){return this._isActive}get x(){return this._x}get y(){return this._y}get height(){return this._height}get width(){return this._width}get layer(){return this._layer}get backgroundColor(){return this._backgroundColor}get foregroundColor(){return this._foregroundColor}get borderColor(){return this._borderColor}get text(){return this._text}constructor(){}init(data){const dataObject=JSON.parse(data);try{this._isActive=VisiWin.isBoolean(dataObject.A)?dataObject.A:dataObject.A.toLowerCase()==="true";if(!this._isActive)return;this._x=Number.parseFloat(dataObject.X);this._y=Number.parseFloat(dataObject.Y);this._height=Number.parseFloat(dataObject.H);this._width=Number.parseFloat(dataObject.W);this._layer=Number.parseInt(dataObject.L);this._backgroundColor=dataObject.BA;this._foregroundColor=dataObject.F;this._borderColor=dataObject.BO;this._text=dataObject.TE}catch(error){console.error("Failed to parse MachineDrawing value: ",error)}}static fromJS(data){const result=new MachineDrawingItem;result.init(data);return result}}Models.MachineDrawingItem=MachineDrawingItem})(Models=Lenze.Models||(Lenze.Models={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var Models;(function(Models){class ControlInfo{constructor(controlType,options=null,classNames=[]){this.controlType=controlType;this.options=options;this.classNames=classNames}}Models.ControlInfo=ControlInfo})(Models=Lenze.Models||(Lenze.Models={}))})(Lenze||(Lenze={}));"use strict";"use strict";"use strict";var Lenze;(function(Lenze){var Models;(function(Models){class ApplicationCredit{get assigned(){return this._assigned}get activeNeeded(){return this._activeNeeded}get maxNeeded(){return this._maxNeeded}get worstCaseNeeded(){return this._worstCaseNeeded}get borrowed(){return this._borrowed}constructor(){}init(data){this._assigned=data[Models.LicenseFieldNameEnum[Lenze.Strings.nameof("assigned")]];this._activeNeeded=data[Models.LicenseFieldNameEnum[Lenze.Strings.nameof("activeNeeded")]];this._maxNeeded=data[Models.LicenseFieldNameEnum[Lenze.Strings.nameof("maxNeeded")]];this._worstCaseNeeded=data[Models.LicenseFieldNameEnum[Lenze.Strings.nameof("worstCaseNeeded")]];this._borrowed=data[Models.LicenseFieldNameEnum[Lenze.Strings.nameof("borrowed")]]}static fromJS(data){const result=new ApplicationCredit;result.init(data);return result}}Models.ApplicationCredit=ApplicationCredit})(Models=Lenze.Models||(Lenze.Models={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var Models;(function(Models){class Budget{get budgetName(){return this._budgetName}get applicationCredit(){return this._applicationCredit}constructor(){}init(data){this._budgetName=data[Models.LicenseFieldNameEnum[Lenze.Strings.nameof("budgetName")]];this._applicationCredit=Models.ApplicationCredit.fromJS(data[Models.LicenseFieldNameEnum[Lenze.Strings.nameof("applicationCredit")]])}static fromJS(data){const result=new Budget;result.init(data);return result}}Models.Budget=Budget})(Models=Lenze.Models||(Lenze.Models={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var Models;(function(Models){class LicenseBodyItem{get componentType(){return this._componentType}get componentSubType(){return this._subComponentType}get componentNames(){return this._componentNames}get totalComponents(){var _a,_b;return(_b=(_a=this._componentNames)===null||_a===void 0?void 0:_a.length)!==null&&_b!==void 0?_b:0}get totalCredits(){return this._totalCredits}set totalCredits(value){this._totalCredits=value}constructor(componentType,subComponentType,componentNames,totalCredits){this._componentType=componentType;this._subComponentType=subComponentType;this._componentNames=componentNames;this._totalCredits=totalCredits}}Models.LicenseBodyItem=LicenseBodyItem})(Models=Lenze.Models||(Lenze.Models={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var Models;(function(Models){class LicenseComponent{get name(){return this._name}get instancePath(){return this._instancePath}get instanceID(){return this._instanceID}get lenzeLicenseClass(){return this._lenzeLicenseClass}get activated(){return this._activated}get activationTime(){return this._activationTime}get budgetName(){return this._budgetName}get applicationCredit(){return this._applicationCredit}constructor(){}init(data){this._name=data[Models.LicenseFieldNameEnum[Lenze.Strings.nameof("name")]];this._instancePath=data[Models.LicenseFieldNameEnum[Lenze.Strings.nameof("instancePath")]];this._instanceID=data[Models.LicenseFieldNameEnum[Lenze.Strings.nameof("instanceID")]];this._lenzeLicenseClass=data[Models.LicenseFieldNameEnum[Lenze.Strings.nameof("lenzeLicenseClass")]];this._activated=data[Models.LicenseFieldNameEnum[Lenze.Strings.nameof("activated")]];this._activationTime=new Date(data[Models.LicenseFieldNameEnum[Lenze.Strings.nameof("activationTime")]].toString());this._budgetName=data[Models.LicenseFieldNameEnum[Lenze.Strings.nameof("budgetName")]];this._applicationCredit=Models.ApplicationCredit.fromJS(data[Models.LicenseFieldNameEnum[Lenze.Strings.nameof("applicationCredit")]])}static fromJS(data){const result=new LicenseComponent;result.init(data);return result}}Models.LicenseComponent=LicenseComponent})(Models=Lenze.Models||(Lenze.Models={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var Models;(function(Models){class LicenseResponse{get totalApplicationCredit(){return this._totalApplicationCredit}get fastToolboxInfo(){return this._fastToolboxInfo}get components(){return this._components}get budgets(){return this._budgets}constructor(){}init(data){var _a,_b,_c,_d;this._totalApplicationCredit=Models.TotalApplicationCredit.fromJS(data[Models.LicenseFieldNameEnum[Lenze.Strings.nameof("totalApplicationCredit")]]);this._fastToolboxInfo=Models.FastToolboxInfo.fromJS(data[Models.LicenseFieldNameEnum[Lenze.Strings.nameof("fastToolboxInfo")]]);this._components=(_b=(_a=data[Models.LicenseFieldNameEnum[Lenze.Strings.nameof("components")]])===null||_a===void 0?void 0:_a.map(value=>Models.LicenseComponent.fromJS(value)))!==null&&_b!==void 0?_b:[];this._budgets=(_d=(_c=data[Models.LicenseFieldNameEnum[Lenze.Strings.nameof("budgets")]])===null||_c===void 0?void 0:_c.map(value=>Models.Budget.fromJS(value)))!==null&&_d!==void 0?_d:[]}static fromJS(data){const result=new LicenseResponse;result.init(data);return result}}Models.LicenseResponse=LicenseResponse})(Models=Lenze.Models||(Lenze.Models={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var Models;(function(Models){class TotalApplicationCredit{get totalAvailable(){return this._totalAvailable}get totalActiveNeeded(){return this._totalActiveNeeded}get totalMaxNeeded(){return this._totalMaxNeeded}get totalWorstCaseNeeded(){return this._totalWorstCaseNeeded}get totalConfigured(){return this._totalConfigured}constructor(){}init(data){this._totalAvailable=data[Models.LicenseFieldNameEnum[Lenze.Strings.nameof("totalAvailable")]];this._totalActiveNeeded=data[Models.LicenseFieldNameEnum[Lenze.Strings.nameof("totalActiveNeeded")]];this._totalMaxNeeded=data[Models.LicenseFieldNameEnum[Lenze.Strings.nameof("totalMaxNeeded")]];this._totalWorstCaseNeeded=data[Models.LicenseFieldNameEnum[Lenze.Strings.nameof("totalWorstCaseNeeded")]];this._totalConfigured=data[Models.LicenseFieldNameEnum[Lenze.Strings.nameof("totalConfigured")]]}static fromJS(data){const result=new TotalApplicationCredit;result.init(data);return result}}Models.TotalApplicationCredit=TotalApplicationCredit;class FastToolboxInfo{get configMode(){return this._configMode}constructor(){}init(data){this._configMode=data[Models.LicenseFieldNameEnum[Lenze.Strings.nameof("configMode")]]}static fromJS(data){const result=new FastToolboxInfo;result.init(data);return result}}Models.FastToolboxInfo=FastToolboxInfo})(Models=Lenze.Models||(Lenze.Models={}))})(Lenze||(Lenze={}));"use strict";"use strict";"use strict";"use strict";"use strict";"use strict";var Lenze;(function(Lenze){var Models;(function(Models){class LogbookResponse{get time(){return this._time}get number(){return this._number}get counter(){return this._counter}get severity(){return this._severity}get eventId(){return this._eventId}get instanceId(){return this._instanceId}get errorText(){return this._errorText}get layer(){return this._layer}get targetGroup(){return this._targetGroup}get priority(){return this._priority}get componentName(){return this._componentName}set componentName(value){this._componentName=value}get componentType(){return this._componentType}set componentType(value){this._componentType=value}constructor(){}init(data){this._time=new Date(data[Models.LogbookFieldNameEnum["time"]].toString());this._number=data[Models.LogbookFieldNameEnum["number"]];this._counter=data[Models.LogbookFieldNameEnum["counter"]];this._severity=data[Models.LogbookFieldNameEnum["severity"]];this._eventId=data[Models.LogbookFieldNameEnum["eventId"]];this._instanceId=data[Models.LogbookFieldNameEnum["instanceId"]];this._errorText=data[Models.LogbookFieldNameEnum["errorText"]];this._layer=data[Models.LogbookFieldNameEnum["layer"]];this._targetGroup=data[Models.LogbookFieldNameEnum["targetGroup"]];this._priority=data[Models.LogbookFieldNameEnum["priority"]]}static fromJS(data){const result=new LogbookResponse;result.init(data);return result}}Models.LogbookResponse=LogbookResponse})(Models=Lenze.Models||(Lenze.Models={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var Models;(function(Models){class AlarmElement{get name(){return this._name}get instanceID(){return this._instanceID}get layer(){return this._layer}get textRefId(){return this._textRefId}get eventId(){return this._eventId}get eventTextRefId(){return this._eventTextRefId}get eventTimeStampLow(){return this._eventTimeStampLow}get eventTimeStampHigh(){return this._eventTimeStampHigh}get actHighestSeverity(){return this._actHighestSeverity}get cmpInfo(){return this._cmpInfo}get entries(){return this._entries}constructor(){}init(data){this._name=data.N;this._instanceID=data.IID;this._layer=data.L;this._textRefId=data.TRID;this._eventId=data.EID;this._eventTextRefId=data.ETRID;this._eventTimeStampLow=data.ETSL;this._eventTimeStampHigh=data.ETSH;this._actHighestSeverity=data.AHS;this._cmpInfo=data.CI;this._entries=[];const entries=data.E;if(entries==null||!VisiWin.isArray(data.E))return;for(let entry of entries){const alarmEntry=Models.AlarmEntry.fromJS(entry);this._entries.push(alarmEntry)}}static fromJS(data){const result=new AlarmElement;result.init(data);return result}}Models.AlarmElement=AlarmElement})(Models=Lenze.Models||(Lenze.Models={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var Models;(function(Models){class AlarmEntry{get eventId(){return this._eventId}get eventTextRefId(){return this._eventTextRefId}get eventState(){return this._eventState}get severity(){return this._severity}get targetGroup(){return this._targetGroup}get priority(){return this._priority}get control(){return this._control}constructor(){}init(data){this._eventId=data.EID;this._eventTextRefId=data.ETRID;this._eventState=data.ES;this._severity=data.S;this._targetGroup=data.TG;this._priority=data.P;this._control=data.C}static fromJS(data){const result=new AlarmEntry;result.init(data);return result}}Models.AlarmEntry=AlarmEntry})(Models=Lenze.Models||(Lenze.Models={}))})(Lenze||(Lenze={}));"use strict";"use strict";var Lenze;(function(Lenze){var Models;(function(Models){class ApplicationViewElement{get name(){return this._name}get instanceID(){return this._instanceID}get components(){return this._components}set components(value){this._components=value}constructor(){}init(data){var _a,_b;this._name=this.getFieldValue(Lenze.Strings.nameof("name"),data);this._instanceID=this.getFieldValue(Lenze.Strings.nameof("instanceID"),data);this._components=(_b=(_a=this.getFieldValue(Lenze.Strings.nameof("components"),data))===null||_a===void 0?void 0:_a.map(x=>ApplicationViewElement.fromJS(x)))!==null&&_b!==void 0?_b:null}getFieldValue(fieldName,data){const value=data[Models.ApplicationViewFieldNameEnum[fieldName]];return value!==undefined?value:data[Models.ApplicationViewOldFieldNameEnum[fieldName]]}static fromJS(data){const result=new ApplicationViewElement;result.init(data);return result}}Models.ApplicationViewElement=ApplicationViewElement})(Models=Lenze.Models||(Lenze.Models={}))})(Lenze||(Lenze={}));"use strict";"use strict";var Lenze;(function(Lenze){var Models;(function(Models){class ComponentElement{get name(){return this._name}get instancePath(){return this._instancePath}get componentType(){return this._componentType}get componentSubType(){return this._componentSubType}get layer(){return this._layer}get instanceID(){return this._instanceID}get active(){return this._active}get registrationTime(){return this._registrationTime}get parentProcessPID(){return this._parentProcessPID}constructor(){}init(data){this._name=this.getFieldValue(Lenze.Strings.nameof("name"),data);this._instancePath=this.getFieldValue(Lenze.Strings.nameof("instancePath"),data);this._componentType=this.getFieldValue(Lenze.Strings.nameof("componentType"),data);this._componentSubType=this.getFieldValue(Lenze.Strings.nameof("componentSubType"),data);this._layer=this.getFieldValue(Lenze.Strings.nameof("layer"),data);this._instanceID=this.getFieldValue(Lenze.Strings.nameof("instanceID"),data);this._active=this.getFieldValue(Lenze.Strings.nameof("active"),data);this._registrationTime=this.getFieldValue(Lenze.Strings.nameof("registrationTime"),data);this._parentProcessPID=this.getFieldValue(Lenze.Strings.nameof("parentProcessPID"),data)}getFieldValue(fieldName,data){const value=data[Models.ComponentElementFieldNameEnum[fieldName]];return value!==undefined?value:data[Models.ComponentElementOldFieldNameEnum[fieldName]]}static fromJS(data){const result=new ComponentElement;result.init(data);return result}}Models.ComponentElement=ComponentElement})(Models=Lenze.Models||(Lenze.Models={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var Models;(function(Models){class ModuleResponse{get components(){return this._components}get applicationView(){return this._applicationView}get communicationView(){return this._communicationView}constructor(){}init(data){var _a,_b;this._components=(_b=(_a=this.getFieldValue(Lenze.Strings.nameof("components"),data))===null||_a===void 0?void 0:_a.map(x=>Models.ComponentElement.fromJS(x)))!==null&&_b!==void 0?_b:[];this._applicationView=Models.ApplicationViewElement.fromJS(this.getComponentValue(Lenze.Strings.nameof("applicationView"),data));this._communicationView=Models.ApplicationViewElement.fromJS(this.getComponentValue(Lenze.Strings.nameof("communicationView"),data))}getFieldValue(fieldName,data){const value=data[Models.ModuleFieldNameEnum[fieldName]];return value!==undefined?value:data[Models.OldModuleFieldNameEnum[fieldName]]}getComponentValue(fieldName,data){const value=this.getFieldValue(fieldName,data);if(value==null)return null;const components=value[Models.ApplicationViewFieldNameEnum[Lenze.Strings.nameof("components")]];return components!==undefined?components:value[Models.ApplicationViewOldFieldNameEnum[Lenze.Strings.nameof("components")]]}static fromJS(data){const result=new ModuleResponse;result.init(data);return result}}Models.ModuleResponse=ModuleResponse})(Models=Lenze.Models||(Lenze.Models={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var Models;(function(Models){class CertificateDetails{get subjectCommonName(){return this._subjectCommonName}set subjectCommonName(value){this._subjectCommonName=value}get subjectOrganization(){return this._subjectOrganization}set subjectOrganization(value){this._subjectOrganization=value}get subjectOrganizationUnit(){return this._subjectOrganizationUnit}set subjectOrganizationUnit(value){this._subjectOrganizationUnit=value}get subjectLocality(){return this._subjectLocality}set subjectLocality(value){this._subjectLocality=value}get subjectState(){return this._subjectState}set subjectState(value){this._subjectState=value}get subjectCountry(){return this._subjectCountry}set subjectCountry(value){this._subjectCountry=value}get subjectDomainComponent(){return this._subjectDomainComponent}set subjectDomainComponent(value){this._subjectDomainComponent=value}get issuerCommonName(){return this._issuerCommonName}set issuerCommonName(value){this._issuerCommonName=value}get issuerOrganization(){return this._issuerOrganization}set issuerOrganization(value){this._issuerOrganization=value}get issuerOrganizationUnit(){return this._issuerOrganizationUnit}set issuerOrganizationUnit(value){this._issuerOrganizationUnit=value}get issuerLocality(){return this._issuerLocality}set issuerLocality(value){this._issuerLocality=value}get issuerState(){return this._issuerState}set issuerState(value){this._issuerState=value}get issuerCountry(){return this._issuerCountry}set issuerCountry(value){this._issuerCountry=value}get issuerDomainComponent(){return this._issuerDomainComponent}set issuerDomainComponent(value){this._issuerDomainComponent=value}get validFrom(){return this._validFrom}set validFrom(value){this._validFrom=value}get validTo(){return this._validTo}set validTo(value){this._validTo=value}get serialNumber(){return this._serialNumber}set serialNumber(value){this._serialNumber=value}get signatureAlgorithm(){return this._signatureAlgorithm}set signatureAlgorithm(value){this._signatureAlgorithm=value}get signatureHashAlgorithm(){return this._signatureHashAlgorithm}set signatureHashAlgorithm(value){this._signatureHashAlgorithm=value}get cipherStrength(){return this._cipherStrength}set cipherStrength(value){this._cipherStrength=value}get thumbprint(){return this._thumbprint}set thumbprint(value){this._thumbprint=value}get state(){return this._state}set state(value){this._state=value}constructor(params){var _a,_b,_c,_d,_e,_f,_g,_h,_j,_k,_l,_m,_o,_p,_q,_r,_s,_t,_u,_v,_w,_x;this._subjectCommonName=(_a=params===null||params===void 0?void 0:params.subjectCommonName)!==null&&_a!==void 0?_a:"";this._subjectOrganization=(_b=params===null||params===void 0?void 0:params.subjectOrganization)!==null&&_b!==void 0?_b:"";this._subjectOrganizationUnit=(_c=params===null||params===void 0?void 0:params.subjectOrganizationUnit)!==null&&_c!==void 0?_c:"";this._subjectLocality=(_d=params===null||params===void 0?void 0:params.subjectLocality)!==null&&_d!==void 0?_d:"";this._subjectState=(_e=params===null||params===void 0?void 0:params.subjectState)!==null&&_e!==void 0?_e:"";this._subjectCountry=(_f=params===null||params===void 0?void 0:params.subjectCountry)!==null&&_f!==void 0?_f:"";this._subjectDomainComponent=(_g=params===null||params===void 0?void 0:params.subjectDomainComponent)!==null&&_g!==void 0?_g:"";this._issuerCommonName=(_h=params===null||params===void 0?void 0:params.issuerCommonName)!==null&&_h!==void 0?_h:"";this._issuerOrganization=(_j=params===null||params===void 0?void 0:params.issuerOrganization)!==null&&_j!==void 0?_j:"";this._issuerOrganizationUnit=(_k=params===null||params===void 0?void 0:params.issuerOrganizationUnit)!==null&&_k!==void 0?_k:"";this._issuerLocality=(_l=params===null||params===void 0?void 0:params.issuerLocality)!==null&&_l!==void 0?_l:"";this._issuerState=(_m=params===null||params===void 0?void 0:params.issuerState)!==null&&_m!==void 0?_m:"";this._issuerCountry=(_o=params===null||params===void 0?void 0:params.issuerCountry)!==null&&_o!==void 0?_o:"";this._issuerDomainComponent=(_p=params===null||params===void 0?void 0:params.issuerDomainComponent)!==null&&_p!==void 0?_p:"";this._validFrom=(_q=params===null||params===void 0?void 0:params.validFrom)!==null&&_q!==void 0?_q:new Date;this._validTo=(_r=params===null||params===void 0?void 0:params.validTo)!==null&&_r!==void 0?_r:new Date;this._serialNumber=(_s=params===null||params===void 0?void 0:params.serialNumber)!==null&&_s!==void 0?_s:"";this._signatureAlgorithm=(_t=params===null||params===void 0?void 0:params.signatureAlgorithm)!==null&&_t!==void 0?_t:"";this._signatureHashAlgorithm=(_u=params===null||params===void 0?void 0:params.signatureHashAlgorithm)!==null&&_u!==void 0?_u:"";this._cipherStrength=(_v=params===null||params===void 0?void 0:params.cipherStrength)!==null&&_v!==void 0?_v:"";this._thumbprint=(_w=params===null||params===void 0?void 0:params.thumbprint)!==null&&_w!==void 0?_w:"";this._state=(_x=params===null||params===void 0?void 0:params.state)!==null&&_x!==void 0?_x:Models.CertificateStateEnum.None}}Models.CertificateDetails=CertificateDetails})(Models=Lenze.Models||(Lenze.Models={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var Models;(function(Models){class CertificateListItemBody{get details(){return this._details}get validFromDataTextForegroundColor(){return this._validFromDataTextForegroundColor}get validToDataTextForegroundColor(){return this._validToDataTextForegroundColor}constructor(params){var _a,_b,_c;this._details=(_a=params===null||params===void 0?void 0:params.details)!==null&&_a!==void 0?_a:new Models.CertificateDetails;this._validFromDataTextForegroundColor=(_b=params===null||params===void 0?void 0:params.validFromDataTextForegroundColor)!==null&&_b!==void 0?_b:"";this._validToDataTextForegroundColor=(_c=params===null||params===void 0?void 0:params.validToDataTextForegroundColor)!==null&&_c!==void 0?_c:""}}Models.CertificateListItemBody=CertificateListItemBody})(Models=Lenze.Models||(Lenze.Models={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var Models;(function(Models){class CertificateListItemHeader{get titleText(){return this._titleText}get validitySymbolVisibility(){return this._validitySymbolVisibility}get validitySymbolIconFont(){return this._validitySymbolIconFont}get validitySymbolSymbolType(){return this._validitySymbolSymbolType}get validitySymbolSymbol(){return this._validitySymbolSymbol}get validitySymbolForegroundColor(){return this._validitySymbolForegroundColor}get validityText1Visibility(){return this._validityText1Visibility}get validityText1(){return this._validityText1}get validityText2Visibility(){return this._validityText2Visibility}get validityText2(){return this._validityText2}get validityText3Visibility(){return this._validityText3Visibility}get validityText3(){return this._validityText3}constructor(params){var _a,_b,_c,_d,_e,_f,_g,_h,_j,_k,_l,_m;this._titleText=(_a=params===null||params===void 0?void 0:params.titleText)!==null&&_a!==void 0?_a:new Models.ListText;this._validitySymbolVisibility=(_b=params===null||params===void 0?void 0:params.validitySymbolVisibility)!==null&&_b!==void 0?_b:"collapse";this._validitySymbolIconFont=(_c=params===null||params===void 0?void 0:params.validitySymbolIconFont)!==null&&_c!==void 0?_c:"material-icons";this._validitySymbolSymbolType=(_d=params===null||params===void 0?void 0:params.validitySymbolSymbolType)!==null&&_d!==void 0?_d:"icon";this._validitySymbolSymbol=(_e=params===null||params===void 0?void 0:params.validitySymbolSymbol)!==null&&_e!==void 0?_e:"";this._validitySymbolForegroundColor=(_f=params===null||params===void 0?void 0:params.validitySymbolForegroundColor)!==null&&_f!==void 0?_f:"@ForegroundColor";this._validityText1Visibility=(_g=params===null||params===void 0?void 0:params.validityText1Visibility)!==null&&_g!==void 0?_g:"collapse";this._validityText1=(_h=params===null||params===void 0?void 0:params.validityText1)!==null&&_h!==void 0?_h:new Models.ListText;this._validityText2Visibility=(_j=params===null||params===void 0?void 0:params.validityText2Visibility)!==null&&_j!==void 0?_j:"collapse";this._validityText2=(_k=params===null||params===void 0?void 0:params.validityText2)!==null&&_k!==void 0?_k:new Models.ListText;this._validityText3Visibility=(_l=params===null||params===void 0?void 0:params.validityText3Visibility)!==null&&_l!==void 0?_l:"collapse";this._validityText3=(_m=params===null||params===void 0?void 0:params.validityText3)!==null&&_m!==void 0?_m:new Models.ListText}}Models.CertificateListItemHeader=CertificateListItemHeader})(Models=Lenze.Models||(Lenze.Models={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var Models;(function(Models){class CertificateListItem{get header(){return this._header}get body(){return this._body}constructor(params){var _a,_b;this._header=(_a=params===null||params===void 0?void 0:params.header)!==null&&_a!==void 0?_a:new Models.CertificateListItemHeader;this._body=(_b=params===null||params===void 0?void 0:params.body)!==null&&_b!==void 0?_b:new Models.CertificateListItemBody}}Models.CertificateListItem=CertificateListItem})(Models=Lenze.Models||(Lenze.Models={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){class Arrays{static sortDateField(value1,value2,descending,fieldName){const descendValue=Arrays.getDescendValue(descending);const date1=new Date(Lenze.Functions.getFieldValue(value1,fieldName));const date2=new Date(Lenze.Functions.getFieldValue(value2,fieldName));return date2>date1?descendValue:date1>date2?descendValue*-1:0}static sortField(value1,value2,descending,fieldName){const descendValue=Arrays.getDescendValue(descending);const value1Value=Lenze.Functions.getFieldValue(value1,fieldName);const value2Value=Lenze.Functions.getFieldValue(value2,fieldName);return value1Value>value2Value?descendValue:value2Value>value1Value?descendValue*-1:0}static getDescendValue(descending){return descending?1:-1}}Lenze.Arrays=Arrays})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var Helpers;(function(Helpers){class LicenseHelper{static SetNeededExceededStyle(available,needed,valueElement,symbolElement){const enoughAvailable=available>=needed;valueElement.winControl.fontWeight=enoughAvailable?"normal":"FW700";symbolElement.winControl.visibility=enoughAvailable?"collapse":"visible"}}Helpers.LicenseHelper=LicenseHelper})(Helpers=Lenze.Helpers||(Lenze.Helpers={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var Helpers;(function(Helpers){class LogbookHelper{constructor(languageService,mapInformationModel){this._isLocaleAvailable=false;this._languageService=languageService;this._mapInformationModel=mapInformationModel;this._isLocaleAvailable=!Lenze.Strings.isNullOrWhiteSpace(this._mapInformationModel.dateTimeLocale)}createFilterOptions(pageNumber=0,pageSize=0,severities=[],componentNames=[],componentTypes=[],layers=[],targetGroups=[],orderBy=[]){return{pageNumber:pageNumber,pageSize:pageSize,lcid:this._languageService.CurrentLCID,instanceId:"0x0",severities:severities,componentNames:componentNames,componentTypes:componentTypes,layers:layers,targetGroups:targetGroups,orderBy:orderBy.map(value=>this._toLogbookOrderBy(value))}}async resolveFieldValuesAsync(value,fieldName){var _a;const safeFieldName=fieldName.replace("_","");if(safeFieldName==="time"){const locale=this._isLocaleAvailable?this._mapInformationModel.dateTimeLocale:(_a=this._languageService.CurrentLanguage.Locale)!==null&&_a!==void 0?_a:this._mapInformationModel.dateTimeLocale;return locale.toLowerCase()==="iso8601"?this._toISOString(value.time):`${VisiWin.UI.formatDate(locale,this._mapInformationModel.formatDate,value.time)} ${VisiWin.UI.formatDate(locale,this._mapInformationModel.formatTime,value.time)}`}if(safeFieldName==="severity")return await Lenze.Texts.getTextFromValueAsync(this._languageService,this._mapInformationModel.severityLocalizableTexts,value.severity);if(safeFieldName==="layer")return await Lenze.Texts.getTextFromValueAsync(this._languageService,this._mapInformationModel.layerLocalizableTexts,value.layer);if(safeFieldName==="targetGroup")return await Lenze.Texts.getTextFromValueAsync(this._languageService,this._mapInformationModel.targetGroupLocalizableTexts,value.targetGroup);if(safeFieldName==="errorText")return!Lenze.Strings.isNullOrWhiteSpace(value.errorText)?value.errorText.replace(/\r|\n/g," ").replace(/;/g,""):this._mapInformationModel.defaultErrorText;if(safeFieldName==="componentType")return value.componentType!==-1?await Lenze.Texts.getTextFromValueAsync(this._languageService,this._mapInformationModel.componentTypeLocalizableTexts,value.componentType):"";return value[fieldName]}_toLogbookOrderBy(orderByColumn){return{field:Lenze.Models.LogbookFieldNameEnum[orderByColumn.fieldName],direction:orderByColumn.descending?1:0}}_toISOString(date){const pad=value=>value<10?"0"+value:value;return date.getFullYear()+"-"+pad(date.getMonth()+1)+"-"+pad(date.getDate())+"T"+pad(date.getHours())+":"+pad(date.getMinutes())+":"+pad(date.getSeconds())+"."+pad(date.getMilliseconds())+"Z"}}Helpers.LogbookHelper=LogbookHelper})(Helpers=Lenze.Helpers||(Lenze.Helpers={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){class Inputs{static revalidateLimits(inputElement){const varInCoreElement=inputElement._inputElement.winControl;varInCoreElement._onVariableValueChanged.call(varInCoreElement,null,null)}}Lenze.Inputs=Inputs})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){class Lists{static async setTextAsync(languageService,element,textItem){element.winControl.text=await Lists.getTextAsync(languageService,textItem);element.winControl.fontWeight=textItem.fontWeight}static async getTextAsync(languageService,textItem){if(VisiWin.Utilities.isInDesignMode())return textItem.designTimeText;if(!textItem.isLocalizable)return textItem.text+textItem.suffix;if(Lenze.Strings.isNullOrWhiteSpace(textItem.textList))return await languageService.GetTextAsync(textItem.text)+textItem.suffix;return await Lenze.Texts.getTextFromValueAsync(languageService,textItem.textList,textItem.text)+textItem.suffix}}Lenze.Lists=Lists})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){class Controls{static createControl(controlType,classNames=[],options=null){const div=document.createElement("div");div.setAttribute("data-win-control",Controls.getType(controlType));for(let className of classNames){if(!Lenze.Strings.isNullOrWhiteSpace(className))div.classList.add(className)}const control=new controlType(div,options);window.setImmediate(async()=>{await control.attach();control.initializedBase(div);control.readyBase(div)});return control}static getType(value){return value.namespace+"."+value.name}static getParentControl(targetElement,listOfControls){const elementToCheck=targetElement.parentElement;if(elementToCheck==null)return null;const dataWinControlAttribute=elementToCheck.getAttribute("data-win-control");if(dataWinControlAttribute!==null){if(dataWinControlAttribute==Lenze.Controls.getType(VisiWin.UI.App))return null;const idx=listOfControls.indexOf(dataWinControlAttribute);if(idx===-1){return Lenze.Controls.getParentControl(elementToCheck,listOfControls)}else{return listOfControls[idx]}}else{return Lenze.Controls.getParentControl(elementToCheck,listOfControls)}}}Lenze.Controls=Controls})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){class Dates{static convertLocalToUTC(date){if(date==null)throw new Error("Date parameter cannot be null");const newDate=new Date(date);newDate.setMinutes(date.getMinutes()+date.getTimezoneOffset());return newDate}static convertUTCToLocal(date){if(date==null)throw new Error("Date parameter cannot be null");const newDate=new Date(date);newDate.setMinutes(date.getMinutes()-date.getTimezoneOffset());return newDate}static getDays(time){return Math.floor(time/(3600*24))}static getHours(time){return Math.floor(time%(3600*24)/3600)}static getMinutes(time){return Math.floor(time%3600/60)}static getSeconds(time){return Math.floor(time%60)}static getDateDiffInMilliSeconds(d1,d2){return d2.getTime()-d1.getTime()}static getDateDiffInSeconds(d1,d2){let t1=d1.getTime();let t2=d2.getTime();return(t2-t1)/1e3}static getDateDiffInMinutes(d1,d2){let t1=d1.getTime();let t2=d2.getTime();return(t2-t1)/6e4}static getDateDiffInHours(d1,d2){let t1=d1.getTime();let t2=d2.getTime();return(t2-t1)/36e5}static getDateDiffInDays(d1,d2){let t1=d1.getTime();let t2=d2.getTime();return(t2-t1)/864e5}static getDateDiffInWeeks(d1,d2){let t1=d1.getTime();let t2=d2.getTime();return(t2-t1)/6048e5}static getDateDiffInMonths(d1,d2){let t1=d1.getTime();let t2=d2.getTime();return(t2-t1)/(864e5*30)}static getDateDiffInYears(d1,d2){return d2.getFullYear()-d1.getFullYear()}static dateToUtcString(d){function pad(n){return String(n).padStart(2,"0")}return`${pad(d.getUTCDate())}.${pad(d.getUTCMonth()+1)}.${d.getUTCFullYear()} ${pad(d.getUTCHours())}:${pad(d.getUTCMinutes())}:${pad(d.getUTCSeconds())}`}}Lenze.Dates=Dates})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){class Dom{static getControl(id,expectedTypes){if(id==null||id=="")return null;const domElement=document.getElementById(id.replace("#",""));if((domElement===null||domElement===void 0?void 0:domElement.winControl)==null){console.error(`Unable to retrieve control with id '${id}'. Please validate if this control exists.`);return null}const control=domElement.winControl;if(expectedTypes!=null&&(VisiWin.isArray(expectedTypes)&&!expectedTypes.includes(control.controlType)||VisiWin.isString(expectedTypes)&&control.controlType!==expectedTypes)){console.error(`Expected type for control '${id}' to be '${expectedTypes.toString()}', actual type is '${control.controlType}'.`);return null}return control}static createControl(controlType,parent,classNames=[],options=null){const control=Lenze.Controls.createControl(controlType,classNames,options);parent.appendChild(control.element);return control}}Lenze.Dom=Dom})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){class Functions{static getLargestValue(array,callbackfn){return Math.max.apply(Math,array.map(callbackfn))}static getFieldValue(obj,path,separator="."){if(obj==null)throw new Error("Object cannot be null in Lenze.Functions.getFieldValue.");const properties=Array.isArray(path)?path:path.split(separator);return String(properties.reduce((prev,curr)=>prev===null||prev===void 0?void 0:prev[curr],obj))}}Lenze.Functions=Functions})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){class Certificates{static async jsonToCertificateListAsync(jsonString){var _a;let certificateListObject=await Lenze.Strings.isJsonAsync(jsonString);if(certificateListObject["DT"]==undefined){throw new Error('Error: missing "DT" key')}let timeStamp=new Date((_a=certificateListObject["DT"])!==null&&_a!==void 0?_a:null);if(certificateListObject["CS"]==undefined){throw new Error('Error: missing "CS" key')}if(!(certificateListObject["CS"]instanceof Array)){throw new Error("Certificate list is not an array")}if(certificateListObject["CS"].length==0){let emptyList=[];return[timeStamp,emptyList]}let certificateList=[];certificateListObject["CS"].forEach(certificateJson=>{var _a,_b,_c,_d,_e,_f,_g,_h,_j,_k,_l,_m,_o,_p,_q,_r,_s,_t,_u,_v,_w,_x,_y,_z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_10,_11,_12,_13,_14,_15,_16,_17,_18;if(((_a=certificateJson.IN)===null||_a===void 0?void 0:_a.T)===undefined){return}let certificateBuffer=new Lenze.Models.CertificateDetails({subjectCommonName:(_c=(_b=certificateJson.SU)===null||_b===void 0?void 0:_b.CN)!==null&&_c!==void 0?_c:null,subjectOrganization:(_e=(_d=certificateJson.SU)===null||_d===void 0?void 0:_d.O)!==null&&_e!==void 0?_e:null,subjectOrganizationUnit:(_g=(_f=certificateJson.SU)===null||_f===void 0?void 0:_f.OU)!==null&&_g!==void 0?_g:null,subjectLocality:(_j=(_h=certificateJson.SU)===null||_h===void 0?void 0:_h.L)!==null&&_j!==void 0?_j:null,subjectState:(_l=(_k=certificateJson.SU)===null||_k===void 0?void 0:_k.S)!==null&&_l!==void 0?_l:null,subjectCountry:(_o=(_m=certificateJson.SU)===null||_m===void 0?void 0:_m.C)!==null&&_o!==void 0?_o:null,subjectDomainComponent:(_q=(_p=certificateJson.SU)===null||_p===void 0?void 0:_p.DC)!==null&&_q!==void 0?_q:null,issuerCommonName:(_s=(_r=certificateJson.I)===null||_r===void 0?void 0:_r.CN)!==null&&_s!==void 0?_s:null,issuerOrganization:(_u=(_t=certificateJson.I)===null||_t===void 0?void 0:_t.O)!==null&&_u!==void 0?_u:null,issuerOrganizationUnit:(_w=(_v=certificateJson.I)===null||_v===void 0?void 0:_v.OU)!==null&&_w!==void 0?_w:null,issuerLocality:(_y=(_x=certificateJson.I)===null||_x===void 0?void 0:_x.L)!==null&&_y!==void 0?_y:null,issuerState:(_0=(_z=certificateJson.I)===null||_z===void 0?void 0:_z.S)!==null&&_0!==void 0?_0:null,issuerCountry:(_2=(_1=certificateJson.I)===null||_1===void 0?void 0:_1.C)!==null&&_2!==void 0?_2:null,issuerDomainComponent:(_4=(_3=certificateJson.I)===null||_3===void 0?void 0:_3.DC)!==null&&_4!==void 0?_4:null,validFrom:new Date((_6=(_5=certificateJson.V)===null||_5===void 0?void 0:_5.VF)!==null&&_6!==void 0?_6:null),validTo:new Date((_8=(_7=certificateJson.V)===null||_7===void 0?void 0:_7.VT)!==null&&_8!==void 0?_8:null),serialNumber:(_10=(_9=certificateJson.IN)===null||_9===void 0?void 0:_9.SN)!==null&&_10!==void 0?_10:null,signatureAlgorithm:(_12=(_11=certificateJson.IN)===null||_11===void 0?void 0:_11.SA)!==null&&_12!==void 0?_12:null,signatureHashAlgorithm:(_14=(_13=certificateJson.IN)===null||_13===void 0?void 0:_13.SHA)!==null&&_14!==void 0?_14:null,cipherStrength:(_16=(_15=certificateJson.IN)===null||_15===void 0?void 0:_15.CS)!==null&&_16!==void 0?_16:null,thumbprint:(_18=(_17=certificateJson.IN)===null||_17===void 0?void 0:_17.T)!==null&&_18!==void 0?_18:null});if(certificateJson["ST"]==true){certificateBuffer.state=Lenze.Models.CertificateStateEnum.Trusted}else if(certificateJson["ST"]==false){certificateBuffer.state=Lenze.Models.CertificateStateEnum.InQuarantine}else{certificateBuffer.state=Lenze.Models.CertificateStateEnum.None}certificateList.push(certificateBuffer)});return[timeStamp,certificateList]}static async getCertificateValidityStateAsync(validFrom,validTo,currentDate,expiresSoonLimit){expiresSoonLimit=Math.abs(expiresSoonLimit);if(validFrom<=currentDate&&validTo>currentDate){let remainingDays=Lenze.Dates.getDateDiffInDays(currentDate,validTo);if(remainingDays<=expiresSoonLimit){return Lenze.Models.CertificateValidityStateEnum.ExpiresSoon}return Lenze.Models.CertificateValidityStateEnum.Valid}if(validFrom>currentDate){return Lenze.Models.CertificateValidityStateEnum.ValidInFuture}return Lenze.Models.CertificateValidityStateEnum.Expired}}Lenze.Certificates=Certificates})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){class Css{static getCssAlignItems(value){switch(value){case"Center":return"center";case"Start":return"flex-start";case"End":return"flex-end";case"Baseline":return"baseline";default:return"stretch"}}}Lenze.Css=Css})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){class Style{static setWidth(element,value){element.style.width=value===-1?"auto":`${value}px`}}Lenze.Style=Style})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){class Strings{static isNullOrWhiteSpace(value){return value==null||value.trim().length===0}static format(value,...args){if(this.isNullOrWhiteSpace(value)||args==null||args.length===0)return value;return value.replace(/{(\d+)}/g,function(match,number){return typeof args[number]!="undefined"?args[number]:match})}static capitalize(value){if(typeof value!=="string")return"";return value.charAt(0).toUpperCase()+value.slice(1)}static async isJsonAsync(value){if(Lenze.Strings.isNullOrWhiteSpace(value)){throw new Error("String is empty")}let jsonObject;try{jsonObject=JSON.parse(value)}catch(e){throw new Error("Invalid json")}if(Object.keys(jsonObject).length==0){throw new Error("Json has no keys")}return jsonObject}}Strings.nameof=(name=>name);Lenze.Strings=Strings})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){class Texts{static async getTextFromValueAsync(service,textList,value){const textId=`${textList}.${value}`;const text=await service.GetTextAsync(textId);return textId!==text.replace("@Application","@[ServerApplication]")?text:VisiWin.isNumber(value)?value.toString():value}}Lenze.Texts=Texts})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){class Users{static isAuthorized(userService,right){if(userService==null){console.error("Parameter userService in Lenze.Users.isAuthorized cannot be null. Result will be false.");return false}return Lenze.Strings.isNullOrWhiteSpace(right)||userService.CurrentUser!=null&&userService.CurrentUser.RightNames.includes(right)}}Lenze.Users=Users})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var Actions;(function(Actions){"use strict";class ActionBase extends VisiWin.Actions.ActionBase{_getDOMElement(id,expectedControlTypes){if(id==null||id=="")return null;const domElement=document.getElementById(id);if((domElement===null||domElement===void 0?void 0:domElement.winControl)==null){console.error(`Unable to retrieve control with id '${id}'. Please validate if this control exists`);return null}const control=domElement.winControl;if(VisiWin.isArray(expectedControlTypes)&&!expectedControlTypes.includes(control.controlType)||VisiWin.isString(expectedControlTypes)&&control.controlType!==expectedControlTypes){console.error(`Expected type for control '${id}' to be '${expectedControlTypes.toString()}', actual type is '${control.controlType}'`);return null}return control}_getType(value){return value.namespace+"."+value.controlName}}Actions.ActionBase=ActionBase})(Actions=Lenze.Actions||(Lenze.Actions={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var UI;(function(UI){"use strict";class ButtonBase extends VisiWin.UI.ButtonBase{constructor(){super(...arguments);this.cssClassPrefix="lenze"}_getDOMElement(id,expectedControlTypes){console.warn("The method _getDOMElement is still in due to backwards compatibility, however it has been moved to Lenze.Dom.getControl. Please switch to that function.");return Lenze.Dom.getControl(id,expectedControlTypes)}_createElement(controlType,parent,classNames=[]){console.warn("The method _createElement is still in due to backwards compatibility, however it has been moved to Lenze.Dom.createControl. Please switch to that function.");return Lenze.Dom.createControl(controlType,parent,classNames)}_getType(value){console.warn("The method _getType is still in due to backwards compatibility, however it has been moved to Lenze.Controls.getType. Please switch to that function.");return Lenze.Controls.getType(value)}}ButtonBase.namespace="Lenze.UI";UI.ButtonBase=ButtonBase})(UI=Lenze.UI||(Lenze.UI={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var UI;(function(UI){"use strict";class ControlBase extends VisiWin.UI.ControlBase{constructor(){super(...arguments);this.cssClassPrefix="lenze"}_getDOMElement(id,expectedControlTypes){console.warn("The method _getDOMElement is still in due to backwards compatibility, however it has been moved to Lenze.Dom.getControl. Please switch to that function.");return Lenze.Dom.getControl(id,expectedControlTypes)}_createElement(controlType,parent,classNames=[]){console.warn("The method _createElement is still in due to backwards compatibility, however it has been moved to Lenze.Dom.createControl. Please switch to that function.");return Lenze.Dom.createControl(controlType,parent,classNames)}_getType(value){console.warn("The method _getType is still in due to backwards compatibility, however it has been moved to Lenze.Controls.getType. Please switch to that function.");return Lenze.Controls.getType(value)}}ControlBase.namespace="Lenze.UI";UI.ControlBase=ControlBase})(UI=Lenze.UI||(Lenze.UI={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var UI;(function(UI){"use strict";class VariableBase extends VisiWin.UI.VariableBase{constructor(){super(...arguments);this.cssClassPrefix="lenze"}_getDOMElement(id,expectedControlTypes){console.warn("The method _getDOMElement is still in due to backwards compatibility, however it has been moved to Lenze.Dom.getControl. Please switch to that function.");return Lenze.Dom.getControl(id,expectedControlTypes)}_createElement(controlType,parent,classNames=[]){console.warn("The method _createElement is still in due to backwards compatibility, however it has been moved to Lenze.Dom.createControl. Please switch to that function.");return Lenze.Dom.createControl(controlType,parent,classNames)}_getType(value){console.warn("The method _getType is still in due to backwards compatibility, however it has been moved to Lenze.Controls.getType. Please switch to that function.");return Lenze.Controls.getType(value)}}VariableBase.namespace="Lenze.UI";UI.VariableBase=VariableBase})(UI=Lenze.UI||(Lenze.UI={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var UI;(function(UI){"use strict";class ListBase extends Lenze.UI.ControlBase{createTemplate(){this.element.innerHTML="";return this.initializeChilds()}_updateLayout(changes){}_updateColors(changes){this.setColor(Lenze.Strings.nameof("backgroundColor"));this.setColor(Lenze.Strings.nameof("foregroundColor"));this.setColor(Lenze.Strings.nameof("borderColor"))}async attach(){await super.attach();await this._renewListAsync()}async _renewListAsync(){if(!VisiWin.Utilities.isInDesignMode()&&!await this._isEnabledAsync()){this.element.innerHTML="";this.element.innerText=this._notEnabledText;return}this.element.innerHTML="";this._itemControls=[];await this._fillListAsync();const maxHeaderText1Width=Lenze.Functions.getLargestValue(this._itemControls,x=>x.headerText1Width);const maxHeaderText2Width=Lenze.Functions.getLargestValue(this._itemControls,x=>x.headerText2Width);const maxHeaderText3Width=Lenze.Functions.getLargestValue(this._itemControls,x=>x.headerText3Width);const maxBodyText1Width=Lenze.Functions.getLargestValue(this._itemControls,x=>x.bodyText1Width);const maxBodyText2Width=Lenze.Functions.getLargestValue(this._itemControls,x=>x.bodyText2Width);const maxBodyText3Width=Lenze.Functions.getLargestValue(this._itemControls,x=>x.bodyText3Width);this._itemControls.forEach(x=>{x.headerText1Width=maxHeaderText1Width;x.headerText2Width=maxHeaderText2Width;x.headerText3Width=maxHeaderText3Width;x.bodyText1Width=maxBodyText1Width;x.bodyText2Width=maxBodyText2Width;x.bodyText3Width=maxBodyText3Width})}_createListItem(){const listItem=Lenze.Dom.createControl(UI.ListItem,this.element);listItem.detailsAuthorizationRight=this.detailsAuthorizationRight;this._itemControls.push(listItem);return listItem}}UI.ListBase=ListBase})(UI=Lenze.UI||(Lenze.UI={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var UI;(function(UI){"use strict";class VirtualizingTableBase extends Lenze.UI.ControlBase{constructor(){super(...arguments);this._selectedTrClassName="lenze-virtualizingtable__table-selected";this.selectedObjectChanged=new VisiWin.Internal.System.Events.TypedEvent;this._isBusy=false;this.value="";this._isAttachedCalled=false;this._columnsCollection=[];this._orderedColumns=[]}get _mappedOrderedColumns(){return this._orderedColumns.map(value=>{return{fieldName:value.fieldName,descending:value.orderByDesc}})}registerChild(controlType,action,element,options){if(action!==this.registerTargetId)return true;if(element&&element.winControl)this._columnsCollection.push(element);return false}createTemplate(){return this.processElements([])}getSelectedObject(){return this._selectedObject}clearSelectedObject(){this._selectedObject=null;for(let i=0;i<this._bodyElement.children.length;i++)this._bodyElement.children[i].classList.remove(this._selectedTrClassName);this._updateColors(null);this._raiseSelectedChangeEvent(this._selectedObject)}_updateColors(changes){this.setColor("backgroundColor");this.setColor("foregroundColor");this._setHeaderCellsColors();this._setBodyCells(this._setBodyCellColors.bind(this))}_updateLayout(changes){if(changes.changeType==="lifeCycle"&&changes.changeName==="initialized"){this._createTable();this._setHeaderCellsLayout();this._setHeaderCellsColors();if(VisiWin.Utilities.isInDesignMode())this._setBodyCells(this._setBodyCellLayout.bind(this))}}afterInit(){if(VisiWin.Utilities.isInDesignMode())return;this._elementScrollListener=this._onElementScrollAsync.bind(this);this._tableClickListener=this._onTableClick.bind(this);this._columnVisibilityChangedHandler=this._onColumnVisibilityChanged.bind(this);this._columnClickHandler=this._onColumnClickAsync.bind(this);this.element.addEventListener("scroll",this._elementScrollListener);this._bodyElement.addEventListener("pointerup",this._tableClickListener);this._columnsCollection.forEach(column=>{const columnControl=column.winControl;columnControl.addEventListener(UI.VirtualizingTableColumn.visibilityChangedEventName,this._columnVisibilityChangedHandler);if(columnControl.orderByEnabled)column.addEventListener("pointerup",this._columnClickHandler)});this._refreshAsync()}async attach(){if(VisiWin.Utilities.isInDesignMode())return await super.attach();if(this._isAttachedCalled)await this._refreshAsync();this._isAttachedCalled=true;await super.attach()}dispose(){if(VisiWin.Utilities.isInDesignMode())return super.dispose();this.element.removeEventListener("scroll",this._elementScrollListener);this._bodyElement.removeEventListener("pointerup",this._tableClickListener);this._columnsCollection.forEach(column=>{var _a;(_a=column.winControl)===null||_a===void 0?void 0:_a.removeEventListener(UI.VirtualizingTableColumn.visibilityChangedEventName,this._columnVisibilityChangedHandler);column.removeEventListener("pointerup",this._columnClickHandler)});return super.dispose()}async _refreshAsync(){this._resetVirtualization();this._currentObjects=[];this._selectedObject=null;if(!this._bodyElement)return;while(this._bodyElement.lastElementChild)this._bodyElement.removeChild(this._bodyElement.lastElementChild);await this._getNewObjectsAsync(1,this.pageSize)}async _resolveValueAsync(value,fieldName){return fieldName.split(".").reduce(function(previousValue,currentValue){return previousValue?previousValue[currentValue]:null},value||self)}_setBodyCellLayout(cell,firstCell,column){var _a;cell.style.padding=this.bodyPadding;cell.style.borderLeftWidth=firstCell?this.bodyBorderWidthSides:"0";cell.style.borderRightWidth=this.bodyBorderWidthSides;cell.style.borderBottomWidth=this.bodyBorderWidthBottom;cell.style.borderStyle=this.bodyBorderStyle;cell.style.fontSize=this.bodyFontSize;cell.style.fontWeight=(_a=this.bodyFontWeight)===null||_a===void 0?void 0:_a.replace("FW","");cell.style.textAlign=column.textAlignment.toLowerCase();cell.style.width=column.width;cell.style.minWidth=column.minWidth;cell.style.maxWidth=column.maxWidth;cell.style.height=column.height;cell.style.minHeight=column.minHeight;cell.style.maxHeight=column.maxHeight;this._setTextTrimming(cell,column.textTrimming);this._setTextWrapping(cell,column.textTrimming,column.textWrapping,column.lineClamp)}_setBodyCellColors(cell,firstCell,column){const selected=this._isCellSelected(cell);cell.style.backgroundColor=this.getThemeColor(selected?this.bodySelectedBackgroundColor:this.bodyBackgroundColor);cell.style.borderColor=this.getThemeColor(selected?this.bodySelectedBorderColor:this.bodyBorderColor);cell.style.color=this.getThemeColor(selected?this.bodySelectedForegroundColor:this.bodyForegroundColor)}_isCellSelected(cell){var _a,_b;return(_b=(_a=cell.parentElement)===null||_a===void 0?void 0:_a.classList.contains(this._selectedTrClassName))!==null&&_b!==void 0?_b:false}_createTable(){var _a;if(VisiWin.Utilities.isInDesignMode()&&this._tableElement!=null)this.element.removeChild(this._tableElement);else this.element.classList.add("lenze-virtualizingtable");this._headerRowElement=document.createElement("tr");this._headerRowElement.classList.add("lenze-virtualizingtable__header-row",this._headerRowClassName);for(let column of this._columnsCollection){(_a=column.parentElement)===null||_a===void 0?void 0:_a.removeChild(column);const theadCell=document.createElement("th");theadCell.classList.add(this._headerCellClassName);theadCell.appendChild(column);this._headerRowElement.appendChild(theadCell)}this._headerElement=document.createElement("thead");this._headerElement.classList.add("lenze-virtualizingtable__header",this._headerClassName);this._headerElement.appendChild(this._headerRowElement);this._bodyElement=document.createElement("tbody");this._bodyElement.classList.add("lenze-virtualizingtable__body",this._bodyClassName);this._tableElement=document.createElement("table");this._tableElement.classList.add("lenze-virtualizingtable__table",this._tableClassName);this._tableElement.appendChild(this._headerElement);this._tableElement.appendChild(this._bodyElement);this.element.appendChild(this._tableElement)}_resetVirtualization(){this._lastKnownPosY=this.element.scrollTop;this.element.scrollTo(0,0);this._pageNumber=1}async _getNewObjectsAsync(pageNumber,pageSize,skipIsBusyCheck=false){var _a,_b;if(!skipIsBusyCheck&&this._isBusy)return;this._setIsBusy(true);try{const response=await this._getValuesAsync(pageNumber,pageSize,this._mappedOrderedColumns);if(response==null)return;const emptyResponse=response.data==null||response.data.length===0;const hasNextPage=!emptyResponse&&response.data.length===this._pageSize;this._pageSize=(_a=response.pageSize)!==null&&_a!==void 0?_a:0;this._pageNumber=hasNextPage?(_b=response.pageNumber)!==null&&_b!==void 0?_b:0:emptyResponse?this._pageNumber:this._pageNumber+1;this._setIsBusy(null,hasNextPage,this._pageNumber>this.maxAmountOfPages);if(emptyResponse){this._setIsBusy(false,null,null,true);return}await this._addToBodyAsync(response.data);this._updateOrderedColumns(response.orderBy);this._setIsBusy(false,null,null,true)}catch(error){console.error(error);this._setIsBusy(false,null,null,true)}}_updateOrderedColumns(orderBy){var _a;if(orderBy==null)return;if(this._orderedColumns.length!==orderBy.length)this._orderedColumns=[];for(const[index,value]of orderBy.entries()){const orderedColumn=this._orderedColumns[index];const isOrderedColumnNull=orderedColumn==null;if(!isOrderedColumnNull&&orderedColumn.fieldName===value.fieldName&&orderedColumn.orderByDesc===value.descending)continue;if(isOrderedColumnNull||orderedColumn.fieldName!==value.fieldName){if(!isOrderedColumnNull)orderedColumn.orderByDesc=null;const columnControl=(_a=this._columnsCollection.filter(column=>column.winControl.fieldName===value.fieldName)[0])===null||_a===void 0?void 0:_a.winControl;if(columnControl==null)continue;columnControl.orderByDesc=value.descending;this._orderedColumns[index]=columnControl}else orderedColumn.orderByDesc=value.descending}}async _onElementScrollAsync(){await this._loadAsync(true)}async _loadAsync(evaluateScrolling){if(evaluateScrolling&&this._lastKnownPosY==this.element.scrollTop)return;const oldPos=this._lastKnownPosY;this._lastKnownPosY=this.element.scrollTop;if((!evaluateScrolling||this._lastKnownPosY>oldPos)&&this._withinLoadNextMargin())await this._loadNextAsync();else if((!evaluateScrolling||this._lastKnownPosY<oldPos)&&this._withinLoadPreviousMargin())await this._loadPreviousAsync()}async _loadPreviousAsync(){if(!this._canLoadPrevious||this._isBusy)return;if(this._pageNumber<=this.maxAmountOfPages)return;this._setIsBusy(true,null,false);const index=this._pageNumber-1;const amountToRemove=this._currentObjects.slice(this._pageSize*index,this._pageSize*index+this._pageSize).length;for(let i=0;i<amountToRemove&&this._bodyElement.lastElementChild;i++)this._bodyElement.removeChild(this._bodyElement.lastElementChild);await this._addFromCurrentBodyValuesAsync(this._pageSize*this._pageNumber-this.maxAmountOfPages*this.pageSize-this.pageSize,false)}async _loadNextAsync(){if(!this._canLoadNext||this._isBusy)return;this._setIsBusy(true,false);if(this._bodyElement.rows.length+this._pageSize>this.maxAmountOfPages*this._pageSize){for(let i=0;i<this._pageSize&&this._bodyElement.firstElementChild;i++)this._bodyElement.removeChild(this._bodyElement.firstElementChild)}if(this._currentObjects.length>this._pageSize*this._pageNumber){await this._addFromCurrentBodyValuesAsync(this._pageSize*this._pageNumber);return}await this._getNewObjectsAsync(this._pageNumber+1,this._pageSize,true)}_setIsBusy(isBusy=null,canLoadNext=null,canLoadPrevious=null,isFinished=false){this._isBusy=isBusy!==null&&isBusy!==void 0?isBusy:this._isBusy;this._canLoadNext=canLoadNext!==null&&canLoadNext!==void 0?canLoadNext:this._canLoadNext;this._canLoadPrevious=canLoadPrevious!==null&&canLoadPrevious!==void 0?canLoadPrevious:this._canLoadPrevious;this._onIsBusyChanged(isFinished)}async _addFromCurrentBodyValuesAsync(startIndex,append=true){const itemsToAdd=this._currentObjects.slice(startIndex,startIndex+this._pageSize);await this._addToBodyAsync(itemsToAdd,false,append);this._pageNumber+=1*(append?1:-1);this._setIsBusy(false,itemsToAdd.length===this._pageSize,this._pageNumber>this.maxAmountOfPages,true)}_setHeaderCellsLayout(){for(let i=0;i<this._columnsCollection.length;i++){const cell=this._headerRowElement.cells[i];cell.style.borderLeftWidth=i==0?this.headerBorderWidthSides:"0";cell.style.borderRightWidth=this.headerBorderWidthSides;cell.style.borderBottomWidth=this.headerBorderWidthBottom;cell.style.borderTopWidth=this.headerBorderWidthTop;cell.style.borderStyle=this.headerBorderStyle;const column=this._columnsCollection[i].winControl;column.padding=this.headerPadding;cell.style.width=column.width;cell.style.minWidth=column.width;cell.style.maxWidth=column.width;const textControl=column.headerTextBlock;textControl.fontClass=this.headerFontClass;textControl.fontSize=this.headerFontSize;textControl.fontWeight=this.headerFontWeight;textControl.uppercase=this.headerUpperCase;this._setCellVisibility(cell,i)}}_setHeaderCellsColors(){if(this._headerRowElement==null)return;for(let i=0;i<this._headerRowElement.cells.length;i++){const cell=this._headerRowElement.cells[i];cell.style.backgroundColor=this.getThemeColor(this.headerBackgroundColor);cell.style.borderColor=this.getThemeColor(this.headerBorderColor);const columnControl=this._columnsCollection[i].winControl;columnControl.headerTextBlock.foregroundColor=this.headerForegroundColor;columnControl.headerTextBlock.backgroundColor=this.headerBackgroundColor;columnControl.symbolActiveForegroundColor=this.headerSymbolActiveForegroundColor;columnControl.symbolInactiveForegroundColor=this.headerSymbolInactiveForegroundColor;columnControl.symbolBackgroundColor=this.headerSymbolBackgroundColor}}_setBodyCells(cb){if(this._bodyElement==null)return;for(let rowIndex=0;rowIndex<this._bodyElement.rows.length;rowIndex++)for(let cellIndex=0;cellIndex<this._bodyElement.rows[rowIndex].cells.length;cellIndex++)cb(this._bodyElement.rows[rowIndex].cells[cellIndex],rowIndex==0,this._columnsCollection[cellIndex].winControl)}async _addToBodyAsync(items,newItems=true,append=true){const oldFirstRow=this._bodyElement.firstElementChild;for(let itemResponse of items){const row=await this._createBodyTableRowAsync(itemResponse);if(append||oldFirstRow==null)this._bodyElement.appendChild(row);else this._bodyElement.insertBefore(row,oldFirstRow);if(newItems&&append)this._currentObjects.push(itemResponse)}}async _createBodyTableRowAsync(value){const row=document.createElement("tr");row.classList.add("lenze-virtualizingtable__body-row",this._bodyRowClassName);if(this._selectedObject!=null&&this._isSameItem(value,this._selectedObject))row.classList.add(this._selectedTrClassName);for(let i=0;i<this._headerRowElement.cells.length;i++){const cell=this._createBodyCell();row.appendChild(cell);const column=this._columnsCollection[i].winControl;const potentialValue=await this._resolveValueAsync(value,column.fieldName);if(Array.isArray(potentialValue))potentialValue.forEach(value=>this._setValueOnCell(value,cell,true));else this._setValueOnCell(potentialValue,cell,false);cell.classList.add(this._bodyCellClassName);if(!Lenze.Strings.isNullOrWhiteSpace(this.bodyFontClass))cell.classList.add(this.bodyFontClass.toLowerCase());const isFirstCell=i===0;this._setBodyCellColors(cell,isFirstCell,column);this._setBodyCellLayout(cell,isFirstCell,column);this._setCellVisibility(cell,i)}return row}_setValueOnCell(value,cell,multipleValues){let element=cell;if(multipleValues){cell.classList.add(`lenze-virtualizingtable__cell-multiple-values`);element=document.createElement("div");cell.appendChild(element)}if(value instanceof Lenze.Models.ControlInfo){const parsedValue=value;Lenze.Dom.createControl(parsedValue.controlType,element,parsedValue.classNames,parsedValue.options);element.classList.add(`lenze-virtualizingtable__cell-object`);return}const valueNumeric=VisiWin.isNumber(value);element.innerText=valueNumeric?value.toString():!VisiWin.isNullOrEmpty(value)?value:"-";element.classList.add(`lenze-virtualizingtable__cell-${valueNumeric?"numeric":"text"}`)}_createBodyCell(){return document.createElement("td")}_setCellVisibility(cell,index){if(!this._columnsCollection[index].winControl.visible)cell.classList.add("lenze-virtualizingtable__cell-hidden");else cell.classList.remove("lenze-virtualizingtable__cell-hidden")}_withinLoadNextMargin(){return this._lastKnownPosY>=this.element.scrollHeight-this.element.clientHeight-this.loadNextTriggerValue}_withinLoadPreviousMargin(){return this._lastKnownPosY<this.loadNextTriggerValue}_onTableClick(event){var _a;if(((_a=event.target)===null||_a===void 0?void 0:_a.parentElement)===null||this._isBusy)return;let newObject=null;for(let i=0;i<this._bodyElement.children.length;i++){const element=this._bodyElement.children[i];element.classList.remove(this._selectedTrClassName);if(element!=event.target.parentElement)continue;element.classList.add(this._selectedTrClassName);newObject=this._currentObjects[this._parseVirtualizedIndex(i)]}if(newObject===this._selectedObject)return;this._selectedObject=newObject;this._updateColors(null);this._raiseSelectedChangeEvent(this._selectedObject)}_onColumnVisibilityChanged(eventArgs){let columnIndex;for(columnIndex=0;columnIndex<this._columnsCollection.length;columnIndex++){if(eventArgs.target!==this._columnsCollection[columnIndex].winControl)continue;break}if(columnIndex>=this._columnsCollection.length)return;const elements=this._tableElement.querySelectorAll(`td:nth-child(${columnIndex+1}),th:nth-child(${columnIndex+1})`);elements.forEach(element=>this._setCellVisibility(element,columnIndex))}async _onColumnClickAsync(eventArgs){if(this._isBusy)return;try{let column=null;let targetElement=eventArgs.target;if(targetElement==null)throw Error("Unable to resolve target from PointerUp event in Lenze.UI.VirtualizingTableBase.");do{const attributeValue=targetElement.getAttribute("data-win-control");if(attributeValue!==`Lenze.UI.${UI.VirtualizingTableColumn.controlName}`){targetElement=targetElement.parentElement;continue}column=targetElement.winControl;break}while(targetElement!=null);if(column==null)throw Error("Unable to resolve column control from PointerUp event in Lenze.UI.VirtualizingTableBase.");if(!column.orderByEnabled)return;column.orderByDesc=this._getNewOrderByValue(column.orderByDesc);const otherColumns=this._orderedColumns.filter(value=>value!==column);if(this.disableMultiSort||!eventArgs.shiftKey){otherColumns.forEach(value=>value.orderByDesc=null);this._orderedColumns=[]}const columnInList=this._orderedColumns.includes(column);if(column.orderByDesc!=null&&!columnInList)this._orderedColumns.push(column);else if(column.orderByDesc==null&&columnInList)this._orderedColumns=otherColumns;await this._refreshAsync()}catch(error){console.error(error)}}_getNewOrderByValue(value){return value===null?true:value===true?false:null}_parseVirtualizedIndex(virtualIndex){if(this._pageNumber<=this.maxAmountOfPages)return virtualIndex;return virtualIndex+this._pageSize*(this._pageNumber-this.maxAmountOfPages)}_raiseSelectedChangeEvent(args){var _a;(_a=this.selectedObjectChanged)===null||_a===void 0?void 0:_a.trigger(args);this.value=JSON.stringify(args);this.dispatchEvent(VirtualizingTableBase.onSelectedEventName,this.value)}_setTextTrimming(element,textTrimming){let overflow="";let textOverflow="";switch(textTrimming){case"Ellipsis":overflow="hidden";textOverflow="ellipsis";break;case"Overflow":overflow="";textOverflow="";break;default:overflow="hidden";textOverflow="";break}element.style.overflow=overflow;element.style.textOverflow=textOverflow}_setTextWrapping(element,textTrimming,textWrapping,lineClamp){switch(textWrapping){case"NoWrap":element.style.whiteSpace="nowrap";element.style.wordBreak="";element.style["WebkitLineClamp"]="";break;case"Wrap":element.style.whiteSpace="normal";element.style.wordBreak="normal";element.style["WebkitLineClamp"]="";break;case"WrapWithLineClamp":element.style.whiteSpace="normal";element.style.wordBreak="";if(lineClamp>0){element.style["WebkitLineClamp"]=lineClamp}element.style.overflow="hidden";element.style.textOverflow="ellipsis";break;case"WrapWithWordBreak":element.style.whiteSpace="normal";element.style.wordBreak="break-all";element.style["WebkitLineClamp"]="";break}if(element.style["WebkitLineClamp"]){element.style.display="-webkit-box";element.style["WebkitBoxOrient"]="vertical"}else{element.style.display="";element.style["WebkitBoxOrient"]=""}}}VirtualizingTableBase.onSelectedEventName="selectedchanged";UI.VirtualizingTableBase=VirtualizingTableBase})(UI=Lenze.UI||(Lenze.UI={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var UI;(function(UI){"use strict";class TreeBase extends Lenze.UI.ControlBase{constructor(){super(...arguments);this._idAttributeName="data-instance-id";this._severityLevelAttributeName="data-severity-level";this._initiallyAttached=false;this._isCreatingTable=false;this._setHeaderTextDictionary={[Lenze.Models.FunctionTreeValueType.component]:"Components/Status",[Lenze.Models.FunctionTreeValueType.currentAlarms]:"Current Alarms",[Lenze.Models.FunctionTreeValueType.logbook]:"Logbook",[Lenze.Models.FunctionTreeValueType.license]:"License",[Lenze.Models.FunctionTreeValueType.asset]:"Asset"};this._setCellValueDictionary={[Lenze.Models.FunctionTreeValueType.component]:this._setComponentName.bind(this),[Lenze.Models.FunctionTreeValueType.currentAlarms]:this._setComponentCurrentAlarms.bind(this),[Lenze.Models.FunctionTreeValueType.logbook]:this._setComponentLogBook.bind(this),[Lenze.Models.FunctionTreeValueType.license]:this._setLicense.bind(this),[Lenze.Models.FunctionTreeValueType.asset]:this._setAsset.bind(this)};this._errorParentIcons=[Lenze.Models.AlarmIconsEnum.errorParent,Lenze.Models.AlarmIconsEnum.errorParent,Lenze.Models.AlarmIconsEnum.errorParent,Lenze.Models.AlarmIconsEnum.warningParent,Lenze.Models.AlarmIconsEnum.warningParent,Lenze.Models.AlarmIconsEnum.infoParent];this._errorChildIcons=[Lenze.Models.AlarmIconsEnum.errorChild,Lenze.Models.AlarmIconsEnum.errorChild,Lenze.Models.AlarmIconsEnum.errorChild,Lenze.Models.AlarmIconsEnum.warningChild,Lenze.Models.AlarmIconsEnum.warningChild,Lenze.Models.AlarmIconsEnum.infoChild]}createTemplate(){this._tableElement=document.createElement("table");this._tableElement.classList.add("lenze-componenttree__table");this._headerElement=document.createElement("thead");this._headerElement.classList.add("lenze-componenttree__table_header");this._tableElement.appendChild(this._headerElement);this._headerRowElement=document.createElement("tr");this._headerRowElement.classList.add("lenze-componenttree__table_headerrow");this._headerElement.appendChild(this._headerRowElement);this._headerTextBlocks=[];this._headerToggleSymbols=[];for(let i=0;i<Object.keys(this._setHeaderTextDictionary).length;i++){const cell=document.createElement("th");cell.classList.add("lenze-componenttree__table_headercell");if(i!=Lenze.Models.FunctionTreeValueType.component)cell.classList.add("lenze-componenttree__table_shrink");this._headerRowElement.appendChild(cell);const textBlock=document.createElement("div");textBlock.setAttribute("data-win-control","VisiWin.UI.TextBlock");this._headerTextBlocks[i]=textBlock;cell.appendChild(textBlock)}this._bodyElement=document.createElement("tbody");this._bodyElement.classList.add("lenze-componenttree__table_body");this._tableElement.appendChild(this._bodyElement);this.element.appendChild(this._tableElement);return this.processElements(this._headerTextBlocks.concat(this._headerToggleSymbols))}async attach(){var _a,_b;if(VisiWin.Utilities.isInDesignMode())return await super.attach();if(!this._initiallyAttached){this._dynamicSymbols=[];this._moduleValuesChangedHandler=this._onModulesValuesChangedAsync.bind(this);this._currentAlarmsVariableChanged=this._onCurrentAlarmsChanged.bind(this);this._userLoggedOnHandler=this._onUserLoggedOn.bind(this);this._bodyRowClickHandler=this._onTableRowClicked.bind(this);this._toggleColumnClicked=this._onToggleColumnClicked.bind(this);this._variableService=VisiWin.System.DataAccess.VariableService.getService();this._userService=VisiWin.System.UserManagement.UserManagementService.getService();this._dialogService=VisiWin.AppServices.LenzeDialogService;this._moduleService=VisiWin.AppServices.FastModuleService;this._logbookService=VisiWin.AppServices.FastLogbookService;this._licenseService=VisiWin.AppServices.FastLicenseService;this._moduleService.addEventListener(VisiWin.AppServices.Impl.FastModuleService.valuesChangeEventName,this._moduleValuesChangedHandler);for(let symbol of this._headerToggleSymbols)symbol.addEventListener("pointerup",this._toggleColumnClicked);this._currentAlarmsVariable=this._variableService.GetVariable(this.currentAlarmsVariableName);(_a=this._currentAlarmsVariable)===null||_a===void 0?void 0:_a.Change.add(this._currentAlarmsVariableChanged);this._userService.UserLoggedOn.add(this._userLoggedOnHandler);this._initiallyAttached=true}await((_b=this._currentAlarmsVariable)===null||_b===void 0?void 0:_b.AttachAsync());this._setHeaderTextBlocks();await this._setValuesAndCreateTableAsync(true);await this._updateAlarmsVisualAsync();await super.attach()}async detach(){var _a;if(VisiWin.Utilities.isInDesignMode())return await super.detach();(_a=this._currentAlarmsVariable)===null||_a===void 0?void 0:_a.Detach();await super.detach()}dispose(){var _a,_b;if(VisiWin.Utilities.isInDesignMode())return super.dispose();this._moduleService.removeEventListener(VisiWin.AppServices.Impl.FastModuleService.valuesChangeEventName,this._moduleValuesChangedHandler);for(let symbol of this._headerToggleSymbols)symbol.removeEventListener("pointerup",this._toggleColumnClicked);(_a=this._currentAlarmsVariable)===null||_a===void 0?void 0:_a.Change.remove(this._currentAlarmsVariableChanged);(_b=this._currentAlarmsVariable)===null||_b===void 0?void 0:_b.Detach();this._userService.UserLoggedOn.remove(this._userLoggedOnHandler);return super.dispose()}_updateColors(changes){this.setColor("backgroundColor");this.setColor("borderColor");for(let textblock of this._headerTextBlocks)textblock.winControl.backgroundColor=this.backgroundColor;for(let header of this._headerRowElement.children)header.style.backgroundColor=this.getThemeColor(this.headerBackgroundColor)}_getComponentById(id){var _a;return(_a=this._components)===null||_a===void 0?void 0:_a.filter(c=>c.instanceID===id)[0]}_setHeaderTextBlocks(){for(let i=0;i<this._headerTextBlocks.length;i++){const headerText=this._headerTextBlocks[i].winControl;headerText.text=this._setHeaderTextDictionary[i];headerText.fontClass=this.headerFontClass;headerText.fontSize=this.headerFontSize;headerText.fontWeight=this.headerFontWeight;headerText.foregroundColor=this.headerTextForegroundColor;headerText.backgroundColor=this.headerTextBackgroundColor;if(i!==Lenze.Models.FunctionTreeValueType.component)headerText.textAlignment=this.headerTextAlignment}}_resetTable(component){var _a;this._clearTable();this._addComponentAndChildren(component);const childRows=this._getChildRows(this._bodyElement.firstElementChild);if(childRows!=null)this._setRowDisplay(false,childRows);(_a=this._bodyElement.firstElementChild)===null||_a===void 0?void 0:_a.classList.add("lenze-componenttree__collapse-symbol-rotate");for(var i=0;i<this._headerRowElement.children.length;i++){const headerElement=this._headerRowElement.children[i];const hasRight=i!=Lenze.Models.FunctionTreeValueType.license&&i!=Lenze.Models.FunctionTreeValueType.asset||i==Lenze.Models.FunctionTreeValueType.license&&Lenze.Users.isAuthorized(this._userService,this.licenseAuthorizationRight)||i==Lenze.Models.FunctionTreeValueType.asset&&this.showAsset&&Lenze.Users.isAuthorized(this._userService,this.assetAuthorizationRight);headerElement.style.display=hasRight?"table-cell":"none"}}_clearTable(){for(let symbol of this._dynamicSymbols)symbol.dispose();this._dynamicSymbols=[];while(this._bodyElement.firstElementChild){this._bodyElement.firstElementChild.removeEventListener("pointerup",this._bodyRowClickHandler);this._bodyElement.removeChild(this._bodyElement.firstElementChild)}}_addComponentAndChildren(component,iteration=0,parentId=""){if(component==null)return;this._appendComponentToTable(component,iteration,parentId);if(component.components==null)return;for(let childComponent of component.components)this._addComponentAndChildren(childComponent,iteration+1,component.instanceID)}_appendComponentToTable(component,iteration,parentId=""){const bodyRow=document.createElement("tr");bodyRow.classList.add("lenze-componenttree__table_bodyrow");bodyRow.addEventListener("pointerup",this._bodyRowClickHandler);bodyRow.setAttribute(this._idAttributeName,component.instanceID);if(parentId!=="")bodyRow.classList.add(parentId,"lenze-componenttree__row-collapsed");for(let i=0;i<this._headerTextBlocks.length;i++){if(i==Lenze.Models.FunctionTreeValueType.license&&!Lenze.Users.isAuthorized(this._userService,this.licenseAuthorizationRight)||i==Lenze.Models.FunctionTreeValueType.asset&&(!this.showAsset||!Lenze.Users.isAuthorized(this._userService,this.assetAuthorizationRight)))continue;const cell=document.createElement("td");cell.classList.add("lenze-componenttree__table_bodycell");cell.style.borderWidth=this.bodyCellBorderWidth;cell.style.borderColor=this.getThemeColor(this.bodyCellBorderColor);cell.style.borderStyle=this.bodyCellBorderStyle;if(i==0){cell.style.paddingLeft=`${8+this.indentationPadding*iteration}px`;cell.style.fontWeight=this.bodyCellFontWeight}else cell.style.fontSize=this.bodyCellFontSize;this._setCellValueDictionary[i](cell,component);bodyRow.appendChild(cell)}this._bodyElement.appendChild(bodyRow)}_getChildRows(row){const id=this._getIdFromRow(row);return id!=null?this._tableElement.getElementsByClassName(id):null}_toggleRowDisplay(row){var _a;if(row==null)return;const rows=this._getChildRows(row);if(rows==null)return;const hide=(_a=rows[0])===null||_a===void 0?void 0:_a.classList.contains("lenze-componenttree__row-visible");this._setRowDisplay(hide,rows);if(hide)row.classList.remove("lenze-componenttree__collapse-symbol-rotate");else row.classList.add("lenze-componenttree__collapse-symbol-rotate")}_setRowDisplay(hide,rows){for(let i=0;i<rows.length;i++){const childRow=rows.item(i);if(childRow==null)continue;childRow.classList.remove("lenze-componenttree__row-collapsed","lenze-componenttree__row-visible","lenze-componenttree__collapse-symbol-rotate");childRow.classList.add(hide?"lenze-componenttree__row-collapsed":"lenze-componenttree__row-visible");if(!hide)continue;const childRows=this._getChildRows(childRow);if(childRows==null)continue;this._setRowDisplay(true,childRows)}}_hideAlarmIcons(){var _a;for(let child=this._bodyElement.firstChild;child!==null;child=child.nextSibling){const symbol=(_a=child.getElementsByClassName("lenze-componenttree__error-symbol"))===null||_a===void 0?void 0:_a.item(0);if(symbol==null)continue;symbol.winControl.visibility="collapse"}}_showAlarmOnRows(row,errorColors){var _a;const parentId=row.classList[1];for(let child=this._bodyElement.firstChild;child!==null;child=child.nextSibling){const id=this._getIdFromRow(child);if(id!==parentId)continue;const symbol=(_a=child.getElementsByClassName("lenze-componenttree__error-symbol"))===null||_a===void 0?void 0:_a.item(0);if(symbol!=null){if(symbol.winControl.visibility!=="visible"){this._setInfoOnSymbol(symbol,errorColors,false)}else{const currentSymbol=symbol.winControl.symbol;if(!Object.values(this._errorParentIcons).includes(currentSymbol)){const symbolLevel=Number.parseInt(symbol.getAttribute(this._severityLevelAttributeName));if(symbolLevel>errorColors.level)this._setInfoOnSymbol(symbol,errorColors,false)}}}this._showAlarmOnRows(child,errorColors);return}}_setInfoOnSymbol(symbolElement,errorColors,isParent){symbolElement.winControl.visibility="visible";symbolElement.winControl.symbol=isParent?this._errorParentIcons[errorColors.level]:this._errorChildIcons[errorColors.level];symbolElement.winControl.borderRadius=errorColors.borderRadius;symbolElement.winControl.backgroundColor=errorColors.backgroundColor;symbolElement.winControl.foregroundColor=errorColors.foregroundColor;symbolElement.setAttribute(this._severityLevelAttributeName,errorColors.level.toString())}_getIdFromRow(row){if(row==null)return null;const attr=row.getAttribute(this._idAttributeName);if(Lenze.Strings.isNullOrWhiteSpace(attr))return null;return attr}_setComponentName(cell,applicationElement){var _a;const layout=document.createElement("div");layout.style.display="flex";layout.style.flexDirection="row";layout.style.alignItems="center";const symbol=Lenze.Dom.createControl(VisiWin.UI.Symbol,layout,["lenze-componenttree__collapse-symbol"]);symbol.foregroundColor=this.arrowSymbolColor;symbol.symbol=this.arrowSymbol;symbol.visibility=applicationElement.components!=null&&applicationElement.components.length>0?"visible":"hidden";this._dynamicSymbols.push(symbol);const componentErrorContainer=document.createElement("div");componentErrorContainer.style.width=this.componentSymbolSize;componentErrorContainer.style.height=this.componentSymbolSize;componentErrorContainer.style.margin=this.componentSymbolContainerMargin;componentErrorContainer.style.position="relative";let glyph="";const component=this._components.find(c=>c.instanceID===applicationElement.instanceID);const type=(_a=component===null||component===void 0?void 0:component.componentType)!==null&&_a!==void 0?_a:this.componentDefaultType;const componentType=`T${type}`;glyph=Lenze.Models.TypeToGlyphEnum[componentType!==null&&componentType!==void 0?componentType:"Default"];const componentSymbol=Lenze.Dom.createControl(VisiWin.UI.Symbol,componentErrorContainer);componentSymbol.symbol=!Lenze.Strings.isNullOrWhiteSpace(glyph)?glyph:Lenze.Models.TypeToGlyphEnum.Default;componentSymbol.symbolSize=this.componentSymbolSize;componentSymbol.iconFont=this.componentSymbolIconFont;componentSymbol.foregroundColor=this.componentSymbolColor;componentSymbol.width=this.componentSymbolWidth;componentSymbol.height=this.componentSymbolHeight;this._dynamicSymbols.push(componentSymbol);const errorSymbol=Lenze.Dom.createControl(VisiWin.UI.Symbol,componentErrorContainer,["lenze-componenttree__error-symbol"]);errorSymbol.symbol=Lenze.Models.AlarmIconsEnum.errorParent;errorSymbol.iconFont=this.errorSymbolIconFont;errorSymbol.foregroundColor=this.errorSymbolFaultForegroundColor;errorSymbol.visibility="collapse";errorSymbol.symbolSize=this.errorSymbolSize;errorSymbol.borderWidth=this.errorSymbolBorderWidth;errorSymbol.borderStyle=this.errorSymbolBorderStyle;errorSymbol.borderRadius=this.errorSymbolFaultBorderRadius;errorSymbol.borderColor=this.errorSymbolBorderColor;errorSymbol.backgroundColor=this.errorSymbolFaultBackgroundColor;this._dynamicSymbols.push(errorSymbol);layout.appendChild(componentErrorContainer);const span=document.createElement("span");span.innerHTML=applicationElement.name;layout.appendChild(span);cell.appendChild(layout)}_setComponentLogBook(cell,component){const symbol=Lenze.Dom.createControl(VisiWin.UI.Symbol,cell,["lenze-componenttree__symbol"]);symbol.symbol=this.logbookSymbol;symbol.iconFont=this.logbookIconFont;symbol.margin=this.logbookMargin;symbol.padding=this.logbookPadding;symbol.foregroundColor=this.logbookForegroundColor;symbol.backgroundColor=this.logbookBackgroundColor;cell.classList.add("lenze-componenttree__logbook-symbol");this._dynamicSymbols.push(symbol)}_setComponentCurrentAlarms(cell,component){const symbol=Lenze.Dom.createControl(VisiWin.UI.Symbol,cell,["lenze-componenttree__symbol"]);symbol.symbol=this._errorParentIcons[0];symbol.iconFont=this.currentAlarmsIconFont;symbol.margin=this.currentAlarmsMargin;symbol.padding=this.currentAlarmsPadding;symbol.backgroundColor=this.errorSymbolFaultBackgroundColor;symbol.foregroundColor=this.errorSymbolFaultForegroundColor;cell.classList.add("lenze-componenttree__alarm-symbol");this._dynamicSymbols.push(symbol)}_setLicense(cell,component){const symbol=Lenze.Dom.createControl(VisiWin.UI.Symbol,cell,["lenze-componenttree__symbol"]);symbol.symbol=this.licenseSymbol;symbol.iconFont=this.licenseIconFont;symbol.margin=this.licenseMargin;symbol.padding=this.licensePadding;symbol.foregroundColor=this.licenseForegroundColor;symbol.backgroundColor=this.licenseBackgroundColor;cell.classList.add("lenze-componenttree__license-symbol");this._dynamicSymbols.push(symbol)}_setAsset(cell,component){const symbol=Lenze.Dom.createControl(VisiWin.UI.Symbol,cell,["lenze-componenttree__symbol"]);symbol.symbol=this.assetSymbol;symbol.iconFont=this.assetIconFont;symbol.margin=this.assetMargin;symbol.padding=this.assetPadding;symbol.foregroundColor=this.assetForegroundColor;symbol.backgroundColor=this.assetBackgroundColor;cell.classList.add("lenze-componenttree__asset-symbol");this._dynamicSymbols.push(symbol)}async _setValuesAndCreateTableAsync(forceReset=false){if(!await this._logbookService.getLogbookEnabledAsync()){this.element.innerHTML="";this.element.innerText="FAST services are not available inside this UI Designer client.";return}else if(this._isCreatingTable)return;this._isCreatingTable=true;const applicationView=await this._getApplicationViewAsync();const components=await this._getComponentsAsync();if(!forceReset&&this._areEqualObjects(this._applicationView,applicationView)&&this._areEqualObjects(this._components,components)){this._isCreatingTable=false;return}this._applicationView=applicationView;this._components=components;this._resetTable(this._applicationView);this._isCreatingTable=false}async _getApplicationViewAsync(){switch(this._treeType){case Lenze.Models.TreeType.communicationTree:return await this._moduleService.getCommunicationViewAsync();case Lenze.Models.TreeType.componentTree:default:return await this._moduleService.getApplicationViewAsync()}}async _getComponentsAsync(){switch(this._treeType){case Lenze.Models.TreeType.communicationTree:case Lenze.Models.TreeType.componentTree:default:return await this._moduleService.getComponentsAsync()}}async _updateAlarmsVisualAsync(){var _a,_b,_c,_d,_e,_f;if(!this._logbookService.getLogbookEnabledAsync()||this._currentAlarmsVariable==null||!this._currentAlarmsVariable.IsValid)return;const potentialAlarms=Lenze.Strings.isNullOrWhiteSpace(this._currentAlarmsVariable.Value)?[]:JSON.parse(this._currentAlarmsVariable.Value);const alarms=potentialAlarms.map(entry=>Lenze.Models.AlarmElement.fromJS(entry));this._hideAlarmIcons();for(let child=this._bodyElement.firstChild;child!==null;child=child.nextSibling){const rowId=this._getIdFromRow(child);const alarm=alarms.find(a=>a.instanceID===rowId);if(alarm==null){child.classList.remove("lenze-componenttree__alarm-active");continue}child.classList.add("lenze-componenttree__alarm-active");const symbol=(_a=child.getElementsByClassName("lenze-componenttree__error-symbol"))===null||_a===void 0?void 0:_a.item(0);if(symbol==null)continue;const errorColors=this._getErrorSymbolColors(alarm);this._setInfoOnSymbol(symbol,errorColors,true);const currentAlarmsSymbol=(_d=(_c=(_b=child.getElementsByClassName("lenze-componenttree__alarm-symbol"))===null||_b===void 0?void 0:_b.item(0))===null||_c===void 0?void 0:_c.children)===null||_d===void 0?void 0:_d.item(0);if(currentAlarmsSymbol!=null){currentAlarmsSymbol.winControl.symbol=this._errorParentIcons[errorColors.level];currentAlarmsSymbol.winControl.backgroundColor=errorColors.backgroundColor;currentAlarmsSymbol.winControl.foregroundColor=errorColors.foregroundColor}if(((_e=alarm===null||alarm===void 0?void 0:alarm.entries)===null||_e===void 0?void 0:_e.find(x=>x.eventState===2))===undefined){const alarmIcon=(_f=child.getElementsByClassName("lenze-componenttree__symbol"))===null||_f===void 0?void 0:_f.item(0);if(alarmIcon!=null){alarmIcon.winControl.foregroundColor="Black"}}this._showAlarmOnRows(child,errorColors)}}async _onModulesValuesChangedAsync(){if(!this.isAttached)return;await this._setValuesAndCreateTableAsync()}_onTableRowClicked(args){const path=this._getPath(args);for(let pathElement of path){if(pathElement.classList.contains("lenze-componenttree__logbook-symbol")){this._onLogbookClick(pathElement.parentElement.getAttribute(this._idAttributeName));return}if(pathElement.classList.contains("lenze-componenttree__alarm-symbol")){this._onAlarmsClick(pathElement);return}if(pathElement.classList.contains("lenze-componenttree__license-symbol")){this._onLicenseClick(pathElement.parentElement.getAttribute(this._idAttributeName));return}if(pathElement.classList.contains("lenze-componenttree__asset-symbol")){this._onAssetClick(pathElement.parentElement.getAttribute(this._idAttributeName));return}if(pathElement instanceof HTMLTableRowElement){this._toggleRowDisplay(pathElement);return}if(pathElement instanceof HTMLTableSectionElement)return}}async _onLogbookClick(instanceId){if(this._applicationView==null)return;const components=this._getChildComponents(this._applicationView,instanceId,false);const componentNames=components.map(c=>c.name);if(componentNames.includes("EtherCAT_Master"))componentNames.push("CmpIoDrvETC");this._logbookService.setComponentNamesFilter(componentNames);this._dialogService.showDialog(this.logbookDialogName)}_onAlarmsClick(element){const row=element.parentElement;if(row==null||!row.classList.contains("lenze-componenttree__alarm-active"))return;const instanceId=element.parentElement.getAttribute(this._idAttributeName);if(Lenze.Strings.isNullOrWhiteSpace(instanceId)||this._applicationView==null)return;const components=this._getChildComponents(this._applicationView,instanceId,false);this._moduleService.setComponentsFilter(components);this._dialogService.showDialog(this.currentAlarmsDialogName)}async _onLicenseClick(instanceId){var _a;if(this._applicationView==null)return;if(this._applicationView.instanceID!==instanceId){const components=this._getChildComponents(this._applicationView,instanceId,false);this._licenseService.setComponentIdsFilter(components.map(c=>c.instanceID))}var component=this._components.find(x=>x.instanceID==instanceId);await this._variableService.SetValueAsync("__FAST.LLM.LicenseComponent",(_a=component===null||component===void 0?void 0:component.name)!==null&&_a!==void 0?_a:"");this._dialogService.showDialog(this.licenseDialogName)}async _onAssetClick(instanceId){var _a;if(this._applicationView==null)return;if(this._applicationView.instanceID!==instanceId){const components=this._getChildComponents(this._applicationView,instanceId,false)}var component=this._components.find(x=>x.instanceID==instanceId);await this._variableService.SetValueAsync("__FAST.LAM.AssetComponent",(_a=component===null||component===void 0?void 0:component.name)!==null&&_a!==void 0?_a:"");this._dialogService.showDialog(this.assetDialogName)}async _onCurrentAlarmsChanged(){if(!this.isAttached)return;await this._updateAlarmsVisualAsync()}_onUserLoggedOn(){if(!this.isAttached||Lenze.Strings.isNullOrWhiteSpace(this.licenseAuthorizationRight))return;this._setHeaderTextBlocks();this._resetTable(this._applicationView)}_onToggleColumnClicked(args){const path=this._getPath(args);for(let element of path){if(element instanceof HTMLTableRowElement)return;if(element.hasAttribute("data-column-index")){const columnIndex=Number.parseInt(element.getAttribute("data-column-index"));this._hideColumn(columnIndex);return}}}_getErrorSymbolColors(alarm){if(alarm.entries!=null&&alarm.entries.length>0){const severities=[...new Set(alarm.entries.map(e=>Lenze.Models.SeverityEnum[e.severity]))];const toContain=["Error","Fault","Trouble","Warning","Warning_Lock","Information"];for(var i=0;i<toContain.length;i++){if(severities.filter(s=>s.includes(toContain[i])).length===0)continue;return{borderRadius:this[`errorSymbol${toContain[i]}BorderRadius`],backgroundColor:this[`errorSymbol${toContain[i]}BackgroundColor`],foregroundColor:this[`errorSymbol${toContain[i]}ForegroundColor`],level:i}}}return{borderRadius:this.errorSymbolFaultBorderRadius,backgroundColor:this.errorSymbolFaultBackgroundColor,foregroundColor:this.errorSymbolFaultForegroundColor,level:1}}_hideColumn(index){this._hideCellFromRow(this._headerRowElement,index);for(let child=this._bodyElement.firstChild;child!==null;child=child.nextSibling)this._hideCellFromRow(child,index)}_hideCellFromRow(row,index){const cell=row.children.item(index);if(cell==null)return;cell.style.display="none"}_areEqualObjects(object1,object2){return JSON.stringify(object1)===JSON.stringify(object2)}_getPath(event){if(event==null)return[];return event.path||event.composedPath&&event.composedPath()}_getChildComponents(component,instanceId,isChild){let result=[];if(isChild||component.instanceID===instanceId){result.push(component);if(component.components==null)return result;for(let childComponent of component.components)result=result.concat(this._getChildComponents(childComponent,instanceId,true));return result}if(component.components==null)return result;for(let childComponent of component.components){result=result.concat(this._getChildComponents(childComponent,instanceId,false));if(result.length>0)return result}return result}}UI.TreeBase=TreeBase})(UI=Lenze.UI||(Lenze.UI={}))})(Lenze||(Lenze={}));"use strict";var VisiWin;(function(VisiWin){var AppServices;(function(AppServices){var Impl;(function(Impl){"use strict";class LenzeApplicationService extends VisiWin.AppServices.Impl.ServiceBase{get validVisiWinVersion(){return this._validVersion||false}constructor(){super();this.DOCUMENT_EVENTS=["mousemove","mousedown","click","touchmove","touchstart","touchend","keydown","keypress"];this._usernameVariableName="__CURRENT_USER.NAME";this._fullNameVariableName="__CURRENT_USER.FULLNAME";this._groupTextVariableName="__CURRENT_USER.GROUPTEXT";this._groupNameVariableName="__CURRENT_USER.GROUPNAME";this._userLevelVariableName="__CURRENT_USER.LEVEL";this._languageCultureInfoVariableName="__CURRENT_LANGUAGE.CULTUREINFO";this._languageLanguageVariableName="__CURRENT_LANGUAGE.LANGUAGE";this._languageLCIDVariableName="__CURRENT_LANGUAGE.LCID";this._languageLocaleVariableName="__CURRENT_LANGUAGE.LOCALE";this._secondsToLogOffVariableName="__CURRENT_USER.SECONDS_TO_AUTOLOGOFF";this._currentPageVariableName="__CURRENT_PAGE.NAME";this._controlAttributeName="data-win-control";this._navigationControlName=VisiWin.UI.AppPageNavigator.controlName;this._navigationEvent="navigated";this._userChangeHandler=this._onUserChange.bind(this);this._languageChangeHandler=this._onLanguageChange.bind(this);this._navigatedHandler=this._onNavigated.bind(this);this._preloadingChangedHandler=this._onPreloadingChanged.bind(this);this._userManagementModifiedHandler=this._onUserManagementModified.bind(this);this._userService=VisiWin.System.UserManagement.UserManagementService.getService();this._userService.UserLoggedOn.add(this._userChangeHandler);this._userService.UserLoggedOff.add(this._userChangeHandler);this._userService.GroupsModified.add(this._userManagementModifiedHandler);this._userService.RightsModified.add(this._userManagementModifiedHandler);this._userService.UsersModified.add(this._userManagementModifiedHandler);this._languageService=VisiWin.System.Language.LanguageService.getService();this._languageService.LanguageChanged.add(this._languageChangeHandler)}init(){this._navigationService=VisiWin.AppServices.NavigationService;this._navigationService.addEventListener("navigated",this._navigatedHandler);this._navigationService.addEventListener("preloadingchange",this._preloadingChangedHandler)}async ready(){if(VisiWin.Utilities.isInDesignMode())return;this._validVersion=this._isValidVisiWinVersion();if(!this._validVersion)this._throwInvalidVersionMessage();this._variableService=VisiWin.System.DataAccess.VariableService.getService();this._usernameVariable=this._getVariable(this._usernameVariableName);this._fullNameVariable=this._getVariable(this._fullNameVariableName);this._groupTextVariable=this._getVariable(this._groupTextVariableName);this._groupNameVariable=this._getVariable(this._groupNameVariableName);this._languageLanguageVariable=this._getVariable(this._languageLanguageVariableName);this._languageLCIDVariable=this._getVariable(this._languageLCIDVariableName);this._languageCultureInfoVariable=this._getVariable(this._languageCultureInfoVariableName);this._languageLocaleVariable=this._getVariable(this._languageLocaleVariableName);this._secondsToLogOffVariable=this._getVariable(this._secondsToLogOffVariableName);this._currentPageVariable=this._getVariable(this._currentPageVariableName);const potentialNavigators=document.querySelectorAll(`[${this._controlAttributeName}="${this._navigationControlName}"]`);potentialNavigators.forEach(value=>{var _a;return(_a=value.winControl)===null||_a===void 0?void 0:_a.addEventListener(this._navigationEvent,this._navigatedHandler)})}idleLogout(secondsToAutoLogOff,timer){window.onload=resetTimer;window.onmousemove=resetTimer;window.onmousedown=resetTimer;window.ontouchstart=resetTimer;window.ontouchmove=resetTimer;window.onclick=resetTimer;window.onkeydown=resetTimer;window.addEventListener("scroll",resetTimer,true);function inactivityEvent(){console.log("no activity");window.location.reload()}function resetTimer(){clearTimeout(timer);if(secondsToAutoLogOff>0){timer=setTimeout(inactivityEvent,secondsToAutoLogOff*1e3)}}}unload(){}dispose(){if(VisiWin.Utilities.isInDesignMode())return;this._languageService.LanguageChanged.remove(this._languageChangeHandler);this._userService.UserLoggedOn.remove(this._userChangeHandler);this._userService.GroupsModified.remove(this._onUserManagementModified);this._userService.UsersModified.remove(this._onUserManagementModified);this._userService.RightsModified.remove(this._onUserManagementModified)}async _onPreloadingChanged(args){if(args.detail.preloadingReady){this._onUserManagementModified(null)}}async _onNavigated(args){if(Object.values(args).length===0&&args.constructor===Object)return;var pageFullPath=args.detail.location;if(pageFullPath.split("/")[0]!="pages")return;var pageName=/[^/]*$/.exec(pageFullPath)[0];pageName=/[^.]*/.exec(pageName)[0];try{var promises=[this._setValueAsync(this._currentPageVariable,pageName)];await Promise.all(promises)}catch(_a){}}async _onUserManagementModified(args){VisiWin.AppServices.UserManagementService.forceUserManagementUpdate()}async _onUserChange(args){try{clearTimeout(this.timer);let _userServiceVariables=new Array(this._usernameVariable.Name,this._fullNameVariable.Name,this._groupNameVariable.Name);let _userServiceValues=new Array(this._userService.CurrentUser.Name,this._userService.CurrentUser.FullName,this._userService.CurrentUser.GroupName);this._setValuesAsync(_userServiceVariables,_userServiceValues);VisiWin.AppServices.UserManagementService.forceUserManagementUpdate()}catch(_a){}}async _onLanguageChange(args){try{let _languageLanguageVariables=new Array(this._languageLanguageVariable.Name,this._languageLCIDVariable.Name,this._languageCultureInfoVariable.Name,this._languageLocaleVariable.Name);let _languageLanguageValues=new Array(this._languageService.CurrentLanguage.NativeName,this._languageService.CurrentLCID.toString(),this._languageService.CurrentLanguage.CultureDisplayName,this._languageService.CurrentLanguage.Locale);var promises=[this._setValuesAsync(_languageLanguageVariables,_languageLanguageValues)];Promise.all(promises)}catch(_a){}}_getVariable(variableName){const variable=this._variableService.GetVariable(variableName);this._attachAsync(variable);return variable}_isValid(variable){return variable!=null}async _attachAsync(variable){if(!this._isValid(variable))return;await variable.AttachAsync()}async _setValueAsync(variable,value){if(!this._isValid(variable))return;await this._variableService.SetValueAsync(variable.Name,value)}async _setValuesAsync(variableNames,values){if(!VisiWin.isArray(variableNames)||variableNames.length==0)return;await this._variableService.SetValuesAsync(variableNames,values)}_throwInvalidVersionMessage(){const message=`Invalid visiwinjs version detected. The Lenze libraries require the visiwinjs version to be at least '${LenzeApplicationService.minimumVisiWinJSVersion}' with build '${LenzeApplicationService.minimumVisiWinJSBuild}'.\r\nUpgrade the visiwinjs libraries to at least this version or request the Lenze libraries that support this visiwinjs version.`;if(!LenzeApplicationService.throwVisiWinJSVersionError){console.error(message);return}try{VisiWin.System.Diagnostics.Logger.ErrorLog.log(message)}catch(_a){alert(message)}}_isValidVisiWinVersion(){const versionInfo=VisiWin.Application.appVersion.modulVersionList["visiwinjs.js"];return this._isNewerOrEqualVersion(versionInfo.version,LenzeApplicationService.minimumVisiWinJSVersion)}_isNewerOrEqualVersion(version1,version2){try{const version1Values=version1.split(".").map(value=>Number.parseInt(value));const version2Values=version2.split(".").map(value=>Number.parseInt(value));for(let i=0;i<version1Values.length;i++){if(version1Values[i]>version2Values[i])return true;if(version1Values[i]<version2Values[i])return false}return true}catch(error){console.error("Unable to compare versions!",error);return false}}}LenzeApplicationService.namespace="VisiWin.AppServices.Impl";LenzeApplicationService.serviceName="LenzeApplicationService";LenzeApplicationService.requireServices=["VariableService"];LenzeApplicationService.minimumVisiWinJSVersion="73.4.56.0";LenzeApplicationService.minimumVisiWinJSBuild="2022-10-07";LenzeApplicationService.throwVisiWinJSVersionError=true;Impl.LenzeApplicationService=LenzeApplicationService;AppServices.Impl.registerAppService(LenzeApplicationService.serviceName)})(Impl=AppServices.Impl||(AppServices.Impl={}))})(AppServices=VisiWin.AppServices||(VisiWin.AppServices={}))})(VisiWin||(VisiWin={}));"use strict";var VisiWin;(function(VisiWin){var AppServices;(function(AppServices){var Impl;(function(Impl){"use strict";class CertificateHandlerService extends VisiWin.AppServices.Impl.ServiceBase{constructor(){super();this._componentIds=null}async getServiceEnabledAsync(){await this._initTask;return true}async getLicenseAsync(){await this._initTask;return null}getComponentIdsFilter(){const ids=this._componentIds;this._componentIds=null;return ids}setComponentIdsFilter(ids){this._componentIds=ids}init(){if(VisiWin.Utilities.isInDesignMode())return;this._variableService=VisiWin.System.DataAccess.VariableService.getService();this._variableChangeHandler=this._onVariableChange.bind(this);this.createEvent(VisiWin.AppServices.Impl.FastLicenseService.valuesChangeEventName);this._initTask=this._initAsync()}ready(){}unload(){}dispose(){}async _initAsync(){}_setLicenseValue(){}_onVariableChange(){this._setLicenseValue();this.dispatchEvent(VisiWin.AppServices.Impl.CertificateHandlerService.valuesChangeEventName,null)}}CertificateHandlerService.namespace="VisiWin.AppServices.Impl";CertificateHandlerService.serviceName="CertificateHandlerService";CertificateHandlerService.requireServices=["VariableService"];CertificateHandlerService.valuesChangeEventName="onvalueschange";CertificateHandlerService.AddCertificateVariableName="__CERTIFICATE_HANDLER.ADDCERTIFICATE";CertificateHandlerService.DeleteCertificateVariableName="__CERTIFICATE_HANDLER.DELETECERTIFICATE";Impl.CertificateHandlerService=CertificateHandlerService;AppServices.Impl.registerAppService(CertificateHandlerService.serviceName)})(Impl=AppServices.Impl||(AppServices.Impl={}))})(AppServices=VisiWin.AppServices||(VisiWin.AppServices={}))})(VisiWin||(VisiWin={}));"use strict";var VisiWin;(function(VisiWin){var AppServices;(function(AppServices){var Impl;(function(Impl){"use strict";class LenzeDialogService extends VisiWin.AppServices.Impl.ServiceBase{get _dialogElement(){var _a,_b;return(_b=(_a=this._dialogControl)===null||_a===void 0?void 0:_a.element)!==null&&_b!==void 0?_b:null}get _alertDialogElement(){var _a,_b;return(_b=(_a=this._alertDialogControl)===null||_a===void 0?void 0:_a.element)!==null&&_b!==void 0?_b:null}get _isShowingDialog(){return this._dialogControl!=null}get _isShowingAlertDialog(){return this._alertDialogElement!=null}get canShowDialog(){return!this._isShowingDialog&&document.body!=null}get canShowAlertDialog(){return!this._isShowingAlertDialog&&document.body!=null&&this._alertDialogResult==null}constructor(){super();this._dialogControl=null;this._alertDialogControl=null;this._alertDialogResult=null;if(VisiWin.Utilities.isInDesignMode())return;this._dialogResultHandler=this._onDialogResult.bind(this);this._alertDialogResultHandler=this._onAlertDialogResult.bind(this);this._escapeKeyHandler=(event=>this._onEscapeKeyPress(event,true)).bind(this);this._alertEscapeKeyHandler=(event=>this._onEscapeKeyPress(event,false)).bind(this);this.createEvent(LenzeDialogService.closeDialogEventName)}init(){if(VisiWin.Utilities.isInDesignMode())return}showDialog(dialogName){if(!this.canShowDialog)return false;var dialogElement=document.createElement("div");var dialogOptions={anchor:null,placement:null,alignment:null,mode:"Modal",dialogName:dialogName,dialogScrimColor:null};document.body.insertBefore(dialogElement,document.body.firstElementChild);this._dialogControl=new VisiWin.UI["Dialog"](dialogElement,dialogOptions);if(!this._dialogControl){return false}this._dialogControl.dispatchEvent("result","RESULTDIALOG_OPENDIALOG");this._dialogControl.show();document.addEventListener("keydown",this._escapeKeyHandler,{capture:true});this._dialogControl.addEventListener("result",this._dialogResultHandler);return true}async showAlertDialogAsync(dialogInfo){try{if(!this.canShowAlertDialog)throw new Error("Unable to show AlertDialog. Either an AlertDialog is already being showed or the document body is not ready.");const dialogElement=document.createElement("div");const dialogOptions={anchor:null,placement:null,alignment:null,mode:"Modal",dialogName:"dialogs/AlertDialog.html",dialogScrimColor:null};if(VisiWin&&VisiWin.Observables&&VisiWin.Observables.AlertDialog){VisiWin.Observables.AlertDialog.style="Plain.Default";VisiWin.Observables.AlertDialog.titleText=dialogInfo.titleText;VisiWin.Observables.AlertDialog.localizableTitleText=dialogInfo.titleLocalizableText;VisiWin.Observables.AlertDialog.contentText=dialogInfo.contentText;VisiWin.Observables.AlertDialog.localizableContentText=dialogInfo.contentLocalizableText;VisiWin.Observables.AlertDialog.action1ButtonText=dialogInfo.button1Text;VisiWin.Observables.AlertDialog.localizableAction1ButtonText=dialogInfo.button1LocalizableText;VisiWin.Observables.AlertDialog.action2ButtonText=dialogInfo.button2Text;VisiWin.Observables.AlertDialog.localizableAction2ButtonText=dialogInfo.button2LocalizableText;VisiWin.Observables.AlertDialog.showAction1Button=dialogInfo.showButton1;VisiWin.Observables.AlertDialog.showAction2Button=dialogInfo.showButton2}else throw new Error('VisiWin.Observables.AlertDialog: Observables object "AlertDialog" not found.');document.body.insertBefore(dialogElement,document.body.firstElementChild);this._alertDialogControl=new VisiWin.UI["Dialog"](dialogElement,dialogOptions);if(this._alertDialogControl){this._alertDialogControl.addEventListener("result",this._alertDialogResultHandler);this._alertDialogControl.dispatchEvent("result","RESULTDIALOG_OPENDIALOG")}this._alertDialogResult=null;document.addEventListener("keydown",this._alertEscapeKeyHandler,{capture:true});this._alertDialogControl.show();while(this._alertDialogResult==null)await this._sleep(250);document.removeEventListener("keydown",this._alertEscapeKeyHandler,{capture:true});return this._alertDialogResult}finally{this._alertDialogResult=null}}closeDialog(){if(this._dialogControl==null)return;setTimeout(()=>{if(this._dialogControl){this._dialogControl.hide("RESULTDIALOG_HIDE")}},0)}_onDialogResult(args,p2){if(args.detail!="RESULTDIALOG_OPTION"&&args.detail!="RESULTDIALOG_OPENDIALOG"){window.setImmediate(()=>{var _a,_b;if(!this._isShowingDialog)return;document.removeEventListener("keydown",this._escapeKeyHandler,{capture:true});(_a=this._dialogControl)===null||_a===void 0?void 0:_a.removeEventListener("result",this._dialogResultHandler);if(((_b=this._dialogElement)===null||_b===void 0?void 0:_b.parentElement)!=null){document.body.removeChild(this._dialogElement);if(this._dialogControl!=null)this._dialogControl.dispose();this._dialogControl=null;this.dispatchEvent(LenzeDialogService.closeDialogEventName,{})}})}}_onAlertDialogResult(args,p2){if(args.detail!="RESULTDIALOG_OPTION"&&args.detail!="RESULTDIALOG_OPENDIALOG"){window.setImmediate(()=>{var _a,_b;if(!this._isShowingAlertDialog)return;this._alertDialogResult=args.detail=="Action2Button";(_a=this._alertDialogControl)===null||_a===void 0?void 0:_a.removeEventListener("result",this._alertDialogResultHandler);if(((_b=this._alertDialogElement)===null||_b===void 0?void 0:_b.parentElement)!=null){document.body.removeChild(this._alertDialogElement);if(this._alertDialogControl!=null)this._alertDialogControl.dispose();this._alertDialogControl=null}})}}_onEscapeKeyPress(event,closeDialog){if(event.key!=="Escape")return;event.preventDefault();event.stopPropagation();event.stopImmediatePropagation();if(closeDialog)this.closeDialog()}_sleep(ms){return new Promise(resolve=>setTimeout(resolve,ms))}}LenzeDialogService.namespace="VisiWin.AppServices.Impl";LenzeDialogService.serviceName="LenzeDialogService";LenzeDialogService.requireServices=["AppService"];LenzeDialogService.closeDialogEventName="onDialogClose";Impl.LenzeDialogService=LenzeDialogService;VisiWin.AppServices.Impl.registerAppService(LenzeDialogService.serviceName)})(Impl=AppServices.Impl||(AppServices.Impl={}))})(AppServices=VisiWin.AppServices||(VisiWin.AppServices={}))})(VisiWin||(VisiWin={}));"use strict";var VisiWin;(function(VisiWin){var AppServices;(function(AppServices){var Impl;(function(Impl){"use strict";class LenzeKeyboardService extends VisiWin.AppServices.Impl.ServiceBase{get getDialogInformation(){return this._currentDialogInformation}constructor(){super();this._resourceLocation="resources/virtualkeyboard/keyboardlayouts.json";this._alphabeticDialogName="dialogs/keyboards/AlphabeticalKeyboardDialog.html";this._alphabeticLightDialogName="dialogs/keyboards/AlphabeticalLightKeyboardDialog.html";this._numericDialogName="dialogs/keyboards/NumericKeyboardDialog.html";this._fallbackKeyboardLayout={alphaNormal:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{clear} q w e r t y u i o p [ ] \\","{lock} a s d f g h j k l ; ' {enter}","{shift} z x c v b n m , . / {shift}","{space}"],alphaShift:["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{clear} Q W E R T Y U I O P { } |",'{lock} A S D F G H J K L : " {enter}',"{shift} Z X C V B N M < > ? {shift}","{space}"]};this._fallbackNumericKeyboard=["1 2 3","4 5 6","7 8 9","{dec} 0 {negpos}","{bksp} {enter}"];this._currentDialogInformation=null;if(VisiWin.Utilities.isInDesignMode())return;this.createEvent(LenzeKeyboardService.dialogCloseEventName);this.createEvent(LenzeKeyboardService.dialogEnterKeyEventName);this._dialogService=VisiWin.AppServices.LenzeDialogService;this._dialogCloseHandler=this._onDialogClose.bind(this);this._initPromise=this._initServiceAsync();this._initPromise.then(_=>this._initPromise=null);document.body.addEventListener("touchstart",this._onPointerDown,false);document.body.addEventListener("mousedown",this._onPointerDown,false)}init(){if(VisiWin.Utilities.isInDesignMode())return}async ready(){}dispose(){if(VisiWin.Utilities.isInDesignMode())return;document.body.removeEventListener("touchstart",this._onPointerDown,false);document.body.removeEventListener("mousedown",this._onPointerDown,false)}_onPointerDown(ev){var _a,_b,_c,_d,_e;if(ev!==undefined){LenzeKeyboardService.pointerElementBeforeName=LenzeKeyboardService.pointerElementName;if(ev.target.winControl===undefined){LenzeKeyboardService.pointerElementName=(_c=(_b=(_a=ev.target)===null||_a===void 0?void 0:_a.parentElement)===null||_b===void 0?void 0:_b.winControl)===null||_c===void 0?void 0:_c.className}else{LenzeKeyboardService.pointerElementName=(_e=(_d=ev.target)===null||_d===void 0?void 0:_d.winControl)===null||_e===void 0?void 0:_e.className}if(window.matchMedia("(any-pointer: coarse)").matches){}if(matchMedia("(pointer:fine)").matches){LenzeKeyboardService.pointerElementBeforeName=LenzeKeyboardService.pointerElementName}}}async getKeyboardResource(){if(this._initPromise!=null)await this._initPromise;return this._keyboardSettings}async getAlphabeticalLayout(languageTag=null){const keyboardResource=await this.getKeyboardResource();if(Lenze.Strings.isNullOrWhiteSpace(keyboardResource===null||keyboardResource===void 0?void 0:keyboardResource.default))return this._fallbackKeyboardLayout;if(!VisiWin.isString(keyboardResource.default)){console.error(`The default property in the keyboard resources file must be a string. Fallback keyboard layout (en-US) will be used instead.`);return this._fallbackKeyboardLayout}const potentialDefaultLayout=keyboardResource.languages[keyboardResource.default];if(potentialDefaultLayout==null){console.error(`The default property in the resources must refer an existing keyboard, current value: '${keyboardResource.default}'. Fallback keyboard layout (en-US) will be used instead.`);return this._fallbackKeyboardLayout}if(VisiWin.isString(potentialDefaultLayout)){console.error(`The default keyboard may not be a reference. Fallback keyboard layout (en-US) will be used instead.`);return this._fallbackKeyboardLayout}const defaultLayout=potentialDefaultLayout;if(Lenze.Strings.isNullOrWhiteSpace(languageTag)){return defaultLayout}let potentialLayout=keyboardResource.languages[languageTag];if(potentialLayout==null){console.warn(`Corresponding keyboard for language '${languageTag}' could not be found. The default keyboard (${keyboardResource.default}) is used instead.`);return defaultLayout}if(VisiWin.isString(potentialLayout)){const potentialLayout2=keyboardResource.languages[potentialLayout];if(potentialLayout2==null){console.warn(`Corresponding keyboard for language '${potentialLayout}' which is referenced from '${languageTag}' could not be found. The default keyboard (${keyboardResource.default}) is used instead.`);return defaultLayout}if(VisiWin.isString(potentialLayout2)){console.error(`The keyboard resource file may not contain a multi reference. Starting with tag '${languageTag}' linking to '${potentialLayout2}' which is a reference and not a keyboard. It's only allowed to reference a keyboard layout, not a key which is also a reference to another layout. The default keyboard (${keyboardResource.default}) is used instead.`);return defaultLayout}potentialLayout=potentialLayout2}return potentialLayout}async getNumericLayout(){const keyboardResource=await this.getKeyboardResource();if((keyboardResource===null||keyboardResource===void 0?void 0:keyboardResource.numeric)==null||!VisiWin.isArray(keyboardResource.numeric)||keyboardResource.numeric.length==0){if(!VisiWin.Utilities.isInDesignMode())console.warn(`No numeric keyboard can be found in the resources, or it's not a string based array or it's an empty array. The default will be used instead.`);return this._fallbackNumericKeyboard}return keyboardResource.numeric}generateRandomId(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)}triggerKeyboardDialogEnter(value){this.dispatchEvent(LenzeKeyboardService.dialogEnterKeyEventName,value)}showKeyboardDialog(keyboardDialog){if(!this._dialogService.canShowDialog)return false;this._currentDialogInformation=keyboardDialog;var result=this._dialogService.showDialog(keyboardDialog.keyboardType==Lenze.Models.KeyboardTypeEnum.Numeric?this._numericDialogName:keyboardDialog.light?this._alphabeticLightDialogName:this._alphabeticDialogName);if(result)this._dialogService.addEventListener(VisiWin.AppServices.Impl.LenzeDialogService.closeDialogEventName,this._dialogCloseHandler);else this._currentDialogInformation=null;return result}closeKeyboardDialog(){if(this._currentDialogInformation==null)return;this._dialogService.closeDialog()}getAmountOfDecimalPlaces(value){const decimals=value.split(".")[1];return decimals==null||decimals===""?0:decimals.length}async _initServiceAsync(){try{const response=await fetch(this._resourceLocation);this._keyboardSettings=await response.json()}catch(error){console.error(`Failed to load in the keyboard resources from '${this._resourceLocation}'. The keyboard will be the fallback keyboard (en-US) and will not change when the language changes.`);console.error(error)}}_onDialogClose(){this.dispatchEvent(LenzeKeyboardService.dialogCloseEventName,{});this._dialogService.removeEventListener(VisiWin.AppServices.Impl.LenzeDialogService.closeDialogEventName,this._dialogCloseHandler);this._currentDialogInformation=null}}LenzeKeyboardService.namespace="VisiWin.AppServices.Impl";LenzeKeyboardService.serviceName="LenzeKeyboardService";LenzeKeyboardService.requireServices=[];LenzeKeyboardService.dialogEnterKeyEventName="onKeyboardDialogEnter";LenzeKeyboardService.dialogCloseEventName="onKeyboardDialogClose";LenzeKeyboardService.pointerElementName="";LenzeKeyboardService.pointerElementBeforeName="";Impl.LenzeKeyboardService=LenzeKeyboardService;VisiWin.AppServices.Impl.registerAppService(LenzeKeyboardService.serviceName)})(Impl=AppServices.Impl||(AppServices.Impl={}))})(AppServices=VisiWin.AppServices||(VisiWin.AppServices={}))})(VisiWin||(VisiWin={}));"use strict";var VisiWin;(function(VisiWin){var AppServices;(function(AppServices){var Impl;(function(Impl){"use strict";class FastLicenseService extends VisiWin.AppServices.Impl.ServiceBase{constructor(){super();this._licenseVariableName="__FAST.LLM.LicenseManager";this._licenseValue=null;this._licenseVariableValid=false;this._componentIds=null}async getServiceEnabledAsync(){await this._initTask;return this._licenseVariableValid}async getLicenseAsync(){await this._initTask;return this._licenseValue}getComponentIdsFilter(){const ids=this._componentIds;this._componentIds=null;return ids}setComponentIdsFilter(ids){this._componentIds=ids}init(){if(VisiWin.Utilities.isInDesignMode())return;this._variableService=VisiWin.System.DataAccess.VariableService.getService();this._variableChangeHandler=this._onVariableChange.bind(this);this.createEvent(VisiWin.AppServices.Impl.FastLicenseService.valuesChangeEventName);this._initTask=this._initAsync()}ready(){}unload(){}dispose(){if(!this._licenseVariableValid)return;this._licenseVariable.Change.remove(this._variableChangeHandler)}async _initAsync(){var _a;this._licenseVariable=this._variableService.GetVariable(this._licenseVariableName);await((_a=this._licenseVariable)===null||_a===void 0?void 0:_a.AttachAsync());this._licenseVariableValid=this._licenseVariable!=null&&this._licenseVariable.IsAttached&&this._licenseVariable.IsValid;if(!this._licenseVariableValid)return;this._licenseVariable.Change.add(this._variableChangeHandler);this._setLicenseValue()}_setLicenseValue(){if(!this._licenseVariableValid||Lenze.Strings.isNullOrWhiteSpace(this._licenseVariable.Value)){this._licenseValue=null;return}this._licenseValue=Lenze.Models.LicenseResponse.fromJS(JSON.parse(this._licenseVariable.Value))}_onVariableChange(){this._setLicenseValue();this.dispatchEvent(VisiWin.AppServices.Impl.FastLicenseService.valuesChangeEventName,null)}}FastLicenseService.namespace="VisiWin.AppServices.Impl";FastLicenseService.serviceName="FastLicenseService";FastLicenseService.requireServices=["VariableService"];FastLicenseService.valuesChangeEventName="onvalueschange";FastLicenseService.RemainingBudgetName="Remaining Application Credit";Impl.FastLicenseService=FastLicenseService;AppServices.Impl.registerAppService(FastLicenseService.serviceName)})(Impl=AppServices.Impl||(AppServices.Impl={}))})(AppServices=VisiWin.AppServices||(VisiWin.AppServices={}))})(VisiWin||(VisiWin={}));"use strict";var VisiWin;(function(VisiWin){var AppServices;(function(AppServices){var Impl;(function(Impl){"use strict";class FastLogbookService extends VisiWin.AppServices.Impl.ServiceBase{constructor(){super();this._timeOutDuration=12e3;this._logbookTimeOutDuration=1e4;this._validateRequestDelay=300;this._infiniteLoopDelay=100;this._logbookFieldnameKeys=Object.keys(Lenze.Models.LogbookFieldNameEnum);this._logbookFieldnameValues=Object.values(Lenze.Models.LogbookFieldNameEnum);this._currentRequests=[];this._currentRequest=null;this._componentNames=[];this._logbookEnabled=false;this._logbookChanged=false}async getLogbookAsync(id,filterOptions){if(!await this.getLogbookEnabledAsync())return null;return await this._makeRequestAsync({id:id,requestTime:(new Date).toISOString(),filterOptions:filterOptions})}async clearRequestAsync(id){if(!await this.getLogbookEnabledAsync())return;this._removeRequestById(id)}async clearRequestsAsync(){if(!await this.getLogbookEnabledAsync())return;this._currentRequests=[]}async getLogbookEnabledAsync(){await this._initTask;return this._logbookEnabled}getComponentNamesFilter(){const names=this._componentNames;this._componentNames=[];return names}setComponentNamesFilter(names){this._componentNames=names}getRandomString(length=null){var arr=new Uint8Array((length||40)/2);window.crypto.getRandomValues(arr);return Array.from(arr,dec=>dec.toString(16).padStart(2,"0")).join("")}init(){if(VisiWin.Utilities.isInDesignMode())return;this._currentRequestVariableChangeHandler=this._onRequestVariableChanged.bind(this);this._logbookValueChangedHandler=this._onLogbookValueChanged.bind(this);this._variableService=VisiWin.System.DataAccess.VariableService.getService();this._moduleService=VisiWin.AppServices.FastModuleService;this._initTask=this._initAsync()}ready(){if(VisiWin.Utilities.isInDesignMode())return;this._initTask.then(_=>{if(!this._logbookEnabled)return;this._currentLogbookRequestVariable.Change.add(this._currentRequestVariableChangeHandler);this._logbookResponseVariable.Change.add(this._logbookValueChangedHandler)})}unload(){}dispose(){if(VisiWin.Utilities.isInDesignMode()||!this._logbookEnabled)return;this._currentLogbookRequestVariable.Change.remove(this._currentRequestVariableChangeHandler);this._logbookResponseVariable.Change.remove(this._logbookValueChangedHandler)}async _initAsync(){var _a,_b,_c;this._requestFilterVariable=this._variableService.GetVariable(FastLogbookService.RequestFilterVariableName);this._currentLogbookRequestVariable=this._variableService.GetVariable(FastLogbookService.CurrentLogbookRequestVariableName);this._logbookResponseVariable=this._variableService.GetVariable(FastLogbookService.LogbookResponseVariableName);await Promise.all([(_a=this._requestFilterVariable)===null||_a===void 0?void 0:_a.AttachAsync(),(_b=this._currentLogbookRequestVariable)===null||_b===void 0?void 0:_b.AttachAsync(),(_c=this._logbookResponseVariable)===null||_c===void 0?void 0:_c.AttachAsync()]);const modulesEnabled=await this._moduleService.getModulesEnabledAsync();this._logbookEnabled=modulesEnabled&&this._isVariableValid(this._requestFilterVariable)&&this._isVariableValid(this._currentLogbookRequestVariable)&&this._isVariableValid(this._logbookResponseVariable)}async _makeRequestAsync(requestItem){var _a,_b;const existingRequest=this._currentRequests.filter(value=>requestItem.id===value.id)[0];if(existingRequest!=null&&!this._hasTimedOut(existingRequest,this._timeOutDuration)){console.error("Cannot make a request for the logbook with an id while the previous request with that id is still busy...");return null}this._addToCurrentRequests(requestItem);while(true){if(this._canMakeRequest()){await this._updateRequestVariableAsync(requestItem);await this._sleep(this._validateRequestDelay);if(this._currentRequest!=null&&this._currentRequest.id===requestItem.id)break}if(await this._isRequestCancelledAsync(requestItem))return null}this._logbookChanged=false;const filterValue={T:(new Date).toISOString(),V:requestItem.filterOptions};await this._variableService.SetValueAsync(this._requestFilterVariable.Name,JSON.stringify(filterValue));while(!this._logbookChanged){const result=await this._isRequestCancelledAsync(requestItem);if(result)return null;const timeoutResult=this._hasTimedOut(requestItem,this._logbookTimeOutDuration);if(timeoutResult)return null}const response=JSON.parse(this._logbookResponseVariable.Value);this._logbookChanged=false;this._updateRequestVariableAsync(null);await this._removeRequestById(requestItem.id);const result=response.V==null||!Array.isArray(response.V)?[]:response.V.map(value=>Lenze.Models.LogbookResponse.fromJS(value));const components=await this._moduleService.getComponentsAsync();for(var item of result){const component=!Lenze.Strings.isNullOrWhiteSpace(item.instanceId)?components.find(value=>value.instanceID===item.instanceId.toLowerCase()):null;item.componentName=component!=null?component.name:"";item.componentType=component!=null?component.componentType:-1}const orderBy=(_b=(_a=response.O)===null||_a===void 0?void 0:_a.map(value=>{return{fieldName:this._logbookFieldnameKeys[this._logbookFieldnameValues.indexOf(value.field)],descending:value.direction===1}}))!==null&&_b!==void 0?_b:null;return{data:result,pageNumber:requestItem.filterOptions.pageNumber,pageSize:requestItem.filterOptions.pageSize,orderBy:orderBy}}_canMakeRequest(){if(this._currentRequest==null)return true;return this._hasTimedOut(this._currentRequest,this._timeOutDuration)}_hasTimedOut(request,timeoutDuration){const currentTime=(new Date).getTime();const requestTime=new Date(request.requestTime).getTime();return currentTime-requestTime>timeoutDuration}_sleep(ms){return new Promise(resolve=>setTimeout(resolve,ms))}_addToCurrentRequests(requestItem){this._currentRequests.push(requestItem)}_removeRequestById(id){const index=this._currentRequests.findIndex(value=>value.id===id);if(index===-1)return;this._currentRequests.splice(index,1)}async _isRequestCancelledAsync(requestItem,sleep=true){if(this._currentRequests.findIndex(r=>r.id==requestItem.id)===-1)return true;if(sleep)await this._sleep(this._infiniteLoopDelay);return false}async _updateRequestVariableAsync(requestItem){const isNull=requestItem==null;if(!isNull)requestItem.requestTime=(new Date).toISOString();await this._variableService.SetValueAsync(this._currentLogbookRequestVariable.Name,isNull?"":JSON.stringify(requestItem))}_onRequestVariableChanged(){const value=this._currentLogbookRequestVariable.Value;this._currentRequest=!Lenze.Strings.isNullOrWhiteSpace(value)?JSON.parse(value):null}_onLogbookValueChanged(args){this._logbookChanged=true}_isVariableValid(variable){return variable!=null&&variable.IsAttached&&variable.IsValid}}FastLogbookService.namespace="VisiWin.AppServices.Impl";FastLogbookService.serviceName="FastLogbookService";FastLogbookService.requireServices=["VariableService","FastModuleService"];FastLogbookService.RequestFilterVariableName="__FAST.LEM.RequestLogbookFilter";FastLogbookService.CurrentLogbookRequestVariableName="__FAST.LEM.RequestLogbookQueue";FastLogbookService.LogbookResponseVariableName="__FAST.LEM.Logbook";FastLogbookService.UpdateLogbookVariableName="__FAST.LEM.UpdateLogbook";FastLogbookService.DeleteLogbookVariableName="__FAST.LEM.DeleteLogbook";Impl.FastLogbookService=FastLogbookService;AppServices.Impl.registerAppService(FastLogbookService.serviceName)})(Impl=AppServices.Impl||(AppServices.Impl={}))})(AppServices=VisiWin.AppServices||(VisiWin.AppServices={}))})(VisiWin||(VisiWin={}));"use strict";var VisiWin;(function(VisiWin){var AppServices;(function(AppServices){var Impl;(function(Impl){"use strict";class FastModuleService extends VisiWin.AppServices.Impl.ServiceBase{constructor(){super();this._deviceTreeVariableName="__FAST.LMH.DeviceTree";this._modulesEnabled=false;this._moduleResponse=null;this._filteredComponents=[]}async getComponentsAsync(){var _a,_b;if(!this.getModulesEnabledAsync())return null;if(this._moduleResponse==null)await this._setViewsAndComponentsAsync();return(_b=(_a=this._moduleResponse)===null||_a===void 0?void 0:_a.components)!==null&&_b!==void 0?_b:[]}async getApplicationViewAsync(){var _a,_b;if(!this.getModulesEnabledAsync())return null;if(this._moduleResponse==null)await this._setViewsAndComponentsAsync();return(_b=(_a=this._moduleResponse)===null||_a===void 0?void 0:_a.applicationView)!==null&&_b!==void 0?_b:null}async getCommunicationViewAsync(){var _a,_b;if(!this.getModulesEnabledAsync())return null;if(this._moduleResponse==null)await this._setViewsAndComponentsAsync();return(_b=(_a=this._moduleResponse)===null||_a===void 0?void 0:_a.communicationView)!==null&&_b!==void 0?_b:null}async getModulesEnabledAsync(){await this._initTask;return this._modulesEnabled}getComponentsFilter(){const components=this._filteredComponents;this._filteredComponents=[];return components}setComponentsFilter(components){this._filteredComponents=components}init(){if(VisiWin.Utilities.isInDesignMode())return;this._variableService=VisiWin.System.DataAccess.VariableService.getService();this._variableChangeHandler=this._onVariableChangeAsync.bind(this);this.createEvent(VisiWin.AppServices.Impl.FastModuleService.valuesChangeEventName);this._initTask=this._initAsync()}ready(){}unload(){}dispose(){if(!this._modulesEnabled)return;this._deviceTreeVariable.Change.remove(this._variableChangeHandler)}async _initAsync(){var _a;this._deviceTreeVariable=this._variableService.GetVariable(this._deviceTreeVariableName);await((_a=this._deviceTreeVariable)===null||_a===void 0?void 0:_a.AttachAsync());this._modulesEnabled=this._deviceTreeVariable!=null&&this._deviceTreeVariable.IsAttached&&this._deviceTreeVariable.IsValid;if(this._modulesEnabled)this._deviceTreeVariable.Change.add(this._variableChangeHandler)}async _setViewsAndComponentsAsync(){const jsObject=JSON.parse(this._deviceTreeVariable.Value);this._moduleResponse=jsObject!=null?Lenze.Models.ModuleResponse.fromJS(jsObject):null}async _onVariableChangeAsync(){await this._setViewsAndComponentsAsync();this.dispatchEvent(VisiWin.AppServices.Impl.FastModuleService.valuesChangeEventName,null)}}FastModuleService.namespace="VisiWin.AppServices.Impl";FastModuleService.serviceName="FastModuleService";FastModuleService.requireServices=["VariableService"];FastModuleService.valuesChangeEventName="onvalueschange";Impl.FastModuleService=FastModuleService;AppServices.Impl.registerAppService(FastModuleService.serviceName)})(Impl=AppServices.Impl||(AppServices.Impl={}))})(AppServices=VisiWin.AppServices||(VisiWin.AppServices={}))})(VisiWin||(VisiWin={}));"use strict";var Lenze;(function(Lenze){var Actions;(function(Actions){"use strict";class AcknowledgeAllAlarmsAction extends Lenze.Actions.ActionBase{constructor(){super();this.addPropertyList(AcknowledgeAllAlarmsAction,AcknowledgeAllAlarmsAction.propertyList)}async execute(value,element,triggerData){if(this._alarmService.AcknowledgeAllAlarms)this._alarmService.AcknowledgeAllAlarms()}init(element,triggerData){if(VisiWin.Utilities.isInDesignMode())return;this._alarmService=VisiWin.System.Alarm.AlarmService.getService()}getInitialValue(element,triggerData){}}AcknowledgeAllAlarmsAction.actionName="AcknowledgeAllAlarmsAction";AcknowledgeAllAlarmsAction.propertyList={targetSelector:{type:String}};Actions.AcknowledgeAllAlarmsAction=AcknowledgeAllAlarmsAction;VisiWin.Triggers.Class.processMetadata(AcknowledgeAllAlarmsAction,AcknowledgeAllAlarmsAction.propertyList,VisiWin.Actions.ActionBase)})(Actions=Lenze.Actions||(Lenze.Actions={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var Actions;(function(Actions){"use strict";class AddCertificateAction extends Lenze.Actions.ActionBase{get value(){return this._value}set value(value){this._value=value;this._addCertificate()}get _control(){var _a;return(_a=this._element)===null||_a===void 0?void 0:_a.winControl}constructor(){super();this.variableName="";this._value=0;this._variable=null;this._element=null;this._controlAttachedHandler=this._onControlAttached.bind(this);this._controlDetachedHandler=this._onControlDetached.bind(this);this._variableChangeHandler=this._addCertificate.bind(this);this.addPropertyList(AddCertificateAction,AddCertificateAction.propertyList)}async execute(value,element,triggerData){}init(element,triggerData){if(VisiWin.Utilities.isInDesignMode())return;this._variableService=VisiWin.System.DataAccess.VariableService.getService()}getInitialValue(element,triggerData){if(!Lenze.Strings.isNullOrWhiteSpace(this.variableName)){this._variable=this._variableService.GetVariable(this.variableName)}this._element=element;if(this._control!=null){this._control.addEventListener("attached",this._controlAttachedHandler);this._control.addEventListener("detached",this._controlDetachedHandler);this._onControlAttached()}else this._addCertificate()}_addCertificate(){if(this._element==null)return;const value=this._variable!=null?this._variable.Value:this._value}async _onControlAttached(){var _a,_b;(_a=this._variable)===null||_a===void 0?void 0:_a.Change.add(this._variableChangeHandler);await((_b=this._variable)===null||_b===void 0?void 0:_b.AttachAsync());this._addCertificate()}_onControlDetached(){var _a,_b;(_a=this._variable)===null||_a===void 0?void 0:_a.Change.remove(this._variableChangeHandler);(_b=this._variable)===null||_b===void 0?void 0:_b.Detach()}}AddCertificateAction.actionName="AddCertificateAction";AddCertificateAction.propertyList={value:{type:Number},variableName:{type:String}};Actions.AddCertificateAction=AddCertificateAction;VisiWin.Triggers.Class.processMetadata(AddCertificateAction,AddCertificateAction.propertyList,VisiWin.Actions.ActionBase)})(Actions=Lenze.Actions||(Lenze.Actions={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var Actions;(function(Actions){"use strict";class DeleteCertificateAction extends Lenze.Actions.ActionBase{get value(){return this._value}set value(value){this._value=value;this._deleteCertificate()}get _control(){var _a;return(_a=this._element)===null||_a===void 0?void 0:_a.winControl}constructor(){super();this.variableName="";this._value=0;this._variable=null;this._element=null;this._controlAttachedHandler=this._onControlAttached.bind(this);this._controlDetachedHandler=this._onControlDetached.bind(this);this._variableChangeHandler=this._deleteCertificate.bind(this);this.addPropertyList(DeleteCertificateAction,DeleteCertificateAction.propertyList)}async execute(value,element,triggerData){}init(element,triggerData){if(VisiWin.Utilities.isInDesignMode())return;this._variableService=VisiWin.System.DataAccess.VariableService.getService()}getInitialValue(element,triggerData){if(!Lenze.Strings.isNullOrWhiteSpace(this.variableName)){this._variable=this._variableService.GetVariable(this.variableName)}this._element=element;if(this._control!=null){this._control.addEventListener("attached",this._controlAttachedHandler);this._control.addEventListener("detached",this._controlDetachedHandler);this._onControlAttached()}else this._deleteCertificate()}_deleteCertificate(){if(this._element==null)return;const value=this._variable!=null?this._variable.Value:this._value}async _onControlAttached(){var _a,_b;(_a=this._variable)===null||_a===void 0?void 0:_a.Change.add(this._variableChangeHandler);await((_b=this._variable)===null||_b===void 0?void 0:_b.AttachAsync());this._deleteCertificate()}_onControlDetached(){var _a,_b;(_a=this._variable)===null||_a===void 0?void 0:_a.Change.remove(this._variableChangeHandler);(_b=this._variable)===null||_b===void 0?void 0:_b.Detach()}}DeleteCertificateAction.actionName="DeleteCertificateAction";DeleteCertificateAction.propertyList={value:{type:Number},variableName:{type:String}};Actions.DeleteCertificateAction=DeleteCertificateAction;VisiWin.Triggers.Class.processMetadata(DeleteCertificateAction,DeleteCertificateAction.propertyList,VisiWin.Actions.ActionBase)})(Actions=Lenze.Actions||(Lenze.Actions={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var Actions;(function(Actions){"use strict";class WriteValueConfirmationAction extends Lenze.Actions.ActionBase{get _triggerControl(){return this._triggerElement.winControl}constructor(){super();this._noVariableWarning=false;this._initialAttachCalled=false;this._initializedSuccessfully=false;this.addPropertyList(WriteValueConfirmationAction,WriteValueConfirmationAction.propertyList)}async execute(value,element,triggerData){const valuesToWrite={};this._inputElements.filter(element=>element.isValid&&element.isEdited).forEach(element=>{valuesToWrite[element.variableName]=element.getValue()});const variableNames=Object.keys(valuesToWrite);if(variableNames.length==0)return;const values=Object.values(valuesToWrite);await this._variableService.SetValuesAsync(variableNames,values);await this._clearInputsAsync()}init(element,triggerData){if(VisiWin.Utilities.isInDesignMode())return;this._variableService=VisiWin.System.DataAccess.VariableService.getService();this._dialogService=VisiWin.AppServices.LenzeDialogService;this._attachedHandler=this._onAttachedAsync.bind(this);this._detachedHandler=this._onDetachedAsync.bind(this);this._clearButtonClickHandler=this._clearInputsAsync.bind(this);this._triggerElement=element;this._triggerElement.winControl.addEventListener("attached",this._attachedHandler);this._triggerElement.winControl.addEventListener("detached",this._detachedHandler)}getInitialValue(element,triggerData){if(VisiWin.Utilities.isInDesignMode())return;try{if(VisiWin.isNullOrEmpty(this.inputClassName))throw new Error(`'InputClassName' is empty, no inputs can be retrieved.`);const potentialElements=document.getElementsByClassName(this.inputClassName);if(potentialElements.length==0)throw new Error(`No inputs found with classname '${this.inputClassName}' set on 'InputClassName'.`);const elements=[...potentialElements];const validElements=elements.filter(e=>e.winControl!=null&&!VisiWin.isNullOrEmpty(e.winControl.variableName));if(validElements.length<elements.length)this._displayNoVariableWarning();const initPromises=validElements.map(element=>this._initInputAsync(element));this._clearButtonElement=!VisiWin.isNullOrEmpty(this.clearButtonName)?document.getElementById(this.clearButtonName):null;Promise.all(initPromises).then(async values=>{this._inputElements=values.filter(value=>value!=null);this._initializedSuccessfully=true;await this._onAttachedAsync()})}catch(error){console.error(`${WriteValueConfirmationAction.actionName}: "${error===null||error===void 0?void 0:error.message}"`);this._setDisabled()}}async _initInputAsync(element){try{const confirmationModel=new Lenze.Models.ConfirmationInput(this._variableService);await confirmationModel.initAsync(element);return confirmationModel}catch(error){console.error(`${WriteValueConfirmationAction.actionName}: "${error===null||error===void 0?void 0:error.message}"`,error===null||error===void 0?void 0:error.stack);return null}}async _clearInputsAsync(){await Promise.all(this._inputElements.map(element=>element.clearValueAsync()))}_setDisabled(isDisabled=true){this._triggerControl.disabled=isDisabled}_displayNoVariableWarning(){if(this._noVariableWarning)return;this._noVariableWarning=true;console.warn(`${WriteValueConfirmationAction.actionName}: "Input element connected without a value inside the 'VariableName' property."`)}async _onAttachedAsync(){var _a;if(!this._initializedSuccessfully||!this._initialAttachCalled){this._initialAttachCalled=true;return}(_a=this._clearButtonElement)===null||_a===void 0?void 0:_a.winControl.addEventListener("buttonclick",this._clearButtonClickHandler);await Promise.all(this._inputElements.map(input=>input.attachAsync()))}async _onDetachedAsync(){var _a;if(!this._initializedSuccessfully)return;(_a=this._clearButtonElement)===null||_a===void 0?void 0:_a.winControl.removeEventListener("buttonclick",this._clearButtonClickHandler);await Promise.all(this._inputElements.map(input=>input.detachAsync()))}}WriteValueConfirmationAction.actionName="WriteValueConfirmationAction";WriteValueConfirmationAction.propertyList={targetSelector:{type:String},inputClassName:{type:String},clearButtonName:{type:String},confirmationDialogEnabled:{type:Boolean,defaultValue:true},headerLocalizableText:{type:String},bodyLocalizableText:{type:String},confirmButtonLocalizableText:{type:String},cancelButtonLocalizableText:{type:String},validationVariableName:{type:String},clearOnPageSwitch:{type:Boolean}};Actions.WriteValueConfirmationAction=WriteValueConfirmationAction;VisiWin.Triggers.Class.processMetadata(WriteValueConfirmationAction,WriteValueConfirmationAction.propertyList,VisiWin.Actions.ActionBase)})(Actions=Lenze.Actions||(Lenze.Actions={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var Actions;(function(Actions){"use strict";class BindKeyboardAction extends Lenze.Actions.ActionBase{constructor(){super();this._inputId="";this._keyboardEnterHandler=this._onKeyboardEnter.bind(this);this._propertyChangedHandler=this._onElementPropertyChange.bind(this);this._domFocusChange=this._onDOMFocusChange.bind(this);this.addPropertyList(BindKeyboardAction,BindKeyboardAction.propertyList)}async execute(value,element,triggerData){}init(element,triggerData){}getInitialValue(element,triggerData){var _a,_b;this._keyboardService=VisiWin.AppServices.LenzeKeyboardService;this._variableService=VisiWin.System.DataAccess.VariableService.getService();if(VisiWin.Utilities.isInDesignMode()||element==null)return;this._triggerElement=element===null||element===void 0?void 0:element.winControl;if(this._triggerElement==null){console.error(`'${BindKeyboardAction.actionName}' is unable to retrieve it's trigger control.`);return}if(this._triggerElement.controlName!=="NumericVarIn"&&this._triggerElement.controlName!=="TextVarIn"){console.error(`'${this._triggerElement.controlName}' is not supported by the VirtualKeyboard!`);this._triggerElement=null;return}this._inputElement=(_a=element.getElementsByTagName("input"))===null||_a===void 0?void 0:_a.item(0);if(this._inputElement==null){console.error(`Unable to retrieve the inner input element.`);this._triggerElement=null;return}if(Lenze.Strings.isNullOrWhiteSpace(this.keyboardName)){console.error("Please enter the name of the keyboard which this control needs to be bound to!");return}this._virtualKeyboard=(_b=document.getElementById(this.keyboardName))===null||_b===void 0?void 0:_b.winControl;if(this._virtualKeyboard==null){console.error(`Unable to retrieve keyboard with name '${this.keyboardName}'. Please validate it exists!`);return}if(!Lenze.Strings.isNullOrWhiteSpace(this._triggerElement.variableName)){this._inputVariable=this._variableService.GetVariable(this._triggerElement.variableName);this._inputVariable.AttachAsync()}this._inputId=this._keyboardService.generateRandomId();this._virtualKeyboard.registerInputElement({inputElement:this._triggerElement,id:this._inputId,keyboardType:this._triggerElement.controlName==="NumericVarIn"?Lenze.Models.KeyboardTypeEnum.Numeric:Lenze.Models.KeyboardTypeEnum.Alphabetical});this._triggerElement.addEventListener("notifyPropertyChanged",this._propertyChangedHandler);this._inputElement.addEventListener("focus",this._domFocusChange);this._virtualKeyboard.addEventListener(Lenze.UI.VirtualKeyboard.enterKeyEventName,this._keyboardEnterHandler)}_onElementPropertyChange(event){const detail=event===null||event===void 0?void 0:event.detail;if(detail==null||detail.changeType!=="property")return;if(detail.changeName==="focused"&&detail.newValue!==detail.oldValue&&detail.newValue)this._onFocusChange(detail);else if(detail.changeName==="value")this._onValueChange(detail)}_onFocusChange(details){var _a;if(details.newValue)(_a=this._virtualKeyboard)===null||_a===void 0?void 0:_a.setActiveInputElement(this._inputId)}_onValueChange(details){}_onDOMFocusChange(event){if((event===null||event===void 0?void 0:event.target)==null)return;event.target.blur()}_onKeyboardEnter(event){const detail=event.detail;if(this._triggerElement==null||detail.inputId!==this._inputId||this._inputVariable==null)return;const value=this._triggerElement.controlName==="NumericVarIn"?Number(detail.newValue):detail.newValue;this._variableService.SetValueAsync(this._inputVariable.Name,value)}}BindKeyboardAction.actionName="BindKeyboardAction";BindKeyboardAction.propertyList={targetSelector:{type:String},keyboardName:{type:String}};Actions.BindKeyboardAction=BindKeyboardAction;VisiWin.Triggers.Class.processMetadata(BindKeyboardAction,BindKeyboardAction.propertyList,VisiWin.Actions.ActionBase)})(Actions=Lenze.Actions||(Lenze.Actions={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var Actions;(function(Actions){"use strict";class ShowKeyboardDialogAction extends Lenze.Actions.ActionBase{get _isNumeric(){return this._triggerControlType===Lenze.Models.KeyboardTypeEnum.Numeric}constructor(){super();this.light=false;this._supportedNumericControls=["NumericVarIn"];this._supportedAlphabeticalControls=["TextVarIn"];this._triggerControlType=Lenze.Models.KeyboardTypeEnum.Alphabetical;this._limitMinVariable=null;this._limitMaxVariable=null;this._isShowingDialog=false;this._keyboardEnterHandler=this._onKeyboardEnterAsync.bind(this);this._dialogCloseHandler=this._onDialogClose.bind(this);this._propertyChangedHandler=this._onElementPropertyChangeAsync.bind(this);this._controlAttachedHandler=this._onControlAttached.bind(this);this._controlDetachedHandler=this._onControlDetached.bind(this);this._domFocusChange=this._onDOMFocusChange.bind(this);this._minLimitChangeHandler=(args=>this._onLimitVariableChanged("Min",args)).bind(this);this._maxLimitChangeHandler=(args=>this._onLimitVariableChanged("Max",args)).bind(this);this.addPropertyList(ShowKeyboardDialogAction,ShowKeyboardDialogAction.propertyList)}async execute(value,element,triggerData){}init(element,triggerData){}getInitialValue(element,triggerData){if(VisiWin.Utilities.isInDesignMode())return;this._keyboardService=VisiWin.AppServices.LenzeKeyboardService;this._variableService=VisiWin.System.DataAccess.VariableService.getService();const potentialControl=element===null||element===void 0?void 0:element.winControl;if(potentialControl==null){console.error(`'${ShowKeyboardDialogAction.actionName}' is unable to retrieve it's trigger control.`);return}if(!this._isControlSupported(potentialControl)){console.error(`'${potentialControl.controlName}' is not supported by the VirtualKeyboard!`);return}this._triggerInputElement=potentialControl._inputElement;if(this._triggerInputElement==null){console.error(`Unable to retrieve the inner input element.`);return}this._triggerControl=potentialControl;this._triggerControl.lostKeyboardFocusBehaviour="RestoreValue";this._triggerControlType=potentialControl.controlName==="NumericVarIn"?Lenze.Models.KeyboardTypeEnum.Numeric:Lenze.Models.KeyboardTypeEnum.Alphabetical;this._limitMinVariable=Lenze.Strings.isNullOrWhiteSpace(this.limitMinVariableName)?null:this._variableService.GetVariable(this.limitMinVariableName);this._limitMaxVariable=Lenze.Strings.isNullOrWhiteSpace(this.limitMaxVariableName)?null:this._variableService.GetVariable(this.limitMaxVariableName);this._triggerControl.addEventListener("notifyPropertyChanged",this._propertyChangedHandler);this._triggerControl.addEventListener("attached",this._controlAttachedHandler);this._triggerControl.addEventListener("detached",this._controlDetachedHandler);this._triggerInputElement.addEventListener("focus",this._domFocusChange)}async _onKeyboardEnterAsync(event){if(this._triggerControl==null||this._triggerInputElement==null)return;const isNumeric=this._triggerControlType===Lenze.Models.KeyboardTypeEnum.Numeric;const value=isNumeric?Number(event.newValue.replace(",",".")).toFixed(VisiWin.AppServices.VariableService.touchkeyboardInfo.varDecimalPlaces):event.newValue;this._triggerControl.value=value;this._triggerControl._inputElement.value=value;this._triggerControl._inputElement.winControl._writeValue();this._keyboardService.closeKeyboardDialog()}async _onElementPropertyChangeAsync(event){const detail=event===null||event===void 0?void 0:event.detail;if(detail==null||detail.changeType!=="property")return;if(detail.changeName==="focused"&&detail.newValue!==detail.oldValue&&detail.newValue)await this._onFocusChangeAsync(detail)}_onControlAttached(){var _a,_b,_c,_d;(_a=this._limitMinVariable)===null||_a===void 0?void 0:_a.Change.add(this._minLimitChangeHandler);(_b=this._limitMaxVariable)===null||_b===void 0?void 0:_b.Change.add(this._maxLimitChangeHandler);(_c=this._limitMinVariable)===null||_c===void 0?void 0:_c.AttachAsync();(_d=this._limitMaxVariable)===null||_d===void 0?void 0:_d.AttachAsync()}_onControlDetached(){var _a,_b,_c,_d;(_a=this._limitMinVariable)===null||_a===void 0?void 0:_a.Change.remove(this._minLimitChangeHandler);(_b=this._limitMaxVariable)===null||_b===void 0?void 0:_b.Change.remove(this._maxLimitChangeHandler);(_c=this._limitMinVariable)===null||_c===void 0?void 0:_c.Detach();(_d=this._limitMaxVariable)===null||_d===void 0?void 0:_d.Detach()}_onLimitVariableChanged(limit,args){if(this._triggerControl==null||!this._triggerControl.isLimitCheckEnabled||!this._isNumeric)return;this._triggerControl[this._triggerControlType===Lenze.Models.KeyboardTypeEnum.Numeric?`rawLimit${limit}`:`textLength${limit}`]=args.RawValue;Lenze.Inputs.revalidateLimits(this._triggerControl)}async _onFocusChangeAsync(details){var _a,_b;if(VisiWin.AppServices.Impl.LenzeKeyboardService.pointerElementName===VisiWin.AppServices.Impl.LenzeKeyboardService.pointerElementBeforeName){if(VisiWin.AppServices.Impl.LenzeKeyboardService.pointerElementName===((_b=(_a=document.activeElement)===null||_a===void 0?void 0:_a.winControl)===null||_b===void 0?void 0:_b.className)){if(VisiWin.AppServices.Impl.LenzeKeyboardService.pointerElementName==="vw-numericvarincore"||VisiWin.AppServices.Impl.LenzeKeyboardService.pointerElementName==="vw-textvarincore"){if(!details.newValue||!await this._showDialog())return;this._keyboardService.addEventListener(VisiWin.AppServices.Impl.LenzeKeyboardService.dialogEnterKeyEventName,this._keyboardEnterHandler);this._keyboardService.addEventListener(VisiWin.AppServices.Impl.LenzeKeyboardService.dialogCloseEventName,this._dialogCloseHandler)}}}}_onDialogClose(){var _a;this._keyboardService.removeEventListener(VisiWin.AppServices.Impl.LenzeKeyboardService.dialogEnterKeyEventName,this._keyboardEnterHandler);this._keyboardService.removeEventListener(VisiWin.AppServices.Impl.LenzeKeyboardService.dialogCloseEventName,this._dialogCloseHandler);let isInDialog=false;let current=this._triggerInputElement;while(current.parentElement){current=current.parentElement;if(current==null)break;if(current.winControl&&current.winControl.controlName==="Page")break;if(current.winControl&&current.winControl.controlName==="DialogView"){isInDialog=true;break}}if(!isInDialog)(_a=this._triggerInputElement)===null||_a===void 0?void 0:_a.focus();if(this._triggerControl.isLimitCheckEnabled&&this._isNumeric)Lenze.Inputs.revalidateLimits(this._triggerControl);this._isShowingDialog=false}_onDOMFocusChange(event){if((event===null||event===void 0?void 0:event.target)==null)return;event.target.blur()}async _showDialog(){var _a;if(this._triggerControl==null){console.error(`Unable to show keyboard dialog from ${ShowKeyboardDialogAction.actionName} as the original trigger control is not retrieved before this call.`);return false}const castedControl=this._triggerControl;VisiWin.AppServices.VariableService.touchkeyboardInfo.varName=castedControl.variableName;VisiWin.AppServices.VariableService.touchkeyboardInfo.varMaxValue=castedControl.rawLimitMax;VisiWin.AppServices.VariableService.touchkeyboardInfo.varminValue=castedControl.rawLimitMin;VisiWin.AppServices.VariableService.touchkeyboardInfo.varValue=castedControl.value;VisiWin.AppServices.VariableService.touchkeyboardInfo.varDecimalPlaces=castedControl.decimalPlaces;let variableService=VisiWin.System.DataAccess.VariableService.getService();if(!Lenze.Strings.isNullOrWhiteSpace(castedControl.variableName)){let variable=variableService.GetVariable(castedControl.variableName);if(variable.UnitClass!==undefined&&variable.UnitClass!==null){let unitClass=await variableService.GetCurrentUnitAsync((_a=variable.UnitClass)===null||_a===void 0?void 0:_a.Name);VisiWin.AppServices.VariableService.touchkeyboardInfo.varDecimalPlaces=VisiWin.AppServices.VariableService.touchkeyboardInfo.varDecimalPlaces+unitClass.DecPoint}}if(castedControl.showUnit===true){VisiWin.AppServices.VariableService.touchkeyboardInfo.varUnitText=castedControl.unitText}else{VisiWin.AppServices.VariableService.touchkeyboardInfo.varUnitText=""}const isNumeric=this._isNumeric;const result=this._keyboardService.showKeyboardDialog({keyboardType:this._triggerControlType,light:this.light,value:this._triggerControl.value,decimalPlaces:VisiWin.AppServices.VariableService.touchkeyboardInfo.varDecimalPlaces,unit:isNumeric?castedControl.getCurrentUnit():null,headerText:Lenze.Strings.isNullOrWhiteSpace(castedControl.floatingLabelText)?castedControl.labelText:castedControl.floatingLabelText,headerLocalizableText:Lenze.Strings.isNullOrWhiteSpace(castedControl.localizableFloatingLabelText)?castedControl.localizableLabelText:castedControl.localizableFloatingLabelText,limitCheckEnabled:castedControl.isLimitCheckEnabled,limitMin:isNumeric?castedControl.rawLimitMin:castedControl.textLengthMin,limitMinVariableName:this.limitMinVariableName,limitMinText:castedControl.limitMinErrorText,limitMinLocalText:castedControl.localizableLimitMinErrorText,limitMax:isNumeric?castedControl.rawLimitMax:castedControl.textLengthMax,limitMaxVariableName:this.limitMaxVariableName,limitMaxText:castedControl.limitMaxErrorText,limitMaxLocalText:castedControl.localizableLimitMaxErrorText,inputType:isNumeric?"":castedControl.inputType});this._isShowingDialog=result;return result}_isControlSupported(control){return this._supportedNumericControls.includes(control.controlName)||this._supportedAlphabeticalControls.includes(control.controlName)}}ShowKeyboardDialogAction.actionName="ShowKeyboardDialogAction";ShowKeyboardDialogAction.propertyList={targetSelector:{type:String},light:{type:Boolean},limitMinVariableName:{type:String},limitMaxVariableName:{type:String}};Actions.ShowKeyboardDialogAction=ShowKeyboardDialogAction;VisiWin.Triggers.Class.processMetadata(ShowKeyboardDialogAction,ShowKeyboardDialogAction.propertyList,VisiWin.Actions.ActionBase)})(Actions=Lenze.Actions||(Lenze.Actions={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var Actions;(function(Actions){"use strict";class RotateControlAction extends Lenze.Actions.ActionBase{get value(){return this._value}set value(value){this._value=value;this._rotateControl()}get _control(){var _a;return(_a=this._element)===null||_a===void 0?void 0:_a.winControl}constructor(){super();this.variableName="";this.transformOrigin="50% 50%";this.transitionTime=.25;this._value=0;this._variable=null;this._element=null;this._controlAttachedHandler=this._onControlAttached.bind(this);this._controlDetachedHandler=this._onControlDetached.bind(this);this._variableChangeHandler=this._rotateControl.bind(this);this.addPropertyList(RotateControlAction,RotateControlAction.propertyList)}async execute(value,element,triggerData){}init(element,triggerData){if(VisiWin.Utilities.isInDesignMode())return;this._variableService=VisiWin.System.DataAccess.VariableService.getService()}getInitialValue(element,triggerData){if(!Lenze.Strings.isNullOrWhiteSpace(this.variableName)){this._variable=this._variableService.GetVariable(this.variableName)}this._element=element;if(this._control!=null){this._control.addEventListener("attached",this._controlAttachedHandler);this._control.addEventListener("detached",this._controlDetachedHandler);this._onControlAttached()}else this._rotateControl()}_rotateControl(){if(this._element==null)return;const value=this._variable!=null?this._variable.Value:this._value;const safeTransition=Math.max(0,this.transitionTime);this._element.style.transition=safeTransition>0?`transform ${safeTransition}s`:"";this._element.style.webkitTransformOrigin=this.transformOrigin;this._element.style.transformOrigin=this.transformOrigin;this._element.style.webkitTransform=`rotate(${value}deg)`;this._element.style.mozTransform=`rotate(${value}deg)`;this._element.style.msTransform=`rotate(${value}deg)`;this._element.style.oTransform=`rotate(${value}deg)`;this._element.style.transform=`rotate(${value}deg)`}async _onControlAttached(){var _a,_b;(_a=this._variable)===null||_a===void 0?void 0:_a.Change.add(this._variableChangeHandler);await((_b=this._variable)===null||_b===void 0?void 0:_b.AttachAsync());this._rotateControl()}_onControlDetached(){var _a,_b;(_a=this._variable)===null||_a===void 0?void 0:_a.Change.remove(this._variableChangeHandler);(_b=this._variable)===null||_b===void 0?void 0:_b.Detach()}}RotateControlAction.actionName="RotateControlAction";RotateControlAction.propertyList={value:{type:Number},variableName:{type:String},transformOrigin:{type:String},transitionTime:{type:Number}};Actions.RotateControlAction=RotateControlAction;VisiWin.Triggers.Class.processMetadata(RotateControlAction,RotateControlAction.propertyList,VisiWin.Actions.ActionBase)})(Actions=Lenze.Actions||(Lenze.Actions={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var Actions;(function(Actions){"use strict";class ShowViewportAction extends Lenze.Actions.ActionBase{constructor(){super();this.addPropertyList(ShowViewportAction,ShowViewportAction.propertyList)}async execute(value,element,triggerData){if(VisiWin.Utilities.isInDesignMode())return null;const width=Math.max(document.documentElement.clientWidth||0,window.innerWidth||0);const height=Math.max(document.documentElement.clientHeight||0,window.innerHeight||0);alert(`The viewport height for this device is ${height}px and the viewport width is ${width}px.`)}init(element,triggerData){}getInitialValue(element,triggerData){}}ShowViewportAction.actionName="ShowViewportAction";ShowViewportAction.propertyList={targetSelector:{type:String}};Actions.ShowViewportAction=ShowViewportAction;VisiWin.Triggers.Class.processMetadata(ShowViewportAction,ShowViewportAction.propertyList,VisiWin.Actions.ActionBase)})(Actions=Lenze.Actions||(Lenze.Actions={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var Actions;(function(Actions){"use strict";class ClearLogbookFiltersAction extends Lenze.Actions.ActionBase{constructor(){super();this.addPropertyList(ClearLogbookFiltersAction,ClearLogbookFiltersAction.propertyList)}async execute(value,element,triggerData){if(this._logbookControl==null)return;await this._logbookControl.clearFiltersAsync()}init(element,triggerData){}getInitialValue(element,triggerData){if(VisiWin.Utilities.isInDesignMode()||element==null)return;this._logbookControl=Lenze.Dom.getControl(this.logbookName,Lenze.Controls.getType(Lenze.UI.Logbook))}}ClearLogbookFiltersAction.actionName="ClearLogbookFiltersAction";ClearLogbookFiltersAction.propertyList={targetSelector:{type:String},logbookName:{type:String}};Actions.ClearLogbookFiltersAction=ClearLogbookFiltersAction;VisiWin.Triggers.Class.processMetadata(ClearLogbookFiltersAction,ClearLogbookFiltersAction.propertyList,VisiWin.Actions.ActionBase)})(Actions=Lenze.Actions||(Lenze.Actions={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var Actions;(function(Actions){"use strict";class DeleteLogbookAction extends Lenze.Actions.ActionBase{constructor(){super();this._eventSubscribed=false;this.addPropertyList(DeleteLogbookAction,DeleteLogbookAction.propertyList)}async execute(value,element,triggerData){var _a;if(!this._deleteLogbookVariable.IsValid||!this._deleteLogbookVariable.IsAttached){console.error(`Unable to delete logbook: 'Variable ${this._deleteLogbookVariable.Name} is invalid.'`);return}if(this._eventSubscribed||this._deleteLogbookVariable.Value){console.warn(`Logbook is already being deleted.`);return}this._eventSubscribed=true;(_a=this._logbookControl)===null||_a===void 0?void 0:_a.disable();this._deleteLogbookVariable.Change.add(this._deleteVariableChangeHandler);await this._variableService.SetValueAsync(this._deleteLogbookVariable.Name,true)}init(element,triggerData){}getInitialValue(element,triggerData){var _a;if(VisiWin.Utilities.isInDesignMode()||element==null)return;this._variableService=VisiWin.System.DataAccess.VariableService.getService();this._deleteVariableChangeHandler=this._onUpdateVariableChangeAsync.bind(this);this._logbookControl=Lenze.Dom.getControl(this.logbookName,Lenze.Controls.getType(Lenze.UI.Logbook));this._deleteLogbookVariable=this._variableService.GetVariable(VisiWin.AppServices.Impl.FastLogbookService.DeleteLogbookVariableName);(_a=this._deleteLogbookVariable)===null||_a===void 0?void 0:_a.AttachAsync()}async _onUpdateVariableChangeAsync(args){var _a;if(args.PreviousValue&&!args.Value){await((_a=this._logbookControl)===null||_a===void 0?void 0:_a.clearFiltersAsync());this._deleteLogbookVariable.Change.remove(this._deleteVariableChangeHandler);this._eventSubscribed=false}}}DeleteLogbookAction.actionName="DeleteLogbookAction";DeleteLogbookAction.propertyList={targetSelector:{type:String},logbookName:{type:String}};Actions.DeleteLogbookAction=DeleteLogbookAction;VisiWin.Triggers.Class.processMetadata(DeleteLogbookAction,DeleteLogbookAction.propertyList,VisiWin.Actions.ActionBase)})(Actions=Lenze.Actions||(Lenze.Actions={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var Actions;(function(Actions){"use strict";class ExportLogbookAction extends Lenze.Actions.ActionBase{constructor(){super();this.dateTimeLocale="ISO8601";this.formatDate="ShortDate";this.formatTime="LongTime";this.severityLocalizableTexts="@[ServerApplication].FAST.Logbook.Severity";this.layerLocalizableTexts="@[ServerApplication].FAST.Logbook.Layer";this.targetGroupLocalizableTexts="@[ServerApplication].FAST.Logbook.TargetGroup";this.componentTypeLocalizableTexts="@[ServerApplication].FAST.Logbook.ComponentType";this.columnSeperator=";";this.newLineSeperator="\r\n";this.contentType="text/csv";this.fileName="LogbookExport";this.fileExtension=".csv";this.includeTimeStamp=true;this.defaultErrorText="Unknown Event";this._logbook=null;this._logbookEnabled=false;this._logbookRequestBusy=false;this._logbookId=null;this._logbookCSVColumns={_number:"No.",_time:"Timestamp (UTC)",_counter:"Counter",_severity:"Severity",_eventId:"Id",_errorText:"Text",_componentName:"Component name",_componentType:"Component type",_layer:"Layer",_targetGroup:"Target group"};this.addPropertyList(ExportLogbookAction,ExportLogbookAction.propertyList)}async execute(value,element,triggerData){var _a,_b;if(this._logbookRequestBusy||!this._logbookEnabled||Lenze.Strings.isNullOrWhiteSpace(this._logbookId))return;try{this._triggerControl.disabled=true;this._logbookRequestBusy=true;const filterOptions=(_b=(_a=this._logbook)===null||_a===void 0?void 0:_a.getFilterOptions(0,0))!==null&&_b!==void 0?_b:this._logbookHelper.createFilterOptions();if(filterOptions==null)return;const logbook=await this._logbookService.getLogbookAsync(this._logbookId,filterOptions);if(logbook==null||logbook.data==null||logbook.data.length==0)return;const valuesArray=await Promise.all(logbook.data.map(async logbookEntry=>await this._getLogbookCSVRow(logbookEntry)));const csvStringArray=[this._getColumnsCSVRow(),...valuesArray];const contentType=this.contentType;const csvFile=new Blob([csvStringArray.join(this.newLineSeperator)],{type:contentType});const anchorElement=document.createElement("a");anchorElement.href=URL.createObjectURL(csvFile);anchorElement.download=this.fileName+(this.includeTimeStamp?`_${(new Date).toISOString()}`:"")+this.fileExtension;anchorElement.click();anchorElement.remove()}finally{this._triggerControl.disabled=false;this._logbookRequestBusy=false}}init(element,triggerData){}getInitialValue(element,triggerData){var _a,_b;if(VisiWin.Utilities.isInDesignMode()||!element||!element.winControl)return;this._languageService=VisiWin.System.Language.LanguageService.getService();this._logbookHelper=new Lenze.Helpers.LogbookHelper(this._languageService,{severityLocalizableTexts:this.severityLocalizableTexts,layerLocalizableTexts:this.layerLocalizableTexts,targetGroupLocalizableTexts:this.targetGroupLocalizableTexts,componentTypeLocalizableTexts:this.componentTypeLocalizableTexts,dateTimeLocale:this.dateTimeLocale,formatDate:this.formatDate,formatTime:this.formatTime,defaultErrorText:this.defaultErrorText});try{this._triggerControl=element.winControl;this._triggerControl.disabled=true;this._logbook=!Lenze.Strings.isNullOrWhiteSpace(this.logbookName)?(_b=(_a=document.getElementById(this.logbookName))===null||_a===void 0?void 0:_a.winControl)!==null&&_b!==void 0?_b:null:null;this._logbookService=VisiWin.AppServices.FastLogbookService;this._logbookId=this._logbookService.getRandomString();this._logbookService.getLogbookEnabledAsync().then(result=>this._logbookEnabled=result)}finally{this._triggerControl.disabled=false}}_getColumnsCSVRow(){return Object.values(this._logbookCSVColumns).join(this.columnSeperator)}async _getLogbookCSVRow(logbookEntry){return(await Promise.all(Object.keys(this._logbookCSVColumns).map(async key=>await this._logbookHelper.resolveFieldValuesAsync(logbookEntry,key)))).join(this.columnSeperator)}}ExportLogbookAction.actionName="ExportLogbookAction";ExportLogbookAction.propertyList={targetSelector:{type:String},logbookName:{type:String},dateTimeLocale:{type:String},formatDate:{type:String},formatTime:{type:String},severityLocalizableTexts:{type:String},layerLocalizableTexts:{type:String},targetGroupLocalizableTexts:{type:String},componentTypeLocalizableTexts:{type:String},columnSeperator:{type:String},newLineSeperator:{type:String},contentType:{type:String},fileName:{type:String},fileExtension:{type:String},includeTimeStamp:{type:Boolean},defaultErrorText:{type:String}};Actions.ExportLogbookAction=ExportLogbookAction;VisiWin.Triggers.Class.processMetadata(ExportLogbookAction,ExportLogbookAction.propertyList,VisiWin.Actions.ActionBase)})(Actions=Lenze.Actions||(Lenze.Actions={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var Actions;(function(Actions){"use strict";class RefreshLogbookAction extends Lenze.Actions.ActionBase{constructor(){super();this.addPropertyList(RefreshLogbookAction,RefreshLogbookAction.propertyList)}async execute(value,element,triggerData){if(this._logbookControl==null)return;await this._logbookControl.refreshLogbookAsync()}init(element,triggerData){}getInitialValue(element,triggerData){if(VisiWin.Utilities.isInDesignMode()||element==null)return;this._logbookControl=Lenze.Dom.getControl(this.logbookName,Lenze.Controls.getType(Lenze.UI.Logbook))}}RefreshLogbookAction.actionName="RefreshLogbookAction";RefreshLogbookAction.propertyList={targetSelector:{type:String},logbookName:{type:String}};Actions.RefreshLogbookAction=RefreshLogbookAction;VisiWin.Triggers.Class.processMetadata(RefreshLogbookAction,RefreshLogbookAction.propertyList,VisiWin.Actions.ActionBase)})(Actions=Lenze.Actions||(Lenze.Actions={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var Actions;(function(Actions){"use strict";class UpdateLogbookAction extends Lenze.Actions.ActionBase{constructor(){super();this._eventSubscribed=false;this.addPropertyList(UpdateLogbookAction,UpdateLogbookAction.propertyList)}async execute(value,element,triggerData){var _a;if(!this._updateLogbookVariable.IsValid||!this._updateLogbookVariable.IsAttached){console.error(`Unable to update logbook: 'Variable ${this._updateLogbookVariable.Name} is invalid.'`);return}if(this._eventSubscribed||this._updateLogbookVariable.Value){console.warn(`Logbook is already being updated.`);return}this._eventSubscribed=true;(_a=this._logbookControl)===null||_a===void 0?void 0:_a.disable();this._updateLogbookVariable.Change.add(this._updateVariableChangeHandler);await this._variableService.SetValueAsync(this._updateLogbookVariable.Name,true)}init(element,triggerData){}getInitialValue(element,triggerData){var _a;if(VisiWin.Utilities.isInDesignMode()||element==null)return;this._variableService=VisiWin.System.DataAccess.VariableService.getService();this._updateVariableChangeHandler=this._onUpdateVariableChangeAsync.bind(this);this._logbookControl=Lenze.Dom.getControl(this.logbookName,Lenze.Controls.getType(Lenze.UI.Logbook));this._updateLogbookVariable=this._variableService.GetVariable(VisiWin.AppServices.Impl.FastLogbookService.UpdateLogbookVariableName);(_a=this._updateLogbookVariable)===null||_a===void 0?void 0:_a.AttachAsync()}async _onUpdateVariableChangeAsync(args){var _a,_b;if(args.PreviousValue&&!args.Value){await((_a=this._logbookControl)===null||_a===void 0?void 0:_a.clearFiltersAsync());this._updateLogbookVariable.Change.remove(this._updateVariableChangeHandler);this._eventSubscribed=false;await((_b=this._logbookControl)===null||_b===void 0?void 0:_b.refreshLogbookAsync())}}}UpdateLogbookAction.actionName="UpdateLogbookAction";UpdateLogbookAction.propertyList={targetSelector:{type:String},logbookName:{type:String}};Actions.UpdateLogbookAction=UpdateLogbookAction;VisiWin.Triggers.Class.processMetadata(UpdateLogbookAction,UpdateLogbookAction.propertyList,VisiWin.Actions.ActionBase)})(Actions=Lenze.Actions||(Lenze.Actions={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var Actions;(function(Actions){"use strict";class RefreshUserManagementDataAction extends Lenze.Actions.ActionBase{constructor(){super();this.addPropertyList(RefreshUserManagementDataAction,RefreshUserManagementDataAction.propertyList)}async execute(value,element,triggerData){if(VisiWin.Utilities.isInDesignMode())return null;if(this.conditionResult){VisiWin.AppServices.UserManagementService.forceUserManagementUpdate();return null}}init(element,triggerData){}getInitialValue(element,triggerData){}}RefreshUserManagementDataAction.actionName="RefreshUserManagementDataAction";RefreshUserManagementDataAction.propertyList={targetSelector:{type:String}};Actions.RefreshUserManagementDataAction=RefreshUserManagementDataAction;VisiWin.Triggers.Class.processMetadata(RefreshUserManagementDataAction,RefreshUserManagementDataAction.propertyList,VisiWin.Actions.ActionBase)})(Actions=Lenze.Actions||(Lenze.Actions={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var UI;(function(UI){"use strict";class AlarmList extends Lenze.UI.VirtualizingTableBase{constructor(element,options){super(element,options);this._symbolAlarmClass="lenze-alarmlist__class-symbol-";this._refreshChangeWindow=1e3;this.properties={designerType:{propertyType:"base",type:"string",defaultValue_DM:"Control"},registerTargetId:{propertyType:"base",defaultValue:"VirtualizingTableColumn"},headerPadding:{propertyType:"member",type:"string",defaultValue:"8px 16px"},headerBorderWidthTop:{propertyType:"member",type:"string",defaultValue:"0"},headerBorderWidthSides:{propertyType:"member",type:"string",defaultValue:"0"},headerBorderWidthBottom:{propertyType:"member",type:"string",defaultValue:"2px"},headerBorderStyle:{propertyType:"member",type:"string",defaultValue:"solid"},headerFontClass:{propertyType:"member",type:"string",defaultValue:"Roboto16"},headerFontSize:{propertyType:"member",type:"string"},headerFontWeight:{propertyType:"member",type:"string",defaultValue:"FW500"},headerUpperCase:{propertyType:"member",type:"boolean",defaultValue:false},bodyPadding:{propertyType:"member",type:"string",defaultValue:"8px 16px"},bodyBorderWidthSides:{propertyType:"member",type:"string",defaultValue:"1px"},bodyBorderWidthBottom:{propertyType:"member",type:"string",defaultValue:"1px"},bodyBorderStyle:{propertyType:"member",type:"string",defaultValue:"solid"},bodyFontClass:{propertyType:"member",type:"string",defaultValue:"Roboto16"},bodyFontSize:{propertyType:"member",type:"string"},bodyFontWeight:{propertyType:"member",type:"string"},activeAlarmsOnly:{propertyType:"member",type:"boolean",defaultValue:true},dateTimeLocale:{propertyType:"member",type:"string",defaultValue:""},formatDate:{propertyType:"member",type:"string",defaultValue:"ShortDate"},formatTime:{propertyType:"member",type:"string",defaultValue:"LongTime"},showErrors:{propertyType:"member",type:"boolean",defaultValue:true},errorAlarmClasses:{propertyType:"member",type:"string",defaultValue:"Systemalarm, Alarm, ERROR_LEM, FAULT_LEM, TROUBLE_LEM"},errorShowSymbol:{propertyType:"member",type:"boolean",defaultValue:true},errorIconFont:{propertyType:"member",type:"string",defaultValue:"lenze-icons"},errorSymbol:{propertyType:"member",type:"string",defaultValue:"error"},errorSymbolType:{propertyType:"member",type:"string",defaultValue:"Icon"},errorSymbolSize:{propertyType:"member",type:"string",defaultValue:"24px"},errorBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BackgroundColor"},errorSelectedBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@AltBackgroundColor"},errorResolvedBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BackgroundColor"},errorResolvedSelectedBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@AltBackgroundColor"},errorForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ErrorColor"},errorResolvedForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ErrorColor"},errorSelectedForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ErrorColor"},errorResolvedSelectedForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ErrorColor"},errorSymbolBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@Transparent"},errorSymbolResolvedBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@Transparent"},errorSymbolSelectedBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@Transparent"},errorSymbolResolvedSelectedBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@Transparent"},errorSymbolForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ErrorColor"},errorSymbolResolvedForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ErrorColor"},errorSymbolSelectedForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ErrorColor"},errorSymbolResolvedSelectedForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ErrorColor"},showWarnings:{propertyType:"member",type:"boolean",defaultValue:true},warningAlarmClasses:{propertyType:"member",type:"string",defaultValue:"Warning, Message, WARNING_LEM, WARNING_LOCK_LEM"},warningShowSymbol:{propertyType:"member",type:"boolean",defaultValue:true},warningIconFont:{propertyType:"member",type:"string",defaultValue:"lenze-icons"},warningSymbol:{propertyType:"member",type:"string",defaultValue:"warning"},warningSymbolType:{propertyType:"member",type:"string",defaultValue:"Icon"},warningSymbolSize:{propertyType:"member",type:"string",defaultValue:"24px"},warningBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BackgroundColor"},warningSelectedBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@AltBackgroundColor"},warningResolvedBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BackgroundColor"},warningResolvedSelectedBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@AltBackgroundColor"},warningForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@WarningColor"},warningResolvedForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@WarningColor"},warningSelectedForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@WarningColor"},warningResolvedSelectedForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@WarningColor"},warningSymbolBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@Transparent"},warningSymbolResolvedBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@Transparent"},warningSymbolSelectedBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@Transparent"},warningSymbolResolvedSelectedBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@Transparent"},warningSymbolForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@WarningColor"},warningSymbolResolvedForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@WarningColor"},warningSymbolSelectedForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@WarningColor"},warningSymbolResolvedSelectedForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@WarningColor"},showInfos:{propertyType:"member",type:"boolean",defaultValue:true},infoAlarmClasses:{propertyType:"member",type:"string",defaultValue:"Hint, Info, INFO_LEM"},infoShowSymbol:{propertyType:"member",type:"boolean",defaultValue:true},infoIconFont:{propertyType:"member",type:"string",defaultValue:"material-icons"},infoSymbol:{propertyType:"member",type:"string",defaultValue:"info"},infoSymbolType:{propertyType:"member",type:"string",defaultValue:"Icon"},infoSymbolSize:{propertyType:"member",type:"string",defaultValue:"24px"},infoBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BackgroundColor"},infoSelectedBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@AltBackgroundColor"},infoResolvedBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BackgroundColor"},infoResolvedSelectedBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@AltBackgroundColor"},infoForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@InfoColor"},infoSelectedForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@InfoColor"},infoResolvedForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@InfoColor"},infoResolvedSelectedForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@InfoColor"},infoSymbolBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@Transparent"},infoSymbolResolvedBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@Transparent"},infoSymbolSelectedBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@Transparent"},infoSymbolResolvedSelectedBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@Transparent"},infoSymbolForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@InfoColor"},infoSymbolResolvedForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@InfoColor"},infoSymbolSelectedForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@InfoColor"},infoSymbolResolvedSelectedForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@InfoColor"},resolvedShowSymbol:{propertyType:"member",type:"boolean",defaultValue:true},resolvedIconFont:{propertyType:"member",type:"string",defaultValue:"material-icons"},resolvedSymbolTrue:{propertyType:"member",type:"string",defaultValue:"check"},resolvedSymbolFalse:{propertyType:"member",type:"string",defaultValue:"close"},resolvedSymbolType:{propertyType:"member",type:"string",defaultValue:"Icon"},resolvedSymbolSize:{propertyType:"member",type:"string",defaultValue:"24px"},resolvedSymbolBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@Transparent"},resolvedSymbolForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},pageSize:{propertyType:"member",type:"number",defaultValue:Number.MAX_SAFE_INTEGER},maxAmountOfPages:{propertyType:"member",type:"number",defaultValue:4},loadNextTriggerValue:{propertyType:"member",type:"string",defaultValue:400},columns:{propertyType:"member",type:"string"},disableMultiSort:{propertyType:"member",type:"boolean",defaultValue:true},backgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BackgroundColor"},foregroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},borderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"},headerBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BackgroundColor"},headerForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},headerBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"},headerSymbolBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BackgroundColor"},headerSymbolActiveForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},headerSymbolInactiveForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledForegroundColor"},bodyBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BackgroundColor"},bodyForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},bodyBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@Transparent"},bodySelectedBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@AltBackgroundColor"},bodySelectedForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},bodySelectedBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@Transparent"},selectedchanged:{propertyType:"event",group:"Event",triggerDataName:"value"}};this._tableClassName="lenze-alarmlist__table";this._headerClassName="lenze-alarmlist__header";this._headerRowClassName="lenze-alarmlist__header-row";this._headerCellClassName="lenze-alarmlist__header-cell";this._bodyClassName="lenze-alarmlist__body";this._bodyRowClassName="lenze-alarmlist__body-row";this._bodyCellClassName="lenze-alarmlist__body-cell";this._previousLocale="";this._seperatorFirst=false;this._seperatorValue="";this._errorClasses=[];this._warningClasses=[];this._infoClasses=[];this._timerId=null;this._customSortMethods={"Class.Name":this._sortAlarmClass.bind(this),TimeDifference:this._sortTime.bind(this),ActivationTime:this._sortTime.bind(this),AlarmState:this._sortState.bind(this)};this._customSortFields=Object.keys(this._customSortMethods);this._resolvedStates=[VisiWin.System.Alarm.AlarmState.InactiveAck,VisiWin.System.Alarm.AlarmState.Inactive,VisiWin.System.Alarm.AlarmState.Cleared,VisiWin.System.Alarm.AlarmState.None];this._componentsToFilter=[];this.initialize(Lenze.UI.AlarmList)}afterInit(){if(VisiWin.Utilities.isInDesignMode())return;this._moduleService=VisiWin.AppServices.FastModuleService;this._componentsToFilter=this._moduleService.getComponentsFilter();this._alarmService=VisiWin.System.Alarm.AlarmService.getService();this._languageService=VisiWin.System.Language.LanguageService.getService();this._projectService=VisiWin.System.Project.ProjectService.getService();this._stateChangedHandler=this._onAlarmsChangedAsync.bind(this);this._languageChangedHandler=this._onLanguageChangedAsync.bind(this);this._setAlarmClassArrays()}_updateLayout(changes){super._updateLayout(changes);if(changes.changeType==="lifeCycle"&&changes.changeName==="initialized"){super.afterInit();this._alarmService.CurrentAlarms.InitAlarm.add(this._stateChangedHandler);this._alarmService.CurrentAlarms.NewAlarm.add(this._stateChangedHandler);this._alarmService.CurrentAlarms.ChangeAlarm.add(this._stateChangedHandler);this._alarmService.CurrentAlarms.ClearAlarm.add(this._stateChangedHandler);this._languageService.LanguageChanged.add(this._languageChangedHandler)}if(changes.changeType==="property"&&(changes.changeName==="activeAlarmsOnly"||changes.changeName==="showErrors"||changes.changeName==="showWarnings"||changes.changeName==="showInfos"))this._refreshAlarmsAsync()}async detach(){await super.detach();if(VisiWin.Utilities.isInDesignMode()||this._timerId==null)return;clearTimeout(this._timerId)}dispose(){if(VisiWin.Utilities.isInDesignMode())return super.dispose();this._alarmService.CurrentAlarms.InitAlarm.remove(this._stateChangedHandler);this._alarmService.CurrentAlarms.NewAlarm.remove(this._stateChangedHandler);this._alarmService.CurrentAlarms.ChangeAlarm.remove(this._stateChangedHandler);this._alarmService.CurrentAlarms.ClearAlarm.remove(this._stateChangedHandler);this._languageService.LanguageChanged.remove(this._languageChangedHandler);return super.dispose()}_onIsBusyChanged(isFinished){}_isSameItem(item1,item2){return JSON.stringify(item1)===JSON.stringify(item2)}async _getValuesAsync(pageNumber,pageSize,orderBy){let data=this.activeAlarmsOnly?await this._getActualAlarmsAsync():await this._getHistoricalAlarmsAsync();if(this._componentsToFilter.length>0)data=data.filter(x=>this._isInFilter(x));let orderByField=orderBy!=null?orderBy[0]:null;if(orderByField==null)orderByField={fieldName:"Class.Name",descending:true};const customSort=this._customSortFields.includes(orderByField.fieldName);const sortedData=data.sort((alarm1,alarm2)=>customSort?this._customSortMethods[orderByField.fieldName](alarm1,alarm2,orderByField.descending):this._sortByStringField(alarm1,alarm2,orderByField.descending,orderByField.fieldName));return{data:sortedData,pageNumber:pageNumber,pageSize:pageSize,orderBy:[orderByField]}}async _resolveValueAsync(value,fieldName){if(fieldName==="Class.Name"){if(!this.errorShowSymbol)return value.Class.Text;let alarmClass="error";const toCompareTo=value.Class.Name;if(this._errorClasses.includes(toCompareTo))alarmClass="error";else if(this._warningClasses.includes(toCompareTo))alarmClass="warning";else if(this._infoClasses.includes(toCompareTo))alarmClass="info";if(value.AlarmState==VisiWin.System.Alarm.AlarmState.Active){return[this._createSymbol(true,this[`${alarmClass}IconFont`],this[`${alarmClass}Symbol`],this[`${alarmClass}SymbolType`],this[`${alarmClass}SymbolSize`],this._getColor(alarmClass,true,true,false,false),"@White",[this._symbolAlarmClass+alarmClass,this._resolvedStates.includes(value.AlarmState)?"resolved":""].filter(x=>x!=="")),value.Class.Text]}else if(value.AlarmState==VisiWin.System.Alarm.AlarmState.Inactive){return[this._createSymbol(true,this[`${alarmClass}IconFont`],this[`${alarmClass}Symbol`],this[`${alarmClass}SymbolType`],this[`${alarmClass}SymbolSize`],this._getColor(alarmClass,true,true,false,true),"@Black",[this._symbolAlarmClass+alarmClass,this._resolvedStates.includes(value.AlarmState)?"resolved":""].filter(x=>x!=="")),value.Class.Text]}}if(fieldName==="ActivationTime"){const locale=this._getLocale();return`${VisiWin.UI.formatDate(locale,this.formatDate,value.ActivationTime)} ${VisiWin.UI.formatDate(locale,this.formatTime,value.ActivationTime)}`}if(fieldName==="TimeDifference"){const locale=this._getLocale();const rtf1=new Intl.RelativeTimeFormat(locale,{localeMatcher:"best fit",numeric:"always",style:"short"});let deltaTime=Math.abs((value.ActivationTime.getTime()-Lenze.Dates.convertLocalToUTC(new Date).getTime())/1e3);let deltaTimeString="";const seperator=this._getSeperator(locale,rtf1);const valueParser=(totalSeconds,unit)=>{if(totalSeconds==0)return"";return rtf1.format(-totalSeconds,unit).replace(seperator," ")};deltaTimeString+=valueParser(Lenze.Dates.getDays(deltaTime),"days");deltaTimeString+=valueParser(Lenze.Dates.getHours(deltaTime),"hours");deltaTimeString+=valueParser(Lenze.Dates.getMinutes(deltaTime),"minutes");deltaTimeString+=valueParser(Lenze.Dates.getSeconds(deltaTime),"seconds");return Lenze.Strings.isNullOrWhiteSpace(deltaTimeString)?"-":this._seperatorFirst?`${Lenze.Strings.capitalize(seperator)} ${deltaTimeString}`:`${deltaTimeString} ${seperator}`}if(fieldName==="AlarmState"){if(!this.resolvedShowSymbol){if(value.AlarmState==VisiWin.System.Alarm.AlarmState.Active){return this._languageService.GetTextAsync("@[ServerApplication].AlarmManagement.AlarmActive")}else if(value.AlarmState==VisiWin.System.Alarm.AlarmState.Inactive){return this._languageService.GetTextAsync("@[ServerApplication].AlarmManagement.AlarmInactive")}else{return value.AlarmState}}return this._createSymbol(true,this.resolvedIconFont,this._resolvedStates.includes(value.AlarmState)?this.resolvedSymbolTrue:this.resolvedSymbolFalse,this.resolvedSymbolType,this.resolvedSymbolSize,this.resolvedSymbolBackgroundColor,this.resolvedSymbolForegroundColor,["lenze-alarmlist__resolved-symbol"])}if(fieldName==="Param2"){if(this._projectService.ServerProjectName=="diagnosis_server"){var output=value.Param2.toString(16).padStart(8,"0").toUpperCase();return output.substring(0,4)+" "+output.substring(4)}return value.Param2}if(fieldName==="Param1"){if(this._projectService.ServerProjectName=="diagnosis_server"){if(value.Param1.split(".").length>2){return value.Param1.split(".").slice(2).join(".")}}return value.Param1}if(fieldName==="Application"){if(value.Param1.split(".").length>2){return value.Param1.split(".").slice(1,2).join(".")}return"-"}if(fieldName==="Device"){if(value.Param1.split(".").length>2){return value.Param1.split(".").slice(0,1).join(".")}return"-"}if(fieldName==="Component"){if(value.Param1.split(".").length>2){return value.Param1.split(".").slice(2).join(".")}return value.Param1}if(fieldName==="EventID"){var output=value.Param2.toString(16).padStart(8,"0").toUpperCase();return output.substring(0,4)+" "+output.substring(4)}return await super._resolveValueAsync(value,fieldName)}_setBodyCellColors(cell,firstCell,column){var _a;if(column.fieldName!=="Class.Name"){super._setBodyCellColors(cell,firstCell,column);return}const selected=this._isCellSelected(cell);const symbolElement=(_a=cell.firstElementChild)===null||_a===void 0?void 0:_a.firstElementChild;const resolved=symbolElement.classList.contains("resolved");let alarmClass="error";if(symbolElement!=null){for(let className of symbolElement.classList){if(!className.includes(this._symbolAlarmClass))continue;alarmClass=className.replace(this._symbolAlarmClass,"");break}symbolElement.winControl.backgroundColor=this._getColor(alarmClass,true,true,selected,resolved);symbolElement.winControl.foregroundColor=this._getAlarmColors(resolved,alarmClass)}cell.style.borderColor=this.getThemeColor(selected?this.bodySelectedBorderColor:this.bodyBorderColor);cell.style.backgroundColor=this._getColor(alarmClass,false,true,selected,resolved);cell.style.color=this._getAlarmColors(resolved,alarmClass)}_setBodyCellLayout(cell,firstCell,column){super._setBodyCellLayout(cell,firstCell,column);if(column.fieldName!=="AlarmState"||!this.resolvedShowSymbol)return;cell.firstElementChild.style.width="100%"}async _getActualAlarmsAsync(){const currentAlarmsFilter=this._alarmService.CreateAlarmFilter();currentAlarmsFilter.DesiredClasses=this._getFilteredAlarmClasses();currentAlarmsFilter.DesiredGroups=[];currentAlarmsFilter.DesiredStates=[];currentAlarmsFilter.MaxPriority=-1;currentAlarmsFilter.MinPriority=-1;const currentAlarms=this._alarmService.GetCurrentAlarms(currentAlarmsFilter);return currentAlarms.Alarms}_getHistoricalAlarmsAsync(){return new Promise(async(resolve,reject)=>{const historicalAlarmFilter=this._alarmService.CreateHistoricalAlarmFilter();historicalAlarmFilter.DesiredClasses=this._getFilteredAlarmClasses();historicalAlarmFilter.DesiredGroups=[];historicalAlarmFilter.DesiredStates=[];historicalAlarmFilter.MaxPriority=-1;historicalAlarmFilter.MinPriority=-1;historicalAlarmFilter.MaxTime=new Date;historicalAlarmFilter.MinTime=new Date(0);const historicalAlarm=this._alarmService.CreateHistoricalAlarmRequest(historicalAlarmFilter);try{await historicalAlarm.GetHistoricalDataAsync()}catch(error){reject(error)}historicalAlarm.GetHistoricalDataCompleted.add(msg=>{if(!msg.Success)return reject();resolve(msg.HistoricalAlarms)})})}_getFilteredAlarmClasses(){let result=[];if(this.showErrors)result=result.concat(this._errorClasses);if(this.showWarnings)result=result.concat(this._warningClasses);if(this.showInfos)result=result.concat(this._infoClasses);return result}_setAlarmClassArrays(){this._errorClasses=this._getAlarmArray(this.errorAlarmClasses);this._warningClasses=this._getAlarmArray(this.warningAlarmClasses);this._infoClasses=this._getAlarmArray(this.infoAlarmClasses)}_getAlarmArray(classes){var _a,_b;return(_b=(_a=classes.split(","))===null||_a===void 0?void 0:_a.map(s=>s.trim()))!==null&&_b!==void 0?_b:[]}async _onAlarmsChangedAsync(){if(!this.isAttached||this._isBusy||!this.activeAlarmsOnly)return;this._setRefreshTimer()}async _onLanguageChangedAsync(){if(!this.isAttached||this._isBusy||this.activeAlarmsOnly)return;this._setRefreshTimer()}_setRefreshTimer(){if(this._timerId!=null)clearTimeout(this._timerId);this._timerId=setTimeout(this._refreshAlarmsAsync.bind(this),this._refreshChangeWindow)}async _refreshAlarmsAsync(){if(!this.isAttached||this._isBusy)return;await this._refreshAsync()}_getColor(alarmClass,isSymbol,isBackground,selected,resolved){const propertyName=alarmClass+(isSymbol?"Symbol":"")+(resolved?"Resolved":"")+(selected?"Selected":"")+(isBackground?"Background":"Foreground")+"Color";return this.getThemeColor(this[propertyName])}_getAlarmColors(resolved,alarmClass){switch(alarmClass){case"Systemalarm":case"Alarm":case"ERROR_LEM":case"FAULT_LEM":case"TROUBLE_LEM":case"error":if(!resolved){return this.getThemeColor("@ErrorColor")}else{return this.getThemeColor("@Black")}case"Warning":case"Message":case"WARNING_LEM":case"WARNING_LOCK_LEM":case"warning":if(!resolved){return this.getThemeColor("@WarningColor")}else{return this.getThemeColor("@Black")}case"Hint":case"Info":case"INFO_LEM":case"info":if(!resolved){return this.getThemeColor("@InfoColor")}else{return this.getThemeColor("@Black")}default:return""}}_getLocale(){var _a;return Lenze.Strings.isNullOrWhiteSpace(this.dateTimeLocale)?(_a=this.locService.CurrentLanguage.locale)!==null&&_a!==void 0?_a:this.dateTimeLocale:this.dateTimeLocale}_getSeperator(locale,rtf1){var _a,_b,_c;if(this._previousLocale===locale)return this._seperatorValue;const deltaTimeYearValues=rtf1.formatToParts(-1,"years");this._seperatorFirst=deltaTimeYearValues[0].type!=="integer";const deltaTimeSepValue=this._seperatorFirst?deltaTimeYearValues[0].value:(_a=deltaTimeYearValues.pop())===null||_a===void 0?void 0:_a.value;this._seperatorValue=this._seperatorFirst?(_b=deltaTimeSepValue===null||deltaTimeSepValue===void 0?void 0:deltaTimeSepValue.trim())!==null&&_b!==void 0?_b:"":(_c=deltaTimeSepValue===null||deltaTimeSepValue===void 0?void 0:deltaTimeSepValue.substring(deltaTimeSepValue.lastIndexOf(" ")))!==null&&_c!==void 0?_c:"";if(locale=="zh-CN")this._seperatorValue=this._seperatorValue.substring(1);this._previousLocale=locale;return this._seperatorValue}_createSymbol(show,iconFont,symbol,symbolType,symbolSize,backgroundColor,foregroundColor,classes){const symbolProperties={show:show,iconFont:iconFont,symbol:symbol,symbolType:symbolType,symbolSize:symbolSize,backgroundColor:backgroundColor,foregroundColor:foregroundColor};return new Lenze.Models.ControlInfo(VisiWin.UI.Symbol,symbolProperties,classes)}_sortAlarmClass(alarm1,alarm2,descending){const descendValue=Lenze.Arrays.getDescendValue(descending);const alarm1ClassLevel=this._getAlarmClassLevel(alarm1.Class);if(alarm1ClassLevel===0)return descendValue;const alarm2ClassLevel=this._getAlarmClassLevel(alarm2.Class);if(alarm2ClassLevel===0)return descendValue*-1;return alarm1ClassLevel<alarm2ClassLevel?descendValue*-1:alarm1ClassLevel>alarm2ClassLevel?descendValue:this._sortTime(alarm1,alarm2,descending)}_sortState(alarm1,alarm2,descending){const alarm1Resolved=this._resolvedStates.includes(alarm1.AlarmState);const alarm2Resolved=this._resolvedStates.includes(alarm2.AlarmState);const descendValue=Lenze.Arrays.getDescendValue(descending);return alarm1Resolved&&!alarm2Resolved?descendValue:alarm2Resolved&&!alarm1Resolved?descendValue*-1:this._sortTime(alarm1,alarm2,descending)}_sortTime(alarm1,alarm2,descending){return Lenze.Arrays.sortDateField(alarm1,alarm2,descending,"ActivationTime")}_sortByStringField(alarm1,alarm2,descending,field){let sortValue=Lenze.Arrays.sortField(alarm1,alarm2,descending,field);if(sortValue===0)sortValue=this._sortTime(alarm1,alarm2,descending);return sortValue}_getAlarmClassLevel(alarmClass){const className=alarmClass.Name;if(this._errorClasses.includes(className))return 1;if(this._warningClasses.includes(className))return 2;if(this._infoClasses.includes(className))return 3;return 0}_isInFilter(alarm){return this._componentsToFilter.findIndex(x=>alarm.Name.split("_").pop()===x.instanceID)!==-1}}UI.AlarmList=AlarmList})(UI=Lenze.UI||(Lenze.UI={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var UI;(function(UI){"use strict";class AlarmLineCollection extends Lenze.UI.ControlBase{get _isFirstAttached(){const value=this._firstAttached;if(!value)this._firstAttached=true;return value}constructor(element,options){super(element,options);this.properties={designerType:{propertyType:"base",type:"string",defaultValue:"Control"},registerTargetId:{propertyType:"base",defaultValue:"AlarmLineItem"},alarmLineItems:{propertyType:"member",type:"string"},showAlarmParam1:{propertyType:"member",type:"boolean",defaultValue:true},showAlarmGroup:{propertyType:"member",type:"boolean",defaultValue:false},newestAlarmOnTop:{propertyType:"member",type:"boolean",defaultValue:true},disableGrowOnClick:{propertyType:"member",type:"boolean",defaultValue:false},dropDownEnabled:{propertyType:"member",type:"boolean",defaultValue:false},dateTimeMode:{propertyType:"member",type:"string",defaultValue:"DateTime"},formatDate:{propertyType:"member",type:"string",defaultValue:"ShortDate"},formatTime:{propertyType:"member",type:"string",defaultValue:"LongTime"},inactiveBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@Transparent"},dropDownCloseButtonWidth:{propertyType:"member",type:"string",defaultValue:"auto"},dropDownCloseButtonMinWidth:{propertyType:"member",type:"string",defaultValue:"36px"},dropDownCloseButtonMaxWidth:{propertyType:"member",type:"string"},dropDownCloseButtonHeight:{propertyType:"member",type:"string",defaultValue:"48px"},dropDownCloseButtonMinHeight:{propertyType:"member",type:"string",defaultValue:"36px"},dropDownCloseButtonMaxHeight:{propertyType:"member",type:"string"},dropDownCloseButtonMargin:{propertyType:"member",type:"string",defaultValue:"8px"},dropDownCloseButtonPadding:{propertyType:"member",type:"string",defaultValue:"8px"},dropDownCloseButtonFlexShrink:{propertyType:"member",type:"number",defaultValue:0},dropDownCloseButtonFlexGrow:{propertyType:"member",type:"number",defaultValue:0},dropDownCloseButtonBorderWidth:{propertyType:"member",type:"string",defaultValue:"0px"},dropDownCloseButtonBorderStyle:{propertyType:"member",type:"string",defaultValue:"Solid"},dropDownCloseButtonBorderRadius:{propertyType:"member",type:"string",defaultValue:"4px"},dropDownCloseButtonOpacity:{propertyType:"member",type:"number",defaultValue:1},dropDownCloseButtonVisibility:{propertyType:"member",type:"string",defaultValue:"visible"},dropDownCloseButtonShadow:{propertyType:"member",type:"string"},dropDownCloseButtonPressedShadow:{propertyType:"member",type:"string"},dropDownCloseButtonTransition:{propertyType:"member",type:"string",defaultValue:"all 0s ease 0s"},dropDownCloseButtonBackground:{propertyType:"member",type:"string"},dropDownCloseButtonDisabled:{propertyType:"member",type:"boolean",defaultValue:false},dropDownCloseButtonShowSymbol:{propertyType:"member",type:"boolean",defaultValue:true},dropDownCloseButtonIconFont:{propertyType:"member",type:"string",defaultValue:"lenze-icons"},dropDownCloseButtonSymbol:{propertyType:"member",type:"string"},dropDownCloseButtonSymbolPressed:{propertyType:"member",type:"string"},dropDownCloseButtonSymbolType:{propertyType:"member",type:"string",defaultValue:"Icon"},dropDownCloseButtonSymbolSize:{propertyType:"member",type:"string",defaultValue:"24px"},dropDownCloseButtonSymbolMargin:{propertyType:"member",type:"string",defaultValue:"8px"},dropDownCloseButtonSymbolPosition:{propertyType:"member",type:"string",defaultValue:"Center"},dropDownCloseButtonShowText:{propertyType:"member",type:"boolean",defaultValue:true},dropDownCloseButtonTextWidth:{propertyType:"member",type:"string",defaultValue:"auto"},dropDownCloseButtonTextHeight:{propertyType:"member",type:"string",defaultValue:"auto"},dropDownCloseButtonTextMargin:{propertyType:"member",type:"string",defaultValue:"0px"},dropDownCloseButtonTextPadding:{propertyType:"member",type:"string",defaultValue:"0px"},dropDownCloseButtonText:{propertyType:"member",type:"string",defaultValue:"Close"},dropDownCloseButtonLocalizableText:{propertyType:"member",type:"string"},dropDownCloseButtonTextAlignment:{propertyType:"member",type:"string",defaultValue:"Left"},dropDownCloseButtonLineClamp:{propertyType:"member",type:"number",defaultValue:1},dropDownCloseButtonTextWrapping:{propertyType:"member",type:"string",defaultValue:"NoWrap"},dropDownCloseButtonTextTrimming:{propertyType:"member",type:"string",defaultValue:"Ellipsis"},dropDownCloseButtonFontClass:{propertyType:"member",type:"string",defaultValue:"Roboto16"},dropDownCloseButtonFontSize:{propertyType:"member",type:"string",defaultValue:"16px"},dropDownCloseButtonFontWeight:{propertyType:"member",type:"string",defaultValue:"Normal"},dropDownCloseButtonLineHeight:{propertyType:"member",type:"string",defaultValue:"20px"},dropDownCloseButtonTextContrast:{propertyType:"member",type:"number",defaultValue:1},dropDownCloseButtonUppercase:{propertyType:"member",type:"boolean",defaultValue:true},dropDownCloseButtonTextPosition:{propertyType:"member",type:"string",defaultValue:"Center"},dropDownCloseButtonBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@PrimaryColor"},dropDownCloseButtonHoverBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@HoverBackgroundColor"},dropDownCloseButtonPressedBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@PressedBackgroundColor"},dropDownCloseButtonDisabledBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@SecondaryDisabledBackgroundColor"},dropDownCloseButtonForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@AltForegroundColor"},dropDownCloseButtonPressedForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@SecondaryColor"},dropDownCloseButtonAuthSymbolForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledForegroundColor"},dropDownCloseButtonDisabledForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@SecondaryColor"},dropDownCloseButtonBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"},dropDownCloseButtonHoverBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@PrimaryColor"},dropDownCloseButtonDisabledBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@Transparent"},dropDownAcknowledgeButtonWidth:{propertyType:"member",type:"string",defaultValue:"auto"},dropDownAcknowledgeButtonMinWidth:{propertyType:"member",type:"string",defaultValue:"36px"},dropDownAcknowledgeButtonMaxWidth:{propertyType:"member",type:"string"},dropDownAcknowledgeButtonHeight:{propertyType:"member",type:"string",defaultValue:"48px"},dropDownAcknowledgeButtonMinHeight:{propertyType:"member",type:"string",defaultValue:"36px"},dropDownAcknowledgeButtonMaxHeight:{propertyType:"member",type:"string"},dropDownAcknowledgeButtonMargin:{propertyType:"member",type:"string",defaultValue:"8px"},dropDownAcknowledgeButtonPadding:{propertyType:"member",type:"string",defaultValue:"8px"},dropDownAcknowledgeButtonFlexShrink:{propertyType:"member",type:"number",defaultValue:0},dropDownAcknowledgeButtonFlexGrow:{propertyType:"member",type:"number",defaultValue:0},dropDownAcknowledgeButtonBorderWidth:{propertyType:"member",type:"string",defaultValue:"0px"},dropDownAcknowledgeButtonBorderStyle:{propertyType:"member",type:"string",defaultValue:"Solid"},dropDownAcknowledgeButtonBorderRadius:{propertyType:"member",type:"string",defaultValue:"4px"},dropDownAcknowledgeButtonOpacity:{propertyType:"member",type:"number",defaultValue:1},dropDownAcknowledgeButtonVisibility:{propertyType:"member",type:"string",defaultValue:"visible"},dropDownAcknowledgeButtonShadow:{propertyType:"member",type:"string"},dropDownAcknowledgeButtonPressedShadow:{propertyType:"member",type:"string"},dropDownAcknowledgeButtonTransition:{propertyType:"member",type:"string",defaultValue:"all 0s ease 0s"},dropDownAcknowledgeButtonBackground:{propertyType:"member",type:"string"},dropDownAcknowledgeButtonDisabled:{propertyType:"member",type:"boolean",defaultValue:false},dropDownAcknowledgeButtonShowSymbol:{propertyType:"member",type:"boolean",defaultValue:true},dropDownAcknowledgeButtonIconFont:{propertyType:"member",type:"string",defaultValue:"lenze-icons"},dropDownAcknowledgeButtonSymbol:{propertyType:"member",type:"string"},dropDownAcknowledgeButtonSymbolPressed:{propertyType:"member",type:"string"},dropDownAcknowledgeButtonSymbolType:{propertyType:"member",type:"string",defaultValue:"Icon"},dropDownAcknowledgeButtonSymbolSize:{propertyType:"member",type:"string",defaultValue:"24px"},dropDownAcknowledgeButtonSymbolMargin:{propertyType:"member",type:"string",defaultValue:"8px"},dropDownAcknowledgeButtonSymbolPosition:{propertyType:"member",type:"string",defaultValue:"Center"},dropDownAcknowledgeButtonShowText:{propertyType:"member",type:"boolean",defaultValue:true},dropDownAcknowledgeButtonTextWidth:{propertyType:"member",type:"string",defaultValue:"auto"},dropDownAcknowledgeButtonTextHeight:{propertyType:"member",type:"string",defaultValue:"auto"},dropDownAcknowledgeButtonTextMargin:{propertyType:"member",type:"string",defaultValue:"0px"},dropDownAcknowledgeButtonTextPadding:{propertyType:"member",type:"string",defaultValue:"0px"},dropDownAcknowledgeButtonText:{propertyType:"member",type:"string",defaultValue:"Acknowledge all"},dropDownAcknowledgeButtonLocalizableText:{propertyType:"member",type:"string"},dropDownAcknowledgeButtonTextAlignment:{propertyType:"member",type:"string",defaultValue:"Left"},dropDownAcknowledgeButtonLineClamp:{propertyType:"member",type:"number",defaultValue:1},dropDownAcknowledgeButtonTextWrapping:{propertyType:"member",type:"string",defaultValue:"NoWrap"},dropDownAcknowledgeButtonTextTrimming:{propertyType:"member",type:"string",defaultValue:"Ellipsis"},dropDownAcknowledgeButtonFontClass:{propertyType:"member",type:"string",defaultValue:"Roboto16"},dropDownAcknowledgeButtonFontSize:{propertyType:"member",type:"string",defaultValue:"16px"},dropDownAcknowledgeButtonFontWeight:{propertyType:"member",type:"string",defaultValue:"Normal"},dropDownAcknowledgeButtonLineHeight:{propertyType:"member",type:"string",defaultValue:"20px"},dropDownAcknowledgeButtonTextContrast:{propertyType:"member",type:"number",defaultValue:1},dropDownAcknowledgeButtonUppercase:{propertyType:"member",type:"boolean",defaultValue:true},dropDownAcknowledgeButtonTextPosition:{propertyType:"member",type:"string",defaultValue:"Center"},dropDownAcknowledgeButtonBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@PrimaryColor"},dropDownAcknowledgeButtonHoverBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@HoverBackgroundColor"},dropDownAcknowledgeButtonPressedBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@PressedBackgroundColor"},dropDownAcknowledgeButtonDisabledBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@SecondaryDisabledBackgroundColor"},dropDownAcknowledgeButtonForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@AltForegroundColor"},dropDownAcknowledgeButtonPressedForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@SecondaryColor"},dropDownAcknowledgeButtonAuthSymbolForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledForegroundColor"},dropDownAcknowledgeButtonDisabledForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@SecondaryColor"},dropDownAcknowledgeButtonBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"},dropDownAcknowledgeButtonHoverBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@PrimaryColor"},dropDownAcknowledgeButtonDisabledBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@Transparent"},dropDownCustomButtonWidth:{propertyType:"member",type:"string",defaultValue:"auto"},dropDownCustomButtonMinWidth:{propertyType:"member",type:"string",defaultValue:"36px"},dropDownCustomButtonMaxWidth:{propertyType:"member",type:"string"},dropDownCustomButtonHeight:{propertyType:"member",type:"string",defaultValue:"48px"},dropDownCustomButtonMinHeight:{propertyType:"member",type:"string",defaultValue:"36px"},dropDownCustomButtonMaxHeight:{propertyType:"member",type:"string"},dropDownCustomButtonMargin:{propertyType:"member",type:"string",defaultValue:"8px"},dropDownCustomButtonPadding:{propertyType:"member",type:"string",defaultValue:"8px"},dropDownCustomButtonFlexShrink:{propertyType:"member",type:"number",defaultValue:0},dropDownCustomButtonFlexGrow:{propertyType:"member",type:"number",defaultValue:0},dropDownCustomButtonBorderWidth:{propertyType:"member",type:"string",defaultValue:"0px"},dropDownCustomButtonBorderStyle:{propertyType:"member",type:"string",defaultValue:"Solid"},dropDownCustomButtonBorderRadius:{propertyType:"member",type:"string",defaultValue:"4px"},dropDownCustomButtonOpacity:{propertyType:"member",type:"number",defaultValue:1},dropDownCustomButtonVisibility:{propertyType:"member",type:"string",defaultValue:"visible"},dropDownCustomButtonShadow:{propertyType:"member",type:"string"},dropDownCustomButtonPressedShadow:{propertyType:"member",type:"string"},dropDownCustomButtonTransition:{propertyType:"member",type:"string",defaultValue:"all 0s ease 0s"},dropDownCustomButtonBackground:{propertyType:"member",type:"string"},dropDownCustomButtonDisabled:{propertyType:"member",type:"boolean",defaultValue:false},dropDownCustomButtonShowSymbol:{propertyType:"member",type:"boolean",defaultValue:true},dropDownCustomButtonIconFont:{propertyType:"member",type:"string",defaultValue:"lenze-icons"},dropDownCustomButtonSymbol:{propertyType:"member",type:"string"},dropDownCustomButtonSymbolPressed:{propertyType:"member",type:"string"},dropDownCustomButtonSymbolType:{propertyType:"member",type:"string",defaultValue:"Icon"},dropDownCustomButtonSymbolSize:{propertyType:"member",type:"string",defaultValue:"24px"},dropDownCustomButtonSymbolMargin:{propertyType:"member",type:"string",defaultValue:"8px"},dropDownCustomButtonSymbolPosition:{propertyType:"member",type:"string",defaultValue:"Center"},dropDownCustomButtonShowText:{propertyType:"member",type:"boolean",defaultValue:true},dropDownCustomButtonTextWidth:{propertyType:"member",type:"string",defaultValue:"auto"},dropDownCustomButtonTextHeight:{propertyType:"member",type:"string",defaultValue:"auto"},dropDownCustomButtonTextMargin:{propertyType:"member",type:"string",defaultValue:"0px"},dropDownCustomButtonTextPadding:{propertyType:"member",type:"string",defaultValue:"0px"},dropDownCustomButtonText:{propertyType:"member",type:"string",defaultValue:"Custom"},dropDownCustomButtonLocalizableText:{propertyType:"member",type:"string"},dropDownCustomButtonTextAlignment:{propertyType:"member",type:"string",defaultValue:"Left"},dropDownCustomButtonLineClamp:{propertyType:"member",type:"number",defaultValue:1},dropDownCustomButtonTextWrapping:{propertyType:"member",type:"string",defaultValue:"NoWrap"},dropDownCustomButtonTextTrimming:{propertyType:"member",type:"string",defaultValue:"Ellipsis"},dropDownCustomButtonFontClass:{propertyType:"member",type:"string",defaultValue:"Roboto16"},dropDownCustomButtonFontSize:{propertyType:"member",type:"string",defaultValue:"16px"},dropDownCustomButtonFontWeight:{propertyType:"member",type:"string",defaultValue:"Normal"},dropDownCustomButtonLineHeight:{propertyType:"member",type:"string",defaultValue:"20px"},dropDownCustomButtonTextContrast:{propertyType:"member",type:"number",defaultValue:1},dropDownCustomButtonUppercase:{propertyType:"member",type:"boolean",defaultValue:true},dropDownCustomButtonTextPosition:{propertyType:"member",type:"string",defaultValue:"Center"},dropDownCustomButtonBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@PrimaryColor"},dropDownCustomButtonHoverBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@HoverBackgroundColor"},dropDownCustomButtonPressedBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@PressedBackgroundColor"},dropDownCustomButtonDisabledBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@SecondaryDisabledBackgroundColor"},dropDownCustomButtonForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@AltForegroundColor"},dropDownCustomButtonPressedForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@SecondaryColor"},dropDownCustomButtonAuthSymbolForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledForegroundColor"},dropDownCustomButtonDisabledForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@SecondaryColor"},dropDownCustomButtonBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"},dropDownCustomButtonHoverBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@PrimaryColor"},dropDownCustomButtonDisabledBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@Transparent"},buttonclick:{propertyType:"event",group:"Event"},customclick:{propertyType:"event",group:"Event"},acknowledgeclick:{propertyType:"event",group:"Event"}};this._firstAttached=false;this.initialize(Lenze.UI.AlarmLineCollection)}registerChild(controlType,action,element,options){if(action!==this.registerTargetId)return true;if(element&&element.winControl)this._alarmLineItemsCollection.push(element);return false}createTemplate(){this._alarmLineItemsCollection=[];return this.processElements([])}afterInit(){this._clickHandler=this._onClick.bind(this);this._alarmLineItemClickHandler=this._onAlarmLineItemClick.bind(this);this._alarmLineItemCustomClickHandler=this._onCustomClick.bind(this);this._alarmLineItemAcknowledgeClickHandler=this._onAcknowledgeClick.bind(this);this._alarmsChangedHandler=this._onChangeAlarms.bind(this)}_updateColors(changes){this.setColor("inactiveBackgroundColor","backgroundColor");for(let alarmItemElement of this._alarmLineItemsCollection){const alarmItemControl=alarmItemElement.winControl;alarmItemControl.dropDownCloseButtonBackgroundColor=this.dropDownCloseButtonBackgroundColor;alarmItemControl.dropDownCloseButtonHoverBackgroundColor=this.dropDownCloseButtonHoverBackgroundColor;alarmItemControl.dropDownCloseButtonPressedBackgroundColor=this.dropDownCloseButtonPressedBackgroundColor;alarmItemControl.dropDownCloseButtonDisabledBackgroundColor=this.dropDownCloseButtonDisabledBackgroundColor;alarmItemControl.dropDownCloseButtonForegroundColor=this.dropDownCloseButtonForegroundColor;alarmItemControl.dropDownCloseButtonPressedForegroundColor=this.dropDownCloseButtonPressedForegroundColor;alarmItemControl.dropDownCloseButtonAuthSymbolForegroundColor=this.dropDownCloseButtonAuthSymbolForegroundColor;alarmItemControl.dropDownCloseButtonDisabledForegroundColor=this.dropDownCloseButtonDisabledForegroundColor;alarmItemControl.dropDownCloseButtonBorderColor=this.dropDownCloseButtonBorderColor;alarmItemControl.dropDownCloseButtonHoverBorderColor=this.dropDownCloseButtonHoverBorderColor;alarmItemControl.dropDownCloseButtonDisabledBorderColor=this.dropDownCloseButtonDisabledBorderColor;alarmItemControl.dropDownAcknowledgeButtonBackgroundColor=this.dropDownAcknowledgeButtonBackgroundColor;alarmItemControl.dropDownAcknowledgeButtonHoverBackgroundColor=this.dropDownAcknowledgeButtonHoverBackgroundColor;alarmItemControl.dropDownAcknowledgeButtonPressedBackgroundColor=this.dropDownAcknowledgeButtonPressedBackgroundColor;alarmItemControl.dropDownAcknowledgeButtonDisabledBackgroundColor=this.dropDownAcknowledgeButtonDisabledBackgroundColor;alarmItemControl.dropDownAcknowledgeButtonForegroundColor=this.dropDownAcknowledgeButtonForegroundColor;alarmItemControl.dropDownAcknowledgeButtonPressedForegroundColor=this.dropDownAcknowledgeButtonPressedForegroundColor;alarmItemControl.dropDownAcknowledgeButtonAuthSymbolForegroundColor=this.dropDownAcknowledgeButtonAuthSymbolForegroundColor;alarmItemControl.dropDownAcknowledgeButtonDisabledForegroundColor=this.dropDownAcknowledgeButtonDisabledForegroundColor;alarmItemControl.dropDownAcknowledgeButtonBorderColor=this.dropDownAcknowledgeButtonBorderColor;alarmItemControl.dropDownAcknowledgeButtonHoverBorderColor=this.dropDownAcknowledgeButtonHoverBorderColor;alarmItemControl.dropDownAcknowledgeButtonDisabledBorderColor=this.dropDownAcknowledgeButtonDisabledBorderColor;alarmItemControl.dropDownCustomButtonBackgroundColor=this.dropDownCustomButtonBackgroundColor;alarmItemControl.dropDownCustomButtonHoverBackgroundColor=this.dropDownCustomButtonHoverBackgroundColor;alarmItemControl.dropDownCustomButtonPressedBackgroundColor=this.dropDownCustomButtonPressedBackgroundColor;alarmItemControl.dropDownCustomButtonDisabledBackgroundColor=this.dropDownCustomButtonDisabledBackgroundColor;alarmItemControl.dropDownCustomButtonForegroundColor=this.dropDownCustomButtonForegroundColor;alarmItemControl.dropDownCustomButtonPressedForegroundColor=this.dropDownCustomButtonPressedForegroundColor;alarmItemControl.dropDownCustomButtonAuthSymbolForegroundColor=this.dropDownCustomButtonAuthSymbolForegroundColor;alarmItemControl.dropDownCustomButtonDisabledForegroundColor=this.dropDownCustomButtonDisabledForegroundColor;alarmItemControl.dropDownCustomButtonBorderColor=this.dropDownCustomButtonBorderColor;alarmItemControl.dropDownCustomButtonHoverBorderColor=this.dropDownCustomButtonHoverBorderColor;alarmItemControl.dropDownCustomButtonDisabledBorderColor=this.dropDownCustomButtonDisabledBorderColor}}_updateLayout(changes){if(!VisiWin.Utilities.isInDesignMode()&&(this._alarmLineItemsCollection==null||changes.changeType!=="lifeCycle"||changes.changeName!=="initialized"))return;for(let i=0;i<this._alarmLineItemsCollection.length;i++){const alarmItemElement=this._alarmLineItemsCollection[i];const alarmItemControl=alarmItemElement.winControl;alarmItemControl.dateTimeMode=this.dateTimeMode;alarmItemControl.formatDate=this.formatDate;alarmItemControl.formatTime=this.formatTime;alarmItemControl.showAlarmParam1=this.showAlarmParam1;alarmItemControl.showAlarmGroup=this.showAlarmGroup;alarmItemControl.newestAlarmOnTop=this.newestAlarmOnTop;alarmItemControl.dropDownEnabled=this.dropDownEnabled;alarmItemElement.style.cursor=this.disableGrowOnClick?"default":"pointer";if(this.disableGrowOnClick)alarmItemElement.classList.add("lenze-alarmlineitem__grow-icon-disabled");else alarmItemElement.classList.remove("lenze-alarmlineitem__grow-icon-disabled");alarmItemControl.dropDownCloseButtonWidth=this.dropDownCloseButtonWidth;alarmItemControl.dropDownCloseButtonMinWidth=this.dropDownCloseButtonMinWidth;alarmItemControl.dropDownCloseButtonMaxWidth=this.dropDownCloseButtonMaxWidth;alarmItemControl.dropDownCloseButtonHeight=this.dropDownCloseButtonHeight;alarmItemControl.dropDownCloseButtonMinHeight=this.dropDownCloseButtonMinHeight;alarmItemControl.dropDownCloseButtonMaxHeight=this.dropDownCloseButtonMaxHeight;alarmItemControl.dropDownCloseButtonMargin=this.dropDownCloseButtonMargin;alarmItemControl.dropDownCloseButtonPadding=this.dropDownCloseButtonPadding;alarmItemControl.dropDownCloseButtonFlexShrink=this.dropDownCloseButtonFlexShrink;alarmItemControl.dropDownCloseButtonFlexGrow=this.dropDownCloseButtonFlexGrow;alarmItemControl.dropDownCloseButtonBorderWidth=this.dropDownCloseButtonBorderWidth;alarmItemControl.dropDownCloseButtonBorderStyle=this.dropDownCloseButtonBorderStyle;alarmItemControl.dropDownCloseButtonBorderRadius=this.dropDownCloseButtonBorderRadius;alarmItemControl.dropDownCloseButtonOpacity=this.dropDownCloseButtonOpacity;alarmItemControl.dropDownCloseButtonVisibility=this.dropDownCloseButtonVisibility;alarmItemControl.dropDownCloseButtonShadow=this.dropDownCloseButtonShadow;alarmItemControl.dropDownCloseButtonPressedShadow=this.dropDownCloseButtonPressedShadow;alarmItemControl.dropDownCloseButtonTransition=this.dropDownCloseButtonTransition;alarmItemControl.dropDownCloseButtonBackground=this.dropDownCloseButtonBackground;alarmItemControl.dropDownCloseButtonDisabled=this.dropDownCloseButtonDisabled;alarmItemControl.dropDownCloseButtonShowSymbol=this.dropDownCloseButtonShowSymbol;alarmItemControl.dropDownCloseButtonIconFont=this.dropDownCloseButtonIconFont;alarmItemControl.dropDownCloseButtonSymbol=this.dropDownCloseButtonSymbol;alarmItemControl.dropDownCloseButtonSymbolPressed=this.dropDownCloseButtonSymbolPressed;alarmItemControl.dropDownCloseButtonSymbolType=this.dropDownCloseButtonSymbolType;alarmItemControl.dropDownCloseButtonSymbolSize=this.dropDownCloseButtonSymbolSize;alarmItemControl.dropDownCloseButtonSymbolMargin=this.dropDownCloseButtonSymbolMargin;alarmItemControl.dropDownCloseButtonSymbolPosition=this.dropDownCloseButtonSymbolPosition;alarmItemControl.dropDownCloseButtonShowText=this.dropDownCloseButtonShowText;alarmItemControl.dropDownCloseButtonTextWidth=this.dropDownCloseButtonTextWidth;alarmItemControl.dropDownCloseButtonTextHeight=this.dropDownCloseButtonTextHeight;alarmItemControl.dropDownCloseButtonTextMargin=this.dropDownCloseButtonTextMargin;alarmItemControl.dropDownCloseButtonTextPadding=this.dropDownCloseButtonTextPadding;alarmItemControl.dropDownCloseButtonText=this.dropDownCloseButtonText;alarmItemControl.dropDownCloseButtonLocalizableText=this.dropDownCloseButtonLocalizableText;alarmItemControl.dropDownCloseButtonTextAlignment=this.dropDownCloseButtonTextAlignment;alarmItemControl.dropDownCloseButtonLineClamp=this.dropDownCloseButtonLineClamp;alarmItemControl.dropDownCloseButtonTextWrapping=this.dropDownCloseButtonTextWrapping;alarmItemControl.dropDownCloseButtonTextTrimming=this.dropDownCloseButtonTextTrimming;alarmItemControl.dropDownCloseButtonFontClass=this.dropDownCloseButtonFontClass;alarmItemControl.dropDownCloseButtonFontSize=this.dropDownCloseButtonFontSize;alarmItemControl.dropDownCloseButtonFontWeight=this.dropDownCloseButtonFontWeight;alarmItemControl.dropDownCloseButtonLineHeight=this.dropDownCloseButtonLineHeight;alarmItemControl.dropDownCloseButtonTextContrast=this.dropDownCloseButtonTextContrast;alarmItemControl.dropDownCloseButtonUppercase=this.dropDownCloseButtonUppercase;alarmItemControl.dropDownCloseButtonTextPosition=this.dropDownCloseButtonTextPosition;alarmItemControl.dropDownAcknowledgeButtonWidth=this.dropDownAcknowledgeButtonWidth;alarmItemControl.dropDownAcknowledgeButtonMinWidth=this.dropDownAcknowledgeButtonMinWidth;alarmItemControl.dropDownAcknowledgeButtonMaxWidth=this.dropDownAcknowledgeButtonMaxWidth;alarmItemControl.dropDownAcknowledgeButtonHeight=this.dropDownAcknowledgeButtonHeight;alarmItemControl.dropDownAcknowledgeButtonMinHeight=this.dropDownAcknowledgeButtonMinHeight;alarmItemControl.dropDownAcknowledgeButtonMaxHeight=this.dropDownAcknowledgeButtonMaxHeight;alarmItemControl.dropDownAcknowledgeButtonMargin=this.dropDownAcknowledgeButtonMargin;alarmItemControl.dropDownAcknowledgeButtonPadding=this.dropDownAcknowledgeButtonPadding;alarmItemControl.dropDownAcknowledgeButtonFlexShrink=this.dropDownAcknowledgeButtonFlexShrink;alarmItemControl.dropDownAcknowledgeButtonFlexGrow=this.dropDownAcknowledgeButtonFlexGrow;alarmItemControl.dropDownAcknowledgeButtonBorderWidth=this.dropDownAcknowledgeButtonBorderWidth;alarmItemControl.dropDownAcknowledgeButtonBorderStyle=this.dropDownAcknowledgeButtonBorderStyle;alarmItemControl.dropDownAcknowledgeButtonBorderRadius=this.dropDownAcknowledgeButtonBorderRadius;alarmItemControl.dropDownAcknowledgeButtonOpacity=this.dropDownAcknowledgeButtonOpacity;alarmItemControl.dropDownAcknowledgeButtonVisibility=this.dropDownAcknowledgeButtonVisibility;alarmItemControl.dropDownAcknowledgeButtonShadow=this.dropDownAcknowledgeButtonShadow;alarmItemControl.dropDownAcknowledgeButtonPressedShadow=this.dropDownAcknowledgeButtonPressedShadow;alarmItemControl.dropDownAcknowledgeButtonTransition=this.dropDownAcknowledgeButtonTransition;alarmItemControl.dropDownAcknowledgeButtonBackground=this.dropDownAcknowledgeButtonBackground;alarmItemControl.dropDownAcknowledgeButtonDisabled=this.dropDownAcknowledgeButtonDisabled;alarmItemControl.dropDownAcknowledgeButtonShowSymbol=this.dropDownAcknowledgeButtonShowSymbol;alarmItemControl.dropDownAcknowledgeButtonIconFont=this.dropDownAcknowledgeButtonIconFont;alarmItemControl.dropDownAcknowledgeButtonSymbol=this.dropDownAcknowledgeButtonSymbol;alarmItemControl.dropDownAcknowledgeButtonSymbolPressed=this.dropDownAcknowledgeButtonSymbolPressed;alarmItemControl.dropDownAcknowledgeButtonSymbolType=this.dropDownAcknowledgeButtonSymbolType;alarmItemControl.dropDownAcknowledgeButtonSymbolSize=this.dropDownAcknowledgeButtonSymbolSize;alarmItemControl.dropDownAcknowledgeButtonSymbolMargin=this.dropDownAcknowledgeButtonSymbolMargin;alarmItemControl.dropDownAcknowledgeButtonSymbolPosition=this.dropDownAcknowledgeButtonSymbolPosition;alarmItemControl.dropDownAcknowledgeButtonShowText=this.dropDownAcknowledgeButtonShowText;alarmItemControl.dropDownAcknowledgeButtonTextWidth=this.dropDownAcknowledgeButtonTextWidth;alarmItemControl.dropDownAcknowledgeButtonTextHeight=this.dropDownAcknowledgeButtonTextHeight;alarmItemControl.dropDownAcknowledgeButtonTextMargin=this.dropDownAcknowledgeButtonTextMargin;alarmItemControl.dropDownAcknowledgeButtonTextPadding=this.dropDownAcknowledgeButtonTextPadding;alarmItemControl.dropDownAcknowledgeButtonText=this.dropDownAcknowledgeButtonText;alarmItemControl.dropDownAcknowledgeButtonLocalizableText=this.dropDownAcknowledgeButtonLocalizableText;alarmItemControl.dropDownAcknowledgeButtonTextAlignment=this.dropDownAcknowledgeButtonTextAlignment;alarmItemControl.dropDownAcknowledgeButtonLineClamp=this.dropDownAcknowledgeButtonLineClamp;alarmItemControl.dropDownAcknowledgeButtonTextWrapping=this.dropDownAcknowledgeButtonTextWrapping;alarmItemControl.dropDownAcknowledgeButtonTextTrimming=this.dropDownAcknowledgeButtonTextTrimming;alarmItemControl.dropDownAcknowledgeButtonFontClass=this.dropDownAcknowledgeButtonFontClass;alarmItemControl.dropDownAcknowledgeButtonFontSize=this.dropDownAcknowledgeButtonFontSize;alarmItemControl.dropDownAcknowledgeButtonFontWeight=this.dropDownAcknowledgeButtonFontWeight;alarmItemControl.dropDownAcknowledgeButtonLineHeight=this.dropDownAcknowledgeButtonLineHeight;alarmItemControl.dropDownAcknowledgeButtonTextContrast=this.dropDownAcknowledgeButtonTextContrast;alarmItemControl.dropDownAcknowledgeButtonUppercase=this.dropDownAcknowledgeButtonUppercase;alarmItemControl.dropDownAcknowledgeButtonTextPosition=this.dropDownAcknowledgeButtonTextPosition;alarmItemControl.dropDownCustomButtonWidth=this.dropDownCustomButtonWidth;alarmItemControl.dropDownCustomButtonMinWidth=this.dropDownCustomButtonMinWidth;alarmItemControl.dropDownCustomButtonMaxWidth=this.dropDownCustomButtonMaxWidth;alarmItemControl.dropDownCustomButtonHeight=this.dropDownCustomButtonHeight;alarmItemControl.dropDownCustomButtonMinHeight=this.dropDownCustomButtonMinHeight;alarmItemControl.dropDownCustomButtonMaxHeight=this.dropDownCustomButtonMaxHeight;alarmItemControl.dropDownCustomButtonMargin=this.dropDownCustomButtonMargin;alarmItemControl.dropDownCustomButtonPadding=this.dropDownCustomButtonPadding;alarmItemControl.dropDownCustomButtonFlexShrink=this.dropDownCustomButtonFlexShrink;alarmItemControl.dropDownCustomButtonFlexGrow=this.dropDownCustomButtonFlexGrow;alarmItemControl.dropDownCustomButtonBorderWidth=this.dropDownCustomButtonBorderWidth;alarmItemControl.dropDownCustomButtonBorderStyle=this.dropDownCustomButtonBorderStyle;alarmItemControl.dropDownCustomButtonBorderRadius=this.dropDownCustomButtonBorderRadius;alarmItemControl.dropDownCustomButtonOpacity=this.dropDownCustomButtonOpacity;alarmItemControl.dropDownCustomButtonVisibility=this.dropDownCustomButtonVisibility;alarmItemControl.dropDownCustomButtonShadow=this.dropDownCustomButtonShadow;alarmItemControl.dropDownCustomButtonPressedShadow=this.dropDownCustomButtonPressedShadow;alarmItemControl.dropDownCustomButtonTransition=this.dropDownCustomButtonTransition;alarmItemControl.dropDownCustomButtonBackground=this.dropDownCustomButtonBackground;alarmItemControl.dropDownCustomButtonDisabled=this.dropDownCustomButtonDisabled;alarmItemControl.dropDownCustomButtonShowSymbol=this.dropDownCustomButtonShowSymbol;alarmItemControl.dropDownCustomButtonIconFont=this.dropDownCustomButtonIconFont;alarmItemControl.dropDownCustomButtonSymbol=this.dropDownCustomButtonSymbol;alarmItemControl.dropDownCustomButtonSymbolPressed=this.dropDownCustomButtonSymbolPressed;alarmItemControl.dropDownCustomButtonSymbolType=this.dropDownCustomButtonSymbolType;alarmItemControl.dropDownCustomButtonSymbolSize=this.dropDownCustomButtonSymbolSize;alarmItemControl.dropDownCustomButtonSymbolMargin=this.dropDownCustomButtonSymbolMargin;alarmItemControl.dropDownCustomButtonSymbolPosition=this.dropDownCustomButtonSymbolPosition;alarmItemControl.dropDownCustomButtonShowText=this.dropDownCustomButtonShowText;alarmItemControl.dropDownCustomButtonTextWidth=this.dropDownCustomButtonTextWidth;alarmItemControl.dropDownCustomButtonTextHeight=this.dropDownCustomButtonTextHeight;alarmItemControl.dropDownCustomButtonTextMargin=this.dropDownCustomButtonTextMargin;alarmItemControl.dropDownCustomButtonTextPadding=this.dropDownCustomButtonTextPadding;alarmItemControl.dropDownCustomButtonText=this.dropDownCustomButtonText;alarmItemControl.dropDownCustomButtonLocalizableText=this.dropDownCustomButtonLocalizableText;alarmItemControl.dropDownCustomButtonTextAlignment=this.dropDownCustomButtonTextAlignment;alarmItemControl.dropDownCustomButtonLineClamp=this.dropDownCustomButtonLineClamp;alarmItemControl.dropDownCustomButtonTextWrapping=this.dropDownCustomButtonTextWrapping;alarmItemControl.dropDownCustomButtonTextTrimming=this.dropDownCustomButtonTextTrimming;alarmItemControl.dropDownCustomButtonFontClass=this.dropDownCustomButtonFontClass;alarmItemControl.dropDownCustomButtonFontSize=this.dropDownCustomButtonFontSize;alarmItemControl.dropDownCustomButtonFontWeight=this.dropDownCustomButtonFontWeight;alarmItemControl.dropDownCustomButtonLineHeight=this.dropDownCustomButtonLineHeight;alarmItemControl.dropDownCustomButtonTextContrast=this.dropDownCustomButtonTextContrast;alarmItemControl.dropDownCustomButtonUppercase=this.dropDownCustomButtonUppercase;alarmItemControl.dropDownCustomButtonTextPosition=this.dropDownCustomButtonTextPosition;if(VisiWin.Utilities.isInDesignMode()){alarmItemControl.showDetails=i==0;if(i==0)alarmItemElement.classList.add("lenze-alarmlinecollection__grow")}}if(changes.changeType==="lifeCycle"&&changes.changeName==="initialized"){this._updateColors(changes);this.attach()}}async attach(){if(VisiWin.Utilities.isInDesignMode()||!this._isFirstAttached)return await super.attach();for(let alarmItem of this._alarmLineItemsCollection){alarmItem.winControl.addEventListener(UI.AlarmLineItem.alarmsChangedEventName,this._alarmsChangedHandler);alarmItem.winControl.addEventListener(UI.AlarmLineItem.onClickEventName,this._alarmLineItemClickHandler);alarmItem.winControl.addEventListener(UI.AlarmLineItem.onCustomClickEventName,this._alarmLineItemCustomClickHandler);alarmItem.winControl.addEventListener(UI.AlarmLineItem.onAcknowledgeClickEventName,this._alarmLineItemAcknowledgeClickHandler)}this.element.addEventListener("pointerup",this._clickHandler);await super.attach()}async detach(){if(VisiWin.Utilities.isInDesignMode())return await super.detach();for(let alarmItem of this._alarmLineItemsCollection){alarmItem.winControl.removeEventListener(UI.AlarmLineItem.alarmsChangedEventName,this._alarmsChangedHandler);alarmItem.winControl.removeEventListener(UI.AlarmLineItem.onClickEventName,this._alarmLineItemClickHandler);alarmItem.winControl.removeEventListener(UI.AlarmLineItem.onCustomClickEventName,this._alarmLineItemCustomClickHandler);alarmItem.winControl.removeEventListener(UI.AlarmLineItem.onAcknowledgeClickEventName,this._alarmLineItemAcknowledgeClickHandler)}this.element.removeEventListener("pointerup",this._clickHandler);await super.detach()}dispose(){if(VisiWin.Utilities.isInDesignMode())return super.dispose();for(let alarmItem of this._alarmLineItemsCollection){alarmItem.winControl.removeEventListener(UI.AlarmLineItem.alarmsChangedEventName,this._alarmsChangedHandler);alarmItem.winControl.removeEventListener(UI.AlarmLineItem.onClickEventName,this._alarmLineItemClickHandler);alarmItem.winControl.removeEventListener(UI.AlarmLineItem.onCustomClickEventName,this._alarmLineItemCustomClickHandler);alarmItem.winControl.removeEventListener(UI.AlarmLineItem.onAcknowledgeClickEventName,this._alarmLineItemAcknowledgeClickHandler)}this.element.removeEventListener("pointerup",this._clickHandler);return super.dispose()}_updateAlarmItemsSize(reset){let showDetailsIsSet=false;let hasActiveAlarm=false;for(let alarmItem of this._alarmLineItemsCollection){if(reset){alarmItem.winControl.showDetails=!showDetailsIsSet&&alarmItem.winControl.hasActiveAlarm;alarmItem.style.transition=""}else alarmItem.style.transition="flex linear 0.25s";if(alarmItem.winControl.showDetails){showDetailsIsSet=true;alarmItem.classList.add("lenze-alarmlinecollection__grow")}else alarmItem.classList.remove("lenze-alarmlinecollection__grow");if(alarmItem.winControl.hasActiveAlarm)hasActiveAlarm=true;alarmItem.winControl.updateLayout()}if(!hasActiveAlarm)this.element.classList.remove("lenze-alarmlinecollection__expand")}_onChangeAlarms(message){this._updateAlarmItemsSize(true)}_onClick(args){this.dispatchEvent("buttonclick",args)}_onCustomClick(args){this.dispatchEvent(UI.AlarmLineItem.onCustomClickEventName,args)}_onAcknowledgeClick(args){this.dispatchEvent(UI.AlarmLineItem.onAcknowledgeClickEventName,args)}_onAlarmLineItemClick(args){if(this.disableGrowOnClick||args==null||args.currentTarget==null||args.currentTarget.controlName!==UI.AlarmLineItem.controlName)return;const clickedAlarmItem=args.currentTarget;for(let item of this._alarmLineItemsCollection){const alarmItem=item.winControl;alarmItem.showDetails=alarmItem===clickedAlarmItem}this._updateAlarmItemsSize(false)}}UI.AlarmLineCollection=AlarmLineCollection})(UI=Lenze.UI||(Lenze.UI={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var UI;(function(UI){"use strict";class AlarmLineDropDownItem extends Lenze.UI.ControlBase{constructor(element,options){super(element,options);this.properties={designerType:{propertyType:"base",type:"string",defaultValue:"Control"},iconFont:{propertyType:"child",type:"string",child:"_iconElement",defaultValue:"lenze-icons"},symbolType:{propertyType:"child",type:"string",child:"_iconElement",childProperty:"symbolType",defaultValue:"Icon"},symbol:{propertyType:"child",type:"string",child:"_iconElement",childProperty:"symbol",defaultValue:"error"},countElementWidth:{propertyType:"child",type:"string",child:"_countElement",childProperty:"width"},alarmClassWidth:{propertyType:"child",type:"string",child:"_alarmClassElement",childProperty:"width"},alarmGroupWidth:{propertyType:"child",type:"string",child:"_alarmGroupElement",childProperty:"width"},alarmIdWidth:{propertyType:"child",type:"string",child:"_alarmIdElement",childProperty:"width"},textWidth:{propertyType:"child",type:"string",child:"_textElement",childProperty:"width"},fontClass:{propertyType:"member",type:"string",defaultValue:"Label1"},textWrapping:{propertyType:"child",type:"string",child:"_textElement",defaultValue:"NoWrap"},dateTimeMode:{propertyType:"child",type:"string",child:"_dateTimeElement",childProperty:"dateTimeMode",defaultValue:"DateTime"},formatDate:{propertyType:"child",type:"string",child:"_dateTimeElement",childProperty:"formatDate",defaultValue:"ShortDate"},formatTime:{propertyType:"child",type:"string",child:"_dateTimeElement",childProperty:"formatTime",defaultValue:"LongTime"},showAlarmParam1:{propertyType:"member",type:"boolean",defaultValue:true},showAlarmGroup:{propertyType:"member",type:"boolean",defaultValue:false},actBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ErrorColor"},actTextColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},actSymbolColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},actBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ErrorColor"},inactBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@WarningColor"},inactTextColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},inactSymbolColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},inactBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@WarningColor"},actAckBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@InfoColor"},actAckTextColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},actAckSymbolColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},actAckBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@InfoColor"},inactAckBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BackgroundColor"},inactAckTextColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},inactAckSymbolColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},inactAckBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BackgroundColor"},buttonclick:{propertyType:"event",group:"Event"}};this._activeAlarm=null;this._elementClickHandler=this._onElementClick.bind(this);this.initialize(Lenze.UI.AlarmLineDropDownItem)}createTemplate(){this.element.innerHTML=`\n                <div class="lenze-alarmlinedropdownitem__sub" data-win-control="VisiWin.UI.Symbol"></div>\n                <div class="lenze-alarmlinedropdownitem__icon" data-win-control="VisiWin.UI.Symbol"></div>\n                <div class="lenze-alarmlinedropdownitem__count" data-win-control="VisiWin.UI.TextBlock"></div>\n                <div class="lenze-alarmlinedropdownitem__class" data-win-control="VisiWin.UI.TextBlock"></div>\n                <div class="lenze-alarmlinedropdownitem__divider" data-win-control="VisiWin.UI.Divider"></div>\n                <div class="lenze-alarmlinedropdownitem__group" data-win-control="VisiWin.UI.TextBlock"></div>\n                <div class="lenze-alarmlinedropdownitem__divider" data-win-control="VisiWin.UI.Divider"></div>\n                <div class="lenze-alarmlinedropdownitem__id" data-win-control="VisiWin.UI.TextBlock"></div>\n                <div class="lenze-alarmlinedropdownitem__divider" data-win-control="VisiWin.UI.Divider"></div>                \n                <div class="lenze-alarmlinedropdownitem__text" data-win-control="VisiWin.UI.TextBlock"></div>\n                <div class="lenze-alarmlinedropdownitem__datetime" data-win-control="VisiWin.UI.DateTimeVarOut"></div>`;this._subElement=this.element.firstElementChild;this._iconElement=this._subElement.nextElementSibling;this._countElement=this._iconElement.nextElementSibling;this._alarmClassElement=this._countElement.nextElementSibling;this._classDividerElement=this._alarmClassElement.nextElementSibling;this._alarmGroupElement=this._classDividerElement.nextElementSibling;this._groupDividerElement=this._alarmGroupElement.nextElementSibling;this._alarmIdElement=this._groupDividerElement.nextElementSibling;this._idDividerElement=this._alarmIdElement.nextElementSibling;this._textElement=this._idDividerElement.nextElementSibling;this._dateTimeElement=this._textElement.nextElementSibling;return this.processElements([this._subElement,this._iconElement,this._countElement,this._alarmClassElement,this._classDividerElement,this._alarmIdElement,this._idDividerElement,this._alarmGroupElement,this._groupDividerElement,this._textElement,this._dateTimeElement])}_updateColors(changes){let alarmState;let alarmClassName;if(VisiWin.Utilities.isInDesignMode()){alarmClassName="Error";alarmState=VisiWin.System.Alarm.AlarmState.Active;this._idDividerElement.style.display="block"}else{if(this._activeAlarm==null)return;this._alarmClassElement.winControl.text=this._activeAlarm.Class.Text;const idText=this._activeAlarm.Param1;const groupText=this._activeAlarm.Group.Text;this._alarmIdElement.winControl.show=this.showAlarmParam1&&idText!=null&&idText.trim()!=="";this._idDividerElement.style.display=this._alarmIdElement.winControl.show?"block":"none";if(this._alarmIdElement.winControl.show)this._alarmIdElement.winControl.text=idText;this._alarmGroupElement.winControl.show=this.showAlarmGroup&&groupText!=null&&groupText.trim()!=="";this._groupDividerElement.style.display=this._alarmGroupElement.winControl.show?"block":"none";if(this._alarmGroupElement.winControl.show)this._alarmGroupElement.winControl.text=groupText;this._textElement.winControl.text=this._activeAlarm.Text;this._dateTimeElement.winControl.value=this._activeAlarm.ActivationTime.toISOString();alarmState=this._activeAlarm.AlarmState;alarmClassName=this._activeAlarm.Class.Name}const colors=this.getAlarmColors(alarmState,alarmClassName);this.element.style.backgroundColor=colors[0];this.element.style.borderColor=colors[3];this.element.style.color=colors[1];this._subElement.winControl.foregroundColor=colors[1];this._iconElement.winControl.foregroundColor=colors[2];this._countElement.winControl.foregroundColor=colors[1];this._alarmClassElement.winControl.foregroundColor=colors[1];this._classDividerElement.winControl.backgroundColor=colors[1];this._alarmIdElement.winControl.foregroundColor=colors[1];this._idDividerElement.winControl.backgroundColor=colors[1];this._alarmGroupElement.winControl.foregroundColor=colors[1];this._groupDividerElement.winControl.backgroundColor=colors[1];this._textElement.winControl.foregroundColor=colors[1];this._dateTimeElement.winControl.dateForegroundColor=colors[1];this._dateTimeElement.winControl.timeForegroundColor=colors[1]}_updateLayout(changes){this._subElement.winControl.symbol="subdirectory_arrow_right";this._dateTimeElement.style.display="flex";this._dateTimeElement.winControl.margin="0";this._dateTimeElement.winControl.dateMargin="0 10px 0 0";this._dateTimeElement.winControl.datePadding="0";this._dateTimeElement.winControl.timePadding="0";this._alarmClassElement.winControl.fontClass=this.fontClass;this._alarmGroupElement.winControl.fontClass=this.fontClass;this._alarmIdElement.winControl.fontClass=this.fontClass;this._textElement.winControl.fontClass=this.fontClass;this._dateTimeElement.winControl.dateFontClass=this.fontClass;this._dateTimeElement.winControl.timeFontClass=this.fontClass;this._alarmIdElement.winControl.textWrapping=this.textWrapping;if(VisiWin.Utilities.isInDesignMode()){this._alarmClassElement.winControl.text="Alarm Class";this._alarmGroupElement.winControl.text="Alarm Group";this._alarmIdElement.winControl.text="Alarm Param1";this._textElement.winControl.text="Alarm Text";return}const alarmIsActive=this._activeAlarm!==null;this.visibility=alarmIsActive?"visible":"collapse"}async attach(){if(VisiWin.Utilities.isInDesignMode())return await super.attach();this.element.addEventListener("pointerup",this._elementClickHandler);await super.attach()}async detach(){if(VisiWin.Utilities.isInDesignMode())return await super.detach();this.element.removeEventListener("pointerup",this._elementClickHandler);await super.detach()}dispose(){if(VisiWin.Utilities.isInDesignMode())return super.dispose();this.element.removeEventListener("pointerup",this._elementClickHandler);return super.dispose()}updateAlarm(alarm){this._activeAlarm=alarm;this._updateColors(null);this._updateLayout(null)}_onElementClick(args){this.dispatchEvent(AlarmLineDropDownItem.onClickEventName,args)}getColors(state){switch(state){case VisiWin.System.Alarm.AlarmState.Active:return[this.getThemeColor(this.actBackgroundColor),this.getThemeColor(this.actTextColor),this.getThemeColor(this.actSymbolColor),this.getThemeColor(this.actBorderColor)];case VisiWin.System.Alarm.AlarmState.Inactive:return[this.getThemeColor(this.inactBackgroundColor),this.getThemeColor(this.inactTextColor),this.getThemeColor(this.inactSymbolColor),this.getThemeColor(this.inactBorderColor)];case VisiWin.System.Alarm.AlarmState.ActiveAck:return[this.getThemeColor(this.actAckBackgroundColor),this.getThemeColor(this.actAckTextColor),this.getThemeColor(this.actAckSymbolColor),this.getThemeColor(this.actAckBorderColor)];case VisiWin.System.Alarm.AlarmState.InactiveAck:return[this.getThemeColor(this.inactAckBackgroundColor),this.getThemeColor(this.inactAckTextColor),this.getThemeColor(this.inactAckSymbolColor),this.getThemeColor(this.inactAckBorderColor)];default:return["","","",""]}}getAlarmColors(alarmState,alarmClass){switch(alarmClass){case"Systemalarm":case"Alarm":case"ERROR_LEM":case"FAULT_LEM":case"TROUBLE_LEM":switch(alarmState){case VisiWin.System.Alarm.AlarmState.Active:return[this.getThemeColor("@ErrorColor"),this.getThemeColor("@White"),this.getThemeColor("@White"),this.getThemeColor("@Transparent")];case VisiWin.System.Alarm.AlarmState.Inactive:case VisiWin.System.Alarm.AlarmState.ActiveAck:case VisiWin.System.Alarm.AlarmState.InactiveAck:return[this.getThemeColor("@ErrorColor"),this.getThemeColor("@Black"),this.getThemeColor("@Black"),this.getThemeColor("@Transparent")];default:return["","","",""]}case"Warning":case"Message":case"WARNING_LOCK_LEM":case"WARNING_LEM":switch(alarmState){case VisiWin.System.Alarm.AlarmState.Active:return[this.getThemeColor("@WarningColor"),this.getThemeColor("@White"),this.getThemeColor("@White"),this.getThemeColor("@Transparent")];case VisiWin.System.Alarm.AlarmState.Inactive:case VisiWin.System.Alarm.AlarmState.ActiveAck:case VisiWin.System.Alarm.AlarmState.InactiveAck:return[this.getThemeColor("@WarningColor"),this.getThemeColor("@Black"),this.getThemeColor("@Black"),this.getThemeColor("@Transparent")];default:return["","","",""]}case"Hint":case"Info":case"INFO_LEM":switch(alarmState){case VisiWin.System.Alarm.AlarmState.Active:return[this.getThemeColor("@InfoColor"),this.getThemeColor("@White"),this.getThemeColor("@White"),this.getThemeColor("@Transparent")];case VisiWin.System.Alarm.AlarmState.Inactive:case VisiWin.System.Alarm.AlarmState.ActiveAck:case VisiWin.System.Alarm.AlarmState.InactiveAck:return[this.getThemeColor("@InfoColor"),this.getThemeColor("@Black"),this.getThemeColor("@Black"),this.getThemeColor("@Transparent")];default:return["","","",""]}default:return["","","",""]}}}AlarmLineDropDownItem.onClickEventName="buttonclick";UI.AlarmLineDropDownItem=AlarmLineDropDownItem})(UI=Lenze.UI||(Lenze.UI={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var UI;(function(UI){"use strict";class AlarmLineItem extends Lenze.UI.ControlBase{get hasActiveAlarm(){return this._hasActiveAlarm}constructor(element,options){super(element,options);this.properties={designerType:{propertyType:"base",type:"string",defaultValue:"Control"},registerSourceId:{propertyType:"base",type:"string",defaultValue:"AlarmLineItem"},iconFont:{propertyType:"child",type:"string",child:"_iconElement",defaultValue:"lenze-icons"},symbolType:{propertyType:"child",type:"string",child:"_iconElement",childProperty:"symbolType",defaultValue:"Icon"},symbol:{propertyType:"child",type:"string",child:"_iconElement",childProperty:"symbol",defaultValue:"error"},desiredAlarmClasses:{propertyType:"member",type:"string"},showDetails:{propertyType:"member",type:"boolean",defaultValue:"true"},fontClass:{propertyType:"member",type:"string",defaultValue:"Label1"},alarmClassWidth:{propertyType:"child",type:"string",child:"_alarmClassElement",childProperty:"width",defaultValue:"auto"},alarmClassMaxWidth:{propertyType:"child",type:"string",child:"_alarmClassElement",childProperty:"maxWidth",defaultValue:"none"},alarmClassTextWrapping:{propertyType:"child",type:"string",child:"_alarmClassElement",childProperty:"textWrapping",defaultValue:"Wrap"},alarmClassLineClamp:{propertyType:"child",type:"number",child:"_alarmClassElement",childProperty:"lineClamp",defaultValue:"1"},alarmGroupWidth:{propertyType:"child",type:"string",child:"_alarmGroupElement",childProperty:"width",defaultValue:"auto"},alarmGroupMaxWidth:{propertyType:"child",type:"string",child:"_alarmGroupElement",childProperty:"maxWidth",defaultValue:"none"},alarmGroupTextWrapping:{propertyType:"child",type:"string",child:"_alarmGroupElement",childProperty:"textWrapping",defaultValue:"Wrap"},alarmGroupLineClamp:{propertyType:"child",type:"number",child:"_alarmGroupElement",childProperty:"lineClamp",defaultValue:"1"},alarmIdWidth:{propertyType:"child",type:"string",child:"_alarmIdElement",childProperty:"width",defaultValue:"auto"},alarmIdMaxWidth:{propertyType:"child",type:"string",child:"_alarmIdElement",childProperty:"maxWidth",defaultValue:"none"},alarmIdTextWrapping:{propertyType:"child",type:"string",child:"_alarmIdElement",childProperty:"textWrapping",defaultValue:"Wrap"},alarmIdLineClamp:{propertyType:"child",type:"number",child:"_alarmIdElement",childProperty:"lineClamp",defaultValue:"1"},alarmTextWidth:{propertyType:"child",type:"string",child:"_textElement",childProperty:"width",defaultValue:"10px"},alarmTextMaxWidth:{propertyType:"child",type:"string",child:"_textElement",childProperty:"maxWidth",defaultValue:"none"},alarmTextTextWrapping:{propertyType:"child",type:"string",child:"_textElement",childProperty:"textWrapping",defaultValue:"Wrap"},alarmTextLineClamp:{propertyType:"child",type:"number",child:"_textElement",childProperty:"lineClamp",defaultValue:"1"},clip:{propertyType:"child",type:"string",child:"_textElement",defaultValue:"right"},showAlarmParam1:{propertyType:"member",type:"boolean",defaultValue:true},showAlarmGroup:{propertyType:"member",type:"boolean",defaultValue:false},newestAlarmOnTop:{propertyType:"member",type:"boolean",defaultValue:true},dropDownEnabled:{propertyType:"member",type:"boolean",defaultValue:false},dateTimeMode:{propertyType:"child",type:"string",child:"_dateTimeElement",childProperty:"dateTimeMode",defaultValue:"DateTime"},formatDate:{propertyType:"child",type:"string",child:"_dateTimeElement",childProperty:"formatDate",defaultValue:"ShortDate"},formatTime:{propertyType:"child",type:"string",child:"_dateTimeElement",childProperty:"formatTime",defaultValue:"LongTime"},actBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ErrorColor"},actTextColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},actSymbolColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},actBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ErrorColor"},inactBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@WarningColor"},inactTextColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},inactSymbolColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},inactBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@WarningColor"},actAckBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@InfoColor"},actAckTextColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},actAckSymbolColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},actAckBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@InfoColor"},inactAckBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BackgroundColor"},inactAckTextColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},inactAckSymbolColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},inactAckBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BackgroundColor"},dropDownMargin:{propertyType:"member",type:"string",defaultValue:"0px"},dropDownPadding:{propertyType:"member",type:"string",defaultValue:"5px 16px"},dropDownBorderRadius:{propertyType:"member",type:"string",defaultValue:"0px"},dropDownBorderStyle:{propertyType:"member",type:"string",defaultValue:"None"},dropDownBorderWidth:{propertyType:"member",type:"string",defaultValue:"0px"},dropDownIconFont:{propertyType:"member",type:"string",defaultValue:"lenze-icons"},dropDownSymbolType:{propertyType:"member",type:"string",childProperty:"symbolType",defaultValue:"Icon"},dropDownSymbol:{propertyType:"member",type:"string",childProperty:"symbol",defaultValue:"error"},dropDownFontClass:{propertyType:"member",type:"string",defaultValue:"Label1"},dropDownTextWrapping:{propertyType:"member",type:"string",defaultValue:"NoWrap"},dropDownBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BackgroundColor"},dropDownBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"},dropDownActBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ErrorColor"},dropDownActTextColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},dropDownActSymbolColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},dropDownActBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ErrorColor"},dropDownInactBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@WarningColor"},dropDownInactTextColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},dropDownInactSymbolColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},dropDownInactBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@WarningColor"},dropDownActAckBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@InfoColor"},dropDownActAckTextColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},dropDownActAckSymbolColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},dropDownActAckBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@InfoColor"},dropDownInactAckBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BackgroundColor"},dropDownInactAckTextColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},dropDownInactAckSymbolColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},dropDownInactAckBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BackgroundColor"},dropDownCloseButtonWidth:{propertyType:"child",type:"string",child:"_dropDownCloseButtonElement",childProperty:"width",defaultValue:"auto"},dropDownCloseButtonMinWidth:{propertyType:"child",type:"string",child:"_dropDownCloseButtonElement",childProperty:"minWidth",defaultValue:"36px"},dropDownCloseButtonMaxWidth:{propertyType:"child",type:"string",child:"_dropDownCloseButtonElement",childProperty:"maxWidth"},dropDownCloseButtonHeight:{propertyType:"child",type:"string",child:"_dropDownCloseButtonElement",childProperty:"height",defaultValue:"48px"},dropDownCloseButtonMinHeight:{propertyType:"child",type:"string",child:"_dropDownCloseButtonElement",childProperty:"minHeight",defaultValue:"36px"},dropDownCloseButtonMaxHeight:{propertyType:"child",type:"string",child:"_dropDownCloseButtonElement",childProperty:"maxHeight"},dropDownCloseButtonMargin:{propertyType:"child",type:"string",child:"_dropDownCloseButtonElement",childProperty:"margin",defaultValue:"8px"},dropDownCloseButtonPadding:{propertyType:"child",type:"string",child:"_dropDownCloseButtonElement",childProperty:"padding",defaultValue:"8px"},dropDownCloseButtonFlexShrink:{propertyType:"child",type:"number",child:"_dropDownCloseButtonElement",childProperty:"flexShrink",defaultValue:0},dropDownCloseButtonFlexGrow:{propertyType:"child",type:"number",child:"_dropDownCloseButtonElement",childProperty:"flexGrow",defaultValue:0},dropDownCloseButtonBorderWidth:{propertyType:"child",type:"string",child:"_dropDownCloseButtonElement",childProperty:"borderWidth",defaultValue:"0px"},dropDownCloseButtonBorderStyle:{propertyType:"child",type:"string",child:"_dropDownCloseButtonElement",childProperty:"borderStyle",defaultValue:"Solid"},dropDownCloseButtonBorderRadius:{propertyType:"child",type:"string",child:"_dropDownCloseButtonElement",childProperty:"borderRadius",defaultValue:"4px"},dropDownCloseButtonOpacity:{propertyType:"child",type:"number",child:"_dropDownCloseButtonElement",childProperty:"opacity",defaultValue:1},dropDownCloseButtonVisibility:{propertyType:"child",type:"string",child:"_dropDownCloseButtonElement",childProperty:"visibility",defaultValue:"visible"},dropDownCloseButtonShadow:{propertyType:"child",type:"string",child:"_dropDownCloseButtonElement",childProperty:"shadow"},dropDownCloseButtonPressedShadow:{propertyType:"child",type:"string",child:"_dropDownCloseButtonElement",childProperty:"pressedShadow"},dropDownCloseButtonTransition:{propertyType:"child",type:"string",child:"_dropDownCloseButtonElement",childProperty:"transition",defaultValue:"all 0s ease 0s"},dropDownCloseButtonBackground:{propertyType:"child",type:"string",child:"_dropDownCloseButtonElement",childProperty:"background"},dropDownCloseButtonDisabled:{propertyType:"child",type:"boolean",child:"_dropDownCloseButtonElement",childProperty:"disabled",defaultValue:false},dropDownCloseButtonShowSymbol:{propertyType:"child",type:"boolean",child:"_dropDownCloseButtonElement",childProperty:"showSymbol",defaultValue:true},dropDownCloseButtonIconFont:{propertyType:"child",type:"string",child:"_dropDownCloseButtonElement",childProperty:"iconFont",defaultValue:"lenze-icons"},dropDownCloseButtonSymbol:{propertyType:"child",type:"string",child:"_dropDownCloseButtonElement",childProperty:"symbol"},dropDownCloseButtonSymbolPressed:{propertyType:"child",type:"string",child:"_dropDownCloseButtonElement",childProperty:"symbolPressed"},dropDownCloseButtonSymbolType:{propertyType:"child",type:"string",child:"_dropDownCloseButtonElement",childProperty:"symbolType",defaultValue:"Icon"},dropDownCloseButtonSymbolSize:{propertyType:"child",type:"string",child:"_dropDownCloseButtonElement",childProperty:"symbolSize",defaultValue:"24px"},dropDownCloseButtonSymbolMargin:{propertyType:"child",type:"string",child:"_dropDownCloseButtonElement",childProperty:"symbolMargin",defaultValue:"8px 8px 8px 0px"},dropDownCloseButtonSymbolPosition:{propertyType:"child",type:"string",child:"_dropDownCloseButtonElement",childProperty:"symbolPosition",defaultValue:"Center"},dropDownCloseButtonShowText:{propertyType:"child",type:"boolean",child:"_dropDownCloseButtonElement",childProperty:"showText",defaultValue:true},dropDownCloseButtonTextWidth:{propertyType:"child",type:"string",child:"_dropDownCloseButtonElement",childProperty:"textWidth",defaultValue:"auto"},dropDownCloseButtonTextHeight:{propertyType:"child",type:"string",child:"_dropDownCloseButtonElement",childProperty:"textHeight",defaultValue:"auto"},dropDownCloseButtonTextMargin:{propertyType:"child",type:"string",child:"_dropDownCloseButtonElement",childProperty:"textMargin",defaultValue:"0px"},dropDownCloseButtonTextPadding:{propertyType:"child",type:"string",child:"_dropDownCloseButtonElement",childProperty:"textPadding",defaultValue:"0px"},dropDownCloseButtonText:{propertyType:"child",type:"string",child:"_dropDownCloseButtonElement",childProperty:"text",defaultValue:"Close"},dropDownCloseButtonLocalizableText:{propertyType:"child",type:"string",child:"_dropDownCloseButtonElement",childProperty:"localizableText"},dropDownCloseButtonTextAlignment:{propertyType:"child",type:"string",child:"_dropDownCloseButtonElement",childProperty:"textAlignment",defaultValue:"Left"},dropDownCloseButtonLineClamp:{propertyType:"child",type:"number",child:"_dropDownCloseButtonElement",childProperty:"lineClamp",defaultValue:1},dropDownCloseButtonTextWrapping:{propertyType:"child",type:"string",child:"_dropDownCloseButtonElement",childProperty:"textWrapping",defaultValue:"NoWrap"},dropDownCloseButtonTextTrimming:{propertyType:"child",type:"string",child:"_dropDownCloseButtonElement",childProperty:"textTrimming",defaultValue:"Ellipsis"},dropDownCloseButtonFontClass:{propertyType:"child",type:"string",child:"_dropDownCloseButtonElement",childProperty:"fontClass",defaultValue:"Roboto16"},dropDownCloseButtonFontSize:{propertyType:"child",type:"string",child:"_dropDownCloseButtonElement",childProperty:"fontSize",defaultValue:"16px"},dropDownCloseButtonFontWeight:{propertyType:"child",type:"string",child:"_dropDownCloseButtonElement",childProperty:"fontWeight",defaultValue:"Normal"},dropDownCloseButtonLineHeight:{propertyType:"child",type:"string",child:"_dropDownCloseButtonElement",childProperty:"lineHeight",defaultValue:"20px"},dropDownCloseButtonTextContrast:{propertyType:"child",type:"number",child:"_dropDownCloseButtonElement",childProperty:"textContrast",defaultValue:1},dropDownCloseButtonUppercase:{propertyType:"child",type:"boolean",child:"_dropDownCloseButtonElement",childProperty:"uppercase",defaultValue:true},dropDownCloseButtonTextPosition:{propertyType:"child",type:"string",child:"_dropDownCloseButtonElement",childProperty:"textPosition",defaultValue:"Center"},dropDownCloseButtonBackgroundColor:{propertyType:"child",type:"string",resourceValue:["getTheme"],child:"_dropDownCloseButtonElement",childProperty:"backgroundColor",defaultValue:"@PrimaryColor"},dropDownCloseButtonHoverBackgroundColor:{propertyType:"child",type:"string",resourceValue:["getTheme"],child:"_dropDownCloseButtonElement",childProperty:"hoverBackgroundColor",defaultValue:"@HoverBackgroundColor"},dropDownCloseButtonPressedBackgroundColor:{propertyType:"child",type:"string",resourceValue:["getTheme"],child:"_dropDownCloseButtonElement",childProperty:"pressedBackgroundColor",defaultValue:"@PressedBackgroundColor"},dropDownCloseButtonDisabledBackgroundColor:{propertyType:"child",type:"string",resourceValue:["getTheme"],child:"_dropDownCloseButtonElement",childProperty:"disabledBackgroundColor",defaultValue:"@SecondaryDisabledBackgroundColor"},dropDownCloseButtonForegroundColor:{propertyType:"child",type:"string",resourceValue:["getTheme"],child:"_dropDownCloseButtonElement",childProperty:"foregroundColor",defaultValue:"@AltForegroundColor"},dropDownCloseButtonPressedForegroundColor:{propertyType:"child",type:"string",resourceValue:["getTheme"],child:"_dropDownCloseButtonElement",childProperty:"pressedForegroundColor",defaultValue:"@SecondaryColor"},dropDownCloseButtonAuthSymbolForegroundColor:{propertyType:"child",type:"string",resourceValue:["getTheme"],child:"_dropDownCloseButtonElement",childProperty:"authSymbolForegroundColor",defaultValue:"@DisabledForegroundColor"},dropDownCloseButtonDisabledForegroundColor:{propertyType:"child",type:"string",resourceValue:["getTheme"],child:"_dropDownCloseButtonElement",childProperty:"disabledForegroundColor",defaultValue:"@SecondaryColor"},dropDownCloseButtonBorderColor:{propertyType:"child",type:"string",resourceValue:["getTheme"],child:"_dropDownCloseButtonElement",childProperty:"borderColor",defaultValue:"@BorderColor"},dropDownCloseButtonHoverBorderColor:{propertyType:"child",type:"string",resourceValue:["getTheme"],child:"_dropDownCloseButtonElement",childProperty:"hoverBorderColor",defaultValue:"@PrimaryColor"},dropDownCloseButtonDisabledBorderColor:{propertyType:"child",type:"string",resourceValue:["getTheme"],child:"_dropDownCloseButtonElement",childProperty:"disabledBorderColor",defaultValue:"@Transparent"},dropDownAcknowledgeButtonWidth:{propertyType:"child",type:"string",child:"_dropDownAcknowledgeButtonElement",childProperty:"width",defaultValue:"auto"},dropDownAcknowledgeButtonMinWidth:{propertyType:"child",type:"string",child:"_dropDownAcknowledgeButtonElement",childProperty:"minWidth",defaultValue:"36px"},dropDownAcknowledgeButtonMaxWidth:{propertyType:"child",type:"string",child:"_dropDownAcknowledgeButtonElement",childProperty:"maxWidth"},dropDownAcknowledgeButtonHeight:{propertyType:"child",type:"string",child:"_dropDownAcknowledgeButtonElement",childProperty:"height",defaultValue:"48px"},dropDownAcknowledgeButtonMinHeight:{propertyType:"child",type:"string",child:"_dropDownAcknowledgeButtonElement",childProperty:"minHeight",defaultValue:"36px"},dropDownAcknowledgeButtonMaxHeight:{propertyType:"child",type:"string",child:"_dropDownAcknowledgeButtonElement",childProperty:"maxHeight"},dropDownAcknowledgeButtonMargin:{propertyType:"child",type:"string",child:"_dropDownAcknowledgeButtonElement",childProperty:"margin",defaultValue:"8px"},dropDownAcknowledgeButtonPadding:{propertyType:"child",type:"string",child:"_dropDownAcknowledgeButtonElement",childProperty:"padding",defaultValue:"8px"},dropDownAcknowledgeButtonFlexShrink:{propertyType:"child",type:"number",child:"_dropDownAcknowledgeButtonElement",childProperty:"flexShrink",defaultValue:0},dropDownAcknowledgeButtonFlexGrow:{propertyType:"child",type:"number",child:"_dropDownAcknowledgeButtonElement",childProperty:"flexGrow",defaultValue:0},dropDownAcknowledgeButtonBorderWidth:{propertyType:"child",type:"string",child:"_dropDownAcknowledgeButtonElement",childProperty:"borderWidth",defaultValue:"0px"},dropDownAcknowledgeButtonBorderStyle:{propertyType:"child",type:"string",child:"_dropDownAcknowledgeButtonElement",childProperty:"borderStyle",defaultValue:"Solid"},dropDownAcknowledgeButtonBorderRadius:{propertyType:"child",type:"string",child:"_dropDownAcknowledgeButtonElement",childProperty:"borderRadius",defaultValue:"4px"},dropDownAcknowledgeButtonOpacity:{propertyType:"child",type:"number",child:"_dropDownAcknowledgeButtonElement",childProperty:"opacity",defaultValue:1},dropDownAcknowledgeButtonVisibility:{propertyType:"child",type:"string",child:"_dropDownAcknowledgeButtonElement",childProperty:"visibility",defaultValue:"visible"},dropDownAcknowledgeButtonShadow:{propertyType:"child",type:"string",child:"_dropDownAcknowledgeButtonElement",childProperty:"shadow"},dropDownAcknowledgeButtonPressedShadow:{propertyType:"child",type:"string",child:"_dropDownAcknowledgeButtonElement",childProperty:"pressedShadow"},dropDownAcknowledgeButtonTransition:{propertyType:"child",type:"string",child:"_dropDownAcknowledgeButtonElement",childProperty:"transition",defaultValue:"all 0s ease 0s"},dropDownAcknowledgeButtonBackground:{propertyType:"child",type:"string",child:"_dropDownAcknowledgeButtonElement",childProperty:"background"},dropDownAcknowledgeButtonDisabled:{propertyType:"child",type:"boolean",child:"_dropDownAcknowledgeButtonElement",childProperty:"disabled",defaultValue:false},dropDownAcknowledgeButtonShowSymbol:{propertyType:"child",type:"boolean",child:"_dropDownAcknowledgeButtonElement",childProperty:"showSymbol",defaultValue:false},dropDownAcknowledgeButtonIconFont:{propertyType:"child",type:"string",child:"_dropDownAcknowledgeButtonElement",childProperty:"iconFont",defaultValue:"lenze-icons"},dropDownAcknowledgeButtonSymbol:{propertyType:"child",type:"string",child:"_dropDownAcknowledgeButtonElement",childProperty:"symbol"},dropDownAcknowledgeButtonSymbolPressed:{propertyType:"child",type:"string",child:"_dropDownAcknowledgeButtonElement",childProperty:"symbolPressed"},dropDownAcknowledgeButtonSymbolType:{propertyType:"child",type:"string",child:"_dropDownAcknowledgeButtonElement",childProperty:"symbolType",defaultValue:"Icon"},dropDownAcknowledgeButtonSymbolSize:{propertyType:"child",type:"string",child:"_dropDownAcknowledgeButtonElement",childProperty:"symbolSize",defaultValue:"24px"},dropDownAcknowledgeButtonSymbolMargin:{propertyType:"child",type:"string",child:"_dropDownAcknowledgeButtonElement",childProperty:"symbolMargin",defaultValue:"8px 8px 8px 0px"},dropDownAcknowledgeButtonSymbolPosition:{propertyType:"child",type:"string",child:"_dropDownAcknowledgeButtonElement",childProperty:"symbolPosition",defaultValue:"Center"},dropDownAcknowledgeButtonShowText:{propertyType:"child",type:"boolean",child:"_dropDownAcknowledgeButtonElement",childProperty:"showText",defaultValue:true},dropDownAcknowledgeButtonTextWidth:{propertyType:"child",type:"string",child:"_dropDownAcknowledgeButtonElement",childProperty:"textWidth",defaultValue:"auto"},dropDownAcknowledgeButtonTextHeight:{propertyType:"child",type:"string",child:"_dropDownAcknowledgeButtonElement",childProperty:"textHeight",defaultValue:"auto"},dropDownAcknowledgeButtonTextMargin:{propertyType:"child",type:"string",child:"_dropDownAcknowledgeButtonElement",childProperty:"textMargin",defaultValue:"0px"},dropDownAcknowledgeButtonTextPadding:{propertyType:"child",type:"string",child:"_dropDownAcknowledgeButtonElement",childProperty:"textPadding",defaultValue:"0px"},dropDownAcknowledgeButtonText:{propertyType:"child",type:"string",child:"_dropDownAcknowledgeButtonElement",childProperty:"text",defaultValue:"Acknowledge all"},dropDownAcknowledgeButtonLocalizableText:{propertyType:"child",type:"string",child:"_dropDownAcknowledgeButtonElement",childProperty:"localizableText"},dropDownAcknowledgeButtonTextAlignment:{propertyType:"child",type:"string",child:"_dropDownAcknowledgeButtonElement",childProperty:"textAlignment",defaultValue:"Left"},dropDownAcknowledgeButtonLineClamp:{propertyType:"child",type:"number",child:"_dropDownAcknowledgeButtonElement",childProperty:"lineClamp",defaultValue:1},dropDownAcknowledgeButtonTextWrapping:{propertyType:"child",type:"string",child:"_dropDownAcknowledgeButtonElement",childProperty:"textWrapping",defaultValue:"NoWrap"},dropDownAcknowledgeButtonTextTrimming:{propertyType:"child",type:"string",child:"_dropDownAcknowledgeButtonElement",childProperty:"textTrimming",defaultValue:"Ellipsis"},dropDownAcknowledgeButtonFontClass:{propertyType:"child",type:"string",child:"_dropDownAcknowledgeButtonElement",childProperty:"fontClass",defaultValue:"Roboto16"},dropDownAcknowledgeButtonFontSize:{propertyType:"child",type:"string",child:"_dropDownAcknowledgeButtonElement",childProperty:"fontSize",defaultValue:"16px"},dropDownAcknowledgeButtonFontWeight:{propertyType:"child",type:"string",child:"_dropDownAcknowledgeButtonElement",childProperty:"fontWeight",defaultValue:"Normal"},dropDownAcknowledgeButtonLineHeight:{propertyType:"child",type:"string",child:"_dropDownAcknowledgeButtonElement",childProperty:"lineHeight",defaultValue:"20px"},dropDownAcknowledgeButtonTextContrast:{propertyType:"child",type:"number",child:"_dropDownAcknowledgeButtonElement",childProperty:"textContrast",defaultValue:1},dropDownAcknowledgeButtonUppercase:{propertyType:"child",type:"boolean",child:"_dropDownAcknowledgeButtonElement",childProperty:"uppercase",defaultValue:true},dropDownAcknowledgeButtonTextPosition:{propertyType:"child",type:"string",child:"_dropDownAcknowledgeButtonElement",childProperty:"textPosition",defaultValue:"Center"},dropDownAcknowledgeButtonBackgroundColor:{propertyType:"child",type:"string",resourceValue:["getTheme"],child:"_dropDownAcknowledgeButtonElement",childProperty:"backgroundColor",defaultValue:"@PrimaryColor"},dropDownAcknowledgeButtonHoverBackgroundColor:{propertyType:"child",type:"string",resourceValue:["getTheme"],child:"_dropDownAcknowledgeButtonElement",childProperty:"hoverBackgroundColor",defaultValue:"@HoverBackgroundColor"},dropDownAcknowledgeButtonPressedBackgroundColor:{propertyType:"child",type:"string",resourceValue:["getTheme"],child:"_dropDownAcknowledgeButtonElement",childProperty:"pressedBackgroundColor",defaultValue:"@PressedBackgroundColor"},dropDownAcknowledgeButtonDisabledBackgroundColor:{propertyType:"child",type:"string",resourceValue:["getTheme"],child:"_dropDownAcknowledgeButtonElement",childProperty:"disabledBackgroundColor",defaultValue:"@SecondaryDisabledBackgroundColor"},dropDownAcknowledgeButtonForegroundColor:{propertyType:"child",type:"string",resourceValue:["getTheme"],child:"_dropDownAcknowledgeButtonElement",childProperty:"foregroundColor",defaultValue:"@AltForegroundColor"},dropDownAcknowledgeButtonPressedForegroundColor:{propertyType:"child",type:"string",resourceValue:["getTheme"],child:"_dropDownAcknowledgeButtonElement",childProperty:"pressedForegroundColor",defaultValue:"@SecondaryColor"},dropDownAcknowledgeButtonAuthSymbolForegroundColor:{propertyType:"child",type:"string",resourceValue:["getTheme"],child:"_dropDownAcknowledgeButtonElement",childProperty:"authSymbolForegroundColor",defaultValue:"@DisabledForegroundColor"},dropDownAcknowledgeButtonDisabledForegroundColor:{propertyType:"child",type:"string",resourceValue:["getTheme"],child:"_dropDownAcknowledgeButtonElement",childProperty:"disabledForegroundColor",defaultValue:"@SecondaryColor"},dropDownAcknowledgeButtonBorderColor:{propertyType:"child",type:"string",resourceValue:["getTheme"],child:"_dropDownAcknowledgeButtonElement",childProperty:"borderColor",defaultValue:"@BorderColor"},dropDownAcknowledgeButtonHoverBorderColor:{propertyType:"child",type:"string",resourceValue:["getTheme"],child:"_dropDownAcknowledgeButtonElement",childProperty:"hoverBorderColor",defaultValue:"@PrimaryColor"},dropDownAcknowledgeButtonDisabledBorderColor:{propertyType:"child",type:"string",resourceValue:["getTheme"],child:"_dropDownAcknowledgeButtonElement",childProperty:"disabledBorderColor",defaultValue:"@Transparent"},dropDownCustomButtonWidth:{propertyType:"child",type:"string",child:"_dropDownCustomButtonElement",childProperty:"width",defaultValue:"auto"},dropDownCustomButtonMinWidth:{propertyType:"child",type:"string",child:"_dropDownCustomButtonElement",childProperty:"minWidth",defaultValue:"36px"},dropDownCustomButtonMaxWidth:{propertyType:"child",type:"string",child:"_dropDownCustomButtonElement",childProperty:"maxWidth"},dropDownCustomButtonHeight:{propertyType:"child",type:"string",child:"_dropDownCustomButtonElement",childProperty:"height",defaultValue:"48px"},dropDownCustomButtonMinHeight:{propertyType:"child",type:"string",child:"_dropDownCustomButtonElement",childProperty:"minHeight",defaultValue:"36px"},dropDownCustomButtonMaxHeight:{propertyType:"child",type:"string",child:"_dropDownCustomButtonElement",childProperty:"maxHeight"},dropDownCustomButtonMargin:{propertyType:"child",type:"string",child:"_dropDownCustomButtonElement",childProperty:"margin",defaultValue:"8px"},dropDownCustomButtonPadding:{propertyType:"child",type:"string",child:"_dropDownCustomButtonElement",childProperty:"padding",defaultValue:"8px"},dropDownCustomButtonFlexShrink:{propertyType:"child",type:"number",child:"_dropDownCustomButtonElement",childProperty:"flexShrink",defaultValue:0},dropDownCustomButtonFlexGrow:{propertyType:"child",type:"number",child:"_dropDownCustomButtonElement",childProperty:"flexGrow",defaultValue:0},dropDownCustomButtonBorderWidth:{propertyType:"child",type:"string",child:"_dropDownCustomButtonElement",childProperty:"borderWidth",defaultValue:"0px"},dropDownCustomButtonBorderStyle:{propertyType:"child",type:"string",child:"_dropDownCustomButtonElement",childProperty:"borderStyle",defaultValue:"Solid"},dropDownCustomButtonBorderRadius:{propertyType:"child",type:"string",child:"_dropDownCustomButtonElement",childProperty:"borderRadius",defaultValue:"4px"},dropDownCustomButtonOpacity:{propertyType:"child",type:"number",child:"_dropDownCustomButtonElement",childProperty:"opacity",defaultValue:1},dropDownCustomButtonVisibility:{propertyType:"child",type:"string",child:"_dropDownCustomButtonElement",childProperty:"visibility",defaultValue:"visible"},dropDownCustomButtonShadow:{propertyType:"child",type:"string",child:"_dropDownCustomButtonElement",childProperty:"shadow"},dropDownCustomButtonPressedShadow:{propertyType:"child",type:"string",child:"_dropDownCustomButtonElement",childProperty:"pressedShadow"},dropDownCustomButtonTransition:{propertyType:"child",type:"string",child:"_dropDownCustomButtonElement",childProperty:"transition",defaultValue:"all 0s ease 0s"},dropDownCustomButtonBackground:{propertyType:"child",type:"string",child:"_dropDownCustomButtonElement",childProperty:"background"},dropDownCustomButtonDisabled:{propertyType:"child",type:"boolean",child:"_dropDownCustomButtonElement",childProperty:"disabled",defaultValue:false},dropDownCustomButtonShowSymbol:{propertyType:"child",type:"boolean",child:"_dropDownCustomButtonElement",childProperty:"showSymbol",defaultValue:true},dropDownCustomButtonIconFont:{propertyType:"child",type:"string",child:"_dropDownCustomButtonElement",childProperty:"iconFont",defaultValue:"lenze-icons"},dropDownCustomButtonSymbol:{propertyType:"child",type:"string",child:"_dropDownCustomButtonElement",childProperty:"symbol",defaultValue:"lenze-icons"},dropDownCustomButtonSymbolPressed:{propertyType:"child",type:"string",child:"_dropDownCustomButtonElement",childProperty:"symbolPressed"},dropDownCustomButtonSymbolType:{propertyType:"child",type:"string",child:"_dropDownCustomButtonElement",childProperty:"symbolType",defaultValue:"Icon"},dropDownCustomButtonSymbolSize:{propertyType:"child",type:"string",child:"_dropDownCustomButtonElement",childProperty:"symbolSize",defaultValue:"24px"},dropDownCustomButtonSymbolMargin:{propertyType:"child",type:"string",child:"_dropDownCustomButtonElement",childProperty:"symbolMargin",defaultValue:"8px 8px 8px 0px"},dropDownCustomButtonSymbolPosition:{propertyType:"child",type:"string",child:"_dropDownCustomButtonElement",childProperty:"symbolPosition",defaultValue:"Center"},dropDownCustomButtonShowText:{propertyType:"child",type:"boolean",child:"_dropDownCustomButtonElement",childProperty:"showText",defaultValue:true},dropDownCustomButtonTextWidth:{propertyType:"child",type:"string",child:"_dropDownCustomButtonElement",childProperty:"textWidth",defaultValue:"auto"},dropDownCustomButtonTextHeight:{propertyType:"child",type:"string",child:"_dropDownCustomButtonElement",childProperty:"textHeight",defaultValue:"auto"},dropDownCustomButtonTextMargin:{propertyType:"child",type:"string",child:"_dropDownCustomButtonElement",childProperty:"textMargin",defaultValue:"0px"},dropDownCustomButtonTextPadding:{propertyType:"child",type:"string",child:"_dropDownCustomButtonElement",childProperty:"textPadding",defaultValue:"0px"},dropDownCustomButtonText:{propertyType:"child",type:"string",child:"_dropDownCustomButtonElement",childProperty:"text",defaultValue:"Custom"},dropDownCustomButtonLocalizableText:{propertyType:"child",type:"string",child:"_dropDownCustomButtonElement",childProperty:"localizableText"},dropDownCustomButtonTextAlignment:{propertyType:"child",type:"string",child:"_dropDownCustomButtonElement",childProperty:"textAlignment",defaultValue:"Left"},dropDownCustomButtonLineClamp:{propertyType:"child",type:"number",child:"_dropDownCustomButtonElement",childProperty:"lineClamp",defaultValue:1},dropDownCustomButtonTextWrapping:{propertyType:"child",type:"string",child:"_dropDownCustomButtonElement",childProperty:"textWrapping",defaultValue:"NoWrap"},dropDownCustomButtonTextTrimming:{propertyType:"child",type:"string",child:"_dropDownCustomButtonElement",childProperty:"textTrimming",defaultValue:"Ellipsis"},dropDownCustomButtonFontClass:{propertyType:"child",type:"string",child:"_dropDownCustomButtonElement",childProperty:"fontClass",defaultValue:"Roboto16"},dropDownCustomButtonFontSize:{propertyType:"child",type:"string",child:"_dropDownCustomButtonElement",childProperty:"fontSize",defaultValue:"16px"},dropDownCustomButtonFontWeight:{propertyType:"child",type:"string",child:"_dropDownCustomButtonElement",childProperty:"fontWeight",defaultValue:"Normal"},dropDownCustomButtonLineHeight:{propertyType:"child",type:"string",child:"_dropDownCustomButtonElement",childProperty:"lineHeight",defaultValue:"20px"},dropDownCustomButtonTextContrast:{propertyType:"child",type:"number",child:"_dropDownCustomButtonElement",childProperty:"textContrast",defaultValue:1},dropDownCustomButtonUppercase:{propertyType:"child",type:"boolean",child:"_dropDownCustomButtonElement",childProperty:"uppercase",defaultValue:true},dropDownCustomButtonTextPosition:{propertyType:"child",type:"string",child:"_dropDownCustomButtonElement",childProperty:"textPosition",defaultValue:"Center"},dropDownCustomButtonBackgroundColor:{propertyType:"child",type:"string",resourceValue:["getTheme"],child:"_dropDownCustomButtonElement",childProperty:"backgroundColor",defaultValue:"@PrimaryColor"},dropDownCustomButtonHoverBackgroundColor:{propertyType:"child",type:"string",resourceValue:["getTheme"],child:"_dropDownCustomButtonElement",childProperty:"hoverBackgroundColor",defaultValue:"@HoverBackgroundColor"},dropDownCustomButtonPressedBackgroundColor:{propertyType:"child",type:"string",resourceValue:["getTheme"],child:"_dropDownCustomButtonElement",childProperty:"pressedBackgroundColor",defaultValue:"@PressedBackgroundColor"},dropDownCustomButtonDisabledBackgroundColor:{propertyType:"child",type:"string",resourceValue:["getTheme"],child:"_dropDownCustomButtonElement",childProperty:"disabledBackgroundColor",defaultValue:"@SecondaryDisabledBackgroundColor"},dropDownCustomButtonForegroundColor:{propertyType:"child",type:"string",resourceValue:["getTheme"],child:"_dropDownCustomButtonElement",childProperty:"foregroundColor",defaultValue:"@AltForegroundColor"},dropDownCustomButtonPressedForegroundColor:{propertyType:"child",type:"string",resourceValue:["getTheme"],child:"_dropDownCustomButtonElement",childProperty:"pressedForegroundColor",defaultValue:"@SecondaryColor"},dropDownCustomButtonAuthSymbolForegroundColor:{propertyType:"child",type:"string",resourceValue:["getTheme"],child:"_dropDownCustomButtonElement",childProperty:"authSymbolForegroundColor",defaultValue:"@DisabledForegroundColor"},dropDownCustomButtonDisabledForegroundColor:{propertyType:"child",type:"string",resourceValue:["getTheme"],child:"_dropDownCustomButtonElement",childProperty:"disabledForegroundColor",defaultValue:"@SecondaryColor"},dropDownCustomButtonBorderColor:{propertyType:"child",type:"string",resourceValue:["getTheme"],child:"_dropDownCustomButtonElement",childProperty:"borderColor",defaultValue:"@BorderColor"},dropDownCustomButtonHoverBorderColor:{propertyType:"child",type:"string",resourceValue:["getTheme"],child:"_dropDownCustomButtonElement",childProperty:"hoverBorderColor",defaultValue:"@PrimaryColor"},dropDownCustomButtonDisabledBorderColor:{propertyType:"child",type:"string",resourceValue:["getTheme"],child:"_dropDownCustomButtonElement",childProperty:"disabledBorderColor",defaultValue:"@Transparent"},alarmschanged:{propertyType:"event",group:"Event"},buttonclick:{propertyType:"event",group:"Event"},customclick:{propertyType:"event",group:"Event"},acknowledgeclick:{propertyType:"event",group:"Event"}};this._activeAlarm=null;this._hasActiveAlarm=false;this._desiredAlarms=[];this._oldElementHeight=0;this._stateValues={};this._elementClickHandler=this._onElementClick.bind(this);this._closeButtonClickHandler=this._onCloseButtonClick.bind(this);this._customButtonClickHandler=this._onCustomButtonClick.bind(this);this._acknowledgeClickHandler=this._onAcknowledgeButtonClick.bind(this);this._initAlarmHandler=this._onInitAlarm.bind(this);this._newAlarmHandler=this._onNewAlarm.bind(this);this._changeAlarmHandler=this._onChangeAlarm.bind(this);this._clearAlarmHandler=this._onClearAlarm.bind(this);this.initialize(Lenze.UI.AlarmLineItem)}createTemplate(){this.element.innerHTML=`\n                <div class="lenze-alarmlineitem__item">\n                    <div class="lenze-alarmlineitem__dropdown-button" data-win-control="VisiWin.UI.Symbol"></div>\n                    <div class="lenze-alarmlineitem__container">\n                        <div class="lenze-alarmlineitem__icon" data-win-control="VisiWin.UI.Symbol"></div>\n                        <div class="lenze-alarmlineitem__count" data-win-control="VisiWin.UI.TextBlock"></div>\n                        <div class="lenze-alarmlineitem__grow-icon" data-win-control="VisiWin.UI.Symbol"></div>\n                        <div class="lenze-alarmlineitem__container">\n                            <div class="lenze-alarmlineitem__class" data-win-control="VisiWin.UI.TextBlock"></div>\n                            <div class="lenze-alarmlineitem__divider" data-win-control="VisiWin.UI.Divider"></div>\n                            <div class="lenze-alarmlineitem__group" data-win-control="VisiWin.UI.TextBlock"></div>\n                            <div class="lenze-alarmlineitem__divider" data-win-control="VisiWin.UI.Divider"></div>\n                            <div class="lenze-alarmlineitem__id" data-win-control="VisiWin.UI.TextBlock"></div>\n                            <div class="lenze-alarmlineitem__divider" data-win-control="VisiWin.UI.Divider"></div>\n                            <div class="lenze-alarmlineitem__text" data-win-control="VisiWin.UI.TextBlock"></div>\n                        </div>\n                    </div>\n                    <div class="lenze-alarmlineitem__datetime" data-win-control="VisiWin.UI.DateTimeVarOut"></div>\n                                    </div>\n                <div class="lenze-alarmlineitem__dropdown" style="shadow:'@Elevation_z2'" data-win-options="{'shadow':'@Elevation_z2'}">\n                    <div class="lenze-alarmlineitem__dropdown-alarms"></div>\n                    <div class="lenze-alarmlineitem__dropdown-buttons" style="box-shadow: rgba(0, 0, 0, 0.2) 0px 3px 1px -2px, rgba(0, 0, 0, 0.14) 0px 2px 2px 0px, rgba(0, 0, 0, 0.12) 0px 1px 5px 0px" data-win-options="{'box-shadow': rgba(0, 0, 0, 0.2) 0px 3px 1px -2px, rgba(0, 0, 0, 0.14) 0px 2px 2px 0px, rgba(0, 0, 0, 0.12) 0px 1px 5px 0px;}">\n                        <div class="lenze-alarmlineitem__dropdown-button-custom" style="showSymbol: true;'symbolMargin':'8px 8px 8px 0px'" data-win-control="VisiWin.UI.Button" data-win-options="{'showSymbol':true,'symbolMargin':'8px 8px 8px 0px'}"> \n                            <div class="lenze-alarmlineitem__container" style="padding: '0px'" data-win-options="{'padding':'0px'}">\n                                <div class="lenze-alarmlineitem__icon" data-win-control="VisiWin.UI.Symbol">\n                                </div>\n                                <div class="lenze-alarmlineitem__text" data-win-control="VisiWin.UI.TextBlock">\n                                </div>\n                            </div>\n                        </div>\n                        <div class="lenze-alarmlineitem__dropdown-action-buttons">\n                            <div class="lenze-alarmlineitem__dropdown-button-close" style="showSymbol: true;symbolMargin: '8px 8px 8px 0px'" data-win-options="{'showSymbol':true,'symbolMargin':'8px 8px 8px 0px'}" data-win-control="VisiWin.UI.Button"></div>\n                            \x3c!--div class="lenze-alarmlineitem__dropdown-button-acknowledge" style="showSymbol: true;symbolMargin: '8px 8px 8px 0px'" data-win-options="{'showSymbol':true,'symbolMargin':'8px 8px 8px 0px'}"  data-win-control="VisiWin.UI.Button" data-win-actions='{"triggers":[{"type":"VisiWin.Triggers.ControlEventTrigger","eventName":"onButtonClick","triggeredActions":[{"type":"Lenze.Actions.AcknowledgeAllAlarmsAction"}]}]}'></div--\x3e\n                            <div class="lenze-alarmlineitem__dropdown-button-acknowledge" style="showSymbol: true;symbolMargin: '8px 8px 8px 0px'" data-win-options="{'showSymbol':true,'symbolMargin':'8px 8px 8px 0px'}"  data-win-control="VisiWin.UI.Button"'></div>\n                        </div>\n                    </div>\n                </div>`;this._itemElement=this.element.firstElementChild;this._dropDownIconElement=this._itemElement.firstElementChild;this._containerElement=this._dropDownIconElement.nextElementSibling;this._iconElement=this._containerElement.firstElementChild;this._countElement=this._iconElement.nextElementSibling;this._growIconElement=this._countElement.nextElementSibling;this._detailsElement=this._growIconElement.nextElementSibling;this._alarmClassElement=this._detailsElement.firstElementChild;this._classDividerElement=this._alarmClassElement.nextElementSibling;this._alarmGroupElement=this._classDividerElement.nextElementSibling;this._groupDividerElement=this._alarmGroupElement.nextElementSibling;this._alarmIdElement=this._groupDividerElement.nextElementSibling;this._idDividerElement=this._alarmIdElement.nextElementSibling;this._textElement=this._idDividerElement.nextElementSibling;this._dateTimeElement=this._containerElement.nextElementSibling;this._dropDownContainerElement=this._itemElement.nextElementSibling;this._dropDownAlarmsContainerElement=this._dropDownContainerElement.firstElementChild;this._dropDownAlarmElements=[];for(let i=0;i<5;i++){const dropDownItem=document.createElement("div");dropDownItem.setAttribute("data-win-control","Lenze.UI.AlarmLineDropDownItem");dropDownItem.classList.add("lenze-alarmlineitem__dropdownitem");this._dropDownAlarmsContainerElement.appendChild(dropDownItem);this._dropDownAlarmElements.push(dropDownItem)}this._dropDownButtonsContainerElement=this._dropDownAlarmsContainerElement.nextElementSibling;this._dropDownCustomButtonElement=this._dropDownButtonsContainerElement.firstElementChild;this._dropDownActionButtonsContainerElement=this._dropDownCustomButtonElement.nextElementSibling;this._dropDownCloseButtonElement=this._dropDownActionButtonsContainerElement.firstElementChild;this._dropDownAcknowledgeButtonElement=this._dropDownCloseButtonElement.nextElementSibling;return this.processElements([this._dropDownIconElement,this._iconElement,this._countElement,this._growIconElement,this._alarmClassElement,this._classDividerElement,this._alarmGroupElement,this._groupDividerElement,this._alarmIdElement,this._idDividerElement,this._textElement,this._dateTimeElement,...this._dropDownAlarmElements,this._dropDownCustomButtonElement,this._dropDownCloseButtonElement,this._dropDownAcknowledgeButtonElement])}afterInit(){if(VisiWin.Utilities.isInDesignMode())return;this._alarmService=VisiWin.System.Alarm.AlarmService.getService();this._stateValues[VisiWin.System.Alarm.AlarmState.None]=6;this._stateValues[VisiWin.System.Alarm.AlarmState.Active]=0;this._stateValues[VisiWin.System.Alarm.AlarmState.Inactive]=2;this._stateValues[VisiWin.System.Alarm.AlarmState.ActiveAck]=1;this._stateValues[VisiWin.System.Alarm.AlarmState.InactiveAck]=3;this._stateValues[VisiWin.System.Alarm.AlarmState.Cleared]=5;this._stateValues[VisiWin.System.Alarm.AlarmState.Reactivated]=4}_updateColors(changes){let alarmState;let alarmClassName;let alarmGroupName;let colors;if(VisiWin.Utilities.isInDesignMode()){alarmState=VisiWin.System.Alarm.AlarmState.Active;colors=this.getColors(alarmState);this._idDividerElement.style.display="block";this._alarmIdElement.winControl.show=this.showAlarmParam1;this._idDividerElement.style.display=this._alarmIdElement.winControl.show?"block":"none";this._alarmGroupElement.winControl.show=this.showAlarmGroup;this._groupDividerElement.style.display=this._alarmGroupElement.winControl.show?"block":"none"}else{if(this._activeAlarm===null)return;this._alarmClassElement.winControl.text=this._activeAlarm.Class.Text;const idText=this._activeAlarm.Param1;this._alarmIdElement.winControl.show=this.showAlarmParam1&&idText!==null&&idText!==undefined&&idText.trim()!=="";this._idDividerElement.style.display=this._alarmIdElement.winControl.show?"block":"none";if(this._alarmIdElement.winControl.show){this._alarmIdElement.winControl.text=idText}const groupText=this._activeAlarm.Group.Text;this._alarmGroupElement.winControl.show=this.showAlarmGroup&&groupText!==null&&groupText!==undefined&&groupText.trim()!=="";this._groupDividerElement.style.display=this._alarmGroupElement.winControl.show?"block":"none";if(this._alarmGroupElement.winControl.show){this._alarmGroupElement.winControl.text=groupText}this._textElement.winControl.text=this._activeAlarm.Text;this._dateTimeElement.winControl.value=this._activeAlarm.ActivationTime.toISOString();alarmState=this._activeAlarm.AlarmState;alarmClassName=this._activeAlarm.Class.Name;alarmGroupName=this._activeAlarm.Group.Name;colors=this.getAlarmColors(alarmState,alarmClassName)}this.element.style.backgroundColor=colors[0];this.element.style.borderColor=colors[3];this._dropDownIconElement.winControl.foregroundColor=colors[1];this._iconElement.winControl.foregroundColor=colors[2];this._countElement.winControl.foregroundColor=colors[1];this._growIconElement.winControl.foregroundColor=colors[1];this._alarmClassElement.winControl.foregroundColor=colors[1];this._alarmGroupElement.winControl.foregroundColor=colors[1];this._alarmIdElement.winControl.foregroundColor=colors[1];this._textElement.winControl.foregroundColor=colors[1];this._classDividerElement.winControl.backgroundColor=colors[1];this._groupDividerElement.winControl.backgroundColor=colors[1];this._idDividerElement.winControl.backgroundColor=colors[1];this._dateTimeElement.winControl.dateForegroundColor=colors[1];this._dateTimeElement.winControl.timeForegroundColor=colors[1];if(this.dropDownEnabled){this.setColor("dropDownBackgroundColor","backgroundColor","_dropDownContainerElement");this.setColor("dropDownBorderColor","borderColor","_dropDownContainerElement");this.setColor("dropDownBackgroundColor","backgroundColor","_dropDownButtonsContainerElement");this.setColor("dropDownBorderColor","borderColor","_dropDownButtonsContainerElement");for(let dropDownElement of this._dropDownAlarmElements){const control=dropDownElement.winControl;control.actBackgroundColor=this.dropDownActBackgroundColor;control.actTextColor=this.dropDownActTextColor;control.actSymbolColor=this.dropDownActSymbolColor;control.actBorderColor=this.dropDownActBorderColor;control.inactBackgroundColor=this.dropDownInactBackgroundColor;control.inactTextColor=this.dropDownInactTextColor;control.inactSymbolColor=this.dropDownInactSymbolColor;control.inactBorderColor=this.dropDownInactBorderColor;control.actAckBackgroundColor=this.dropDownActAckBackgroundColor;control.actAckTextColor=this.dropDownActAckTextColor;control.actAckSymbolColor=this.dropDownActAckSymbolColor;control.actAckBorderColor=this.dropDownActAckBorderColor;control.inactAckBackgroundColor=this.dropDownInactAckBackgroundColor;control.inactAckTextColor=this.dropDownInactAckTextColor;control.inactAckSymbolColor=this.dropDownInactAckSymbolColor;control.inactAckBorderColor=this.dropDownInactAckBorderColor}}}_updateLayout(changes){this._dropDownIconElement.winControl.iconFont="lenze-icons";this._dropDownIconElement.winControl.symbolType="Icon";this._dropDownIconElement.winControl.symbol="expand_more";this._dropDownIconElement.style.display=!this.dropDownEnabled?"none":"";this._growIconElement.winControl.iconFont="material-icons";this._growIconElement.winControl.symbolType="Icon";this._growIconElement.winControl.symbol="chevron_right";this._growIconElement.style.display="";this._detailsElement.style.display=this.showDetails?"flex":"none";this._dateTimeElement.style.display=this.showDetails?"flex":"none";this._dateTimeElement.winControl.margin="0";this._dateTimeElement.winControl.datePadding="0";this._dateTimeElement.winControl.timePadding="0";switch(this._dateTimeElement.winControl.dateTimeMode){case"TimeOnly":this._dateTimeElement.winControl.timeMargin="0px 0px 0px 0px";break;case"DateOnly":this._dateTimeElement.winControl.dateMargin="0px 0px 0px 0px";break;case"TimeDate":this._dateTimeElement.winControl.dateMargin="0px 0px 0px 10px";break;case"DateTime":this._dateTimeElement.winControl.timeMargin="0px 0px 0px 10px";break;case"TimeCRDate":this._dateTimeElement.winControl.timeMargin="0px 0px 0px 0px";this._dateTimeElement.winControl.dateMargin="0px 0px 0px 0px";break;case"DateCRTime":this._dateTimeElement.winControl.dateMargin="0px 0px 0px 0px";this._dateTimeElement.winControl.timeMargin="0px 0px 0px 0px";break;default:break}this._countElement.winControl.fontClass=this.fontClass;this._alarmClassElement.winControl.fontClass=this.fontClass;this._alarmGroupElement.winControl.fontClass=this.fontClass;this._alarmIdElement.winControl.fontClass=this.fontClass;this._textElement.winControl.fontClass=this.fontClass;this._dateTimeElement.winControl.dateFontClass=this.fontClass;this._dateTimeElement.winControl.timeFontClass=this.fontClass;if(this.dropDownEnabled){this._dropDownButtonsContainerElement.style.borderRadius=this.dropDownBorderRadius;this._dropDownButtonsContainerElement.style.borderStyle=this.dropDownBorderStyle;this._dropDownButtonsContainerElement.style.borderWidth=this.dropDownBorderWidth;this._dropDownCloseButtonElement.winControl.visibility=this.dropDownCloseButtonVisibility;this._dropDownCustomButtonElement.winControl.visibility=this.dropDownCustomButtonVisibility;this._dropDownAcknowledgeButtonElement.winControl.symbolMargin=this.dropDownAcknowledgeButtonSymbolMargin;this._dropDownCloseButtonElement.winControl.symbolMargin=this.dropDownCloseButtonSymbolMargin;this._dropDownCustomButtonElement.winControl.symbolMargin=this.dropDownCustomButtonSymbolMargin;for(let dropDownElement of this._dropDownAlarmElements){const control=dropDownElement.winControl;control.margin=this.dropDownMargin;control.padding=this.dropDownPadding;control.borderRadius=this.dropDownBorderRadius;control.borderStyle=this.dropDownBorderStyle;control.borderWidth=this.dropDownBorderWidth;control.iconFont=this.dropDownIconFont;control.symbolType=this.dropDownSymbolType;control.symbol=this.dropDownSymbol;control.fontClass=this.dropDownFontClass;control.textWrapping=this.dropDownTextWrapping;control.dateTimeMode=this.dateTimeMode;control.formatDate=this.formatDate;control.formatTime=this.formatTime;control.showAlarmParam1=this.showAlarmParam1;control.showAlarmGroup=this.showAlarmGroup;control.countElementWidth=this._countElement.getBoundingClientRect().width+"px";control.alarmClassWidth=this._alarmClassElement.getBoundingClientRect().width+"px";control.alarmGroupWidth=this._alarmGroupElement.getBoundingClientRect().width+"px";control.alarmIdWidth=this._alarmIdElement.getBoundingClientRect().width+"px"}}let alarmState;let alarmClassName;if(VisiWin.Utilities.isInDesignMode()){this._countElement.winControl.text=13;this._alarmClassElement.winControl.text="Class";this._alarmGroupElement.winControl.text="Group";this._alarmIdElement.winControl.text="Param1";this._textElement.winControl.text="Text";return}if(changes!==null&&changes.changeType==="lifeCycle"&&changes.changeName==="updateLayout"){this._desiredAlarms=this.desiredAlarmClasses!==null&&this.desiredAlarmClasses!==undefined&&this.desiredAlarmClasses.trim()!==""?this.desiredAlarmClasses.split(",").map(s=>s.trim()):[];const alarmFilter=this._alarmService.CreateAlarmFilter();if(this._desiredAlarms.length>0)alarmFilter.DesiredClasses=this._desiredAlarms;this._currentAlarms=this._alarmService.GetCurrentAlarms(alarmFilter);this._currentAlarms.SortMode=VisiWin.System.Alarm.AlarmSortMode.NewestFaultOnTop}this.visibility=this._activeAlarm!==null?"visible":"collapse"}async attach(){if(VisiWin.Utilities.isInDesignMode())return await super.attach();this._currentAlarms.InitAlarm.add(this._initAlarmHandler);this._currentAlarms.NewAlarm.add(this._newAlarmHandler);this._currentAlarms.ChangeAlarm.add(this._changeAlarmHandler);this._currentAlarms.ClearAlarm.add(this._clearAlarmHandler);this.element.addEventListener("pointerup",this._elementClickHandler);this._dropDownCloseButtonElement.winControl.addEventListener("buttonclick",this._closeButtonClickHandler);this._dropDownCustomButtonElement.winControl.addEventListener("buttonclick",this._customButtonClickHandler);this._dropDownAcknowledgeButtonElement.winControl.addEventListener("buttonclick",this._acknowledgeClickHandler);this._updateAlarmState();await super.attach()}async detach(){if(VisiWin.Utilities.isInDesignMode())return await super.detach();this._currentAlarms.InitAlarm.remove(this._initAlarmHandler);this._currentAlarms.NewAlarm.remove(this._newAlarmHandler);this._currentAlarms.ChangeAlarm.remove(this._changeAlarmHandler);this._currentAlarms.ClearAlarm.remove(this._clearAlarmHandler);this.element.removeEventListener("pointerup",this._elementClickHandler);this._dropDownCloseButtonElement.winControl.removeEventListener("buttonclick",this._closeButtonClickHandler);this._dropDownCustomButtonElement.winControl.removeEventListener("buttonclick",this._customButtonClickHandler);this._dropDownAcknowledgeButtonElement.winControl.removeEventListener("buttonclick",this._acknowledgeClickHandler);await super.detach()}dispose(){if(VisiWin.Utilities.isInDesignMode())return super.dispose();this._currentAlarms.InitAlarm.remove(this._initAlarmHandler);this._currentAlarms.NewAlarm.remove(this._newAlarmHandler);this._currentAlarms.ChangeAlarm.remove(this._changeAlarmHandler);this._currentAlarms.ClearAlarm.remove(this._clearAlarmHandler);this.element.removeEventListener("pointerup",this._elementClickHandler);this._dropDownCloseButtonElement.winControl.removeEventListener("buttonclick",this._closeButtonClickHandler);this._dropDownCustomButtonElement.winControl.removeEventListener("buttonclick",this._customButtonClickHandler);this._dropDownAcknowledgeButtonElement.winControl.removeEventListener("buttonclick",this._acknowledgeClickHandler);return super.dispose()}resizeHandler(){if(this.element.offsetHeight==this._oldElementHeight)return;this._oldElementHeight=this.element.offsetHeight;this._dropDownContainerElement.style.top=`${this._oldElementHeight}px`}_onInitAlarm(alarmItem){this._updateAlarmState()}_onNewAlarm(alarmItem){this._updateAlarmState()}_onChangeAlarm(alarmItem){this._updateAlarmState()}_onClearAlarm(alarmItem){this._updateAlarmState()}_onElementClick(args){if(args.target!=null&&(args.target.classList.contains("lenze-alarmlineitem__dropdown-button")||args.target.parentElement.classList.contains("lenze-alarmlineitem__dropdown-button"))){this._updateDropDown()}else{this.dispatchEvent(AlarmLineItem.onClickEventName,args)}}_onCloseButtonClick(){this._updateDropDown()}_onCustomButtonClick(args){this.dispatchEvent(AlarmLineItem.onCustomClickEventName,args)}_onAcknowledgeButtonClick(args){this.dispatchEvent(AlarmLineItem.onAcknowledgeClickEventName,args)}_updateDropDown(){const parentElement=this.element.parentElement;if(!this.dropDownEnabled&&parentElement==null)return;if(parentElement.classList.contains("lenze-alarmlinecollection__expand"))parentElement.classList.remove("lenze-alarmlinecollection__expand");else parentElement.classList.add("lenze-alarmlinecollection__expand");if(parentElement.winControl.dropDownAcknowledgeButtonVisibility.toLowerCase()=="collapse"){this.dropDownAcknowledgeButtonVisibility="collapse"}else{this.dropDownAcknowledgeButtonVisibility="visible"}this.dropDownAcknowledgeButtonPadding="0px";this.dropDownAcknowledgeButtonSymbolMargin="8px 8px 8px 0px";this.dropDownCustomButtonSymbolMargin="8px 8px 8px 0px";this.dropDownCloseButtonSymbolMargin="8px 8px 8px 0px"}_updateAlarmState(){if(this._desiredAlarms==null||this._desiredAlarms.length<=0)return;let activeAlarms=this._currentAlarms.Alarms.filter(a=>this._desiredAlarms.indexOf(a.Class.Name)!=-1);activeAlarms=activeAlarms.sort((alarm1,alarm2)=>{if(this._stateValues[alarm1.AlarmState]<this._stateValues[alarm2.AlarmState])return-1;else if(this._stateValues[alarm1.AlarmState]>this._stateValues[alarm2.AlarmState])return 1;if(alarm1.Priority>alarm2.Priority)return-1;else if(alarm1.Priority<alarm2.Priority)return 1;if(alarm1.ActivationTime>alarm2.ActivationTime)return this.newestAlarmOnTop?-1:1;else if(alarm1.ActivationTime<alarm2.ActivationTime)return this.newestAlarmOnTop?1:-1;return 0});const count=activeAlarms.length;this._countElement.winControl.text=count;this._hasActiveAlarm=count>0;this._activeAlarm=this._hasActiveAlarm?activeAlarms[0]:null;for(let i=0;i<5;i++){const index=i+1;this._dropDownAlarmElements[i].winControl.updateAlarm(this.dropDownEnabled&&index<count?activeAlarms[index]:null)}this._updateColors(null);this.dispatchEvent(AlarmLineItem.alarmsChangedEventName,{hasActiveAlarm:this._hasActiveAlarm})}getColors(state){switch(state){case VisiWin.System.Alarm.AlarmState.Active:return[this.getThemeColor(this.actBackgroundColor),this.getThemeColor(this.actTextColor),this.getThemeColor(this.actSymbolColor),this.getThemeColor(this.actBorderColor)];case VisiWin.System.Alarm.AlarmState.Inactive:return[this.getThemeColor(this.inactBackgroundColor),this.getThemeColor(this.inactTextColor),this.getThemeColor(this.inactSymbolColor),this.getThemeColor(this.inactBorderColor)];case VisiWin.System.Alarm.AlarmState.ActiveAck:return[this.getThemeColor(this.actAckBackgroundColor),this.getThemeColor(this.actAckTextColor),this.getThemeColor(this.actAckSymbolColor),this.getThemeColor(this.actAckBorderColor)];case VisiWin.System.Alarm.AlarmState.InactiveAck:return[this.getThemeColor(this.inactAckBackgroundColor),this.getThemeColor(this.inactAckTextColor),this.getThemeColor(this.inactAckSymbolColor),this.getThemeColor(this.inactAckBorderColor)];default:return["","","",""]}}getAlarmColors(alarmState,alarmClass){switch(alarmClass){case"Systemalarm":case"Alarm":case"ERROR_LEM":case"FAULT_LEM":case"TROUBLE_LEM":switch(alarmState){case VisiWin.System.Alarm.AlarmState.Active:return[this.getThemeColor(this.actBackgroundColor),this.getThemeColor(this.actTextColor),this.getThemeColor(this.actSymbolColor),this.getThemeColor(this.actBorderColor)];case VisiWin.System.Alarm.AlarmState.Inactive:return[this.getThemeColor(this.inactBackgroundColor),this.getThemeColor(this.inactTextColor),this.getThemeColor(this.inactSymbolColor),this.getThemeColor(this.inactBorderColor)];case VisiWin.System.Alarm.AlarmState.ActiveAck:return[this.getThemeColor(this.actAckBackgroundColor),this.getThemeColor(this.actAckTextColor),this.getThemeColor(this.actAckSymbolColor),this.getThemeColor(this.actAckBorderColor)];case VisiWin.System.Alarm.AlarmState.InactiveAck:return[this.getThemeColor(this.inactAckBackgroundColor),this.getThemeColor(this.inactAckTextColor),this.getThemeColor(this.inactAckSymbolColor),this.getThemeColor(this.inactAckBorderColor)];default:return["","","",""]}case"Warning":case"Message":case"WARNING_LOCK_LEM":case"WARNING_LEM":switch(alarmState){case VisiWin.System.Alarm.AlarmState.Active:return[this.getThemeColor(this.actBackgroundColor),this.getThemeColor(this.actTextColor),this.getThemeColor(this.actSymbolColor),this.getThemeColor(this.actBorderColor)];case VisiWin.System.Alarm.AlarmState.Inactive:return[this.getThemeColor(this.inactBackgroundColor),this.getThemeColor(this.inactTextColor),this.getThemeColor(this.inactSymbolColor),this.getThemeColor(this.inactBorderColor)];case VisiWin.System.Alarm.AlarmState.ActiveAck:return[this.getThemeColor(this.actAckBackgroundColor),this.getThemeColor(this.actAckTextColor),this.getThemeColor(this.actAckSymbolColor),this.getThemeColor(this.actAckBorderColor)];case VisiWin.System.Alarm.AlarmState.InactiveAck:return[this.getThemeColor(this.inactAckBackgroundColor),this.getThemeColor(this.inactAckTextColor),this.getThemeColor(this.inactAckSymbolColor),this.getThemeColor(this.inactAckBorderColor)];default:return["","","",""]}case"Hint":case"Info":case"INFO_LEM":switch(alarmState){case VisiWin.System.Alarm.AlarmState.Active:return[this.getThemeColor(this.actBackgroundColor),this.getThemeColor(this.actTextColor),this.getThemeColor(this.actSymbolColor),this.getThemeColor(this.actBorderColor)];case VisiWin.System.Alarm.AlarmState.Inactive:return[this.getThemeColor(this.inactBackgroundColor),this.getThemeColor(this.inactTextColor),this.getThemeColor(this.inactSymbolColor),this.getThemeColor(this.inactBorderColor)];case VisiWin.System.Alarm.AlarmState.ActiveAck:return[this.getThemeColor(this.actAckBackgroundColor),this.getThemeColor(this.actAckTextColor),this.getThemeColor(this.actAckSymbolColor),this.getThemeColor(this.actAckBorderColor)];case VisiWin.System.Alarm.AlarmState.InactiveAck:return[this.getThemeColor(this.inactAckBackgroundColor),this.getThemeColor(this.inactAckTextColor),this.getThemeColor(this.inactAckSymbolColor),this.getThemeColor(this.inactAckBorderColor)]}default:return["","","",""]}}}AlarmLineItem.alarmsChangedEventName="alarmschanged";AlarmLineItem.onClickEventName="buttonclick";AlarmLineItem.onCustomClickEventName="customclick";AlarmLineItem.onAcknowledgeClickEventName="acknowledgeclick";UI.AlarmLineItem=AlarmLineItem})(UI=Lenze.UI||(Lenze.UI={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var UI;(function(UI){"use strict";class CognexCamera extends Lenze.UI.ControlBase{get _webPageControl(){return this._webPageElement.winControl}constructor(element,options){super(element,options);this.properties={designerType:{propertyType:"base",type:"string",defaultValue:"Control"},isHttps:{propertyType:"member",type:"boolean",defaultValue:false},ipAddress:{propertyType:"member",type:"string",defaultValue:""},port:{propertyType:"member",type:"number",defaultValue:8087}};this._ipAddressRegex=/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/;this.initialize(Lenze.UI.CognexCamera)}createTemplate(){this.element.innerHTML=`<div class="lenze-cognexcamera__webpage" data-win-control="Lenze.UI.WebPage" data-ref-element="_webPageElement"></div>`;return this.initializeChilds()}_updateLayout(changes){if(VisiWin.Utilities.isInDesignMode()){this.element.style.backgroundColor="grey";return}this._webPageControl.source=this._validIpAddress()?this._createUrl():""}_validIpAddress(){if(Lenze.Strings.isNullOrWhiteSpace(this.ipAddress))return false;return this._ipAddressRegex.test(this.ipAddress)}_createUrl(){return`${this.isHttps?"https":"http"}://${this.ipAddress}:${this.port}`}}UI.CognexCamera=CognexCamera})(UI=Lenze.UI||(Lenze.UI={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var UI;(function(UI){"use strict";class ImageRefresher extends Lenze.UI.ControlBase{constructor(element,options){super(element,options);this.properties={designerType:{propertyType:"base",type:"string",defaultValue:"Control"},source:{propertyType:"member",type:"string",defaultValue:""},altText:{propertyType:"member",type:"string",defaultValue:"Refresh Image"},refreshRate:{propertyType:"member",type:"number",defaultValue:4},backgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@Transparent"}};this._intervalId=undefined;this.initialize(Lenze.UI.ImageRefresher)}createTemplate(){this.element.innerHTML=`<img class="lenze-imagerefresher__image" data-ref-element="_imageElement">`;return this.initializeChilds()}createHandler(){if(VisiWin.Utilities.isInDesignMode())return;this._intervalHandler=this._onInterval.bind(this)}_updateColors(changes){this.setColor("backgroundColor")}_updateLayout(changes){if(this._imageElement!=null)this._imageElement.alt=this.altText}async attach(){if(VisiWin.Utilities.isInDesignMode())return await super.attach();this._startInterval();await super.attach()}async detach(){if(VisiWin.Utilities.isInDesignMode())return await super.detach();this._stopInterval();await super.detach()}dispose(){if(VisiWin.Utilities.isInDesignMode())return super.dispose();this._stopInterval();return super.dispose()}_startInterval(){if(this._intervalId!==undefined)return;this._intervalId=setInterval(this._intervalHandler,1e3/this.refreshRate)}_stopInterval(){clearInterval(this._intervalId);this._intervalId=undefined}_onInterval(){if(!Lenze.Strings.isNullOrWhiteSpace(this.source))this._imageElement.src=`${this.source}?${(new Date).getTime()}`}}UI.ImageRefresher=ImageRefresher})(UI=Lenze.UI||(Lenze.UI={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var UI;(function(UI){"use strict";class WebPage extends Lenze.UI.ControlBase{constructor(element,options){super(element,options);this.properties={designerType:{propertyType:"base",type:"string",defaultValue:"Control"},source:{propertyType:"member",type:"string",defaultValue:""}};this._iframeElement=null;this.initialize(Lenze.UI.WebPage)}_updateLayout(changes){if(VisiWin.Utilities.isInDesignMode())this.element.style.backgroundColor="grey";if(changes.changeType==="property"&&changes.changeName==="source"){this._destroyIFrameElement();this._createIFrameElement()}}async attach(){if(VisiWin.Utilities.isInDesignMode())return await super.attach();this._createIFrameElement();await super.attach()}async detach(){if(VisiWin.Utilities.isInDesignMode())return await super.detach();this._destroyIFrameElement();await super.detach()}dispose(){if(VisiWin.Utilities.isInDesignMode())return super.dispose();this._destroyIFrameElement();return super.dispose()}_createIFrameElement(){if(Lenze.Strings.isNullOrWhiteSpace(this.source))return;this._iframeElement=document.createElement("iframe");this._iframeElement.setAttribute("sandbox","allow-forms allow-scripts allow-same-origin");this._iframeElement.classList.add("lenze-webpage__iframe");this._iframeElement.src=this.source;this.element.innerHTML="";this.element.appendChild(this._iframeElement)}_destroyIFrameElement(){if(this._iframeElement==null)return;this._iframeElement.remove();this._iframeElement.src="";this._iframeElement=null;this.element.innerHTML=""}}UI.WebPage=WebPage})(UI=Lenze.UI||(Lenze.UI={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var UI;(function(UI){"use strict";class SegmentBar extends Lenze.UI.VariableBase{constructor(element,options){super(element,options);this.properties={designerType:{propertyType:"base",type:"string",defaultValue:"Control"},disabled:{propertyType:"base",type:"boolean"},headerLabelContainerWidth:{propertyType:"child",type:"string",child:"_headerLabelElement",childProperty:"width"},headerLabelContainerHeight:{propertyType:"child",type:"string",child:"_headerLabelElement",childProperty:"height"},headerLabelContainerMargin:{propertyType:"child",type:"string",child:"_headerLabelElement",childProperty:"margin"},headerLabelContainerPadding:{propertyType:"child",type:"string",child:"_headerLabelElement",childProperty:"padding"},headerShowLabel:{propertyType:"child",type:"boolean",child:"_headerLabelElement",childProperty:"showText"},headerLabelWidth:{propertyType:"child",type:"string",child:"_headerLabelElement",childProperty:"textWidth"},headerLabelHeight:{propertyType:"child",type:"string",child:"_headerLabelElement",childProperty:"textHeight"},headerLabelMargin:{propertyType:"child",type:"string",child:"_headerLabelElement",childProperty:"textMargin"},headerLabelPadding:{propertyType:"child",type:"string",child:"_headerLabelElement",childProperty:"textPadding"},headerLabelText:{propertyType:"child",type:"string",child:"_headerLabelElement",childProperty:"text",defaultValue:"SegmentBar"},headerLocalizableLabelText:{propertyType:"child",type:"string",child:"_headerLabelElement",childProperty:"localizableText"},headerLabelTextAlignment:{propertyType:"child",type:"string",child:"_headerLabelElement",childProperty:"textAlignment",defaultValue:"Center"},headerLabelLineClamp:{propertyType:"child",type:"number",child:"_headerLabelElement",childProperty:"lineClamp"},headerLabelTextWrapping:{propertyType:"child",type:"string",child:"_headerLabelElement",childProperty:"textWrapping"},headerLabelTextTrimming:{propertyType:"child",type:"string",child:"_headerLabelElement",childProperty:"textTrimming"},headerLabelFontClass:{propertyType:"child",type:"string",child:"_headerLabelElement",childProperty:"fontClass"},headerLabelFontSize:{propertyType:"child",type:"string",child:"_headerLabelElement",childProperty:"fontSize",defaultValue:"14px"},headerLabelFontWeight:{propertyType:"child",type:"string",child:"_headerLabelElement",childProperty:"fontWeight"},headerLabelLineHeight:{propertyType:"child",type:"string",child:"_headerLabelElement",childProperty:"lineHeight"},headerLabelTextContrast:{propertyType:"child",type:"number",child:"_headerLabelElement",childProperty:"textContrast"},headerLabelUppercase:{propertyType:"child",type:"boolean",child:"_headerLabelElement",childProperty:"uppercase"},headerLabelShowSymbol:{propertyType:"child",type:"boolean",child:"_headerLabelElement",childProperty:"showSymbol"},headerLabelIconFont:{propertyType:"child",type:"string",child:"_headerLabelElement",childProperty:"iconFont"},headerLabelSymbol:{propertyType:"child",type:"string",child:"_headerLabelElement",childProperty:"symbol"},headerLabelSymbolType:{propertyType:"child",type:"string",child:"_headerLabelElement",childProperty:"symbolType"},headerLabelSymbolSize:{propertyType:"child",type:"string",child:"_headerLabelElement",childProperty:"symbolSize"},headerLabelSymbolMargin:{propertyType:"child",type:"string",child:"_headerLabelElement",childProperty:"symbolMargin",defaultValue:"0px 0px 0px 0px"},headerLabelSymbolPosition:{propertyType:"child",type:"string",child:"_headerLabelElement",childProperty:"symbolPosition"},variableName:{propertyType:"base",type:"string"},value:{propertyType:"base",type:"string"},roundMode:{propertyType:"member",type:"string",defaultValue:"Truncate"},minValue:{propertyType:"member",type:"number",defaultValue:0},maxValue:{propertyType:"member",type:"number",defaultValue:100},barsPadding:{propertyType:"member",type:"string",defaultValue:"0px 0px 0px 0px"},barsAmount:{propertyType:"member",type:"number",defaultValue:10},barsSpaceBetween:{propertyType:"member",type:"string",defaultValue:"7px"},barsBorderRadius:{propertyType:"member",type:"string",defaultValue:"3px"},footerValueContainerWidth:{propertyType:"child",type:"string",child:"_footerValueElement",childProperty:"width"},footerValueContainerHeight:{propertyType:"child",type:"string",child:"_footerValueElement",childProperty:"height"},footerValueContainerMargin:{propertyType:"child",type:"string",child:"_footerValueElement",childProperty:"margin",defaultValue:"0px 0px 0px 0px"},footerValueContainerPadding:{propertyType:"child",type:"string",child:"_footerValueElement",childProperty:"padding",defaultValue:"0px 0px 0px 0px"},showFooterValue:{propertyType:"child",type:"boolean",child:"_footerValueElement",childProperty:"showValue"},footerValueWidth:{propertyType:"child",type:"string",child:"_footerValueElement",childProperty:"valueWidth"},footerValueHeight:{propertyType:"child",type:"string",child:"_footerValueElement",childProperty:"valueHeight"},footerValueMargin:{propertyType:"child",type:"string",child:"_footerValueElement",childProperty:"valueMargin",defaultValue:"0px 0px 0px 0px"},footerValuePadding:{propertyType:"child",type:"string",child:"_footerValueElement",childProperty:"valuePadding",defaultValue:"0px 0px 0px 0px"},footerValue:{propertyType:"child",type:"number",child:"_footerValueElement",childProperty:"value"},footerValueTextAlignment:{propertyType:"child",type:"string",child:"_footerValueElement",childProperty:"valueTextAlignment",defaultValue:"Center"},footerValueLineClamp:{propertyType:"child",type:"number",child:"_footerValueElement",childProperty:"valueLineClamp"},footerValueTextWrapping:{propertyType:"child",type:"string",child:"_footerValueElement",childProperty:"valueTextWrapping"},footerValueTextTrimming:{propertyType:"child",type:"string",child:"_footerValueElement",childProperty:"valueTextTrimming"},footerValueFontClass:{propertyType:"child",type:"string",child:"_footerValueElement",childProperty:"valueFontClass"},footerValueFontSize:{propertyType:"child",type:"string",child:"_footerValueElement",childProperty:"valueFontSize"},footerValueFontWeight:{propertyType:"child",type:"string",child:"_footerValueElement",childProperty:"valueFontWeight"},footerValueLineHeight:{propertyType:"child",type:"string",child:"_footerValueElement",childProperty:"valueLineHeight"},footerValueTextContrast:{propertyType:"child",type:"number",child:"_footerValueElement",childProperty:"valueTextContrast"},showFooterUnit:{propertyType:"child",type:"boolean",child:"_footerValueElement",childProperty:"showUnit"},footerUnitWidth:{propertyType:"child",type:"string",child:"_footerValueElement",childProperty:"unitWidth",defaultValue:"auto"},footerUnitHeight:{propertyType:"child",type:"string",child:"_footerValueElement",childProperty:"unitHeight"},footerUnitMargin:{propertyType:"child",type:"string",child:"_footerValueElement",childProperty:"unitMargin",defaultValue:"0px 0px 0px 0px"},footerUnitPadding:{propertyType:"child",type:"string",child:"_footerValueElement",childProperty:"unitPadding",defaultValue:"0px 0px 0px 0px"},useVariableFooterUnitText:{propertyType:"child",type:"boolean",child:"_footerValueElement",childProperty:"useVariableUnitText"},footerUnitText:{propertyType:"child",type:"string",child:"_footerValueElement",childProperty:"unitText"},localizableFooterUnitText:{propertyType:"child",type:"string",child:"_footerValueElement",childProperty:"localizableUnitText"},footerUnitTextAlignment:{propertyType:"child",type:"string",child:"_footerValueElement",childProperty:"unitTextAlignment"},footerUnitLineClamp:{propertyType:"child",type:"number",child:"_footerValueElement",childProperty:"unitLineClamp"},footerUnitTextWrapping:{propertyType:"child",type:"string",child:"_footerValueElement",childProperty:"unitTextWrapping"},footerUnitTextTrimming:{propertyType:"child",type:"string",child:"_footerValueElement",childProperty:"unitTextTrimming"},footerUnitFontClass:{propertyType:"child",type:"string",child:"_footerValueElement",childProperty:"unitFontClass"},footerUnitFontSize:{propertyType:"child",type:"string",child:"_footerValueElement",childProperty:"unitFontSize"},footerUnitFontWeight:{propertyType:"child",type:"string",child:"_footerValueElement",childProperty:"unitFontWeight"},footerUnitLineHeight:{propertyType:"child",type:"string",child:"_footerValueElement",childProperty:"unitLineHeight"},footerUnitTextContrast:{propertyType:"child",type:"number",child:"_footerValueElement",childProperty:"unitTextContrast"},footerUnitPosition:{propertyType:"child",type:"string",child:"_footerValueElement",childProperty:"unitPosition"},barActiveColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@PrimaryColor"},barInactiveColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ChromeMedium"},backgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@Transparent"},borderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"},bodyForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},headerLabelForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},headerSymbolForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},footerValueForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},footerUnitForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},disabledBarActiveColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@RippleColor"},disabledBarInactiveColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ChromeLow"},disabledBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@Transparent"},disabledBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledBorderColor"},disabledForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledForegroundColor"}};this._bodyBars=[];this._barClass="lenze-segmentbar__bodyBar";this._activeBarClass="lenze-segmentbar__bodyBar_active";this._roundMethods={Truncate:Math.trunc,RoundDown:Math.floor,RoundUp:Math.ceil,RoundNearest:Math.round};this.initialize(Lenze.UI.SegmentBar)}createTemplate(){this.element.innerHTML=`\n                <div class="lenze-segmentbar__header" data-ref-element="_headerElement">\n                    <div class="lenze-segmentbar__headerLabel" data-ref-element="_headerLabelElement" data-win-control="VisiWin.UI.Label"></div>\n                </div>\n                <div class="lenze-segmentbar__body" data-ref-element="_bodyElement">\n                    <div class="lenze-segmentbar__bodyValues" data-ref-element="_bodyValuesElement">\n                        <div class="lenze-segmentbar__bodyValue" data-ref-element="_bodyMaxValueElement"></div>\n                        <div class="lenze-segmentbar__bodyValue" data-ref-element="_bodyMiddleValueElement"></div>\n                        <div class="lenze-segmentbar__bodyValue" data-ref-element="_bodyMinValueElement"></div>\n                    </div>\n                    <div class="lenze-segmentbar__bodyBarsContainer" data-ref-element="_bodyBarsElement"></div>\n                </div>\n                <div class="lenze-segmentbar__footer" data-ref-element="_footerElement">\n                    <div class="lenze-segmentbar__footerValuePresenter" data-ref-element="_footerValueElement" data-win-control="VisiWin.UI.ValuePresenter"></div>\n                </div>\n            `;return this.initializeChilds()}_updateColors(changes){if(this.disabled){this.setColor("disabledBackgroundColor","backgroundColor");this.setColor("disabledBackgroundColor","backgroundColor",undefined,"_headerLabelElement");this.setColor("disabledBackgroundColor","backgroundColor",undefined,"_footerValueElement");this.setColor("disabledBorderColor","borderColor");this.setColor("disabledForegroundColor","foregroundColor",undefined,"_headerLabelElement");this.setColor("disabledForegroundColor","symbolForegroundColor",undefined,"_headerLabelElement");this.setColor("disabledForegroundColor","valueForegroundColor",undefined,"_footerValueElement");this.setColor("disabledForegroundColor","unitForegroundColor",undefined,"_footerValueElement");this._setBodyColor("disabledForegroundColor");this._setBarsColor("disabledBarActiveColor","disabledBarInactiveColor")}else{this.setColor("backgroundColor","backgroundColor");this.setColor("backgroundColor","backgroundColor",undefined,"_headerLabelElement");this.setColor("backgroundColor","backgroundColor",undefined,"_footerValueElement");this.setColor("borderColor","borderColor");this.setColor("headerLabelForegroundColor","foregroundColor",undefined,"_headerLabelElement");this.setColor("headerSymbolForegroundColor","symbolForegroundColor",undefined,"_headerLabelElement");this.setColor("footerValueForegroundColor","valueForegroundColor",undefined,"_footerValueElement");this.setColor("footerUnitForegroundColor","unitForegroundColor",undefined,"_footerValueElement");this._setBodyColor("bodyForegroundColor");this._setBarsColor("barActiveColor","barInactiveColor")}}_updateLayout(changes){this._bodyMaxValueElement.innerHTML=this.maxValue.toFixed();this._bodyMiddleValueElement.innerHTML=(this.minValue+(this.maxValue-this.minValue)/2).toFixed();this._bodyMinValueElement.innerHTML=this.minValue.toFixed();this._bodyElement.style.padding=this.barsPadding;this._setBodyBars();this._footerValueElement.winControl.value=this.value;this._footerValueElement.winControl.variableName=this.variableName;this._updateBarClasses(this.value);this._updateColors(null)}_setBarsColor(activeColor,inactiveColor){for(let i=0;i<this._bodyBars.length;i++){const element=this._bodyBars[i];element.style.backgroundColor=element.classList.contains(this._activeBarClass)?this.getColor(activeColor):this.getColor(inactiveColor)}}_setBodyColor(color){const rawColor=this.getColor(color);this._bodyMaxValueElement.style.color=rawColor;this._bodyMiddleValueElement.style.color=rawColor;this._bodyMinValueElement.style.color=rawColor}_setBodyBars(){this._bodyBars=[];this._bodyBarsElement.innerHTML="";for(let i=0;i<this.barsAmount;i++){const div=document.createElement("div");div.classList.add(this._barClass);div.style.borderRadius=this.barsBorderRadius;if(i!=0)div.style.marginTop=this.barsSpaceBetween;this._bodyBars.unshift(div);this._bodyBarsElement.appendChild(div)}}_updateBarClasses(newValue){const activeRatio=(newValue-this.minValue)/(this.maxValue-this.minValue);const rawStartIndex=this._bodyBars.length*activeRatio;const roundMode=this.roundMode in this._roundMethods?this.roundMode:"Truncate";const inactiveStartIndex=this._roundMethods[roundMode](rawStartIndex);for(let i=0;i<this._bodyBars.length;i++){const bar=this._bodyBars[i];bar.classList.remove(this._activeBarClass);if(i<inactiveStartIndex)bar.classList.add(this._activeBarClass)}}}UI.SegmentBar=SegmentBar})(UI=Lenze.UI||(Lenze.UI={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var UI;(function(UI){"use strict";class XYChartLine extends Lenze.UI.ControlBase{constructor(element,options){super(element,options);this.properties={designerType:{propertyType:"base",type:"string",defaultValue:"Control"},registerSourceId:{propertyType:"base",type:"string",defaultValue:"XYChartLine"},dataArrayXVariableName:{propertyType:"member",type:"string"},dataArrayYVariableName:{propertyType:"member",type:"string"},nullValue:{propertyType:"member",type:"number",defaultValue:Number.MIN_SAFE_INTEGER},transitionTime:{propertyType:"member",type:"number",defaultValue:50},strokeWidth:{propertyType:"member",type:"number",defaultValue:1.5},strokeLineJoin:{propertyType:"member",type:"string",defaultValue:"Round"},strokeLineCap:{propertyType:"member",type:"string",defaultValue:"Round"},strokeColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@PrimaryColor"},strokeStyle:{propertyType:"member",type:"string",defaultValue:"Solid"},strokeDash:{propertyType:"member",type:"string",defaultValue:"3"},enableDots:{propertyType:"member",type:"boolean",defaultValue:false},dotsFillColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@SecondaryColor"},dotsRadius:{propertyType:"member",type:"number",defaultValue:3},curve:{propertyType:"member",type:"string",defaultValue:"Linear"},curveValue:{propertyType:"member",type:"number",defaultValue:-1}};this.dataChanged=new VisiWin.Internal.System.Events.TypedEvent;this._attachVariablesPromise=null;this._xArrayVariable=null;this._yArrayVariable=null;this._curveMethods={[Lenze.Models.XYCurveEnum.Basis]:{d3Method:d3.curveBasis,curveValueMethod:undefined},[Lenze.Models.XYCurveEnum.BasisClosed]:{d3Method:d3.curveBasisClosed,curveValueMethod:undefined},[Lenze.Models.XYCurveEnum.BasisOpen]:{d3Method:d3.curveBasisOpen,curveValueMethod:undefined},[Lenze.Models.XYCurveEnum.Bundle]:{d3Method:d3.curveBundle,curveValueMethod:d3.curveBundle.beta},[Lenze.Models.XYCurveEnum.Cardinal]:{d3Method:d3.curveCardinal,curveValueMethod:d3.curveCardinal.tension},[Lenze.Models.XYCurveEnum.CardinalClosed]:{d3Method:d3.curveCardinalClosed,curveValueMethod:d3.curveCardinalClosed.tension},[Lenze.Models.XYCurveEnum.CardinalOpen]:{d3Method:d3.curveCardinalOpen,curveValueMethod:d3.curveCardinalOpen.tension},[Lenze.Models.XYCurveEnum.CatmullRom]:{d3Method:d3.curveCatmullRom,curveValueMethod:d3.curveCatmullRom.alpha},[Lenze.Models.XYCurveEnum.CatmullRomClosed]:{d3Method:d3.curveCatmullRomClosed,curveValueMethod:d3.curveCatmullRomClosed.alpha},[Lenze.Models.XYCurveEnum.CatmullRomOpen]:{d3Method:d3.curveCatmullRomOpen,curveValueMethod:d3.curveCatmullRomOpen.alpha},[Lenze.Models.XYCurveEnum.Linear]:{d3Method:d3.curveLinear,curveValueMethod:undefined},[Lenze.Models.XYCurveEnum.LinearClosed]:{d3Method:d3.curveLinearClosed,curveValueMethod:undefined},[Lenze.Models.XYCurveEnum.MonotoneX]:{d3Method:d3.curveMonotoneX,curveValueMethod:undefined},[Lenze.Models.XYCurveEnum.MonotoneY]:{d3Method:d3.curveMonotoneY,curveValueMethod:undefined},[Lenze.Models.XYCurveEnum.Natural]:{d3Method:d3.curveNatural,curveValueMethod:undefined},[Lenze.Models.XYCurveEnum.Step]:{d3Method:d3.curveStep,curveValueMethod:undefined},[Lenze.Models.XYCurveEnum.StepAfter]:{d3Method:d3.curveStepAfter,curveValueMethod:undefined},[Lenze.Models.XYCurveEnum.StepBefore]:{d3Method:d3.curveStepBefore,curveValueMethod:undefined}};this._designTimeArrayX=[];this._designTimeArrayY=[];this.initialize(Lenze.UI.XYChartLine)}createHandler(){if(VisiWin.Utilities.isInDesignMode())return;this._variableChangedHandler=this._onVariableChange.bind(this);this._variableService=VisiWin.System.DataAccess.VariableService.getService()}afterInit(){var _a,_b;if(VisiWin.Utilities.isInDesignMode()){for(let i=0;i<25;i++){this._designTimeArrayX.push(i);this._designTimeArrayY.push(this._randomInt(5,50))}return}else{this._xArrayVariable=this._getVariable(this.dataArrayXVariableName);this._yArrayVariable=this._getVariable(this.dataArrayYVariableName);(_a=this._xArrayVariable)===null||_a===void 0?void 0:_a.Change.add(this._variableChangedHandler);(_b=this._yArrayVariable)===null||_b===void 0?void 0:_b.Change.add(this._variableChangedHandler)}}_updateColors(changes){if(changes.changeType==="property")this.dataChanged.trigger()}_updateLayout(changes){if(changes.changeType==="property")this.dataChanged.trigger()}async getDataAsync(isXAxisDate){var _a,_b,_c,_d;const data=[];if(VisiWin.Utilities.isInDesignMode()){for(let i=0;i<this._designTimeArrayX.length;i++){const value={x:isXAxisDate?new Date((new Date).getTime()+ +this._designTimeArrayX[i]*1e3):+this._designTimeArrayX[i],y:+this._designTimeArrayY[i]};data.push(value)}return data}if(this._attachVariablesPromise==null)return data;await this._attachVariablesPromise;if(!this._isVariableValid(this._xArrayVariable)||!this._isVariableValid(this._yArrayVariable))return data;if(((_a=this._xArrayVariable)===null||_a===void 0?void 0:_a.Value.Length)!==((_b=this._yArrayVariable)===null||_b===void 0?void 0:_b.Value.Length)){console.error(`The length of the arrays must be exactly the same, on variables: '${(_c=this._xArrayVariable)===null||_c===void 0?void 0:_c.Name}' and '${(_d=this._yArrayVariable)===null||_d===void 0?void 0:_d.Name}'.`);return data}if(this._xArrayVariable==null||this._yArrayVariable==null)return data;for(let i=0;i<this._xArrayVariable.Value.length;i++){const value={x:isXAxisDate?new Date(this._xArrayVariable.Value[i]):+this._xArrayVariable.Value[i],y:+this._yArrayVariable.Value[i]};if(value.x===this.nullValue||value.y===this.nullValue)continue;data.push(value)}return data}addToSvg(svg,data,x,y,lineNumber){this._createLine(svg,data,x,y,lineNumber);this._createDots(svg,data,x,y,lineNumber)}async attach(){if(VisiWin.Utilities.isInDesignMode()||this._xArrayVariable==null||this._yArrayVariable==null)return await super.attach();this._attachVariablesPromise=Promise.all([this._xArrayVariable.AttachAsync(),this._yArrayVariable.AttachAsync()]);await this._attachVariablesPromise;const names=[this._xArrayVariable.Name,this._yArrayVariable.Name];const values=await this._variableService.GetValuesAsync(names);await this._variableService.SetValuesAsync(names,values);await super.attach()}async detach(){var _a,_b;if(VisiWin.Utilities.isInDesignMode())return await super.detach();this._attachVariablesPromise=null;(_a=this._xArrayVariable)===null||_a===void 0?void 0:_a.Detach();(_b=this._yArrayVariable)===null||_b===void 0?void 0:_b.Detach();await super.detach()}dispose(){var _a,_b,_c,_d;if(VisiWin.Utilities.isInDesignMode())return super.dispose();(_a=this._xArrayVariable)===null||_a===void 0?void 0:_a.Change.remove(this._variableChangedHandler);(_b=this._xArrayVariable)===null||_b===void 0?void 0:_b.Detach();(_c=this._yArrayVariable)===null||_c===void 0?void 0:_c.Change.remove(this._variableChangedHandler);(_d=this._yArrayVariable)===null||_d===void 0?void 0:_d.Detach();return super.dispose()}_getVariable(variableName){return!Lenze.Strings.isNullOrWhiteSpace(variableName)?this._variableService.GetVariable(variableName):null}_onVariableChange(args){this.dataChanged.trigger()}_isVariableValid(variable){if(variable==null)return true;if(!variable.IsAttached||!variable.IsValid){console.error(`Variable '${variable.Name}' must be attached before retrieving the data.`);return false}if(!VisiWin.isArray(variable.Value)){console.error(`Variable '${variable.Name}' must be an array.`);return false}return true}_getColor(themeColor){return this.getThemeColor(themeColor)}_createLine(svg,data,x,y,lineNumber){const strokeColor=this._getColor(this.strokeColor);if(Lenze.Strings.isNullOrWhiteSpace(strokeColor)){console.error(`Stroke color is an invalid theme color: '${this.strokeColor}'.`);return}if(!VisiWin.isNumber(this.strokeWidth)){console.error(`Stroke width must be a valid number.`);return}if(this.strokeWidth<=0){console.error(`Stroke width must be higher then '0', actual is '${this.strokeWidth}'.`);return}const strokeLineJoin=Lenze.Models.StrokeLineJoinEnum[this.strokeLineJoin];if(Lenze.Strings.isNullOrWhiteSpace(strokeLineJoin)){console.error(`Stroke line join '${this.strokeLineJoin}' is not supported.`);return}const strokeLineCap=Lenze.Models.StrokeLineCapEnum[this.strokeLineCap];if(Lenze.Strings.isNullOrWhiteSpace(strokeLineCap)){console.error(`Stroke line cap '${this.strokeLineCap}' is not supported.`);return}let line=d3.line();line=this._applyCurveMethod(line);line=line.defined(d=>!isNaN(d.y)&&d.y!==this.nullValue&&!isNaN(d.x)&&d.x!==this.nullValue).x(function(d){return x(d.x)}).y(function(d){return y(d.y)});const lineElement=svg.selectAll(`.lenze-xychart__line${lineNumber}`).data([data],function(d){return d.x});lineElement.enter().insert("path",".brush").attr("class",`lenze-xychart__line${lineNumber}`).merge(lineElement).transition().duration(this.transitionTime).attr("d",line).attr("fill","none").attr("stroke",strokeColor).style("stroke-dasharray",!Lenze.Strings.isNullOrWhiteSpace(this.strokeStyle)&&Lenze.Models.StrokeStyleEnum[this.strokeStyle]!==Lenze.Models.StrokeStyleEnum.Solid?this.strokeDash:"0").attr("stroke-width",this.strokeWidth).attr("stroke-linejoin",strokeLineJoin).attr("stroke-linecap",strokeLineCap)}_createDots(svg,data,x,y,lineNumber){if(!this.enableDots)return;if(this.dotsRadius<=0){console.error(`Dots radius has to be higher then '0', actual is '${this.dotsRadius}'.`);return}const dotsFillColor=this.getThemeColor(this.dotsFillColor);if(Lenze.Strings.isNullOrWhiteSpace(dotsFillColor)){console.error(`Dots fill color is an invalid theme color: '${this.dotsFillColor}'.`);return}const dotElements=svg.selectAll(`.lenze-xychart__line${lineNumber}-dot`).data(data);dotElements.enter().insert("circle",".brush").attr("class",`lenze-xychart__line${lineNumber}-dot`).merge(dotElements).attr("cx",function(d){return x(d.x)}).attr("cy",function(d){return y(d.y)}).attr("r",this.dotsRadius).attr("fill",dotsFillColor);dotElements.exit().remove()}_applyCurveMethod(line){const recordObject=this._curveMethods[Lenze.Models.XYCurveEnum[this.curve]];if(recordObject==null){console.error(`Unsupported curve method: '${this.curve}'. Curve method has NOT been applied.`);return line}if(this._canApplyCurveValue(recordObject))return line.curve(recordObject.curveValueMethod(this.curveValue));return line.curve(recordObject.d3Method)}_canApplyCurveValue(d3CurveMethod){return d3CurveMethod.curveValueMethod!==undefined&&this.curveValue!==-1&&this.curveValue<=1&&this.curveValue>=0}_randomInt(min,max){return Math.floor(Math.random()*(max-min+1)+min)}}UI.XYChartLine=XYChartLine})(UI=Lenze.UI||(Lenze.UI={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var UI;(function(UI){"use strict";class XYChart extends Lenze.UI.ControlBase{get _isFirstAttached(){const value=this._firstAttached;if(!value)this._firstAttached=true;return value}constructor(element,options){super(element,options);this.properties={designerType:{propertyType:"base",type:"string",defaultValue:"Control"},registerTargetId:{propertyType:"base",defaultValue:"XYChartLine"},transitionTime:{propertyType:"member",type:"number",defaultValue:50},chartWidth:{propertyType:"member",type:"number",defaultValue:600},chartHeight:{propertyType:"member",type:"number",defaultValue:300},chartMarginTop:{propertyType:"member",type:"number",defaultValue:20},chartMarginRight:{propertyType:"member",type:"number",defaultValue:20},chartMarginBottom:{propertyType:"member",type:"number",defaultValue:30},chartMarginLeft:{propertyType:"member",type:"number",defaultValue:30},yAxisMinOffset:{propertyType:"member",type:"number",defaultValue:0},yAxisMaxOffset:{propertyType:"member",type:"number",defaultValue:5},yAxisMinValueDynamic:{propertyType:"member",type:"boolean",defaultValue:false},xAxisDateTime:{propertyType:"member",type:"boolean",defaultValue:false},chartElements:{propertyType:"member",type:"string"},backgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@Transparent"}};this._firstAttached=false;this._chartElementsCollection=[];this._isBusyDrawing=false;this._isInitialized=false;this.initialize(Lenze.UI.XYChart)}createTemplate(){this._svgContainer=document.createElement("div");this._svgContainer.className="lenze-xychart__container";this.element.appendChild(this._svgContainer);return this.processElements([])}createHandler(){this._xyChartLineDataChanged=this._onXYChartLineDataChangedAsync.bind(this)}dispose(){if(VisiWin.Utilities.isInDesignMode())return super.dispose();for(let line of this._chartElementsCollection)line.dataChanged.remove(this._xyChartLineDataChanged);return super.dispose()}registerChild(controlType,action,element,options){if(action!==this.registerTargetId)return true;if(element&&element.winControl){this._chartElementsCollection.push(element.winControl);element.winControl.dataChanged.add(this._xyChartLineDataChanged)}return false}_updateColors(changes){this.setColor("backgroundColor")}_updateLayout(changes){if(changes.changeType==="lifeCycle"&&changes.changeName==="initialized"){const resetChartPromise=this._resetChartAsync();if(VisiWin.Utilities.isInDesignMode())return;resetChartPromise.then(_=>this._isInitialized=true)}if(changes.changeType==="property"&&changes.changeName!=="triggerCollection"&&this._isInitialized)this._resetChartAsync()}async _resetChartAsync(){this._svgContainer.innerHTML="";this._createChart();await this._updateChartAsync()}_createChart(){if(this._isBusyDrawing)return;this._isBusyDrawing=true;this._svg=d3.select(this._svgContainer).append("svg").attr("preserveAspectRatio","xMidYMid meet").attr("viewBox",`0 0 ${this.chartWidth} ${this.chartHeight}`).classed("lenze-xychart__svg",true).attr("pointer-events","all");this._x=this.xAxisDateTime?d3.scaleTime():d3.scaleLinear();this._x=this._x.range([this.chartMarginLeft,this.chartWidth-this.chartMarginRight]);this._xAxis=(g=>g.attr("transform",`translate(0,${this.chartHeight-this.chartMarginBottom})`).call(d3.axisBottom().scale(this._x)));this._svg.append("g").attr("transform",`translate(0,${this.chartHeight-this.chartMarginBottom})`).attr("class","lenze-xychart__svg-xaxis");this._y=d3.scaleLinear().range([this.chartHeight-this.chartMarginBottom,this.chartMarginTop]);this._yAxis=d3.axisLeft().scale(this._y);this._svg.append("g").attr("transform",`translate(${this.chartMarginLeft},0)`).attr("class","lenze-xychart__svg-yaxis");this._svg.append("defs").append("svg:clipPath").attr("id","clip").append("svg:rect").attr("width",this.chartWidth-this.chartMarginRight-this.chartMarginLeft).attr("height",this.chartHeight-this.chartMarginBottom-this.chartMarginTop).attr("x",this.chartMarginLeft).attr("y",this.chartMarginTop);this._brush=d3.brush().touchable(()=>true).extent([[0,0],[this.chartWidth,this.chartHeight]]).filter(function(event){return event instanceof MouseEvent||event instanceof TouchEvent}).on("end",this._updateChartAsync.bind(this));this._clip=this._svg.append("g").attr("clip-path","url(#clip)");this._clip.append("g").attr("class","brush").call(this._brush);this._isBusyDrawing=false}async _updateChartAsync(event=null){if(this._isBusyDrawing||this._chartElementsCollection===undefined)return;this._isBusyDrawing=true;const data={XYMembers:[]};const getDataPromises=this._chartElementsCollection.map(element=>element.getDataAsync(this.xAxisDateTime));const dataResults=await Promise.all(getDataPromises);for(var i=0;i<dataResults.length;i++)data.XYMembers[i]=dataResults[i];const xArray=[...new Set([].concat.apply([],data.XYMembers.map(member=>member.map(data=>data.x))))];const yArray=[...new Set([].concat.apply([],data.XYMembers.map(member=>member.map(data=>data.y))))];const selection=event===null||event===void 0?void 0:event.selection;if(VisiWin.Utilities.isInDesignMode()||!selection){this._x.domain(d3.extent(xArray));this._y.domain([(this.yAxisMinValueDynamic?d3.min(yArray):0)+this.yAxisMinOffset,d3.max(yArray)+this.yAxisMaxOffset])}else{this._x.domain([this._x.invert(selection[0][0]),this._x.invert(selection[1][0])]);this._y.domain([this._y.invert(selection[1][1]),this._y.invert(selection[0][1])]);this._clip.select(".brush").call(this._brush.clear)}this._svg.selectAll(".lenze-xychart__svg-xaxis").transition().duration(this.transitionTime).call(this._xAxis);this._svg.selectAll(".lenze-xychart__svg-yaxis").transition().duration(this.transitionTime).call(this._yAxis);for(var i=0;i<this._chartElementsCollection.length;i++)this._chartElementsCollection[i].addToSvg(this._clip,data.XYMembers[i],this._x,this._y,i);this._isBusyDrawing=false}async _onXYChartLineDataChangedAsync(){if(!this._isInitialized)return;await this._updateChartAsync()}}UI.XYChart=XYChart})(UI=Lenze.UI||(Lenze.UI={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var UI;(function(UI){"use strict";class AlarmLineBase extends VisiWin.UI.ControlBase{constructor(element,options){super(element,options);this.hasActiveAlarm=false;this.alarmsChanged=new VisiWin.Internal.System.Events.TypedEvent;this._containerElement=null;this._iconElement=null;this._countElement=null;this._detailsElement=null;this._alarmClassElement=null;this._classDividerElement=null;this._alarmIdElement=null;this._idDividerElement=null;this._textElement=null;this._dateTimeElement=null;this._activeAlarm=undefined;this._isInDesignMode=false;this._desiredAlarms=[];this.addPropertyList(AlarmLineBase,AlarmLineBase.propertyList);this.defaultConstructor(element,this.inlineOptions,Lenze.UI.AlarmLineBase.controlName,Lenze.UI.AlarmLineBase.className)}createTemplate(){this.element.innerHTML=['<div class="lenze-alarmlinebase__container">','<div class="lenze-alarmlinebase__icon" data-win-control="VisiWin.UI.Symbol"></div>','<div class="lenze-alarmlinebase__count" data-win-control="VisiWin.UI.TextBlock"></div>','<div class="lenze-alarmlinebase__container">','<div class="lenze-alarmlinebase__class" data-win-control="VisiWin.UI.TextBlock"></div>','<div class="lenze-alarmlinebase__divider" data-win-control="VisiWin.UI.Divider"></div>','<div class="lenze-alarmlinebase__id" data-win-control="VisiWin.UI.TextBlock"></div>','<div class="lenze-alarmlinebase__divider" data-win-control="VisiWin.UI.Divider"></div>','<div class="lenze-alarmlinebase__text" data-win-control="VisiWin.UI.TextBlock"></div>',"</div>","</div>",'<div class="lenze-alarmlinebase__datetime" data-win-control="Lenze.UI.DateTimePresenter" data-win-options=\'{"value":"1970-01-01T00:00:01+00:00","valueFormat":""}\'></div>'].join("\n");this._containerElement=this.element.firstElementChild;this._iconElement=this._containerElement.firstElementChild;this._countElement=this._iconElement.nextElementSibling;this._detailsElement=this._countElement.nextElementSibling;this._alarmClassElement=this._detailsElement.firstElementChild;this._classDividerElement=this._alarmClassElement.nextElementSibling;this._alarmIdElement=this._classDividerElement.nextElementSibling;this._idDividerElement=this._alarmIdElement.nextElementSibling;this._textElement=this._idDividerElement.nextElementSibling;this._dateTimeElement=this._containerElement.nextElementSibling;return this.processElements([this._iconElement,this._countElement,this._alarmClassElement,this._classDividerElement,this._alarmIdElement,this._idDividerElement,this._textElement,this._dateTimeElement])}onInitAlarm(alarmItem){this.updateAlarmState()}onNewAlarm(alarmItem){this.updateAlarmState()}onChangeAlarm(alarmItem){this.updateAlarmState()}onClearAlarm(alarmItem){this.updateAlarmState()}updateAlarmState(){if(this._desiredAlarms==null||this._desiredAlarms.length<=0)return;const activeAlarms=this._currentAlarms.Alarms.filter(a=>this._desiredAlarms.indexOf(a.Class.Name)!=-1);const count=activeAlarms.length;this._countElement.winControl.text=count;this.hasActiveAlarm=count>0;this._activeAlarm=this.hasActiveAlarm?activeAlarms[0]:undefined;this._updateColors(null);if(this.alarmsChanged!==undefined&&this.alarmsChanged!==null)this.alarmsChanged.trigger(this.hasActiveAlarm)}getColors(state){switch(state){case VisiWin.System.Alarm.AlarmState.Active:return[this.getThemeColor(this.actBackgroundColor),this.getThemeColor(this.actTextColor),this.getThemeColor(this.actSymbolColor),this.getThemeColor(this.actBorderColor)];case VisiWin.System.Alarm.AlarmState.Inactive:return[this.getThemeColor(this.inactBackgroundColor),this.getThemeColor(this.inactTextColor),this.getThemeColor(this.inactSymbolColor),this.getThemeColor(this.inactBorderColor)];case VisiWin.System.Alarm.AlarmState.ActiveAck:return[this.getThemeColor(this.actAckBackgroundColor),this.getThemeColor(this.actAckTextColor),this.getThemeColor(this.actAckSymbolColor),this.getThemeColor(this.actAckBorderColor)];case VisiWin.System.Alarm.AlarmState.InactiveAck:return[this.getThemeColor(this.inactAckBackgroundColor),this.getThemeColor(this.inactAckTextColor),this.getThemeColor(this.inactAckSymbolColor),this.getThemeColor(this.inactAckBorderColor)];default:return["","","",""]}}_updateColors(changes){let alarmState;if(VisiWin.Utilities.isInDesignMode()){alarmState=VisiWin.System.Alarm.AlarmState.Active;this._idDividerElement.style.display="block"}else{if(this._activeAlarm===null||this._activeAlarm===undefined)return;this._alarmClassElement.winControl.text=this._activeAlarm.Class.Name;const idText=this._activeAlarm.Param1;this._alarmIdElement.winControl.show=idText!==null&&idText!==undefined&&idText.trim()!=="";this._idDividerElement.style.display=this._alarmIdElement.winControl.show?"block":"none";if(this._alarmIdElement.winControl.show)this._alarmIdElement.winControl.text=idText;this._textElement.winControl.text=this._activeAlarm.Text;this._dateTimeElement.winControl.value=this._activeAlarm.ActivationTime.toISOString();alarmState=this._activeAlarm.AlarmState}const colors=this.getColors(alarmState);this.element.style.backgroundColor=colors[0];this.element.style.borderColor=colors[3];this._iconElement.winControl.foregroundColor=colors[2];this._countElement.winControl.foregroundColor=colors[1];this._alarmClassElement.winControl.foregroundColor=colors[1];this._classDividerElement.winControl.backgroundColor=colors[1];this._alarmIdElement.winControl.foregroundColor=colors[1];this._idDividerElement.winControl.backgroundColor=colors[1];this._textElement.winControl.foregroundColor=colors[1];this._dateTimeElement.winControl.dateForegroundColor=colors[1];this._dateTimeElement.winControl.timeForegroundColor=colors[1]}_updateLayout(changes){this._detailsElement.style.display=this.showDetails?"flex":"none";this._dateTimeElement.style.display=this.showDetails?"flex":"none";this._dateTimeElement.winControl.dateMargin="0 10px 0 0";this._countElement.winControl.fontClass=this.fontClass;this._alarmClassElement.winControl.fontClass=this.fontClass;this._alarmIdElement.winControl.fontClass=this.fontClass;this._textElement.winControl.fontClass=this.fontClass;this._dateTimeElement.winControl.dateFontClass=this.fontClass;this._dateTimeElement.winControl.timeFontClass=this.fontClass;if(this._isInDesignMode){this._countElement.winControl.text=13;this._alarmClassElement.winControl.text="Alarm Class";this._alarmIdElement.winControl.text="Alarm Param1";this._textElement.winControl.text="Alarm Text";return}if(changes!==null&&changes.changeType==="lifeCycle"&&changes.changeName==="updateLayout"){this._desiredAlarms=this.desiredAlarmClasses!==null&&this.desiredAlarmClasses!==undefined&&this.desiredAlarmClasses.trim()!==""?this.desiredAlarmClasses.split(",").map(s=>s.trim()):[];const alarmFilter=this._alarmService.CreateAlarmFilter();if(this._desiredAlarms.length>0)alarmFilter.DesiredClasses=this._desiredAlarms;this._currentAlarms=this._alarmService.GetCurrentAlarms(alarmFilter);this._currentAlarms.SortMode=VisiWin.System.Alarm.AlarmSortMode.NewestFaultOnTop;this._currentAlarms.InitAlarm.remove();this._currentAlarms.InitAlarm.add(this.onInitAlarm.bind(this));this._currentAlarms.NewAlarm.remove();this._currentAlarms.NewAlarm.add(this.onNewAlarm.bind(this));this._currentAlarms.ChangeAlarm.remove();this._currentAlarms.ChangeAlarm.add(this.onChangeAlarm.bind(this));this._currentAlarms.ClearAlarm.remove();this._currentAlarms.ClearAlarm.add(this.onClearAlarm.bind(this))}const alarmIsActive=this._activeAlarm!==undefined;this.visibility=alarmIsActive?"visible":"collapse"}afterInit(){if(VisiWin.Utilities.isInDesignMode()){this._isInDesignMode=true;return}this._alarmService=VisiWin.System.Alarm.AlarmService.getService()}dispose(){return super.dispose()}}AlarmLineBase.namespace="Lenze.UI";AlarmLineBase.controlName="AlarmLineBase";AlarmLineBase.className="lenze-alarmlinebase";AlarmLineBase.propertyList={designerType:{propertyType:"base",type:"string",defaultValue:"Control"},iconFont:{propertyType:"child",type:"string",child:"_iconElement",defaultValue:"material-icons"},symbolType:{propertyType:"child",type:"string",child:"_iconElement",childProperty:"symbolType",defaultValue:"Icon"},symbol:{propertyType:"child",type:"string",child:"_iconElement",childProperty:"symbol"},desiredAlarmClasses:{propertyType:"member",type:"string"},showDetails:{propertyType:"member",type:"boolean",defaultValue:"true"},fontClass:{propertyType:"member",type:"string",defaultValue:"Label1"},textWrapping:{propertyType:"child",type:"string",child:"_textElement",defaultValue:"Wrap"},dateFormat:{propertyType:"child",type:"string",child:"_dateTimeElement"},timeFormat:{propertyType:"child",type:"string",child:"_dateTimeElement"},actBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ErrorColor"},actTextColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},actSymbolColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},actBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ErrorColor"},inactBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@WarningColor"},inactTextColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},inactSymbolColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},inactBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@WarningColor"},actAckBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@InfoColor"},actAckTextColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},actAckSymbolColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},actAckBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@InfoColor"},inactAckBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BackgroundColor"},inactAckTextColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},inactAckSymbolColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},inactAckBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BackgroundColor"}};UI.AlarmLineBase=AlarmLineBase})(UI=Lenze.UI||(Lenze.UI={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var UI;(function(UI){"use strict";class AlarmLine extends VisiWin.UI.ControlBase{constructor(element,options){super(element,options);this._alarmLineBases=[];this.addPropertyList(AlarmLine,AlarmLine.propertyList);this.defaultConstructor(element,this.inlineOptions,Lenze.UI.AlarmLine.controlName,Lenze.UI.AlarmLine.className)}createTemplate(){const amountOfClasses=3;const elementArray=[];for(let i=0;i<amountOfClasses;i++)elementArray.push('<div data-win-control="Lenze.UI.AlarmLineBase"></div>');this.element.innerHTML=elementArray.join("\n");this._alarmLineBase1=this.element.firstElementChild;this._alarmLineBase2=this._alarmLineBase1.nextElementSibling;this._alarmLineBase3=this._alarmLineBase2.nextElementSibling;this._alarmLineBases=[this._alarmLineBase1,this._alarmLineBase2,this._alarmLineBase3];return this.processElements([this._alarmLineBase1,this._alarmLineBase2,this._alarmLineBase3])}onChangeAlarms(message){let showDetailsIsSet=false;for(let i=0;i<this._alarmLineBases.length;i++){this._alarmLineBases[i].winControl.showDetails=!showDetailsIsSet&&this._alarmLineBases[i].winControl.hasActiveAlarm;if(this._alarmLineBases[i].winControl.showDetails)showDetailsIsSet=true;if(this._alarmLineBases[i].classList===undefined)continue;this._alarmLineBases[i].classList.remove(this._alarmLineBases[i].winControl.showDetails?"lenze-alarmline__shrink":"lenze-alarmline__grow");this._alarmLineBases[i].classList.add(this._alarmLineBases[i].winControl.showDetails?"lenze-alarmline__grow":"lenze-alarmline__shrink");this._alarmLineBases[i].winControl.updateLayout()}}_updateColors(changes){this.element.style.backgroundColor=this.getThemeColor(this.inactiveBackgroundColor)}_updateLayout(changes){this._alarmLineBase1.winControl.dateFormat=this.dateFormat;this._alarmLineBase2.winControl.dateFormat=this.dateFormat;this._alarmLineBase3.winControl.dateFormat=this.dateFormat;this._alarmLineBase1.winControl.timeFormat=this.timeFormat;this._alarmLineBase2.winControl.timeFormat=this.timeFormat;this._alarmLineBase3.winControl.timeFormat=this.timeFormat}afterInit(){console.warn(`'Lenze.UI.AlarmLine' is deprecated since Lenze library version 1.2.14. Consider upgrading to 'Lenze.UI.AlarmLineCollection' instead.`);if(VisiWin.Utilities.isInDesignMode()){if(this._alarmLineBases==null)return;for(let i=0;i<this._alarmLineBases.length;i++){if(this._alarmLineBases[i]===undefined||this._alarmLineBases[i].winControl===undefined)continue;this._alarmLineBases[i].winControl.showDetails=i==0;this._alarmLineBases[i].classList.add(i==0?"lenze-alarmline__grow":"lenze-alarmline__shrink")}return}for(let i=0;i<this._alarmLineBases.length;i++)this._alarmLineBases[i].winControl.alarmsChanged.add(this.onChangeAlarms.bind(this))}dispose(){return super.dispose()}}AlarmLine.namespace="Lenze.UI";AlarmLine.controlName="AlarmLine";AlarmLine.className="lenze-alarmline";AlarmLine.propertyList={designerType:{propertyType:"base",type:"string",defaultValue:"Control"},inactiveBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@Transparent"},dateFormat:{propertyType:"member",type:"string",defaultValue:"DD-MM-YYYY"},timeFormat:{propertyType:"member",type:"string",defaultValue:"HH:mm:ss"},alarmOnePadding:{propertyType:"child",type:"string",child:"_alarmLineBase1",childProperty:"padding"},alarmOneFontClass:{propertyType:"child",type:"string",child:"_alarmLineBase1",childProperty:"fontClass"},alarmOneTextWrapping:{propertyType:"child",type:"string",child:"_alarmLineBase1",childProperty:"textWrapping"},alarmOneIconFont:{propertyType:"child",type:"string",child:"_alarmLineBase1",childProperty:"iconFont"},alarmOneSymbol:{propertyType:"child",type:"string",child:"_alarmLineBase1",childProperty:"symbol"},alarmOneSymbolType:{propertyType:"child",type:"string",child:"_alarmLineBase1",childProperty:"symbolType"},alarmOneDesiredClasses:{propertyType:"child",type:"string",child:"_alarmLineBase1",childProperty:"desiredAlarmClasses"},alarmOneBorderWidth:{propertyType:"child",type:"string",child:"_alarmLineBase1",childProperty:"borderWidth"},alarmOneActBackgroundColor:{propertyType:"child",type:"string",child:"_alarmLineBase1",childProperty:"actBackgroundColor",resourceValue:["getTheme"]},alarmOneActTextColor:{propertyType:"child",type:"string",child:"_alarmLineBase1",childProperty:"actTextColor",resourceValue:["getTheme"]},alarmOneActSymbolColor:{propertyType:"child",type:"string",child:"_alarmLineBase1",childProperty:"actSymbolColor",resourceValue:["getTheme"]},alarmOneActBorderColor:{propertyType:"child",type:"string",child:"_alarmLineBase1",childProperty:"actBorderColor",resourceValue:["getTheme"]},alarmOneInactBackgroundColor:{propertyType:"child",type:"string",child:"_alarmLineBase1",childProperty:"inactBackgroundColor",resourceValue:["getTheme"]},alarmOneInactTextColor:{propertyType:"child",type:"string",child:"_alarmLineBase1",childProperty:"inactTextColor",resourceValue:["getTheme"]},alarmOneInactSymbolColor:{propertyType:"child",type:"string",child:"_alarmLineBase1",childProperty:"inactSymbolColor",resourceValue:["getTheme"]},alarmOneInactBorderColor:{propertyType:"child",type:"string",child:"_alarmLineBase1",childProperty:"inactBorderColor",resourceValue:["getTheme"]},alarmOneActAckBackgroundColor:{propertyType:"child",type:"string",child:"_alarmLineBase1",childProperty:"actAckBackgroundColor",resourceValue:["getTheme"]},alarmOneActAckTextColor:{propertyType:"child",type:"string",child:"_alarmLineBase1",childProperty:"actAckTextColor",resourceValue:["getTheme"]},alarmOneActAckSymbolColor:{propertyType:"child",type:"string",child:"_alarmLineBase1",childProperty:"actAckSymbolColor",resourceValue:["getTheme"]},alarmOneActAckBorderColor:{propertyType:"child",type:"string",child:"_alarmLineBase1",childProperty:"actAckBorderColor",resourceValue:["getTheme"]},alarmOneInactAckBackgroundColor:{propertyType:"child",type:"string",child:"_alarmLineBase1",childProperty:"inactAckBackgroundColor",resourceValue:["getTheme"]},alarmOneInactAckTextColor:{propertyType:"child",type:"string",child:"_alarmLineBase1",childProperty:"inactAckTextColor",resourceValue:["getTheme"]},alarmOneInactAckSymbolColor:{propertyType:"child",type:"string",child:"_alarmLineBase1",childProperty:"inactAckSymbolColor",resourceValue:["getTheme"]},alarmOneInactAckBorderColor:{propertyType:"child",type:"string",child:"_alarmLineBase1",childProperty:"inactAckBorderColor",resourceValue:["getTheme"]},alarmTwoPadding:{propertyType:"child",type:"string",child:"_alarmLineBase2",childProperty:"padding"},alarmTwoFontClass:{propertyType:"child",type:"string",child:"_alarmLineBase2",childProperty:"fontClass"},alarmTwoTextWrapping:{propertyType:"child",type:"string",child:"_alarmLineBase2",childProperty:"textWrapping"},alarmTwoIconFont:{propertyType:"child",type:"string",child:"_alarmLineBase2",childProperty:"iconFont"},alarmTwoSymbol:{propertyType:"child",type:"string",child:"_alarmLineBase2",childProperty:"symbol"},alarmTwoSymbolType:{propertyType:"child",type:"string",child:"_alarmLineBase2",childProperty:"symbolType"},alarmTwoDesiredClasses:{propertyType:"child",type:"string",child:"_alarmLineBase2",childProperty:"desiredAlarmClasses"},alarmTwoBorderWidth:{propertyType:"child",type:"string",child:"_alarmLineBase2",childProperty:"borderWidth"},alarmTwoActBackgroundColor:{propertyType:"child",type:"string",child:"_alarmLineBase2",childProperty:"actBackgroundColor",resourceValue:["getTheme"]},alarmTwoActTextColor:{propertyType:"child",type:"string",child:"_alarmLineBase2",childProperty:"actTextColor",resourceValue:["getTheme"]},alarmTwoActSymbolColor:{propertyType:"child",type:"string",child:"_alarmLineBase2",childProperty:"actSymbolColor",resourceValue:["getTheme"]},alarmTwoActBorderColor:{propertyType:"child",type:"string",child:"_alarmLineBase2",childProperty:"actBorderColor",resourceValue:["getTheme"]},alarmTwoInactBackgroundColor:{propertyType:"child",type:"string",child:"_alarmLineBase2",childProperty:"inactBackgroundColor",resourceValue:["getTheme"]},alarmTwoInactTextColor:{propertyType:"child",type:"string",child:"_alarmLineBase2",childProperty:"inactTextColor",resourceValue:["getTheme"]},alarmTwoInactSymbolColor:{propertyType:"child",type:"string",child:"_alarmLineBase2",childProperty:"inactSymbolColor",resourceValue:["getTheme"]},alarmTwoInactBorderColor:{propertyType:"child",type:"string",child:"_alarmLineBase2",childProperty:"inactBorderColor",resourceValue:["getTheme"]},alarmTwoActAckBackgroundColor:{propertyType:"child",type:"string",child:"_alarmLineBase2",childProperty:"actAckBackgroundColor",resourceValue:["getTheme"]},alarmTwoActAckTextColor:{propertyType:"child",type:"string",child:"_alarmLineBase2",childProperty:"actAckTextColor",resourceValue:["getTheme"]},alarmTwoActAckSymbolColor:{propertyType:"child",type:"string",child:"_alarmLineBase2",childProperty:"actAckSymbolColor",resourceValue:["getTheme"]},alarmTwoActAckBorderColor:{propertyType:"child",type:"string",child:"_alarmLineBase2",childProperty:"actAckBorderColor",resourceValue:["getTheme"]},alarmTwoInactAckBackgroundColor:{propertyType:"child",type:"string",child:"_alarmLineBase2",childProperty:"inactAckBackgroundColor",resourceValue:["getTheme"]},alarmTwoInactAckTextColor:{propertyType:"child",type:"string",child:"_alarmLineBase2",childProperty:"inactAckTextColor",resourceValue:["getTheme"]},alarmTwoInactAckSymbolColor:{propertyType:"child",type:"string",child:"_alarmLineBase2",childProperty:"inactAckSymbolColor",resourceValue:["getTheme"]},alarmTwoInactAckBorderColor:{propertyType:"child",type:"string",child:"_alarmLineBase2",childProperty:"inactAckBorderColor",resourceValue:["getTheme"]},alarmThreePadding:{propertyType:"child",type:"string",child:"_alarmLineBase3",childProperty:"padding"},alarmThreeFontClass:{propertyType:"child",type:"string",child:"_alarmLineBase3",childProperty:"fontClass"},alarmThreeTextWrapping:{propertyType:"child",type:"string",child:"_alarmLineBase3",childProperty:"textWrapping"},alarmThreeIconFont:{propertyType:"child",type:"string",child:"_alarmLineBase3",childProperty:"iconFont"},alarmThreeSymbol:{propertyType:"child",type:"string",child:"_alarmLineBase3",childProperty:"symbol"},alarmThreeSymbolType:{propertyType:"child",type:"string",child:"_alarmLineBase3",childProperty:"symbolType"},alarmThreeDesiredClasses:{propertyType:"child",type:"string",child:"_alarmLineBase3",childProperty:"desiredAlarmClasses"},alarmThreeBorderWidth:{propertyType:"child",type:"string",child:"_alarmLineBase3",childProperty:"borderWidth"},alarmThreeActBackgroundColor:{propertyType:"child",type:"string",child:"_alarmLineBase3",childProperty:"actBackgroundColor",resourceValue:["getTheme"]},alarmThreeActTextColor:{propertyType:"child",type:"string",child:"_alarmLineBase3",childProperty:"actTextColor",resourceValue:["getTheme"]},alarmThreeActSymbolColor:{propertyType:"child",type:"string",child:"_alarmLineBase3",childProperty:"actSymbolColor",resourceValue:["getTheme"]},alarmThreeActBorderColor:{propertyType:"child",type:"string",child:"_alarmLineBase3",childProperty:"actBorderColor",resourceValue:["getTheme"]},alarmThreeInactBackgroundColor:{propertyType:"child",type:"string",child:"_alarmLineBase3",childProperty:"inactBackgroundColor",resourceValue:["getTheme"]},alarmThreeInactTextColor:{propertyType:"child",type:"string",child:"_alarmLineBase3",childProperty:"inactTextColor",resourceValue:["getTheme"]},alarmThreeInactSymbolColor:{propertyType:"child",type:"string",child:"_alarmLineBase3",childProperty:"inactSymbolColor",resourceValue:["getTheme"]},alarmThreeInactBorderColor:{propertyType:"child",type:"string",child:"_alarmLineBase3",childProperty:"inactBorderColor",resourceValue:["getTheme"]},alarmThreeActAckBackgroundColor:{propertyType:"child",type:"string",child:"_alarmLineBase3",childProperty:"actAckBackgroundColor",resourceValue:["getTheme"]},alarmThreeActAckTextColor:{propertyType:"child",type:"string",child:"_alarmLineBase3",childProperty:"actAckTextColor",resourceValue:["getTheme"]},alarmThreeActAckSymbolColor:{propertyType:"child",type:"string",child:"_alarmLineBase3",childProperty:"actAckSymbolColor",resourceValue:["getTheme"]},alarmThreeActAckBorderColor:{propertyType:"child",type:"string",child:"_alarmLineBase3",childProperty:"actAckBorderColor",resourceValue:["getTheme"]},alarmThreeInactAckBackgroundColor:{propertyType:"child",type:"string",child:"_alarmLineBase3",childProperty:"inactAckBackgroundColor",resourceValue:["getTheme"]},alarmThreeInactAckTextColor:{propertyType:"child",type:"string",child:"_alarmLineBase3",childProperty:"inactAckTextColor",resourceValue:["getTheme"]},alarmThreeInactAckSymbolColor:{propertyType:"child",type:"string",child:"_alarmLineBase3",childProperty:"inactAckSymbolColor",resourceValue:["getTheme"]},alarmThreeInactAckBorderColor:{propertyType:"child",type:"string",child:"_alarmLineBase3",childProperty:"inactAckBorderColor",resourceValue:["getTheme"]}};UI.AlarmLine=AlarmLine})(UI=Lenze.UI||(Lenze.UI={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var UI;(function(UI){"use strict";class DateTimePresenter extends Lenze.UI.VariableBase{constructor(element,options){super(element,options);this.properties={designerType:{propertyType:"base",type:"string",defaultValue:"Control"},dateMargin:{propertyType:"child",type:"string",child:"_dateTextBlock",childProperty:"margin"},datePadding:{propertyType:"child",type:"string",child:"_dateTextBlock",childProperty:"padding"},dateBorderWidth:{propertyType:"child",type:"string",child:"_dateTextBlock",childProperty:"borderWidth"},dateBorderStyle:{propertyType:"child",type:"string",child:"_dateTextBlock",childProperty:"borderStyle"},dateBorderRadius:{propertyType:"child",type:"string",child:"_dateTextBlock",childProperty:"borderRadius"},dateOpacity:{propertyType:"child",type:"number",child:"_dateTextBlock",childProperty:"opacity"},dateTextAlignment:{propertyType:"child",type:"string",child:"_dateTextBlock",childProperty:"textAlignment"},dateLineClamp:{propertyType:"child",type:"number",child:"_dateTextBlock",childProperty:"lineClamp"},dateFontClass:{propertyType:"child",type:"string",child:"_dateTextBlock",childProperty:"fontClass"},dateFontSize:{propertyType:"child",type:"string",child:"_dateTextBlock",childProperty:"fontSize"},dateFontWeight:{propertyType:"child",type:"string",child:"_dateTextBlock",childProperty:"fontWeight"},dateLineHeight:{propertyType:"child",type:"string",child:"_dateTextBlock",childProperty:"lineHeight"},dateTextContrast:{propertyType:"child",type:"number",child:"_dateTextBlock",childProperty:"textContrast"},dateShadow:{propertyType:"child",type:"string",child:"_dateTextBlock",childProperty:"textShadow"},dateUppercase:{propertyType:"child",type:"boolean",child:"_dateTextBlock",childProperty:"upperCase"},timeMargin:{propertyType:"child",type:"string",child:"_timeTextBlock",childProperty:"margin"},timePadding:{propertyType:"child",type:"string",child:"_timeTextBlock",childProperty:"padding"},timeBorderWidth:{propertyType:"child",type:"string",child:"_timeTextBlock",childProperty:"borderWidth"},timeBorderStyle:{propertyType:"child",type:"string",child:"_timeTextBlock",childProperty:"borderStyle"},timeBorderRadius:{propertyType:"child",type:"string",child:"_timeTextBlock",childProperty:"borderRadius"},timeOpacity:{propertyType:"child",type:"number",child:"_timeTextBlock",childProperty:"opacity"},timeTextAlignment:{propertyType:"child",type:"string",child:"_timeTextBlock",childProperty:"textAlignment"},timeLineClamp:{propertyType:"child",type:"number",child:"_timeTextBlock",childProperty:"lineClamp"},timeFontClass:{propertyType:"child",type:"string",child:"_timeTextBlock",childProperty:"fontClass"},timeFontSize:{propertyType:"child",type:"string",child:"_timeTextBlock",childProperty:"fontSize"},timeFontWeight:{propertyType:"child",type:"string",child:"_timeTextBlock",childProperty:"fontWeight"},timeLineHeight:{propertyType:"child",type:"string",child:"_timeTextBlock",childProperty:"lineHeight"},timeTextContrast:{propertyType:"child",type:"number",child:"_timeTextBlock",childProperty:"textContrast"},timeShadow:{propertyType:"child",type:"string",child:"_timeTextBlock",childProperty:"textShadow"},timeUppercase:{propertyType:"child",type:"boolean",child:"_timeTextBlock",childProperty:"upperCase"},dateLocale:{propertyType:"member",type:"string",defaultValue:"en-GB"},timeLocale:{propertyType:"member",type:"string",defaultValue:"en-GB"},displayHorizontal:{propertyType:"member",type:"boolean",defaultValue:true},dateFirst:{propertyType:"member",type:"boolean",defaultValue:true},showDate:{propertyType:"member",type:"boolean",defaultValue:true},showTime:{propertyType:"member",type:"boolean",defaultValue:true},variableName:{propertyType:"base",type:"string"},value:{propertyType:"base",type:"string"},backgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@Transparent"},dateBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@Transparent"},dateForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},dateBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"},timeBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@Transparent"},timeForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},timeBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"}};this._interval=50;this._intervalHandle=null;this.initialize(Lenze.UI.DateTimePresenter)}createTemplate(){this.element.innerHTML=`\n                <div class="lenze-datetimepresenter__label lenze-datetimepresenter__label_date" data-win-control="VisiWin.UI.TextBlock"></div>\n                <div class="lenze-datetimepresenter__label lenze-datetimepresenter__label_time" data-win-control="VisiWin.UI.TextBlock"></div>`;this._dateTextBlock=this.element.firstElementChild;this._timeTextBlock=this._dateTextBlock.nextElementSibling;return this.processElements([this._dateTextBlock,this._timeTextBlock])}afterInit(){console.warn(`'Lenze.UI.DateTimePresenter' is deprecated since Lenze library version 1.3.0 receiving no new features or bug fixes. It's recommended to replace the 'Lenze.UI.DateTimePresenter' with either the 'VisiWin.UI.DateTimeVarOut' or 'VisiWin.UI.Clock' instead.`)}_updateColors(changes){this.setColor("backgroundColor","backgroundColor");this.setColor("dateBackgroundColor","backgroundColor",undefined,"_dateTextBlock");this.setColor("dateForegroundColor","foregroundColor",undefined,"_dateTextBlock");this.setColor("dateBorderColor","borderColor",undefined,"_dateTextBlock");this.setColor("timeBackgroundColor","backgroundColor",undefined,"_timeTextBlock");this.setColor("timeForegroundColor","foregroundColor",undefined,"_timeTextBlock");this.setColor("timeBorderColor","borderColor",undefined,"_timeTextBlock")}_updateLayout(changes){let flexDirection=this.displayHorizontal?"row":"column";if(!this.dateFirst)flexDirection+="-reverse";this.element.style.flexDirection=flexDirection;this._dateTextBlock.style.display=this._getDisplay(this.showDate);this._timeTextBlock.style.display=this._getDisplay(this.showTime);if(VisiWin.Utilities.isInDesignMode()){this._updateTime(Lenze.Strings.isNullOrWhiteSpace(this.value)?"1569833834":this.value);return}if(changes.changeType==="property"&&changes.changeName==="value")this._updateTime(this.value)}async attach(){if(VisiWin.Utilities.isInDesignMode())return await super.attach();if(this._hasVariableOrValue)this._updateTime(this.value);else this._startInterval();await super.attach()}async detach(){if(VisiWin.Utilities.isInDesignMode())return await super.detach();this._stopInterval();await super.detach()}_updateTime(date=""){try{const now=!Lenze.Strings.isNullOrWhiteSpace(date)?new Date(date):new Date;const currentDate=now.toLocaleDateString(this.dateLocale);const currentTime=now.toLocaleTimeString(this.timeLocale);this._dateTextBlock.winControl.text=currentDate;this._timeTextBlock.winControl.text=currentTime}catch(error){this._handleIncorrectDate(date)}}_handleIncorrectDate(date){console.error(`The value is not in a valid format!`,date);this._dateTextBlock.winControl.text="Invalid date";this._timeTextBlock.winControl.text="Invalid time"}_getDisplay(value){return value?"block":"none"}get _isTimerRunning(){return this._intervalHandle!=null}get _hasVariableOrValue(){return!Lenze.Strings.isNullOrWhiteSpace(this.variableName)||this.value!=null}_startInterval(){if(this._isTimerRunning)return;this._updateTime();this._intervalHandle=setInterval(()=>this._updateTime(),this._interval)}_stopInterval(){if(!this._isTimerRunning)return;clearInterval(this._intervalHandle);this._intervalHandle=null}}UI.DateTimePresenter=DateTimePresenter})(UI=Lenze.UI||(Lenze.UI={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var UI;(function(UI){"use strict";class LanguageSelector extends Lenze.UI.ControlBase{constructor(element,options){super(element,options);this.properties={designerType:{propertyType:"base",type:"string",defaultValue:"Control"},menuWidth:{propertyType:"child",type:"string",child:"_dropDownBox"},menuHeight:{propertyType:"child",type:"string",child:"_dropDownBox"},menuMargin:{propertyType:"child",type:"string",child:"_dropDownBox"},menuPadding:{propertyType:"child",type:"string",child:"_dropDownBox"},menuBorderWidth:{propertyType:"child",type:"string",child:"_dropDownBox"},menuBorderStyle:{propertyType:"child",type:"string",child:"_dropDownBox"},menuBorderRadius:{propertyType:"child",type:"string",child:"_dropDownBox"},menuShadow:{propertyType:"child",type:"string",child:"_dropDownBox"},menuPlacement:{propertyType:"child",type:"string",child:"_dropDownBox"},menuItemsLocalTextList:{propertyType:"member",type:"string",defaultValue:"@[ServerApplication].Languages.en-US"},inputContainerWidth:{propertyType:"child",type:"string",child:"_dropDownBox"},InputContainerHeight:{propertyType:"child",type:"string",child:"_dropDownBox"},inputContainerMargin:{propertyType:"child",type:"string",child:"_dropDownBox"},inputContainerPadding:{propertyType:"child",type:"string",child:"_dropDownBox"},inputBorderWidth:{propertyType:"child",type:"string",child:"_dropDownBox"},inputBorderStyle:{propertyType:"child",type:"string",child:"_dropDownBox"},inputBorderRadius:{propertyType:"child",type:"string",child:"_dropDownBox"},inputWidth:{propertyType:"child",type:"string",child:"_dropDownBox"},inputHeight:{propertyType:"child",type:"string",child:"_dropDownBox"},inputMargin:{propertyType:"child",type:"string",child:"_dropDownBox"},inputPadding:{propertyType:"child",type:"string",child:"_dropDownBox"},inputText:{propertyType:"child",type:"string",child:"_dropDownBox"},localizableInputText:{propertyType:"child",type:"string",child:"_dropDownBox"},inputTextAlignment:{propertyType:"child",type:"string",child:"_dropDownBox"},inputLineClamp:{propertyType:"child",type:"number",child:"_dropDownBox"},inputTextWrapping:{propertyType:"child",type:"string",child:"_dropDownBox"},inputTextTrimming:{propertyType:"child",type:"string",child:"_dropDownBox"},inputFontClass:{propertyType:"child",type:"string",child:"_dropDownBox"},inputFontSize:{propertyType:"child",type:"string",child:"_dropDownBox"},inputFontWeight:{propertyType:"child",type:"string",child:"_dropDownBox"},inputLineHeight:{propertyType:"child",type:"string",child:"_dropDownBox"},inputTextContrast:{propertyType:"child",type:"number",child:"_dropDownBox"},inputUppercase:{propertyType:"child",type:"boolean",child:"_dropDownBox"},outlined:{propertyType:"child",type:"boolean",child:"_dropDownBox"},inputFieldMargin:{propertyType:"child",type:"string",child:"_dropDownBox"},showSymbol:{propertyType:"child",type:"boolean",child:"_dropDownBox"},iconFont:{propertyType:"child",type:"string",child:"_dropDownBox"},symbol:{propertyType:"child",type:"string",child:"_dropDownBox"},symbolType:{propertyType:"child",type:"string",child:"_dropDownBox"},symbolSize:{propertyType:"child",type:"string",child:"_dropDownBox"},symbolMargin:{propertyType:"child",type:"string",child:"_dropDownBox"},symbolPosition:{propertyType:"child",type:"string",child:"_dropDownBox"},labelContainerWidth:{propertyType:"child",type:"string",child:"_dropDownBox"},labelContainerHeight:{propertyType:"child",type:"string",child:"_dropDownBox"},labelContainerMargin:{propertyType:"child",type:"string",child:"_dropDownBox"},labelContainerPadding:{propertyType:"child",type:"string",child:"_dropDownBox"},showLabel:{propertyType:"child",type:"boolean",child:"_dropDownBox"},labelWidth:{propertyType:"child",type:"string",child:"_dropDownBox"},labelHeight:{propertyType:"child",type:"string",child:"_dropDownBox"},labelMargin:{propertyType:"child",type:"string",child:"_dropDownBox"},labelPadding:{propertyType:"child",type:"string",child:"_dropDownBox"},labelText:{propertyType:"child",type:"string",child:"_dropDownBox",defaultValue:"Language"},localizableLabelText:{propertyType:"child",type:"string",child:"_dropDownBox"},labelTextAlignment:{propertyType:"child",type:"string",child:"_dropDownBox"},labelLineClamp:{propertyType:"child",type:"number",child:"_dropDownBox"},labelTextWrapping:{propertyType:"child",type:"string",child:"_dropDownBox"},labelTextTrimming:{propertyType:"child",type:"string",child:"_dropDownBox"},labelFontClass:{propertyType:"child",type:"string",child:"_dropDownBox"},labelFontSize:{propertyType:"child",type:"string",child:"_dropDownBox",defaultValue:"14px"},labelFontWeight:{propertyType:"child",type:"string",child:"_dropDownBox"},labelLineHeight:{propertyType:"child",type:"string",child:"_dropDownBox"},labelTextContrast:{propertyType:"child",type:"number",child:"_dropDownBox"},labelUppercase:{propertyType:"child",type:"boolean",child:"_dropDownBox"},labelPosition:{propertyType:"child",type:"string",child:"_dropDownBox"},showLeadingSymbol:{propertyType:"child",type:"boolean",child:"_dropDownBox",defaultValue:true},leadingIconFont:{propertyType:"child",type:"string",child:"_dropDownBox"},leadingSymbol:{propertyType:"child",type:"string",child:"_dropDownBox"},leadingSymbolType:{propertyType:"child",type:"string",child:"_dropDownBox"},leadingSymbolSize:{propertyType:"child",type:"string",child:"_dropDownBox"},leadingSymbolMargin:{propertyType:"child",type:"string",child:"_dropDownBox"},showFloatingLabel:{propertyType:"child",type:"boolean",child:"_dropDownBox"},floatingLabelWidth:{propertyType:"child",type:"string",child:"_dropDownBox"},floatingLabelHeight:{propertyType:"child",type:"string",child:"_dropDownBox"},floatingLabelMargin:{propertyType:"child",type:"string",child:"_dropDownBox"},floatingLabelPadding:{propertyType:"child",type:"string",child:"_dropDownBox"},floatingLabelText:{propertyType:"child",type:"string",child:"_dropDownBox",defaultValue:"Language"},localizableFloatingLabelText:{propertyType:"child",type:"string",child:"_dropDownBox"},floatingLabelTextAlignment:{propertyType:"child",type:"string",child:"_dropDownBox"},floatingLabelLineClamp:{propertyType:"child",type:"number",child:"_dropDownBox"},floatingLabelTextWrapping:{propertyType:"child",type:"string",child:"_dropDownBox"},floatingLabelTextTrimming:{propertyType:"child",type:"string",child:"_dropDownBox"},floatingLabelFontClass:{propertyType:"child",type:"string",child:"_dropDownBox"},floatingLabelFontSize:{propertyType:"child",type:"string",child:"_dropDownBox",defaultValue:"14px"},floatingLabelFontWeight:{propertyType:"child",type:"string",child:"_dropDownBox"},floatingLabelLineHeight:{propertyType:"child",type:"string",child:"_dropDownBox"},floatingLabelTextContrast:{propertyType:"child",type:"number",child:"_dropDownBox"},floatingLabelUppercase:{propertyType:"child",type:"boolean",child:"_dropDownBox"},floatingLabelTransition:{propertyType:"child",type:"string",child:"_dropDownBox"},floatingLabelOutlineWidth:{propertyType:"child",type:"string",child:"_dropDownBox"},floatingLabelOutlineStyle:{propertyType:"child",type:"string",child:"_dropDownBox"},showTrailingSymbol:{propertyType:"child",type:"boolean",child:"_dropDownBox"},trailingIconFont:{propertyType:"child",type:"string",child:"_dropDownBox"},trailingSymbol:{propertyType:"child",type:"string",child:"_dropDownBox"},trailingSymbolType:{propertyType:"child",type:"string",child:"_dropDownBox"},trailingSymbolSize:{propertyType:"child",type:"string",child:"_dropDownBox"},trailingSymbolMargin:{propertyType:"child",type:"string",child:"_dropDownBox"},showUnderline:{propertyType:"child",type:"boolean",child:"_dropDownBox"},underlineHeight:{propertyType:"child",type:"string",child:"_dropDownBox"},underlineTransition:{propertyType:"child",type:"string",child:"_dropDownBox"},authorizationMode:{propertyType:"child",type:"string",child:"_dropDownBox"},authorizationRight:{propertyType:"child",type:"string",child:"_dropDownBox"},hover:{propertyType:"child",type:"boolean",child:"_dropDownBox"},checked:{propertyType:"child",type:"boolean",child:"_dropDownBox"},open:{propertyType:"child",type:"boolean",child:"_dropDownBox"},languageFilter:{propertyType:"member",type:"string",defaultValue:""},backgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@Transparent"},borderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"},menuBackgroundColor:{propertyType:"child",child:"_dropDownBox",type:"string",resourceValue:["getTheme"]},menuBorderColor:{propertyType:"child",child:"_dropDownBox",type:"string",resourceValue:["getTheme"]},dropDownBoxBackgroundColor:{propertyType:"child",child:"_dropDownBox",childProperty:"backgroundColor",type:"string",resourceValue:["getTheme"],defaultValue:"@Transparent"},inputBackgroundColor:{propertyType:"child",child:"_dropDownBox",type:"string",resourceValue:["getTheme"]},hoverInputBackgroundColor:{propertyType:"child",child:"_dropDownBox",type:"string",resourceValue:["getTheme"]},checkedInputBackgroundColor:{propertyType:"child",child:"_dropDownBox",type:"string",resourceValue:["getTheme"]},floatingLabelBackgroundColor:{propertyType:"child",child:"_dropDownBox",type:"string",resourceValue:["getTheme"]},underlineColor:{propertyType:"child",child:"_dropDownBox",type:"string",resourceValue:["getTheme"]},checkedUnderlineColor:{propertyType:"child",child:"_dropDownBox",type:"string",resourceValue:["getTheme"]},symbolForegroundColor:{propertyType:"child",child:"_dropDownBox",type:"string",resourceValue:["getTheme"]},labelForegroundColor:{propertyType:"child",child:"_dropDownBox",type:"string",resourceValue:["getTheme"]},inputForegroundColor:{propertyType:"child",child:"_dropDownBox",type:"string",resourceValue:["getTheme"]},leadingSymbolForegroundColor:{propertyType:"child",child:"_dropDownBox",type:"string",resourceValue:["getTheme"]},floatingLabelForegroundColor:{propertyType:"child",child:"_dropDownBox",type:"string",resourceValue:["getTheme"]},checkedFloatingLabelForegroundColor:{propertyType:"child",child:"_dropDownBox",type:"string",resourceValue:["getTheme"]},trailingSymbolForegroundColor:{propertyType:"child",child:"_dropDownBox",type:"string",resourceValue:["getTheme"]},dropDownBoxBorderColor:{propertyType:"child",child:"_dropDownBox",childProperty:"borderColor",type:"string",resourceValue:["getTheme"]},inputBorderColor:{propertyType:"child",child:"_dropDownBox",type:"string",resourceValue:["getTheme"]},hoverInputBorderColor:{propertyType:"child",child:"_dropDownBox",type:"string",resourceValue:["getTheme"]},checkedInputBorderColor:{propertyType:"child",child:"_dropDownBox",type:"string",resourceValue:["getTheme"]},floatingLabelOutlineColor:{propertyType:"child",child:"_dropDownBox",type:"string",resourceValue:["getTheme"]},disabledBackgroundColor:{propertyType:"child",child:"_dropDownBox",type:"string",resourceValue:["getTheme"]},disabledForegroundColor:{propertyType:"child",child:"_dropDownBox",type:"string",resourceValue:["getTheme"]},disabledBorderColor:{propertyType:"child",child:"_dropDownBox",type:"string",resourceValue:["getTheme"]},disabledFloatingLabelOutlineColor:{propertyType:"child",child:"_dropDownBox",type:"string",resourceValue:["getTheme"]}};this._isUpdatingLanguage=false;this._lcidToIETF={4:"zh-CHS",1025:"ar-SA",1026:"bg-BG",1027:"ca-ES",1028:"zh-TW",1029:"cs-CZ",1030:"da-DK",1031:"de-DE",1032:"el-GR",1033:"en-US",1034:"es-ES",1035:"fi-FI",1036:"fr-FR",1037:"he-IL",1038:"hu-HU",1039:"is-IS",1040:"it-IT",1041:"ja-JP",1042:"ko-KR",1043:"nl-NL",1044:"nb-NO",1045:"pl-PL",1046:"pt-BR",1047:"rm-CH",1048:"ro-RO",1049:"ru-RU",1050:"hr-HR",1051:"sk-SK",1052:"sq-AL",1053:"sv-SE",1054:"th-TH",1055:"tr-TR",1056:"ur-PK",1057:"id-ID",1058:"uk-UA",1059:"be-BY",1060:"sl-SI",1061:"et-EE",1062:"lv-LV",1063:"lt-LT",1064:"tg-TJ",1065:"fa-IR",1066:"vi-VN",1067:"hy-AM",1069:"eu-ES",1070:"wen-DE",1071:"mk-MK",1074:"tn-ZA",1076:"xh-ZA",1077:"zu-ZA",1078:"af-ZA",1079:"ka-GE",1080:"fo-FO",1081:"hi-IN",1082:"mt-MT",1083:"se-NO",1086:"ms-MY",1087:"kk-KZ",1088:"ky-KG",1089:"sw-KE",1090:"tk-TM",1092:"tt-RU",1093:"bn-IN",1094:"pa-IN",1095:"gu-IN",1096:"or-IN",1097:"ta-IN",1098:"te-IN",1099:"kn-IN",1100:"ml-IN",1101:"as-IN",1102:"mr-IN",1103:"sa-IN",1104:"mn-MN",1105:"bo-CN",1106:"cy-GB",1107:"kh-KH",1108:"lo-LA",1109:"my-MM",1110:"gl-ES",1111:"kok-IN",1114:"syr-SY",1115:"si-LK",1118:"am-ET",1121:"ne-NP",1122:"fy-NL",1123:"ps-AF",1124:"fil-PH",1125:"div-MV",1128:"ha-NG",1130:"yo-NG",1131:"quz-BO",1132:"ns-ZA",1133:"ba-RU",1134:"lb-LU",1135:"kl-GL",1144:"ii-CN",1146:"arn-CL",1148:"moh-CA",1150:"br-FR",1152:"ug-CN",1153:"mi-NZ",1154:"oc-FR",1155:"co-FR",1156:"gsw-FR",1157:"sah-RU",1158:"qut-GT",1159:"rw-RW",1160:"wo-SN",1164:"gbz-AF",2049:"ar-IQ",2052:"zh-CN",2055:"de-CH",2057:"en-GB",2058:"es-MX",2060:"fr-BE",2064:"it-CH",2067:"nl-BE",2068:"nn-NO",2070:"pt-PT",2077:"sv-FI",2080:"ur-IN",2092:"az-AZ",2094:"dsb-DE",2107:"se-SE",2108:"ga-IE",2110:"ms-BN",2115:"uz-UZ",2128:"mn-CN",2129:"bo-BT",2141:"iu-CA",2143:"tmz-DZ",2155:"quz-EC",3073:"ar-EG",3076:"zh-HK",3079:"de-AT",3081:"en-AU",3082:"es-ES",3084:"fr-CA",3098:"sr-SP",3131:"se-FI",3179:"quz-PE",4097:"ar-LY",4100:"zh-SG",4103:"de-LU",4105:"en-CA",4106:"es-GT",4108:"fr-CH",4122:"hr-BA",4155:"smj-NO",5121:"ar-DZ",5124:"zh-MO",5127:"de-LI",5129:"en-NZ",5130:"es-CR",5132:"fr-LU",5179:"smj-SE",6145:"ar-MA",6153:"en-IE",6154:"es-PA",6156:"fr-MC",6203:"sma-NO",7169:"ar-TN",7177:"en-ZA",7178:"es-DO",7194:"sr-BA",7227:"sma-SE",8193:"ar-OM",8201:"en-JA",8202:"es-VE",8218:"bs-BA",8251:"sms-FI",9217:"ar-YE",9225:"en-CB",9226:"es-CO",9242:"sr-Latn-RS",9275:"smn-FI",10241:"ar-SY",10249:"en-BZ",10250:"es-PE",10266:"sr-Cyrl-RS",11265:"ar-JO",11273:"en-TT",11274:"es-AR",12289:"ar-LB",12297:"en-ZW",12298:"es-EC",13313:"ar-KW",13321:"en-PH",13322:"es-CL",14337:"ar-AE",14346:"es-UR",15361:"ar-BH",15370:"es-PY",16385:"ar-QA",16394:"es-BO",17417:"en-MY",17418:"es-SV",18441:"en-IN",18442:"es-HN",19466:"es-NI",20490:"es-PR",21514:"es-US",31748:"zh-CHT"};this.initialize(Lenze.UI.LanguageSelector)}async createTemplate(){this.element.innerHTML=`<div class="lenze-languageselector__dropdownbox" data-win-control="VisiWin.UI.DropDownBox" data-win-options="{designerType:'Child'}"></div>`;this._dropDownBox=this.element.firstElementChild;const languageService=VisiWin.System.Language.LanguageService.getService();if(languageService==null){console.error("Language service could not be retrieved in Lenze.UI.LanguageSelector...");return this.processElements([])}if(VisiWin.Utilities.isInDesignMode())return this.processElements([this._dropDownBox]);const languages=await languageService.GetServerProjectLanguagesAsync();this._allLanguages=[];this._languages=[];this._dropDownBoxItems=[];for(let language of languages){const locale=this._lcidToIETF[language.LCID];this._allLanguages.push(locale);this._languages.push(locale);const itemOptions={text:language.CultureDisplayName,showSymbol:true,symbolType:"Svg",symbol:`images/svgs/flags/${locale}.svg`};const languageElement=document.createElement("div");languageElement.setAttribute("data-win-control","VisiWin.UI.DropDownBoxItem");languageElement.setAttribute("data-win-options",JSON.stringify(itemOptions));languageElement.classList.add("lenze-languageselector__dropdownbox-child");this._dropDownBox.appendChild(languageElement);this._dropDownBoxItems.push(languageElement)}return this.processElements([this._dropDownBox])}_updateColors(changes){this.setColor("backgroundColor");this.setColor("borderColor")}afterInit(){var _a,_b;if(VisiWin.Utilities.isInDesignMode()){this._dropDownBox.winControl.inputText="English";this._dropDownBox.winControl.leadingSymbol="images/svgs/flags/en-US.svg";this._dropDownBox.winControl.showLeadingSymbol=true;this._dropDownBox.winControl.leadingSymbolType="SVG";return}const textList=(_a=this.menuItemsLocalTextList)===null||_a===void 0?void 0:_a.substring(0,this.menuItemsLocalTextList.lastIndexOf("."));if(!Lenze.Strings.isNullOrWhiteSpace(textList)&&this._allLanguages!=null)for(let i=0;i<this._allLanguages.length;i++)this._dropDownBoxItems[i].winControl.localizableText=`${textList}.${this._allLanguages[i]}`;const languageFilter=Lenze.Strings.isNullOrWhiteSpace(this.languageFilter)?[]:this.languageFilter.split(",").map(x=>x.trim());if(languageFilter.length>0){for(var i=this._languages.length-1;i>=0;i--){if(languageFilter.includes(this._languages[i]))continue;const languageElement=this._dropDownBoxItems[i];(_b=languageElement.parentElement)===null||_b===void 0?void 0:_b.removeChild(languageElement);this._dropDownBoxItems.splice(i,1);this._languages.splice(i,1)}}this._updateSelectedLanguage()}async attach(){if(!VisiWin.Utilities.isInDesignMode())this._updateSelectedLanguage();await super.attach()}createHandler(){if(VisiWin.Utilities.isInDesignMode())return;this._selectedLanguageChangedHandler=this._onSelectedLanguageChanged.bind(this);this._currentLanguageChangedHandler=this._onCurrentLanguageChanged.bind(this);this._dropDownBox.winControl.addEventListener("selectedIndexChanged",this._selectedLanguageChangedHandler);this.locService.addEventListener("languageChanged",this._currentLanguageChangedHandler)}dispose(){if(VisiWin.Utilities.isInDesignMode())return super.dispose();this._dropDownBox.winControl.removeEventListener("selectedIndexChanged",this._selectedLanguageChangedHandler);this.locService.removeEventListener("languageChanged",this._currentLanguageChangedHandler);return super.dispose()}async _updateLanguageAsync(locale){if(this._isCurrentLanguage(locale))return;await this.locService.changeLanguageAsync(locale)}_isCurrentLanguage(locale){return locale===this.locService.CurrentLanguage.locale}_updateSelectedLanguage(){if(this._allLanguages==null)return;for(let i=0;i<this._allLanguages.length;i++){if(!this._isCurrentLanguage(this._allLanguages[i]))continue;this._dropDownBox.winControl.selectedIndex=i;break}}_writeLanguageToCache(tag){if(Lenze.Strings.isNullOrWhiteSpace(tag)){console.error(`IETF tag not found. The new language will not be written to the cache, meaning at reboot the previous cache written language will be used instead.`);return}localStorage[`${VisiWin.Application.storageName}${VisiWin.Utilities.isInDesignMode()?"Design":"Run"}timeLanguage`]=tag}async _onSelectedLanguageChanged(){if(this._isUpdatingLanguage)return;this._isUpdatingLanguage=true;const newLanguage=this._allLanguages[this._dropDownBox.winControl.selectedIndex];await this._updateLanguageAsync(newLanguage);this._writeLanguageToCache(this.locService.CurrentLanguage.locale);this._isUpdatingLanguage=false}_onCurrentLanguageChanged(){if(this._isUpdatingLanguage||this._isCurrentLanguage(this._allLanguages[this._dropDownBox.winControl.selectedIndex]))return;this._isUpdatingLanguage=true;for(let i=0;i<this._allLanguages.length;i++){if(!this._isCurrentLanguage(this._allLanguages[i]))continue;this._dropDownBox.winControl.selectedIndex=i;break}this._isUpdatingLanguage=false}}UI.LanguageSelector=LanguageSelector})(UI=Lenze.UI||(Lenze.UI={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var UI;(function(UI){"use strict";class LimitControl extends Lenze.UI.VariableBase{constructor(element,options){super(element,options);this.properties={designerType:{propertyType:"base",type:"string",defaultValue:"Control"},inputHeight:{propertyType:"member",type:"string",defaultValue:"auto"},inputWidth:{propertyType:"member",type:"string",defaultValue:"auto"},fontClass:{propertyType:"member",type:"string",defaultValue:"label1"},fontSize:{propertyType:"member",type:"string"},fontWeight:{propertyType:"member",type:"string"},showUnit:{propertyType:"member",type:"boolean",defaultValue:true},localizableUnitText:{propertyType:"member",type:"string"},isLimitCheckEnabled:{propertyType:"member",type:"boolean",defaultValue:true},limitWidth:{propertyType:"member",type:"string",defaultValue:"50px"},limitMin:{propertyType:"member",type:"number"},limitMinVariableName:{propertyType:"member",type:"string"},limitMax:{propertyType:"member",type:"number"},limitMaxVariableName:{propertyType:"member",type:"string"},variableName:{propertyType:"base",type:"string"},decimalPlaces:{propertyType:"base",type:"number"},backgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@Transparent"},foregroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},varInBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"},varInBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BackgroundColor"}};this._minElement=null;this._varInElement=null;this._varInCoreElement=null;this._maxElement=null;this._limitMinVariable=null;this._limitMaxVariable=null;this.initialize(Lenze.UI.LimitControl)}async afterInit(){const boundEventHandler=this._onVariableChange.bind(this);this._limitMinEventHander=boundEventHandler;this._limitMaxEventHander=boundEventHandler;this._setBasePropertiesVarIn();this._setBasePropertiesLimit(this._minElement);this._setBasePropertiesLimit(this._maxElement);if(VisiWin.Utilities.isInDesignMode())return;this._variableService=VisiWin.System.DataAccess.VariableService.getService();this._varInElement.winControl.variableName=this.variableName;this._varInElement.winControl.decimalPlaces=this.decimalPlaces;this._limitMinVariable=await this._getVariable(this.limitMinVariableName);this._limitMaxVariable=await this._getVariable(this.limitMaxVariableName)}createTemplate(){this.element.innerHTML=`\n                <div class="lenze-limitcontrol__min lenze-limitcontrol__limit" data-win-control="VisiWin.UI.TextBlock"></div>\n                <div class="lenze-limitcontrol__varin" data-win-control="VisiWin.UI.NumericVarIn"></div>\n                <div class="lenze-limitcontrol__max lenze-limitcontrol__limit" data-win-control="VisiWin.UI.TextBlock"></div>\n            `;this._minElement=this.element.firstElementChild;this._varInElement=this._minElement.nextElementSibling;this._maxElement=this._varInElement.nextElementSibling;return this.processElements([this._minElement,this._varInElement,this._maxElement])}_updateColors(changes){this.setColor("backgroundColor");this.setColor("backgroundColor","backgroundColor",undefined,"_minElement");this.setColor("backgroundColor","backgroundColor",undefined,"_maxElement");this.setColor("backgroundColor","backgroundColor",undefined,"_varInElement");this.setColor("foregroundColor");this.setColor("foregroundColor","foregroundColor",undefined,"_minElement");this.setColor("foregroundColor","foregroundColor",undefined,"_maxElement");this.setColor("foregroundColor","inputForegroundColor",undefined,"_varInElement");this.setColor("foregroundColor","unitForegroundColor",undefined,"_varInElement");this.setColor("varInBorderColor","inputBorderColor",undefined,"_varInElement");this.setColor("varInBackgroundColor","inputBackgroundColor",undefined,"_varInElement")}async _updateLayout(changes){const limitMin=this._getLimit(this._limitMinVariable,this.limitMin);const limitMax=this._getLimit(this._limitMaxVariable,this.limitMax);this._setLimitOnLabel(this._minElement,limitMin,this.limitMinVariableName);this._setLimitOnLabel(this._maxElement,limitMax,this.limitMaxVariableName);this._setFontProperties(this._minElement);this._minElement.style.width=this.limitWidth;this._setFontProperties(this._maxElement);this._maxElement.style.width=this.limitWidth;this._varInElement.winControl.inputFontClass=this.fontClass;this._varInElement.winControl.inputFontWeight=this.fontWeight;this._varInElement.winControl.inputFontSize=this.fontSize;this._varInElement.winControl.unitFontClass=this.fontClass;this._varInElement.winControl.unitFontWeight=this.fontWeight;this._varInElement.winControl.unitFontSize=this.fontSize;this._varInElement.winControl.inputHeight=this.inputHeight;this._varInElement.winControl.width=this.inputWidth;this._varInElement.winControl.showUnit=this.showUnit;this._varInElement.winControl.localizableUnitText=this.localizableUnitText;if(VisiWin.Utilities.isInDesignMode())return;this._varInElement.winControl.isLimitCheckEnabled=this.isLimitCheckEnabled;this._varInElement.winControl.rawLimitMin=limitMin;this._varInElement.winControl.rawLimitMax=limitMax;if(this.isLimitCheckEnabled)this._showIsValueValid()}async attach(){var _a,_b;if(VisiWin.Utilities.isInDesignMode())return await super.attach();(_a=this._limitMinVariable)===null||_a===void 0?void 0:_a.Change.add(this._limitMinEventHander);(_b=this._limitMaxVariable)===null||_b===void 0?void 0:_b.Change.add(this._limitMaxEventHander);await super.attach()}async detach(){var _a,_b;if(VisiWin.Utilities.isInDesignMode())return await super.detach();(_a=this._limitMinVariable)===null||_a===void 0?void 0:_a.Change.remove(this._limitMinEventHander);(_b=this._limitMaxVariable)===null||_b===void 0?void 0:_b.Change.remove(this._limitMaxEventHander);await super.detach()}_setFontProperties(element){element.winControl.fontClass=this.fontClass;element.winControl.fontWeight=this.fontWeight;element.winControl.fontSize=this.fontSize}async _getVariable(variableName){if(!variableName)return null;const variable=this._variableService.GetVariable(variableName);if(variable.IsAttached)return variable;const result=await variable.AttachAsync();if(!result){console.error(`Failed to attach variable with name: ${variableName}`);return null}return variable}_onVariableChange(args){this._updateLayout(null)}_setLimitOnLabel(element,limit,variableName=null){if(!this.isLimitCheckEnabled)element.winControl.text="-";if(VisiWin.Utilities.isInDesignMode()){element.winControl.text=variableName!=null?"Var":limit;return}element.winControl.text=limit}_getLimit(variable,limit){return variable!=null?variable.Value:limit}_setBasePropertiesVarIn(){this._varInElement.winControl.showLabel=false;this._varInElement.winControl.height="auto";this._varInElement.winControl.isLimitCheckEnabled=false;this._varInElement.winControl.useVariableUnitText=false}_setBasePropertiesLimit(limitElement){limitElement.winControl.textAlignment="Center";if(VisiWin.Utilities.isInDesignMode())return}_showIsValueValid(){if(this._varInCoreElement==null)this._varInCoreElement=this._varInElement.winControl._inputElement.winControl;this._varInCoreElement._onVariableValueChanged.call(this._varInCoreElement,null,null)}}UI.LimitControl=LimitControl})(UI=Lenze.UI||(Lenze.UI={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var UI;(function(UI){"use strict";class VirtualKeyboardDialog extends Lenze.UI.ControlBase{get _getKeyboardType(){var _a;return((_a=this._varIn)===null||_a===void 0?void 0:_a.controlName)==="NumericVarIn"?Lenze.Models.KeyboardTypeEnum.Numeric:Lenze.Models.KeyboardTypeEnum.Alphabetical}constructor(element,options){super(element,options);this.properties={designerType:{propertyType:"base",type:"string",defaultValue:"Control"},openWithEmptyValue:{propertyType:"member",type:"boolean",defaultValue:true},headerLabelName:{propertyType:"member",type:"string"},varInName:{propertyType:"member",type:"string"},varOutName:{propertyType:"member",type:"string"},minLimitLabelName:{propertyType:"member",type:"string"},minLimitLayoutName:{propertyType:"member",type:"string"},maxLimitLabelName:{propertyType:"member",type:"string"},maxLimitLayoutName:{propertyType:"member",type:"string"},keyboardName:{propertyType:"member",type:"string"}};this._headerLabel=null;this._varIn=null;this._varOut=null;this._minLimitLabel=null;this._minLimitLayout=null;this._maxLimitLabel=null;this._maxLimitLayout=null;this._virtualKeyboard=null;this._variableService=null;this._inputId="";this._dialogInformation=null;this._minLimitVariable=null;this._maxLimitVariable=null;this.initialize(Lenze.UI.VirtualKeyboardDialog)}createTemplate(){this.element.innerHTML="";return this.initializeChilds()}createHandler(){if(VisiWin.Utilities.isInDesignMode())return;this._keyboardService=VisiWin.AppServices.LenzeKeyboardService;this._dialogService=VisiWin.AppServices.LenzeDialogService;this._variableService=VisiWin.System.DataAccess.VariableService.getService();this._keyboardEnterHandler=this._onKeyboardEnter.bind(this);this._limitVariableChangeHandler=this._onLimitVariableChange.bind(this)}dispose(){var _a;if(VisiWin.Utilities.isInDesignMode())return super.dispose();(_a=this._virtualKeyboard)===null||_a===void 0?void 0:_a.removeEventListener(UI.VirtualKeyboard.enterKeyEventName,this._keyboardEnterHandler);this._resetLimitVariable(this._minLimitVariable);this._resetLimitVariable(this._maxLimitVariable);return super.dispose()}_updateLayout(changes){var _a;if(changes.changeType!=="lifeCycle"||changes.changeName!=="initialized")return;this._retrieveAndSetControls();if(!VisiWin.Utilities.isInDesignMode()){(_a=this._virtualKeyboard)===null||_a===void 0?void 0:_a.addEventListener(UI.VirtualKeyboard.enterKeyEventName,this._keyboardEnterHandler);this._makeVarInActive();return}if(this._headerLabel)this._headerLabel.text="Variable Loc Name";if(this._varIn)this._varIn.value=this._getKeyboardType==Lenze.Models.KeyboardTypeEnum.Alphabetical?"Text Value":"Numeric Value";if(this._varOut)this._varOut.value=this._getKeyboardType==Lenze.Models.KeyboardTypeEnum.Alphabetical?"Text Value":"Numeric Value";if(this._minLimitLabel)this._minLimitLabel.text="5";if(this._maxLimitLabel)this._maxLimitLabel.text="100"}_retrieveAndSetControls(){this._headerLabel=Lenze.Dom.getControl(this.headerLabelName,[Lenze.Controls.getType(VisiWin.UI.Label),Lenze.Controls.getType(VisiWin.UI.TextBlock)]);this._varIn=Lenze.Dom.getControl(this.varInName,[Lenze.Controls.getType(VisiWin.UI.NumericVarIn),Lenze.Controls.getType(VisiWin.UI.TextVarIn)]);this._varOut=Lenze.Dom.getControl(this.varOutName,[Lenze.Controls.getType(VisiWin.UI.NumericVarOut),Lenze.Controls.getType(VisiWin.UI.TextVarOut)]);this._minLimitLabel=Lenze.Dom.getControl(this.minLimitLabelName,[Lenze.Controls.getType(VisiWin.UI.Label),Lenze.Controls.getType(VisiWin.UI.TextBlock)]);this._minLimitLayout=Lenze.Dom.getControl(this.minLimitLayoutName,[Lenze.Controls.getType(VisiWin.UI.FlexLayout),Lenze.Controls.getType(VisiWin.UI.AbsoluteLayout)]);this._maxLimitLabel=Lenze.Dom.getControl(this.maxLimitLabelName,[Lenze.Controls.getType(VisiWin.UI.Label),Lenze.Controls.getType(VisiWin.UI.TextBlock)]);this._maxLimitLayout=Lenze.Dom.getControl(this.maxLimitLayoutName,[Lenze.Controls.getType(VisiWin.UI.FlexLayout),Lenze.Controls.getType(VisiWin.UI.AbsoluteLayout)]);this._virtualKeyboard=Lenze.Dom.getControl(this.keyboardName,Lenze.Controls.getType(Lenze.UI.VirtualKeyboard))}_makeVarInActive(){this._dialogInformation=this._keyboardService.getDialogInformation;if(this._varIn==null||this._virtualKeyboard==null||this._dialogInformation==null)return;this._resetLimitVariable(this._minLimitVariable);this._resetLimitVariable(this._maxLimitVariable);this._inputId=this._keyboardService.generateRandomId();this._virtualKeyboard.registerInputElement({inputElement:this._varIn,id:this._inputId,keyboardType:this._dialogInformation.keyboardType});const keyboardNumeric=this._dialogInformation.keyboardType===Lenze.Models.KeyboardTypeEnum.Numeric;const value=!this.openWithEmptyValue?this._dialogInformation.value:keyboardNumeric?"0":"";const castedVarIn=this._varIn;this._varIn.decimalPlaces=this._dialogInformation.decimalPlaces;this._varIn.value=value;this._varIn.element.style.pointerEvents="none";this._varIn.element.style.cursor="not-allowed";castedVarIn.isLimitCheckEnabled=this._dialogInformation.limitCheckEnabled;castedVarIn.limitMinErrorText=this._dialogInformation.limitMinText;castedVarIn.localizableLimitMinErrorText=!this._dialogInformation.light?this._dialogInformation.limitMinLocalText:"";castedVarIn.limitMaxErrorText=this._dialogInformation.limitMaxText;castedVarIn.localizableLimitMaxErrorText=!this._dialogInformation.light?this._dialogInformation.limitMaxLocalText:"";this._varIn._inputElement.tabIndex=-1;if(!keyboardNumeric)castedVarIn.inputType=this._dialogInformation.inputType;if(this._dialogInformation.limitCheckEnabled&&!Lenze.Strings.isNullOrWhiteSpace(this._dialogInformation.limitMinVariableName))this._minLimitVariable=this._getLimitVariable(this._dialogInformation.limitMinVariableName);if(this._dialogInformation.limitCheckEnabled&&!Lenze.Strings.isNullOrWhiteSpace(this._dialogInformation.limitMaxVariableName))this._maxLimitVariable=this._getLimitVariable(this._dialogInformation.limitMaxVariableName);this._virtualKeyboard.setActiveInputElement(this._inputId);this._setLimits();if(this._headerLabel!=null){this._headerLabel.text=this._dialogInformation.headerText;this._headerLabel.localizableText=!this._dialogInformation.light?this._dialogInformation.headerLocalizableText:""}if(this._varOut!=null){this._varOut.decimalPlaces=this._dialogInformation.decimalPlaces;this._varOut.value=!Lenze.Strings.isNullOrWhiteSpace(this._dialogInformation.inputType)&&this._dialogInformation.inputType.toLowerCase()==="password"?"-":this._dialogInformation.value}}_setLimits(){var _a,_b,_c,_d;if(this._dialogInformation==null)return;if(!Lenze.Strings.isNullOrWhiteSpace(VisiWin.AppServices.VariableService.touchkeyboardInfo.varName)){this._castedVariable=(_a=this._variableService)===null||_a===void 0?void 0:_a.GetVariable(VisiWin.AppServices.VariableService.touchkeyboardInfo.varName)}const limits={min:this._getLimitValue(this._minLimitVariable,true),max:this._getLimitValue(this._maxLimitVariable,false)};if(this._dialogInformation.keyboardType===Lenze.Models.KeyboardTypeEnum.Alphabetical){limits.min=Math.max(limits.min,0);limits.max=Math.max(limits.max,0);this._varIn.textLengthMin=limits.min;this._varIn.textLengthMax=limits.max}else{if(this._dialogInformation.unit!=null){limits.min=this._calculateUnitValue(limits.min,this._dialogInformation.unit,this._minLimitVariable);limits.max=this._calculateUnitValue(limits.max,this._dialogInformation.unit,this._maxLimitVariable)}let divider=1;if(((_b=this._castedVariable)===null||_b===void 0?void 0:_b.TypeCode)!==VisiWin.System.DataAccess.TypeCode.Single&&((_c=this._castedVariable)===null||_c===void 0?void 0:_c.TypeCode)!==VisiWin.System.DataAccess.TypeCode.Double){for(let i=0;i<this._dialogInformation.decimalPlaces;i++){divider=divider*10}}limits.min=limits.min/divider;limits.max=limits.max/divider;this._varIn.rawLimitMin=limits.min;this._varIn.rawLimitMax=limits.max}if(this._minLimitLabel!=null)this._minLimitLabel.text=this._getLimitText(limits.min,true);if(this._maxLimitLabel!=null)this._maxLimitLabel.text=this._getLimitText(limits.max,false);(_d=this._virtualKeyboard)===null||_d===void 0?void 0:_d.updateLimits(this._dialogInformation.limitCheckEnabled,limits.min,limits.max)}_getLimitValue(variable,isMinLimit){if(this._dialogInformation==null)return 0;return this._dialogInformation.limitCheckEnabled?variable==null?this._dialogInformation[isMinLimit?"limitMin":"limitMax"]:parseFloat(variable.Value):0}_getLimitText(limitValue,isMinLimit){if(this._dialogInformation==null)return"-";return this._dialogInformation.limitCheckEnabled?this._roundLimit(limitValue,this._dialogInformation.decimalPlaces,isMinLimit):"-"}_roundLimit(value,decimalPlaces,upwards){const multiplier=Math.pow(10,decimalPlaces||0);const roundFunction=upwards?Math.ceil:Math.floor;return(roundFunction(value*multiplier)/multiplier).toString()}_getLimitVariable(variableName){if(this._variableService==null)return null;const variable=this._variableService.GetVariable(variableName);variable.AttachAsync();if(variable!=null)variable.Change.add(this._limitVariableChangeHandler);return variable}_resetLimitVariable(variable){if(variable==null)return;variable.Change.remove(this._limitVariableChangeHandler);variable.Detach();variable=null}_calculateUnitValue(limit,unit,limitVariable){if(limitVariable!=null&&limitVariable.UnitClass!=null)return limit;return limit*unit.Slope+unit.Offset}_onKeyboardEnter(event){const detail=event.detail;if(detail.inputId!==this._inputId)return;this._keyboardService.triggerKeyboardDialogEnter({newValue:detail.newValue})}_onLimitVariableChange(){this._setLimits()}}UI.VirtualKeyboardDialog=VirtualKeyboardDialog})(UI=Lenze.UI||(Lenze.UI={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var UI;(function(UI){"use strict";class VirtualKeyboard extends Lenze.UI.ControlBase{constructor(element,options){super(element,options);this._shiftActiveClassName="lenze-virtualkeyboard__shift-active";this._capsActiveClassName="lenze-virtualkeyboard__caps-active";this._enterKeyName="{enter}";this._spaceKeyName="{space}";this._backspaceKeyName="{bksp}";this._capslockKeyName="{lock}";this._shiftKeyName="{shift}";this._clearKeyName="{clear}";this._decimalKeyName="{dec}";this._negPosKeyName="{negpos}";this.properties={designerType:{propertyType:"base",type:"string",defaultValue:"Control"},numeric:{propertyType:"member",type:"boolean",defaultValue:"false"},keyBorderWidth:{propertyType:"member",type:"string",defaultValue:"1px"},keyBorderStyle:{propertyType:"member",type:"string",defaultValue:"none"},keyBorderRadius:{propertyType:"member",type:"string",defaultValue:"0px"},enterKeyBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@PrimaryColor"},enterKeyForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@AltForegroundColor"},enterKeyBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"},enterKeyActiveBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@PrimaryDarkColor"},enterKeyActiveForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@AltForegroundColor"},enterKeyActiveBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@HoverBorderColor"},spaceKeyBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ChromeMedium"},spaceKeyForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},spaceKeyBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"},spaceKeyActiveBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@HoverBackgroundColor"},spaceKeyActiveForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},spaceKeyActiveBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@HoverBorderColor"},specialKeysBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ChromeMediumLow"},specialKeysForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},specialKeysBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"},specialKeysActiveBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@HoverBackgroundColor"},specialKeysActiveForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},specialKeysActiveBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@HoverBorderColor"},backgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ChromeMediumHigh"},borderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"},keyBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ChromeLow"},keyForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},keyBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"},keyActiveBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@HoverBackgroundColor"},keyActiveForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},keyActiveBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@HoverBorderColor"},onEnterKey:{propertyType:"event",group:"Event"}};this._keyboardKeyHandlers=new Map;this._physicalKeyMapping=new Map;this._inputElements=[];this._shiftActive=false;this._capsActive=false;this._isUpdatingKeyboardLayoutOptions=false;this._activeIndex=null;this._limitsEnabled=false;this._limitMin=0;this._limitMax=0;this._keyboardValueChangeHandler=this._onKeyboardValueChange.bind(this);this._keyReleasedHandler=this._onKeyReleased.bind(this);this._physicalKeyReleasedHandler=this._onPhysicalKeyReleased.bind(this);this._languageChangedHandler=this._onLanguageChanged.bind(this);this.initialize(Lenze.UI.VirtualKeyboard)}createTemplate(){this.element.innerHTML=`<div class="lenze-virtualkeyboard__keyboard" data-ref-element="_keyboardElement"></div>`;return this.initializeChilds()}createHandler(){this._keyboardKeyHandlers.set(this._enterKeyName,this._onEnterKeyHandler.bind(this));this._keyboardKeyHandlers.set(this._shiftKeyName,this._onShiftKeyHandler.bind(this));this._keyboardKeyHandlers.set(this._capslockKeyName,this._onCapsKeyHandler.bind(this));this._keyboardKeyHandlers.set(this._clearKeyName,this._onClearKeyHandler.bind(this));this._keyboardKeyHandlers.set(this._decimalKeyName,this._onDecimalKeyHandler.bind(this));this._keyboardKeyHandlers.set(this._negPosKeyName,this._onNegPosKeyHandler.bind(this));this._physicalKeyMapping.set("Enter",this._enterKeyName);this._physicalKeyMapping.set("Backspace",this._backspaceKeyName);this._physicalKeyMapping.set("CapsLock",this._capslockKeyName);this._physicalKeyMapping.set("Shift",this._shiftKeyName);this._physicalKeyMapping.set("Delete",this._clearKeyName);this._keyboardService=VisiWin.AppServices.LenzeKeyboardService;const Keyboard=window.SimpleKeyboard.default;this._keyboard=new Keyboard(this._keyboardElement,{display:this._getDisplayData(),theme:"simple-keyboard hg-theme-default hg-layout-default",buttonTheme:[{class:"material-icons",buttons:Object.keys(this._getDisplayData(true)).join(" ").trim()},{class:"hg-button-special",buttons:Object.keys(this._getDisplayData()).join(" ").trim()}]});if(VisiWin.Utilities.isInDesignMode())return;this._keyboard.setOptions({onChange:this._keyboardValueChangeHandler,onKeyReleased:this._keyReleasedHandler});document.addEventListener("keydown",this._physicalKeyReleasedHandler,true);this.locService.addEventListener("languageChanged",this._languageChangedHandler)}afterInit(){this._updateKeyboardLayoutAsync()}dispose(){if(VisiWin.Utilities.isInDesignMode())return super.dispose();this._keyboard.setOptions({onChange:undefined,onKeyPress:undefined});this._keyboard.destroy();document.removeEventListener("keydown",this._physicalKeyReleasedHandler,true);this.locService.removeEventListener("languageChanged",this._languageChangedHandler);return super.dispose()}_updateColors(changes){this.setColor("backgroundColor");this.setColor("borderColor");this.setColor("backgroundColor","background-color","_keyboardElement");this._keyboardElement.style.setProperty("--keyboard-key-enter-background",this.getThemeColor(this.enterKeyBackgroundColor));this._keyboardElement.style.setProperty("--keyboard-key-enter-foreground",this.getThemeColor(this.enterKeyForegroundColor));this._keyboardElement.style.setProperty("--keyboard-key-enter-border-color",this.getThemeColor(this.enterKeyBorderColor));this._keyboardElement.style.setProperty("--keyboard-key-active-enter-background",this.getThemeColor(this.enterKeyActiveBackgroundColor));this._keyboardElement.style.setProperty("--keyboard-key-active-enter-foreground",this.getThemeColor(this.enterKeyActiveForegroundColor));this._keyboardElement.style.setProperty("--keyboard-key-active-enter-border-color",this.getThemeColor(this.enterKeyActiveBorderColor));this._keyboardElement.style.setProperty("--keyboard-key-space-background",this.getThemeColor(this.spaceKeyBackgroundColor));this._keyboardElement.style.setProperty("--keyboard-key-space-foreground",this.getThemeColor(this.spaceKeyForegroundColor));this._keyboardElement.style.setProperty("--keyboard-key-space-border-color",this.getThemeColor(this.spaceKeyBorderColor));this._keyboardElement.style.setProperty("--keyboard-key-active-space-background",this.getThemeColor(this.spaceKeyActiveBackgroundColor));this._keyboardElement.style.setProperty("--keyboard-key-active-space-foreground",this.getThemeColor(this.spaceKeyActiveForegroundColor));this._keyboardElement.style.setProperty("--keyboard-key-active-space-border-color",this.getThemeColor(this.spaceKeyActiveBorderColor));this._keyboardElement.style.setProperty("--keyboard-key-special-keys-background",this.getThemeColor(this.specialKeysBackgroundColor));this._keyboardElement.style.setProperty("--keyboard-key-special-keys-foreground",this.getThemeColor(this.specialKeysForegroundColor));this._keyboardElement.style.setProperty("--keyboard-key-special-keys-border-color",this.getThemeColor(this.specialKeysBorderColor));this._keyboardElement.style.setProperty("--keyboard-key-active-special-keys-background",this.getThemeColor(this.specialKeysActiveBackgroundColor));this._keyboardElement.style.setProperty("--keyboard-key-active-special-keys-foreground",this.getThemeColor(this.specialKeysActiveForegroundColor));this._keyboardElement.style.setProperty("--keyboard-key-active-special-keys-border-color",this.getThemeColor(this.specialKeysActiveBorderColor));this._keyboardElement.style.setProperty("--keyboard-key-background",this.getThemeColor(this.keyBackgroundColor));this._keyboardElement.style.setProperty("--keyboard-key-foreground",this.getThemeColor(this.keyForegroundColor));this._keyboardElement.style.setProperty("--keyboard-key-border-color",this.getThemeColor(this.keyBorderColor));this._keyboardElement.style.setProperty("--keyboard-key-active-background",this.getThemeColor(this.keyActiveBackgroundColor));this._keyboardElement.style.setProperty("--keyboard-key-active-foreground",this.getThemeColor(this.keyActiveForegroundColor));this._keyboardElement.style.setProperty("--keyboard-key-active-border-color",this.getThemeColor(this.keyActiveBorderColor))}_updateLayout(changes){if(this._keyboardElement==null)return;if(VisiWin.Utilities.isInDesignMode()&&(changes.changeType==="property"&&changes.changeName==="numeric")||changes.changeType==="lifeCycle"&&changes.changeName==="initialized")this._updateKeyboardLayoutAsync();this._keyboardElement.style.setProperty("--keyboard-key-border-width",this.keyBorderWidth);this._keyboardElement.style.setProperty("--keyboard-key-border-style",this.keyBorderStyle);this._keyboardElement.style.setProperty("--keyboard-key-border-radius",this.keyBorderRadius)}registerInputElement(keyboardInputElement){this._inputElements.push(keyboardInputElement)}deregisterInputElement(id){this._inputElements=this._inputElements.filter(e=>e.id!==id);this._keyboard.clearInput(id)}setActiveInputElement(id,limitMin=0,limitMax=0){const index=this._inputElements.findIndex(input=>input.id===id);if(index===-1){console.error(`Input with identifier '${id}' could not be found.`);return}this._keyboard.setOptions({inputName:id});this._activeIndex=index;const keyboardInputElement=this._inputElements[this._activeIndex];const isNumeric=keyboardInputElement.keyboardType===Lenze.Models.KeyboardTypeEnum.Numeric;const potentialValue=keyboardInputElement.inputElement.value;let value=potentialValue!=null?potentialValue.toString():isNumeric?"0":"";if(isNumeric)value=Number(value).toFixed(keyboardInputElement.inputElement.decimalPlaces);this._keyboard.setInput(isNumeric?(+value).toPrecision():value,id);this._writeValueToInput(value);this._setLimits(keyboardInputElement.inputElement.isLimitCheckEnabled,limitMin,limitMax);this._updateKeyboardLayoutAsync()}updateLimits(limitsEnabled,limitMin,limitMax){this._setLimits(limitsEnabled,limitMin,limitMax);this._showIsValueValid()}async _updateKeyboardLayoutOptionsAsync(){const layout=await this._keyboardService.getAlphabeticalLayout(this.locService.CurrentLanguage.locale);const layoutOptions={alphaNormal:layout.alphaNormal,alphaShift:layout.alphaShift,numeric:await this._keyboardService.getNumericLayout()};const currentLayoutName=this._keyboard.options.layoutName||"";const currentLayoutSupported=Object.keys(layoutOptions).includes(currentLayoutName);this._keyboard.setOptions({layout:layoutOptions,layoutName:currentLayoutSupported?currentLayoutName:this._getAlphabeticalName})}async _updateKeyboardLayoutAsync(){if(this._isUpdatingKeyboardLayoutOptions)return;this._isUpdatingKeyboardLayoutOptions=true;try{if(this._keyboard.options.layout==null||!Object.keys(this._keyboard.options.layout).includes("alphaNormal"))await this._updateKeyboardLayoutOptionsAsync();let layoutName;if(!VisiWin.Utilities.isInDesignMode())layoutName=this._isKeyboardNumeric?"numeric":this._getAlphabeticalName;else layoutName=this.numeric?"numeric":"alphaNormal";this._keyboard.setOptions({layoutName:layoutName});this._updateShiftCapsActiveClasses()}finally{this._isUpdatingKeyboardLayoutOptions=false}}_writeValueToInput(value=""){if(this._activeIndex==null)return;this._inputElements[this._activeIndex].inputElement.value=this._isKeyboardNumeric&&Lenze.Strings.isNullOrWhiteSpace(value)?"0":value}_parseNumber(value){return Number.isInteger(value)?Number.parseInt(value):Number.parseFloat(value)}_updateShiftCapsActiveClasses(){this.element.classList.remove(this._shiftActiveClassName,this._capsActiveClassName);if(this._shiftActive)this.element.classList.add(this._shiftActiveClassName);if(this._capsActive)this.element.classList.add(this._capsActiveClassName)}_getDisplayData(iconButtonsOnly=false){const result={};result[this._enterKeyName]="keyboard_return";result[this._spaceKeyName]=" ";result[this._backspaceKeyName]="backspace";result[this._capslockKeyName]="keyboard_capslock";result[this._shiftKeyName]="keyboard_capslock";result[this._clearKeyName]="cancel";if(!iconButtonsOnly){result[this._decimalKeyName]=". | ,";result[this._negPosKeyName]="+ | -"}return result}_isValueWithinLimits(value){if(this._keyboardInputElement==null)return false;if(!this._limitsEnabled)return true;const valueToCompare=this._isKeyboardNumeric?this._parseNumber(value):value.length;return valueToCompare>=this._limitMin&&valueToCompare<=this._limitMax}_showIsValueValid(){if(this._keyboardInputElement==null||!this._limitsEnabled)return;Lenze.Inputs.revalidateLimits(this._keyboardInputElement.inputElement)}_setLimits(limitsEnabled,limitMin,limitMax){var _a;const areLimitsForNumeric=(_a=this._isKeyboardNumeric)!==null&&_a!==void 0?_a:false;this._limitsEnabled=limitsEnabled;this._limitMin=areLimitsForNumeric?limitMin:Math.max(limitMin,0);this._limitMax=areLimitsForNumeric?limitMax:Math.max(limitMax,0)}get _getAlphabeticalName(){return"alpha"+(this._shiftActive||this._capsActive?"Shift":"Normal")}get _currentInputNameValid(){return this._activeIndex!=null&&!Lenze.Strings.isNullOrWhiteSpace(this._keyboard.options.inputName)}get _inputId(){return this._activeIndex!=null?this._inputElements[this._activeIndex].id:undefined}get _keyboardInputElement(){return this._activeIndex!=null?this._inputElements[this._activeIndex]:null}get _numericValue(){const inputId=this._inputId;const potentialValue=this._keyboard.getInput(inputId);if(Lenze.Strings.isNullOrWhiteSpace(potentialValue))return null;if(isNaN(potentialValue)){console.error(`Current value '${potentialValue}' is not a number!`);return null}return this._parseNumber(potentialValue)}get _isKeyboardNumeric(){const activeInput=this._keyboardInputElement;return activeInput!=null&&activeInput.keyboardType===Lenze.Models.KeyboardTypeEnum.Numeric}get _currentDecimalPlaces(){var _a,_b;return(_b=(_a=this._keyboardInputElement)===null||_a===void 0?void 0:_a.inputElement.decimalPlaces)!==null&&_b!==void 0?_b:0}_onKeyboardValueChange(input){const keyboardInputElement=this._keyboardInputElement;if(keyboardInputElement==null)return;let safeInput=input;try{if(!this._isKeyboardNumeric)return;if(Lenze.Strings.isNullOrWhiteSpace(safeInput)||isNaN(safeInput)){safeInput="0";return}const currentDecimalPlaces=this._currentDecimalPlaces;const amountOfDecPlaces=currentDecimalPlaces>0?this._keyboardService.getAmountOfDecimalPlaces(safeInput):0;if(amountOfDecPlaces===0){const numericValue=this._parseNumber(safeInput);safeInput=Math.trunc(numericValue).toString();return}if(amountOfDecPlaces>currentDecimalPlaces){const placesTooMuch=amountOfDecPlaces-currentDecimalPlaces;safeInput=safeInput.substring(0,safeInput.length-placesTooMuch);return}}finally{const inputId=this._inputId;if(this._keyboard.getInput(inputId)!==safeInput)this._keyboard.setInput(safeInput,inputId);this._writeValueToInput(safeInput)}}_onKeyReleased(key){if(this._shiftActive&&key!=this._shiftKeyName){this._shiftActive=false;this._updateKeyboardLayoutAsync()}const keyHandler=this._keyboardKeyHandlers.get(key);if(keyHandler===undefined)return;keyHandler()}_onPhysicalKeyReleased(eventArgs){if(this._inputId==null)return;const key=eventArgs===null||eventArgs===void 0?void 0:eventArgs.key;if(key==null)return;const mappedKey=this._physicalKeyMapping.get(key);const capitalize=this._shiftActive||this._capsActive;this._onKeyReleased(mappedKey!==null&&mappedKey!==void 0?mappedKey:key);const currentInput=this._keyboard.getInput(this._inputId);if(mappedKey!=null||key.length>1){if(mappedKey==this._backspaceKeyName){if(Lenze.Strings.isNullOrWhiteSpace(currentInput))return;this._onKeyboardValueChange(currentInput.slice(0,-1))}return}if(this._isKeyboardNumeric){if(key==="."||key===","){this._onDecimalKeyHandler();return}else if(key==="+"||key==="-"){this._onNegPosKeyHandler();return}}this._onKeyboardValueChange(currentInput+(capitalize?key.toUpperCase():key.toLowerCase()))}_onEnterKeyHandler(){const inputId=this._inputId;const value=this._keyboard.getInput(inputId);if(!this._isValueWithinLimits(value))return;this.dispatchEvent(VirtualKeyboard.enterKeyEventName,{newValue:value,inputId:inputId})}async _onShiftKeyHandler(){if(this._capsActive)return;this._shiftActive=!this._shiftActive;await this._updateKeyboardLayoutAsync()}async _onCapsKeyHandler(){this._shiftActive=false;this._capsActive=!this._capsActive;await this._updateKeyboardLayoutAsync()}_onClearKeyHandler(){if(!this._currentInputNameValid)return;if(this._isKeyboardNumeric)this._keyboard.setInput("0",this._keyboard.options.inputName);else this._keyboard.clearInput(this._keyboard.options.inputName);this._writeValueToInput()}_onDecimalKeyHandler(){if(this._currentDecimalPlaces<=0)return;let numericValue=this._numericValue;if(numericValue==null)return;if(!Number.isInteger(numericValue))return;const stringValue=`${numericValue.toString()}.`;this._keyboard.setInput(stringValue,this._inputId);this._writeValueToInput(stringValue)}_onNegPosKeyHandler(){let numericValue=this._numericValue;if(numericValue==null)return;numericValue*=-1;const stringValue=numericValue.toString();this._keyboard.setInput(stringValue,this._inputId);this._writeValueToInput(stringValue)}async _onLanguageChanged(){if(!this.isAttached)return;await this._updateKeyboardLayoutOptionsAsync();await this._updateKeyboardLayoutAsync()}}VirtualKeyboard.enterKeyEventName="onEnterKey";UI.VirtualKeyboard=VirtualKeyboard})(UI=Lenze.UI||(Lenze.UI={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var UI;(function(UI){"use strict";class ListBodyItem extends Lenze.UI.ControlBase{get bodyItem(){return this._bodyItem}get text1Width(){return this._text1Element.clientWidth}set text1Width(value){Lenze.Style.setWidth(this._text1Element,value)}get text2Width(){return this._text2Element.clientWidth}set text2Width(value){Lenze.Style.setWidth(this._text2Element,value)}get text3Width(){return this._text3Element.clientWidth}set text3Width(value){Lenze.Style.setWidth(this._text3Element,value)}constructor(element,options){super(element,options);this.properties={designerType:{propertyType:"base",type:"string",defaultValue:"Control"},text1Alignment:{propertyType:"child",type:"string",child:"_text1Element",childProperty:"textAlignment"},text1LineClamp:{propertyType:"child",type:"number",child:"_text1Element",childProperty:"lineClamp"},text1TextWrapping:{propertyType:"child",type:"string",child:"_text1Element",childProperty:"textWrapping"},text1TextTrimming:{propertyType:"child",type:"string",child:"_text1Element",childProperty:"textTrimming",defaultValue:"Overflow"},text1TextContrast:{propertyType:"child",type:"number",child:"_text1Element",childProperty:"textContrast"},text1Uppercase:{propertyType:"child",type:"boolean",child:"_text1Element",childProperty:"uppercase",defaultValue:false},text1TextDecoration:{propertyType:"child",type:"string",child:"_text1Element",childProperty:"textDecoration"},text1TextShadow:{propertyType:"child",type:"string",child:"_text1Element",childProperty:"textShadow"},text1FontClass:{propertyType:"child",type:"string",child:"_text1Element",childProperty:"fontClass",defaultValue:"Roboto14"},text1FontFamily:{propertyType:"child",type:"string",child:"_text1Element",childProperty:"fontFamily"},text1FontSize:{propertyType:"child",type:"string",child:"_text1Element",childProperty:"fontSize"},text1FontWeight:{propertyType:"child",type:"string",child:"_text1Element",childProperty:"fontWeight",defaultValue:"FW500"},text1LineHeight:{propertyType:"child",type:"string",child:"_text1Element",childProperty:"lineHeight"},text1FontStyle:{propertyType:"child",type:"string",child:"_text1Element",childProperty:"fontStyle"},text1LetterSpacing:{propertyType:"child",type:"string",child:"_text1Element",childProperty:"letterSpacing"},text2Alignment:{propertyType:"child",type:"string",child:"_text2Element",childProperty:"textAlignment"},text2LineClamp:{propertyType:"child",type:"number",child:"_text2Element",childProperty:"lineClamp"},text2TextWrapping:{propertyType:"child",type:"string",child:"_text2Element",childProperty:"textWrapping"},text2TextTrimming:{propertyType:"child",type:"string",child:"_text2Element",childProperty:"textTrimming",defaultValue:"Overflow"},text2TextContrast:{propertyType:"child",type:"number",child:"_text2Element",childProperty:"textContrast"},text2Uppercase:{propertyType:"child",type:"boolean",child:"_text2Element",childProperty:"uppercase",defaultValue:false},text2TextDecoration:{propertyType:"child",type:"string",child:"_text2Element",childProperty:"textDecoration"},text2TextShadow:{propertyType:"child",type:"string",child:"_text2Element",childProperty:"textShadow"},text2FontClass:{propertyType:"child",type:"string",child:"_text2Element",childProperty:"fontClass",defaultValue:"Roboto14"},text2FontFamily:{propertyType:"child",type:"string",child:"_text2Element",childProperty:"fontFamily"},text2FontSize:{propertyType:"child",type:"string",child:"_text2Element",childProperty:"fontSize"},text2FontWeight:{propertyType:"child",type:"string",child:"_text2Element",childProperty:"fontWeight"},text2LineHeight:{propertyType:"child",type:"string",child:"_text2Element",childProperty:"lineHeight"},text2FontStyle:{propertyType:"child",type:"string",child:"_text2Element",childProperty:"fontStyle"},text2LetterSpacing:{propertyType:"child",type:"string",child:"_text2Element",childProperty:"letterSpacing"},text3Alignment:{propertyType:"child",type:"string",child:"_text3Element",childProperty:"textAlignment"},text3LineClamp:{propertyType:"child",type:"number",child:"_text3Element",childProperty:"lineClamp"},text3TextWrapping:{propertyType:"child",type:"string",child:"_text3Element",childProperty:"textWrapping"},text3TextTrimming:{propertyType:"child",type:"string",child:"_text3Element",childProperty:"textTrimming",defaultValue:"Overflow"},text3TextContrast:{propertyType:"child",type:"number",child:"_text3Element",childProperty:"textContrast"},text3Uppercase:{propertyType:"child",type:"boolean",child:"_text3Element",childProperty:"uppercase",defaultValue:false},text3TextDecoration:{propertyType:"child",type:"string",child:"_text3Element",childProperty:"textDecoration"},text3TextShadow:{propertyType:"child",type:"string",child:"_text3Element",childProperty:"textShadow"},text3FontClass:{propertyType:"child",type:"string",child:"_text3Element",childProperty:"fontClass",defaultValue:"Roboto14"},text3FontFamily:{propertyType:"child",type:"string",child:"_text3Element",childProperty:"fontFamily"},text3FontSize:{propertyType:"child",type:"string",child:"_text3Element",childProperty:"fontSize"},text3FontWeight:{propertyType:"child",type:"string",child:"_text3Element",childProperty:"fontWeight"},text3LineHeight:{propertyType:"child",type:"string",child:"_text3Element",childProperty:"lineHeight"},text3FontStyle:{propertyType:"child",type:"string",child:"_text3Element",childProperty:"fontStyle"},text3LetterSpacing:{propertyType:"child",type:"string",child:"_text3Element",childProperty:"letterSpacing"},detailsAuthorizationRight:{propertyType:"member",type:"string",defaultValue:""},dialogShowButton1:{propertyType:"member",type:"boolean",defaultValue:false},dialogButton1Text:{propertyType:"member",type:"string",defaultValue:"NOT OK"},dialogButton1LocalizableText:{propertyType:"member",type:"string",defaultValue:""},dialogShowButton2:{propertyType:"member",type:"boolean",defaultValue:true},dialogButton2Text:{propertyType:"member",type:"string",defaultValue:"OK"},dialogButton2LocalizableText:{propertyType:"member",type:"string",defaultValue:""},backgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@WhiteGrey"},borderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@Transparent"},foregroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},text1BackgroundColor:{propertyType:"child",type:"string",child:"_text1Element",childProperty:"backgroundColor",resourceValue:["getTheme"],defaultValue:"@Transparent"},text1ForegroundColor:{propertyType:"child",type:"string",child:"_text1Element",childProperty:"foregroundColor",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},text2BackgroundColor:{propertyType:"child",type:"string",child:"_text2Element",childProperty:"backgroundColor",resourceValue:["getTheme"],defaultValue:"@Transparent"},text2ForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},text3BackgroundColor:{propertyType:"child",type:"string",child:"_text3Element",childProperty:"backgroundColor",resourceValue:["getTheme"],defaultValue:"@Transparent"},text3ForegroundColor:{propertyType:"child",type:"string",child:"_text3Element",childProperty:"foregroundColor",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"}};this._bodyItem=null;this.initialize(Lenze.UI.ListBodyItem)}createTemplate(){this.element.innerHTML=`\n                <div class="${this.className}__text1" data-win-control="${Lenze.Controls.getType(VisiWin.UI.TextBlock)}" data-ref-element="_text1Element"></div>\n                <div class="${this.className}__text2" data-win-control="${Lenze.Controls.getType(VisiWin.UI.TextBlock)}" data-ref-element="_text2Element"></div>\n                <div class="${this.className}__text3" data-win-control="${Lenze.Controls.getType(VisiWin.UI.TextBlock)}" data-ref-element="_text3Element"></div>\n            `;return this.initializeChilds()}afterInit(){if(VisiWin.Utilities.isInDesignMode())return;this._languageService=VisiWin.System.Language.LanguageService.getService();this._userService=VisiWin.System.UserManagement.UserManagementService.getService();this._dialogService=VisiWin.AppServices.LenzeDialogService;this._languageChangeHandler=this._onLanguageChangeAsync.bind(this);this._languageService.LanguageChanged.add(this._languageChangeHandler);this._userChangeHandler=this._onUserChangeAsync.bind(this);this._userService.UserLoggedOn.add(this._userChangeHandler);this._text2ClickHandler=this._onText2ClickAsync.bind(this);this._text2Element.addEventListener("pointerdown",this._text2ClickHandler)}_updateLayout(changes){}_updateColors(changes){this.setColor(Lenze.Strings.nameof("backgroundColor"));this.setColor(Lenze.Strings.nameof("foregroundColor"));this.setColor(Lenze.Strings.nameof("borderColor"));this._text2Element.winControl.foregroundColor=this._text2Element.classList.contains("clickable")?"@LenzeCyan":this.text2ForegroundColor}dispose(){if(VisiWin.Utilities.isInDesignMode())return super.dispose();this._languageService.LanguageChanged.remove(this._languageChangeHandler);this._userService.UserLoggedOn.remove(this._userChangeHandler);this._text2Element.removeEventListener("pointerdown",this._text2ClickHandler);return super.dispose()}async setBodyItemAsync(value){this._bodyItem=value;await this._setTextsAsync()}setText1Visibility(value){this._text1Element.winControl.visibility=value?"visible":"hidden"}async _setTextsAsync(){if(this._bodyItem==null){this.visibility="collapse";return}this.visibility="visible";await this._setLocalTextsAsync();this._updateText2Clickable()}async _setLocalTextsAsync(){var _a,_b,_c,_d,_e,_f;const emptyTextItem=new Lenze.Models.ListText;await Promise.all([Lenze.Lists.setTextAsync(this._languageService,this._text1Element,(_b=(_a=this._bodyItem)===null||_a===void 0?void 0:_a.text1)!==null&&_b!==void 0?_b:emptyTextItem),Lenze.Lists.setTextAsync(this._languageService,this._text2Element,(_d=(_c=this._bodyItem)===null||_c===void 0?void 0:_c.text2)!==null&&_d!==void 0?_d:emptyTextItem),Lenze.Lists.setTextAsync(this._languageService,this._text3Element,(_f=(_e=this._bodyItem)===null||_e===void 0?void 0:_e.text3)!==null&&_f!==void 0?_f:emptyTextItem)])}_updateText2Clickable(){if(this._bodyItem!=null&&this._bodyItem.text2DetailsAvailable&&Lenze.Users.isAuthorized(this._userService,this.detailsAuthorizationRight))this._text2Element.classList.add("clickable");else this._text2Element.classList.remove("clickable");this._updateColors(null)}async _onLanguageChangeAsync(){await this._setLocalTextsAsync()}async _onUserChangeAsync(){this._updateText2Clickable()}async _onText2ClickAsync(){if(this._bodyItem==null||!this._bodyItem.text2DetailsAvailable||!Lenze.Users.isAuthorized(this._userService,this.detailsAuthorizationRight))return;await this._dialogService.showAlertDialogAsync({titleText:await Lenze.Lists.getTextAsync(this._languageService,this._bodyItem.text2DetailsHeader),titleLocalizableText:"",contentText:await Lenze.Lists.getTextAsync(this._languageService,this._bodyItem.text2DetailsBody),contentLocalizableText:"",button1Text:this.dialogButton1Text,button1LocalizableText:this.dialogButton1LocalizableText,button2Text:this.dialogButton2Text,button2LocalizableText:this.dialogButton2LocalizableText,showButton1:this.dialogShowButton1,showButton2:this.dialogShowButton2})}}UI.ListBodyItem=ListBodyItem})(UI=Lenze.UI||(Lenze.UI={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var UI;(function(UI){"use strict";class ListHeader extends Lenze.UI.ButtonBase{get listHeader(){return this._listHeader}get text1Width(){return this._text1Element.clientWidth}set text1Width(value){Lenze.Style.setWidth(this._text1Element,value)}set text1Visible(value){this._text1Element.winControl.visibility=value?"visible":"collapse"}get text2Width(){return this._text2Element.clientWidth}set text2Width(value){Lenze.Style.setWidth(this._text2Element,value)}set text2Visible(value){this._text2Element.winControl.visibility=value?"visible":"collapse"}get text3Width(){return this._text3Element.clientWidth}set text3Width(value){Lenze.Style.setWidth(this._text3Element,value)}set text3Visible(value){this._text3Element.winControl.visibility=value?"visible":"collapse"}set expandSymbol(value){this._expandSymbolElement.winControl.symbol=value;this._updateLayout(null)}constructor(element,options){super(element,options);this.properties={designerType:{propertyType:"base",type:"string",defaultValue:"Control"},text1Alignment:{propertyType:"child",type:"string",child:"_text1Element",childProperty:"textAlignment"},text1LineClamp:{propertyType:"child",type:"number",child:"_text1Element",childProperty:"lineClamp"},text1TextWrapping:{propertyType:"child",type:"string",child:"_text1Element",childProperty:"textWrapping"},text1TextTrimming:{propertyType:"child",type:"string",child:"_text1Element",childProperty:"textTrimming",defaultValue:"Overflow"},text1TextContrast:{propertyType:"child",type:"number",child:"_text1Element",childProperty:"textContrast"},text1Uppercase:{propertyType:"child",type:"boolean",child:"_text1Element",childProperty:"uppercase",defaultValue:false},text1TextDecoration:{propertyType:"child",type:"string",child:"_text1Element",childProperty:"textDecoration"},text1TextShadow:{propertyType:"child",type:"string",child:"_text1Element",childProperty:"textShadow"},text1FontClass:{propertyType:"child",type:"string",child:"_text1Element",childProperty:"fontClass",defaultValue:"Roboto14"},text1FontFamily:{propertyType:"child",type:"string",child:"_text1Element",childProperty:"fontFamily"},text1FontSize:{propertyType:"child",type:"string",child:"_text1Element",childProperty:"fontSize"},text1FontWeight:{propertyType:"child",type:"string",child:"_text1Element",childProperty:"fontWeight",defaultValue:"FW500"},text1LineHeight:{propertyType:"child",type:"string",child:"_text1Element",childProperty:"lineHeight"},text1FontStyle:{propertyType:"child",type:"string",child:"_text1Element",childProperty:"fontStyle"},text1LetterSpacing:{propertyType:"child",type:"string",child:"_text1Element",childProperty:"letterSpacing"},text2Alignment:{propertyType:"child",type:"string",child:"_text2Element",childProperty:"textAlignment"},text2LineClamp:{propertyType:"child",type:"number",child:"_text2Element",childProperty:"lineClamp"},text2TextWrapping:{propertyType:"child",type:"string",child:"_text2Element",childProperty:"textWrapping"},text2TextTrimming:{propertyType:"child",type:"string",child:"_text2Element",childProperty:"textTrimming",defaultValue:"Overflow"},text2TextContrast:{propertyType:"child",type:"number",child:"_text2Element",childProperty:"textContrast"},text2Uppercase:{propertyType:"child",type:"boolean",child:"_text2Element",childProperty:"uppercase",defaultValue:false},text2TextDecoration:{propertyType:"child",type:"string",child:"_text2Element",childProperty:"textDecoration"},text2TextShadow:{propertyType:"child",type:"string",child:"_text2Element",childProperty:"textShadow"},text2FontClass:{propertyType:"child",type:"string",child:"_text2Element",childProperty:"fontClass",defaultValue:"Roboto14"},text2FontFamily:{propertyType:"child",type:"string",child:"_text2Element",childProperty:"fontFamily"},text2FontSize:{propertyType:"child",type:"string",child:"_text2Element",childProperty:"fontSize"},text2FontWeight:{propertyType:"child",type:"string",child:"_text2Element",childProperty:"fontWeight"},text2LineHeight:{propertyType:"child",type:"string",child:"_text2Element",childProperty:"lineHeight"},text2FontStyle:{propertyType:"child",type:"string",child:"_text2Element",childProperty:"fontStyle"},text2LetterSpacing:{propertyType:"child",type:"string",child:"_text2Element",childProperty:"letterSpacing"},text3Alignment:{propertyType:"child",type:"string",child:"_text3Element",childProperty:"textAlignment"},text3LineClamp:{propertyType:"child",type:"number",child:"_text3Element",childProperty:"lineClamp"},text3Wrapping:{propertyType:"child",type:"string",child:"_text3Element",childProperty:"textWrapping"},text3Trimming:{propertyType:"child",type:"string",child:"_text3Element",childProperty:"textTrimming",defaultValue:"Overflow"},text3Contrast:{propertyType:"child",type:"number",child:"_text3Element",childProperty:"textContrast"},text3Uppercase:{propertyType:"child",type:"boolean",child:"_text3Element",childProperty:"uppercase",defaultValue:false},text3Decoration:{propertyType:"child",type:"string",child:"_text3Element",childProperty:"textDecoration"},text3Shadow:{propertyType:"child",type:"string",child:"_text3Element",childProperty:"textShadow"},text3FontClass:{propertyType:"child",type:"string",child:"_text3Element",childProperty:"fontClass",defaultValue:"Roboto14"},text3FontFamily:{propertyType:"child",type:"string",child:"_text3Element",childProperty:"fontFamily"},text3FontSize:{propertyType:"child",type:"string",child:"_text3Element",childProperty:"fontSize"},text3FontWeight:{propertyType:"child",type:"string",child:"_text3Element",childProperty:"fontWeight"},text3LineHeight:{propertyType:"child",type:"string",child:"_text3Element",childProperty:"lineHeight"},text3FontStyle:{propertyType:"child",type:"string",child:"_text3Element",childProperty:"fontStyle"},text3LetterSpacing:{propertyType:"child",type:"string",child:"_text3Element",childProperty:"letterSpacing"},contentIconFont:{propertyType:"child",type:"string",child:"_contentSymbolElement",childProperty:"iconFont"},contentSymbol:{propertyType:"child",type:"string",child:"_contentSymbolElement",childProperty:"symbol",defaultValue:"warning"},contentSymbolType:{propertyType:"child",type:"string",child:"_contentSymbolElement",childProperty:"symbolType"},contentSymbolSize:{propertyType:"child",type:"string",child:"_contentSymbolElement",childProperty:"symbolSize"},showExpandSymbol:{propertyType:"member",type:"bool",defaultValue:true},expandSymbolHeight:{propertyType:"member",type:"string",defaultValue:"40px"},expandSymbolWidth:{propertyType:"member",type:"string",defaultValue:"40px"},expandIconFont:{propertyType:"child",type:"string",child:"_expandSymbolElement",childProperty:"iconFont"},expandSymbolOpen:{propertyType:"member",type:"string",defaultValue:"add"},expandSymbolClose:{propertyType:"member",type:"string",defaultValue:"remove"},expandSymbolType:{propertyType:"child",type:"string",child:"_expandSymbolElement",childProperty:"symbolType"},expandSymbolSize:{propertyType:"child",type:"string",child:"_expandSymbolElement",childProperty:"symbolSize"},backgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@LightGrey"},borderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@Transparent"},foregroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},text1BackgroundColor:{propertyType:"child",type:"string",child:"_text1Element",childProperty:"backgroundColor",resourceValue:["getTheme"],defaultValue:"@Transparent"},text1ForegroundColor:{propertyType:"child",type:"string",child:"_text1Element",childProperty:"foregroundColor",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},text2BackgroundColor:{propertyType:"child",type:"string",child:"_text2Element",childProperty:"backgroundColor",resourceValue:["getTheme"],defaultValue:"@Transparent"},text2ForegroundColor:{propertyType:"child",type:"string",child:"_text2Element",childProperty:"foregroundColor",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},text3BackgroundColor:{propertyType:"child",type:"string",child:"_text3Element",childProperty:"backgroundColor",resourceValue:["getTheme"],defaultValue:"@Transparent"},text3ForegroundColor:{propertyType:"child",type:"string",child:"_text3Element",childProperty:"foregroundColor",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},contentSymbolBackgroundColor:{propertyType:"child",type:"string",child:"_contentSymbolElement",childProperty:"backgroundColor",resourceValue:["getTheme"],defaultValue:"@Transparent"},contentSymbolForegroundColor:{propertyType:"child",type:"string",child:"_contentSymbolElement",childProperty:"foregroundColor",resourceValue:["getTheme"],defaultValue:"@WarningColor"},expandSymbolBackgroundColor:{propertyType:"child",type:"string",child:"_expandSymbolElement",childProperty:"backgroundColor",resourceValue:["getTheme"],defaultValue:"@LenzeCyan"},expandSymbolForegroundColor:{propertyType:"child",type:"string",child:"_expandSymbolElement",childProperty:"foregroundColor",resourceValue:["getTheme"],defaultValue:"@AltForegroundColor"}};this._listHeader=null;this.initialize(Lenze.UI.ListHeader)}createTemplate(){this.element.innerHTML=`\n                <div class="${this.className}__content">\n                    <div class="${this.className}__symbol" data-win-control="${Lenze.Controls.getType(VisiWin.UI.Symbol)}" data-ref-element="_symbolElement"></div>\n                    <div class="${this.className}__text1" data-win-control="${Lenze.Controls.getType(VisiWin.UI.TextBlock)}" data-ref-element="_text1Element"></div>\n                    <div class="${this.className}__text2" data-win-control="${Lenze.Controls.getType(VisiWin.UI.TextBlock)}" data-ref-element="_text2Element"></div>\n                    <div class="${this.className}__text3" data-win-control="${Lenze.Controls.getType(VisiWin.UI.TextBlock)}" data-ref-element="_text3Element"></div>\n                    <div class="${this.className}__content-symbol" data-win-control="${Lenze.Controls.getType(VisiWin.UI.Symbol)}" data-ref-element="_contentSymbolElement"></div>\n                </div>\n                <div class="${this.className}__expand-symbol" data-win-control="${Lenze.Controls.getType(VisiWin.UI.Symbol)}" data-ref-element="_expandSymbolElement"></div>\n            `;return this.initializeChilds()}afterInit(){this._expandSymbolElement.winControl.symbol=this.expandSymbolOpen;if(VisiWin.Utilities.isInDesignMode())return;this._languageService=VisiWin.System.Language.LanguageService.getService()}_updateLayout(changes){this._expandSymbolElement.winControl.visibility=this.showExpandSymbol?"visible":"hidden";this._expandSymbolElement.winControl.height=this.expandSymbolHeight;this._expandSymbolElement.winControl.width=this.expandSymbolWidth}_updateColors(changes){this.setColor(Lenze.Strings.nameof("backgroundColor"));this.setColor(Lenze.Strings.nameof("foregroundColor"));this.setColor(Lenze.Strings.nameof("borderColor"))}async setListHeaderAsync(listHeader){this._listHeader=listHeader;this.visibility=listHeader==null?"collapse":"visible";this._symbolElement.winControl.visibility=Lenze.Strings.isNullOrWhiteSpace(listHeader.symbol)?"collapse":"visible";this._symbolElement.winControl.symbol=listHeader.symbol;this._symbolElement.winControl.iconFont=listHeader.symbolIconFont;this._contentSymbolElement.winControl.visibility=Lenze.Strings.isNullOrWhiteSpace(listHeader.contentSymbol)?"collapse":"visible";this._contentSymbolElement.winControl.symbol=listHeader.contentSymbol;this._contentSymbolElement.winControl.iconFont=listHeader.contentSymbolIconFont;await this._setTextsAsync()}async _setTextsAsync(){var _a,_b,_c,_d,_e,_f;const emptyTextItem=new Lenze.Models.ListText;await Promise.all([Lenze.Lists.setTextAsync(this._languageService,this._text1Element,(_b=(_a=this._listHeader)===null||_a===void 0?void 0:_a.text1)!==null&&_b!==void 0?_b:emptyTextItem),Lenze.Lists.setTextAsync(this._languageService,this._text2Element,(_d=(_c=this._listHeader)===null||_c===void 0?void 0:_c.text2)!==null&&_d!==void 0?_d:emptyTextItem),Lenze.Lists.setTextAsync(this._languageService,this._text3Element,(_f=(_e=this._listHeader)===null||_e===void 0?void 0:_e.text3)!==null&&_f!==void 0?_f:emptyTextItem)])}}UI.ListHeader=ListHeader})(UI=Lenze.UI||(Lenze.UI={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var UI;(function(UI){"use strict";class ListItem extends Lenze.UI.ControlBase{get listItem(){return this._listItem}get headerText1Width(){return this._listHeaderControl.text1Width}set headerText1Width(value){this._listHeaderControl.text1Width=value}get headerText2Width(){return this._listHeaderControl.text2Width}set headerText2Width(value){this._listHeaderControl.text2Width=value}get headerText3Width(){return this._listHeaderControl.text3Width}set headerText3Width(value){this._listHeaderControl.text3Width=value}get bodyText1Width(){var _a,_b;return(_b=(_a=this._contentControls[0])===null||_a===void 0?void 0:_a.text1Width)!==null&&_b!==void 0?_b:0}set bodyText1Width(value){this._contentControls.forEach(x=>x.text1Width=value)}get bodyText2Width(){var _a,_b;return(_b=(_a=this._contentControls[0])===null||_a===void 0?void 0:_a.text2Width)!==null&&_b!==void 0?_b:0}set bodyText2Width(value){this._contentControls.forEach(x=>x.text2Width=value)}get bodyText3Width(){var _a,_b;return(_b=(_a=this._contentControls[0])===null||_a===void 0?void 0:_a.text3Width)!==null&&_b!==void 0?_b:0}set bodyText3Width(value){this._contentControls.forEach(x=>x.text3Width=value)}get isSlidedIn(){return this._isSlidedIn}set isSlidedIn(value){this._isSlidedIn=value;this._setHeaderHeight()}get _listHeaderControl(){return this._listHeaderElement.winControl}constructor(element,options){super(element,options);this.properties={designerType:{propertyType:"base",type:"string",defaultValue:"Control"},noteText:{propertyType:"child",type:"string",child:"_noteElement",childProperty:"text",defaultValue:""},noteLocalizableText:{propertyType:"child",type:"string",child:"_noteElement",childProperty:"localizableText"},noteTextAlignment:{propertyType:"child",type:"string",child:"_noteElement",childProperty:"textAlignment"},noteTextLineClamp:{propertyType:"child",type:"number",child:"_noteElement",childProperty:"lineClamp"},noteTextWrapping:{propertyType:"child",type:"string",child:"_noteElement",childProperty:"textWrapping"},noteTextTrimming:{propertyType:"child",type:"string",child:"_noteElement",childProperty:"textTrimming"},noteTextContrast:{propertyType:"child",type:"number",child:"_noteElement",childProperty:"textContrast"},noteTextUppercase:{propertyType:"child",type:"boolean",child:"_noteElement",childProperty:"uppercase",defaultValue:false},noteTextDecoration:{propertyType:"child",type:"string",child:"_noteElement",childProperty:"textDecoration"},noteTextShadow:{propertyType:"child",type:"string",child:"_noteElement",childProperty:"textShadow"},noteTextFontClass:{propertyType:"child",type:"string",child:"_noteElement",childProperty:"fontClass",defaultValue:"Roboto14"},noteTextFontFamily:{propertyType:"child",type:"string",child:"_noteElement",childProperty:"fontFamily"},noteTextFontSize:{propertyType:"child",type:"string",child:"_noteElement",childProperty:"fontSize"},noteTextFontWeight:{propertyType:"child",type:"string",child:"_noteElement",childProperty:"fontWeight"},noteTextLineHeight:{propertyType:"child",type:"string",child:"_noteElement",childProperty:"lineHeight"},noteTextFontStyle:{propertyType:"child",type:"string",child:"_noteElement",childProperty:"fontStyle"},noteTextLetterSpacing:{propertyType:"child",type:"string",child:"_noteElement",childProperty:"letterSpacing"},dividerEnabled:{propertyType:"member",type:"boolean",defaultValue:true},detailsAuthorizationRight:{propertyType:"member",type:"string",defaultValue:""},backgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@Transparent"},borderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@Transparent"},foregroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},contentBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@WhiteGrey"},dividerColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BackgroundColor"},noteBackgroundColor:{propertyType:"child",type:"string",child:"_noteElement",childProperty:"backgroundColor",resourceValue:["getTheme"],defaultValue:"@WhiteGrey"},noteForegroundColor:{propertyType:"child",type:"string",child:"_noteElement",childProperty:"foregroundColor",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"}};this._isSlidedIn=true;this._listItem=null;this.initialize(Lenze.UI.ListItem)}createTemplate(){this.element.innerHTML=`\n                <div class="${this.className}__header" data-win-control="${Lenze.Controls.getType(Lenze.UI.ListHeader)}" data-ref-element="_listHeaderElement"></div>\n                <div class="${this.className}__body" data-ref-element="_listBodyElement">\n                    <div class="${this.className}__body-note" data-win-control="${Lenze.Controls.getType(VisiWin.UI.TextBlock)}" data-ref-element="_noteElement"></div>\n                    <div class="${this.className}__body-content" data-ref-element="_contentElement"></div>\n                </div>\n            `;return this.initializeChilds()}afterInit(){if(VisiWin.Utilities.isInDesignMode())return;this._headerClickHandler=this._onHeaderClick.bind(this);this._listHeaderControl.addEventListener("buttonclick",this._headerClickHandler)}_updateLayout(changes){}_updateColors(changes){this.setColor(Lenze.Strings.nameof("backgroundColor"));this.setColor(Lenze.Strings.nameof("foregroundColor"));this.setColor(Lenze.Strings.nameof("borderColor"));this.setColor(Lenze.Strings.nameof("contentBackgroundColor"),"background-color","_contentElement")}dispose(){if(VisiWin.Utilities.isInDesignMode())return super.dispose();this._listHeaderControl.removeEventListener("buttonclick",this._headerClickHandler);return super.dispose()}async setListItemAsync(value){this._listItem=value;await this._setContentAsync()}async _setContentAsync(){this._contentElement.innerHTML="";this._contentControls=[];if(this._listItem==null||VisiWin.Utilities.isInDesignMode()){this.visibility="collapse";return}this.visibility="visible";const setPromises=[];setPromises.push(this._listHeaderControl.setListHeaderAsync(this._listItem.header));for(let bodyItem of this._listItem.bodyItems){const bodyItemElement=Lenze.Dom.createControl(UI.ListBodyItem,this._contentElement);bodyItemElement.detailsAuthorizationRight=this.detailsAuthorizationRight;this._contentControls.push(bodyItemElement);setPromises.push(bodyItemElement.setBodyItemAsync(bodyItem))}await Promise.all(setPromises);if(this._contentControls.length===0)this._listHeaderControl.showExpandSymbol=false;const maxText1Width=Lenze.Functions.getLargestValue(this._contentControls,x=>x.text1Width);const maxText2Width=Lenze.Functions.getLargestValue(this._contentControls,x=>x.text2Width);const maxText3Width=Lenze.Functions.getLargestValue(this._contentControls,x=>x.text3Width);let previousText1=null;this._contentControls.forEach(x=>{var _a,_b,_c;x.text1Width=maxText1Width;x.text2Width=maxText2Width;x.text3Width=maxText3Width;if(this.dividerEnabled){const previousText1Equal=((_a=x.bodyItem)===null||_a===void 0?void 0:_a.text1.text)==(previousText1===null||previousText1===void 0?void 0:previousText1.text);if(!previousText1Equal&&previousText1!=null){const dividerElement=document.createElement("div");dividerElement.className=`${this.className}__divider`;dividerElement.style.borderColor=this.getThemeColor(this.dividerColor);this._contentElement.insertBefore(dividerElement,x.element)}x.setText1Visibility(!previousText1Equal);previousText1=(_c=(_b=x.bodyItem)===null||_b===void 0?void 0:_b.text1)!==null&&_c!==void 0?_c:null}});this._setHeaderHeight()}_setHeaderHeight(){if(VisiWin.Utilities.isInDesignMode())this._isSlidedIn=false;this.element.style.maxHeight=!this._isSlidedIn?`${this.element.scrollHeight}px`:`${this._listHeaderElement.clientHeight}px`;this._listHeaderControl.expandSymbol=!this._isSlidedIn?this._listHeaderControl.expandSymbolClose:this._listHeaderControl.expandSymbolOpen}_onHeaderClick(){this._isSlidedIn=!this._isSlidedIn;this._setHeaderHeight()}}UI.ListItem=ListItem})(UI=Lenze.UI||(Lenze.UI={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var UI;(function(UI){"use strict";class PdfViewer extends Lenze.UI.ControlBase{constructor(element,options){super(element,options);this.properties={designerType:{propertyType:"base",type:"string",defaultValue:"Control"},disabled:{propertyType:"base",type:"boolean"},source:{propertyType:"member",type:"string",defaultValue:""},backgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@Transparent"}};this.initialize(Lenze.UI.PdfViewer)}createTemplate(){this.element.innerHTML=`<embed class="lenze-pdfviewer__embed" type="application/pdf" data-ref-element="_embedElement"></embed>`;return this.initializeChilds()}_updateColors(changes){this.setColor("backgroundColor")}_updateLayout(changes){if(VisiWin.Utilities.isInDesignMode())return;if(!this.source||this.source.slice(-4)!==".pdf"){this._resetSrcOnEmbed();return}const newSource=`${this.source}#zoom=100&navpanes=0&toolbar=0&statusbar=0`;if(this._embedElement!=null&&this._embedElement.src===newSource)return;this._setSrcOnEmbed(newSource)}_setSrcOnEmbed(src){if(VisiWin.Utilities.isInDesignMode())return;this._embedElement.src=src}_resetSrcOnEmbed(){if(VisiWin.Utilities.isInDesignMode())return;this._embedElement.src=""}}UI.PdfViewer=PdfViewer})(UI=Lenze.UI||(Lenze.UI={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var UI;(function(UI){"use strict";class VideoPlayer extends Lenze.UI.ControlBase{constructor(element,options){super(element,options);this.properties={designerType:{propertyType:"base",type:"string",defaultValue:"Control"},disabled:{propertyType:"base",type:"boolean"},source:{propertyType:"member",type:"string",defaultValue:""},backgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@Transparent"}};this.initialize(Lenze.UI.VideoPlayer)}createTemplate(){this.element.innerHTML="";return this.initializeChilds()}_updateColors(changes){this.setColor("backgroundColor")}_updateLayout(changes){if(VisiWin.Utilities.isInDesignMode())return;if(!this.source||this.source.slice(-4)!==".mp4"){this._removeVideo();return}if(this._videoElement!=null&&this._sourceElement!=null&&this._sourceElement.src===this.source)return;this._removeVideo();this._createVideo(this.source);if(this._videoElement==null)return;this.element.appendChild(this._videoElement)}_createVideo(src){this._videoElement=document.createElement("video");this._sourceElement=document.createElement("source");this._videoElement.style.width="100%";this._videoElement.style.height="100%";this._videoElement.controls=true;this._sourceElement.setAttribute("src",src);this._videoElement.appendChild(this._sourceElement)}_removeVideo(){this._removeChildNodesRecursive(this.element);this._videoElement=null;this._sourceElement=null}_removeChildNodesRecursive(node){while(node.hasChildNodes()){this._removeChildNodesRecursive(node.children[0]);node.removeChild(node.children[0])}}}UI.VideoPlayer=VideoPlayer})(UI=Lenze.UI||(Lenze.UI={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var UI;(function(UI){"use strict";class YouTubePlayer extends Lenze.UI.ControlBase{constructor(element,options){super(element,options);this.properties={designerType:{propertyType:"base",type:"string",defaultValue:"Control"},disabled:{propertyType:"base",type:"boolean"},watchCode:{propertyType:"member",type:"string",defaultValue:""},backgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@Transparent"}};this.initialize(Lenze.UI.YouTubePlayer)}createTemplate(){this.element.innerHTML="";return this.initializeChilds()}_updateColors(changes){this.setColor("backgroundColor")}_updateLayout(changes){if(VisiWin.Utilities.isInDesignMode())return;if(Lenze.Strings.isNullOrWhiteSpace(this.watchCode)){this._removeIFrame();return}const link=`https://www.youtube-nocookie.com/embed/${this.watchCode}?controls=1&rel=0&modestbranding=1&mute=1`;if(this._iframeElement!=null&&this._iframeElement.src===link)return;this._removeIFrame();this._iframeElement=this._createIFrame(link);this.element.appendChild(this._iframeElement)}async detach(){if(VisiWin.Utilities.isInDesignMode()||this._iframeElement==null)return await super.detach();this._iframeElement.src="";await super.detach()}_createIFrame(src){const iframe=document.createElement("iframe");iframe.style.width="100%";iframe.style.height="100%";iframe.src=src;iframe.allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture";iframe.allowFullscreen=true;iframe.frameBorder="0";return iframe}_removeIFrame(){while(this.element.hasChildNodes())this.element.removeChild(this.element.children[0]);this._iframeElement=null}}UI.YouTubePlayer=YouTubePlayer})(UI=Lenze.UI||(Lenze.UI={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var UI;(function(UI){"use strict";class PanoramaViewItem extends Lenze.UI.ControlBase{get viewVisible(){return this._viewVisible}set viewVisible(value){if(value==this._viewVisible)return;const oldValue=this._viewVisible;this._viewVisible=value;this.dispatchNotifyPropertyChanged("boolean","viewVisible",value,oldValue)}constructor(element,options){super(element,options);this.properties={designerType:{propertyType:"base",type:"string",defaultValue:"Control"},registerSourceId:{propertyType:"base",type:"string",defaultValue:"PanoramaViewItem"},view:{propertyType:"member",type:"string"},indicatorText:{propertyType:"member",type:"string",defaultValue:""},indicatorLocalizableText:{propertyType:"member",type:"string",defaultValue:""},indicatorSymbol:{propertyType:"member",type:"string"},indicatorIconFont:{propertyType:"member",type:"string",defaultValue:"material-icons"},indicatorSymbolType:{propertyType:"member",type:"string",defaultValue:"Icon"},authorizationRight:{propertyType:"base",type:"string"},viewVisible:{propertyType:"member",type:"boolean",defaultValue:true}};this.initialize(Lenze.UI.PanoramaViewItem)}}UI.PanoramaViewItem=PanoramaViewItem})(UI=Lenze.UI||(Lenze.UI={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var UI;(function(UI){"use strict";class PanoramaView extends Lenze.UI.VariableBase{constructor(element,options){super(element,options);this.properties={designerType:{propertyType:"base",type:"string",defaultValue:"Control"},registerTargetId:{propertyType:"base",defaultValue:"PanoramaViewItem"},alignArrows:{propertyType:"member",type:"string",defaultValue:"Center"},leftIconFont:{propertyType:"child",type:"string",child:"_controlsArrowLeftIcon",childProperty:"iconFont",defaultValue:"material-icons"},leftSymbol:{propertyType:"child",type:"string",child:"_controlsArrowLeftIcon",childProperty:"symbol",defaultValue:"arrow_back"},leftSymbolType:{propertyType:"child",type:"string",child:"_controlsArrowLeftIcon",childProperty:"symbolType",defaultValue:"Icon"},leftSymbolSize:{propertyType:"child",type:"string",child:"_controlsArrowLeftIcon",childProperty:"symbolSize",defaultValue:"65px"},leftSymbolMargin:{propertyType:"child",type:"string",child:"_controlsArrowLeftIcon",childProperty:"symbolMargin",defaultValue:"0px 0px 0px 0px"},rightIconFont:{propertyType:"child",type:"string",child:"_controlsArrowRightIcon",childProperty:"iconFont",defaultValue:"material-icons"},rightSymbol:{propertyType:"child",type:"string",child:"_controlsArrowRightIcon",childProperty:"symbol",defaultValue:"arrow_forward"},rightSymbolType:{propertyType:"child",type:"string",child:"_controlsArrowRightIcon",childProperty:"symbolType",defaultValue:"Icon"},rightSymbolSize:{propertyType:"child",type:"string",child:"_controlsArrowRightIcon",childProperty:"symbolSize",defaultValue:"65px"},rightSymbolMargin:{propertyType:"child",type:"string",child:"_controlsArrowRightIcon",childProperty:"symbolMargin",defaultValue:"0px 0px 0px 0px"},alignIndicators:{propertyType:"member",type:"string",defaultValue:"End"},indicatorContainerHeight:{propertyType:"member",type:"string",defaultValue:"auto"},indicatorContainerWidth:{propertyType:"member",type:"string",defaultValue:"auto"},indicatorContainerMargin:{propertyType:"member",type:"string",defaultValue:"10px 0px"},indicatorContainerPadding:{propertyType:"member",type:"string",defaultValue:"0px"},indicatorContainerBorderWidth:{propertyType:"member",type:"string",defaultValue:"1px"},indicatorContainerBorderStyle:{propertyType:"member",type:"string",defaultValue:"none"},indicatorContainerBorderRadius:{propertyType:"member",type:"string",defaultValue:"0px"},indicatorHeight:{propertyType:"member",type:"string",defaultValue:"15px"},indicatorWidth:{propertyType:"member",type:"string",defaultValue:"15px"},indicatorMargin:{propertyType:"member",type:"string",defaultValue:"0px 5px"},indicatorPadding:{propertyType:"member",type:"string",defaultValue:"0px"},indicatorBorderWidth:{propertyType:"member",type:"string",defaultValue:"2px"},indicatorBorderStyle:{propertyType:"member",type:"string",defaultValue:"solid"},indicatorBorderRadius:{propertyType:"member",type:"string",defaultValue:"7.5px"},indicatorShowText:{propertyType:"member",type:"boolean",defaultValue:false},indicatorTextFontClass:{propertyType:"member",type:"string",defaultValue:"Roboto16"},indicatorTextFontSize:{propertyType:"member",type:"string"},indicatorTextFontWeight:{propertyType:"member",type:"string"},indicatorTextLineClamp:{propertyType:"member",type:"number",defaultValue:1},indicatorTextLineHeight:{propertyType:"member",type:"number",defaultValue:1.5},indicatorTextAlignment:{propertyType:"member",type:"string",defaultValue:"Center"},indicatorTextContrast:{propertyType:"member",type:"number",defaultValue:1},indicatorTextHeight:{propertyType:"member",type:"string",defaultValue:"auto"},indicatorTextWidth:{propertyType:"member",type:"string",defaultValue:"100%"},indicatorTextMargin:{propertyType:"member",type:"string",defaultValue:"0px"},indicatorTextPadding:{propertyType:"member",type:"string",defaultValue:"0px"},indicatorTextWrapping:{propertyType:"member",type:"string",defaultValue:"NoWrap"},indicatorTextTrimming:{propertyType:"member",type:"string",defaultValue:"Ellipsis"},indicatorTextUppercase:{propertyType:"member",type:"boolean",defaultValue:false},indicatorShowSymbol:{propertyType:"member",type:"boolean",defaultValue:false},indicatorSymbolMargin:{propertyType:"member",type:"string",defaultValue:"0px"},indicatorSymbolPosition:{propertyType:"member",type:"string",defaultValue:"Left"},indicatorSymbolSize:{propertyType:"member",type:"string",defaultValue:"24px"},views:{propertyType:"member",type:"string",defaultValue:true},swipeEnabled:{propertyType:"member",type:"boolean",defaultValue:true},arrowsEnabled:{propertyType:"member",type:"boolean",defaultValue:true},arrowsVisible:{propertyType:"member",type:"boolean",defaultValue:true},viewIndicatorsEnabled:{propertyType:"member",type:"boolean",defaultValue:true},viewIndicatorsVisible:{propertyType:"member",type:"boolean",defaultValue:true},carouselEnabled:{propertyType:"member",type:"boolean",defaultValue:true},transitionDuration:{propertyType:"member",type:"number",defaultValue:400},detachInactiveView:{propertyType:"member",type:"boolean",defaultValue:false},arrowColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},disabledArrowColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledForegroundColor"},indicatorContainerBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@Transparent"},indicatorContainerBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"},indicatorUnselectedColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@Transparent"},indicatorSelectedColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@PrimaryColor"},indicatorUnselectedForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},indicatorSelectedForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@AltForegroundColor"},indicatorUnselectedSymbolColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},indicatorSelectedSymbolColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@AltForegroundColor"},indicatorBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@PrimaryDarkColor"},backgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@Transparent"},borderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"}};this._allViewItems=[];this._currentViewItems=[];this._hammer=null;this._hammerSwipe=null;this._viewIndex=0;this._oldIndex=0;this._lastVarIndex=-1;this._animationBusy=false;this._firstViewCurrent=true;this._swipeInvalid=false;this._viewClass="lenze-panoramaview__body-view";this._shrinkClass="lenze-panoramaview__body-shrink";this._shrinkClassLeft=`${this._shrinkClass}-left`;this._shrinkClassRight=`${this._shrinkClass}-right`;this._growClassLeft="lenze-panoramaview__grow-left";this._growClassRight="lenze-panoramaview__grow-right";this._indicatorClass="lenze-panoramaview__viewindicator";this._cursorDisabledClass="lenze-panoramaview__cursor-disabled";this.initialize(Lenze.UI.PanoramaView)}registerChild(controlType,action,element,options){if(action!==this.registerTargetId)return true;if(element&&element.winControl)this._allViewItems.push(element.winControl);return false}createTemplate(){this._body=document.createElement("div");this._body.classList.add("lenze-panoramaview__body");this._body.innerHTML=`\n                <div class="${this._viewClass}" data-win-control="VisiWin.UI.Region"></div>\n                <div class="${this._viewClass}" data-win-control="VisiWin.UI.Region"></div>\n            `;this._region2Element=this._body.firstElementChild;this._region1Element=this._region2Element.nextElementSibling;if(VisiWin.AppServices.NavigationService.preloadingObject.preloadingEnable==false||VisiWin.AppServices.NavigationService.preloadingObject.preloadingEnable==true&&VisiWin.AppServices.NavigationService.preloadingObject.preloadingReady==true){this._region2Element=this._body.removeChild(this._region2Element)}this.element.appendChild(this._body);this._controls=document.createElement("div");this._controls.classList.add("lenze-panoramaview__controls");this._controls.innerHTML=`\n                <div class="lenze-panoramaview__arrow">\n                    <div class="lenze-panoramaview__arrow-icon" data-win-control="VisiWin.UI.Symbol"></div>\n                </div>\n                <div class="lenze-panoramaview__viewindicators"></div>\n                <div class="lenze-panoramaview__arrow">\n                    <div class="lenze-panoramaview__arrow-icon" data-win-control="VisiWin.UI.Symbol"></div>\n                </div>\n            `;this._controlsArrowLeft=this._controls.firstElementChild;this._controlsArrowLeftIcon=this._controlsArrowLeft.firstElementChild;this._controlsViewIndicators=this._controlsArrowLeft.nextElementSibling;this._controlsArrowRight=this._controlsViewIndicators.nextElementSibling;this._controlsArrowRightIcon=this._controlsArrowRight.firstElementChild;this.element.appendChild(this._controls);let controlId=this.element.id;if(controlId!==""){this._region1Element.id=`${controlId}-panorama-region1`;this._region2Element.id=`${controlId}-panorama-region2`}return this.processElements([this._region1Element,this._region2Element,this._controlsArrowLeftIcon,this._controlsArrowRightIcon])}createHandler(){if(VisiWin.Utilities.isInDesignMode()){this._childPropertyChangeHandler=this._onChildItemPropertyChangeAsync.bind(this);return}this._navigationService=VisiWin.AppServices.NavigationService;this._preloadingChangedHandler=this._onPreloadingChanged.bind(this);this._navigationService.addEventListener("preloadingchange",this._preloadingChangedHandler);this._variableService=VisiWin.System.DataAccess.VariableService.getService();this._userService=VisiWin.System.UserManagement.UserManagementService.getService();this._animationEndHandler=this._movePanoramaEnd.bind(this);this._shiftRightBound=this._shiftRight.bind(this);this._shiftLeftBound=this._shiftLeft.bind(this);this._hammerInputHandler=this._onHammerInput.bind(this);this._childPropertyChangeHandler=this._onChildItemPropertyChangeAsync.bind(this);this._userChangeHandler=this._onUserChangeAsync.bind(this);this._hammer=new Hammer.Manager(this.element);this._hammer.set({enable:true,domEvents:true});this._hammerSwipe=new Hammer.Swipe({direction:Hammer.DIRECTION_HORIZONTAL});this._hammer.add(this._hammerSwipe);this._hammer.on("hammer.input",this._hammerInputHandler);this._userService.UserLoggedOn.add(this._userChangeHandler)}dispose(){if(VisiWin.Utilities.isInDesignMode())return super.dispose();this._hammer.remove(this._hammerSwipe);this._hammer.off("hammer.input",this._hammerInputHandler);this._hammer.destroy();this._userService.UserLoggedOn.remove(this._userChangeHandler);this._allViewItems.forEach(x=>x.removeEventListener("notifyPropertyChanged",this._childPropertyChangeHandler));return super.dispose()}_updateColors(changes){this.setColor("backgroundColor");this.setColor("borderColor");this.setColor(this.arrowsEnabled&&!this._carouselMinReached?"arrowColor":"disabledArrowColor","foregroundColor",undefined,"_controlsArrowLeftIcon");this.setColor(this.arrowsEnabled&&!this._carouselMaxReached?"arrowColor":"disabledArrowColor","foregroundColor",undefined,"_controlsArrowRightIcon");this._updateControlArrowsCursor();this._controlsViewIndicators.style.backgroundColor=this.getThemeColor(this.indicatorContainerBackgroundColor);this._controlsViewIndicators.style.borderColor=this.getThemeColor(this.indicatorContainerBorderColor);if(this._controlsViewIndicators.children==null||this._controlsViewIndicators.children.length==0)return;for(let i=0;i<this._controlsViewIndicators.children.length;i++){const indicator=this._controlsViewIndicators.children[i];indicator.style.borderColor=this.getThemeColor(this.indicatorBorderColor);const label=indicator.querySelector(`[data-win-control="${Lenze.Controls.getType(VisiWin.UI.Label)}"]`);const isCurrentView=i===this._viewIndex;if(isCurrentView)indicator.setAttribute("selected","");else indicator.removeAttribute("selected");indicator.style.backgroundColor=this.getThemeColor(isCurrentView?this.indicatorSelectedColor:this.indicatorUnselectedColor);if(label!=null){label.winControl.labelForegroundColor=isCurrentView?this.indicatorSelectedForegroundColor:this.indicatorUnselectedForegroundColor;label.winControl.symbolForegroundColor=isCurrentView?this.indicatorSelectedSymbolColor:this.indicatorUnselectedSymbolColor}}}_updateLayout(changes){if(changes.changeName==="value"){const newValue=Number(changes.newValue);if(isNaN(newValue))return;if(!this._animationBusy)this._setIndex=newValue;else this._lastVarIndex=newValue}if(changes.changeType==="lifeCycle"&&changes.changeName==="initialized"&&this._hasViews(this._allViewItems)){this._allViewItems=this._allViewItems.filter(item=>!Lenze.Strings.isNullOrWhiteSpace(item.view));this._allViewItems.forEach(x=>x.addEventListener("notifyPropertyChanged",this._childPropertyChangeHandler));if(this._allViewItems.length>0){this._region1Element.winControl.viewName=this._allViewItems[0].view}this._updateSwipeEvent();this._updateCurrentViewsAsync()}else if(changes.changeType==="property"){if(changes.changeName==="arrowsVisible"||changes.changeName==="arrowsEnabled"||changes.changeName==="alignArrows")this._updateControlArrows();if(changes.changeName.toLowerCase().includes("indicator"))this._updateIndicators();if(changes.changeName==="swipeEnabled")this._updateSwipeEvent();this._updateColors(null)}else this._updateColors(null)}shiftRight(modifier=null){const safeModifier=Math.max(1,+(modifier!==null&&modifier!==void 0?modifier:1));this._modifyIndexBy(safeModifier)}shiftLeft(modifier=null){const safeModifier=Math.max(1,+(modifier!==null&&modifier!==void 0?modifier:1));this._modifyIndexBy(safeModifier*-1)}get canUpdateIndex(){return!this._animationBusy&&this._hasViews(this._currentViewItems)}_onPreloadingChanged(args){var _a,_b;if(args.detail.preloadingPercent==100&&args.detail.preloadingReady==true&&args.detail.preloadingEnable==true){(_b=(_a=this._region2Element)===null||_a===void 0?void 0:_a.parentNode)===null||_b===void 0?void 0:_b.removeChild(this._region2Element)}}_shiftRight(event){var _a;event.preventDefault();(_a=event.srcEvent)===null||_a===void 0?void 0:_a.stopPropagation();if(this._swipeInvalid)return;this._modifyIndexBy(1)}_shiftLeft(event){var _a;event.preventDefault();(_a=event.srcEvent)===null||_a===void 0?void 0:_a.stopPropagation();if(this._swipeInvalid)return;this._modifyIndexBy(-1)}_startedOnValidElement(target){var _a;VisiWin.AppServices.Impl.LenzeKeyboardService.pointerElementName=(_a=target===null||target===void 0?void 0:target.winControl)===null||_a===void 0?void 0:_a.className;const blackListOfControls=[Lenze.Controls.getType(Lenze.UI.PanoramaView),Lenze.Controls.getType(VisiWin.UI.Slider),Lenze.Controls.getType(VisiWin.UI.Switch),Lenze.Controls.getType(VisiWin.UI.DropDownBox),Lenze.Controls.getType(Lenze.UI.XYChart),Lenze.Controls.getType(Lenze.UI.Logbook),Lenze.Controls.getType(Lenze.UI.AlarmList),Lenze.Controls.getType(Lenze.UI.CertificateList),Lenze.Controls.getType(Lenze.UI.FunctionTree),Lenze.Controls.getType(Lenze.UI.NetworkTree),Lenze.Controls.getType(Lenze.UI.LanguageSelector)];let x=Lenze.Controls.getParentControl(target,blackListOfControls);if(x!==Lenze.Controls.getType(Lenze.UI.PanoramaView)){return false}else{return true}}_modifyIndexBy(modifier){this._setIndex=this._viewIndex+modifier}_hasViews(value){return value!=null&&value.length>0}get _carouselMinReached(){return!this.carouselEnabled&&this._viewIndex===0}get _carouselMaxReached(){return!this.carouselEnabled&&this._viewIndex===this._currentViewItems.length-1}_indexInBounds(length,newIndex){return length>0?newIndex>=0&&newIndex<length:false}set _setIndex(newIndex){if(!this.canUpdateIndex||this._viewIndex==newIndex||this._animationBusy)return;const oldIndex=this._viewIndex;const length=this._currentViewItems.length;if(!this._indexInBounds(length,newIndex)){if(!this.carouselEnabled)return;this._viewIndex=newIndex<0?length-1:0}else{this._viewIndex=newIndex}this._oldIndex=oldIndex;this._updateVariableWithIndexAsync();this._movePanorama()}_movePanorama(){if(this._animationBusy)return;if(this._oldIndex===this._viewIndex)return;this._animationBusy=true;const currentRegion=this._body.firstElementChild;const newRegion=this._newRegion();this._shrinkRegion(currentRegion,newRegion);this._insertRegion(newRegion);currentRegion.addEventListener("animationend",this._animationEndHandler)}_movePanoramaEnd(){if(!this._animationBusy)return;const viewToRemove=this._firstViewCurrent?this._region2Element:this._region1Element;viewToRemove.removeEventListener("animationend",this._animationEndHandler);this._removeShrinkedRegion(viewToRemove);const newView=this._firstViewCurrent?this._region1Element:this._region2Element;newView.classList.remove(this._growClassLeft,this._growClassRight);this._updateColors(null);this._animationBusy=false;if(this._lastVarIndex!==-1){const lastVar=this._lastVarIndex;this._lastVarIndex=-1;this._setIndex=lastVar}}_removeShrinkedRegion(region){if(this.detachInactiveView){region.winControl.viewName="views/EmptyView.html"}else{region.winControl.viewName=""}if(region.parentNode==null)return;region.parentNode.removeChild(region)}_insertRegion(newRegion){this._body.appendChild(newRegion)}_shrinkRegion(element,newElement){const transitionDuration=`${Math.max(this.transitionDuration,1)}ms`;element.style.animationDuration=transitionDuration;newElement.style.animationDuration=transitionDuration;let shrinkClass;if(Math.abs(this._oldIndex-this._viewIndex)>1)shrinkClass=this._viewIndex===this._currentViewItems.length-1?this._shrinkClassRight:this._shrinkClassLeft;else shrinkClass=this._oldIndex>this._viewIndex?this._shrinkClassRight:this._shrinkClassLeft;newElement.classList.add(shrinkClass===this._shrinkClassLeft?this._growClassLeft:this._growClassRight);element.classList.add(shrinkClass)}async _updateVariableWithIndexAsync(){if(VisiWin.Utilities.isInDesignMode()||Lenze.Strings.isNullOrWhiteSpace(this.variableName))return;if(this.value===this._viewIndex)return;await this._variableService.SetValueAsync(this.variableName,this._viewIndex)}_newRegion(){const region=this._firstViewCurrent?this._region2Element:this._region1Element;this._firstViewCurrent=!this._firstViewCurrent;const hist=VisiWin.AppServices.NavigationService.getViewHistory();for(let i=0;i<hist.length;i++){if(hist[i].isView){if(hist[i].viewLocation===this._currentViewItems[this._viewIndex].view){const aTag=window.document.createElement("a");aTag.href=this._currentViewItems[this._viewIndex].view;const uri=aTag.href.toLowerCase();let base=WinJS.UI.Pages["_viewMap"];delete base[uri];base=WinJS.UI.Fragments["_cacheStore"];delete base[uri]}}}region.winControl.viewName=this._currentViewItems[this._viewIndex].view;region.classList.remove(this._shrinkClassLeft,this._shrinkClassRight);return region}async _updateCurrentViewsAsync(){this._body.style.display="block";const isInDesignMode=VisiWin.Utilities.isInDesignMode();const currentRights=!isInDesignMode?this._userService.CurrentUser.RightNames:"";this._currentViewItems=isInDesignMode?this._allViewItems:this._allViewItems.filter(x=>x.viewVisible&&(Lenze.Strings.isNullOrWhiteSpace(x.authorizationRight)||currentRights.includes(x.authorizationRight)));const currentRegion=(this._firstViewCurrent?this._region1Element:this._region2Element).winControl;const otherRegion=(this._region1Element.winControl===currentRegion?this._region2Element:this._region1Element).winControl;const currentViewIndex=this._currentViewItems.findIndex(x=>x.view===currentRegion.viewName);this._updateControlArrows();this._updateIndicators();this._updateColors(null);if(this.detachInactiveView){otherRegion.viewName="views/EmptyView.html"}else{otherRegion.viewName=""}if(currentViewIndex===-1){this._viewIndex=-1;if(this.detachInactiveView){currentRegion.viewName="views/EmptyView.html"}else{currentRegion.viewName=""}this._setIndex=0;if(this._currentViewItems.length===0)this._body.style.display="none"}else{this._viewIndex=currentViewIndex;this._updateColors(null);if(!isInDesignMode)await this._updateVariableWithIndexAsync()}}_updateControlArrows(){this._controlsArrowLeftIcon.removeEventListener("pointerup",this._shiftLeftBound);this._controlsArrowRightIcon.removeEventListener("pointerup",this._shiftRightBound);if(!this.arrowsVisible){if(this._controls.contains(this._controlsArrowLeft))this._controls.removeChild(this._controlsArrowLeft);if(this._controls.contains(this._controlsArrowRight))this._controls.removeChild(this._controlsArrowRight);return}if(this._controls.firstChild!=this._controlsArrowLeft){this._controls.insertBefore(this._controlsArrowLeft,this._controls.firstChild);this._controls.appendChild(this._controlsArrowRight)}this._controlsArrowLeft.style.alignItems=Lenze.Css.getCssAlignItems(this.alignArrows);this._controlsArrowRight.style.alignItems=Lenze.Css.getCssAlignItems(this.alignArrows);this._updateControlArrowsCursor();if(!this.arrowsEnabled)return;this._controlsArrowLeftIcon.addEventListener("pointerup",this._shiftLeftBound);this._controlsArrowRightIcon.addEventListener("pointerup",this._shiftRightBound)}_updateControlArrowsCursor(){this._setDisabledOnArrowIcon(this._controlsArrowLeftIcon,!this.arrowsEnabled||this._carouselMinReached);this._setDisabledOnArrowIcon(this._controlsArrowRightIcon,!this.arrowsEnabled||this._carouselMaxReached)}_setDisabledOnArrowIcon(iconElement,disabled){if(disabled)iconElement.classList.add(this._cursorDisabledClass);else iconElement.classList.remove(this._cursorDisabledClass)}_updateSwipeEvent(){if(VisiWin.Utilities.isInDesignMode())return;this._hammer.off("swipeleft",this._shiftRightBound);this._hammer.off("swiperight",this._shiftLeftBound);if(!this.swipeEnabled)return;this._hammer.on("swipeleft",this._shiftRightBound);this._hammer.on("swiperight",this._shiftLeftBound)}_updateIndicators(){this._controlsViewIndicators.style.alignSelf=Lenze.Css.getCssAlignItems(this.alignIndicators);this._controlsViewIndicators.style.height=this.indicatorContainerHeight;this._controlsViewIndicators.style.width=this.indicatorContainerWidth;this._controlsViewIndicators.style.margin=this.indicatorContainerMargin;this._controlsViewIndicators.style.padding=this.indicatorContainerPadding;this._controlsViewIndicators.style.borderWidth=this.indicatorContainerBorderWidth;this._controlsViewIndicators.style.borderStyle=this.indicatorContainerBorderStyle;this._controlsViewIndicators.style.borderRadius=this.indicatorContainerBorderRadius;while(this._controlsViewIndicators.firstChild){const indicator=this._controlsViewIndicators.firstChild;indicator.onpointerup=null;this._controlsViewIndicators.removeChild(indicator)}if(!this.viewIndicatorsVisible)return;for(let i=0;i<this._currentViewItems.length;i++){const indicator=document.createElement("div");indicator.className=this._indicatorClass;indicator.style.height=this.indicatorHeight;indicator.style.width=this.indicatorWidth;indicator.style.margin=this.indicatorMargin;indicator.style.padding=this.indicatorPadding;indicator.style.borderWidth=this.indicatorBorderWidth;indicator.style.borderStyle=this.indicatorBorderStyle;indicator.style.borderRadius=this.indicatorBorderRadius;if(this.viewIndicatorsEnabled){indicator.onpointerup=(()=>this._setIndex=i);indicator.classList.remove(this._cursorDisabledClass)}else indicator.classList.add(this._cursorDisabledClass);if(!Lenze.Strings.isNullOrWhiteSpace(this._currentViewItems[i].indicatorLocalizableText)||!Lenze.Strings.isNullOrWhiteSpace(this._currentViewItems[i].indicatorText)){Lenze.Dom.createControl(VisiWin.UI.Label,indicator,[],{text:this._currentViewItems[i].indicatorText,localizableText:this._currentViewItems[i].indicatorLocalizableText,symbol:this._currentViewItems[i].indicatorSymbol,iconFont:this._currentViewItems[i].indicatorIconFont,symbolType:this._currentViewItems[i].indicatorSymbolType,showText:this.indicatorShowText,fontClass:this.indicatorTextFontClass,fontSize:this.indicatorTextFontSize,fontWeight:this.indicatorTextFontWeight,lineClamp:this.indicatorTextLineClamp,lineHeight:this.indicatorTextLineHeight,textAlignment:this.indicatorTextAlignment,textContrast:this.indicatorTextContrast,textHeight:this.indicatorTextHeight,textWidth:this.indicatorTextWidth,textMargin:this.indicatorTextMargin,textPadding:this.indicatorTextPadding,textWrapping:this.indicatorTextWrapping,textTrimming:this.indicatorTextTrimming,uppercase:this.indicatorTextUppercase,showSymbol:this.indicatorShowSymbol,symbolMargin:this.indicatorSymbolMargin,symbolPosition:this.indicatorSymbolPosition,symbolSize:this.indicatorSymbolSize,backgroundColor:"transparent",borderColor:"transparent",labelForegroundColor:this.indicatorUnselectedForegroundColor,symbolForegroundColor:this.indicatorUnselectedSymbolColor})}this._controlsViewIndicators.appendChild(indicator)}}_onHammerInput(event){if(!event.isFirst)return;event.srcEvent.stopPropagation();this._swipeInvalid=!this._startedOnValidElement(event.target)}async _onChildItemPropertyChangeAsync(){await this._updateCurrentViewsAsync()}async _onUserChangeAsync(){await this._updateCurrentViewsAsync()}}UI.PanoramaView=PanoramaView})(UI=Lenze.UI||(Lenze.UI={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var UI;(function(UI){"use strict";class ViewBox extends VisiWin.UI.LayoutBase{constructor(element,options){super(element,options);this.properties={designerType:{propertyType:"base",defaultValue:"ContentControl"},overflow:{propertyType:"style",type:"string"},removeMargins:{propertyType:"member",type:"boolean",defaultValue:true},backgroundColor:{propertyType:"memberStyle",type:"string",resourceValue:["getTheme"],defaultValue:"@None"},borderColor:{propertyType:"memberStyle",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"},stretchingMode:{propertyType:"member",type:"string",defaultValue:Lenze.Models.ViewBoxStretchEnum.None},scalingHeight:{propertyType:"member",type:"number",defaultValue:800},scalingWidth:{propertyType:"member",type:"number",defaultValue:1280}};this.initialize(Lenze.UI.ViewBox)}ready(){this._prepareViewBoxContent();this._setStretch();if(VisiWin.Utilities.isInDesignMode())this._setViewBoxPosition(this.element)}resizeHandler(args){clearTimeout(this._resizeHandler);this._resizeHandler=setTimeout(()=>{const contentRect=args[0].contentRect;this._adjustLayout(contentRect.width,contentRect.height)},300)}_adjustLayout(viewBoxWidth,viewBoxHeight){if(VisiWin.Utilities.isInDesignMode())return;try{this._setStretchValues(viewBoxWidth,viewBoxHeight);this._setStretch()}catch(e){console.error(e)}}_setViewBoxPosition(element){let child=element.firstChild;while(child){if(child.winControl){child.style.position="absolute";if(typeof child.winControl.margin!=="undefined")child.winControl.margin="0px";else child.style.margin="0px"}child=child.nextSibling}}_createViewBoxInnerDiv(){const innerDiv=document.createElement("div");innerDiv.className="lenze-viewbox__scalable";VisiWin.Utilities.reparentChildren(this.element,innerDiv);this.element.appendChild(innerDiv);this._innerStretchDiv=innerDiv;return this.processElements([])}_prepareViewBoxContent(){const viewBoxWidth=this.element.offsetWidth;const viewBoxHeight=this.element.offsetHeight;this._createViewBoxInnerDiv();this._setStretchValues(viewBoxWidth,viewBoxHeight)}_setStretchValues(viewBoxWidth,viewBoxHeight){const viewBoxParent=this.element.parentElement;this._pageHeight=viewBoxParent.offsetHeight;this._pageWidth=viewBoxParent.offsetWidth;if(viewBoxWidth!==this._pageWidth||viewBoxHeight!==this._pageHeight){this._scalingWidth=viewBoxWidth;this._scalingHeight=viewBoxHeight;this.element.style.height="100%";this.element.style.width="100%"}this._innerStretchDiv.style.height=this._scalingHeight+"px";this._innerStretchDiv.style.width=this._scalingWidth+"px";const children=this._innerStretchDiv.childNodes;for(let i=0;i<children.length;i++){const child=children[i];if(child.nodeType===1&&child.nodeName==="DIV")child.style.position="absolute"}}_setStretch(){let scaleFactor=1;const scaleFactorX=this._pageWidth/this._scalingWidth;const scaleFactorY=this._pageHeight/this._scalingHeight;switch(this.stretchingMode){case Lenze.Models.ViewBoxStretchEnum.None:this.element.style.display="block";scaleFactor=1;break;case Lenze.Models.ViewBoxStretchEnum.Uniform:scaleFactor=scaleFactorX>scaleFactorY?scaleFactorY:scaleFactorX;break;case Lenze.Models.ViewBoxStretchEnum.UniformToFill:scaleFactor=scaleFactorX<scaleFactorY?scaleFactorX:scaleFactorY;break;case Lenze.Models.ViewBoxStretchEnum.Fill:scaleFactor=0;break}if(scaleFactor>0)this._innerStretchDiv.style.transform="scale("+scaleFactor+")";else this._innerStretchDiv.style.transform="scale("+scaleFactorX+","+scaleFactorY+")";this._innerStretchDiv.style.transformOrigin="left top";this._viewBoxCentered(scaleFactor)}_viewBoxCentered(scaleFactor){if(this.stretchingMode==Lenze.Models.ViewBoxStretchEnum.None)return;const scalableElement=document.getElementsByClassName("lenze-viewbox__scalable")[0];const scalableElementRect=scalableElement.getClientRects();const scalableElementWidth=scalableElementRect.item(0).width;if(this._pageWidth>0)scalableElement.style.marginLeft=String((this._pageWidth-scalableElementWidth)/2)+"px"}}UI.ViewBox=ViewBox})(UI=Lenze.UI||(Lenze.UI={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var UI;(function(UI){"use strict";class MachineDrawing extends Lenze.UI.VariableBase{constructor(element,options){super(element,options);this.properties={designerType:{propertyType:"base",type:"string",defaultValue_DM:"Control"},transitionDuration:{propertyType:"member",type:"number",defaultValue:250},variableName:{propertyType:"base",type:"string"},backgroundColor:{propertyType:"member",type:"string",defaultValue:"@BackgroundColor"},borderColor:{propertyType:"member",type:"string",defaultValue:"@BorderColor"}};this.initialize(Lenze.UI.MachineDrawing)}createTemplate(){this.element.innerHTML="";this._layoutElement=document.createElement("div");this._layoutElement.className="lenze-machinedrawing__layout";this.element.appendChild(this._layoutElement);return this.initializeChilds()}_updateColors(changes){this.setColor(Lenze.Strings.nameof("backgroundColor"));this.setColor(Lenze.Strings.nameof("borderColor"))}_updateLayout(changes){if(VisiWin.Utilities.isInDesignMode())return;if(changes.changeType==="property"&&changes.changeName==="value")this._parseValueAndRender()}_parseValueAndRender(){if(!VisiWin.isArray(this.value)){console.error(`The variable attached to '${MachineDrawing.controlName}' can only be a string array.`);return}this._drawingItems=[];for(let value of this.value){if(Lenze.Strings.isNullOrWhiteSpace(value))continue;const item=Lenze.Models.MachineDrawingItem.fromJS(value);if(!item.isActive)continue;this._drawingItems.push(item)}if(this._drawnElements==null||this._drawingItems.length!==this._drawnElements.length)this._createDrawings();else this._updateDrawings()}_createDrawings(){this._drawnElements=[];this._layoutElement.innerHTML="";for(let item of this._drawingItems){const element=this._createDrawingElement();this._setPropertiesOnDrawingElement(element,item);this._layoutElement.appendChild(element);this._drawnElements.push(element)}}_updateDrawings(){for(let i=0;i<this._drawnElements.length;i++)this._setPropertiesOnDrawingElement(this._drawnElements[i],this._drawingItems[i])}_createDrawingElement(){const div=document.createElement("div");div.className="lenze-machinedrawing__layout-child";div.style.borderWidth="1px";div.style.borderStyle="solid";const actDuration=Math.max(0,this.transitionDuration);div.style.transition=actDuration===0?"none":`transform ${actDuration}ms linear`;return div}_setPropertiesOnDrawingElement(div,drawingItem){div.style.height=`${drawingItem.height}px`;div.style.width=`${drawingItem.width}px`;div.style.transform=`translate(${drawingItem.x}px,${drawingItem.y*-1}px)`;div.style.zIndex=drawingItem.layer.toString();div.innerText=drawingItem.text;div.style.backgroundColor=this.getThemeColor(drawingItem.backgroundColor);div.style.color=this.getThemeColor(drawingItem.foregroundColor);div.style.borderColor=this.getThemeColor(drawingItem.borderColor)}}UI.MachineDrawing=MachineDrawing})(UI=Lenze.UI||(Lenze.UI={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var UI;(function(UI){"use strict";class Scrollbar extends Lenze.UI.ControlBase{constructor(element,options){super(element,options);this.properties={designerType:{propertyType:"base",type:"string",defaultValue:"Control"},scrollbarEnabled:{propertyType:"member",type:"boolean",defaultValue:true},scrollbarHeight:{propertyType:"member",type:"string",defaultValue:"10px"},scrollbarWidth:{propertyType:"member",type:"string",defaultValue:"10px"},scrollbarBorderWidth:{propertyType:"member",type:"string",defaultValue:"1px"},scrollbarBorderRadius:{propertyType:"member",type:"string",defaultValue:"10px"},scrollbarBorderStyle:{propertyType:"member",type:"string",defaultValue:"none"},scrollbarBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@Transparent"},scrollbarBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"},trackBorderWidth:{propertyType:"member",type:"string",defaultValue:"1px"},trackBorderRadius:{propertyType:"member",type:"string",defaultValue:"10px"},trackBorderStyle:{propertyType:"member",type:"string",defaultValue:"none"},trackBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ChromeMediumLow"},trackBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ChromeHigh"},thumbBorderWidth:{propertyType:"member",type:"string",defaultValue:"1px"},thumbBorderRadius:{propertyType:"member",type:"string",defaultValue:"10px"},thumbBorderStyle:{propertyType:"member",type:"string",defaultValue:"none"},thumbBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@SecondaryLightColor"},thumbBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@SecondaryDarkColor"}};this.initialize(Lenze.UI.Scrollbar)}createTemplate(){this.element.innerHTML=``;return this.initializeChilds()}_updateLayout(changes){if(this.scrollbarEnabled)document.body.classList.add("lenze-scrollbar-enabled");else document.body.classList.remove("lenze-scrollbar-enabled");document.body.style.setProperty("--scroll-background-height",this.scrollbarHeight);document.body.style.setProperty("--scroll-background-width",this.scrollbarWidth);document.body.style.setProperty("--scroll-background-borderwidth",this.scrollbarBorderWidth);document.body.style.setProperty("--scroll-background-borderradius",this.scrollbarBorderRadius);document.body.style.setProperty("--scroll-background-borderstyle",this.scrollbarBorderStyle);document.body.style.setProperty("--scroll-track-borderwidth",this.trackBorderWidth);document.body.style.setProperty("--scroll-track-borderradius",this.trackBorderRadius);document.body.style.setProperty("--scroll-track-borderstyle",this.trackBorderStyle);document.body.style.setProperty("--scroll-thumb-borderwidth",this.thumbBorderWidth);document.body.style.setProperty("--scroll-thumb-borderradius",this.thumbBorderRadius);document.body.style.setProperty("--scroll-thumb-borderstyle",this.thumbBorderStyle)}_updateColors(changes){document.body.style.setProperty("--scroll-backgroundcolor",this.getThemeColor(this.scrollbarBackgroundColor));document.body.style.setProperty("--scroll-background-bordercolor",this.getThemeColor(this.scrollbarBorderColor));document.body.style.setProperty("--scroll-track-backgroundcolor",this.getThemeColor(this.trackBackgroundColor));document.body.style.setProperty("--scroll-track-bordercolor",this.getThemeColor(this.trackBorderColor));document.body.style.setProperty("--scroll-thumb-backgroundcolor",this.getThemeColor(this.thumbBackgroundColor));document.body.style.setProperty("--scroll-thumb-bordercolor",this.getThemeColor(this.thumbBorderColor))}}UI.Scrollbar=Scrollbar})(UI=Lenze.UI||(Lenze.UI={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var UI;(function(UI){"use strict";class RecipesControl extends Lenze.UI.ControlBase{constructor(element,options){super(element,options);this._recipeClassName="lenze-recipescontrol__recipe";this._recipeNameClassName="lenze-recipescontrol__recipe-name";this._recipeIndicatorClassName="lenze-recipescontrol__recipe-indicator";this._activeRecipeClassName="lenze-recipescontrol__recipe-active";this.properties={designerType:{propertyType:"base",type:"string",defaultValue:"Control"},recipeListVariableName:{propertyType:"member",type:"string",defaultValue:""},recipeNameVariableName:{propertyType:"member",type:"string",defaultValue:""},activeRecipeVariableName:{propertyType:"member",type:"string",defaultValue:""},filterTextVarInName:{propertyType:"member",type:"string"},showIndicator:{propertyType:"member",type:"boolean",defaultValue:true},listItemMargin:{propertyType:"member",type:"string",defaultValue:"0px 8px 8px 8px"},listItemPadding:{propertyType:"member",type:"string",defaultValue:"8px"},listItemFontClass:{propertyType:"member",type:"string",defaultValue:"Label1"},listItemFontSize:{propertyType:"member",type:"string",defaultValue:"16px"},listItemFontWeight:{propertyType:"member",type:"string",defaultValue:"Normal"},listItemLineHeight:{propertyType:"member",type:"string",defaultValue:"24px"},listItemBorderRadius:{propertyType:"member",type:"string",defaultValue:"0px"},listItemBorderStyle:{propertyType:"member",type:"string",defaultValue:"solid"},listItemBorderWidth:{propertyType:"member",type:"string",defaultValue:"1px"},indicatorHeight:{propertyType:"member",type:"string",defaultValue:"10px"},indicatorWidth:{propertyType:"member",type:"string",defaultValue:"10px"},indicatorMargin:{propertyType:"member",type:"string",defaultValue:"0px"},indicatorBorderWidth:{propertyType:"member",type:"string",defaultValue:"1px"},indicatorBorderStyle:{propertyType:"member",type:"string",defaultValue:"None"},indicatorBorderRadius:{propertyType:"member",type:"string",defaultValue:"90px"},backgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BackgroundColor"},borderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"},listItemBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BackgroundColor"},listItemBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"},listItemForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},listItemActiveBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@PrimaryColor"},listItemActiveBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@PrimaryColor"},listItemActiveForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@AltForegroundColor"},indicatorBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@SuccessColor"},indicatorBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"}};this.initialize(Lenze.UI.RecipesControl)}createTemplate(){this.element.innerHTML=``;return this.processElements([])}afterInit(){var _a,_b,_c,_d,_e,_f;if(VisiWin.Utilities.isInDesignMode()){this._addRecipesOnPage();this._setSelectedRecipe("Recipe2");this._updateRecipeListItemsColors();return}this._recipeListChangeHandler=this._onRecipeListChange.bind(this);this._activeRecipeChangeHandler=this._onActiveRecipeChange.bind(this);this._recipeClickHandler=this._onRecipeElementClick.bind(this);this._filterValueChangedHandler=this._onFilterValueChanged.bind(this);this._variableService=VisiWin.System.DataAccess.VariableService.getService();if(Lenze.Strings.isNullOrWhiteSpace(this.recipeListVariableName)||Lenze.Strings.isNullOrWhiteSpace(this.recipeNameVariableName)){console.error("Please enter a variable name for the recipe list and the recipe name. The RecipesControl will otherwise not work.")}else{this._recipeListVariable=this._variableService.GetVariable(this.recipeListVariableName);(_a=this._recipeListVariable)===null||_a===void 0?void 0:_a.AttachAsync();(_b=this._recipeListVariable)===null||_b===void 0?void 0:_b.Change.add(this._recipeListChangeHandler);this._recipeNameVariable=this._variableService.GetVariable(this.recipeNameVariableName);(_c=this._recipeNameVariable)===null||_c===void 0?void 0:_c.AttachAsync();if(!Lenze.Strings.isNullOrWhiteSpace(this.activeRecipeVariableName)){this._activeRecipeVariable=this._variableService.GetVariable(this.activeRecipeVariableName);(_d=this._activeRecipeVariable)===null||_d===void 0?void 0:_d.AttachAsync();(_e=this._activeRecipeVariable)===null||_e===void 0?void 0:_e.Change.add(this._activeRecipeChangeHandler)}}this._filterTextVarIn=Lenze.Dom.getControl(this.filterTextVarInName,Lenze.Controls.getType(VisiWin.UI.TextVarIn));(_f=this._filterTextVarIn)===null||_f===void 0?void 0:_f.addEventListener("notifyPropertyChanged",this._filterValueChangedHandler)}_updateColors(changes){this.setColor("backgroundColor");this.setColor("borderColor");this._updateRecipeListItemsColors()}_updateLayout(changes){this._updateRecipeListItemsLayout()}async attach(){if(!VisiWin.Utilities.isInDesignMode())this._addRecipesOnPage();await super.attach()}dispose(){var _a,_b,_c;if(VisiWin.Utilities.isInDesignMode())return super.dispose();(_a=this._filterTextVarIn)===null||_a===void 0?void 0:_a.removeEventListener("notifyPropertyChanged",this._filterValueChangedHandler);(_b=this._recipeListVariable)===null||_b===void 0?void 0:_b.Change.remove(this._recipeListChangeHandler);(_c=this._activeRecipeVariable)===null||_c===void 0?void 0:_c.Change.remove(this._activeRecipeChangeHandler);return super.dispose()}_addRecipesOnPage(){this._clearRecipesOnPage();this._recipes=this._getCurrentRecipes();for(let i=0;i<this._recipes.length;i++){const recipe=this._recipes[i];const rowElement=document.createElement("div");rowElement.classList.add(this._recipeClassName);const nameElement=document.createElement("div");nameElement.classList.add(this._recipeNameClassName);nameElement.innerText=recipe;rowElement.appendChild(nameElement);if(this._activeRecipeVariable!=null&&this.showIndicator&&recipe===this._activeRecipeVariable.Value||VisiWin.Utilities.isInDesignMode()&&i===2){const indicatorElement=document.createElement("div");indicatorElement.classList.add(this._recipeIndicatorClassName);rowElement.appendChild(indicatorElement)}if(!VisiWin.Utilities.isInDesignMode())rowElement.addEventListener("pointerup",this._recipeClickHandler);this._recipeElements.push(rowElement);this.element.appendChild(rowElement)}this._updateRecipeListItemsColors();this._updateRecipeListItemsLayout()}_clearRecipesOnPage(){while(this.element.firstElementChild){this.element.firstElementChild.removeEventListener("pointerup",this._recipeClickHandler);this.element.removeChild(this.element.firstElementChild)}this._recipes=[];this._recipeElements=[]}_getCurrentRecipes(filter=true,sort=true){var _a;const recipesValue=!VisiWin.Utilities.isInDesignMode()?(_a=this._recipeListVariable)===null||_a===void 0?void 0:_a.Value:"Recipe1;Recipe2;Recipe3;Recipe4;Recipe5;Recipe6;Recipe7;Recipe8;Recipe9";if(!VisiWin.isString(recipesValue)||Lenze.Strings.isNullOrWhiteSpace(recipesValue))return[];const recipes=recipesValue.split(";").filter(recipe=>this._canIncludeRecipe(recipe,filter));if(sort)recipes.sort(this._sortAlphabetically);return recipes}_setSelectedRecipe(recipe){const notEmpty=!Lenze.Strings.isNullOrWhiteSpace(recipe);for(let element of this._recipeElements){element.classList.remove(this._activeRecipeClassName);if(element.firstElementChild==null)continue;if(notEmpty&&element.firstElementChild.innerHTML===recipe)element.classList.add(this._activeRecipeClassName)}}_canIncludeRecipe(recipe,filter){var _a;if(Lenze.Strings.isNullOrWhiteSpace(recipe))return false;if(!filter)return true;const searchValue=(_a=this._filterTextVarIn)===null||_a===void 0?void 0:_a.value;if(Lenze.Strings.isNullOrWhiteSpace(searchValue))return true;return recipe.toLowerCase().includes(searchValue.trim().toLowerCase())}_sortAlphabetically(valueA,valueB){return valueA>valueB?1:valueA<valueB?-1:0}_updateRecipeListItemsLayout(){var _a,_b;if(this._recipeElements==null)return;const updateFontClass=this._oldFontClass!==this.listItemFontClass;const hasOldFontClass=!Lenze.Strings.isNullOrWhiteSpace(this._oldFontClass)&&this._oldFontClass!=="None";const hasNewFontClass=!Lenze.Strings.isNullOrWhiteSpace(this.listItemFontClass)&&this.listItemFontClass!=="None";const oldFontClassLower=(_a=this._oldFontClass)===null||_a===void 0?void 0:_a.toLowerCase();const newFontClassLower=(_b=this.listItemFontClass)===null||_b===void 0?void 0:_b.toLowerCase();for(let element of this._recipeElements){element.style.margin=this.listItemMargin;element.style.padding=this.listItemPadding;element.style.fontSize=hasNewFontClass?"":this.listItemFontSize;element.style.fontWeight=hasNewFontClass?"":this.listItemFontWeight;element.style.lineHeight=hasNewFontClass?"":this.listItemLineHeight;element.style.borderWidth=this.listItemBorderWidth;element.style.borderStyle=this.listItemBorderStyle;element.style.borderRadius=this.listItemBorderRadius;if(element.children.length===2){const indicatorElement=element.lastElementChild;indicatorElement.style.display=this.showIndicator?"block":"none";indicatorElement.style.height=this.indicatorHeight;indicatorElement.style.width=this.indicatorWidth;indicatorElement.style.margin=this.indicatorMargin;indicatorElement.style.borderWidth=this.indicatorBorderWidth;indicatorElement.style.borderStyle=this.indicatorBorderStyle;indicatorElement.style.borderRadius=this.indicatorBorderRadius}if(!updateFontClass)continue;for(let i=element.classList.length-1;i>=0;i--){if(hasOldFontClass&&element.classList.contains(oldFontClassLower))element.classList.remove(oldFontClassLower);if(hasNewFontClass)element.classList.add(newFontClassLower)}}this._oldFontClass=this.listItemFontClass}_updateRecipeListItemsColors(){if(this._recipeElements==null)return;for(let element of this._recipeElements){const isActive=element.classList.contains(this._activeRecipeClassName);element.style.backgroundColor=this.getThemeColor(!isActive?this.listItemBackgroundColor:this.listItemActiveBackgroundColor);element.style.borderColor=this.getThemeColor(!isActive?this.listItemBorderColor:this.listItemActiveBorderColor);element.style.color=this.getThemeColor(!isActive?this.listItemForegroundColor:this.listItemActiveForegroundColor);if(this.showIndicator&&element.children.length===2){const indicatorElement=element.lastElementChild;indicatorElement.style.backgroundColor=this.getThemeColor(this.indicatorBackgroundColor);indicatorElement.style.borderColor=this.getThemeColor(this.indicatorBorderColor)}}}_onRecipeListChange(){if(!this.isAttached)return;this._addRecipesOnPage()}_onActiveRecipeChange(){if(!this.isAttached)return;this._addRecipesOnPage()}async _onRecipeElementClick(args){var _a;const recipe=(_a=args===null||args===void 0?void 0:args.target)===null||_a===void 0?void 0:_a.innerText;this._setSelectedRecipe(recipe);this._updateRecipeListItemsColors();await this._variableService.SetValueAsync(this.recipeNameVariableName,recipe!==null&&recipe!==void 0?recipe:"")}_onFilterValueChanged(args){var _a,_b;if(!this.isAttached||((_a=args===null||args===void 0?void 0:args.detail)===null||_a===void 0?void 0:_a.changeType)!=="property"||((_b=args===null||args===void 0?void 0:args.detail)===null||_b===void 0?void 0:_b.changeName)!=="value")return;this._addRecipesOnPage()}}UI.RecipesControl=RecipesControl})(UI=Lenze.UI||(Lenze.UI={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var UI;(function(UI){"use strict";class VirtualizingTableColumn extends Lenze.UI.ControlBase{set visible(value){let oldValue=this._visible;const newValue=value==="true"?true:value==="false"?false:value;if(oldValue==newValue)return;oldValue=this.visible;this._visible=newValue;this.dispatchNotifyPropertyChanged("property","visible",this.visible,oldValue);this._onVisibilityChange()}get visible(){return this._visible&&(VisiWin.Utilities.isInDesignMode()||this._withinScreenLimit)}get orderByEnabled(){return this._orderByEnabled}set orderByEnabled(value){this._orderByEnabled=value;this.headerSymbol.show=this._orderByEnabled;if(!this._orderByEnabled){this.orderByDesc=null;this.element.classList.add(this._disabledClassname)}else this.element.classList.remove(this._disabledClassname)}get headerTextBlock(){var _a;return(_a=this._headerTextBlock)===null||_a===void 0?void 0:_a.winControl}get headerSymbol(){var _a;return(_a=this._headerSymbol)===null||_a===void 0?void 0:_a.winControl}get orderByDesc(){return this._orderByDesc}set orderByDesc(value){if(this._orderByDesc===value)return;this._orderByDesc=value;this.headerSymbol.element.classList.remove(this._descSymbolClassname,this._ascSymbolClassname);if(this._orderByDesc!=null)this.headerSymbol.element.classList.add(this._orderByDesc===true?this._descSymbolClassname:this._ascSymbolClassname);this._updateColors(null)}constructor(element,options){super(element,options);this._descSymbolClassname="lenze-virtualizingtablecolumn__symbol-desc";this._ascSymbolClassname="lenze-virtualizingtablecolumn__symbol-asc";this._disabledClassname="lenze-virtualizingtablecolumn__sort-disabled";this.properties={designerType:{propertyType:"base",type:"string",defaultValue:"Control"},registerSourceId:{propertyType:"base",type:"string",defaultValue:"VirtualizingTableColumn"},localizableText:{propertyType:"member",type:"string"},defaultText:{propertyType:"member",type:"string"},textAlignment:{propertyType:"child",child:"_headerTextBlock",type:"string",defaultValue:"Center"},lineClamp:{propertyType:"child",child:"_headerTextBlock",type:"number"},textWrapping:{propertyType:"child",child:"_headerTextBlock",type:"string"},textTrimming:{propertyType:"child",child:"_headerTextBlock",type:"string"},iconFont:{propertyType:"child",child:"_headerSymbol",type:"string",defaultValue:"material-icons"},symbol:{propertyType:"child",child:"_headerSymbol",type:"string",defaultValue:"sort"},symbolType:{propertyType:"child",child:"_headerSymbol",type:"string",defaultValue:"Icon"},symbolSize:{propertyType:"child",child:"_headerSymbol",type:"string",defaultValue:"24px"},symbolActiveForegroundColor:{propertyType:"member",type:"string",defaultValue:"@ForegroundColor"},symbolInactiveForegroundColor:{propertyType:"member",type:"string",defaultValue:"@DisabledForegroundColor"},symbolBackgroundColor:{propertyType:"member",type:"string",defaultValue:"@Transparent"},visible:{propertyType:"member",type:"boolean",defaultValue:true},minViewBoxWidth:{propertyType:"member",type:"number",defaultValue:0},fieldName:{propertyType:"member",type:"string"},orderByEnabled:{propertyType:"member",type:"boolean",defaultValue:true},visibilitychanged:{propertyType:"event",Group:"Event"}};this._orderByEnabled=false;this._visible=true;this._orderByDesc=null;this._withinScreenLimit=true;this._resizeTimeoutId=null;this.initialize(Lenze.UI.VirtualizingTableColumn)}createTemplate(){this.element.innerHTML=`\n                <div class="lenze-virtualizingtablecolumn__text" data-win-control="VisiWin.UI.TextBlock"></div>\n                <div class="lenze-virtualizingtablecolumn__symbol" data-win-control="VisiWin.UI.Symbol"></div>\n            `;this._headerTextBlock=this.element.firstElementChild;this._headerSymbol=this._headerTextBlock.nextElementSibling;return this.processElements([this._headerTextBlock,this._headerSymbol])}afterInit(){this._withinScreenLimit=this._isScreenSizeOk();this._resizeHandler=this._onResize.bind(this);this.headerSymbol.show=this._orderByEnabled}attach(){if(!VisiWin.Utilities.isInDesignMode()){window.addEventListener("resize",this._resizeHandler,true);this._onResizeEnd()}return super.attach()}detach(){if(!VisiWin.Utilities.isInDesignMode()){if(this._resizeTimeoutId!=null){clearTimeout(this._resizeTimeoutId);this._resizeTimeoutId=null}window.removeEventListener("resize",this._resizeHandler,true)}return super.detach()}_updateLayout(changes){this.headerTextBlock.text=this.defaultText;this.headerTextBlock.localizableText=this.localizableText}_updateColors(changes){this.headerSymbol.foregroundColor=this._orderByDesc===null?this.symbolInactiveForegroundColor:this.symbolActiveForegroundColor;this.headerSymbol.backgroundColor=this.symbolBackgroundColor}_onResize(args){if(this._resizeTimeoutId!=null){clearTimeout(this._resizeTimeoutId);this._resizeTimeoutId=null}this._resizeTimeoutId=setTimeout(()=>this._onResizeEnd(),500)}_onResizeEnd(){this._withinScreenLimit=this._isScreenSizeOk();this._onVisibilityChange()}_isScreenSizeOk(){const safeMinSize=Math.max(this.minViewBoxWidth,0);const screenWidth=window.innerWidth;return screenWidth>=safeMinSize}_onVisibilityChange(){this.dispatchEvent(VirtualizingTableColumn.visibilityChangedEventName,{visible:this.visible})}}VirtualizingTableColumn.visibilityChangedEventName="visibilitychanged";UI.VirtualizingTableColumn=VirtualizingTableColumn})(UI=Lenze.UI||(Lenze.UI={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var UI;(function(UI){"use strict";class RefreshControl extends Lenze.UI.VariableBase{constructor(element,options){super(element,options);this.properties={designerType:{propertyType:"base",type:"string",defaultValue:"Control"},variableName:{propertyType:"base",type:"string"}};this.initialize(Lenze.UI.RefreshControl)}_updateColors(changes){this.setColor("backgroundColor")}_updateLayout(changes){if(VisiWin.Utilities.isInDesignMode())return;if(changes.changeType==="property"&&changes.changeName==="value")this._onVariableChange()}afterInit(){if(VisiWin.Utilities.isInDesignMode())return;this._languageChangedHandler=this._onLanguageChange.bind(this);this._languageService=VisiWin.System.Language.LanguageService.getService()}async attach(){if(VisiWin.Utilities.isInDesignMode())return await super.attach();this._languageService.LanguageChanged.add(this._languageChangedHandler);await super.attach()}async detach(){if(VisiWin.Utilities.isInDesignMode())return await super.detach();this._languageService.LanguageChanged.remove(this._languageChangedHandler);await super.detach()}_onVariableChange(){if(this._oldVariableValue===undefined||this.value===this._oldVariableValue){this._oldVariableValue=this.value;return}this._refresh()}_onLanguageChange(){if(this._oldLCID===undefined||this._languageService.CurrentLCID===this._oldLCID){this._oldLCID=this._languageService.CurrentLCID;return}this._refresh()}_refresh(){setTimeout(_=>window.location.reload(),500)}}UI.RefreshControl=RefreshControl})(UI=Lenze.UI||(Lenze.UI={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var UI;(function(UI){"use strict";class VariablesExample extends Lenze.UI.ControlBase{constructor(element,options){super(element,options);this.properties={designerType:{propertyType:"base",type:"string",defaultValue:"Control"},variableAName:{propertyType:"member",type:"string",defaultValue:"VariableA"}};this.initialize(Lenze.UI.VariablesExample)}createTemplate(){this.element.innerHTML="";return this.initializeChilds()}async attach(){var _a,_b;await super.attach();if(Lenze.Strings.isNullOrWhiteSpace(this.variableAName)){console.error("Please enter a valid variable name for variableA.")}else{this._variableAVariable=this._variableService.GetVariable(this.variableAName);(_a=this._variableAVariable)===null||_a===void 0?void 0:_a.Change.add(this._variableAChangeHandler);await((_b=this._variableAVariable)===null||_b===void 0?void 0:_b.AttachAsync())}this._updateContent()}afterInit(){if(VisiWin.Utilities.isInDesignMode())return;this._variableAChangeHandler=this._variableAVariableChangeAsync.bind(this);this._variableService=VisiWin.System.DataAccess.VariableService.getService()}dispose(){return super.dispose()}detach(){var _a,_b;(_a=this._variableAVariable)===null||_a===void 0?void 0:_a.Change.remove(this._variableAChangeHandler);(_b=this._variableAVariable)===null||_b===void 0?void 0:_b.Detach();return super.detach()}async _variableAVariableChangeAsync(e){if(e.Source!==VisiWin.System.DataAccess.ChangeSource.Configuration){this._updateContent()}}_updateContent(){var _a;this.element.innerHTML=`<p>${(_a=this._variableAVariable)===null||_a===void 0?void 0:_a.Value}</p>`}}UI.VariablesExample=VariablesExample})(UI=Lenze.UI||(Lenze.UI={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var UI;(function(UI){"use strict";class LicenseList extends Lenze.UI.ListBase{constructor(element,options){super(element,options);this.properties={designerType:{propertyType:"base",type:"string",defaultValue:"Control"},visualizationBudget:{propertyType:"member",type:"string",defaultValue:"FAST UI"},visualizationNoteText:{propertyType:"member",type:"string",defaultValue:"Note: 2 clients are included per default."},visualizationNoteLocalizableText:{propertyType:"member",type:"string"},slideOutAuthorizationRight:{propertyType:"member",type:"string",defaultValue:""},detailsAuthorizationRight:{propertyType:"member",type:"string",defaultValue:""},componentTypeLocalizableTexts:{propertyType:"member",type:"string",defaultValue:"@[ServerApplication].FAST.Logbook.ComponentType"},componentSubTypeLocalizableTexts:{propertyType:"member",type:"string",defaultValue:"@[ServerApplication].FAST.LMH.SubComponentType"},backgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@Transparent"},borderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@Transparent"},foregroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"}};this._notEnabledText="FAST services are not available inside this UI Designer client.";this._budgets=[];this.initialize(Lenze.UI.LicenseList)}afterInit(){if(VisiWin.Utilities.isInDesignMode())return;this._licenseService=VisiWin.AppServices[Lenze.Strings.nameof("FastLicenseService")];this._moduleService=VisiWin.AppServices[Lenze.Strings.nameof("FastModuleService")];this._userService=VisiWin.System.UserManagement.UserManagementService.getService();this._licenseChangedHandler=this._onChangeAsync.bind(this);this._userChangedHandler=this._onChangeAsync.bind(this);this._licenseService.addEventListener(VisiWin.AppServices.Impl.FastLicenseService.valuesChangeEventName,this._licenseChangedHandler);this._userService.UserLoggedOn.add(this._userChangedHandler)}dispose(){if(VisiWin.Utilities.isInDesignMode())return super.dispose();this._licenseService.removeEventListener(VisiWin.AppServices.Impl.FastLicenseService.valuesChangeEventName,this._licenseChangedHandler);this._userService.UserLoggedOn.remove(this._userChangedHandler);return super.dispose()}async _fillListAsync(){var _a,_b,_c,_d,_e;const licenseInfo=!VisiWin.Utilities.isInDesignMode()?await this._licenseService.getLicenseAsync():Lenze.Models.LicenseResponse.fromJS(JSON.parse('{"TotalApplicationCredit":{"TotalAvailable":0,"TotalActiveNeeded":550,"TotalMaxNeeded":550,"TotalWorstCaseNeeded":550},"Blacklist":[],"LLM_Components":[{"Name":"MC_MoveAbsolute_1","InstancePath":"Device.Application.CallingFASTMotion.MC_MoveAbsolute_1","InstanceID":"0xaf4e42aa","LenzeLicenceClass":"F1","Activated":1,"ActivationTime":"2022-04-22T08:49:54","BudgetName":"FAST Toolbox","ApplicationCredit":{"ActiveNeeded":150,"WorstCaseNeeded":150}},{"Name":"MC_MoveAbsolute_2","InstancePath":"Device.Application.CallingFASTMotion.MC_MoveAbsolute_2","InstanceID":"0x6716c10b","LenzeLicenceClass":"F1","Activated":1,"ActivationTime":"2022-04-22T09:03:13","BudgetName":"FAST Toolbox","ApplicationCredit":{"ActiveNeeded":0,"WorstCaseNeeded":150}},{"Name":"TM_FlyingSaw_V2","InstancePath":"Device.Application.CallingTechnologyModulesV2.TM_FlyingSaw_V2.ModuleHandlerBase","InstanceID":"0xcc25bc1b","LenzeLicenceClass":"T10","Activated":1,"ActivationTime":"2022-04-22T08:53:04","BudgetName":"FAST Toolbox","ApplicationCredit":{"ActiveNeeded":100,"WorstCaseNeeded":100}},{"Name":"TM_TablePos_V2","InstancePath":"Device.Application.CallingTechnologyModulesV2.TM_TablePos_V2.ModuleHandlerBase","InstanceID":"0xc956c077","LenzeLicenceClass":"T5","Activated":1,"ActivationTime":"2022-04-22T08:53:04","BudgetName":"FAST Toolbox","ApplicationCredit":{"ActiveNeeded":50,"WorstCaseNeeded":50}},{"Name":"TM_ElectronicGearbox_V2","InstancePath":"Device.Application.CallingTechnologyModulesV2.TM_ElectronicGearbox_V2.ModuleHandlerBase","InstanceID":"0xa4a8b0d","LenzeLicenceClass":"T5","Activated":1,"ActivationTime":"2022-04-22T08:53:04","BudgetName":"FAST Toolbox","ApplicationCredit":{"ActiveNeeded":25,"WorstCaseNeeded":25}},{"Name":"TM_SyncCorr_V2","InstancePath":"Device.Application.CallingTechnologyModulesV2.TM_SyncCorr_V2.ModuleHandlerBase","InstanceID":"0x3a5a6dd4","LenzeLicenceClass":"T8","Activated":1,"ActivationTime":"2022-04-22T08:53:04","BudgetName":"FAST Toolbox","ApplicationCredit":{"ActiveNeeded":100,"WorstCaseNeeded":100}},{"Name":"OPC-UA license additional client connection, client 1","InstancePath":"LicenseManager","InstanceID":"0x86eb0143","LenzeLicenceClass":"","Activated":1,"ActivationTime":"2022-04-22T10:20:40","BudgetName":"OPC-UA","ApplicationCredit":{"ActiveNeeded":50,"WorstCaseNeeded":50}},{"Name":"OPC-UA license additional client connection, client 2","InstancePath":"LicenseManager","InstanceID":"0xf00e387e","LenzeLicenceClass":"","Activated":1,"ActivationTime":"2022-04-22T10:20:45","BudgetName":"OPC-UA","ApplicationCredit":{"ActiveNeeded":50,"WorstCaseNeeded":50}},{"Name":"TM_BasicMotionV2","InstancePath":"Device.Application.CallingTechnologyModulesV2.TM_BasicMotionV2.ModuleHandlerBase","InstanceID":"0x487e4973","LenzeLicenceClass":"T16","Activated":1,"ActivationTime":"2022-04-22T08:50:04","BudgetName":"FAST Toolbox","ApplicationCredit":{"ActiveNeeded":25,"WorstCaseNeeded":25}}],"LLM_Budgets":[{"BudgetName":"FAST Toolbox","ApplicationCredit":{"Assigned":200,"ActiveNeeded":450,"MaxNeeded":450,"WorstCaseNeeded":450,"Borrowed":0}},{"BudgetName":"Visualisation","ApplicationCredit":{"Assigned":0,"ActiveNeeded":0,"MaxNeeded":0,"WorstCaseNeeded":0,"Borrowed":0}},{"BudgetName":"OPC-UA","ApplicationCredit":{"Assigned":100,"ActiveNeeded":100,"MaxNeeded":100,"WorstCaseNeeded":100,"Borrowed":0}}],"SchemaVersion":1,"Lang":"en-US"}'));this._budgets=(_a=licenseInfo===null||licenseInfo===void 0?void 0:licenseInfo.budgets)!==null&&_a!==void 0?_a:[];const licenseComponents=(_b=licenseInfo===null||licenseInfo===void 0?void 0:licenseInfo.components)!==null&&_b!==void 0?_b:[];this._budgets=this._budgets.filter(b=>b.budgetName!=VisiWin.AppServices.Impl.FastLicenseService.RemainingBudgetName);this._budgets=this._budgets.sort((a,b)=>{var aComponents=licenseComponents.filter(x=>x.budgetName===a.budgetName);var bComponents=licenseComponents.filter(x=>x.budgetName===b.budgetName);if(aComponents>bComponents)return-1;else if(aComponents<bComponents)return 1;return 0});const instanceIds=this._licenseService.getComponentIdsFilter();const components=await this._moduleService.getComponentsAsync();const setPromises=[];for(let budget of this._budgets){if(budget.budgetName==="Security"||budget.budgetName==="Data-Management"||budget.budgetName==="Data Management"||budget.budgetName==="FAST-Service"||budget.budgetName==="FAST Service")continue;const budgetComponents=(_c=licenseComponents.filter(x=>x.budgetName===(budget===null||budget===void 0?void 0:budget.budgetName)&&(instanceIds==null||instanceIds.includes(x.instanceID))))!==null&&_c!==void 0?_c:[];const bodyItems=[];if(instanceIds!=null&&instanceIds.length>0&&budgetComponents.length==0)continue;const listItem=this._createListItem();if(Lenze.Users.isAuthorized(this._userService,this.slideOutAuthorizationRight)){for(let budgetComponent of budgetComponents){const component=components.find(x=>x.instanceID===budgetComponent.instanceID);if(component==null)continue;const item=bodyItems.find(x=>x.text1.text===component.componentType.toString()&&x.text2.text===component.componentSubType.toString());if(item!=null){if(!budgetComponent.activated)continue;item.text2DetailsBody.text+=`\n${budgetComponent.name}`;item.text3.text=(Number.parseInt(item.text3.text)+budgetComponent.applicationCredit.activeNeeded).toString();continue}const isActive=budgetComponent.activated>0;bodyItems.push(new Lenze.Models.ListBodyItem({text1:new Lenze.Models.ListText({text:component.componentType.toString(),textList:this.componentTypeLocalizableTexts,isLocalizable:true,fontWeight:"FW500"}),text2:new Lenze.Models.ListText({text:component.componentSubType.toString(),textList:this.componentSubTypeLocalizableTexts+component.componentType.toString(),isLocalizable:true}),text3:new Lenze.Models.ListText({text:budgetComponent.applicationCredit.activeNeeded.toString(),suffix:" AC"}),text2DetailsAvailable:isActive,text2DetailsHeader:new Lenze.Models.ListText({text:isActive?component.componentSubType.toString():"",textList:this.componentSubTypeLocalizableTexts+component.componentType.toString(),isLocalizable:isActive}),text2DetailsBody:new Lenze.Models.ListText({text:isActive?component.name:""})}))}}const neededExceeded=budget.applicationCredit.activeNeeded>((_d=budget.applicationCredit.assigned)!==null&&_d!==void 0?_d:0);const listItemModel=new Lenze.Models.ListItem({header:new Lenze.Models.ListHeader({text1:new Lenze.Models.ListText({text:budget.budgetName,fontWeight:"FW500"}),text2:new Lenze.Models.ListText({text:((_e=budget.applicationCredit.assigned)!==null&&_e!==void 0?_e:0>0)?`${budget.applicationCredit.assigned} AC`:""}),text3:new Lenze.Models.ListText({text:budget.applicationCredit.activeNeeded>0?`Needed: ${budget.applicationCredit.activeNeeded} AC`:"",fontWeight:neededExceeded?"FW700":"normal"}),contentSymbol:neededExceeded?"warning":""}),bodyItems:bodyItems});setPromises.push(listItem.setListItemAsync(listItemModel));if(budget.budgetName===this.visualizationBudget){listItem.noteText=this.visualizationNoteText;listItem.noteLocalizableText=this.visualizationNoteLocalizableText}listItem.isSlidedIn=instanceIds==null||instanceIds.length===0}await Promise.all(setPromises)}async _isEnabledAsync(){return await this._licenseService.getServiceEnabledAsync()}async _onChangeAsync(){if(!this.isAttached)return;await this._renewListAsync()}}UI.LicenseList=LicenseList})(UI=Lenze.UI||(Lenze.UI={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var UI;(function(UI){"use strict";class LicenseTotal extends Lenze.UI.ControlBase{constructor(element,options){super(element,options);this.properties={designerType:{propertyType:"base",type:"string",defaultValue:"Control"},titleText:{propertyType:"child",type:"string",child:"_titleElement",childProperty:"text",defaultValue:"Application Credit (AC) Overview"},titleLocalizableText:{propertyType:"child",type:"string",child:"_titleElement",childProperty:"localizableText"},titleTextAlignment:{propertyType:"child",type:"string",child:"_titleElement",childProperty:"textAlignment"},titleLineClamp:{propertyType:"child",type:"number",child:"_titleElement",childProperty:"lineClamp"},titleTextWrapping:{propertyType:"child",type:"string",child:"_titleElement",childProperty:"textWrapping"},titleTextTrimming:{propertyType:"child",type:"string",child:"_titleElement",childProperty:"textTrimming"},titleTextContrast:{propertyType:"child",type:"number",child:"_titleElement",childProperty:"textContrast"},titleUppercase:{propertyType:"child",type:"boolean",child:"_titleElement",childProperty:"uppercase",defaultValue:false},titleTextDecoration:{propertyType:"child",type:"string",child:"_titleElement",childProperty:"textDecoration"},titleTextShadow:{propertyType:"child",type:"string",child:"_titleElement",childProperty:"textShadow"},titleFontClass:{propertyType:"child",type:"string",child:"_titleElement",childProperty:"fontClass",defaultValue:"Roboto16"},titleFontFamily:{propertyType:"child",type:"string",child:"_titleElement",childProperty:"fontFamily"},titleFontSize:{propertyType:"child",type:"string",child:"_titleElement",childProperty:"fontSize"},titleFontWeight:{propertyType:"child",type:"string",child:"_titleElement",childProperty:"fontWeight",defaultValue:"FW500"},titleLineHeight:{propertyType:"child",type:"string",child:"_titleElement",childProperty:"lineHeight"},titleFontStyle:{propertyType:"child",type:"string",child:"_titleElement",childProperty:"fontStyle"},titleLetterSpacing:{propertyType:"child",type:"string",child:"_titleElement",childProperty:"letterSpacing"},availableNameText:{propertyType:"child",type:"string",child:"_availableNameElement",childProperty:"text",defaultValue:"Available:"},availableNameLocalizableText:{propertyType:"child",type:"string",child:"_availableNameElement",childProperty:"localizableText"},availableNameTextAlignment:{propertyType:"child",type:"string",child:"_availableNameElement",childProperty:"textAlignment"},availableNameLineClamp:{propertyType:"child",type:"number",child:"_availableNameElement",childProperty:"lineClamp"},availableNameTextWrapping:{propertyType:"child",type:"string",child:"_availableNameElement",childProperty:"textWrapping"},availableNameTextTrimming:{propertyType:"child",type:"string",child:"_availableNameElement",childProperty:"textTrimming"},availableNameTextContrast:{propertyType:"child",type:"number",child:"_availableNameElement",childProperty:"textContrast"},availableNameUppercase:{propertyType:"child",type:"boolean",child:"_availableNameElement",childProperty:"uppercase",defaultValue:false},availableNameTextDecoration:{propertyType:"child",type:"string",child:"_availableNameElement",childProperty:"textDecoration"},availableNameTextShadow:{propertyType:"child",type:"string",child:"_availableNameElement",childProperty:"textShadow"},availableNameFontClass:{propertyType:"child",type:"string",child:"_availableNameElement",childProperty:"fontClass",defaultValue:"Roboto14"},availableNameFontFamily:{propertyType:"child",type:"string",child:"_availableNameElement",childProperty:"fontFamily"},availableNameFontSize:{propertyType:"child",type:"string",child:"_availableNameElement",childProperty:"fontSize"},availableNameFontWeight:{propertyType:"child",type:"string",child:"_availableNameElement",childProperty:"fontWeight"},availableNameLineHeight:{propertyType:"child",type:"string",child:"_availableNameElement",childProperty:"lineHeight"},availableNameFontStyle:{propertyType:"child",type:"string",child:"_availableNameElement",childProperty:"fontStyle"},availableNameLetterSpacing:{propertyType:"child",type:"string",child:"_availableNameElement",childProperty:"letterSpacing"},availableValueTextAlignment:{propertyType:"child",type:"string",child:"_availableValueElement",childProperty:"textAlignment"},availableValueLineClamp:{propertyType:"child",type:"number",child:"_availableValueElement",childProperty:"lineClamp"},availableValueTextWrapping:{propertyType:"child",type:"string",child:"_availableValueElement",childProperty:"textWrapping"},availableValueTextTrimming:{propertyType:"child",type:"string",child:"_availableValueElement",childProperty:"textTrimming"},availableValueTextContrast:{propertyType:"child",type:"number",child:"_availableValueElement",childProperty:"textContrast"},availableValueUppercase:{propertyType:"child",type:"boolean",child:"_availableValueElement",childProperty:"uppercase",defaultValue:false},availableValueTextDecoration:{propertyType:"child",type:"string",child:"_availableValueElement",childProperty:"textDecoration"},availableValueTextShadow:{propertyType:"child",type:"string",child:"_availableValueElement",childProperty:"textShadow"},availableValueFontClass:{propertyType:"child",type:"string",child:"_availableValueElement",childProperty:"fontClass",defaultValue:"Roboto14"},availableValueFontFamily:{propertyType:"child",type:"string",child:"_availableValueElement",childProperty:"fontFamily"},availableValueFontSize:{propertyType:"child",type:"string",child:"_availableValueElement",childProperty:"fontSize"},availableValueFontWeight:{propertyType:"child",type:"string",child:"_availableValueElement",childProperty:"fontWeight"},availableValueLineHeight:{propertyType:"child",type:"string",child:"_availableValueElement",childProperty:"lineHeight"},availableValueFontStyle:{propertyType:"child",type:"string",child:"_availableValueElement",childProperty:"fontStyle"},availableValueLetterSpacing:{propertyType:"child",type:"string",child:"_availableValueElement",childProperty:"letterSpacing"},availableSymbolVisibility:{propertyType:"child",type:"string",child:"_availableSymbolElement",childProperty:"visibility",defaultValue:"collapse"},availableSymbolIconFont:{propertyType:"child",type:"string",child:"_availableSymbolElement",childProperty:"iconFont"},availableSymbol:{propertyType:"child",type:"string",child:"_availableSymbolElement",childProperty:"symbol",defaultValue:"warning"},availableSymbolType:{propertyType:"child",type:"string",child:"_availableSymbolElement",childProperty:"symbolType"},availableSymbolSize:{propertyType:"child",type:"string",child:"_availableSymbolElement",childProperty:"symbolSize"},remainingNameText:{propertyType:"child",type:"string",child:"_remainingNameElement",childProperty:"text",defaultValue:"Remaining:"},remainingNameLocalizableText:{propertyType:"child",type:"string",child:"_remainingNameElement",childProperty:"localizableText"},remainingNameTextAlignment:{propertyType:"child",type:"string",child:"_remainingNameElement",childProperty:"textAlignment"},remainingNameLineClamp:{propertyType:"child",type:"number",child:"_remainingNameElement",childProperty:"lineClamp"},remainingNameTextWrapping:{propertyType:"child",type:"string",child:"_remainingNameElement",childProperty:"textWrapping"},remainingNameTextTrimming:{propertyType:"child",type:"string",child:"_remainingNameElement",childProperty:"textTrimming"},remainingNameTextContrast:{propertyType:"child",type:"number",child:"_remainingNameElement",childProperty:"textContrast"},remainingNameUppercase:{propertyType:"child",type:"boolean",child:"_remainingNameElement",childProperty:"uppercase",defaultValue:false},remainingNameTextDecoration:{propertyType:"child",type:"string",child:"_remainingNameElement",childProperty:"textDecoration"},remainingNameTextShadow:{propertyType:"child",type:"string",child:"_remainingNameElement",childProperty:"textShadow"},remainingNameFontClass:{propertyType:"child",type:"string",child:"_remainingNameElement",childProperty:"fontClass",defaultValue:"Roboto14"},remainingNameFontFamily:{propertyType:"child",type:"string",child:"_remainingNameElement",childProperty:"fontFamily"},remainingNameFontSize:{propertyType:"child",type:"string",child:"_remainingNameElement",childProperty:"fontSize"},remainingNameFontWeight:{propertyType:"child",type:"string",child:"_remainingNameElement",childProperty:"fontWeight"},remainingNameLineHeight:{propertyType:"child",type:"string",child:"_remainingNameElement",childProperty:"lineHeight"},remainingNameFontStyle:{propertyType:"child",type:"string",child:"_remainingNameElement",childProperty:"fontStyle"},remainingNameLetterSpacing:{propertyType:"child",type:"string",child:"_remainingNameElement",childProperty:"letterSpacing"},remainingValueTextAlignment:{propertyType:"child",type:"string",child:"_remainingValueElement",childProperty:"textAlignment"},remainingValueLineClamp:{propertyType:"child",type:"number",child:"_remainingValueElement",childProperty:"lineClamp"},remainingValueTextWrapping:{propertyType:"child",type:"string",child:"_remainingValueElement",childProperty:"textWrapping"},remainingValueTextTrimming:{propertyType:"child",type:"string",child:"_remainingValueElement",childProperty:"textTrimming"},remainingValueTextContrast:{propertyType:"child",type:"number",child:"_remainingValueElement",childProperty:"textContrast"},remainingValueUppercase:{propertyType:"child",type:"boolean",child:"_remainingValueElement",childProperty:"uppercase",defaultValue:false},remainingValueTextDecoration:{propertyType:"child",type:"string",child:"_remainingValueElement",childProperty:"textDecoration"},remainingValueTextShadow:{propertyType:"child",type:"string",child:"_remainingValueElement",childProperty:"textShadow"},remainingValueFontClass:{propertyType:"child",type:"string",child:"_remainingValueElement",childProperty:"fontClass",defaultValue:"Roboto14"},remainingValueFontFamily:{propertyType:"child",type:"string",child:"_remainingValueElement",childProperty:"fontFamily"},remainingValueFontSize:{propertyType:"child",type:"string",child:"_remainingValueElement",childProperty:"fontSize"},remainingValueFontWeight:{propertyType:"child",type:"string",child:"_remainingValueElement",childProperty:"fontWeight"},remainingValueLineHeight:{propertyType:"child",type:"string",child:"_remainingValueElement",childProperty:"lineHeight"},remainingValueFontStyle:{propertyType:"child",type:"string",child:"_remainingValueElement",childProperty:"fontStyle"},remainingValueLetterSpacing:{propertyType:"child",type:"string",child:"_remainingValueElement",childProperty:"letterSpacing"},remainingSymbolVisibility:{propertyType:"child",type:"string",child:"_remainingSymbolElement",childProperty:"visibility",defaultValue:"collapse"},remainingSymbolIconFont:{propertyType:"child",type:"string",child:"_remainingSymbolElement",childProperty:"iconFont"},remainingSymbol:{propertyType:"child",type:"string",child:"_remainingSymbolElement",childProperty:"symbol",defaultValue:"warning"},remainingSymbolType:{propertyType:"child",type:"string",child:"_remainingSymbolElement",childProperty:"symbolType"},remainingSymbolSize:{propertyType:"child",type:"string",child:"_remainingSymbolElement",childProperty:"symbolSize"},configuredNameText:{propertyType:"child",type:"string",child:"_configuredNameElement",childProperty:"text",defaultValue:"Configured:"},configuredNameLocalizableText:{propertyType:"child",type:"string",child:"_configuredNameElement",childProperty:"localizableText"},configuredNameTextAlignment:{propertyType:"child",type:"string",child:"_configuredNameElement",childProperty:"textAlignment"},configuredNameLineClamp:{propertyType:"child",type:"number",child:"_configuredNameElement",childProperty:"lineClamp"},configuredNameTextWrapping:{propertyType:"child",type:"string",child:"_configuredNameElement",childProperty:"textWrapping"},configuredNameTextTrimming:{propertyType:"child",type:"string",child:"_configuredNameElement",childProperty:"textTrimming"},configuredNameTextContrast:{propertyType:"child",type:"number",child:"_configuredNameElement",childProperty:"textContrast"},configuredNameUppercase:{propertyType:"child",type:"boolean",child:"_configuredNameElement",childProperty:"uppercase",defaultValue:false},configuredNameTextDecoration:{propertyType:"child",type:"string",child:"_configuredNameElement",childProperty:"textDecoration"},configuredNameTextShadow:{propertyType:"child",type:"string",child:"_configuredNameElement",childProperty:"textShadow"},configuredNameFontClass:{propertyType:"child",type:"string",child:"_configuredNameElement",childProperty:"fontClass",defaultValue:"Roboto14"},configuredNameFontFamily:{propertyType:"child",type:"string",child:"_configuredNameElement",childProperty:"fontFamily"},configuredNameFontSize:{propertyType:"child",type:"string",child:"_configuredNameElement",childProperty:"fontSize"},configuredNameFontWeight:{propertyType:"child",type:"string",child:"_configuredNameElement",childProperty:"fontWeight"},configuredNameLineHeight:{propertyType:"child",type:"string",child:"_configuredNameElement",childProperty:"lineHeight"},configuredNameFontStyle:{propertyType:"child",type:"string",child:"_configuredNameElement",childProperty:"fontStyle"},configuredNameLetterSpacing:{propertyType:"child",type:"string",child:"_configuredNameElement",childProperty:"letterSpacing"},configuredValueTextAlignment:{propertyType:"child",type:"string",child:"_configuredValueElement",childProperty:"textAlignment"},configuredValueLineClamp:{propertyType:"child",type:"number",child:"_configuredValueElement",childProperty:"lineClamp"},configuredValueTextWrapping:{propertyType:"child",type:"string",child:"_configuredValueElement",childProperty:"textWrapping"},configuredValueTextTrimming:{propertyType:"child",type:"string",child:"_configuredValueElement",childProperty:"textTrimming"},configuredValueTextContrast:{propertyType:"child",type:"number",child:"_configuredValueElement",childProperty:"textContrast"},configuredValueUppercase:{propertyType:"child",type:"boolean",child:"_configuredValueElement",childProperty:"uppercase",defaultValue:false},configuredValueTextDecoration:{propertyType:"child",type:"string",child:"_configuredValueElement",childProperty:"textDecoration"},configuredValueTextShadow:{propertyType:"child",type:"string",child:"_configuredValueElement",childProperty:"textShadow"},configuredValueFontClass:{propertyType:"child",type:"string",child:"_configuredValueElement",childProperty:"fontClass",defaultValue:"Roboto14"},configuredValueFontFamily:{propertyType:"child",type:"string",child:"_configuredValueElement",childProperty:"fontFamily"},configuredValueFontSize:{propertyType:"child",type:"string",child:"_configuredValueElement",childProperty:"fontSize"},configuredValueFontWeight:{propertyType:"child",type:"string",child:"_configuredValueElement",childProperty:"fontWeight"},configuredValueLineHeight:{propertyType:"child",type:"string",child:"_configuredValueElement",childProperty:"lineHeight"},configuredValueFontStyle:{propertyType:"child",type:"string",child:"_configuredValueElement",childProperty:"fontStyle"},configuredValueLetterSpacing:{propertyType:"child",type:"string",child:"_configuredValueElement",childProperty:"letterSpacing"},configuredSymbolVisibility:{propertyType:"child",type:"string",child:"_configuredSymbolElement",childProperty:"visibility",defaultValue:"collapse"},configuredSymbolIconFont:{propertyType:"child",type:"string",child:"_configuredSymbolElement",childProperty:"iconFont"},configuredSymbol:{propertyType:"child",type:"string",child:"_configuredSymbolElement",childProperty:"symbol",defaultValue:"warning"},configuredSymbolType:{propertyType:"child",type:"string",child:"_configuredSymbolElement",childProperty:"symbolType"},configuredSymbolSize:{propertyType:"child",type:"string",child:"_configuredSymbolElement",childProperty:"symbolSize"},configModeNameText:{propertyType:"child",type:"string",child:"_configModeNameElement",childProperty:"text",defaultValue:"Configuration Mode:"},configModeNameLocalizableText:{propertyType:"child",type:"string",child:"_configModeNameElement",childProperty:"localizableText"},configModeNameTextAlignment:{propertyType:"child",type:"string",child:"_configModeNameElement",childProperty:"textAlignment"},configModeNameLineClamp:{propertyType:"child",type:"number",child:"_configModeNameElement",childProperty:"lineClamp"},configModeNameTextWrapping:{propertyType:"child",type:"string",child:"_configModeNameElement",childProperty:"textWrapping"},configModeNameTextTrimming:{propertyType:"child",type:"string",child:"_configModeNameElement",childProperty:"textTrimming"},configModeNameTextContrast:{propertyType:"child",type:"number",child:"_configModeNameElement",childProperty:"textContrast"},configModeNameUppercase:{propertyType:"child",type:"boolean",child:"_configModeNameElement",childProperty:"uppercase",defaultValue:false},configModeNameTextDecoration:{propertyType:"child",type:"string",child:"_configModeNameElement",childProperty:"textDecoration"},configModeNameTextShadow:{propertyType:"child",type:"string",child:"_configModeNameElement",childProperty:"textShadow"},configModeNameFontClass:{propertyType:"child",type:"string",child:"_configModeNameElement",childProperty:"fontClass",defaultValue:"Roboto14"},configModeNameFontFamily:{propertyType:"child",type:"string",child:"_configModeNameElement",childProperty:"fontFamily"},configModeNameFontSize:{propertyType:"child",type:"string",child:"_configModeNameElement",childProperty:"fontSize"},configModeNameFontWeight:{propertyType:"child",type:"string",child:"_configModeNameElement",childProperty:"fontWeight"},configModeNameLineHeight:{propertyType:"child",type:"string",child:"_configModeNameElement",childProperty:"lineHeight"},configModeNameFontStyle:{propertyType:"child",type:"string",child:"_configModeNameElement",childProperty:"fontStyle"},configModeNameLetterSpacing:{propertyType:"child",type:"string",child:"_configModeNameElement",childProperty:"letterSpacing"},configModeValueTextAlignment:{propertyType:"child",type:"string",child:"_configModeValueElement",childProperty:"textAlignment"},configModeValueLineClamp:{propertyType:"child",type:"number",child:"_configModeValueElement",childProperty:"lineClamp"},configModeValueTextWrapping:{propertyType:"child",type:"string",child:"_configModeValueElement",childProperty:"textWrapping"},configModeValueTextTrimming:{propertyType:"child",type:"string",child:"_configModeValueElement",childProperty:"textTrimming"},configModeValueTextContrast:{propertyType:"child",type:"number",child:"_configModeValueElement",childProperty:"textContrast"},configModeValueUppercase:{propertyType:"child",type:"boolean",child:"_configModeValueElement",childProperty:"uppercase",defaultValue:false},configModeValueTextDecoration:{propertyType:"child",type:"string",child:"_configModeValueElement",childProperty:"textDecoration"},configModeValueTextShadow:{propertyType:"child",type:"string",child:"_configModeValueElement",childProperty:"textShadow"},configModeValueFontClass:{propertyType:"child",type:"string",child:"_configModeValueElement",childProperty:"fontClass",defaultValue:"Roboto14"},configModeValueFontFamily:{propertyType:"child",type:"string",child:"_configModeValueElement",childProperty:"fontFamily"},configModeValueFontSize:{propertyType:"child",type:"string",child:"_configModeValueElement",childProperty:"fontSize"},configModeValueFontWeight:{propertyType:"child",type:"string",child:"_configModeValueElement",childProperty:"fontWeight"},configModeValueLineHeight:{propertyType:"child",type:"string",child:"_configModeValueElement",childProperty:"lineHeight"},configModeValueFontStyle:{propertyType:"child",type:"string",child:"_configModeValueElement",childProperty:"fontStyle"},configModeValueLetterSpacing:{propertyType:"child",type:"string",child:"_configModeValueElement",childProperty:"letterSpacing"},configModeSymbolVisibility:{propertyType:"child",type:"string",child:"_configModeSymbolElement",childProperty:"visibility",defaultValue:"collapse"},configModeSymbolIconFont:{propertyType:"child",type:"string",child:"_configModeSymbolElement",childProperty:"iconFont"},configModeSymbol:{propertyType:"child",type:"string",child:"_configModeSymbolElement",childProperty:"symbol",defaultValue:"warning"},configModeSymbolType:{propertyType:"child",type:"string",child:"_configModeSymbolElement",childProperty:"symbolType"},configModeSymbolSize:{propertyType:"child",type:"string",child:"_configModeSymbolElement",childProperty:"symbolSize"},neededNameText:{propertyType:"child",type:"string",child:"_neededNameElement",childProperty:"text",defaultValue:"Needed:"},neededNameLocalizableText:{propertyType:"child",type:"string",child:"_neededNameElement",childProperty:"localizableText"},neededNameTextAlignment:{propertyType:"child",type:"string",child:"_neededNameElement",childProperty:"textAlignment"},neededNameLineClamp:{propertyType:"child",type:"number",child:"_neededNameElement",childProperty:"lineClamp"},neededNameTextWrapping:{propertyType:"child",type:"string",child:"_neededNameElement",childProperty:"textWrapping"},neededNameTextTrimming:{propertyType:"child",type:"string",child:"_neededNameElement",childProperty:"textTrimming"},neededNameTextContrast:{propertyType:"child",type:"number",child:"_neededNameElement",childProperty:"textContrast"},neededNameUppercase:{propertyType:"child",type:"boolean",child:"_neededNameElement",childProperty:"uppercase",defaultValue:false},neededNameTextDecoration:{propertyType:"child",type:"string",child:"_neededNameElement",childProperty:"textDecoration"},neededNameTextShadow:{propertyType:"child",type:"string",child:"_neededNameElement",childProperty:"textShadow"},neededNameFontClass:{propertyType:"child",type:"string",child:"_neededNameElement",childProperty:"fontClass",defaultValue:"Roboto14"},neededNameFontFamily:{propertyType:"child",type:"string",child:"_neededNameElement",childProperty:"fontFamily"},neededNameFontSize:{propertyType:"child",type:"string",child:"_neededNameElement",childProperty:"fontSize"},neededNameFontWeight:{propertyType:"child",type:"string",child:"_neededNameElement",childProperty:"fontWeight"},neededNameLineHeight:{propertyType:"child",type:"string",child:"_neededNameElement",childProperty:"lineHeight"},neededNameFontStyle:{propertyType:"child",type:"string",child:"_neededNameElement",childProperty:"fontStyle"},neededNameLetterSpacing:{propertyType:"child",type:"string",child:"_neededNameElement",childProperty:"letterSpacing"},neededValueTextAlignment:{propertyType:"child",type:"string",child:"_neededValueElement",childProperty:"textAlignment"},neededValueLineClamp:{propertyType:"child",type:"number",child:"_neededValueElement",childProperty:"lineClamp"},neededValueTextWrapping:{propertyType:"child",type:"string",child:"_neededValueElement",childProperty:"textWrapping"},neededValueTextTrimming:{propertyType:"child",type:"string",child:"_neededValueElement",childProperty:"textTrimming"},neededValueTextContrast:{propertyType:"child",type:"number",child:"_neededValueElement",childProperty:"textContrast"},neededValueUppercase:{propertyType:"child",type:"boolean",child:"_neededValueElement",childProperty:"uppercase",defaultValue:false},neededValueTextDecoration:{propertyType:"child",type:"string",child:"_neededValueElement",childProperty:"textDecoration"},neededValueTextShadow:{propertyType:"child",type:"string",child:"_neededValueElement",childProperty:"textShadow"},neededValueFontClass:{propertyType:"child",type:"string",child:"_neededValueElement",childProperty:"fontClass",defaultValue:"Roboto14"},neededValueFontFamily:{propertyType:"child",type:"string",child:"_neededValueElement",childProperty:"fontFamily"},neededValueFontSize:{propertyType:"child",type:"string",child:"_neededValueElement",childProperty:"fontSize"},neededValueFontWeight:{propertyType:"child",type:"string",child:"_neededValueElement",childProperty:"fontWeight"},neededValueLineHeight:{propertyType:"child",type:"string",child:"_neededValueElement",childProperty:"lineHeight"},neededValueFontStyle:{propertyType:"child",type:"string",child:"_neededValueElement",childProperty:"fontStyle"},neededValueLetterSpacing:{propertyType:"child",type:"string",child:"_neededValueElement",childProperty:"letterSpacing"},neededSymbolVisibility:{propertyType:"child",type:"string",child:"_neededSymbolElement",childProperty:"visibility",defaultValue:"collapse"},neededSymbolIconFont:{propertyType:"child",type:"string",child:"_neededSymbolElement",childProperty:"iconFont"},neededSymbol:{propertyType:"child",type:"string",child:"_neededSymbolElement",childProperty:"symbol",defaultValue:"warning"},neededSymbolType:{propertyType:"child",type:"string",child:"_neededSymbolElement",childProperty:"symbolType"},neededSymbolSize:{propertyType:"child",type:"string",child:"_neededSymbolElement",childProperty:"symbolSize"},linkSymbolIconFont:{propertyType:"child",type:"string",child:"_linkSymbolElement",childProperty:"iconFont",defaultValue:"lenze-icons"},linkSymbol:{propertyType:"child",type:"string",child:"_linkSymbolElement",childProperty:"symbol",defaultValue:"certificate"},linkSymbolType:{propertyType:"child",type:"string",child:"_linkSymbolElement",childProperty:"symbolType"},linkSymbolSize:{propertyType:"child",type:"string",child:"_linkSymbolElement",childProperty:"symbolSize"},linkText:{propertyType:"child",type:"string",child:"_linkTextElement",childProperty:"text",defaultValue:"Details Application Credit"},linkLocalizableText:{propertyType:"child",type:"string",child:"_linkTextElement",childProperty:"localizableText"},linkTextAlignment:{propertyType:"child",type:"string",child:"_linkTextElement",childProperty:"textAlignment"},linkLineClamp:{propertyType:"child",type:"number",child:"_linkTextElement",childProperty:"lineClamp"},linkTextWrapping:{propertyType:"child",type:"string",child:"_linkTextElement",childProperty:"textWrapping"},linkTextTrimming:{propertyType:"child",type:"string",child:"_linkTextElement",childProperty:"textTrimming"},linkTextContrast:{propertyType:"child",type:"number",child:"_linkTextElement",childProperty:"textContrast"},linkUppercase:{propertyType:"child",type:"boolean",child:"_linkTextElement",childProperty:"uppercase",defaultValue:false},linkTextDecoration:{propertyType:"child",type:"string",child:"_linkTextElement",childProperty:"textDecoration",defaultValue:"underline"},linkTextShadow:{propertyType:"child",type:"string",child:"_linkTextElement",childProperty:"textShadow"},linkFontClass:{propertyType:"child",type:"string",child:"_linkTextElement",childProperty:"fontClass",defaultValue:"Roboto14"},linkFontFamily:{propertyType:"child",type:"string",child:"_linkTextElement",childProperty:"fontFamily"},linkFontSize:{propertyType:"child",type:"string",child:"_linkTextElement",childProperty:"fontSize"},linkFontWeight:{propertyType:"child",type:"string",child:"_linkTextElement",childProperty:"fontWeight"},linkLineHeight:{propertyType:"child",type:"string",child:"_linkTextElement",childProperty:"lineHeight"},linkFontStyle:{propertyType:"child",type:"string",child:"_linkTextElement",childProperty:"fontStyle"},linkLetterSpacing:{propertyType:"child",type:"string",child:"_linkTextElement",childProperty:"letterSpacing"},backgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@WhiteGrey"},borderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@Transparent"},foregroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},titleBackgroundColor:{propertyType:"child",type:"string",child:"_titleElement",childProperty:"backgroundColor",resourceValue:["getTheme"],defaultValue:"@Transparent"},titleForegroundColor:{propertyType:"child",type:"string",child:"_titleElement",childProperty:"foregroundColor",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},availableNameBackgroundColor:{propertyType:"child",type:"string",child:"_availableNameElement",childProperty:"backgroundColor",resourceValue:["getTheme"],defaultValue:"@Transparent"},availableNameForegroundColor:{propertyType:"child",type:"string",child:"_availableNameElement",childProperty:"foregroundColor",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},availableValueBackgroundColor:{propertyType:"child",type:"string",child:"_availableValueElement",childProperty:"backgroundColor",resourceValue:["getTheme"],defaultValue:"@Transparent"},availableValueForegroundColor:{propertyType:"child",type:"string",child:"_availableValueElement",childProperty:"foregroundColor",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},availableSymbolBackgroundColor:{propertyType:"child",type:"string",child:"_availableSymbolElement",childProperty:"backgroundColor",resourceValue:["getTheme"],defaultValue:"@Transparent"},availableSymbolForegroundColor:{propertyType:"child",type:"string",child:"_availableSymbolElement",childProperty:"foregroundColor",resourceValue:["getTheme"],defaultValue:"@WarningColor"},remainingNameBackgroundColor:{propertyType:"child",type:"string",child:"_remainingNameElement",childProperty:"backgroundColor",resourceValue:["getTheme"],defaultValue:"@Transparent"},remainingNameForegroundColor:{propertyType:"child",type:"string",child:"_remainingNameElement",childProperty:"foregroundColor",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},remainingValueBackgroundColor:{propertyType:"child",type:"string",child:"_remainingValueElement",childProperty:"backgroundColor",resourceValue:["getTheme"],defaultValue:"@Transparent"},remainingValueForegroundColor:{propertyType:"child",type:"string",child:"_remainingValueElement",childProperty:"foregroundColor",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},remainingSymbolBackgroundColor:{propertyType:"child",type:"string",child:"_remainingSymbolElement",childProperty:"backgroundColor",resourceValue:["getTheme"],defaultValue:"@Transparent"},remainingSymbolForegroundColor:{propertyType:"child",type:"string",child:"_remainingSymbolElement",childProperty:"foregroundColor",resourceValue:["getTheme"],defaultValue:"@WarningColor"},configuredNameBackgroundColor:{propertyType:"child",type:"string",child:"_configuredNameElement",childProperty:"backgroundColor",resourceValue:["getTheme"],defaultValue:"@Transparent"},configuredNameForegroundColor:{propertyType:"child",type:"string",child:"_configuredNameElement",childProperty:"foregroundColor",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},configuredValueBackgroundColor:{propertyType:"child",type:"string",child:"_configuredValueElement",childProperty:"backgroundColor",resourceValue:["getTheme"],defaultValue:"@Transparent"},configuredValueForegroundColor:{propertyType:"child",type:"string",child:"_configuredValueElement",childProperty:"foregroundColor",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},configuredSymbolBackgroundColor:{propertyType:"child",type:"string",child:"_configuredSymbolElement",childProperty:"backgroundColor",resourceValue:["getTheme"],defaultValue:"@Transparent"},configuredSymbolForegroundColor:{propertyType:"child",type:"string",child:"_configuredSymbolElement",childProperty:"foregroundColor",resourceValue:["getTheme"],defaultValue:"@WarningColor"},configModeNameBackgroundColor:{propertyType:"child",type:"string",child:"_configModeNameElement",childProperty:"backgroundColor",resourceValue:["getTheme"],defaultValue:"@Transparent"},configModeNameForegroundColor:{propertyType:"child",type:"string",child:"_configModeNameElement",childProperty:"foregroundColor",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},configModeValueBackgroundColor:{propertyType:"child",type:"string",child:"_configModeValueElement",childProperty:"backgroundColor",resourceValue:["getTheme"],defaultValue:"@Transparent"},configModeValueForegroundColor:{propertyType:"child",type:"string",child:"_configModeValueElement",childProperty:"foregroundColor",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},configModeSymbolBackgroundColor:{propertyType:"child",type:"string",child:"_configModeSymbolElement",childProperty:"backgroundColor",resourceValue:["getTheme"],defaultValue:"@Transparent"},configModeSymbolForegroundColor:{propertyType:"child",type:"string",child:"_configModeSymbolElement",childProperty:"foregroundColor",resourceValue:["getTheme"],defaultValue:"@WarningColor"},neededNameBackgroundColor:{propertyType:"child",type:"string",child:"_neededNameElement",childProperty:"backgroundColor",resourceValue:["getTheme"],defaultValue:"@Transparent"},neededNameForegroundColor:{propertyType:"child",type:"string",child:"_neededNameElement",childProperty:"foregroundColor",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},neededValueBackgroundColor:{propertyType:"child",type:"string",child:"_neededValueElement",childProperty:"backgroundColor",resourceValue:["getTheme"],defaultValue:"@Transparent"},neededValueForegroundColor:{propertyType:"child",type:"string",child:"_neededValueElement",childProperty:"foregroundColor",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},neededSymbolBackgroundColor:{propertyType:"child",type:"string",child:"_neededSymbolElement",childProperty:"backgroundColor",resourceValue:["getTheme"],defaultValue:"@Transparent"},neededSymbolForegroundColor:{propertyType:"child",type:"string",child:"_neededSymbolElement",childProperty:"foregroundColor",resourceValue:["getTheme"],defaultValue:"@WarningColor"},linkSymbolBackgroundColor:{propertyType:"child",type:"string",child:"_linkSymbolElement",childProperty:"backgroundColor",resourceValue:["getTheme"],defaultValue:"@Transparent"},linkSymbolForegroundColor:{propertyType:"child",type:"string",child:"_linkSymbolElement",childProperty:"foregroundColor",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},linkTextBackgroundColor:{propertyType:"child",type:"string",child:"_linkTextElement",childProperty:"backgroundColor",resourceValue:["getTheme"],defaultValue:"@Transparent"},linkTextForegroundColor:{propertyType:"child",type:"string",child:"_linkTextElement",childProperty:"foregroundColor",resourceValue:["getTheme"],defaultValue:"@LenzeCyan"}};this._availableContainers=[];this._remainingContainers=[];this._configuredContainers=[];this._configModeContainers=[];this._neededContainers=[];this.initialize(Lenze.UI.LicenseTotal)}createTemplate(){this.element.innerHTML=`\n                <div class="${this.className}__header" data-win-control="${Lenze.Controls.getType(VisiWin.UI.TextBlock)}" data-ref-element="_titleElement"></div>\n                <div class="${this.className}__body">\n                    <div class="${this.className}__details-column">\n                        <div class="${this.className}__details-list">\n                            <div class="${this.className}__details-list-item ${this.className}__available-item">\n                                <div data-win-control="${Lenze.Controls.getType(VisiWin.UI.TextBlock)}" data-ref-element="_availableNameElement"></div>\n                            </div>\n                            \x3c!--div class="${this.className}__details-list-item ${this.className}__remaining-item">\n                                <div data-win-control="${Lenze.Controls.getType(VisiWin.UI.TextBlock)}" data-ref-element="_remainingNameElement"></div>\n                            </div--\x3e\n                            <div class="${this.className}__details-list-item ${this.className}__configured-item">\n                                <div data-win-control="${Lenze.Controls.getType(VisiWin.UI.TextBlock)}" data-ref-element="_configuredNameElement"></div>\n                            </div>                             \n                            <div class="${this.className}__details-list-item ${this.className}__needed-item">\n                                <div data-win-control="${Lenze.Controls.getType(VisiWin.UI.TextBlock)}" data-ref-element="_neededNameElement"></div>\n                            </div>\n                            <div class="${this.className}__details-list-item ${this.className}__configMode-item">\n                                <div data-win-control="${Lenze.Controls.getType(VisiWin.UI.TextBlock)}" data-ref-element="_configModeNameElement"></div>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="${this.className}__details-column">\n                        <div class="${this.className}__details-list">\n                            <div class="${this.className}__details-list-item ${this.className}__available-item">\n                                <div data-win-control="${Lenze.Controls.getType(VisiWin.UI.TextBlock)}" data-ref-element="_availableValueElement"></div>\n                            </div>\n                            \x3c!--div class="${this.className}__details-list-item ${this.className}__remaining-item">\n                                <div data-win-control="${Lenze.Controls.getType(VisiWin.UI.TextBlock)}" data-ref-element="_remainingValueElement"></div>\n                            </div--\x3e\n                            <div class="${this.className}__details-list-item ${this.className}__configured-item">\n                                <div data-win-control="${Lenze.Controls.getType(VisiWin.UI.TextBlock)}" data-ref-element="_configuredValueElement"></div>\n                            </div>\n                            <div class="${this.className}__details-list-item ${this.className}__needed-item">\n                                <div data-win-control="${Lenze.Controls.getType(VisiWin.UI.TextBlock)}" data-ref-element="_neededValueElement"></div>\n                            </div>\n                            <div class="${this.className}__details-list-item ${this.className}__configMode-item">\n                                <div data-win-control="${Lenze.Controls.getType(VisiWin.UI.TextBlock)}" data-ref-element="_configModeValueElement"></div>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="${this.className}__details-column">\n                        <div class="${this.className}__details-list">\n                            <div class="${this.className}__details-list-item ${this.className}__available-item">\n                                <div data-win-control="${Lenze.Controls.getType(VisiWin.UI.Symbol)}" data-ref-element="_availableSymbolElement"></div>\n                            </div>\n                            \x3c!--div class="${this.className}__details-list-item ${this.className}__remaining-item">\n                                <div data-win-control="${Lenze.Controls.getType(VisiWin.UI.Symbol)}" data-ref-element="_remainingSymbolElement"></div>\n                            </div--\x3e\n                            <div class="${this.className}__details-list-item ${this.className}__configured-item">\n                                <div data-win-control="${Lenze.Controls.getType(VisiWin.UI.Symbol)}" data-ref-element="_configuredSymbolElement"></div>\n                            </div>\n                            <div class="${this.className}__details-list-item ${this.className}__needed-item">\n                                <div data-win-control="${Lenze.Controls.getType(VisiWin.UI.Symbol)}" data-ref-element="_neededSymbolElement"></div>\n                            </div>\n                            <div class="${this.className}__details-list-item ${this.className}__configMode-item">\n                                <div data-win-control="${Lenze.Controls.getType(VisiWin.UI.Symbol)}" data-ref-element="_configModeSymbolElement"></div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div class="lenze-licensetotal__footer">\n                    <div class="lenze-licensetotal__symbol" data-win-control="${Lenze.Controls.getType(VisiWin.UI.Symbol)}" data-ref-element="_linkSymbolElement"></div>\n                    <div class="lenze-licensetotal__link">\n                        <a href="https://www.lenze.com/en-us/products/engineering/licenses/fast-motion-application-credits/" target="_blank" rel="noopener noreferrer">\n                            <div data-win-control="${Lenze.Controls.getType(VisiWin.UI.TextBlock)}" data-ref-element="_linkTextElement"></div>\n                        </a>\n                    </div>\n                </div>\n            `;this._availableContainers=[...this.element.getElementsByClassName(`${this.className}__available-item`)];this._configuredContainers=[...this.element.getElementsByClassName(`${this.className}__configured-item`)];this._neededContainers=[...this.element.getElementsByClassName(`${this.className}__needed-item`)];this._configModeContainers=[...this.element.getElementsByClassName(`${this.className}__configMode-item`)];return this.initializeChilds()}afterInit(){if(VisiWin.Utilities.isInDesignMode()){this._setCreditValuesAsync();return}this._licenseService=VisiWin.AppServices[Lenze.Strings.nameof("FastLicenseService")];this._licenseChangedHandler=this._onLicenseChangedAsync.bind(this);this._licenseService.addEventListener(VisiWin.AppServices.Impl.FastLicenseService.valuesChangeEventName,this._licenseChangedHandler)}_updateLayout(changes){this._setContainerHeights(this._availableContainers);this._setContainerHeights(this._configuredContainers);this._setContainerHeights(this._neededContainers);this._setContainerHeights(this._configModeContainers)}_updateColors(changes){this.setColor(Lenze.Strings.nameof("backgroundColor"));this.setColor(Lenze.Strings.nameof("borderColor"));this.setColor(Lenze.Strings.nameof("foregroundColor"))}async attach(){await this._setCreditValuesAsync();return await super.attach()}dispose(){if(VisiWin.Utilities.isInDesignMode())return super.dispose();this._licenseService.removeEventListener(VisiWin.AppServices.Impl.FastLicenseService.valuesChangeEventName,this._licenseChangedHandler);return super.dispose()}_setContainerHeights(containers){const height=Math.max(...containers.map(value=>value.clientHeight));containers.forEach(value=>value.style.minHeight=`${height}px`)}async _setCreditValuesAsync(){if(VisiWin.Utilities.isInDesignMode()){this._availableValueElement.winControl.text="100";this._configuredValueElement.winControl.text="0";this._neededValueElement.winControl.text="150";this._configModeValueElement.winControl.text="0";Lenze.Helpers.LicenseHelper.SetNeededExceededStyle(100,150,this._neededValueElement,this._neededSymbolElement);this._neededSymbolElement.winControl.visibility="visible";return}const currentValue=await this._licenseService.getLicenseAsync();if(!await this._licenseService.getServiceEnabledAsync()||currentValue==null){this.element.innerHTML="";this.element.innerText="FAST services are not available inside this UI Designer client.";return}const available=currentValue.totalApplicationCredit.totalAvailable;const needed=currentValue.totalApplicationCredit.totalActiveNeeded;const configured=currentValue.totalApplicationCredit.totalConfigured;const configMode=currentValue.fastToolboxInfo.configMode;let configModeEnum;(function(configModeEnum){configModeEnum[configModeEnum["All AC to FastToolbox"]=0]="All AC to FastToolbox";configModeEnum[configModeEnum["Static AC configuration"]=1]="Static AC configuration";configModeEnum[configModeEnum["AC configuration by PLC-Project"]=2]="AC configuration by PLC-Project"})(configModeEnum||(configModeEnum={}));this._availableValueElement.winControl.text=available.toString();this._configuredValueElement.winControl.text=configured.toString();this._neededValueElement.winControl.text=needed.toString();this._configModeValueElement.winControl.text=configModeEnum[configMode];Lenze.Helpers.LicenseHelper.SetNeededExceededStyle(available,needed,this._neededValueElement,this._neededSymbolElement)}async _onLicenseChangedAsync(){if(!this.isAttached)return;await this._setCreditValuesAsync()}}UI.LicenseTotal=LicenseTotal})(UI=Lenze.UI||(Lenze.UI={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var UI;(function(UI){"use strict";class LogbookFilter extends Lenze.UI.ControlBase{get isInitialized(){return this._isInitialized}constructor(element,options){super(element,options);this._rowClassName="lenze-logbookfilter__row";this._selectedRowClassName="lenze-logbookfilter__row-selected";this.properties={designerType:{propertyType:"base",type:"string",defaultValue:"Control"},filterOnChange:{propertyType:"member",type:"boolean",defaultValue:true},textVarInName:{propertyType:"member",type:"string"},severityLocalizableTexts:{propertyType:"member",type:"string",defaultValue:"@[ServerApplication].FAST.Logbook.Severity"},layerLocalizableTexts:{propertyType:"member",type:"string",defaultValue:"@[ServerApplication].FAST.Logbook.Layer"},targetGroupLocalizableTexts:{propertyType:"member",type:"string",defaultValue:"@[ServerApplication].FAST.Logbook.TargetGroup"},componentTypeLocalizableTexts:{propertyType:"member",type:"string",defaultValue:"@[ServerApplication].FAST.Logbook.ComponentType"},backgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BackgroundColor"},foregroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},borderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"},disabledBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BackgroundColor"},disabledForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},disabledBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"},selectedBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@PrimaryColor"},selectedForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@AltForegroundColor"},disabledSelectedBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@PrimaryColor"},disabledSelectedForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@AltForegroundColor"},itemselected:{propertyType:"event",group:"Event"}};this._isInitialized=false;this._isBusy=false;this._filterType=null;this._allFilterValues=[];this._filteredFilterValues=[];this._selectedFilterValues=[];this._textVarIn=null;this._prefilteredValues=[];this._setFilterValuesDictionary=new Map;this._setFilterValuesDictionary.set(Lenze.Models.LogbookFilterEnum.severity,this._getSeverityValuesAsync.bind(this));this._setFilterValuesDictionary.set(Lenze.Models.LogbookFilterEnum.layer,this._getLayerValuesAsync.bind(this));this._setFilterValuesDictionary.set(Lenze.Models.LogbookFilterEnum.componentName,this._getComponentNameValuesAsync.bind(this));this._setFilterValuesDictionary.set(Lenze.Models.LogbookFilterEnum.componentType,this._getComponentTypeValuesAsync.bind(this));this._setFilterValuesDictionary.set(Lenze.Models.LogbookFilterEnum.targetGroup,this._getTargetGroupValuesAsync.bind(this));this.initialize(Lenze.UI.LogbookFilter)}async setFilterTypeAsync(filterType,prefilter=[]){this._filterType=filterType;this._prefilteredValues=prefilter;await this._resetAllItemsAsync();this._isInitialized=true}getFilteredValues(){return this._selectedFilterValues.map(filteritem=>filteritem.value)}setIsBusy(value){this.disabled=value;this._isBusy=value;this._updateColors(null)}async clearAsync(){await this._resetAllItemsAsync()}createTemplate(){this.element.innerHTML="";return this.processElements([])}afterInit(){if(VisiWin.Utilities.isInDesignMode())return;this._moduleService=VisiWin.AppServices.FastModuleService;this._logbookService=VisiWin.AppServices.FastLogbookService;this._languageService=VisiWin.System.Language.LanguageService.getService();this._textVarIn=Lenze.Dom.getControl(this.textVarInName,Lenze.Controls.getType(VisiWin.UI.TextVarIn))}createHandler(){if(VisiWin.Utilities.isInDesignMode())return;this._rowSelectedHandler=this._onRowSelectedAsync.bind(this);this.element.addEventListener("pointerup",this._rowSelectedHandler)}dispose(){if(VisiWin.Utilities.isInDesignMode())return super.dispose();this.element.removeEventListener("pointerup",this._rowSelectedHandler);return super.dispose()}_updateColors(changes){const backgroundColor=!this.disabled?this.backgroundColor:this.disabledBackgroundColor;const foregroundColor=!this.disabled?this.foregroundColor:this.disabledForegroundColor;this.setColor(backgroundColor);this.setColor(foregroundColor);this.setColor(!this.disabled?this.borderColor:this.disabledBorderColor);for(let child of Array.from(this.element.children)){const childElement=child;const isSelected=childElement.classList.contains(this._selectedRowClassName);childElement.style.backgroundColor=isSelected?this.getThemeColor(!this.disabled?this.selectedBackgroundColor:this.disabledSelectedBackgroundColor):this.getThemeColor(backgroundColor);childElement.style.color=isSelected?this.getThemeColor(!this.disabled?this.selectedForegroundColor:this.disabledSelectedForegroundColor):this.getThemeColor(foregroundColor);childElement.style.borderColor=this.getThemeColor(!this.disabled?this.borderColor:this.disabledBorderColor)}}async _resetAllItemsAsync(){this.element.innerHTML="";if(!await this._logbookService.getLogbookEnabledAsync()){this.element.innerText="FAST services are not available inside this UI Designer client.";return}if(this._filterType==null)return;const newValues=await this._setFilterValuesDictionary.get(this._filterType)();this._allFilterValues=newValues.sort((a,b)=>a.displayName<b.displayName?-1:a.displayName>b.displayName?1:0);this._setFilteredItems();this._selectedFilterValues=this._prefilteredValues.length===0?[]:this._allFilterValues.filter(l=>this._prefilteredValues.indexOf(l.value)!==-1);this._setRows()}_setFilteredItems(){this._filteredFilterValues=this._textVarIn==null?this._allFilterValues:this._allFilterValues.filter(filterItem=>filterItem.value.toString().toLowerCase().includes(this._textVarIn.value.toLowerCase()))}_setRows(){for(let value of this._filteredFilterValues){const rowElement=document.createElement("div");rowElement.classList.add(this._rowClassName);if(this._selectedFilterValues.find(value2=>value2.value===value.value)!=null)rowElement.classList.add(this._selectedRowClassName);rowElement.innerText=value.displayName;this.element.appendChild(rowElement)}this._updateColors(null)}async _getSeverityValuesAsync(){return await this._getArrayFromEnum(Lenze.Models.SeverityEnum,this.severityLocalizableTexts)}async _getLayerValuesAsync(){return await this._getArrayFromEnum(Lenze.Models.LayerEnum,this.layerLocalizableTexts)}async _getComponentNameValuesAsync(){const componentNames=[...new Set((await this._moduleService.getComponentsAsync()).map(c=>c.name))];return componentNames.map(value=>{return{displayName:value,value:value,displayNameLocalizable:false}})}async _getComponentTypeValuesAsync(){const components=await this._moduleService.getComponentsAsync();const componentTypes=[...new Set(components.map(value=>value.componentType))];return(await Promise.all(componentTypes.map(async value=>{const displayName=await Lenze.Texts.getTextFromValueAsync(this._languageService,this.componentTypeLocalizableTexts,value);return{displayName:displayName,value:value,displayNameLocalizable:true}}))).filter(x=>!VisiWin.isNumber(x.displayName)&&!componentTypes.includes(Number.parseInt(x.displayName)))}async _getTargetGroupValuesAsync(){return await this._getArrayFromEnum(Lenze.Models.TargetGroupEnum,this.targetGroupLocalizableTexts)}async _getArrayFromEnum(enumaration,textList){return await Promise.all(Object.values(enumaration).filter(value=>VisiWin.isNumber(value)).map(async value=>{const displayName=await Lenze.Texts.getTextFromValueAsync(this._languageService,textList,value);return{displayName:displayName,value:value,displayNameLocalizable:true}}))}async _onRowSelectedAsync(event){if(!await this._logbookService.getLogbookEnabledAsync()||this._isBusy)return;const row=event.target;if(row==null||!row.classList.contains(this._rowClassName))return;const index=Array.from(this.element.children).indexOf(row);if(index===-1)return;const selectedItem=this._filteredFilterValues[index];const selectedItemIndex=this._selectedFilterValues.findIndex(item=>item.value===selectedItem.value);if(selectedItemIndex===-1){row.classList.add(this._selectedRowClassName);this._selectedFilterValues.push(selectedItem)}else{row.classList.remove(this._selectedRowClassName);this._selectedFilterValues.splice(selectedItemIndex,1)}this._updateColors(null);if(this.filterOnChange)this.dispatchEvent("itemselected",{})}}UI.LogbookFilter=LogbookFilter})(UI=Lenze.UI||(Lenze.UI={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var UI;(function(UI){"use strict";class Logbook extends Lenze.UI.VirtualizingTableBase{constructor(element,options){super(element,options);this.properties={designerType:{propertyType:"base",type:"string",defaultValue:"Control"},registerTargetId:{propertyType:"base",defaultValue:"VirtualizingTableColumn"},headerPadding:{propertyType:"member",type:"string",defaultValue:"8px 16px"},headerBorderWidthTop:{propertyType:"member",type:"string",defaultValue:"2px"},headerBorderWidthSides:{propertyType:"member",type:"string",defaultValue:"2px"},headerBorderWidthBottom:{propertyType:"member",type:"string",defaultValue:"2px"},headerBorderStyle:{propertyType:"member",type:"string",defaultValue:"solid"},headerFontClass:{propertyType:"member",type:"string",defaultValue:"Roboto16"},headerFontSize:{propertyType:"member",type:"string"},headerFontWeight:{propertyType:"member",type:"string",defaultValue:"FW100"},headerUpperCase:{propertyType:"member",type:"boolean",defaultValue:true},bodyPadding:{propertyType:"member",type:"string",defaultValue:"8px 16px"},bodyBorderWidthSides:{propertyType:"member",type:"string",defaultValue:"1px"},bodyBorderWidthBottom:{propertyType:"member",type:"string",defaultValue:"1px"},bodyBorderStyle:{propertyType:"member",type:"string",defaultValue:"solid"},bodyFontClass:{propertyType:"member",type:"string",defaultValue:"Roboto16"},bodyFontSize:{propertyType:"member",type:"string"},bodyFontWeight:{propertyType:"member",type:"string"},dateTimeLocale:{propertyType:"member",type:"string",defaultValue:""},formatDate:{propertyType:"member",type:"string",defaultValue:"ShortDate"},formatTime:{propertyType:"member",type:"string",defaultValue:"LongTime"},pageSize:{propertyType:"member",type:"number",defaultValue:50},maxAmountOfPages:{propertyType:"member",type:"number",defaultValue:4},loadNextTriggerValue:{propertyType:"member",type:"string",defaultValue:400},columns:{propertyType:"member",type:"string"},disableMultiSort:{propertyType:"member",type:"boolean",defaultValue:false},severityFilterTableName:{propertyType:"member",type:"string"},layerFilterTableName:{propertyType:"member",type:"string"},componentNameFilterTableName:{propertyType:"member",type:"string"},componentTypeFilterTableName:{propertyType:"member",type:"string"},targetGroupFilterTableName:{propertyType:"member",type:"string"},severityLocalizableTexts:{propertyType:"member",type:"string",defaultValue:"@[ServerApplication].FAST.Logbook.Severity"},layerLocalizableTexts:{propertyType:"member",type:"string",defaultValue:"@[ServerApplication].FAST.Logbook.Layer"},targetGroupLocalizableTexts:{propertyType:"member",type:"string",defaultValue:"@[ServerApplication].FAST.Logbook.TargetGroup"},componentTypeLocalizableTexts:{propertyType:"member",type:"string",defaultValue:"@[ServerApplication].FAST.Logbook.ComponentType"},defaultErrorText:{propertyType:"member",type:"string",defaultValue:"Unknown Event"},backgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BackgroundColor"},foregroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},headerBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BackgroundColor"},headerForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},headerBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"},headerSymbolBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BackgroundColor"},headerSymbolActiveForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},headerSymbolInactiveForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@DisabledForegroundColor"},bodyBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BackgroundColor"},bodyForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},bodyBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"},bodySelectedBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@PrimaryColor"},bodySelectedForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@AltForegroundColor"},bodySelectedBorderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"},selectedchanged:{propertyType:"event",group:"Event",triggerDataName:"value"}};this._tableClassName="lenze-logbook__table";this._headerClassName="lenze-logbook__header";this._headerRowClassName="lenze-logbook__header-row";this._headerCellClassName="lenze-logbook__header-cell";this._bodyClassName="lenze-logbook__body";this._bodyRowClassName="lenze-logbook__body-row";this._bodyCellClassName="lenze-logbook__body-cell";this._logbookEnabled=true;this._severitiesFilter=null;this._layerFilter=null;this._componentNameFilter=null;this._componentTypeFilter=null;this._targetGroupFilter=null;this._componentNamesToFilter=[];this.initialize(Lenze.UI.Logbook)}async refreshLogbookAsync(){await this._logbookService.clearRequestAsync(this._id);await this._refreshAsync()}async clearFiltersAsync(){var _a,_b,_c,_d,_e;await Promise.all([(_a=this._severitiesFilter)===null||_a===void 0?void 0:_a.clearAsync(),(_b=this._layerFilter)===null||_b===void 0?void 0:_b.clearAsync(),(_c=this._componentNameFilter)===null||_c===void 0?void 0:_c.clearAsync(),(_d=this._componentTypeFilter)===null||_d===void 0?void 0:_d.clearAsync(),(_e=this._targetGroupFilter)===null||_e===void 0?void 0:_e.clearAsync()]);await this.refreshLogbookAsync()}getFilterOptions(pageNumber,pageSize,orderBy=null){var _a,_b,_c,_d,_e,_f,_g,_h;return this._logbookHelper.createFilterOptions(pageNumber,pageSize,(_b=(_a=this._severitiesFilter)===null||_a===void 0?void 0:_a.getFilteredValues())!==null&&_b!==void 0?_b:[],this._componentNameFilter==null||!this._componentNameFilter.isInitialized?this._componentNamesToFilter:this._componentNameFilter.getFilteredValues(),(_d=(_c=this._componentTypeFilter)===null||_c===void 0?void 0:_c.getFilteredValues())!==null&&_d!==void 0?_d:[],(_f=(_e=this._layerFilter)===null||_e===void 0?void 0:_e.getFilteredValues())!==null&&_f!==void 0?_f:[],(_h=(_g=this._targetGroupFilter)===null||_g===void 0?void 0:_g.getFilteredValues())!==null&&_h!==void 0?_h:[],orderBy!=null?orderBy:this._mappedOrderedColumns)}disable(){this._updateDisabledChildControls(true)}afterInit(){var _a,_b,_c,_d,_e;if(VisiWin.Utilities.isInDesignMode())return;this._logbookService=VisiWin.AppServices.FastLogbookService;this._languageService=VisiWin.System.Language.LanguageService.getService();this._filterTableSelectedHandler=this._onFilterTableSelectedAsync.bind(this);this._languageChangeHandler=this._onLanguageChanged.bind(this);this._logbookHelper=new Lenze.Helpers.LogbookHelper(this._languageService,{severityLocalizableTexts:this.severityLocalizableTexts,layerLocalizableTexts:this.layerLocalizableTexts,targetGroupLocalizableTexts:this.targetGroupLocalizableTexts,componentTypeLocalizableTexts:this.componentTypeLocalizableTexts,dateTimeLocale:this.dateTimeLocale,formatDate:this.formatDate,formatTime:this.formatTime,defaultErrorText:this.defaultErrorText});this._id=this._logbookService.getRandomString();this._componentNamesToFilter=this._logbookService.getComponentNamesFilter();this._severitiesFilter=Lenze.Dom.getControl(this.severityFilterTableName,Lenze.Controls.getType(UI.LogbookFilter));this._layerFilter=Lenze.Dom.getControl(this.layerFilterTableName,Lenze.Controls.getType(UI.LogbookFilter));this._componentNameFilter=Lenze.Dom.getControl(this.componentNameFilterTableName,Lenze.Controls.getType(UI.LogbookFilter));this._componentTypeFilter=Lenze.Dom.getControl(this.componentTypeFilterTableName,Lenze.Controls.getType(UI.LogbookFilter));this._targetGroupFilter=Lenze.Dom.getControl(this.targetGroupFilterTableName,Lenze.Controls.getType(UI.LogbookFilter));Promise.all([(_a=this._severitiesFilter)===null||_a===void 0?void 0:_a.setFilterTypeAsync(Lenze.Models.LogbookFilterEnum.severity),(_b=this._layerFilter)===null||_b===void 0?void 0:_b.setFilterTypeAsync(Lenze.Models.LogbookFilterEnum.layer),(_c=this._componentNameFilter)===null||_c===void 0?void 0:_c.setFilterTypeAsync(Lenze.Models.LogbookFilterEnum.componentName,this._componentNamesToFilter),(_d=this._componentTypeFilter)===null||_d===void 0?void 0:_d.setFilterTypeAsync(Lenze.Models.LogbookFilterEnum.componentType),(_e=this._targetGroupFilter)===null||_e===void 0?void 0:_e.setFilterTypeAsync(Lenze.Models.LogbookFilterEnum.targetGroup)]).then(async()=>{var _a,_b,_c,_d,_e;if(!await this._logbookService.getLogbookEnabledAsync()){this._logbookEnabled=false;this.element.innerHTML="";this.element.innerText="FAST services are not available inside this UI Designer client.";return}(_a=this._severitiesFilter)===null||_a===void 0?void 0:_a.addEventListener("itemselected",this._filterTableSelectedHandler);(_b=this._layerFilter)===null||_b===void 0?void 0:_b.addEventListener("itemselected",this._filterTableSelectedHandler);(_c=this._componentNameFilter)===null||_c===void 0?void 0:_c.addEventListener("itemselected",this._filterTableSelectedHandler);(_d=this._componentTypeFilter)===null||_d===void 0?void 0:_d.addEventListener("itemselected",this._filterTableSelectedHandler);(_e=this._targetGroupFilter)===null||_e===void 0?void 0:_e.addEventListener("itemselected",this._filterTableSelectedHandler);this._languageService.LanguageChanged.add(this._languageChangeHandler);super.afterInit()})}dispose(){var _a,_b,_c,_d,_e;if(VisiWin.Utilities.isInDesignMode()||!this._logbookEnabled)return super.dispose();this._logbookService.clearRequestAsync(this._id);(_a=this._severitiesFilter)===null||_a===void 0?void 0:_a.removeEventListener("itemselected",this._filterTableSelectedHandler);(_b=this._layerFilter)===null||_b===void 0?void 0:_b.removeEventListener("itemselected",this._filterTableSelectedHandler);(_c=this._componentNameFilter)===null||_c===void 0?void 0:_c.removeEventListener("itemselected",this._filterTableSelectedHandler);(_d=this._componentTypeFilter)===null||_d===void 0?void 0:_d.removeEventListener("itemselected",this._filterTableSelectedHandler);(_e=this._targetGroupFilter)===null||_e===void 0?void 0:_e.removeEventListener("itemselected",this._filterTableSelectedHandler);this._languageService.LanguageChanged.remove(this._languageChangeHandler);return super.dispose()}async _getValuesAsync(pageNumber,pageSize,orderBy){if(!await this._logbookService.getLogbookEnabledAsync())return null;const result=await this._logbookService.getLogbookAsync(this._id,this.getFilterOptions(pageNumber,pageSize,orderBy));if(result==null)return{data:null,pageNumber:null,pageSize:null,orderBy:null};return result}_isSameItem(item1,item2){return item1.eventId===item2.eventId&&item1.time===item2.time&&item1.instanceId===item2.instanceId}async _resolveValueAsync(value,fieldName){const fieldValue=await this._logbookHelper.resolveFieldValuesAsync(value,fieldName);return fieldValue!==null&&fieldValue!==void 0?fieldValue:await super._resolveValueAsync(value,fieldName)}_onIsBusyChanged(isFinished){this._updateDisabledChildControls(!isFinished)}async _onFilterTableSelectedAsync(){await this.refreshLogbookAsync()}async _onLanguageChanged(){if(!this.isAttached||!Lenze.Strings.isNullOrWhiteSpace(this.dateTimeLocale))return;await this.refreshLogbookAsync()}_updateDisabledChildControls(disabled){var _a,_b,_c,_d,_e;(_a=this._severitiesFilter)===null||_a===void 0?void 0:_a.setIsBusy(disabled);(_b=this._layerFilter)===null||_b===void 0?void 0:_b.setIsBusy(disabled);(_c=this._componentNameFilter)===null||_c===void 0?void 0:_c.setIsBusy(disabled);(_d=this._componentTypeFilter)===null||_d===void 0?void 0:_d.setIsBusy(disabled);(_e=this._targetGroupFilter)===null||_e===void 0?void 0:_e.setIsBusy(disabled)}}UI.Logbook=Logbook})(UI=Lenze.UI||(Lenze.UI={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var UI;(function(UI){"use strict";class FunctionTree extends Lenze.UI.TreeBase{constructor(element,options){super(element,options);this.properties={designerType:{propertyType:"base",type:"string",defaultValue:"Control"},indentationPadding:{propertyType:"member",type:"number",defaultValue:16},headerFontClass:{propertyType:"member",type:"string",defaultValue:"None"},headerFontSize:{propertyType:"member",type:"string",defaultValue:"16px"},headerFontWeight:{propertyType:"member",type:"string",defaultValue:"FW500"},headerTextAlignment:{propertyType:"member",type:"string",defaultValue:"Center"},headerBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ChromeLow"},headerTextBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ChromeLow"},headerTextForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@LenzeDarkGrey"},bodyCellFontSize:{propertyType:"member",type:"string",defaultValue:"12px"},bodyCellFontWeight:{propertyType:"member",type:"string",defaultValue:"500"},bodyCellBorderWidth:{propertyType:"member",type:"string",defaultValue:"0px 0px 2px 0px"},bodyCellBorderStyle:{propertyType:"member",type:"string",defaultValue:"solid"},bodyCellBorderColor:{propertyType:"member",type:"string",defaultValue:"@ChromeLow"},arrowSymbol:{propertyType:"member",type:"string",defaultValue:"keyboard_arrow_right"},arrowSymbolColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@PrimaryColor"},componentSymbolContainerMargin:{propertyType:"member",type:"string",defaultValue:"0px 8px"},componentSymbolIconFont:{propertyType:"member",type:"string",defaultValue:"lenze-icons"},componentSymbolSize:{propertyType:"member",type:"string",defaultValue:"40px"},componentSymbolWidth:{propertyType:"member",type:"string",defaultValue:"100%"},componentSymbolHeight:{propertyType:"member",type:"string",defaultValue:"100%"},componentSymbolForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},componentDefaultType:{propertyType:"member",type:"number",defaultValue:0},errorSymbolIconFont:{propertyType:"member",type:"string",defaultValue:"lenze-icons"},errorSymbolSize:{propertyType:"member",type:"string",defaultValue:"20px"},errorSymbolBorderWidth:{propertyType:"member",type:"string",defaultValue:"1px"},errorSymbolBorderStyle:{propertyType:"member",type:"string",defaultValue:"none"},errorSymbolBorderColor:{propertyType:"member",type:"string",defaultValue:"@BorderColor"},errorSymbolFaultBorderRadius:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"50%"},errorSymbolFaultForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ErrorColor"},errorSymbolFaultBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BackgroundColor"},errorSymbolTroubleBorderRadius:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"50%"},errorSymbolTroubleForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ErrorColor"},errorSymbolTroubleBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BackgroundColor"},errorSymbolWarningBorderRadius:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"100% 100% 20% 20%"},errorSymbolWarningForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@WarningColor"},errorSymbolWarningBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BackgroundColor"},errorSymbolInformationBorderRadius:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"50%"},errorSymbolInformationForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@InfoColor"},errorSymbolInformationBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BackgroundColor"},logbookSymbol:{propertyType:"member",type:"string",defaultValue:"assignment"},logbookIconFont:{propertyType:"member",type:"string",defaultValue:"material-icons"},logbookMargin:{propertyType:"member",type:"string",defaultValue:"0px"},logbookPadding:{propertyType:"member",type:"string",defaultValue:"0px"},logbookForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},logbookBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@Transparent"},logbookDialogName:{propertyType:"member",type:"string",defaultValue:"dialogs/fast/LogbookDialog.html"},currentAlarmsIconFont:{propertyType:"member",type:"string",defaultValue:"lenze-icons"},currentAlarmsMargin:{propertyType:"member",type:"string",defaultValue:"0px"},currentAlarmsPadding:{propertyType:"member",type:"string",defaultValue:"0px"},currentAlarmsDialogName:{propertyType:"member",type:"string",defaultValue:"dialogs/fast/CurrentAlarmsDialog.html"},licenseSymbol:{propertyType:"member",type:"string",defaultValue:"certificate"},licenseIconFont:{propertyType:"member",type:"string",defaultValue:"lenze-icons"},licenseMargin:{propertyType:"member",type:"string",defaultValue:"0px"},licensePadding:{propertyType:"member",type:"string",defaultValue:"0px"},licenseForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},licenseBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@Transparent"},licenseDialogName:{propertyType:"member",type:"string",defaultValue:"dialogs/fast/LicenseDialog.html"},licenseAuthorizationRight:{propertyType:"member",type:"string",defaultValue:""},showAsset:{propertyType:"member",type:"boolean",defaultValue:false},assetSymbol:{propertyType:"member",type:"string",defaultValue:"portrait"},assetIconFont:{propertyType:"member",type:"string",defaultValue:"lenze-icons"},assetMargin:{propertyType:"member",type:"string",defaultValue:"0px"},assetPadding:{propertyType:"member",type:"string",defaultValue:"0px"},assetForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},assetBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@Transparent"},assetDialogName:{propertyType:"member",type:"string",defaultValue:"dialogs/fast/AssetDialog.html"},assetAuthorizationRight:{propertyType:"member",type:"string",defaultValue:""},deviceTreeVariableName:{propertyType:"member",type:"string",defaultValue:"__FAST.LMH.DeviceTree"},currentAlarmsVariableName:{propertyType:"member",type:"string",defaultValue:"__FAST.LEM.CurrentAlarms"},backgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BackgroundColor"},borderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"}};this._treeType=Lenze.Models.TreeType.componentTree;this.initialize(Lenze.UI.FunctionTree)}}UI.FunctionTree=FunctionTree})(UI=Lenze.UI||(Lenze.UI={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var UI;(function(UI){"use strict";class NetworkTree extends Lenze.UI.TreeBase{constructor(element,options){super(element,options);this.properties={designerType:{propertyType:"base",type:"string",defaultValue:"Control"},indentationPadding:{propertyType:"member",type:"number",defaultValue:16},headerFontClass:{propertyType:"member",type:"string",defaultValue:"None"},headerFontSize:{propertyType:"member",type:"string",defaultValue:"16px"},headerFontWeight:{propertyType:"member",type:"string",defaultValue:"FW500"},headerTextAlignment:{propertyType:"member",type:"string",defaultValue:"Center"},headerBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ChromeLow"},headerTextBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ChromeLow"},headerTextForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@LenzeDarkGrey"},bodyCellFontWeight:{propertyType:"member",type:"string",defaultValue:"500"},bodyCellFontSize:{propertyType:"member",type:"string",defaultValue:"12px"},bodyCellBorderWidth:{propertyType:"member",type:"string",defaultValue:"0px 0px 2px 0px"},bodyCellBorderStyle:{propertyType:"member",type:"string",defaultValue:"solid"},bodyCellBorderColor:{propertyType:"member",type:"string",defaultValue:"@ChromeLow"},arrowSymbol:{propertyType:"member",type:"string",defaultValue:"keyboard_arrow_right"},arrowSymbolColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@PrimaryColor"},componentSymbolContainerMargin:{propertyType:"member",type:"string",defaultValue:"0px 8px"},componentSymbolIconFont:{propertyType:"member",type:"string",defaultValue:"lenze-icons"},componentSymbolSize:{propertyType:"member",type:"string",defaultValue:"40px"},componentSymbolWidth:{propertyType:"member",type:"string",defaultValue:"100%"},componentSymbolHeight:{propertyType:"member",type:"string",defaultValue:"100%"},componentSymbolForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},componentDefaultType:{propertyType:"member",type:"number",defaultValue:0},errorSymbolIconFont:{propertyType:"member",type:"string",defaultValue:"lenze-icons"},errorSymbolSize:{propertyType:"member",type:"string",defaultValue:"20px"},errorSymbolBorderWidth:{propertyType:"member",type:"string",defaultValue:"1px"},errorSymbolBorderStyle:{propertyType:"member",type:"string",defaultValue:"none"},errorSymbolBorderColor:{propertyType:"member",type:"string",defaultValue:"@BorderColor"},errorSymbolFaultBorderRadius:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"50%"},errorSymbolFaultForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ErrorColor"},errorSymbolFaultBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BackgroundColor"},errorSymbolTroubleBorderRadius:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"50%"},errorSymbolTroubleForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ErrorColor"},errorSymbolTroubleBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BackgroundColor"},errorSymbolWarningBorderRadius:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"100% 100% 20% 20%"},errorSymbolWarningForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@WarningColor"},errorSymbolWarningBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BackgroundColor"},errorSymbolInformationBorderRadius:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"50%"},errorSymbolInformationForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@InfoColor"},errorSymbolInformationBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BackgroundColor"},logbookSymbol:{propertyType:"member",type:"string",defaultValue:"assignment"},logbookIconFont:{propertyType:"member",type:"string",defaultValue:"material-icons"},logbookMargin:{propertyType:"member",type:"string",defaultValue:"0px"},logbookPadding:{propertyType:"member",type:"string",defaultValue:"0px"},logbookForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},logbookBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@Transparent"},logbookDialogName:{propertyType:"member",type:"string",defaultValue:"dialogs/fast/LogbookDialog.html"},currentAlarmsIconFont:{propertyType:"member",type:"string",defaultValue:"lenze-icons"},currentAlarmsMargin:{propertyType:"member",type:"string",defaultValue:"0px"},currentAlarmsPadding:{propertyType:"member",type:"string",defaultValue:"0px"},currentAlarmsDialogName:{propertyType:"member",type:"string",defaultValue:"dialogs/fast/CurrentAlarmsDialog.html"},licenseSymbol:{propertyType:"member",type:"string",defaultValue:"certificate"},licenseIconFont:{propertyType:"member",type:"string",defaultValue:"lenze-icons"},licenseMargin:{propertyType:"member",type:"string",defaultValue:"0px"},licensePadding:{propertyType:"member",type:"string",defaultValue:"0px"},licenseForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},licenseBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@Transparent"},licenseDialogName:{propertyType:"member",type:"string",defaultValue:"dialogs/fast/LicenseDialog.html"},licenseAuthorizationRight:{propertyType:"member",type:"string",defaultValue:""},showAsset:{propertyType:"member",type:"boolean",defaultValue:false},assetSymbol:{propertyType:"member",type:"string",defaultValue:"portrait"},assetIconFont:{propertyType:"member",type:"string",defaultValue:"lenze-icons"},assetMargin:{propertyType:"member",type:"string",defaultValue:"0px"},assetPadding:{propertyType:"member",type:"string",defaultValue:"0px"},assetForegroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},assetBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@Transparent"},assetDialogName:{propertyType:"member",type:"string",defaultValue:"dialogs/fast/AssetDialog.html"},assetAuthorizationRight:{propertyType:"member",type:"string",defaultValue:""},deviceTreeVariableName:{propertyType:"member",type:"string",defaultValue:"__FAST.LMH.DeviceTree"},currentAlarmsVariableName:{propertyType:"member",type:"string",defaultValue:"__FAST.LEM.CurrentAlarms"},backgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BackgroundColor"},borderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BorderColor"}};this._treeType=Lenze.Models.TreeType.communicationTree;this.initialize(Lenze.UI.NetworkTree)}}UI.NetworkTree=NetworkTree})(UI=Lenze.UI||(Lenze.UI={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var UI;(function(UI){"use strict";class CertificateDetails extends Lenze.UI.ControlBase{get certificateDetails(){return this._certificateDetails}constructor(element,options){super(element,options);this.properties={designerType:{propertyType:"base",type:"string",defaultValue:"Control"},detailsAuthorizationRight:{propertyType:"member",type:"string",defaultValue:""},backgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@Transparent"},borderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@Transparent"},foregroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},validFromTextFontWeight:{propertyType:"child",type:"string",child:"_validFromTextTextBlockElement",childProperty:"fontWeight",defaultValue:"Normal"},validFromTextForegroundColor:{propertyType:"child",type:"string",child:"_validFromTextTextBlockElement",childProperty:"foregroundColor",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},validFromDataFontWeight:{propertyType:"child",type:"string",child:"_validFromDataTextBlockElement",childProperty:"fontWeight",defaultValue:"Normal"},validFromDataForegroundColor:{propertyType:"child",type:"string",child:"_validFromDataTextBlockElement",childProperty:"foregroundColor",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},validToTextFontWeight:{propertyType:"child",type:"string",child:"_validToTextTextBlockElement",childProperty:"fontWeight",defaultValue:"Normal"},validToTextForegroundColor:{propertyType:"child",type:"string",child:"_validToTextTextBlockElement",childProperty:"foregroundColor",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},validToDataFontWeight:{propertyType:"child",type:"string",child:"_validToDataTextBlockElement",childProperty:"fontWeight",defaultValue:"Normal"},validToDataForegroundColor:{propertyType:"child",type:"string",child:"_validToDataTextBlockElement",childProperty:"foregroundColor",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},subjectLocalizableText:{propertyType:"member",type:"string",defaultValue:"@[ServerApplication].Security.LCH.CertificateList.CertificateDetails.Subject"},subjectCommonNameAbbreviationLocalizableText:{propertyType:"member",type:"string",defaultValue:"@[ServerApplication].Security.LCH.CertificateList.CertificateDetails.Subject.CommonNameAbbreviation"},subjectCommonNameLocalizableText:{propertyType:"member",type:"string",defaultValue:"@[ServerApplication].Security.LCH.CertificateList.CertificateDetails.Subject.CommonName"},subjectOrganizationAbbreviationLocalizableText:{propertyType:"member",type:"string",defaultValue:"@[ServerApplication].Security.LCH.CertificateList.CertificateDetails.Subject.OrganizationAbbreviation"},subjectOrganizationLocalizableText:{propertyType:"member",type:"string",defaultValue:"@[ServerApplication].Security.LCH.CertificateList.CertificateDetails.Subject.Organization"},subjectOrganizationUnitAbbreviationLocalizableText:{propertyType:"member",type:"string",defaultValue:"@[ServerApplication].Security.LCH.CertificateList.CertificateDetails.Subject.OrganizationUnitAbbreviation"},subjectOrganizationUnitLocalizableText:{propertyType:"member",type:"string",defaultValue:"@[ServerApplication].Security.LCH.CertificateList.CertificateDetails.Subject.OrganizationUnit"},subjectLocalityAbbreviationLocalizableText:{propertyType:"member",type:"string",defaultValue:"@[ServerApplication].Security.LCH.CertificateList.CertificateDetails.Subject.LocalityAbbreviation"},subjectLocalityLocalizableText:{propertyType:"member",type:"string",defaultValue:"@[ServerApplication].Security.LCH.CertificateList.CertificateDetails.Subject.Locality"},subjectStateAbbreviationLocalizableText:{propertyType:"member",type:"string",defaultValue:"@[ServerApplication].Security.LCH.CertificateList.CertificateDetails.Subject.StateAbbreviation"},subjectStateLocalizableText:{propertyType:"member",type:"string",defaultValue:"@[ServerApplication].Security.LCH.CertificateList.CertificateDetails.Subject.State"},subjectCountryAbbreviationLocalizableText:{propertyType:"member",type:"string",defaultValue:"@[ServerApplication].Security.LCH.CertificateList.CertificateDetails.Subject.CountryAbbreviation"},subjectCountryLocalizableText:{propertyType:"member",type:"string",defaultValue:"@[ServerApplication].Security.LCH.CertificateList.CertificateDetails.Subject.Country"},subjectDomainComponentLocalizableText:{propertyType:"member",type:"string",defaultValue:"@[ServerApplication].Security.LCH.CertificateList.CertificateDetails.Subject.DomainComponent"},issuerLocalizableText:{propertyType:"member",type:"string",defaultValue:"@[ServerApplication].Security.LCH.CertificateList.CertificateDetails.Issuer"},issuerCommonNameAbbreviationLocalizableText:{propertyType:"member",type:"string",defaultValue:"@[ServerApplication].Security.LCH.CertificateList.CertificateDetails.Issuer.CommonNameAbbreviation"},issuerCommonNameLocalizableText:{propertyType:"member",type:"string",defaultValue:"@[ServerApplication].Security.LCH.CertificateList.CertificateDetails.Issuer.CommonName"},issuerOrganizationAbbreviationLocalizableText:{propertyType:"member",type:"string",defaultValue:"@[ServerApplication].Security.LCH.CertificateList.CertificateDetails.Issuer.OrganizationAbbreviation"},issuerOrganizationLocalizableText:{propertyType:"member",type:"string",defaultValue:"@[ServerApplication].Security.LCH.CertificateList.CertificateDetails.Issuer.Organization"},issuerOrganizationUnitAbbreviationLocalizableText:{propertyType:"member",type:"string",defaultValue:"@[ServerApplication].Security.LCH.CertificateList.CertificateDetails.Issuer.OrganizationUnitAbbreviation"},issuerOrganizationUnitLocalizableText:{propertyType:"member",type:"string",defaultValue:"@[ServerApplication].Security.LCH.CertificateList.CertificateDetails.Issuer.OrganizationUnit"},issuerLocalityAbbreviationLocalizableText:{propertyType:"member",type:"string",defaultValue:"@[ServerApplication].Security.LCH.CertificateList.CertificateDetails.Issuer.LocalityAbbreviation"},issuerLocalityLocalizableText:{propertyType:"member",type:"string",defaultValue:"@[ServerApplication].Security.LCH.CertificateList.CertificateDetails.Issuer.Locality"},issuerStateAbbreviationLocalizableText:{propertyType:"member",type:"string",defaultValue:"@[ServerApplication].Security.LCH.CertificateList.CertificateDetails.Issuer.StateAbbreviation"},issuerStateLocalizableText:{propertyType:"member",type:"string",defaultValue:"@[ServerApplication].Security.LCH.CertificateList.CertificateDetails.Issuer.State"},issuerCountryAbbreviationLocalizableText:{propertyType:"member",type:"string",defaultValue:"@[ServerApplication].Security.LCH.CertificateList.CertificateDetails.Issuer.CountryAbbreviation"},issuerCountryLocalizableText:{propertyType:"member",type:"string",defaultValue:"@[ServerApplication].Security.LCH.CertificateList.CertificateDetails.Issuer.Country"},issuerDomainComponentLocalizableText:{propertyType:"member",type:"string",defaultValue:"@[ServerApplication].Security.LCH.CertificateList.CertificateDetails.Issuer.DomainComponent"},validityLocalizableText:{propertyType:"member",type:"string",defaultValue:"@[ServerApplication].Security.LCH.CertificateList.CertificateDetails.Validity"},validFromLocalizableText:{propertyType:"member",type:"string",defaultValue:"@[ServerApplication].Security.LCH.CertificateList.CertificateDetails.Validity.ValidFrom"},validToLocalizableText:{propertyType:"member",type:"string",defaultValue:"@[ServerApplication].Security.LCH.CertificateList.CertificateDetails.Validity.ValidTo"},infoLocalizableText:{propertyType:"member",type:"string",defaultValue:"@[ServerApplication].Security.LCH.CertificateList.CertificateDetails.Info"},serialNumberLocalizableText:{propertyType:"member",type:"string",defaultValue:"@[ServerApplication].Security.LCH.CertificateList.CertificateDetails.Info.SerialNumber"},signatureAlgorithmLocalizableText:{propertyType:"member",type:"string",defaultValue:"@[ServerApplication].Security.LCH.CertificateList.CertificateDetails.Info.SignatureAlgorithm"},signatureHashAlgorithmLocalizableText:{propertyType:"member",type:"string",defaultValue:"@[ServerApplication].Security.LCH.CertificateList.CertificateDetails.Info.SignatureHashAlgorithm"},cipherStrengthLocalizableText:{propertyType:"member",type:"string",defaultValue:"@[ServerApplication].Security.LCH.CertificateList.CertificateDetails.Info.CipherStrength"},thumbprintLocalizableText:{propertyType:"member",type:"string",defaultValue:"@[ServerApplication].Security.LCH.CertificateList.CertificateDetails.Info.Thumbprint"},globalFontClass:{propertyType:"child",type:"string",child:["_subjectLabelElement","_subjectCommonNameAbbreviationTextBlockElement","_subjectCommonNameTextTextBlockElement","_subjectCommonNameDataTextBlockElement","_subjectOrganizationAbbreviationTextBlockElement","_subjectOrganizationTextTextBlockElement","_subjectOrganizationDataTextBlockElement","_subjectOrganizationUnitAbbreviationTextBlockElement","_subjectOrganizationUnitTextTextBlockElement","_subjectOrganizationUnitDataTextBlockElement","_subjectLocalityAbbreviationTextBlockElement","_subjectLocalityTextTextBlockElement","_subjectLocalityDataTextBlockElement","_subjectStateAbbreviationTextBlockElement","_subjectStateTextTextBlockElement","_subjectStateDataTextBlockElement","_subjectCountryAbbreviationTextBlockElement","_subjectCountryTextTextBlockElement","_subjectCountryDataTextBlockElement","_subjectDomainComponentTextTextBlockElement","_subjectDomainComponentDataTextBlockElement","_issuerLabelElement","_issuerCommonNameAbbreviationTextBlockElement","_issuerCommonNameTextTextBlockElement","_issuerCommonNameDataTextBlockElement","_issuerOrganizationAbbreviationTextBlockElement","_issuerOrganizationTextTextBlockElement","_issuerOrganizationDataTextBlockElement","_issuerOrganizationUnitAbbreviationTextBlockElement","_issuerOrganizationUnitTextTextBlockElement","_issuerOrganizationUnitDataTextBlockElement","_issuerLocalityAbbreviationTextBlockElement","_issuerLocalityTextTextBlockElement","_issuerLocalityDataTextBlockElement","_issuerStateAbbreviationTextBlockElement","_issuerStateTextTextBlockElement","_issuerStateDataTextBlockElement","_issuerCountryAbbreviationTextBlockElement","_issuerCountryTextTextBlockElement","_issuerCountryDataTextBlockElement","_issuerDomainComponentTextTextBlockElement","_issuerDomainComponentDataTextBlockElement","_validityLabelElement","_validFromTextTextBlockElement","_validFromDataTextBlockElement","_validToTextTextBlockElement","_validToDataTextBlockElement","_infoLabelElement","_serialNumberTextTextBlockElement","_serialNumberDataTextBlockElement","_signatureAlgorithmTextTextBlockElement","_signatureAlgorithmDataTextBlockElement","_signatureHashAlgorithmTextTextBlockElement","_signatureHashAlgorithmDataTextBlockElement","_cipherStrengthTextTextBlockElement","_cipherStrengthDataTextBlockElement","_thumbprintTextTextBlockElement","_thumbprintDataTextBlockElement"],childProperty:"fontClass",defaultValue:"OpenSans14"}};this.initialize(Lenze.UI.CertificateDetails)}createTemplate(){this.element.innerHTML=`\n                \x3c!-- #region Subject --\x3e\n                <div class="subject" style="grid-area: subject-header;">\n                    <div class="${this.className}__headerLabel" data-ref-element="_subjectLabelElement" data-win-control="${Lenze.Controls.getType(VisiWin.UI.Label)}"></div>\n                </div>\n\n                \x3c!-- Common name --\x3e\n                <div style="grid-area: subject-commonname-abbreviation;">\n                    <div class="${this.className}__abbreviationTextBlock" data-ref-element="_subjectCommonNameAbbreviationTextBlockElement" data-win-control="${Lenze.Controls.getType(VisiWin.UI.TextBlock)}"></div>\n                </div>\n                <div style="grid-area: subject-commonname-text;">\n                    <div class="${this.className}__textTextBlock" data-ref-element="_subjectCommonNameTextTextBlockElement" data-win-control="${Lenze.Controls.getType(VisiWin.UI.TextBlock)}"></div>\n                </div>\n                <div style="grid-area: subject-commonname-data;">\n                    <div class="${this.className}__dataTextBlock" data-ref-element="_subjectCommonNameDataTextBlockElement" data-win-control="${Lenze.Controls.getType(VisiWin.UI.TextBlock)}"></div>\n                </div>\n\n                \x3c!-- Organization --\x3e\n                <div style="grid-area: subject-organization-abbreviation;">\n                    <div class="${this.className}__abbreviationTextBlock" data-ref-element="_subjectOrganizationAbbreviationTextBlockElement" data-win-control="${Lenze.Controls.getType(VisiWin.UI.TextBlock)}"></div>\n                </div>\n                <div style="grid-area: subject-organization-text;">\n                    <div class="${this.className}__textTextBlock" data-ref-element="_subjectOrganizationTextTextBlockElement" data-win-control="${Lenze.Controls.getType(VisiWin.UI.TextBlock)}"></div>\n                </div>\n                <div style="grid-area: subject-organization-data;">\n                    <div class="${this.className}__dataTextBlock" data-ref-element="_subjectOrganizationDataTextBlockElement" data-win-control="${Lenze.Controls.getType(VisiWin.UI.TextBlock)}"></div>\n                </div>\n\n                \x3c!-- Organization unit --\x3e\n                <div style="grid-area: subject-organizationunit-abbreviation;">\n                    <div class="${this.className}__abbreviationTextBlock" data-ref-element="_subjectOrganizationUnitAbbreviationTextBlockElement" data-win-control="${Lenze.Controls.getType(VisiWin.UI.TextBlock)}"></div>\n                </div>\n                <div style="grid-area: subject-organizationunit-text;">\n                    <div class="${this.className}__textTextBlock" data-ref-element="_subjectOrganizationUnitTextTextBlockElement" data-win-control="${Lenze.Controls.getType(VisiWin.UI.TextBlock)}"></div>\n                </div>\n                <div style="grid-area: subject-organizationunit-data;">\n                    <div class="${this.className}__dataTextBlock" data-ref-element="_subjectOrganizationUnitDataTextBlockElement" data-win-control="${Lenze.Controls.getType(VisiWin.UI.TextBlock)}"></div>\n                </div>\n\n                \x3c!-- Locality --\x3e\n                <div style="grid-area: subject-locality-abbreviation;">\n                    <div class="${this.className}__abbreviationTextBlock" data-ref-element="_subjectLocalityAbbreviationTextBlockElement" data-win-control="${Lenze.Controls.getType(VisiWin.UI.TextBlock)}"></div>\n                </div>\n                <div style="grid-area: subject-locality-text;">\n                    <div class="${this.className}__textTextBlock" data-ref-element="_subjectLocalityTextTextBlockElement" data-win-control="${Lenze.Controls.getType(VisiWin.UI.TextBlock)}"></div>\n                </div>\n                <div style="grid-area: subject-locality-data;">\n                    <div class="${this.className}__dataTextBlock" data-ref-element="_subjectLocalityDataTextBlockElement" data-win-control="${Lenze.Controls.getType(VisiWin.UI.TextBlock)}"></div>\n                </div>\n\n                \x3c!-- State --\x3e\n                <div style="grid-area: subject-state-abbreviation;">\n                    <div class="${this.className}__abbreviationTextBlock" data-ref-element="_subjectStateAbbreviationTextBlockElement" data-win-control="${Lenze.Controls.getType(VisiWin.UI.TextBlock)}"></div>\n                </div>\n                <div style="grid-area: subject-state-text;">\n                    <div class="${this.className}__textTextBlock" data-ref-element="_subjectStateTextTextBlockElement" data-win-control="${Lenze.Controls.getType(VisiWin.UI.TextBlock)}"></div>\n                </div>\n                <div style="grid-area: subject-state-data;">\n                    <div class="${this.className}__dataTextBlock" data-ref-element="_subjectStateDataTextBlockElement" data-win-control="${Lenze.Controls.getType(VisiWin.UI.TextBlock)}"></div>\n                </div>\n\n                \x3c!-- Country --\x3e\n                <div style="grid-area: subject-country-abbreviation;">\n                    <div class="${this.className}__abbreviationTextBlock" data-ref-element="_subjectCountryAbbreviationTextBlockElement" data-win-control="${Lenze.Controls.getType(VisiWin.UI.TextBlock)}"></div>\n                </div>\n                <div style="grid-area: subject-country-text;">\n                    <div class="${this.className}__textTextBlock" data-ref-element="_subjectCountryTextTextBlockElement" data-win-control="${Lenze.Controls.getType(VisiWin.UI.TextBlock)}"></div>\n                </div>\n                <div style="grid-area: subject-country-data;">\n                    <div class="${this.className}__dataTextBlock" data-ref-element="_subjectCountryDataTextBlockElement" data-win-control="${Lenze.Controls.getType(VisiWin.UI.TextBlock)}"></div>\n                </div>\n\n                \x3c!-- Domain component --\x3e\n                <div style="grid-area: subject-domaincomponent-text;">\n                    <div class="${this.className}__textTextBlock" data-ref-element="_subjectDomainComponentTextTextBlockElement" data-win-control="${Lenze.Controls.getType(VisiWin.UI.TextBlock)}"></div>\n                </div>\n                <div style="grid-area: subject-domaincomponent-data;">\n                    <div class="${this.className}__dataTextBlock" data-ref-element="_subjectDomainComponentDataTextBlockElement" data-win-control="${Lenze.Controls.getType(VisiWin.UI.TextBlock)}"></div>\n                </div>\n                \x3c!-- #endregion --\x3e\n\n\n                \x3c!-- #region Issuer --\x3e\n                <div class="issuer" style="grid-area: issuer-header;">\n                    <div class="${this.className}__headerLabel" data-ref-element="_issuerLabelElement" data-win-control="${Lenze.Controls.getType(VisiWin.UI.Label)}"></div>\n                </div>\n\n                \x3c!-- Common name --\x3e\n                <div style="grid-area: issuer-commonname-abbreviation;">\n                    <div class="${this.className}__abbreviationTextBlock" data-ref-element="_issuerCommonNameAbbreviationTextBlockElement" data-win-control="${Lenze.Controls.getType(VisiWin.UI.TextBlock)}"></div>\n                </div>\n                <div style="grid-area: issuer-commonname-text;">\n                    <div class="${this.className}__textTextBlock" data-ref-element="_issuerCommonNameTextTextBlockElement" data-win-control="${Lenze.Controls.getType(VisiWin.UI.TextBlock)}"></div>\n                </div>\n                <div style="grid-area: issuer-commonname-data;">\n                    <div class="${this.className}__dataTextBlock" data-ref-element="_issuerCommonNameDataTextBlockElement" data-win-control="${Lenze.Controls.getType(VisiWin.UI.TextBlock)}"></div>\n                </div>\n\n                \x3c!-- Organization --\x3e\n                <div style="grid-area: issuer-organization-abbreviation;">\n                    <div class="${this.className}__abbreviationTextBlock" data-ref-element="_issuerOrganizationAbbreviationTextBlockElement" data-win-control="${Lenze.Controls.getType(VisiWin.UI.TextBlock)}"></div>\n                </div>\n                <div style="grid-area: issuer-organization-text;">\n                    <div class="${this.className}__textTextBlock" data-ref-element="_issuerOrganizationTextTextBlockElement" data-win-control="${Lenze.Controls.getType(VisiWin.UI.TextBlock)}"></div>\n                </div>\n                <div style="grid-area: issuer-organization-data;">\n                    <div class="${this.className}__dataTextBlock" data-ref-element="_issuerOrganizationDataTextBlockElement" data-win-control="${Lenze.Controls.getType(VisiWin.UI.TextBlock)}"></div>\n                </div>\n\n                \x3c!-- Organization unit --\x3e\n                <div style="grid-area: issuer-organizationunit-abbreviation;">\n                    <div class="${this.className}__abbreviationTextBlock" data-ref-element="_issuerOrganizationUnitAbbreviationTextBlockElement" data-win-control="${Lenze.Controls.getType(VisiWin.UI.TextBlock)}"></div>\n                </div>\n                <div style="grid-area: issuer-organizationunit-text;">\n                    <div class="${this.className}__textTextBlock" data-ref-element="_issuerOrganizationUnitTextTextBlockElement" data-win-control="${Lenze.Controls.getType(VisiWin.UI.TextBlock)}"></div>\n                </div>\n                <div style="grid-area: issuer-organizationunit-data;">\n                    <div class="${this.className}__dataTextBlock" data-ref-element="_issuerOrganizationUnitDataTextBlockElement" data-win-control="${Lenze.Controls.getType(VisiWin.UI.TextBlock)}"></div>\n                </div>\n\n                \x3c!-- Locality --\x3e\n                <div style="grid-area: issuer-locality-abbreviation;">\n                    <div class="${this.className}__abbreviationTextBlock" data-ref-element="_issuerLocalityAbbreviationTextBlockElement" data-win-control="${Lenze.Controls.getType(VisiWin.UI.TextBlock)}"></div>\n                </div>\n                <div style="grid-area: issuer-locality-text;">\n                    <div class="${this.className}__textTextBlock" data-ref-element="_issuerLocalityTextTextBlockElement" data-win-control="${Lenze.Controls.getType(VisiWin.UI.TextBlock)}"></div>\n                </div>\n                <div style="grid-area: issuer-locality-data;">\n                    <div class="${this.className}__dataTextBlock" data-ref-element="_issuerLocalityDataTextBlockElement" data-win-control="${Lenze.Controls.getType(VisiWin.UI.TextBlock)}"></div>\n                </div>\n\n                \x3c!-- State --\x3e\n                <div style="grid-area: issuer-state-abbreviation;">\n                    <div class="${this.className}__abbreviationTextBlock" data-ref-element="_issuerStateAbbreviationTextBlockElement" data-win-control="${Lenze.Controls.getType(VisiWin.UI.TextBlock)}"></div>\n                </div>\n                <div style="grid-area: issuer-state-text;">\n                    <div class="${this.className}__textTextBlock" data-ref-element="_issuerStateTextTextBlockElement" data-win-control="${Lenze.Controls.getType(VisiWin.UI.TextBlock)}"></div>\n                </div>\n                <div style="grid-area: issuer-state-data;">\n                    <div class="${this.className}__dataTextBlock" data-ref-element="_issuerStateDataTextBlockElement" data-win-control="${Lenze.Controls.getType(VisiWin.UI.TextBlock)}"></div>\n                </div>\n\n                \x3c!-- Country --\x3e\n                <div style="grid-area: issuer-country-abbreviation;">\n                    <div class="${this.className}__abbreviationTextBlock" data-ref-element="_issuerCountryAbbreviationTextBlockElement" data-win-control="${Lenze.Controls.getType(VisiWin.UI.TextBlock)}"></div>\n                </div>\n                <div style="grid-area: issuer-country-text;">\n                    <div class="${this.className}__textTextBlock" data-ref-element="_issuerCountryTextTextBlockElement" data-win-control="${Lenze.Controls.getType(VisiWin.UI.TextBlock)}"></div>\n                </div>\n                <div style="grid-area: issuer-country-data;">\n                    <div class="${this.className}__dataTextBlock" data-ref-element="_issuerCountryDataTextBlockElement" data-win-control="${Lenze.Controls.getType(VisiWin.UI.TextBlock)}"></div>\n                </div>\n\n                \x3c!-- Domain component --\x3e\n                <div style="grid-area: issuer-domaincomponent-text;">\n                    <div class="${this.className}__textTextBlock" data-ref-element="_issuerDomainComponentTextTextBlockElement" data-win-control="${Lenze.Controls.getType(VisiWin.UI.TextBlock)}"></div>\n                </div>\n                <div style="grid-area: issuer-domaincomponent-data;">\n                    <div class="${this.className}__dataTextBlock" data-ref-element="_issuerDomainComponentDataTextBlockElement" data-win-control="${Lenze.Controls.getType(VisiWin.UI.TextBlock)}"></div>\n                </div>\n                \x3c!-- #endregion --\x3e\n\n                \x3c!-- #region Validity --\x3e\n                <div class="validity" style="grid-area: validity-header;">\n                    <div class="${this.className}__headerLabel" data-ref-element="_validityLabelElement" data-win-control="${Lenze.Controls.getType(VisiWin.UI.Label)}"></div>\n                </div>\n\n                \x3c!-- Valid from --\x3e\n                <div style="grid-area: validfrom-text;">\n                    <div class="${this.className}__textTextBlock" data-ref-element="_validFromTextTextBlockElement" data-win-control="${Lenze.Controls.getType(VisiWin.UI.TextBlock)}"></div>\n                </div>\n                <div style="grid-area: validfrom-data;">\n                    <div class="${this.className}__dataTextBlock" data-ref-element="_validFromDataTextBlockElement" data-win-control="${Lenze.Controls.getType(VisiWin.UI.TextBlock)}"></div>\n                </div>\n\n                \x3c!-- Valid to --\x3e\n                <div style="grid-area: validto-text;">\n                    <div class="${this.className}__textTextBlock" data-ref-element="_validToTextTextBlockElement" data-win-control="${Lenze.Controls.getType(VisiWin.UI.TextBlock)}"></div>\n                </div>\n                <div style="grid-area: validto-data;">\n                    <div class="${this.className}__dataTextBlock" data-ref-element="_validToDataTextBlockElement" data-win-control="${Lenze.Controls.getType(VisiWin.UI.TextBlock)}"></div>\n                </div>\n                \x3c!-- #endregion --\x3e\n\n                \x3c!-- #region Info --\x3e\n                <div class="info" style="grid-area: info-header;">\n                    <div class="${this.className}__headerLabel" data-ref-element="_infoLabelElement" data-win-control="${Lenze.Controls.getType(VisiWin.UI.Label)}"></div>\n                </div>\n\n                \x3c!-- Serial number --\x3e\n                <div style="grid-area: serialnumber-text;">\n                    <div class="${this.className}__textTextBlock" data-ref-element="_serialNumberTextTextBlockElement" data-win-control="${Lenze.Controls.getType(VisiWin.UI.TextBlock)}"></div>\n                </div>\n                <div style="grid-area: serialnumber-data;">\n                    <div class="${this.className}__dataTextBlock" data-ref-element="_serialNumberDataTextBlockElement" data-win-control="${Lenze.Controls.getType(VisiWin.UI.TextBlock)}"></div>\n                </div>\n\n                \x3c!-- Signature algorithm --\x3e\n                <div style="grid-area: signaturealgorithm-text;">\n                    <div class="${this.className}__textTextBlock" data-ref-element="_signatureAlgorithmTextTextBlockElement" data-win-control="${Lenze.Controls.getType(VisiWin.UI.TextBlock)}"></div>\n                </div>\n                <div style="grid-area: signaturealgorithm-data;">\n                    <div class="${this.className}__dataTextBlock" data-ref-element="_signatureAlgorithmDataTextBlockElement" data-win-control="${Lenze.Controls.getType(VisiWin.UI.TextBlock)}"></div>\n                </div>\n\n                \x3c!-- Signature hash algorithm --\x3e\n                <div style="grid-area: signaturehashalgorithm-text;">\n                    <div class="${this.className}__textTextBlock" data-ref-element="_signatureHashAlgorithmTextTextBlockElement" data-win-control="${Lenze.Controls.getType(VisiWin.UI.TextBlock)}"></div>\n                </div>\n                <div style="grid-area: signaturehashalgorithm-data;">\n                    <div class="${this.className}__dataTextBlock" data-ref-element="_signatureHashAlgorithmDataTextBlockElement" data-win-control="${Lenze.Controls.getType(VisiWin.UI.TextBlock)}"></div>\n                </div>\n\n                \x3c!-- Cipher strength --\x3e\n                <div style="grid-area: cipherstrength-text;">\n                    <div class="${this.className}__textTextBlock" data-ref-element="_cipherStrengthTextTextBlockElement" data-win-control="${Lenze.Controls.getType(VisiWin.UI.TextBlock)}"></div>\n                </div>\n                <div style="grid-area: cipherstrength-data;">\n                    <div class="${this.className}__dataTextBlock" data-ref-element="_cipherStrengthDataTextBlockElement" data-win-control="${Lenze.Controls.getType(VisiWin.UI.TextBlock)}"></div>\n                </div>\n\n                \x3c!-- Thumbprint --\x3e\n                <div style="grid-area: thumbprint-text;">\n                    <div class="${this.className}__textTextBlock" data-ref-element="_thumbprintTextTextBlockElement" data-win-control="${Lenze.Controls.getType(VisiWin.UI.TextBlock)}"></div>\n                </div>\n                <div style="grid-area: thumbprint-data;">\n                    <div class="${this.className}__dataTextBlock" data-ref-element="_thumbprintDataTextBlockElement" data-win-control="${Lenze.Controls.getType(VisiWin.UI.TextBlock)}"></div>\n                </div>\n                \x3c!-- #endregion --\x3e\n            `;return this.initializeChilds()}afterInit(){if(VisiWin.Utilities.isInDesignMode())return;this._languageService=VisiWin.System.Language.LanguageService.getService();this._userService=VisiWin.System.UserManagement.UserManagementService.getService();this._languageChangeHandler=this._onLanguageChangeAsync.bind(this);this._languageService.LanguageChanged.add(this._languageChangeHandler)}_updateColors(changes){this.setColor("backgroundColor");this.setColor("borderColor")}_updateLayout(changes){if(VisiWin.Utilities.isInDesignMode())return;return}dispose(){if(VisiWin.Utilities.isInDesignMode())return super.dispose();this._languageService.LanguageChanged.remove(this._languageChangeHandler);this._userService.UserLoggedOn.remove(this._userChangeHandler);return super.dispose()}async setDetailsAsync(value){this._certificateDetails=value.details;this.validFromDataForegroundColor=value.validFromDataTextForegroundColor;this.validToDataForegroundColor=value.validToDataTextForegroundColor;this.updateColors();await this._setLocalTextsAsync()}async _setLocalTextsAsync(){const emptyTextItem=new Lenze.Models.ListText;await Promise.all([Lenze.Lists.setTextAsync(this._languageService,this._subjectLabelElement,new Lenze.Models.ListText({text:this.subjectLocalizableText,isLocalizable:true,fontWeight:"FW500"})),Lenze.Lists.setTextAsync(this._languageService,this._subjectCommonNameAbbreviationTextBlockElement,new Lenze.Models.ListText({text:this.subjectCommonNameAbbreviationLocalizableText,isLocalizable:true})),Lenze.Lists.setTextAsync(this._languageService,this._subjectCommonNameTextTextBlockElement,new Lenze.Models.ListText({text:this.subjectCommonNameLocalizableText,isLocalizable:true})),Lenze.Lists.setTextAsync(this._languageService,this._subjectCommonNameDataTextBlockElement,new Lenze.Models.ListText({text:this._certificateDetails.subjectCommonName})),Lenze.Lists.setTextAsync(this._languageService,this._subjectOrganizationAbbreviationTextBlockElement,new Lenze.Models.ListText({text:this.subjectOrganizationAbbreviationLocalizableText,isLocalizable:true})),Lenze.Lists.setTextAsync(this._languageService,this._subjectOrganizationTextTextBlockElement,new Lenze.Models.ListText({text:this.subjectOrganizationLocalizableText,isLocalizable:true})),Lenze.Lists.setTextAsync(this._languageService,this._subjectOrganizationDataTextBlockElement,new Lenze.Models.ListText({text:this._certificateDetails.subjectOrganization})),Lenze.Lists.setTextAsync(this._languageService,this._subjectOrganizationUnitAbbreviationTextBlockElement,new Lenze.Models.ListText({text:this.subjectOrganizationUnitAbbreviationLocalizableText,isLocalizable:true})),Lenze.Lists.setTextAsync(this._languageService,this._subjectOrganizationUnitTextTextBlockElement,new Lenze.Models.ListText({text:this.subjectOrganizationUnitLocalizableText,isLocalizable:true})),Lenze.Lists.setTextAsync(this._languageService,this._subjectOrganizationUnitDataTextBlockElement,new Lenze.Models.ListText({text:this._certificateDetails.subjectOrganizationUnit})),Lenze.Lists.setTextAsync(this._languageService,this._subjectLocalityAbbreviationTextBlockElement,new Lenze.Models.ListText({text:this.subjectLocalityAbbreviationLocalizableText,isLocalizable:true})),Lenze.Lists.setTextAsync(this._languageService,this._subjectLocalityTextTextBlockElement,new Lenze.Models.ListText({text:this.subjectLocalityLocalizableText,isLocalizable:true})),Lenze.Lists.setTextAsync(this._languageService,this._subjectLocalityDataTextBlockElement,new Lenze.Models.ListText({text:this._certificateDetails.subjectLocality})),Lenze.Lists.setTextAsync(this._languageService,this._subjectStateAbbreviationTextBlockElement,new Lenze.Models.ListText({text:this.subjectStateAbbreviationLocalizableText,isLocalizable:true})),Lenze.Lists.setTextAsync(this._languageService,this._subjectStateTextTextBlockElement,new Lenze.Models.ListText({text:this.subjectStateLocalizableText,isLocalizable:true})),Lenze.Lists.setTextAsync(this._languageService,this._subjectStateDataTextBlockElement,new Lenze.Models.ListText({text:this._certificateDetails.subjectState})),Lenze.Lists.setTextAsync(this._languageService,this._subjectCountryAbbreviationTextBlockElement,new Lenze.Models.ListText({text:this.subjectCountryAbbreviationLocalizableText,isLocalizable:true})),Lenze.Lists.setTextAsync(this._languageService,this._subjectCountryTextTextBlockElement,new Lenze.Models.ListText({text:this.subjectCountryLocalizableText,isLocalizable:true})),Lenze.Lists.setTextAsync(this._languageService,this._subjectCountryDataTextBlockElement,new Lenze.Models.ListText({text:this._certificateDetails.subjectCountry})),Lenze.Lists.setTextAsync(this._languageService,this._subjectDomainComponentTextTextBlockElement,new Lenze.Models.ListText({text:this.subjectDomainComponentLocalizableText,isLocalizable:true})),Lenze.Lists.setTextAsync(this._languageService,this._subjectDomainComponentDataTextBlockElement,new Lenze.Models.ListText({text:this._certificateDetails.subjectDomainComponent})),Lenze.Lists.setTextAsync(this._languageService,this._issuerLabelElement,new Lenze.Models.ListText({text:this.issuerLocalizableText,isLocalizable:true,fontWeight:"FW500"})),Lenze.Lists.setTextAsync(this._languageService,this._issuerCommonNameAbbreviationTextBlockElement,new Lenze.Models.ListText({text:this.issuerCommonNameAbbreviationLocalizableText,isLocalizable:true})),Lenze.Lists.setTextAsync(this._languageService,this._issuerCommonNameTextTextBlockElement,new Lenze.Models.ListText({text:this.issuerCommonNameLocalizableText,isLocalizable:true})),Lenze.Lists.setTextAsync(this._languageService,this._issuerCommonNameDataTextBlockElement,new Lenze.Models.ListText({text:this._certificateDetails.issuerCommonName})),Lenze.Lists.setTextAsync(this._languageService,this._issuerOrganizationAbbreviationTextBlockElement,new Lenze.Models.ListText({text:this.issuerOrganizationAbbreviationLocalizableText,isLocalizable:true})),Lenze.Lists.setTextAsync(this._languageService,this._issuerOrganizationTextTextBlockElement,new Lenze.Models.ListText({text:this.issuerOrganizationLocalizableText,isLocalizable:true})),Lenze.Lists.setTextAsync(this._languageService,this._issuerOrganizationDataTextBlockElement,new Lenze.Models.ListText({text:this._certificateDetails.issuerOrganization})),Lenze.Lists.setTextAsync(this._languageService,this._issuerOrganizationUnitAbbreviationTextBlockElement,new Lenze.Models.ListText({text:this.issuerOrganizationUnitAbbreviationLocalizableText,isLocalizable:true})),Lenze.Lists.setTextAsync(this._languageService,this._issuerOrganizationUnitTextTextBlockElement,new Lenze.Models.ListText({text:this.issuerOrganizationUnitLocalizableText,isLocalizable:true})),Lenze.Lists.setTextAsync(this._languageService,this._issuerOrganizationUnitDataTextBlockElement,new Lenze.Models.ListText({text:this._certificateDetails.issuerOrganizationUnit})),Lenze.Lists.setTextAsync(this._languageService,this._issuerLocalityAbbreviationTextBlockElement,new Lenze.Models.ListText({text:this.issuerLocalityAbbreviationLocalizableText,isLocalizable:true})),Lenze.Lists.setTextAsync(this._languageService,this._issuerLocalityTextTextBlockElement,new Lenze.Models.ListText({text:this.issuerLocalityLocalizableText,isLocalizable:true})),Lenze.Lists.setTextAsync(this._languageService,this._issuerLocalityDataTextBlockElement,new Lenze.Models.ListText({text:this._certificateDetails.issuerLocality})),Lenze.Lists.setTextAsync(this._languageService,this._issuerStateAbbreviationTextBlockElement,new Lenze.Models.ListText({text:this.issuerStateAbbreviationLocalizableText,isLocalizable:true})),Lenze.Lists.setTextAsync(this._languageService,this._issuerStateTextTextBlockElement,new Lenze.Models.ListText({text:this.issuerStateLocalizableText,isLocalizable:true})),Lenze.Lists.setTextAsync(this._languageService,this._issuerStateDataTextBlockElement,new Lenze.Models.ListText({text:this._certificateDetails.issuerState})),Lenze.Lists.setTextAsync(this._languageService,this._issuerCountryAbbreviationTextBlockElement,new Lenze.Models.ListText({text:this.issuerCountryAbbreviationLocalizableText,isLocalizable:true})),Lenze.Lists.setTextAsync(this._languageService,this._issuerCountryTextTextBlockElement,new Lenze.Models.ListText({text:this.issuerCountryLocalizableText,isLocalizable:true})),Lenze.Lists.setTextAsync(this._languageService,this._issuerCountryDataTextBlockElement,new Lenze.Models.ListText({text:this._certificateDetails.issuerCountry})),Lenze.Lists.setTextAsync(this._languageService,this._issuerDomainComponentTextTextBlockElement,new Lenze.Models.ListText({text:this.issuerDomainComponentLocalizableText,isLocalizable:true})),Lenze.Lists.setTextAsync(this._languageService,this._issuerDomainComponentDataTextBlockElement,new Lenze.Models.ListText({text:this._certificateDetails.issuerDomainComponent})),Lenze.Lists.setTextAsync(this._languageService,this._validityLabelElement,new Lenze.Models.ListText({text:this.validityLocalizableText,isLocalizable:true,fontWeight:"FW500"})),Lenze.Lists.setTextAsync(this._languageService,this._validFromTextTextBlockElement,new Lenze.Models.ListText({text:this.validFromLocalizableText,isLocalizable:true})),Lenze.Lists.setTextAsync(this._languageService,this._validFromDataTextBlockElement,new Lenze.Models.ListText({text:Lenze.Dates.dateToUtcString(this._certificateDetails.validFrom)})),Lenze.Lists.setTextAsync(this._languageService,this._validToTextTextBlockElement,new Lenze.Models.ListText({text:this.validToLocalizableText,isLocalizable:true})),Lenze.Lists.setTextAsync(this._languageService,this._validToDataTextBlockElement,new Lenze.Models.ListText({text:Lenze.Dates.dateToUtcString(this._certificateDetails.validTo)})),Lenze.Lists.setTextAsync(this._languageService,this._infoLabelElement,new Lenze.Models.ListText({text:this.infoLocalizableText,isLocalizable:true,fontWeight:"FW500"})),Lenze.Lists.setTextAsync(this._languageService,this._serialNumberTextTextBlockElement,new Lenze.Models.ListText({text:this.serialNumberLocalizableText,isLocalizable:true})),Lenze.Lists.setTextAsync(this._languageService,this._serialNumberDataTextBlockElement,new Lenze.Models.ListText({text:this._certificateDetails.serialNumber})),Lenze.Lists.setTextAsync(this._languageService,this._signatureAlgorithmTextTextBlockElement,new Lenze.Models.ListText({text:this.signatureAlgorithmLocalizableText,isLocalizable:true})),Lenze.Lists.setTextAsync(this._languageService,this._signatureAlgorithmDataTextBlockElement,new Lenze.Models.ListText({text:this._certificateDetails.signatureAlgorithm})),Lenze.Lists.setTextAsync(this._languageService,this._signatureHashAlgorithmTextTextBlockElement,new Lenze.Models.ListText({text:this.signatureHashAlgorithmLocalizableText,isLocalizable:true})),Lenze.Lists.setTextAsync(this._languageService,this._signatureHashAlgorithmDataTextBlockElement,new Lenze.Models.ListText({text:this._certificateDetails.signatureHashAlgorithm})),Lenze.Lists.setTextAsync(this._languageService,this._cipherStrengthTextTextBlockElement,new Lenze.Models.ListText({text:this.cipherStrengthLocalizableText,isLocalizable:true})),Lenze.Lists.setTextAsync(this._languageService,this._cipherStrengthDataTextBlockElement,new Lenze.Models.ListText({text:this._certificateDetails.cipherStrength})),Lenze.Lists.setTextAsync(this._languageService,this._thumbprintTextTextBlockElement,new Lenze.Models.ListText({text:this.thumbprintLocalizableText,isLocalizable:true})),Lenze.Lists.setTextAsync(this._languageService,this._thumbprintDataTextBlockElement,new Lenze.Models.ListText({text:this._certificateDetails.thumbprint}))])}async _onLanguageChangeAsync(){await this._setLocalTextsAsync()}async _onUserChangeAsync(){}}UI.CertificateDetails=CertificateDetails})(UI=Lenze.UI||(Lenze.UI={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var UI;(function(UI){"use strict";class CertificateListHeader extends Lenze.UI.ButtonBase{get listHeader(){return this._listHeader}set expandSymbol(value){this._expandSymbolElement.winControl.symbol=value;this._updateLayout(null)}get titleTextWidth(){return this._titleTextElement.clientWidth}set titleTextWidth(value){Lenze.Style.setWidth(this._titleTextElement,value)}get validityGroupWidth(){return this._validityGroupElement.clientWidth}set validityGroupWidth(value){Lenze.Style.setWidth(this._validityGroupElement,value)}get validityText1Width(){return this._validityText1Element.clientWidth}set validityText1Width(value){Lenze.Style.setWidth(this._validityText1Element,value)}constructor(element,options){super(element,options);this.properties={designerType:{propertyType:"base",type:"string",defaultValue:"Control"},titleTextMaxWidth:{propertyType:"child",type:"string",child:"_titleTextElement",childProperty:"maxWidth",defaultValue:"550px"},titleTextFlexGrow:{propertyType:"child",type:"string",child:"_titleTextElement",childProperty:"flexGrow",defaultValue:"1.0"},titleTextFlexShrink:{propertyType:"child",type:"string",child:"_titleTextElement",childProperty:"flexShrink",defaultValue:"1.0"},titleTextAlignment:{propertyType:"child",type:"string",child:"_titleTextElement",childProperty:"textAlignment"},titleTextLineClamp:{propertyType:"child",type:"number",child:"_titleTextElement",childProperty:"lineClamp"},titleTextTextWrapping:{propertyType:"child",type:"string",child:"_titleTextElement",childProperty:"textWrapping"},titleTextTextTrimming:{propertyType:"child",type:"string",child:"_titleTextElement",childProperty:"textTrimming",defaultValue:"Ellipsis"},titleTextTextContrast:{propertyType:"child",type:"number",child:"_titleTextElement",childProperty:"textContrast"},titleTextUppercase:{propertyType:"child",type:"boolean",child:"_titleTextElement",childProperty:"uppercase",defaultValue:false},titleTextTextDecoration:{propertyType:"child",type:"string",child:"_titleTextElement",childProperty:"textDecoration"},titleTextTextShadow:{propertyType:"child",type:"string",child:"_titleTextElement",childProperty:"textShadow"},titleTextFontClass:{propertyType:"child",type:"string",child:"_titleTextElement",childProperty:"fontClass",defaultValue:"OpenSans14"},titleTextFontFamily:{propertyType:"child",type:"string",child:"_titleTextElement",childProperty:"fontFamily"},titleTextFontSize:{propertyType:"child",type:"string",child:"_titleTextElement",childProperty:"fontSize"},titleTextFontWeight:{propertyType:"child",type:"string",child:"_titleTextElement",childProperty:"fontWeight"},titleTextLineHeight:{propertyType:"child",type:"string",child:"_titleTextElement",childProperty:"lineHeight"},titleTextFontStyle:{propertyType:"child",type:"string",child:"_titleTextElement",childProperty:"fontStyle"},titleTextLetterSpacing:{propertyType:"child",type:"string",child:"_titleTextElement",childProperty:"letterSpacing"},titleTextBackgroundColor:{propertyType:"child",type:"string",child:"_titleTextElement",childProperty:"backgroundColor",resourceValue:["getTheme"],defaultValue:"@Transparent"},titleTextForegroundColor:{propertyType:"child",type:"string",child:"_titleTextElement",childProperty:"foregroundColor",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},validityText1Visibility:{propertyType:"child",type:"string",child:"_validityText1Element",childProperty:"collapse"},validityText1Alignment:{propertyType:"child",type:"string",child:"_validityText1Element",childProperty:"textAlignment"},validityText1LineClamp:{propertyType:"child",type:"number",child:"_validityText1Element",childProperty:"lineClamp"},validityText1TextWrapping:{propertyType:"child",type:"string",child:"_validityText1Element",childProperty:"textWrapping"},validityText1TextTrimming:{propertyType:"child",type:"string",child:"_validityText1Element",childProperty:"textTrimming",defaultValue:"Overflow"},validityText1TextContrast:{propertyType:"child",type:"number",child:"_validityText1Element",childProperty:"textContrast"},validityText1Uppercase:{propertyType:"child",type:"boolean",child:"_validityText1Element",childProperty:"uppercase",defaultValue:false},validityText1TextDecoration:{propertyType:"child",type:"string",child:"_validityText1Element",childProperty:"textDecoration"},validityText1TextShadow:{propertyType:"child",type:"string",child:"_validityText1Element",childProperty:"textShadow"},validityText1FontClass:{propertyType:"child",type:"string",child:"_validityText1Element",childProperty:"fontClass",defaultValue:"OpenSans14"},validityText1FontFamily:{propertyType:"child",type:"string",child:"_validityText1Element",childProperty:"fontFamily"},validityText1FontSize:{propertyType:"child",type:"string",child:"_validityText1Element",childProperty:"fontSize"},validityText1FontWeight:{propertyType:"child",type:"string",child:"_validityText1Element",childProperty:"fontWeight"},validityText1LineHeight:{propertyType:"child",type:"string",child:"_validityText1Element",childProperty:"lineHeight"},validityText1FontStyle:{propertyType:"child",type:"string",child:"_validityText1Element",childProperty:"fontStyle"},validityText1LetterSpacing:{propertyType:"child",type:"string",child:"_validityText1Element",childProperty:"letterSpacing"},validityText1BackgroundColor:{propertyType:"child",type:"string",child:"_validityText1Element",childProperty:"backgroundColor",resourceValue:["getTheme"],defaultValue:"@Transparent"},validityText1ForegroundColor:{propertyType:"child",type:"string",child:"_validityText1Element",childProperty:"foregroundColor",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},validityText2Visibility:{propertyType:"child",type:"string",child:"_validityText2Element",childProperty:"collapse"},validityText2Margin:{propertyType:"child",type:"string",child:"_validityText2Element",childProperty:"margin",defaultValue:"0px 0px 0px 4px"},validityText2Alignment:{propertyType:"child",type:"string",child:"_validityText2Element",childProperty:"textAlignment"},validityText2LineClamp:{propertyType:"child",type:"number",child:"_validityText2Element",childProperty:"lineClamp"},validityText2TextWrapping:{propertyType:"child",type:"string",child:"_validityText2Element",childProperty:"textWrapping"},validityText2TextTrimming:{propertyType:"child",type:"string",child:"_validityText2Element",childProperty:"textTrimming",defaultValue:"Overflow"},validityText2TextContrast:{propertyType:"child",type:"number",child:"_validityText2Element",childProperty:"textContrast"},validityText2Uppercase:{propertyType:"child",type:"boolean",child:"_validityText2Element",childProperty:"uppercase",defaultValue:false},validityText2TextDecoration:{propertyType:"child",type:"string",child:"_validityText2Element",childProperty:"textDecoration"},validityText2TextShadow:{propertyType:"child",type:"string",child:"_validityText2Element",childProperty:"textShadow"},validityText2FontClass:{propertyType:"child",type:"string",child:"_validityText2Element",childProperty:"fontClass",defaultValue:"OpenSans14"},validityText2FontFamily:{propertyType:"child",type:"string",child:"_validityText2Element",childProperty:"fontFamily"},validityText2FontSize:{propertyType:"child",type:"string",child:"_validityText2Element",childProperty:"fontSize"},validityText2FontWeight:{propertyType:"child",type:"string",child:"_validityText2Element",childProperty:"fontWeight"},validityText2LineHeight:{propertyType:"child",type:"string",child:"_validityText2Element",childProperty:"lineHeight"},validityText2FontStyle:{propertyType:"child",type:"string",child:"_validityText2Element",childProperty:"fontStyle"},validityText2LetterSpacing:{propertyType:"child",type:"string",child:"_validityText2Element",childProperty:"letterSpacing"},validityText2BackgroundColor:{propertyType:"child",type:"string",child:"_validityText2Element",childProperty:"backgroundColor",resourceValue:["getTheme"],defaultValue:"@Transparent"},validityText2ForegroundColor:{propertyType:"child",type:"string",child:"_validityText2Element",childProperty:"foregroundColor",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},validityText3Visibility:{propertyType:"child",type:"string",child:"_validityText3Element",childProperty:"collapse"},validityText3Margin:{propertyType:"child",type:"string",child:"_validityText3Element",childProperty:"margin",defaultValue:"0px 4px 0px 4px"},validityText3Alignment:{propertyType:"child",type:"string",child:"_validityText3Element",childProperty:"textAlignment"},validityText3LineClamp:{propertyType:"child",type:"number",child:"_validityText3Element",childProperty:"lineClamp"},validityText3TextWrapping:{propertyType:"child",type:"string",child:"_validityText3Element",childProperty:"textWrapping"},validityText3TextTrimming:{propertyType:"child",type:"string",child:"_validityText3Element",childProperty:"textTrimming",defaultValue:"Overflow"},validityText3TextContrast:{propertyType:"child",type:"number",child:"_validityText3Element",childProperty:"textContrast"},validityText3Uppercase:{propertyType:"child",type:"boolean",child:"_validityText3Element",childProperty:"uppercase",defaultValue:false},validityText3TextDecoration:{propertyType:"child",type:"string",child:"_validityText3Element",childProperty:"textDecoration"},validityText3TextShadow:{propertyType:"child",type:"string",child:"_validityText3Element",childProperty:"textShadow"},validityText3FontClass:{propertyType:"child",type:"string",child:"_validityText3Element",childProperty:"fontClass",defaultValue:"OpenSans14"},validityText3FontFamily:{propertyType:"child",type:"string",child:"_validityText3Element",childProperty:"fontFamily"},validityText3FontSize:{propertyType:"child",type:"string",child:"_validityText3Element",childProperty:"fontSize"},validityText3FontWeight:{propertyType:"child",type:"string",child:"_validityText3Element",childProperty:"fontWeight"},validityText3LineHeight:{propertyType:"child",type:"string",child:"_validityText3Element",childProperty:"lineHeight"},validityText3FontStyle:{propertyType:"child",type:"string",child:"_validityText3Element",childProperty:"fontStyle"},validityText3LetterSpacing:{propertyType:"child",type:"string",child:"_validityText3Element",childProperty:"letterSpacing"},validityText3BackgroundColor:{propertyType:"child",type:"string",child:"_validityText3Element",childProperty:"backgroundColor",resourceValue:["getTheme"],defaultValue:"@Transparent"},validityText3ForegroundColor:{propertyType:"child",type:"string",child:"_validityText3Element",childProperty:"foregroundColor",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},validitySymbolVisibility:{propertyType:"child",type:"string",child:"_validitySymbolElement",childProperty:"collapse"},validitySymbolSymbolType:{propertyType:"child",type:"string",child:"_validitySymbolElement",childProperty:"symbolType"},validitySymbolIconFont:{propertyType:"child",type:"string",child:"_validitySymbolElement",childProperty:"iconFont"},validitySymbolSymbol:{propertyType:"child",type:"string",child:"_validitySymbolElement",childProperty:"symbol",defaultValue:"warning"},validitySymbolSymbolSize:{propertyType:"child",type:"string",child:"_validitySymbolElement",childProperty:"symbolSize"},validitySymbolBackgroundColor:{propertyType:"child",type:"string",child:"_validitySymbolElement",childProperty:"backgroundColor",resourceValue:["getTheme"],defaultValue:"@Transparent"},validitySymbolForegroundColor:{propertyType:"child",type:"string",child:"_validitySymbolElement",childProperty:"foregroundColor",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},showExpandSymbol:{propertyType:"member",type:"bool",defaultValue:true},expandSymbolHeight:{propertyType:"member",type:"string",defaultValue:"40px"},expandSymbolWidth:{propertyType:"member",type:"string",defaultValue:"40px"},expandIconFont:{propertyType:"child",type:"string",child:"_expandSymbolElement",childProperty:"iconFont"},expandSymbolOpen:{propertyType:"member",type:"string",defaultValue:"add"},expandSymbolClose:{propertyType:"member",type:"string",defaultValue:"remove"},expandSymbolType:{propertyType:"child",type:"string",child:"_expandSymbolElement",childProperty:"symbolType"},expandSymbolSize:{propertyType:"child",type:"string",child:"_expandSymbolElement",childProperty:"symbolSize",defaultValue:"24px"},expandSymbolBackgroundColor:{propertyType:"child",type:"string",child:"_expandSymbolElement",childProperty:"backgroundColor",resourceValue:["getTheme"],defaultValue:"@PrimaryColor"},expandSymbolForegroundColor:{propertyType:"child",type:"string",child:"_expandSymbolElement",childProperty:"foregroundColor",resourceValue:["getTheme"],defaultValue:"@AltForegroundColor"},backgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@AltGrey2"},borderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@Transparent"},foregroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"}};this.initialize(Lenze.UI.CertificateListHeader)}createTemplate(){this.element.innerHTML=`\n                <div data-ref-element="_contentElement" class="${this.className}__content">\n                    <div data-ref-element="_titleTextElement" class="${this.className}__title" data-win-control="${Lenze.Controls.getType(VisiWin.UI.TextBlock)}"></div>\n                    <div data-ref-element="_validityGroupElement" class="${this.className}__validity-group">\n                        <div data-ref-element="_validitySymbolElement" class="${this.className}__validity-symbol" data-win-control="${Lenze.Controls.getType(VisiWin.UI.Symbol)}"></div>\n                        <div data-ref-element="_validityText1Element" class="${this.className}__validity-text-1" data-win-control="${Lenze.Controls.getType(VisiWin.UI.TextBlock)}"></div>\n                        <div data-ref-element="_validityText2Element" class="${this.className}__validity-text-2" data-win-control="${Lenze.Controls.getType(VisiWin.UI.TextBlock)}"></div>\n                        <div data-ref-element="_validityText3Element" class="${this.className}__validity-text-3" data-win-control="${Lenze.Controls.getType(VisiWin.UI.TextBlock)}"></div>\n                    </div>\n                </div>\n                <div data-ref-element="_expandSymbolElement" class="${this.className}__expand-symbol" data-win-control="${Lenze.Controls.getType(VisiWin.UI.Symbol)}"></div>\n            `;return this.initializeChilds()}afterInit(){this._expandSymbolElement.winControl.symbol=this.expandSymbolOpen;if(VisiWin.Utilities.isInDesignMode())return;this._languageService=VisiWin.System.Language.LanguageService.getService();this._languageChangeHandler=this._onLanguageChangeAsync.bind(this);this._languageService.LanguageChanged.add(this._languageChangeHandler)}_updateLayout(changes){this._expandSymbolElement.winControl.height=this.expandSymbolHeight;this._expandSymbolElement.winControl.width=this.expandSymbolWidth}_updateColors(changes){this.setColor(Lenze.Strings.nameof("backgroundColor"));this.setColor(Lenze.Strings.nameof("foregroundColor"));this.setColor(Lenze.Strings.nameof("borderColor"))}dispose(){this._languageService.LanguageChanged.remove(this._languageChangeHandler);return super.dispose()}async setListHeaderAsync(listHeader){this._listHeader=listHeader;this.visibility=listHeader==null?"collapse":"visible";this._validitySymbolElement.winControl.iconFont=listHeader.validitySymbolIconFont;this._validitySymbolElement.winControl.symbol=listHeader.validitySymbolSymbol;this._validitySymbolElement.winControl.symbolType=listHeader.validitySymbolSymbolType;this._validitySymbolElement.winControl.foregroundColor=listHeader.validitySymbolForegroundColor;this._validityText1Element.winControl.visibility=listHeader.validityText1Visibility;this._validityText2Element.winControl.visibility=listHeader.validityText2Visibility;this._validityText3Element.winControl.visibility=listHeader.validityText3Visibility;await this._setTextsAsync()}async _setTextsAsync(){var _a,_b,_c,_d,_e,_f,_g,_h;const emptyTextItem=new Lenze.Models.ListText;await Lenze.Lists.setTextAsync(this._languageService,this._titleTextElement,(_b=(_a=this._listHeader)===null||_a===void 0?void 0:_a.titleText)!==null&&_b!==void 0?_b:emptyTextItem);if(this._validityText1Element.winControl.visibility=="visible")await Lenze.Lists.setTextAsync(this._languageService,this._validityText1Element,(_d=(_c=this._listHeader)===null||_c===void 0?void 0:_c.validityText1)!==null&&_d!==void 0?_d:emptyTextItem);if(this._validityText2Element.winControl.visibility=="visible")await Lenze.Lists.setTextAsync(this._languageService,this._validityText2Element,(_f=(_e=this._listHeader)===null||_e===void 0?void 0:_e.validityText2)!==null&&_f!==void 0?_f:emptyTextItem);if(this._validityText3Element.winControl.visibility=="visible")await Lenze.Lists.setTextAsync(this._languageService,this._validityText3Element,(_h=(_g=this._listHeader)===null||_g===void 0?void 0:_g.validityText3)!==null&&_h!==void 0?_h:emptyTextItem)}async _onLanguageChangeAsync(){await this._setTextsAsync()}}UI.CertificateListHeader=CertificateListHeader})(UI=Lenze.UI||(Lenze.UI={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var UI;(function(UI){"use strict";class CertificateListItem extends Lenze.UI.ControlBase{get listItem(){return this._listItem}get titleTextWidth(){return this._listHeaderControl.titleTextWidth}set titleTextWidth(value){this._listHeaderControl.titleTextWidth=value}get validityGroupWidth(){return this._listHeaderControl.validityGroupWidth}set validityGroupWidth(value){this._listHeaderControl.validityGroupWidth=value}get validityText1Width(){return this._listHeaderControl.validityText1Width}set validityText1Width(value){this._listHeaderControl.validityText1Width=value}get isSlidedIn(){return this._isSlidedIn}set isSlidedIn(value){this._isSlidedIn=value;this._setHeaderHeight()}get _listHeaderControl(){return this._listHeaderElement.winControl}get _CertificateDetailsControl(){return this._detailsElement.winControl}constructor(element,options){super(element,options);this.properties={designerType:{propertyType:"base",type:"string",defaultValue:"Control"},detailsHeadingLocalizableText:{propertyType:"child",type:"string",child:"_detailsHeadingLabelElement",childProperty:"localizableText",defaultValue:"@[ServerApplication].Security.LCH.CertificateList.CertificateDetails"},detailsHeadingMargin:{propertyType:"child",type:"string",child:"_detailsHeadingLabelElement",childProperty:"margin",defaultValue:"0px"},toQuarantineButtonWidth:{propertyType:"child",type:"string",child:"_toQuarantineButtonElement",childProperty:"width",defaultValue:"200px"},toQuarantineButtonMinWidth:{propertyType:"child",type:"string",child:"_toQuarantineButtonElement",childProperty:"minWidth"},toQuarantineButtonMaxWidth:{propertyType:"child",type:"string",child:"_toQuarantineButtonElement",childProperty:"maxWidth"},toQuarantineButtonHeight:{propertyType:"child",type:"string",child:"_toQuarantineButtonElement",childProperty:"height",defaultValue:"40px"},toQuarantineButtonMinHeight:{propertyType:"child",type:"string",child:"_toQuarantineButtonElement",childProperty:"minHeight"},toQuarantineButtonMaxHeight:{propertyType:"child",type:"string",child:"_toQuarantineButtonElement",childProperty:"maxHeight"},toQuarantineButtonPadding:{propertyType:"child",type:"string",child:"_toQuarantineButtonElement",childProperty:"padding"},toQuarantineButtonBorderWidth:{propertyType:"child",type:"string",child:"_toQuarantineButtonElement",childProperty:"borderWidth",defaultValue:"1px"},toQuarantineButtonBorderStyle:{propertyType:"child",type:"string",child:"_toQuarantineButtonElement",childProperty:"borderStyle",defaultValue:"solid"},toQuarantineButtonBorderRadius:{propertyType:"child",type:"string",child:"_toQuarantineButtonElement",childProperty:"borderRadius",defaultValue:"0px"},toQuarantineButtonOpacity:{propertyType:"child",type:"number",child:"_toQuarantineButtonElement",childProperty:"opacity"},toQuarantineButtonVisibility:{propertyType:"child",type:"string",child:"_toQuarantineButtonElement",childProperty:"visibility"},toQuarantineButtonShadow:{propertyType:"child",type:"string",child:"_toQuarantineButtonElement",childProperty:"shadow"},toQuarantineButtonPressedShadow:{propertyType:"child",type:"string",child:"_toQuarantineButtonElement",childProperty:"pressedShadow"},toQuarantineButtonTransition:{propertyType:"child",type:"string",child:"_toQuarantineButtonElement",childProperty:"transition"},toQuarantineButtonBackground:{propertyType:"child",type:"string",child:"_toQuarantineButtonElement",childProperty:"background"},toQuarantineButtonShowSymbol:{propertyType:"child",type:"string",child:"_toQuarantineButtonElement",childProperty:"showSymbol",defaultValue:true},toQuarantineButtonIconFont:{propertyType:"child",type:"string",child:"_toQuarantineButtonElement",childProperty:"iconFont",defaultValue:"lenze-icons"},toQuarantineButtonSymbol:{propertyType:"child",type:"string",child:"_toQuarantineButtonElement",childProperty:"symbol",defaultValue:"security_move_quarantine"},toQuarantineButtonSymbolPressed:{propertyType:"child",type:"string",child:"_toQuarantineButtonElement",childProperty:"symbolPressed"},toQuarantineButtonSymbolType:{propertyType:"child",type:"string",child:"_toQuarantineButtonElement",childProperty:"symbolType",defaultValue:"icon"},toQuarantineButtonSymbolSize:{propertyType:"child",type:"string",child:"_toQuarantineButtonElement",childProperty:"symbolSize",defaultValue:"24px"},toQuarantineButtonSymbolMargin:{propertyType:"child",type:"string",child:"_toQuarantineButtonElement",childProperty:"symbolMargin",defaultValue:"0px 8px 0px 0px"},toQuarantineButtonSymbolPosition:{propertyType:"child",type:"string",child:"_toQuarantineButtonElement",childProperty:"symbolPosition",defaultValue:"left"},toQuarantineButtonShowText:{propertyType:"child",type:"boolean",child:"_toQuarantineButtonElement",childProperty:"showText",defaultValue:true},toQuarantineButtonTextWidth:{propertyType:"child",type:"string",child:"_toQuarantineButtonElement",childProperty:"textWidth",defaultValue:"100%"},toQuarantineButtonTextHeight:{propertyType:"child",type:"string",child:"_toQuarantineButtonElement",childProperty:"textHeight"},toQuarantineButtonTextMargin:{propertyType:"child",type:"string",child:"_toQuarantineButtonElement",childProperty:"textMargin",defaultValue:"0px"},toQuarantineButtonTextPadding:{propertyType:"child",type:"string",child:"_toQuarantineButtonElement",childProperty:"textPadding",defaultValue:"0px"},toQuarantineButtonText:{propertyType:"child",type:"string",child:"_toQuarantineButtonElement",childProperty:"text",defaultValue:"Move to quarantine"},toQuarantineButtonLocalizableText:{propertyType:"child",type:"string",child:"_toQuarantineButtonElement",childProperty:"localizableText"},toQuarantineButtonTextAlignment:{propertyType:"child",type:"string",child:"_toQuarantineButtonElement",childProperty:"textAlignment",defaultValue:"Center"},toQuarantineButtonLineClamp:{propertyType:"child",type:"string",child:"_toQuarantineButtonElement",childProperty:"lineClamp"},toQuarantineButtonTextWrapping:{propertyType:"child",type:"string",child:"_toQuarantineButtonElement",childProperty:"textWrapping"},toQuarantineButtonTextTrimming:{propertyType:"child",type:"string",child:"_toQuarantineButtonElement",childProperty:"textTrimming"},toQuarantineButtonFontClass:{propertyType:"child",type:"string",child:"_toQuarantineButtonElement",childProperty:"fontClass",defaultValue:"OpenSans16"},toQuarantineButtonFontSize:{propertyType:"child",type:"string",child:"_toQuarantineButtonElement",childProperty:"fontSize"},toQuarantineButtonFontWeight:{propertyType:"child",type:"string",child:"_toQuarantineButtonElement",childProperty:"fontWeight"},toQuarantineButtonLineHeight:{propertyType:"child",type:"string",child:"_toQuarantineButtonElement",childProperty:"lineHeight"},toQuarantineButtonTextContrast:{propertyType:"child",type:"string",child:"_toQuarantineButtonElement",childProperty:"textContrast"},toQuarantineButtonUppercase:{propertyType:"child",type:"boolean",child:"_toQuarantineButtonElement",childProperty:"uppercase"},toQuarantineButtonTextPosition:{propertyType:"child",type:"string",child:"_toQuarantineButtonElement",childProperty:"textPosition"},toQuarantineButtonBackgroundColor:{propertyType:"child",type:"string",child:"_toQuarantineButtonElement",childProperty:"backgroundColor",resourceValue:["getTheme"],defaultValue:"@Transparent"},toQuarantineButtonHoverBackgroundColor:{propertyType:"child",type:"string",child:"_toQuarantineButtonElement",childProperty:"hoverBackgroundColor",resourceValue:["getTheme"],defaultValue:"@HoverBackgroundColor"},toQuarantineButtonPressedBackgroundColor:{propertyType:"child",type:"string",child:"_toQuarantineButtonElement",childProperty:"pressedBackgroundColor",resourceValue:["getTheme"],defaultValue:"@PressedBackgroundColor"},toQuarantineButtonDisabledBackgroundColor:{propertyType:"child",type:"string",child:"_toQuarantineButtonElement",childProperty:"disabledBackgroundColor",resourceValue:["getTheme"],defaultValue:"@MediumGrey"},toQuarantineButtonForegroundColor:{propertyType:"child",type:"string",child:"_toQuarantineButtonElement",childProperty:"foregroundColor",resourceValue:["getTheme"],defaultValue:"@PrimaryColor"},toQuarantineButtonPressedForegroundColor:{propertyType:"child",type:"string",child:"_toQuarantineButtonElement",childProperty:"pressedForegroundColor",resourceValue:["getTheme"],defaultValue:"@White"},toQuarantineButtonDisabledForegroundColor:{propertyType:"child",type:"string",child:"_toQuarantineButtonElement",childProperty:"disabledForegroundColor",resourceValue:["getTheme"],defaultValue:"@DisabledForegroundColor"},toQuarantineButtonBorderColor:{propertyType:"child",type:"string",child:"_toQuarantineButtonElement",childProperty:"borderColor",resourceValue:["getTheme"],defaultValue:"@PrimaryColor"},toQuarantineButtonHoverBorderColor:{propertyType:"child",type:"string",child:"_toQuarantineButtonElement",childProperty:"hoverBorderColor",resourceValue:["getTheme"],defaultValue:"@HoverBorderColor"},toQuarantineButtonDisabledBorderColor:{propertyType:"child",type:"string",child:"_toQuarantineButtonElement",childProperty:"disabledBorderColor",resourceValue:["getTheme"],defaultValue:"@DisabledBorderColor"},toTrustedButtonWidth:{propertyType:"child",type:"string",child:"_toTrustedButtonElement",childProperty:"width",defaultValue:"200px"},toTrustedButtonMinWidth:{propertyType:"child",type:"string",child:"_toTrustedButtonElement",childProperty:"minWidth"},toTrustedButtonMaxWidth:{propertyType:"child",type:"string",child:"_toTrustedButtonElement",childProperty:"maxWidth"},toTrustedButtonHeight:{propertyType:"child",type:"string",child:"_toTrustedButtonElement",childProperty:"height",defaultValue:"40px"},toTrustedButtonMinHeight:{propertyType:"child",type:"string",child:"_toTrustedButtonElement",childProperty:"minHeight"},toTrustedButtonMaxHeight:{propertyType:"child",type:"string",child:"_toTrustedButtonElement",childProperty:"maxHeight"},toTrustedButtonPadding:{propertyType:"child",type:"string",child:"_toTrustedButtonElement",childProperty:"padding"},toTrustedButtonBorderWidth:{propertyType:"child",type:"string",child:"_toTrustedButtonElement",childProperty:"borderWidth",defaultValue:"1px"},toTrustedButtonBorderStyle:{propertyType:"child",type:"string",child:"_toTrustedButtonElement",childProperty:"borderStyle",defaultValue:"solid"},toTrustedButtonBorderRadius:{propertyType:"child",type:"string",child:"_toTrustedButtonElement",childProperty:"borderRadius",defaultValue:"0px"},toTrustedButtonOpacity:{propertyType:"child",type:"number",child:"_toTrustedButtonElement",childProperty:"opacity"},toTrustedButtonVisibility:{propertyType:"child",type:"string",child:"_toTrustedButtonElement",childProperty:"visibility"},toTrustedButtonShadow:{propertyType:"child",type:"string",child:"_toTrustedButtonElement",childProperty:"shadow"},toTrustedButtonPressedShadow:{propertyType:"child",type:"string",child:"_toTrustedButtonElement",childProperty:"pressedShadow"},toTrustedButtonTransition:{propertyType:"child",type:"string",child:"_toTrustedButtonElement",childProperty:"transition"},toTrustedButtonBackground:{propertyType:"child",type:"string",child:"_toTrustedButtonElement",childProperty:"background"},toTrustedButtonShowSymbol:{propertyType:"child",type:"string",child:"_toTrustedButtonElement",childProperty:"showSymbol",defaultValue:true},toTrustedButtonIconFont:{propertyType:"child",type:"string",child:"_toTrustedButtonElement",childProperty:"iconFont",defaultValue:"lenze-icons"},toTrustedButtonSymbol:{propertyType:"child",type:"string",child:"_toTrustedButtonElement",childProperty:"symbol",defaultValue:"safety_function"},toTrustedButtonSymbolPressed:{propertyType:"child",type:"string",child:"_toTrustedButtonElement",childProperty:"symbolPressed"},toTrustedButtonSymbolType:{propertyType:"child",type:"string",child:"_toTrustedButtonElement",childProperty:"symbolType",defaultValue:"icon"},toTrustedButtonSymbolSize:{propertyType:"child",type:"string",child:"_toTrustedButtonElement",childProperty:"symbolSize",defaultValue:"24px"},toTrustedButtonSymbolMargin:{propertyType:"child",type:"string",child:"_toTrustedButtonElement",childProperty:"symbolMargin",defaultValue:"0px 8px 0px 0px"},toTrustedButtonSymbolPosition:{propertyType:"child",type:"string",child:"_toTrustedButtonElement",childProperty:"symbolPosition",defaultValue:"left"},toTrustedButtonShowText:{propertyType:"child",type:"boolean",child:"_toTrustedButtonElement",childProperty:"showText",defaultValue:true},toTrustedButtonTextWidth:{propertyType:"child",type:"string",child:"_toTrustedButtonElement",childProperty:"textWidth",defaultValue:"100%"},toTrustedButtonTextHeight:{propertyType:"child",type:"string",child:"_toTrustedButtonElement",childProperty:"textHeight"},toTrustedButtonTextMargin:{propertyType:"child",type:"string",child:"_toTrustedButtonElement",childProperty:"textMargin",defaultValue:"0px"},toTrustedButtonTextPadding:{propertyType:"child",type:"string",child:"_toTrustedButtonElement",childProperty:"textPadding",defaultValue:"0px"},toTrustedButtonText:{propertyType:"child",type:"string",child:"_toTrustedButtonElement",childProperty:"text",defaultValue:"Trust"},toTrustedButtonLocalizableText:{propertyType:"child",type:"string",child:"_toTrustedButtonElement",childProperty:"localizableText"},toTrustedButtonTextAlignment:{propertyType:"child",type:"string",child:"_toTrustedButtonElement",childProperty:"textAlignment",defaultValue:"Center"},toTrustedButtonLineClamp:{propertyType:"child",type:"string",child:"_toTrustedButtonElement",childProperty:"lineClamp"},toTrustedButtonTextWrapping:{propertyType:"child",type:"string",child:"_toTrustedButtonElement",childProperty:"textWrapping"},toTrustedButtonTextTrimming:{propertyType:"child",type:"string",child:"_toTrustedButtonElement",childProperty:"textTrimming"},toTrustedButtonFontClass:{propertyType:"child",type:"string",child:"_toTrustedButtonElement",childProperty:"fontClass",defaultValue:"OpenSans16"},toTrustedButtonFontSize:{propertyType:"child",type:"string",child:"_toTrustedButtonElement",childProperty:"fontSize"},toTrustedButtonFontWeight:{propertyType:"child",type:"string",child:"_toTrustedButtonElement",childProperty:"fontWeight"},toTrustedButtonLineHeight:{propertyType:"child",type:"string",child:"_toTrustedButtonElement",childProperty:"lineHeight"},toTrustedButtonTextContrast:{propertyType:"child",type:"string",child:"_toTrustedButtonElement",childProperty:"textContrast"},toTrustedButtonUppercase:{propertyType:"child",type:"boolean",child:"_toTrustedButtonElement",childProperty:"uppercase"},toTrustedButtonTextPosition:{propertyType:"child",type:"string",child:"_toTrustedButtonElement",childProperty:"textPosition"},toTrustedButtonBackgroundColor:{propertyType:"child",type:"string",child:"_toTrustedButtonElement",childProperty:"backgroundColor",resourceValue:["getTheme"],defaultValue:"@Transparent"},toTrustedButtonHoverBackgroundColor:{propertyType:"child",type:"string",child:"_toTrustedButtonElement",childProperty:"hoverBackgroundColor",resourceValue:["getTheme"],defaultValue:"@HoverBackgroundColor"},toTrustedButtonPressedBackgroundColor:{propertyType:"child",type:"string",child:"_toTrustedButtonElement",childProperty:"pressedBackgroundColor",resourceValue:["getTheme"],defaultValue:"@PressedBackgroundColor"},toTrustedButtonDisabledBackgroundColor:{propertyType:"child",type:"string",child:"_toTrustedButtonElement",childProperty:"disabledBackgroundColor",resourceValue:["getTheme"],defaultValue:"@MediumGrey"},toTrustedButtonForegroundColor:{propertyType:"child",type:"string",child:"_toTrustedButtonElement",childProperty:"foregroundColor",resourceValue:["getTheme"],defaultValue:"@PrimaryColor"},toTrustedButtonPressedForegroundColor:{propertyType:"child",type:"string",child:"_toTrustedButtonElement",childProperty:"pressedForegroundColor",resourceValue:["getTheme"],defaultValue:"@White"},toTrustedButtonDisabledForegroundColor:{propertyType:"child",type:"string",child:"_toTrustedButtonElement",childProperty:"disabledForegroundColor",resourceValue:["getTheme"],defaultValue:"@DisabledForegroundColor"},toTrustedButtonBorderColor:{propertyType:"child",type:"string",child:"_toTrustedButtonElement",childProperty:"borderColor",resourceValue:["getTheme"],defaultValue:"@PrimaryColor"},toTrustedButtonHoverBorderColor:{propertyType:"child",type:"string",child:"_toTrustedButtonElement",childProperty:"hoverBorderColor",resourceValue:["getTheme"],defaultValue:"@HoverBorderColor"},toTrustedButtonDisabledBorderColor:{propertyType:"child",type:"string",child:"_toTrustedButtonElement",childProperty:"disabledBorderColor",resourceValue:["getTheme"],defaultValue:"@DisabledBorderColor"},deleteButtonWidth:{propertyType:"child",type:"string",child:"_deleteButtonElement",childProperty:"width",defaultValue:"200px"},deleteButtonMinWidth:{propertyType:"child",type:"string",child:"_deleteButtonElement",childProperty:"minWidth"},deleteButtonMaxWidth:{propertyType:"child",type:"string",child:"_deleteButtonElement",childProperty:"maxWidth"},deleteButtonHeight:{propertyType:"child",type:"string",child:"_deleteButtonElement",childProperty:"height",defaultValue:"40px"},deleteButtonMinHeight:{propertyType:"child",type:"string",child:"_deleteButtonElement",childProperty:"minHeight"},deleteButtonMaxHeight:{propertyType:"child",type:"string",child:"_deleteButtonElement",childProperty:"maxHeight"},deleteButtonPadding:{propertyType:"child",type:"string",child:"_deleteButtonElement",childProperty:"padding"},deleteButtonBorderWidth:{propertyType:"child",type:"string",child:"_deleteButtonElement",childProperty:"borderWidth",defaultValue:"1px"},deleteButtonBorderStyle:{propertyType:"child",type:"string",child:"_deleteButtonElement",childProperty:"borderStyle",defaultValue:"solid"},deleteButtonBorderRadius:{propertyType:"child",type:"string",child:"_deleteButtonElement",childProperty:"borderRadius",defaultValue:"0px"},deleteButtonOpacity:{propertyType:"child",type:"number",child:"_deleteButtonElement",childProperty:"opacity"},deleteButtonVisibility:{propertyType:"child",type:"string",child:"_deleteButtonElement",childProperty:"visibility"},deleteButtonShadow:{propertyType:"child",type:"string",child:"_deleteButtonElement",childProperty:"shadow"},deleteButtonPressedShadow:{propertyType:"child",type:"string",child:"_deleteButtonElement",childProperty:"pressedShadow"},deleteButtonTransition:{propertyType:"child",type:"string",child:"_deleteButtonElement",childProperty:"transition"},deleteButtonBackground:{propertyType:"child",type:"string",child:"_deleteButtonElement",childProperty:"background"},deleteButtonShowSymbol:{propertyType:"child",type:"string",child:"_deleteButtonElement",childProperty:"showSymbol",defaultValue:true},deleteButtonIconFont:{propertyType:"child",type:"string",child:"_deleteButtonElement",childProperty:"iconFont",defaultValue:"lenze-icons"},deleteButtonSymbol:{propertyType:"child",type:"string",child:"_deleteButtonElement",childProperty:"symbol",defaultValue:"waste"},deleteButtonSymbolPressed:{propertyType:"child",type:"string",child:"_deleteButtonElement",childProperty:"symbolPressed"},deleteButtonSymbolType:{propertyType:"child",type:"string",child:"_deleteButtonElement",childProperty:"symbolType",defaultValue:"icon"},deleteButtonSymbolSize:{propertyType:"child",type:"string",child:"_deleteButtonElement",childProperty:"symbolSize",defaultValue:"24px"},deleteButtonSymbolMargin:{propertyType:"child",type:"string",child:"_deleteButtonElement",childProperty:"symbolMargin",defaultValue:"0px 8px 0px 0px"},deleteButtonSymbolPosition:{propertyType:"child",type:"string",child:"_deleteButtonElement",childProperty:"symbolPosition",defaultValue:"left"},deleteButtonShowText:{propertyType:"child",type:"boolean",child:"_deleteButtonElement",childProperty:"showText",defaultValue:true},deleteButtonTextWidth:{propertyType:"child",type:"string",child:"_deleteButtonElement",childProperty:"textWidth",defaultValue:"100%"},deleteButtonTextHeight:{propertyType:"child",type:"string",child:"_deleteButtonElement",childProperty:"textHeight"},deleteButtonTextMargin:{propertyType:"child",type:"string",child:"_deleteButtonElement",childProperty:"textMargin",defaultValue:"0px"},deleteButtonTextPadding:{propertyType:"child",type:"string",child:"_deleteButtonElement",childProperty:"textPadding",defaultValue:"0px"},deleteButtonText:{propertyType:"child",type:"string",child:"_deleteButtonElement",childProperty:"text",defaultValue:"Delete"},deleteButtonLocalizableText:{propertyType:"child",type:"string",child:"_deleteButtonElement",childProperty:"localizableText"},deleteButtonTextAlignment:{propertyType:"child",type:"string",child:"_deleteButtonElement",childProperty:"textAlignment",defaultValue:"Center"},deleteButtonLineClamp:{propertyType:"child",type:"string",child:"_deleteButtonElement",childProperty:"lineClamp"},deleteButtonTextWrapping:{propertyType:"child",type:"string",child:"_deleteButtonElement",childProperty:"textWrapping"},deleteButtonTextTrimming:{propertyType:"child",type:"string",child:"_deleteButtonElement",childProperty:"textTrimming"},deleteButtonFontClass:{propertyType:"child",type:"string",child:"_deleteButtonElement",childProperty:"fontClass",defaultValue:"OpenSans16"},deleteButtonFontSize:{propertyType:"child",type:"string",child:"_deleteButtonElement",childProperty:"fontSize"},deleteButtonFontWeight:{propertyType:"child",type:"string",child:"_deleteButtonElement",childProperty:"fontWeight"},deleteButtonLineHeight:{propertyType:"child",type:"string",child:"_deleteButtonElement",childProperty:"lineHeight"},deleteButtonTextContrast:{propertyType:"child",type:"string",child:"_deleteButtonElement",childProperty:"textContrast"},deleteButtonUppercase:{propertyType:"child",type:"boolean",child:"_deleteButtonElement",childProperty:"uppercase"},deleteButtonTextPosition:{propertyType:"child",type:"string",child:"_deleteButtonElement",childProperty:"textPosition"},deleteButtonBackgroundColor:{propertyType:"child",type:"string",child:"_deleteButtonElement",childProperty:"backgroundColor",resourceValue:["getTheme"],defaultValue:"@Transparent"},deleteButtonHoverBackgroundColor:{propertyType:"child",type:"string",child:"_deleteButtonElement",childProperty:"hoverBackgroundColor",resourceValue:["getTheme"],defaultValue:"@HoverBackgroundColor"},deleteButtonPressedBackgroundColor:{propertyType:"child",type:"string",child:"_deleteButtonElement",childProperty:"pressedBackgroundColor",resourceValue:["getTheme"],defaultValue:"@PressedBackgroundColor"},deleteButtonDisabledBackgroundColor:{propertyType:"child",type:"string",child:"_deleteButtonElement",childProperty:"disabledBackgroundColor",resourceValue:["getTheme"],defaultValue:"@MediumGrey"},deleteButtonForegroundColor:{propertyType:"child",type:"string",child:"_deleteButtonElement",childProperty:"foregroundColor",resourceValue:["getTheme"],defaultValue:"@PrimaryColor"},deleteButtonPressedForegroundColor:{propertyType:"child",type:"string",child:"_deleteButtonElement",childProperty:"pressedForegroundColor",resourceValue:["getTheme"],defaultValue:"@White"},deleteButtonDisabledForegroundColor:{propertyType:"child",type:"string",child:"_deleteButtonElement",childProperty:"disabledForegroundColor",resourceValue:["getTheme"],defaultValue:"@DisabledForegroundColor"},deleteButtonBorderColor:{propertyType:"child",type:"string",child:"_deleteButtonElement",childProperty:"borderColor",resourceValue:["getTheme"],defaultValue:"@PrimaryColor"},deleteButtonHoverBorderColor:{propertyType:"child",type:"string",child:"_deleteButtonElement",childProperty:"hoverBorderColor",resourceValue:["getTheme"],defaultValue:"@HoverBorderColor"},deleteButtonDisabledBorderColor:{propertyType:"child",type:"string",child:"_deleteButtonElement",childProperty:"disabledBorderColor",resourceValue:["getTheme"],defaultValue:"@DisabledBorderColor"},detailsBorderColor:{propertyType:"child",type:"string",child:"_detailsElement",childProperty:"borderColor",resourceValue:["getTheme"],defaultValue:"@AltForegroundColor"},detailsBorderStyle:{propertyType:"child",type:"string",child:"_detailsElement",childProperty:"borderStyle",defaultValue:"Solid"},detailsBorderWidth:{propertyType:"child",type:"string",child:"_detailsElement",childProperty:"borderWidth",defaultValue:"2px 0px 0px 0px"},detailsMargin:{propertyType:"child",type:"string",child:"_detailsElement",childProperty:"margin",defaultValue:"0px 0px 0px 0px"},detailsPadding:{propertyType:"child",type:"string",child:"_detailsElement",childProperty:"padding",defaultValue:"16px 6px 0px 6px"},detailsAuthorizationRight:{propertyType:"member",type:"string",defaultValue:""},selectedCertificateThumbprintVariableName:{propertyType:"member",type:"string",defaultValue:"__CERTIFICATE_HANDLER.SELECTED_CERTIFICATE_THUMBPRINT"},selectedCertificateNameVariableName:{propertyType:"member",type:"string",defaultValue:"__CERTIFICATE_HANDLER.SELECTED_CERTIFICATE_NAME"},backgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@Transparent"},borderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@Transparent"},foregroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},contentBackgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@WhiteGrey"},dividerColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@BackgroundColor"},moveToQuarantineDialogName:{propertyType:"member",type:"string",defaultValue:"dialogs/security/certificates/ToQuarantine.html"},trustCertificateDialogName:{propertyType:"member",type:"string",defaultValue:"dialogs/security/certificates/ToTrusted.html"},deleteCertificateDialogName:{propertyType:"member",type:"string",defaultValue:"dialogs/security/certificates/Delete.html"}};this._isSlidedIn=true;this.initialize(Lenze.UI.CertificateListItem)}createTemplate(){this.element.innerHTML=`\n                <div data-ref-element="_listHeaderElement" class="${this.className}__header" data-win-control="${Lenze.Controls.getType(Lenze.UI.CertificateListHeader)}"></div>\n                \n                <div data-ref-element="_bodyElement" class="${this.className}__body">\n                    <div data-ref-element="_bodyHeaderElement" class="${this.className}__body-header">\n                        <div data-ref-element="_detailsHeadingLabelElement" class="${this.className}__details-heading-label" data-win-control="${Lenze.Controls.getType(VisiWin.UI.Label)}"></div>\n                        <div data-ref-element="_toQuarantineButtonElement" class="${this.className}__to-quarantine-button" data-win-control="${Lenze.Controls.getType(VisiWin.UI.Button)}"></div>\n                        <div data-ref-element="_toTrustedButtonElement" class="${this.className}__to-trusted-button" data-win-control="${Lenze.Controls.getType(VisiWin.UI.Button)}"></div>\n                        <div data-ref-element="_deleteButtonElement" class="${this.className}__delete-button" data-win-control="${Lenze.Controls.getType(VisiWin.UI.Button)}"></div>\n                    </div>\n                    <div data-ref-element="_detailsElement" class="${this.className}__details" data-win-control="${Lenze.Controls.getType(Lenze.UI.CertificateDetails)}"> </div>\n                </div>\n            `;return this.initializeChilds()}async afterInit(){var _a,_b,_c;if(VisiWin.Utilities.isInDesignMode())return;this._headerClickHandler=this._onHeaderClick.bind(this);this._listHeaderControl.addEventListener("buttonclick",this._headerClickHandler);this._toQuarantineClickHandler=this._onToQuarantineClick.bind(this);this._toQuarantineButtonElement.winControl.addEventListener("buttonclick",this._toQuarantineClickHandler);this._toTrustedClickHandler=this._onToTrustedClick.bind(this);this._toTrustedButtonElement.winControl.addEventListener("buttonclick",this._toTrustedClickHandler);this._deleteClickHandler=this._onDeleteClick.bind(this);this._deleteButtonElement.winControl.addEventListener("buttonclick",this._deleteClickHandler);this._selectedCertificateThumbprintChangeHandler=this._onSelectedCertificateThumbprintChangeAsync.bind(this);this._variableService=VisiWin.System.DataAccess.VariableService.getService();this._dialogService=VisiWin.AppServices.LenzeDialogService;if(Lenze.Strings.isNullOrWhiteSpace(this.selectedCertificateThumbprintVariableName)){console.error("Please enter a variable name for the selectedCertificateThumbprint.")}else{this._selectedCertificateThumbprintVariable=this._variableService.GetVariable(this.selectedCertificateThumbprintVariableName);await((_a=this._selectedCertificateThumbprintVariable)===null||_a===void 0?void 0:_a.AttachAsync());(_b=this._selectedCertificateThumbprintVariable)===null||_b===void 0?void 0:_b.Change.add(this._selectedCertificateThumbprintChangeHandler)}if(Lenze.Strings.isNullOrWhiteSpace(this.selectedCertificateNameVariableName)){console.error("Please enter a variable name for the selectedCertificateName.")}else{this._selectedCertificateNameVariable=this._variableService.GetVariable(this.selectedCertificateNameVariableName);await((_c=this._selectedCertificateNameVariable)===null||_c===void 0?void 0:_c.AttachAsync())}}_updateLayout(changes){}_updateColors(changes){this.setColor(Lenze.Strings.nameof("backgroundColor"));this.setColor(Lenze.Strings.nameof("foregroundColor"));this.setColor(Lenze.Strings.nameof("borderColor"));this._bodyElement.style.backgroundColor=this.getThemeColor("@AltBackgroundColor")}dispose(){this._listHeaderControl.removeEventListener("buttonclick",this._headerClickHandler);this._toQuarantineButtonElement.winControl.removeEventListener("buttonclick",this._toQuarantineClickHandler);this._toTrustedButtonElement.winControl.removeEventListener("buttonclick",this._toTrustedClickHandler);this._deleteButtonElement.winControl.removeEventListener("buttonclick",this._deleteClickHandler);return super.dispose()}detach(){var _a,_b,_c;(_a=this._selectedCertificateThumbprintVariable)===null||_a===void 0?void 0:_a.Change.remove(this._selectedCertificateThumbprintChangeHandler);(_b=this._selectedCertificateThumbprintVariable)===null||_b===void 0?void 0:_b.Detach();(_c=this._selectedCertificateNameVariable)===null||_c===void 0?void 0:_c.Detach();return super.detach()}async setListItemAsync(value){this._listItem=value;await this._setContentAsync()}async _setContentAsync(){var _a;if(this._listItem==null||VisiWin.Utilities.isInDesignMode()){this.visibility="collapse";return}this.visibility="visible";const setPromises=[];setPromises.push(this._listHeaderControl.setListHeaderAsync(this._listItem.header));await Promise.all(setPromises);if(this._selectedCertificateThumbprintVariable.Value===((_a=this.listItem)===null||_a===void 0?void 0:_a.body.details.thumbprint)){this._isSlidedIn=false}this._setVisibilityOfButtons();await this._CertificateDetailsControl.setDetailsAsync(this._listItem.body);this._setHeaderHeight();this.updateLayout()}_setHeaderHeight(){if(VisiWin.Utilities.isInDesignMode())this._isSlidedIn=false;this.element.style.maxHeight=!this._isSlidedIn?`${this.element.scrollHeight}px`:`${this._listHeaderElement.clientHeight}px`;this._listHeaderControl.expandSymbol=!this._isSlidedIn?this._listHeaderControl.expandSymbolClose:this._listHeaderControl.expandSymbolOpen}_setVisibilityOfButtons(){var _a,_b;if(((_a=this._listItem)===null||_a===void 0?void 0:_a.body.details.state)==Lenze.Models.CertificateStateEnum.Trusted){this._toQuarantineButtonElement.winControl.visibility="collapse";this._toTrustedButtonElement.winControl.visibility="collapse"}if(((_b=this._listItem)===null||_b===void 0?void 0:_b.body.details.state)==Lenze.Models.CertificateStateEnum.InQuarantine){this._toQuarantineButtonElement.winControl.visibility="collapse";this._deleteButtonElement.winControl.visibility="collapse"}}_onHeaderClick(){var _a,_b;this._isSlidedIn=!this._isSlidedIn;this._setHeaderHeight();this._selectedCertificateThumbprintVariable.Value=(_a=this.listItem)===null||_a===void 0?void 0:_a.body.details.thumbprint;this._selectedCertificateNameVariable.Value=(_b=this.listItem)===null||_b===void 0?void 0:_b.body.details.subjectCommonName}_onToQuarantineClick(){this._dialogService.showDialog(this.moveToQuarantineDialogName)}_onToTrustedClick(){this._dialogService.showDialog(this.trustCertificateDialogName)}_onDeleteClick(){this._dialogService.showDialog(this.deleteCertificateDialogName)}async _onSelectedCertificateThumbprintChangeAsync(){var _a;if(!this.isAttached)return;if(this._isSlidedIn===false&&this._selectedCertificateThumbprintVariable.Value!=((_a=this.listItem)===null||_a===void 0?void 0:_a.body.details.thumbprint)){this._isSlidedIn=true;this._setHeaderHeight()}}}UI.CertificateListItem=CertificateListItem})(UI=Lenze.UI||(Lenze.UI={}))})(Lenze||(Lenze={}));"use strict";var Lenze;(function(Lenze){var UI;(function(UI){"use strict";class CertificateList extends Lenze.UI.ControlBase{constructor(element,options){super(element,options);this.properties={designerType:{propertyType:"base",type:"string",defaultValue:"Control"},certificateDetailsLocalizableText:{propertyType:"member",type:"string",defaultValue:"@[ServerApplication].Security.LCH.CertificateList.CertificateDetails"},moveToQuarantineLocalizableText:{propertyType:"member",type:"string",defaultValue:"@[ServerApplication].Security.LCH.CertificateList.MoveToQuarantine"},trustCertificateLocalizableText:{propertyType:"member",type:"string",defaultValue:"@[ServerApplication].Security.LCH.CertificateList.TrustCertificate"},deleteCertificateLocalizableText:{propertyType:"member",type:"string",defaultValue:"@[ServerApplication].Security.LCH.CertificateList.DeleteCertificate"},placeholderEmptyTrustedListLocalizableText:{propertyType:"member",type:"string",defaultValue:"@[ServerApplication].Security.LCH.CertificateList.placeholderEmptyTrustedList"},placeholderEmptyQuarantineListLocalizableText:{propertyType:"member",type:"string",defaultValue:"@[ServerApplication].Security.LCH.CertificateList.placeholderEmptyQuarantineList"},placeholderEmptyListLocalizableText:{propertyType:"member",type:"string",defaultValue:"@[ServerApplication].Security.LCH.CertificateList.placeholderEmptyList"},placeholderListIsLoadingLocalizableText:{propertyType:"member",type:"string",defaultValue:"@[ServerApplication].Security.LCH.CertificateList.placeholderListIsLoading"},placeholderUserNotAuthorizedLocalizableText:{propertyType:"member",type:"string",defaultValue:"@[ServerApplication].Security.LCH.CertificateList.placeholderUserNotAuthorized"},placeholderErrorProcessingListLocalizableText:{propertyType:"member",type:"string",defaultValue:"@[ServerApplication].Security.LCH.CertificateList.placeholderErrorProcessingList"},unknownLocalizableText:{propertyType:"member",type:"string",defaultValue:"@[ServerApplication].Security.LCH.CertificateList.Unknown"},expiredSinceLocalizableText:{propertyType:"member",type:"string",defaultValue:"@[ServerApplication].Security.LCH.CertificateList.ExpiredSince"},expiresInLocalizableText:{propertyType:"member",type:"string",defaultValue:"@[ServerApplication].Security.LCH.CertificateList.ExpiresIn"},validLocalizableText:{propertyType:"member",type:"string",defaultValue:"@[ServerApplication].Security.LCH.CertificateList.Valid"},validInLocalizableText:{propertyType:"member",type:"string",defaultValue:"@[ServerApplication].Security.LCH.CertificateList.ValidIn"},dayLocalizableText:{propertyType:"member",type:"string",defaultValue:"@[ServerApplication].Security.LCH.CertificateList.Day"},daysLocalizableText:{propertyType:"member",type:"string",defaultValue:"@[ServerApplication].Security.LCH.CertificateList.Days"},weekLocalizableText:{propertyType:"member",type:"string",defaultValue:"@[ServerApplication].Security.LCH.CertificateList.Week"},weeksLocalizableText:{propertyType:"member",type:"string",defaultValue:"@[ServerApplication].Security.LCH.CertificateList.Weeks"},monthLocalizableText:{propertyType:"member",type:"string",defaultValue:"@[ServerApplication].Security.LCH.CertificateList.Month"},monthsLocalizableText:{propertyType:"member",type:"string",defaultValue:"@[ServerApplication].Security.LCH.CertificateList.Months"},yearLocalizableText:{propertyType:"member",type:"string",defaultValue:"@[ServerApplication].Security.LCH.CertificateList.Year"},yearsLocalizableText:{propertyType:"member",type:"string",defaultValue:"@[ServerApplication].Security.LCH.CertificateList.Years"},certificateListVariableName:{propertyType:"member",type:"string",defaultValue:"__CERTIFICATE_HANDLER.CERTIFICATES"},selectedCertificateThumbprintVariableName:{propertyType:"member",type:"string",defaultValue:"__CERTIFICATE_HANDLER.SELECTED_CERTIFICATE_THUMBPRINT"},selectedCertificateNameVariableName:{propertyType:"member",type:"string",defaultValue:"__CERTIFICATE_HANDLER.SELECTED_CERTIFICATE_NAME"},certificateFilter:{propertyType:"member",type:"string",defaultValue:Lenze.Models.CertificateStateEnum.None},expiresSoonLimit:{propertyType:"member",type:"number",defaultValue:810},validitySymbolSymbolStateUnknown:{propertyType:"member",type:"string",defaultValue:"question_invers"},validitySymbolForegroundColorStateUnknown:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"},validitySymbolSymbolStateExpired:{propertyType:"member",type:"string",defaultValue:"alert_active"},validitySymbolForegroundColorStateExpired:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ErrorColor"},validitySymbolSymbolStateExpiresSoon:{propertyType:"member",type:"string",defaultValue:"report_problem"},validitySymbolForegroundColorStateExpiresSoon:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@WarningColor"},validitySymbolSymbolStateValid:{propertyType:"member",type:"string",defaultValue:"circle2_checked"},validitySymbolForegroundColorStateValid:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@SuccessColor"},validitySymbolSymbolStateValidInFuture:{propertyType:"member",type:"string",defaultValue:"calendar"},validitySymbolForegroundColorStateValidInFuture:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@PrimaryColor"},detailsAuthorizationRight:{propertyType:"member",type:"string",defaultValue:""},backgroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@Transparent"},borderColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@Transparent"},foregroundColor:{propertyType:"member",type:"string",resourceValue:["getTheme"],defaultValue:"@ForegroundColor"}};this.initialize(Lenze.UI.CertificateList)}createTemplate(){this.element.innerHTML="";return this.initializeChilds()}_updateLayout(changes){}_updateColors(changes){this.setColor(Lenze.Strings.nameof("backgroundColor"));this.setColor(Lenze.Strings.nameof("foregroundColor"));this.setColor(Lenze.Strings.nameof("borderColor"))}async attach(){var _a,_b;await super.attach();if(Lenze.Strings.isNullOrWhiteSpace(this.certificateListVariableName)){console.error("Please enter a variable name for the certificate list.")}else{this._certificateListVariable=this._variableService.GetVariable(this.certificateListVariableName);(_a=this._certificateListVariable)===null||_a===void 0?void 0:_a.Change.add(this._certificateListChangeHandler);await((_b=this._certificateListVariable)===null||_b===void 0?void 0:_b.AttachAsync())}await this._renewListAsync()}async afterInit(){if(VisiWin.Utilities.isInDesignMode()){switch(this.certificateFilter){case Lenze.Models.CertificateStateEnum.Trusted:await this._showPlaceholderAsync(this.placeholderEmptyTrustedListLocalizableText);break;case Lenze.Models.CertificateStateEnum.InQuarantine:await this._showPlaceholderAsync(this.placeholderEmptyQuarantineListLocalizableText);break;default:await this._showPlaceholderAsync(this.placeholderEmptyListLocalizableText);break}return}else{this._certificateListChangeHandler=this._onCertificateListChangeAsync.bind(this);this._variableService=VisiWin.System.DataAccess.VariableService.getService();this._userChangedHandler=this._onUserChangeAsync.bind(this);this._userService=VisiWin.System.UserManagement.UserManagementService.getService();this._userService.UserLoggedOn.add(this._userChangedHandler)}}dispose(){return super.dispose()}detach(){var _a,_b;(_a=this._certificateListVariable)===null||_a===void 0?void 0:_a.Change.remove(this._certificateListChangeHandler);this._userService.UserLoggedOn.remove(this._userChangedHandler);(_b=this._certificateListVariable)===null||_b===void 0?void 0:_b.Detach();return super.detach()}async _renewListAsync(){if(!Lenze.Users.isAuthorized(this._userService,this.detailsAuthorizationRight)){await this._showPlaceholderAsync(this.placeholderUserNotAuthorizedLocalizableText);return}this.element.innerHTML="";this._itemControls=[];await this._fillListAsync()}_createCertificateListItem(){const listItem=Lenze.Dom.createControl(UI.CertificateListItem,this.element);listItem.detailsAuthorizationRight=this.detailsAuthorizationRight;this._itemControls.push(listItem);return listItem}async _fillListAsync(){let currentDate=new Date;let certificateDetailsList=[];try{[currentDate,certificateDetailsList]=await Lenze.Certificates.jsonToCertificateListAsync(this._certificateListVariable.Value)}catch(e){console.error(e);await this._showPlaceholderAsync(this.placeholderErrorProcessingListLocalizableText);return}if(this.certificateFilter!==Lenze.Models.CertificateStateEnum.None){certificateDetailsList=certificateDetailsList.filter(certificate=>certificate.state==this.certificateFilter)}if(certificateDetailsList.length==0){switch(this.certificateFilter){case Lenze.Models.CertificateStateEnum.Trusted:await this._showPlaceholderAsync(this.placeholderEmptyTrustedListLocalizableText);break;case Lenze.Models.CertificateStateEnum.InQuarantine:await this._showPlaceholderAsync(this.placeholderEmptyQuarantineListLocalizableText);break;default:await this._showPlaceholderAsync(this.placeholderEmptyListLocalizableText);break}return}let certificateListOfValidityStateUnknown=[];let certificateListOfValidityStateExpired=[];let certificateListOfValidityStateExpiresSoon=[];let certificateListOfValidityStateValid=[];let certificateListOfValidityStateValidInFuture=[];for(let certificateDetails of certificateDetailsList){let validityState=await Lenze.Certificates.getCertificateValidityStateAsync(certificateDetails.validFrom,certificateDetails.validTo,currentDate,this.expiresSoonLimit);switch(validityState){case Lenze.Models.CertificateValidityStateEnum.Expired:certificateListOfValidityStateExpired.push(certificateDetails);break;case Lenze.Models.CertificateValidityStateEnum.ExpiresSoon:certificateListOfValidityStateExpiresSoon.push(certificateDetails);break;case Lenze.Models.CertificateValidityStateEnum.Valid:certificateListOfValidityStateValid.push(certificateDetails);break;case Lenze.Models.CertificateValidityStateEnum.ValidInFuture:certificateListOfValidityStateValidInFuture.push(certificateDetails);break;default:certificateListOfValidityStateUnknown.push(certificateDetails);break}}certificateListOfValidityStateUnknown.sort((a,b)=>a.validTo>b.validTo?1:b.validTo>a.validTo?-1:0);certificateListOfValidityStateExpired.sort((a,b)=>a.validTo<b.validTo?1:b.validTo<a.validTo?-1:0);certificateListOfValidityStateExpiresSoon.sort((a,b)=>a.validTo>b.validTo?1:b.validTo>a.validTo?-1:0);certificateListOfValidityStateValid.sort((a,b)=>a.validTo>b.validTo?1:b.validTo>a.validTo?-1:0);certificateListOfValidityStateValidInFuture.sort((a,b)=>a.validFrom>b.validFrom?1:b.validFrom>a.validFrom?-1:0);certificateDetailsList=certificateListOfValidityStateExpiresSoon.concat(certificateListOfValidityStateValid,certificateListOfValidityStateValidInFuture,certificateListOfValidityStateExpired,certificateListOfValidityStateUnknown);const setPromises=[];for(let certificateDetails of certificateDetailsList){let validityStateDataBuffer={state:await Lenze.Certificates.getCertificateValidityStateAsync(certificateDetails.validFrom,certificateDetails.validTo,currentDate,this.expiresSoonLimit),validitySymbolVisibility:"collapse",validitySymbol:this.validitySymbolSymbolStateUnknown,validitySymbolForegroundColor:this.validitySymbolForegroundColorStateUnknown,validityText1Visibility:"collapse",validityText1:"",validityText2Visibility:"collapse",validityText2:"",validityText3Visibility:"collapse",validityText3:"",validFromDataTextForegroundColor:"@ForegroundColor",validToDataTextForegroundColor:"@ForegroundColor"};switch(validityStateDataBuffer.state){case Lenze.Models.CertificateValidityStateEnum.Expired:{validityStateDataBuffer.validitySymbolVisibility="visible";validityStateDataBuffer.validitySymbol=this.validitySymbolSymbolStateExpired;validityStateDataBuffer.validitySymbolForegroundColor=this.validitySymbolForegroundColorStateExpired;validityStateDataBuffer.validityText1Visibility="visible";validityStateDataBuffer.validityText1=this.expiredSinceLocalizableText;let[timeValue,localizableTextTimeUnit]=await this._getRemainingValidityTimeAsync(certificateDetails.validTo,currentDate);validityStateDataBuffer.validityText2Visibility="visible";validityStateDataBuffer.validityText2=timeValue.toString();validityStateDataBuffer.validityText2Visibility="visible";validityStateDataBuffer.validityText3=localizableTextTimeUnit;break}case Lenze.Models.CertificateValidityStateEnum.ExpiresSoon:{validityStateDataBuffer.validitySymbolVisibility="visible";validityStateDataBuffer.validitySymbol=this.validitySymbolSymbolStateExpiresSoon;validityStateDataBuffer.validitySymbolForegroundColor=this.validitySymbolForegroundColorStateExpiresSoon;validityStateDataBuffer.validityText1Visibility="visible";validityStateDataBuffer.validityText1=this.expiresInLocalizableText;let[timeValue,localizableTextTimeUnit]=await this._getRemainingValidityTimeAsync(currentDate,certificateDetails.validTo);validityStateDataBuffer.validityText2Visibility="visible";validityStateDataBuffer.validityText2=timeValue.toString();validityStateDataBuffer.validityText2Visibility="visible";validityStateDataBuffer.validityText3=localizableTextTimeUnit;break}case Lenze.Models.CertificateValidityStateEnum.Valid:{validityStateDataBuffer.validitySymbolVisibility="visible";validityStateDataBuffer.validitySymbol=this.validitySymbolSymbolStateValid;validityStateDataBuffer.validitySymbolForegroundColor=this.validitySymbolForegroundColorStateValid;validityStateDataBuffer.validityText1Visibility="visible";validityStateDataBuffer.validityText1=this.validLocalizableText;break}case Lenze.Models.CertificateValidityStateEnum.ValidInFuture:{validityStateDataBuffer.validitySymbolVisibility="visible";validityStateDataBuffer.validitySymbol=this.validitySymbolSymbolStateValidInFuture;validityStateDataBuffer.validitySymbolForegroundColor=this.validitySymbolSymbolStateValidInFuture;validityStateDataBuffer.validityText1Visibility="visible";validityStateDataBuffer.validityText1=this.validInLocalizableText;let[timeValue,localizableTextTimeUnit]=await this._getRemainingValidityTimeAsync(currentDate,certificateDetails.validFrom);validityStateDataBuffer.validityText2Visibility="visible";validityStateDataBuffer.validityText2=timeValue.toString();validityStateDataBuffer.validityText2Visibility="visible";validityStateDataBuffer.validityText3=localizableTextTimeUnit;break}default:{validityStateDataBuffer.validitySymbolVisibility="visible";validityStateDataBuffer.validitySymbol=this.validitySymbolSymbolStateUnknown;validityStateDataBuffer.validitySymbolForegroundColor=this.validitySymbolForegroundColorStateUnknown;validityStateDataBuffer.validityText1Visibility="visible";validityStateDataBuffer.validityText1=this.unknownLocalizableText;break}}const listItem=this._createCertificateListItem();const listItemModel=new Lenze.Models.CertificateListItem({header:new Lenze.Models.CertificateListItemHeader({titleText:new Lenze.Models.ListText({text:certificateDetails.subjectCommonName,isLocalizable:false,fontWeight:"FW500"}),validitySymbolVisibility:validityStateDataBuffer.validitySymbolVisibility,validitySymbolIconFont:"lenze-icons",validitySymbolSymbolType:"Icon",validitySymbolSymbol:validityStateDataBuffer.validitySymbol,validitySymbolForegroundColor:validityStateDataBuffer.validitySymbolForegroundColor,validityText1Visibility:validityStateDataBuffer.validityText1Visibility,validityText1:new Lenze.Models.ListText({text:validityStateDataBuffer.validityText1,isLocalizable:true}),validityText2Visibility:validityStateDataBuffer.validityText2Visibility,validityText2:new Lenze.Models.ListText({text:validityStateDataBuffer.validityText2}),validityText3Visibility:validityStateDataBuffer.validityText2Visibility,validityText3:new Lenze.Models.ListText({text:validityStateDataBuffer.validityText3,isLocalizable:true})}),body:new Lenze.Models.CertificateListItemBody({details:certificateDetails,validFromDataTextForegroundColor:validityStateDataBuffer.validFromDataTextForegroundColor,validToDataTextForegroundColor:validityStateDataBuffer.validToDataTextForegroundColor})});setPromises.push(listItem.setListItemAsync(listItemModel))}await Promise.all(setPromises)}async _showPlaceholderAsync(placeHolderLocalizableText){this.element.innerHTML="";this._placeholderTextElement=Lenze.Dom.createControl(VisiWin.UI.TextBlock,this.element,["lenze-certificatelist__placeholder"]);this._placeholderTextElement.width="100%";this._placeholderTextElement.margin="0px";this._placeholderTextElement.padding="8px 16px 8px 16px";this._placeholderTextElement.backgroundColor="@AltBackgroundColor";this._placeholderTextElement.textWrapping="Wrap";this._placeholderTextElement.localizableText=placeHolderLocalizableText}async _onCertificateListChangeAsync(e){if(!this.isAttached)return;if(e.Source!==VisiWin.System.DataAccess.ChangeSource.Configuration){await this._renewListAsync()}}async _onUserChangeAsync(){if(!this.isAttached)return;await this._renewListAsync()}async _getRemainingValidityTimeAsync(d1,d2){let dateDiffInDays=Lenze.Dates.getDateDiffInDays(d1,d2);if(dateDiffInDays<2){return[1,this.dayLocalizableText]}else if(dateDiffInDays<=31){return[Math.floor(dateDiffInDays),this.daysLocalizableText]}let dateDiffInWeeks=Lenze.Dates.getDateDiffInWeeks(d1,d2);if(dateDiffInWeeks<2){return[1,this.weekLocalizableText]}else if(dateDiffInWeeks<=4){return[Math.floor(dateDiffInWeeks),this.weeksLocalizableText]}let dateDiffInMonths=Lenze.Dates.getDateDiffInMonths(d1,d2);if(dateDiffInMonths<2){return[1,this.monthLocalizableText]}else if(dateDiffInMonths<=12){return[Math.floor(dateDiffInMonths),this.monthsLocalizableText]}let dateDiffInYears=Lenze.Dates.getDateDiffInYears(d1,d2);if(dateDiffInYears==1){return[1,this.yearLocalizableText]}else{return[dateDiffInYears,this.yearsLocalizableText]}}}UI.CertificateList=CertificateList})(UI=Lenze.UI||(Lenze.UI={}))})(Lenze||(Lenze={}));