/*! VisiWinJS | INOSOFT GmbH | 73.7.52.0 + 2024-04-18 */

!function(e){!function(n){"use strict";let t;!function(e){e[e.beforebegin=0]="beforebegin",e[e.afterbegin=1]="afterbegin",e[e.beforeend=2]="beforeend",e[e.afterend=3]="afterend"}(t=n.adjacentHTML||(n.adjacentHTML={}));let o={Child:"Child",TemplateChild:"TemplateChild",RegionControl:"RegionControl",Control:"Control",CustomControl:"CustomControl",UserControl:"UserControl",ContentControl:"ContentControl",DesignerContainer:"DesignerContainer",Collection:"Collection",DisabledControl:"DisabledControl",TemplateContainer:"TemplateContainer",UserControlChild:"UserControlChild",child:"child"};e.UI.Enums?null!==e.UI.Enums.DesignerType&&void 0!==e.UI.Enums.DesignerType||(e.UI.Enums.DesignerType=o):(e.UI.Enums={},e.UI.Enums.DesignerType=o)}(e.DesignHelper||(e.DesignHelper={}))}(VisiWin||(VisiWin={})),(()=>{const e=console.log;console.log=function(n){VisiWin.DesignHelper.debuggerLog&&VisiWin.DesignHelper.sendConsoleLog("log",arguments),e.apply(console,arguments)};const n=console.warn;console.warn=function(e){VisiWin.DesignHelper.debuggerWarnLog&&VisiWin.DesignHelper.sendConsoleLog("warn",arguments),n.apply(console,arguments)};const t=console.error;console.error=function(e){VisiWin.DesignHelper.debuggerErrorLog&&VisiWin.DesignHelper.sendConsoleLog("error",arguments),t.apply(console,arguments)};const o=console.info;console.info=function(e){VisiWin.DesignHelper.debuggerInfoLog&&VisiWin.DesignHelper.sendConsoleLog("info",arguments),o.apply(console,arguments)}})(),function(e){!function(n){"use strict";function stringifyToJsonCommand(n,t){if(e.DesignHelper.debuggerLog&&!e.isNullOrEmpty(t))if(e.isArray(t)){for(let e=0;e<t.length;e++)if(t[e].optionList)for(let n=0;n<t[e].optionList.length;n++)try{JSON.stringify(t[e].optionList[n])}catch(o){console.log("OuterObject: "+e),console.log("optionList: "+n),console.error(JSON.stringify(o)),console.error(t[e])}}else if(e.isArray(t.optionList))for(let e=0;e<t.optionList.length;e++)try{JSON.stringify(t.optionList[e])}catch(n){console.log("optionList: "+e),console.error(JSON.stringify(n)),console.error(t)}return{CmdName:n,CmdValue:JSON.stringify(t)}}function sendSocketMessage(n){e.DesignHelper.Websocket.currentSocket&&e.DesignHelper.Websocket.currentSocket.ws.readyState===WebSocket.OPEN&&e.DesignHelper.Websocket.currentSocket.send(n)}n.command=e.DesignHelper.command||{},n.command.default=(e,n)=>{},n.parseToJsonCommand=function parseToJsonCommand(e){let n;if(e.data){if(n=JSON.parse(e.data),n.CmdValue&&n.CmdName){let e={};e=JSON.parse(n.CmdValue),n.CmdValue=e}return n}},n.stringifyToJsonCommand=stringifyToJsonCommand,n.executeCommand=function executeCommand(n){e.DesignHelper.command[n.CmdName]?e.DesignHelper.command[n.CmdName](n.CmdName,n.CmdValue):e.DesignHelper.command.default(n.CmdName,n.CmdValue)},n.sendSocketMessage=sendSocketMessage,n.sendConsoleLog=function sendConsoleLog(n,t){let o="";if(e.isString(t[0])&&(o=t[0]),e.isObject(t[1])){o=o+"\n"+e.DesignHelper.makeString(t[1],"\n")}else if(e.isObject(t[0])){o=o+"\n"+e.DesignHelper.makeString(t[0],"\n")}else e.isString(t[1])&&(o=o+"\n"+t[1]);sendSocketMessage(stringifyToJsonCommand("R_ConsoleLog",{Severity:n,LogText:o}))}}(e.DesignHelper||(e.DesignHelper={}))}(VisiWin||(VisiWin={}));var VisiWin,__awaiter=this&&this.__awaiter||function(e,n,t,o){return new(t||(t=Promise))((function(r,i){function fulfilled(e){try{step(o.next(e))}catch(e){i(e)}}function rejected(e){try{step(o.throw(e))}catch(e){i(e)}}function step(e){e.done?r(e.value):function adopt(e){return e instanceof t?e:new t((function(n){n(e)}))}(e.value).then(fulfilled,rejected)}step((o=o.apply(e,n||[])).next())}))};!function(e){!function(n){"use strict";e.DesignHelper.command.Q_GetWinControls=(n,t)=>{const o=e.Internal.System.Diagnostics.performanceMark("Q_GetWinControls=>"+e.Internal.makeString(t));o.reset();try{console.info("Q_GetWinControls : ",t);const n=e.DesignHelper.getVisiWinControls(),o=[];for(let e=0,t=n.length;e<t;e++){const t=n[e].minimalJson();o.push(t)}const r=e.DesignHelper.stringifyToJsonCommand("R_GetWinControls",o);e.DesignHelper.sendSocketMessage(r),console.info("R_GetWinControls : ",o)}catch(e){console.error("R_GetWinControls : ",e)}o.endMark()},e.DesignHelper.command.Q_GetHoverElementFromPoint=function(n,t){const o=e.Internal.System.Diagnostics.performanceMark("Q_GetHoverElementFromPoint=>"+e.Internal.makeString(t));if(o.reset(),console.info("Q_GetHoverElementFromPoint : ",{X:t.X,Y:t.Y}),e.DesignHelper.currentElement=e.DesignHelper.getElementFromPoint(t.X,t.Y,!0),e.DesignHelper.currentElement){const n=e.DesignHelper.stringifyToJsonCommand("R_GetHoverElementFromPoint",e.DesignHelper.currentElement.minimalJson());e.DesignHelper.sendSocketMessage(n),console.info("R_GetHoverElementFromPoint : ",e.DesignHelper.currentElement.minimalJson())}else{console.info("Q_GetHoverElementFromPoint not found element at : ",{X:t.X,Y:t.Y});const n=e.DesignHelper.stringifyToJsonCommand("R_GetHoverElementFromPoint",null);e.DesignHelper.sendSocketMessage(n)}o.endMark()},e.DesignHelper.command.Q_GetElementsFromPoint=(n,t)=>{const o=e.Internal.System.Diagnostics.performanceMark("Q_GetElementsFromPoint=>"+e.Internal.makeString(t));o.reset(),console.info("Q_GetElementsFromPoint : ",{X:t.X,Y:t.Y});const r=document.elementsFromPoint(t.X,t.Y),i=[];for(let n=0;n<r.length;n++)if(!(e.isNullOrUndefined(r[n].winControl)||e.isNullOrUndefined(r[n].winControl._designerType)||e.UI.Enums.DesignerType.UserControl!==r[n].winControl._designerType&&e.UI.Enums.DesignerType.CustomControl!==r[n].winControl._designerType&&e.UI.Enums.DesignerType.Control!==r[n].winControl._designerType&&e.UI.Enums.DesignerType.ContentControl!==r[n].winControl._designerType)){const t=new e.DesignHelper.HTMLElementInfo(r[n]);i.push(t.toJson())}if(i.length>0){const n=e.DesignHelper.stringifyToJsonCommand("R_ElementsFromPoint",i);e.DesignHelper.sendSocketMessage(n),console.info("R_GetElementsFromPoint : ",i)}else{console.info("Q_GetElementFromPoint not found element at : ",{X:t.X,Y:t.Y});const n=e.DesignHelper.stringifyToJsonCommand("R_ElementsFromPoint",null);e.DesignHelper.sendSocketMessage(n)}o.endMark()},e.DesignHelper.command.Q_GetElementFromUniqueID=(n,t)=>{const o=e.Internal.System.Diagnostics.performanceMark("Q_GetElementFromUniqueID=>"+e.Internal.makeString(t));o.reset(),console.info("Q_GetElementFromUniqueID : ",{ID:t.UniqueID});let r,i=!1;"true"==t.BestMatch&&(i=!0),e.DesignHelper.currentElement=e.DesignHelper.getElementFromUniqueID(t.UniqueID),e.DesignHelper.currentElement?(r=t.MinimalJSON?e.DesignHelper.stringifyToJsonCommand("R_ElementFromUniqueID",e.DesignHelper.currentElement.minimalJson()):e.DesignHelper.stringifyToJsonCommand("R_ElementFromUniqueID",e.DesignHelper.currentElement.toJson()),e.DesignHelper.sendSocketMessage(r),console.info("R_GetElementFromUniqueID : ",e.DesignHelper.currentElement.minimalJson())):(console.warn("Q_GetElementFromUniqueID has not found an element : ",{ID:t.UniqueID}),r=e.DesignHelper.stringifyToJsonCommand("R_ElementFromUniqueID",null),e.DesignHelper.sendSocketMessage(r)),o.endMark()},e.DesignHelper.command.Q_GetLayoutElementFromPoint=(n,t)=>{e.DesignHelper.currentElement=null;const o=e.Internal.System.Diagnostics.performanceMark("Q_GetLayoutElementFromPoint=>"+e.Internal.makeString(t));o.reset(),console.info("Q_GetLayoutElementFromPoint : ",{X:t.X,Y:t.Y});const r=document.elementsFromPoint(t.X,t.Y);for(let n=0;n<r.length;n++)if(!e.isNullOrUndefined(r[n].winControl)&&!e.isNullOrUndefined(r[n].winControl._designerType)&&r[n].winControl._designerType===e.UI.Enums.DesignerType.ContentControl){const t=new e.DesignHelper.HTMLElementInfo(r[n]);e.DesignHelper.currentElement=t;break}if(e.DesignHelper.currentElement){let n;n=t.Hover?e.DesignHelper.stringifyToJsonCommand("R_GetLayoutElementFromPoint",e.DesignHelper.currentElement.minimalJson()):e.DesignHelper.stringifyToJsonCommand("R_GetLayoutElementFromPoint",e.DesignHelper.currentElement.toJson()),e.DesignHelper.sendSocketMessage(n),console.info("R_GetLayoutElementFromPoint : ",e.DesignHelper.currentElement.minimalJson())}else{console.warn("Q_GetLayoutElementFromPoint has not found an element : ",{X:t.X,Y:t.Y});const n=e.DesignHelper.stringifyToJsonCommand("R_GetLayoutElementFromPoint",null);e.DesignHelper.sendSocketMessage(n)}o.endMark()},e.DesignHelper.command.Q_SetProperty=(n,t)=>{const o=e.Internal.System.Diagnostics.performanceMark("Q_SetProperty=>"+e.Internal.makeString(t));o.reset();const r=t.UniqueID,i=t.PropertyName,s=t.PropertyValue;if(console.info("Q_SetProperty : ",{PropertyName:t.PropertyName,PropertyValue:t.PropertyValue,UniqueID:t.UniqueID}),e.DesignHelper.currentElement=e.DesignHelper.getElementFromUniqueID(r),e.DesignHelper.currentElement){e.DesignHelper.setInlineOptions(e.DesignHelper.currentElement,i,s);const n=e.DesignHelper.stringifyToJsonCommand("R_SetProperty",e.DesignHelper.currentElement.toJson());e.DesignHelper.sendSocketMessage(n),console.info("R_SetProperty : ",e.DesignHelper.currentElement.minimalJson())}else{console.error("Q_SetProperty has not found an element : ",{PropertyName:t.PropertyName,PropertyValue:t.PropertyValue,UniqueID:t.UniqueID});const n=e.DesignHelper.stringifyToJsonCommand("R_SetProperty",null);e.DesignHelper.sendSocketMessage(n)}o.endMark()},e.DesignHelper.command.Q_InsertControl=(n,t)=>__awaiter(this,void 0,void 0,(function*(){const n=e.Internal.System.Diagnostics.performanceMark("Q_InsertControl=>"+e.Internal.makeString(t));n.reset(),console.info("Q_InsertControl : ",{UniqueID:t.UniqueID,WinControlString:t.WinControlString});t.WinControlString;const o=e.DesignHelper.getElementFromUniqueID(t.UniqueID);if(o)try{const n=yield e.DesignHelper.addWinControl(o,e.DesignHelper.adjacentHTML.beforeend,t.WinControlString),r=e.DesignHelper.stringifyToJsonCommand("R_InsertControl",n.toJson());e.DesignHelper.sendSocketMessage(r),console.info("R_InsertControl : ",n.minimalJson())}catch(e){console.error("Q_InsertControl:"+e)}else console.warn("Q_InsertControl has not found an element : ",{UniqueID:t.UniqueID});n.endMark()})),e.DesignHelper.command.Q_RemoveControl=(n,t)=>__awaiter(this,void 0,void 0,(function*(){e.Internal.System.Diagnostics.performanceMark("Q_GetElementFromPoint=>"+e.Internal.makeString(t)).reset(),console.info("Q_RemoveControl : ",{UniqueID:t.UniqueID});const n=e.DesignHelper.getElementFromUniqueID(t.UniqueID);if(n&&n.uniqueID===t.UniqueID){const o=e.DesignHelper.removeWinControl(n),r=e.DesignHelper.stringifyToJsonCommand("R_RemoveControl",o);e.DesignHelper.sendSocketMessage(r),console.info("R_RemoveControl : ",{UniqueID:t.UniqueID,RemoveSuccess:o})}else{console.warn("Q_RemoveControl has not found an element : ",{UniqueID:t.UniqueID});const n=e.DesignHelper.stringifyToJsonCommand("R_RemoveControl",null);e.DesignHelper.sendSocketMessage(n)}})),e.DesignHelper.command.Q_LoadPage=(n,t)=>__awaiter(this,void 0,void 0,(function*(){const n=e.Internal.System.Diagnostics.performanceMark("Q_LoadPage=>"+e.Internal.makeString(t));let o;n.reset(),console.info("Q_LoadPage : ",{Height:t.Height,PageUrl:t.Url,Width:t.Width}),t.Url||console.error("Q_LoadPage:"+t);const r=document.querySelectorAll("[data-win-control]");for(let n=0,t=r.length;n<t;n++)e.isNullOrUndefined(r[n].winControl)||e.isNullOrUndefined(r[n].winControl._designerType)||e.UI.Enums.DesignerType.DesignerContainer===r[n].winControl._designerType&&(o=new e.DesignHelper.HTMLElementInfo(r[n]));o||console.error("Q_LoadPage: no layout conatainer found");try{yield e.DesignHelper.loadPage(o,t.Url,t.Width,t.Height);const n=e.DesignHelper.getVisiWinControls(),r=[],i=[];for(let e=0,t=n.length;e<t;e++)r.push(n[e].minimalJson()),i.push(n[e].minimalJson());const s=e.DesignHelper.stringifyToJsonCommand("R_LoadPage",r);e.DesignHelper.sendSocketMessage(s),console.info("R_LoadPage : ",JSON.stringify(i))}catch(e){console.error("Q_LoadPage:"+JSON.stringify(e))}n.endMark()})),e.DesignHelper.command.Q_Resize=(n,t)=>{const o=e.Internal.System.Diagnostics.performanceMark("Q_Resize=>"+e.Internal.makeString(t));o.reset();const r=t.UniqueID,i=t.Width,s=t.Height,l=t.Left,a=t.Top;if(console.info("Q_Resize : ",{Left:t.Left,Height:t.Height,Top:t.Top,UniqueID:t.UniqueID,Width:t.Width}),e.DesignHelper.currentElement=e.DesignHelper.getElementFromUniqueID(r),e.DesignHelper.currentElement){i&&e.DesignHelper.setInlineOptions(e.DesignHelper.currentElement,"width",i),s&&e.DesignHelper.setInlineOptions(e.DesignHelper.currentElement,"height",s),l&&e.DesignHelper.setInlineOptions(e.DesignHelper.currentElement,"left",l),a&&e.DesignHelper.setInlineOptions(e.DesignHelper.currentElement,"top",a);const n=e.DesignHelper.stringifyToJsonCommand("R_Resize",e.DesignHelper.currentElement.getRect());e.DesignHelper.sendSocketMessage(n),console.info("R_Resize : ",e.DesignHelper.currentElement.getRect())}else{console.warn("Q_Resize has not found an element : ",{Height:t.Height,Top:t.Top,UniqueID:t.UniqueID,Width:t.Width});const n=e.DesignHelper.stringifyToJsonCommand("R_Resize",null);e.DesignHelper.sendSocketMessage(n)}o.endMark()},e.DesignHelper.command.Q_Move=(n,t)=>{const o=e.Internal.System.Diagnostics.performanceMark("Q_Move=>"+e.Internal.makeString(t));if(o.reset(),t.MoveControlInfos){const n=[];for(let o=0;o<t.MoveControlInfos.length;o++){const r=t.MoveControlInfos[o].UniqueId,i=t.MoveControlInfos[o].Left,s=t.MoveControlInfos[o].Top;if(console.info("Q_Move : ",{Left:i,Top:s,UniqueId:r}),e.DesignHelper.currentElement=e.DesignHelper.getElementFromUniqueID(r),e.DesignHelper.currentElement)e.DesignHelper.setInlineOptions(e.DesignHelper.currentElement,"top",s),e.DesignHelper.setInlineOptions(e.DesignHelper.currentElement,"left",i),n.push({UniqueId:r,Rect:e.DesignHelper.currentElement.getRect()});else{console.warn("Q_Move has not found an element : ",{UniqueID:t.MoveControlInfos[o].UniqueId,Left:t.MoveControlInfos[o].Left,Top:t.MoveControlInfos[o].Top});const n=e.DesignHelper.stringifyToJsonCommand("R_Move",null);e.DesignHelper.sendSocketMessage(n)}}const o=n.map(e=>({UniqueId:e.UniqueId,Rect:e.Rect})),r=e.DesignHelper.stringifyToJsonCommand("R_Move",o);e.DesignHelper.sendSocketMessage(r),console.info("R_Move : ",o.toString())}else{const n=t.UniqueID,o=t.Left,r=t.Top;if(console.info("Q_Move : ",{Left:t.Left,Top:t.Top,UniqueID:t.UniqueID}),e.DesignHelper.currentElement=e.DesignHelper.getElementFromUniqueID(n),e.DesignHelper.currentElement){e.DesignHelper.setInlineOptions(e.DesignHelper.currentElement,"top",r),e.DesignHelper.setInlineOptions(e.DesignHelper.currentElement,"left",o);const n=e.DesignHelper.stringifyToJsonCommand("R_Move",e.DesignHelper.currentElement.getRect());e.DesignHelper.sendSocketMessage(n);const i=e.DesignHelper.currentElement.element.getBoundingClientRect(),s=i.left,l=i.top;console.info("R_Move : ",{Left:s+"px",Top:l+"px",UniqueID:t.UniqueID})}else{console.warn("Q_Move has not found an element : ",{PropertyName:t.PropertyName,PropertyValue:t.PropertyValue,UniqueID:t.UniqueID});const n=e.DesignHelper.stringifyToJsonCommand("R_Move",null);e.DesignHelper.sendSocketMessage(n)}}o.endMark()},e.DesignHelper.command.Q_ChangeControlOrder=(n,t)=>__awaiter(this,void 0,void 0,(function*(){console.info("Q_ChangeControlOrder : ",{UniqueID:t.UniqueID,ReferenceID:t.ReferenceID,MoveState:t.MoveState});const n=e.DesignHelper.getElementFromUniqueID(t.UniqueID);n||console.error("Q_ChangeControlOrder:"+{Error:"Element not found",UniqueID:t.UniqueID});const o=e.DesignHelper.getElementFromUniqueID(t.ReferenceID);o||console.error("Q_ChangeControlOrder:"+{Error:"Reference Element not found",UniqueID:t.ReferenceID}),"After"===t.MoveState&&(o.element.nextElementSibling?o.element.parentNode.insertBefore(n.element,o.element.nextElementSibling):o.element.parentNode.appendChild(n.element)),"Before"===t.MoveState&&o.element.parentNode.insertBefore(n.element,o.element);const r=e.DesignHelper.stringifyToJsonCommand("R_ChangeControlOrder",n.minimalJson());e.DesignHelper.sendSocketMessage(r),console.info("R_ChangeControlOrder : ",n.minimalJson())})),e.DesignHelper.command.Q_GetElementsFromRect=function(n,t){const o=e.Internal.System.Diagnostics.performanceMark("Q_GetElementsFromRect=>"+e.Internal.makeString(t));o.reset();const r=t.Width,i=t.Height,s=t.Left,l=t.Top,a=s+r,g=l+i,c=t.ControlsToCheck;try{console.info("Q_GetElementsFromRect : ",t);const n=[];for(let o=0,r=c.length;o<r;o++){const r=e.DesignHelper.getElementFromUniqueID(c[o]);if(r){const e=r.element.getBoundingClientRect();if(s<=e.right&&l<=e.bottom&&a>=e.left&&g>=e.top)try{r.element.winControl&&r.minimalJson&&n.push(r.minimalJson())}catch(e){console.error(e)}}else console.warn("Q_GetElementsFromRect has not found an element : ",{CmdValue:t})}const o=e.DesignHelper.stringifyToJsonCommand("R_GetElementsFromRect",n);e.DesignHelper.sendSocketMessage(o),console.info("R_GetElementsFromRect : ",n)}catch(e){console.error("R_GetElementsFromRect : ",e)}o.endMark()},n.GetLocalizedTexts=function GetLocalizedTexts(n){const t=e.DesignHelper.stringifyToJsonCommand("Q_GetLocalizedTexts",n);e.DesignHelper.sendSocketMessage(t),console.info("Q_GetLocalizedTexts : ",{FullQualifiedText:n})},n.SetPropertyFromUI=function SetPropertyFromUI(n,t){const o=e.DesignHelper.stringifyToJsonCommand("Q_SetPropertyFromUI",{PropertyName:n,PropertyValue:t});e.DesignHelper.sendSocketMessage(o),console.info("SetPropertyFromUI : ",{PropertyName:n,PropertyValue:t})},e.DesignHelper.command.R_GetLocalizedTexts=(n,t)=>{console.info(n+" : ",{Value:t});const o=e.Internal.Application.ApplicationManager.getApplication().getDefaultSession(),r=o.Settings.Client.LineBreakSearchString||"",i=o.Settings.Client.LineBreakReplaceString||"";for(let n=0;n<t.length;n++)try{e.Internal.stringContains(t[n].DisplayText,r)&&(t[n].DisplayText=t[n].DisplayText.replace(r,i)),e.Internal.Domain.Language&&e.Internal.Domain.Language.QueryHandler&&e.Internal.Domain.Language.QueryHandler.localizedTextChangeEventArgs?e.Internal.Domain.Language.QueryHandler.localizedTextChangeEventArgs({FullQualifiedText:t[n].FullQualifiedText,DisplayText:t[n].DisplayText},o):o.LanguageManager&&o.LanguageManager.localizedTextChangeEventArgs&&o.LanguageManager.localizedTextChangeEventArgs({FullQualifiedText:t[n].FullQualifiedText,DisplayText:t[n].DisplayText})}catch(n){console.error("R_GetLocalizedTexts Error :"+e.Internal.makeString(n))}},e.DesignHelper.command.Q_GetActionPropertyList=(n,t)=>{const o=e.Internal.System.Diagnostics.performanceMark("Q_GetActionPropertyList=>"+e.Internal.makeString(t));let r;if(o.reset(),console.info("Q_GetActionPropertyList : ",{ID:t.UniqueID,TriggerIndex:t.TriggerIndex,ActionIndex:t.ActionIndex}),e.DesignHelper.currentElement=e.DesignHelper.getElementFromUniqueID(t.UniqueID),e.DesignHelper.currentElement){const n=e.DesignHelper.currentElement.getActionPropertyList(t.TriggerIndex,t.ActionIndex);r=e.DesignHelper.stringifyToJsonCommand("R_GetActionPropertyList",n),e.DesignHelper.sendSocketMessage(r),console.info("R_GetActionPropertyList : ",n)}else console.warn("Q_GetActionPropertyList has not found an element : ",{ID:t.UniqueID}),r=e.DesignHelper.stringifyToJsonCommand("R_GetActionPropertyList",null),e.DesignHelper.sendSocketMessage(r);o.endMark()},e.DesignHelper.command.Q_GetElementsFromPointMinimal=(n,t)=>{const o=e.Internal.System.Diagnostics.performanceMark("Q_GetElementsFromPointMinimal=>"+e.Internal.makeString(t));o.reset(),console.info("Q_GetElementsFromPointMinimal : ",{X:t.X,Y:t.Y});const r=document.elementsFromPoint(t.X,t.Y),i=[];for(let n=0;n<r.length;n++)if(!(e.isNullOrUndefined(r[n].winControl)||e.isNullOrUndefined(r[n].winControl._designerType)||e.UI.Enums.DesignerType.Control!==r[n].winControl._designerType&&e.UI.Enums.DesignerType.UserControl!==r[n].winControl._designerType&&e.UI.Enums.DesignerType.CustomControl!==r[n].winControl._designerType&&e.UI.Enums.DesignerType.ContentControl!==r[n].winControl._designerType)){const t=new e.DesignHelper.HTMLElementInfo(r[n]);i.push(t.minimalJson())}if(i.length>0){const n=e.DesignHelper.stringifyToJsonCommand("R_GetElementsFromPointMinimal",i);e.DesignHelper.sendSocketMessage(n),console.info("R_GetElementsFromPointMinimal : ",i)}else{console.info("Q_GetElementsFromPointMinimal not found element at : ",{X:t.X,Y:t.Y});const n=e.DesignHelper.stringifyToJsonCommand("R_GetElementsFromPointMinimal",null);e.DesignHelper.sendSocketMessage(n)}o.endMark()},e.DesignHelper.command.Q_GetObservables=(n,t)=>{const o=e.Internal.System.Diagnostics.performanceMark("Q_GetObservables=>");let r;if(console.info("Q_GetObservables"),e.AppServices.DataService.getObservables){const n=e.AppServices.DataService.getObservables();r=e.DesignHelper.stringifyToJsonCommand("R_GetObservables",n),e.DesignHelper.sendSocketMessage(r),console.info("R_GetObservables: ",n)}else console.warn("VisiWin.AppServices.DataService.getObservables failed"),r=e.DesignHelper.stringifyToJsonCommand("R_GetObservables",null),e.DesignHelper.sendSocketMessage(r);o.endMark()},e.DesignHelper.command.Q_GetObservablesDescription=(n,t)=>{const o=e.Internal.System.Diagnostics.performanceMark("Q_GetObservablesDescription=>");let r;if(console.info("Q_GetObservablesDescription"),e.AppServices.DataService.getObservablesDescription){const n=e.AppServices.DataService.getObservablesDescription();r=e.DesignHelper.stringifyToJsonCommand("R_GetObservablesDescription",n),e.DesignHelper.sendSocketMessage(r),console.info("R_GetObservablesDescription : ",n)}else console.warn("VisiWin.AppServices.DataService.getObservablesDescription() failed"),r=e.DesignHelper.stringifyToJsonCommand("R_GetObservablesDescription",null),e.DesignHelper.sendSocketMessage(r);o.endMark()},e.DesignHelper.command.Q_GetObservableDescriptionByName=(n,t)=>{const o=e.Internal.System.Diagnostics.performanceMark("Q_GetObservableDescriptionByName=>");let r;if(console.info("Q_GetObservableDescriptionByName "+t),e.AppServices.DataService.getObservableDescriptionByName){const n=e.AppServices.DataService.getObservableDescriptionByName(t.ObservableName);r=e.DesignHelper.stringifyToJsonCommand("R_GetObservableDescriptionByName",n),e.DesignHelper.sendSocketMessage(r),console.info("R_GetObservableDescriptionByName : ",n)}else console.warn(`VisiWin.AppServices.DataService.getObservableDescriptionByName(${t}) failed`),r=e.DesignHelper.stringifyToJsonCommand("R_GetObservableDescriptionByName",t),e.DesignHelper.sendSocketMessage(r);o.endMark()},e.DesignHelper.command.Q_GetDataSources=(n,t)=>{const o=e.Internal.System.Diagnostics.performanceMark("Q_GetDataSources=>");let r;if(console.info("Q_GetDataSources"),e.AppServices.DataService.getDataSources){const n=e.AppServices.DataService.getDataSources();r=e.DesignHelper.stringifyToJsonCommand("R_GetDataSources",n),e.DesignHelper.sendSocketMessage(r),console.info("R_GetDataSources : ",n)}else console.warn("VisiWin.AppServices.DataService.getDataSources failed"),r=e.DesignHelper.stringifyToJsonCommand("R_GetDataSources",null),e.DesignHelper.sendSocketMessage(r);o.endMark()},e.DesignHelper.command.Q_GetDataSourcesDescription=(n,t)=>{const o=e.Internal.System.Diagnostics.performanceMark("Q_GetDataSourcesDescription=>");let r;if(console.info("Q_GetDataSourcesDescription"),e.AppServices.DataService.getDataSourcesDescription){const n=e.AppServices.DataService.getDataSourcesDescription();r=e.DesignHelper.stringifyToJsonCommand("R_GetDataSourcesDescription",n),e.DesignHelper.sendSocketMessage(r),console.info("R_GetDataSourcesDescription : ",n)}else console.warn("VisiWin.AppServices.DataService.getDataSourcesDescription failed"),r=e.DesignHelper.stringifyToJsonCommand("R_GetDataSourcesDescription",null),e.DesignHelper.sendSocketMessage(r);o.endMark()},e.DesignHelper.command.Q_GetDataSourceDescriptionByName=(n,t)=>{const o=e.Internal.System.Diagnostics.performanceMark("Q_GetDataSourceDescriptionByName=>");let r;if(console.info("Q_GetDataSourceDescriptionByName"),e.AppServices.DataService.getDataSourceDescriptionByName){const n=e.AppServices.DataService.getDataSourceDescriptionByName(t.DataSourceName);r=e.DesignHelper.stringifyToJsonCommand("R_GetDataSourceDescriptionByName",n),e.DesignHelper.sendSocketMessage(r),console.info("R_GetDataSourceDescriptionByName : ",n)}else console.warn(`VisiWin.AppServices.DataService.getDataSourceDescriptionByName(${t}) failed`),r=e.DesignHelper.stringifyToJsonCommand("R_GetDataSourceDescriptionByName",null),e.DesignHelper.sendSocketMessage(r);o.endMark()},e.DesignHelper.command.Q_GetConverters=(n,t)=>{const o=e.Internal.System.Diagnostics.performanceMark("Q_GetConverters=>");let r;if(console.info("Q_GetConverters"),e.AppServices.DataService.getConverters){const n=e.AppServices.DataService.getConverters();r=e.DesignHelper.stringifyToJsonCommand("R_GetConverters",n),e.DesignHelper.sendSocketMessage(r),console.info("R_GetConverters: ",n)}else console.warn("VisiWin.AppServices.DataService.Q_GetConverters failed"),r=e.DesignHelper.stringifyToJsonCommand("R_GetConverters",null),e.DesignHelper.sendSocketMessage(r);o.endMark()},e.DesignHelper.command.Q_GetBindings=(n,t)=>{const o=e.Internal.System.Diagnostics.performanceMark("Q_GetBindings=>");let r;if(console.info("Q_GetBindings"),e.AppServices.DataService.getBindings){const n=e.AppServices.DataService.getBindings();r=e.DesignHelper.stringifyToJsonCommand("R_GetBindings",n),e.DesignHelper.sendSocketMessage(r),console.info("R_GetBindings: ",n)}else console.warn("VisiWin.AppServices.DataService.Q_GetBindings failed"),r=e.DesignHelper.stringifyToJsonCommand("R_GetBindings",null),e.DesignHelper.sendSocketMessage(r);o.endMark()},e.DesignHelper.command.Q_MoveToContainer=(n,t)=>__awaiter(this,void 0,void 0,(function*(){const n=e.Internal.System.Diagnostics.performanceMark("Q_MoveToContainer=>"+e.Internal.makeString(t));n.reset(),console.info("Q_MoveToContainer : ",{SourceIDs:t.SourceIDs,TargetContainerID:t.TargetContainerID,TargetPosition:t.TargetPosition,RemoveAbsolutePosition:t.RemoveAbsolutePosition});const o=[],r=e.DesignHelper.getElementFromUniqueID(t.TargetContainerID),i=t.TargetPosition||"beforeend";if(r){try{t.SourceIDs.forEach(n=>{const t=e.DesignHelper.getElementFromUniqueID(n);t&&o.push(t)}),o.forEach(e=>{r.element.insertAdjacentElement(i,e.element),t.RemoveAbsolutePosition&&(e.element.style.position="relative",e.element.style.left="",e.element.style.top="")});const n=e.DesignHelper.stringifyToJsonCommand("R_MoveToContainer",!0);e.DesignHelper.sendSocketMessage(n),console.info("R_MoveToContainer : ","Succeded")}catch(n){const t=e.DesignHelper.stringifyToJsonCommand("R_MoveToContainer",!1);e.DesignHelper.sendSocketMessage(t),console.error("Q_MoveToContainer:"+n)}n.endMark()}else{const n=e.DesignHelper.stringifyToJsonCommand("R_MoveToContainer",!1);e.DesignHelper.sendSocketMessage(n)}})),e.DesignHelper.command.Q_AddCssClassToElements=(n,t)=>__awaiter(this,void 0,void 0,(function*(){const n=e.Internal.System.Diagnostics.performanceMark("Q_AddCssClassToElements=>"+e.Internal.makeString(t));n.reset(),console.info("Q_AddCssClassToElements : ",{SourceIDs:t.SourceIDs,CssClass:t.CssClass});try{t.SourceIDs.forEach(n=>{const o=e.DesignHelper.getElementFromUniqueID(n);o?e.Utilities.addClass(o.element,t.CssClass):console.error("R_AddCssClassToElements:"+n)});const n=e.DesignHelper.stringifyToJsonCommand("R_AddCssClassToElements",!0);e.DesignHelper.sendSocketMessage(n),console.info("R_AddCssClassToElements : ",t.CssClass)}catch(e){console.error("R_AddCssClassToElements:"+e)}n.endMark()})),e.DesignHelper.command.Q_RemoveCssClassFromElements=(n,t)=>__awaiter(this,void 0,void 0,(function*(){const n=e.Internal.System.Diagnostics.performanceMark("Q_RemoveCssClassFromElements=>"+e.Internal.makeString(t));n.reset(),console.info("Q_RemoveCssClassFromElements : ",{SourceIDs:t.SourceIDs,CssClass:t.CssClass});try{t.SourceIDs.forEach(n=>{const o=e.DesignHelper.getElementFromUniqueID(n);o?e.Utilities.removeClass(o.element,t.CssClass):console.error("R_RemoveCssClassFromElements:"+n)});const n=e.DesignHelper.stringifyToJsonCommand("R_RemoveCssClassFromElements",!0);e.DesignHelper.sendSocketMessage(n),console.info("R_RemoveCssClassFromElements : ",t.CssClass)}catch(e){console.error("R_RemoveCssClassFromElements:"+e)}n.endMark()})),e.DesignHelper.command.Q_ChangeTheme=(n,t)=>__awaiter(this,void 0,void 0,(function*(){var n;const o=e.Internal.System.Diagnostics.performanceMark("Q_ChangeTheme=>"+e.Internal.makeString(t));o.reset();const r=null!==(n=t.ThemeName)&&void 0!==n?n:"";if(console.info("Q_ChangeTheme : ",{theme:t.ThemeName}),!r){const n=e.DesignHelper.stringifyToJsonCommand("R_ChangeTheme",!1);e.DesignHelper.sendSocketMessage(n),console.error("Q_ChangeTheme:"+t)}try{r&&e.DesignHelper.changeTheme(r);const n=e.DesignHelper.stringifyToJsonCommand("R_ChangeTheme",!0);e.DesignHelper.sendSocketMessage(n),console.info("R_ChangeTheme : ","Succeded")}catch(n){const t=e.DesignHelper.stringifyToJsonCommand("R_ChangeTheme",!1);e.DesignHelper.sendSocketMessage(t),console.error("Q_ChangeTheme:"+n)}o.endMark()})),n.SetPropertyFromControl=function SetPropertyFromControl(n,t){const o=e.DesignHelper.stringifyToJsonCommand("Q_SetPropertyFromControl",{PropertyName:n,PropertyValue:t});e.DesignHelper.sendSocketMessage(o),console.info("SetPropertyFromControl : ",{PropertyName:n,PropertyValue:t})},n.SetHTMLFromControl=function SetHTMLFromControl(n,t){const o=window.btoa(t),r=e.DesignHelper.stringifyToJsonCommand("Q_SetHTMLFromUI",{PropertyName:n,HTMLBase64:o});e.DesignHelper.sendSocketMessage(r),console.info("SetHTMLFromUI : ",{PropertyName:n,HTML:t})}}(e.DesignHelper||(e.DesignHelper={}))}(VisiWin||(VisiWin={})),function(e){!function(n){"use strict";n.HTMLElementInfo=class HTMLElementInfo{constructor(e){if(this.optionList=[],this.styleList=[],1!==e.nodeType)return console.error("HTMLElement required!"),void console.error("element.nodeType: "+e.nodeType);this.element=e,this.uniqueID=e.uniqueID,this.id=e.id||null,this.tagName=e.tagName.toLowerCase(),this.element.winControl&&this.element.hasAttribute&&this.element.winControl&&(this.designerType=this.element.winControl.designerType||"",this.controlType=this.element.getAttribute("data-win-control")||this.element.winControl._controlType,this.dataWinOptionsString=this.element.getAttribute("data-win-options")||""),this.Rect=this.getRect(),this.BoundungClientRect=this.getBoundingClientRect(),this.styleList=this.getStyleList()}setProperty(n,t){let o=e.DesignHelper.updateDataWinOptions(this.dataWinOptionsString,n,t);this.element.setAttribute("data-win-options",o)}setDataWinOptionsString(e){this.element.setAttribute("data-win-options",e)}toJson(){this.refreshInfos();try{return{rect:this.Rect,controlType:this.controlType,dataWinOptionsString:this.dataWinOptionsString,designerType:this.designerType,optionList:this.optionList,stylelist:this.styleList,tagName:this.tagName,uniqueID:this.uniqueID,id:this.id}}catch(e){console.error(e)}}minimalJson(){try{let n=[];if(this.element.winControl.collectionPropertyName&&n.push({collectionPropertyName:this.element.winControl.collectionPropertyName}),this.element.winControl.dataContext&&n.push({dataContext:this.element.winControl.dataContext}),this.element.winControl.style?n.push({style:this.element.winControl.style}):n.push({style:""}),"VisiWin.UI.Unknown"==this.element.winControl._controlType)for(var e=0;e<this.optionList.length;e++)this.optionList[e].error&&n.push({error:this.optionList[e].error}),this.optionList[e].errorControlName&&n.push({errorControlName:this.optionList[e].errorControlName});return{controlType:this.controlType||"",dataWinOptionsString:this.dataWinOptionsString||"",optionList:n,stylelist:this.styleList,rect:this.Rect,designerType:this.designerType,tagName:this.tagName,uniqueID:this.uniqueID,id:this.id}}catch(e){console.error(e)}}getRect(){const e=this.element.getBoundingClientRect(),n=Math.round(e.left),t=Math.round(e.top),o=Math.round(e.height);return`${n},${t},${Math.round(e.width)},${o}`}getActionPropertyList(n,t){let o=[];return this.element.winControl&&(o=e.isNullOrUndefined(t)?this.element.winControl.getTriggerPropertyList(n):this.element.winControl.getActionPropertyList(n,t)),o}refreshInfos(){e.isNullOrUndefined(this.element.winControl)||e.isNullOrUndefined(this.element.winControl.getOptionsValue)||e.isFunction(this.element.winControl.getOptionsValue)&&(this.optionList=this.element.winControl.getOptionsValue()),e.isNullOrUndefined(this.element.winControl)||(this.designerType=this.element.winControl.designerType||"",this.controlType=this.element.getAttribute("data-win-control")||this.element.winControl._controlType,this.dataWinOptionsString=this.element.getAttribute("data-win-options")||""),this.Rect=this.getRect(),this.BoundungClientRect=this.getBoundingClientRect()}getStyleList(){return!e.isNullOrUndefined(this.element.winControl)&&e.isFunction(this.element.winControl.getStyleNameFromType)&&(this.styleList=this.element.winControl.getStyleNameFromType(this.controlType)),this.styleList}getBoundingClientRect(){const e=this.element.getBoundingClientRect();return{AbsoluteBottom:e.bottom,AbsoluteHeight:e.height,AbsoluteLeft:e.left,AbsoluteRight:e.right,AbsoluteTop:e.top,AbsoluteWidth:e.width}}}}(e.DesignHelper||(e.DesignHelper={}))}(VisiWin||(VisiWin={})),function(e){!function(n){"use strict";function getRootControl(n,t){const o=new e.DesignHelper.HTMLElementInfo(n);let r=!1;return t&&o.controlType&&(o.designerType===e.UI.Enums.DesignerType.Control||o.designerType===e.UI.Enums.DesignerType.ContentControl)?(e.DesignHelper.currentElement=o,r=!0,o):!1===r&&o.element.parentElement?getRootControl(o.element.parentElement,t):void 0}function getElementFromPoint(n,t,o){const r=document.elementFromPoint(n,t);if(!r)return null;if(e.DesignHelper.currentElement=null,o){e.DesignHelper.currentElement=null;const n=getRootControl(r,o);return n||(e.DesignHelper.currentElement?e.DesignHelper.currentElement:r.winControl?(e.DesignHelper.currentElement=new e.DesignHelper.HTMLElementInfo(r),e.DesignHelper.currentElement):null)}return e.DesignHelper.currentElement=new e.DesignHelper.HTMLElementInfo(r),e.DesignHelper.currentElement}function changeTheme(n){n&&(e.stringEndsWith(n,".json")?e.AppServices.AppService.changeTheme(n):e.AppServices.AppService.changeTheme(n+".json"))}n.debuggerLog=!1,n.debuggerInfoLog=!1,n.debuggerWarnLog=!0,n.debuggerErrorLog=!0,e.Application.Settings.System.Debug=!0,e.Application.Settings.System.EnableVisiWinPerformanceMarks=!0,n.controlsCollection=[],n.getVisiWinControls=function getVisiWinControls(){const n=[],t=document.querySelectorAll("[data-win-control]");for(let o=0,r=t.length;o<r;o++)if(e.isNullOrUndefined(t[o].winControl)){let r,i="";try{r=t[o]}catch(e){console.error("winlessControl"),console.error(t[o].outerHTML)}if(i=t[o].getAttribute("data-win-control"),e.stringStartsWith(i,"WinJS.UI"))continue;let s,l=!1;if(""!==i){let e=t[o];for(;e.parentElement;)if(e=e.parentElement,"VisiWin.UI.TemplateContainer"===e.dataset.winControl){l=!0;break}}if(l)continue;const a=t[o].dataset.winControl||"UnknownElement",g="Error => Invalid WinControl "+a;try{s=new e.UI.Unknown(t[o]._element,{error:g,errorControlName:a})}catch(n){s=new e.UI.Unknown(t[o]._element,null)}s.designerType=e.UI.Enums.DesignerType.DisabledControl;const c=new e.DesignHelper.HTMLElementInfo(s.element);c.refreshInfos(),n.push(c),console.error(g)}else if(e.isNullOrUndefined(t[o].winControl._designerType)){let r,i="";if(i=t[o].getAttribute("data-win-control"),e.stringStartsWith(i,"WinJS.UI"))continue;let s,l=!1;if("VisiWin.UI.TemplateContainer"===i||"WinJS.Binding.Template"===i||"VisiWin.Binding.Template"===i){let e=t[o];for(;e.parentElement;)if(e=e.parentElement,"VisiWin.UI.TemplateContainer"===e.dataset.winControl){l=!0;break}}if(l)continue;try{r=new e.DesignHelper.HTMLElementInfo(t[o].winControl)}catch(e){console.error("typelessControl"),console.error(t[o].outerHTML)}i=r?r.dataWinOptionsString:t[o].getAttribute("data-win-control");const a=t[o].dataset.winControl||"UnknownElement",g="Error => Invalid WinControl "+a;try{s=new e.UI.Unknown(r.element.winControl,{error:g,errorControlName:a})}catch(n){s=new e.UI.Unknown(t[o]._element,null)}s.designerType=e.UI.Enums.DesignerType.DisabledControl;const c=new e.DesignHelper.HTMLElementInfo(s.element);c.refreshInfos(),n.push(c),console.error(g)}else if(e.UI.Enums.DesignerType.UserControl===t[o].winControl._designerType||e.UI.Enums.DesignerType.CustomControl===t[o].winControl._designerType||e.UI.Enums.DesignerType.Control===t[o].winControl._designerType||e.UI.Enums.DesignerType.ContentControl===t[o].winControl._designerType||e.UI.Enums.DesignerType.Collection===t[o].winControl._designerType||e.UI.Enums.DesignerType.DisabledControl===t[o].winControl._designerType||e.UI.Enums.DesignerType.DesignerContainer===t[o].winControl._designerType){const r=new e.DesignHelper.HTMLElementInfo(t[o]);n.push(r)}return e.DesignHelper.controlsCollection=n,n},n.getElementFromUniqueID=function getElementFromUniqueID(n){e.DesignHelper.currentElement=null;const t=document.getElementsByTagName("*");for(let o=0,r=t.length;o<r;o++)if(t[o].uniqueID&&t[o].uniqueID===n){const n=t[o];return e.DesignHelper.currentElement=new e.DesignHelper.HTMLElementInfo(n),e.DesignHelper.currentElement}return e.DesignHelper.currentElement},n.getRootControl=getRootControl,n.getElementFromPoint=getElementFromPoint,n.getLayoutContainer=function getLayoutContainer(n){const t=new e.DesignHelper.HTMLElementInfo(n);let o=!1;return t&&t.controlType&&t.designerType===e.UI.Enums.DesignerType.ContentControl?(e.DesignHelper.currentElement=t,o=!0,t):!1===o&&t.element.parentElement?getLayoutContainer(t.element.parentElement):void 0},n.addWinControl=function addWinControl(n,t,o,r){return __awaiter(this,void 0,void 0,(function*(){return new Promise((i,s)=>{n.element.insertAdjacentHTML(e.DesignHelper.adjacentHTML[t],o);const l=window.setImmediate(()=>{window.clearImmediate(l);try{WinJS.UI.processAll(n.element).then(t=>{const o=new e.DesignHelper.HTMLElementInfo(n.element.lastElementChild);r?(WinJS.UI.setOptions(o.element,r),WinJS.UI.processAll(o.element).then(e=>{i(o)})):i(o)})}catch(e){s(n)}})})}))},n.insertAtPoint=function insertAtPoint(n,t,o,r){return __awaiter(this,void 0,void 0,(function*(){const r=e.DesignHelper.getElementFromPoint(n,t,!0),i=e.DesignHelper.getLayoutContainer(r.element);return new Promise((r,s)=>{const l=e.Utilities.getObjectFromName(o),a=new e.UI[l.controlName];a.element.style.left=n+"px",a.element.style.top=t+"px",WinJS.UI.processAll(i.element).then(e=>{i.element.appendChild(a.element);const o=getElementFromPoint(n+1,t+1,!0);r(o)})})}))},n.removeWinControl=function removeWinControl(n){return e.DesignHelper.currentElement="string"==typeof n?e.DesignHelper.getElementFromUniqueID(n):n,e.DesignHelper.currentElement.element.winControl.dispose(),e.DesignHelper.currentElement.element.parentNode.removeChild(e.DesignHelper.currentElement.element),e.DesignHelper.currentElement.element.innerText="",e.DesignHelper.currentElement.element=null,e.DesignHelper.currentElement=null,!0},n.loadPage=function loadPage(n,t,o,r){return __awaiter(this,void 0,void 0,(function*(){let i=t;return new Promise((s,l)=>{try{const o="ThemeName";let r=e.Internal.getQueryVariable(o);if(!r){const e=i.split("&");for(let n=0;n<e.length;n++){const t=e[n].split("=");t[0]===o&&(r=t[1])}}r&&changeTheme(r),n.element.winControl.pageName=t}catch(e){}n.element.winControl.addEventListener("navigated",(function navigatedEvent(){n.element.winControl.removeEventListener("navigated",navigatedEvent),n.element.winControl.width=o,n.element.winControl.height=r;const e=window.setImmediate(()=>{window.clearImmediate(e);try{WinJS.UI.processAll(n.element).then(e=>{s(n)})}catch(e){l(n)}})}))})}))},n.addUniqueID=function addUniqueID(){let e=1;Document.prototype.hasOwnProperty("uniqueID")||(console.log("'document.uniqueID' not implemented; creating shim"),Object.defineProperty(Document.prototype,"uniqueID",{get:()=>e++,configurable:!1,enumerable:!1}),Object.defineProperty(Element.prototype,"uniqueID",{get:function(){return Object.defineProperty(this,"uniqueID",{value:"vw_id_"+document.uniqueID,writable:!1,configurable:!1,enumerable:!1}),this.uniqueID},configurable:!0,enumerable:!1}))},n.setLogLevel=function setLogLevel(n){let t="";if(n)t=n.toLowerCase();else{const n=e.Internal.getQueryVariable("Severity");t=n&&n.toLowerCase()}switch(t){case"log":e.DesignHelper.debuggerLog=!0,e.DesignHelper.debuggerInfoLog=!0,e.DesignHelper.debuggerWarnLog=!0,e.DesignHelper.debuggerErrorLog=!0;break;case"info":e.DesignHelper.debuggerLog=!1,e.DesignHelper.debuggerInfoLog=!0,e.DesignHelper.debuggerWarnLog=!0,e.DesignHelper.debuggerErrorLog=!0;break;case"warn":e.DesignHelper.debuggerLog=!1,e.DesignHelper.debuggerInfoLog=!1,e.DesignHelper.debuggerWarnLog=!0,e.DesignHelper.debuggerErrorLog=!0;break;case"error":case void 0:e.DesignHelper.debuggerLog=!1,e.DesignHelper.debuggerInfoLog=!1,e.DesignHelper.debuggerWarnLog=!1,e.DesignHelper.debuggerErrorLog=!0;break;default:e.DesignHelper.debuggerLog=!1,e.DesignHelper.debuggerInfoLog=!1,e.DesignHelper.debuggerWarnLog=!0,e.DesignHelper.debuggerErrorLog=!0}},n.makeString=function makeString(n,t=","){if(null===n)return"NULL";if(e.isUndefined(n))return"UNDEFINED";if(e.isString(n))return n.toString();{let e="{\n",o=!0,r={};for(r in n)n.hasOwnProperty(r)&&(o?o=!1:e+=t,e=e+r+":"+n[r]);return e+"\n}"}},n.updateDataWinOptions=function updateDataWinOptions(n,t,o){let r=!1,i="";const s=n.replace(/[{}]+/g,"").replace(/\s+/g,"").replace(/['"]+/g,"").split(",");if(n.length>0)for(let n=0;n<s.length;n++){const l=s[n].split(":"),a=l[0];let g=l[1];if(l[0]===t&&(g=o,r=!0),!e.isNullOrEmpty(g)){const e=g;try{g=JSON.parse(g)}catch(n){g=e}}e.isBoolean(g)||e.isNumber(g)?i+=`'${a}': ${g}, `:i+=`'${a}': '${g}', `}return r||(e.isBoolean(o)||e.isNumber(o)?i+=`'${t}': ${o}`:i+=`'${t}': '${o}'`),e.stringEndsWith(i,", ")&&(i=i.substring(0,i.length-2)),i="{"+i+"}",console.log(i),i},n.setInlineOptions=function setInlineOptions(e,n,t){e.element.winControl[n]=t,e.element.winControl.inlineOptions[n]=t},n.changeTheme=changeTheme}(e.DesignHelper||(e.DesignHelper={}))}(VisiWin||(VisiWin={})),function(e){!function(n){!function(n){"use strict";n.Socket=class Socket{constructor(e){try{this.ws=new WebSocket(e)}catch(e){}this.ws.onopen=e=>{this.OnOpenHandler(e)},this.ws.onmessage=e=>{this.OnMessageHandler(e)},this.ws.onclose=e=>{this.OnCloseHandler(e)},this.ws.onerror=e=>{this.OnErrorHandler(e)}}send(e){if(this.ws.readyState===this.ws.OPEN){const n=JSON.stringify(e);this.ws.send(n)}}OnOpenHandler(e){console.log("Connection open...")}OnMessageHandler(n){const t=e.DesignHelper.parseToJsonCommand(n);e.DesignHelper.executeCommand(t)}OnCloseHandler(e){console.log("Connection is closed...");const n={code:e.code,reason:e.reason,timeStamp:e.timeStamp,wasClean:e.wasClean};console.log(n)}OnErrorHandler(e){console.log("Connection error...");const n={evt_type:e.type,evt_timeStamp:e.timeStamp,colno:e.colno,lineno:e.lineno,filename:e.filename,message:e.message};console.log(n)}}}(n.Websocket||(n.Websocket={}))}(e.DesignHelper||(e.DesignHelper={}))}(VisiWin||(VisiWin={})),function(e){!function(e){"use strict"}(e.DesignHelper||(e.DesignHelper={}))}(VisiWin||(VisiWin={})),document.addEventListener("DOMContentLoaded",e=>{if(VisiWin.DesignHelper.addUniqueID(),VisiWin.isNullOrUndefined(VisiWin.DesignHelper.Websocket.currentSocket)&&VisiWin.Internal.getQueryVariable){const e=VisiWin.Internal.getQueryVariable("DesignerPort");e&&(VisiWin.DesignHelper.Websocket.currentSocket=new VisiWin.DesignHelper.Websocket.Socket("ws://localhost:"+e))}VisiWin.DesignHelper.setLogLevel()});